(function () {
  var ei = window.location.hostname == "www.vectorpea.com" ? 1 : 0,
    cP = !0;
  (function () {
    var j;
    try {
      j = window.localStorage;
    } catch (gn) {}
    var q = {};
    if (j) {
      var m = j.getItem("_ppp");
      if (m) q = JSON.parse(m);
      else {
        var n =
          "0_uid 0_provider 0_token 0_stateLocal capShown localFonts __glm dpiUnit swfPrms lpOpt".split(
            " "
          );
        for (var y = 0; y < n.length; y++) {
          var G = j.getItem(n[y]);
          if (G != null) q[n[y]] = G;
        }
      }
    }
    var W = (window.locStor = {});
    W.setItem = function (T, b) {
      q[T] = b;
      if (j) j.setItem("_ppp", JSON.stringify(q));
    };
    W.getItem = function (T) {
      return q[T];
    };
    W.removeItem = function (T) {
      delete q[T];
      if (j) j.setItem("_ppp", JSON.stringify(q));
    };
    if (ei == 0) {
      window.showCap = function () {
        k(!0);
      };
      window.hideCap = function () {
        k(!1);
      };
      function k(T) {
        document
          .getElementById("cap")
          .setAttribute("style", T ? "" : "display:none;");
        window.locStor.setItem("capShown", "" + T);
      }
      if (
        window.locStor.getItem("capShown") == "false" ||
        window.self != window.top
      ) {
      } else window.showCap();
    }
  })();
  var lw = {
    cG: 0,
    Nn: null,
    eq: null,
    a2r: null,
    cB: null,
    IJ: null,
    aGr: !0,
    ami: 0,
    JS: !1,
  };
  lw.event = function (j, q, m) {
    if (ei != 0) return;
    if (q != null && q < Math.random()) return;
    if (m == null) m = 0;
    var n = new XMLHttpRequest();
    n.open(
      "GET",
      "/papi/event.php?id=" + j + "&g=" + m + "&rnd=" + Math.random()
    );
    n.send();
  };
  lw.sX = function (j) {
    if (ei != 0) j = "//www.photopea.com/" + j;
    return j;
  };
  lw.P0 = function (j) {
    var q = location.href;
    if (q.indexOf("photopea.com") != -1 || q.indexOf("vectorpea.com") != -1)
      return "//vecpea.com/" + j;
    return lw.sX(j);
  };
  lw.eo = function () {
    var j = lw.xq();
    if (j == null) return null;
    var q = J.UD(24) ? " " : "",
      m = J.rU[J.v9("Uu," + q)];
    m = m[J.v9(q + "$/")];
    var n = lw.ag1(1, 999);
    if (n && lw.cr(n) * 50 > m() / 20) return [0, n];
    var G = j.inTeams;
    if (G)
      for (var y = 0; y < G.length; y++)
        if (G[y][1] * 50 > m() / 20) return [1, G[y]];
    return null;
  };
  lw.N$ = function () {
    return lw.amm() != null;
  };
  lw.Mk = function () {
    return lw.cr(lw.ag1(1e3, 999999999));
  };
  lw.cr = function (j) {
    return j == null ? 0 : j[0] + j[1] * 24 * 60 * 60;
  };
  lw.ag1 = function (j, q) {
    var m = lw.xq(),
      n = m.pmnts,
      G = 0,
      W = null;
    if (n == null || n.length == 0) return 0;
    for (var y = 0; y < n.length; y++) {
      var k = n[y],
        T = lw.cr(k);
      if (j <= k[2] && k[2] <= q)
        if (G < T) {
          G = T;
          W = k;
        }
    }
    return W;
  };
  lw.xq = function () {
    return lw.IJ;
  };
  lw.zw = function (j) {
    window.addEventListener("message", lw.aaM, !1);
    setInterval(lw.ac0, 5e3);
    if (lw.N$() && navigator.onLine) {
      lw.Nn = j;
      lw.ES();
    } else setTimeout(j, 1);
  };
  lw.ac0 = function () {
    if (lw.N$() && lw.JS) {
      lw.aAQ(lw._4());
      lw.JS = !1;
    }
  };
  lw.ki = function (j) {
    lw.Nn = j;
    var q =
      "https://www.photopea.com/papi/login.php?redirect=" +
      encodeURIComponent(window.location.href);
    lw.a2r = window.open(q, "_blank");
  };
  lw.aDb = function () {
    var j = window.locStor;
    j.removeItem(lw.cG + "_uid");
    j.removeItem(lw.cG + "_provider");
    j.removeItem(lw.cG + "_token");
    lw.IJ = null;
  };
  lw.aaM = function (j) {
    if (j.data instanceof ArrayBuffer || j.data instanceof Object) return;
    if (j.data.charAt(0) != "{") return;
    var q = JSON.parse(j.data);
    if (q.prms == null) return;
    var m = q.prms.split(",");
    if (m[0] == "papi_logged_in") {
      var n = window.locStor;
      n.setItem(lw.cG + "_uid", m[1]);
      lw.DG(m[2]);
      n.setItem(lw.cG + "_provider", m[3]);
      lw.a2r.close();
      lw.ES();
    }
    if (m[0] == "payment_complete") {
      lw.cB.close();
      lw.ES();
    }
  };
  lw.amm = function () {
    var j = window.locStor.getItem(lw.cG + "_token");
    if (j != null && Date.now() * 0.001 + 10 < parseInt(j.split("-")[0]))
      return j;
    return null;
  };
  lw.DG = function (j) {
    var q = window.locStor.getItem(lw.cG + "_token");
    if (q != null && parseInt(j.split("-")[0]) < parseInt(q.split("-")[0]))
      return;
    window.locStor.setItem(lw.cG + "_token", j);
    clearTimeout(lw.ami);
    lw.ami = setTimeout(
      lw.afn,
      Math.min(1e9, parseInt(j.split("-")[0]) * 1e3 - Date.now() - 20 * 1e3)
    );
  };
  lw.axh = function (j, q, m, n) {
    if (!navigator.onLine) throw "a";
    var G = new XMLHttpRequest();
    G.open("POST", "https://www.photopea.com/papi/record_new.php", !0);
    G.onload = m;
    var W = lw.Eh(0) + "&read=3&tuid=" + j + "&tid=" + q;
    if (n) W += "&tpl=" + encodeURIComponent(n);
    G.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    G.send(W);
  };
  lw.afn = function () {
    if (!navigator.onLine) throw "a";
    var j = new XMLHttpRequest();
    j.open("POST", "https://www.photopea.com/papi/record_new.php", !0);
    j.onload = lw.aoC;
    var q = lw.Eh(0) + "&read=2";
    j.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    j.send(q);
  };
  lw.ES = function () {
    if (!navigator.onLine) throw "b";
    var j = new XMLHttpRequest();
    j.open("POST", "https://www.photopea.com/papi/record_new.php", !0);
    j.onload = lw.atD;
    var q = lw.Eh(0) + "&read=1";
    j.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    j.send(q);
  };
  lw.aAQ = function (j) {
    if (!navigator.onLine) throw "c";
    var q = new XMLHttpRequest();
    q.open("POST", "https://www.photopea.com/papi/record_new.php", !0);
    q.onload = lw.aKm;
    var m =
      lw.Eh(0) +
      "&read=0&score=" +
      (j.tpl ? 1 : 0) +
      "&spublic=" +
      lw.aGr +
      "&record=" +
      encodeURIComponent(JSON.stringify(j));
    q.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    q.send(m);
  };
  lw.atD = function (j) {
    var q = JSON.parse(j.target.response);
    if (q.error) {
    } else {
      lw.IJ = q.user;
      var m = lw._4(),
        n = q.record;
      if (q.record) {
        lw.aGr = q.spublic;
        lw.agW(n);
      } else if (m) lw.aAQ(m);
    }
    lw.DG(q.token);
    var G = lw.Nn,
      W = lw.eq;
    if (G) {
      lw.Nn = null;
      G();
    }
    if (W) {
      lw.eq = null;
      W();
    }
  };
  lw.aoC = function (j) {
    var q = JSON.parse(j.target.response);
    lw.DG(q.token);
  };
  lw.aKm = function (j) {
    var q = JSON.parse(j.target.response);
    lw.DG(q.token);
    if (lw.eq) lw.ES();
  };
  lw.Eh = function (j) {
    var q = window.locStor;
    return (
      "app=" +
      j +
      "&uid=" +
      q.getItem(lw.cG + "_uid") +
      "&token=" +
      q.getItem(lw.cG + "_token")
    );
  };
  lw.PZ = function (j) {
    if (j) {
      lw.eq = j;
      lw.ES();
    }
    return lw._4();
  };
  lw.$R = function (j, q) {
    lw.agW(j);
    lw.JS = !0;
    if (q) {
      lw.eq = q;
      lw.ac0();
    }
  };
  lw._4 = function () {
    var j = window.locStor.getItem(lw.cG + "_stateLocal"),
      q;
    if (j == null) return null;
    try {
      q = JSON.parse(j);
    } catch (gn) {
      return null;
    }
    return q;
  };
  lw.agW = function (j) {
    var q = JSON.stringify(j);
    window.locStor.setItem(lw.cG + "_stateLocal", q);
  };
  lw.order = function (j, q, m) {
    lw.Nn = m;
    var n = window.locStor,
      G =
        "https://www.photopea.com/papi/order.php?ptype=" +
        q +
        "&param=" +
        j +
        "&uid=" +
        n.getItem(lw.cG + "_uid") +
        "&token=" +
        n.getItem(lw.cG + "_token");
    lw.cB = window.open(G, "_blank");
  };
  lw.aDO = function (j, q) {
    lw.Nn = q;
    var m = window.locStor,
      n =
        "https://www.photopea.com/papi/insertKey.php?key=" +
        j +
        "&uid=" +
        m.getItem(lw.cG + "_uid") +
        "&token=" +
        m.getItem(lw.cG + "_token");
    lw.cB = window.open(n, "_blank");
  };
  var bA = {};
  bA.a48 = function (j, q) {
    if (typeof q != "string") throw "e";
    var m = J.rU[J.v9("%|xK")];
    if (m == null) return "XYP";
    var n = j.toString(16).slice(0, 4),
      G = n + q + "aQYRDCB";
    return m(G).slice(5, 17) + n.split("").reverse().join("");
  };
  bA.YY = function () {
    var j = J.rU[J.Cs("3M" + (J.UD(26) ? "]K" : "fa"))];
    j = j[J.Cs("][" + (!J.UD(28) ? "," : "`"))];
    return Math.floor(j() / 1e3);
  };
  bA.UD = function (j) {
    var q = 0;
    for (var y = 0; y < j; y++) q += Math.random();
    return q / j < Math.PI / 4;
  };
  bA.Cs = function (j) {
    var q = "";
    if (!bA.UD(28)) j += "-3";
    for (var y = 0; y < j.length; y++) {
      var m = j.charCodeAt(y);
      if (m < 32 || 126 < m) throw "e";
      q += String.fromCharCode(32 + ((m - 32 + 17 + 3 * y) % 95));
    }
    return q;
  };
  bA.v9 = function (j) {
    var q = "";
    if (!bA.UD(28)) j += "-1";
    for (var y = 0; y < j.length; y++) {
      var m = j.charCodeAt(y);
      m -= 32;
      m += 95e4;
      m -= 17 + 3 * y;
      m = m % 95;
      q += String.fromCharCode(32 + m);
    }
    return q;
  };
  bA.a7 = bA.Cs("XP");
  bA.S_ = bA.Cs("XYP");
  bA.Uq = bA.Cs("c[Y");
  bA.aAS = bA.Cs("][`");
  bA.wU = bA.Cs("SU_");
  bA.vk = bA.Cs("b^L");
  bA.aJS = bA.Cs("61=");
  bA.gj = bA.Cs("Q[M_");
  bA.lM = bA.Cs("WQJJ");
  bA.mg = bA.Cs("W^NL");
  bA.a6U = bA.Cs("[QOZ");
  bA.HP = bA.Cs("[[JJ");
  bA.a3f = bA.Cs("[[PU");
  bA.i3 = bA.Cs("^\\NT");
  bA.aAp = bA.Cs("bQUL");
  bA.tQ = bA.Cs("bQWJ");
  bA.aab = bA.Cs("3M]K");
  bA.ahe = bA.Cs("<M]N");
  bA.aK3 = bA.Cs("][WK");
  bA.ax8 = bA.Cs("?;<:");
  bA.nZ = bA.Cs("P_bTF");
  bA.cU = bA.Cs("RXRIN");
  bA.ru = bA.Cs("aUPNW");
  bA.Tg = bA.Cs("b`bRH");
  bA.agi = bA.Cs("fUMZK");
  bA.akW = bA.Cs("Q[]ZRM");
  bA.ay1 = bA.Cs("WQRMKT");
  bA.aB2 = bA.Cs("WUMJHN");
  bA.pm = bA.Cs("XR[GPE");
  bA.a5i = bA.Cs("aMWJRM");
  bA.AP = bA.Cs("bO[OST");
  bA.afd = bA.Cs("cM[MHT");
  bA.aqV = bA.Cs("^Z5OQE");
  bA.xA = bA.Cs("^ZUUDD");
  bA.a9O = bA.Cs("_M[KQT");
  bA.aw4 = bA.Cs("POLUXNQ");
  bA.H3 = bA.Cs("R[WLLRJ");
  bA.aHH = bA.Cs("SU\\VOAV");
  bA.aBp = bA.Cs("XZMK[/C");
  bA.aJh = bA.Cs("^ZNXUOO");
  bA.OD = bA.Cs("aQYRDCB");
  bA.$D = bA.Cs("[[LGWILH");
  bA.Nv = bA.Cs("S[L[PEKN");
  bA.anI = bA.Cs("_[\\OWILH");
  bA.qf = bA.Cs("aQOKURBL");
  bA.awc = bA.Cs("aQUGWIS?");
  bA.hw = bA.Cs("aQ\\VRNP?");
  bA.a3u = bA.Cs("XZWKU(1'#");
  bA.a7o = bA.Cs("SQLUGE2, ");
  bA.a9j = bA.Cs("]M_OJAQII");
  bA.pc = bA.Cs("bQ]:LMBILH");
  bA.akM = bA.Cs("UU[YW#ECC8");
  bA.a5t = bA.Cs("P^[G\\BR@=9C");
  bA.Yn = bA.Cs("cQaZ&OKN<BE");
  bA.lH = bA.Cs("P\\YKQD B@@5");
  bA.a5Y = bA.Cs("aQVUYE B@@5");
  bA.a4b = bA.Cs("bQ]/QTBLM5=");
  bA.OB = bA.Cs("bQ]'WTOC9IE3");
  bA.auU = bA.Cs("XZ\\KUT~?=CC3");
  bA.aAq = bA.Cs("aQ\\VRNP?+MA3");
  bA.DR = bA.Cs('R^NGWE"F<A6<?');
  bA.a9f = bA.Cs("VQ]+OEJ?EHrGs,");
  bA.rW = bA.Cs("G95.WTM,<EF3><");
  bA.aFb = bA.Cs("PZLKVTLL&F:5468");
  bA.yV = bA.Cs("PPM+YEKN#=DB06*4");
  bA.a8h = bA.Cs("bQ]8HQR?JHx3,,*4");
  bA.agc = bA.Cs("SQLUGE2, v@;;73'-0");
  function gn(j) {
    this.z_ = {};
    this.aym = !1;
    this.lP = 0;
    this.tG();
    if (j != !0) window.__kb = this;
  }
  gn.UL = null;
  gn.prototype.tG = function () {
    var j = navigator.keyboard;
    if (j && window.top == window.self)
      j.getLayoutMap().then(function (q) {
        gn.UL = q;
      });
  };
  gn.prototype.ak$ = function (j) {
    this.aym = j;
  };
  gn.prototype.axe = function () {
    return this.aym;
  };
  gn.prototype.ayH = function (j) {
    var q = { shiftKey: gn.X6, altKey: gn.O4, ctrlKey: gn.A8 };
    for (var m in q) {
      var n = j[m],
        G = q[m],
        W = this.M(G);
      if (!n && W) {
        for (var y = 0; y < G.CR.length; y++) this.U5(G.CR[y]);
      }
    }
  };
  gn.prototype.B2 = function (j) {
    this.lP++;
    this.z_[j] = !0;
  };
  gn.prototype.U5 = function (j) {
    this.lP--;
    delete this.z_[j];
    if (this.lP <= 0 || gn.Uw(j, gn.amy)) this.reset();
  };
  gn.prototype.M = function (j) {
    for (var y = 0; y < j.CR.length; y++) if (this.z_[j.CR[y]]) return !0;
    return !1;
  };
  gn.prototype.reset = function () {
    this.z_ = {};
    this.lP = 0;
  };
  gn.prototype.m2 = function (j) {
    var q = this,
      m = q.M(gn.X6) ? 10 : 1,
      n = 0,
      G = 0;
    if (q.M(gn.MN)) n = -m;
    else if (q.M(gn.Al)) n = m;
    else if (q.M(gn.w0)) G = -m;
    else if (q.M(gn.K3)) G = m;
    var W = new ea(n, G);
    if (j != null) {
      var k = new k$();
      k.rotate(j);
      W = k.uL(W);
      if (Math.abs(W.x) < Math.abs(W.y)) W.x = 0;
      else W.y = 0;
      W.x = Math.round(W.x);
      W.y = Math.round(W.y);
    }
    return W;
  };
  gn.prototype.TC = function () {
    var j = this,
      q = gn.xx;
    for (var y = 0; y < 10; y++) if (j.M(q[y])) return y;
    return -1;
  };
  gn.Uw = function (j, q) {
    return q.CR.indexOf(j) != -1;
  };
  gn.a2x = function (j, q) {
    return gn.Uw(gn.yf(j), q);
  };
  gn.u0 = function () {
    return navigator.userAgent.toLowerCase().indexOf("mac") != -1;
  };
  gn.aG$ =
    "ZoomToggle BrightnessDown BrightnessUp AudioVolumeMute AudioVolumeDown AudioVolumeUp LaunchApplication1 F1 F2 F3 F4 F5 F6 F7 F8 F9 F10 F11 F12 Enter Shift Escape KeyV".split(
      " "
    );
  if (gn.u0()) gn.aG$.push("ControlLeft", "ControlRight");
  gn.aIZ = function (j) {
    var q = j.code;
    if (q == "") return !1;
    var m = gn.Uw;
    if (j.altKey && !j.shiftKey && !j.ctrlKey) {
      var n = gn.xx.concat([gn.h5, gn.Nc, gn.Z7, gn.UZ]),
        G = !1;
      for (var y = 0; y < n.length; y++) if (m(q, n[y])) return !1;
    }
    if (q == "KeyQ" && j.metaKey) return !1;
    if (q == "KeyH" && j.metaKey && j.altKey) return !1;
    return gn.aG$.indexOf(q) == -1 || (j.shiftKey && (q == "F5" || q == "F6"));
  };
  gn.aEa = function (j) {
    var q = gn;
    if (j.ctrlKey && (q.Uw(j.code, q.h5) || q.Uw(j.code, q.Nc)))
      j.preventDefault();
  };
  gn.dT = function (j) {
    j.addEventListener("keydown", gn.aEa, !1);
  };
  gn.uj = function (j) {
    if (typeof j == "string") return j;
    var q = navigator.platform.toUpperCase().indexOf("MAC") >= 0;
    if (j == null) return "";
    var m = [];
    for (var y = 0; y < j.length; y++) {
      var n = j[y].Lj ? j[y].Lj : j[y];
      if (q && j[y].I$) n = j[y].I$;
      m.push(n);
    }
    if (q || m.length == 1) return m.join(" ");
    else {
      var G = m.pop();
      return m.join("+") + " + " + G;
    }
  };
  gn.yf = function (j) {
    if (gn.UL == null) window.__kb.tG();
    var q = j.code,
      m = gn.UL,
      n = {
        "+": "NumpadAdd",
        "-": "NumpadSubtract",
        ".": "Period",
        ";": "Semicolon",
      };
    if (m && m.get(q)) {
      var G = m.get(q).toLowerCase(),
        W = G.charCodeAt(0);
      if (97 <= W && W <= 122) {
        var k = "Key" + G.toUpperCase();
        q = k;
      } else if (n[G]) q = n[G];
      return q;
    }
    var G = j.key.toLowerCase(),
      W = G.charCodeAt(0);
    if (G.length == 1) {
      if (97 <= W && W <= 122) {
        var k = "Key" + G.toUpperCase();
        q = k;
      } else if (n[G]) q = n[G];
    }
    if (G == "control" && q != "") q = "ControlLeft";
    return q;
  };
  gn.auO = 0;
  gn.aaZ = function (j, q) {
    var m = 0;
    if (Date.now() - gn.auO > 1e3) {
      m = q == 0 ? 100 : q * 10;
    } else {
      if (j % 10 != 0) j *= 10;
      m = (j + q) % 100;
    }
    gn.auO = Date.now();
    return m;
  };
  gn.auP = { nm: "No Touch", CR: ["NoTouch"] };
  gn.FP = { Lj: "Enter", CR: ["Enter", "NumpadEnter"] };
  gn.X6 = { Lj: "Shift", I$: "\u21E7", CR: ["ShiftLeft", "ShiftRight"] };
  gn.amy = { Lj: "Meta", CR: ["MetaLeft", "MetaRight", "OSLeft", "OSRight"] };
  gn.A8 = {
    Lj: "Ctrl",
    I$: "\u2318",
    CR: gn.u0()
      ? ["MetaLeft", "MetaRight", "OSLeft", "OSRight"]
      : ["ControlLeft", "ControlRight"],
  };
  gn.O4 = { Lj: "Alt", I$: "\u2325", CR: ["AltLeft", "AltRight"] };
  gn.awW = { Lj: "CtrlOrAlt", CR: gn.A8.CR.concat(gn.O4.CR) };
  gn.k9 = { Lj: "Escape", CR: ["Escape"] };
  gn.Xe = { Lj: "Space", CR: ["Space"] };
  gn.da = { Lj: "Tab", CR: ["Tab"] };
  gn.m_ = { Lj: "Home", CR: ["Home"] };
  gn.aHE = { Lj: "End", CR: ["End"] };
  gn.MN = { Lj: "Left", CR: ["ArrowLeft"] };
  gn.w0 = { Lj: "Up", CR: ["ArrowUp"] };
  gn.Al = { Lj: "Right", CR: ["ArrowRight"] };
  gn.K3 = { Lj: "Down", CR: ["ArrowDown"] };
  gn.h5 = { Lj: "+", CR: ["NumpadAdd", "Equal"] };
  gn.Nc = { Lj: "-", CR: ["NumpadSubtract", "Minus"] };
  gn.WU = { Lj: ";", CR: ["Semicolon"] };
  gn.adt = { Lj: "Dead", CR: ["Dead"] };
  gn.an3 = { Lj: "=", CR: ["Equal"] };
  gn.N7 = { Lj: "Backspace", CR: ["Backspace"] };
  gn.gv = { Lj: "Delete", CR: ["Delete"] };
  gn.afA = { Lj: "Backslash", CR: ["Backslash", "IntlBackslash"] };
  gn.apE = { Lj: "Slash", CR: ["NumpadDivide", "Slash"] };
  gn.a4p = { Lj: "Backquote", CR: ["Backquote"] };
  gn.Z7 = { Lj: "[", CR: ["BracketLeft"] };
  gn.UZ = { Lj: "]", CR: ["BracketRight"] };
  gn.$b = { Lj: ".", CR: ["Period"] };
  gn.cb = { Lj: ",", CR: ["Comma"] };
  gn.d0 = { Lj: "'", CR: ["Quote"] };
  gn.Y = { Lj: "A", CR: ["KeyA"] };
  gn.xa = { Lj: "B", CR: ["KeyB"] };
  gn.dV = { Lj: "C", CR: ["KeyC"] };
  gn.l_ = { Lj: "D", CR: ["KeyD"] };
  gn.E = { Lj: "E", CR: ["KeyE"] };
  gn.gM = { Lj: "F", CR: ["KeyF"] };
  gn.Vj = { Lj: "G", CR: ["KeyG"] };
  gn.jF = { Lj: "H", CR: ["KeyH"] };
  gn.JC = { Lj: "I", CR: ["KeyI"] };
  gn.Uv = { Lj: "J", CR: ["KeyJ"] };
  gn.aj = { Lj: "K", CR: ["KeyK"] };
  gn.ji = { Lj: "L", CR: ["KeyL"] };
  gn.Sx = { Lj: "M", CR: ["KeyM"] };
  gn.Jd = { Lj: "N", CR: ["KeyN"] };
  gn.pd = { Lj: "O", CR: ["KeyO"] };
  gn.cp = { Lj: "P", CR: ["KeyP"] };
  gn.apK = { Lj: "Q", CR: ["KeyQ"] };
  gn.Fb = { Lj: "R", CR: ["KeyR"] };
  gn.ng = { Lj: "S", CR: ["KeyS"] };
  gn.a_ = { Lj: "T", CR: ["KeyT"] };
  gn.Si = { Lj: "U", CR: ["KeyU"] };
  gn.qj = { Lj: "V", CR: ["KeyV"] };
  gn.aIr = { Lj: "W", CR: ["KeyW"] };
  gn.Bi = { Lj: "X", CR: ["KeyX"] };
  gn.by = { Lj: "Y", CR: ["KeyY"] };
  gn.AQ = { Lj: "Z", CR: ["KeyZ"] };
  gn.Uj = { Lj: "0", CR: ["Numpad0", "Digit0"] };
  gn.kF = { Lj: "1", CR: ["Numpad1", "Digit1"] };
  gn.aKf = { Lj: "2", CR: ["Numpad2", "Digit2"] };
  gn.auS = { Lj: "3", CR: ["Numpad3", "Digit3"] };
  gn.ak5 = { Lj: "4", CR: ["Numpad4", "Digit4"] };
  gn.a2m = { Lj: "5", CR: ["Numpad5", "Digit5"] };
  gn.a7S = { Lj: "6", CR: ["Numpad6", "Digit6"] };
  gn.bY = { Lj: "7", CR: ["Numpad7", "Digit7"] };
  gn.alI = { Lj: "8", CR: ["Numpad8", "Digit8"] };
  gn.auH = { Lj: "9", CR: ["Numpad9", "Digit9"] };
  gn.xx = [
    gn.Uj,
    gn.kF,
    gn.aKf,
    gn.auS,
    gn.ak5,
    gn.a2m,
    gn.a7S,
    gn.bY,
    gn.alI,
    gn.auH,
  ];
  gn.a0h = { Lj: "F1", CR: ["F1"] };
  gn.ayg = { Lj: "F2", CR: ["F2"] };
  gn.axD = { Lj: "F3", CR: ["F3"] };
  gn.amf = { Lj: "FF", CR: ["F4"] };
  gn.a1O = { Lj: "F5", CR: ["F5"] };
  gn.a2a = { Lj: "F6", CR: ["F6"] };
  gn.aJa = { Lj: "F7", CR: ["F7"] };
  gn.arN = { Lj: "F8", CR: ["F8"] };
  gn.aM8 = { Lj: "F9", CR: ["F9"] };
  gn.al2 = { Lj: "F10", CR: ["F10"] };
  gn.acP = { Lj: "F11", CR: ["F11"] };
  gn.aly = { Lj: "F12", CR: ["F12"] };
  function jK(j) {
    this.ZX = {};
    this.Q5 = {};
    this.a2y = 0;
    this.a1o = {};
    this.e8 = [];
    this.a58 = 0;
    this.HP = j;
    jK.tT = this;
  }
  jK.aA3 = function (j, q) {
    var y = 0,
      m = jK.Cb;
    while (y < m.length) {
      if (((q >>> y) & 1) == 1) break;
      y++;
    }
    if (y != 0 && jK.WV(j, [33, 126]) > 0.7) y = 0;
    if (q == 0 || m[y][1] == "") {
      if ((q & 15) != 0 && jK.WV(j, [33, 126]) > 0.7) y = 0;
      else if (q == 0) y = 0;
      else {
        y = 0;
      }
    }
    return m[y][1];
  };
  jK.e$ = 120;
  jK.FH = 20;
  jK.cols = 16;
  jK.$v = function (j) {
    var q = j.name.postScriptName;
    if (q == null) return null;
    return q.replace(/ /g, "-");
  };
  jK.ag3 = function (j) {
    var q = j.name,
      m = q.typoFamilyName,
      n = q.typoSubfamilyName,
      G = m != null && n != null,
      W = G ? m : q.fontFamily,
      k = G ? n : q.fontSubfamily;
    if (k == null) k = "Regular";
    var T = jK.awl,
      b = W.toLowerCase();
    for (var y = 0; y < T.length; y++) {
      if (T[y] == "roman") continue;
      if (b.endsWith(" " + T[y]) || b.endsWith("-" + T[y])) {
        var c = W.length - T[y].length,
          a = W.slice(c);
        W = W.slice(0, c - 1);
        if (a != "") {
          if (k == "Regular" || k == W + " Regular") k = a;
          else k = a + " " + k;
        }
        break;
      }
    }
    var f =
      "BPdots,Baloo,Diner,EB Garamond Initials,Encode Sans Semi Condensed,Encode Sans Semi Expanded,Changa,HVD Poster,IM FELL DW,IM FELL Double,IM FELL English,IM FELL FLOWERS,IM FELL French Canon,IM FELL Great Primer,itsadzoke,Noto Sans Cond,Noto Sans ExtCond,Noto Sans SemCond,Noto Serif Cond,Noto Serif ExtCond,Noto Serif SemCond,Office Code Pro,Mathlete,Mochiy Pop,Dehuti,Cicle,Chivo,JUICE,Lacuna,Latin Modern Mono,Latin Modern Sans,Latin Modern Roman,Latinia,Libre Barcode,Libre Caslon,Londrina,Panefresco,Qomolangma,UnifrakturMaguntia,WC Rhesus,WC Sold Out,WC Wunderbach,Walkway,Saira Condensed,Saira ExtraCondensed,Saira SemiCondensed".split(
        ","
      );
    for (var y = 0; y < f.length; y++)
      if (W.startsWith(f[y])) {
        var a = W.slice(f[y].length);
        W = f[y];
        if (a.startsWith(" ") || a.startsWith("-")) a = a.slice(1);
        if (a != "") {
          if (k == "Regular") k = a;
          else k = a + " " + k;
        }
        break;
      }
    var U = {
        "Caudex-BoldItalic": "Bold Italic",
        "Comfortaa-Light": "Light",
        "Comfortaa-Medium": "Medium",
        "Comfortaa-SemiBold": "SemiBold",
        DevroyeSCOSF: "Regular SCOSF",
        DevroyeUnicode: "Regular Unicode",
        "LeagueScriptThin-Regular": "Regular",
        "Monda-Bold": "Bold",
        "Nobile-Bold": "Bold",
        "Oswald-BoldItalic": "Bold Italic",
        "Oswald-HeavyItalic": "Heavy Italic",
        "Oswald-LightItalic": "Light Italic",
        "Oswald-MediumItalic": "Medium Italic",
        "Oswald-RegularItalic": "Regular Italic",
        "PaloAlto-Italic": "Heavy Italic",
      },
      Z = U[jK.$v(j)];
    if (Z) k = Z;
    return [W, k];
  };
  jK.prototype.a5Z = function (j) {
    var q = this.a2();
    for (var m in q) if (q[m][0] == j) this.yM(m);
  };
  jK.prototype.adF = function () {
    return Object.keys(this.Q5).length != 0;
  };
  jK.prototype.yM = function (j, q) {
    if (this.ZX[j]) return this.ZX[j];
    if (this.Q5[j]) return null;
    var m = null,
      n = this.a2();
    if (n[j] != null) m = n[j][5];
    if (m == null) {
      var G = jK.OD[j];
      if (G == null) {
        var W =
            "DejaVuSans DejaVuSans-Bold DejaVuSans-Oblique DejaVuSans-BoldOblique DejaVuSerif DejaVuSerif-Bold DejaVuSerif-Italic DejaVuSerif-BoldItalic".split(
              " "
            ),
          k = j.toLowerCase(),
          T = 0;
        if (k.indexOf("sans") != -1) T = 0;
        else if (k.indexOf("serif") != -1) T = 4;
        var b = k.indexOf("bold") != -1 || k.indexOf("-black") != -1,
          c =
            k.indexOf("italic") != -1 ||
            k.indexOf("oblique") != -1 ||
            k.endsWith("-it");
        if (b && c) T += 3;
        else if (c) T += 2;
        else if (b) T += 1;
        G = W[T];
      }
      if (q != null && q > 128) G = this.aB7(q, G);
      if (this.a1o[j] == null) {
        this.a1o[j] = 1;
        var a = Date.now() - this.a2y > 2e3 ? 2e3 : 0;
        this.a2y = Date.now();
        alert(j + " \u27A1 " + G, a);
      }
      return this.yM(G, q);
    }
    this.Q5[j] = "a";
    if (m == "--loc") jK.J9.load(j);
    else this.HP(m);
  };
  jK.prototype.aB7 = function (j, q, m) {
    var n = this.ZX[q];
    if (n && Typr.U.codeToGlyph(n, j) != 0) return q;
    var G = this.a2(),
      W = jK.a33(j),
      k = W[0];
    if (G[q] && (G[q][3] & k) == 0) {
      if (m)
        for (var y = 0; y < m.length; y++) {
          var T = m[y].Name,
            b = G[T];
          if (b && (b[3] & k) != 0) return T;
        }
      var T = jK.Cb[W[1]][4];
      if (G[T]) return T;
    }
    return q;
  };
  jK.a33 = function (j) {
    var q = jK.Cb,
      m = [0];
    for (var y = 0; y < q.length; y++) {
      var n = q[y][2];
      for (var G = 0; G < n.length; G += 2)
        if (n[G] <= j && j <= n[G + 1]) {
          m[0] += 1 << y;
          m.push(y);
        }
    }
    if (m.length == 1) m.push(0);
    return m;
  };
  jK.prototype.ajZ = function () {
    var j = this.e8,
      q = j[0],
      m = j.length - 1,
      n = Date.now() - this.alg > 2e3 ? 2e3 : 0;
    this.alg = Date.now();
    alert(
      g$.get([22, 6, 0]) +
        " " +
        q +
        (m == 0 ? "" : ", ... (" + m + ")") +
        " " +
        g$.get([23, 0]) +
        ".",
      1500
    );
    this.e8 = [];
  };
  jK.prototype.agI = function (j, q) {
    var m = jK.$v(j),
      n = this.a2(),
      G = n[m],
      W = jK.aqp(j);
    if (G == null) {
      if (q != !0) {
        this.e8.push(j.name.fullName);
        clearTimeout(this.a58);
        this.a58 = setTimeout(this.ajZ.bind(this), 300);
      }
      W.Ti = jK.arQ(j, W);
      this.eh(W);
    }
    delete this.Q5[m];
    this.ZX[m] = j;
  };
  jK.at1 = function () {
    var j = jK.Cb,
      q = [];
    for (var y = 0; y < j.length; y++) q.push(j[y][0]);
    return q;
  };
  jK.arQ = function (j, q) {
    var m = document.createElement("canvas"),
      n = m.getContext("2d"),
      G = (m.width = jK.e$),
      W = (m.height = jK.FH),
      k = (jK.FH * 1.2) / j.head.unitsPerEm;
    n.translate(4, jK.FH * 0.9);
    n.scale(k, -k);
    n.fillStyle = "#000000";
    var T = Typr.U.shape(j, jK.aA3(j, q[3]), !0);
    Typr.U.pathToContext(Typr.U.shapeToPath(j, T), n);
    n.fill();
    var b = n.getImageData(0, 0, G, W).data.buffer,
      c = gh.lj("PNG").Ev([[b, 0]], G, W, { qual: 1 });
    return "data:image/png;base64," + gh.Sk(c);
  };
  jK.Cb = [
    ["Latin-1", "Preview", [161, 169, 192, 246, 248, 255], 0.7, "DejaVuSans"],
    ["Latin Ext. A", "", [256, 383], 0.7, "DejaVuSans"],
    ["Greek", "Ελληνικά", [913, 929, 931, 969], 0.7, "DejaVuSans"],
    ["Cyrillic", "Привет", [1040, 1119], 0.7, "DejaVuSans"],
    [
      "Hebrew",
      "עברית",
      [1473, 1479, 1488, 1514, 1520, 1524],
      0.7,
      "DejaVuSans",
    ],
    ["Arabic", "اَلْعَرَبِيَّةُ", [1569, 1594, 1600, 1749], 0.4, "DejaVuSans"],
    [
      "Hangul",
      "예고편",
      [4352, 4607, 44032, 55203, 12593, 12686],
      0.7,
      "NotoSansKR-Regular",
    ],
    [
      "Chi-Jap-Kor",
      "預習",
      [12288, 12351, 12352, 12447, 12448, 12543, 19968, 40895],
      0.05,
      "DroidSansFallback",
    ],
    [
      "Tibetan",
      "ཐུགས\u0F0Bརྗེ\u0F0Bཆེ\u0F0D",
      [3840, 3948, 3953, 4044],
      0.7,
      "NotoSansTibetan",
    ],
    ["Devanagari", "पूर्वावलोकन", [2304, 2431], 0.7, "Hind-Regular"],
    ["Malayalam", "മലയാളം", [3328, 3455], 0.5, "Hind-Regular"],
    ["Thai", "ภาพตัวอย่าง", [3585, 3642, 3647, 3675], 0.7, "K2D-Regular"],
    [
      "Khmer",
      "មើលជាមុន",
      [6016, 6109, 6112, 6121, 6128, 6137],
      0.7,
      "Battambang-Regular",
    ],
    [
      "Vietnamese",
      "Xem trước",
      [
        192, 195, 200, 202, 204, 205, 210, 213, 217, 218, 221, 221, 224, 227,
        232, 234, 236, 237, 242, 245, 249, 250, 253, 253, 258, 259, 272, 273,
        296, 297, 360, 361, 416, 417, 431, 432, 7840, 7929,
      ],
      0.95,
      "DejaVuSans",
    ],
    ["Bengali", "স্বাধীনভাবে", [2432, 2559], 0.2, "FreeSans"],
    ["Geʽez", "ግዕዝ", [4608, 4991], 0.4, "FreeSans"],
    ["Emoji", "", [9728, 10095, 127744, 129535], 0.01, "DejaVuSans"],
  ];
  jK.aqp = function (j, q, m) {
    var n = j.name,
      b = 0;
    if (jK.$v(j) == null) {
      console.log(j);
      throw "No postScriptName!";
    }
    var G = jK.Cb,
      W = [];
    for (var y = 0; y < G.length; y++) {
      var k = G[y][2],
        T = G[y][3];
      W[y] = jK.WV(j, k) > T ? 1 : 0;
    }
    for (var y = 0; y < W.length; y++) b += W[y] << y;
    var c = jK.ag3(j);
    return [c[0], c[1], jK.$v(j), b, m, q];
  };
  jK.WV = function (j, q) {
    var m = 0,
      n = 0;
    for (var G = 0; G < q.length; G += 2) {
      for (var W = q[G]; W <= q[G + 1]; W++) {
        var k = Typr.U.codeToGlyph(j, W);
        if (k == 0) n++;
        else m++;
      }
    }
    return m / (m + n);
  };
  jK.aG9 = function (j, q) {
    if (j[2] < q[2]) return -1;
    if (j[2] > q[2]) return 1;
    return 0;
  };
  jK.aoR = function (j, q) {
    if (j[5] == "fs/" + j[2] + ".otf") j[5] = "";
    else if (j[5] == "gf/" + j[2] + ".otf") j[5] = "a";
    if (j[2] == (j[0] + "-" + j[1]).replace(/\s/g, "")) {
      j[2] = "";
    } else if (j[2] == j[0].replace(/\s/g, "")) {
      j[2] = "a";
    }
    if (q) {
      if (j[0] == q[0]) j[0] = "";
      if (j[1] == q[1]) j[1] = "";
      if (j[3] == q[3]) j[3] = "";
      if (j[4] == q[4]) j[4] = "";
    }
    return j.join(",");
  };
  jK.a4F = function (j, q) {
    j = j.split(",");
    if (j[0] == "") j[0] = q[0];
    if (j[1] == "") j[1] = q[1];
    if (j[3] == "") j[3] = q[3];
    else j[3] = parseInt(j[3]);
    if (j[4] == "") j[4] = q[4];
    else j[4] = parseInt(j[4]);
    if (j[2] == "") j[2] = (j[0] + "-" + j[1]).replace(/\s/g, "");
    else if (j[2] == "a") j[2] = j[0].replace(/\s/g, "");
    if (j[5] == "") j[5] = "fs/" + j[2] + ".otf";
    else if (j[5] == "a") j[5] = "gf/" + j[2] + ".otf";
    return j;
  };
  jK.OD = {
    ArialMT: "LiberationSans",
    "Arial-BoldMT": "LiberationSans-Bold",
    "Arial-ItalicMT": "LiberationSans-Italic",
    "Arial-BoldItalicMT": "LiberationSans-BoldItalic",
    TimesNewRomanPSMT: "LiberationSerif",
    "TimesNewRomanPS-BoldMT": "LiberationSerif-Bold",
    "TimesNewRomanPS-ItalicMT": "LiberationSerif-Italic",
    "TimesNewRomanPS-BoldItalicMT": "LiberationSerif-BoldItalic",
    CourierNewPSMT: "CourierPrime",
    "CourierNewPS-BoldMT": "CourierPrime-Bold",
    "CourierNewPS-ItalicMT": "CourierPrime-Italic",
    "CourierNewPS-BoldItalicMT": "CourierPrime-BoldItalic",
    Courier: "CourierPrime",
    "Courier-Bold": "CourierPrime-Bold",
    TrebuchetMS: "SourceSansPro-Regular",
    "TrebuchetMS-Bold": "SourceSansPro-Semibold",
    "TrebuchetMS-Italic": "SourceSansPro-It",
    "TrebuchetMS-BoldItalic": "SourceSansPro-SemiboldIt",
    "Times-Roman": "LiberationSerif",
    Impact: "Anton-Regular",
    Calibri: "SourceSansPro-Regular",
    "Calibri-Italic": "SourceSansPro-It",
    "Calibri-Bold": "SourceSansPro-Bold",
    CalibriBold: "SourceSansPro-Bold",
    "Times-Roman": "LiberationSerif",
    "Times-Italic": "LiberationSerif-Italic",
    "Times-Bold": "LiberationSerif-Bold",
    Helvetica: "LiberationSans",
    "Helvetica-Bold": "LiberationSans-Bold",
    "Helvetica-Oblique": "LiberationSans-Italic",
    "HelveticaNeue-Thin": "Roboto-Thin",
    "HelveticaNeue-Light": "Roboto-Light",
    HelveticaNeue: "Roboto-Regular",
    "HelveticaNeue-Roman": "Roboto-Regular",
    "HelveticaNeue-Medium": "Roboto-Medium",
    "HelveticaNeue-Bold": "Roboto-Bold",
    "HelveticaNeue-BoldItalic": "Roboto-BoldItalic",
    "HelveticaNeue-Black": "Roboto-Black",
    "HelveticaNeue-Heavy": "Roboto-Black",
    "BasisGrotesque-Regular": "Roboto-Regular",
    "BasisGrotesque-Medium": "Roboto-Medium",
    "BasisGrotesque-Bold": "Roboto-Bold",
    ElementaPro: "FreeMono",
    "ElementaPro-Bold": "FreeMonoBold",
    "SFProText-Light": "Roboto-Light",
    "SFProText-Regular": "Roboto-Regular",
    "SFProText-Roman": "Roboto-Regular",
    "SFProText-Medium": "Roboto-Medium",
    "SFProText-Semibold": "Roboto-Medium",
    "SFProText-Bold": "Roboto-Bold",
    "SFProText-BoldItalic": "Roboto-BoldItalic",
    "SFProText-Black": "Roboto-Black",
    "SFProText-Heavy": "Roboto-Black",
    "SFProDisplay-Light": "Roboto-Light",
    "SFProDisplay-Regular": "Roboto-Regular",
    "SFProDisplay-Roman": "Roboto-Regular",
    "SFProDisplay-Medium": "Roboto-Medium",
    "SFProDisplay-Semibold": "Roboto-Medium",
    "SFProDisplay-Bold": "Roboto-Bold",
    "SFProDisplay-BoldItalic": "SFProDisplay-BoldItalic",
    "SFProDisplay-Black": "Roboto-Black",
    "SFProDisplay-Heavy": "Roboto-Black",
    "SFUIText-Light": "Roboto-Light",
    "SFUIText-Regular": "Roboto-Regular",
    "SFUIText-Roman": "Roboto-Regular",
    "SFUIText-Medium": "Roboto-Medium",
    "SFUIText-Semibold": "Roboto-Medium",
    "SFUIText-Bold": "Roboto-Bold",
    "SFUIText-BoldItalic": "SFUIText-BoldItalic",
    "SFUIText-Black": "Roboto-Black",
    "SFUIText-Heavy": "Roboto-Black",
    Verdana: "DejaVuSans",
    "Verdana-Bold": "DejaVuSans-Bold",
    "Verdana-Italic": "DejaVuSans-Oblique",
    "Verdana-BoldItalic": "DejaVuSans-BoldOblique",
    "MyriadPro-Regular": "PTSans-Regular",
    "MyriadPro-Bold": "PTSans-Bold",
    "MyriadPro-LightIt": "PTSans-Italic",
    "MyriadPro-Semibold": "PTSans-Bold",
    "MyriadPro-Black": "PTSans-Bold",
    "MyriadPro-BlackCond": "PTSans-NarrowBold",
    "MyriadPro-SemiboldCond": "PTSans-NarrowBold",
    "MyriadPro-BoldCond": "PTSans-NarrowBold",
    Cambria: "Oranienbaum-Regular",
    Georgia: "CharisSIL",
    "Georgia-Bold": "CharisSIL-Bold",
    "Georgia-Italic": "CharisSIL-Italic",
    "Georgia-BoldItalic": "CharisSIL-BoldItalic",
    "AGaramondPro-Regular": "EBGaramond08-Regular",
    "AGaramondPro-Bold": "EBGaramond08-Bold",
    "AGaramondPro-Italic": "EBGaramond08-Italic",
    Garamond: "EBGaramond08-Regular",
    FontAwesome: "FontAwesome5FreeSolid",
    "ProximaNova-Regular": "Metropolis-Regular",
    "ProximaNova-Semibold": "Metropolis-SemiBold",
    "ProximaNova-Light": "Metropolis-Light",
    BellMT: "GalatiaSIL",
    "MinionPro-Regular": "CrimsonText-Regular",
    "LyonDisplay-Medium": "Buenard-Regular",
    "LyonText-Regular": "Buenard-Regular",
    "LyonDisplay-Black": "Buenard-Bold",
    "LyonText-Bold": "Buenard-Bold",
    "Interstate-Light": "Overpass-Light",
    "Interstate-Regular": "Overpass-Regular",
    "Interstate-Bold": "Overpass-Bold",
    "Interstate-BlackCondensed": "Overpass-Black",
    BullettoKilla: "Lobster-Regular",
    "Junegull-Regular": "RoundedMplus1c-Black",
    PalatinoLinotype: "TeXGyrePagella-Regular",
    "PalatinoLinotype-Bold": "TeXGyrePagella-Bold",
    "PalatinoLinotype-Italic": "TeXGyrePagella-Italic",
    "PalatinoLinotype-BoldItalic": "TeXGyrePagella-BoldItalic",
  };
  jK.prototype.a2 = function () {
    if (FNTS.map == null) {
      var j = FNTS.list,
        q = [];
      for (var y = 0; y < j.length; y++) {
        q[y] = jK.a4F(j[y], q[y - 1]);
        q[y].Wy = y;
        this.eh(q[y]);
      }
    }
    return FNTS.map;
  };
  jK.prototype.eh = function (j) {
    var q = j[0],
      m = j[1],
      n = j[5];
    if (FNTS.map == null) FNTS.map = {};
    FNTS.map[j[2]] = j;
    if (FNTS.mapFS == null) FNTS.mapFS = {};
    var G = FNTS.mapFS[q + "---" + m];
    FNTS.mapFS[q + "---" + m] = j;
    if (FNTS.mapSub == null) FNTS.mapSub = {};
    var W = FNTS.mapSub[q];
    if (W == null) W = FNTS.mapSub[q] = [];
    var k = W.indexOf(m);
    if (k == -1) W.push(m);
    else W[k] = m;
  };
  jK.aJA = function (j, q) {
    return jK.yE(j) - jK.yE(q);
  };
  jK.yE = function (j) {
    j = j.toLowerCase();
    var q = jK.a52(j) + (jK.abq(j) << 1);
    if (j.indexOf("cond") == -1) q += 1 << 25;
    return q;
  };
  jK.a52 = function (j) {
    return j.indexOf("italic") != -1 || j.indexOf("oblique") != -1 ? 1 : 0;
  };
  jK.awl =
    "two,four,eight,hair,thin,ultralight,extralight,exlight,light,regular,roman,book,medium,semi bold,semibold,demibold,extra bold,extrabold,bold,heavy,ultra,x black,black,extra".split(
      ","
    );
  jK.ayt = [
    "two",
    "four",
    "eight",
    "hair",
    "thin",
    "ultralight",
    "extralight",
    "light",
    ["regular", "roman", "book"],
    "medium",
    ["semibold", "demibold", "smbold"],
    "bold",
    ["extrabold", "exbold"],
    "heavy",
    "ultra",
    "black",
    "x black",
  ];
  jK.abq = function (j) {
    var q = jK.ayt,
      m = -1,
      n = -1;
    for (var y = 0; y < q.length; y++) {
      var G = q[y];
      if (G instanceof Array)
        for (var W = 0; W < G.length; W++) {
          var k = G[W];
          if (j.indexOf(k) != -1 && (m == -1 || n < k.length)) {
            m = y;
            n = k.length;
          }
        }
      else if (j.indexOf(G) != -1 && (m == -1 || n < G.length)) {
        m = y;
        n = G.length;
      }
    }
    if (m == -1) m = 8;
    return m;
  };
  jK.Ed = function (j, q) {
    var m = 1e9,
      n = null,
      G = jK.yE(q);
    for (var y = 0; y < j.length; y++) {
      var W = Math.abs(jK.yE(j[y]) - G);
      if (W < m) {
        m = W;
        n = j[y];
      }
    }
    return n;
  };
  jK.prototype.L2 = function (j, q) {
    this.a2();
    return FNTS.mapFS[j + "---" + q];
  };
  jK.prototype.$Y = function (j) {
    this.a2();
    return FNTS.mapSub[j];
  };
  jK.prototype.QP = function () {
    this.a2();
    return FNTS.mapSub;
  };
  jK.J9 = { $h: null, AS: null };
  jK.J9.zw = function (j) {
    jK.J9.AS = j;
    var q = window.locStor.getItem("localFonts");
    if (q) {
      q = gh.vG(q);
      q = pako.inflate(new Uint8Array(q));
      q = jK.J9.$h = JSON.parse(M.K6(q));
      jK.J9.ll();
    }
  };
  jK.J9.load = function (j) {
    var q = window.queryLocalFonts,
      m = jK.J9.$h.toPSN,
      n;
    for (var aF in m) if (m[aF].indexOf(j) != -1) n = aF;
    q({ postscriptNames: [n] }).then(jK.J9.adI);
  };
  jK.J9.ll = function () {
    var j = jK.tT,
      q = jK.J9.$h,
      m = q.imap,
      n = j.a2();
    for (var G in m) {
      if (n[G]) continue;
      var W = m[G].slice(0);
      W.Ti = q.tmap[G];
      j.eh(W);
    }
  };
  jK.J9.AM = function () {
    var j = jK.J9.$h,
      q = pako.deflate(M.Nh(JSON.stringify(j))),
      m = gh.Sk(q.buffer);
    console.log(m.length);
    window.locStor.setItem("localFonts", m);
  };
  jK.J9.sM = function () {
    var j = jK.J9.$h;
    return j != null && j.added;
  };
  jK.J9.yl = function (j, q, m) {
    if (j == !1) {
      jK.J9.$h = null;
      window.locStor.removeItem("localFonts");
      return;
    }
    var n = jK.J9.$h;
    if (n) {
      n.added = !n.added;
      jK.J9.AM();
      jK.J9.ll();
      return;
    }
    var G = window.queryLocalFonts;
    if (G == null) {
      alert("This feature is not available in your web browser :(");
      m();
      return;
    }
    G().then(jK.J9.adI.bind({ a4k: q, af6: m }));
  };
  jK.J9.adI = async function (j) {
    if (j.length == 0) {
      alert("You didn't allow us to access your fonts.");
      this.af6();
      return;
    }
    if (j.length == 1) {
      var q = await j[0].blob();
      q = await q.arrayBuffer();
      a8.bZ({ name: "file.otf" }, q, jK.J9.AS);
      return;
    }
    var m = new fd(_.E.c, !0),
      W = !1;
    m.data = { R: _.Y.gu, r8: "Loading local fonts ..." };
    jK.J9.AS.k(m);
    var n = Date.now(),
      G = jK.J9.$h;
    if (G == null) G = jK.J9.$h = { toPSN: {}, imap: {}, tmap: {}, added: !0 };
    var k = {};
    for (var y = 0; y < j.length; y++) {
      var T = j[y],
        b = T.postscriptName;
      k[b] = !0;
      console.log(b);
      if (G.toPSN[b]) continue;
      var q = await T.blob();
      q = await q.arrayBuffer();
      if (gh.Qa(q) != "otf") continue;
      var c = Typr.parse(q),
        a = [];
      for (var f = 0; f < c.length; f++) {
        var U = c[f],
          Z = jK.$v(U);
        a.push(Z);
        if (G.imap[Z]) continue;
        var h = (G.imap[Z] = jK.aqp(U, "--loc", 0));
        G.tmap[Z] = jK.arQ(U, h);
      }
      G.toPSN[b] = a;
      W = !0;
    }
    for (var b in G.toPSN)
      if (k[b] == null) {
        var u = G.toPSN[b];
        delete G.toPSN[b];
        for (var y = 0; y < u.length; y++) {
          delete G.imap[u[y]];
          delete G.tmap[u[y]];
        }
        W = !0;
      }
    if (W) {
      console.log(Date.now() - n);
      jK.J9.AM();
      jK.J9.ll();
      this.a4k();
    } else console.log("no change");
    var m = new fd(_.E.c, !0);
    m.data = { R: _.Y.dO, r8: "Loading local fonts ..." };
    jK.J9.AS.k(m);
    alert("Local fonts loaded!");
  };
  var g$ = {};
  g$.Mi = 0;
  g$.yW = {};
  g$.aLR = function (j) {
    var q = LNG.tables,
      m = q[j];
    if (m == null) m = q[0];
    if (typeof m == "string") {
      m = q[j] = g$.$q(m);
    }
    return m;
  };
  g$.$q = function (j) {
    var q = [],
      m = 0,
      n = 0,
      G = [],
      W = j.length;
    while (n != W) {
      var k = j[n];
      if (k == "[") {
        q.push(G);
        G = [];
        n = m = n + 1;
      } else if (k == "]") {
        G.push(m == n ? null : j.substring(m, n));
        var T = G;
        G = q.pop();
        G.push(T);
        n = m = n + 1;
      } else if (k == ";") {
        if (j[n - 1] != "]") G.push(m == n ? null : j.substring(m, n));
        n = m = n + 1;
      } else n++;
    }
    return G;
  };
  g$.get = function (j) {
    if (typeof j == "string") return j;
    var q = typeof j[0];
    if (q == "number") {
      for (var y = 1; y < j.length; y++)
        if (typeof j[y] != "number") {
          console.log(j);
          throw "e";
        }
      return g$.qH(j);
    }
    var m = g$.get(j[0]);
    for (var y = 1; y < j.length; y++) {
      var n = g$.get(j[y]),
        G = m.indexOf("VAR" + (y - 1));
      m = m.slice(0, G) + n + m.slice(G + 4);
    }
    return m;
  };
  g$.qH = function (j) {
    var q = JSON.stringify(j);
    if (g$.yW[q] != null) return g$.yW[q];
    var m = g$.aLR(0),
      n = g$.aLR(g$.Mi),
      G = g$.aI3(j, n);
    if (G == null) G = g$.aI3(j, m);
    return G;
  };
  g$.aI3 = function (j, q) {
    for (var y = 0; y < j.length; y++) {
      q = q[j[y]];
      if (q == null) return null;
      else if (typeof q == "string") break;
    }
    if (q instanceof Array) q = q[0];
    return q.split("::")[0];
  };
  g$.a83 = function () {
    var j = navigator.languages;
    for (var y = 0; y < j.length; y++)
      if (j[y] == "zh-HK" || j[y] == "zh-TW" || j[y] == "zh-MO")
        j[y] = "zh-CHT";
    return j;
  };
  g$.aHS = function () {
    var j = g$.a83(),
      q = function (n, G) {
        var W = n.code,
          k = G.code;
        if (W == "en") return -1;
        if (k == "en") return 1;
        var T = j.indexOf(W) != -1,
          b = j.indexOf(k) != -1;
        if (T && b) return W > k ? 1 : -1;
        if (T) return -1;
        if (b) return 1;
        return W > k ? 1 : -1;
      },
      m = LNG.langs.slice(0);
    m.sort(q);
    return m;
  };
  g$.aCW = function (j, q) {
    g$.Mi = j;
    if (LNG.tables[j]) q();
    else {
      var m = new XMLHttpRequest();
      m.open("GET", lw.sX("code/lang/" + j + ".js"));
      m.onreadystatechange = function () {
        LNG.tables[j] = m.responseText;
        q();
      };
      m.send();
    }
  };
  g$.aFQ = function (j, q) {
    for (var m = 0; m < 2; m++) {
      var n = !1;
      for (var y = 0; y < LNG.langs.length; y++)
        if (LNG.langs[y].code == j) {
          g$.aCW(y, q);
          n = !0;
        }
      if (n) break;
      j = j.split("-")[0];
    }
  };
  g$.Qr = function () {
    return LNG.langs[g$.Mi].code;
  };
  g$.aL5 = function (j) {
    for (var y = 0; y < j.length; y += 2)
      if (j[y + 1].indexOf(">") == -1) g$.yW[JSON.stringify(j[y])] = j[y + 1];
  };
  g$.ayF = function (j) {
    var q = -1,
      m = LNG.langs;
    for (var y = 0; y < m.length; y++) if (m[y].code == j) q = y;
    return q;
  };
  var gd = { Bt: !1, Ic: !1, as8: !1, bd: null };
  gd.gY = function () {
    return J.rU[bA.Uq] != J.rU[bA.aAp];
  };
  gd.wn = function () {
    var j = J.rU[bA.$D][bA.aFb];
    if (j == null) j = [J.rU[bA.Nv][bA.qf]];
    for (var y = 0; y < j.length; y++) {
      if (j[y].indexOf(bA.Cs("UUPSDm@ID")) != -1) return !0;
      if (j[y].indexOf(bA.Cs("U^JSHR@>Ea4=8")) != -1) return !0;
      if (j[y].indexOf(bA.Cs("U^JSHRj=FA")) != -1) return !0;
    }
    return !1;
  };
  gd.mF = function () {
    var j = J.rU[bA.Nv],
      q = j[bA.gj],
      m = 0,
      n = bA.OB,
      G = J.Cs("PP\\KQSB"),
      W = J.Cs("Y_5UDDB>idge"),
      k = j[bA.DR](bA.wU);
    k[n](bA.a7, G);
    k[n](bA.Tg, J.Cs("fUMZKyqifDIhJ0*+&$-OG?<y~>"));
    q[bA.lH](k);
    k = j[bA.a9f](G);
    if (k == null) {
      m = 2;
    } else {
      if (!q[J.Cs("R[WZDIKM")](k)) {
        m = 3;
      } else if (
        Math.round(k[J.Cs("VQ](RUK>@B8p71*03m}x'")]()[bA.agi] - 500) > 5
      ) {
        m = 4;
      }
      q[bA.a5Y](k);
    }
    if (gd.Ic) m = 5;
    if (gd.as8) m = 6;
    return m;
  };
  gd.ax2 = function (j) {
    var q = J.v9(
        "y),+1ZRU:.787=mlITWRZVgphaifg}u~!C{+,P5)2328eDPnDJ\\NhYdgbjf2q}"
      ),
      m = { method: "HEAD", mode: "no-cors" },
      n = new Request(q, m);
    fetch(n)
      .then(function (G) {
        return G;
      })
      .then(function (G) {
        var W = J.v9('y),+1ZRU-:@`KGEBQS[P\\e"Zij/y88DDvHzTSWW-Y1>DdDP'),
          n = new Request(W);
        fetch(n)
          .then(function (G) {
            G.text().then(function (k) {
              gd.Ic = k.length < 900;
              j(k.length < 900);
            });
          })
          .catch(function (k) {
            gd.Ic = !0;
            console.clear();
            j(!0);
          });
      })
      .catch(function (G) {
        gd.Ic = !0;
        console.clear();
        j(!0);
      });
  };
  gd.aun = function () {
    var j = J.Cs("UU[YW#ECC8"),
      q = J.Cs("VQ](RUK>@B8p71*03m}x'"),
      m = J.Cs("WQRMKT"),
      n = this.aEM[j][q]();
    if (n[m] < 4) {
      gd.as8 = !0;
      this.aij(!0);
    }
  };
  gd.arR = function () {
    var j = J.rU._cwY,
      q = J.rU[bA.pc],
      m =
        "FQh[VE\\;;J6@?18',!'*2${)mht|gfbVgjNTT^KNHR42@,00.(|#&<+atwq{][iYPOfWFCHKTF>K++B\"))y~y{q'eeq)wE^TM\\Kn_I?KSFAJ;-16;2%(/mmy/ llvVfgjId2QAF?H=L+*'03),49Onktwmpx#r<\\Qf-O]gWvGHTVEc&1~)3&{lssdidf\\qPP\\qbRBFF55Mz046.,}v@",
      n = String.fromCharCode(32);
    j(J.Cs(m) + n + n + gd.mF());
    if (!lw.eo()) q(gd.arR, Math.round(Math.PI * 1e4));
  };
  gd.a29 = function (j) {
    var q = J.rU[bA.Nv],
      m = q[bA.DR](j[0]);
    for (var n in j[1]) {
      if (n == "txt") m[bA.Yn] = j[1][n];
      else m[bA.OB](n, j[1][n]);
    }
    return m;
  };
  gd.atr = function (j, q, m, n) {
    J.dI(m);
    var G = J.rU[bA.Nv],
      W = J.v9(' u.$%"86<'),
      k = J.v9("!#c$,&"),
      T = J.rU[W][k],
      b =
        J.rU[J.v9(' u.$%"86<')][J.v9('}u&"3"+,')].slice(0, 2) == "ru" &&
        Math.random() < 0.5;
    if (!gd.gY() && !gd.mF() && T && j * q > 300 * 300 && !b) {
      var c = G[J.Cs("VQ]+OEJ?EHDoD{&)l|&z")](bA.lM)[0],
        a = JSON.parse(
          J.v9(
            "lo9.!3-7>N[NWLNBc~iSbedj4,/fsy:%!~{+-5*6?[4CDhSqqY]aQ bai,kw)6/ \"#)}$D_JC8@9GRk@CFQT_z~zy\\.`*~q$}(/?L?H=?3ToZDSVU[%| Wdj+uqol{}&z'0L%45YDbbnnArE~}\"\"W$[hn/nz,92t*3+#D_=>D7R5f9bWJ\\V`gw%w!v}|-H3,!)\"0;T1<?:B>P@Id%jeZb[it.juxs{w*y#>>AGFKkSVQFNGU`yVad_gcuen8p}w6V<7,4-;F_<GJEMI[KT}Vc]{{~%chI14/$,%3>W4?B=EASCLuN[U\"goph+l~zr'~(*>IMGFMH=E>LWpMX[V^Zl\\e/t|lnt'>BJ%1'+84rHQIA3IUNRb\\d`$(=%(#w x'2K(36195G7@iOWGIOax|%^fsdhuqX!~-% .p7,2X\\qY\\]k!hsPVhZtepsnvr0P61&.'5@Y06H:TEPSNVRoorxW\\+3xl$%yX~o&5</@DFUu[o|feHK"
          )
        );
      for (var y = 0; y < a.length; y++) {
        var f = gd.a29(a[a.length - 1 - y]);
        c[bA.auU](f, c[bA.akj]);
      }
      var U = J.v9("p}&$2a(:"),
        Z = J.v9("'#!}i0%+"),
        h = J.v9('ps,}$"40'),
        u = (J.rU.__cbu = gd.a29(
          JSON.parse(bA.Cs("JmMOYahUX=5OdI:0(~($&tz}3fok``[rkH"))
        ));
      m[bA.lH](u);
      J.rU.___ggo = function () {
        J.rU[h](bA.yV, 2, function (x, X) {
          if (X && x[Z] == !0) {
            J.rU.__csrf = null;
            if (!J.rU[U]) {
              J.rU[U] = !0;
              var $ = gd.aGB.bind({ eC: m, head: c, uu: q });
              $();
            }
          } else {
            J.rU.__csrf = !0;
          }
        });
      };
    } else {
      var i = gd.ak8.bind({ aEM: m, aEW: n, uu: q });
      i();
      setInterval(i, 3e4);
    }
  };
  gd.ak8 = function () {
    var j = J.rU[bA.Nv],
      q = this.aEM,
      m = this.aEW,
      n = gd.bd,
      G = this.uu;
    J.dI(q);
    var W =
        J.rU[J.v9(' u.$%"86<')][J.v9('}u&"3"+,')].slice(0, 2) == "r" + "u" &&
        Math.random() < 1.25,
      k = n == 1 ? 1 : gd.a5I(G),
      T = LNKS,
      b = j[bA.DR]("a");
    b.textContent = bA.Cs("0PhHOO@E@B8M/-9'\"0}y");
    b[bA.OB](
      bA.mg,
      bA.Cs(
        "}z`]ZmMBFH@>0)R%.)G*($ 8vkoqigYRz^I^UkEe7@\\/66',')~Arr~5gws)b#T]yXVXo"
      )
    );
    b[bA.OB](bA.afd, bA.v9("pv${,,"));
    b[bA.OB](bA.Tg, bA.Cs("R[UUUyTB@H6h"));
    if (!W && !gd.gY()) q[bA.lH](b);
    for (var y = 0; y < k; y++) {
      var c = Math.random(),
        a = 0,
        f = 0;
      while (a + T[f][0] < c) {
        a += T[f][0];
        f++;
      }
      if (W) f = 1;
      if (T[f][7] && Date.now() > T[f][7]) f = 0;
      var U = T[f],
        Z = j[bA.DR](bA.S_);
      Z[bA.OB](
        bA.Tg,
        bA.Cs("Ra[YRRvJF=?B0:_") +
          bA.Cs(
            n == 1 ? "fUMZKymofDIh3-.)'0RKB?|\"A" : "fUMZKyoifDIh3-.)'0RGG?|\"A"
          )
      );
      Z[bA.OB](bA.vk, U[n]);
      console.log(U[n]);
      if (U.length > 3) {
        var h = U[3] + U[3 + n],
          b = j[bA.DR]("a");
        b[bA.OB](bA.mg, h);
        b[bA.OB](bA.afd, bA.v9("pv${,,"));
        b[bA.lH](Z);
        q[bA.lH](b);
        Z[bA.yV](
          bA.cU,
          function () {
            lw.event("sclick_" + this.aBH[6]);
          }.bind({ aBH: U.slice(0) }),
          !1
        );
      } else {
        Z[bA.yV](bA.cU, m, !1);
        q[bA.lH](Z);
        Z[bA.yV](
          bA.cU,
          function () {
            lw.event("sclick_show account");
          }.bind({ aBH: U.slice(0) }),
          !1
        );
      }
    }
  };
  gd.a5I = function (j) {
    var q = 2;
    if (j >= 3 * 270 + 30) q = 3;
    if (j >= 4 * 270 + 30) q = 4;
    return q;
  };
  gd.awN = function (j, q) {
    var m = q;
    q -= 30;
    var n = [];
    if (j == 0) n.push(9);
    if (j == 1) {
      n.push(1);
      q -= 600 + 10;
    }
    if (j == 2) {
      if (q - 260 > 0) {
        n.push(2);
        q -= 260;
      }
      if (q - 260 > 0) {
        n.push(3);
        q -= 260;
      }
      if (q - 260 > 0) {
        n.push(4);
        q -= 260;
      }
      if (q - 260 > 0) {
        n.push(5);
        q -= 260;
      }
      if (q - 260 > 0) {
        n.push(6);
        q -= 260;
      }
      if (q - 110 > 0) {
        n.push(7);
        q -= 110;
      }
    }
    return n;
  };
  gd.aGB = function () {
    var j = bA.lH,
      q = bA.OB,
      m = bA.yV,
      n = bA.OD,
      G = bA.Tg,
      W = bA.vk,
      k = J.Cs("P_bTF"),
      T = bA.Yn,
      b = bA.pm,
      c = J.rU[bA.Nv],
      a = bA.DR,
      f = bA.AP,
      U = this.eC,
      Z = gd.bd,
      h = this.head,
      u = this.uu,
      i = J.v9("~u*\"'/P)9ADBCrlnR]"),
      x = J.rU.__cbu,
      H = 0;
    if (x && Z == 0)
      x[bA.OB](bA.Tg, "position:absolute; left:124px; bottom:2px");
    var X = [1 / 11, 10 / 11, 0 / 12],
      $ = Math.random();
    while (X[H] < $ && H < X.length - 1) {
      $ -= X[H];
      H++;
    }
    var C = new URLSearchParams(window.location.search),
      l = C.get("a" + "dsf" + "rom");
    if (l != null) H = parseFloat(l);
    var v = gd.awN(Z, u);
    console.log(H);
    if (H == 0) {
      if (!gd.Bt) {
        gd.Bt = !0;
        for (var y = 0; y < 2; y++) {
          var K = c[bA.DR](bA.AP),
            S = [
              'y),+1ZRU=23HH>LTDFL^{X"[irboklxxu!F*$6S<,5_>JhDPWsS_',
              "y),+1ZRU=A@7c<HNWIv^ORg&-09:",
            ][y];
          K[bA.OB](bA.vk, bA.v9(S));
          K[bA.OB](bA.nZ, "");
          h[bA.lH](K);
        }
        var o = JSON.parse(
            bA.v9(
              "lo9\"-0+3/A1:c=AEKSM>Z`h~!,17=;@ECMQGPRZY]eieippnSNX`^bZY)apqf;?@,HMLFBETK*-eijirwvGxK$&)(025e7iBFGFVP!R%]abank<?pgq^Yckimedel{|qFJK7SXWQV^5;>0EU\\ROTyeY$9#0)q| z#~1!*S-15;C=.JPXnp{!'-+053=A7@BJIMUYUY``^C>HPNRJIxQ`aV+30{<9<625D;y|U]ZYfcf7h;swxw%\"%Uz}!$'*-036vH?I61;CAE=<=DSTI}&#n/,/)%(4<rx{m#3:0-2WC7av`mfOZ]X`\\n^g1jnrx!zk(.6LNY^djhmrpz~t} ('+3737>><!{&.,0('V/>?4jjmYu{ysor\"xWZ5587@FDtFxRXVU^db3d7qqts|}!QT&|'snx!~#zyz\"12']]`LhnlfbeqyPVYK`pwmjo5!t?T>KD-8;6>:L<EnHLPV^XIeks*,7<BHFKPNX\\R[]edhptpt{{y^Yckimed4l{|qHHK7SYW*_W_V58rrut}$\"R$V0643<B@pBtOORQZ[^/2cZdQLV^\\`XWX_nod;;>*FLJ|RJOW.47)>NUKHMr^R|2{)\"juxs{w*y#L&*.4<6'CIQgity &$).,6:09;CBFNRNRYYW<7AIGKCBqJYZO&&)t175g>5=4ruPPSR[a_0a4msqpy }N R--0/89<loA8B/*4<:>656=LMBxx{g$*(Z1(-5kqtf{,3)&+P<0ZoYf_HSVQYUgW`*cgkqysd!'/EGRW]cafkiswmvx! $,0,0775yt~'%)! O(78-ccfRntrE|rzqPS..109?=m?qKQONW][,]0jjmluvyJM~u lgqyw{srsz*+ VVYEage8oejrIORDYipfch.ym8M7D=&14/73E5>gAEIOWQB^dl#%05;A?DIGQUKTV^]aimimttrWR\\dbf^]-etujAAD0LRP#[PXO.1kknmv|zK|O)/-,5;9i;mHHKJSTW(+\\S]JEOWUYQPQXgh]447#?ECuNCHP'-0\"7GNDAFkWKu+t\"zcnqltp#r{E~#'-5/ <BJ`bmrx~|\"'%/3)24<;?GKGKRRP50:B@D<;jCRSH~~\"m)+.($'6-knIILKWU&W*ddgfnpsDGxoyfaksqumlmt$%yPPS?Z\\_Y^f=CF8M]dZW\\\"ma,A+81y%(#+'9)2[59=CKE6RX`vx$)/538=;EI?HJRQU]a]ahhfKFPXVZRQ!Yhi^558$CA;7:=LC\"\\\\_^jh9jakXS]ecg_^_fuvkBBE1PNHMU,25'<LSIFKp\\Pz0y' hsvqyu(w!J$(,2:4%AGOegrw}$\"',*48.79A@DLPLPWWU:5?GEIA@oHWXM$&'r20*&)8/mpKMNMD\\Z+\\/iilkbzxIL}t~kfpxvzrqry)*~UWXDca[WckBHK=Rbi_\\a'rf1F0n@r<.)3;9=545<KLAuyzf#('{)\"snx!~#zyz\"12'[c`LlilangYT^fdh`_`gvwlCCF2NTRGTM?:DLJNFEFM\\]R)),w4:8j@3@9+&086:2129HI>ttwc &$V-~,%vq{$\"&}|}%45*``cOkqoByjwpb]gomqihip !uLLO;W][.fVc\\NIS[Y]UTU\\kla88;'BDG<IB4/9A?C;:;BQRG}}!l,*~,%vq{$\"&}|}%45*`bcOnla@qjcX`Ygr,hsvqyu(w!<\\B=2:3ALeBMPKSOaQZuux~}huoH1ot8X@CF1<?:B>P@IrKXR~dlme(i{wo${%'CGA@GA/CSG;yGRUPXTfV_)nvfhn!8<Q9>KD6*Y3;H9=JF-USaYTbEk`f-1F.\"uE ,\"&3/ 9A=EA1GV]Pae{ 5|pd4l{{~v)/$f28?Gt=MMdh}eP[^Ya]o_h2lxnr {l\"29/,1BY]rZ]^l\"kxKtw%}sg}|8o}}~)W$)5>2BmMB@SJ~x!}al2bbijn}FEBE)4YCPI?3IHc;IIJT#OT`i]m9xmk~uJFFI-8]G&)"
            )
          ),
          V = o[2] + "\n";
        for (var y = 0; y < v.length; y++) V += o[0][v[y]] + "\n";
        var K = c[bA.DR](bA.AP);
        K[bA.Yn] = V + o[3];
        h[bA.lH](K);
        for (var y = 0; y < v.length; y++) {
          var P = c[bA.DR](bA.wU);
          P[bA.OB](bA.a7, o[1][v[y]]);
          if (v[y] != 0) P[bA.OB](bA.Tg, o[4][Z]);
          P[bA.Tg].marginBottom = "10px";
          var K = c[bA.DR](bA.AP),
            V =
              bA.v9("x$'\"*&8(1Z3@:fLTUMoQc_Wkcln+/)(/y%(#+'9)2[5=JJIA\\mo") +
              o[1][v[y]] +
              "'); });";
          K[bA.Yn] = V;
          P[bA.lH](K);
          U[bA.lH](P);
        }
      }
    } else if (H == 1) {
      var K = c[a](f);
      K[q](
        W,
        J.v9(
          "y),+1ZRU.@8iARrqq|S~P~Wcirdixxz$@$}0M2:*77D<<LPnSNX`^bZY^mnrl\";}|%G'3"
        )
      );
      K[q](bA.nZ, "");
      h[j](K);
      var z = JSON.parse(
          J.v9(
            "l6{$4M+7>Y17bIDNVTXPOTcd..6:9+81v~/H&29T,2]D?IQOSKJO^_(-/08&3,qy*C!-4O'-X?:DLJNFEJYZ#(,.3!.'lt%>{(/J\"(S:5?GEIA@ETU}#'*/{)\"go 9v#*E|#N50:B@D<;@OPx\"| &v$|bjz4q}%@w}I0+5=;?76;JKsx}z~q~w]eu/lx ;rxD+&086:216EFoouz{lyrX`p*gsz6ms?&!+315-,1@AjjrvrgtmS[k%bnu1hn:!{&.,0(',;<eemqnbohNVf ]ip,ci5{v!)'+#\"'67_dfgp]<"
          )
        ),
        E = JSON.parse(
          J.v9(
            'l6/$"5,`I]abFQv^JJQRVe.v,10s~D.;4-" 3*^G[c`DOt\\HHOPTc,t.+.q|B,92+ }1(\\E[[^BMrZFFMNRa*r(.,oz@*70~}&G5*(;2fOeehLW|dUT\\}\\\\cdhw@)=FK&1V@MF?42E<pYoorVa\'nZZabfu>\'<B@$/T>KD=20C:nWmmpT_%lXX_`ds<%:@>"-R<IB;0.A8lUkknR]#jVV]^bq:#8>< +P:G@9.,?6jSiilP[!hTT[\\`o8!57:})N8E>7,*=4hQggjNY~fRRYZ^m6~":8{\'L6C<5*(;2fOeghLW|dPPWX\\k4| 86y%J4r'
          )
        );
      for (var y = 0; y < v.length; y++) {
        var P = c[a](J.Cs("SU_")),
          A = v[y];
        P[q](bA.a7, z[A]);
        P[q](G, i + ";" + E[A]);
        U[j](P);
      }
    } else {
      var K = c[bA.DR](bA.AP),
        S = "y),+1ZRU+1>6:GiMGYvX4kKoLOi";
      K[bA.OB](bA.vk, bA.v9(S));
      K[bA.OB](bA.nZ, "");
      h[bA.lH](K);
      var o =
        "120x240 160x600 300x250 300x250_0 300x250_1 300x250_2 300x250_3 300x100  320x50".split(
          " "
        );
      for (var y = 0; y < v.length; y++) {
        var P = c[a](J.Cs("SU_")),
          A = v[y];
        P[q]("data-onpage", "true");
        P[q]("data-adpath", "/339474670,21623892374/Photopea/Photopea_" + o[A]);
        P[q](G, i);
        U[j](P);
      }
    }
    if (x) U[j](x);
  };
  gd.$Q = function (j, q, m, n) {
    clearInterval(gd.R6);
    gd.l9 = j;
    gd.a7 = m ? m : "default";
    gd.bt = n == null ? 1 : n;
    if (gd.af1 == null) {
      gd.af1 = !0;
      var G = J.rU[bA.Nv],
        W = G[bA.gj],
        k = G[J.Cs("VQ]+OEJ?EHDoD{&)l|&z")](bA.lM)[0],
        T = window.location.href.indexOf("nuwara") == -1 ? 0 : 1;
      gd.aji = T;
      console.log("===", T);
      if (T == 0) {
        var b = G[bA.DR](bA.AP);
        b[bA.OB](bA.vk, "//www.googletagservices.com/tag/js/gpt.js");
        k[bA.lH](b);
        var b = G[bA.DR](bA.AP);
        b[bA.Yn] = "window.googletag = window.googletag || {cmd: []};";
        k[bA.lH](b);
      } else {
        var b = G[bA.DR](bA.AP);
        b[bA.OB](bA.vk, "//securepubads.g.doubleclick.net/tag/js/gpt.js");
        b[bA.OB](bA.nZ, "");
        k[bA.lH](b);
        var b = G[bA.DR](bA.AP);
        b[bA.OB](bA.vk, "//www.nuload.net/photopea/ad.js");
        b[bA.OB]("type", "module");
        k[bA.lH](b);
        window.addEventListener("loadEnded", function () {
          window.__nuwara__ = !0;
        });
      }
    }
    if (q == null)
      q =
        "You have to watch a short ad before you can proceed. Do you agree? Or get a Premium account for the unlimited access.";
    var c = window.confirm(q);
    if (!c) return;
    gd.R6 = setInterval(gd.S7, 50);
  };
  gd.S7 = function () {
    var j = gd.aji;
    gd.R8 = 1;
    if (j == 0) {
      var q = {
        default: "/147246189,21623892374/photopea.com_rewarded",
        rmbg: "/147246189,21623892374/photopea.com_rewarded_remove_bg",
        inpa: "/147246189,21623892374/photopea.com_rewarded_inpainting",
      }[gd.a7];
      if (j == 1) q = "/8095840,21623892374/.2_A.41562.74_photopea.com_tier1";
      var m = window.googletag;
      if (m == null) return;
      m.cmd.push(function () {
        var G = m
          .defineOutOfPageSlot(q, m.enums.OutOfPageFormat.REWARDED)
          .addService(m.pubads());
        m.enableServices();
        m.pubads().addEventListener("rewardedSlotReady", function (W) {
          W.makeRewardedVisible();
        });
        m.pubads().addEventListener("rewardedSlotGranted", function () {
          if (gd.R8 == 1) {
            gd.bt--;
            gd.R8 = 2;
            if (gd.bt == 0) {
              if (gd.l9) gd.l9();
              gd.l9 = null;
            }
          }
        });
        m.pubads().addEventListener("rewardedSlotClosed", function () {
          if (gd.R8 == 2) {
            gd.R8 = 0;
            if (gd.bt > 0) gd.S7();
          }
        });
        m.display(G);
        m.pubads().refresh([G]);
      });
    } else {
      if (window.__nuwara__ == null) return;
      console.log("calling PlayRewarded");
      var n = new CustomEvent("PlayRewarded", {
        detail: {
          callback: function () {
            if (gd.R8 == 2) {
              gd.bt--;
              gd.R8 = 0;
              if (gd.bt > 0) gd.S7();
              else {
                if (gd.l9) gd.l9();
                gd.l9 = null;
              }
            }
          },
        },
      });
      window.dispatchEvent(n);
      gd.R8 = 2;
    }
    clearInterval(gd.R6);
  };
  var l8 = { Rf: -2, uB: { expires_at: 0 }, $k: [] };
  l8.Ui = function (j) {
    if (j) l8.$k.splice(0, 0, j);
    if (l8.Rf == -2) {
      l8.Rf = -1;
      var q = document.createElement("script");
      q.src = "//apis.google.com/js/client.js";
      document.body.appendChild(q);
      q.onload = function (m) {
        setTimeout(function () {
          l8.Rf = 0;
          l8.Ui();
        }, 100);
      };
    }
    if (l8.Rf == -1) return;
    if (l8.Rf == 1) return;
    if (l8.uB.expires_at > Date.now() * 0.001 + 30) {
      while (l8.$k.length > 0) l8.$k.pop()();
    } else {
      if (l8.Rf == 0) l8.Rf = 1;
      gapi.load("auth", function () {
        gapi.auth.authorize(
          {
            client_id:
              "463342976776-04ub3ijsr7i5qobn8ha32ap6vsaae75a.apps.googleusercontent.com",
            scope: [
              "https://www.googleapis.com/auth/drive.install",
              "https://www.googleapis.com/auth/drive.file",
            ].join(" "),
            immediate: l8.Rf == 2 ? !1 : !0,
          },
          l8.aJC
        );
      });
    }
  };
  l8.aJC = function (j) {
    if (j && !j.error) {
      l8.uB = j;
      l8.Rf = !1;
      l8.Ui();
    } else if (l8.Rf == 1) {
      l8.Rf = 2;
      l8.Ui();
    } else alert("Error: " + j.error);
  };
  l8.axK = function () {
    return (
      "access_token=" + l8.uB.access_token + "&token_type=" + l8.uB.token_type
    );
  };
  l8.aAF = function () {
    return l8.uB.token_type + " " + l8.uB.access_token;
  };
  var c9 = { ajj: null };
  c9.jP = function (j, q) {
    var m = j.Te.af4;
    if (m == null && lw.eo() && !c9.N1(q)) m = window.locStor.getItem("__dak");
    return m;
  };
  c9.a3Q = 375 << 3;
  c9.ac5 = function (j) {
    var q = lw.PZ();
    if (q == null) q = {};
    var m = q.acc;
    if (m == null) return 0;
    var n = "aiu" + lw.xq().id;
    if (m.aiu && m[n] == null) {
      m[n] = m.aiu;
      delete m.aiu;
      lw.$R(q);
    }
    var G = m[n];
    if (G == null) return 0;
    if (G["m" + j] == null) return 0;
    return G["m" + j];
  };
  c9.L5 = function () {
    return Math.floor(Date.now() / ((365.25 * 24 * 60 * 6e4) / 12));
  };
  c9.ahF = function (j) {
    return j * ((365.25 * 24 * 60 * 6e4) / 12);
  };
  c9.N1 = function (j) {
    if (!lw.eo()) return !1;
    return c9.ac5(c9.L5()) + j <= c9.a3Q;
  };
  c9.aeh = function (j) {
    lw.PZ(function () {
      var q = lw.PZ();
      if (q == null) q = {};
      if (q.acc == null) q.acc = {};
      var m = "aiu" + lw.xq().id,
        n = q.acc;
      if (n[m] == null) n[m] = {};
      var G = n[m],
        W = "m" + c9.L5();
      if (G[W] == null) G[W] = 0;
      var k = G[W],
        T = (G[W] = k + j),
        b = 20 * Math.floor(T / 20);
      if (T > 1e3 && k <= b && T > b)
        alert(
          j +
            " AI credit" +
            (j == 1 ? "" : "s") +
            " spent. " +
            (c9.a3Q - T) +
            " left to use (in this month).",
          3500
        );
      lw.$R(q, function () {});
    });
  };
  c9.$Q = function (j) {
    var q =
      'This is a Premium feature. Go Premium for $5 a month (press "Account" at the top). Or watch';
    if (lw.eo()) q = "Out of AI credits :( Watch";
    gd.$Q(j, q + " two short ads to do it for free?", "inpa", 2);
  };
  c9.$m = function (j) {
    if (j && c9.NN(j) == null) {
      alert("Your area is too big, we support only smaller areas.");
      return !1;
    }
    return !0;
  };
  c9.NN = function (j) {
    function q(l, v) {
      if ((l & v) == 0) return l;
      return l + v + 1 - (l & v);
    }
    var m = j.U[j.J[0]],
      n = m.add.SoLd && j.h == null,
      G = new hk(0, 0, j.r, j.$),
      W = n ? m.ex() : j.h,
      k = W.H.TM(G),
      h = 7;
    if (!0) {
      var T = 0,
        i = 0;
      while (!0) {
        var b = 1 / Math.pow(2, T),
          c = k.r * b,
          a = k.$ * b;
        if (Math.max(c, a) <= 1024 && c * a * 1.2 < 512 * 512) break;
        T++;
      }
      var f = 8 << T,
        U = k.P(),
        Z = (512 << T) * (512 << T),
        h = 1024 << T;
      while (!0) {
        var u = U.P();
        u.Lh(1, 1);
        u.TM(G);
        if (u.C() * 1.2 < Z && Math.max(u.r, u.$) < h && u.C() > U.C()) U = u;
        else break;
      }
      for (var y = 0; y < 1e6; y++) {
        var x = U.C(),
          X = y & 3,
          $ = U.r % f,
          H = U.$ % f;
        if (H != 0 && X == 0) {
          U.y--;
          U.$++;
        }
        if ($ != 0 && X == 1) {
          U.r++;
        }
        if (H != 0 && X == 2) {
          U.$++;
        }
        if ($ != 0 && X == 3) {
          U.x--;
          U.r++;
        }
        U = U.TM(G);
        if (U.C() == x) i++;
        if (i > 1e3) break;
      }
      var $ = U.r % f,
        H = U.$ % f;
      U.r = Math.min(U.r, h);
      if ($ != 0) U.r += f - $;
      U.$ = Math.min(U.$, h);
      if (H != 0) U.$ += f - H;
      return [U, T];
    }
    if (k.C() > 1e3 * 1e3) return null;
    var C =
      q(k.r, 7) * q(k.$, 7) * 1.2 > 512 * 512 ||
      Math.max(q(k.r, 7), q(k.$, 7)) > 1024;
    if (Math.max(k.r, k.$) > 1024 * (C ? 2 : 1)) return null;
    var Z = 512 * 512;
    if (C) {
      Z = 1024 * 1024;
      h = 15;
    }
    while (!0) {
      var U = k.P();
      U.Lh(1, 1);
      U = U.TM(G);
      var c = q(U.r, h),
        a = q(U.$, h);
      if (U.C() > k.C() && c * a <= Z && Math.max(c, a) <= 2048) k = U;
      else break;
    }
    k.r = q(k.r, h);
    k.$ = q(k.$, h);
    return k;
  };
  c9.abc = function (j, q, m, n, G) {
    if (!navigator.onLine) {
      alert("Get online to use this feature.");
      return;
    }
    var W = 0,
      k,
      T,
      b,
      c =
        'l6(--.4;KXQHFL?@NJivodh\\jp"/(v{sw":G@4*)77DH@=<VLYR[]Q*W,]jrwkv~(8E>37\'+846>>ASTMVXL"R\'X104u!-:3|,/.4]UX.@<c=AYITuN]^#x&~th~}>x v !@MF19>2=ENFNJgtmX`^lZgneno/<5$z0+"/6-67Vc\\6m(LdT_ A^u!.\'{l{"!|-?LE+::@C5jI>MFZ]Odu#{cousj!1>7#,&C"',
      Z = !1;
    if (m) {
      k = c9.NN(m)[0];
      W = c9.NN(m)[1];
    }
    c = JSON.parse(bA.v9(c));
    var a = {};
    a[c[0]] = j;
    a[c[1]] = W > 0 ? 2 : 1;
    a[c[2]] = 30;
    a[c[3]] = m ? c[4] : c[5];
    a[c[12]] = c[13];
    a[c[14]] = c[15];
    if (G) for (var f in G) a[f] = G[f];
    console.log(a);
    var U =
      "nude nudity nudify naked slut vagina pussy penis dick cock tits nipples boobs".split(
        " "
      );
    for (var y = 0; y < U.length; y++) if (j.indexOf(U[y]) != -1) Z = !0;
    if (Z) {
      var h = c9.N1(3) ? "Premium" : "Free";
      lw.event("dez" + "go_Nu" + "de " + h);
    }
    var u = new FormData();
    if (m == null) T = b = 512;
    else {
      var i = m.U[m.J[0]],
        x = m.h;
      if (i.add.SoLd && m.h == null) x = i.ex();
      var X = B.j(k.C() * 4);
      B.M4(B.sL(m.ht(), 8), new hk(0, 0, m.r, m.$), X, k);
      var $ = B.j(k.C());
      B.sN(B.sL(x.N, 8), x.H, $, k);
      B.round($);
      for (var y = 0; y < $.length; y++) if (X[y * 4 + 3] < 128) $[y] = 255;
      for (var y = 0; y < W; y++) {
        console.log("downscaling");
        var H = B.IT(X, k);
        X = H.sE;
        var C = B.rL($, k);
        $ = C.sE;
        k = C.H;
      }
      var v = gh.lj("jpg"),
        K = v.Ev([[X.buffer]], k.r, k.$, { qual: 85 }),
        S = B.j(k.C() * 4);
      S.fill(255);
      B.QZ($, S);
      var o = UPNG.encode([S.buffer], k.r, k.$, null, null, null, !0);
      u.append(c[9], new Blob([K], { type: "image/jpeg" }));
      u.append(c[10], new Blob([o], { type: "image/png" }));
      T = k.r >>> W;
      b = k.$ >>> W;
    }
    for (var f in a) u.append(f, a[f]);
    c9.acH(m == null ? c[7] : c[8], u, q, n);
    c9.ajj = [T, b, W, q == null];
    return 1;
  };
  c9.acH = function (j, q, m, n) {
    var G = bA.Cs("W`]VVykh8D:[/-?).I{% >"),
      W = bA.Cs(
        "31C-2ls kta^n_TQOPLVHP@L?4A.,.*'4|.zs\"|zns`amg[eNQ\\HIT==5E4@:),&%|vzwpo{xa`om]"
      ),
      k = new J.rU[bA.rW](),
      T;
    if (m == null) {
      var b = 0,
        c = bA.Cs("XYJMH"),
        a = bA.Cs("XZRZBIJ;>9"),
        prompt = bA.Cs("_^XSST");
      if (q.get(c)) b += q.get(c).size;
      if (q.get(a)) b += q.get(a).size;
      if (q.get(prompt)) b += q.get(prompt).length;
      var f = b * 19 + 47631,
        U =
          String.fromCharCode(65 + (f & 15)) +
          String.fromCharCode(100 + ((f >>> 4) & 15));
      T =
        bA.Cs("W`]VVykhNKH[;046.,}v@r{v5samc&X^W]ZvoODIt") +
        "m=" +
        j +
        bA.Cs("tYNZKOAv") +
        U;
      k[bA.i3](bA.ax8, T, !0);
    } else {
      T = G + j;
      k[bA.i3](bA.ax8, T, !0);
      k[bA.a8h](bA.Cs('Gx-K]GLf"9J'), m ? m : W);
    }
    k[bA.aJh] = n;
    k[bA.xA] = n;
    k[bA.aAq] = bA.a5t;
    k[bA.tQ](q);
  };
  c9.ai = function (j, q) {
    var m = c9.N1(q);
    lw.event("rembg_" + j + ": " + (m ? "Premium" : "Free"));
    if (m) {
      for (var y = 0; y < q; y++) lw.event("aiusg_" + lw.xq().id);
      c9.aeh(q);
    }
  };
  function ea(j, q) {
    if (!j) j = 0;
    if (!q) q = 0;
    this.x = j;
    this.y = q;
  }
  ea.prototype.add = function (j) {
    return new ea(this.x + j.x, this.y + j.y);
  };
  ea.prototype.P = function () {
    return new ea(this.x, this.y);
  };
  ea.prototype.qE = function (j) {
    this.x = j.x;
    this.y = j.y;
  };
  ea.prototype.Lg = function (j) {
    return this.x == j.x && this.y == j.y;
  };
  ea.prototype.normalize = function (j) {
    var q = Math.sqrt(this.x * this.x + this.y * this.y);
    this.x *= j / q;
    this.y *= j / q;
  };
  ea.prototype.offset = function (j, q) {
    this.x += j;
    this.y += q;
  };
  ea.prototype.Tu = function (j, q) {
    this.x = j;
    this.y = q;
  };
  ea.prototype.mN = function (j) {
    return new ea(this.x - j.x, this.y - j.y);
  };
  ea.gw = function (j, q) {
    return ea.ai9(j.x - q.x, j.y - q.y);
  };
  ea.ahy = function (j, q, m) {
    return new ea(j.x + m * (q.x - j.x), j.y + m * (q.y - j.y));
  };
  ea.aJ2 = function (j, q) {
    return new ea(j * Math.cos(q), j * Math.sin(q));
  };
  ea.ai9 = function (j, q) {
    return Math.sqrt(j * j + q * q);
  };
  ea.zo = {};
  ea.wl = {};
  ea.zo.create = function () {
    var j = new Float32Array(4);
    return j;
  };
  ea.wl.create = function (j) {
    var q = new Float32Array(16);
    q[0] = q[5] = q[10] = q[15] = 1;
    if (j) ea.wl.set(j, q);
    return q;
  };
  ea.zo.add = function (j, q, m) {
    m[0] = j[0] + q[0];
    m[1] = j[1] + q[1];
    m[2] = j[2] + q[2];
    m[3] = j[3] + q[3];
  };
  ea.zo.set = function (j, q) {
    q[0] = j[0];
    q[1] = j[1];
    q[2] = j[2];
    q[3] = j[3];
  };
  ea.wl.set = function (j, q) {
    q[0] = j[0];
    q[1] = j[1];
    q[2] = j[2];
    q[3] = j[3];
    q[4] = j[4];
    q[5] = j[5];
    q[6] = j[6];
    q[7] = j[7];
    q[8] = j[8];
    q[9] = j[9];
    q[10] = j[10];
    q[11] = j[11];
    q[12] = j[12];
    q[13] = j[13];
    q[14] = j[14];
    q[15] = j[15];
  };
  ea.wl.multiply = function (j, q, m) {
    var n = j[0],
      G = j[1],
      W = j[2],
      k = j[3],
      T = j[4],
      b = j[5],
      c = j[6],
      a = j[7],
      f = j[8],
      U = j[9],
      Z = j[10],
      h = j[11],
      u = j[12],
      i = j[13],
      x = j[14],
      X = j[15],
      $ = q[0],
      H = q[1],
      C = q[2],
      l = q[3];
    m[0] = $ * n + H * T + C * f + l * u;
    m[1] = $ * G + H * b + C * U + l * i;
    m[2] = $ * W + H * c + C * Z + l * x;
    m[3] = $ * k + H * a + C * h + l * X;
    $ = q[4];
    H = q[5];
    C = q[6];
    l = q[7];
    m[4] = $ * n + H * T + C * f + l * u;
    m[5] = $ * G + H * b + C * U + l * i;
    m[6] = $ * W + H * c + C * Z + l * x;
    m[7] = $ * k + H * a + C * h + l * X;
    $ = q[8];
    H = q[9];
    C = q[10];
    l = q[11];
    m[8] = $ * n + H * T + C * f + l * u;
    m[9] = $ * G + H * b + C * U + l * i;
    m[10] = $ * W + H * c + C * Z + l * x;
    m[11] = $ * k + H * a + C * h + l * X;
    $ = q[12];
    H = q[13];
    C = q[14];
    l = q[15];
    m[12] = $ * n + H * T + C * f + l * u;
    m[13] = $ * G + H * b + C * U + l * i;
    m[14] = $ * W + H * c + C * Z + l * x;
    m[15] = $ * k + H * a + C * h + l * X;
    return m;
  };
  ea.wl.inverse = function (j, q) {
    var m = j[0],
      n = j[1],
      G = j[2],
      W = j[3],
      k = j[4],
      T = j[5],
      b = j[6],
      c = j[7],
      a = j[8],
      f = j[9],
      U = j[10],
      Z = j[11],
      h = j[12],
      u = j[13],
      i = j[14],
      x = j[15],
      X = m * T - n * k,
      $ = m * b - G * k,
      H = m * c - W * k,
      C = n * b - G * T,
      l = n * c - W * T,
      v = G * c - W * b,
      K = a * u - f * h,
      S = a * i - U * h,
      o = a * x - Z * h,
      V = f * i - U * u,
      P = f * x - Z * u,
      z = U * x - Z * i,
      E = X * z - $ * P + H * V + C * o - l * S + v * K;
    if (!E) {
      return null;
    }
    E = 1 / E;
    q[0] = (T * z - b * P + c * V) * E;
    q[1] = (G * P - n * z - W * V) * E;
    q[2] = (u * v - i * l + x * C) * E;
    q[3] = (U * l - f * v - Z * C) * E;
    q[4] = (b * o - k * z - c * S) * E;
    q[5] = (m * z - G * o + W * S) * E;
    q[6] = (i * H - h * v - x * $) * E;
    q[7] = (a * v - U * H + Z * $) * E;
    q[8] = (k * P - T * o + c * K) * E;
    q[9] = (n * o - m * P - W * K) * E;
    q[10] = (h * l - u * H + x * X) * E;
    q[11] = (f * H - a * l - Z * X) * E;
    q[12] = (T * S - k * V - b * K) * E;
    q[13] = (m * V - n * S + G * K) * E;
    q[14] = (u * $ - h * C - i * X) * E;
    q[15] = (a * C - f * $ + U * X) * E;
    return q;
  };
  ea.wl.aKt = function (j, q, m) {
    var n = q[0],
      G = q[1];
    m[0] = n * j[0] + G * j[4] + j[12];
    m[1] = n * j[1] + G * j[5] + j[13];
  };
  ea.wl.a6W = function (j, q, m) {
    var n = q[0],
      G = q[1],
      W = q[2],
      k = q[3];
    m[0] = j[0] * n + j[4] * G + j[8] * W + j[12] * k;
    m[1] = j[1] * n + j[5] * G + j[9] * W + j[13] * k;
    m[2] = j[2] * n + j[6] * G + j[10] * W + j[14] * k;
    m[3] = j[3] * n + j[7] * G + j[11] * W + j[15] * k;
  };
  function hk(j, q, m, n) {
    if (!j) j = 0;
    if (!q) q = 0;
    if (!m) m = 0;
    if (!n) n = 0;
    this.x = j;
    this.y = q;
    this.r = m;
    this.$ = n;
  }
  hk.prototype.C = function () {
    return this.r * this.$;
  };
  hk.prototype.P = function () {
    return new hk(this.x, this.y, this.r, this.$);
  };
  hk.prototype.contains = function (j, q) {
    return (
      j >= this.x && j <= this.x + this.r && q >= this.y && q <= this.y + this.$
    );
  };
  hk.prototype.QL = function (j) {
    return this.contains(j.x, j.y);
  };
  hk.prototype.Jn = function (j) {
    return (
      this.x <= j.x &&
      this.y <= j.y &&
      j.x + j.r <= this.x + this.r &&
      j.y + j.$ <= this.y + this.$
    );
  };
  hk.prototype.qE = function (j) {
    this.x = j.x;
    this.y = j.y;
    this.r = j.r;
    this.$ = j.$;
  };
  hk.prototype.Lg = function (j) {
    return this.x == j.x && this.y == j.y && this.r == j.r && this.$ == j.$;
  };
  hk.prototype.Lh = function (j, q) {
    this.x -= j;
    this.y -= q;
    this.r += 2 * j;
    this.$ += 2 * q;
  };
  hk.prototype.avN = function (j) {
    this.Lh(j.x, j.y);
  };
  hk.prototype.TM = function (j) {
    var q = Math.max(this.x, j.x),
      m = Math.max(this.y, j.y),
      n = Math.min(this.x + this.r, j.x + j.r),
      G = Math.min(this.y + this.$, j.y + j.$);
    if (n < q || G < m) return new hk();
    else return new hk(q, m, n - q, G - m);
  };
  hk.prototype.C2 = function (j) {
    if (
      j.y + j.$ < this.y ||
      j.x > this.x + this.r ||
      j.y > this.y + this.$ ||
      j.x + j.r < this.x
    )
      return !1;
    return !0;
  };
  hk.prototype.jG = function () {
    return this.r <= 0 || this.$ <= 0;
  };
  hk.prototype.offset = function (j, q) {
    this.x += j;
    this.y += q;
  };
  hk.prototype.aiM = function (j) {
    this.offset(j.x, j.y);
  };
  hk.prototype.als = function () {
    this.x = this.y = this.r = this.$ = 0;
  };
  hk.prototype.Tu = function (j, q, m, n) {
    this.x = j;
    this.y = q;
    this.r = m;
    this.$ = n;
  };
  hk.prototype.vd = function (j) {
    if (this.jG()) return j.P();
    if (j.jG()) return this.P();
    var q = this.P();
    q.aBO(j);
    return q;
  };
  hk.Qm = new Float32Array(2);
  hk.prototype.aBO = function (j) {
    if (j.jG()) return;
    if (this.jG()) {
      this.qE(j);
      return;
    }
    this.aIp(j.x, j.y);
    this.aIp(j.x + j.r, j.y + j.$);
  };
  hk.prototype.aIp = function (j, q) {
    var m = Math.min(this.x, j),
      n = Math.min(this.y, q);
    this.r = Math.max(this.x + this.r, j) - m;
    this.$ = Math.max(this.y + this.$, q) - n;
    this.x = m;
    this.y = n;
  };
  hk.prototype.a3H = function (j, q) {
    this.x = j;
    this.y = q;
    this.r = this.$ = 0;
  };
  function k$(j, q, m, n, G, W) {
    if (typeof j === "undefined") {
      j = 1;
      q = 0;
      m = 0;
      n = 1;
      G = 0;
      W = 0;
    }
    this.Sd = j;
    this.X = q;
    this.ra = m;
    this.Jy = n;
    this.Tt = G;
    this.BL = W;
  }
  k$.prototype.Dc = function () {
    return Math.sqrt(Math.abs(this.Sd * this.Jy - this.X * this.ra));
  };
  k$.prototype.asf = function () {
    var j = this,
      q = function (m) {
        return Math.abs(m) < 1e-9 ? 0 : m;
      };
    j.Sd = q(j.Sd);
    j.X = q(j.X);
    j.ra = q(j.ra);
    j.Jy = q(j.Jy);
    j.Tt = q(j.Tt);
    j.BL = q(j.BL);
  };
  k$.prototype.uL = function (j) {
    return new ea(
      j.x * this.Sd + j.y * this.ra + this.Tt,
      j.x * this.X + j.y * this.Jy + this.BL
    );
  };
  k$.prototype.translate = function (j, q) {
    this.Tt += j;
    this.BL += q;
  };
  k$.prototype.rotate = function (j) {
    var q = new k$(Math.cos(j), -Math.sin(j), Math.sin(j), Math.cos(j), 0, 0);
    this.concat(q);
  };
  k$.prototype.scale = function (j, q) {
    var m = new k$(j, 0, 0, q, 0, 0);
    this.concat(m);
  };
  k$.prototype.concat = function (j) {
    this.qE(
      new k$(
        this.Sd * j.Sd + this.X * j.ra,
        this.Sd * j.X + this.X * j.Jy,
        this.ra * j.Sd + this.Jy * j.ra,
        this.ra * j.X + this.Jy * j.Jy,
        this.Tt * j.Sd + this.BL * j.ra + j.Tt,
        this.Tt * j.X + this.BL * j.Jy + j.BL
      )
    );
  };
  k$.prototype.BR = function () {
    var j = this.Sd * this.Jy - this.X * this.ra;
    this.qE(
      new k$(
        this.Jy / j,
        -this.X / j,
        -this.ra / j,
        this.Sd / j,
        (this.ra * this.BL - this.Jy * this.Tt) / j,
        (this.X * this.Tt - this.Sd * this.BL) / j
      )
    );
  };
  k$.prototype.P = function () {
    return new k$(this.Sd, this.X, this.ra, this.Jy, this.Tt, this.BL);
  };
  k$.prototype.qE = function (j) {
    this.Sd = j.Sd;
    this.X = j.X;
    this.ra = j.ra;
    this.Jy = j.Jy;
    this.Tt = j.Tt;
    this.BL = j.BL;
  };
  k$.Bf = function (j) {
    return [j.Sd, j.X, j.ra, j.Jy, j.Tt, j.BL];
  };
  k$.aGN = function (j) {
    return new k$(j[0], j[1], j[2], j[3], j[4], j[5]);
  };
  function gh() {}
  gh.aoS = {
    a6$: "PNG JPG WEBP PDF SVG GIF MP4".split(" "),
    aFV: "DDS TIFF AVIF TGA EXR BMP ICO DXF RAW EMF PPM".split(" "),
  };
  gh.Kd = "psd jpg png gif webp svg bmp".split(" ");
  gh.apB = ["ai", "svg", "pdf"];
  gh.I8 = function (j, q) {
    var m = j.memory.buffer.byteLength,
      n = ((q - m) >>> 16) + 1;
    try {
      if (m < q) j.memory.grow(n);
    } catch (gn) {
      return n * 65536;
    }
    return 0;
  };
  gh.$P = {
    nQ: function (j, q) {
      fetch(j)
        .then(function (m) {
          return m.arrayBuffer();
        })
        .then(function (m) {
          var n = new Uint8Array(m),
            G = 0,
            b = "";
          if (q) {
            G = n.length;
            var W = { level: 9 },
              k = pako.deflateRaw(n, W),
              T = UZIP.deflateRaw(n, W);
            console.log(G, k.length, T.length);
            n = k.length < T.length ? k : T;
          }
          for (var y = 0; y < n.length; y++) b += String.fromCharCode(n[y]);
          var c = btoa(b);
          console.log(JSON.stringify([G, c]));
        });
    },
    get: function (j, q) {
      var m = BINDB[j],
        n = Date.now(),
        G = atob(m[1]),
        W = G.length,
        k = new Uint8Array(W);
      for (var y = 0; y < W; y++) k[y] = G.charCodeAt(y);
      if (m[0] != 0) {
        var T = new Uint8Array(m[0]);
        UZIP.inflateRaw(k, T);
        k = T;
      }
      if (q) {
        var b = gh.Qa(k.buffer);
        k = gh.lj(b).LN(k.buffer);
      }
      return k;
    },
  };
  (function () {
    var j = gh.$P.get("wasm/dt").buffer;
    if (window.WebAssembly == null) {
      window.alert(
        "Your browser is too old (no WebAssembly). Please, update it."
      );
      return;
    }
    WebAssembly.instantiate(j).then(function (q) {
      gh.akm = q;
    });
  })();
  gh.a5_ = function (j, q) {
    return new Promise(function (m, n) {
      j.LN(q, null, function (G, W) {
        m(W);
      });
    });
  };
  gh.Qa = function (j) {
    if (!(j instanceof ArrayBuffer)) {
      console.log("Input is not ArrayBuffer");
    }
    var q = new Uint8Array(j),
      m = gh.aH1,
      n,
      G = 0,
      W = q.length - 1;
    if (m(q, [239, 187, 191])) G = 3;
    while (
      G < q.length &&
      (q[G] == 9 || q[G] == 10 || q[G] == 13 || q[G] == 32)
    )
      G++;
    while (W != 0 && (q[W] == 9 || q[W] == 10 || q[W] == 13 || q[W] == 32)) W--;
    if (m(q, [24, 70, 73, 67])) n = "gp3";
    if (m(q, [66, 67, 70, 90])) n = "gpx";
    if (m(q, [77, 84, 104, 100])) n = "mid";
    if (m(q, [56, 66, 80, 83])) n = "psd";
    if (m(q, [6, 6, 237, 245])) n = "indd";
    if (m(q, [68, 73, 67, 77], 128)) n = "dcm";
    if (m(q, [99, 104, 108, 118])) n = "chlv";
    if (m(q, [208, 207, 17, 224])) {
      if (M.Gf(q, "L\0t\0f\0H\0e\0a\0d\0e\0r") != -1) n = "ufo";
      else n = "office";
    }
    if (
      m(q, [102, 116, 121, 112, 109, 105, 102, 49], 4) ||
      m(q, [102, 116, 121, 112, 97, 118, 105, 102], 4)
    )
      n = "avif";
    if (
      m(q, [102, 116, 121, 112, 104, 101, 105, 99], 4) ||
      m(q, [102, 116, 121, 112, 109, 105, 102, 49], 4) ||
      m(q, [102, 116, 121, 112, 109, 115, 102, 49], 4)
    )
      n = "heic";
    if (m(q, [102, 116, 121, 112, 105, 115, 111, 109], 4)) n = "mp4";
    if (m(q, [102, 116, 121, 112, 109, 112, 52, 50], 4)) n = "mp4";
    if (m(q, [102, 116, 121, 112, 113, 116, 32, 32], 4)) n = "mp4";
    if (m(q, [102, 116, 121, 112, 105, 115, 111, 53], 4)) n = "mp4";
    if (m(q, [26, 69, 223, 163])) n = "mkv";
    if (m(q, [102, 116, 121, 112, 99, 114, 120, 32], 4)) n = "cr3";
    if (m(q, [0, 255, 75, 65])) n = "afphoto";
    if (m(q, [67, 83, 70, 67, 72, 85, 78, 75])) n = "clip";
    if (m(q, [83, 65, 73, 45, 67, 65])) n = "sai2";
    if (m(q, [70, 82, 65, 67])) n = "frac";
    if (m(q, [120]) && [94, 156, 218].indexOf(q[1]) != -1) n = "pxd";
    if (m(q, [80, 68, 78, 51])) n = "pdn";
    if (m(q, [103, 105, 109, 112, 32, 120, 99, 102, 32])) n = "xcf";
    if (m(q, [102, 105, 103, 45, 107, 105, 119, 105])) n = "fig";
    if (m(q, [105, 99, 110, 115])) n = "icns";
    if (m(q, [137, 80, 78, 71, 13, 10, 26, 10])) {
      n = "png";
      var k = 8;
      while (k < q.length) {
        var T = M.Z$(q, k);
        k += 4;
        var b = M.IH(q, k, 4);
        k += 4;
        if (b == "mkTS") n = "fpng";
        k += T + 4;
      }
    }
    if (m(q, [87, 76])) n = "cdr";
    if (m(q, [82, 73, 70, 70])) {
      var c = l3.VB(q),
        a = c.HF;
      if (a == "WEBP") n = "webp";
      else if (a.slice(0, 3) == "CDR") n = "cdr";
      else if (a == "sfbk") n = "sf2";
      else n = a;
    }
    if (
      m(q, [70, 79, 82, 77]) ||
      m(q, [70, 79, 82, 52]) ||
      m(q, [76, 73, 83, 84]) ||
      m(q, [67, 65, 84, 32])
    ) {
      var c = dg.VB(q),
        a = c.HF;
      if (a == "ILBM" || a == "CIMG" || a == "ANIM") n = "ilbm";
      else n = a;
    }
    if (m(q, [255, 216, 255])) n = "jpg";
    if (m(q, [0, 0, 0, 12, 106, 80, 32, 32])) n = "jpg";
    if (m(q, [48, 0, 1, 0], 4)) n = "jb2";
    if (m(q, [71, 73, 70, 56])) n = "gif";
    if (m(q, [255, 10]) || m(q, [0, 0, 0, 12, 74, 88, 76, 32, 13, 10, 135, 10]))
      n = "jxl";
    if (m(q, [0, 0, 0, 2, 121, 102, 113, 76])) n = "msh";
    if (m(q, [0, 0, 0, 3, 121, 102, 113, 76])) n = "msh";
    if (m(q, [0, 0, 0, 16])) n = "atn";
    if (m(q, [0, 1])) n = "aco";
    if (m(q, [0, 2])) n = "aco";
    if (m(q, [65, 83, 69, 70])) n = "aco";
    if (
      [0, 1].indexOf(q[1]) != -1 &&
      [1, 2, 3, 9, 10, 11].indexOf(q[2]) != -1 &&
      [0, 16, 24, 32].indexOf(q[7]) != -1
    )
      n = "tga";
    if (m(q, [0, 2, 56, 66, 83, 76])) n = "asl";
    if (m(q, [0, 1, 0, -1, 0, 2, 0])) n = "abr";
    if (m(q, [0, 2, 0, -1, 0, 2, 0])) n = "abr";
    if (m(q, [0, 6, 0, 1])) n = "abr";
    if (m(q, [0, 6, 0, 2])) n = "abr";
    if (m(q, [0, 7, 0, 2])) n = "abr";
    if (m(q, [0, 9, 0, 2])) n = "abr";
    if (m(q, [0, 10, 0, 2])) n = "abr";
    if (m(q, [56, 66, 70, 83])) n = "shc";
    if (m(q, [56, 66, 80, 84])) n = "pat";
    if (m(q, [56, 66, 71, 82])) n = "grd";
    if (m(q, [71, 73, 77, 80, 32, 71, 114, 97])) n = "grd";
    if (m(q, [56, 66, 84, 80])) n = "tpl";
    if (m(q, [0, 4, 0, 5])) n = "acv";
    if (m(q, [99, 117, 115, 104])) n = "csh";
    if (m(q, [0, 1, 0, 0, 0])) n = "otf";
    if (m(q, [79, 84, 84, 79])) n = "otf";
    if (m(q, [116, 116, 99, 102])) n = "otf";
    if (m(q, [119, 79, 70, 70])) n = "otf";
    if (m(q, [68, 68, 83, 32])) n = "dds";
    if (m(q, [80, 86, 82, 3])) n = "pvr";
    if (m(q, [86, 84, 70, 0])) n = "vtf";
    if (m(q, [83, 73, 77, 80])) n = "fits";
    if ((m(q, [0, 0, 1, 0]) || m(q, [0, 0, 2, 0])) && q[4] != 0) n = "ico";
    if (m(q, [66, 77])) n = "bmp";
    if (m(q, [40, 0, 0, 0])) n = "bmp";
    if (m(q, [80, 49])) n = "ppm";
    if (m(q, [80, 50])) n = "ppm";
    if (m(q, [80, 51])) n = "ppm";
    if (m(q, [80, 52])) n = "ppm";
    if (m(q, [80, 53])) n = "ppm";
    if (m(q, [80, 54])) n = "ppm";
    if (m(q, [73, 73, 42, 0])) n = "tiff";
    if (m(q, [77, 77, 0, 42])) n = "tiff";
    if (m(q, [73, 73, 85, 0])) n = "tiff";
    if (m(q, [73, 73, 82, 83])) n = "tiff";
    if (m(q, [73, 73, 82, 79])) n = "tiff";
    if (n == "tiff") {
      var f = UTIF.decode(q),
        U = gh.ZC.azq(f);
      if (U[1]) n = U[1];
      else if (f[0].t37724) n = "ptif";
    }
    if (m(q, [70, 85, 74, 73, 70, 73, 76, 77])) n = "raf";
    if (m(q, [112])) n = "lif";
    if (m(q, [73, 73, 26, 0])) n = "ciff";
    if (m(q, [83, 81, 76, 105])) n = "sketch";
    if (m(q, [80, 75])) {
      var Z = UZIP.parse(j, !0);
      if (Z["document.json"]) n = "sketch";
      else if (Z.manifest) n = "xd";
      else if (Z["maindoc.xml"]) n = "kra";
      else if (Z["content/root.dat"]) n = "cdr";
      else if (Z["content/riffData.cdr"]) n = "cdr";
      else if (Z["canvas.fig"]) n = "fig";
      else if (Z["manifest.json"]) n = "pxz";
      else n = "zip";
    }
    if (q.length > 260 && m(q, [117, 115, 116, 97, 114, 32], 257)) n = "zip";
    if (m(q, [55, 122, 188, 175])) n = "7z";
    if (m(q, [123])) n = "json";
    if (M.Z$(q, 0) == q.length) n = "icc";
    if (m(q, [35]) && n == null) n = "icc";
    if (m(q, [84, 73, 84, 76], G)) n = "icc";
    if (m(q, [76, 85, 84, 95], G)) n = "icc";
    if (m(q, [60, 63, 120, 109], G)) {
      if (M.Gf(q, "<look>") != -1) n = "icc";
      else n = "svg";
    }
    if (m(q, [255, 254, 60, 0], G)) n = "svg";
    if (m(q, [60, 115, 118, 103], G)) n = "svg";
    if (
      m(q, [60, 33, 100, 111], G) ||
      m(q, [60, 33, 68, 79], G) ||
      m(q, [60, 33, 45, 45], G) ||
      m(q, [60, 104, 116, 109], G) ||
      m(q, [60, 72, 84, 77], G)
    ) {
      if (M.Gf(q, "<svg") != -1) n = "svg";
      else n = "html";
    }
    if (m(q, [37, 33]) || m(q, [197, 208, 211, 198])) {
      if (
        M.Gf(q, "%AI9_PrivateDataBegin") != -1 ||
        M.Gf(q, "%AI5_BeginLayer") != -1 ||
        M.Gf(q, "%AI5_NumLayers") != -1
      )
        n = "ai";
      else n = "eps";
    }
    if (m(q, [37, 80, 68, 70], G)) {
      var h = M.Gf(q, "/AIMetaData ");
      if (h != -1) {
        if (M.Gf(q, ">>/Encrypt ", h) != -1) n = "pdf";
        else n = "ai";
      } else n = "pdf";
    } else if (m(q, [10, 69, 79, 70], W - 3)) n = "dxf";
    if (m(q, [1, 0, 9, 0])) n = "wmf";
    if (m(q, [215, 205, 198, 154])) n = "wmf";
    if (m(q, [1, 0, 0, 0])) n = "emf";
    if (m(q, [118, 47, 49, 1])) n = "exr";
    if (m(q, [35, 63, 82, 65])) n = "hdr";
    if (m(q, [35, 63, 82, 71])) n = "hdr";
    if (m(q, [10, 10, 10, 10])) n = "jsx";
    if (m(q, [77, 90])) n = "exe";
    if (n == null) {
      if (m(q, [0, 5, 22, 7])) n = "adoub";
      if (m(q, [73, 68, 51])) n = "mp3";
      if (m(q, [73, 103, 103, 83])) n = "ogg";
      if (m(q, [79, 103, 103, 83])) n = "ogg";
      if (m(q, [91, 73, 110, 116])) n = "url";
      if (m(q, [98, 112, 108, 105])) n = "bpli";
      if (m(q, [98, 118, 52, 49])) n = "lz4";
      if (m(q, [119, 79, 70, 50])) n = "woff2";
      if (m(q, [60, 63, 112, 104])) n = "php";
      if (m(q, [82, 97, 114, 33])) n = "rar";
    }
    if (n == null && B.raw.zI(q.length) != null) return "tiff";
    return n;
  };
  gh.aH1 = function (j, q, m) {
    if (m == null) m = 0;
    for (var y = 0; y < q.length; y++)
      if (q[y] != -1 && j[m + y] != q[y]) return !1;
    return !0;
  };
  gh.lj = function (j) {
    var q = {
      BMP: gh.aGu,
      CDR: gh.Xo,
      DDS: gh.xS,
      EMF: gh.if,
      DXF: gh.EW,
      EPS: gh.M9,
      FIG: gh.GU,
      FPNG: gh.I3,
      INDD: gh.xj,
      CHLV: gh.ag0,
      GIF: gh.xi,
      ICO: gh.Ej,
      ILBM: gh.a1Q,
      FITS: gh.atn,
      EXR: gh.Yj,
      HDR: gh.qP,
      JPG: gh.v1,
      LIF: gh.XC,
      DCM: gh.aag,
      PDF: gh.E1,
      PDN: gh.M$,
      PNG: gh.Xp,
      ICNS: gh.aAr,
      PPM: gh.Qb,
      PSD: gh.qs,
      PXD: gh.KG,
      PXZ: gh.SM,
      RAW: gh.g8,
      SKETCH: gh.$s,
      UFO: gh.rj,
      OFFICE: gh.Fe,
      SVG: gh.s_,
      TGA: gh.K0,
      AVIF: gh.o$,
      HEIC: gh.o$,
      JXL: gh.o$,
      TIFF: gh.ZC,
      PTIF: gh.x3,
      DNG: gh.ZC,
      CR2: gh.ZC,
      NEF: gh.ZC,
      ARW: gh.ZC,
      RW2: gh.ZC,
      ORF: gh.ZC,
      FFF: gh.ZC,
      RAF: gh.YN,
      CR3: gh.CJ,
      VTF: gh.adG,
      WEBP: gh.z7,
      WMF: gh._1,
      XCF: gh.oZ,
      XD: gh.SB,
      KRA: gh.Va,
      EXE: gh.a7D,
      AI: gh.h7,
      AFPHOTO: gh.fG,
      GVDESIGN: gh.cz,
      CLIP: gh.eH,
      SAI2: gh.B4,
      FRAC: gh.eL,
      MP4: gh.aI2,
      MKV: gh.aI2,
      MID: gh.aEB,
      SEQ: gh.a36,
      OGG: gh.a7v,
      GP3: gh.aKG,
      GPX: gh.a3P,
    };
    return q[j.toUpperCase()];
  };
  gh.ab = function (y) {
    var j = gh.aoS.a6$,
      q = gh.aoS.aFV,
      m,
      n = [];
    if (y == null) m = j.concat(q);
    else m = y == 0 ? j : q;
    for (var y = 0; y < m.length; y++) if (gh.lj(m[y]).Ev) n.push(m[y]);
    return n;
  };
  gh.ayk = (function () {
    var j;
    function q(n) {
      var G = n.target,
        W = G.width,
        k = G.height,
        T = document.createElement("canvas");
      T.width = W;
      T.height = k;
      var b = T.getContext("2d");
      b.drawImage(G, 0, 0);
      j({
        Iu: new hk(0, 0, W, k),
        data: b.getImageData(0, 0, W, k).data.buffer,
      });
    }
    function m(n, G, W) {
      j = W;
      var k = document.createElement("img");
      k.onload = q;
      k.src = "data:" + G + ";base64," + gh.Sk(n);
    }
    return m;
  })();
  gh.oH = function (j, q, m, n, G) {
    var W = gh.Rq(j, q, m, n, G),
      k = gh.TD(W);
    return k.buffer;
  };
  gh.TD = function (j) {
    var q = atob(j.split(",").pop()),
      m = new Uint8Array(q.length);
    for (var y = 0; y < q.length; y++) m[y] = q.charCodeAt(y);
    return m;
  };
  gh.Rq = function (j, q, m, n, G, W) {
    if (!(j instanceof ArrayBuffer)) throw "e";
    if (n == null) n = "png";
    if (n == "png" && W == !0) {
      var k = gh.lj("PNG").Ev([[j, 0]], q, m);
      return "data:image/png;base64," + gh.Sk(k);
    }
    var T = gh.q3;
    if (T == null) T = gh.q3 = document.createElement("canvas");
    if (T.width != q || T.height != m) {
      T.width = q;
      T.height = m;
    }
    var b = T.getContext("2d"),
      c = new ImageData(new Uint8ClampedArray(j, 0, q * m * 4), q, m);
    b.putImageData(c, 0, 0);
    return T.toDataURL("image/" + n, G);
  };
  gh.a1_ = function (j, q, m, n, G) {
    if (G == null) G = 0;
    var W =
        '<defs> \t<filter id="sofGlow" height="300%" width="300%" x="-75%" y="-75%"> \t\t<!-- Thicken out the original shape --> \t<feMorphology operator="dilate" radius="3" in="SourceAlpha" result="thicken" /> \t\t<!-- Use a gaussian blur to create the soft blurriness of the glow -->\t\t<feGaussianBlur in="thicken" stdDeviation="4" result="blurred" />\t\t<!-- Change the colour -->\t\t<feFlood flood-color="rgb(255,255,255)" result="glowColor" />\t\t<!-- Color in the glows -->\t\t<feComposite in="glowColor" in2="blurred" operator="in" result="softGlow_colored" />\t\t<!--\tLayer the effects together -->\t\t<feMerge>\t\t\t<feMergeNode in="softGlow_colored"/>\t\t\t<feMergeNode in="SourceGraphic"/>\t\t</feMerge>\t</filter></defs>',
      k =
        '<svg  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  width="128"  height="128"> ' +
        W +
        '<g transform="translate(64 64) scale(' +
        0.25 +
        ')">';
    if (j == 1)
      k +=
        '<g transform="scale(0.07 0.07) translate(-550 -112)"  style="fill:#ffffff; stroke:#000000; stroke-width:60px;">' +
        '<path d="m 555.1899,112.08836 0,120.71094 0,920.7109 232.42188,-232.42184 111.90429,270.44924 169.76363,-84.8828 -114.09371,-273.8555 320.71481,0 z"/>' +
        "</g>";
    k +=
      '<g filter="url(#sofGlow)"><image transform="rotate(' +
      G +
      ')" xlink:href="' +
      q +
      '" x="' +
      80 * m +
      '" y="' +
      80 * n +
      '" height="80" width="80"/></g>' +
      "</g>" +
      "</svg>";
    var T = new Uint8Array(k.length);
    M.YG(k, T, 0);
    var b = "data:image/svg+xml;base64," + gh.Sk(T.buffer);
    return { NP: b, HA: new hk(0, 0, 128, 128), Ly: new ea(64, 64) };
  };
  gh.Sk = function (j) {
    var q = new Uint8Array(j),
      m = "";
    for (var y = 0; y < q.length; y++) m += String.fromCharCode(q[y]);
    return btoa(m);
  };
  gh.vG = function (j) {
    var q = atob(j),
      m = q.length,
      n = new Uint8Array(m);
    for (var y = 0; y < m; y++) n[y] = q.charCodeAt(y);
    return n.buffer;
  };
  gh.agr = function (j, q, m, n) {
    var G = new Uint8Array(j),
      W = ~~(G.length / (q * m * 2)),
      k;
    if (n)
      for (var y = 0; y < G.length; y += 2) {
        var T = G[y];
        G[y] = G[y + 1];
        G[y + 1] = T;
      }
    G = new Uint16Array(G.buffer, 0, G.buffer.byteLength >>> 1);
    if (W == 4) k = G.buffer;
    else if (W == 3 || W == 2 || W == 1) {
      var b = new Uint16Array(q * m * 4);
      k = b.buffer;
      b.fill(65535);
      for (var c = 0; c < b.length; c += 4) {
        var y = c >>> 2,
          a = c >>> 1,
          f = y * 3;
        if (W == 3) {
          b[c] = G[f];
          b[c + 1] = G[f + 1];
          b[c + 2] = G[f + 2];
        } else if (W == 2) {
          b[c] = b[c + 1] = b[c + 2] = G[a];
          b[c + 3] = G[a + 1];
        } else b[c] = b[c + 1] = b[c + 2] = G[y];
      }
    } else throw W;
    return k;
  };
  gh.ayM = function (j) {
    var q = [],
      m = [];
    for (var y = 0; y < j.U.length; y++) {
      var n = j.U[y];
      if (n.getName().slice(0, 3) == "_a_") {
        q.push(y);
        m.push(n.Iw());
      }
    }
    return [q, m];
  };
  gh.Wo = function (j, q, m, n, G, W) {
    if (m == null) m = j.r;
    if (n == null) n = j.$;
    var k = new hk(0, 0, j.r, j.$),
      T = new k$(m / (j.r + 0.001), 0, 0, n / (j.$ + 0.001), 0, 0),
      c;
    j.A$(!0);
    q = q.toUpperCase();
    var b = gh.lj(q);
    if (b.k5) {
      c = b.Ev(j, m, n, G, W);
    } else if (ei == 1) {
      var a = j.fQ(W, m, n);
      c = b.Ev([[a, 0, j.zv, j.Un]], m, n, G);
    } else {
      var f = gh.ayM(j),
        U = f[0],
        Z = f[1],
        h = j.$T(),
        X = null;
      if (j.depth == 32) h = null;
      var u = h && G ? G.srgb : !1,
        i = h && !u ? h[0] : null,
        x = q == "EXR" ? 32 : G && G.ke16 ? 16 : 8;
      if (j._E.length != 0) {
        X = [];
        for (var y = 0; y < j._E.length; y++) X.push(j._E[y].fy(k));
      }
      if (U.length < 2) {
        var $ = gh.apa(j.ht(), h, u, j, x),
          H;
        if (m == j.r && n == j.$) H = $.buffer;
        else {
          var C = L.Dq.Ve([$, k], T);
          H = C.buffer.buffer;
          if (X) {
            var l = B.j(k.C() * 4);
            for (var y = 0; y < X.length; y++) {
              B.ln(X[y], l, 3);
              var C = L.Dq.Ve([l, k], T),
                v = (X[y] = B.j(C.H.C()));
              B.Ih(C.buffer, v, 3);
            }
          }
        }
        c = b.Ev([[H, 0, j.zv, j.Un, X, i]], m, n, G);
      } else {
        var K = [];
        for (var y = 0; y < U.length; y++) {
          var S = U[y],
            o = j.root.Zg(S),
            a;
          if (o.v.D1()) {
            var V = o.children;
            for (var P = 0; P < V.length; P++) {
              if (U.indexOf(V[P].index) != -1)
                alert(
                  "You have a frame inside a folder, which is also a frame. This folder should not be a frame (should not start with _a_).",
                  6e3
                );
            }
          }
          for (var P = 0; P < U.length; P++) j.U[U[P]].xg(U[P] == S);
          j.DB();
          j.gF();
          j.iY();
          if (m == j.r && n == j.$) a = j.ht().slice(0);
          else {
            var C = L.Dq.Ve([j.ht(), k], T);
            a = C.buffer;
          }
          var H = gh.apa(a, h, u, j, x).buffer,
            z = j.U[S].getName().split(",");
          K.push([H, z[1] ? parseInt(z[1]) : 100, j.zv, j.Un, X, i]);
        }
        for (var y = 0; y < U.length; y++) j.U[U[y]].xg(Z[y]);
        j.gF();
        j.iY();
        if (G) {
          var E = G.rvrs,
            A = G.bmrn,
            N = G.sped / 100,
            Q = 1;
          if (N != 1)
            for (var y = 0; y < K.length; y++)
              K[y][1] = Math.round((K[y][1] == 0 ? 16 : K[y][1]) / N);
          if (Q < 1) {
            var e = 0,
              Y = [],
              O = 0,
              P = 0;
            for (var y = 0; y < K.length; ++y) {
              e += K[y][1];
              if (y > 0) {
                Y.push(Y[Y.length - 1] + K[y - 1][1]);
              } else {
                Y.push(0);
              }
            }
            var d = Q * K.length,
              I = e / d,
              s = [];
            for (var y = 0; y < d; ++y) {
              var p = 0;
              while (O > Y[P] && P + 1 < K.length) {
                p += K[P][1];
                ++P;
              }
              if (p != 0) {
                var F = Math.round(Math.min(1, (Y[P] - O) / K[P][1]) * p);
                s[s.length - 1][1] += p - F;
                if (K[P][1] < K[P - 1][1] / 2) {
                  s.push(K[P - 1]);
                } else {
                  s.push(K[P]);
                }
                s[s.length - 1][1] = K[P][1] + F;
              } else if (P < K.length) {
                s.push(K[P]);
              }
              O += I;
              ++P;
            }
            while (P < K.length) {
              s[s.length - 1][1] += K[P][1];
              ++P;
            }
            K = s;
          }
          if (E) K.reverse();
          if (A) {
            var g = K.slice(1, K.length - 1);
            g.reverse();
            K = K.concat(g);
          }
        }
        c = b.Ev(K, m, n, G);
      }
    }
    return c;
  };
  gh.apa = function (j, q, m, n, G) {
    var W = n.Oq();
    if (n.depth == 32 && G != 32)
      for (var y = 0; y < j.length; y++) j[y] = Math.min(1, j[y]);
    if (m) {
      j = j.slice(0);
      ICC.U.applyLUT(q[3], q[2], j, j);
    } else if (W && n.add.fcmy == 1) {
      j = j.slice(0);
      ICC.U.applyLUT(W[n.add.fcmy == 1 ? 5 : 3], W[2], j, j);
    }
    if (n.depth > G) {
      j = B.sL(j, G);
      alert("Converting " + n.depth + "-bit to " + G + "-bit colors", 3e3);
    }
    return j;
  };
  gh.a9B = function (j, q) {
    var m = new Uint8Array(j.data),
      n = new Uint8Array(q.data),
      G = 0,
      W = 0;
    for (var k = 0; k < m.length; k += 4) {
      var T = m[k] - n[k],
        b = m[k + 1] - n[k + 1],
        f = m[k + 2] - n[k + 2],
        U = m[k + 3] - n[k + 3],
        Z = (T * T + b * b + f * f + U * U) >>> 2;
      G += Z;
      if (Z > 25) W++;
    }
    var h = W / j.Iu.C() < 1e-4;
    return h;
  };
  gh.wk = function (j, q) {
    var m = q[0].Le && q[0].Le.startsWith("_a_"),
      n;
    if (m && !1) {
      var G = 0,
        W = q.length;
      for (var y = 0; y < q.length - 1; y++) {
        var k = q[y],
          T = q[y + 1],
          b = gh.a9B(k, T);
        if (b) {
          var f = parseFloat(k.Le.split(",").pop()),
            U = parseFloat(T.Le.split(",").pop());
          k.Le = k.Le.split(",")[0] + "," + Math.round(f + U);
          q.splice(y + 1, 1);
          y--;
          G++;
        }
      }
      if (G != 0) {
        alert("Deleted " + G + " frames out of " + W + ".");
        for (var y = 0; y < q.length; y++) {
          var Z = q[y],
            h = Z.Le;
          Z.Le = "_a_frm" + y + "," + h.split(",")[1];
        }
      }
    }
    var u = new fb(j + "." + ["psd", "ai"][ei]);
    if (q[0].depth) u.depth = q[0].depth;
    var i = new hk(0, 0, 1, 1);
    if (m) {
      n = u.dj();
      n.add.lsct = hQ.WR;
      n.tV(j);
      n.hz = "pass";
      n.uZ = 24;
      n.xg(!0);
      u.U.push(u.to());
    }
    for (var y = 0; y < q.length; y++) {
      var x = q[y];
      i = i.vd(x.Iu);
      var X = u.dj();
      X.xg(y == 0);
      X.tV(q.length == 1 ? "Background" : "Layer " + y);
      if (y == 0 && x.zv) u.zv = x.zv;
      if (y == 0 && x.Un) u.Un = x.Un;
      if (x.Le) X.tV(x.Le);
      if (x.ax)
        for (var $ = 0; $ < x.ax.length; $++) {
          var H = x.ax[$],
            C = fb.t8(H[0]);
          C.add.vmsk.D = H[1];
          B.z.La(H[1], new k$(i.r, 0, 0, i.$, 0, 0));
          u.GA.push(C);
        }
      if (x.M3) u.M3 = x.M3;
      X.H = x.Iu.P();
      var l = x.depth ? x.depth : u.depth;
      if (l == 8) X.buffer = new Uint8Array(x.data);
      else if (l == 16) X.buffer = new Uint16Array(x.data);
      else if (l == 32) X.buffer = new Float32Array(x.data);
      X.buffer = B.sL(X.buffer, u.depth);
      if (y == 0 && x.Pt) u.uJ(x.Pt);
      B.TE(X, !0);
      u.U.push(X);
    }
    if (m) u.U.push(n);
    if (q[0]._E) {
      for (var y = 0; y < q[0]._E.length; y++) {
        var v = new R.T0();
        u._E.push(v);
        v.H = q[0].Iu.P();
        v.N = q[0]._E[y];
      }
    }
    u.J = [m ? u.U.length - 1 : 0];
    u.r = i.r;
    u.$ = i.$;
    if (ei == 0) u.buffer = B.j(i.C() * 4, u.depth);
    u.gF();
    return u;
  };
  gh.azB = function (j, q, m) {
    var n = j.length - m,
      G = new Uint8Array(n);
    for (var y = 0; y < q; y++) G[y] = j[y];
    for (var y = q; y < n; y++) G[y] = j[y + m];
    return G;
  };
  gh.aAO = function (j, q, m) {
    var n = j.length,
      G = m.length,
      W = new Uint8Array(n + G);
    for (var y = 0; y < q; y++) W[y] = j[y];
    for (var y = q; y < n; y++) W[y + G] = j[y];
    W.set(m, q);
    return W;
  };
  gh.ayO = function (j, q, m, n, G, W, k, T, b) {
    var c = new fd(_.E.w, !0);
    c.l = L.cJ;
    c.data = { R: "h_stepbck" };
    var a = {};
    for (var f = 1; f < m.length; f++) {
      var U = j.J.slice(0),
        Z = gh.abV(j, b, q, m, n, f),
        h = "img" + f,
        u = m[0].indexOf(k);
      if (k != "") {
        if (u == -1) alert("Column " + k + " not found.");
        else h = m[f][u];
      }
      a[h + "." + G.toLowerCase()] = new Uint8Array(
        gh.Wo(j, G, null, null, W, T)
      );
      for (var y = 0; y < Z; y++) b.k(c);
    }
    return UZIP.encode(a);
  };
  gh.abV = function (j, q, m, n, G, W) {
    var k = new fd(_.E.c, !0),
      c = 0;
    k.data = { R: _.Y.D4 };
    var T = new fd(_.E.w, !0);
    T.l = L.W1;
    T.data = { R: R.bG, kJ: { buffer: null, H: null } };
    var b = T.data.kJ;
    for (var a = 0; a < m.length; a++) {
      var f = m[a],
        U = f.trait,
        Z = parseInt(f.docRef.slice(4, -2)),
        h = -1;
      for (var y = 0; y < j.U.length; y++) if (j.U[y].add.lyid == Z) h = y;
      if (h == -1) continue;
      var u = n[0].indexOf(f.varName);
      if (u == -1) {
        alert("Column " + f.varName + " is missing");
        return;
      }
      var i = n[W][u],
        x = j.U[h];
      j.J = [h];
      if (U == "textcontent") {
        k.data.dR =
          "app.activeDocument.activeLayer.textItem.contents = " +
          JSON.stringify(i) +
          ";";
        q.k(k);
        c++;
      }
      if (U == "visibility" && x.Iw() + "" != i.toLowerCase()) {
        i = i.trim().toLowerCase();
        if (i != "true" && i != "false") i = i == "" ? "false" : "true";
        k.data.dR = "app.activeDocument.activeLayer.visible = " + i + ";";
        if (x.Iw() + "" != i) {
          q.k(k);
          c++;
        }
      }
      if (U == "fileref") {
        var X = i.split("/").pop(),
          $ = null;
        for (var aF in G) if (aF.split("/").pop() == X) $ = G[aF];
        if ($ == null) {
          alert("Image " + X + " is missing.");
        } else {
          var H = gh.lj(gh.Qa($.buffer)).LN($.buffer)[0],
            C = H.Iu,
            l = x.H,
            o = 0,
            V = 0;
          if (x.add.SoLd) {
            var v = L.Dq.Kt(x.add.SoLd.nonAffineTransform);
            l = B.b.YU(v);
          }
          var K = l.r / l.$,
            S = C.r / C.$;
          if (K > S) {
            V = l.$;
            o = ~~(V * S);
          } else {
            o = l.r;
            V = ~~(o / S);
          }
          k.data.dR = "app.activeDocument.activeLayer.visible = false;";
          q.k(k);
          c++;
          var P = L.Dq.Ve(
            [new Uint8Array(H.data), C],
            new k$(o / C.r, 0, 0, V / C.$, 0, 0)
          );
          b.H = P.H;
          b.buffer = P.buffer;
          P.H.x = l.x + ((l.r - o) >>> 1);
          P.H.y = l.y + ((l.$ - V) >>> 1);
          q.k(T);
          c++;
          var z = j.U[j.J[0]];
          z.yA = x.yA;
          z.Yx = x.Yx;
          z.hz = x.hz;
          z.x7 = x.x7;
        }
      }
    }
    return c;
  };
  gh.Xp = {};
  gh.Xp.Ev = function (j, q, m, n) {
    if (n == null) n = { qual: 100, rept: 0 };
    var G = { sRGB: 1, loop: n.rept },
      W = j[0],
      k = Math.floor(W[0].byteLength / (q * m * 4)) * 8,
      U;
    if (W[5] != null) {
      delete G.sRGB;
      G.iCCP = W[5];
    }
    if (W[2] != null) {
      var T = Math.round(W[2] * (1e4 / 254));
      G.pHYs = [T, T, 1];
    }
    if (W[3] != null && n.mtdt && Object.keys(W[3]).length != 0) {
      G.iTXt = { "XML:com.adobe.xmp": kI.e7(W[3]) };
    }
    var b = n.qual,
      c = b == 100 ? 0 : Math.max(2, Math.floor(b * 5));
    if (c == 5) c = 4;
    var a = [],
      f = [];
    for (var y = 0; y < j.length; y++) {
      a.push(j[y][0]);
      f.push(j[y][1]);
    }
    if (n.ctoa && j[0][4]) {
      a[0] = a[0].slice(0);
      B.ln(j[0][4][0], new Uint8Array(a[0]), 3);
    }
    if (k == 8) U = UPNG.encode(a, q, m, c, f, G, n.nplt);
    else {
      var Z = [];
      for (var h = 0; h < a.length; h++) {
        var u = (Z[h] = a[h].slice(0)),
          i = new Uint8Array(u);
        for (var y = 0; y < i.length; y += 2) {
          var x = i[y];
          i[y] = i[y + 1];
          i[y + 1] = x;
        }
      }
      U = UPNG.encodeLL(Z, q, m, 3, 1, 16, f, G, !1);
    }
    return U;
  };
  gh.Xp.S4 = function (j, q, m, n) {
    if (n == null) n = 8;
    if (n == 16) {
      j = j.slice(0);
      var G = new Uint8Array(j);
      for (var y = 0; y < G.length; y += 2) {
        var W = G[y];
        G[y] = G[y + 1];
        G[y + 1] = W;
      }
    }
    return UPNG.encodeLL([j], q, m, 3, 1, n, null, null, !0);
  };
  gh.Xp.LN = function (j) {
    var q = Date.now(),
      m = UPNG.decode(j),
      n = m.width,
      G = m.height,
      W = 8,
      k = m.ctype,
      T,
      b = 0,
      c = null,
      a = m.tabs.iCCP;
    if (m.tabs.pHYs) b = Math.round((m.tabs.pHYs[0] * 254) / 1e4);
    var f = m.tabs.iTXt;
    if (f && f["XML:com.adobe.xmp"]) c = kI.bX(f["XML:com.adobe.xmp"]);
    if (cP && m.depth == 16) {
      T = [gh.agr(m.data.buffer.slice(0, n * G * 8), n, G, !0)];
      W = 16;
    } else T = UPNG.toRGBA8(m);
    if (T.length == 1)
      return [
        { Iu: new hk(0, 0, n, G), data: T[0], zv: b, Pt: a, Un: c, depth: W },
      ];
    var U = [];
    for (var y = 0; y < T.length; y++) {
      U.push({
        Le: "_a_frm" + y + "," + m.frames[y].delay,
        Iu: new hk(0, 0, n, G),
        data: T[y],
        zv: b,
        Pt: a,
        Un: c,
        depth: W,
      });
    }
    return U;
  };
  gh.Qb = {};
  gh.Qb.Ev = function (j, q, m, n) {
    var G = new Uint8Array(j[0][0]),
      W = q * m,
      k = W * 3,
      T = "P6\n" + q + " " + m + "\n255\n",
      b = T.length,
      c = new Uint8Array(b + k);
    for (var y = 0; y < b; y++) c[y] = T.charCodeAt(y);
    for (var y = 0; y < W; y++) {
      var a = y * 4,
        f = y * 3 + b;
      c[f] = G[a];
      c[f + 1] = G[a + 1];
      c[f + 2] = G[a + 2];
    }
    return c.buffer;
  };
  gh.Qb.LN = function (j) {
    j = new Uint8Array(j);
    var q = [
        " ".charCodeAt(0),
        "\n".charCodeAt(0),
        "\t".charCodeAt(0),
        "\r".charCodeAt(0),
      ],
      m = 0,
      n = String.fromCharCode(j[0]) + String.fromCharCode(j[1]),
      G = [],
      W = 0,
      k = n == "P1" || n == "P4" ? 2 : 3;
    for (m = 2; m < j.length; m++) {
      var T = j[m],
        b = String.fromCharCode(T);
      if (T == "#".charCodeAt(0)) {
        while (j[m] != "\n".charCodeAt(0)) m++;
        continue;
      }
      var c = q.indexOf(T) != -1;
      if (W == 0 && !c) {
        G.push(b);
        W = 1;
        continue;
      }
      if (W == 1 && !c) {
        G[G.length - 1] += b;
        continue;
      }
      if (W == 1 && c) {
        W = 0;
        if (G.length == k) break;
        continue;
      }
    }
    var a = parseInt(G[0]),
      f = parseInt(G[1]),
      U = a * f * 4,
      Z = n == "P1" || n == "P4" ? 1 : 255 / parseInt(G[2]),
      h = B.j(U);
    if (n == "P1" || n == "P2" || n == "P3") {
      var u = "",
        i = 0,
        W = 0,
        x = "#".charCodeAt(0);
      for (var y = m; y < j.length; y++) {
        var T = j[y],
          b = String.fromCharCode(T),
          c = q.indexOf(T) != -1;
        if (T == x) {
          while (j[y] != "\n".charCodeAt(0)) y++;
        } else if (W == 0 && !c) {
          u = b;
          W = 1;
        } else if (W == 1) {
          if (c) {
            W = 0;
            var X = parseInt(u);
            u = "";
            if (n == "P1") {
              h[i] = h[i + 1] = h[i + 2] = (1 - X) * 255;
              h[i + 3] = 255;
              i += 4;
            }
            if (n == "P2") {
              h[i] = h[i + 1] = h[i + 2] = Math.round(X * Z);
              h[i + 3] = 255;
              i += 4;
            }
            if (n == "P3") {
              h[i] = Math.round(X * Z);
              i++;
              if ((i & 3) == 3) {
                h[i] = 255;
                i++;
              }
            }
          } else u += b;
        }
      }
    }
    var $ = a * f;
    if (n == "P4")
      for (var H = 0; H < f; H++) {
        var C = H * 8 * Math.ceil(a / 8);
        for (var l = 0; l < a; l++) {
          var y = C + l,
            v = j[m + 1 + (y >> 3)];
          v = (v >> (7 - (y & 7))) & 1;
          var K = (H * a + l) << 2;
          h[K] = h[K + 1] = h[K + 2] = (1 - v) * 255;
          h[K + 3] = 255;
        }
      }
    if (n == "P5")
      for (var y = 0; y < $; y++) {
        var K = 4 * y;
        h[K] = h[K + 1] = h[K + 2] = Math.round(j[m + 1 + y] * Z);
        h[K + 3] = 255;
      }
    if (n == "P6")
      for (var y = 0; y < $; y++) {
        var K = 4 * y,
          S = m + 1 + 3 * y;
        h[K] = Math.round(j[S] * Z);
        h[K + 1] = Math.round(j[S + 1] * Z);
        h[K + 2] = Math.round(j[S + 2] * Z);
        h[K + 3] = 255;
      }
    return [{ Iu: new hk(0, 0, a, f), data: h.buffer }];
  };
  gh.xS = {};
  gh.xS.Ev = function (j, q, m, n) {
    if (n == null) n = { cmpr: 0, mpmp: !0 };
    if (typeof n[0] == "boolean") n[0] = 0;
    var G = new Uint8Array(j[0][0]);
    if (n.ctoa && j[0][4]) {
      G = G.slice(0);
      B.ln(j[0][4][0], G, 3);
    }
    var W = q & 3,
      k = m & 3;
    if (W != 0 || k != 0) {
      var T = q + (W == 0 ? 0 : 4 - W),
        b = m + (k == 0 ? 0 : 4 - k),
        c = new Uint8Array(T * b * 4);
      B.bs(c, 4278190080);
      B.M4(G, new hk(0, 0, q, m), c, new hk(0, 0, T, b));
      G = c;
      q = T;
      m = b;
    }
    var a = UTEX.DDS.encode(G.buffer, q, m, [n.cmpr, n.mpmp, n.dxsr]);
    if (!1) {
      var f = UTEX.DDS.decode(a)[0],
        c = new Uint8Array(f.Zj),
        U = 0;
      for (var y = 0; y < G.length; y++) {
        var Z = G[y] - c[y];
        U += Z * Z;
      }
      console.log(U);
    }
    return a;
  };
  gh.xS.LN = function (j) {
    var q = UTEX.DDS.decode(j),
      m = [];
    for (var y = 0; y < 1; y++) {
      var n = q[y],
        G = { Iu: new hk(0, 0, n.width, n.height), data: n.image };
      B.a64(G);
      m.push(G);
    }
    return m;
  };
  gh.adG = {};
  gh.adG.LN = function (j) {
    var q = UTEX.VTF.decode(j).pop(),
      m = { Iu: new hk(0, 0, q.width, q.height), data: q.image };
    B.a64(m);
    return [m];
  };
  gh.v1 = {};
  gh.v1.anB = null;
  gh.v1.a68 = function (j, q) {
    var m = gh.v1.anB,
      n = j.byteLength,
      G = q.width,
      W = q.height,
      k = G * W,
      T =
        5e6 +
        2 * n +
        k * (q.progressive ? Math.max(2, q.numComponents) * 4 + 1 : 8),
      b = m.instance.exports;
    gh.I8(b, T);
    var c = new Uint8Array(b.memory.buffer),
      a = b.malloc(n);
    c.set(new Uint8Array(j), a);
    var f = b.malloc(4),
      U = b.malloc(4),
      aF = b.malloc(4),
      Z = b.stbi_load_from_memory(a, n, f, U, aF, 4);
    b.free(a);
    b.free(f, U, aF);
    b.free(Z);
    var h = c.slice(Z, Z + k * 4);
    return h;
  };
  (function () {
    var j = gh.$P.get("wasm/jpg").buffer;
    if (window.WebAssembly == null)
      window.alert(
        "Your browser is too old (no WebAssembly). Please, update it."
      );
    WebAssembly.instantiate(j).then(function (q) {
      gh.v1.anB = q;
    });
  })();
  gh.v1.Ev = function (j, q, m, n) {
    if (n == null) n = { qual: 85, mtdt: !0 };
    var G = j[0],
      W = new Uint8Array(G[0]);
    if (B.kP(W)) {
      var k = new Uint8Array(W.length);
      k.fill(255);
      var T = new hk(0, 0, q, m);
      B.G.Jg("norm", W, T, k, T, T, 1);
      W = k;
    }
    var b = new Uint8Array(gh.oH(W.buffer, q, m, "jpeg", n.qual / 100));
    if (b.length < 2e4 || G[5]) {
      var c = M.Gf(b, [255, 226]);
      if (c != -1) {
        var a = M._h(b, c + 2);
        b = gh.azB(b, c, a + 2);
      }
    }
    if (G[5] != null) {
      var f = 4 + M._h(b, 4),
        U = G[5].length + 16,
        Z = new Uint8Array(U + 2);
      Z[0] = 255;
      Z[1] = 226;
      M.JP(Z, 2, U);
      M.Sc(Z, 4, "ICC_PROFILE");
      Z[16] = Z[17] = 1;
      Z.set(G[5], 18);
      b = gh.aAO(b, f, Z);
    }
    if (G[2] != null) {
      var h = gh.v1.St(b)[224][0] + 2;
      h += 9;
      b[h] = 1;
      M.JP(b, h + 1, G[2]);
      M.JP(b, h + 3, G[2]);
    }
    if (G[3] != null && n.mtdt == !0 && Object.keys(G[3]).length != 0) {
      var u = 0,
        i = 0,
        x = 0,
        X = kI.Ox(G[3]),
        $ = new Uint8Array(UTIF.encode([X])),
        H = "http://ns.adobe.com/xap/1.0/",
        f = 20;
      u = 4 + 6 + $.length;
      var C = kI.e7(G[3]),
        l = M.Nh(C);
      i = 4 + H.length + 1 + l.length;
      var v = kI.acW(G[3]);
      if (v.length != 0) {
        var K = 0,
          V = 0;
        for (var y = 0; y < v.length; y++) K += 5 + v[y][1].length;
        var S = K + (K & 1),
          o = B.j(14 + 4 + 4 + 4 + S);
        M.Sc(o, V, "Photoshop 3.0");
        V += 14;
        M.Sc(o, V, "8BIM");
        V += 4;
        o[V++] = 4;
        o[V++] = 4;
        V += 2;
        M.ZN(o, V, K);
        V += 4;
        for (var y = 0; y < v.length; y++) {
          var P = v[y],
            z = P[1];
          o[V++] = 28;
          o[V++] = 2;
          o[V++] = P[0];
          M.JP(o, V, z.length);
          V += 2;
          M.Sc(o, V, z);
          V += z.length;
        }
        x = 4 + o.length;
      }
      var E = u + i + x,
        A = new Uint8Array(b.length + E);
      for (var y = 0; y < 20; y++) A[y] = b[y];
      for (var y = 20; y < b.length; y++) A[y + E] = b[y];
      A[f] = 255;
      A[f + 1] = 225;
      M.JP(A, f + 2, u - 2);
      M.Sc(A, f + 4, "Exif");
      for (var y = 0; y < $.length; y++) A[f + 10 + y] = $[y];
      f += u;
      A[f] = 255;
      A[f + 1] = 225;
      M.JP(A, f + 2, i - 2);
      M.Sc(A, f + 4, H);
      for (var y = 0; y < l.length; y++) A[f + 4 + H.length + 1 + y] = l[y];
      f += i;
      if (x != 0) {
        A[f] = 255;
        A[f + 1] = 237;
        M.JP(A, f + 2, x - 2);
        for (var y = 0; y < o.length; y++) A[f + 4 + y] = o[y];
        f += x;
      }
      b = A;
    }
    return b.buffer;
  };
  gh.v1.St = function (j) {
    var q = 0,
      m = [],
      n = j.length;
    while (q < n) {
      while (j[q] != 255 && q < n) q++;
      while (j[q] == 255) q++;
      if (q == n) break;
      var G = j[q];
      q++;
      if (m[G] == null) m[G] = [];
      m[G].push(q - 2);
      if (G == 216) continue;
      if (G == 217) break;
      if (
        (224 <= G && G <= 239) ||
        G == 218 ||
        G == 219 ||
        G == 192 ||
        G == 193 ||
        G == 194 ||
        G == 196 ||
        G == 221 ||
        G == 254
      ) {
        var W = M._h(j, q);
        q += W;
        if (G == 218)
          while (
            q < n &&
            (j[q] != 255 ||
              j[q + 1] == 0 ||
              (208 <= j[q + 1] && j[q + 1] <= 215))
          )
            q++;
        continue;
      }
      console.log("unknown marker ", G.toString(16), q);
      break;
    }
    if (m[217] == null) {
      console.log("EOI marker missing");
      var k = j.length - 2;
      j[k] = 255;
      j[k + 1] = 217;
      m[217] = [k];
    }
    return m;
  };
  gh.v1.amr = function (j) {
    j = new Uint8Array(j);
    if (j[0] != 255) return j.buffer;
    var q = gh.v1.St(j),
      m = gh.v1.aE8(j, q);
    if (m.numComponents != 4) return j.buffer;
    var n = m.width,
      G = m.height,
      W = gh.v1.aCS(j, q, !0);
    return gh.v1.Ev([[W[0].data]], n, G, { qual: 85 });
  };
  gh.v1.aE8 = function (j, q) {
    var m = (q[192] ? q[192] : q[193] ? q[193] : q[194])[0] + 4,
      n = {};
    n.progressive = q[194] != null;
    n.precision = j[m];
    m++;
    n.height = M._h(j, m);
    m += 2;
    n.width = M._h(j, m);
    m += 2;
    n.numComponents = j[m];
    m++;
    if (q[224]) {
      var G = (n.jfif = {});
      m = q[224][0] + 2 + 2 + 5 + 2;
      G.densityUnits = j[m];
      m++;
      G.xDensity = M._h(j, m);
      m += 2;
      G.yDensity = M._h(j, m);
      m += 2;
    }
    if (q[238]) {
      var G = (n.adobe = {});
      m = q[238][0] + 2 + 2 + 6;
      G.version = j[m];
      m++;
      G.flags0 = M._h(j, m);
      m += 2;
      G.flags1 = M._h(j, m);
      m += 2;
      G.transform = j[m];
      m++;
    }
    return n;
  };
  gh.v1.aKS = function (j, q, m) {
    var n = q,
      G = M._h(j, n);
    n += 2;
    var W = M.IH(j, n, 4);
    if (W == "Exif") {
      n += 6;
      var k = j.slice(n, n + G - 8),
        T;
      try {
        T = UTIF.decode(k.buffer, { parseMN: !1, debug: !1 });
      } catch (gn) {}
      if (T && T.length != 0) m.exif = T;
    } else if (W == "http") {
      var b = 0;
      while (j[n + b] != 0) b++;
      var c = M.IH(j, n, b);
      n += b + 1;
      if (c == "http://ns.adobe.com/xmp/extension/") {
        var a = M.IH(j, n, 32);
        n += 32;
        n += 8;
        var f = q + G - n;
        while (j[n + f - 1] == 0) f--;
        if (m.xmp_extn == null) m.xmp_extn = "";
        try {
          m.xmp_extn += M.K6(j, n, f);
        } catch (gn) {}
      } else if (c == "http://ns.adobe.com/xap/1.0/") {
        var U = M.K6(j.slice(n, n + G - b - 3));
        if (U[0] == "?") U = "<" + U;
        m.xmp = U;
      }
    } else console.log(W);
  };
  gh.v1.aCS = function (j, q, m) {
    var n = gh.v1.aE8(j, q),
      G = n.width,
      W = n.height,
      k = G * W,
      T,
      H = 72,
      C,
      v,
      K = null;
    if (G * W * 4 > 2e9 && window.chrome != null) {
      alert(
        "A bug in Chromium doesn't allow us open such large images. Try it in Firefox!",
        2600
      );
      return null;
    }
    var b = -1;
    if (n.adobe) b = n.adobe.transform;
    if (
      m ||
      G * W > 16e6 ||
      b == 0 ||
      b == 2 ||
      n.progressive ||
      window.WebAssembly == null
    ) {
      var c = new PDFJS.JpegImage();
      c.parse(j);
      var a = c.getData({ width: G, height: W, forceRGB: !0, isSourcePDF: m }),
        T = B.j(k * 4);
      for (var y = 0; y < k; y++) {
        var f = y << 2,
          U = f - y;
        T[f] = a[U];
        T[f + 1] = a[U + 1];
        T[f + 2] = a[U + 2];
        T[f + 3] = 255;
      }
    } else {
      T = gh.v1.a68(j.buffer, n);
    }
    var Z = q[225];
    if (Z) for (var y = 0; y < Z.length; y++) gh.v1.aKS(j, Z[y] + 2, n);
    var h = q[226];
    if (h) {
      for (var y = 0; y < h.length; y++) {
        var u = h[y],
          i = M._h(j, u + 2),
          x = M.IH(j, u + 4, 11);
        if (n.icc == null && x == "ICC_PROFILE") {
          var X = M.Z$(j, u + 18);
          n.icc = j.slice(u + 18, u + 18 + X);
        }
      }
    }
    var $ = q[217][0] + 2;
    if ($ != j.length) n.suffix = j.slice($);
    var l = [G, W, 1, 0, 0, 0, 1, 0];
    if (n.jfif && n.jfif.densityUnits != 0) {
      H = Math.round([72, 1, 2.54][n.jfif.densityUnits] * n.jfif.xDensity);
    } else if (n.exif && n.exif[0].t282 != null) {
      var S = n.exif[0].t282[0];
      H = S[0] / S[1];
    }
    if (n.exif) {
      var o = n.exif;
      C = kI.E5(o[0]);
      var V = o[0].t274;
      if (V) V = V[0];
      if (V != null && V > 1 && V < 20) l = B.raw.ayD(V, G, W);
    }
    if (n.xmp) {
      C = kI.bX(n.xmp, C);
    }
    if (n.icc) v = n.icc;
    var P = q[237],
      z = [],
      E = [];
    if (P) {
      var A = new Uint8Array(65536),
        N = 0,
        u = 0;
      for (var y = 0; y < P.length; y++) {
        u = P[y] + 2;
        var Q = u + M._h(j, u);
        u += 2;
        var e = u;
        while (j[u] != 0) u++;
        u++;
        var Y = M.IH(j, e, u - e - 1),
          d = Q - u;
        if (d < 0) break;
        while (N + d > A.length) {
          var I = new Uint8Array(A.length * 2);
          I.set(A);
          A = I;
        }
        var O = new Uint8Array(j.buffer, u, d);
        A.set(O, N);
        N += d;
      }
      u = 0;
      j = A;
      while (u < N) {
        var s = M.IH(j, u, 4);
        u += 4;
        var p = M._h(j, u);
        u += 2;
        var F = j[u++],
          g = M.IH(j, u, F);
        u += F;
        if ((F & 1) == 0) u++;
        var i = M.Z$(j, u);
        u += 4;
        var $ = u + i + (i & 1);
        if (p == 1028) {
          while (u + 4 < $) {
            var w = j[u++],
              r = j[u++],
              eQ = j[u++],
              t = M._h(j, u);
            u += 2;
            if (w == 28 && r == 2) z.push([eQ, M.IH(j, u, t)]);
            u += t;
          }
        } else if (p == 1032) K = hx.a3c(j, u);
        else if ((p & 2e3) == 2e3) {
          var dq = hR.xD(j, u, i);
          E.push([g, dq]);
        } else {
        }
        u = $;
      }
      if (z.length != 0) C = kI.a7V(z, C);
    }
    var D = [
        {
          Iu: new hk(0, 0, G, W),
          data: T.buffer,
          zv: H,
          Un: C,
          Pt: v,
          ax: E.length == 0 ? null : E,
          M3: K,
        },
      ],
      C = n.xmp_extn;
    if (C) {
      var ha = new DOMParser(),
        am = ha.parseFromString(C, "image/svg+xml"),
        am = am.children[0].children[0].children[0],
        k4 = [am.getAttribute("GImage:Data"), am.getAttribute("GDepth:Data")];
      for (var y = 0; y < k4.length; y++)
        if (k4[y]) {
          var aA = atob(k4[y]),
            ex = new Uint8Array(aA.length);
          M.Sc(ex, 0, aA);
          ex = ex.buffer;
          var ac = gh.Qa(ex),
            eJ = gh.lj(ac).LN(ex);
          D.push(eJ[0]);
        }
    }
    if (n.suffix) {
      var h$ = n.suffix,
        da = !1,
        bb = M.IH(h$, 4, 4),
        gb = M.Gf(h$, [255, 216, 255]);
      if (gh.aH1(h$, [0, 0, 1, 10, 14, 0, 0, 0])) {
        if (da) console.log("Samsung");
        var u = 0;
        while (u != h$.length) {
          var fM = M.d9(h$, u + 2);
          u += 4;
          var kS = { 2272: 12, 2320: 21, 2561: 13, 2625: 21, 2721: 3, 2608: 0 }[
            fM
          ];
          if (kS != null) {
            var cY = M.YZ(h$, u);
            u += 4;
            var cS = M.IH(h$, u, cY);
            u += cY;
            var k3 = M.IH(h$, u, kS);
            u += kS;
            if (fM == 2608) {
              var di = u,
                a7 = M.Z$(h$, u + 24);
              u += a7 + 24;
              var b0 = M.Z$(h$, u);
              u += b0;
              var e1 = h$.slice(di, u);
              gh.v1.aqq(e1);
            }
          } else if (fM == 18502) {
            while (M.IH(h$, u, 4) != "SEFT") u += 4;
            u += 4;
          } else {
            break;
            console.log(M.iD(h$, u, 128));
            console.log(h$.slice(u));
            throw fM.toString(16);
          }
        }
      } else if (bb == "ftyp") {
        if (da) console.log("MP4 Video");
        gh.v1.aqq(h$);
      } else if (M.IH(h$, 0, 4) == "fixe") {
        if (da) console.log("fixe");
        alert(
          "Unknown data - " + h$.length + " B - at the end of the file",
          3e3
        );
        var u = 4,
          i = M.YZ(h$, u);
        u += 4;
        var l2 = M.YZ(h$, u);
        u += 4;
        var kL = M.YZ(h$, u);
        u += 4;
        console.log(i, l2, kL, h$.slice(u, u + 84));
        u += 84;
        var es = M.IH(h$, u, 32);
        u += 32;
        u += 8;
        var es = M.IH(h$, u, 32);
        u += 32;
      } else if (M.IH(h$, 8, 13) == "FocusShot_Map") {
        if (da) console.log("FocusShot_Map");
        var kR = M.Z$(h$, 0),
          t = M.YZ(h$, 4),
          ex = B.j(k * 4),
          eH = B.j(k * 4);
        for (var cZ = 0; cZ < W; cZ++)
          for (var ga = 0; ga < G; ga++) {
            var y = cZ * G + ga,
              f = y << 2,
              fi = 8 + 13 + (((cZ >>> 1) * G + ga) >>> 1),
              go = h$[fi],
              iz = h$[fi + (k >>> 2)];
            ex[f] = ex[f + 1] = ex[f + 2] = go;
            ex[f + 3] = 255;
            eH[f] = eH[f + 1] = eH[f + 2] = iz;
            eH[f + 3] = 255;
          }
        D.push(
          { Iu: new hk(0, 0, G, W), data: ex.buffer },
          { Iu: new hk(0, 0, G, W), data: eH.buffer }
        );
      } else if (bb == "edof") {
        if (da) console.log("edof");
        var V = h$[8 + 7];
        console.log(V.toString(16));
        var u = 8 + 16,
          i5 = M.d9(h$, u),
          aI = M.d9(h$, u + 2),
          k = i5 * aI;
        u += 4;
        u += 32 + 16;
        var bs = B.j(k * 4);
        for (var y = 0; y < k; y++) {
          var f = y << 2;
          bs[f] = bs[f + 1] = bs[f + 2] = h$[u + y];
          bs[f + 3] = 255;
        }
        if (V == 16) {
        } else if (V == 19) {
          var k2 = bs.slice(0);
          B.B.up(bs, k2, i5, aI);
          var jG = i5;
          i5 = aI;
          aI = jG;
          B.B.cq(k2, bs, i5, aI);
        } else throw "Unknown orientation of a depth map";
        D.push({ Iu: new hk(0, 0, i5, aI), data: bs.buffer });
      } else if (M.IH(h$, 0, 64).indexOf("DualShot") != -1) {
        if (da) console.log("DualShot");
        var eW = M.YZ,
          gc = M.IH,
          k1 = M.d9,
          u = 0;
        function ke() {
          var gS = eW(h$, u);
          if (eW(h$, u + 4) != 0) throw "e";
          u += 8;
          return gS;
        }
        var jh = M.Z$(h$, u);
        u += 4;
        try {
          if (jh == 45066) {
            u = 1226;
            var G = ke(),
              W = ke();
            u = 3445;
          } else if (jh == 45322) {
            var cE = eW(h$, u);
            u += 4;
            var es = gc(h$, u, cE);
            u += cE;
            if (es != "DualShot_DepthMap_1") throw es;
            G = 1008;
            W = 756;
            if (D[0].Iu.r == 4080) {
              G = 1020;
              W = 764;
            }
          } else throw jh;
          var cy = B.j(G * W * 4);
          cy.fill(255);
          B.QZ(h$.slice(u, u + G * W), cy);
          D.push({ Iu: new hk(0, 0, G, W), data: cy.buffer });
        } catch (gn) {
          console.log("error reading a depth map");
        }
        try {
          if (gb != 0) h$ = h$.slice(gb);
          D = D.concat(gh.lj("jpg").LN(h$.buffer));
        } catch (gn) {}
      } else if (gb != -1 && !(h$[0] == 255 && h$[1] == 129)) {
        if (da) console.log("another JPG at", gb);
        try {
          if (gb != 0) h$ = h$.slice(gb);
          D = D.concat(gh.lj("jpg").LN(h$.buffer));
        } catch (gn) {}
      } else if (M.IH(h$, 0, 4) == "PMPD") {
        if (da) console.log("Xiaomi stuff");
        var u = 4,
          hl = M.YZ(h$, 12),
          c2 = M.YZ(h$, 16),
          i5 = M.YZ(h$, 1060),
          aI = M.YZ(h$, 1064),
          f9 = i5 > aI,
          hu = D[0].Iu.r > D[0].Iu.$,
          le = h$.slice(h$.length - i5 * aI - 4),
          iJ = B.j(i5 * aI);
        for (var cZ = 0; cZ < aI; cZ++)
          for (var ga = 0; ga < i5; ga++)
            iJ[cZ * i5 + ga] = le[(aI - cZ - 1) * i5 + ga];
        var cy = B.j(i5 * aI * 4);
        cy.fill(255);
        B.QZ(iJ, cy);
        if (f9 != hu) {
          var k2 = cy.slice(0);
          B.B.up(cy, k2, i5, aI);
          var jG = i5;
          i5 = aI;
          aI = jG;
          B.B.cq(k2, cy, i5, aI);
        }
        D.push({ Iu: new hk(0, 0, i5, aI), data: cy.buffer });
      } else console.log(M.IH(h$, 0, 4), h$);
    }
    if (D.length > 1) {
      var dZ = D[0].Iu,
        bC = !1,
        ev = !0;
      D[0].Le = "Main";
      var kd = [!1];
      for (var y = 1; y < D.length; y++) {
        kd[y] = gh.v1.aLF(new Uint8Array(D[y].data));
        if (kd[y]) bC = !0;
        if (!D[y].Iu.Lg(D[0].Iu)) ev = !1;
      }
      if (!bC && !ev) D = D.slice(0, 1);
      else
        for (var y = 1; y < D.length; y++) {
          D[y].Le = kd[y] ? "Depth Map" : null;
          var ak = D[y].Iu;
          if (!ak.Lg(dZ)) {
            var gD = dZ.r / ak.r,
              a9 = dZ.$ / ak.$,
              kk = new k$();
            kk.scale(gD, a9);
            var kX = L.Dq.hG([new Uint8Array(D[y].data), ak], 1, B.B.gb(kk));
            D[y].Iu = kX.H;
            D[y].data = kX.buffer;
          }
        }
    }
    if (gh.v1.ss == 1)
      if (l[2] != 1 || l[6] != 1)
        for (var y = 0; y < D.length; y++) {
          var kc = D[y],
            ew = new Uint8Array(kc.data),
            G = kc.Iu.r,
            W = kc.Iu.$,
            i5 = l[0],
            aI = l[1],
            T = B.j(i5 * aI * 4);
          B.B.fM(ew, G, W, T, l);
          kc.Iu = new hk(0, 0, i5, aI);
          kc.data = T.buffer;
        }
    return D;
  };
  gh.v1.aqq = function (j) {
    if (
      window.confirm(
        "Photopea found a " +
          bE.za(j.length) +
          " MP4 video inside your image. Would you like to save it?",
        4e3
      )
    ) {
      jc.save(j.slice(0).buffer, "video.mp4");
    }
  };
  gh.v1.aLF = function (j) {
    var q = !0;
    for (var y = 0; y < j.length; y += 4) {
      q = q && j[y] == j[y + 1] && j[y + 1] == j[y + 2];
    }
    return q;
  };
  gh.v1.ss = 0;
  gh.v1.LN = function (j, q, m) {
    j = new Uint8Array(j);
    if (j[0] == 255) {
      var n = gh.v1.St(j);
      if (n[195] == null) {
        gh.v1.ss++;
        var G = gh.v1.aCS(j, n, !1);
        gh.v1.ss--;
        return G;
      }
      var W = M._h(j, n[195][0] + 5),
        k = M._h(j, n[195][0] + 7),
        T = UTIF.LosslessJpegDecode(j),
        b = k * W,
        c = B.j(b * 4);
      for (var y = 0; y < b; y++) {
        var a = y << 2,
          f = a - y;
        c[a] = T[f];
        c[a + 1] = T[f + 1];
        c[a + 2] = T[f + 2];
        c[a + 3] = 255;
      }
      return [{ Iu: new hk(0, 0, k, W), data: c.buffer }];
    } else if (j[0] == 0 && j[4] == 48 && j[6] == 1) {
      var U = j,
        Z = new PDFJS.Jbig2Image(),
        h = [];
      if (q) h.push({ data: q, start: 0, end: q.length });
      h.push({ data: U, start: 0, end: U.length });
      var T = Z.parseChunks(h);
      if (!m) for (var y = 0; y < T.length; y++) T[y] = ~T[y];
      var k = M.Z$(j, 11),
        W = M.Z$(j, 15),
        u = Math.ceil(k / 8),
        i = B.j(k * W * 4);
      for (var x = 0; x < W; x++) {
        var X = x * u;
        for (var $ = 0; $ < k; $++) {
          var a = (x * k + $) * 4,
            H = (T[X + ($ >>> 3)] >>> (7 - ($ & 7))) & 1,
            C = H * 255;
          i[a] = C;
          i[a + 1] = C;
          i[a + 2] = C;
          i[a + 3] = 255;
        }
      }
      return [{ Iu: new hk(0, 0, k, W), data: i.buffer }];
    } else {
      var Z = new PDFJS.JpxImage();
      Z.parse(j);
      var k = Z.width,
        W = Z.height,
        l = Z.tiles,
        v = Z.componentsCount,
        K = new Uint8Array(k * W * 4),
        S = new hk(0, 0, k, W);
      for (var Z = 0; Z < l.length; Z++) {
        var o = l[Z],
          V = o.width,
          P = o.height,
          z = V * P,
          E = o.items,
          A = new hk(o.left, o.top, V, P),
          N = new Uint8Array(z * 4);
        if (v == 1)
          for (var y = 0; y < z; y++) {
            var Q = E[y],
              a = y * 4;
            N[a] = Q;
            N[a + 1] = Q;
            N[a + 2] = Q;
            N[a + 3] = 255;
          }
        else if (v == 3)
          for (var y = 0; y < z; y++) {
            var f = y * 3,
              a = y * 4;
            N[a] = E[f];
            N[a + 1] = E[f + 1];
            N[a + 2] = E[f + 2];
            N[a + 3] = 255;
          }
        else if (v == 4) N.set(E);
        else console.log("Unknown number of components: " + v);
        B.M4(N, A, K, S);
      }
      return [{ Iu: S, data: K.buffer }];
    }
  };
  gh.z7 = {};
  gh.z7.Ev = function (j, q, m, n) {
    if (n == null) n = { qual: 70, mtdt: !0, rept: 0 };
    var G = n.qual / 100,
      l = 0;
    if (j.length == 1) {
      var W = new Uint8Array(gh.oH(j[0][0], q, m, "webp", G)),
        k = W[20];
      if (gh.Qa(W.buffer) != "webp") {
        alert("Your browser cannot export WEBP :(", 3e3);
        throw "e";
      }
      if (W.length < 2e4) {
        var T = l3.VB(W.buffer),
          b = T.sub;
        for (var y = 0; y < b.length; y++)
          if (b[y].ys == "ICCP") {
            var c = b[y];
            if (k & 32) k -= 32;
            W = gh.azB(W, c.g - 8, c.size + 8);
            M.kA(W, 4, T.size - (c.size + 8));
            break;
          }
      }
      if (n.mtdt && j[0][3]) {
        var a = j[0][3],
          f = new Uint8Array(UTIF.encode([kI.Ox(a)])),
          U = f,
          Z = M.Nh(kI.e7(a)),
          h = 8 + U.length;
        h += h & 1;
        var u = 8 + Z.length;
        u += u & 1;
        var i = new Uint8Array(h + u);
        M.Sc(i, 0, "EXIF");
        M.kA(i, 4, U.length);
        i.set(U, 8);
        M.Sc(i, h, "XMP ");
        M.kA(i, h + 4, Z.length);
        i.set(Z, h + 8);
        var x = new Uint8Array(W.length + i.length),
          T = l3.VB(W.buffer),
          b = T.sub;
        x.set(W, 0);
        x.set(i, W.length);
        M.kA(x, 4, M.YZ(x, 4) + i.length);
        k |= 12;
        W = x;
        var X = l3.VB(W.buffer);
      }
      if (M.IH(W, 12, 4) == "VP8X") W[20] = k;
      return W.buffer;
    }
    var $ = M.v3,
      H = M.mq,
      C = new aj();
    $(C, l, "RIFF    WEBPVP8X");
    l += 16;
    H(C, l, 10);
    l += 4;
    H(C, l, 18);
    l += 4;
    H(C, l, q - 1);
    l += 3;
    H(C, l, m - 1);
    l += 3;
    $(C, l, "ANIM");
    l += 4;
    H(C, l, 6);
    l += 4;
    C.xY(l, 4);
    C.data[l + 3] = 255;
    M.Vd(C, l + 4, n.rept);
    l += 6;
    var v = [];
    for (var y = 0; y < j.length; y++) {
      v.push(j[y][0]);
    }
    var K = UPNG.encode.compress(
      v,
      q,
      m,
      G == 1 ? 0 : Math.max(2, Math.floor(G * 500)),
      [!1, !0, !0, 0, !0]
    ).frames;
    function S(T, I, O, s) {
      var N = T.g - 8,
        Q = T.size + 8;
      O.xY(s, Q);
      for (var y = 0; y < Q; y++) O.data[s + y] = I[N + y];
      return s + Q;
    }
    for (var y = 0; y < j.length; y++) {
      $(C, l, "ANMF");
      l += 4;
      var o = l,
        N = 0,
        Q = 0;
      l += 4;
      var V = K[y],
        P = V.rect,
        z = [P.x >>> 1, P.y >>> 1, P.width - 1, P.height - 1, j[y][1]];
      for (var E = 0; E < 5; E++) H(C, l + 3 * E, z[E]);
      l += 15;
      C.xY(l, 1);
      C.data[l] = ((1 - V.blend) << 1) | V.dispose;
      l++;
      var A = new Uint8Array(gh.oH(V.img.buffer, P.width, P.height, "webp", 1)),
        b = l3.VB(A.buffer).sub,
        e = {};
      for (var Y = 0; Y < b.length; Y++) e[b[Y].ys] = b[Y];
      if (e.VP8L) l = S(e.VP8L, A, C, l);
      else throw "e";
      var d = l - o - 4;
      H(C, o, d);
      if ((d & 1) == 1) {
        C.xY(l, 1);
        l++;
      }
    }
    H(C, 4, l - 8);
    return C.data.slice(0, l).buffer;
  };
  (function () {
    var j = gh.$P.get("wasm/webp").buffer;
    WebAssembly.instantiate(j).then(function (q) {
      var m = q.instance.exports;
      gh.z7.exp = m;
    });
  })();
  gh.z7.LN = function (j) {
    var q = new Uint8Array(j),
      m = gh.z7.a4t,
      n = null,
      G = l3.VB(j).sub,
      W = {},
      k = null;
    for (var y = 0; y < G.length; y++) W[G[y].ys] = G[y];
    if (W.EXIF) {
      var T = W.EXIF,
        b = T.g,
        c = b + T.size;
      if (q[T.g] == 69) b += 6;
      var a = j.slice(b, c),
        T = UTIF.decode(a)[0];
      console.log(T);
      if (T) k = kI.E5(T);
      console.log(k);
    }
    var T = W["XMP\0"];
    if (T == null) T = W["XMP "];
    if (T) {
      var a = new Uint8Array(j, T.g, T.size);
      if (k == null) k = {};
      k = kI.bX(M.K6(a), k);
    }
    var f = W.ANIM,
      U = W.VP8L,
      Z = W["VP8 "],
      h = W.VP8X;
    if (f == null) {
      var u, i;
      if (Z) {
        u = M.d9(q, Z.g + 6);
        i = M.d9(q, Z.g + 8);
      } else if (U) {
        var x = M.YZ(q, U.g + 1);
        u = (x & ((1 << 14) - 1)) + 1;
        i = ((x >>> 14) & ((1 << 14) - 1)) + 1;
      } else throw "e";
      var X = m(n, j, { g: 0, size: q.length }, u, i);
      X.Un = k;
      return [X];
    }
    var $ = h.g,
      u = 1 + (M.YZ(q, $ + 4) & 16777215),
      i = 1 + (M.YZ(q, $ + 7) & 16777215),
      H = [],
      C = new hk(0, 0, u, i),
      l = B.j(u * i * 4);
    for (var y = 0; y < G.length; y++) {
      var v = G[y];
      if (v.ys != "ANMF") continue;
      var K = [];
      for (var S = 0; S < 5; S++) K.push(M.YZ(q, v.g + S * 3) & 16777215);
      var o = new hk(K[0] * 2, K[1] * 2, K[2] + 1, K[3] + 1),
        V = K[4],
        P = m(n, j, { g: v.g + 16, size: v.size - 16 }, u, i),
        z = new Uint8Array(P.data),
        E = q[v.g + 15];
      if (E >>> 1 == 0) B.G.Jg("norm", z, o, l, C, o, 1);
      else B.M4(z, o, l, C);
      H.push({
        Le: "_a_" + H.length + "," + V,
        Iu: C.P(),
        data: l.buffer.slice(0),
      });
      if ((E & 1) == 1) {
        z.fill(0);
        B.M4(z, o, l, C);
      }
    }
    return H;
  };
  gh.z7.a4t = function (j, q, m, n, G) {
    var W = gh.z7.exp,
      k = W.memory,
      T = 5e6 + 2 * m.size + n * G * 10;
    gh.I8(W, T);
    var b = new Uint8Array(k.buffer),
      c = W.malloc(m.size);
    b.set(new Uint8Array(q, m.g, m.size), c);
    var a = W.malloc(8),
      f = W.WebPDecodeARGB(c, m.size, a, a + 4),
      U = M.YZ(b, a),
      Z = M.YZ(b, a + 4),
      h = U * Z * 4,
      u = B.j(h);
    for (var y = 0; y < h; y += 4) {
      u[y] = b[f + y + 1];
      u[y + 1] = b[f + y + 2];
      u[y + 2] = b[f + y + 3];
      u[y + 3] = b[f + y];
    }
    W.WebPFree(f);
    W.free(a);
    W.free(c);
    return { Iu: new hk(0, 0, U, Z), data: u.buffer };
  };
  gh.aGu = (function () {
    function j(T, b, c, a) {
      var f = new Uint8Array(T[0][0]),
        U = new Uint32Array(f.buffer),
        Z = [],
        h = {},
        i = 24,
        x = 0,
        l = 0;
      for (var y = 0; y < U.length; y++) {
        var u = U[y] & 16777215;
        if (h[u] == null) {
          h[u] = Z.length;
          Z.push(u);
          if (Z.length > 256) {
            Z = null;
            break;
          }
        }
      }
      if (a && a.nplt) Z = null;
      if (Z) {
        i = 1;
        while (1 << i < Z.length) i *= 2;
        if (i == 2) i = 4;
      }
      var X = { GM: b, uu: c, QO: 1, FZ: i, ge: 0, aJ_: x },
        $ = 4 * Math.floor((X.FZ * X.GM + 31) / 32);
      X.size = $ * X.uu + 2;
      var H = new aj(),
        C = Z ? (1 << i) * 4 : 0;
      M.v3(H, l, "BM");
      l += 2;
      M.mq(H, l, $ * c + 16 + 40 + C);
      l += 4;
      M.mq(H, l, 0);
      l += 4;
      M.mq(H, l, 54 + C);
      l += 4;
      H.xY(l, 40);
      M.mq(H, l, 40);
      l += 4;
      k(H.data, l, X, $);
      l += 36;
      if (Z) {
        H.xY(l, C);
        var v = H.data;
        for (var y = 0; y < Z.length; y++) {
          var K = l + y * 4,
            S = Z[y] >>> 16,
            o = (Z[y] >>> 8) & 255,
            V = Z[y] & 255;
          v[K] = S;
          v[K + 1] = o;
          v[K + 2] = V;
        }
        l += C;
      }
      H.xY(l, $ * c);
      if (i == 24)
        for (var P = 0; P < c; P++) {
          var z = l + (c - 1 - P) * $;
          for (var E = 0; E < b; E++) {
            var A = (P * b + E) * 4;
            H.data[z + E * 3 + 2] = f[A];
            H.data[z + E * 3 + 1] = f[A + 1];
            H.data[z + E * 3 + 0] = f[A + 2];
          }
        }
      else if (i == 8)
        for (var P = 0; P < c; P++) {
          var z = l + (c - 1 - P) * $;
          for (var E = 0; E < b; E++) {
            var A = P * b + E,
              N = h[U[A] & 16777215];
            H.data[z + E] |= N;
          }
        }
      else if (i == 4)
        for (var P = 0; P < c; P++) {
          var z = l + (c - 1 - P) * $;
          for (var E = 0; E < b; E++) {
            var A = P * b + E,
              N = h[U[A] & 16777215];
            H.data[z + (E >>> 1)] |= N << (4 - (E & 1) * 4);
          }
        }
      else if (i == 1)
        for (var P = 0; P < c; P++) {
          var z = l + (c - 1 - P) * $;
          for (var E = 0; E < b; E++) {
            var A = P * b + E,
              N = h[U[A] & 16777215];
            H.data[z + (E >>> 3)] |= N << (7 - (E & 7));
          }
        }
      l += $ * c + 2;
      return H.data.slice(0, l).buffer;
    }
    function q(T) {
      T = new Uint8Array(T);
      if (M.YZ(T, 0) == 40) return [m(T.buffer, 0)];
      var b = 0,
        c = M.IH(T, b, 2);
      b += 2;
      if (c != "BM") {
        alert("Unsupported BMP format: " + c);
        return;
      }
      var a = M.YZ(T, b);
      b += 4;
      b += 4;
      var f = M.YZ(T, b);
      b += 4;
      return [m(T.buffer, b, f)];
    }
    function m(T, b, c) {
      T = new Uint8Array(T);
      var a = M.YZ(T, b),
        f = W(T, b + 4);
      if (f.QO != 1) alert("unsupported number of color planes: " + f.QO);
      if (
        f.ge != 0 &&
        f.ge != 1 &&
        f.ge != 2 &&
        f.ge != 3 &&
        f.ge != 861165636
      ) {
        alert("Unsupported BMP compression: " + f.ge);
        return;
      }
      b += a;
      var U = b,
        Z = T;
      if (c == null) c = b;
      if (f.ge == 1 || f.ge == 2) {
        var h = G(T, c, f);
        f.FZ = 8;
        T = h;
        c = 0;
      }
      var u = 4 * Math.floor((f.FZ * f.GM + 31) / 32),
        i = f.GM,
        x = Math.abs(f.uu),
        X = new Uint8Array(i * x * 4);
      X.fill(255);
      if (f.FZ == 32)
        for (var $ = 0; $ < x; $++) {
          var H = c + (x - 1 - $) * u;
          for (var C = 0; C < i; C++) {
            var l = ($ * i + C) * 4;
            X[l] = T[H + C * 4 + 2];
            X[l + 1] = T[H + C * 4 + 1];
            X[l + 2] = T[H + C * 4 + 0];
            X[l + 3] = T[H + C * 4 + 3];
          }
        }
      else if (f.FZ == 24)
        for (var $ = 0; $ < x; $++) {
          var H = c + (x - 1 - $) * u;
          for (var C = 0; C < i; C++) {
            var l = ($ * i + C) * 4;
            X[l] = T[H + C * 3 + 2];
            X[l + 1] = T[H + C * 3 + 1];
            X[l + 2] = T[H + C * 3 + 0];
          }
        }
      else if (f.FZ == 16) {
        if (f.ge == 861165636) UTEX.readBC2(T, c, X, i, x);
        else
          for (var $ = 0; $ < x; $++) {
            var H = c + (x - 1 - $) * u;
            for (var C = 0; C < i; C++) {
              var l = ($ * i + C) * 4,
                v = (T[H + C * 2 + 1] << 8) | T[H + C * 2];
              if (c == b) {
                X[l] = ((v >>> 10) & 31) * (255 / 31);
                X[l + 1] = ((v >>> 5) & 31) * (255 / 31);
                X[l + 2] = (v & 31) * (255 / 31);
              } else {
                X[l] = (v >>> 11) * (255 / 31);
                X[l + 1] = ((v >>> 5) & 63) * (255 / 63);
                X[l + 2] = (v & 31) * (255 / 31);
              }
            }
          }
      } else if (f.FZ == 8)
        for (var $ = 0; $ < x; $++) {
          var H = c + (x - 1 - $) * u;
          for (var C = 0; C < i; C++) {
            var l = ($ * i + C) * 4,
              K = T[H + C];
            X[l] = Z[U + 4 * K + 2];
            X[l + 1] = Z[U + 4 * K + 1];
            X[l + 2] = Z[U + 4 * K + 0];
          }
        }
      else if (f.FZ == 4)
        for (var $ = 0; $ < x; $++) {
          var H = c + (x - 1 - $) * u;
          for (var C = 0; C < i; C++) {
            var l = ($ * i + C) * 4,
              K = T[H + (C >> 1)];
            K = K >> (4 - 4 * (C & 1));
            K = K & 15;
            X[l] = Z[U + 4 * K + 2];
            X[l + 1] = Z[U + 4 * K + 1];
            X[l + 2] = Z[U + 4 * K + 0];
          }
        }
      else if (f.FZ == 1)
        for (var $ = 0; $ < x; $++) {
          var H = c + (x - 1 - $) * u;
          for (var C = 0; C < i; C++) {
            var l = ($ * i + C) * 4,
              S = T[H + (C >> 3)];
            S = S >> (7 - (C & 7));
            S = S & 1;
            X[l] = Z[U + 4 * S + 2];
            X[l + 1] = Z[U + 4 * S + 1];
            X[l + 2] = Z[U + 4 * S + 0];
          }
        }
      else throw "Unknown bit depth " + f.FZ;
      if (f.uu < 0) {
        var o = new Uint32Array(X.buffer),
          V = x >>> 1;
        for (var $ = 0; $ < V; $++) {
          var P = $ * i,
            z = (x - $ - 1) * i;
          for (var C = 0; C < i; C++) {
            var E = o[P + C];
            o[P + C] = o[z + C];
            o[z + C] = E;
          }
        }
      }
      return { Iu: new hk(0, 0, i, x), data: X.buffer };
    }
    function n(T, y) {
      return (T >>> (4 - ((y & 1) << 2))) & 15;
    }
    function G(T, b, c) {
      var a = c.GM,
        f = Math.abs(c.uu),
        U = new Uint8Array(a * f),
        Z = 0,
        h = 0,
        y = 0;
      while (h < f) {
        var u = T[b++],
          i = T[b++],
          x = h * a + Z;
        if (u > 0) {
          if (c.FZ == 4)
            for (y = 0; y < u; y++) {
              U[x + y] = n(i, y);
            }
          else
            for (y = 0; y < u; y++) {
              U[x + y] = i;
            }
          Z += u;
        } else if (u == 0 && i == 0) {
          h++;
          Z = 0;
        } else if (u == 0 && i == 1) {
          break;
        } else if (u == 0 && i == 2) {
          Z += T[b++];
          h += T[b++];
        } else {
          var X = i;
          if (c.FZ == 4) {
            for (y = 0; y < i; y++) {
              U[x + y] = n(T[b + (y >>> 1)], y);
            }
            X = Math.ceil(i / 2);
          } else {
            for (y = 0; y < i; y++) {
              U[x + y] = T[b + y];
            }
          }
          if ((X & 1) != 0) X++;
          b += X;
          Z += i;
        }
      }
      return U;
    }
    function W(T, b) {
      var c = M.dq,
        a = M.YZ,
        f = M.d9,
        U = {};
      U.GM = c(T, b);
      b += 4;
      U.uu = c(T, b);
      b += 4;
      U.QO = f(T, b);
      b += 2;
      U.FZ = f(T, b);
      b += 2;
      U.ge = a(T, b);
      b += 4;
      U.size = a(T, b);
      b += 4;
      var Z = c(T, b);
      b += 4;
      var h = c(T, b);
      b += 4;
      U.aJ_ = a(T, b);
      b += 4;
      b += 4;
      return U;
    }
    function k(T, b, c, a) {
      M.kA(T, b, c.GM);
      b += 4;
      M.kA(T, b, c.uu);
      b += 4;
      M.pq(T, b, c.QO);
      b += 2;
      M.pq(T, b, c.FZ);
      b += 2;
      M.kA(T, b, c.ge);
      b += 4;
      M.kA(T, b, c.size);
      b += 4;
      M.kA(T, b, 2834);
      b += 4;
      M.kA(T, b, 2834);
      b += 4;
      M.kA(T, b, c.aJ_);
      b += 4;
      b += 4;
    }
    return { LN: q, Ev: j, aps: m };
  })();
  gh.xi = {};
  gh.xi.Ev = function (j, q, m, n) {
    if (n == null) n = { qual: 100, dthr: !1 };
    var G = [],
      W = [],
      k = q * m * 4,
      u = null;
    for (var T = 0; T < j.length; T++) {
      var b = new Uint8Array(j[T][0].slice(0));
      for (var y = 0; y < k; y += 4) {
        var c = (b[y + 3] = b[y + 3] > 127 ? 255 : 0);
        if (c == 0) b[y] = b[y + 1] = b[y + 2] = 0;
      }
      G.push(b.buffer);
      W.push(j[T][1]);
    }
    var a = Math.round(2 + (254 * n.qual) / 100),
      f = UPNG.encode.compress(G, q, m, a, [!0, !1, !1, 8, !1, n.dthr]),
      U = f.plte,
      Z = new Uint8Array(4),
      h = new Uint32Array(Z.buffer);
    for (var y = 0; y < U.length; y++) {
      h[0] = U[y];
      var i = Z[0];
      Z[0] = Z[2];
      Z[2] = i;
      U[y] = h[0];
      if (h[0] == 0 && u == null) u = y;
    }
    while (U.length < 256) U.push(0);
    var x = new Uint8Array(2e4 + Math.round(1.5 * q * m * j.length)),
      X = n.rept,
      $ = { palette: U };
    if (X != 1) $.loop = X == 0 ? 0 : X - 1;
    var H = new GifWriter(x, q, m, $);
    for (var y = 0; y < j.length; y++) {
      var C = f.frames[y],
        l = C.rect,
        v = C.blend,
        K = C.dispose,
        S = Math.round(W[y] / 10);
      if (S < 2) S = 2;
      H.addFrame(l.x, l.y, l.width, l.height, C.img, {
        transparent: u,
        disposal: K + 1,
        delay: S,
      });
    }
    return x.slice(0, H.end()).buffer;
  };
  gh.xi.LN = function (j) {
    var q = Date.now(),
      m = [],
      n = UGIF.decode(j),
      G = UGIF.toRGBA8(n),
      W = new hk(0, 0, n.width, n.height);
    for (var y = 0; y < G.length; y++) {
      var k = n.frames[y];
      m.push({ Iu: W.P(), Le: "_a_frm" + y + "," + k.delay * 10, data: G[y] });
    }
    return m;
  };
  gh.Ej = {};
  gh.Ej.Ev = function (j, q, m, n) {
    if (q > 256 || m > 256) {
      alert("Maximum ICO size is 256x256 px. Will be cropped.", 4e3);
      var G = Math.min(q, 256),
        W = Math.min(m, 256),
        k = new hk(0, 0, G, W),
        T = B.j(k.C() * 4),
        b = new hk(0, 0, q, m),
        c = new Uint8Array(j[0][0]);
      B.M4(c, b, T, k);
      j[0][0] = T.buffer;
      q = G;
      m = W;
    }
    var a = new Uint8Array(j[0][0]).slice(0),
      U = 0;
    a[3] = Math.min(a[3], 254);
    var f = new aj(),
      Z = n && n[0] == !0;
    M.Vd(f, U, 0);
    U += 2;
    M.Vd(f, U, Z ? 2 : 1);
    U += 2;
    M.Vd(f, U, 1);
    U += 2;
    var h = new Uint8Array(UPNG.encode([a.buffer], q, m, null, null, null, !0));
    f.xY(U, 16);
    f.data[U] = q == 256 ? 0 : q;
    U++;
    f.data[U] = m == 256 ? 0 : m;
    U++;
    U += 2;
    M.Vd(f, U, Z ? Math.round(q / 2) : 1);
    U += 2;
    M.Vd(f, U, Z ? Math.round(m / 2) : 32);
    U += 2;
    M.mq(f, U, h.length);
    U += 4;
    M.mq(f, U, 6 + 16);
    U += 4;
    f.xY(U, h.length);
    f.data.set(h, U);
    U += h.length;
    return f.data.slice(0, U).buffer;
  };
  gh.Ej.LN = function (j) {
    j = new Uint8Array(j);
    var q = 4,
      m = M.d9(j, q);
    q += 2;
    var n = [];
    for (var y = 0; y < m; y++) {
      var G = gh.Ej.adm(j, q + y * 16),
        W = j.buffer.slice(G.offset, G.offset + G.size),
        k = gh.Qa(W);
      k = k ? k : "bmp";
      if (k == "png") {
        var T = gh.lj(k),
          b = T.LN(W);
        G.u2 = b[0];
      } else {
        var c = gh.lj("BMP").aps(W, 0),
          W = B.j(G.GM * G.uu * 4);
        B.M4(
          new Uint8Array(c.data),
          new hk(0, 0, c.Iu.r, c.Iu.$),
          W,
          new hk(0, G.uu, G.GM, G.uu)
        );
        c.data = W.buffer;
        c.Iu.$ = G.uu;
        G.u2 = c;
      }
      n.push(G);
    }
    n.sort(function (a, f) {
      if (a.GM != f.GM) return a.GM - f.GM;
      return a.a3B - f.a3B;
    });
    return [n.pop().u2];
  };
  gh.Ej.adm = function (j, q) {
    var m = {};
    m.GM = j[q];
    q++;
    if (m.GM == 0) m.GM = 256;
    m.uu = j[q];
    q++;
    if (m.uu == 0) m.uu = 256;
    m.apk = j[q];
    q++;
    q++;
    m.aFi = M.d9(j, q);
    q += 2;
    m.a3B = M.d9(j, q);
    q += 2;
    m.size = M.YZ(j, q);
    q += 4;
    m.offset = M.YZ(j, q);
    q += 4;
    return m;
  };
  gh.ZC = {};
  gh.ZC.azq = function (j) {
    var q,
      m = "dng";
    if (j[0].t33421) q = j[0];
    else if (j[0].subIFD && j[0].t271 && j[0].t271[0] == "Hasselblad") {
      m = "fff";
      q = j[0].subIFD[0];
      q.t33421 = [2, 2];
    } else if (j[0].subIFD && j[0].subIFD[0].t33421) {
      q = j[0].subIFD[0];
      if (q.t50706 == null) {
        if (q.t258[0] == 8) q.t258[0] = 12;
      }
      m = q.t50713 || q.t50717 ? "dng" : "arw";
    } else if (
      j[0].subIFD &&
      j[0].subIFD[0] &&
      j[0].subIFD[0].t262 &&
      j[0].subIFD[0].t262[0] == 34892
    )
      q = j[0].subIFD[0];
    else if (j[0].t50706) q = j[0];
    else if (j[0].subIFD && j[0].subIFD[1] && j[0].subIFD[1].t33421) {
      m = "nef";
      q = j[0].subIFD[1];
    } else if (j[0].subIFD && j[0].subIFD[2] && j[0].subIFD[2].t33421) {
      m = "nef";
      q = j[0].subIFD[2];
    } else if (j[3] && j[3].t50648) {
      m = "cr2";
      var n = j[0].exifIFD,
        G = n.makerNote;
      q = j[3];
      var W = G.t224[1],
        k = G.t224[2];
      q.t256 = [W];
      q.t257 = [k];
      q.t258 = [16];
      q.t259 = [7];
      q.t262 = [32803];
      q.t277 = [1];
      q.t33421 = [2, 2];
      var T = q.t50656[0],
        b = B.raw.hg[T];
      if (b == null) throw "e";
      q.t33422 = b;
    } else if (j[0].t1 && j[0].t1.length == 4) {
      m = "rw2";
      var c = j[0],
        a = {
          2: 256,
          3: 257,
          8: 277,
          11: 259,
          271: 271,
          272: 272,
          279: 279,
          280: 273,
          278: 278,
          273: 273,
          278: 278,
        },
        f = c.t280 == null;
      q = {};
      for (var U in a) if (c["t" + U]) q["t" + a[U]] = c["t" + U];
      q.t2 = c.t2;
      q.t3 = c.t3;
      q.t10 = c.t10;
      q.t45 = c.t45;
      q.t258 = [16];
      q.t33421 = [2, 2];
      var Z = c.t9[0];
      if (f) Z = 2;
      q.t33422 = [
        [0, 1, 1, 2],
        [1, 0, 2, 1],
        [1, 2, 0, 1],
        [2, 1, 1, 0],
      ][Z - 1];
      var h = c.t4[0],
        u = c.t5[0],
        i = c.t6[0],
        x = c.t7[0];
      q.t50829 = [h, u, i, x];
      var X = c.t36[0],
        $ = c.t37[0],
        H = c.t38[0];
      q.t50728 = [$ / X, $ / $, $ / H];
    } else if (
      j[0].t258 &&
      j[0].t258[0] >= 12 &&
      j[0].t258.length == 1 &&
      j[0].t271 &&
      (j[0].t271[0].startsWith("OLYMPUS") ||
        j[0].t271[0].startsWith("OM Digital Solutions"))
    ) {
      m = "orf";
      q = j[0];
      q.t33421 = [2, 2];
    }
    return [q, q ? m : null];
  };
  gh.ZC.LN = function (j) {
    var q = Date.now();
    if (B.raw.zI(j.byteLength)) return [B.raw.aAU(j)];
    var m = UTIF.decode(j);
    console.log(m.slice(0));
    console.log(m[0]);
    var n = gh.ZC.azq(m),
      G = n[0];
    if (G) {
      UTIF.decodeImage(j, G, m);
      for (var W in m[0])
        if ((W[0] == "t" || W[0] == "e" || W[0] == "d") && G[W] == null)
          G[W] = m[0][W];
      G.J$ = m[0].t274 ? m[0].t274[0] : 1;
      return [G];
    }
    var k = [];
    for (var y = 0; y < m.length; y++) {
      var T = m[y],
        c = null,
        i = 72,
        v,
        K = 8,
        o = null;
      UTIF.decodeImage(j, T, m);
      if (T.width == null) continue;
      var b = T.t262;
      if (T.t258 && T.t258[0] == 16 && T.t277 && T.t277[0] == 1) {
        var a = 0,
          f = 0,
          U = 0,
          Z = T.data;
        for (var h = 0; h < Z.length; h += 2) {
          var u = (Z[h + 1] << 8) | Z[h];
          if (u > a) a = u;
          f += u;
          U++;
        }
        c = ((1 / 256) * 65535) / (0.5 * a + 0.5 * ((2 * f) / U));
      }
      var x = T.t282,
        X = T.t296,
        $ = kI.E5(T),
        H = T.t258,
        C = T.width,
        l = T.height;
      if (x != null && X != null) {
        i = x[0][0] / x[0][1];
        if (X[0] == 3) i = Math.round(i / 2.54);
      }
      if (cP && H[0] == 16) {
        v = gh.agr(T.data.buffer, C, l);
        K = 16;
        var S = new Uint16Array(v);
        if (b && b[0] == 0)
          for (var h = 0; h < S.length; h += 4) {
            S[h] = 65535 - S[h];
            S[h + 1] = 65535 - S[h + 1];
            S[h + 2] = 65535 - S[h + 2];
          }
      } else v = UTIF.toRGBA8(T, c).buffer;
      if (T.t338 && T.t338[0] == 0) {
        var V = B.j(C * l, K),
          o = [V],
          P = K == 16 ? new Uint16Array(v) : new Uint8Array(v),
          a = B.TN(K);
        B.Ih(P, V, 3);
        for (var h = 0; h < P.length; h += 4) P[h + 3] = a;
      }
      k.push({
        Iu: new hk(0, 0, C, l),
        data: v,
        zv: i,
        Un: $,
        Pt: T.t34675 ? T.t34675.slice(0) : null,
        _E: o,
        depth: K,
      });
    }
    return k;
  };
  gh.ZC.Ev = function (j, q, m, n) {
    if (n == null) n = { mtdt: !0 };
    var G = {},
      W = j[0].slice(0),
      k = new Uint8Array(W[0]);
    if (!B.kP(k) && W[4] && W[4][0]) {
      k = k.slice(0);
      B.ln(W[4][0], k, 3);
    }
    if (W[3] != null && n.mtdt) G = kI.Ox(W[3]);
    if (W[2] != null) {
      G.t282 = G.t283 = [[Math.round(W[2]), 1]];
      G.t296 = [2];
    }
    return UTIF.encodeImage(k.buffer, q, m, G);
  };
  gh.x3 = {};
  gh.x3.k5 = !0;
  gh.x3.LN = function (j, q) {
    var m = M.Gf(new Uint8Array(j), "Alpha 1"),
      n = UTIF.decode(j),
      G = n[0],
      Z = 0;
    console.log(n);
    var W = (q.r = G.t256[0]),
      k = (q.$ = G.t257[0]),
      T = W * k;
    q.buffer = B.j(T * 4);
    q.Wd = !1;
    q.G6 = G.t258[0];
    q.p7 = 3;
    var b = G.t34377;
    if (b) {
      var c = new Uint8Array(b.length + 4);
      c.set(b, 4);
      M.ZN(c, 0, b.length);
      b7.acD(q, c, 0);
      b7.aoc(q);
    }
    var a = G.t37724.slice(36),
      f = M.IH(a, 0, 4) == "MIB8";
    gM.wd(a, 0, a.length, q.add, !1, q, f);
    var U = f ? M.YZ : M.Z$;
    while (Z < a.length) {
      var h = M.Vo(a, Z, f);
      Z += 4;
      var u = M.Vo(a, Z, f);
      Z += 4;
      var i = U(a, Z);
      Z += 4;
      if (u == "Layr") {
        hx.EB(q, a, Z, f);
        for (var y = 0; y < q.U.length; y++) {
          var x = q.U[y];
          if (x.add.vstk) x.D5(q);
        }
      }
      Z += i;
      if ((i & 3) != 0) Z += 4 - (i & 3);
    }
    var X = G.t277[0],
      $ = new Uint8Array(j, G.t273[0]);
    for (var y = 3; y < X; y++) {
      var H = B.j(T);
      for (var C = 0; C < T; C++) H[C] = $[C * X + y];
      var l = new R.T0();
      q._E.push(l);
      l.name = q.vS ? q.vS[y - 3] : "Alpha";
      l.N = H;
      l.H = new hk(0, 0, W, k);
    }
  };
  gh.aAr = {};
  gh.aAr.LN = function (j) {
    j = new Uint8Array(j);
    var q = 8,
      m,
      n = 0;
    while (q < j.length) {
      var G = M.IH(j, q, 4),
        W = M.Z$(j, q + 4);
      if (G.startsWith("ic")) {
        var k = j.slice(q + 8, q + W),
          T = gh.Qa(k.buffer),
          b = gh.lj(T),
          c = b.LN(k.buffer),
          a = c[0].Iu.C();
        if (a > n) {
          n = a;
          m = c;
        }
      }
      q += W;
    }
    return m;
  };
  gh.qs = {};
  gh.qs.k5 = !0;
  gh.qs.LN = function (j, q) {
    hx.VB(j, q);
  };
  gh.qs.akc = function (j, q, m, n) {
    j.A$(!0);
    if (n == null) n = [!1, !1, !1, !1, !1];
    if (!n[0]) j.ht();
    var G = new aj(),
      W = hx.RS(j, G, n);
    return [G.data.buffer, W];
  };
  gh.qs.Ev = function (j, q, m, n) {
    var G = gh.qs.akc(j, q, m, n),
      W = G[0],
      k = G[1];
    return W.byteLength == k ? W : W.slice(0, k);
  };
  gh.KG = {};
  gh.KG.k5 = !0;
  gh.KG.LN = function (j, q) {
    var m = pako.inflate(new Uint8Array(j)),
      n = M._h(m, 0),
      G = M._h(m, 2),
      W = 4;
    q.r = M.Z$(m, W);
    W += 4;
    q.$ = M.Z$(m, W);
    W += 4;
    q.buffer = B.j(q.r * q.$ * 4);
    var k = M._h(m, W);
    W += 2;
    W += 4;
    for (var T = 0; T < k; T++) {
      var b = q.dj(),
        h = 0,
        N = 1,
        Q = 2,
        e = 3,
        Y = 0;
      q.U.push(b);
      var c = M.Z$(m, W);
      W += 4;
      var a = W,
        f = M._h(m, a);
      a += 2;
      var U = M.K6(m, a, f);
      a += f;
      b.tV(U);
      var Z = m[a];
      a++;
      if (Z != 0 && Z != 1) throw Z;
      b.H.x = M.dW(m, a);
      a += 4;
      b.H.y = M.dW(m, a);
      a += 4;
      b.H.r = M.Z$(m, a);
      a += 4;
      b.H.$ = M.Z$(m, a);
      a += 4;
      if (n > 3) {
        h = M.dW(m, a);
        a += 4;
      }
      b.yA = Math.round((255 * m[a]) / 100);
      a++;
      var u = m[a];
      a++;
      b.xg(u != 0);
      b.hz =
        "norm,lddg,norm,dark,diff,norm,hLit,norm,norm,lite,mul ,over,scrn,fsub".split(
          ","
        )[m[a]];
      a++;
      var i = m[a];
      a++;
      if (i) b.add.lspf = 1 << 31;
      if (n > 3) {
        var x = M._h(m, a);
        a += 2;
        if (x != 0) {
          var X = JSON.parse(M.K6(m, a, x));
          a += x;
          var $ = X.text,
            H = X.textSettings,
            C = H.font,
            l = H.size,
            v = H.padding,
            K = parseInt(H.color.slice(1), 16);
          b.add.lnsr = "rend";
          b.add.TySh = al.wD(0, 0);
          b.add.TySh.AF = new hk(0, 0, 100, 100);
          var S = (b.add.TySh.u = new k$()),
            o = b.H.r / 2,
            V = b.H.$ / 2;
          S.translate(-o, -V);
          S.rotate((-h * Math.PI) / 180);
          S.translate(o, V);
          S.translate(b.H.x + v, b.H.y + v);
          var P = b.add.TySh.s3;
          al.cj(P, 1);
          al.ms(P, [0, 0, b.H.r - v * 2, b.H.$]);
          al.Fk(P, 0, $);
          var z = al.vJ(P, 0, 1);
          z.K2.FontSize = l;
          z.K2.FillColor = {
            Type: 1,
            Values: [
              1,
              ((K >>> 16) & 255) / 255,
              ((K >>> 8) & 255) / 255,
              ((K >>> 0) & 255) / 255,
            ],
          };
          if (H.bold) C += "-Bold";
          al.gk(z, C);
          z.Th.Justification = ["left", "right", "center"].indexOf(H.align);
          al.jD(P, 0, $.length, z);
        }
      }
      var E = M.Z$(m, a);
      a += 4;
      if (E != b.H.C() * 4) {
        for (var y = b.H.r; y > b.H.r / 2; y--) {
          var A = E / (y * 4);
          if (A == Math.round(A)) {
            b.H.r = y;
            b.H.$ = A;
            break;
          }
        }
      }
      b.buffer = B.j(b.H.C() * 4);
      if (n > 3) {
        N = 0;
        Q = 1;
        e = 2;
        Y = 3;
      }
      for (var y = 0; y < E; y += 4) {
        b.buffer[y] = m[a + y + N];
        b.buffer[y + 1] = m[a + y + Q];
        b.buffer[y + 2] = m[a + y + e];
        b.buffer[y + 3] = m[a + y + Y];
      }
      a += E;
      var d = M.Z$(m, a);
      a += 4;
      if (d == 0 && n > 3) {
        W += c;
        continue;
      }
      var I = m[a];
      a++;
      var O = M._h(m, a);
      a += 2;
      if (d != 0) {
        b.x7 = new R.T0();
        b.x7.H = b.H.P();
        b.x7.N = B.j(b.H.C());
        for (var y = 0; y < d; y += 4) b.x7.N[y >>> 2] = m[a + y + 1];
        a += d;
      }
      if (I != 0) {
        var s = JSON.parse(eu.default);
        b.add.lmfx = s;
        for (var y = 0; y < eu.order.length; y++)
          s[eu.C$[y]] = { t: "VlLs", v: [] };
        var p = { 102: 9, 101: 2, 103: 0, 104: 3, 105: 8 };
        for (var y = 0; y < I; y++) {
          var F = M._h(m, a),
            w = a + F + 4,
            r = m.slice(a, w),
            eQ = m[a + 2];
          a += 3;
          var t = p[eQ + ""],
            dq = JSON.parse(eu.oy[t]);
          s[eu.C$[t]].v.push({ t: "Objc", v: dq });
          if (t != 0) {
            dq.Md.v.BlnM = kJ.il("norm");
            dq.Opct.v.val = m[a];
            a++;
            if (t == 9 || t == 2) {
              dq.Dstn.v.val = m[a + 1];
              a += 2;
            } else a += 2;
            dq.blur.v.val = Math.round(m[a] * 1.2);
            a++;
            if (t == 9 || t == 2) {
              dq.uglg.v = !1;
              dq.lagl.v.val = 180 - M._h(m, a);
              a += 2;
            }
            dq.Clr.v = B.MV.Ia({ o: m[a + 1], i: m[a + 2], X: m[a + 3] });
          } else {
            dq.hglM.v.BlnM = dq.sdwM.v.BlnM = kJ.il("norm");
            a += 2;
            var D = m[a++],
              ha = m[a++];
            dq.blur.v.val = Math.round(Math.sqrt(ha * D) * 1.3);
            dq.srgR.v.val = Math.round((100 * D) / ha);
            dq.uglg.v = !1;
            dq.lagl.v.val = 180 - M._h(m, a);
            a += 2;
            dq.hglO.v.val = m[a++];
            dq.hglC.v = B.MV.Ia({ o: m[a + 1], i: m[a + 2], X: m[a + 3] });
            a += 4;
            dq.sdwO.v.val = m[a++];
            dq.sdwC.v = B.MV.Ia({ o: m[a + 1], i: m[a + 2], X: m[a + 3] });
            a += 4;
          }
          a = w;
        }
      }
      if (a - W < c) {
        var am = M.Z$(m, a),
          ex = 0;
        a += 4;
        a++;
        var f = M._h(m, a);
        a += 2;
        var $ = M.K6(m, a, f);
        a += f;
        $ = $.replace(/\r/g, "\n");
        var f = M._h(m, a);
        a += 2;
        var C = M.K6(m, a, f);
        a += f;
        var l = M._h(m, a);
        a += 2;
        var k4 = b.H.x,
          aA = b.H.r;
        if (am & 4) ex = 1;
        if (am & 2) ex = 2;
        var ac = Math.round(l * 0.4);
        if (ex == 0 || ex == 2) aA += ac;
        if (ex == 1 || ex == 2) {
          aA += ac;
          k4 -= ac;
        }
        b.add.lnsr = "rend";
        b.add.TySh = al.wD(0, 0);
        b.add.TySh.AF = new hk(0, 0, 100, 100);
        b.add.TySh.u = new k$(1, 0, 0, 1, k4, b.H.y + l * 0.25);
        var P = b.add.TySh.s3;
        al.cj(P, 1);
        al.ms(P, [0, 0, aA, b.H.$]);
        al.Fk(P, 0, $);
        var z = al.vJ(P, 0, 1);
        z.K2.FontSize = l;
        z.K2.FillColor = {
          Type: 1,
          Values: [1, m[a + 1] / 255, m[a + 2] / 255, m[a + 3] / 255],
        };
        a += 4;
        if (m[a + 5]) C += "-Bold";
        if (m[a + 6]) C += "-Italic";
        al.gk(z, C);
        z.Th.Justification = ex;
        a += 8;
        al.jD(P, 0, $.length, z);
      }
      W += c;
    }
  };
  gh.SM = {};
  gh.SM.k5 = !0;
  gh.SM.LN = function (j, q) {
    var m = UZIP.parse(j),
      n = JSON.parse(M.K6(m["manifest.json"].buffer));
    q.r = n.width;
    q.$ = n.height;
    q.buffer = B.j(q.r * q.$ * 4);
    q.name = n.name + ".psd";
    var G = n.stack;
    for (var W = 0; W < G.length; W++) {
      var k = G[W],
        T = k.type,
        b = k.rect,
        c = k.format,
        a = c ? c.fill : null,
        f = q.dj();
      f.tV(k.name);
      f.xg(k.visible);
      f.yA = Math.round(255 * k.opacity);
      var U = (f.H = new hk(b.x, b.y, b.w, b.h)),
        Z = b.r;
      if (Z == null) Z = 0;
      q.U.push(f);
      if ((T == "image" && Z != 0) || (T == "shape" && c.variant == "svg")) {
        var h = q.Pi(m[k.content], f.getName(), 0, 0);
        h.uZ = f.uZ;
        h.yA = f.yA;
        f = h;
        q.U.pop();
        q.U.push(f);
        var u = B.b._c(U).L;
        B.b.u(u, gh.SM.w5(U, Z), u);
        f.add.SoLd.Trnf = L.Dq.be(u);
        f.add.SoLd.nonAffineTransform = L.Dq.be(u);
        f.yZ(q, !1);
      } else if (T == "image") {
        if (U.C() != 0) {
          var i = m[k.content].buffer,
            x = gh.Qa(i),
            X = gh.lj(x),
            $ = X.LN(i)[0];
          U.r = $.Iu.r;
          U.$ = $.Iu.$;
          f.buffer = new Uint8Array($.data);
        }
      } else if (T == "shape") {
        f.uZ |= 16;
        var H = (f.add.vstk = eu.rS.i4(!0)),
          C = (f.add.vmsk = new R.tm()),
          l,
          v = c.variant;
        if (v == "rectangle" || v == "rounded") {
          l = B.z.cn.Rect(U.x, U.y, U.r, U.$, c.radii);
        } else if (v == "ellipse") {
          l = B.z.cn.SQ(U.x, U.y, U.r, U.$);
        } else if (v == "path") {
          var K = Typr.U.SVGToPath(k.content),
            S = { RC: K.cmds, L: K.crds };
          l = B.b.LZ(S);
          var o = B.z.zZ(l);
          B.z.La(l, new k$(U.r / o.r, 0, 0, U.$ / o.$, U.x, U.y));
        } else if (v == "line") {
          var S = { RC: ["M", "L"], L: [U.x, U.y, U.x + U.r, U.y] };
          l = B.b.LZ(S);
        } else console.log(c);
        f.add.SoCo = {
          classID: "null",
          Clr: { t: "Objc", v: B.MV.Ia({ o: 0, i: 0, X: 0 }) },
        };
        if (a == null) {
          H.fillEnabled.v = !1;
        } else if (a.type == "color") {
          f.add.SoCo.Clr.v = B.MV.Ia(CSS.uQ(a.value));
        } else if (a.type == "gradient") {
          delete f.add.SoCo;
          f.add.GdFl = gh.SM.qm(a, Z);
        } else console.log(a);
        var P = gh.SM.w5(U, Z);
        B.z.La(l, P);
        var z = k.style;
        if (z && z.outline) {
          var E = z.outline;
          H.strokeEnabled.v = !0;
          H.strokeStyleLineWidth.v.val = E.size;
          H.strokeStyleContent.v.Clr.v = B.MV.Ia(CSS.uQ(E.color));
        }
        C.D = l;
        f.Pp();
        f.D5(q);
      } else if (T == "text") {
        f.add.lnsr = "rend";
        f.add.TySh = al.wD(0, 0);
        f.add.TySh.AF = new hk(0, 0, 100, 100);
        var A = f.add.TySh.s3;
        al.cj(A, 1);
        al.ms(A, [0, 0, U.r, U.$]);
        var N = k.content;
        al.Fk(A, 0, N);
        var Q = al.vJ(A, 0, Math.min(N.length, 1)),
          e = c.font.name,
          Y = c.font.content;
        if (Y && m[Y]) {
          var d = m[Y];
          if (d instanceof Uint8Array) d = m[Y] = Typr.parse(d.buffer)[0];
          e = d.name.postScriptName;
        }
        al.gk(Q, e);
        var I = (Q.K2.FontSize = Math.round(c.size));
        if (a && a.value) {
          var O = null;
          if (a.type == "color") O = a.value;
          else if (a.type == "gradient") O = a.value.stops[0].color;
          if (O) {
            var s = CSS.uQ(O);
            Q.K2.FillColor = {
              Type: 1,
              Values: [1, s.o / 255, s.i / 255, s.X / 255],
            };
          }
        }
        var p = c.linespace;
        if (p) {
          Q.K2.AutoLeading = !1;
          Q.K2.Leading = Math.round(I * (1.06 + parseFloat(p)));
          console.log(p, Q.K2);
        }
        Q.K2.FauxBold = c.bold;
        Q.Th.Justification = ["left", "right", "center", "justify"].indexOf(
          c.align
        );
        al.jD(A, 0, N.length, Q);
        var F = new k$(),
          g = U.r / 2,
          w = U.$ / 2;
        F.translate(Math.round(I * 0), Math.round(I * 0.25));
        F.translate(-g, -w);
        F.rotate((-Z * Math.PI) / 180);
        F.translate(g, w);
        F.translate(U.x, U.y);
        f.add.TySh.u = F;
        f.H = new hk();
      } else console.log(k);
    }
    q.c4 = !0;
  };
  gh.SM.w5 = function (j, q) {
    var m = j.x + j.r / 2,
      n = j.y + j.$ / 2,
      G = new k$();
    G.translate(-m, -n);
    G.rotate((-q * Math.PI) / 180);
    G.translate(m, n);
    return G;
  };
  gh.SM.qm = function (j, q) {
    var m = JSON.parse(eu.oy[eu.order.indexOf("GrFl")]),
      n = m.Grad.v;
    n.Intr.v = 0;
    var G = [],
      W = j.value.stops;
    for (var y = 0; y < W.length; y++) {
      var k = W[y],
        T = CSS.uQ(k.color);
      G.push([k.position, [T.o / 255, T.i / 255, T.X / 255]]);
    }
    B.MV.gB(G, n);
    m.Angl.v.val = -(j.value.direction + q) + 90 + 180;
    return m;
  };
  gh.Va = {};
  gh.Va.k5 = !0;
  gh.Va.LN = function (j, q) {
    kn.VB(j, q);
  };
  var kn = (function () {
    function j(f, U) {
      var Z = Date.now(),
        h = UZIP.parse(f),
        u = h["maindoc.xml"],
        i = new DOMParser(),
        x = i.parseFromString(M.K6(u), "image/svg+xml").children[0].children[0],
        X = x.getAttribute("name"),
        $ = (U.r = c(x, "width")),
        H = (U.$ = c(x, "height"));
      U.zv = Math.round(c(x, "x-res"));
      var C = x.children[0].children;
      q(C, U, { o6: X, uv: h, P7: null });
      console.log(Date.now() - Z);
      Z = Date.now();
    }
    function q(f, U, Z) {
      for (var h = 0; h < f.length; h++) {
        var u = f[f.length - 1 - h],
          i = u.getAttribute("nodetype");
        if (i == "transparencymask") {
          Z.P7.x7 = a(u, Z);
          continue;
        }
        var x = u.getAttribute("compositeop"),
          X = u.getAttribute("filename"),
          $ = u.getAttribute("channelflags"),
          H = u.children;
        H = H.length == 0 ? null : H[0].children;
        var C = U.dj();
        if (i == "paintlayer") {
          var l = c(u, "x"),
            v = c(u, "y"),
            K = Z.uv[Z.o6 + "/layers/" + X + ".defaultpixel"],
            S = Z.uv[Z.o6 + "/layers/" + X],
            o = b(S);
          C.H = o[0];
          C.H.offset(l, v);
          C.buffer = o[1];
          if (C.H.jG() && K.join() != "0,0,0,0") {
            C.add.SoCo = {
              classID: "null",
              Clr: { t: "Objc", v: B.MV.Ia({ o: K[0], i: K[1], X: K[2] }) },
            };
            C.D5(U);
          }
        } else if (i == "grouplayer") {
          C.add.lsct = hQ.WR;
          C.hz = "pass";
          C.uZ |= 24;
          U.U.push(U.to());
          var V = Z.P7;
          Z.P7 = C;
          q(H, U, Z);
          Z.P7 = V;
        } else if (i == "shapelayer") {
          var S = Z.uv[Z.o6 + "/layers/" + X + ".shapelayer/content.svg"],
            P = M.K6(S),
            z = U.Pi(S, C.getName(), 0, 0);
          C = z;
          var E = new hk(0, 0, U.r, U.$),
            A = B.b._c(E).L;
          C.add.SoLd.Trnf = L.Dq.be(A);
          C.add.SoLd.nonAffineTransform = L.Dq.be(A);
          C.yZ(U, !1);
        } else if (i == "clonelayer") {
          var y = -1;
          for (var Q = 0; Q < f.length; Q++)
            if (f[Q].getAttribute("name") == u.getAttribute("clonefrom")) y = Q;
          if (y != -1) {
            q([f[y]], U, Z);
            C = U.U.pop();
          }
        } else console.log(i, u);
        C.tV(u.getAttribute("name"));
        if (c(u, "locked") == 1) C.add.lspf = 1 << 31;
        C.xg(c(u, "visible") == 1);
        var e = {
          normal: "norm",
          multiply: "mul ",
          diff: "diff",
          hard_light: "hLit",
        }[x];
        if (e) C.hz = e;
        else console.log(x);
        C.yA = c(u, "opacity");
        if ($ == "1110") C.Yx = !0;
        var Y = H ? H[0] : null;
        if (Y && Y.tagName == "mask") C.x7 = a(Y, Z);
        U.U.push(C);
      }
    }
    function m(f, U) {
      var Z = 0,
        h = 0,
        u = f.length,
        i,
        x,
        X;
      while (Z < u) {
        i = f[Z++];
        if (i > 31) {
          x = i >>> 5;
          if (x == 7) x = 7 + f[Z++];
          X = ((i & 31) << 8) | f[Z++];
          var $ = h - X - 1,
            H = x >>> 1;
          U[h++] = U[$++];
          U[h++] = U[$++];
          for (var y = 0; y < H; y++) {
            U[h++] = U[$++];
            U[h++] = U[$++];
          }
          if ((x & 1) == 1) U[h++] = U[$++];
        } else {
          for (var y = 0; y <= i; y++) {
            U[h++] = f[Z++];
          }
        }
      }
    }
    function n(f, U) {
      var Z = 0;
      while (f[U + Z] != 10) Z++;
      return M.IH(f, U, Z);
    }
    var G = new hk(0, 0, 64, 64),
      W = new Uint8Array(64 * 64 * 4),
      k = new Uint8Array(64 * 64 * 4);
    function T() {
      for (var y = 0; y < 4096; y++) {
        var f = y << 2;
        W[f + 0] = k[y + 8192];
        W[f + 1] = k[y + 4096];
        W[f + 2] = k[y];
        W[f + 3] = k[y + 12288];
      }
    }
    function b(f) {
      var U = 0,
        Z = {};
      for (var y = 0; y < 5; y++) {
        var h = n(f, U);
        U += h.length + 1;
        h = h.split(" ");
        Z[h[0]] = parseInt(h[1]);
      }
      var u = Z.PIXELSIZE,
        i = [],
        x = new hk();
      while (U < f.length) {
        var h = n(f, U),
          X = h.split(",");
        U += h.length + 1;
        if (X[2] != "LZF") throw X[2];
        G.x = parseInt(X[0]);
        G.y = parseInt(X[1]);
        x = x.vd(G);
        var $ = parseInt(X[3]);
        i.push([G.P(), new Uint8Array(f.buffer, U + 1, $ - 1)]);
        U += $;
      }
      var H = B.j(x.C() * u);
      for (var y = 0; y < i.length; y++) {
        var C = i[y];
        m(C[1], k);
        if (u == 4) {
          T();
          B.M4(W, C[0], H, x);
        } else B.sN(k, C[0], H, x);
      }
      return [x, H];
    }
    function c(f, U) {
      return parseInt(f.getAttribute(U));
    }
    function a(f, U) {
      var Z = f.getAttribute("filename"),
        h = U.uv[U.o6 + "/layers/" + Z + ".pixelselection"],
        u = b(h),
        i = new R.T0();
      i.Yd = c(f, "visible") == 1;
      i.H = u[0];
      i.N = u[1];
      return i;
    }
    return { VB: j };
  })();
  gh.$s = {};
  gh.$s.k5 = !0;
  gh.$s.LN = function (j, q) {
    jU.VB(j, q);
  };
  gh.eL = {};
  gh.eL.LN = function (j) {
    var q = new Uint8Array(j),
      m = gh.eL.s4(q, 0, 0),
      n = m.sub[2],
      G = gh.eL.azm(q, n),
      W = m.sub[3],
      k = gh.eL.azm(q, W);
    return [G, k];
  };
  gh.eL.azm = function (j, q) {
    var m = q.sub[q.sub.length - 1],
      n = m.sub[0].g,
      G = m.sub[1].g,
      W = j.slice(n, n + 16),
      k = j.slice(G, G + m.sub[1].size),
      T = M.YZ,
      b = j[n],
      c = T(j, n + 1),
      a = T(j, n + 5),
      f = j[n + 13],
      U = new hk(0, 0, c, a),
      Z = B.j(c * a * 4);
    if (f) {
      B.bs(Z, 4278190080);
    } else {
      UTEX.readBC1(j, G, Z, c, a);
    }
    return { Iu: U, data: Z };
  };
  gh.eL.s4 = function (j, q, m) {
    var n = M.IH,
      G = M.YZ,
      W = n(j, q, 4);
    W = W.split("").reverse().join("");
    var k = G(j, q + 4);
    if (k != 0) {
      console.log(j.slice(q - 8));
      throw k;
    }
    var T = G(j, q + 8);
    while ((T & 3) != 0) T++;
    var b = { ys: W, g: q + 12, size: T };
    if (W == "CARF" || W == "CTEX" || W == "CREW" || W == "BMAP") {
      b.sub = [];
      q += 12;
      if (W == "CTEX" || W == "CREW") q += 32;
      var c = b.g + b.size;
      while (q < c) {
        var a = gh.eL.s4(j, q, m + 1);
        b.sub.push(a);
        q += 12 + a.size + (a.size & 1);
      }
    }
    return b;
  };
  gh.SB = {};
  gh.SB.k5 = !0;
  gh.SB.LN = function (j, q) {
    ek.VB(j, q);
  };
  gh.GU = {};
  gh.GU.k5 = !0;
  gh.GU.LN = function (j, q) {
    hs.VB(j, q);
  };
  gh.oZ = {};
  gh.oZ.k5 = !0;
  gh.oZ.LN = function (j, q) {
    c7.VB(j, q);
  };
  gh.I3 = {};
  gh.I3.k5 = !0;
  gh.I3.LN = function (j, q) {
    je.VB(j, q);
  };
  gh.fG = {};
  gh.fG.k5 = !0;
  gh.fG.LN = function (j, q) {
    ki.VB(j, q);
  };
  gh.cz = {};
  gh.cz.k5 = !0;
  gh.cz.LN = (function () {
    function j(a) {
      var f = a.w,
        U = a.h,
        Z = new hk(0, 0, f, U);
      if (f == 0) {
        for (var y = 0; y < a.$.length; y++) {
          var h = a.$[y];
          if (h["@"] == "slice") Z = new hk(h.x, h.y, h.w, h.h);
        }
      }
      if (Z.r == 0 || Z.$ == 0) Z.r = Z.$ = 1024;
      return Z;
    }
    function q(a, f) {
      var U = M.K6(new Uint8Array(a)),
        Z = JSON.parse(U),
        h = Z.$,
        u = new hk(),
        i = [],
        x = [],
        C = 0;
      for (var X = 0; X < h.length; X++) {
        var $ = h[X],
          H = j($);
        if ($["@"] != "page") continue;
        x[X] = new ea(H.x, H.y);
        H.x = H.y = 0;
        if (X != 0) H.x += u.r + 40;
        u = u.vd(H);
        i[X] = H;
      }
      f.r = Math.round(u.r);
      f.$ = Math.round(u.$);
      f.buffer = B.j(f.r * f.$ * 4);
      for (var X = 0; X < h.length; X++) {
        var $ = h[X];
        if ($["@"] != "page") continue;
        var l = new k$();
        l.translate(i[X].x - x[X].x, -x[X].y);
        m($, l, f, Z, 0);
        C++;
      }
      f.cw(C);
      f.c4 = !0;
    }
    function m(a, f, U, Z, h) {
      var u = a["@"],
        H = !1;
      if (u == "annlst") return;
      var i = T(a);
      i.concat(f);
      var x = U.dj(),
        X = a.$,
        $ = u == "page" || u == "group" || u == "layer";
      if (!$ && X && u != "Compound Shape") {
        a = B.S(a);
        delete a.$;
        X = [a].concat(X);
        $ = !0;
        H = !0;
      }
      if ($) {
        x.add.lsct = h < 2 ? hQ.WR : hQ.z$;
        x.hz = "pass";
        x.uZ = 24;
        if (H) {
          var C = (x.add.vmsk = new R.tm());
          C.D = k(a);
          x.Pp();
          x.D5(U);
        }
        U.U.push(U.to());
        if (u == "page") {
          var l = j(a),
            v = new hk(i.Tt + l.x, i.BL + l.y, l.r, l.$);
          x.KP(v);
          if (a.bck && a.bop != 0) {
            x.add.artb.Clr = { t: "Objc", v: B.MV.Ia(W(a.bck)) };
            x.add.artb.artboardBackgroundType = { t: "long", v: 4 };
          } else {
            x.add.artb.artboardBackgroundType = { t: "long", v: 3 };
          }
        }
        if (X) for (var y = 0; y < X.length; y++) m(X[y], f, U, Z, h + 1);
      } else if (
        u == "ellipse" ||
        u == "rectangle" ||
        u == "polygon" ||
        u == "path" ||
        u == "compoundpath" ||
        u == "Compound Shape"
      ) {
        x.uZ |= 16;
        var C = (x.add.vmsk = new R.tm()),
          S = null,
          o = null;
        C.D = k(a);
        B.z.La(C.D, f);
        var K = a._layers ? a._layers.$ : [];
        for (var y = 0; y < K.length; y++) {
          if (K[y]["@"] == "borderPaintLayer") o = K[y];
          if (K[y]["@"] == "fillPaintLayer") S = K[y];
        }
        if (S && S._vs == !1) S = null;
        if (o && o._vs == !1) o = null;
        if (o && o._bw == null) o = null;
        if (o && o._pt == null) o = null;
        var V = S != null,
          P = o != null;
        if (V && S._op != null) {
          if (S._op == 0) V = !1;
          else if (!P) x.yA = Math.round(x.yA * S._op);
        }
        var z = (x.add.vstk = eu.rS.i4(V, P));
        if (P) {
          var E = eu.TB.i4();
          if (o._ba == "I") E.x2 = 0;
          if (o._ba == "O") E.x2 = 2;
          if (o._bw) E.mm = o._bw;
          if (o._bds) E.QJ = o._bds;
          if (o._blc) E.kv = ["butt", "round", "square"].indexOf(o._blc);
          E.h0 = 2;
          eu.rS.write(z, E);
          if (o._pt) z.strokeStyleContent.v.Clr.v = B.MV.Ia(W(o._pt));
          if (o._op != null)
            z.strokeStyleOpacity.v.val = Math.round(o._op * 100);
        }
        var A = S._pt;
        if (A && A[0] == "L") {
          var N = JSON.parse(A.slice(2)),
            Q = [];
          for (var y = 0; y < N.x.length; y++) {
            var e = N.x[y],
              Y = W(e.c);
            Q.push([e.p, [Y.o / 255, Y.i / 255, Y.X / 255], e.o]);
          }
          var d = (x.add.GdFl = JSON.parse(eu.oy[eu.order.indexOf("GrFl")])),
            I = d.Grad.v;
          d.Type.v.GrdT = "Lnr";
          var O = [0.5, 0, 1, 0],
            s = B.z.zZ(C.D);
          s.x = s.y = 0;
          var p = new k$();
          if (N.r != null) p.rotate(-N.r);
          p.scale(N.s, N.s);
          p.translate(N.fx, N.fy);
          p.scale(s.r, s.$);
          B.b.u(O, p, O);
          B.MV.UO(new ea(O[0], O[1]), new ea(O[2], O[3]), s, d);
          B.MV.gB(Q, I);
        } else
          x.add.SoCo = {
            classID: "null",
            Clr: { t: "Objc", v: B.MV.Ia(V ? W(A) : { o: 0, i: 0, X: 0 }) },
          };
        x.Pp();
        x.D5(U);
      } else if (u == "text") {
        var F = JSON.parse(a.content),
          eQ = 0,
          t = "",
          dq = 0;
        x.add.lnsr = "rend";
        var g = (x.add.TySh = al.wD(0, 0));
        g.AF = new hk(0, 0, 100, 100);
        var w = g.s3;
        al.Fk(w, 0, " ");
        var r = JSON.stringify(al.vJ(w, 0, 1));
        for (var y = 0; y < F.length; y++) {
          var D = F[y],
            ha = D.text.replaceAll(String.fromCharCode(8232), "\n"),
            am = JSON.parse(r);
          am.K2.FontSize = D.fontSize;
          dq = Math.max(dq, D.fontSize);
          al.gk(am, G(D));
          var k4 = W(D.fontColor);
          am.K2.FillColor = {
            Type: 1,
            Values: [1, k4.o / 255, k4.i / 255, k4.X / 255],
          };
          if (D.align == "center") am.Th.Justification = 2;
          if (D.align == "right") am.Th.Justification = 1;
          if (D.transformation == "uppercase") am.K2.FontCaps = 2;
          if (D.strikeout) am.K2.Strikethrough = !0;
          if (D.lineSpacing != null) {
            am.K2.AutoLeading = !1;
            am.K2.Leading = Math.round(D.lineSpacing * D.fontSize * 1.4);
          }
          al.Fk(w, eQ, ha);
          al.jD(w, eQ, eQ + ha.length, am);
          eQ += ha.length;
          t += ha;
        }
        var aA = a.aw == !1 && a.w > 10 ? 1 : 0;
        if (aA == 1) {
          var ex = a.w,
            ac = a.h,
            eJ = F[0].fontSize;
          if (a.ah == !1) {
          } else {
            var h$ = (eQ * eJ * 0.52) / ex;
            ac = Math.max(ac, 1.2 * eJ * Math.ceil(h$));
          }
          al.cj(w, 1);
          al.ms(w, [0, 0, Math.round(ex), Math.round(ac)]);
        }
        var da = a.va;
        if (a.va == null) da = "t";
        if (da == "m") g.Ix.VAlign.v = 2;
        if (da == "b") g.Ix.VAlign.v = 1;
        var bb = (g.u = new k$()),
          D = F[0];
        if (aA == 0) bb.translate(D.align == "center" ? a.w / 2 : 0, dq * 0.9);
        else bb.translate(0, dq * (da == "b" ? 0 : da == "m" ? 0.17 : 0.3));
        bb.concat(i);
      } else if (u == "image") {
        var gb = a.url,
          fM = null,
          kS = Z.dictionary.entries;
        for (var y = 0; y < kS.length; y++)
          if (gb.endsWith(kS[y].uuid)) fM = kS[y].value;
        var cY = gh.TD(fM);
        x = U.Pi(cY, "hey", 0, 0);
        var cS = B.b._c(new hk(0, 0, a.pw, a.ph)).L;
        B.b.u(cS, i, cS);
        x.add.SoLd.Trnf = L.Dq.be(cS);
        x.add.SoLd.nonAffineTransform = L.Dq.be(cS);
        x.yZ(U, !1);
      } else console.log(u, a);
      if (a._eff) {
        var k3 = a._eff.$;
        for (var y = 0; y < k3.length; y++) {
          var di = k3[y],
            a7 = di["@"];
          if (a7 == "overlayEffect") {
            var b0 = JSON.parse(eu.oy[eu.order.indexOf("SoFi")]);
            b0.Clr.v = B.MV.Ia(W(di.pat));
            n(x, "solidFillMulti", b0);
          } else if (a7 == "dropShadowEffect") {
            var b0 = JSON.parse(eu.oy[eu.order.indexOf("DrSh")]);
            b0.Clr.v = B.MV.Ia(W(di.pat));
            b0.blur.v.val = di.r == null ? 5 : di.r;
            var e1 = di.x,
              l2 = di.y;
            if (e1 == null) e1 = l2 = 0;
            b0.Dstn.v.val = Math.round(Math.sqrt(e1 * e1 + l2 * l2));
            b0.lagl.v.val = Math.round((Math.atan2(l2, -e1) * 180) / Math.PI);
            b0.uglg.v = !1;
            n(x, "dropShadowMulti", b0);
          } else console.log(di, a);
        }
      }
      if (a.name) x.tV(a.name);
      else x.tV(u[0].toUpperCase() + u.slice(1));
      if (a._stop) x.yA = Math.round(x.yA * a._stop);
      if (a.vis != null) x.xg(a.vis);
      U.U.push(x);
    }
    function n(a, f, U) {
      var Z = a.add.lmfx;
      if (Z == null) {
        var Z = (a.add.lmfx = JSON.parse(eu.default));
        for (var y = 0; y < eu.order.length; y++)
          Z[eu.C$[y]] = { t: "VlLs", v: [] };
      }
      Z[f].v.push({ t: "Objc", v: U });
    }
    function G(a) {
      var f = {
          400: "Regular",
          600: "SemiBold",
          700: "Bold",
          800: "ExtraBold",
        },
        U = a.fontFamily,
        Z = a.fontWeight;
      if (jK && jK.tT) {
        var h = jK.tT,
          u = h.QP(),
          i = u[U];
        if (i == null) return U;
        var x = f["" + Z];
        if (x == null) console.log(Z, i);
        if (x == null) x = i[0];
        var X = h.L2(U, x);
        return X[2];
      }
      return U;
    }
    function W(a) {
      var f = a[0];
      if (f == "#") return CSS.uQ(a);
      else if (f == "C") {
        var aF = a.slice(3, -1).split(",").map(parseFloat);
        return { o: aF[0], i: aF[1], X: aF[2] };
      } else if (f == "L") {
        a = JSON.parse(a.slice(2));
        return W(a.x[0].c);
      } else {
        console.log(a);
        return { o: 0, i: 0, X: 0 };
      }
    }
    function k(a) {
      var f = a["@"],
        U = B.z.cn.SQ(-1, -1, 2, 2).slice(0, 2),
        Z = T(a),
        h = f == "compoundpath";
      if (f == "ellipse") {
        U = B.z.cn.SQ(-1, -1, 2, 2);
        B.z.La(U, Z);
      } else if (f == "rectangle") {
        U = B.z.cn.Rect(-1, -1, 2, 2);
        B.z.La(U, Z);
        var u = a.sl;
        if (u != 0) B.z.E8(U, 2, [u, u, u, u]);
      } else if (f == "polygon") {
        var i = a.cx,
          x = a.cy;
        U = B.z.cn.Cz(i, x, a.or, -0.31, a.pts, 0, a.ir / a.or);
        B.z.La(U, Z);
      } else if (f == "Compound Shape" || h) {
        var X = a[h ? "paths" : "$"];
        for (var y = 0; y < X.length; y++) {
          var $ = h ? JSON.parse(X[y]) : X[y],
            H = h ? 0 : 1;
          if ($.bool == 4) H = 2;
          if ($.bool == 3) H = 3;
          var C = k($),
            l = C[2];
          l.Np = y == 0 ? 1 : H;
          U = U.concat(C.slice(2));
        }
      } else if (f == "path") {
        U.push({
          e: a.closed ? 0 : 3,
          Np: y == 0 ? 1 : 0,
          length: a.pts.length,
          xV: 0,
          yg: 0,
          uc: 1,
        });
        var v = !1,
          K = [],
          S = U.length - 1;
        for (var o = 0; o < a.pts.length; o++) {
          var V = a.pts[o],
            P,
            z,
            E,
            A = 0;
          if ((V.length & 1) == 0) V = V.slice(1);
          var P = (z = E = b(V[0]));
          for (var N = 3; N < V.length; N += 2) {
            var Q = V[N],
              Y = b(V[N + 1]);
            if (Q == "h") P = Y;
            else if (Q == "H") E = Y;
            else if (Q == "C") {
              A = Y.x;
              v = !0;
            } else console.log(Q, Y);
          }
          K.push(A);
          U.push({ e: 1, kt: Z.uL(P), Ii: Z.uL(z), _$: Z.uL(E) });
        }
        if (v) B.z.E8(U, S, K);
      } else throw f;
      return U;
    }
    function T(a) {
      var f = a.trf;
      return f ? new k$(f[0], f[1], f[2], f[3], f[4], f[5]) : new k$();
    }
    function b(a) {
      var f = M.x5,
        U = c(a);
      return new ea(f(U, 0), f(U, 4));
    }
    function c(a) {
      return new Uint8Array(gh.vG(a));
    }
    return q;
  })();
  gh.s_ = {};
  gh.s_.k5 = !0;
  gh.s_.Ev = function (j, q, m, n, G, W) {
    if (n == null) n = { arst: !0, mini: !0 };
    var k = hY.He(
      j,
      {
        WO: n.arst,
        hidden: n.ahid,
        am4: n.vtxt,
        ayu: n.rtxt,
        O2: n.mini,
        a85: q,
        aq7: m,
      },
      G.HS,
      W
    );
    return k;
  };
  gh.s_.LN = function (j, q, m) {
    hY.VB(j, q, m);
  };
  gh.M9 = {};
  gh.M9.k5 = !0;
  gh.M9.LN = function (j, q) {
    var m = 150,
      n = new k$(1, 0, 0, -1, 0, 0);
    n.scale(m / 72, m / 72);
    q.zv = m;
    var G = new cT(q, n, !0);
    FromPS.Parse(j, G);
  };
  gh.E1 = {};
  gh.E1.k5 = !0;
  gh.E1.Ev = function (j, q, m, n, G) {
    if (n == null) n = { pags: "", qual: 100 };
    n.fmts = ["jpg"];
    var W = new ToPDF();
    gp.He(j, n, W, G.HS, q, m);
    return W.buffer;
  };
  gh.E1.LN = function (j, q, m) {
    var n = ei == 0 ? 2 : 1;
    while (!0) {
      var G = n * 72,
        W = new k$(1, 0, 0, -1, 0, 0);
      W.scale(G / 72, G / 72);
      q.zv = G;
      var k = new cT(q, W, !0);
      FromPDF.Parse(j, k);
      var T = Math.max(q.r, q.$);
      if (m && T < Math.max(m[0], m[1])) {
        q.U = [];
        var b = n;
        while (T * (n / b) < Math.max(m[0], m[1])) n++;
      } else break;
    }
  };
  gh._1 = {};
  gh._1.k5 = !0;
  gh._1.LN = function (j, q) {
    var m = 72,
      n = new k$(1, 0, 0, 1, 0, 0);
    n.scale(m / 72, m / 72);
    q.zv = m;
    var G = new cT(q, n, !1);
    FromWMF.Parse(j, G);
  };
  gh.if = {};
  gh.if.KV = !0;
  gh.if.k5 = !0;
  gh.if.Ev = function (j, q, m, n, G) {
    if (n == null) n = { pags: "", qual: 100 };
    n.fmts = [];
    var W = new ToEMF();
    gp.He(j, n, W, G.HS);
    return W.buffer;
  };
  gh.if.LN = function (j, q) {
    var m = 72,
      n = new k$(1, 0, 0, 1, 0, 0);
    n.scale(m / 72, m / 72);
    q.zv = m;
    var G = new cT(q, n, !1);
    FromEMF.Parse(j, G);
  };
  gh.Xo = {};
  gh.Xo.k5 = !0;
  gh.Xo.LN = function (j, q) {
    return jg.VB(j, q);
  };
  gh.a1Q = {};
  gh.a1Q.LN = (function () {
    var j,
      q,
      m,
      n,
      G,
      W,
      k = 0,
      T = 0,
      b = 0,
      c = 0,
      a = 0,
      X =
        "eJzt0lGR6kAUBNBIQEIkICESWgISkICESLgSIgEJkbAS2sG+s7AO+HkfO1RXQZPcOanJsnx/L5/k489n2/+tv/W3PlwXWeUqm0RucpeH7DJyyFNO+ZL+NwOuv9fvv//3PW7Vr/pVv+rXvsdv+k2/6Tf91vftN/3Nl5v+pr/1PXLX7/rdj12/90059If+0B/6o2/aqT/1p/7Un31Tq6+++urb15OGPwCxWfjj4vCHP/zhD3/4wx/+8Ic//OGPseEPf/jDH/7YKvzhD3/4wx/+8Ic//OEPf/jDH/7whz/84Q9/+MMf/vDP62SucpNdnqLnH/7hH/7hH/7hH/7hH/7hH/7hH/7hH/7hH/7hH/7hH/7hH/7hH/7hH/7hH/7hH/7hH/7hH/7hH/7hH/7hH/7XsfCXv/zl/2nLX/7yl7/85S9/+ctf/vKX/3Ws/OUvf/nL/zpq/vKXv/zlL3/5y1/+8pe//OUvf/nLX/7+vEL8tVENLX+Vl8tlWdd1uV6vy7ZtS+JNYrjf78vj8fDKetaZ5TiO5fl8Lud5Ll9fX/8ACveX4A==",
      $ = null;
    function f(H) {
      var C = dg.VB(H),
        l = C.HF,
        P = 0,
        z,
        E;
      console.log(C);
      var v = new Uint8Array(H);
      if (l == "ILBM") return U(C, v);
      if (l == "CIMG") return u(C, v);
      if (l == "ANIM" && C.sub[0].ys == "ADAT") return x(C, v);
      if (l != "ANIM") throw l;
      var K = M._h,
        S = M.Z$,
        o = C.sub,
        V = U(o[0], v);
      for (var A = 1; A < o.length - 2; A++) {
        var N = V[Math.max(0, A - 2)].aJ3.slice(0),
          Q = o[A];
        for (var e = 0; e < Q.sub.length; e++) {
          var Y = Q.sub[e],
            d = Y.g;
          if (Y.ys == "ANHD") {
            var I = v[d++];
            if (I != 5) throw I;
            var n = v[d++],
              s = K(v, d),
              p = K(v, d + 2);
            if (s != 0 && s != j) throw s;
            if (p != 0 && p != q) throw p;
            var g = K(v, d + 4),
              w = K(v, d + 6);
            if (g != 0 || w != 0) throw g;
            d += 8;
            var r = K(v, d);
            d += 2;
            z = K(v, d);
            d += 2;
            if (v[d++] != 0) throw "e";
            if (v[d++] != 0) throw "e";
            E = K(v, d);
            d += 2;
          } else if (Y.ys == "DLTA") {
            var eQ = [],
              t = d;
            for (var y = 0; y < 16; y++) eQ.push(S(v, d + y * 4));
            d += 64;
            var dq = W;
            for (var D = 0; D < G; D++) {
              if (eQ[D] == 0) continue;
              d = t + eQ[D];
              for (var ha = 0; ha < dq; ha++) {
                var am = v[d++],
                  k4 = 0;
                if (am == 0) continue;
                for (var y = 0; y < am; y++) {
                  var aA = v[d++];
                  if (aA == 0) {
                    var ex = v[d++],
                      ac = v[d++];
                    for (var eJ = 0; eJ < ex; eJ++) {
                      N[(k4 * G + D) * dq + ha] = ac;
                      k4++;
                    }
                  } else if (aA < 128) {
                    k4 += aA;
                  } else {
                    aA -= 128;
                    for (var eJ = 0; eJ < aA; eJ++) {
                      N[(k4 * G + D) * dq + ha] = v[d + eJ];
                      k4++;
                    }
                    d += aA;
                  }
                }
              }
            }
          } else console.log(Y.ys);
        }
        if (A == 1 && z > 100) z = 0;
        var h$ = z == 0 ? 17 : Math.round(((z - P) * 1e3) / 60);
        V.push({
          data: h(v, N).buffer,
          Iu: new hk(0, 0, j, q),
          aJ3: N,
          Le: "_a_frm" + A + "," + h$,
        });
        P = z;
      }
      if (b != 0 && j > q * 2) {
        var da = new Uint32Array(j * q * 2);
        da.fill(4294967295);
        for (var A = 0; A < V.length; A++) {
          var bb = V[A],
            gb = new Uint32Array(bb.data);
          for (var k4 = 0; k4 < q; k4++) {
            var fM = k4 * 2;
            for (var ha = 0; ha < j; ha++) da[fM * j + ha] = gb[k4 * j + ha];
            fM++;
            for (var ha = 0; ha < j; ha++) da[fM * j + ha] = gb[k4 * j + ha];
          }
          bb.Iu.$ *= 2;
          bb.data = da.slice(0).buffer;
        }
      }
      return V;
    }
    function U(H, C) {
      var l, v, K;
      k = 0;
      T = 0;
      c = 0;
      a = 0;
      b = 0;
      for (var S = 0; S < H.sub.length; S++) {
        var o = H.sub[S],
          V = o.g;
        if (o.ys == "BMHD") {
          var P = [];
          for (var y = 0; y < 4; y++) P[y] = M._h(C, V + 2 * y);
          V += 8;
          var z = P[2],
            E = P[3];
          j = P[0];
          q = P[1];
          m = C[V++];
          n = C[V++];
          K = C[V++];
          if (K != 0 && K != 1) throw K;
          W = ((j + 15) >>> 4) << 1;
          G = m + n;
        } else if (o.ys == "CMAP") k = V;
        else if (o.ys == "CAMG") {
          var A = M.Z$(C, V);
          (T = A & 32768), (b = A & 4), (c = A & 2048);
          a = A & 128;
        } else if (o.ys == "BODY") {
          v = B.j(W * q * G);
          if (K == 0) v = C.slice(V, V + v.length);
          if (K == 1) aW.tO(C, V, o.size, v, 0, v.length);
        } else if (o.ys == "PLTP") {
          console.log(C.slice(V, V + o.size));
        }
      }
      l = h(C, v);
      return [{ Iu: new hk(0, 0, j, q), data: l.buffer, aJ3: v }];
    }
    function Z(H, aF) {
      return (H[aF >>> 3] >>> (7 - (aF & 7))) & 1;
    }
    function h(H, C) {
      var l = m - 2,
        v = (1 << l) - 1,
        K = Math.round(255 / v),
        S,
        o,
        V,
        P = W * 8;
      if (k != 0) {
        var z = 1 << m,
          E = !0;
        for (var y = 1; y < z; y++) {
          var A = k + y * 3;
          if (
            H[A] != H[A - 3] ||
            H[A + 1] != H[A - 2] ||
            (H[A + 2] != H[A - 1] && H[A + 2] != H[A - 1] + 1)
          )
            E = !1;
        }
        if (E) {
          for (var y = 0; y < z; y++) {
            var A = k + y * 3,
              N = Math.round((y * 255) / (z - 1));
            H[A] = H[A + 1] = H[A + 2] = N;
          }
        }
      }
      var Q = B.j(j * q * 4);
      for (var e = 0; e < q; e++)
        for (var Y = 0; Y < j; Y++) {
          var d = 0;
          for (var I = 0; I < G; I++) {
            var O = (e * G + I) * P + Y,
              s = Z(C, O);
            d |= s << I;
          }
          d = d & ((1 << m) - 1);
          var y = e * j + Y,
            p = y << 2;
          if (k != 0) {
            if (c != 0 && d >>> l != 0) {
              var F = d >>> l,
                g = (d & v) * K;
              if (F == 1) V = g;
              else if (F == 2) S = g;
              else if (F == 3) o = g;
            } else {
              var g = k + d * 3;
              S = H[g + 0];
              o = H[g + 1];
              V = H[g + 2];
            }
          } else {
            if (m == 24) {
              S = (d >>> 0) & 255;
              o = (d >>> 8) & 255;
              V = (d >>> 16) & 255;
            } else if (m == 16) {
              var w = 0,
                r = 1,
                t = 4;
              for (var I = 0; I < 16; I++) w += ((d >>> I) & 1) << (15 - I);
              var eQ = (1 << r) - 1,
                dq = (1 << t) - 1;
              S = ((w >>> 7) & eQ) * (255 / eQ);
              o = V = S;
            } else throw m;
          }
          Q[p + 0] = S;
          Q[p + 1] = o;
          Q[p + 2] = V;
          Q[p + 3] = 255;
        }
      return Q;
    }
    function u(H, C) {
      var l = 1,
        v = 2,
        K = 4,
        S = M.Z$,
        o = M._h,
        j = 200,
        q = 200,
        V,
        P,
        z,
        E;
      for (var A = 0; A < H.sub.length; A++) {
        var N = H.sub[A],
          Q = N.g;
        if (N.ys == "TBHD") {
          j = S(C, Q);
          Q += 4;
          q = S(C, Q);
          Q += 4;
          E = B.j(j * q * 4);
          z = new hk(0, 0, j, q);
          Q += 4;
          var e = S(C, Q);
          Q += 4;
          var Y = o(C, Q);
          Q += 2;
          if (Y != 0) throw "e";
          P = o(C, Q);
          Q += 2;
          var d = S(C, Q);
          Q += 4;
          if (d != 1) throw d;
          V = 0;
          if (e & l) V += 3;
          if (e & v) V += 1;
        }
        if (N.HF == "TBMP") {
          var I = N.sub;
          for (var O = 0; O < I.length; O++) {
            var s = I[O].g,
              p = I[O].size,
              F = o(C, s),
              g = o(C, s + 2),
              w = o(C, s + 4) - F + 1,
              r = o(C, s + 6) - g + 1;
            s += 8;
            var eQ = B.j(w * r * 4),
              t = B.j(w * r);
            eQ.fill(255);
            for (var y = 0; y < 4; y++) {
              s = i(C, s, p - 8, t, 0);
              B.ln(t, eQ, 3 - y);
            }
            if (s != I[O].g + p) throw "e";
            B.M4(eQ, new hk(F, g, w, r), E, z);
          }
        }
      }
      return [{ Iu: z, data: E.buffer }];
    }
    function i(H, C, l, v, K) {
      var S = C;
      while (K < v.length) {
        var o = H[C++],
          c_ = (o & 127) + 1;
        if (o & 128) {
          o = H[C++];
          for (var y = 0; y < c_; ++y) v[K++] = o;
        } else {
          for (var y = 0; y < c_; ++y) v[K++] = H[C++];
        }
      }
      return C;
    }
    function x(H, C) {
      if ($ == null) {
        var l = gh.vG(X);
        $ = new Uint32Array(pako.inflate(new Uint8Array(l)).buffer);
      }
      var v = M.Z$,
        K = M._h,
        S = H.sub[0],
        o = H.sub[1],
        j = K(C, S.g),
        q = K(C, S.g + 2),
        V = K(C, S.g + 4),
        N,
        y,
        Q,
        e,
        Y,
        d;
      if (V != 3) throw V;
      var P = new hk(0, 0, j, q),
        z = B.j(j * q * 4),
        E = B.j(j * q);
      z.fill(255);
      var A = new Uint32Array(z.buffer),
        I = o.g;
      for (e = 0; e < 2; e++) {
        d = e;
        Y = 0;
        N = Math.floor((j * q + 2 - e - 1) / 2);
        while (N > 0) {
          y = C[I++];
          if (y & 128) {
            y = 257 - y;
            N -= y;
            Q = C[I++];
            Y = (Y & $[Q]) | $[Q + 256];
            do {
              A[d] = Y;
              d += 2;
            } while (--y);
          } else {
            y++;
            N -= y;
            do {
              Q = C[I++];
              A[d] = Y = (Y & $[Q]) | $[Q + 256];
              d += 2;
            } while (--y);
          }
        }
      }
      for (var y = 0; y < z.length; y += 4) {
        var O = z[y + 3],
          s = z[y + 2],
          p = z[y + 1];
        z[y] = O;
        z[y + 1] = s;
        z[y + 2] = p;
        z[y + 3] = 255;
      }
      for (var F = 0; F < q >>> 1; F++) {
        for (var g = 0; g < j; g++) {
          var y = F * j + g,
            Q = (q - 1 - F) * j + g,
            w = A[y];
          A[y] = A[Q];
          A[Q] = w;
        }
      }
      return [{ Iu: P, data: z.buffer }];
    }
    return f;
  })();
  gh.K0 = {};
  gh.K0.k5 = !1;
  gh.K0.Ev = function (j, q, m, n) {
    var G = null,
      W = new Uint8Array(j[0][0]),
      k = 2;
    if (n.ctoa && j[0][4]) G = j[0][4];
    else if (B.kP(W)) {
      G = [new Uint8Array(W.length >>> 2)];
      B.Ih(W, G[0], 3);
    }
    var T = G ? !0 : !1,
      b = T ? 4 : 3,
      c = new Uint8Array(q * m * b);
    for (var a = 0; a < m; a++)
      for (var f = 0; f < q; f++) {
        var U = (a * q + f) << 2,
          Z = ((m - a - 1) * q + f) * b;
        c[Z] = W[U + 2];
        c[Z + 1] = W[U + 1];
        c[Z + 2] = W[U + 0];
        if (T) c[Z + 3] = G[0][a * q + f];
      }
    if (!0) {
      var h = c.length,
        u = 0,
        i = new Uint8Array(h * 2),
        x = 0,
        X = 0,
        $ = q * b;
      while (X < h) {
        var H = X,
          C = 0,
          l = $ * (Math.floor(X / $) + 1);
        while (H < l && C < 128) {
          var v = !0;
          for (var y = 0; y < b; y++) v = v & (c[X + y] == c[H + y]);
          if (!v) break;
          H += b;
          C++;
        }
        if (C == 1) {
          var K = 1;
          while (K < 128 && X + (K + 1) * b < l) {
            var v = !0,
              S = X + K * b;
            for (var y = 0; y < b; y++) v = v & (c[S + y] == c[S + b + y]);
            if (v) break;
            K++;
          }
          i[x++] = K - 1;
          for (var o = 0; o < K; o++)
            for (var y = 0; y < b; y++) i[x++] = c[X++];
        } else {
          i[x++] = 127 + C;
          for (var y = 0; y < b; y++) i[x + y] = c[X + y];
          x += b;
          X += b * C;
          u += C;
        }
      }
      c = i.slice(0, x);
      k += 8;
    }
    var V = new Uint8Array(18 + c.length + 26);
    V[2] = k;
    M.pq(V, 12, q);
    M.pq(V, 14, m);
    V[16] = b * 8;
    V[17] = b == 4 ? 8 : 0;
    V.set(c, 18);
    M.Sc(V, 18 + c.length + 8, "TRUEVISION-XFILE.");
    return V.buffer;
  };
  gh.K0.LN = function (j) {
    var q = new Uint8Array(j),
      m = 0,
      n = q[0],
      G = q[1],
      W = q[2],
      k = q[4] * 256 + q[3],
      T = q[6] * 256 + q[5],
      b = q[7],
      c = q[9] * 256 + q[8],
      a = q[11] * 256 + q[10],
      f = q[13] * 256 + q[12],
      U = q[15] * 256 + q[14],
      Z = q[16],
      h = q[17],
      u = h >>> 4,
      i = M.IH(q, 18, n),
      x = B.j(f * U * 4),
      m = 18 + n + ((T * b) >>> 3),
      X = new Uint8Array(q.buffer, m);
    if (W > 3) {
      var $ = 0,
        H = q,
        C = new Uint8Array((f * U * Z) >>> 3),
        l = m,
        v = 0,
        K = q.length,
        S = Z >>> 3;
      while (v < C.length) {
        var aF = H[l];
        l++;
        if (aF < 128)
          for (var y = 0; y < aF + 1; y++) {
            for (var o = 0; o < S; o++) {
              C[v] = H[l];
              v++;
              l++;
            }
          }
        else {
          for (var y = 0; y < aF - 127; y++) {
            for (var o = 0; o < S; o++) {
              C[v] = H[l + o];
              v++;
            }
          }
          l += S;
        }
      }
      W -= 8;
      X = C;
      m = l;
    } else m += (f * U * Z) >>> 3;
    var V = new Uint8Array(4),
      P = gh.K0.aj1;
    for (var z = 0; z < U; z++)
      for (var E = 0; E < f; E++) {
        var A = (u & 2) == 0 ? (U - z - 1) * f + E : z * f + E,
          N = z * f + E,
          Q,
          e,
          Y,
          d = 255,
          I = (A * Z) >>> 3;
        if (W == 1) {
          var O = 0;
          if (Z == 8) O = X[I];
          else throw "e";
          P(q, 18 + n + k + ((O * b) >>> 3), b, V);
          Q = V[0];
          e = V[1];
          Y = V[2];
          d = V[3];
        } else if (W == 2) {
          P(X, I, Z, V);
          Q = V[0];
          e = V[1];
          Y = V[2];
          d = V[3];
        } else if (W == 3) {
          if (Z == 8) Q = e = Y = X[I];
          else throw "e";
        }
        var s = N * 4;
        x[s] = Q;
        x[s + 1] = e;
        x[s + 2] = Y;
        x[s + 3] = d;
      }
    var V = { Iu: new hk(0, 0, f, U), data: x.buffer, Le: i };
    if (B.kP(x)) {
      var p = B.j(f * U);
      B.Ih(x, p, 3);
      B.EA(x, 1);
      V._E = [p];
    }
    return [V];
  };
  gh.K0.aj1 = function (j, q, m, n) {
    var G,
      W,
      k,
      T = 255;
    if (m == 24 || m == 32) {
      k = j[q];
      W = j[q + 1];
      G = j[q + 2];
      if (m == 32) T = j[q + 3];
    } else if (m == 16) {
      var b = (j[q + 1] << 8) | j[q + 0];
      G = (b >>> 10) & 31;
      W = (b >>> 5) & 31;
      k = (b >>> 0) & 31;
      G = Math.round(G * (255 / 31));
      W = Math.round(W * (255 / 31));
      k = Math.round(k * (255 / 31));
    } else throw "e";
    n[0] = G;
    n[1] = W;
    n[2] = k;
    n[3] = T;
  };
  gh.o$ = (function () {
    var j = [],
      q = !1,
      m,
      n = null,
      G = 50,
      W = 10,
      f;
    function k(h, u, i, x) {
      j.push([0, h, x, i]);
      a();
    }
    async function T(h, u, i, x) {
      G = x.qual;
      W = x.smlr ? 5 : 10;
      return new Promise(function (X) {
        j.push([1, h, u, i, X]);
        a();
      });
    }
    function b(h) {
      var u = j.shift();
      u[3](null, [h], u[2]);
      q = !1;
      a();
    }
    function c() {
      n = J.m("iframe");
      n.setAttribute("src", "code/ext_formats/formatsLoader.html");
      J.F(n, "display:none");
      window.addEventListener("message", Z, !1);
      document.body.appendChild(n);
    }
    function a() {
      if (q || j.length == 0) return;
      q = !0;
      var h = j[0];
      if (h[0] == 0 && gh.Qa(h[1]) == "avif") {
        gh.ayk(h[1], "image/avif", b);
      } else if (n == null) c();
      else U();
    }
    async function U() {
      var h = j[0],
        u;
      if (h[0] == 0) {
        var i = h[1],
          x = new Uint8Array(i),
          X = new Blob([i]);
        u = { subject: "open", body: X };
        var $ = M.Gf(x, "Exif\0\0MM");
        m = null;
        if ($ != -1) {
          var H = UTIF.decode(i.slice($ + 6));
          m = kI.E5(H[0]);
        }
      } else {
        var C = { fmt: "avif", speed: W, quality: G, nochroma: 0, lossless: 0 },
          l = new ImageData(new Uint8ClampedArray(h[1][0][0]), h[2], h[3]);
        u = { subject: "save", body: l, prms: C };
      }
      f = Date.now();
      n.contentWindow.postMessage(u);
    }
    function Z(h) {
      var u = h.data,
        i = u.subject,
        x = u.body;
      console.log(u);
      if (i == "rdy") {
        q = !1;
        a();
      } else if (i == "img") {
        b({ Iu: new hk(0, 0, x.width, x.height), data: x.data.buffer, Un: m });
      } else if (i == "file") {
        console.log(Date.now() - f);
        j[0][4](x.buffer);
        q = !1;
        j.shift();
        a();
      } else console.log(u);
    }
    return { k5: !1, Qg: !0, LN: k, Ev: T };
  })();
  gh.aI2 = (function () {
    var j,
      q = [],
      m = 10,
      T,
      b,
      c,
      a = 0,
      f,
      U,
      Z;
    function n($) {
      var H = gh.Qa($);
      if (H == "mp4") return new dN(new Blob([$]));
      else return new hD(new Blob([$]));
    }
    async function G($, H, C, l, v) {
      j = C;
      q.push($, l);
      var K = n($),
        S = (await K.k6()).YF;
      console.log(S);
      var f = S.width,
        U = S.height,
        o = S.GN,
        V = o / S.bp,
        P = o / V,
        z =
          f +
          " \xD7 " +
          U +
          " px, " +
          o +
          " frames, " +
          bE.za(f * U * 4 * o) +
          " decoded<br/>";
      z += V.toFixed(2) + " seconds, " + P.toFixed(2) + " FPS";
      var E = new fd(_.E.c, !0);
      E.data = { R: _.Y.s0, kO: "setFPS", pv: m, ml: W, aLP: z };
      v.k(E);
    }
    function W($) {
      m = Math.max(1, Math.min(60, $));
      var H = window.VideoDecoder;
      if (H) k();
      else {
        alert("WebCodecs not available.");
        h();
      }
    }
    async function k() {
      var $ = Date.now(),
        H = q.shift(),
        Z = [],
        C = n(H),
        l = (await C.k6()).YF,
        f = l.width,
        U = l.height,
        v = l.GN,
        K = v / l.bp,
        S = v / K,
        o = Math.min(S, m),
        V = Math.max(1, Math.round(S / o));
      for (var y = 0; y < v; y++) {
        if (y % V != 0) continue;
        var P = await C.yd(0, y);
        Z.push({
          Le: "_a_" + Z.length + "," + Math.round(1e3 / o),
          Iu: new hk(0, 0, f, U),
          data: P.buffer,
        });
      }
      j(null, Z, q.shift());
      if (q.length != 0) k();
    }
    function h() {
      if (q.length == 0) return;
      T = document.createElement("canvas");
      b = T.getContext("2d");
      c = document.createElement("video");
      var $ = "data:" + "video/mp4" + ";base64," + gh.Sk(q.shift());
      c.src = $;
      c.muted = !0;
      c.currentTime = 0;
      c.addEventListener("canplay", u, !1);
      c.addEventListener("timeupdate", i, !1);
    }
    function u($) {
      c.removeEventListener("canplay", u);
      f = T.width = c.videoWidth;
      U = T.height = c.videoHeight;
      Z = [];
      c.play();
    }
    function i($) {
      clearTimeout(a);
      b.drawImage(c, 0, 0);
      Z.push({
        Le: "_a_" + Z.length + "," + Math.round(1e3 / m),
        Iu: new hk(0, 0, f, U),
        data: b.getImageData(0, 0, f, U).data.buffer,
      });
      var H = c.currentTime + 1 / m;
      if (H < c.duration && $) {
        c.currentTime = H;
        a = setTimeout(i, 1e3);
      } else {
        j(null, Z, q.shift());
        c.removeEventListener("timeupdate", i);
        h();
        Z = null;
      }
    }
    function x() {
      this.Ul = new Uint8Array(1024);
      this.g = 0;
    }
    x.prototype.write = function ($) {
      var H = this.Ul,
        C = this.g;
      if ($ instanceof ArrayBuffer) $ = new Uint8Array($);
      if ($ instanceof Uint8Array) {
        while (H.length < C + $.length) {
          var l = new Uint8Array(H.length * 2);
          l.set(H);
          H = l;
        }
        H.set($, C);
        C += $.length;
      } else if ($.e == "write") {
        H.set($.data, $.position);
      } else {
        console.log($);
        throw "e";
      }
      this.Ul = H;
      this.g = C;
    };
    x.prototype.close = function () {
      this.Ul = this.Ul.slice(0, this.g);
    };
    async function X($, f, U, H) {
      var C = f,
        l = U;
      if ((f & 1) != 0) f++;
      if ((U & 1) != 0) U++;
      var v = f != C || U != l,
        K = v ? B.j(f * U * 4) : null,
        S = {
          YF: { SV: 1, GN: $.length, bp: 1e3 / $[0][1], width: f, height: U },
        },
        o = new x(),
        V = 0.02 * (1 + Math.pow((3.2 * H.qual) / 100, 2.3)),
        P = new iK(o, S, V);
      for (var y = 0; y < $.length; y++) {
        var z = $[y],
          E = new Uint8Array(z[0]),
          A = E;
        if (v) {
          B.M4(E, new hk(0, 0, C, l), K, new hk(0, 0, f, U));
          A = K;
        }
        await P.ajs(A, 0, y);
      }
      await P.finish();
      return o.Ul.buffer;
    }
    return { k5: !1, Qg: !0, LN: G, Ev: X };
  })();
  gh.XC = {};
  gh.XC.LN = function (j) {
    var q = new Uint8Array(j),
      m = 0,
      n = 112,
      G = 42,
      W = M.YZ,
      a;
    m += 8;
    var k = q[m];
    m++;
    if (k != G) throw "e";
    var T = W(q, m);
    m += 4;
    var b = M.a5(q, m, T);
    m += T * 2;
    var c = [];
    while (m < q.length) {
      a = W(q, m);
      m += 4;
      if (a != n) throw a;
      m += 4;
      a = q[m];
      m++;
      if (a != G) throw a;
      var f = W(q, m);
      m += 4;
      var U = q[m];
      m++;
      if (U != G) {
        m -= 5;
        f = W(q, m);
        m += 8;
        a = q[m];
        m++;
        if (a != G) throw a;
      }
      var Z = W(q, m) * 2;
      m += 4;
      if (f > 0) c.push(m + Z);
      m += Z + f;
    }
    var h = new DOMParser(),
      u = h.parseFromString(b, "image/svg+xml").firstChild.firstChild,
      i = [];
    gh.XC.ali(u, q, c, i);
    return i;
  };
  gh.XC.ali = function (j, q, m, n) {
    var G = j.firstChild.firstChild;
    if (G.tagName == "Image") {
      var W = G.getElementsByTagName("ImageDescription")[0],
        k = W.children[0].children,
        T = W.children[1].children,
        b = m.shift(),
        c = [];
      for (var y = 0; y < T.length; y++)
        c.push(parseInt(T[y].getAttribute("NumberOfElements")));
      while (c.length > 3) c[2] *= c.pop();
      var a = k.length,
        f = c[0],
        U = c[1],
        Z = c[2],
        h = parseInt(T[0].getAttribute("BytesInc"));
      for (var u = 0; u < Z; u++) {
        var i = B.j(f * U * 4);
        i.fill(255);
        for (var x = 0; x < a; x++) {
          var X = B.j(f * U);
          if (h == 1) for (var $ = 0; $ < X.length; $++) X[$] = q[b + $];
          else if (h == 2)
            for (var $ = 0; $ < X.length; $++)
              X[$] = Math.min(
                255,
                ((q[b + $ * 2 + 1] << 8) | q[b + $ * 2]) >>> 2
              );
          else throw h;
          if (x != 3) B.ln(X, i, x);
          if (a == 1) {
            B.ln(X, i, 1);
            B.ln(X, i, 2);
          }
          b += f * U * h;
        }
        n.push({ Iu: new hk(0, 0, f, U), data: i.buffer });
      }
    } else {
      var H = j.children,
        C = 0;
      while (C < H.length && H[C].tagName != "Children") C++;
      if (C == H.length) throw "e";
      H = H[C].children;
      for (var l = 0; l < H.length; l++) gh.XC.ali(H[l], q, m, n);
    }
  };
  gh.aag = (function () {
    function j(k, T, b, c, a) {
      var f = new Int8Array(k.buffer),
        U = new Int8Array(c.buffer),
        Z = T + b;
      while (T < Z) {
        var aF = f[T];
        T++;
        if (aF >= 0 && aF < 128)
          for (var y = 0; y < aF + 1; y++) {
            U[a] = f[T];
            a++;
            T++;
          }
        if (aF >= -127 && aF < 0) {
          for (var y = 0; y < -aF + 1; y++) {
            U[a] = f[T];
            a++;
          }
          T++;
        }
      }
      return a;
    }
    function q(k, T, b, c, a, f) {
      var U = (T * b * c) >>> 3,
        Z = B.j(U * a),
        h = n(k, 0, 0, 0)[0];
      for (var u = 0; u < a; u++) {
        var i = h[u + 1];
        if (f) {
          var x = gh.lj("jpg").LN(i.buffer),
            X = B.j(U);
          B.P2(new Uint8Array(x[0].data), X);
          Z.set(X, U * u);
        } else if (i[0] == 255 && i[1] == 216 && i[2] == 255) {
          var $ = UTIF.LosslessJpegDecode(i);
          Z.set(new Uint8Array($[0].buffer), U * u);
        } else j(i, 64, i.length, Z, U * u);
      }
      return Z;
    }
    function m(k) {
      var T = new Uint8Array(k),
        b = 0,
        c = M.IH(T, 0, 128);
      b += 128;
      var a = M.IH(T, b, 4);
      b += 4;
      var f = G(T, b, 0)[0],
        U = f.g28;
      if (U == null) {
        alert("No image.");
        return [];
      }
      var Z = U.cols,
        h = U.rows,
        u = Z * h,
        i = U.photoInterpret,
        x = U.bitsAlloc,
        X = U.bitsStored,
        $ = U.lossyCompr;
      if ($ == null) $ = f.g8.lossyCompr;
      var H = f.g7fe0.pixelData,
        C = U.numOfFrames;
      C = C ? parseInt(C) : 1;
      var l = new Uint8Array(H.buffer),
        v = (u * x) >>> 3;
      if (l.length != v * C) {
        H = q(H, Z, h, x, C, $);
      } else {
      }
      if (x == 16) H = new Uint16Array(H.buffer);
      console.log(U);
      console.log(f);
      var K = [];
      for (var S = 0; S < C; S++) {
        var o = S * v,
          k = B.j(Z * h * 4);
        k.fill(255);
        if (i == "MONOCHROME2") {
          var V = 0,
            P = 255,
            z = U.largestValue,
            E = U.smallestValue;
          if (z != null) {
            P = z;
            V = E;
          } else if (X != 8) {
            P = 0;
            V = 1e9;
            for (var y = 0; y < u; y++) {
              var A = H[o + y];
              if (A > 1 << (X - 8)) {
                if (A > P) P = A;
                if (A < V) V = A;
              }
            }
          }
          var N = 255 / (P - V);
          for (var y = 0; y < u; y++) {
            var A = Math.max(0, Math.min(255, (H[o + y] - V) * N)),
              e = y * 4;
            k[e] = k[e + 1] = k[e + 2] = A;
          }
        } else if (i == "PALETTE COLOR") {
          var Y = U.pltRed,
            d = U.pltGreen,
            I = U.pltBlue;
          for (var y = 0; y < u; y++) {
            var O = H[o + y],
              e = y * 4;
            k[e] = Y[O] >>> 8;
            k[e + 1] = d[O] >>> 8;
            k[e + 2] = I[O] >>> 8;
          }
        } else throw i;
        K.push({ Iu: new hk(0, 0, Z, h), data: k.buffer });
      }
      return K;
    }
    function n(k, T, b, c) {
      if (b == 0) b = k.length;
      var a = M.d9,
        f = M.O_,
        U = M.YZ,
        Z = [],
        h = T;
      while (T < b) {
        var u = a(k, T);
        T += 2;
        var i = a(k, T);
        T += 2;
        var x = U(k, T);
        T += 4;
        if (u == 65534 && i == 57344) {
          if (x == 4294967295) {
            var X = G(k, T, c + 1);
            Z.push(X[0]);
            T = X[1];
          } else {
            Z.push(k.slice(T, T + x));
            T += x;
          }
        } else if (u == 65534 && i == 57357) {
        } else if (u == 65534 && i == 57565) break;
        else throw "e";
      }
      return [Z, T];
    }
    function G(k, T, b) {
      var c = M.d9,
        a = M.O_,
        f = M.YZ,
        U = M.dq,
        Z = {},
        h = "\t".repeat(b);
      while (T < k.length) {
        var u = c(k, T),
          $ = "",
          H = 0,
          l = null;
        T += 2;
        var i = c(k, T);
        T += 2;
        var x = u.toString(16),
          X = i.toString(16);
        if (u == 65532) break;
        if (u == 65534 && i == 57357) {
          T -= 4;
          break;
        }
        if (u == 65534 && i == 57565) throw "e";
        if (i == 0) {
          T += 8;
          continue;
        }
        if (65 <= k[T + 1]) {
          $ = M.IH(k, T, 2);
          T += 2;
          if ($ == "OB" || $ == "SQ" || $ == "OW") {
            H = f(k, T + 2);
            T += 6;
          } else {
            H = c(k, T);
            T += 2;
          }
        } else {
          $ = W[x][X].split(",")[1];
          H = f(k, T);
          T += 4;
        }
        var C = W[x][X];
        if (C) C = C.split(",")[0];
        if (C == null) {
          C = "t" + X;
        }
        if ($ == "SQ") {
          var v = n(k, T, T + H, b);
          l = v[0];
          T = v[1];
          H = 0;
        } else if ($ == "US") l = c(k, T);
        else if ($ == "SS") l = a(k, T);
        else if ($ == "UL") l = f(k, T);
        else if ($ == "SL") l = U(k, T);
        else if ($ == "FL") l = M.x5(k, T);
        else if ($ == "AT") l = [c(k, T), c(k, T + 2)];
        else if ($ == "OB") l = k.slice(T, T + H);
        else if ($ == "OW") l = new Uint16Array(k.slice(T, T + H).buffer);
        else if ($ == "FD") l = new Float64Array(k.slice(T, T + H).buffer);
        else if (
          "UI CS DA TM DT SH LO ST LT PN AE AS DS IS".split(" ").indexOf($) !=
          -1
        ) {
          var K = T + H;
          while (k[K - 1] == 0) K--;
          l = M.IH(k, T, K - T).trim();
        } else {
          console.log(h, JSON.stringify(M.IH(k, T, Math.min(H, 32))));
          throw $;
        }
        if (Z["g" + x] == null) Z["g" + x] = {};
        Z["g" + x][C] = l;
        T += H;
      }
      return [Z, T];
    }
    var W = {
      2: {
        1: "fmiVersion",
        2: "classUID",
        3: "instanceUID",
        10: "syntaxUID",
        12: "icUID",
        13: "implVerName",
        16: "appTitle",
      },
      4: { 1130: "fileSetID" },
      8: {
        5: "charSet",
        8: "imageType,CS",
        16: "classUID,UI",
        18: "instanceUID,UI",
        20: "studyDate",
        21: "seriesDate",
        22: "acqDate",
        23: "contentDate",
        "2a": "acqDateTime",
        30: "studyTime",
        32: "acqTime",
        33: "contentTime",
        50: "accNumber",
        60: "modality,CS",
        64: "convType,CS",
        70: "manufacturer",
        80: "institutionName",
        81: "institutionAddress",
        90: "rpName",
        1010: "stationName",
        1030: "studyDescription",
        "103e": "seriesDesc",
        1050: "ppName",
        1090: "modelName",
        1150: "rclassUID",
        1155: "rinstanceUID",
        2110: "lossyCompr",
        2112: "imageSequence",
      },
      9: {},
      10: {
        10: "patientName,PN",
        20: "patientID,LO",
        30: "patientBirthDate",
        40: "patientSex",
        1010: "patientAge",
      },
      18: {
        60: "KVP",
        1020: "swVersion",
        1063: "frameTime",
        1150: "expTime",
        1151: "xrayTubeCurrent",
        1152: "exposure",
        1155: "radiation",
        1500: "posMotion",
        1510: "posAngle0",
        1511: "posAngle1",
      },
      19: {},
      20: {
        d: "studyUID,UI",
        e: "seriesUID,UI",
        10: "studyID",
        11: "seriesNumber",
        12: "acqNumber,IS",
        13: "instanceNumber,IS",
        20: "patientOrientation",
      },
      21: {},
      23: {},
      25: {},
      27: {},
      28: {
        2: "spp,US",
        4: "photoInterpret,CS",
        8: "numOfFrames",
        9: "frameIncPointer",
        10: "rows,US",
        11: "cols,US",
        30: "pixelSpacing",
        100: "bitsAlloc,US",
        101: "bitsStored,US",
        102: "highBit,US",
        103: "pixRepresentation,US",
        106: "smallestValue",
        107: "largestValue",
        120: "pixPaddingValue",
        1040: "pixIntensityRelation",
        1050: "windCenter",
        1051: "windWidth",
        1090: "viewMode",
        1101: "pdRed",
        1102: "pdGreen",
        1103: "pdBlue",
        1199: "paletteUID",
        1201: "pltRed",
        1202: "pltGreen",
        1203: "pltBlue",
        2110: "lossyCompr",
        6010: "repFrameNum",
        6020: "foi",
        6022: "foiDescription",
        6040: "rWavePointer",
        6100: "maskSubtraction",
        6101: "maskOp",
        6110: "maskFrameNum",
      },
      29: {},
      32: {},
      37: {},
      38: {},
      40: {},
      43: {},
      50: { 4: "calibImage" },
      5000: {
        5: "curveDim",
        10: "numOfPoints",
        20: "typeOfData",
        30: "axisUnits",
        103: "dataValRepr",
        104: "minCrdValue",
        105: "maxCrdValue",
        106: "curveRange",
        110: "curveDataDesc",
        112: "crdStartValue",
        114: "crdStepValue",
        3000: "curveData",
      },
      "7fe0": { 10: "pixelData,OB" },
    };
    return { LN: m };
  })();
  gh.atn = {};
  gh.atn.LN = function (j) {
    var q = new Uint8Array(j),
      m = 0,
      n = {};
    for (var y = 0; y < 306; y++) {
      var G = M.IH(q, m, 8).trim(),
        W = M.IH(q, m + 9, 71)
          .split("/")[0]
          .trim();
      n[G] = W;
      m += 80;
      if (G == "END") {
        m = Math.ceil(m / 2880) * 2880;
        break;
      }
    }
    var k = parseInt(n.NAXIS1),
      T = parseInt(n.NAXIS2),
      b = k * T,
      c = parseInt(n.BITPIX),
      a = n.BZERO ? parseInt(n.BZERO) : 0,
      f = n.NAXIS3 ? parseInt(n.NAXIS3) : 1,
      U = new Float32Array(j, m, (j.byteLength - m) >>> 2),
      Z = new Float32Array(b),
      h = B.j(b * 4, 16);
    h.fill(65535);
    var u = B.j(b, 16);
    for (var i = 0; i < f; i++) {
      var x = 1e9,
        X = -1e9;
      for (var y = 0; y < b; y++) {
        if (c == -32) {
          var $ = q[m + 0];
          q[m + 0] = q[m + 3];
          q[m + 3] = $;
          var $ = q[m + 1];
          q[m + 1] = q[m + 2];
          q[m + 2] = $;
          Z[y] = U[y];
          m += 4;
        } else if (c == 16) {
          Z[y] = a + M.A_(q, m);
          m += 2;
        } else throw c;
        var H = Z[y];
        if (H < x) x = H;
        if (H > X) X = H;
      }
      var C = 1 / X;
      for (var l = 0; l < T; l++)
        for (var v = 0; v < k; v++) {
          var y = l * k + v,
            K = (T - l - 1) * k + v,
            H = Z[y] * C;
          u[y] = 65535 * H;
        }
      if (f == 1) B.QZ(u, h);
      else B.ln(u, h, i);
    }
    return [{ Iu: new hk(0, 0, k, T), data: h, Le: n.OBJECT, depth: 16 }];
  };
  gh.YN = {};
  gh.YN.LN = function (j) {
    var q = new Uint8Array(j),
      m = 16,
      n = M.IH(q, m, 4),
      W = 32,
      x = 0,
      X = 0,
      $ = !1,
      e;
    m += 4;
    var G = M.IH(q, m, 8);
    m += 8;
    while (q[m + W - 1] == 0) W--;
    var k = M.IH(q, m, W);
    m += 32;
    var T = M.IH(q, m, 4);
    m += 4;
    m += 20;
    var b = M.Z$(q, m);
    m += 4;
    var c = M.Z$(q, m);
    m += 4;
    var a = M.Z$(q, m);
    m += 4;
    var f = M.Z$(q, m);
    m += 4;
    var U = M.Z$(q, m);
    m += 4;
    var Z = M.Z$(q, m);
    m += 4;
    var h = k,
      u = [0, 1, 1, 2];
    if (h == "X10") {
      h = "FinePix X10";
      u = [2, 1, 1, 0];
    }
    var i = {
      t271: ["FujiFilm"],
      t272: [h],
      t277: [1],
      t33421: [2, 2],
      t33422: u,
      J$: 1,
    };
    m = a;
    var H = [],
      C = M._h,
      l = M.Z$(q, m);
    m += 4;
    for (var y = 0; y < l; y++) {
      var v = C(q, m);
      m += 2;
      var K = C(q, m);
      m += 2;
      if (v == 256) {
        X = C(q, m);
        x = C(q, m + 2);
      } else if (v == 272) {
        H = [C(q, m), C(q, m + 2)];
      } else if (v == 273) {
        H.push(C(q, m), C(q, m + 2));
      } else if (v == 304) {
        $ = !(q[m] >>> 7);
      } else if (v == 305) {
        var S = Math.round(Math.sqrt(K)),
          o = [];
        for (var V = 0; V < K; V++) o.push(q[m + V]);
        o.reverse();
        i.t33421 = [S, S];
        i.t33422 = o;
      } else if (v == 12272) {
        var P = C(q, m),
          z = C(q, m + 2),
          E = C(q, m + 6);
        i.t50728 = [P / z, 1, P / E];
      }
      m += K;
    }
    var A = x < X,
      N = q.slice(U, U + Z),
      Q = Math.round((Z * 8) / (x * X));
    if (N[0] == 73 && N[1] == 73 && N[2] == 42) {
      e = UTIF.decode(N.buffer)[0].fujiIFD;
      Q = e.t61443[0];
      var Y = e.t61454,
        d = e.t61450;
      if (d) i.t50714 = d;
      if (Y) i.t50728 = [Y[0] / Y[1], 1, Y[0] / Y[2]];
      var I = e.t61447[0];
      N = N.slice(I, I + e.t61448[0]);
    }
    var Z = N.length,
      O = Z * 8 < x * X * Q;
    if (O) {
      console.log("compressed");
      var s = i.t33422,
        p = ~~Math.sqrt(s.length),
        F = [];
      for (var y = 0; y < p; y++) F[y] = s.slice(y * p, y * p + p);
      N = new Uint8Array(UTIF._decompressRAF(N, F).buffer);
      Z = N.length;
    }
    function g(dq, D, ha) {
      ha = ha << (8 - (D & 7));
      var am = D >>> 3;
      dq[am] |= ha >>> 16;
      dq[am + 1] |= ha >>> 8;
      dq[am + 2] |= ha;
    }
    var w = (Z * 8) / (x * X);
    if (w == 16)
      for (var y = 0; y < Z; y += 2) {
        var r = N[y];
        N[y] = N[y + 1];
        N[y + 1] = r;
      }
    else if (w == 14) {
      for (var y = 0; y < Z; y += 4) {
        var r = N[y];
        N[y] = N[y + 3];
        N[y + 3] = r;
        r = N[y + 1];
        N[y + 1] = N[y + 2];
        N[y + 2] = r;
      }
    } else if (w == 12)
      for (var y = 0; y < Z; y += 3) {
        var eQ = (N[y + 2] << 16) | (N[y + 1] << 8) | N[y + 0];
        eQ = (eQ >>> 12) | ((eQ & 4095) << 12);
        N[y] = (eQ >>> 16) & 255;
        N[y + 1] = (eQ >>> 8) & 255;
        N[y + 2] = eQ & 255;
      }
    if (A) N = gh.YN.ark(N, x, X);
    var t = A ? 2 : 1;
    x *= t;
    i.t256 = [x];
    i.t257 = [X];
    i.t258 = [Q];
    i.t50719 = [H[1], H[0] * t];
    i.t50720 = [H[3], H[2] * t];
    i.width = x;
    i.height = X;
    i.data = new Uint8Array(N.buffer);
    return [i];
  };
  gh.YN.ark = function (j, q, m) {
    j = new Uint16Array(j.buffer);
    var n = new Uint16Array(q * m * 2);
    for (var G = 0; G < m; G += 2)
      for (var W = 0; W < q; W++) {
        var k = G * q + W,
          T = k * 2,
          b = j[k],
          c = j[k + q];
        n[T + 1] = n[T + 2 * q] = c;
        if ((((G >>> 1) + W) & 1) == 0) {
          n[T] = b;
          n[T + 2 * q + 1] = j[k + 1];
        } else {
          n[T] = j[k - 1];
          n[T + 2 * q + 1] = b;
        }
      }
    return n;
  };
  gh.CJ = {};
  gh.CJ.ahP = function (j, q, m) {
    m = m << (8 - (q & 7));
    var n = q >>> 3;
    j[n] |= m >>> 16;
    j[n + 1] |= m >>> 8;
    j[n + 2] |= m;
  };
  gh.CJ.Qg = !0;
  gh.CJ.LN = async function (j, q, m, n) {
    var G = new Uint8Array(j),
      W = 0,
      k = Date.now(),
      T = await gi.VB(new Blob([j])),
      b = T.moov.uuid[0],
      c = new CR3Parser(j),
      a = c.getTrack().meta,
      f = b.CMT1[0],
      U = (f.t256[0] = a.width),
      Z = (f.t257[0] = a.height),
      h = U * Z,
      u = (f.exifIFD = b.CMT2[0]),
      i = (u.makerNote = b.CMT3[0]),
      x = T.moov.trak[3].mdia.minf.stbl,
      X = x.co64[0],
      $ = G.slice(X, X + x.stsz[0]),
      H = 0;
    while (H < $.length) {
      var C = M.YZ($, H);
      H += 4;
      var l = M.d9($, H);
      H += 2;
      var v = $[H] == 1;
      H += 2;
      H += 4;
      if (l == 8 || l == 9) {
        var K = UTIF.decode($.slice(H + 8, H + C - 12).buffer)[0];
        for (var S in K) i[S] = K[S];
      }
      H += C - 12;
    }
    f.t277 = [1];
    f.t33421 = [2, 2];
    f.t33422 = [0, 1, 1, 2];
    f.J$ = 1;
    if (f.t274) f.J$ = f.t274[0];
    var o = c.extractCFA(),
      V = a.bitDepth;
    if (V != 14) throw "e";
    f.t258 = [V];
    var P = new Uint8Array(Math.ceil((h * V) / 8)),
      z = 16 - V;
    for (var y = 0; y < h; y++) gh.CJ.ahP(P, y * 14, o[y] << z);
    f.width = U;
    f.height = Z;
    f.data = P;
    m(null, [f], n);
  };
  gh.g8 = {};
  gh.g8.KV = !0;
  gh.g8.Ev = function (j, q, m, n) {
    var G = new Uint8Array(j[0][0]),
      W = q * m,
      k = [1, 3, 4][n.cnum],
      T = 8 + 8 * n.dpth,
      b = n.endi;
    if (k == 1) {
      var c = new Uint8Array(q * m);
      B.Ih(G, c, 0);
      G = c;
    }
    if (k == 3) {
      var c = new Uint8Array(q * m * 3);
      for (var y = 0; y < W; y++) {
        var a = y * 4,
          f = y * 3;
        c[f] = G[a];
        c[f + 1] = G[a + 1];
        c[f + 2] = G[a + 2];
      }
      G = c;
    }
    if (T == 16) {
      var U = G.length,
        c = new Uint8Array(U * 2);
      for (var y = 0; y < U; y++) {
        var Z = Math.round(G[y] * (65535 / 255));
        c[y * 2 + b] = Z >>> 8;
        c[y * 2 + 1 - b] = Z & 255;
      }
      G = c;
    }
    return G.buffer;
  };
  gh.Yj = {};
  gh.Yj.LN = function (j) {
    if (j.buffer) j = j.buffer;
    var q = new Uint8Array(j),
      m = 4,
      n = M.YZ(q, m);
    m += 4;
    var G = {};
    m = gh.Yj.pw(q, m, G);
    var W = G.compression,
      k = G.channels,
      T = k.length,
      b = Date.now();
    if (W == 3 && T > 4) {
      var c = G.dataWindow,
        a = c[2] + 1,
        f = c[3] + 1,
        U = [];
      for (var Z = 0; Z < f; Z += 16) {
        var h = M.YZ(q, m + U.length * 8);
        U.push(h);
      }
      function u(r, z) {
        var E = 0,
          aF = r.length >>> 1;
        for (var y = 0; y < r.length; y += 2) {
          z[y] = r[E++];
          z[y + 1] = r[aF++];
        }
      }
      var i = [],
        x = {},
        X = [];
      for (var y = 0; y < k.length; y++) {
        var $ = k[y],
          H = $[0];
        if (H.indexOf(".") == -1) H = "main." + H;
        var C = H.split(".");
        while (C.length > 2) C[0] = C.shift() + "_" + C[0];
        var l = C[0],
          v = C[1];
        if (x[l] == null) {
          x[l] = i.length;
          var K = B.j(a * f * 4, 32);
          i.push(K);
          K.fill(255);
        }
        X.push([x[l], { R: 0, G: 1, B: 2, A: 3 }[v]]);
      }
      for (var y = 0; y < U.length; y++) {
        var S = U[y],
          Z = M.YZ(q, S),
          P;
        S += 4;
        var o = y == U.length - 1 ? f - Z : 16,
          V = M.YZ(q, S);
        S += 4;
        if (W == 3) {
          var P = new Uint8Array(o * a * T * 4);
          UZIP.inflateRaw(q.slice(S + 2, S + V), P);
          for (var z = 1; z < P.length; z++) {
            var E = P[z - 1] + P[z] - 128;
            P[z] = E;
          }
          var A = new Uint8Array(P.length);
          u(P, A);
          P = new Float32Array(A.buffer);
        }
        for (var N = 0; N < T; N++) {
          var Q = X[N],
            e = i[Q[0]],
            Y = Q[1];
          for (var d = 0; d < o; d++) {
            for (var I = 0; I < a; I++) {
              var O = ((d + Z) * a + I) * 4;
              e[O + Y] = P[d * (T * a) + N * a + I];
            }
          }
        }
      }
      var s = [];
      for (var H in x) {
        s.push({
          Iu: new hk(0, 0, a, f),
          data: i[x[H]].buffer,
          depth: 32,
          Pt: gh.$P.get("icc/srgb_lin"),
          Le: H,
        });
      }
      return s.reverse();
    } else {
      function p(f) {
        var r = (f & 32768) >> 15,
          eQ = (f & 31744) >> 10,
          t = f & 1023;
        if (eQ === 0) return (r ? -1 : 1) * 2 ** -14 * (t / 2 ** 10);
        if (eQ === 31) return t ? NaN : (r ? -1 : 1) * Infinity;
        return (r ? -1 : 1) * 2 ** (eQ - 15) * (1 + t / 2 ** 10);
      }
      var F = G.channels[0][1],
        g = EXRLoader.parse(j, 1015),
        a = g.width,
        f = g.height,
        e = B.j(a * f * 4, 32);
      for (var d = 0; d < f; d++)
        for (var I = 0; I < a; I++) {
          var y = (d * a + I) * 4,
            w = ((f - d - 1) * a + I) * 4;
          e[y] = g.data[w + 0];
          e[y + 1] = g.data[w + 1];
          e[y + 2] = g.data[w + 2];
          e[y + 3] = g.data[w + 3];
        }
      return [
        {
          Iu: new hk(0, 0, a, f),
          data: e.buffer,
          depth: 32,
          Pt: gh.$P.get("icc/srgb_lin"),
        },
      ];
    }
  };
  gh.Yj.Ev = function (j, q, m, n, G) {
    if (G == null) {
      G = {
        compression: 3,
        channels: [
          ["A", 2, 0, 1, 1],
          ["B", 2, 0, 1, 1],
          ["G", 2, 0, 1, 1],
          ["R", 2, 0, 1, 1],
        ],
      };
      G.dataWindow = G.displayWindow = [0, 0, q - 1, m - 1];
    }
    var W = j[0],
      k,
      T = Math.floor(W[0].byteLength / (q * m * 4)) * 8,
      a = 0,
      K = 0;
    if (T == 32) k = new Float32Array(W[0]);
    if (T == 16) k = B.sL(new Uint16Array(W[0]), 32);
    if (T == 8) k = B.sL(new Uint8Array(W[0]), 32);
    if (T == 8 || T == 16) {
      var b = B.qd;
      for (var y = 0; y < k.length; y += 4) {
        k[y] = b(k[y]);
        k[y + 1] = b(k[y + 1]);
        k[y + 2] = b(k[y + 2]);
      }
    }
    var c = new Uint8Array(5e3);
    M.kA(c, a, 20000630);
    a += 4;
    M.kA(c, a, 2);
    a += 4;
    a = gh.Yj.NU(c, a, G);
    function f(z, C) {
      var l = 0,
        aF = z.length >>> 1;
      for (var y = 0; y < z.length; y += 2) {
        z[l++] = C[y];
        z[aF++] = C[y + 1];
      }
    }
    var U = [];
    for (var Z = 0; Z < m; Z += 16) {
      var h = Math.min(16, m - Z),
        u = new Float32Array(h * q * 4);
      for (var i = 0; i < 4; i++)
        for (var x = 0; x < h; x++)
          for (var X = 0; X < q; X++) {
            var $ = ((x + Z) * q + X) * 4;
            u[x * (4 * q) + i * q + X] = k[$ + (3 - i)];
          }
      var H = new Uint8Array(u.buffer);
      u = new Uint8Array(H.length);
      f(u, H);
      for (var C = u.length - 1; C > 0; C--) {
        var l = u[C] - u[C - 1] + 128;
        u[C] = l;
      }
      var v = UZIP.deflate(u);
      U.push(v);
    }
    for (var y = 0; y < U.length; y++) K += U[y].length;
    var S = a + U.length * 16 + K,
      o = c;
    c = new Uint8Array(S);
    c.set(o, 0);
    var V = a + U.length * 8;
    for (var y = 0; y < U.length; y++) {
      M.kA(c, a, V);
      a += 8;
      V += 8 + U[y].length;
    }
    for (var y = 0; y < U.length; y++) {
      var P = U[y];
      M.kA(c, a, y * 16);
      a += 4;
      M.kA(c, a, P.length);
      a += 4;
      c.set(P, a);
      a += P.length;
    }
    return c;
  };
  gh.Yj.NU = function (j, q, m) {
    var n = {
        "Exif:ImageHistory": "string",
        Software: "string",
        capDate: "string",
        channels: "chlist",
        screenWindowCenter: "v2f",
        dataWindow: "box2i",
        displayWindow: "box2i",
        pixelAspectRatio: "float",
        screenWindowWidth: "float",
      },
      G = M.Sc,
      W = M.kA,
      k = M.H$;
    for (var T in m) {
      var b = n[T],
        c = m[T],
        a = 0;
      if (b == null) b = T;
      G(j, q, T);
      q += T.length + 1;
      G(j, q, b);
      q += b.length + 1;
      var f = q;
      q += 4;
      if (b == "box2i") {
        for (var y = 0; y < 4; y++) W(j, q + y * 4, c[y]);
        a = 16;
      } else if (b == "float") {
        k(j, q, c);
        a = 4;
      } else if (b == "v2f") {
        for (var y = 0; y < 2; y++) k(j, q + y * 4, c[y]);
        a = 8;
      } else if (b == "string") {
        G(j, q, c);
        a = c.length;
      } else if (b == "chlist") {
        var U = q;
        for (var y = 0; y < c.length; y++) {
          var Z = c[y];
          G(j, U, Z[0]);
          U += Z[0].length + 1;
          W(j, U, Z[1]);
          U += 4;
          W(j, U, Z[2]);
          U += 4;
          W(j, U, Z[3]);
          U += 4;
          W(j, U, Z[4]);
          U += 4;
        }
        a = U - q + 1;
      } else {
        j[q] = c;
        a = 1;
      }
      W(j, f, a);
      q += a;
    }
    q++;
    return q;
  };
  gh.Yj.pw = function (j, q, m) {
    function n(h, u) {
      var i = u;
      while (h[i] != 0) i++;
      return i - u;
    }
    while (j[q] != 0) {
      var G = M.IH(j, q, n(j, q));
      q += G.length + 1;
      var W = M.IH(j, q, n(j, q));
      q += W.length + 1;
      var k = M.YZ(j, q);
      q += 4;
      var T = j.slice(q, q + k);
      if (k == 1) T = j[q];
      else if (W == "box2i") {
        T = [];
        for (var y = 0; y < 4; y++) T.push(M.dq(j, q + 4 * y));
      } else if (W == "float") T = M.x5(j, q);
      else if (W == "v2f") {
        T = [];
        for (var y = 0; y < 2; y++) T.push(M.x5(j, q + 4 * y));
      } else if (W == "chlist") {
        var b = q;
        T = [];
        while (j[b] != 0) {
          var c = M.IH(j, b, n(j, b));
          b += c.length + 1;
          var a = M.YZ(j, b);
          b += 4;
          var f = j[b];
          b++;
          b += 3;
          var U = M.YZ(j, b);
          b += 4;
          var Z = M.YZ(j, b);
          b += 4;
          T.push([c, a, f, U, Z]);
        }
      } else if (W == "string") {
        T = M.IH(T, 0, T.length);
      } else console.log("-----", W);
      m[G] = T;
      q += k;
    }
    return q + 1;
  };
  gh.qP = {};
  gh.qP.LN = function (j, q) {
    var m = new Uint8Array(j),
      n = 0,
      G = [],
      W,
      k,
      T;
    while (!0) {
      var b = n;
      while (m[b] != 10 && b - n < 80 && m[b] < 128) b++;
      if (m[b] != 10) break;
      var c = M.IH(m, n, b - n);
      if (c.startsWith("-Y")) {
        var a = c.split(" ");
        k = parseInt(a[1]);
        W = parseInt(a[3]);
        T = B.j(W * k * 4);
      }
      n = b + 1;
    }
    var f = Date.now();
    gh.qP.ahY(m, T, n, W, k);
    var U = new Float32Array(W * k * 4),
      Z = [];
    for (var y = 0; y < 256; y++) Z[y] = (1 / 255) * Math.pow(2, y - 128);
    for (var y = 0; y < W * k; y++) {
      var h = y * 4,
        u = T[h + 3];
      if (u != 0) {
        var i = Z[u];
        U[h] = (T[h + 0] + 0.5) * i;
        U[h + 1] = (T[h + 1] + 0.5) * i;
        U[h + 2] = (T[h + 2] + 0.5) * i;
      }
      U[h + 3] = 1;
    }
    return [
      {
        Iu: new hk(0, 0, W, k),
        data: U.buffer,
        depth: 32,
        Pt: gh.$P.get("icc/srgb_lin"),
      },
    ];
  };
  gh.qP.ahY = function (j, q, m, n, G) {
    var W = new Int8Array(j.buffer);
    for (var k = 0; k < G; k++) {
      var T = k * n,
        b = W[m],
        c = W[m + 1],
        a = W[m + 2];
      m += 4;
      if (b == 2 && c == 2 && a >= 0) {
        for (var f = 0; f < 4; f++) {
          var U = T,
            Z = 0;
          while (Z < n) {
            var h = j[m];
            m++;
            if (h <= 128) {
              for (var y = 0; y < h; y++) {
                q[f + U * 4] = j[m];
                m++;
                U++;
              }
            } else {
              var u = j[m];
              m++;
              h -= 128;
              for (y = 0; y < h; y++) {
                q[f + U * 4] = u;
                U++;
              }
            }
            Z += h;
          }
        }
      } else {
        var U = T;
        for (var Z = 0; Z < n; Z++) {
          var b = 0,
            c = 0,
            a = 0,
            i = 0;
          if (Z > 0) {
            b = W[m];
            c = W[m + 1];
            a = W[m + 2];
            i = W[m + 3];
            m += 4;
          }
          if (b == 1 && c == 1 && a == 1) {
            console.log("doing a run");
            var h = i & 255,
              x = q[(U - 1) * 4],
              X = q[(U - 1) * 4 + 1],
              $ = q[(U - 1) * 4 + 2],
              H = q[(U - 1) * 4 + 3];
            for (y = 0; y < h; y++) {
              q[U * 4 + 0] = x;
              q[U * 4 + 1] = X;
              q[U * 4 + 2] = $;
              q[U * 4 + 3] = H;
              U += 1;
            }
            Z += h - 1;
          } else {
            q[U * 4 + 0] = j[m - 4];
            q[U * 4 + 1] = j[m - 3];
            q[U * 4 + 2] = j[m - 2];
            q[U * 4 + 3] = j[m - 1];
            U += 1;
          }
        }
      }
    }
  };
  gh.EW = {};
  gh.EW.KV = !0;
  gh.EW.k5 = !0;
  gh.EW.Ev = function (j, q, m, n, G) {
    n = { pags: "", qual: 100 };
    n.fmts = ["jpg"];
    var W = new ToDXF();
    gp.He(j, n, W, G.HS);
    return W.buffer;
  };
  gh.EW.LN = function (j, q) {
    var m = 72,
      n = new k$(1, 0, 0, 1, 0, 0);
    n.scale(m / 72, m / 72);
    q.zv = m;
    var G = new cT(q, n, !1);
    FromDXF.Parse(j, G);
  };
  gh.a7D = {};
  gh.a7D.LN = (function () {
    var j = M.d9,
      q = M.YZ,
      m = M.IH,
      n;
    function G(k, T, b, c, a) {
      var f = q(k, b),
        U = q(k, b + 4),
        Z = q(k, b + 8),
        h = j(k, b + 12),
        u = j(k, b + 14);
      b += 16;
      var i = {};
      for (var y = 0; y < h + u; y++) {
        var x = q(k, b),
          X = q(k, b + 4),
          $,
          H;
        if (x >>> 31 == 1) {
          x = x & 16777215;
        }
        if (y < h) $ = M.a5(k, T + x + 2, j(k, T + x));
        else $ = "id" + x;
        var C = c.slice(0);
        C.push($);
        if (X >>> 31 == 1) {
          X = X & 268435455;
          H = G(k, T, T + X, C, a);
        } else {
          var l = q(k, T + X),
            v = q(k, T + X + 4),
            K = q(k, T + X + 8),
            S = q(k, T + X + 12);
          if (S != 0) throw "e";
          if (l < a[0] || l > a[0] + a[1]) throw "e";
          var o = a[2] + l - a[0];
          H = k.slice(o, o + v);
          var V = gh.Qa(H.buffer);
          if (V && ["bmp", "png", "ico"].indexOf(V) != -1) {
            var P = gh.lj(V);
            if (!P.k5) {
              var z = null;
              try {
                z = P.LN(H.buffer);
              } catch (gn) {}
              if (z) {
                z[0].Le = C[1];
                n.push(z[0]);
              }
            }
          } else if (V) console.log(V);
        }
        i[$] = H;
        b += 8;
      }
      return i;
    }
    function W(k) {
      n = [];
      var T = new Uint8Array(k),
        b = 0,
        c = j(T, b);
      b += 2;
      b += 58;
      var a = q(T, b);
      b += 4;
      b = a;
      var f = m(T, b, 4);
      b += 4;
      var U = j(T, b);
      b += 2;
      var Z = j(T, b);
      b += 2;
      var h = q(T, b);
      b += 4;
      var u = q(T, b);
      b += 4;
      var i = q(T, b);
      b += 4;
      var x = j(T, b);
      b += 2;
      var X = j(T, b);
      b += 2;
      b += x;
      var $ = {};
      for (var y = 0; y < Z; y++) {
        var H = b;
        while (T[H] != 0) H++;
        var C = m(T, b, H - b),
          l = q(T, b + 8),
          v = q(T, b + 12),
          K = q(T, b + 16),
          S = q(T, b + 20),
          o = q(T, b + 24),
          V = q(T, b + 28),
          P = j(T, b + 32),
          z = j(T, b + 34),
          X = q(T, b + 36);
        $[C] = [v, l, S, K, X];
        if (o + V != 0) throw "e";
        b += 40;
      }
      for (var E in $) {
        var A = $[E];
        b = A[2];
        if (E == ".rsrc") {
          var N = G(T, b, b, [], A),
            Q = "id134";
        }
      }
      return n;
    }
    return W;
  })();
  gh.h7 = {};
  gh.h7.k5 = !0;
  gh.h7.LN = function (j, q, m) {
    if (m && m.length != 2) m = null;
    gg.VB(j, q, m);
  };
  gh.h7.Ev = function (j, q, m) {
    return gg.He(j);
  };
  (function () {
    var j = gh.$P.get("wasm/zstd").buffer;
    WebAssembly.instantiate(j).then(function (q) {
      var m = q.instance.exports;
      gh.h7.ahl = m;
    });
  })();
  gh.h7.md = function (j, q) {
    var m = gh.h7.ahl,
      n = j.length,
      G = m.memory,
      W = 2 * n + 1e6,
      b = 4;
    gh.I8(m, W);
    var k = new Uint8Array(G.buffer),
      T = m.malloc(n);
    k.set(j, T);
    while (!0) {
      var c = q == null ? n * b : q,
        a = gh.I8(m, W + c);
      if (a != 0) {
        alert(
          "This file is too bif for your browser (WASM memory grow breaks at " +
            bE.za(a) +
            ")",
          5e3
        );
        return null;
      }
      var f = m.malloc(c),
        U = m.ZSTD_decompress(f, c, T, n);
      if (U == -70) {
        m.free(f);
        b += b >>> 1;
        if (q != null) throw "error";
      } else {
        k = new Uint8Array(G.buffer);
        j = k.slice(f, f + U);
        m.free(f);
        break;
      }
    }
    m.free(T);
    return j;
  };
  gh.M$ = {};
  gh.M$.k5 = !0;
  gh.M$.LN = (function () {
    var j = 0,
      q = 1,
      m = 2,
      n = 3,
      G = 4,
      W = 5,
      k = 6,
      T = 7,
      b = 1,
      c = 2,
      a = 7,
      f = 8,
      U = 9,
      Z,
      h,
      u,
      i,
      x;
    function X() {
      var aF = M.dq(Z, h);
      h += 4;
      return aF;
    }
    function $() {
      var e = 0,
        Y = 0;
      for (var y = 0; y < 5; y++) {
        var d = Z[h++];
        e += (d & 127) << Y;
        Y += 7;
        if ((d & 128) == 0) break;
      }
      return e;
    }
    function H() {
      var e = $(),
        Y = M.K6(Z, h, e);
      h += e;
      return Y;
    }
    function C() {
      return { typeName: H(), aBZ: X() };
    }
    function l() {
      var e = X(),
        Y = H(),
        d = [],
        I = X();
      for (var y = 0; y < I; y++) d.push([H()]);
      return { id: e, eA: Y, aC8: d };
    }
    function v(e) {
      var Y = e.aC8,
        d = [];
      for (var y = 0; y < Y.length; y++) Y[y].push(Z[h++]);
      for (var y = 0; y < Y.length; y++) {
        var I = Y[y][1],
          O;
        Y[y].push(K(I));
      }
    }
    function K(e) {
      var Y;
      if (e == j) Y = Z[h++];
      else if (e == n) Y = H();
      else if (e == G) Y = C();
      else if (e == q || e == m || e == k || e == W) {
      } else throw e;
      return Y;
    }
    function S(e, Y, d) {
      var I;
      if (e == j) {
        if (Y == b) I = Z[h++] == 1;
        else if (Y == c) {
          I = Z[h++];
        } else if (Y == f) I = X();
        else if (Y == U) {
          I = X();
          X();
        } else throw Y;
      } else if (e == n) {
        I = z(d + 1);
      } else if (e == G) {
        I = z(d + 1);
      } else if (e == W) {
        I = z(d + 1);
      } else if (e == q) {
        I = z(d + 1);
      } else if (e == k) {
        I = z(d + 1);
      } else if (e == m) {
        I = z(d + 1);
      } else throw e;
      return I;
    }
    function o(e, Y) {
      var d = u["c" + e],
        I = d.aC8,
        O = { _class: d.eA };
      for (var y = 0; y < I.length; y++) {
        var s = I[y],
          p = s[1],
          F = s[2],
          g = S(p, F, Y),
          w = s[0];
        O[w] = g;
      }
      return O;
    }
    function V(e, Y, d, I) {
      var O = [];
      for (var y = 0; y < e; y++) {
        var s = S(Y, d, I);
        if (s.t && s.t == "null_count") {
          var p = s.YF;
          for (var F = 0; F < p; F++) O.push(null);
          y += p - 1;
        } else O.push(s);
      }
      return O;
    }
    function P() {
      return [X(), X()];
    }
    function z(e) {
      if (e == null) throw "e";
      var Y = null,
        d = Z[h],
        I = null;
      h++;
      if (d == 0) {
        var O = X(),
          s = X(),
          p = X(),
          F = X();
        Y = [O, s, p, F];
      } else if (d == 1) {
        I = X();
        var g = X();
        Y = o(g, e);
      } else if (d == 4) {
        var w = l();
        I = w.id;
        v(w);
        u["c" + w.id] = w;
        Y = o(w.id, e);
      } else if (d == 5) {
        var w = l();
        I = w.id;
        v(w);
        var r = X();
        u["c" + w.id] = w;
        Y = o(w.id, e);
      } else if (d == 6) {
        I = X();
        var eQ = H();
        Y = eQ;
      } else if (d == 7) {
        I = X();
        var t = Z[h++];
        if (t != 0) throw t;
        var dq = X();
        if (dq != 1) throw dq;
        var D = X(),
          ha = Z[h++],
          am = K(ha);
        Y = V(D, ha, am, e);
      } else if (d == 9) {
        var k4 = X();
        Y = { t: "ref", YF: k4 };
        x["o" + k4] = !0;
      } else if (d == 10) {
        Y = { t: "null_count", YF: 1 };
      } else if (d == 11) {
        Y = { t: "end" };
      } else if (d == 12) {
        var r = X(),
          aA = H();
      } else if (d == 13) {
        var ex = Z[h++];
        Y = { t: "null_count", YF: ex };
      } else if (d == 16) {
        var ac = P();
        I = ac[0];
        Y = V(ac[1], G, null, e);
      } else if (d == 17) {
        var ac = P();
        I = ac[0];
        Y = V(ac[1], q, null, e);
      } else throw "e";
      if (I != null && I > 0) {
        if (i["o" + I] != null) throw "e";
        i["o" + I] = Y;
      }
      return Y;
    }
    function E(e, i) {
      if (e instanceof Array) {
        for (var y = 0; y < e.length; y++) e[y] = A(e[y], i);
      } else if (e instanceof Object) {
        for (var Y in e) e[Y] = A(e[Y], i);
      }
    }
    function A(e, i) {
      if (e && e.t && e.t == "ref") return i["o" + e.YF];
      else return e;
    }
    function N(e, Y, d) {
      var I = Date.now();
      Z = new Uint8Array(e);
      h = 0;
      u = {};
      i = {};
      x = {};
      var O = M.IH(Z, 0, 4);
      if (O != "PDN3") throw O;
      h += 4;
      var s = M.d9(Z, h) + Z[h + 2] * 256 * 256;
      h += 3;
      var p = M.IH(Z, h, s);
      h += s;
      h += 2;
      while (!0) {
        var F = z(0);
        if (F && F.t && F.t == "end") break;
      }
      for (var g in x) if (i[g] == null) throw g;
      for (var g in i) E(i[g], i);
      var w = i.o1;
      console.log(w);
      Y.r = w.width;
      Y.$ = w.height;
      Y.buffer = B.j(Y.r * Y.$ * 4);
      var r = w.layers["ArrayList+_items"];
      for (var y = 0; y < r.length; y++) {
        var eQ = r[y];
        if (eQ == null) continue;
        var t = eQ["Layer+width"],
          dq = eQ["Layer+height"],
          D = eQ["Layer+properties"],
          ha = eQ.properties,
          am = ha.blendOp._class.split("+").pop();
        am = am.slice(0, am.length - 7);
        var k4 = {
            Normal: "norm",
            Multiply: "mul ",
            Additive: "lddg",
            ColorBurn: "idiv",
            ColorDodge: "div ",
            Reflect: "lddg",
            Glow: "hMix",
            Overlay: "over",
            Difference: "diff",
            Negation: "smud",
            Lighten: "lite",
            Darken: "dark",
            Screen: "scrn",
            Xor: "smud",
          }[am],
          aA = Y.dj();
        aA.tV(D.name);
        aA.yA = D.opacity;
        aA.xg(D.visible);
        aA.hz = k4;
        if (Z[h] != 0) throw "e";
        h++;
        var ex = M.Z$(Z, h);
        h += 4;
        var ac = Math.ceil((t * dq * 4) / ex);
        aA.H = new hk(0, 0, t, dq);
        var eJ = (aA.buffer = B.j(t * dq * 4));
        for (var h$ = 0; h$ < ac && h < Z.length; h$++) {
          var da = Q();
          eJ.set(da[1], da[0] * ex);
        }
        for (var bb = 0; bb < eJ.length; bb += 4) {
          var gb = eJ[bb + 0];
          eJ[bb + 0] = eJ[bb + 2];
          eJ[bb + 2] = gb;
        }
        Y.U.push(aA);
      }
    }
    function Q() {
      var e = M.Z$(Z, h);
      h += 4;
      var Y = M.Z$(Z, h);
      h += 4;
      h += 10;
      Y -= 10;
      var d = pako.inflateRaw(Z.slice(h, h + Y));
      h += Y;
      return [e, d];
    }
    return N;
  })();
  gh.xj = {};
  gh.xj.k5 = !0;
  gh.xj.LN = function (j, q) {
    d1.VB(j, q);
  };
  gh.eH = {};
  gh.eH.k5 = !0;
  gh.eH.LN = (function () {
    var j,
      q,
      i = null,
      v,
      K;
    function m() {
      var N = j[q];
      q += 1;
      return N;
    }
    function n() {
      var N = M._h(j, q);
      q += 2;
      return N;
    }
    function G() {
      var N = M.Z$(j, q);
      q += 4;
      return N;
    }
    function W() {
      var N = M.dW(j, q);
      q += 4;
      return N;
    }
    function k() {
      var N = M.K_(j, q);
      q += 8;
      return N;
    }
    function T() {
      var N = G();
      if (N > 200) throw N;
      var Q = M.Jz(j, q, N);
      q += N * 2;
      return Q;
    }
    function b() {
      var N = M.ro(j, q);
      q += 8;
      return N;
    }
    function c() {
      var N = M.$C(j, q);
      q += 4;
      return N;
    }
    function a() {
      var N = G();
      if (G() != 4) throw "e";
      var Q = [];
      for (var y = 0; y < N; y++) Q.push(G());
      return Q;
    }
    function f(N, Q, e) {
      for (var y = 0; y < N.length; y++) if (N[y][Q] == e) return N[y];
    }
    function U(N, Q) {
      var e = Date.now();
      j = new Uint8Array(N);
      q = M.Gf(j, "CH" + "NK" + "SQ" + "Li") + 8;
      var Y = k(),
        d = dv.parse(j.buffer.slice(q, q + Y)),
        I = dv.aan(d, !0);
      console.log(I);
      var O = I.Canvas[0],
        s = O.Width,
        p = O.Height,
        F = O.Unit,
        g = (Q.zv = O.Resolution);
      if (F == 0) {
      } else if (F == 1) {
        s = Math.round((s * g) / 2.54);
        p = Math.round((p * g) / 2.54);
      } else if (F == 2) {
        s = Math.round((s * g) / 25.4);
        p = Math.round((p * g) / 25.4);
      } else if (F == 3) {
        s = Math.round(s * g);
        p = Math.round(p * g);
      } else if (F == 5) {
        s = Math.round((s * g) / 72);
        p = Math.round((p * g) / 72);
      } else {
        console.log(O);
        throw F;
      }
      Q.r = s;
      Q.$ = p;
      Q.buffer = B.j(s * p * 4);
      console.log(Date.now() - e);
      var w = f(I.Layer, "MainId", O.RootFolder);
      P(I, j, Q, w.FirstChildIndex, 0);
      console.log(Date.now() - e);
    }
    function Z() {
      var N = M.d9(j, q);
      q += 2;
      return N;
    }
    function h() {
      var N = M.YZ(j, q);
      q += 4;
      return N;
    }
    function u() {
      var N = M.dq(j, q);
      q += 4;
      return N;
    }
    function x(N) {
      var Q = {
          11: "runs",
          31: "font",
          32: "size",
          33: "unit",
          34: "colr",
          42: "bbox",
          57: "fnts",
          63: "bdim",
          64: "bplg",
        },
        Y = 0;
      j = N;
      q = 0;
      var e = {};
      while (q < j.length) {
        var d = h(),
          I = h(),
          O = q + I;
        if (I == 0) continue;
        var s = [];
        if (d == 11) {
          var p = h();
          for (var F = 0; F < p; F++) {
            var g = [h(), h()];
            s.push(g);
            Y += g[1];
            var w = q + h() - 4;
            g.push(Z(), Z(), Z(), Z());
            g.push(M.NR(j, q));
            q += 8;
            var r = Z();
            g.push(M.a5(j, q, r));
            q += r * 2;
            if (q != w) throw "e";
          }
        } else if (d == 31) {
          s = M.K6(j, q, I);
          q += I;
        } else if (d == 34) for (var y = 0; y < 3; y++) s.push(h() >>> 16);
        else if (d == 42) for (var y = 0; y < 4; y++) s.push(u());
        else if (
          [
            32, 33, 35, 37, 38, 43, 44, 45, 46, 48, 49, 50, 51, 52, 53, 55, 58,
            59, 60, 61, 62,
          ].indexOf(d) != -1
        ) {
          if (I != 4) throw "e";
          s = h();
          if ([37, 45, 46, 51, 53, 55, 61, 62].indexOf(d) != -1) {
            q = O;
            continue;
          }
        } else if (d == 47) {
          var eQ = Z();
          if (h() != 50) throw "e";
          if (h() != 0) throw "e";
          var t = Z();
          s = M.IH(j, q, t);
          q += t;
        } else if (d == 57) {
          var p = Z();
          for (var y = 0; y < p; y++) {
            var dq = Z(),
              D = M.IH(j, q, dq);
            q += dq;
            var ha = Z(),
              am = M.IH(j, q, ha);
            q += ha;
            s.push([D, am]);
          }
          if (q < O) {
            var k4 = h();
            for (var y = 0; y < p; y++) s[y].push(k4);
          }
        } else if (d == 39 || d == 63) s.push(h(), h());
        else if (d == 64) {
          for (var y = 0; y < 8; y++) s.push(M.dq(j, q + y * 4) / 100);
          q += 32;
        } else {
          s = j.slice(q, O);
          q += I;
        }
        var aA = Q[d];
        if (aA == null) aA = "t" + d;
        if (e[aA]) throw "e";
        e[aA] = s;
        if (q != O) throw d;
      }
      if (i) {
      }
      i = e;
      return e;
    }
    function X(N) {
      j = N;
      q = 0;
      var Q = G();
      if (Q != N.length) throw "e";
      var e = G(),
        Y = T(),
        d = G(),
        I = b(),
        O = [G() / 4294967295, G() / 4294967295, G() / 4294967295];
      return [d, I, O];
    }
    function $(N, Q) {
      function e() {
        var i5 = [];
        for (var y = 0; y < 4; y++) i5.push(M.dW(j, q + y * 4));
        q += 16;
        return i5;
      }
      function Y(aF) {
        var i5 = [];
        for (var y = 0; y < aF; y++) i5.push(c());
        return i5;
      }
      function d(i5) {
        var aI = "";
        for (var y = q; y < i5; y += 4)
          aI += j.slice(y, y + 4).join(", ") + "\n";
        return aI;
      }
      j = N;
      q = Q + 8;
      var I = k(),
        O = q + I;
      q += 56;
      if (q == O) return;
      var s = [],
        p = [],
        F = [],
        g = [],
        w = [];
      while (q < O) {
        var r = G(),
          eJ = 1;
        if (r != 88 && r != 92 && r != 96 && r != 100) throw r;
        var eQ = G();
        if (eQ != 72 && eQ != 76) throw eQ;
        var t = G();
        if (t != 88 && t != 104 && t != 120) throw t;
        var dq = G();
        if (dq != 88) throw dq;
        var D = G(),
          ha = G(),
          am = e(),
          k4 = [];
        F.push(k4);
        for (var y = 0; y < 6; y++) {
          k4.push(H(G()));
        }
        var aA = b();
        if (eQ == 76) G();
        var ex = G();
        if ((ha & 1) == 0) {
          console.log("8 extra bytes");
          G();
          ex = G();
        }
        var ac = b();
        g.push(ac);
        var h$ = G(),
          da = (ha & 256) != 0,
          bb = [],
          gb = [],
          fM = { 88: 1, 104: 2, 120: 3 }[t];
        for (var y = 0; y < D; y++) {
          var kS = y == 0 ? 1 : fM;
          for (var cY = 0; cY < kS; cY++) bb.push(b(), b());
          gb.push(kS == 1 ? (y == 0 ? "M" : "L") : kS == 2 ? "Q" : "C");
          var cS = e(),
            k3 = G();
          eJ = c();
          var di = Y(10),
            a7 = G(),
            b0 = G();
        }
        w.push(eJ);
        if (t == 104) {
          var e1 = b(),
            l2 = b();
          if (da) {
            gb.push("Q");
            bb.push(e1, l2, bb[0], bb[1]);
          }
        }
        if (t == 120) {
          var e1 = b(),
            l2 = b(),
            kL = b(),
            es = b();
          if (da) {
            gb.push("C");
            bb.push(e1, l2, kL, es, bb[0], bb[1]);
          }
        }
        if (ha & 128) {
          var kR = ["M"],
            eH = [bb[0], bb[1]],
            cZ = bb.length >>> 1,
            ga = B.b.aIX(bb);
          for (var y = 0; y < cZ; y++) {
            var fi = bb[2 * y],
              go = bb[2 * y + 1],
              iz = 0.7;
            for (var cY = 0; cY < 2; cY++) {
              ga[y * 4 + cY * 2] = iz * ga[y * 4 + cY * 2] + (1 - iz) * fi;
              ga[y * 4 + cY * 2 + 1] =
                iz * ga[y * 4 + cY * 2 + 1] + (1 - iz) * go;
            }
          }
          for (var y = 1; y < cZ; y++) {
            kR.push("C");
            eH.push(
              ga[y * 4 - 2],
              ga[y * 4 - 1],
              ga[y * 4],
              ga[y * 4 + 1],
              bb[y * 2],
              bb[y * 2 + 1]
            );
          }
          if (da) {
            kR.push("C");
            eH.push(ga[cZ * 4 - 2], ga[cZ * 4 - 1], ga[0], ga[1], bb[0], bb[1]);
          }
          bb = eH;
          gb = kR;
        }
        if (da) gb.push("Z");
        p = p.concat(bb);
        s = s.concat(gb);
      }
      if (q != O) throw "e";
      return [{ L: p, RC: s }, F, g, w];
    }
    function H(N) {
      return Math.min(255, Math.round(N / 16777216));
    }
    function C(N) {
      j = N;
      q = 0;
      var Q = G();
      if (Q != 16) throw Q;
      var e = G();
      if (e != 102) throw e;
      var Y = G();
      if (Y != 42 && Y != 58) throw Y;
      var d = G();
      if (N.length - d != 118 + Y) throw N.length - d;
      var I = T();
      if (I != "Parameter") throw I;
      var O = G(),
        s = G(),
        p = G(),
        F = G(),
        g = [];
      for (var y = 0; y < 16; y++) g.push(G());
      var I = T();
      if (I != "InitColor") throw I;
      if (G() != 20) throw "e";
      var w = G(),
        r = G(),
        eQ = G();
      if (G() != 4) throw "e";
      if (Y == 58) {
        var t = [];
        g.push(t);
        for (var y = 0; y < 4; y++) t.push(H(G()));
      }
      var I = T();
      if (I != "BlockSize") throw I;
      var dq = G();
      if (dq != 12) throw dq;
      var D = a();
      if (q != j.length) throw "e";
      return [O, s, p, F, w * 255, g];
    }
    function l(N, Q) {
      var e = M.IH(Q, 0, 40),
        Y = f(N["ExternalC" + "hunk"], "Exte" + "rnalID", e);
      if (Y == null) {
        console.log("chnk not found", e);
      }
      return Y ? Y.Offset : -1;
    }
    function S(N, Q, e, Y) {
      if (v == null) {
        v = B.j(256 * 256 * 4);
        K = B.j(256 * 256);
      }
      var d = N.Mipmap,
        I = N.MipmapInfo,
        O = N.Offscreen,
        s = f(d, "MainId", e),
        p = f(I, "MainId", s.BaseMipmapInfo),
        F = f(O, "MainId", p.Offscreen),
        g = l(N, F.BlockData),
        U = null;
      if (g == -1) return null;
      var w = gh.eH.adq(Q, g),
        r = C(F.Attribute),
        eQ = r[0],
        t = r[1],
        dq = r[2],
        D = r[3],
        ha = r[4],
        am = r[5],
        k4 = am[16],
        aA = am[1],
        ex = am[2],
        ac = aA + ex;
      if (ex != am[5]) throw "e";
      if (aA != am[7]) throw "e";
      var eJ = B.j(256 * (am[6] + am[8])),
        h$ = new hk();
      if (k4) h$ = new hk(0, 0, eQ, t);
      else {
        for (var da = 0; da < D; da++)
          for (var bb = 0; bb < dq; bb++) {
            var gb = w[da * dq + bb];
            if (gb.length == 0) continue;
            h$ = h$.vd(new hk(bb << 8, da << 8, 256, 256));
          }
      }
      var fM = h$.TM(new hk(0, 0, eQ, t)),
        kS = B.j(fM.C() * (ac == 1 ? 1 : 4));
      if (k4) B.bs(kS, (255 << 24) | (k4[0] << 16) | (k4[1] << 8) | k4[2]);
      if (ac == 1) kS.fill(ha);
      var cY = new Uint32Array(v.buffer),
        cS = {};
      for (var da = 0; da < D; da++)
        for (var bb = 0; bb < dq; bb++) {
          var gb = w[da * dq + bb];
          if (gb.length == 0) continue;
          var k3 = new Uint8Array(gb.buffer, gb.byteOffset + 2, gb.length - 6),
            di = new hk(bb << 8, da << 8, 256, 256),
            a7 = eJ;
          if (k3.length < 2e3) {
            var e =
              k3.length + "," + eJ.length + "," + k3.slice(0, 16).join(":");
            if (cS[e] == null) {
              UZIP.inflateRaw(k3, eJ);
              cS[e] = eJ.slice(0);
            }
            a7 = cS[e];
          } else UZIP.inflateRaw(k3, eJ);
          if (ac == 1) {
            if (am[8] == 32) {
              o(a7, 0, K);
              B.sN(K, di, kS, fM);
            } else B.sN(a7, di, kS, fM);
          } else if (ac == 2) {
            if (am[8] == 32) {
              B.bs(v, 267387135);
              o(a7, 0, K);
              B.ln(K, v, 3);
              o(a7, 256 * 32, K);
              B.QZ(K, v);
            } else
              for (var y = 0; y < 262144; y += 4) {
                var k4 = a7[65536 + (y >>> 2)];
                v[y] = k4;
                v[y + 1] = k4;
                v[y + 2] = k4;
                v[y + 3] = a7[y >>> 2];
              }
            B.M4(v, di, kS, fM);
          } else if (ac == 5) {
            for (var y = 0; y < 262144; y += 4) {
              cY[y >>> 2] =
                (a7[y >>> 2] << 24) |
                (a7[65536 + y + 0] << 16) |
                (a7[65536 + y + 1] << 8) |
                a7[65536 + y + 2];
            }
            B.M4(v, di, kS, fM);
          } else throw ac;
        }
      if (Y && ac == 1) {
        var b0 = B.j(eQ * t * 4);
        B.ln(kS, b0, 3);
        kS = b0;
      }
      return [fM, kS, ha];
    }
    function o(N, q, Q) {
      for (var y = 0; y < Q.length; y++) {
        Q[y] = ((N[q + (y >>> 3)] >>> (7 - (y & 7))) & 1) * 255;
      }
    }
    var V = [
      "norm",
      "dark",
      "mul ",
      "idiv",
      "lbrn",
      null,
      "dkCl",
      "lite",
      "scrn",
      "div ",
      "div ",
      "lddg",
      "lddg",
      null,
      "over",
      "sLit",
      "hLit",
      "vLit",
      "lLit",
      "pLit",
      null,
      null,
      "smud",
      null,
      null,
      null,
      null,
      null,
      null,
      null,
      "pass",
      null,
      null,
      null,
      null,
      null,
      "fdiv",
    ];
    function P(N, Q, e, Y, d) {
      var I = N.Layer,
        O = N.Canvas[0];
      while (Y != 0) {
        var s = f(I, "MainId", Y),
          p = s.Type,
          dq = !1;
        console.log(s);
        var F = e.dj();
        F.tV(s.Name);
        F.yA = Math.min(255, s.Opacity);
        F.xg((s.Visibility & 1) != 0);
        F.hz = V[s.Composite];
        if (F.hz == null) {
          alert("Unknown blend mode " + s.Composite);
          F.hz = "norm";
        }
        F.Yx = s.Clip == 1;
        e.U.push(F);
        var g = s.LayerMaskMipmap;
        if (g != 0) {
          var w = S(N, Q, g, !1);
          if (w) {
            F.x7 = new R.T0();
            F.x7.H = w[0];
            F.x7.N = w[1];
            F.x7.color = w[2];
            z(F.x7.H, s, "Mask", "Mask");
            F.x7.yy();
          }
        }
        var r = [];
        for (var y = 0; y < 3; y++)
          r.push(H(s["DrawColorMain" + ["Red", "Green", "Blue"][y]]));
        var eQ = { t: "Objc", v: B.MV.Ia({ o: r[0], i: r[1], X: r[2] }) },
          t = JSON.parse(eu.default);
        for (var y = 0; y < eu.order.length; y++)
          t[eu.C$[y]] = { t: "VlLs", v: [] };
        if (s.DrawColorEnable == 1 && p != 1584) {
          dq = !0;
          var D = JSON.parse(eu.oy[eu.order.indexOf("SoFi")]);
          D.Clr = eQ;
          t.solidFillMulti.v.push({ t: "Objc", v: D });
        }
        if (s.EffectInfo) {
          var ha = X(s.EffectInfo),
            r = ha[2];
          if (ha[0] == 1) {
            dq = !0;
            var D = JSON.parse(eu.oy[eu.order.indexOf("FrFX")]);
            D.Clr.v = B.MV.Ia({ o: r[0] * 255, i: r[1] * 255, X: r[2] * 255 });
            D.Sz.v.val = Math.round(ha[1]);
            t.frameFXMulti.v.push({ t: "Objc", v: D });
          }
        }
        if (s.FilterLayerInfo) {
          j = s.FilterLayerInfo;
          q = 0;
          var am = G(),
            k4 = G();
          if (k4 != j.length - q) throw "e";
          var aA = {
            1: "brit",
            3: "curv",
            4: "hue2",
            5: "blnc",
            6: "nvrt",
            9: "grdm",
          }[am];
          if (aA != null) {
            var ex = k0.i4(aA);
            F.add[aA] = ex ? ex : {};
            if (aA == "brit") k0.Bf["g" + aA](ex, [W(), W(), !0]);
            if (aA == "hue2") b$.Cy(ex, 0, [W(), W(), W()]);
            if (aA == "curv") {
              var ac = [],
                eJ = q;
              for (var y = 0; y < 32; y++) {
                q = eJ + y * 130;
                var h$ = n(),
                  da = [];
                ac.push(da);
                for (var bb = 0; bb < h$; bb++)
                  da.push(n() / 65535, n() / 65535);
              }
              for (var y = 0; y < 4; y++) {
                var da = ac[y],
                  gb = fY.Lq(ex, y),
                  fM = gb[0];
                for (var bb = 0; bb < da.length; bb += 2) {
                  var kS = (gb[bb >>> 1] = B.S(fM));
                  kS.v.Hrzn.v = Math.round(da[bb] * 255);
                  kS.v.Vrtc.v = Math.round(da[bb + 1] * 255);
                }
                fY.Cy(ex, y, gb);
              }
            }
            if (aA == "grdm") {
              var cY = ex.Grad.v,
                cS = [],
                k3 = G();
              if (k3 != k4 - 4) throw k3;
              var di = G();
              if (di != 16 && di != 24) throw di;
              var a7 = G();
              if (a7 != 28) throw a7;
              var b0 = G();
              for (var y = 0; y < b0; y++) {
                var e1 = 0,
                  l2 = [];
                for (var bb = 0; bb < 7; bb++) l2.push(G());
                cS.push([
                  l2[6] / 32768,
                  [l2[1] / 4294967295, l2[2] / 4294967295, l2[3] / 4294967295],
                  l2[4] / 4294967295,
                ]);
              }
              B.MV.gB(cS, cY);
            }
            if (aA == "blnc") {
              ex.PrsL.v = G() == 1;
              for (var y = 0; y < 3; y++) {
                var kL = ex[["ShdL", "MdtL", "HghL"][y]].v;
                for (var bb = 0; bb < 3; bb++) kL[bb].v = W();
              }
            }
          } else console.log("Unknown adjustment", am, k4, F.getName());
        }
        if (p == 1584) {
          F.uZ |= 16;
          F.add.SoCo = { classID: "null", Clr: eQ };
          F.D5(e);
        } else if (p == 800) {
          e.U.pop();
        } else if (s.Folder != 0) {
          F.add.lsct = (s.Folder & 16) != 0 ? hQ.z$ : hQ.WR;
          F.hz = "pass";
          e.U.pop();
          e.U.push(e.to());
          P(N, Q, e, s.FirstChildIndex, d + 1);
          e.U.push(F);
        } else if (p == 0 || p == 1 || p == 2 || p == 3) {
          var w = S(N, Q, s.RenderMipmap, !0);
          if (w) {
            F.H = w[0];
            F.buffer = w[1];
            z(F.H, s, "Render", "");
            if (F.H.C() < 2e6) F.yy();
          }
          if (s.ResizableOriginalMipmap) {
            var es = S(N, Q, s.ResizableOriginalMipmap, !0),
              kR = es[0],
              eH;
            if (kR.C() > 4e6) eH = gh.Xp.S4(es[1].buffer, kR.r, kR.$);
            else eH = gh.lj("PNG").Ev([[es[1].buffer, 0]], kR.r, kR.$);
            var cZ = e.Pi(new Uint8Array(eH), F.getName(), 0, 0);
            F.add.SoLd = cZ.add.SoLd;
            F.buffer = cZ.buffer;
            F.H = cZ.H;
            j = s.ResizableImageInfo;
            q = 0;
            var ga = [];
            for (var y = 0; y < 10; y++) ga.push(G());
            var fi = [];
            for (var y = 0; y < 7; y++) fi.push(b());
            for (var y = 0; y < 6; y++) ga.push(G());
            var go = [];
            for (var y = 0; y < 8; y++) go.push(b());
            var iz = go[4];
            go[4] = go[6];
            go[6] = iz;
            iz = go[5];
            go[5] = go[7];
            go[7] = iz;
            for (var y = 0; y < 8; y += 2) {
              go[y] += s.OffsetX;
              go[y + 1] += s.OffsetY;
            }
            F.add.SoLd.Trnf = L.Dq.be(go);
            F.add.SoLd.nonAffineTransform = L.Dq.be(go);
            if (F.Iw() || B.b.RD(go).C() < 1e8) F.yZ(e, !1);
          }
          if (s.TextLayerType != null) {
            var i5 = "TextLayerString",
              aI = "TextLayerAttributes",
              bs = [s[i5]],
              k2 = [s[aI]];
            if (s[i5 + "Array"]) {
              j = s[i5 + "Array"];
              q = 0;
              while (q < j.length) {
                var k4 = h();
                bs.push(j.slice(q, q + k4));
                q += k4;
              }
              j = s[aI + "Array"];
              q = 0;
              while (q < j.length) {
                var k4 = h();
                k2.push(j.slice(q, q + k4));
                q += k4;
              }
            }
            var jG = F;
            e.U.pop();
            for (var eW = 0; eW < bs.length; eW++) {
              var F = jG.P(),
                c2 = 0,
                f9 = 0;
              e.U.push(F);
              var gc = x(k2[eW]),
                k1 = gc.runs,
                ke = gc.fnts,
                jh = gc.bplg,
                cE = gc.bbox,
                cy = cE[2] - cE[0],
                hl = cE[3] - cE[1];
              if (jh) {
                c2 = jh[2] - jh[0];
                f9 = jh[3] - jh[1];
              }
              var hu = new k$();
              hu.translate(-cy / 2, -hl / 2);
              hu.rotate(Math.atan2(-f9, c2));
              hu.translate(cy / 2, hl / 2);
              var le = cE[0] + s.OffsetX,
                iJ = cE[1] + s.OffsetY;
              hu.translate(le, iJ);
              F.add.lnsr = "rend";
              F.add.TySh = al.wD(0, 0);
              F.add.TySh.AF = new hk(0, 0, 500, 500);
              F.add.TySh.u = hu;
              var dZ = F.add.TySh.s3,
                kd = M.K6(bs[eW]);
              F.tV(kd);
              al.Fk(dZ, 0, kd);
              al.cj(dZ, 1);
              al.ms(dZ, [0, 0, cy, hl]);
              if (k1)
                for (var y = 0; y < k1.length; y++) {
                  var bC = k1[y],
                    ev = bC[0],
                    ak = ev + bC[1],
                    gD = bC[2],
                    a9 = al.vJ(dZ, ev, ak),
                    kk = ((e.zv / 72) * gc.size) / 100;
                  if ((gD & 512) != 0) kk *= bC[6] / 100;
                  a9.K2.FontSize = Math.round(kk);
                  var eQ = (gD & 256) != 0 ? bC.slice(3) : gc.colr;
                  a9.K2.FillColor = {
                    Type: 1,
                    Values: [1, eQ[0] / 65535, eQ[1] / 65535, eQ[2] / 65535],
                  };
                  var kX = bC[7] == "" ? gc.font : bC[7];
                  if (ke) {
                    if (ke[y]) kX = ke[y][1];
                    else
                      for (var bb = 0; bb < ke.length; bb++)
                        if (ke[bb][0] == kX) kX = ke[bb][1];
                  }
                  al.gk(a9, kX);
                  al.jD(dZ, ev, ak, a9);
                }
              if (F.H.C() == 0) e.c4 = !0;
              else {
                F.H = new hk(le, iJ, cy, hl);
                F.buffer = B.j(F.H.C() * 4);
                B.M4(jG.buffer, jG.H, F.buffer, F.H);
              }
            }
          }
        }
        var kc = N.VectorObjectList;
        if (s.VectorNormalType != null && kc && f(kc, "LayerId", Y)) {
          var ew = f(kc, "LayerId", Y).VectorData,
            gS = l(N, ew),
            hp = $(Q, gS);
          if (hp) {
            var g2 = null;
            if (F.add.TySh) {
              var g2 = F.P();
              e.U.push(g2);
              delete F.add.TySh;
            }
            E(F, s, hp[0]);
            if (F.D1()) {
              F.uZ |= 24;
              var cZ = e.dj();
              cZ.tV(F.getName());
              cZ.yA = F.yA;
              e.U.push(cZ);
              E(cZ, s, hp[0]);
              A(cZ, hp);
              cZ.D5(e);
            } else {
              A(F, hp, g2 != null);
            }
            F.D5(e);
            if (g2) {
              g2.add.TySh.u.concat(
                new k$(1, 0, 0, 1, F.H.x + F.H.r / 2, F.H.y + F.H.$ / 2)
              );
            }
          }
        }
        if (dq) F.add.lmfx = t;
        if (Y == O.CurrentLayer) e.J = [e.U.indexOf(F)];
        Y = s.NextIndex;
      }
    }
    function z(N, Q, e, Y) {
      N.x += Q[e + "OffscrOffsetX"] + Q[Y + "OffsetX"];
      N.y += Q[e + "OffscrOffsetY"] + Q[Y + "OffsetY"];
    }
    function E(N, Q, e) {
      N.add.vmsk = new R.tm();
      B.b.u(e.L, new k$(1, 0, 0, 1, Q.OffsetX, Q.OffsetY), e.L);
      N.add.vmsk.D = B.b.LZ(e);
      N.Pp();
    }
    function A(N, Q, e) {
      var Y = Q[1][0],
        d = Q[2][0];
      N.uZ |= 16;
      var I = (N.add.vstk = eu.rS.i4(!0, !0));
      I.fillEnabled.v = e == !0;
      N.add.SoCo = {
        classID: "null",
        Clr: { t: "Objc", v: B.MV.Ia({ o: 255, i: 255, X: 255 }) },
      };
      I.strokeStyleContent.v.Clr.v = B.MV.Ia({ o: Y[0], i: Y[1], X: Y[2] });
      I.strokeStyleLineWidth.v.val = d * 2;
      I.strokeStyleLineCapType.v.strokeStyleLineCapType = "strokeStyleRoundCap";
    }
    return U;
  })();
  gh.eH.adq = function (j, q) {
    var m = { Ul: j, GH: q + 8 },
      b = 0;
    function n(S) {
      var o = M.Z$(S.Ul, S.GH);
      S.GH += 4;
      return o;
    }
    function G(S) {
      var o = n(S);
      if (o > 200) throw o;
      var P = M.Jz(S.Ul, S.GH, o);
      S.GH += o * 2;
      return P;
    }
    function W(S) {
      var o = n(S);
      if (n(S) != 4) throw "e";
      var c = [];
      for (var y = 0; y < o; y++) c.push(n(S));
      return c;
    }
    var k = M.K_(m.Ul, m.GH);
    m.GH += 8;
    var T = m.GH + k;
    m.GH += 56;
    var c = [];
    while (m.GH < T) {
      var a = n(m),
        f = m.GH + a - 4;
      if (f > T) throw "e";
      if (a == 11) {
        m.GH -= 4;
        var U = G(m),
          Z = n(m);
        if (Z != 12) throw "e";
        var h = W(m),
          u = G(m),
          Z = n(m);
        if (Z != 12) throw "e";
        var i = W(m);
        if (m.GH != T) throw "e";
      } else {
        var x = G(m),
          X = n(m);
        if (X != b) throw X;
        b++;
        var $ = M._h(m.Ul, m.GH);
        m.GH += 2;
        if ($ != 0 && $ != 1 && $ != 2 && $ != 5) throw $;
        var H = m.Ul[m.GH++];
        if (H != 0 && H != 32 && H != 64) throw H;
        var C = n(m);
        if (C != 1) throw C;
        if (n(m) != 1) throw "e";
        if (m.Ul[m.GH++] != 0) throw "e";
        if (n(m) == 1) {
          var l = n(m),
            v = M.YZ(m.Ul, m.GH);
          if (l != v + 4) throw "e";
          c.push(new Uint8Array(m.Ul.buffer, m.GH + 4, v));
          m.GH += l;
        } else c.push(new Uint8Array(0));
        var K = G(m);
        if (m.GH != f) throw m.GH;
      }
    }
    return c;
  };
  gh.B4 = {};
  gh.B4.k5 = !0;
  gh.B4.LN = function (j, q) {
    b4.VB(j, q);
  };
  gh.rj = {};
  gh.rj.k5 = !0;
  gh.rj.LN = function (j, q) {
    var m = Date.now(),
      n = kj.parse(j),
      G = M.dq,
      W = M.O_,
      k = n.LtfHeader,
      T = 0,
      b = G(k, T);
    T += 4;
    if (b != k.length) throw "e";
    var c = G(k, T);
    T += 4;
    if (c != 4609100) throw "e";
    var a = G(k, T);
    T += 4;
    if (a != 400 && a != 500 && a != 600) throw a;
    var f = W(k, T);
    T += 2;
    if (f != 2 && f != 4 && f != 32) throw f;
    var U = W(k, T);
    T += 2;
    var Z = G(k, T),
      h = G(k, T + 4);
    T += 8;
    var u = G(k, T) / 1e4;
    T += 8;
    var a = G(k, T),
      f = G(k, T + 4);
    T += 8;
    if (a != 0 && a != 1 && a != 2) throw a;
    if (a == 600) for (var y = 0; y < 20; y++) if (k[T + y] != 0) throw y;
    T += 20;
    var a = G(k, T);
    T += 4;
    if (a != 0 && a != 1) throw a;
    var i = G(k, T);
    T += 4;
    if (i != 0 && i != 1) throw i;
    for (var y = 0; y < 476; y++) if (k[T + y] != 0) throw y;
    T += 476;
    var x = T + 104;
    q.r = Z;
    q.$ = h;
    q.buffer = B.j(Z * h * 4);
    var X = n.LtfMainPalette,
      $ = n.LtfObjectList;
    T = 0;
    if ($) {
      var aF = G($, 0);
      if (G($, 4) != aF) throw "e";
      for (var H = 0; H < aF; H++) {
        T = 8 + H * 192;
        var C = T + 128;
        while ($[C] != 0) C += 2;
        var l = M.a5($, T + 128, (C - (T + 128)) >>> 1);
        gh.rj.fb(n[l], q, X);
      }
    }
    var v = q.dj();
    q.U.push(v);
    v.tV("Background");
    if (n.LtfMainImage) {
      var K = gh.rj.eI(n.LtfMainImage, null, X);
      v.buffer = K[0];
      v.H = K[1];
    } else {
      v.H = new hk(0, 0, Z, h);
      var S = G(k, x);
      gh.rj.ac_(v, X ? G(X, 2 + S * 4) : S);
    }
    q.U.reverse();
  };
  gh.rj.avh = function (j) {
    var q = "";
    for (var y = 0; y < j.length; y++) {
      var m = "" + j[y];
      while (m.length < 3) m = " " + m;
      q += m + ", ";
    }
    return q;
  };
  gh.rj.fb = function (j, q, m) {
    var n = M.dq,
      G = q.dj(),
      k = 0;
    q.U.push(G);
    var W = j.ObjectData;
    if (n(W, 0) != W.length) throw "e";
    k += 4;
    var T = k;
    while (W[T] != 0) T++;
    G.tV(M.IH(W, k, T - k));
    k = T + 1;
    if (T == 5) {
      if (W[k] != 0) throw "e";
      k++;
    }
    var b = j.ObjectMask0,
      c = j.PathStream;
    if (c && b == null) {
      var a = (G.add.vmsk = new R.tm());
      a.D = gh.rj.nk(c);
      G.add.SoCo = {
        classID: "null",
        Clr: { t: "Objc", v: B.MV.Ia({ o: W[232], i: W[233], X: W[234] }) },
      };
      G.add.vstk = eu.rS.i4(!0);
      G.D5(q);
    }
    if (b == null) return;
    G.H = new hk(n(b, 0), n(b, 4), n(b, 8), n(b, 12));
    if (j.ObjectImage) {
      var f = gh.rj.eI(j.ObjectImage, null, m, G.H.r);
      if (f[1].r != G.H.r) throw "e";
      G.buffer = f[0];
    } else gh.rj.ac_(G, n(W, 188));
    gh.rj.eI(new Uint8Array(b.buffer, 16), G.buffer);
  };
  gh.rj.ac_ = function (j, q) {
    j.buffer = B.j(j.H.C() * 4);
    B.bs(j.buffer, (255 << 24) | q);
  };
  gh.rj.nk = function (j) {
    var q = M.O_,
      m = M.dq,
      n = M.x5,
      k = 0;
    function G(i, x) {
      var X = q(i, x),
        $ = q(i, x + 2);
      return $;
    }
    var W = pako.inflate(j.slice(12));
    k = 128;
    for (var y = 0; y < 260; y++) if (W[k + y] != 0) throw y;
    k += 260;
    if (m(W, k) != 50) throw "e";
    k += 4;
    if (m(W, k) != 0) throw "e";
    k += 4;
    if (m(W, k) != 0) throw "e";
    k += 4;
    var T = m(W, k);
    k += 4;
    var T = m(W, k);
    if (T != 106 && T != 186 && T != 196 && T != 236) throw m(W, k);
    k += 4;
    if (m(W, k) != 0) throw "e";
    k += 4;
    if (m(W, k) != 24) throw "e";
    k += 4;
    if (m(W, k) != 0) throw "e";
    k += 4;
    var T = m(W, k);
    k += 4;
    var b = m(W, k);
    k += 4;
    if (m(W, k) != 0) throw "e";
    k += 4;
    if (m(W, k) != 0) throw "e";
    k += 4;
    if (m(W, k) != 1280) throw "e";
    k += 4;
    for (var y = 0; y < 24; y++) if (W[k + y] != 0) throw y;
    k += 24;
    var c = m(W, k);
    k += 4;
    if (42 + c * 10 != b) throw "e";
    var a = m(W, k);
    k += 4;
    var f = m(W, k);
    k += 4;
    var U = [{ e: 6 }, { e: 8, all: 0 }];
    U.push({ e: 0, length: c, Np: 0, uc: 2, xV: 0, yg: 0 });
    for (var y = 0; y < c; y++) {
      var Z = G(W, k + 2),
        h = G(W, k + 6),
        u = new ea(Z, h);
      U.push({ e: 2, kt: u.P(), Ii: u, _$: u.P() });
      k += 10;
    }
    return U;
  };
  gh.rj.eI = function (j, q, m, n) {
    var G = M.dq,
      W = M.d9,
      k = gh.rj.avh,
      T = 0,
      b = G(j, T),
      h,
      u = 0,
      A;
    T += 4;
    var c = G(j, T);
    T += 4;
    var a = G(j, T);
    T += 4;
    var f = G(j, T);
    T += 4;
    var U = G(j, T);
    T += 4;
    var Z = b * c,
      i = j.length;
    if (Z == i - 20) h = new Uint8Array(j.buffer, 20 + j.byteOffset);
    else if (a == 64 * 64 * 3 || (q && a == 64 * 64)) {
      var x = gh.lj("jpg"),
        X = 0,
        $ = 0;
      h = B.j(b * c);
      while (T < j.length) {
        var H = G(j, T);
        T += 4;
        var C = x.LN(j.slice(T, T + H))[0],
          f = C.Iu,
          l = new Uint8Array(C.data),
          v = q ? b : b / 3;
        for (var K = 0; K < f.$; K++)
          for (var S = 0; S < f.r; S++) {
            var o = K * f.r + S,
              V = (K + $) * v + (S + X);
            if (q) h[V] = l[o * 4];
            else {
              h[V * 3 + 0] = l[o * 4 + 2];
              h[V * 3 + 1] = l[o * 4 + 1];
              h[V * 3 + 2] = l[o * 4 + 0];
            }
          }
        X += 64;
        if (X > v) {
          $ += 64;
          X = 0;
        }
        T += H;
      }
    } else {
      h = B.j(Z);
      for (var o = 0; o < Z; o += a) {
        var P = o + a,
          z = G(j, T);
        T += 4;
        while (u < P && T < i) {
          var E = j[T];
          T++;
          if (E < 128)
            for (var y = 0; y < E + 1; y++) {
              h[u++] = j[T++];
              if (q) continue;
              h[u++] = j[T++];
              h[u++] = j[T++];
            }
          else {
            E -= 127;
            for (var y = 0; y < E; y++) {
              h[u++] = j[T + 0];
              if (q) continue;
              h[u++] = j[T + 1];
              h[u++] = j[T + 2];
            }
            T += q ? 1 : 3;
          }
        }
      }
    }
    if (q) {
      for (var y = 0; y < Z; y++) q[y * 4 + 3] = h[y];
      return [h, new hk(0, 0, b, c)];
    }
    if (m) {
      A = B.j(Z * 4);
      for (var y = 0; y < Z; y++) {
        var N = y << 2,
          a = 2 + h[y] * 4;
        A[N] = m[a];
        A[N + 1] = m[a + 1];
        A[N + 2] = m[a + 2];
        A[N + 3] = 255;
      }
    } else if (n != null && n == b) {
      A = B.j(Z * 4);
      A.fill(255);
      for (var y = 0; y < Z; y++)
        A[y * 4 + 0] = A[y * 4 + 1] = A[y * 4 + 2] = h[y];
    } else {
      b = Math.round(b / 3);
      Z = b * c;
      A = B.j(Z * 4);
      for (var y = 0; y < Z; y++) {
        var V = y * 3,
          N = y << 2;
        A[N] = h[V];
        A[N + 1] = h[V + 1];
        A[N + 2] = h[V + 2];
        A[N + 3] = 255;
      }
    }
    return [A, new hk(0, 0, b, c)];
  };
  gh.Fe = {};
  gh.Fe.k5 = !0;
  gh.Fe.LN = (function () {
    var j = M.d9,
      q = M.YZ,
      m = 0;
    function n(W, k) {
      m = j(W, k + 2);
      console.log("nFib", m, m.toString(16));
      k += 32;
      if (j(W, k) != 14) throw "e";
      k += 2;
      k += 28;
      if (j(W, k) != 22) throw "e";
      k += 2;
      var T = q(W, k);
      k += 4;
      k += 8;
      var b = q(W, k);
      k += 4;
      var c = q(W, k);
      k += 4;
      var a = q(W, k);
      k += 4;
      k += 4;
      var f = q(W, k);
      k += 4;
      var U = q(W, k);
      k += 4;
      var Z = q(W, k);
      k += 4;
      var h = q(W, k);
      k += 4;
      k += 11 * 4;
      var u = j(W, k);
      k += 2;
      for (var y = 0; y < u; y++) {
        var i = q(W, k),
          x = q(W, k + 4);
        k += 8;
      }
    }
    function G(W, k) {
      var T = kj.parse(W);
      console.log(T);
      var b = ["WordDocument", "Data"],
        c = new hk();
      for (var a = 0; a < b.length; a++) {
        var f = T[b[a]],
          U = [],
          Z = 0;
        while (Z < f.length) {
          var h = M.Gf(f, [255, 216, 255], Z);
          if (h == -1) break;
          U.push(h);
          Z = h + 1;
        }
        var u = [];
        for (var y = 0; y < U.length; y++) {
          var i = f.slice(U[y], U[y + 1]),
            x = gh.v1.LN(i.buffer)[0];
          c = c.vd(x.Iu);
          var X = k.dj();
          k.U.push(X);
          X.tV("Layer");
          X.H = x.Iu;
          X.buffer = new Uint8Array(x.data);
        }
      }
      if (k.U.length == 0) {
        alert("No images found inside a document.");
        return;
      }
      k.r = c.r;
      k.$ = c.$;
      k.buffer = B.j(c.C() * 4);
    }
    return G;
  })();
  gh.ag0 = {};
  gh.ag0.LN = function (j) {
    var q = new Uint8Array(j),
      m = M.YZ,
      k = 16;
    if (M.IH(q, 0, 4) != "chlv") throw "e";
    var n = m(q, 4),
      G = m(q, 8),
      W = m(q, 12),
      T = [];
    while (k < q.length) {
      var b = m(q, k),
        c = m(q, k + 48),
        a = m(q, k + 52),
        f = c * a,
        U = c * 4,
        Z = B.j(c * a * 4);
      Z.fill(255);
      for (var h = 0; h < a; h++)
        for (var u = 0; u < c; u += 4) {
          var y = h * c + u,
            i = y * 4,
            x = k + 108 + (y >>> 2) * 6;
          Z[i] = q[x + 1];
          Z[i + 4] = q[x + 3];
          Z[i + 8] = q[x + 4];
          Z[i + 12] = q[x + 5];
          for (var X = 0; X < 16; X += 4) {
            Z[i + X + 1] = q[x + 0];
            Z[i + X + 2] = q[x + 2];
          }
        }
      var $ = new Int8Array(Z.buffer),
        H = new Uint8ClampedArray(Z.buffer);
      for (var h = 0; h < a; h++)
        for (var u = 0; u < c; u++) {
          var y = (h * c + u) * 4,
            C = Z[y],
            l = $[y + 1],
            v = $[y + 2],
            K = C + ((45 * v) >> 5),
            S = C - ((11 * l + 23 * v) >> 5),
            o = C + ((113 * l) >> 6);
          H[y] = K;
          H[y + 1] = S;
          H[y + 2] = o;
        }
      k += b + 4;
      T.push({ Iu: new hk(0, 0, c, a), data: Z.buffer, Le: "_a_" + T.length });
    }
    return T;
  };
  var fS = {};
  fS.tx = !1;
  fS.aDJ = !1;
  fS.Qk = !1;
  fS.Bl = document.createElement("canvas");
  fS.lB = null;
  fS.Ho = null;
  fS.UW = 0;
  (function () {
    var j = { alpha: !0, antialias: !1, depth: !1, premultipliedAlpha: !1 },
      q;
    if (!q) q = fS.Bl.getContext("webgl2", j);
    if (q) {
      fS.tx = !0;
      fS.aDJ = !0;
      fS.lB = q;
      fS.Ho = q.createFramebuffer();
      q.bindFramebuffer(q.FRAMEBUFFER, fS.Ho);
      q.disable(q.BLEND);
      q.disable(q.DEPTH_TEST);
      var m = q.createBuffer();
      q.bindBuffer(q.ARRAY_BUFFER, m);
      q.bufferData(
        q.ARRAY_BUFFER,
        new Float32Array([0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1]),
        q.STATIC_DRAW
      );
      q.enableVertexAttribArray(0);
      q.vertexAttribPointer(0, 2, q.FLOAT, !1, 0, 0);
    }
  })();
  fS.a8B = function (j) {
    j = j.replace(/\s\s+/g, " ");
    j = j.replace(/; /g, ";");
    j = j.replace(/} /g, "}");
    j = j.replace(/ }/g, "}");
    j = j.replace(/{ /g, "{");
    j = j.replace(/ {/g, "{");
    j = j.replace(/= /g, "=");
    j = j.replace(/ =/g, "=");
    j = j.replace(/\| /g, "|");
    j = j.replace(/ \|/g, "|");
    return j;
  };
  fS.tN = function (j, q) {
    var m = fS.lB;
    if (j > m.getParameter(m.MAX_TEXTURE_SIZE)) {
      fS.tx = !1;
      alert("Too big texture (" + j + " px), Disabling WebGL");
    }
    if (q == 16 && m.getExtension("EXT_texture_norm16") == null) {
      fS.tx = !1;
      alert("EXT_texture_norm16 missing, Disabling WebGL");
    }
  };
  fS.as = function (j, q) {
    return new Float32Array([
      (j.x - q.x) / q.r,
      (j.y - q.y) / q.$,
      j.r / q.r,
      j.$ / q.$,
    ]);
  };
  fS.l4 = function () {
    return this.Bl;
  };
  fS.VF = function (j, q) {
    var m = fS.lB;
    m.bindFramebuffer(m.FRAMEBUFFER, fS.Ho);
    m.framebufferTexture2D(
      m.FRAMEBUFFER,
      m.COLOR_ATTACHMENT0,
      m.TEXTURE_2D,
      j.vD,
      0
    );
    m.viewport(0, 0, j.r, j.$);
    if (q) {
      m.enable(m.SCISSOR_TEST);
      m.scissor(q.x, q.y, q.r, q.$);
    } else m.disable(m.SCISSOR_TEST);
  };
  fS.axB = function (j, q, m) {
    if (m) throw "error";
    var n = fS.lB;
    n.disable(n.SCISSOR_TEST);
    n.bindFramebuffer(n.FRAMEBUFFER, null);
    n.viewport(0, 0, j, q);
    if (m) {
      n.enable(n.SCISSOR_TEST);
      n.scissor(m.x, m.y, Math.round(m.r), Math.round(m.$));
    } else n.disable(n.SCISSOR_TEST);
  };
  fS.KA = function () {
    var j = fS.lB;
    j.colorMask(!1, !1, !1, !0);
    fS.Db(255 << 24);
    j.colorMask(!0, !0, !0, !0);
  };
  fS.Db = function (j) {
    var q = fS.lB,
      m = ((j >>> 0) & 255) * (1 / 255),
      n = ((j >>> 8) & 255) * (1 / 255),
      G = ((j >>> 16) & 255) * (1 / 255),
      W = ((j >>> 24) & 255) * (1 / 255);
    q.clearColor(m, n, G, W);
    q.clear(q.COLOR_BUFFER_BIT);
  };
  fS.W4 = function (j, q, m, n, G) {
    var W = q.TM(n);
    if (G) W = W.TM(G);
    if (W.jG()) return;
    var k = fS.lB;
    fS.VF(j);
    k.bindTexture(k.TEXTURE_2D, m.vD);
    k.copyTexSubImage2D(
      k.TEXTURE_2D,
      0,
      W.x - n.x,
      W.y - n.y,
      W.x - q.x,
      W.y - q.y,
      W.r,
      W.$
    );
  };
  fS.vK = function (y, j, q, m) {
    if (m == null) m = 8;
    var n = fS.a6Q[y];
    if (n == null || n.r != j || n.$ != q || n.depth != m) {
      if (n) n.delete();
      n = new fS.Rx(j, q, m);
    }
    fS.a6Q[y] = n;
    return n;
  };
  fS.a6Q = [];
  fS.jm = function () {
    this.Vi = null;
    this.Si = null;
  };
  fS.jm._f = null;
  fS.jm.prototype.lc = function (j) {
    if (this.Si) return;
    this.Si = {};
    var q = fS.lB,
      m = this.Vi,
      n = this.Si;
    for (var y = 0; y < j.length; y++) {
      var G = j[y];
      n[G] = q.getUniformLocation(m, G);
    }
  };
  fS.jm.prototype.cu = function () {};
  fS.jm.prototype.ne = function (j) {
    var q = fS.lB;
    for (var y = 0; y < j.length; y += 2) {
      q.uniform1i(j[y], y >>> 1);
      q.activeTexture(q["TEXTURE" + (y >>> 1)]);
      q.bindTexture(q.TEXTURE_2D, j[y + 1]);
    }
    q.activeTexture(q.TEXTURE0);
  };
  fS.jm.prototype.zw = function (j, q) {
    var m = fS.lB,
      n = m.createShader(m.FRAGMENT_SHADER);
    m.shaderSource(n, j);
    m.compileShader(n);
    if (!m.getShaderParameter(n, m.COMPILE_STATUS))
      console.log(m.getShaderInfoLog(n));
    var G = m.createShader(m.VERTEX_SHADER);
    m.shaderSource(G, q);
    m.compileShader(G);
    if (!m.getShaderParameter(G, m.COMPILE_STATUS))
      console.log(m.getShaderInfoLog(G));
    var W = m.createProgram();
    m.attachShader(W, G);
    m.attachShader(W, n);
    m.linkProgram(W);
    if (!m.getProgramParameter(W, m.LINK_STATUS))
      console.log("Could not initialise shaders");
    this.Vi = W;
  };
  fS.jm.prototype.yP = function () {
    if (fS.jm._f != this) {
      fS.lB.useProgram(this.Vi);
      fS.jm._f = this;
    }
  };
  fS.Ag = function (j, q, m) {
    fS.wg++;
    fS.UW += j * q;
    if (fS.Qk)
      console.log("GL.Channels instances: " + fS.wg + ", memory: " + fS.UW);
    var n = fS.lB;
    this.r = j;
    this.$ = q;
    if (m == null) m = 8;
    if (m == 16) {
      n.getExtension("EXT_texture_norm16");
    }
    this.depth = m;
    this.yO = m == 8 ? n.R8 : m == 16 ? 33322 : n.R32F;
    this.rt = m == 8 ? n.RED : m == 16 ? n.RED : n.RED;
    this.X9 = m == 8 ? n.UNSIGNED_BYTE : m == 16 ? n.UNSIGNED_SHORT : n.FLOAT;
    this.vD = n.createTexture();
    this.sR = null;
    this.V3(this.vD, j, q);
  };
  fS.Ag.prototype.V3 = function (j, q, m) {
    var n = fS.lB;
    n.bindTexture(n.TEXTURE_2D, j);
    n.texParameteri(n.TEXTURE_2D, n.TEXTURE_MIN_FILTER, n.NEAREST);
    n.texParameteri(n.TEXTURE_2D, n.TEXTURE_MAG_FILTER, n.NEAREST);
    n.texParameteri(n.TEXTURE_2D, n.TEXTURE_WRAP_S, n.CLAMP_TO_EDGE);
    n.texParameteri(n.TEXTURE_2D, n.TEXTURE_WRAP_T, n.CLAMP_TO_EDGE);
    n.texImage2D(n.TEXTURE_2D, 0, this.yO, q, m, 0, this.rt, this.X9, null);
  };
  fS.Ag.prototype.set = function (j, q) {
    var m = fS.lB;
    m.bindTexture(m.TEXTURE_2D, this.vD);
    m.pixelStorei(m.UNPACK_ALIGNMENT, 1);
    var n = this.r * this.$;
    if (q == null || q.C() * 10 > n)
      m.texImage2D(
        m.TEXTURE_2D,
        0,
        this.yO,
        this.r,
        this.$,
        0,
        this.rt,
        this.X9,
        j
      );
    else {
      var G = new hk(0, 0, this.r, this.$),
        W = B.j(q.C(), this.depth);
      B.sN(j, G, W, q);
      m.texSubImage2D(m.TEXTURE_2D, 0, q.x, q.y, q.r, q.$, this.rt, this.X9, W);
    }
    m.pixelStorei(m.UNPACK_ALIGNMENT, 4);
  };
  fS.Ag.prototype.delete = function () {
    var j = fS.lB;
    if (this.vD) {
      j.deleteTexture(this.vD);
      fS.wg--;
      fS.UW -= this.r * this.$;
    }
    if (fS.Qk)
      if (fS.Qk)
        console.log(
          "GL.Channels instances: " + fS.wg + ", memory: " + fS.UW * 4
        );
  };
  fS.wg = 0;
  fS.Rx = function (j, q, m, n) {
    if (m == null) m = 8;
    if (n == null) n = !1;
    fS.wg++;
    fS.UW += j * q * 4;
    if (fS.Qk)
      console.log("GL.Channels instances: " + fS.wg + ", memory: " + fS.UW);
    var G = fS.lB;
    if (m == 16) {
      G.getExtension("EXT_texture_norm16");
    }
    if (m == 32) {
      G.getExtension("EXT_color_buffer_float");
      if (G.getExtension("OES_texture_float_linear") == null) n = !1;
    }
    this.aFv = n;
    this.r = j;
    this.$ = q;
    this.depth = m;
    this.yO =
      m == 8 ? G.RGBA : m == 16 ? 32859 : m == 32 ? G.RGBA32F : G.RGBA16F;
    this.rt = m == 8 ? G.RGBA : m == 16 ? G.RGBA : G.RGBA;
    this.X9 = m == 8 ? G.UNSIGNED_BYTE : m == 16 ? G.UNSIGNED_SHORT : G.FLOAT;
    this.vD = G.createTexture();
    this.sR = null;
    this.V3(this.vD, j, q);
  };
  fS.NT = function () {
    var j = fS.lB;
    return j.getExtension("OES_texture_float_linear") ? 32 : 33;
  };
  fS.Rx.prototype.set = function (j, q) {
    var m = fS.lB;
    m.disable(m.SCISSOR_TEST);
    m.bindTexture(m.TEXTURE_2D, this.vD);
    if (
      j == null ||
      j instanceof Uint8Array ||
      j instanceof Uint16Array ||
      j instanceof Float32Array
    ) {
      var n = this.r,
        G = this.$,
        W = n * G;
      if ((q == null || q.C() * 10 > W) && (j == null || j.length >= W * 4))
        m.texImage2D(m.TEXTURE_2D, 0, this.yO, n, G, 0, this.rt, this.X9, j);
      else {
        var k = j;
        if (j.length == W * 4) {
          var k = B.j(q.C() * 4, this.depth);
          B.M4(j, new hk(0, 0, n, G), k, q);
        }
        m.texSubImage2D(
          m.TEXTURE_2D,
          0,
          q.x,
          q.y,
          q.r,
          q.$,
          this.rt,
          this.X9,
          k
        );
      }
    } else m.texImage2D(m.TEXTURE_2D, 0, this.yO, this.rt, this.X9, j);
  };
  fS.Rx.prototype.get = function (j) {
    var q = fS.lB;
    fS.VF(this);
    q.readPixels(0, 0, this.r, this.$, this.rt, this.X9, j);
  };
  fS.Rx.prototype.w3 = function (j) {
    if (j.jG()) return;
    var q = fS.lB;
    if (this.sR == null) {
      this.sR = q.createTexture();
      this.V3(this.sR, this.r, this.$);
      fS.wg++;
      fS.UW += this.r * this.$ * 4;
    }
    q.bindFramebuffer(q.FRAMEBUFFER, fS.Ho);
    q.bindTexture(q.TEXTURE_2D, this.sR);
    if (j) {
      var m = Math.max(j.x, 0),
        n = Math.max(j.y, 0);
      q.copyTexSubImage2D(q.TEXTURE_2D, 0, m, n, m, n, j.r, j.$);
    } else q.copyTexImage2D(q.TEXTURE_2D, 0, this.rt, 0, 0, this.r, this.$, 0);
  };
  fS.Rx.prototype.V3 = function (j, q, m) {
    var n = fS.lB;
    n.bindTexture(n.TEXTURE_2D, j);
    n.texParameteri(
      n.TEXTURE_2D,
      n.TEXTURE_MIN_FILTER,
      this.aFv ? n.LINEAR : n.NEAREST
    );
    n.texParameteri(n.TEXTURE_2D, n.TEXTURE_MAG_FILTER, n.NEAREST);
    n.texParameteri(n.TEXTURE_2D, n.TEXTURE_WRAP_S, n.CLAMP_TO_EDGE);
    n.texParameteri(n.TEXTURE_2D, n.TEXTURE_WRAP_T, n.CLAMP_TO_EDGE);
    n.texImage2D(n.TEXTURE_2D, 0, this.yO, q, m, 0, this.rt, this.X9, null);
  };
  fS.Rx.prototype.delete = function () {
    var j = fS.lB;
    if (this.vD) {
      j.deleteTexture(this.vD);
      fS.wg--;
      fS.UW -= this.r * this.$ * 4;
    }
    if (this.sR) {
      j.deleteTexture(this.sR);
      fS.wg--;
      fS.UW -= this.r * this.$ * 4;
    }
    if (fS.Qk)
      if (fS.Qk)
        console.log("GL.Channels instances: " + fS.wg + ", memory: " + fS.UW);
  };
  fS.Rx.prototype.P = function () {
    var j = fS.lB,
      q = new fS.Rx(this.r, this.$);
    fS.VF(this);
    j.bindTexture(j.TEXTURE_2D, q.vD);
    j.copyTexImage2D(j.TEXTURE_2D, 0, this.rt, 0, 0, this.r, this.$, 0);
    return q;
  };
  fS.SI = {
    ani: "  vec3 ocbrn(vec3 a, vec3 b, float f) {  vec3 d = (a*vec3(f)+ONE3-vec3(f));  return mix(ONE3 - min(ONE3,(ONE3-b)/d), ZERO3, vec3(vec3(greaterThan(vec3(0.001),d))) );  }  ",
    aFR: "  vec3 ocddg(vec3 a, vec3 b, float f) {  return mix(        min(ONE3,       b/(ONE3 - a*f))    ,   ONE3   , vec3(equal(a*f,ONE3 )) );  }  ",
    Iq: "const vec3 ZERO3 = vec3(0.0,0.0,0.0) ;\t\t\tconst vec3 QUAR3 = vec3(0.25,0.25,0.25) ;\t\t\tconst vec3 HALF3 = vec3(0.5,0.5,0.5) ;\t\t\tconst vec3 ONE3  = vec3(1.0,1.0,1.0) ;",
    nd: " float hueDiff(float shue, float hue) { \t\t\t\tfloat df = hue-shue, adf=abs(df), df0 = df-1.0, df1 = df+1.0; \t\t\t\tif(abs(df0) < adf)  df = df0; \t\t\t\telse if(abs(df1) < adf)  df = df1; \t\t\t\treturn df; \t\t\t}",
    azi: " float hueCF(float hueS, float hue0) { \t\t\t\tfloat df = hueDiff(hue0, hueS)*6.0; \t\t\t\treturn   max(0.0, min(1.0,  (df<0.0) ? 1.0+df : 1.0-df  ));  } ",
    lJ: "float sat(vec3 c) { return max(c.x,max(c.y,c.z)) - min(c.x,min(c.y,c.z)); }",
    Sn: "float lum(vec3 c) { return dot(c, vec3(0.3,0.59,0.11)); } ",
    l_: "vec3  D  (vec3 x) { return mix( sqrt(x), ((16.0*x-12.0)*x+4.0)*x  , vec3(lessThanEqual(x,QUAR3))  ); }",
    aaf: "float midSat (vec3 v, float s) { return ((v.y-v.z)*s)/(v.x-v.z); }",
    E6: "vec3 setSat (vec3 c, float s) \t\t\t{\t\t\t\tvec3 o;\t\t\t\tif(c.r==c.g && c.g==c.b) o = ZERO3;\t\t\t\telse if(c.r>c.g)  {\t\t\t\t\tif(c.r>c.b) {\t\t\t\t\t\tif(c.g>c.b)\to = vec3(s, midSat(c.rgb,s), 0.0); \t\t\t\t\t\telse\to = vec3(s, 0.0, midSat(c.rbg,s)); \t\t\t\t\t}\t\t\t\t\telse\t\to = vec3(midSat(c.brg,s), 0.0, s); \t\t\t\t} else  {\t\t\t\t\tif(c.r<c.b) {\t\t\t\t\t\tif(c.g>c.b)\to = vec3(0.0, s, midSat(c.gbr,s)); \t\t\t\t\t\telse\t    o = vec3(0.0, midSat(c.bgr,s), s); \t\t\t\t\t}\t\t\t\t\telse\t\t    o = vec3(midSat(c.grb,s), s, 0.0);\t\t\t\t}\t\t\t\treturn o;\t\t\t}",
    aA2: "vec3 clipCol(vec3 c) \t\t\t{ \t\t\t\tvec3 o = c;  float l = lum(c); \t\t\t\tfloat n = min(c.r,min(c.g,c.b)); \t\t\t\tfloat x = max(c.r,max(c.g,c.b)); \t\t\t\tif(n<0.0) o = l + (o-l)*(l/(l-n));\t\t\t\tif(x>1.0) o = l + (o-l)*(1.0-l)/(x-l);\t\t\t\treturn o;\t\t\t}",
    pR: "vec3 setLum (vec3 c, float l) { return clipCol(c+l-lum(c)); } ",
    agk: "bool in01(vec2 c) { return (0.0<=c.x) && (c.x<=1.0) && (0.0<=c.y) && (c.y<=1.0); }",
    hash: "float hash(vec2 v) { return fract(sin(dot(v ,vec2(12.9898,78.233))) * 43758.5453); }",
    r0: "vec3 rgbToHsl (vec3 rgb) {\t\t\t\tfloat r = rgb.r, g = rgb.g, b = rgb.b; \t\t\t\tfloat mx = max(r, max(g, b)), mn = min(r, min(g, b)); \t\t\t\tfloat h, s, l = (mx + mn) * 0.5;\t\t\t\t\t\t\t\tif(mx == mn) h = s = 0.0; \t\t\t\telse{ \t\t\t\t\tfloat d = mx - mn; \t\t\t\t\ts = l > 0.5 ? d / (2.0 - mx - mn) : d / (mx + mn);  \t\t\t\t\t\t\t\t\t\tif(mx==r) h = (g - b) / d + (g < b ? 6.0 : 0.0);  \t\t\t\t\telse if(mx==g) h = (b - r) / d + 2.0; \t\t\t\t\telse if(mx==b) h = (r - g) / d + 4.0; \t\t\t\t\t\t\t\t\t\th /= 6.0; \t\t\t\t}  \t\t\t\treturn vec3(h,s,l); }",
    wL: "vec3 hslToRgb (float h, float s, float l){\t\t\t\tfloat r, g, b;\t\t\t\t\t\t\t\tif(s == 0.0)  r = g = b = l; \t\t\t\telse{ \t\t\t\t\tfloat q = l < 0.5 ? l * (1.0 + s) : l + s - l * s; \t\t\t\t\tfloat p = 2.0 * l - q; \t\t\t\t\tr = hue2rgb(p, q, h + 1.0/3.0); \t\t\t\t\tg = hue2rgb(p, q, h); \t\t\t\t\tb = hue2rgb(p, q, h - 1.0/3.0); \t\t\t\t} \t\t\t\treturn vec3(r,g,b); } ",
    L$: "float hue2rgb(float p, float q, float t){ \t\t\t\tif(t < 0.0) t += 1.0;\t\t\t\tif(t > 1.0) t -= 1.0;\t\t\t\tif(t < 1.0/6.0) return p + (q - p) * 6.0 * t; \t\t\t\tif(t < 1.0/2.0) return q; \t\t\t\tif(t < 2.0/3.0) return p + (q - p) * (2.0/3.0 - t) * 6.0; \t\t\t\treturn p;\t}",
    vE: "vec3 rgbToHsv(vec3 rgb){\t\t\t\t\tfloat r = rgb.r, g = rgb.g, b = rgb.b; \t\t\t\tfloat mx = max(r, max(g, b)), mn = min(r, min(g, b)); \t\t\t\tfloat h, s, v = mx; \t\t\t\t\t\t\t\tfloat d = mx - mn; \t\t\t\ts = mx == 0.0 ? 0.0 : d / mx; \t\t\t\t\t\t\t\tif(mx == mn) h = 0.0;  \t\t\t\telse if(mx==r) h = (g - b) / d + (g < b ? 6.0 : 0.0);  \t\t\t\telse if(mx==g) h = (b - r) / d + 2.0; \t\t\t\telse if(mx==b) h = (r - g) / d + 4.0; \t\t\t\t\t\t\t\th /= 6.0; \t\t\t\treturn vec3(h,s,v);  }",
    ld: "vec3 hsvToRgb(float h, float s, float v)  { \t\t\t\tfloat r, g, b, f, p, q, t, i; \t\t\t\ti = floor(h * 6.0); \t\t\t\tf = h * 6.0 - i; \t\t\t\tp = v * (1.0 - s); \t\t\t\tq = v * (1.0 - f * s); \t\t\t\tt = v * (1.0 - (1.0 - f) * s); \t\t\t\t\t\t\t\tif     (i==0.0) { r = v, g = t, b = p; }\t\t\t\telse if(i==1.0) { r = q, g = v, b = p; }\t\t\t\telse if(i==2.0) { r = p, g = v, b = t; }\t\t\t\telse if(i==3.0) { r = p, g = q, b = v; }\t\t\t\telse if(i==4.0) { r = t, g = p, b = v; }\t\t\t\telse if(i==5.0) { r = v, g = p, b = q; }\t\t\t\t\t\t\t\treturn vec3(r,g,b); }",
    fa: "\t\tfloat srgbUngamma(float x) {\t\t\treturn (x<0.04045) ? (x / 12.92) : pow( ( x + 0.055 ) / 1.055,  2.4);\t\t}\t\tfloat xyzScale(float x) {\t\t\treturn (x>0.008856) ? pow(x,1.0/3.0) : (903.3*x+16.0)*(1.0/116.0); \t\t}\t\tvec3 rgbToLab(vec3 rgb) {\t\t\tbool ok = true;\t\t\trgb.r = srgbUngamma(rgb.r); \t\t\trgb.g = srgbUngamma(rgb.g); \t\t\trgb.b = srgbUngamma(rgb.b); \t\t\tok = ok && 0.0318<=rgb.r && rgb.r<=0.0319; \t\t\tok = ok && 0.127 <=rgb.g && rgb.g<=0.128 ; \t\t\tok = ok && 0.3047<=rgb.b && rgb.b<=0.305; \t\t\t\t\t\tmat3 srgb2xyz = mat3(0.4360747164307918, 0.222504478679176, 0.013932173981751634,    0.3850649153329662, 0.7168786002139355, 0.09710452396580642,    0.14308038098632878, 0.06061692340677909, 0.7141732835334675); \t\t\t\t\t\tvec3 xyz = srgb2xyz*rgb; \t\t\tok = ok && 0.106<=xyz[0] && xyz[0]<=0.107;  \t\t\t\t\t\txyz=xyz*vec3(100.0/96.72, 100.0/100.0, 100.0/81.427);  \t\t\txyz.x = xyzScale(xyz.x); \t\t\txyz.y = xyzScale(xyz.y); \t\t\txyz.z = xyzScale(xyz.z); \t\t\t\t\t\treturn vec3(116.0*xyz.y-16.0, 500.0*(xyz.x-xyz.y), 200.0*(xyz.y-xyz.z));  \t\t} \t\tfloat labSimilar(vec3 lab, vec3 mnm, vec3 mxm, float lim)  {\t\t\tfloat L=lab.x, a=lab.y, b=lab.z; \t\t\tfloat dl = ((L<mnm.x) ? (mnm.x-L) : ((mxm.x<L) ? (mxm.x-L) : 0.0))*(1.0/100.0); \t\t\tfloat da = ((a<mnm.y) ? (mnm.y-a) : ((mxm.y<a) ? (mxm.y-a) : 0.0))*(1.0/116.0); \t\t\tfloat db = ((b<mnm.z) ? (mnm.z-b) : ((mxm.z<b) ? (mxm.z-b) : 0.0))*(1.0/116.0); \t\t\t/*float dl  = (slab.x-lab.x)*(1.0/100.0), da=(slab.y-lab.y)*(1.0/116.0), db=(slab.z-lab.z)*(1.0/116.0);*/ \t\t\tfloat dst = sqrt(dl*dl+da*da+db*db)*1.35; \t\t\treturn (dst<=lim) ? min(1.0,1.17*(1.0 - (dst/lim))) : 0.0; \t\t}",
    awA: "  mat3 rgbToYuv = mat3(0.299, -0.147, 0.615,    0.587,  -0.289,  -0.515,   0.114, 0.436, -0.100 );  ",
    avY: "  mat3 yuvToRgb = mat3(1.0, 1.0, 1.0,   0.0, -0.3946, 2.03199,    1.1398, -0.5805, -0.00048  ); ",
    kg: "\t\tfloat _blendIf(float c, vec4 br) {  return min((c-br.x)*br.y,  (c-br.w)*br.z);  }  \t\tfloat blendIf(vec4 sc, vec4 tc, vec4 br[10]) {  \t\t\tfloat sg = lum(sc.rgb); \t\t\tfloat tg = lum(tc.rgb); \t\t\tfloat ms = _blendIf(sg,br[0]); \t\t\tms = min(ms, _blendIf(sc.r,br[2])); \t\t\tms = min(ms, _blendIf(sc.g,br[4])); \t\t\tms = min(ms, _blendIf(sc.b,br[6])); \t\t\t\t\t\tfloat mt = _blendIf(tg,br[1]); \t\t\tmt = min(mt, _blendIf(tc.r,br[3])); \t\t\tmt = min(mt, _blendIf(tc.g,br[5])); \t\t\tmt = min(mt, _blendIf(tc.b,br[7])); \t\t\tmt=max(mt,1.0-tc.w);\t\t\t\t\t\tfloat mi=min(ms,mt);\t\t\treturn clamp(mi,0.0,1.0);\t\t}",
    aeS: "\t\t\tvec4 mapLut(vec4 src, sampler2D lut, float N) {\t\t\t\tfloat iN = 1.0/N; \t\t\t\tfloat fb = 0.5*iN + src.b*(1.0-iN); \t\t\t\tfloat fg = 0.5*iN + src.g*(1.0-iN); \t\t\t\tfloat R  = src.r*(N-1.0)*0.999999; \t\t\t\tfloat ir = floor(R);  \t\t\t\t\t\t\t\tvec4 c0 = texture2D(lut, vec2(fb, (ir    + fg   )*iN)); \t\t\t\tvec4 c1 = texture2D(lut, vec2(fb, (ir+1.0+ fg   )*iN)); \t\t\t\tvec4 rs = mix(c0,c1,clamp(R-ir,0.0,1.0));  \t\t\t\treturn rs;  \t\t\t}",
  };
  fS.G = {};
  fS.G.uN = {};
  fS.G.aIf = null;
  fS.G.PH = null;
  fS.G.kb = null;
  fS.G.aJw = function (j, q, m, n, G, W, k, T) {
    if (T == null) T = dS.ZA();
    if ("idiv,lbrn,div ,lddg,vLit,lLit,hMix,diff".split(",").indexOf(j) == -1) {
      k = k * T.fill;
      T.fill = 1;
      T.style = !1;
    }
    var b = q instanceof Array,
      c = j + (T.qL ? "1" : "0") + (b ? "1" : "0");
    if (fS.G.uN[c] == null) fS.G.uN[c] = new fS.G.a$(j, T.qL != null, b);
    var a = fS.G.uN[c],
      f = m.TM(G).TM(W);
    f.offset(-G.x, -G.y);
    if (f.jG()) return;
    var U = fS.lB;
    fS.VF(n, f);
    n.w3(f);
    a.yP();
    a.cu(
      b ? q[1].vD : q.vD,
      n.sR,
      fS.as(m, G),
      k,
      T.fill,
      T.style ? 1 : 0,
      T.TZ ? 1 : 0,
      T.qL ? new Float32Array(T.qL) : null,
      b ? q[0] : null
    );
    U.drawArrays(U.TRIANGLES, 0, 6);
  };
  fS.G.XK = function (j, q, m, n, G, W, k, T, b, c, a) {
    if (fS.G.atc == null) fS.G.atc = new fS.G.cL(!0, !0, 1);
    if (fS.G.aoo == null) fS.G.aoo = new fS.G.cL(!0, !0, 4);
    if (fS.G.PH == null) fS.G.PH = new fS.G.cL(!0, !1, 1);
    if (fS.G.kb == null) fS.G.kb = new fS.G.cL(!1, !0, 1);
    var f = c ? 1 : 0,
      U = j
        ? G
          ? G instanceof fS.Ag
            ? fS.G.atc
            : fS.G.aoo
          : fS.G.PH
        : fS.G.kb,
      Z = new Float32Array(a ? [a[0], a[1], a[2], 1] : [1, 1, 1, 1]),
      h = q ? q.TM(n).TM(T) : n.TM(T);
    if (h.jG()) return;
    h.offset(-n.x, -n.y);
    var u = fS.lB;
    fS.VF(m, h);
    m.w3(h);
    U.yP();
    if (j == null)
      U.cu(null, m.sR, G.vD, fS.as(n, n), fS.as(W, n), k / 255, b, f, Z);
    else if (G)
      U.cu(j.vD, m.sR, G.vD, fS.as(q, n), fS.as(W, n), k / 255, b, f, Z);
    else U.cu(j.vD, m.sR, null, fS.as(q, n), null, k / 255, b, f, Z);
    u.drawArrays(u.TRIANGLES, 0, 6);
  };
  fS.G.alR = function (j, q, m) {
    if (fS.G.acE == null) fS.G.acE = new fS.G.cO();
    var n = fS.G.acE,
      G = new hk(0, 0, j.r, j.$),
      W = fS.lB;
    fS.VF(q);
    q.w3(G);
    n.yP();
    n.cu(G, j.vD, q.sR, m.vD);
    W.drawArrays(W.TRIANGLES, 0, 6);
  };
  fS.G.gM = {
    norm: "return a;",
    diss: "return a;",
    dark: "return min(a,b);",
    "mul ": "return a*b;",
    idiv: "  vec3 d = (a*vec3(f)+ONE3-vec3(f));  return mix(mix(ONE3-((ONE3-b)/max(d,vec3(1e-6))), ZERO3, vec3(greaterThanEqual(ONE3-b,d)) ), ONE3   ,   vec3(equal(b,ONE3) ));   ",
    lbrn: "return max(ZERO3, a*f+b-f);",
    dkCl: "return ( lum(a)<lum(b) ? a : b );",
    lite: "return max(a,b);",
    scrn: "return b+a-b*a;",
    "div ":
      "a*=f;  return mix(    mix(  min(ONE3,b/(1.0-a)), ONE3,  step(1.0-a, b))     , ZERO3, vec3(equal(b,ZERO3)) );",
    lddg: "a*=f;  return min(ONE3,a+b);",
    lgCl: "return ( lum(a)>lum(b) ? a : b );",
    over: "return mix( a+(2.0*b -1.0)-a*(2.0*b-1.0) ,  2.0*b*a , step(-HALF3,-b) );",
    sLit: "return mix( b+(2.0*a -1.0)*(D(b)-b)  , b-(1.0-2.0*a)*b*(1.0-b) , step(-HALF3,-a) );",
    hLit: "return mix( b+(2.0*a -1.0)-b*(2.0*a-1.0) ,  2.0*a*b , step(-HALF3,-a) );",
    vLit: " return mix( ocddg(2.0*a-1.0,b,f)  ,  ocbrn(2.0*a,b,f)  ,  vec3(greaterThanEqual(HALF3,a))); ",
    lLit: "return mix( min(ONE3, (2.0*a-1.0)*f+b) , max(ZERO3, 2.0*a*f+b-f)  , step(-HALF3,-a));",
    pLit: "return mix( max(2.0*a-1.0,b) , min(2.0*a, b) , step(-HALF3,-a)  );",
    hMix: "if(f>0.99) return vec3(greaterThanEqual(a+b,ONE3));   return  min( ONE3, max(ZERO3,  (b+a*f-f)/(1.0-f+1e-6)  ))  ;  ",
    diff: "return abs(a*f-b);",
    smud: "return a+b-2.0*a*b;",
    fsub: "return max(b-a, ZERO3);",
    fdiv: "return min(b/max(a,vec3(0.000001)), ONE3);",
    "hue ": "return  setLum( setSat(a, sat(b)) , lum(b) ); ",
    "sat ": "return  setLum( setSat(b, sat(a)) , lum(b) ); ",
    colr: "return  setLum( a, lum(b) ); ",
    "lum ": "return  setLum( b, lum(a) ); ",
  };
  fS.G.a$ = function (j, q, m) {
    fS.jm.call(this);
    var n =
        "\t\t\tprecision highp float;\t\t\t" +
        fS.SI.Iq +
        "\t\t\t\t\t\tuniform sampler2D source;\t\t\tuniform sampler2D target;\t\t\tuniform float alpha;\t\t\tuniform float fill;\t\t\tuniform float style;\t\t\tuniform float keepBGA;\t\t\t" +
        (m ? "uniform vec4 scolor;" : "") +
        "\t\t\t" +
        (q ? "uniform vec4 blIf[10];" : "") +
        "\t\t\t\t\t\tvarying vec2 tCoord;\t\t\tvarying vec2 sCoord;\t\t\t\t\t\t\t\t\t" +
        fS.SI.lJ +
        "\t\t\t" +
        fS.SI.Sn +
        "\t\t\t" +
        fS.SI.l_ +
        "\t\t\t" +
        fS.SI.ani +
        "\t\t\t" +
        fS.SI.aFR +
        "\t\t\t" +
        fS.SI.aaf +
        "\t\t\t" +
        fS.SI.E6 +
        "\t\t\t" +
        fS.SI.aA2 +
        "\t\t\t" +
        fS.SI.pR +
        "\t\t\t" +
        fS.SI.hash +
        "\t\t\t" +
        (q ? fS.SI.kg : "") +
        "\t\t\t\t\t\tvec3  BB(vec3  a, vec3  b, float f) { " +
        fS.G.gM[j] +
        " } \t\t\t\t\t\tvoid main(void) {\t\t\t\tvec4 tgt = texture2D(target, tCoord);\t\t\t\tvec4 src = " +
        (m
          ? "scolor; src.a=texture2D(source, sCoord).r;"
          : "texture2D(source, sCoord);"),
      G =
        "\t\t\tattribute vec2 verPos;\t\t\tuniform vec4 srct;\t\t\tvarying vec2 tCoord;\t\t\tvarying vec2 sCoord;\t\t\tvoid main(void) {\t\t\t\ttCoord = verPos;\t\t\t\tsCoord = (verPos-srct.xy)/srct.zw;\t\t\t\tgl_Position = vec4(vec2(-1.0,-1.0) + 2.0*verPos, 0.0, 1.0);\t\t\t}";
    if (j == "diss")
      n +=
        "\t\t\t\t\tgl_FragColor = (hash(tCoord) >= (keepBGA + (1.0-keepBGA)*src.w)*alpha ? tgt : vec4(src.xyz, keepBGA*tgt.w + (1.0-keepBGA)));  }";
    else
      n +=
        "  \t\t\t\t\tfloat as = (keepBGA + (1.0-keepBGA)*src.w) * alpha, at = keepBGA + (1.0-keepBGA)*tgt.w; \t\t\t\t\t" +
        (q ? "  as*=blendIf(src,tgt,blIf);  " : "") +
        "\t\t\t\t\tfloat ats = at * (1.0-as), ao = as + ats, iao = (ao==0.0) ? 0.0 : (1.0/ao); \t\t\t\t\tfloat ccf = (style==1.0) ? 1.0 : as; \t\t\t\t\tvec3 ncl = ( (1.0-at)*as*src.xyz + (1.0-ccf)*at*tgt.xyz + ccf*at*BB(src.xyz, tgt.xyz, (1.0+as-ccf)*fill)  ) * iao;\t\t\t\t\tgl_FragColor = vec4(ncl, keepBGA*tgt.w + (1.0-keepBGA)*(as*fill + at*(1.0-as*fill)));\t\t\t\t\t\t\t}";
    this.zw(n, G);
  };
  fS.G.a$.prototype = new fS.jm();
  fS.G.a$.prototype.cu = function (j, q, m, n, G, W, k, T, b) {
    this.lc(
      "srct alpha source target fill style keepBGA blIf scolor".split(" ")
    );
    var c = fS.lB,
      a = this.Si;
    c.uniform4fv(a.srct, m);
    c.uniform1f(a.alpha, n);
    c.uniform1f(a.fill, G);
    c.uniform1f(a.style, W);
    c.uniform1f(a.keepBGA, k);
    if (T) c.uniform4fv(a.blIf, T);
    if (b) {
      var f = b ? 1 / B.TN(B.oM(b)) : 0;
      c.uniform4fv(
        a.scolor,
        new Float32Array([b[0] * f, b[1] * f, b[2] * f, 0])
      );
    }
    this.ne([a.source, j, a.target, q]);
  };
  fS.G.cL = function (j, q, m) {
    fS.jm.call(this);
    this.aq0 = j;
    this.$i = q;
    var n =
        "\t\t\tprecision mediump float;\t\t\t\t\t\tuniform sampler2D source;\t\t\tuniform sampler2D target;\t\t\tuniform sampler2D weight;\t\t\tuniform vec4 cswitch;\t\t\tuniform float wcolor;\t\t\tuniform float awg; /* additional weight */\t\t\tuniform float dissv;\t\t\t\t\t\tvarying vec2 tCoord;\t\t\tvarying vec2 sCoord;\t\t\tvarying vec2 wCoord;\t\t\t\t\t\t" +
        fS.SI.agk +
        "\t\t\t" +
        fS.SI.hash +
        "\t\t\t\t\t\tvoid main(void) {\t\t\t\tvec4 tgt = texture2D(target, tCoord);\t\t\t\tvec4 src = " +
        (j ? "texture2D(source, sCoord)" : "vec4(0.0)") +
        "; \t\t\t\tfloat wg = awg " +
        (q
          ? "* (in01(wCoord) ? texture2D(weight, wCoord)." +
            (m == 1 ? "r" : "a") +
            " : wcolor)"
          : "") +
        ";\t\t\t\t" +
        (j ? "" : "wg = 1.0-wg;") +
        "\t\t\t\tfloat hwg = hash(tCoord)>=wg ? 0.0 : 1.0;  wg = dissv*hwg + (1.0-dissv)*wg; \t\t\t\tfloat as = wg*src.w, at = (1.0-wg)*tgt.w, ao = as+at;\t\t\t\t\t\t\t\tvec4 nc = vec4( ao==0.0 ? vec3(0,0,0) : (as*src.xyz + at*tgt.xyz)/ao, ao );  \t\t\t\tgl_FragColor =  " +
        (q ? "nc" : "cswitch*nc + (1.0- cswitch)*tgt") +
        ";    \t\t\t}",
      G =
        "\t\t\tattribute vec2 verPos;\t\t\tvarying vec2 tCoord;\t\t\tvarying vec2 sCoord;\t\t\tvarying vec2 wCoord;\t\t\t\t\t\tuniform vec4 srct;\t\t\tuniform vec4 wrct;\t\t\tvoid main(void) {\t\t\t\ttCoord = verPos;\t\t\t\tsCoord = (verPos-srct.xy)/srct.zw;\t\t\t\twCoord = (verPos-wrct.xy)/wrct.zw;\t\t\t\tgl_Position = vec4(vec2(-1.0,-1.0) + 2.0*verPos, 0.0, 1.0);\t\t\t}";
    this.zw(n, G);
  };
  fS.G.cL.prototype = new fS.jm();
  fS.G.cL.prototype.cu = function (j, q, m, n, G, W, k, T, b) {
    if (this.$i)
      this.lc(
        "srct wrct wcolor awg dissv source target weight cswitch".split(" ")
      );
    else this.lc("srct awg dissv source target cswitch".split(" "));
    var c = fS.lB,
      a = this.Si;
    c.uniform4fv(a.srct, n);
    if (this.$i) {
      c.uniform4fv(a.wrct, G);
      c.uniform1f(a.wcolor, W);
    } else {
      c.uniform4fv(a.cswitch, b);
    }
    c.uniform1f(a.awg, k);
    c.uniform1f(a.dissv, T);
    var f = [a.source, j, a.target, q];
    if (this.$i) f.push(a.weight, m);
    this.ne(f);
  };
  fS.G.cO = function () {
    fS.jm.call(this);
    var j =
        "\t\t\tprecision mediump float;\t\t\t\t\t\tuniform sampler2D prev;\t\t\tuniform sampler2D next;\t\t\tuniform sampler2D alpha;\t\t\t\t\t\tvarying vec2 coord;\t\t\t\t\t\t\t\t\tvoid main(void) {\t\t\t\tvec3 or = texture2D(prev , coord).rgb;\t\t\t\tvec3 ir = texture2D(next , coord).rgb; \t\t\t\tfloat al = texture2D(alpha, coord).r; \t\t\t\tgl_FragColor =  vec4(  (ir-(1.0-al)*or)*(1.0/al)   ,1.0 );  \t\t\t}",
      q =
        "\t\t\tattribute vec2 verPos;\t\t\tvarying vec2 coord;\t\t\t\t\t\tuniform vec4 rct;\t\t\tvoid main(void) {\t\t\t\tcoord = verPos;\t\t\t\tgl_Position = vec4(vec2(-1.0,-1.0) + 2.0*verPos, 0.0, 1.0);\t\t\t}";
    this.zw(j, q);
  };
  fS.G.cO.prototype = new fS.jm();
  fS.G.cO.prototype.cu = function (j, q, m, n) {
    this.lc(["rct", "prev", "next", "alpha"]);
    var G = fS.lB,
      W = this.Si;
    G.uniform4fv(W.rct, [0, 0, 1, 1]);
    this.ne([W.prev, q, W.next, m, W.alpha, n]);
  };
  fS.QF = {
    BO: {},
    on: "\t\t\tattribute vec2 verPos;\t\t\tvarying vec2 sCoord;\t\t\tvoid main(void) {\t\t\t\tsCoord = verPos;\t\t\t\tgl_Position = vec4(vec2(-1.0,-1.0) + 2.0*verPos, 0.0, 1.0);\t\t\t}",
  };
  fS.QF.dH = function (j, q) {
    var m = eV.D8,
      n = [m.rr, m.JZ, m.Kx, m.Mb, m.oX, m.te, m.LT, m.qM].indexOf(j.e),
      G = fS.QF.BO[j.e];
    if (G == null) G = fS.QF.BO[j.e] = new fS.BO[n]();
    G.yP();
    G.cu(q, j);
    fS.lB.drawArrays(fS.lB.TRIANGLES, 0, 6);
  };
  fS.BO = [];
  fS.BO[0] = function () {
    fS.jm.call(this);
    this.a6b = {};
    var j =
      "\t\t\tprecision highp float;\t\t\t" +
      fS.SI.Sn +
      "\t\t\t" +
      fS.SI.Iq +
      "\t\t\tuniform sampler2D source;\t\t\tuniform sampler2D map;\t\t\tuniform float toGray;\t\t\tuniform float presLum;\t\t\t\t\t\tvarying vec2 sCoord;\t\t\tvec4 getC(float x) { \t\t\t\tif(x>1.0) {  \t\t\t\t\tvec4 a = texture2D(map, vec2((254.5/256.0), 0));\t\t\t\t\tvec4 b = texture2D(map, vec2((255.5/256.0), 0));\t\t\t\t\treturn b + (b-a)*(x-1.0)*255.0; \t\t\t\t} \t\t\t\treturn texture2D(map, vec2((0.5/256.0)+x*(255.0/256.0), 0)); \t\t\t}\t\t\t\t\t\tvoid main(void) {\t\t\t\tvec4 src = texture2D(source, sCoord); \t\t\t\tfloat olum = lum(src.rgb); \t\t\t\tsrc.rgb = toGray * vec3(olum) + (1.0-toGray)*src.rgb; \t\t\t\tfloat r = getC(src.r).r;\t\t\t\tfloat g = getC(src.g).g;\t\t\t\tfloat b = getC(src.b).b;\t\t\t\tvec3 col = vec3(r,g,b); \t\t\t\tif(presLum==1.0) { \t\t\t\t\tfloat nlum = lum(col); \t\t\t\t\tif(olum>nlum) col += (olum-nlum)/(1.0-nlum)*(ONE3-col); \t\t\t\t\telse if(nlum==0.0) col = ZERO3; \t\t\t\t\telse col = (olum/nlum) * col; \t\t\t\t}\t\t\t\tgl_FragColor = vec4(col,src.w);\t\t\t\t\t\t\t}";
    this.zw(j, fS.QF.on);
  };
  fS.BO[0].prototype = new fS.jm();
  fS.BO[0].prototype.cu = function (j, q) {
    var m = { o: q.NH, i: q.lW, X: q.aM, Sd: new Float32Array(q.NH.length) };
    m.Sd.fill(1);
    var n = m.o.length,
      G = this.a6b["m" + n];
    if (G == null)
      G = this.a6b["m" + n] = {
        a8G: new fS.Rx(n, 1, fS.NT()),
        sE: B.j(n * 4, 32),
      };
    B.Nr(m, G.sE);
    var W = G.a8G;
    W.set(G.sE);
    this.lc(["source", "map", "toGray", "presLum"]);
    var k = fS.lB,
      T = this.Si;
    k.uniform1f(T.toGray, q.JU ? 1 : 0);
    k.uniform1f(T.presLum, q.W_ ? 1 : 0);
    this.ne([T.source, j, T.map, W.vD]);
    k.activeTexture(k.TEXTURE1);
    var b = k.LINEAR;
    k.texParameteri(k.TEXTURE_2D, k.TEXTURE_MIN_FILTER, b);
    k.texParameteri(k.TEXTURE_2D, k.TEXTURE_MAG_FILTER, b);
    k.activeTexture(k.TEXTURE0);
  };
  fS.BO[1] = function () {
    fS.jm.call(this);
    this.vU = new fS.Rx(256, 1, fS.NT());
    var j =
      "\t\t\t\tprecision highp float;\t\t\t\t" +
      fS.SI.L$ +
      "\t\t\t\t" +
      fS.SI.r0 +
      "\t\t\t\t" +
      fS.SI.wL +
      "\t\t\t\t\t\t\t\tuniform sampler2D source;\t\t\t\tuniform sampler2D map;\t\t\t\tuniform float cfa; \t\t\t\tuniform float cfb; \t\t\t\tuniform int colorize; \t\t\t\t\t\t\t\tvarying vec2 sCoord;\t\t\t\t\t\t\t\tvoid main(void) { \t\t\t\t\tvec4 src = texture2D(source, sCoord);\t\t\t\t\tvec3 rgb = src.rgb;\t\t\t\t\tfloat mn=min(rgb.r,min(rgb.g,rgb.b)), mx = max(rgb.r,max(rgb.g,rgb.b));\t\t\t\t\t\t\t\t\t\tvec3 hsl = rgbToHsl(rgb); \t\t\t\t\tfloat h = hsl.r, s = hsl.g, l = hsl.b; \t\t\t\t\t\t\t\t\t\tvec4 mapv = texture2D(map, vec2(h+0.0015, 0));\t\t\t\t\tfloat nh = mapv.r; \t\t\t\t\tfloat sc = mapv.g; \t\t\t\t\tfloat lc = mapv.b; \t\t\t\t\t\t\t\t\t\tfloat cf = -lc, tv=mn;\t\t\t\t\tif(0.0<lc) {  cf=lc;  tv=mx;  }\t\t\t\t\t\t\t\t\t\tfloat a0 = cfa + cfb*cf*tv, a1 = cfb*(1.0-cf);\t\t\t\t\trgb = a0 + a1 * rgb;\t\t\t\t\t\t\t\t\t\thsl = rgbToHsl(rgb);  s = hsl.g;  l = hsl.b; \t\t\t\t\tfloat ns = sc; \t\t\t\t\tif(colorize==0) {\t\t\t\t\t\tif(sc>0.0) sc = pow(tan((3.14159265359*0.5)*sc),1.3);\t\t\t\t\t\tns = min(s * (1.0 + sc), 1.0); \t\t\t\t\t} \t\t\t\t\t\t\t\t\t\tgl_FragColor = vec4(hslToRgb(nh,ns,l),src.w); \t\t\t\t\t\t\t\t\t}";
    this.zw(j, fS.QF.on);
  };
  fS.BO[1].prototype = new fS.jm();
  fS.BO[1].prototype.cu = function (j, q) {
    this.vU.set(q.map);
    this.lc(["source", "map", "cfa", "cfb", "colorize"]);
    var m = fS.lB,
      n = this.Si;
    m.uniform1f(n.cfa, q.acO);
    m.uniform1f(n.cfb, q.Ek);
    m.uniform1i(n.colorize, q.amG);
    this.ne([n.source, j, n.map, this.vU.vD]);
    m.activeTexture(m.TEXTURE1);
    var G = m.LINEAR;
    m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MIN_FILTER, G);
    m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MAG_FILTER, G);
    m.activeTexture(m.TEXTURE0);
  };
  fS.BO[2] = function () {
    fS.jm.call(this);
    var j =
      "\t\t\tprecision mediump float;\t\t\t" +
      fS.SI.L$ +
      "\t\t\t" +
      fS.SI.vE +
      "\t\t\t" +
      fS.SI.ld +
      "\t\t\t" +
      fS.SI.r0 +
      "\t\t\t" +
      fS.SI.wL +
      "\t\t\t" +
      fS.SI.awA +
      "\t\t\t" +
      fS.SI.avY +
      "\t\t\t\t\t\tuniform sampler2D source;\t\t\tuniform float vib; \t\t\tuniform float sat; \t\t\tuniform vec3  yF; \t\t\tconst float PI = 3.141592653; \t\t\t\t\t\tvarying vec2 sCoord;\t\t\tvec3 vibrate(vec3 rgb) {  \t\t\t\tvec3 yuv = rgbToYuv * rgb; \t\t\t\treturn yuvToRgb * (yuv * yF); \t\t\t} \t\t\t\t\t\tvoid main(void) { \t\t\t\tvec4 src = texture2D(source, sCoord); \t\t\t\tvec3 rgb = src.rgb; \t\t\t\trgb = pow(rgb,vec3(2.4)); \t\t\t\t\t\t\t\trgb = clamp(vibrate(rgb), 0.0, 1.0); \t\t\t\t\t\t\t\trgb = pow(rgb,vec3(1.0/2.4)); \t\t\t\t\t\t\t\tvec3 hsl = rgbToHsl(rgb);  \t\t\t\tfloat nsat = max(0.0, min(1.0, hsl.y*(1.0+sat)));  \t\t\t\trgb = hslToRgb(hsl.x, nsat, hsl.z);  \t\t\t\t\t\t\t\tgl_FragColor = vec4(rgb,src.w); \t\t\t}";
    this.zw(j, fS.QF.on);
  };
  fS.BO[2].prototype = new fS.jm();
  fS.BO[2].prototype.cu = function (j, q) {
    this.lc(["source", "vib", "sat", "yF"]);
    var m = fS.lB,
      n = this.Si;
    m.uniform1f(n.vib, q.rw[0]);
    m.uniform1f(n.sat, q.rw[1]);
    m.uniform3fv(n.yF, new Float32Array([q.rw[2], q.rw[3], q.rw[3]]));
    this.ne([n.source, j]);
  };
  fS.BO[3] = function () {
    fS.jm.call(this);
    var j =
      "\t\t\tprecision mediump float;\t\t\t\t\t\tuniform sampler2D source;\t\t\tuniform mat4  trf; \t\t\t\t\t\tvarying vec2 sCoord;\t\t\t\t\t\tvoid main(void) { \t\t\t\tvec4 src = texture2D(source, sCoord); \t\t\t\tvec4 nsr = vec4(src.rgb,1.0); \t\t\t\tgl_FragColor = vec4((trf*nsr).rgb,src.w); \t\t\t\t\t\t\t}";
    this.zw(j, fS.QF.on);
  };
  fS.BO[3].prototype = new fS.jm();
  fS.BO[3].prototype.cu = function (j, q) {
    this.lc(["source", "trf"]);
    var m = fS.lB,
      n = this.Si;
    m.uniformMatrix4fv(n.trf, !1, new Float32Array(B.kz.up(q.OC)));
    this.ne([n.source, j]);
  };
  fS.BO[4] = function () {
    fS.jm.call(this);
    var j =
      "\t\t\tprecision mediump float; \t\t\t" +
      fS.SI.fa +
      "\t\t\t" +
      fS.SI.L$ +
      "\t\t\t" +
      fS.SI.wL +
      "\t\t\t" +
      fS.SI.r0 +
      "\t\t\t\t\t\tuniform sampler2D source;\t\t\tuniform vec3 mnm;\t  \t\t\tuniform vec3 mxm;\t  \t\t\tuniform vec3 shift;   \t\t\tuniform float lim;    \t\t\t\t\t\tvarying vec2 sCoord;\t\t\t\t\t\tvoid main(void) { \t\t\t\tvec4 src = texture2D(source, sCoord); \t\t\t\t\t\t\t\tvec3 lab = rgbToLab(src.rgb);\t\t\t\tfloat scl = labSimilar(lab, mnm,mxm, lim);\t\t\t\t\t\t\t\tvec3 hsv = rgbToHsl(src.rgb); \t\t\t\tfloat nh = 2.0 + hsv[0]+shift[0]; \t\t\t\thsv[0] = fract(nh); \t\t\t\thsv[1] = max(0.0, min(1.0, hsv[1] + shift[1])); \t\t\t\thsv[2] = max(0.0, min(1.0, hsv[2] + shift[2])); \t\t\t\t\t\t\t\tvec3 rgb = hslToRgb(hsv[0], hsv[1], hsv[2]); \t\t\t\t\t\t\t\tgl_FragColor = vec4(mix(src.rgb,rgb,scl),src.w); \t\t\t\t\t\t\t}";
    this.zw(j, fS.QF.on);
  };
  fS.BO[4].prototype = new fS.jm();
  fS.BO[4].prototype.cu = function (j, q) {
    this.lc(["source", "mnm", "mxm", "shift", "lim"]);
    var m = fS.lB,
      n = this.Si;
    m.uniform3fv(n.mnm, new Float32Array(q.IG));
    m.uniform3fv(n.mxm, new Float32Array(q.Lc));
    m.uniform3fv(n.shift, new Float32Array(q.shift));
    m.uniform1f(n.lim, q.qY);
    this.ne([n.source, j]);
  };
  fS.BO[5] = function () {
    fS.jm.call(this);
    var j =
      "\t\t\tprecision mediump float;\t\t\t" +
      fS.SI.Iq +
      "\t\t\t" +
      fS.SI.nd +
      "\t\t\t" +
      fS.SI.azi +
      "\t\t\t" +
      fS.SI.r0 +
      "\t\t\t\t\t\tuniform sampler2D source;\t\t\tuniform vec3 cfs[18]; \t\t\t\t\t\tvarying vec2 sCoord;\t\t\t\t\t\tvoid main(void) { \t\t\t\tvec4 src = texture2D(source, sCoord); \t\t\t\tvec3 rgb = src.rgb; \t\t\t\tvec3 hsl = rgbToHsl(rgb); \t\t\t\tfloat mx = max(rgb.r, max(rgb.g, rgb.b)); \t\t\t\tfloat mn = min(rgb.r, min(rgb.g, rgb.b)); \t\t\t\t\t\t\t\tvec3 CMY = ONE3 - rgb; \t\t\t\tvec3 d = ZERO3; \t\t\t\t\t\t\t\tfor(int j=0; j<9; j++) \t\t\t\t{ \t\t\t\t    vec3 NCMY = CMY * cfs[j+j] + cfs[j+j+1]; \t\t\t\t\t\t\t\t\t\tfloat cfK = 0.0;\t\t\t\t\tif     (j< 6) { \t\t\t\t\t\tcfK = hueCF(float(j)*(1.0/6.0), hsl.x); \t\t\t\t\t\tcfK = cfK * hsl.y * 2.0*min(hsl.z, 1.0-hsl.z); \t\t\t\t\t} \t\t\t\t\telse if(j==6) cfK = max(0.0,mn-0.5)*2.0;\t\t\t\t\telse if(j==7) cfK = 1.0-(abs(mx-0.5)+abs(mn-0.5));\t\t\t\t\telse          cfK = max(0.0,0.5-mx)*2.0;\t\t\t\t\t\t\t\t\t\td += (max(ZERO3, min(ONE3, NCMY))-CMY)*cfK; \t\t\t\t} \t\t\t\t\t\t\t\tCMY = max(ZERO3, min(ONE3, CMY+d)); \t\t\t\trgb = ONE3 - CMY; \t\t\t\t\t\t\t\tgl_FragColor = vec4(rgb,src.w); \t\t\t\t\t\t\t}";
    this.zw(j, fS.QF.on);
  };
  fS.BO[5].prototype = new fS.jm();
  fS.BO[5].prototype.cu = function (j, q) {
    this.lc(["source", "cfs"]);
    var m = fS.lB,
      n = this.Si;
    m.uniform3fv(n.cfs, q.a3W);
    this.ne([n.source, j]);
  };
  fS.BO[6] = function () {
    fS.jm.call(this);
    var j =
      "\t\t\tprecision mediump float;\t\t\t" +
      fS.SI.L$ +
      "\t\t\t" +
      fS.SI.nd +
      "\t\t\t" +
      fS.SI.azi +
      "\t\t\t" +
      fS.SI.r0 +
      "\t\t\t" +
      fS.SI.wL +
      "\t\t\t\t\t\tuniform sampler2D source;\t\t\tuniform float wght[6]; \t\t\tuniform float prms[6]; \t\t\t\t\t\tvarying vec2 sCoord;\t\t\t\t\t\tvoid main(void) { \t\t\t\tvec4 src = texture2D(source, sCoord); \t\t\t\tvec3 rgb = src.rgb; \t\t\t\t\t\t\t\tfloat tint=prms[0], hue=prms[1], lum=prms[2], mcf=prms[3], x0=prms[4], x1=prms[5]; \t\t\t\tvec3 hsl = rgbToHsl(rgb); \t\t\t\t\t\t\t\tfloat cf = 0.0;\t\t\t\tfor(int j=0; j<6; j++) cf += min(1.0, 1.7*(1.0-hsl.z)) * hsl.y *  wght[j] * hueCF(hsl.x, float(j)*(1.0/6.0));\t\t\t\t\t\t\t\tfloat lig = max(0.0, min(1.0, hsl.z*(1.0+cf)));\t\t\t\tif(tint==1.0) {  \t\t\t\t\tfloat totl = 0.0;\t\t\t\t\tif     (lig<x0) totl = lig*(0.5/lum); \t\t\t\t\telse if(lig<x1) totl = lig + (mcf)*(0.5 - lum); \t\t\t\t\telse            totl = 1.0 - (1.0-lig)*0.5/(1.0-lum); \t\t\t\t\t\t\t\t\t\thsl.x = hue;  \t\t\t\t\thsl.y = min(1.0, mcf + 3.0*mcf*abs(lig-0.5*(x0+x1))); \t\t\t\t\thsl.z = totl; \t\t\t\t} \t\t\t\telse {  hsl.x=0.0;  hsl.y=0.0;  hsl.z=lig;  } \t\t\t\t\t\t\t\trgb = hslToRgb(hsl.x, hsl.y, hsl.z); \t\t\t\t\t\t\t\tgl_FragColor = vec4(rgb,src.w); \t\t\t\t\t\t\t}";
    this.zw(j, fS.QF.on);
  };
  fS.BO[6].prototype = new fS.jm();
  fS.BO[6].prototype.cu = function (j, q) {
    this.lc(["source", "wght", "prms"]);
    var m = fS.lB,
      n = this.Si,
      G = [q.Ao, q.aMe, q.Sn, q.aky, q.oV, q.ab7];
    m.uniform1fv(n.wght, new Float32Array(q.a4h));
    m.uniform1fv(n.prms, new Float32Array(G));
    this.ne([n.source, j]);
  };
  fS.BO[7] = function () {
    fS.jm.call(this);
    this.x9 = {};
    var j =
      "\t\t\tprecision mediump float;\t\t\t" +
      fS.SI.aeS +
      "\t\t\t\t\t\tuniform sampler2D source;\t\t\tuniform sampler2D lut;\t\t\tuniform float N;\t\t\t\t\t\tvarying vec2 sCoord;\t\t\t\t\t\tvoid main(void) { \t\t\t\tvec4 src = texture2D(source, sCoord); \t\t\t\tvec4 rs = mapLut(src, lut, N); \t\t\t\tgl_FragColor = vec4(rs.rgb,src.w); \t\t\t\t\t\t\t}";
    this.zw(j, fS.QF.on);
  };
  fS.BO[7].prototype = new fS.jm();
  fS.BO[7].prototype.cu = function (j, q) {
    this.lc(["source", "lut", "N"]);
    var m = fS.lB,
      n = this.Si,
      G = q.Jd,
      W = q.py;
    if (this.x9["m" + G] == null)
      this.x9["m" + G] = new fS.Rx(G, G * G, fS.NT());
    var k = this.x9["m" + G];
    k.set(W);
    m.uniform1f(n.N, G);
    this.ne([n.source, j, n.lut, k.vD]);
    m.activeTexture(m.TEXTURE1);
    var T = m.LINEAR;
    m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MIN_FILTER, T);
    m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MAG_FILTER, T);
    m.activeTexture(m.TEXTURE0);
  };
  fS.filter = {
    KZ: {},
    on: "1u,/0*&<>2OI;<m^XJZ;]d/vp^r|ows/)z{M>5g7:@5nVPLIGeVMX`|njge-'&-$V&)/$BbHB4D%GNx`KSI=_f_menp%E+%vwKB4&'XQY``edhootpjxp&%*'vhxY{#>5HINMDXX]YnVW",
    aGR: 0,
    av4: 1,
    at: 2,
    aBD: 8,
    aG4: 3,
    abR: 4,
    a0r: 5,
    Mx: 6,
    a6y: 7,
  };
  fS.filter.dH = function (j, q) {
    var m = fS.filter,
      n,
      G = j.e + ":" + (j.xB ? j.xB.join(",") : ""),
      n = fS.filter.KZ[G];
    if (n == null) n = fS.filter.KZ[G] = new fS.KZ[j.e](j.xB);
    n.yP();
    n.cu(q, j);
    fS.lB.drawArrays(fS.lB.TRIANGLES, 0, 6);
  };
  fS.KZ = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
  fS.KZ[7] = function () {
    fS.jm.call(this);
    var j =
      "1%* !*709;O;?@DOaKTZOe/lhffrxv,#s#)($4VkJA@II=BzXTRR^dbwqcd6's%xN,(&&286K5>D9O]LIYXH)P1o]q{nvr.(yzL=4f69?4mLHECaRIT\\xjfca)~|noC2).)[8*+^U`_felkrn$R[aVlzaoxD:;@N|)/G)28-CQNtjkp~`&*#!&4u*-.(q}$<}'-\"8FBi_`esTz~wuz)i~\"#xvhi=,r~(U0$:9==3bw^MLUUINwne8gjpe/}opB;/FMMRQBX__d`dGXLo%P\\e$kca,Bkw!?uR.3.CQf0<E_DAQP@QYbxm!-+0.~2iJ0).)L4,*YjDIDg>zJRH2aS\\;jjpvD}#}N4";
    this.zw(bA.v9(j), bA.v9(fS.filter.on));
  };
  fS.KZ[7].prototype = new fS.jm();
  fS.KZ[7].prototype.cu = function (j, q) {
    this.lc(["source", "iwh", "kern"]);
    var m = fS.lB,
      n = this.Si;
    m.uniform2fv(n.iwh, q.Di);
    m.uniform1fv(n.kern, q.aqi);
    this.ne([n.source, j]);
  };
  fS.KZ[6] = function (j) {
    fS.jm.call(this);
    var q = j[0],
      m = j[1],
      n = j[2],
      G =
        "1%* !*709;O;?@DOaKTZOe/lhffrxv,#s#)($4VkJA@II=BzXTRR^dbwqcd6's%xN,(&&286K5>D9O]SEK%cQeobjf\"{mn@1(Z*-3(a@<97UF=HPl^ZWU|rpbc7&|\"|O,}~RITSZY`_fbwFOUJ`nUcl8./4Bp|#;|&,!7EAh[\"'zuV|!7<0+k!$%zkk0$J>'x~:=<d<.4[U<KMVNV`S,j\\]1 fr{I$w.-11'VkRA@II=BkbY,[^dY#qcd6/NVb<@#4(K`,8A_G?=g}GS\\zQ.ini~-Bkw!Lw&/HK^D=B=ar<JS|NNrafa%[}=3495/&+&I1)'VgAFAd;wGOE/^PY8ggmsAz zK1",
      W = bA.v9(G);
    W = W.replaceAll("PRC", n + ".0");
    W = W.replaceAll("DIR", ["x,0", "0,x"][m]);
    this.zw(W, fS.QF.on);
  };
  fS.KZ[6].prototype = new fS.jm();
  fS.KZ[6].prototype.cu = function (j, q) {
    this.lc(["source", "iwh", "rad"]);
    var m = fS.lB,
      n = this.Si;
    m.uniform2fv(n.iwh, q.Di);
    m.uniform1f(n.rad, q.SG);
    this.ne([n.source, j]);
  };
  fS.KZ[4] = function (j) {
    fS.jm.call(this);
    var q = j[0],
      m = j[1],
      n =
        "\t\t\tprecision highp float;\t\t\tuniform sampler2D source;\t\t\tuniform vec2 iwh;\t\t\tuniform float rrad;\t\t\tuniform float tr;\t\t\t\t\t\tvarying vec2 sCoord;\t\t\tconst float PRC=" +
        j[2] +
        ".0; \t\t\t\t\t\tvoid main(void) {\t\t\t\tvec4 sclr = texture2D(source, sCoord);\t\t\t\tfloat rad = rrad; \t\t\t\tif(rad!=0.0) {\t\t\t\t\tvec4 sum=vec4(" +
        ["1.0,1.0,1.0,0.0", "0.0,0.0,0.0,1.0", "0.0"][m] +
        "); vec4 cnt = vec4(0.0);\t\t\t\t\tfor(float y=-PRC; y<=PRC; y++) {\t\t\t\t\t\tif(y<-rad || y>rad) continue; \t\t\t\t\t\tfor(float x=-PRC; x<=PRC; x++) { \t\t\t\t\t\t\tif(" +
        ["x<-rad || x>rad", "(x*x+y*y)>rad*rad"][q] +
        ") continue; \t\t\t\t\t\t\tvec4 clr = texture2D(source, sCoord+vec2(x,y)*iwh);  \t\t\t\t\t\t\t" +
        [
          "if(clr.w!=0.0) sum.rgb=min(sum.rgb,clr.rgb);  sum.w=max(sum.w,clr.w)",
          "sum.rgb=max(sum.rgb,clr.rgb);  sum.w=min(sum.w,clr.w)",
          "if(abs(sclr.r-clr.r)<tr) {  sum.r+=clr.r;  cnt.r+=1.0;  };" +
            "if(abs(sclr.g-clr.g)<tr) {  sum.g+=clr.g;  cnt.g+=1.0;  };" +
            "if(abs(sclr.b-clr.b)<tr) {  sum.b+=clr.b;  cnt.b+=1.0;  };",
        ][m] +
        "; \t\t\t\t\t\t\t\t\t\t\t\t\t}\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\tsclr = " +
        (m == 2 ? "vec4(sum.rgb/cnt.rgb, sclr.w)" : "sum") +
        ";\t\t\t\t}\t\t\t\tgl_FragColor=sclr; \t\t\t}";
    this.zw(n, fS.QF.on);
  };
  fS.KZ[4].prototype = new fS.jm();
  fS.KZ[4].prototype.cu = function (j, q) {
    this.lc(["source", "iwh", "rrad", "tr"]);
    var m = fS.lB,
      n = this.Si;
    m.uniform2fv(n.iwh, q.Di);
    m.uniform1f(n.rrad, q.XT);
    m.uniform1f(n.tr, q.ajy);
    this.ne([n.source, j]);
    var G = m.LINEAR;
    G = m.NEAREST;
    m.activeTexture(m.TEXTURE0);
    m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MIN_FILTER, G);
    m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MAG_FILTER, G);
    m.activeTexture(m.TEXTURE0);
  };
  fS.KZ[5] = function () {
    fS.jm.call(this);
    var j =
      '1%* !*709;O;?@DOaKTZOe/lhffrxv,#s#)($4VkJA@II=BzXTRR^dbwn_ntso BW6-050`>:88DJH]WIJ{lYj^4qmkkw}{1z$*~5C(7;DmKGEEQWUjT]cXn|egmoG&s(2%-)D>01bSJ|LOUJ$O^`hlzdmsh~-bPKGLZ9520N?6AIeWSPNuki[\\0~qht}K(yzNEPQVRg6?E:P^YX]X+!"\'5sef:)xQO*}4377-\\qXGJOJkbY,[^dY!6dpv/py t+96\\OwcEjn\'rThklbP\\bz\\ek`v%!H;cO0VZr^?TWXNL>?paSK(a4cfla+ykl>7+A2DH+<0eD67jYAS ZNdcgg]-B)wz z<3%|EL/gc2;A6LZ#}HV^tTf ]o+"{mnB9DEKOUOVW^d^efpjrrwsv,Zci^t#}pIt+&@HcKLXZ]^cVd\\gssxxP_cl$()55::q!%.EISUX[^_d`cxXW\\Wlz0m`7neqz+9N,~D2&<;??5dy`ONWWKPypbZ#8}!mukU%v ^..4:g;:L^I@LUt`_d_!wocyx||rBW>-,55).WNEwGJPElriRTZ\\"7|';
    this.zw(bA.v9(j), bA.v9(fS.filter.on));
  };
  fS.KZ[5].prototype = new fS.jm();
  fS.KZ[5].prototype.cu = function (j, q) {
    this.lc(["source", "ssum", "iwh", "amnt", "edgf"]);
    var m = fS.lB,
      n = this.Si;
    m.uniform2fv(n.iwh, q.Di);
    m.uniform1f(n.amnt, q.amB);
    m.uniform1f(n.edgf, q.aru);
    this.ne([n.source, j, n.ssum, q.ab3]);
  };
  fS.KZ[3] = function () {
    fS.jm.call(this);
    var j =
      '1%* !*709;O@;=ETOUgQZ`Uk5rnllx~|2)y)/.*:\\qPGFOOCH!^ZXXdjh}wij<-y+~T2.,,8><Q;DJ?Uc[NR`.kgeeqwu+t}$x/=36(.gEA??KQOd^PQ#sjjbc>{wuu"(&;5\'(ZJ<@=JtRNLLX^\\qbYo2!tvv\'@N,(&&286K<3IkZNPP`z(fThremi%~pqC4+]-06+d/?BBXEM2TTdugYZ.|v," qrF5)X,#=OAWACCSlkYoY[[k&!6pfx||{0!w2D-$>P<\\J`HhWioTKewc$s(o0|14JNDEJX>:,-_OE7G@qi[MN!pdo&|vhi<, ,>42$%WG=/H*8FySLTp\\g{&))4:;7CC;$0CSRPXZ_cg]Wd]quw~$}\'-/50=wm $$#7-~8y(6L\\R<EKNTlZLeGUc#8}ykl?/yv./QI;-.`PDOe\\VHI{k_k}smcuyyx-8&w(!RJ6AW?K]bM?OHyq}}%\'#lw.66B8".@E0"2+\\Tb`fbLXmxu"wal %oaqj<4?@KOE/;PWXea]GRe_owv{nz~))3<"}opC3,(&&UM?12dTHSi`ZLM oco"wqgy}}|1\'x)"SK7BX@L^bmlqqxx},qZiksw&ox~s*8kpda^Z[`nMIFDbSJU]ykgdb* }opD3*|)2_:.DCGG=l"hWV__SX"xoBqtzo7Lz$*~5C+/=D;r:>RiYLP^}gZfo.z/Dr{"v-;1#)d/3AH?cORDJ$UUygY_~>45:6,*{|O?6;6f5>D9O]T[$yz ~ubjb?66;Iw$*B$-3(>LIob)."|^$(>C72s(+,"rzrOFFKK+3+e77[PuiRDJehh0gY_\'!gvx"y",~W&28P2;A6LZV}p7<0+k26LQE@!6KCBGC9\'06+AO6NuTiKSK&WW{o6*rdj&)(P(y GA(79B:BL?wIImiU]Bddt&wij>5s,B3H2$*T[\\a]`c]DSU^V^h[4rde9(nz$Q, 6599/^sZIHQQEJsja4cfla+ykl>7u.D5GK.?3Vk:CI>TbIM)PTh obft4my#A.BW&/5*@N3K?wmnvpMYb!h$,-7>2nz$B~EMNTWS0<Ec;vENTI_mWfZ7pphi7%9uyB~#\\..R/G;tMMEFsbtnUaj)phfD2>>CC /#KO,8A_G?=]kcM\\Pyi[\\/\'9384Iw!\'{2@49>iW6:t@DRYPj-p{~^bpwn6os;D|!/6-PJgP[:>y|rsx+~ %2#ae1ko}%{?H $KNc2;A6LZAX!ww||chm7ry0En&L(-(H]\'>S0<EcKCA|beywX`V@oajIxx~%R"*n11ARD67jaippus_2adj_,y.98=<@GGLJ6h8;A6bQdonsrzx {~8rde90<:B@HFNI]=/0cZedkjqpxs)z#vm`luC qrF=,1,P8?V^^c_tZVHI{k_S2n`a4,zM| &zG5K6h8;A6bQfontp]0_bh]*w+@~pqD4(|Z7)*\\TCuEHNCo^s}{#\',$pCru{p=+AJIQK8j:=C8dSezYKL~n`dk`;osp};*PSIJOBdHA=;;jbNBoWLuo-u`]tu80{o=%yCX**N8<9FcSx{rrwsm_cj_+x@tx t@/U*.5*UEhD7CLjRJHhv,yY]kri.uyv$A/BF.29.f6>4}M?H\'VV\\b0i\\hq=#';
    this.zw(bA.v9(j), bA.v9(fS.filter.on));
  };
  fS.KZ[3].prototype = new fS.jm();
  fS.KZ[3].prototype.cu = function (j, q) {
    this.lc("source iwh tdep rrad spec nois poly0 poly1".split(" "));
    var m = fS.lB,
      n = this.Si;
    m.uniform2fv(n.iwh, q.Di);
    m.uniform1f(n.tdep, q.aKR);
    m.uniform1f(n.rrad, q.XT);
    m.uniform2fv(n.spec, q.aLz);
    m.uniform3fv(n.nois, q.afe);
    m.uniformMatrix4fv(n.poly0, !1, q.aDm);
    m.uniformMatrix4fv(n.poly1, !1, q.ajT);
    this.ne([n.source, j]);
    var G = m.LINEAR;
    m.activeTexture(m.TEXTURE0);
    m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MIN_FILTER, G);
    m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MAG_FILTER, G);
    m.activeTexture(m.TEXTURE0);
  };
  fS.KZ[0] = function () {
    fS.jm.call(this);
    var j =
      "1%* !*709;O@;=ETOUgQZ`Uk5|uqoo{\" 5,|,21-=_tSJIRRFK$kd`^^jpn$}opB3 1%ZB;755AGEZTFGyiYT.unjhhtzx.w!'{2@7/3;5mUO=Q[NVRmgYZ,|sFux~sM5~(.#9G23E'?;AOZm_QR$th$}|$mv|q(62M?_E=1GFJJ@o%kZYbbV[%{o-{mn@9AHHMLCVW\\X\\?PDgo\\#jT]cXn|x5&F,$w.-11'VkRA@II=BkbVsbTU' z//43*=>C?C&7+NVCiQ;DJ?Uc`zl-rj^tswwm=R9('00$)RI=ZI;<mfatuzy}%%*&*l}q5=*P8\"+1&<JGbSsYQE[Z^^T$9 nmvvjo90$A0\"#TMH[\\a`WkkplpSdX{$p7~hqwl#1x0J=]CVWc[R:Qm^~doc }l(#8 irxm$2y2L>^DWXd\\S;Sn_ epe!~n)$9!zlm@0\"6V<.286-;;O=bTFGyqyTk(#`x31(8r*DA~7ROF.E_\\:Rlgj g]Seiih|drz1xs>$AV>?D>:75SD;FNj\\XUSztszdmsh~-({6V<PPUHVN9:L.FBHVatc6ehnc+/{sw yR:%-#l<.7uEEKQa\"g_Sihllb2G.|{%%x}G>5g7:@5\\`QEzbc";
    this.zw(bA.v9(j), bA.v9(fS.filter.on));
  };
  fS.KZ[0].prototype = new fS.jm();
  fS.KZ[0].prototype.cu = function (j, q) {
    this.lc(["source", "iwh", "ld", "shine"]);
    var m = fS.lB,
      n = this.Si;
    m.uniform2fv(n.iwh, q.Di);
    m.uniform3fv(n.ld, q.ak0);
    m.uniform1f(n.shine, q.al1);
    this.ne([n.source, j, n.tang, q.ZG]);
  };
  fS.KZ[1] = function () {
    fS.jm.call(this);
    var j =
      "1%* !*709;O@;=ETOUgQZ`Uk5|uqoo{\" 5,|,21-=_tSJIRRFK$kd`^^jpn$}opB3 1%ZB;755AGEZDMSH^lYfY4{tpnnz!~4}'-\"8F,?9FJEAya[I]gZb^ysef8) R\"%+ YA+4:/ES?;PHjLU[Pfths*!jsyn%3'3E?>E/8>3IWM?X:HVl-ribj'r}2<??JPQMYYQ:FYihfnpuy}smzs(,.5:4=CEKFS;1'9==<PF8Q3AOeukU^dgm&se~`n|<Q9:?)28-CQ<=O,PMZOtfXY+{n+%$+%vwI:.@`FQ<ZI;<mfwuzx}|%(1+0,/3u#uP82$%VG9>PpV@IORXp\\w-tn`a3$u|]0P6*I.3`H2;A6LZQqt$]V^z'**/+@(\"stF7}M@`F-<CZDIdhUux&mgYZ,|c4&F,r\")@*/L;-._Xddihppuqtxe&)6}gpvk\"0\"6V<($91S2abPfApq`r(oYbh]s\"sz+K1|x.&H'WWE[6efUg|dNW]Rhvha @&qm#z={KL:P+[[J\\qYCLRG]k]dYw8}iezr5sDD2H#SSBTiQ;DJ?UcOzl-rcbt'p%4+|$@&-mN<OdL6?E:P^Jvg(m^]o\"kd/t{p;!(hI7J_G1:@5KYS_ eVUgy])'}i63x `A0BW?9EeKVHTsZmnxoi,o#$)6005C+t}$x/=373>LlRLXf^DWQ^b]Yv$|hdyq4r\")@,L:MQ>^a_:IPgSsbtxe&)$9!vl~##\"6,0,7OP\\\\acjhmi~fglfb_]{lcnv3%!}{C=<C=/0aRNR[{aX+Z]cX&cth>& qrF5{++AaG?3IHLLBq'm\\[ddX]'}tGvy t<Q9 //S*KkQ<=O,PMZOthl~4{fndN}oxW''-3CcI0??pXY";
    this.zw(bA.v9(j), bA.v9(fS.filter.on));
  };
  fS.KZ[1].prototype = new fS.jm();
  fS.KZ[1].prototype.cu = function (j, q) {
    this.lc(["source", "iwh", "isc", "bristle"]);
    var m = fS.lB,
      n = this.Si;
    m.uniform2fv(n.iwh, q.Di);
    m.uniform1f(n.isc, q.aiZ);
    m.uniform1f(n.bristle, q.a9F);
    this.ne([n.source, j]);
  };
  fS.KZ[2] = function () {
    fS.jm.call(this);
    var j =
      "1%* !*709;O@;=ETOUgQZ`Uk5|uqoo{\" 5,|,21-=_tSJIRRFK$kd`^^jpn$zkz! {,NcB:*:6lTMIGGSYWlfXY+{hymC+$ }}*0.C-6<1GULEFOF#jc_]]iom#lu{p'5}4/1_GA/CM@HD_YKL}ne8gjpe?'py t+94%,-1@NY;DJ?Uc_rlkrh^ptts(p'\"<7G.0;NBX5KFHdmivuzwd]^g^*vopyp;5AV>?D>:75SD;FNj\\XUSztszdmsh~-x+S-&'0'S?89B9u]GPVKaofmx9~338F.(yzN=494IiOG;QPTTJy/udcll`e/&|O~\"(|DYA;-._P:GYy_tsxuvfZpossi9N5%t%!H?6h8;A6]eSWmZLM~w#$.(/0:14I1+|}O@(FfL6CpXBNTlQYbp]4*8 lB;G/{@CD>=D>01bSGYy_V)X[aV0wams,mv|q(6,YOPUcKAmfgjmns\"i_z}~xw~xjk=.~x7W=RQVSTD8NMQQGv,rbRb^&|p,4\"&<)z{MFQR\\V]^h_bw_LLpP^f|e_*e-C:;@<65<-'bU93lTUZB`!fWQ+rfx'<\"rl5w)|R:$-3(>LGRrXSDKLP_uc|2ypup&4I/*?-!76::0_t[JIRRFKtk_z0wnu,A~E-yy>,Z\\+=QK1D:9Fx`afN*|Yf4{|\"ltjT$u~]--39IiOFKFefrrwyah|2yz";
    this.zw(bA.v9(j), bA.v9(fS.filter.on));
  };
  fS.KZ[2].prototype = new fS.jm();
  fS.KZ[2].prototype.cu = function (j, q) {
    this.lc(["source", "tang", "iwh", "sigma", "expo"]);
    var m = fS.lB,
      n = this.Si;
    m.uniform2fv(n.iwh, q.Di);
    m.uniform1f(n.sigma, q.Gv);
    m.uniform1f(n.expo, q.Rj);
    this.ne([n.source, j, n.tang, q.ZG]);
    var G = m.LINEAR;
    m.activeTexture(m.TEXTURE0);
    m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MIN_FILTER, G);
    m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MAG_FILTER, G);
    m.activeTexture(m.TEXTURE0);
  };
  fS.KZ[8] = function () {
    fS.jm.call(this);
    var j =
      "n\\[KFIPCFBP;0,.7,,8{~~m}A#ukc]cc[j[FOOH>HdsL=693! R4'|tnttl{lW``YOYu%]O9C9iK>4,&,,$3'rm9$juc3tg]UOUUM\\@CC2BJ;.),|S5)p~#oqg|p\\W#m^+TQQ@sUI?6.F1\"')?+!wo1%}~beeTdlR^!TGBE6\\B503$Z< ##q\"*z{!;z)#\"*k_KFs\\MLAPjJ<*:31+zDS4|uxr`_#sd1ZWWFgvXL83`I;%@Z:,y*#!zj4C$mWaWxiZ'PMM<]lNB.)T?#*6P0?87.)r\\&mk{bNItglgk_`[_PM\\>2}xD/p)C#fm5vZ``rQSV^EuemO6eX^@'EB=1*+~je1{iu0o`-VSSBuW;AAS/22!19)P@;:B$s:-(%\"|{$eUjgbVOPD0+VA, 8R2A:90+tbrkicS|,lV@J@aR@UW?=M4 zF9>9=12-1\"~.oVPnHPRbE9]3TdUPOE923}qG4qe9zutVn)hSGz\\JV^mM8,N+6$S5&%y)1@ q_ohf`Py)iRKNH65XI7L[=./?<I+qk*q:6^jxlLYIBIuWRQ3hU,3Z<76z|lPyehAjdddn)hYXMfaga`\\>?M\\>9";
    this.zw(bA.Cs(j), bA.v9(fS.filter.on));
  };
  fS.KZ[8].prototype = new fS.jm();
  fS.KZ[8].prototype.cu = function (j, q) {
    this.lc(["source", "tang", "iwh", "sigma"]);
    var m = fS.lB,
      n = this.Si;
    m.uniform2fv(n.iwh, q.Di);
    m.uniform1f(n.sigma, q.Gv);
    this.ne([n.source, j, n.tang, q.ZG]);
    var G = m.LINEAR;
    m.activeTexture(m.TEXTURE0);
    m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MIN_FILTER, G);
    m.texParameteri(m.TEXTURE_2D, m.TEXTURE_MAG_FILTER, G);
    m.activeTexture(m.TEXTURE0);
  };
  function B() {}
  B.O = {};
  B.am$ = {};
  B.S = function (j) {
    return JSON.parse(JSON.stringify(j));
  };
  B.oM = function (j) {
    if (j instanceof fS.Rx) return j.depth;
    return j instanceof Float32Array ? 32 : j instanceof Uint16Array ? 16 : 8;
  };
  B.TN = function (j) {
    return j == 8 ? 255 : j == 16 ? 65535 : 1;
  };
  B.sL = function (j, q, m) {
    var n = B.oM(j),
      G = j.length;
    if (n == q) return j;
    if (m == null) m = B.j(G, q);
    if (q == 8) {
      if (n == 16) for (var y = 0; y < G; y++) m[y] = j[y] >>> 8;
      if (n == 32)
        for (var y = 0; y < G; y++) m[y] = Math.min(255, ~~(0.5 + 255 * j[y]));
    } else if (q == 16) {
      if (n == 8) for (var y = 0; y < G; y++) m[y] = (j[y] << 8) | j[y];
      if (n == 32)
        for (var y = 0; y < G; y++) m[y] = Math.min(65535, 65535 * j[y]);
    } else if (q == 32) {
      if (n == 8) for (var y = 0; y < G; y++) m[y] = j[y] * (1 / 255);
      if (n == 16) for (var y = 0; y < G; y++) m[y] = j[y] * (1 / 65535);
    }
    return m;
  };
  B.adh = function (j, q) {
    for (var y = 0; y < j.length; y += 2) j[y] = B.sL(j[y], q);
  };
  B.am0 = (function () {
    var j = [64, 64, 128, 256, 512, 1024, 2048],
      q = [];
    for (var y = 0; y < j.length; y++) {
      var m = j[y],
        n = document.createElement("canvas");
      n.width = m;
      n.height = m;
      q.push(n.getContext("2d", { willReadFrequently: !0 }));
    }
    return q;
  })();
  B.l4 = function (j, q) {
    var m,
      n = B.am0,
      y = 1,
      G = Math.max(j, q);
    while (y < n.length && G > n[y].canvas.width) y++;
    if (y == n.length) {
      m = n[0];
      var W = m.canvas;
      W.width = j;
      W.height = q;
    } else {
      m = n[y];
      m.clearRect(0, 0, j, q);
    }
    return m;
  };
  B.Ry = function (j, q, m, n) {
    if (n == null) n = new Uint32Array(q * m);
    n[0] = j[0];
    for (var G = 1; G < q; G++) n[G] = n[G - 1] + j[G];
    for (var W = 1; W < m; W++) {
      var y = W * q;
      n[y] = n[y - q] + j[y];
      for (var G = 1; G < q; G++)
        n[y + G] = j[y + G] + n[y + G - 1] + n[y + G - q] - n[y + G - q - 1];
    }
    return n;
  };
  B.BM = function (j, q, m, n, G, W) {
    var k = (G - 1) * q,
      T = W * q;
    return j[T + n] - j[T + m - 1] - j[k + n] + j[k + m - 1];
  };
  B.aHL = function (j, q, m, n) {
    var G = q * 4;
    if (n == null) n = new Uint32Array(q * m * 4);
    n[0] = j[0];
    n[1] = j[1];
    n[2] = j[2];
    n[3] = j[3];
    for (var W = 1; W < q; W++) B.aJN(j, n, 4, W << 2);
    for (var k = 1; k < m; k++) {
      var y = (k * q) << 2;
      B.aJN(j, n, G, y);
      for (var W = 4; W < G; W += 4) {
        var T = y + W;
        n[T] = j[T] + n[T - 4] + n[T - G] - n[T - G - 4];
        n[T + 1] = j[T + 1] + n[T - 3] + n[T - G + 1] - n[T - G - 3];
        n[T + 2] = j[T + 2] + n[T - 2] + n[T - G + 2] - n[T - G - 2];
        n[T + 3] = j[T + 3] + n[T - 1] + n[T - G + 3] - n[T - G - 1];
      }
    }
    return n;
  };
  B.aJN = function (j, q, m, y) {
    q[y] = q[y - m] + j[y];
    q[y + 1] = q[y - m + 1] + j[y + 1];
    q[y + 2] = q[y - m + 2] + j[y + 2];
    q[y + 3] = q[y - m + 3] + j[y + 3];
  };
  B.ax_ = function (j, q, m, n, G, W) {
    var k = (G + m) << 2,
      T = (G + q) << 2,
      b = (n + m) << 2,
      c = (n + q) << 2;
    W[0] += j[k] - j[T] - j[b] + j[c];
    W[1] += j[k + 1] - j[T + 1] - j[b + 1] + j[c + 1];
    W[2] += j[k + 2] - j[T + 2] - j[b + 2] + j[c + 2];
    W[3] += j[k + 3] - j[T + 3] - j[b + 3] + j[c + 3];
  };
  B.QM = function (j, q, m) {
    var n = {},
      G = 0,
      W = 0,
      k = new Uint32Array(j.buffer),
      T = k.length,
      b = Date.now();
    for (var c = 1; c < m - 1; c++)
      for (var a = 1; a < q - 1; a++) {
        var f = c * q + a,
          U = k[f];
        if (U >>> 24 < 230) W++;
        if (n[U] == null) {
          n[U] = !0;
          G++;
        }
      }
    if (W != 0 || G < 20) return !1;
    return !0;
  };
  B.L_ = function (j, q, m, n, G, W) {
    if (G == null) G = W = 0;
    var k = Math.round(Math.log(n) / Math.log(2)),
      T = new Uint32Array(j.buffer);
    for (var y = 0; y < m; y++)
      for (var b = 0; b < q; b++) {
        T[y * q + b] = B.akE(y + W, b + G, k);
      }
  };
  B.a7g = function (y, j, q) {
    return 255 - (((y >>> q) + (j >>> q)) & 1) * 51;
  };
  B.akE = function (y, j, q) {
    return 4294967295 - (((y >>> q) + (j >>> q)) & 1) * 3355443;
  };
  B.b4 = function (j, q) {
    var m = q == null ? 1 : q / 255;
    return {
      o: ((j >>> 16) & 255) * m,
      i: ((j >>> 8) & 255) * m,
      X: (j & 255) * m,
    };
  };
  B.yH = function (j, q) {
    var m = q == null ? 1 : 255 / q;
    return (
      (Math.round(j.o * m) << 16) |
      (Math.round(j.i * m) << 8) |
      Math.round(j.X * m)
    );
  };
  B.bw = function (j) {
    var q = j.toString(16);
    while (q.length < 6) q = "0" + q;
    return q;
  };
  B.aw0 = function (j) {
    return parseInt(j, 16);
  };
  B.Sn = function (j) {
    return 0.3 * j.o + 0.59 * j.i + 0.11 * j.X;
  };
  B.lJ = function (j) {
    return Math.max(j.o, j.i, j.X) - Math.min(j.o, j.i, j.X);
  };
  B.he = function (j, q, m) {
    return 0.3 * j + 0.59 * q + 0.11 * m;
  };
  B.acz = function (j, q, m) {
    return Math.max(j, q, m) - Math.min(j, q, m);
  };
  B.nd = function (j, q) {
    var m = q - j,
      n = Math.abs(m),
      G = m - 1,
      W = m + 1;
    if (Math.abs(G) < n) m = G;
    else if (Math.abs(W) < n) m = W;
    return m;
  };
  B.SK = function (j) {
    return j < 0.0031308 ? 12.92 * j : 1.055 * Math.pow(j, 1 / 2.4) - 0.055;
  };
  B.qd = function (j) {
    return j < 0.04045 ? j / 12.92 : Math.pow((j + 0.055) / 1.055, 2.4);
  };
  B.aAo = function (j) {
    var q = new Uint8Array(256);
    for (var y = 0; y < 256; y++) q[y] = ~~(0.5 + 255 * B.SK(y / 255));
    for (var y = 0; y < j.length; y++) j[y] = q[j[y]];
  };
  B.PC = function (j) {
    var q = new Uint8Array(256);
    for (var y = 0; y < 256; y++) q[y] = ~~(0.5 + 255 * B.qd(y / 255));
    for (var y = 0; y < j.length; y++) j[y] = q[j[y]];
  };
  B.aqs = function (j, q) {
    var m = Math.min(j.length, q.length);
    for (var y = 0; y < m; y += 4) {
      var n = j[y],
        G = j[y + 1],
        W = j[y + 2];
      q[y] =
        16 +
        Math.floor(
          (65.481 / 255) * n + (128.553 / 255) * G + (24.966 / 255) * W + 0.5
        );
      q[y + 1] =
        128 -
        Math.floor(
          (37.797 / 255) * n - (74.203 / 255) * G + (112 / 255) * W + 0.5
        );
      q[y + 2] =
        128 +
        Math.floor(
          (112 / 255) * n - (93.786 / 255) * G - (18.214 / 255) * W + 0.5
        );
      q[y + 3] = j[y + 3];
    }
  };
  B.a3q = function (j, q, m) {
    var n,
      G,
      W,
      k = Math.max(j, q, m),
      T = Math.min(j, q, m);
    W = k;
    if (k != 0) G = (k - T) / k;
    else G = 0;
    if (G == 0) n = 0;
    else {
      var b = k - T,
        c = (k - j) / b,
        a = (k - q) / b,
        f = (k - m) / b;
      if (j == k) n = f - a;
      else if (q == k) n = 2 + c - f;
      else n = 4 + a - c;
      n *= 1 / 6;
      if (n < 0) n = n + 1;
    }
    return { uu: n, fO: G, X: W };
  };
  B.auc = function (j, q, m) {
    var n = 0,
      G = 0,
      W = 0;
    if (q == 0) n = G = W = m;
    else {
      var k = (j - Math.floor(j)) * 6,
        T = Math.floor(k),
        b = k - Math.floor(k),
        c = m * (1 - q),
        a = m * (1 - q * b),
        f = m * (1 - q * (1 - b));
      switch (T) {
        case 0:
          n = m;
          G = f;
          W = c;
          break;
        case 1:
          n = a;
          G = m;
          W = c;
          break;
        case 2:
          n = c;
          G = m;
          W = f;
          break;
        case 3:
          n = c;
          G = a;
          W = m;
          break;
        case 4:
          n = f;
          G = c;
          W = m;
          break;
        case 5:
          n = m;
          G = c;
          W = a;
          break;
      }
    }
    return { o: n, i: G, X: W };
  };
  B.r0 = function (j, q, m) {
    var n = Math.max(j, q, m),
      G = Math.min(j, q, m),
      W = 0,
      k = 0,
      T = (n + G) * 0.5;
    if (n != G) {
      var b = n - G;
      k = T > 0.5 ? b / (2 - (n + G)) : b / (n + G);
      switch (n) {
        case j:
          W = (q - m) / b + (q < m ? 6 : 0);
          break;
        case q:
          W = (m - j) / b + 2;
          break;
        case m:
          W = (j - q) / b + 4;
          break;
      }
      W *= 1 / 6;
    }
    return { uu: W, fO: k, I0: T };
  };
  B.wL = function (j, q, m) {
    var n, G, W;
    if (q == 0) n = G = W = m;
    else {
      var k = m < 0.5 ? m * (1 + q) : m + q - m * q,
        T = 2 * m - k;
      n = B.L$(T, k, j + 1 / 3);
      G = B.L$(T, k, j);
      W = B.L$(T, k, j - 1 / 3);
    }
    return { o: n, i: G, X: W };
  };
  B.L$ = function (j, q, m) {
    if (m < 0) m += 1;
    if (m > 1) m -= 1;
    if (m < 1 / 6) return j + (q - j) * 6 * m;
    if (m < 1 / 2) return q;
    if (m < 2 / 3) return j + (q - j) * (2 / 3 - m) * 6;
    return j;
  };
  B.vE = function (j, q, m) {
    var n = Math.max(j, q, m),
      G = Math.min(j, q, m),
      W,
      k,
      T = n,
      b = n - G;
    k = n == 0 ? 0 : b / n;
    if (n == G) W = 0;
    else {
      switch (n) {
        case j:
          W = (q - m) / b + (q < m ? 6 : 0);
          break;
        case q:
          W = (m - j) / b + 2;
          break;
        case m:
          W = (j - q) / b + 4;
          break;
      }
      W *= 1 / 6;
    }
    return { uu: W, fO: k, YF: T };
  };
  B.ld = function (j, q, m) {
    var n, G, W, y, k, T, b, c;
    y = Math.floor(j * 6);
    k = j * 6 - y;
    T = m * (1 - q);
    b = m * (1 - k * q);
    c = m * (1 - (1 - k) * q);
    switch (y % 6) {
      case 0:
        (n = m), (G = c), (W = T);
        break;
      case 1:
        (n = b), (G = m), (W = T);
        break;
      case 2:
        (n = T), (G = m), (W = c);
        break;
      case 3:
        (n = T), (G = b), (W = m);
        break;
      case 4:
        (n = c), (G = T), (W = m);
        break;
      case 5:
        (n = m), (G = T), (W = b);
        break;
    }
    return { o: n, i: G, X: W };
  };
  B.LY = (function () {
    var j = [],
      q = [];
    for (var y = 0; y < 8e3; y++) {
      var m = y * (1 / 4e3);
      j[y] = B.qd(m);
      q[y] = m > 0.008856 ? Math.pow(m, 1 / 3) : (903.3 * m + 16) * (1 / 116);
    }
    return [j, q];
  })();
  B.fa = function (j, q, m, n) {
    if (n == null) n = [0.9642, 1, 0.8249];
    var G = B.LY[0],
      W = B.LY[1];
    j = G[~~(0.5 + j * (4e3 / 255))];
    q = G[~~(0.5 + q * (4e3 / 255))];
    m = G[~~(0.5 + m * (4e3 / 255))];
    var k = B.kz.awZ,
      T = k[0] * j + k[1] * q + k[2] * m,
      b = k[4] * j + k[5] * q + k[6] * m,
      c = k[8] * j + k[9] * q + k[10] * m;
    T = T * (1 / n[0]);
    b = b * (1 / n[1]);
    c = c * (1 / n[2]);
    return B.aCw(T, b, c);
  };
  B.aCw = function (j, q, m) {
    var n = B.LY[1],
      G = n[~~(0.5 + j * 4e3)],
      W = n[~~(0.5 + q * 4e3)],
      k = n[~~(0.5 + m * 4e3)];
    return { ji: 116 * W - 16, Sd: 500 * (G - W), X: 200 * (W - k) };
  };
  B.DD = function (j, q, m) {
    var n = 903.3,
      G = 0.008856,
      W = (j + 16) / 116,
      k = W * W * W,
      T = W - m / 200,
      b = T * T * T,
      c = q / 500 + W,
      a = c * c * c,
      f = b > G ? b : (116 * T - 16) / n,
      U = k > G ? k : (116 * W - 16) / n,
      Z = a > G ? a : (116 * c - 16) / n,
      h = Z * 96.42,
      u = U * 100,
      i = f * 82.49,
      x = B.kz.$j(B.kz.Dg, [h / 100, u / 100, i / 100, 0]);
    for (var y = 0; y < 4; y++)
      x[y] = Math.max(0, Math.min(255, B.SK(x[y]) * 255));
    return { o: x[0], i: x[1], X: x[2] };
  };
  B.aDX = function (j, q, m, n, G) {
    var W = j.ji,
      k = j.Sd,
      T = j.X,
      b = (W < q.ji ? q.ji - W : m.ji < W ? m.ji - W : 0) * (1 / 100),
      c = (k < q.Sd ? q.Sd - k : m.Sd < k ? m.Sd - k : 0) * (1 / 116),
      a = (T < q.X ? q.X - T : m.X < T ? m.X - T : 0) * (1 / 116),
      f = Math.sqrt(b * b + c * c + a * a) * 1.35;
    return f <= n ? Math.min(1, 1.17 * (1 - f * G)) : 0;
  };
  B.Lf = function (j) {
    var q = B.Ot("cmykToRgb"),
      m = q[2],
      n = q[3],
      G = [0, 0, 0, 0];
    ICC.U.applyLUT4(n, m, j, G);
    return G;
  };
  B.auf = function (j) {
    var q = B.Ot("cmykToRgb"),
      m = q[2],
      n = q[3];
    ICC.U.applyLUT4(n, m, j, j);
  };
  B.aB8 = function () {
    var j = function (aF) {
        return Math.round(aF * 255);
      },
      q = "",
      m = 3;
    for (var y = 0; y < tab.length; y++) {
      var n = j(tab[y]);
      if (m <= y) n = (n - j(tab[y - m]) + 256) & 255;
      q += n.toString(16).padStart(2, "0");
    }
    return q;
  };
  B.Ot = function (j) {
    var q = LUTS["_" + j];
    if (q == null) {
      var m = LUTS[j],
        n = m[0],
        aF = m[1],
        G = m[2],
        W = m[3],
        k = [];
      for (var y = 0; y < W.length; y += 2)
        k.push(parseInt(W.slice(y, y + 2), 16));
      for (var y = aF; y < k.length; y++) k[y] = (k[y] + k[y - aF]) & 255;
      for (var y = 0; y < k.length; y++) k[y] *= 1 / 255;
      q = LUTS["_" + j] = [n, aF, G, k];
    }
    return q;
  };
  B.fE = function (j) {
    var q = B.Ot("rgbToCmyk"),
      m = q[2],
      n = q[3],
      G = [0, 0, 0, 0];
    ICC.U.applyLUT3to4(n, m, j, G);
    return G;
  };
  B.apP = function (j) {
    var q = B.Ot("rgbToCmyk"),
      m = q[2],
      n = q[3];
    ICC.U.applyLUT3to4(n, m, j, j);
    B.BR(j);
  };
  B.P2 = function (j, q, m) {
    var n = j.length,
      G = 0.3,
      W = 0.59,
      k = 0.11;
    if (m) {
      G = m[0];
      W = m[1];
      k = m[2];
    }
    for (var y = 0; y < n; y += 4)
      q[y >> 2] = ~~(j[y + 0] * G + j[y + 1] * W + j[y + 2] * k + 0.5);
  };
  B.QZ = function (j, q) {
    var m = q.length;
    for (var y = 0; y < m; y += 4) {
      var n = j[y >>> 2];
      q[y] = n;
      q[y + 1] = n;
      q[y + 2] = n;
    }
  };
  B.Nr = function (j, q) {
    var m = B.oM(j.Sd),
      n = B.oM(q);
    if (m != n) throw "e";
    if (m == 8) B.adw(j, q);
    else {
      var G = j.o,
        W = j.i,
        k = j.X,
        T = j.Sd;
      for (var y = 0; y < q.length; y += 4) {
        var b = y >>> 2;
        q[y] = G[b];
        q[y + 1] = W[b];
        q[y + 2] = k[b];
        q[y + 3] = T[b];
      }
    }
  };
  B.adw = function (j, q) {
    var m = j.Sd,
      n = j.o,
      G = j.i,
      W = j.X,
      k = Math.min(j.Sd.length, q.buffer.byteLength >>> 2),
      T = 4 * Math.floor(k / 4),
      b = new Uint32Array(q.buffer),
      c = new Uint32Array(m.buffer),
      a = new Uint32Array(n.buffer),
      f = new Uint32Array(G.buffer),
      U = new Uint32Array(W.buffer);
    for (var y = 0; y < T; y += 4) {
      var Z = c[y >> 2],
        h = U[y >> 2],
        u = f[y >> 2],
        i = a[y >> 2];
      b[y] = (Z << 24) | ((h & 255) << 16) | ((u & 255) << 8) | (i & 255);
      b[y + 1] =
        ((Z & 65280) << 16) |
        ((h & 65280) << 8) |
        (u & 65280) |
        ((i & 65280) >>> 8);
      b[y + 2] =
        ((Z & 16711680) << 8) |
        (h & 16711680) |
        ((u & 16711680) >>> 8) |
        ((i & 16711680) >>> 16);
      b[y + 3] =
        (Z & 4278190080) |
        ((h & 4278190080) >>> 8) |
        ((u & 4278190080) >>> 16) |
        ((i & 4278190080) >>> 24);
    }
    for (var y = T; y < k; y++)
      b[y] = (m[y] << 24) | (W[y] << 16) | (G[y] << 8) | n[y];
  };
  B.fV = function (j, q) {
    var m = B.oM(q.Sd),
      n = B.oM(j);
    if (m != n) throw "e";
    if (m == 8) B.az4(j, q);
    else {
      var G = q.o,
        W = q.i,
        k = q.X,
        T = q.Sd;
      for (var y = 0; y < j.length; y += 4) {
        var b = y >>> 2;
        G[b] = j[y];
        W[b] = j[y + 1];
        k[b] = j[y + 2];
        T[b] = j[y + 3];
      }
    }
  };
  B.az4 = function (j, q) {
    var m = q.Sd,
      n = q.o,
      G = q.i,
      W = q.X,
      k = Math.min(q.Sd.length, j.buffer.byteLength >>> 2),
      T = 4 * Math.floor(k / 4),
      b = new Uint32Array(j.buffer),
      c = new Uint32Array(m.buffer),
      a = new Uint32Array(n.buffer),
      f = new Uint32Array(G.buffer),
      U = new Uint32Array(W.buffer);
    for (var y = 0; y < T; y += 4) {
      var Z = b[y],
        h = b[y + 1],
        u = b[y + 2],
        i = b[y + 3];
      a[y >> 2] = (Z & 255) | ((h & 255) << 8) | ((u & 255) << 16) | (i << 24);
      f[y >> 2] =
        ((Z & 65280) >> 8) |
        (h & 65280) |
        ((u & 65280) << 8) |
        ((i & 65280) << 16);
      U[y >> 2] =
        ((Z & 16711680) >> 16) |
        ((h & 16711680) >> 8) |
        (u & 16711680) |
        ((i & 16711680) << 8);
      c[y >> 2] =
        (Z >>> 24) | ((h >>> 24) << 8) | ((u >>> 24) << 16) | (i & 4278190080);
    }
    for (var y = T; y < k; y++) {
      var x = b[y];
      n[y] = (x >> 0) & 255;
      G[y] = (x >> 8) & 255;
      W[y] = (x >> 16) & 255;
      m[y] = (x >> 24) & 255;
    }
  };
  B.Ih = function (j, q, m) {
    var n = Math.min(j.length / 4, q.length),
      G = B.oM(j);
    if (G != B.oM(q)) throw "e";
    if (G == 8) {
      for (var y = 0; y < n; y++) {
        q[y] = j[(y << 2) + m];
      }
    } else
      for (var y = 0; y < n; y++) {
        q[y] = j[(y << 2) + m];
      }
  };
  B.ln = function (j, q, m) {
    var n = B.oM(j);
    if (n != B.oM(q)) throw "e";
    var G = Math.min(q.length >>> 2, j.length);
    if (n == 8) {
      var W = new Uint8Array(q.buffer),
        k = new Uint32Array(j.buffer),
        y = 0;
      while (y + 4 < G) {
        var T = k[y >>> 2];
        W[(y << 2) + m] = T & 255;
        W[(y << 2) + m + 4] = (T >>> 8) & 255;
        W[(y << 2) + m + 8] = (T >>> 16) & 255;
        W[(y << 2) + m + 12] = T >>> 24;
        y += 4;
      }
      while (y < G) {
        W[(y << 2) + m] = j[y];
        y++;
      }
    } else {
      for (var y = 0; y < G; y++) q[(y << 2) + m] = j[y];
    }
  };
  B.bs = function (j, q) {
    new Uint32Array(j.buffer).fill(q);
  };
  B.nn = function (j, q, m, n) {
    var G = B.oM(j),
      W = B.TN(G),
      k = j.length,
      T = Math.round(q * W),
      b = Math.round(m * W),
      c = Math.round(n * W);
    if (G == 8)
      for (var y = 0; y < k; y += 4) {
        j[y] = T;
        j[y + 1] = b;
        j[y + 2] = c;
      }
    if (G == 16)
      for (var y = 0; y < k; y += 4) {
        j[y] = T;
        j[y + 1] = b;
        j[y + 2] = c;
      }
    if (G == 32)
      for (var y = 0; y < k; y += 4) {
        j[y] = q * W;
        j[y + 1] = m * W;
        j[y + 2] = n * W;
      }
  };
  B.EA = function (j, q) {
    var m = B.oM(j),
      n = B.TN(m),
      G = j.length,
      W = Math.round(q * n);
    if (m == 8)
      for (var y = 0; y < G; y += 4) {
        j[y + 3] = W;
      }
    if (m == 16)
      for (var y = 0; y < G; y += 4) {
        j[y + 3] = W;
      }
    if (m == 32)
      for (var y = 0; y < G; y += 4) {
        j[y + 3] = q * n;
      }
  };
  B.aGM = function (j, q, m, n, G) {
    if (G == null) G = 0;
    var W = new Uint32Array(j.buffer);
    m = m.TM(q);
    var k = m.x - q.x,
      T = m.y - q.y,
      b = m.r,
      c = m.$,
      a = q.r;
    for (var f = 0; f < c; f++) {
      var y = (T + f) * a + k;
      for (var U = 0; U < b; U++) {
        W[y] = (W[y] & G) | n;
        y++;
      }
    }
  };
  B.wV = function (j, q) {
    var m = Math.min(j.buffer.byteLength, q.buffer.byteLength),
      n = m >>> 2,
      G = new Uint32Array(j.buffer, 0, n),
      W = new Uint32Array(q.buffer, 0, n);
    W.set(G);
  };
  B.Lg = function (j, q) {
    var m = j.buffer.byteLength,
      n = q.buffer.byteLength,
      G = new Uint32Array(j.buffer, 0, m >> 2),
      W = new Uint32Array(q.buffer, 0, n >> 2);
    if (m != n) return !1;
    var k = G.length;
    for (var y = 0; y < k; y++) if (W[y] != G[y]) return !1;
    return !0;
  };
  B.BR = function (j) {
    var q = B.oM(j),
      m = j.length;
    if (q == 8) for (var y = 0; y < m; y++) j[y] = ~j[y];
    if (q == 16) for (var y = 0; y < m; y++) j[y] = ~j[y];
    if (q == 32) for (var y = 0; y < m; y++) j[y] = 1 - j[y];
  };
  B.azI = function (j) {
    var q = j.length;
    for (var y = 0; y < q; y += 4) {
      j[y] = ~j[y];
      j[y + 1] = ~j[y + 1];
      j[y + 2] = ~j[y + 2];
    }
  };
  B.aiA = function (j) {
    var q = j.length;
    for (var y = 3; y < q; y += 4) j[y] = ~j[y];
  };
  B.aBI = function (j) {
    return j + (j % 4 == 0 ? 0 : 4 - (j % 4));
  };
  B.j = function (j, q) {
    if (q == null) q = 8;
    var m = q == 8 ? Uint8Array : q == 16 ? Uint16Array : Float32Array;
    if (q == 8) j = B.aBI(j);
    if (q == 16) j += j & 1;
    try {
      var n = new m(j);
    } catch (gn) {
      alert("Not enough RAM! (need " + Math.round(j / (1 << 20)) + " MB)", 7e3);
      throw "low_ram";
    }
    return n;
  };
  B.a64 = function (j) {
    var q = j.Iu.r,
      m = j.Iu.$,
      n = q * 4,
      G = q * m,
      W = new Uint8Array(j.data),
      k = 0,
      T = 0;
    for (var b = 1; b < m; b++)
      for (var c = 1; c < q; c++) {
        var y = (b * q + c) * 4;
        if (W[y - 1] == 0 && W[y + 3] == 0 && W[y - n + 3] == 0) {
          T++;
          var a = W[y],
            f = W[y + 1],
            U = W[y + 2],
            Z = a - W[y - 4],
            h = a - W[y - n],
            u = f - W[y - 3],
            i = f - W[y - n + 1],
            x = U - W[y - 2],
            X = U - W[y - n + 2];
          if (Z * Z + u * u + x * x != 0 && h * h + i * i + X * X != 0) k++;
        }
      }
    if (T / G > 0.01 && k / T > 0.05) {
      var $ = B.j(q * m);
      B.Ih(W, $, 3);
      j._E = [$];
      for (var y = 0; y < W.length; y += 4) W[y + 3] = 255;
    }
  };
  B.aBi = function (j, q, m, n) {
    if (n == null) n = 0;
    var G = 0;
    while (
      G + 3 < j.length &&
      j[G + 3].C() >= n &&
      q.Dc() * (1 << (G >>> 1)) < m
    )
      G += 2;
    var W = j[1],
      k = j[G + 1],
      T = new k$();
    T.translate(-k.x, -k.y);
    T.scale(W.r / k.r, W.$ / k.$);
    T.translate(W.x, W.y);
    T.concat(q);
    return [G, T];
  };
  B.HZ = function (j) {
    var q = j.length,
      m = j[q - 2],
      n = j[q - 1];
    while (n.r >= 2 && n.$ >= 2) {
      var G = B.IT(m, n);
      j.push(G.sE, G.H);
      m = G.sE;
      n = G.H;
    }
  };
  B.Hn = function (j) {
    var q = j.length,
      m = j[q - 2],
      n = j[q - 1];
    while (n.r >= 2 && n.$ >= 2) {
      var G = B.rL(m, n);
      j.push(G.sE, G.H);
      m = G.sE;
      n = G.H;
    }
  };
  B.IT = function (j, q, m) {
    var n = q.r,
      G = q.$,
      W = n >> 1,
      k = G >> 1,
      T = new hk(q.x >>> 1, q.y >>> 1, W, k),
      b,
      c = B.oM(j);
    if (c == 8) {
      b = m && m.length == W * k * 4 ? m : B.j(W * k * 4);
      var a = new Uint32Array(j.buffer),
        f = new Uint32Array(b.buffer);
      for (var U = 0; U < k; U++)
        for (var Z = 0; Z < W; Z++) {
          var h = U * W + Z,
            u = (U << 1) * n + (Z << 1),
            i = a[u],
            x = a[u + 1],
            X = a[u + n],
            $ = a[u + n + 1],
            H = i >>> 24,
            C = x >>> 24,
            l = X >>> 24,
            v = $ >>> 24,
            K = H + C + l + v;
          if (K == 1020) {
            var S =
                (((i >>> 0) & 255) +
                  ((x >>> 0) & 255) +
                  ((X >>> 0) & 255) +
                  (($ >>> 0) & 255) +
                  2) >>>
                2,
              o =
                (((i >>> 8) & 255) +
                  ((x >>> 8) & 255) +
                  ((X >>> 8) & 255) +
                  (($ >>> 8) & 255) +
                  2) >>>
                2,
              V =
                (((i >>> 16) & 255) +
                  ((x >>> 16) & 255) +
                  ((X >>> 16) & 255) +
                  (($ >>> 16) & 255) +
                  2) >>>
                2;
            f[h] = (255 << 24) | (V << 16) | (o << 8) | S;
          } else if (K == 0) f[h] = 0;
          else {
            var S =
                ((i >>> 0) & 255) * H +
                ((x >>> 0) & 255) * C +
                ((X >>> 0) & 255) * l +
                (($ >>> 0) & 255) * v,
              o =
                ((i >>> 8) & 255) * H +
                ((x >>> 8) & 255) * C +
                ((X >>> 8) & 255) * l +
                (($ >>> 8) & 255) * v,
              V =
                ((i >>> 16) & 255) * H +
                ((x >>> 16) & 255) * C +
                ((X >>> 16) & 255) * l +
                (($ >>> 16) & 255) * v,
              P = 1 / K;
            S = ~~(S * P + 0.5);
            o = ~~(o * P + 0.5);
            V = ~~(V * P + 0.5);
            f[h] = (((K + 2) >>> 2) << 24) | (V << 16) | (o << 8) | S;
          }
        }
    } else {
      b = B.j(W * k * 4, c);
      for (var U = 0; U < k; U++)
        for (var Z = 0; Z < W; Z++) {
          var h = (U * W + Z) << 2,
            u = ((U << 1) * n + (Z << 1)) << 2,
            z = u,
            E = u + 4,
            A = u + n * 4,
            N = u + n * 4 + 4,
            H = j[z + 3],
            C = j[E + 3],
            l = j[A + 3],
            v = j[N + 3],
            K = H + C + l + v;
          if (K == 0) {
          } else {
            var P = 1 / K;
            b[h] = (j[z] * H + j[E] * C + j[A] * l + j[N] * v) * P;
            b[h + 1] =
              (j[z + 1] * H + j[E + 1] * C + j[A + 1] * l + j[N + 1] * v) * P;
            b[h + 2] =
              (j[z + 2] * H + j[E + 2] * C + j[A + 2] * l + j[N + 2] * v) * P;
            b[h + 3] = K * 0.25;
          }
        }
    }
    return { H: T, sE: b };
  };
  B.arp = function (j, q, m) {
    var n = q.r,
      G = q.$,
      W = n >> 1,
      k = G >> 1,
      T = new hk(q.x, q.y, W, k),
      b = m && m.length == W * k * 4 ? m : B.j(W * k * 4),
      c = new Uint32Array(j.buffer),
      a = new Uint32Array(b.buffer);
    for (var f = 0; f < k; f++)
      for (var U = 0; U < W; U++) {
        var Z = f * W + U,
          h = (f << 1) * n + (U << 1),
          u = c[h],
          i = c[h + 1],
          x = c[h + n],
          X = c[h + n + 1],
          $ =
            (2 +
              ((u >>> 0) & 255) +
              ((i >>> 0) & 255) +
              ((x >>> 0) & 255) +
              ((X >>> 0) & 255)) >>>
            2,
          H =
            (2 +
              ((u >>> 8) & 255) +
              ((i >>> 8) & 255) +
              ((x >>> 8) & 255) +
              ((X >>> 8) & 255)) >>>
            2,
          C =
            (2 +
              ((u >>> 16) & 255) +
              ((i >>> 16) & 255) +
              ((x >>> 16) & 255) +
              ((X >>> 16) & 255)) >>>
            2,
          l =
            (2 +
              ((u >>> 24) & 255) +
              ((i >>> 24) & 255) +
              ((x >>> 24) & 255) +
              ((X >>> 24) & 255)) >>>
            2;
        a[Z] = (l << 24) | (C << 16) | (H << 8) | $;
      }
    return { H: T, sE: b };
  };
  B.aHF = function (j, q, m) {
    var n = q.r,
      G = q.$,
      W = 2 * Math.floor(n / 3),
      k = 2 * Math.floor(G / 3),
      T = new hk(q.x, q.y, W, k),
      b = m && m.length == W * k * 4 ? m : B.j(W * k * 4),
      c = new Uint32Array(j.buffer),
      a = new Uint32Array(b.buffer);
    for (var f = 0; f < k; f += 2)
      for (var U = 0; U < W; U += 2) {
        var Z = f * W + U,
          h = ((f * 3) >>> 1) * n + ((U * 3) >>> 1),
          u = c[h],
          i = c[h + 1],
          x = c[h + 2],
          X = c[h + n],
          $ = c[h + 1 + n],
          H = c[h + 2 + n],
          C = c[h + n + n],
          l = c[h + 1 + n + n],
          v = c[h + 2 + n + n],
          K = (u >>> 24) << 2,
          S = ((u >>> 16) & 255) * K,
          o = ((u >>> 8) & 255) * K,
          V = (u & 255) * K,
          P = (i >>> 24) << 1,
          z = ((i >>> 16) & 255) * P,
          E = ((i >>> 8) & 255) * P,
          A = (i & 255) * P,
          N = (x >>> 24) << 2,
          Q = ((x >>> 16) & 255) * N,
          e = ((x >>> 8) & 255) * N,
          Y = (x & 255) * N,
          d = (X >>> 24) << 1,
          I = ((X >>> 16) & 255) * d,
          O = ((X >>> 8) & 255) * d,
          s = (X & 255) * d,
          p = $ >>> 24,
          F = (($ >>> 16) & 255) * p,
          g = (($ >>> 8) & 255) * p,
          w = ($ & 255) * p,
          r = (H >>> 24) << 1,
          eQ = ((H >>> 16) & 255) * r,
          t = ((H >>> 8) & 255) * r,
          dq = (H & 255) * r,
          D = (C >>> 24) << 2,
          ha = ((C >>> 16) & 255) * D,
          am = ((C >>> 8) & 255) * D,
          k4 = (C & 255) * D,
          aA = (l >>> 24) << 1,
          ex = ((l >>> 16) & 255) * aA,
          ac = ((l >>> 8) & 255) * aA,
          eJ = (l & 255) * aA,
          h$ = (v >>> 24) << 2,
          da = ((v >>> 16) & 255) * h$,
          bb = ((v >>> 8) & 255) * h$,
          gb = (v & 255) * h$,
          fM = K + P + d + p,
          kS = N + P + r + p,
          cY = D + aA + d + p,
          cS = h$ + aA + r + p,
          k3 = fM == 0 ? 0 : 1 / fM,
          di = kS == 0 ? 0 : 1 / kS,
          a7 = cY == 0 ? 0 : 1 / cY,
          b0 = cS == 0 ? 0 : 1 / cS,
          e1 = 0,
          l2 = 0,
          kL = 0,
          es = 0;
        e1 = ~~(0.5 + (V + A + s + w) * k3);
        l2 = ~~(0.5 + (o + E + O + g) * k3);
        kL = ~~(0.5 + (S + z + I + F) * k3);
        es = ~~(0.5 + fM * (1 / 9));
        a[Z] = (es << 24) | (kL << 16) | (l2 << 8) | e1;
        e1 = ~~(0.5 + (Y + A + dq + w) * di);
        l2 = ~~(0.5 + (e + E + t + g) * di);
        kL = ~~(0.5 + (Q + z + eQ + F) * di);
        es = ~~(0.5 + kS * (1 / 9));
        a[Z + 1] = (es << 24) | (kL << 16) | (l2 << 8) | e1;
        e1 = ~~(0.5 + (k4 + eJ + s + w) * a7);
        l2 = ~~(0.5 + (am + ac + O + g) * a7);
        kL = ~~(0.5 + (ha + ex + I + F) * a7);
        es = ~~(0.5 + cY * (1 / 9));
        a[Z + W] = (es << 24) | (kL << 16) | (l2 << 8) | e1;
        e1 = ~~(0.5 + (gb + eJ + dq + w) * b0);
        l2 = ~~(0.5 + (bb + ac + t + g) * b0);
        kL = ~~(0.5 + (da + ex + eQ + F) * b0);
        es = ~~(0.5 + cS * (1 / 9));
        a[Z + W + 1] = (es << 24) | (kL << 16) | (l2 << 8) | e1;
      }
    return { H: T, sE: b };
  };
  B.aE0 = function (j, q, m) {
    var n = q.r,
      G = q.$,
      W = 2 * Math.floor(n / 3),
      k = 2 * Math.floor(G / 3),
      T = new hk(q.x, q.y, W, k),
      b = m && m.length == W * k * 4 ? m : B.j(W * k * 4),
      c = new Uint32Array(j.buffer),
      a = new Uint32Array(b.buffer);
    for (var f = 0; f < k; f += 2)
      for (var U = 0; U < W; U += 2) {
        var Z = f * W + U,
          h = ((f * 3) >>> 1) * n + ((U * 3) >>> 1),
          u = c[h],
          i = c[h + 1],
          x = c[h + 2],
          X = c[h + n],
          $ = c[h + 1 + n],
          H = c[h + 2 + n],
          C = c[h + n + n],
          l = c[h + 1 + n + n],
          v = c[h + 2 + n + n],
          K = ((u >>> 16) & 255) << 2,
          S = ((u >>> 8) & 255) << 2,
          o = (u & 255) << 2,
          V = ((i >>> 16) & 255) << 1,
          P = ((i >>> 8) & 255) << 1,
          z = (i & 255) << 1,
          E = ((x >>> 16) & 255) << 2,
          A = ((x >>> 8) & 255) << 2,
          N = (x & 255) << 2,
          Q = ((X >>> 16) & 255) << 1,
          e = ((X >>> 8) & 255) << 1,
          Y = (X & 255) << 1,
          d = ($ >>> 16) & 255,
          I = ($ >>> 8) & 255,
          O = $ & 255,
          s = ((H >>> 16) & 255) << 1,
          p = ((H >>> 8) & 255) << 1,
          F = (H & 255) << 1,
          g = ((C >>> 16) & 255) << 2,
          w = ((C >>> 8) & 255) << 2,
          r = (C & 255) << 2,
          eQ = ((l >>> 16) & 255) << 1,
          t = ((l >>> 8) & 255) << 1,
          dq = (l & 255) << 1,
          D = ((v >>> 16) & 255) << 2,
          ha = ((v >>> 8) & 255) << 2,
          am = (v & 255) << 2,
          k4 = 0,
          aA = 0,
          ex = 0;
        k4 = ~~(0.5 + (o + z + Y + O) * (1 / 9));
        aA = ~~(0.5 + (S + P + e + I) * (1 / 9));
        ex = ~~(0.5 + (K + V + Q + d) * (1 / 9));
        a[Z] = (255 << 24) | (ex << 16) | (aA << 8) | k4;
        k4 = ~~(0.5 + (N + z + F + O) * (1 / 9));
        aA = ~~(0.5 + (A + P + p + I) * (1 / 9));
        ex = ~~(0.5 + (E + V + s + d) * (1 / 9));
        a[Z + 1] = (255 << 24) | (ex << 16) | (aA << 8) | k4;
        k4 = ~~(0.5 + (r + dq + Y + O) * (1 / 9));
        aA = ~~(0.5 + (w + t + e + I) * (1 / 9));
        ex = ~~(0.5 + (g + eQ + Q + d) * (1 / 9));
        a[Z + W] = (255 << 24) | (ex << 16) | (aA << 8) | k4;
        k4 = ~~(0.5 + (am + dq + F + O) * (1 / 9));
        aA = ~~(0.5 + (ha + t + p + I) * (1 / 9));
        ex = ~~(0.5 + (D + eQ + s + d) * (1 / 9));
        a[Z + W + 1] = (255 << 24) | (ex << 16) | (aA << 8) | k4;
      }
    return { H: T, sE: b };
  };
  B.kP = function (j) {
    var q = 255,
      m = j.length;
    m -= m & 31;
    for (var y = 3; y < m; y += 32)
      q =
        q &
        j[y] &
        j[y + 4] &
        j[y + 8] &
        j[y + 12] &
        j[y + 16] &
        j[y + 20] &
        j[y + 24] &
        j[y + 28];
    return q != 255;
  };
  B.aLX = function (j, q, m, n) {
    var G = B.IT,
      W = B.aHF,
      k = { sE: j, H: q },
      T = B.agq(m);
    for (var y = 0; y < T.length; y++) {
      if (T[y] == 2) k = G(k.sE, k.H, n);
      else k = W(k.sE, k.H, n);
    }
    return k;
  };
  B.aL8 = function (j, q, m, n) {
    var G = B.rL,
      W = B.azM,
      k = { sE: j, H: q },
      T = B.agq(m);
    for (var y = 0; y < T.length; y++) {
      if (T[y] == 2) k = G(k.sE, k.H, n);
      else k = W(k.sE, k.H, n);
    }
    return k;
  };
  B.agq = function (j) {
    var q = [],
      m = j;
    while (m < 0.499) {
      q.push(2);
      m *= 2;
    }
    q.push(m < 0.5001 ? 2 : 3);
    return q;
  };
  B.rL = function (j, q, m) {
    var n = q.r,
      G = q.$,
      W = n >> 1,
      k = G >> 1,
      T = new hk(q.x, q.y, W, k);
    if (j == null) return { H: T };
    var b = m && m.length >= W * k ? m : B.j(W * k);
    for (var c = 0; c < k; c++) {
      var a = c * W;
      for (var f = 0; f < W; f++) {
        var U = (c << 1) * n + (f << 1);
        b[a + f] = (2 + j[U] + j[U + 1] + j[U + n] + j[U + n + 1]) >>> 2;
      }
    }
    return { H: T, sE: b };
  };
  B.azM = function (j, q, m) {
    var n = q.r,
      G = q.$,
      W = 2 * Math.floor(n / 3),
      k = 2 * Math.floor(G / 3),
      T = new hk(q.x, q.y, W, k);
    if (j == null) return { H: T };
    var b = m && m.length >= W * k ? m : B.j(W * k);
    for (var c = 0; c < k; c += 2)
      for (var a = 0; a < W; a += 2) {
        var f = c * W + a,
          U = ((c * 3) >>> 1) * n + ((a * 3) >>> 1),
          Z = j[U] << 2,
          h = j[U + 1] << 1,
          u = j[U + 2] << 2,
          i = j[U + n] << 1,
          x = j[U + 1 + n],
          X = j[U + 2 + n] << 1,
          $ = j[U + n + n] << 2,
          H = j[U + 1 + n + n] << 1,
          C = j[U + 2 + n + n] << 2;
        b[f] = ~~(0.5 + (Z + h + i + x) * (1 / 9));
        b[f + 1] = ~~(0.5 + (u + h + X + x) * (1 / 9));
        b[f + W] = ~~(0.5 + ($ + H + i + x) * (1 / 9));
        b[f + W + 1] = ~~(0.5 + (C + H + X + x) * (1 / 9));
      }
    return { H: T, sE: b };
  };
  B.aBA = function (j, q, m, n, G) {
    var W = q.TM(n);
    if (G) W = W.TM(G);
    var k = Math.max(0, W.x - q.x),
      T = Math.max(0, W.x - n.x),
      b = Math.max(0, W.y - q.y),
      c = Math.max(0, W.y - n.y),
      a = W.r,
      f = W.$;
    for (var y = 0; y < f; y++) {
      var U = (b + y) * q.r + k,
        Z = (c + y) * n.r + T;
      for (var h = 0; h < a; h++) {
        m[Z + h] = Math.max(m[Z + h], j[U + h]);
      }
    }
  };
  B.sN = function (j, q, m, n, G) {
    var W = q.TM(n);
    if (G) W = W.TM(G);
    var k = Math.max(0, W.x - q.x),
      T = Math.max(0, W.x - n.x),
      b = Math.max(0, W.y - q.y),
      c = Math.max(0, W.y - n.y),
      a = W.r,
      f = W.$,
      U = B.oM(j),
      Z = B.oM(m);
    if (U != Z) throw "e";
    var h = U >>> 3,
      u = new Uint8Array(m.buffer);
    for (var y = 0; y < f; y++) {
      var i = (b + y) * q.r + k,
        x = (c + y) * n.r + T;
      u.set(new Uint8Array(j.buffer, i * h, a * h), x * h);
    }
  };
  B.awE = function (j, q, m, n) {
    if (q.Lg(n)) {
      B.ln(j, m, 3);
      return;
    }
    var G = q.TM(n),
      W = Math.max(0, G.x - q.x),
      k = Math.max(0, G.x - n.x),
      T = Math.max(0, G.y - q.y),
      b = Math.max(0, G.y - n.y),
      c = G.r,
      a = G.$;
    for (var y = 0; y < a; y++) {
      var f = (T + y) * q.r + W,
        U = (b + y) * n.r + k;
      for (var Z = 0; Z < c; Z++) m[((U + Z) << 2) + 3] = j[f + Z];
    }
  };
  B.em = function (j, q, m, n) {
    var G = q.TM(n),
      W = Math.max(0, G.x - q.x),
      k = Math.max(0, G.x - n.x),
      T = Math.max(0, G.y - q.y),
      b = Math.max(0, G.y - n.y),
      c = G.r,
      a = G.$;
    for (var y = 0; y < a; y++) {
      var f = (T + y) * q.r + W,
        U = (b + y) * n.r + k;
      for (var Z = 0; Z < c; Z++) m[U + Z] = j[((f + Z) << 2) + 3];
    }
  };
  B.M4 = function (j, q, m, n, G) {
    if (q.Lg(n) && (G == null || G.Lg(n))) {
      m.set(j);
      return;
    }
    var W = q.TM(n);
    if (G) W = W.TM(G);
    var k = Math.max(0, W.x - q.x),
      T = Math.max(0, W.x - n.x),
      b = Math.max(0, W.y - q.y),
      c = Math.max(0, W.y - n.y),
      a = W.r,
      f = W.$,
      U = 4 * (B.oM(m) >>> 3),
      Z = new Uint8Array(m.buffer);
    for (var y = 0; y < f; y++) {
      var h = (b + y) * q.r + k,
        u = (c + y) * n.r + T;
      Z.set(new Uint8Array(j.buffer, h * U, a * U), u * U);
    }
  };
  B.W4 = function (j, q, m, n) {
    var G = q.TM(n),
      W = Math.max(0, G.x - q.x),
      k = Math.max(0, G.x - n.x),
      T = Math.max(0, G.y - q.y),
      b = Math.max(0, G.y - n.y),
      c = G.r,
      a = G.$,
      f = j.Sd,
      U = j.o,
      Z = j.i,
      h = j.X,
      u = m.Sd,
      i = m.o,
      x = m.i,
      X = m.X;
    for (var y = 0; y < a; y++) {
      var $ = (T + y) * q.r + W,
        H = (b + y) * n.r + k;
      for (var C = 0; C < c; C++) {
        u[H + C] = f[$ + C];
        i[H + C] = U[$ + C];
        x[H + C] = Z[$ + C];
        X[H + C] = h[$ + C];
      }
    }
  };
  B.nc = function (j) {
    var q = j.length,
      m = B.oM(j),
      n = B.TN(m),
      G = 1 / n;
    if (m == 8)
      for (var y = 0; y < q; y += 4) {
        var W = j[y + 3];
        if (W == 255) continue;
        j[y] = ~~(j[y] * W * (1 / 255) + 0.5);
        j[y + 1] = ~~(j[y + 1] * W * (1 / 255) + 0.5);
        j[y + 2] = ~~(j[y + 2] * W * (1 / 255) + 0.5);
      }
    else
      for (var y = 0; y < q; y += 4) {
        var W = j[y + 3];
        if (W == n) continue;
        j[y] = j[y] * (W * G);
        j[y + 1] = j[y + 1] * (W * G);
        j[y + 2] = j[y + 2] * (W * G);
      }
  };
  B.B6 = function (j) {
    var q = j.length,
      m = B.oM(j),
      n = B.TN(m),
      G = 1 / n;
    if (m == 8)
      for (var y = 0; y < q; y += 4) {
        var W = j[y + 3];
        if (W == 0 || W == 255) continue;
        var k = 255 / W;
        j[y] = ~~(j[y] * k + 0.5);
        j[y + 1] = ~~(j[y + 1] * k + 0.5);
        j[y + 2] = ~~(j[y + 2] * k + 0.5);
      }
    else {
      for (var y = 0; y < q; y += 4) {
        var W = j[y + 3];
        if (W == 0 || W == n) continue;
        var k = n / W;
        j[y] = j[y] * k;
        j[y + 1] = j[y + 1] * k;
        j[y + 2] = j[y + 2] * k;
      }
    }
  };
  B.kp = function (j, q) {
    for (var y = 0; y < j.length; y++) if (j[y] != q) return !1;
    return !0;
  };
  B.Io = function (j) {
    return (j + 1 + (j >>> 8)) >>> 8;
  };
  B.round = function (j, q) {
    var m = B.oM(j),
      n = j.length;
    if (q == null) q = B.TN(m) >>> 1;
    if (m == 8) for (var y = 0; y < n; y++) j[y] = j[y] < q ? 0 : 255;
    if (m == 16) for (var y = 0; y < n; y++) j[y] = j[y] < q ? 0 : 65535;
    if (m == 32) for (var y = 0; y < n; y++) j[y] = j[y] < q ? 0 : 1;
  };
  B.q8 = function (j, q) {
    var m = j.length,
      n = B.oM(j);
    if (n == 8) for (var y = 0; y < m; y++) j[y] = Math.round(j[y] * q);
    if (n == 16) for (var y = 0; y < m; y++) j[y] = Math.round(j[y] * q);
    if (n == 32) for (var y = 0; y < m; y++) j[y] = j[y] * q;
  };
  B.WE = function (j, q) {
    var m = B.oM(j);
    if (m == 8) {
      var n = new Uint32Array(j.buffer),
        G = new Uint32Array(q.buffer),
        W = n.length;
      for (var y = 0; y < W; y++) {
        var k = n[y],
          T = G[y];
        G[y] =
          (B.Io((k >>> 24) * (T >>> 24)) << 24) |
          (B.Io(((k >>> 16) & 255) * ((T >>> 16) & 255)) << 16) |
          (B.Io(((k >>> 8) & 255) * ((T >>> 8) & 255)) << 8) |
          B.Io((k & 255) * (T & 255));
      }
    } else {
      var b = 1 / (m == 16 ? 65535 : 1);
      for (var y = 0; y < j.length; y++) q[y] = q[y] * j[y] * b;
    }
  };
  B.w6 = function (j, q) {
    var m = B.oM(j);
    if (m != B.oM(q)) throw "e";
    var n = j.length;
    if (m == 8)
      for (var y = 0; y < n; y++)
        q[(y << 2) + 3] = q[(y << 2) + 3] * j[y] * (1 / 255);
    if (m == 16)
      for (var y = 0; y < n; y++)
        q[(y << 2) + 3] = q[(y << 2) + 3] * j[y] * (1 / 65535);
    if (m == 32)
      for (var y = 0; y < n; y++) q[(y << 2) + 3] = q[(y << 2) + 3] * j[y];
  };
  B.a11 = function (j, q, m, n) {
    var G = Math.max(0, n.x - q.x),
      W = Math.max(0, q.x - n.x),
      k = Math.max(0, n.y - q.y),
      T = Math.max(0, q.y - n.y),
      b = Math.min(q.x + q.r, n.x + n.r) - Math.max(q.x, n.x),
      c = Math.min(q.y + q.$, n.y + n.$) - Math.max(q.y, n.y);
    for (var y = 0; y < c; y++) {
      var a = (k + y) * q.r + G,
        f = (T + y) * n.r + W;
      for (var U = 0; U < b; U++) {
        m[f] = B.Io(m[f] * j[a]);
        a++;
        f++;
      }
    }
  };
  B.zn = function (j, q, m, n, G) {
    var W = B.oM(j),
      k = q.TM(n);
    if (G) k = k.TM(G);
    var T = Math.max(0, k.x - q.x),
      b = Math.max(0, k.x - n.x),
      c = Math.max(0, k.y - q.y),
      a = Math.max(0, k.y - n.y),
      f = k.r,
      U = k.$;
    for (var y = 0; y < U; y++) {
      var Z = (c + y) * q.r + T,
        h = (((a + y) * n.r + b) << 2) + 3;
      for (var u = 0; u < f; u++) {
        if (W == 8) m[h] = B.Io(m[h] * j[Z]);
        else if (W == 16) m[h] = m[h] * j[Z] * (1 / 65535);
        else if (W == 32) m[h] = m[h] * j[Z];
        Z++;
        h += 4;
      }
    }
  };
  B.ar = function (j, q, m, n, G) {
    var W = B.oM(j),
      k = q.TM(n);
    if (G) k = k.TM(G);
    var T = Math.max(0, k.x - q.x),
      b = Math.max(0, k.x - n.x),
      c = Math.max(0, k.y - q.y),
      a = Math.max(0, k.y - n.y),
      f = k.r,
      U = k.$;
    for (var y = 0; y < U; y++) {
      var Z = (((c + y) * q.r + T) << 2) + 3,
        h = (((a + y) * n.r + b) << 2) + 3;
      for (var u = 0; u < f; u++) {
        if (W == 8) m[h] = B.Io(m[h] * j[Z]);
        else if (W == 16) m[h] = m[h] * j[Z] * (1 / 65535);
        else if (W == 32) m[h] = m[h] * j[Z];
        Z += 4;
        h += 4;
      }
    }
  };
  B.OA = function (j, q) {
    var m = B.oM(j),
      n = B.TN(m),
      G = 255 / n,
      U = 0;
    if (q == null) q = 1;
    var W = 4 * q,
      k = j.length >>> 2,
      T = new Float64Array(256),
      b = new Float64Array(256),
      c = new Float64Array(256),
      a = new Float64Array(256),
      f = 4 * Math.floor(k / q) * q;
    for (var y = 0; y < f; y += W) {
      var Z = Math.min(255, Math.round(G * j[y + 0])),
        h = Math.min(255, Math.round(G * j[y + 1])),
        u = Math.min(255, Math.round(G * j[y + 2])),
        i = G * j[y + 3] * q,
        x = i * (1 / 255);
      b[Z] += x;
      c[h] += x;
      a[u] += x;
      U += i;
    }
    for (var y = 0; y < 256; y++) T[y] = b[y] + c[y] + a[y];
    return [T, b, c, a, k, U / 255];
  };
  B.ai8 = function (j, q) {
    function m(l, v) {
      var K = -1,
        S = 0;
      while (S <= v) {
        K++;
        S += l[K];
      }
      return K;
    }
    function n(l, v) {
      var K = 256,
        S = 0;
      while (S <= v) {
        K--;
        S += l[K];
      }
      return K;
    }
    function G(l) {
      var v = 0,
        K = 0;
      for (var y = 0; y < 256; y++) {
        K += l[y];
        v += l[y] * y * (1 / 255);
      }
      return v / K;
    }
    var W = j[0],
      k = j[1] / 100,
      T = j[2] / 100,
      b = [],
      c = [];
    for (var y = 0; y < 4; y++) {
      var a = y == 0 ? 3 : 1;
      b[y] = m(q[y], a * k * q[5]);
      c[y] = n(q[y], a * T * q[5]);
    }
    var f = [G(q[1]), G(q[2]), G(q[3])],
      U = f.slice(0);
    U.sort(function (l, v) {
      return l - v;
    });
    var Z = f.indexOf(U[1]),
      h = (f[0] + f[1] + f[2]) / 3,
      u = [];
    for (var y = 0; y < 4; y++) {
      var i = 0,
        x = 255,
        X = b[y],
        $ = c[y];
      if (W == 0 && y == 0) {
        i = X;
        x = $;
      }
      if (W == 1 && y != 0) {
        i = X;
        x = $;
      }
      if (W == 2 && y != 0) {
        var a = f[y - 1] / h;
        x = Math.max(0, Math.min(255, c[Z] * a));
      }
      var H = [i, x];
      u.push(H);
      if (W == 3 && y == 0) {
        var C = 255 * (1 - h);
        H.push(C);
      }
    }
    return u;
  };
  B.arS = function (j, q, m, n, G, W, k) {
    var T = j.length,
      b = B.oM(j),
      c = b == 8 ? 255 : b == 16 ? 65535 : 1,
      a = 1 / c,
      f = (m.length - 1) * 0.999999,
      U = B.aFJ;
    if (!k && !W) {
      if (b == 8 && m.length == 256) {
        m = B.sL(m, 8);
        n = B.sL(n, 8);
        G = B.sL(G, 8);
        for (var y = 0; y < T; y += 4) {
          q[y] = m[j[y]];
          q[y + 1] = n[j[y + 1]];
          q[y + 2] = G[j[y + 2]];
          q[y + 3] = j[y + 3];
        }
      } else
        for (var y = 0; y < T; y += 4) {
          var Z = j[y] * a,
            h = j[y + 1] * a,
            u = j[y + 2] * a,
            i = U(m, f * Z),
            x = U(n, f * h),
            X = U(G, f * u);
          q[y] = i * c;
          q[y + 1] = x * c;
          q[y + 2] = X * c;
          q[y + 3] = j[y + 3];
        }
      return;
    }
    for (var y = 0; y < T; y += 4) {
      var Z = j[y] * a,
        h = j[y + 1] * a,
        u = j[y + 2] * a;
      if (W) Z = h = u = Z * 0.3 + h * 0.59 + u * 0.11;
      var i = U(m, f * Z),
        x = U(n, f * h),
        X = U(G, f * u);
      if (k) {
        var $ = B.he(Z, h, u),
          H = B.he(i, x, X);
        if ($ > H) {
          var C = ($ - H) / (1 - H);
          i += C * (1 - i);
          x += C * (1 - x);
          X += C * (1 - X);
        } else if (H == 0) i = x = X = 0;
        else {
          var C = $ / H;
          i = C * i;
          x = C * x;
          X = C * X;
        }
      }
      q[y] = i * c;
      q[y + 1] = x * c;
      q[y + 2] = X * c;
      q[y + 3] = j[y + 3];
    }
  };
  B.aFJ = function (j, q) {
    var m = j.length;
    if (q >= m) return j[m - 1] + (j[m - 1] - j[m - 2]) * (q - m);
    var n = ~~q,
      G = q - n;
    return j[n] * (1 - G) + j[n + (n == m - 1 ? 0 : 1)] * G;
  };
  B.El = function (j, q) {
    var m = B.sL(j, 8),
      n = q.r,
      G = q.$,
      top = 0,
      W = 0,
      k = 0,
      T = 0,
      b = 0;
    b = 0;
    for (var c = 0; c < G; c++) {
      var a = c * n;
      for (var y = 0; y < n; y++) b |= m[a + y];
      if (b != 0) break;
      top++;
    }
    if (top == G) return new hk(0, 0, 0, 0);
    b = 0;
    for (var c = G - 1; c >= 0; c--) {
      var a = c * n;
      for (var y = 0; y < n; y++) b |= m[a + y];
      if (b != 0) break;
      k++;
    }
    var f = G - k;
    b = 0;
    for (var y = 0; y < n; y++) {
      for (var c = top; c < f; c++) b |= m[c * n + y];
      if (b != 0) break;
      W++;
    }
    b = 0;
    for (var y = n - 1; y >= 0; y--) {
      for (var c = top; c < f; c++) b |= m[c * n + y];
      if (b != 0) break;
      T++;
    }
    var U = new hk(q.x + W, q.y + top, n - W - T, G - top - k);
    return U;
  };
  B.Xh = function (j, q, m, n, G) {
    var W = B.sL(j, 8),
      top = 0,
      c = 0,
      a = 0,
      f = 0,
      U = !1;
    if (n == null) n = [!0, !0, !0, !0];
    if (m == null) m = 0;
    if (G == null) G = 4294967295;
    var k = new Uint32Array(W.buffer),
      T = q.r,
      b = q.$,
      Z = [k[0], k[k.length - 1], 0][m];
    U = !1;
    if (n[0])
      for (var h = 0; h < b; h++) {
        var u = h * T;
        for (var y = 0; y < T; y++) if ((k[u + y] & G) ^ Z) U = !0;
        if (U) break;
        top++;
      }
    U = !1;
    if (n[2])
      for (var h = b - 1; h >= 0; h--) {
        var u = h * T;
        for (var y = 0; y < T; y++) if ((k[u + y] & G) ^ Z) U = !0;
        if (U) break;
        a++;
      }
    U = !1;
    if (n[1])
      for (var y = 0; y < T; y++) {
        for (var h = 0; h < b; h++) if ((k[h * T + y] & G) ^ Z) U = !0;
        if (U) break;
        c++;
      }
    U = !1;
    if (n[3])
      for (var y = T - 1; y >= 0; y--) {
        for (var h = 0; h < b; h++) if ((k[h * T + y] & G) ^ Z) U = !0;
        if (U) break;
        f++;
      }
    var i = new hk(q.x + c, q.y + top, T - c - f, b - top - a);
    return i.jG() ? new hk(0, 0, 0, 0) : i;
  };
  B.yy = function (j) {
    var q = B.El(j.N, j.H);
    if (q.Lg(j.H)) return;
    var m = B.j(q.C(), B.oM(j.N));
    B.sN(j.N, j.H, m, q);
    j.N = m;
    j.H = q;
  };
  B.TE = function (j, q) {
    var m = B.Xh(j.buffer, j.H, 2, null, q ? null : 4278190080);
    if (m.Lg(j.H)) return;
    var n = new B.j(m.C() * 4, B.oM(j.buffer));
    B.M4(j.buffer, j.H, n, m);
    j.buffer = n;
    j.H = m;
  };
  B.extend = function (j, q, m) {
    if (j.H.Jn(q)) return;
    var n = j.H.vd(q),
      G = B.oM(j.N),
      W = B.j(n.C(), G);
    if (m != null) W.fill(B.TN(G) * m);
    B.sN(j.N, j.H, W, n);
    j.H = n;
    j.N = W;
  };
  B.a0Y = function (j, q) {
    if (q.jG() || j.H.Jn(q)) return;
    var m = j.H.vd(q),
      n = B.j(m.C() * 4, B.oM(j.buffer));
    B.M4(j.buffer, j.H, n, m);
    j.H = m;
    j.buffer = n;
  };
  B.g0 = function (j, q, m) {
    if (!m.QL(j)) return !1;
    var n = Math.floor(j.x) - m.x,
      G = Math.floor(j.y) - m.y,
      y = G * m.r + n;
    return q[y] > B.TN(B.oM(q)) / 2;
  };
  B.a61 = function (j, q, m) {
    if (!m.QL(j)) return !1;
    var n = Math.floor(j.x) - m.x,
      G = Math.floor(j.y) - m.y,
      y = G * m.r + n;
    return q[4 * y + 3] > B.TN(B.oM(q)) / 2;
  };
  B.Rx = function (j) {
    this.Sd = B.j(j);
    this.o = B.j(j);
    this.i = B.j(j);
    this.X = B.j(j);
  };
  B.Rx.prototype.P = function () {
    var j = this.Sd.length,
      q = new B.Rx(1);
    q.Sd = this.Sd.slice(0);
    q.o = this.o.slice(0);
    q.i = this.i.slice(0);
    q.X = this.X.slice(0);
    return q;
  };
  B.O.aHQ = function (j, q, m, n, G) {
    var W = G[0] + 1,
      k = G[1],
      T = Math.abs(k - 25) / 4,
      b = G[2],
      c = ((b % 2) + b * b) >> 1,
      a = B.O.Z;
    a.zw(q, m);
    var f = a.r6(1),
      U = a.r6(1),
      Z = a.r6(1);
    a.Qj(j, n, b, b, c);
    a.kD(n);
    a.aN(n, f);
    a.bv(f, U, W, W, 1);
    a.bv(f, Z, W, W, W * W);
    a.sub(Z, U);
    a.WE(U, T);
    (k < 25 ? a.sub : a.add)(f, U);
    a.Ie(U, n);
    a.cA(n);
  };
  B.O.ab$ = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    var k = G[0] * 2.55,
      T = G[1],
      b = T >> 1,
      c = G[2] * 0.25,
      a = W.r6(4),
      f = W.r6(1),
      U = W.r6(1);
    W.al(j, a, T, 1, !0, b);
    W.al(j, n, T, 1, !1, b);
    W.yo(j, f);
    W.fo(f, k);
    W.i8(f, U, 3);
    W.VA(n, U, a);
    W.Qz(a, n, c);
  };
  B.O.adp = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    W.ZW(G[3]);
    var k = G[0] * -3 + 80,
      T = G[1] * -3 + 80,
      b = G[2] / 2 + 0.5,
      c = G[4],
      a = G[5],
      f = W.r6(1),
      U = W.r6(1),
      Z = W.r6(1),
      h = W.r6(1),
      u = W.r6(4),
      i = W.r6(4);
    W.yo(j, f);
    W.wV(f, U);
    W.qI(f, T, 5);
    W.adx(f, 0.4, 0);
    W.i8(f, Z, 3);
    W.mx(Z, f, 9, 3, !0, 27);
    W.wV(U, Z);
    W.BR(Z);
    var x = W.h3(k, 5, Z);
    for (var y = 0; y < W.Dh; y++) {
      U[y] = x[255 - U[y]];
    }
    W.adx(U, 0.4, 0);
    W.wV(U, Z);
    W.i8(Z, h, 2);
    W.mx(h, Z, 5, 3, !1, 15);
    W.WE(f, b);
    W.WE(Z, b);
    W.Nt(n, 2155905279);
    W.Nt(i, c);
    W.Nt(u, a);
    W.VA(i, f, n);
    W.VA(u, Z, n);
  };
  B.O.aqu = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    var k = new Uint8Array(256),
      T = 5 + 10 * G[1];
    T += G[1] > 3 ? (G[1] - 3) * 10 : 0;
    var b = ~~(G[2] * 0.73) + 50,
      c = Math.min(b + T, 128),
      a = c - b,
      f = -255 * b;
    for (var y = 0; y < 256; y++) {
      var U = y * 65;
      k[y] = W.vm(f / a);
      f += 255;
    }
    var Z = W.r6(1),
      h = W.r6(1),
      u = W.r6(1);
    W.yo(j, Z);
    W.wV(Z, u);
    W.i8(Z, h, 2 * G[0] + 1);
    W.sub(h, Z);
    W.WE(Z, 65);
    W.mx(Z, h, 9, 3, !0, 20);
    for (var y = 0; y < W.Dh; y++) {
      var i = u[y],
        x = h[y];
      Z[y] = x > 0 ? ~~((x * i + (255 - x) * 128) / 255) : 128;
    }
    W.i8(Z, h, 3);
    W.mx(h, Z, 15, 2, !0, 16);
    W.mx(h, u, 15, 2, !1, 15);
    W.Yf(Z, u);
    W.Zt(u, h, 2);
    W.qh(h, k);
    W.i8(h, Z, 2);
    W.hN(Z, n);
  };
  B.O.ak1 = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    var k = 2 * G[0] + 1,
      T = W.a27[G[1]],
      b = G[2] * 5.1,
      c = G[3],
      a = W.r6(1),
      f = W.r6(1),
      U = W.r6(4),
      Z = W.r6(4);
    W.Nt(U, c);
    W.kD(U, n);
    W.a74(a, b);
    W.Ie(a, n);
    W.cA(n, U);
    W.yo(j, f);
    W.i8(f, a, k);
    W.sub(a, f);
    W.WE(f, T);
    W.mx(f, a, 9, 3, !0, 20);
    W.VA(j, a, U);
    W.Vp(U, n, 3);
    W.al(n, U, 15, 2, !0, 16);
    W.al(n, Z, 15, 2, !1, 16);
    W.Yf(U, Z);
    W.Qz(Z, n, 2);
  };
  B.O.agy = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    var k = (15 - G[0]) / 4 + 1,
      T = (15 - G[1]) / 4 + 1,
      b = G[2],
      c = G[3],
      a = W.fD(G[4]),
      f = G[5] + 1,
      U = G[6],
      Z = G[7],
      h = G[8],
      u = W.r6(1),
      i = W.r6(1),
      x = W.r6(1),
      X = W.r6(1),
      $ = W.r6(4),
      H = W.r6(4);
    W.se(x, b, c, U);
    W.yo(j, i);
    W.i8(i, u, 5);
    W.hT(x, u, X, f, a);
    W.WE(X, k);
    W.Zd(X, 2);
    W.BR(u);
    W.hT(x, u, i, f, a);
    W.WE(i, T);
    W.Zd(i, 2);
    W.Nt($, 2155905279);
    W.Nt(H, Z);
    W.Nt(n, h);
    W.VA($, i, H);
    W.VA(H, X, n);
  };
  B.O.acT = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    W.ZW(G[3]);
    var k = G[0],
      T = G[1] / 10,
      b = G[2] / 10,
      c = W.r6(1),
      a = W.r6(1),
      f = W.r6(1),
      U = W.E9(),
      Z = W.E9(),
      h = W.E9();
    W.iz(c);
    W.i8(c, a, 11);
    W.i8(a, c, 11);
    W.Km(c, U);
    W.U4(j, c);
    W.wV(c, f);
    W.i8(c, a, 9);
    W.i8(a, c, 9);
    W.Km(c, Z);
    W.Es(Z, h, 5);
    W.Es(h, Z, 5);
    W.a8f(U, 0.8);
    W.abr(U, Z, 0.8, 0.9);
    W.anz(Z, c, k);
    W.bv(c, a, 2, 2, 1);
    W.bv(a, c, 2, 2, 3);
    W.bv(c, a, 2, 2, 3);
    W.bv(f, c, 5, 5, 13);
    W.dc(a, c, a, T);
    W.Jj(c, a, a, b);
    W.hT(a, a, c, 5, 1);
    W.kD(j, n);
    W.Ie(c, n);
    W.cA(n);
  };
  B.O.axi = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    var k = G[0],
      T = G[1] / 2,
      b = G[2],
      c = k / 2,
      a = W.r6(4),
      f = W.r6(4);
    W.wV(j, n);
    for (var U = 0; U < b; U++) {
      W.al(n, a, k, 1, !0, c);
      W.al(n, f, k, 1, !1, c);
      W.Yf(f, a);
      W.Vp(a, f, 2);
      W.Qz(f, n, T);
    }
  };
  B.O.ajf = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    var k = G[0] * 10,
      T = G[1] * 4.9,
      b = G[2] * 4.9,
      c = W.r6(1),
      a = W.r6(1),
      f = W.r6(4),
      U = W.r6(4);
    W.yo(j, c);
    W.fo(c, W.ajb(c, k));
    W.i8(c, a, 3);
    W.al(j, f, 5, 1, !1, 1);
    W.al(j, n, 15, 2, !0, 16);
    W.VA(n, a, f);
    W.kD(f, n);
    W.aN(n, c);
    W.qI(c, T, b);
    W.Ie(c, n);
    W.cA(n);
  };
  B.O.adR = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    W.ZW(G[4]);
    var k = G[0] / 20,
      T = [
        0, 0.75, 1, 1.05, 1.1, 1.15, 1.2, 1.25, 1.3, 1.35, 1.4, 1.45, 1.5, 1.6,
        1.7, 1.8, 2, 2.5, 3, 3.5, 4,
      ][G[1]],
      b = [
        0, 0.25, 0.5, 0.75, 0.9, 1, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9,
        2, 2.25, 2.5, 3, 3.5, 4,
      ][G[2]],
      c = G[3],
      a = new Int16Array(256);
    for (var y = 0; y < 256; y++) {
      a[y] = ~~((y - 128) * k);
    }
    var f = W.r6(1),
      U = W.r6(1),
      Z = W.r6(4);
    W.yo(j, f);
    W.i8(f, U, 25);
    W.WE(U, T);
    W.Zd(U, b);
    W.i8(U, f, 25);
    W.iz(U);
    W.aH3(f, U, a);
    W.wV(j, n);
    W.Nt(Z, c);
    W.VA(Z, f, n);
  };
  B.O.aqC = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    var k = G[0] + 5,
      T = 15 - G[1],
      b = (k * k) / 2,
      c = 1 - (3 - G[2]) / 10,
      a = ~~(T * T * c - 1),
      f = ~~(T * T * (1 - c));
    if (f == 0) f = 1;
    var U = W.r6(1),
      Z = W.r6(1),
      h = W.r6(1),
      u = W.r6(4);
    W.yo(j, h);
    W.bv(h, U, k, k, b);
    W.i8(h, Z, k);
    W.sub(U, Z);
    W.fo(Z, 1);
    W.Qj(j, u, T, T, a);
    W.Qj(j, n, T, T, f);
    W.VA(u, Z, n);
  };
  B.O.aDR = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    W.ZW(G[3]);
    var k = (20 - G[0]) * 0.05,
      T = G[1] * -2.75 + 60,
      b = 65 - T,
      c = G[2] / 10,
      a = W.r6(1),
      f = W.r6(1);
    W.U4(j, f);
    var U = W.h3(T, b, f);
    W.kD(j, n);
    W.aN(n, f);
    W.iz(a);
    W.rB(f, a, k);
    W.qh(f, U);
    W.WE(f, G[2] / 10);
    W.add(a, f);
    W.Ie(f, n);
    W.cA(n);
  };
  B.O.axy = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    var k = 5 + G[0],
      T = 15 - G[1],
      b = G[2],
      c = (k * k) / 2 + ((k * k) % 2) * 1,
      a = 1 - (3 - G[2]) / 10,
      f = ~~(T * T * a - 1),
      U = ~~(T * T * (1 - a));
    if (U == 0) U = 1;
    var Z = W.r6(1),
      h = W.r6(1),
      u = W.r6(1),
      i = W.r6(1),
      x = W.r6(1);
    W.U4(j, h);
    W.Zt(h, Z, 3);
    W.bv(Z, h, 2, 2, 1);
    var X = W.h3(20, 20, h);
    W.qh(h, X);
    W.i8(h, x, 5);
    W.bv(x, Z, k, k, c);
    W.bv(x, h, T, T, f);
    W.bv(x, u, T, T, U);
    W.i8(x, i, k);
    W.sub(Z, i);
    W.fo(i, 1);
    W.avb(h, i, u);
    W.kD(j, n);
    W.Ie(u, n);
    W.cA(n);
  };
  B.O.axV = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    W.ZW(G[5]);
    var k = W.Dh,
      T = W.wH,
      b = G[0],
      c = G[1],
      a = G[2],
      f = G[3],
      U = G[4],
      Z = 0.05 * b + 1,
      h = b / 100,
      u = b >> 1,
      i = 2 * b - 100,
      x = +(c == 9),
      X = +(c == 7),
      $ = [4, 1][x],
      H = [3, 2][x],
      C = [1, 2][X],
      l = [2, 1][X],
      v = [50, 75][x],
      K = c < 4 ? a : (a >> 1) + 50,
      S = W.a1A(v, K),
      o = W.az(f),
      V = W.az(U),
      P = W.r6(4),
      z = W.r6(4),
      E = W.r6(1),
      A = W.r6(1);
    function N(n, S) {
      if (K != 50) {
        W.aoV(n, S);
      }
    }
    function Q(j, eQ) {
      for (var y = 0; y < k; y++) {
        j[y] = W.vm(j[y] + (eQ[y] - 128) * h);
      }
    }
    function e(j, eQ) {
      for (var y = 0, t = 0; y < k; y++) {
        j[t] = W.vm(j[t] + (eQ[t] - 128) * h);
        j[t + 1] = W.vm(j[t + 1] + (eQ[t + 1] - 128) * h);
        j[t + 2] = W.vm(j[t + 2] + (eQ[t + 2] - 128) * h);
        t += 4;
      }
    }
    function Y(j, n) {
      W.iz(z);
      W.wV(j, n);
      e(n, z);
      N(n, S);
    }
    function d(eQ) {
      var t = 0;
      for (var dq = 0; dq < 12; dq++) t += W.random();
      return W.vm(u * (t - 6) + eQ);
    }
    function I(j, n) {
      W.wV(j, n);
      for (var y = 0; y < T; y += 4) {
        n[y] = d(n[y]);
        n[y + 1] = d(n[y + 1]);
        n[y + 2] = d(n[y + 2]);
      }
      N(n, S);
    }
    function O(j, n) {
      W.wV(j, n);
      for (var y = 0; y < T; y += 4) {
        if (W.random() < h) {
          n[y] = o[0];
          n[y + 1] = o[1];
          n[y + 2] = o[2];
        }
      }
      N(n, S);
    }
    function s(j, n) {
      W.iz(P);
      W.Qj(P, z, H, H, $);
      W.wV(j, P);
      e(P, z);
      W.Qj(P, n, 5, 5, 13);
      N(n, S);
    }
    function p(j, n) {
      W.iz(z);
      W.wV(j, P);
      e(P, z);
      N(n, S);
      W.Qj(P, n, H, H, $);
    }
    function F(j, n) {
      W.wV(j, P);
      N(n, S);
      W.yo(P, E);
      for (var y = 0, eQ = 0; y < k; y++) {
        var t = ((i - E[y] + 255) * 128.5 + 0.5) / 32767;
        if (W.random() <= t) {
          n[eQ++] = V[0];
          n[eQ++] = V[1];
          n[eQ++] = V[2];
        } else {
          n[eQ++] = o[0];
          n[eQ++] = o[1];
          n[eQ++] = o[2];
        }
        n[eQ] = j[eQ];
        eQ++;
      }
    }
    function g(j, n) {
      W.kD(j, n);
      W.aN(n, E);
      W.Zt(E, A, Z);
      W.bv(A, E, H, H, $);
      W.qh(E, S);
      W.Ie(E, n);
      W.cA(n);
    }
    function w(j) {
      var eQ = 0;
      if (c == 8) {
        for (var t = 0; t < q; t++) {
          j[eQ++] = ~~(W.random() * 255);
        }
        for (var y = 1; y < m; y++) {
          for (var t = 0; t < q; t++) {
            j[eQ++] = j[t];
          }
        }
      } else {
        for (var y = 0; y < m; y++) {
          var dq = ~~(W.random() * 255);
          for (var t = 0; t < q; t++) {
            j[eQ++] = dq;
          }
        }
      }
    }
    function r(j, n) {
      W.yo(j, E);
      W.iz(A);
      Q(E, A);
      w(A);
      Q(E, A);
      W.Vp(j, P, 9);
      W.Vp(P, z, 9);
      W.i8(E, A, 2);
      W.qh(A, S);
      W.i8(A, E, 2);
      W.kD(z, n);
      W.Ie(E, n);
      W.cA(n);
    }
    [Y, I, O, s, s, p, F, r, r, g][c](j, n);
  };
  B.O.axN = function (j, q, m, n, G) {
    var W = [
        -1e3, 34, 51, 61, 71, 80, 87, 95, 101, 108, 113, 119, 124, 129, 134,
        139, 143, 148, 153, 157, 161, 165, 168, 172, 175, 180, 183, 186, 190,
        194, 197, 200, 203, 207, 210, 213, 216, 218, 222, 225, 228, 230, 233,
        236, 239, 241, 244, 247, 250, 252, 255,
      ],
      k = B.O.Z,
      u = 0,
      i,
      y,
      C,
      l,
      v,
      K = 0,
      S = 1,
      o = 255;
    k.zw(q, m);
    k.ZW(G[3]);
    var T = k.r6(1),
      b = k.r6(1);
    k.yo(j, T);
    var c = G[0],
      a = G[1],
      f = a <= 50 ? W[a] / 255 : 1 + (255 - W[101 - a]) / 255,
      U = G[2],
      Z = T.length,
      h = new Float32Array(Z),
      x = 1 + (1 / 10) * c,
      X = (1 - 1 / x) / 2,
      $ = 16 / 256,
      H = q - 1;
    for (y = 0; y < k.Dh; y++) {
      h[y] = T[y] / 255;
      b[y] = c == 1 ? (k.random() < 1 / 255 ? o : S) : S;
    }
    function V(P, z) {
      var E = P * q + z;
      if (b[E] != S || P >= m || z >= q) {
        return;
      }
      var l = h[E],
        A = f - l,
        N = k.random(),
        Q = N / x + X;
      if (u == 0 || Math.abs(v - l) > $) {
        i = Q <= A ? K : o;
        u = ~~(k.random() * c);
      } else if (0.1 < N) {
        u--;
      } else {
        u = 0;
      }
      b[E] = i;
      v = l;
    }
    if (U == 0) {
      for (y = 0; y < q; y++) {
        for (C = 0; C < q; C++) {
          l = y + C;
          if (l >= q) break;
          V(C, H - l);
        }
        u = 0;
      }
      for (y = 1; y < m; y++) {
        for (C = 0; C < m; C++) {
          l = y + C;
          if (l >= m || C >= q) break;
          V(l, H - C);
        }
        u = 0;
      }
    } else if (U == 1) {
      for (y = 0; y < m; y++) {
        for (C = 0; C < q; C++) {
          V(y, C);
        }
        u = 0;
      }
    } else if (U == 2) {
      for (y = 0; y < q; y++) {
        for (C = 0; C < q; C++) {
          l = y + C;
          if (l >= q) break;
          V(C, l);
        }
        u = 0;
      }
      for (y = 1; y < m; y++) {
        for (C = 0; C < m; C++) {
          l = y + C;
          if (l >= m || C >= q) break;
          V(l, C);
        }
        u = 0;
      }
    } else {
      for (y = 0; y < q; y++) {
        for (C = 0; C < m; C++) {
          V(C, y);
        }
        u = 0;
      }
    }
    k.hN(b, n);
  };
  B.O.ayn = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    var k = G[0],
      T = G[1],
      b = G[2],
      c = W.r6(1),
      a = W.r6(1),
      f = W.r6(1),
      U = W.r6(1),
      Z = W.r6(4),
      h = W.r6(4);
    W.aN(j, U, 3, 4);
    W.yo(j, c);
    W.bv(c, a, 3, 3, 1);
    W.bv(c, f, 3, 3, 9);
    W.sub(f, a);
    W.i8(a, c, 3);
    W.qI(c, 40, 10, U);
    W.al(j, n, k, 2, !1, k);
    W.al(j, Z, k, 2, !0, k);
    W.Nt(h, 255);
    W.VA(n, c, h);
    W.VA(h, c, Z);
    W.Qz(Z, n, 1);
    W.kD(n);
    W.aN(n, c);
    W.qI(c, T, b, U);
    W.Ie(c, n);
    W.cA(n);
  };
  B.O.aJc = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    W.ZW(G[3]);
    var k = G[0],
      T = G[1],
      b = G[2] / 10;
    k = k + T;
    var c = W.r6(1),
      a = W.r6(1),
      f = W.E9(),
      U = W.E9();
    W.iz(c);
    W.i8(c, a, 11);
    W.i8(a, c, 11);
    W.Km(c, f);
    W.Es(f, U, 5);
    W.Es(U, f, 5);
    W.a8f(U, 0.97);
    W.anz(U, c, k);
    W.bv(c, a, T, T, 1);
    W.U4(j, c);
    W.dc(a, c, a, 0.6);
    W.Jj(c, a, a, b);
    W.hT(a, a, c, 5, 1);
    W.kD(j, n);
    W.Ie(c, n);
    W.cA(n);
  };
  B.O.awL = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    var k = Math.abs(G[0]),
      T =
        k +
        [
          1, 0, 1, 2, 1, 2, 1, 2, 3, 2, 3, 2, 3, 2, 3, 2, 3, 4, 3, 4, 5, 4, 5,
          4, 5,
        ][k],
      b = 2 * k + 1,
      c = G[1] / 10,
      a = (c * 13) / 15,
      f = W.r6(1),
      U = W.r6(1),
      Z = W.r6(1),
      h = W.r6(1),
      u = W.r6(4),
      i = W.r6(4),
      x = W.r6(4),
      X = W.r6(4),
      $ = W.r6(4);
    W.yo(j, f);
    if (G[0] >= 0) {
      W.BR(f);
    }
    W.wV(f, Z);
    W.i8(f, h, T);
    W.i8(h, f, T);
    W.WE(f, c);
    W.wV(f, U);
    W.i8(f, h, b);
    W.i8(h, f, b);
    W.WE(f, a);
    W.Nt(x, G[2]);
    W.Nt(X, G[3]);
    W.Nt($, G[4]);
    W.VA(x, f, X, u);
    W.VA($, U, u, i);
    W.VA(X, Z, i, n);
    W.aN(j, Z, 3);
    W.Ie(Z, n, 3);
  };
  B.O.a92 = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    W.ZW(G[5]);
    var k = G[0] * 5.1,
      T = G[1] / 100,
      b = W.ash[G[2]],
      c = W.r6(1),
      a = W.r6(1),
      f = W.r6(1);
    W.yo(j, c);
    W.a74(a, 255);
    W.iz(f);
    W.fo(c, k);
    W.rB(a, c, 0.7);
    W.rB(f, c, T);
    W.hT(c, c, a, 5, b);
    W.wV(j, n);
    W.ahE(n, k, G[4], G[3]);
    W.kD(n);
    W.Ie(a, n);
    W.cA(n);
  };
  B.O.ajn = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    var k = G[0],
      T = 4 - G[1],
      b = 11 - G[2],
      c = W.r6(1),
      a = W.r6(1),
      f = W.r6(4);
    W.U4(j, a);
    for (var y = 0; y < T; y++) {
      W.wV(a, c);
      W.aA$(c, a, k, k);
    }
    W.Vp(j, f, k);
    W.kD(f, f);
    W.Ie(a, f);
    W.cA(f, f);
    (b < 11 ? W.axM : W.wV)(f, n, b);
  };
  B.O.ai_ = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    W.ZW(G[2]);
    var k = G[0] + 5,
      T = ~~(k / 5 + 1),
      b = ~~(k / 2) + 1,
      c = b * b,
      a = ~~(k / 3),
      f = W.ash[G[1]],
      U = new Array(256);
    for (var y = 0; y < 256; y++) {
      U[y] = ~~(0.2 * (y - 128));
    }
    var Z = W.r6(1),
      h = W.r6(1);
    W.ao1(j, n, k);
    W.kD(n);
    W.aN(n, Z);
    W.iz(h);
    W.aH3(Z, h, U);
    W.ajt(h, k, k, T, T);
    W.dc(Z, h, Z, 1);
    W.i8(Z, h, a);
    W.i8(h, Z, a);
    W.bv(Z, h, b, b, c);
    W.hT(h, h, Z, 5, f);
    W.Ie(Z, n);
    W.cA(n);
  };
  B.O.alP = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    var k = W.r6(1),
      T = W.r6(1),
      b = W.r6(1),
      c = W.E9(),
      a = W.E9();
    W.yo(j, k);
    W.i8(k, T, G[2]);
    W.fo(T, G[0] * 5.1);
    W.bv(T, k, 2, 2, 4);
    W.i8(k, T, 3);
    W.i8(T, k, 3);
    W.wV(k, b);
    W.i8(k, T, 5);
    W.i8(T, k, 5);
    W.Km(k, c);
    W.Es(c, a, 5);
    W.Es(a, c, 5);
    W.alr(c, T, G[1]);
    W.BR(T);
    W.dc(b, T, b, 1);
    W.hN(b, n);
  };
  B.O.azu = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    var k = 1 << (7 - G[2]),
      T = W.r6(1),
      b = W.r6(1),
      c = W.r6(1);
    W.U4(j, b);
    W.i8(b, T, 3);
    W.wV(T, b);
    W.i8(T, c, G[0] + 5);
    W.sub(c, b);
    W.qI(b, 1, G[1]);
    W.WE(T, 1 / k);
    W.WE(T, k);
    W.sub(T, b);
    W.kD(j, n);
    W.Ie(b, n);
    W.cA(n);
  };
  B.O.aLd = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    W.ZW(G[3]);
    var k = W.r6(1),
      T = W.r6(1),
      b = W.r6(1);
    W.yo(j, k);
    W.atZ(T, G[0] / 50);
    W.i8(T, b, 3);
    W.bv(k, T, 9, 9, 41);
    W.qI(T, G[1], G[2]);
    W.dc(T, b, b, 0.75);
    W.Jj(T, b, T, 0.5);
    W.wV(T, k);
    W.bv(k, b, 3, 3, 8);
    W.dc(b, T, b, 0.75);
    W.WE(b, 1.2);
    W.Zt(b, k, 1);
    W.i8(k, b, 2);
    W.Zt(b, k, 2);
    W.WE(k, 1.2);
    W.i8(k, b, 2);
    W.hN(b, n);
  };
  B.O.aJy = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    var k = G[0] + 9,
      T = G[1] / 2,
      b = G[2],
      c = G[3],
      a = W.fD(G[4]),
      f = G[5] + 1,
      U = G[6],
      Z = W.r6(1),
      h = W.r6(1),
      u = W.r6(4),
      i = W.r6(4);
    W.se(h, b, c, U);
    W.af3(j, n, k, 1, 1);
    W.af3(n, u, k, 1, 1);
    W.a46(u, u, i, 7, T);
    W.WE(i, 1.2);
    W.Zd(i, 1.2);
    W.hT(h, Z, Z, f, a);
    W.WE(Z, 3);
    W.wV(j, n);
    W.VA(i, Z, n);
  };
  B.O.aIR = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    W.ZW(G[3]);
    var k = G[0] + 4,
      T = (k * 2) / 5 + (k % 5 | 0);
    k--;
    var b = G[1] * -2.75 + 60,
      c = 65 - b,
      a = G[2] / 10,
      f = W.r6(1),
      U = W.r6(1);
    W.iz(f);
    W.U4(j, U);
    var Z = W.h3(b, c, U);
    W.kD(j, n);
    W.aN(n, U);
    W.rB(U, f, 0.8);
    W.qh(U, Z);
    W.WE(U, a);
    W.add(f, U);
    W.mx(U, f, k, 3, !1, T);
    W.Ie(f, n);
    W.cA(n);
  };
  B.O.aol = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    W.ZW(G[3]);
    var k = G[0] + 5,
      T = ((k * k) >> 1) + (k % 2),
      b = G[1] / 10,
      c = G[2],
      a = ((c * c) >> 1) + (c % 2),
      f = W.r6(1),
      U = W.r6(1),
      Z = W.r6(1),
      h = W.r6(4),
      u = W.r6(4),
      i = W.r6(4);
    W.iz(Z);
    W.kD(j, i);
    W.aN(i, f);
    W.rB(f, Z, 0.8);
    W.i8(Z, f, 3);
    W.Zt(f, Z, b);
    W.Ie(Z, i);
    W.cA(i, i);
    W.yo(i, Z);
    W.bv(Z, f, k, k, T);
    W.i8(Z, U, k);
    W.sub(f, U);
    W.fo(U, 1);
    W.Qj(i, h, 7, 7, 40);
    W.Qj(i, u, 7, 7, 10);
    W.VA(h, U, u);
    W.Qj(u, n, c, c, a);
  };
  B.O.ao9 = function (j, q, m, n, G) {
    var W = B.O.Z,
      T = 255,
      y,
      c;
    W.zw(q, m);
    var k = G[0];
    if (k < 2) T = k;
    else if (k < 12) T = 5 * k - 5;
    else if (k < 47) T = 2 * k + 28;
    else if (k < 50) {
      y = k - 47;
      T = 125 + 12.5 * y + 12.5 * y * y;
    }
    var b = new Uint8Array(256);
    for (y = 75, c = 15; y < 256; y++, c += 24) b[y] = Math.min(255, c);
    var a = W.r6(1),
      f = W.r6(1),
      U = W.r6(1);
    W.yo(j, a);
    W.i8(a, f, 11);
    W.i8(f, U, 11);
    W.sub(U, a);
    W.WE(a, 8);
    W.sub(U, a);
    W.fo(a, T);
    W.BR(a);
    W.i8(a, f, 5);
    W.fo(f, 51);
    W.i8(f, a, G[1]);
    W.i8(a, f, G[1]);
    W.BR(f);
    W.qh(f, b);
    W.hN(f, n);
  };
  B.O.aDo = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    var k = W.a27[G[1]],
      T = G[2],
      b = T * 1.5,
      c = W.r6(1),
      a = W.r6(1),
      f = W.r6(1);
    W.U4(j, c);
    W.mx(c, a, 15, 2, !0, 15);
    W.wV(a, f);
    W.qI(f, T, b);
    W.i8(f, c, 3);
    W.i8(a, f, G[0]);
    W.sub(f, a);
    W.WE(a, k);
    W.sub(c, a);
    W.i8(a, c, 3);
    W.mx(c, a, 3, 1, !1, 1);
    W.Vp(j, n, 15);
    W.kD(n);
    W.Ie(a, n);
    W.cA(n);
  };
  B.O.akO = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    W.ZW(G[3]);
    var k = G[0] * 5.1,
      T = 16 - G[1],
      b = [
        1, 1, 1.05, 1.1, 1.15, 1.2, 1.25, 1.3, 1.35, 1.4, 1.45, 1.5, 1.6, 1.7,
        1.8, 2, 2.25, 2.5, 2.75, 3, 3.5, 4, 5, 6, 8, 10,
      ][G[2]],
      c = W.r6(1),
      a = W.r6(1),
      f = W.r6(1);
    W.yo(j, c);
    W.fo(c, k);
    W.i8(c, a, T);
    W.i8(a, c, T);
    W.iz(f);
    W.Jj(c, f, f, 1);
    W.dc(c, f, c, 0.75);
    W.WE(c, b);
    W.Zd(c, b);
    W.bv(c, a, 2, 2, 2);
    W.hN(a, n);
  };
  B.O.amu = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    var k = G[0] + 9,
      T = G[1] + 9,
      b = G[2],
      c = G[3],
      a = W.fD(G[4]),
      f = G[5] + 1,
      U = G[6],
      Z = W.r6(1),
      h = W.r6(1),
      u = W.r6(1),
      i = W.r6(1),
      x = W.r6(1),
      X = W.r6(4);
    W.U4(j, Z);
    W.aA$(Z, u, k, k);
    W.i8(u, Z, T);
    W.wV(u, x);
    W.wV(Z, i);
    W.sub(x, i);
    W.sub(Z, x);
    W.add(x, i);
    W.WE(i, 10);
    W.se(h, b, c, U);
    W.hT(h, Z, x, f, a);
    W.avb(x, i, u, 0.8);
    W.Vp(j, X, 9);
    W.Vp(X, n, 9);
    W.kD(n);
    W.Ie(u, n);
    W.cA(n);
  };
  B.O.aC7 = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    var k = 16 - G[0],
      T = G[1] * 8,
      b = 1 - (3 - G[2]) / 10,
      c = ~~(k * k * b - 1),
      a = ~~(k * k * (1 - b));
    if (a == 0) a = 1;
    var f = W.r6(1),
      U = W.r6(1),
      Z = W.r6(1),
      h = W.r6(4);
    W.yo(j, Z);
    W.bv(Z, f, 7, 7, 25);
    W.i8(Z, U, 7);
    W.sub(f, U);
    W.fo(U, 1);
    W.Qj(j, h, k, k, c);
    W.Qj(j, n, k, k, a);
    W.VA(h, U, n);
    W.kD(n);
    W.aN(n, f);
    W.bv(f, Z, 3, 3, 1);
    W.bv(f, U, 3, 3, 9);
    W.sub(U, Z);
    W.wV(Z, U);
    W.sub(f, Z);
    W.sub(Z, U);
    W.bv(U, f, 3, 3, 8);
    W.qI(f, T, 1);
    W.Ie(f, n);
    W.cA(n);
  };
  B.O.a1C = function (j, q, m, n, G) {
    var W = B.O.Z;
    W.zw(q, m);
    W.ZW(G[3]);
    var k = G[0],
      T = G[1],
      b = G[2],
      c = k >> 1,
      a = Math.max(~~(k / 5), 1),
      f = Math.max(~~((k * 2) / 3), 1),
      U = W.a1A(T, b),
      Z = W.r6(1),
      h = W.r6(1),
      u = W.r6(1),
      i = W.r6(1),
      x = W.r6(4);
    W.U4(j, Z);
    W.aci(2147483647, 4, 2, 2, 0, 255, h);
    W.aci(4, 2147483647, 2, 2, 0, 255, i);
    W.iz(u);
    W.Jj(h, u, h, 1);
    W.Jj(i, u, i, 1);
    W.Jj(h, Z, h, 1);
    W.Jj(i, Z, i, 1);
    W.Vp(j, x, c);
    W.Vp(x, n, c);
    W.bv(h, Z, 1, k, a);
    W.bv(Z, h, 3, k, f);
    W.bv(i, Z, k, 1, a);
    W.bv(Z, i, k, 3, f);
    W.Yf(h, i);
    W.kD(n);
    W.Ie(i, n);
    W.cA(n);
    W.aoV(n, U);
  };
  B.O.UR = function (j, q, m) {
    var n = m.a80,
      G = m.Dh,
      W = m.r6(1),
      top = m.r6(1),
      k = m.r6(1),
      T = m.r6(1),
      b = m.r6(1),
      c = m.r6(1),
      a = m.r6(1),
      f = m.r6(1),
      U = m.r6(1),
      Z = m.GM,
      h = m.uu,
      u = B.Vl.wo,
      i = B.Vl.__;
    u(j, W, Z, h, i([8, 5, 2, 5, 2, -1, 2, -1, -4]));
    u(j, top, Z, h, i([5, 5, 5, 2, 2, 2, -1, -1, -1]));
    u(j, k, Z, h, i([2, 5, 8, -1, 2, 5, -4, -1, 2]));
    u(j, T, Z, h, i([5, 2, -1, 5, 2, -1, 5, 2, -1]));
    u(j, b, Z, h, i([2, 2, 2, 2, 2, 2, 2, 2, 2]));
    u(j, c, Z, h, i([-1, 2, 5, -1, 2, 5, -1, 2, 5]));
    u(j, a, Z, h, i([2, -1, -4, 5, 2, -1, 8, 5, 2]));
    u(j, f, Z, h, i([-1, -1, -1, 2, 2, 2, 5, 5, 5]));
    u(j, U, Z, h, i([-4, -1, 2, -1, 2, 5, 2, 5, 8]));
    var x = [W, top, k, T, b, c, a, f, U];
    for (var X = 0; X < h; X++) {
      for (var $ = 0; $ < Z; $++) {
        var H = X * Z + $,
          C = j[H],
          l = null,
          v = 0;
        for (var K = -1; K < 2; K++) {
          for (var S = -1; S < 2; S++) {
            var o = x[(K + 1) * 3 + S + 1],
              V = Math.max(0, Math.min(X + K, h - 1)),
              P = Math.max(0, Math.min($ + S, Z - 1)),
              z = o[V * Z + P],
              E = Math.abs(z - C);
            if (l == null || E < l) {
              l = E;
              v = z;
            }
          }
        }
        q[H] = v;
      }
    }
  };
  B.O.a2e = function (j, q, m, n, G) {
    var self = B.O.Z;
    self.zw(q, m);
    var W = self.r6(1),
      k = self.r6(1);
    for (var y = 0; y < 4; y++) {
      self.aN(j, W, y);
      if (y < 3) {
        B.O.UR(W, k, self);
        B.O.UR(k, W, self);
        B.O.UR(W, k, self);
        B.O.UR(k, W, self);
        B.O.UR(W, k, self);
        B.O.UR(k, W, self);
        B.O.UR(W, k, self);
        B.O.UR(k, W, self);
        B.O.UR(W, k, self);
      } else k = W;
      self.Ie(k, n, y);
    }
  };
  B.O.Z = {};
  B.O.Z.GM = 0;
  B.O.Z.uu = 0;
  B.O.Z.Dh = 0;
  B.O.Z.lh = 0;
  B.O.Z.wH = 0;
  B.O.Z.zw = function (j, q) {
    var m = j * q,
      self = B.O.Z;
    self.GM = j;
    self.uu = q;
    self.Dh = m;
    self.lh = m << 1;
    self.wH = m << 2;
  };
  B.O.Z.ZW = function (j) {
    B.O.Z.random = function () {
      var q = (j += 1831565813);
      q = Math.imul(q ^ (q >>> 15), q | 1);
      q ^= q + Math.imul(q ^ (q >>> 7), q | 61);
      return ((q ^ (q >>> 14)) >>> 0) / 4294967296;
    };
  };
  B.O.Z.r6 = function (j) {
    var q = B.O.Z;
    return new Uint8Array([-1, q.Dh, q.lh, -1, q.wH][j]);
  };
  B.O.Z.E9 = function () {
    return new Int32Array(B.O.Z.lh);
  };
  B.O.Z.i8 = function (j, q, m, n) {
    if (n == null) n = m;
    var self = B.O.Z,
      G = self.GM,
      W = self.uu,
      k = n,
      T = n >> 1,
      b = m,
      c = m >> 1,
      a = m * n,
      f = 0;
    for (var y = 0; y < W; y++) {
      var U = 0;
      for (var Z = 0; Z < k; Z++) {
        for (var h = 0; h < b; h++) {
          var u = 0 - c + h,
            i = y - T + Z;
          if (u < 0) u = 0;
          else if (u >= G) u = G - 1;
          if (i < 0) i = 0;
          else if (i >= W) i = W - 1;
          U += j[i * G + u];
        }
      }
      q[f++] = ~~(U / a);
      for (var x = 1; x < G; x++) {
        for (var Z = 0; Z < k; Z++) {
          var X = x - c - 1,
            $ = X + b,
            i = y - T + Z;
          if (X < 0) X = 0;
          if ($ >= G) $ = G - 1;
          if (i < 0) i = 0;
          else if (i >= W) i = W - 1;
          U += j[i * G + $] - j[i * G + X];
        }
        q[f++] = ~~(U / a);
      }
    }
  };
  B.O.Z.Es = function (j, q, m, n) {
    var self = B.O.Z,
      G = new Int32Array(self.Dh),
      W = new Int32Array(self.Dh);
    for (var y = 0; y < 2; y++) {
      self.aN(j, G, y, 2);
      self.i8(G, W, m, n);
      self.Ie(W, q, y, 2);
    }
  };
  B.O.Z.Vp = function (j, q, m, n) {
    var self = B.O.Z,
      G = self.r6(1),
      W = self.r6(1);
    for (var y = 0; y < 4; y++) {
      self.aN(j, G, y);
      if (y < 3) self.i8(G, W, m, n);
      else W = G;
      self.Ie(W, q, y);
    }
  };
  B.O.Z.af3 = function (j, q, m, n, G) {
    var self = B.O.Z,
      W = self.GM,
      k = self.uu,
      T = m + n - 1,
      b = m >> 1,
      c = T >> 1,
      a = 0,
      f = m * n,
      U = new Int32Array(m);
    for (var y = 0; y < k; y++) {
      var Z = 0,
        h = 0,
        u = 0;
      for (var i = 0; i < m; i++) {
        var x = G ? T - i - n : i;
        for (var X = x, $ = n + x; X < $; X++) {
          var H = 0 - c + X,
            C = y - b + i;
          if (X == x) {
            U[i] = H;
          }
          if (H < 0) H = 0;
          else if (H >= W) H = W - 1;
          if (C < 0) C = 0;
          else if (C >= k) C = k - 1;
          var l = (W * C + H) << 2;
          Z += j[l];
          h += j[l + 1];
          u += j[l + 2];
        }
      }
      q[a++] = ~~(Z / f);
      q[a++] = ~~(h / f);
      q[a++] = ~~(u / f);
      q[a] = j[a];
      a++;
      for (var v = 1; v < W; v++) {
        for (var i = 0; i < m; i++) {
          var C = y - b + i,
            x = U[i] + 1;
          U[i] = x;
          var K = x - 1,
            S = x + n - 1;
          if (C < 0) C = 0;
          else if (C >= k) C = k - 1;
          if (K < 0) K = 0;
          else if (K >= W) K = W - 1;
          if (S < 0) S = 0;
          else if (S >= W) S = W - 1;
          var o = (C * W + K) << 2,
            V = (C * W + S) << 2;
          Z = Z + j[V] - j[o];
          h = h + j[V + 1] - j[o + 1];
          u = u + j[V + 2] - j[o + 2];
        }
        q[a++] = ~~(Z / f);
        q[a++] = ~~(h / f);
        q[a++] = ~~(u / f);
        q[a] = j[a];
        a++;
      }
    }
  };
  B.O.Z.mx = function (j, q, m, n, G, W) {
    var self = B.O.Z,
      k = self.GM,
      T = self.uu,
      b = m + n - 1,
      c = m >> 1,
      a = b >> 1,
      f = 0,
      U = new Int32Array(m),
      Z = new Int32Array(256),
      h = new Int32Array(16);
    for (var y = 0; y < T; y++) {
      for (var u = 0; u < 256; u++) {
        Z[u] = 0;
      }
      for (var u = 0; u < 16; u++) {
        h[u] = 0;
      }
      for (var i = 0; i < m; i++) {
        var x = G ? b - i - n : i;
        for (var X = x, $ = n + x; X < $; X++) {
          var H = 0 - a + X,
            C = y - c + i;
          if (X == x) {
            U[i] = H;
          }
          if (H < 0) H = 0;
          else if (H >= k) H = k - 1;
          if (C < 0) C = 0;
          else if (C >= T) C = T - 1;
          Z[j[C * k + H]]++;
          h[j[C * k + H] >>> 4]++;
        }
      }
      var l = 0,
        v = 0;
      while (l + h[v >>> 4] < W) {
        l += h[v >>> 4];
        v += 16;
      }
      for (; v < 256; v++) {
        l += Z[v];
        if (l >= W) break;
      }
      q[f++] = v;
      for (var u = 1; u < k; u++) {
        for (var i = 0; i < m; i++) {
          var C = y - c + i,
            x = U[i] + 1;
          U[i] = x;
          var K = x - 1,
            S = x + n - 1;
          if (C < 0) C = 0;
          else if (C >= T) C = T - 1;
          if (K < 0) K = 0;
          else if (K >= k) K = k - 1;
          if (S < 0) S = 0;
          else if (S >= k) S = k - 1;
          Z[j[C * k + K]]--;
          Z[j[C * k + S]]++;
          h[j[C * k + K] >>> 4]--;
          h[j[C * k + S] >>> 4]++;
        }
        l = 0;
        v = 0;
        while (l + h[v >>> 4] < W) {
          l += h[v >>> 4];
          v += 16;
        }
        for (; v < 256; v++) {
          l += Z[v];
          if (l >= W) break;
        }
        q[f++] = v;
      }
    }
  };
  B.O.Z.al = function (j, q, m, n, G, W) {
    var self = B.O.Z,
      k = self.r6(1),
      T = self.r6(1);
    for (var y = 0; y < 4; y++) {
      self.aN(j, k, y);
      if (y < 3) self.mx(k, T, m, n, G, W);
      else T = k;
      self.Ie(T, q, y);
    }
  };
  B.O.Z.bv = function (j, q, m, n, G) {
    G = Math.min(n * m, G);
    var self = B.O.Z,
      W = self.GM,
      k = self.uu,
      T = n >> 1,
      b = m >> 1,
      c = 0,
      a = new Int32Array(n),
      f = new Int32Array(256),
      U = new Int32Array(16);
    for (var y = 0; y < k; y++) {
      for (var Z = 0; Z < 256; Z++) {
        f[Z] = 0;
      }
      for (var Z = 0; Z < 16; Z++) {
        U[Z] = 0;
      }
      for (var h = 0; h < n; h++) {
        for (var u = 0, i = m; u < i; u++) {
          var x = 0 - b + u,
            X = y - T + h;
          if (u == 0) {
            a[h] = x;
          }
          if (x < 0) x = 0;
          else if (x >= W) x = W - 1;
          if (X < 0) X = 0;
          else if (X >= k) X = k - 1;
          f[j[X * W + x]]++;
          U[j[X * W + x] >>> 4]++;
        }
      }
      var $ = 0,
        H = 0;
      while ($ + U[H >>> 4] < G) {
        $ += U[H >>> 4];
        H += 16;
      }
      for (; H < 256; H++) {
        $ += f[H];
        if ($ >= G) break;
      }
      q[c++] = H;
      for (var Z = 1; Z < W; Z++) {
        for (var h = 0; h < n; h++) {
          var X = y - T + h,
            C = a[h] + 1;
          a[h] = C;
          var l = C - 1,
            v = C + m - 1;
          if (X < 0) X = 0;
          else if (X >= k) X = k - 1;
          if (l < 0) l = 0;
          else if (l >= W) l = W - 1;
          if (v < 0) v = 0;
          else if (v >= W) v = W - 1;
          f[j[X * W + l]]--;
          f[j[X * W + v]]++;
          U[j[X * W + l] >>> 4]--;
          U[j[X * W + v] >>> 4]++;
        }
        $ = 0;
        for (H = 0; H < 256; H++) {
          $ += f[H];
          if ($ >= G) break;
        }
        q[c++] = H;
      }
    }
  };
  B.O.Z.Qj = function (j, q, m, n, G) {
    var self = B.O.Z,
      W = self.r6(1),
      k = self.r6(1);
    for (var y = 0; y < 4; y++) {
      self.aN(j, W, y);
      if (y < 3) self.bv(W, k, m, n, G);
      else k = W;
      self.Ie(k, q, y);
    }
  };
  B.O.Z.Zt = function (j, q, m) {
    var self = B.O.Z,
      n = self.GM,
      G = self.uu,
      W = 0;
    for (var y = 0; y < G; y++) {
      var k = y * n,
        T = (y - 1) * n,
        b = (y + 1) * n;
      if (T < 0) T = k;
      if (b >= G) b = k;
      for (var c = 0; c < n; c++) {
        var a = c - 1,
          f = c + 1;
        if (a < 0) a = c;
        if (f >= n) f = c;
        var U = k + a,
          Z = k + f,
          h = T + c,
          u = b + c,
          i = k + c,
          x = j[U],
          X = j[Z],
          $ = j[h],
          H = j[u],
          C = j[i],
          l = C + (C * 4 * m + 0.5);
        l = l - ((x + X + H + $) * m + 0.5);
        q[W++] = self.vm(l);
      }
    }
  };
  B.O.Z.Qz = function (j, q, m) {
    var self = B.O.Z,
      n = self.r6(1),
      G = self.r6(1);
    for (var y = 0; y < 4; y++) {
      self.aN(j, n, y);
      if (y < 3) self.Zt(n, G, m);
      else G = n;
      self.Ie(G, q, y);
    }
  };
  B.O.Z.axM = function (j, q, m) {
    var self = B.O.Z,
      n = self.GM,
      G = self.uu,
      W = 0,
      k = m + 4;
    for (var y = 0; y < G; y++) {
      var T = y * n,
        b = (y - 1) * n,
        c = (y + 1) * n;
      if (b < 0) b = T;
      if (c >= G) c = T;
      for (var a = 0; a < n; a++) {
        var f = a - 1,
          U = a + 1;
        if (f < 0) f = a;
        if (U >= n) U = a;
        var Z = (T + f) << 2,
          h = (T + U) << 2,
          u = (b + a) << 2,
          i = (c + a) << 2,
          x = (T + a) << 2;
        for (var X = 0; X < 3; X++) {
          var $ = j[Z + X],
            H = j[h + X],
            C = j[u + X],
            l = j[i + X],
            v = j[x + X];
          q[W++] = (v * m + $ + H + l + C) / k;
        }
        q[W] = j[W];
        W++;
      }
    }
  };
  B.O.Z.aA$ = function (j, q, m, n) {
    var self = B.O.Z,
      G = self.GM,
      W = self.uu,
      k = m >> 1,
      T = n >> 1,
      b = 0,
      c = new Int32Array(m),
      a = new Int32Array(256);
    for (var y = 0; y < W; y++) {
      for (var f = 0; f < 256; f++) {
        a[f] = 0;
      }
      for (var U = 0; U < m; U++) {
        for (var Z = 0, h = n; Z < h; Z++) {
          var u = 0 - T + Z,
            i = y - k + U;
          if (Z == 0) {
            c[U] = u;
          }
          if (u < 0) u = 0;
          else if (u >= G) u = G - 1;
          if (i < 0) i = 0;
          else if (i >= W) i = W - 1;
          a[j[i * G + u]]++;
        }
      }
      var x = 0,
        X = 0;
      for (var $ = 0; $ < 256; $++) {
        if (x < a[$]) {
          X = $;
          x = a[$];
        }
      }
      q[b++] = X;
      for (var f = 1; f < G; f++) {
        for (var U = 0; U < m; U++) {
          var i = y - k + U,
            H = c[U] + 1;
          c[U] = H;
          var C = H - 1,
            l = H + n - 1;
          if (i < 0) i = 0;
          else if (i >= W) i = W - 1;
          if (C < 0) C = 0;
          else if (C >= G) C = G - 1;
          if (l < 0) l = 0;
          else if (l >= G) l = G - 1;
          a[j[i * G + C]]--;
          a[j[i * G + l]]++;
        }
        x = 0;
        X = 0;
        for (var $ = 0; $ < 256; $++) {
          if (x < a[$]) {
            X = $;
            x = a[$];
          }
        }
        q[b++] = X;
      }
    }
  };
  B.O.Z.aqm = [
    function (j, q, m, n, G, W, k, T, b, c) {
      return G + (j + q + m) * c - (b + T + k) * c;
    },
    function (j, q, m, n, G, W, k, T, b, c) {
      return G + (q + m + W) * c - (T + k + n) * c;
    },
    function (j, q, m, n, G, W, k, T, b, c) {
      return G + (m + W + b) * c - (k + n + j) * c;
    },
    function (j, q, m, n, G, W, k, T, b, c) {
      return G + (W + b + T) * c - (n + j + q) * c;
    },
    function (j, q, m, n, G, W, k, T, b, c) {
      return G + (b + T + k) * c - (j + q + m) * c;
    },
    function (j, q, m, n, G, W, k, T, b, c) {
      return G + (T + k + n) * c - (q + m + W) * c;
    },
    function (j, q, m, n, G, W, k, T, b, c) {
      return G + (k + n + j) * c - (m + W + b) * c;
    },
    function (j, q, m, n, G, W, k, T, b, c) {
      return G + (n + j + q) * c - (W + b + T) * c;
    },
  ];
  B.O.Z.hT = function (j, q, m, n, G) {
    var self = B.O.Z,
      W = self.GM,
      k = self.uu,
      T = W,
      b = self.aqm[n - 1];
    for (var y = 0; y < k; y++) {
      var c = (y > 0 ? y - 1 : 0) * T,
        a = y * T,
        f = (y < k ? y + 1 : y) * T;
      for (var U = 0; U < W; U++) {
        var Z = U > 0 ? U - 1 : 0,
          h = U < W ? U + 1 : U,
          u = a + U,
          i = j[c + Z],
          x = j[c + U],
          X = j[c + h],
          $ = j[a + Z],
          H = q[u],
          C = j[a + h],
          l = j[f + Z],
          v = j[f + U],
          K = j[f + h];
        m[u] = self.vm(b(i, x, X, $, H, C, l, v, K, G));
      }
    }
  };
  B.O.Z.a46 = function (j, q, m, n, G) {
    var self = B.O.Z,
      W = self.r6(1),
      k = self.r6(1),
      T = self.r6(1);
    for (var y = 0; y < 3; y++) {
      self.aN(j, W, y);
      self.aN(q, k, y);
      self.hT(W, k, T, n, G);
      self.Ie(T, m, y);
    }
    self.aN(q, W, 3);
    self.Ie(W, m, 3);
  };
  B.O.Z.yo = function (j, q) {
    var m = j.length,
      n = 0;
    for (var y = 0; y < m; y++) {
      q[n++] = ~~((j[y++] + j[y++] + j[y++] + 2) / 3);
    }
  };
  B.O.Z.hN = function (j, q) {
    var m = q.length,
      n = 0;
    for (var y = 0; y < m; y++) {
      var G = j[y];
      q[n++] = G;
      q[n++] = G;
      q[n++] = G;
      q[n++] = 255;
    }
    if (q[0] == 255) q[0]--;
    else q[0]++;
  };
  B.O.Z.U4 = function (j, q) {
    var m = q.length,
      n = 0;
    for (var y = 0; y < m; y++) {
      var G = j[n++],
        W = j[n++],
        k = j[n++];
      n++;
      if (W > G) G = W;
      if (k > G) G = k;
      q[y] = G;
    }
  };
  B.O.Z.kD = function (j, q) {
    if (q == null) q = j;
    var m = j.length;
    for (var n = 0; n < m; n += 4) {
      var G = j[n],
        W = j[n + 1],
        k = j[n + 2],
        T = G,
        b = 0,
        c = G,
        f;
      if (W <= G) {
        G = W;
      } else {
        b = 1;
        c = W;
      }
      if (k <= c) {
        if (G > k) {
          G = k;
        }
      } else {
        b = 2;
        c = k;
      }
      var a = c - G;
      if (a != 0) {
        if (b == 0) {
          f = ~~((43 * (W - k)) / a);
        } else if (b == 1) {
          f = ~~((43 * (k + 2 * a - T)) / a);
        } else {
          f = (43 * (T + 4 * a - W)) / a;
        }
        if (f < 0) {
          f = 255 & (f - 1);
        }
        q[n] = f;
        q[n + 1] = ~~((255 * a) / c);
      } else {
        q[n] = a;
        q[n + 1] = a;
      }
      q[n + 2] = c;
      q[n + 3] = j[n + 3];
    }
  };
  B.O.Z.cA = function (j, q) {
    if (q == null) q = j;
    var m = j.length;
    for (var n = 0; n < m; n += 4) {
      var G = j[n],
        W = j[n + 1],
        k = j[n + 2];
      if (W) {
        if (G == 255) G = 0;
        var T = ~~((6 * G) / 255),
          b = ~~(-255 * T + 6 * G);
        if (T == 0) {
          q[n] = k;
          q[n + 1] = ~~((k * (255 - (W * (255 - b)) / 255)) / 255);
          q[n + 2] = ~~((k * (255 - W)) / 255);
        } else if (T == 1) {
          q[n] = ~~((k * (255 - (W * b) / 255)) / 255);
          q[n + 1] = k;
          q[n + 2] = ~~((k * (255 - W)) / 255);
        } else if (T == 2) {
          q[n] = ~~((k * (255 - W)) / 255);
          q[n + 1] = k;
          q[n + 2] = ~~((k * (255 - (W * (255 - b)) / 255)) / 255);
        } else if (T == 3) {
          q[n] = ~~((k * (255 - W)) / 255);
          q[n + 1] = ~~((k * (255 - (W * b) / 255)) / 255);
          q[n + 2] = k;
        } else if (T == 4) {
          q[n] = ~~((k * (255 - (W * (255 - b)) / 255)) / 255);
          q[n + 1] = ~~((k * (255 - W)) / 255);
          q[n + 2] = k;
        } else {
          q[n] = k;
          q[n + 1] = ~~((k * (255 - W)) / 255);
          q[n + 2] = ~~((k * (255 - (W * b) / 255)) / 255);
        }
      } else {
        q[n] = k;
        q[n + 1] = k;
        q[n + 2] = k;
      }
      q[n + 3] = j[n + 3];
    }
  };
  B.O.Z.Ie = function (j, q, m, n) {
    if (m == null) m = 2;
    if (n == null) n = 4;
    var G = j.length;
    for (var y = 0; y < G; y++) {
      q[m] = j[y];
      m += n;
    }
  };
  B.O.Z.aN = function (j, q, m, n) {
    if (m == null) m = 2;
    if (n == null) n = 4;
    var G = q.length;
    for (var y = 0; y < G; y++) {
      q[y] = j[m];
      m += n;
    }
  };
  B.O.Z.avb = function (j, q, m, n) {
    if (n == null) n = 1;
    var G = q.length,
      W = 0,
      k;
    for (var W = 0; W < G; W++) {
      k = q[W];
      if (k) {
        k *= n;
        m[W] = ~~((k * j[W] + (255 - k) * m[W]) / 255);
      }
    }
  };
  B.O.Z.VA = function (j, q, m, n) {
    if (n == null) n = m;
    var G = q.length,
      W = 0,
      k,
      T;
    for (var y = 0; y < G; y++) {
      k = q[y];
      if (k) {
        T = 255 - k;
        n[W] = ~~((k * j[W] + T * m[W]) / 255);
        n[W + 1] = ~~((k * j[W + 1] + T * m[W + 1]) / 255);
        n[W + 2] = ~~((k * j[W + 2] + T * m[W + 2]) / 255);
      }
      n[W + 3] = j[W + 3];
      W += 4;
    }
  };
  B.O.Z.dc = function (j, q, m, n) {
    var G = ~~(n * 255),
      W = m.length;
    for (var y = 0; y < W; y++) {
      m[y] =
        ((255 - (G * (255 - j[y])) / 255) * q[y] +
          j[y] * ((G * (255 - j[y])) / 255)) /
        255;
    }
  };
  B.O.Z.Jj = function (j, q, m, n) {
    var G = ~~(n * 255),
      W = m.length;
    for (var y = 0; y < W; y++) {
      m[y] =
        ((255 - (G * j[y]) / 255) * q[y] + j[y] * ((G * j[y]) / 255)) / 255;
    }
  };
  B.O.Z.rB = function (j, q, m) {
    var n = q.length;
    for (var y = 0; y < n; y++) {
      q[y] = ~~(j[y] * m + 0.5) + (q[y] - ~~(q[y] * m + 0.5));
    }
  };
  B.O.Z.sub = function (j, q) {
    var m = j.length;
    for (var y = 0; y < m; y++) {
      q[y] = Math.max(j[y] - q[y], 0);
    }
  };
  B.O.Z.add = function (j, q) {
    var m = j.length;
    for (var y = 0; y < m; y++) {
      q[y] = Math.min(j[y] + q[y], 255);
    }
  };
  B.O.Z.a80 = function (j, q) {
    var m = j.length;
    for (var y = 0; y < m; y++) {
      q[y] = j[y] + q[y];
    }
  };
  B.O.Z.Yf = function (j, q) {
    var m = j.length;
    for (var y = 0; y < m; y++) {
      q[y] = (j[y] + q[y]) >> 1;
    }
  };
  B.O.Z.wV = function (j, q) {
    var m = j.length;
    for (var y = 0; y < m; y++) {
      q[y] = j[y];
    }
  };
  B.O.Z.qh = function (j, q) {
    var m = j.length;
    for (var y = 0; y < m; y++) {
      j[y] = q[j[y]];
    }
  };
  B.O.Z.aoV = function (j, q) {
    var m = B.O.Z.wH;
    for (var y = 0; y < m; y += 4) {
      var n = j[y],
        G = j[y + 1],
        W = j[y + 2],
        k = n;
      if (G > n) k = G;
      if (W > n) k = W;
      var T = q[k];
      if (T) {
        j[y] = ~~((T * n) / k);
        j[y + 1] = ~~((T * G) / k);
        j[y + 2] = ~~((T * W) / k);
      } else {
        j[y] = T;
        j[y + 1] = T;
        j[y + 2] = T;
      }
    }
  };
  B.O.Z.WE = function (j, q) {
    for (var y = 0, m = j.length; y < m; y++) {
      j[y] = Math.min(255, ~~(0.5 + j[y] * q));
    }
  };
  B.O.Z.Zd = function (j, q) {
    for (var y = 0, m = j.length; y < m; y++) {
      j[y] = 255 - Math.min(255, ~~(0.5 + (255 - j[y]) * q));
    }
  };
  B.O.Z.BR = function (j) {
    var q = j.length;
    for (var y = 0; y < q; y++) {
      j[y] = 255 - j[y];
    }
  };
  B.O.Z.fo = function (j, q, m, n) {
    if (m == null) m = 0;
    if (n == null) n = 255;
    for (var y = 0, G = j.length; y < G; y++) {
      j[y] = j[y] >= q ? n : m;
    }
  };
  B.O.Z.az = function (j) {
    return [(j >> 24) & 255, (j >> 16) & 255, (j >> 8) & 255, j & 255];
  };
  B.O.Z.ahE = function (j, q, m, n) {
    if (m == null) m = 255;
    if (n == null) n = 4278190335;
    var G = B.O.Z,
      W = G.wH,
      k = G.az(m),
      T = G.az(n);
    for (var y = 0; y < W; y += 4) {
      var b = ~~((j[y] + j[y + 1] + j[y + 2] + 2) / 3);
      if (b >= q) {
        j[y] = k[0];
        j[y + 1] = k[1];
        j[y + 2] = k[2];
      } else {
        j[y] = T[0];
        j[y + 1] = T[1];
        j[y + 2] = T[2];
      }
    }
  };
  B.O.Z.Nt = function (j, q) {
    var m = B.O.Z,
      n = m.wH,
      G = m.az(q);
    for (var y = 0; y < n; ) {
      j[y++] = G[0];
      j[y++] = G[1];
      j[y++] = G[2];
      j[y++] = G[3];
    }
  };
  B.O.Z.a74 = function (j, q) {
    var m = j.length;
    for (var y = 0; y < m; ) {
      j[y++] = q;
    }
  };
  B.O.Z.a1A = function (j, q) {
    j = j > 5 ? (100 - Math.max(4, j)) / 100 : 0.95;
    q = q != 100 ? Math.max(4, q) / 100 : 0.9995;
    var m = new Uint8Array(256),
      n = q > 0.5 ? 0.5 / (1 - q) : q * 2,
      G = ~~(n * 256),
      W = ~~((0.5 - j * n) * 256) << 8;
    for (var y = 0; y < 256; y++) {
      m[y] = B.O.Z.vm(W >> 8);
      W += G;
    }
    return m;
  };
  B.O.Z.iz = function (j) {
    for (var y = 0, q = B.O.Z, m = j.length; y < m; y++) {
      j[y] = ~~(q.random() * 256);
    }
  };
  B.O.Z.atZ = function (j, q) {
    for (var y = 0, m = B.O.Z, n = j.length; y < n; y++) {
      j[y] = m.random() < q ? 255 : 0;
    }
  };
  B.O.Z.adx = function (j, q, m) {
    for (var y = 0, n = B.O.Z, G = j.length; y < G; y++) {
      if (n.random() < q) j[y] = m;
    }
  };
  B.O.Z.aH3 = function (j, q, m) {
    var n = j.length;
    for (var y = 0; y < n; y++) {
      j[y] = B.O.Z.vm(j[y] + m[q[y]]);
    }
  };
  B.O.Z.UJ = function (j) {
    var q = new Uint32Array(256);
    for (var y = 0, m = j.length; y < m; y++) q[j[y]]++;
    return q;
  };
  B.O.Z.akQ = function (j, q) {
    var m = 0,
      n = 0,
      G = new Uint32Array(256),
      W = new Float32Array(256);
    for (var y = 0, k = j.length; y < k; y++) {
      var T = j[y],
        b = q[y];
      if (b == 255) {
        G[T]++;
        m++;
      } else if (b > 0) {
        b /= 255;
        n += b;
        W[T] += b;
        if (n >= 1) {
          n--;
          m++;
        }
        if (W[T] >= 1) {
          W[T]--;
          G[T]++;
        }
      }
    }
    return [m, G];
  };
  B.O.Z.h3 = function (j, q, m, n) {
    var self = B.O.Z,
      G,
      W,
      a = 0,
      U = 256;
    if (n) {
      var k = self.akQ(m, n);
      G = k[1];
      W = k[0] / 100;
    } else {
      G = self.UJ(m);
      W = self.Dh / 100;
    }
    var T = new Uint8Array(256),
      b = W * j,
      c = W * q,
      f = -1;
    do {
      a += G[++f];
    } while (a <= b);
    a = 0;
    do {
      a += G[--U];
    } while (a <= c);
    if (U - f <= 0) U = f + 1;
    if (U > 255) {
      U = 255;
      f = 254;
    }
    var Z = 255 / (U - f),
      h = -f;
    for (var y = 0; y < 256; y++) {
      T[y] = self.vm(Z * h + 0.5);
      h++;
    }
    return T;
  };
  B.O.Z.qI = function (j, q, m, n) {
    var G = B.O.Z;
    G.qh(j, G.h3(q, m, j, n));
  };
  B.O.Z.ajb = function (j, q) {
    var self = B.O.Z,
      m = self.UJ(j),
      n = (self.Dh * q) / 100,
      G = 0,
      W = -1;
    do {
      G += m[++W];
    } while (G <= n);
    return W;
  };
  B.O.Z.Km = function (j, q) {
    var m = 0,
      self = B.O.Z,
      n = self.GM,
      G = self.uu,
      W = 1 / Math.PI,
      k = W * 255;
    for (var y = 0; y < G; y++) {
      var T = y + 1;
      if (T == G) T--;
      var b = y * n,
        c = ~~((1 - (y + 1) / G) * 255);
      for (var a = 0; a < n; a++) {
        var f = a + 1;
        if (f == n) f--;
        var U = j[b + a],
          Z = j[b + f],
          h = j[T * n + a];
        if (U - h == 0) {
          q[m++] = c;
        } else {
          var u = U - h + 255;
          if (u == 255) {
            u = 0;
          } else {
            u = ~~(Math.atan2(1 / (255 - u), 1) * k + 0.5);
            if (u < 0) u += 255;
          }
          q[m++] = u;
        }
        if (U - Z == 0) {
          q[m++] = ~~((1 - (a + 1) / n) * 255);
        } else {
          var u = U - Z + 255;
          if (u == 255) {
            u = 0;
          } else {
            u = ~~(Math.atan2(1 / (255 - u), 1) * k + 0.5);
            if (u < 0) u += 255;
          }
          q[m++] = u;
        }
      }
    }
  };
  B.O.Z.a8f = function (j, q) {
    var self = B.O.Z,
      m = self.GM,
      n = self.uu,
      G = 0;
    for (var y = 0; y < n; y++) {
      for (var W = 0; W < m; W++) {
        j[G] = ~~(y * q + 0.5) + ~~(j[G] * (1 - q) + 0.5);
        G++;
        j[G] = ~~(W * q + 0.5) + ~~(j[G] * (1 - q) + 0.5);
        G++;
      }
    }
  };
  B.O.Z.abr = function (j, q, m, n) {
    var self = B.O.Z,
      G = self.GM,
      W = self.uu,
      k = 0;
    for (var y = 0; y < W; y++) {
      for (var T = 0; T < G; T++) {
        q[k] = ~~(q[k] * (1 - m) + 0.5) + ~~(j[k] * n + 0.5);
        k++;
        q[k] = ~~(q[k] * (1 - m) + 0.5) + ~~(j[k] * n + 0.5);
        k++;
      }
    }
  };
  B.O.Z.anz = function (j, q, m) {
    var self = B.O.Z,
      n = self.GM,
      G = self.uu,
      W = 0,
      k = 0;
    for (var y = 0; y < G; y++) {
      for (var T = 0; T < n; T++) {
        var b = j[W++],
          c = j[W++];
        q[k++] = c % m >= 2 && b % m >= 2 ? 255 : 0;
      }
    }
  };
  B.O.Z.aci = function (j, q, m, n, G, W, k) {
    var self = B.O.Z,
      T = self.GM,
      b = self.uu,
      c = 0,
      a = 0,
      f = 0;
    for (var y = 0; y < b; y++) {
      var U = y % j < m || b - m <= y;
      for (var Z = 0; Z < T; Z++) {
        k[c++] = U || Z % q < n || T - n <= Z ? G : W;
      }
    }
  };
  B.O.Z.se = function (j, q, m, n) {
    var self = B.O.Z,
      G = self.GM,
      W = self.uu,
      k = i9.se(q),
      T = k[1],
      b = k[0].r,
      c = k[0].$,
      a = 100 / m;
    for (var f = 0; f < W; f++)
      for (var U = 0; U < G; U++) {
        var Z = B.B.Xw(U * a, f * a, T, b, c);
        j[f * G + U] = n ? 255 - Z : Z;
      }
  };
  B.O.Z.vm = function (j) {
    return ~~Math.min(255, Math.max(0, j));
  };
  B.O.Z.a27 = [
    0, 5, 10, 15, 20, 25, 35, 45, 65, 85, 105, 125, 145, 165, 185, 205,
  ];
  B.O.Z.ash = [
    0, 0.2, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.2, 1.3, 1.4, 1.5, 1.7, 2,
    2.5, 3, 3.5, 4, 5, 6, 7, 8, 9, 10,
  ];
  B.O.Z.fD = function (j) {
    return j > 40
      ? [1.25, 1.5, 1.75, 2, 2.5, 3, 4, 5, 7.5, 10][j - 41]
      : j / 40;
  };
  B.O.Z.ao1 = function (j, q, m) {
    var self = B.O.Z,
      n = self.GM,
      G = self.uu,
      W = m,
      k = m >> 1,
      T = k - 1,
      b = W * W,
      c = 0;
    for (var y = 0; y < G; y++) {
      var a = 0,
        f = 0,
        U = 0,
        Z = ~~(y / m) * m,
        h = 0;
      for (var u = 0; u < W; u++) {
        for (var i = 0; i < W; i++) {
          var x = h + i,
            X = Z + u;
          if (x >= n) x = n - 1;
          if (X >= G) X = G - 1;
          a += j[(X * n + x) << 2];
          f += j[((X * n + x) << 2) + 1];
          U += j[((X * n + x) << 2) + 2];
        }
      }
      var $ = ~~(a / b),
        H = ~~(f / b),
        C = ~~(U / b);
      q[c] = $;
      q[c + 1] = H;
      q[c + 2] = C;
      q[c + 3] = j[c + 3];
      c += 4;
      for (var l = 1; l < n; l++) {
        for (var u = 0; u < W; u++) {
          var v = l - 1,
            K = v + W,
            X = Z + u;
          if (K >= n) K = n - 1;
          if (X >= G) X = G - 1;
          var S = X * n,
            o = (S + K) << 2,
            V = (S + v) << 2;
          a += j[o] - j[V];
          f += j[o + 1] - j[V + 1];
          U += j[o + 2] - j[V + 2];
        }
        if (l % m == 0) {
          $ = ~~(a / b);
          H = ~~(f / b);
          C = ~~(U / b);
        }
        q[c] = $;
        q[c + 1] = H;
        q[c + 2] = C;
        q[c + 3] = j[c + 3];
        c += 4;
      }
    }
  };
  B.O.Z.ajt = function (j, q, m, n, G) {
    var self = B.O.Z,
      W = self.GM,
      k = self.uu,
      T = 0,
      b = 0,
      c = 0,
      a = 0;
    for (var y = a; y < k + a; y++) {
      var f = y % q >= n || y < n || k + a - n <= y;
      for (var U = 0; U < W; U++) {
        j[T++] = f && (U % m >= G || U < G || W - G <= U) ? 255 : 0;
      }
    }
  };
  B.O.Z.alr = function (j, q, m) {
    var n = function (c, a) {
        return a <= c ? ((c / a) & 1 ? a - (c % a) : c % a) : c;
      },
      G = [
        function (T, b) {
          return n(T, 255) / 255;
        },
        function (T, b) {
          return (255 + n(T, 255) - n(b, 255)) / 510;
        },
        function (T, b) {
          return (255 - n(b, 255)) / 255;
        },
        function (T, b) {
          return (510 - n(T, 255) - n(b, 255)) / 510;
        },
        function (T, b) {
          return (255 - n(T, 255)) / 255;
        },
        function (T, b) {
          return (255 - n(T, 255) + n(b, 255)) / 510;
        },
        function (T, b) {
          return n(b, 255) / 255;
        },
        function (T, b) {
          return (n(T, 255) + n(b, 255)) / 510;
        },
      ][m],
      W = 0,
      k = 0;
    for (var y = 0; y < B.O.Z.Dh; y++) {
      var T = j[W++],
        b = j[W++];
      q[k++] = ~~(255 * G(T, b));
    }
  };
  B.O.aKw = (function () {
    var j = [],
      q = new Uint8Array(512),
      m = new Float32Array(512),
      n = new Float32Array(512),
      G = [1, -1, 1, -1, 1, -1, 0, 0],
      W = [1, 1, -1, -1, 0, 0, 1, -1],
      k = 0,
      T,
      h = 0;
    for (; k < 256; k++) j[k] = k;
    while (k != 0) {
      k--;
      T = Math.floor(Math.random() * k);
      j[T] ^= j[k] ^ (j[k] = j[T]);
    }
    function b(b) {
      b = Math.floor(b * 65536);
      if (b < 256) {
        b |= b << 8;
      }
      for (var y = 0; y < 256; y++) {
        var x = y + 256,
          X = j[y] ^ ((y & 1 ? b : b >> 8) & 255);
        q[y] = q[x] = X;
        X = X % 8;
        m[y] = m[x] = G[X];
        n[y] = n[x] = W[X];
      }
    }
    function c(x) {
      return x * x * x * (x * (x * 6 - 15) + 10);
    }
    function a(x, X, $) {
      return (1 - $) * x + $ * X;
    }
    function f(x, X) {
      return x & X;
    }
    function U(x, X) {
      return x % X;
    }
    function Z(x, X, $, H, C) {
      var l = Math.floor(x),
        v = Math.floor(X),
        k,
        K,
        S,
        o,
        V,
        P;
      x = x - l;
      X = X - v;
      l = l & 255;
      v = v & 255;
      k = l + q[v];
      o = m[k] * x + n[k] * X;
      k = l + q[C(v + 1, H)];
      S = m[k] * x + n[k] * (X - 1);
      k = C(l + 1, $) + q[v];
      V = m[k] * (x - 1) + n[k] * X;
      k = C(l + 1, $) + q[C(v + 1, H)];
      P = m[k] * (x - 1) + n[k] * (X - 1);
      K = c(x);
      return a(a(o, V, K), a(S, P, K), c(X));
    }
    function u(x, k, X) {
      x[k] = X;
    }
    function i(x, X, $, H, C) {
      var l = Math.min(Math.min(X, 256), Math.min(256, $)),
        v = l == 256 || l < 8,
        K = 8,
        S = new Uint32Array(K),
        o = new Uint32Array(K),
        V = new Float32Array(K),
        P = new Float32Array(K),
        z = 1,
        E = 1,
        A = v ? f : U,
        N = u,
        Q;
      for (var y = 0; y < K; y++) {
        Q = (E * 1) / l;
        if (v) {
          o[y] = (1 << Math.ceil(Math.log2($ * Q))) - 1;
          S[y] = (1 << Math.ceil(Math.log2(X * Q))) - 1;
        } else {
          o[y] = Q * $;
          S[y] = Q * X;
        }
        V[y] = z;
        P[y] = Q;
        z *= 0.5;
        E = E << 1;
      }
      b(Math.random());
      for (var e = 0, k = 0; e < $; e++) {
        for (var Y = 0; Y < X; Y++) {
          var d = 0;
          for (var I = 0; I < K; I++) {
            Q = P[I];
            d += Z(Y * Q, e * Q, S[I], o[I], A) * V[I];
          }
          N(H, k++, Math.round(Math.max(0, 255 * Math.min(1, 0.5 + d * 0.5))));
        }
      }
    }
    return i;
  })();
  B.O.a5a = (function () {
    function j(q, m, n, G) {
      var W = new Uint8Array(q.length >>> 2),
        k = new Uint8Array(q.length >>> 2),
        T = new Uint8Array(q.length);
      for (var y = 0; y < q.length; y += 4) {
        var b = q[y + 0] * 0.3 + q[y + 1] * 0.59 + q[y + 2] * 0.11;
        k[y >>> 2] = b;
        T[y] = q[y];
        T[y + 1] = q[y + 1];
        T[y + 2] = q[y + 2];
      }
      B.Vl.abx(k, W, m, n);
      B.Vl.kT(q, G, m, n, B.Vl.B1[1], !1, !0);
      for (var y = 0; y < q.length; y += 4) {
        T[y + 3] = 255 - W[y >>> 2];
      }
      for (var y = 0, c = q.length; y < c; y += 4) {
        var a = T[y + 3] / 255;
        G[y] = T[y] * a + G[y] * (1 - a);
        G[y + 1] = T[y + 1] * a + G[y + 1] * (1 - a);
        G[y + 2] = T[y + 2] * a + G[y + 2] * (1 - a);
      }
    }
    return j;
  })();
  B.O.aFF = (function () {
    function j(W, k, T, b, c) {
      var a = new Uint32Array(W.buffer),
        f = 0;
      for (var y = 0; y < T; y++) {
        for (var U = 0; U < k; U++, f += 4) {
          var Z = a[y * k + U],
            h = Z & 255,
            u = (Z >>> 8) & 255,
            i = (Z >>> 16) & 255,
            x = (Z >>> 24) & 255,
            X = ~~(Math.random() * 8),
            $ = X % 3,
            H = 0,
            C = 0;
          if (X < 3) {
            C--;
          } else if (X > 4) {
            C++;
          }
          if ($ == 0) {
            H--;
          } else if ($ == 2) {
            H++;
          }
          var l = U + H,
            v = y + C;
          if (l < 0) l = 0;
          else if (l > k - 1) l = k - 1;
          if (v < 0) v = 0;
          else if (v > T - 1) v = T - 1;
          var Z = a[v * k + l],
            K = Z & 255,
            S = (Z >>> 8) & 255,
            o = (Z >>> 16) & 255,
            V = (Z >>> 24) & 255;
          b[f] = c(h, K);
          b[f + 1] = c(u, S);
          b[f + 2] = c(i, o);
          b[f + 3] = c(x, V);
        }
      }
    }
    function q(W, k) {
      return k;
    }
    function m(W, k) {
      return W > k ? k : W;
    }
    function n(W, k) {
      return W < k ? k : W;
    }
    function G(W, k, T, b, c) {
      var a = c[0];
      if (a == 0) j(W, k, T, b, q);
      else if (a == 1) j(W, k, T, b, m);
      else if (a == 2) j(W, k, T, b, n);
      else if (a == 3) {
        console.error("Not implemented");
      } else console.error("Mew mew");
    }
    return G;
  })();
  B.O.abg = (function () {
    function j(q, m, n, G, W) {
      var k = W && W[0] ? W[0] : 4,
        T,
        b,
        c,
        a,
        f,
        U,
        Z;
      for (var y = 0; y < n; y++) {
        var h = Math.max(y - k, 0),
          u = Math.min(y + k, n - 1);
        for (var i = 0; i < m; i++) {
          var x = Math.max(i - k, 0),
            X = Math.min(i + k, m - 1);
          T = (h * m + x) << 2;
          a = q[T];
          f = q[T + 1];
          U = q[T + 2];
          Z = q[T + 3];
          T = (h * m + X) << 2;
          a += q[T];
          f += q[T + 1];
          U += q[T + 2];
          Z += q[T + 3];
          T = (u * m + x) << 2;
          a += q[T];
          f += q[T + 1];
          U += q[T + 2];
          Z += q[T + 3];
          T = (u * m + X) << 2;
          a += q[T];
          f += q[T + 1];
          U += q[T + 2];
          Z += q[T + 3];
          T = (y * m + i) << 2;
          G[T] = (a + 2) >>> 2;
          G[T + 1] = (f + 2) >>> 2;
          G[T + 2] = (U + 2) >>> 2;
          G[T + 3] = (Z + 2) >>> 2;
        }
      }
    }
    return j;
  })();
  B.O.aLE = (function () {
    function j(q, m, n, G) {
      var W = new Uint8Array(q.length),
        k = new Uint8Array(q.length >>> 2),
        T = new Uint8Array(q.length >>> 2);
      B.Vl.kT(q, W, m, n, B.Vl.B1[2], !1, !0);
      for (var y = 0; y < q.length; y += 4) {
        var b = W[y + 0] * 0.3 + W[y + 1] * 0.59 + W[y + 2] * 0.11;
        k[y >>> 2] = b;
        G[y + 0] = q[y + 0];
        G[y + 1] = q[y + 1];
        G[y + 2] = q[y + 2];
        G[y + 3] = q[y + 3];
      }
      B.Vl.abx(k, T, m, n);
      for (var y = 0; y < q.length; y += 4) {
        W[y + 3] = ~~(Math.max(0, 255 - T[y >>> 2] - 50) * (255 / 205));
      }
      for (var y = 0, c = q.length; y < c; y += 4) {
        var a = W[y + 3] / 255;
        G[y] = W[y] * a + G[y] * (1 - a);
        G[y + 1] = W[y + 1] * a + G[y + 1] * (1 - a);
        G[y + 2] = W[y + 2] * a + G[y + 2] * (1 - a);
      }
    }
    return j;
  })();
  B.O.kO = (function () {
    function j(X, $) {
      return X[$] + X[$ + 1] + X[$ + 2] + X[$ + 3];
    }
    function q(X, $) {
      return X[$] + X[$ + 1] + X[$ + 2] + 2 * X[$ + 3];
    }
    function m(X, $, H, C) {
      X[$] = H[C];
      X[$ + 1] = H[C + 1];
      X[$ + 2] = H[C + 2];
      X[$ + 3] = H[C + 3];
    }
    function n(X, $, H) {
      X[$] = X[H];
      X[$ + 1] = X[H + 1];
      X[$ + 2] = X[H + 2];
      X[$ + 3] = X[H + 3];
    }
    function G(X, $, H) {
      X[H] = $[H];
      X[H + 1] = $[H + 1];
      X[H + 2] = $[H + 2];
      X[H + 3] = 255 - $[H + 3];
    }
    function W(X) {
      for (var y = 0, $ = X.length; y < $; y += 4) {
        X[y + 3] = 255 - X[y + 3];
      }
    }
    function k() {
      var X = Math.random();
      if (X > 0.5) return 0;
      if (X > 0.25) return 1;
      if (X > 0.1) return 2;
      if (X > 0.02143) return 3;
      if (X > 0.00445) return 4;
      if (X > 65e-5) return 5;
      if (X > 415e-6) return 6;
      if (X > 55e-6) return 7;
      return 8;
    }
    function T(X, $, H, C, l, v) {
      X[$] = H[C] + ((l[v] - H[C]) >> 1);
      X[$ + 1] = H[C + 1] + ((l[v + 1] - H[C + 1]) >> 1);
      X[$ + 2] = H[C + 2] + ((l[v + 2] - H[C + 2]) >> 1);
      X[$ + 3] = H[C + 3] + ((l[v + 3] - H[C + 3]) >> 1);
    }
    function b(X, $, H, C, l, v) {
      X[$] = (l[v] + H[C]) >> 1;
      X[$ + 1] = (l[v + 1] + H[C + 1]) >> 1;
      X[$ + 2] = (l[v + 2] + H[C + 2]) >> 1;
      X[$ + 3] = (l[v + 3] + H[C + 3]) >> 1;
    }
    function c(X, $, H, C, l, v, K, S, o) {
      var V = 0,
        P = 0,
        z = 0,
        y,
        E = l[v],
        A;
      T(S, 0, X, $, X, H);
      for (y = 0; y < E; y++) {
        T(S, (y + 1) * 4, S, y * 4, X, H);
      }
      P = (E + 1) * 4;
      z += E;
      v--;
      m(X, $, S, P - 4);
      C[v] = j(X, $);
      $ -= o;
      while (v > 0 && C[v - 1] < C[v]) {
        A = S;
        S = K;
        K = A;
        V = P;
        b(S, 0, X, $ - o, K, 0);
        for (y = 4; y < V; y += 4) {
          b(S, y, S, y - 4, K, y);
        }
        E = l[v];
        for (y = z; y < E; y++) {
          T(S, P, S, P - 4, K, V - 4);
          P += 4;
          z++;
        }
        v--;
        m(X, $, S, P - 4);
        C[v] = j(X, $);
        $ -= o;
      }
    }
    function a(X, $, H, C, l) {
      var v = $ * 4,
        K = 0,
        S,
        o,
        V = new Uint8Array($ + 1),
        P = new Uint8Array(10 * 4),
        z = new Uint8Array(10 * 4);
      for (var y = 0; y < H; y++) {
        G(C, X, K);
        l[0] = j(C, K);
        V[0] = k();
        S = K;
        K += 4;
        for (var E = 1; E < $; E++) {
          G(C, X, K);
          l[E] = j(C, K);
          o = k();
          V[E] = o;
          if (l[E - 1] < l[E] && o > 0) {
            c(C, K - 4, K, l, V, E, P, z, 4);
          }
          K += 4;
        }
        l[$] = l[0];
        V[$] = V[0];
        if (l[$ - 1] < l[$] && o > 0) {
          c(C, K, S, l, V, $, P, z, 4);
        }
      }
      W(C);
    }
    function f() {
      var X = Math.random();
      if (X > 0.659755) return 0;
      if (X > 0.1625) return 10;
      if (X > 0.06) return 20;
      if (X > 0.01) return 30;
      if (X > 0.0035) return 40;
      if (X > 65e-5) return 50;
      if (X > 415e-6) return 60;
      if (X > 55e-6) return 70;
      return 80;
    }
    function U(X, $, H, C, l, v) {
      var K = f() + 1,
        S = C[l];
      for (var y = 1; y < K; y++) {
        if (0 > l) break;
        if (C[l - y] < S) {
          n(X, $, H);
        } else {
          break;
        }
        $ += v;
      }
    }
    function Z(X, $, H, C, l) {
      var v = $ * 4,
        K = 0;
      for (var y = 0; y < H; y++) {
        G(C, X, K);
        l[0] = j(C, K);
        K += 4;
        for (var S = 1; S < $; S++) {
          G(C, X, K);
          l[S] = j(X, K);
          if (l[S - 1] < l[S]) {
            U(C, K - 4, K, l, S, -4);
          }
          K += 4;
        }
        l[$] = l[0];
        if (l[S - 1] < l[S]) {
          U(C, K - 4, K - v, l, S, -4);
        }
      }
      W(C);
    }
    function h(X, $, H, C, l, v) {
      var K = 1,
        S,
        o,
        V = new Uint8Array(4),
        P,
        z = $;
      while (Math.random() < 1 / K) {
        z = $;
        if (C <= 1) break;
        S = H[C];
        o = H[C - 1];
        if (S <= o) break;
        m(V, 0, X, z - v);
        P = !0;
        for (var y = C; y < l; y++) {
          if (o > H[y]) {
            m(X, z - v, V, 0);
            H[y - 1] = o;
            P = !1;
            break;
          }
          m(X, z - v, X, z);
          H[y - 1] = H[y];
          z += v;
        }
        if (P) {
          m(X, z - v, V, 0);
          H[l - 1] = o;
        }
        K++;
        C--;
        $ -= v;
      }
    }
    function u(X, $, H, C, l) {
      var v = 0,
        K = 0,
        S = $ * 4;
      for (var y = 0; y < H; y++) {
        K = v;
        for (var o = 0; o < $; o++) {
          G(C, X, v);
          l[o] = q(C, v);
          v += 4;
        }
        v = K;
        for (var o = 1; o < $; o++) {
          if (l[o - 1] < l[o] && Math.random() < 0.66) {
            h(C, v + 4, l, o, $, 4);
          }
          v += 4;
        }
        v += 4;
      }
      W(C);
    }
    function i(X, $, H, C, l) {
      var v = l[0],
        K = l[1],
        S = new Uint16Array($ + 1),
        o = X,
        V = C,
        P;
      if (K) {
        P = C.slice(0);
        x(X, C, $, H);
        o = C;
        V = P;
      }
      if (v == 0) a(o, $, H, V, S);
      else if (v == 1) Z(o, $, H, V, S);
      else if (v == 2) u(o, $, H, V, S);
      if (K) {
        x(P, C, $, H);
      }
    }
    function x(X, $, H, C) {
      for (var l = 0; l < C; l++)
        for (var v = 0; v < H; v++) {
          var K = (l * H + v) << 2,
            S = (l * H + (H - 1 - v)) << 2;
          $[S] = X[K];
          $[S + 1] = X[K + 1];
          $[S + 2] = X[K + 2];
          $[S + 3] = X[K + 3];
        }
    }
    return i;
  })();
  B.O.aux = function (j, q, m, n, G) {
    var W = B.O.Z,
      k = 1,
      i = 0,
      $ = 0;
    W.zw(q, m);
    W.ZW(G[2]);
    var T = 3 << 13,
      b = Math.PI / 2.43,
      c = b / 256,
      a = (Math.PI * 2) / 256;
    function f() {
      var v = W.random() * 256,
        K = W.random() * 256;
      return (
        (k * ~~(Math.tan(b - v * c) * 325 * Math.cos(K * a) * 256) + T) >> 16
      );
    }
    k = G[0];
    var U = G[1],
      Z = (U + 2) / 2,
      h = W.random() * 255,
      u = W.r6(1);
    for (var y = 0; y < m; y++) {
      var x = W.vm(f() + h);
      for (var X = 0; X < q; X++) {
        x = W.vm(f() + x);
        u[i++] = x;
      }
    }
    i = q;
    for (var y = 1; y < m; y++) {
      var H = W.vm(f() + u[$++]);
      u[i++] = H;
      for (var X = 1; X < q; X++) {
        var C = $ + 1;
        if (X + 1 == q) {
          C--;
        }
        var l = (Z + H + u[C] + u[$] * U) / (U + 2);
        H = W.vm(f() + l);
        u[i++] = H;
        $++;
      }
    }
    W.hN(u, n);
  };
  var bx = (function () {
      function j(p) {
        p = p ^ 61 ^ (p >>> 16);
        p = p + (p << 3);
        p = p ^ (p >>> 4);
        p = p * 668265261;
        p = p ^ (p >>> 15);
        return p;
      }
      var q = function () {
        var q = function (p) {
          if (p) {
            this.Sd = p;
          }
          this.Sd = j(this.Sd);
          return (this.Sd & 16777215) * (1 / 16777215);
        };
        return q;
      };
      function m(p, F) {
        if (F == null) {
          F = [0, 0];
        }
        return Math.sqrt(
          (F[0] - p[0]) * (F[0] - p[0]) + (F[1] - p[1]) * (F[1] - p[1])
        );
      }
      function n(p, F) {
        if (F == null) {
          F = [0, 0];
        }
        return [-(F[1] - p[1]) / m(p, F), (F[0] - p[0]) / m(p, F)];
      }
      function G(p) {
        return [Math.cos(p), Math.sin(p)];
      }
      function W(p) {
        var F = m(p, [0, 0]),
          g = [p[0] / F, p[1] / F],
          w = Math.atan(g[1] / g[0]);
        if (g[0] > 0 && g[1] < 0) {
          w += 2 * Math.PI;
        } else if (g[0] < 0 && g[1] < 0) {
          w += Math.PI;
        } else if (g[0] < 0 && g[1] > 0) {
          w += Math.PI;
        }
        return w;
      }
      function k(p) {
        var k = 0;
        for (var y = 1; y < p.length / 2; ++y) {
          k += m(
            [p[2 * y], p[2 * y + 1]],
            [p[2 * (y - 1)], p[2 * (y - 1) + 1]]
          );
        }
        return k;
      }
      function T(p, F, g) {
        var w = new Float32Array(p.length),
          r = 1 / (p.length / 2),
          eQ = C(g);
        for (var y = 0; y < p.length / 2; ++y) {
          var t = y * r,
            dq = t / 2 + 0.5,
            D = 1,
            ha = 0;
          if (g.shape == 2) {
            D = 1 / (2 * dq);
          }
          if (g.shape == 3) {
            dq = (1 - t) / 2 + 0.5;
            D = 1 / (2 * dq) + 0.5;
          }
          if (g.shape == 4) {
            dq = t;
            D = Math.sin((3 / 2) * Math.PI * dq) / 4 + 1;
          }
          if (g.shape == 5) {
            dq = (t - 0.5) * 6;
            D = (-Math.atan(dq) / 1.25 + 1) / 5 + 0.6 - 0.2 * t;
          }
          var am = [null, null];
          if (y == 0) {
            am = n(
              [p[2 * y], p[2 * y + 1]],
              [p[2 * (y + 1)], p[2 * (y + 1) + 1]]
            );
          } else if (y == p.length / 2 - 1) {
            am = n(
              [p[2 * (y - 1)], p[2 * (y - 1) + 1]],
              [p[2 * y], p[2 * y + 1]]
            );
          } else {
            am = n(
              [p[2 * (y - 1)], p[2 * (y - 1) + 1]],
              [p[2 * (y + 1)], p[2 * (y + 1) + 1]]
            );
          }
          w[2 * y] = p[2 * y] + (D * F + ha) * am[0];
          w[2 * y + 1] = p[2 * y + 1] + (D * F + ha) * am[1];
          if (g.style == 2) {
            w[2 * y] += l((2 * y) / w.length, eQ, g);
          }
        }
        return w;
      }
      function b(p, F, g) {
        var w = new Float32Array(p.length),
          r = 1 / (p.length / 2);
        for (var y = 0; y < p.length / 2; ++y) {
          var eQ = y * r,
            t = [null, null],
            dq = (0.6 * g.Fl * S(eQ, F.aDB) * g.aL) / 100,
            D = (0.6 * g.Fl * S(eQ, F.ajF) * g.aL) / 100,
            ha = F.aK_ * dq + (1 - F.aK_) * D;
          if (y == 0) {
            t = n(
              [p[2 * y], p[2 * y + 1]],
              [p[2 * (y + 1)], p[2 * (y + 1) + 1]]
            );
          } else if (y == p.length / 2 - 1) {
            t = n(
              [p[2 * (y - 1)], p[2 * (y - 1) + 1]],
              [p[2 * y], p[2 * y + 1]]
            );
          } else {
            t = n(
              [p[2 * (y - 1)], p[2 * (y - 1) + 1]],
              [p[2 * (y + 1)], p[2 * (y + 1) + 1]]
            );
          }
          w[2 * y] = p[2 * y] + ha * t[0];
          w[2 * y + 1] = p[2 * y + 1] + ha * t[1];
        }
        return w;
      }
      function c(p) {
        if (p.S1 == 1) {
          return [0.150684932, 0.205479452, 0.465753425, 0.178082192];
        } else if (p.S1 == 2) {
          return [
            0.126829268, 0.131707317, 0.156097561, 0.317073171, 0.141463415,
            0.126829268,
          ];
        } else {
          var F = [],
            g = 1 / (z(p) - 1);
          for (var y = 0; y < z(p) - 1; ++y) {
            F.push(g);
          }
          return F;
        }
      }
      function a(p, F, g) {
        var w = [],
          r = F - p,
          eQ = p;
        for (var y = 0; y < g.length - 1; ++y) {
          w.push(eQ + g[y] * r);
          eQ = w[y];
        }
        return w;
      }
      function f(p, F, g, w) {
        var r = new Float32Array(g.length),
          eQ = 0,
          t = {
            shape: Math.floor(w.random() * 2.99),
            axd: w.random() * 0.1 + 0.15,
          };
        for (var y = 0; y < g.length - 1; ++y) {
          var dq = eQ + g[y];
          r[y] = ((1 - dq) * p + dq * F) * x(w, dq, t);
          eQ = dq;
        }
        return r;
      }
      function U(p, F, g, w) {
        var r = V(w),
          eQ = w.random(),
          t = eQ * 20 + (1 - eQ) * 26,
          dq = new Float32Array(g.length),
          D = 0;
        for (var y = 0; y < g.length - 1; ++y) {
          var ha = D + g[y];
          dq[y] =
            (1 - ha) * p +
            ha * F +
            (r / t) *
              ((2 / 3) * Math.sin(Math.PI * ha) +
                (1 / 3) * Math.sqrt(Math.sin(Math.PI * ha)));
          D = ha;
        }
        return dq;
      }
      function Z(p, F, g) {
        var w = [];
        for (var y = 0; y < F.length - 1; ++y) {
          w.push(F[y].slice());
          var r = y * (z(g) - 1),
            eQ = (y + 1) * (z(g) - 1),
            t = p[eQ] - p[r];
          for (var dq = r + 1; dq < eQ; ++dq) {
            var D = C(g),
              ha = new Float32Array(F[0].length),
              am = (p[dq] - p[r]) / t;
            for (var k4 = 0; k4 < F[0].length / 2; ++k4) {
              ha[2 * k4] = (1 - am) * F[y][2 * k4] + am * F[y + 1][2 * k4];
              ha[2 * k4 + 1] =
                (1 - am) * F[y][2 * k4 + 1] + am * F[y + 1][2 * k4 + 1];
              if (g.style == 2) {
                ha[2 * k4] += l((2 * k4) / F[0].length, D, g);
              }
            }
            w.push(ha);
          }
        }
        w.push(F[F.length - 1]);
        return w;
      }
      function h(p, F, g) {
        var w = new Array(F.length),
          r = d(p),
          t = null;
        for (var y = 0; y < F.length; ++y) {
          w[y] = T(r, (F[y] - 0.5) * g.aL, g);
        }
        var eQ = 1 + (0.05 * g.ags * V(g)) / V({ S1: 1 });
        for (var y = 0; y < F.length; ++y) {
          if (F[y] == 0) {
            t = y;
          }
        }
        for (var y = 0; y < F.length; ++y) {
          var dq = (g.random() - 0.5) * 2,
            D = Math.round(g.random() * 9 + 1),
            ha = new Float32Array(D * 2 + 2);
          for (var am = 0; am <= D; ++am) {
            ha[2 * am] = w[y][0] - (w[y][2 * am] - w[y][0]);
            ha[2 * am + 1] = w[y][1] - (w[y][2 * am + 1] - w[y][1]);
          }
          if (y == t) {
            dq *= 0.1;
          }
          for (var am = (w[y].length - 1) / 2; am > D; --am) {
            w[y][2 * am] =
              (1 - dq) * w[y][2 * am] +
              dq *
                (w[y][2 * (am - D)] + eQ * (w[y][2 * am] - w[y][2 * (am - D)]));
            w[y][2 * am + 1] =
              (1 - dq) * w[y][2 * am + 1] +
              dq *
                (w[y][2 * (am - D) + 1] +
                  eQ * (w[y][2 * am + 1] - w[y][2 * (am - D) + 1]));
          }
          for (var am = D - 1; am >= 0; --am) {
            w[y][2 * am] =
              (1 - dq) * w[y][2 * am] +
              dq * (ha[2 * (D - am)] + eQ * (w[y][2 * am] - ha[2 * (D - am)]));
            w[y][2 * am + 1] =
              (1 - dq) * w[y][2 * am + 1] +
              dq *
                (ha[2 * (D - am) + 1] +
                  eQ * (w[y][2 * am + 1] - ha[2 * (D - am) + 1]));
          }
        }
        var k4 = K(F, g);
        if (g.Fl > 0) {
          var aA = 0;
          for (var y = 0; y < F.length; ++y) {
            if (y == 0) {
              aA += F[y];
            } else {
              aA += Math.abs(F[y] - F[y - 1]);
            }
            var ex = aA - Math.floor(aA),
              ac = 1;
            if (ex == 0) {
              ac = 0;
            }
            w[y] = b(
              w[y],
              {
                aDB: k4[Math.floor(aA)],
                ajF: k4[Math.floor(aA) + ac],
                aK_: ex,
              },
              g
            );
          }
        }
        return w;
      }
      function u(p, F) {
        var g = N(F, p),
          w = Q(F, p),
          r = [],
          eQ = [],
          t = [],
          dq = c(p);
        for (var y = 0; y < F.length - 1; ++y) {
          r.push(F[y]);
          eQ.push(g[y]);
          t.push(w[y]);
          var D = a(F[y], F[y + 1], dq),
            ha = f(g[y], g[y + 1], dq, p),
            am = U(w[y], w[y + 1], dq, p);
          for (var k4 = 0; k4 < D.length; ++k4) {
            r.push(D[k4]);
            eQ.push(ha[k4]);
            t.push(am[k4]);
          }
        }
        r.push(F[F.length - 1]);
        eQ.push(g[g.length - 1]);
        t.push(w[w.length - 1]);
        return { a5e: r, abd: eQ, tq: t };
      }
      function i(p, F, g, w) {
        var r = new Float32Array(2 * w),
          eQ = p.length / 2,
          t = eQ - F,
          dq = g * t,
          D = dq / w;
        for (var y = 0; y < w; ++y) {
          var ha = Math.floor(F + y * D),
            am = Math.ceil(F + y * D),
            g = F + y * D,
            k4 = am - ha,
            aA = 1,
            ex = 0;
          if (k4 != 0) {
            aA = (am - g) / k4;
            ex = (g - ha) / k4;
          }
          r[2 * y] = aA * p[2 * ha] + ex * p[2 * am];
          r[2 * y + 1] = aA * p[2 * ha + 1] + ex * p[2 * am + 1];
        }
        return r;
      }
      function x(p, F, g) {
        var w = g.axd,
          r = F * 2 * Math.PI,
          eQ = r,
          t = 0;
        if (g.shape == 0) {
          t = (Math.sin(2 * eQ + Math.PI / 2) + 1) / 2;
        } else if (g.shape == 1) {
          t = (Math.sin(eQ + Math.PI / 2) + 1) / 2;
        } else {
          t =
            (4 * Math.sin((3 / 4) * eQ + Math.PI) +
              Math.sin(Math.PI / 2 + 2 * eQ) -
              (2 * eQ) / Math.PI +
              6) /
            7;
        }
        return Math.min(1, 1 - w + w * t);
      }
      function X(p, F, g, w) {
        var r = [];
        for (var y = 0; y < p.length; ++y) {
          r.push(i(p[y], F[y], g[y], w));
        }
        return r;
      }
      function $(p, F, g) {
        var w = [];
        for (var y = 0; y < p.length; ++y) {
          var r = G(2 * Math.PI * g.random()),
            eQ = G(2 * Math.PI * g.random()),
            t = (g.Qe * 0.5 * E({ S1: 1 })) / E(g),
            dq = (t * g.aL) / 200,
            D = (t * F) / 500,
            ha = new Float32Array(p[0].length);
          for (var am = 0; am < p[0].length / 2; ++am) {
            var k4 = G(2 * Math.PI * g.random()),
              aA = (2 * am) / p[0].length;
            ha[2 * am] =
              p[y][2 * am] + dq * (k4[0] + ((1 - aA) * r[0] + aA * eQ[0]));
            ha[2 * am + 1] =
              p[y][2 * am + 1] + D * (k4[1] + ((1 - aA) * r[1] + aA * eQ[1]));
          }
          w.push(ha);
        }
        return w;
      }
      function H(p, F, g) {
        var w = g.Mm,
          r = 2 / w,
          eQ = [1 / 10, 1 / 30, 1 / 40, 1 / 45, 1 / 100],
          t = eQ[g.S1 - 1],
          dq = 4 * ((g.yA / 25) * r * t) * (1 - g.Qe / 150),
          k4 = 0,
          ex = 0;
        if (g.style == 3) {
          return dq * 0.09;
        }
        var D = 2.2 * (p - 0.5),
          ha = D * D * D * D + 0.27 + Math.max(0, (g.yA - 50) / 15),
          am =
            2 * (Math.sin(3 * Math.PI * F) / (Math.PI * F + 2) + 1.1) - F / 2;
        F = 2 * F;
        if (F < 0.41) {
          var aA = (2 * Math.PI * F) / 0.41;
          k4 = (Math.sin(aA - Math.PI / 2) + 1) / 4 + 0.5;
        } else if (F < 0.77) {
          var aA = (2 * Math.PI * (F - 0.41)) / 0.36;
          k4 =
            (Math.sin(aA - Math.PI / 2) + 1) / 4 +
            0.5 -
            (aA / 2 / Math.PI) * 0.5;
        } else {
          var aA = (2 * Math.PI * (F - 0.77)) / 0.23;
          k4 = ((Math.sin(aA - Math.PI / 2) + 1) / 2) * 0.12;
        }
        k4 *= 3;
        k4 += Math.max(0, (g.yA - 50) / 15);
        if (g.e == 6) {
          ex = am;
        } else {
          ex = k4;
        }
        return dq * ha * ex;
      }
      function C(p) {
        return { Y: (p.random() * 7) / 2 + 0.5, xa: p.random() * 2 * Math.PI };
      }
      function l(p, F, g) {
        return (
          (((g.aL / 300) * z({ S1: 1 })) / z(g)) *
          10 *
          (Math.sin(F.Y * 2 * Math.PI * p + F.xa) + 10 * (g.random() - 0.5))
        );
      }
      function v(p) {
        var F = Math.exp(-p.Fl / 25);
        return {
          Y: (p.random() * 3) / 2 + 0.5,
          xa: p.random() * 2 * Math.PI,
          dV: (p.random() - 0.5) * 10 * F,
        };
      }
      function K(p, F) {
        var g = Math.ceil(e(p)),
          w = [];
        for (var y = 0; y <= g; ++y) {
          w.push(v(F));
        }
        return w;
      }
      function S(p, F) {
        var g = F.Y * 4 * Math.PI * p + F.xa;
        return (
          Math.exp((-1 / 2) * Math.PI * p) *
            Math.cos(g) *
            Math.cos(g) *
            Math.cos(g) *
            Math.cos(g) *
            Math.cos(g) +
          p * F.dV -
          F.dV / 4
        );
      }
      function o(p, F, g, w, r) {
        var eQ = 0,
          t = E(F) - 1;
        for (var y = 0; y < t; ++y) {
          for (var dq = 0; dq < p.length - 1; dq += z(F) - 1) {
            for (var D = y; D < p[0].length / 2 - t; D += t) {
              for (var ha = dq; ha < dq + (z(F) - 1); ++ha) {
                g[r + eQ] = H(
                  ((ha * (F.Mm - 1)) / (p.length - 1)) % 1,
                  D / p[0].length,
                  F
                );
                var am = 0,
                  k4 = 0;
                if (F.e == 6 && ha != 0 && ha != p.length - 1) {
                  k4 = (p[ha][2 * (D + 1) + 1] - p[ha][2 * D + 1]) / 2;
                  am = (p[ha][2 * (D + 1)] - p[ha][2 * D]) / 2;
                }
                w[8 * r + 8 * eQ] = p[ha][2 * D] + am;
                w[8 * r + 8 * eQ + 1] = p[ha][2 * D + 1] + k4;
                w[8 * r + 8 * eQ + 2] = p[ha][2 * (D + t)] + am;
                w[8 * r + 8 * eQ + 3] = p[ha][2 * (D + t) + 1] + k4;
                w[8 * r + 8 * eQ + 4] = p[ha + 1][2 * (D + t)];
                w[8 * r + 8 * eQ + 5] = p[ha + 1][2 * (D + t) + 1];
                w[8 * r + 8 * eQ + 6] = p[ha + 1][2 * D];
                w[8 * r + 8 * eQ + 7] = p[ha + 1][2 * D + 1];
                ++eQ;
              }
            }
          }
        }
      }
      function V(p) {
        var F = [100, 300, 500, 700, 1e3];
        return F[p.S1 - 1];
      }
      function P(p) {
        var F = [30, 70, 100, 140, 300];
        return F[p.S1 - 1];
      }
      function z(p) {
        var F = [5, 7, 26, 40, 100];
        return F[p.S1 - 1];
      }
      function E(p) {
        if (p.S1 == 1) {
          return 4;
        } else if (p.S1 == 2) {
          return 8;
        } else {
          return Math.floor(P(p) / 9);
        }
      }
      function A(p) {
        var F = p.Mm,
          g = new Float32Array(F),
          w = null;
        for (var y = 0; y < F; ++y) {
          g[y] = p.random();
        }
        if (p.Mm <= 3) {
          g[0] = 0;
          g[p.Mm - 1] = 1;
        } else {
          for (var y = 0; y < 2; ++y) {
            var r = Math.floor(p.random() * F);
            if (w == null || w != r) {
              g[r] = y;
              w = r;
            } else {
              g[r + 1] = y;
            }
          }
        }
        return g;
      }
      function N(p, F) {
        var g = [],
          w = 0.2,
          eQ = 0;
        for (var y = 0; y < p.length; ++y) {
          var r = F.random() * (1 - w) + w;
          g.push(r);
        }
        var t = Math.min(3, F.Mm);
        for (var y = 0; y < p.length; ++y) {
          if (g[y] > 0.9) {
            ++eQ;
          }
        }
        while (eQ < t) {
          var dq = Math.floor(F.random() * p.length);
          if (g[dq] <= 0.9) {
            g[dq] = 0.9 + 0.1 * F.random();
            ++eQ;
          }
        }
        return g;
      }
      function Q(p, F) {
        var g = V(F),
          w = V({ S1: 1 }),
          r = [];
        for (var y = 0; y < p.length; ++y) {
          r.push(Math.max(1, ((F.random() * 10 + 2) * g) / w));
        }
        return r;
      }
      function e(p) {
        var F = 0;
        for (var y = 0; y < p.length; ++y) {
          if (y == 0) {
            F += p[y];
          } else {
            F += Math.abs(p[y] - p[y - 1]);
          }
        }
        return F;
      }
      function Y(p, F) {
        if (p.length / 2 - 1 == V(F)) {
          return p;
        }
        var g = new Float32Array(2 * (V(F) + 1)),
          w = (p.length - 2) / (g.length - 2);
        for (var y = 0; y < g.length / 2; ++y) {
          var r = y * w,
            eQ = Math.floor(r),
            t = Math.ceil(r),
            dq = t - eQ,
            D = 1,
            ha = 0;
          if (dq != 0) {
            D = (t - r) / dq;
            ha = (r - eQ) / dq;
          }
          g[2 * y] = D * p[2 * eQ] + ha * p[2 * t];
          g[2 * y + 1] = D * p[2 * eQ + 1] + ha * p[2 * t + 1];
        }
        return g;
      }
      function d(p, F) {
        var g = p.length / 2,
          w = k(p),
          r = w / g,
          eQ = !1,
          D = 0,
          ha = 0,
          am = 1;
        if (F) {
          var t = Math.floor(w / F.ayR),
            dq = F.ayR;
          if (F.acQ && p[0] == p[p.length - 2] && p[1] == p[p.length - 1]) {
            eQ = !0;
            dq = w / (t + 1);
          }
          if (F.e == 2 && !eQ && dq * t + F.length > w) {
            g = t + 1;
          } else {
            g = t + 2;
          }
          r = dq;
        }
        var k4 = new Float32Array(g * 2);
        k4[0] = p[0];
        k4[1] = p[1];
        for (var y = 1; y < g; ++y) {
          while (D <= y * r) {
            ha = D;
            D += m(
              [p[2 * am], p[2 * am + 1]],
              [p[2 * (am - 1)], p[2 * (am - 1) + 1]]
            );
            ++am;
          }
          var aA = 1 - (y * r - ha) / (D - ha);
          k4[2 * y] = (1 - aA) * p[2 * am] + aA * p[2 * (am - 1)];
          k4[2 * y + 1] = (1 - aA) * p[2 * am + 1] + aA * p[2 * (am - 1) + 1];
        }
        k4[k4.length - 2] = p[p.length - 2];
        k4[k4.length - 1] = p[p.length - 1];
        return k4;
      }
      function I(p, F) {
        var g = d(p, F),
          w = [];
        for (var y = 0; y < (g.length - 2) / 2; ++y) {
          var r = [];
          r.push(g[2 * y]);
          r.push(g[2 * y + 1]);
          var eQ = m(
              [g[2 * (y + 1)], g[2 * (y + 1) + 1]],
              [g[2 * y], g[2 * y + 1]]
            ),
            t = [
              (g[2 * (y + 1)] - g[2 * y]) / eQ,
              (g[2 * (y + 1) + 1] - g[2 * y + 1]) / eQ,
            ],
            dq = G(((F.app - 90) / 360) * 2 * Math.PI),
            D = t;
          if (F.e == 3) {
            D = dq;
          } else if (F.e == 4) {
            D = G(W(t) + W(dq));
          } else if (F.e == 5) {
            D = G((((F.random() - 0.5) * F.app - 90) / 360) * 2 * Math.PI);
          }
          var ha = F.length;
          if (F.azZ) {
            ha = 2 * F.random() * F.length;
          }
          r.push(g[2 * y] + D[0] * ha);
          r.push(g[2 * y + 1] + D[1] * ha);
          w.push(r);
        }
        return w;
      }
      function O(p) {
        if (p.a5j) {
          p.bV = 100 * Math.random();
        } else {
          p.bV = p.a5$;
        }
        p.random = new q();
        p.random(p.bV);
        if (p.e == 6) {
          p.Mm = 2;
          p.shape = 5;
          p.ags = 0;
        }
      }
      function s(p, F) {
        p = Y(p, F);
        var g = [p],
          ha = 0;
        if (F.e >= 2 && F.e < 6) {
          g = I(p, F);
        }
        var w = E(F) - 1,
          r = P(F) - w,
          eQ = (F.Mm - 1) * (z(F) - 1),
          t = g.length * r * eQ,
          dq = new Float32Array(t),
          D = new Float32Array(8 * t);
        for (var y = 0; y < g.length; ++y) {
          for (var am = 0; am < 1e4; ++am) {
            F.bV = j(F.bV);
          }
          F.random(F.bV);
          var p = Y(g[y], F),
            k4 = A(F),
            aA = e(k4),
            ex = h(p, k4, F),
            ac = u(F, k4),
            eJ = Z(ac.a5e, ex, F);
          eJ = X(eJ, ac.tq, ac.abd, P(F));
          if (F.Qe > 0) {
            eJ = $(eJ, k(g[y]), F);
          }
          o(eJ, F, dq, D, ha);
          ha += r * eQ;
        }
        return [dq, D];
      }
      var bx = function (p) {
        var F = performance.now(),
          g = p[0],
          w = p[1];
        O(w);
        var r = [new Float32Array(0), new Float32Array(0)];
        for (var y = 0; y < g.length; ++y) {
          w.bV = j(w.bV);
          var eQ = s(g[y], w),
            t = new Float32Array(r[0].length + eQ[0].length),
            dq = new Float32Array(r[1].length + eQ[1].length);
          t.set(r[0]);
          t.set(eQ[0], r[0].length);
          r[0] = t;
          dq.set(r[1]);
          dq.set(eQ[1], r[1].length);
          r[1] = dq;
        }
        var D = performance.now();
        if (w.aE9) {
          console.k6("Geometry: " + String(D - F) + "ms");
        }
        return r;
      };
      return bx;
    })(),
    hg = (function () {
      function j(G, W) {
        var k = [],
          T = 0,
          b = W.length,
          c = 0,
          a = 0,
          f = new hk(),
          U = 0,
          Z = 1e9;
        for (a = 0; a < b; a++) {
          var h = a * 8,
            u = W[a];
          if (u < Z) Z = u;
          var i = G[h + 0],
            x = G[h + 1],
            X = G[h + 2],
            $ = G[h + 3],
            H = G[h + 4],
            C = G[h + 5],
            l = G[h + 6],
            v = G[h + 7],
            K = Math.min(i, X, H, l),
            S = Math.max(i, X, H, l),
            o = Math.min(x, $, C, v),
            V = Math.max(x, $, C, v),
            P = new hk(K, o, S - K, V - o),
            z = P.vd(f),
            E = U + u;
          if (a - c < 10 && (a == c || z.C() * 0.8 < P.C() + f.C())) {
            f = z;
            U = E;
          } else {
            k.push(a - c);
            c = a;
            f = P;
            U = u;
            Z = u;
          }
        }
        if (a != c) k.push(a - c);
        return k;
      }
      function q(G, W, k, T, b, c) {
        var a = document.createElement("canvas"),
          x = 0,
          t = 0.8;
        a.width = W;
        a.height = k;
        var f = a.getContext("2d"),
          U = b[0],
          Z = b[1],
          h = new Float64Array(W * k),
          u = Date.now(),
          i = j(Z, U);
        for (var X = 0; X < i.length; X++) {
          var $ = x,
            H = x + i[X],
            v = 1e9,
            S = 1e9,
            N = 0;
          x = H;
          var C = $ * 8,
            l = H * 8,
            K = -v,
            o = -S;
          for (var V = C; V < l; V += 2) {
            var P = Z[V],
              z = Z[V + 1];
            if (P < v) v = P;
            if (P > K) K = P;
            if (z < S) S = z;
            if (z > o) o = z;
          }
          v = Math.floor(v);
          K = Math.ceil(K);
          S = Math.floor(S);
          o = Math.ceil(o);
          var E = K - v,
            A = o - S;
          for (var Q = $; Q < H; Q++) N += U[Q];
          for (var V = C; V < l; V += 8) {
            var e = U[V >>> 3],
              Y = Z[V + 0],
              d = Z[V + 1],
              I = Z[V + 2],
              O = Z[V + 3],
              s = Z[V + 4],
              p = Z[V + 5],
              F = Z[V + 6],
              g = Z[V + 7];
            f.fillStyle = "rgba(0,0,0," + e / N + ")";
            f.beginPath();
            f.moveTo(Y, d);
            f.lineTo(I, O);
            f.lineTo(s, p);
            f.lineTo(F, g);
            f.closePath();
            f.fill();
          }
          var w = f.getImageData(v, S, E, A).data;
          for (var z = 0; z < A; z++)
            for (var P = 0; P < E; P++) {
              var y = z * E + P,
                r = w[y * 4 + 3],
                eQ = (S + z) * W + v + P;
              if (r != 0) h[eQ] += r * N;
            }
          f.clearRect(v, S, E, A);
        }
        var dq = c[1].color,
          D = Math.pow(dq.o / 255, t),
          ha = Math.pow(dq.i / 255, t),
          am = Math.pow(dq.X / 255, t),
          k4 = new hk(0, 0, W, k),
          aA = B.j(W * k * 4);
        for (var z = 0; z < k; z++)
          for (var P = 0; P < W; P++) {
            var y = z * W + P,
              Q = y * 4,
              U = h[y] * (1 / 255);
            aA[Q] = n(D, U);
            aA[Q + 1] = n(ha, U);
            aA[Q + 2] = n(am, U);
            aA[Q + 3] = Math.min(255, U * 255);
          }
        B.G.Jg("norm", aA, k4, T, k4, k4, 1);
      }
      var m = new Uint8Array(2e3);
      for (var y = 0; y < 2e3; y++)
        m[y] = 255 * Math.min(1, Math.log(y / 700 + 1));
      function n(G, W) {
        return m[Math.min(1500, ~~(G * W * 1e3))];
      }
      return q;
    })(),
    kq = (function () {
      var j = new Float32Array(3e3),
        q = new Float32Array(3e3),
        m = new Float32Array(256),
        n = new Float32Array(3e3);
      function G() {
        var Z = j.length;
        j[0] = Math.log10(157647e-9);
        for (var y = 1; y < Z; ++y) j[y] = Math.log10(y / Z);
      }
      function W() {
        var Z = q.length;
        for (var y = 0; y < Z; ++y) q[y] = Math.pow(10, (20 * (y - Z / 2)) / Z);
      }
      function k() {
        var Z = m.length;
        for (var y = 0; y < Z; ++y) m[y] = B.qd(y / 255);
      }
      function T() {
        var Z = n.length;
        for (var y = 0; y < Z; ++y) n[y] = 255 * B.SK(y / (Z - 1));
      }
      function b(Z, h) {
        var u = Z.length >>> 2;
        for (var y = 0; y < u; ++y) {
          var i = m[Z[4 * y]],
            x = m[Z[4 * y + 1]],
            X = m[Z[4 * y + 2]],
            $ = 0.3811 * i + 0.5783 * x + 0.0402 * X,
            H = 0.1967 * i + 0.7244 * x + 0.0782 * X,
            C = 0.0241 * i + 0.1288 * x + 0.8444 * X;
          $ = j[~~($ * j.length)];
          H = j[~~(H * j.length)];
          C = j[~~(C * j.length)];
          h[3 * y] = ($ + H + C) * 0.5773502692;
          h[3 * y + 1] = ($ + H - 2 * C) * 0.4082482905;
          h[3 * y + 2] = ($ - H) * 0.7071067812;
        }
      }
      function c(Z, h) {
        var u = h.length >>> 2,
          i = n.length - 1;
        for (var y = 0; y < u; ++y) {
          var x = 0.5773502692 * Z[3 * y],
            X = 0.4082482905 * Z[3 * y + 1],
            $ = 0.7071067812 * Z[3 * y + 2],
            H = q[~~((x + X + $ + 10) * (3e3 / 20))],
            C = q[~~((x + X - $ + 10) * (3e3 / 20))],
            l = q[~~((x - 2 * X + 10) * (3e3 / 20))],
            v = 4.4679 * H - 3.5873 * C + 0.1193 * l,
            K = -1.2186 * H + 2.3809 * C - 0.1624 * l,
            S = 0.0497 * H - 0.2439 * C + 1.2045 * l;
          h[4 * y] = n[~~(i * Math.max(0, Math.min(1, v)))];
          h[4 * y + 1] = n[~~(i * Math.max(0, Math.min(1, K)))];
          h[4 * y + 2] = n[~~(i * Math.max(0, Math.min(1, S)))];
        }
      }
      function a(Z) {
        var h = 0,
          u = 0,
          i = 0;
        for (var y = 0; y < Z.length; y += 3) {
          h += Z[y];
          u += Z[y + 1];
          i += Z[y + 2];
        }
        return [h / (Z.length / 3), u / (Z.length / 3), i / (Z.length / 3)];
      }
      function f(Z, a) {
        var h = 0,
          u = 0,
          i = 0;
        for (var y = 0; y < Z.length; y += 3) {
          var x = Z[y] - a[0],
            X = Z[y + 1] - a[1],
            $ = Z[y + 2] - a[2];
          h += x * x;
          u += X * X;
          i += $ * $;
        }
        return [
          Math.sqrt(h / (Z.length / 3)),
          Math.sqrt(u / (Z.length / 3)),
          Math.sqrt(i / (Z.length / 3)),
        ];
      }
      function U(Z, h, u, i) {
        G();
        W();
        k();
        T();
        var x = 0,
          Y,
          d;
        if (i[0] > 100) x = (-(i[0] - 100) / 100) * 0.13;
        else if (i[0] >= 75) x = ((100 - i[0]) / 25) * 0.04;
        else if (i[0] >= 50) x = 0.04 + ((75 - i[0]) / 25) * 0.04;
        else if (i[0] >= 25) x = 0.08 + ((50 - i[0]) / 25) * 0.08;
        else x = 0.16 + ((25 - i[0]) / 25) * 0.24;
        var X = (i[1] - 100 + 100) / 100,
          $ = i[2] / 100,
          H = i[3],
          C = new Float32Array((Z.length * 3) / 4),
          l = new Float32Array((h.length * 3) / 4),
          v = new Float32Array((u.length * 3) / 4),
          K = Date.now();
        b(Z, C);
        b(h, l);
        b(u, v);
        var S = Date.now(),
          o = a(C),
          V = a(l),
          P = Date.now(),
          z = f(C, o),
          E = f(l, V),
          A = Date.now();
        V[0] *= Math.pow(10, x);
        if (E[0] + E[1] + E[2] < 0.001) E = z.slice(0);
        var N = [E[0] / z[0], E[1] / z[1], E[2] / z[2]],
          Q = v.length,
          e = 1 / -1.1546978950500488;
        for (var y = 0; y < Q; y += 3) {
          if (H) {
            var I = Math.max(0, Math.min(1, v[y] * e));
            I = 1 - Math.sqrt(I);
            Y = I * V[1];
            d = I * V[2];
          } else {
            Y = V[1];
            d = V[2];
          }
          v[y] = (v[y] - o[0]) * N[0] + V[0];
          v[y + 1] = (v[y + 1] - o[1]) * N[1] * X + Y;
          v[y + 2] = (v[y + 2] - o[2]) * N[2] * X + d;
        }
        var O = Date.now(),
          s = u.slice(0);
        c(v, u);
        var p = u.length >>> 2;
        for (var y = 0; y < p; ++y) {
          u[4 * y] = (1 - $) * u[4 * y] + $ * s[4 * y];
          u[4 * y + 1] = (1 - $) * u[4 * y + 1] + $ * s[4 * y + 1];
          u[4 * y + 2] = (1 - $) * u[4 * y + 2] + $ * s[4 * y + 2];
        }
      }
      return U;
    })(),
    h0 = (function () {
      function j(q, m, n, G, W) {
        var k = [-1, -1, -1, -1],
          T = 255,
          b = 160,
          c,
          a = !1,
          f = new Array(4);
        f[0] = new Array(m);
        f[1] = new Array(n);
        f[2] = new Array(m);
        f[3] = new Array(n);
        var U = new Array(2);
        U[0] = new Array(n);
        U[1] = new Array(n);
        function Z(A, N, Q, e, Y) {
          this.start = e;
          this.axis = Y;
          this.dir = A;
          this.end = -1;
          this.source = N;
          this.C = Q;
        }
        function h(A, N, Q, e, Y) {
          if (Q % 2 == 0) {
            if (!f[Q][A]) f[Q][A] = new Array();
            f[Q][A].push(new Z(Q, e, Y, N, A));
          } else {
            if (!f[Q][N]) f[Q][N] = new Array();
            f[Q][N].push(new Z(Q, e, Y, A, N));
          }
          var d = Date.now();
        }
        function u(y) {
          var A = !1,
            N = 0;
          if (q[4 * y + 3] < T) return A;
          var Q = y % m,
            e = Math.floor(y / m);
          i(Q, e);
          if (
            y + m < m * n &&
            q[4 * (y + m) + 3] < T &&
            q[4 * (y - m) + 3] >= T &&
            q[4 * (y - 2 * m) + 3] >= T
          ) {
            var Y = 2;
            if (q[4 * (y + m) + 3] <= b) N = -1;
            if (
              q[4 * (y + 2 * m - 1) + 3] < T &&
              q[4 * (y + 2 * m + 1) + 3] < T
            )
              A = !0;
            else if (q[4 * (y + 2 * m - 1) + 3] >= T && q[4 * (y + 1) + 3] >= T)
              A = !0;
            else if (q[4 * (y + 2 * m + 1) + 3] >= T && q[4 * (y - 1) + 3] >= T)
              A = !0;
            h(Q, e, Y, N, A);
          } else if (
            y - m >= 0 &&
            q[4 * (y - m) + 3] < T &&
            q[4 * (y + m) + 3] >= T &&
            q[4 * (y + 2 * m) + 3] >= T
          ) {
            var Y = 0;
            if (q[4 * (y - m) + 3] <= b) N = -1;
            if (
              q[4 * (y - 2 * m - 1) + 3] < T &&
              q[4 * (y - 2 * m + 1) + 3] < T
            )
              A = !0;
            else if (q[4 * (y - 2 * m - 1) + 3] >= T && q[4 * (y + 1) + 3] >= T)
              A = !0;
            else if (q[4 * (y - 2 * m + 1) + 3] >= T && q[4 * (y - 1) + 3] >= T)
              A = !0;
            h(Q, e, Y, N, A);
          }
          N = 0;
          if (
            y + 1 < m * n &&
            q[4 * (y + 1) + 3] < T &&
            q[4 * (y - 1) + 3] >= T &&
            q[4 * (y - 2) + 3] >= T
          ) {
            var Y = 3;
            if (q[4 * (y + 1) + 3] <= b) N = -1;
            if (
              !A &&
              q[4 * (y + m + 2) + 3] < T &&
              q[4 * (y - m + 2) + 3] < T
            ) {
              A = !0;
              h(Q, e, Y, N, !0);
            } else h(Q, e, Y, N, !1);
          } else if (
            y >= 1 &&
            q[4 * (y - 1) + 3] < T &&
            q[4 * (y + 1) + 3] >= T &&
            q[4 * (y + 2) + 3] >= T
          ) {
            var Y = 1;
            if (q[4 * (y - 1) + 3] <= b) N = -1;
            if (
              !A &&
              q[4 * (y + m - 2) + 3] < T &&
              q[4 * (y - m - 2) + 3] < T
            ) {
              A = !0;
              h(Q, e, Y, N, !0);
            } else h(Q, e, Y, N, !1);
          }
          return A;
        }
        function i(y, A) {
          if (k[0] == -1) {
            k[0] = y;
            k[1] = A;
            k[2] = 1;
            k[3] = 1;
          }
          if (y < k[0]) {
            k[2] += k[0] - y;
            k[0] = y;
          }
          if (y > k[0] + k[2]) k[2] = y - k[0];
          if (A < k[1]) {
            k[3] += k[1] - A;
            k[1] = A;
          }
          if (A > k[1] + k[3]) k[3] = A - k[1];
        }
        function x(A, y, N, Q) {
          if (!N.C) return;
          var e = (A + 2) % 4,
            Y = N.start,
            d = k[1];
          if (A == 2) d += k[3];
          else if (A == 1) d = k[0];
          else if (A == 3) d = k[0] + k[2];
          var I = N.source;
          if (f[e][y])
            for (var O = 0; O < f[e][y].length; ++O) {
              if (A > 1) {
                var s = Y + Math.floor((f[e][y][O].start - Y) / 2);
                if (f[e][y][O].start > Y && s < d) d = s;
              } else {
                var s = Y - Math.floor((Y - f[e][y][O].start) / 2);
                if (f[e][y][O].start < Y && s > d) d = s;
              }
            }
          for (var p = 1; p < Math.abs(d - Y); ++p) {
            var O = Y + p;
            if (A == 1 || A == 0) O = Y - p;
            for (var F = 0; F < 2; ++F) {
              var g = 2 * F,
                w = !1;
              if (A % 2 == 0) g += 1;
              if (f[g][O]) {
                for (var r = 0; r < f[g][O].length; ++r) {
                  if (f[g][O][r].C) {
                    var eQ = f[g][O][r].start,
                      t = y - eQ,
                      dq = O - Y;
                    if (g == 0 || g == 1) t = -t;
                    if (t <= 0) continue;
                    if (A == 0 || A == 1) dq = -dq;
                    if (dq > t) {
                      d = O;
                      w = !0;
                      break;
                    }
                  }
                }
                if (w) break;
              }
            }
          }
          N.end = d;
          H(A, y, Y, d, I);
        }
        function X(A) {
          for (var y = 0; y < f[A].length; ++y) {
            if (f[A][y])
              for (var N = 0; N < f[A][y].length; ++N) {
                x(A, y, f[A][y][N]);
              }
          }
        }
        function $() {
          var A = [2, 0, 3, 1];
          for (var y = 0; y < A.length; ++y) X(A[y]);
        }
        function H(A, y, N, Q, e) {
          if (A == 2)
            for (var Y = N; Y <= Q; ++Y) {
              if (!C(Y * m + y, (N + e) * m + y)) return !1;
            }
          else if (A == 0)
            for (var Y = N; Y >= Q; --Y) {
              if (!C(Y * m + y, (N - e) * m + y)) return !1;
            }
          else if (A == 1)
            for (var Y = N; Y >= Q; --Y) {
              if (!C(y * m + Y, y * m + N - e)) return !1;
            }
          else if (A == 3)
            for (var Y = N; Y <= Q; ++Y) {
              if (!C(y * m + Y, y * m + N + e)) return !1;
            }
        }
        function C(A, N) {
          if (!c[A]) {
            G[4 * A] = G[4 * N];
            G[4 * A + 1] = G[4 * N + 1];
            G[4 * A + 2] = G[4 * N + 2];
            if (a) G[4 * A + 3] = 255;
            c[A] = !0;
            return !0;
          }
          return !1;
        }
        function l() {
          for (var y = 0; y < 4; y += 1) {
            for (var A = 0; A < f[y].length; ++A) {
              if (f[y][A])
                for (var N = 0; N < f[y][A].length; ++N) {
                  var Q = f[y][A][N];
                  for (var e = 1; e < 3; e += 2) {
                    var Y = (y + e) % 4;
                    if (f[Y][Q.start])
                      for (var d = 0; d < f[Y][Q.start].length; ++d) {
                        if (f[Y][Q.start][d].start == Q.axis) {
                          var aF = m * Q.start + Q.axis;
                          if (y % 2 == 1) {
                            aF = Q.start + m * Q.axis;
                            v(f[Y][Q.start][d]);
                          } else v(Q);
                        }
                      }
                  }
                }
            }
          }
        }
        function v(A) {
          if (A.dir % 2 == 0) {
            var aF = m * A.start + A.axis,
              N = A.start,
              Q = 1;
            if (!c[aF + 1]) Q = 3;
            else if (c[aF - 1]) return;
            var e = G[4 * aF],
              Y = G[4 * aF + 1],
              d = G[4 * aF + 2];
            while (G[4 * aF] == e && G[4 * aF + 1] == Y && G[4 * aF + 2] == d) {
              if (Q == 1) {
                if (!U[0][N]) U[0][N] = new Array();
                U[0][N].push(new Z(Q, 0, !1, A.axis, N));
              } else {
                if (!U[1][N]) U[1][N] = new Array();
                U[1][N].push(new Z(Q, 0, !1, A.axis, N));
              }
              if (A.dir == 2) {
                aF += m;
                N++;
              } else {
                aF -= m;
                N--;
              }
            }
          }
        }
        function K() {
          for (var A = 0; A < 2; ++A) {
            var N = (A + 1) % 2;
            for (var y = 0; y < U[A].length; ++y) {
              if (U[A][y])
                for (var Q = 0; Q < U[A][y].length; ++Q) {
                  var e = k[0];
                  if (A == 1) e += k[2];
                  var Y = U[A][y][Q].start;
                  if (U[N][y])
                    for (var d = 0; d < U[N][y].length; ++d) {
                      var I = U[N][y][d].fO;
                      if (A == 0) {
                        if (I > e && I < Y) {
                          e = Y - Math.floor((Y - I) / 2);
                        }
                      } else {
                        if (I < e && I > Y) {
                          e = Y + Math.ceil((I - Y) / 2);
                        }
                      }
                    }
                  if (A == 0) H(U[A][y][Q].dir, y, Y - 1, e, -1);
                  else H(U[A][y][Q].dir, y, Y + 1, e, -1);
                }
            }
          }
          for (var y = 0; y < c.length; ++y) {
            if (
              !c[y] &&
              y % m >= k[0] &&
              y % m <= k[0] + k[2] &&
              Math.floor(y / m) >= k[1] &&
              Math.floor(y / m) <= k[1] + k[3]
            ) {
              var Y = m;
              if (y < Y || !c[y - Y]) Y = 1;
              G[4 * y] = G[4 * (y - Y)];
              G[4 * y + 1] = G[4 * (y - Y) + 1];
              G[4 * y + 2] = G[4 * (y - Y) + 2];
              c[y] = !0;
              if (a) G[4 * y + 3] = 255;
            }
          }
        }
        function S() {
          c = new Array(q.length / 4);
          for (var y = 0; y < G.length / 4; ++y) {
            c[y] = !1;
            G[4 * y] = q[4 * y];
            G[4 * y + 1] = q[4 * y + 1];
            G[4 * y + 2] = q[4 * y + 2];
            G[4 * y + 3] = q[4 * y + 3];
            if (G[4 * y + 3] == 255) c[y] = !0;
            if (u(y)) c[y] = !1;
          }
          if (k[0] > 0) {
            k[0]--;
            k[2]++;
          }
          if (k[1] > 0) {
            k[1]--;
            k[3]++;
          }
          if (k[0] + k[2] < m) {
            k[2]++;
          }
          if (k[1] + k[3] < n) {
            k[3]++;
          }
        }
        var o = Date.now();
        S();
        var V = Date.now();
        $();
        var P = Date.now();
        l();
        var z = Date.now();
        K();
        var E = Date.now();
        console.log("Init: " + String(V - o));
        console.log("Filling: " + String(P - V));
        console.log("Check areas: " + String(z - P));
        console.log("Fill areas: " + String(E - z));
      }
      return j;
    })();
  function el() {}
  el.anV = function (j) {
    var q = [B.qd(j[0]), B.qd(j[1]), B.qd(j[2]), 0];
    return B.kz.$j(B.kz.awZ, q);
  };
  el.aLD = function (j) {
    var q = B.kz.$j(B.kz.Dg, j);
    return [B.SK(q[0]), B.SK(q[1]), B.SK(q[2])];
  };
  el.Ht = function (j, q) {
    var m = {},
      n = 5003,
      G = 1667,
      W = 25e3,
      k = 57.4,
      T = 16.1,
      b = 1.8,
      c = 0,
      a = 1.54,
      f = 0.75,
      h = 0;
    if (q > 0) {
      j -= (q / 100) * 4;
    }
    if (j < 0) {
      T = 22.54;
      k = 80.36;
      a = 0.756;
    }
    if (q > 0) {
      b = 1.3;
      f = 0.2;
    }
    var U = Math.min(n + k * j, W),
      Z = Math.max(n - T * j, G);
    if (j < 0) {
      U = Math.max(n + T * j, G);
      Z = Math.min(n - k * j, W);
    }
    if (j > 0) {
      if (j <= 14) {
        h = ((j - 1) / 13) * 0.075 + 0.025;
      } else if (j <= 29) {
        h = 0.1;
      } else if (j <= 60) {
        h = 0.1 - (0.1 * (j - 29)) / (60 - 29);
      } else {
        var u = j - 60;
        c = -20 * (u / 40);
        h = -0.3 * (u / 40);
      }
    } else {
      if (j < -60) {
        var u = j + 60;
        c = -20 * (u / 40);
      }
    }
    var i = (Math.abs(j) / 100) * a + (Math.abs(q) / 100) * f + h,
      x = -(q * b + c),
      X = g3.ye(U, -x),
      $ = g3.LF(X),
      H = g3.ye(Z, 0),
      C = g3.LF(H),
      l = g3.aGo($, C);
    m.abX = i;
    m.aHZ = l;
    if (j == 0 && q == 0) m.a6g = !0;
    else m.a6g = !1;
    return m;
  };
  el.az_ = function (j, q, m, n) {
    if (n.a6g) {
      return [j, q, m];
    }
    var G = this.anV([j, q, m]),
      W = G[0],
      k = G[1],
      T = G[2],
      b = k + 1e-12,
      c = [W / b, k / b, T / b, 0],
      a = B.kz.$j(n.aHZ, c),
      f = 0,
      U = 0.4;
    a[0] *= b;
    a[1] *= b;
    a[2] *= b;
    if (b > U) f = (1 / (1 - U)) * (b - U);
    G[0] = (1 - f) * a[0] + f * W;
    G[1] = (1 - f) * a[1] + f * k;
    G[2] = (1 - f) * a[2] + f * T;
    return this.aLD(G);
  };
  B.a8b = {
    G2: function (j, q) {
      var y = j.length;
      j.push(q);
      var m = y >>> 1;
      while (m != 0 && j[y][0] < j[m][0]) {
        var n = j[y];
        j[y] = j[m];
        j[m] = n;
        y = m;
        m = y >>> 1;
      }
    },
    SJ: function (j) {
      if (j.length == 2) return j.pop();
      var top = j[1],
        y = 1;
      j[1] = j.pop();
      var q = j.length;
      while (!0) {
        var m = y << 1,
          n = m + 1,
          G = y;
        if (m < q && j[m][0] < j[G][0]) G = m;
        if (n < q && j[n][0] < j[G][0]) G = n;
        if (G == y) break;
        var W = j[y];
        j[y] = j[G];
        j[G] = W;
        y = G;
      }
      return top;
    },
    abZ: function (j) {
      for (var y = 1; y < j.length; y++) {
        var q = y,
          m = 1e9;
        while (q != 0) {
          var n = j[q][0];
          if (n > m) {
            console.log(y);
            throw "e";
          }
          m = n;
          q = q >>> 1;
        }
      }
    },
  };
  B.G = {};
  B.G.V_ = new Float64Array(256);
  B.G.zC = new Uint8Array(256 * 256);
  B.G.asw = new Uint8Array(256 * 256);
  (function () {
    for (var y = 0; y < 256; y++) B.G.V_[y] = 255 / y;
    for (var y = 0; y < 256; y++)
      for (var j = 0; j < 256; j++)
        B.G.zC[y * 256 + j] = y == 0 ? 0 : Math.round((j * 255) / y);
    for (var y = 0; y < 256; y++)
      for (var j = 0; j < 256; j++)
        B.G.asw[y * 256 + j] = Math.round((y * (255 - j)) / 255);
  })();
  B.G.Jg = function (j, q, m, n, G, W, k, T) {
    if (T == null) T = dS.ZA();
    var b = B.oM(q instanceof Array ? q[0] : q);
    if (b != B.oM(n)) throw "e";
    if ("idiv,lbrn,div ,lddg,vLit,lLit,hMix,diff".split(",").indexOf(j) == -1) {
      k = k * T.fill;
      T.fill = 1;
      T.style = !1;
    }
    var c =
        "norm,dark,mul ,idiv,lbrn,lite,scrn,div ,lddg,over,sLit,hLit,vLit,lLit,pLit,hMix,diff,smud,fsub,fdiv".split(
          ","
        ),
      a = "dkCl,lgCl,hue ,sat ,colr,lum ".split(","),
      f = B.G[j + "F"];
    if (b == 8) {
      if (T.qL == null && j == "norm")
        B.G.aut(q, m, n, G, W, k, f, T.TZ ? 1 : 0);
      else if (j == "diss") B.G.abF(q, m, n, G, W, k, f, T.TZ ? 1 : 0);
      else if (c.indexOf(j) != -1) B.G.akB(q, m, n, G, W, k, f, T);
      else if (a.indexOf(j) != -1) B.G.ajg(q, m, n, G, W, k, f, T);
    } else {
      if (j == "diss") B.G.aLZ(q, m, n, G, W, k, f, T.TZ ? 1 : 0);
      else if (c.indexOf(j) != -1) B.G.a4g(q, m, n, G, W, k, f, T);
      else if (a.indexOf(j) != -1) B.G.a5n(q, m, n, G, W, k, f, T);
    }
  };
  B.G.aK2 = function (j, q, m) {
    var n = j * m + 1 - m;
    return n < 0.001 ? 0 : 1 - Math.min(1, (1 - q) / n);
  };
  B.G.auD = function (j, q, m) {
    return j * m == 1 ? 1 : Math.min(1, q / (1 - j * m));
  };
  B.G.l_ = function (j) {
    return j <= 0.25 ? ((16 * j - 12) * j + 4) * j : Math.sqrt(j);
  };
  B.G.normF = function (j, q, m) {
    return j;
  };
  B.G.darkF = function (j, q, m) {
    return Math.min(j, q);
  };
  B.G["mul F"] = function (j, q, m) {
    return j * q;
  };
  B.G.idivF = function (j, q, m) {
    var n = j * m + 1 - m;
    return q == 1 ? 1 : 1 - q >= n ? 0 : 1 - (1 - q) / n;
  };
  B.G.lbrnF = function (j, q, m) {
    return Math.max(0, j * m + q - m);
  };
  B.G.dkClF = function (j, q, m) {
    var n = B.Sn(j) < B.Sn(q) ? j : q;
    m.o = n.o;
    m.i = n.i;
    m.X = n.X;
    return m;
  };
  B.G.liteF = function (j, q, m) {
    return Math.max(j, q);
  };
  B.G.scrnF = function (j, q, m) {
    return q + j - q * j;
  };
  B.G["div F"] = function (j, q, m) {
    j *= m;
    return q == 0 ? 0 : q >= 1 - j ? 1 : q / (1 - j);
  };
  B.G.lddgF = function (j, q, m) {
    j *= m;
    return Math.min(1, j + q);
  };
  B.G.lgClF = function (j, q, m) {
    var n = B.Sn(j) > B.Sn(q) ? j : q;
    m.o = n.o;
    m.i = n.i;
    m.X = n.X;
    return m;
  };
  B.G.overF = function (j, q, m) {
    return B.G.hLitF(q, j, m);
  };
  B.G.sLitF = function (j, q, m) {
    return j <= 0.5
      ? q - (1 - 2 * j) * q * (1 - q)
      : q + (2 * j - 1) * (B.G.l_(q) - q);
  };
  B.G.hLitF = function (j, q, m) {
    return j <= 0.5 ? B.G["mul F"](2 * j, q, m) : B.G.scrnF(2 * j - 1, q, m);
  };
  B.G.vLitF = function (j, q, m) {
    return j <= 0.5 ? B.G.aK2(2 * j, q, m) : B.G.auD(2 * j - 1, q, m);
  };
  B.G.lLitF = function (j, q, m) {
    return j <= 0.5 ? B.G.lbrnF(2 * j, q, m) : B.G.lddgF(2 * j - 1, q, m);
  };
  B.G.pLitF = function (j, q, m) {
    return j <= 0.5 ? B.G.darkF(2 * j, q, m) : B.G.liteF(2 * j - 1, q, m);
  };
  B.G.hMixF = function (j, q, m) {
    if (m > 0.99) return j + q < 1 ? 0 : 1;
    return Math.min(1, Math.max(0, (q + j * m - m) / (1 - m + 1e-6)));
  };
  B.G.diffF = function (j, q, m) {
    j *= m;
    return Math.abs(j - q);
  };
  B.G.smudF = function (j, q, m) {
    return j + q - 2 * j * q;
  };
  B.G.fsubF = function (j, q, m) {
    return Math.max(q - j, 0);
  };
  B.G.fdivF = function (j, q, m) {
    return Math.min(q / j, 1);
  };
  B.G["hue F"] = function (j, q, m) {
    B.G.E6(j, B.lJ(q), m);
    B.G.pR(m, B.Sn(q), m);
  };
  B.G["sat F"] = function (j, q, m) {
    B.G.E6(q, B.lJ(j), m);
    B.G.pR(m, B.Sn(q), m);
  };
  B.G.colrF = function (j, q, m) {
    B.G.pR(j, B.Sn(q), m);
  };
  B.G["lum F"] = function (j, q, m) {
    B.G.pR(q, B.Sn(j), m);
  };
  B.G.pR = function (j, q, m) {
    var n = q - B.Sn(j);
    m.o = j.o + n;
    m.i = j.i + n;
    m.X = j.X + n;
    B.G.axZ(m);
  };
  B.G.axZ = function (j) {
    var q = j.o,
      m = j.i,
      n = j.X,
      G = B.he(q, m, n),
      aF = Math.min(q, m, n),
      W = Math.max(q, m, n);
    if (aF < 0) {
      var k = G / (G - aF);
      q = G + (q - G) * k;
      m = G + (m - G) * k;
      n = G + (n - G) * k;
    }
    if (W > 1) {
      var k = (1 - G) / (W - G);
      q = G + (q - G) * k;
      m = G + (m - G) * k;
      n = G + (n - G) * k;
    }
    j.o = q;
    j.i = m;
    j.X = n;
  };
  B.G.E6 = function (j, q, m) {
    var n = B.G.aJU,
      G = j.o,
      W = j.i,
      k = j.X;
    if (G == W && W == k) {
      m.o = m.i = m.X = 0;
    } else if (G > W) {
      if (G > k) {
        if (W > k) {
          m.o = q;
          m.i = n(G, W, k, q);
          m.X = 0;
        } else {
          m.o = q;
          m.X = n(G, k, W, q);
          m.i = 0;
        }
      } else {
        m.X = q;
        m.o = n(k, G, W, q);
        m.i = 0;
      }
    } else {
      if (G < k) {
        if (W > k) {
          m.i = q;
          m.X = n(W, k, G, q);
          m.o = 0;
        } else {
          m.X = q;
          m.i = n(k, W, G, q);
          m.o = 0;
        }
      } else {
        m.i = q;
        m.o = n(W, G, k, q);
        m.X = 0;
      }
    }
  };
  B.G.aJU = function (j, q, m, n) {
    return ((q - m) * n) / (j - m);
  };
  B.G.aut = function (j, q, m, n, G, W, k, T) {
    var b = q.TM(n).TM(G),
      c = Math.max(0, b.x - q.x),
      a = Math.max(0, b.x - n.x),
      f = Math.max(0, b.y - q.y),
      U = Math.max(0, b.y - n.y),
      Z = b.r,
      h = b.$,
      u = q.r,
      i = n.r,
      x = j instanceof Array,
      X = x ? j[1] : null,
      $ = new Uint32Array((x ? j[0] : j).buffer),
      H = new Uint32Array(m.buffer),
      C = $[0] & 16777215;
    for (var y = 0; y < h; y++) {
      var l = (f + y) * u + c,
        v = (U + y) * i + a;
      for (var K = 0; K < Z; K++) {
        var S = x ? C | (X[l + K] << 24) : $[l + K],
          e = 1;
        if (S >>> 24 == 0) continue;
        if (S >>> 24 == 255 && W == 1 && T == 0) {
          H[v + K] = S;
          continue;
        }
        var o = H[v + K],
          V = S & 255,
          P = (S >>> 8) & 255,
          z = (S >>> 16) & 255,
          E = o & 255,
          A = (o >>> 8) & 255,
          N = (o >>> 16) & 255,
          Q = W,
          Y = (o >>> 24) * (1 / 255);
        if (T == 0) {
          Q = (S >>> 24) * W * (1 / 255);
          e = Y;
        }
        var d = e * (1 - Q),
          I = Q + d,
          O = 1 / I;
        H[v + K] =
          (~~(0.5 + (T * Y + (1 - T) * I) * 255) << 24) |
          (~~(0.5 + (z * Q + N * d) * O) << 16) |
          (~~(0.5 + (P * Q + A * d) * O) << 8) |
          ~~(0.5 + (V * Q + E * d) * O);
      }
    }
  };
  B.G.ajK = function (j, q, m, n, G, W) {
    var k = q.TM(n).TM(G),
      T = Math.max(0, k.x - q.x),
      b = Math.max(0, k.x - n.x),
      c = Math.max(0, k.y - q.y),
      a = Math.max(0, k.y - n.y),
      f = k.r,
      U = k.$,
      Z = q.r,
      h = n.r,
      u = B.G.zC,
      i = B.G.asw,
      x = new Uint32Array(j.buffer),
      X = new Uint32Array(m.buffer),
      $ = Math.floor(Math.random() * 16777215),
      H = 0;
    for (var y = 0; y < U; y++) {
      var C = (c + y) * Z + T,
        l = (a + y) * h + b;
      for (var v = 0; v < f; v++) {
        var K = x[C + v];
        if (K >>> 24 == 0) continue;
        if (K >> 24 == 255 && W == 1) {
          X[l + v] = K;
          continue;
        }
        var S = X[l + v],
          o = (K >>> 24) * W * (1 / 255),
          V = (S >>> 24) * (1 / 255),
          P = V * (1 - o),
          z = o + P,
          E = K & 255,
          A = (K >>> 8) & 255,
          N = (K >>> 16) & 255,
          Q = S & 255,
          e = (S >>> 8) & 255,
          Y = (S >>> 16) & 255;
        H >>>= 8;
        if ((v & 3) == 0) H = B.G.Dv(l + v + $);
        var d = z == 0 ? 0 : 1 / z,
          I = (Math.floor(z * (256 * 255)) + (H & 255)) >>> 8,
          O = Math.floor((N * o + Y * P) * d + 0.5),
          s = Math.floor((A * o + e * P) * d + 0.5),
          p = Math.floor((E * o + Q * P) * d + 0.5);
        X[l + v] = (I << 24) | (O << 16) | (s << 8) | p;
      }
    }
  };
  B.G.kg = function (j, q, m, n, G, W, k, T) {
    var b = B.he(j, q, m),
      c = B.he(n, G, W),
      a = Math.min,
      f = B.G.a5s,
      U = f(b, T, 0);
    U = a(U, f(j, T, 8));
    U = a(U, f(q, T, 16));
    U = a(U, f(m, T, 24));
    var Z = f(c, T, 4);
    Z = a(Z, f(n, T, 12));
    Z = a(Z, f(G, T, 20));
    Z = a(Z, f(W, T, 28));
    Z = Math.max(Z, 1 - k);
    var h = Math.min(U, Z);
    return h < 0 ? 0 : h > 1 ? 1 : h;
  };
  B.G.a5s = function (j, q, y) {
    return Math.min((j - q[y]) * q[y + 1], (j - q[y + 3]) * q[y + 2]);
  };
  B.G.Fb = function (j) {
    return ~~(j + 0.5);
  };
  B.G.akB = function (j, q, m, n, G, W, k, T) {
    var b = 1 / 255,
      c = b * W,
      a = B.G.Fb,
      f = T.TZ ? 1 : 0,
      U = T.fill,
      Z = T.style,
      h = q.TM(n).TM(G),
      u = Math.max(0, h.x - q.x),
      i = Math.max(0, h.x - n.x),
      x = Math.max(0, h.y - q.y),
      X = Math.max(0, h.y - n.y),
      $ = h.r,
      H = h.$,
      C = q.r,
      l = n.r,
      v = j instanceof Array,
      K = v ? j[1] : null,
      S = new Uint32Array((v ? j[0] : j).buffer),
      o = new Uint32Array(m.buffer),
      V = S[0] & 16777215;
    for (var y = 0; y < H; y++) {
      var P = (x + y) * C + u,
        z = (X + y) * l + i;
      for (var E = 0; E < $; E++, P++, z++) {
        var A = v ? V | (K[P] << 24) : S[P],
          p = 1;
        if (A >>> 24 == 0) continue;
        var N = o[z],
          Q = (A & 255) * b,
          e = ((A >>> 8) & 255) * b,
          Y = ((A >>> 16) & 255) * b,
          d = (N & 255) * b,
          I = ((N >>> 8) & 255) * b,
          O = ((N >>> 16) & 255) * b,
          s = W;
        if (f == 0) {
          s = (A >>> 24) * c;
          p = (N >>> 24) * b;
        }
        if (T.qL) s *= B.G.kg(Q, e, Y, d, I, O, p, T.qL);
        var F = p * (1 - s),
          g = s + F,
          w = g == 0 ? 0 : 255 / g,
          r = Z ? 1 : s,
          eQ =
            ((1 - p) * s * Q +
              (1 - r) * p * d +
              r * p * k(Q, d, (1 + s - r) * U)) *
            w,
          t =
            ((1 - p) * s * e +
              (1 - r) * p * I +
              r * p * k(e, I, (1 + s - r) * U)) *
            w,
          dq =
            ((1 - p) * s * Y +
              (1 - r) * p * O +
              r * p * k(Y, O, (1 + s - r) * U)) *
            w;
        g = s * U + p * (1 - s * U);
        o[z] =
          (a(f * (N >>> 24) + (1 - f) * a(g * 255)) << 24) |
          (a(dq) << 16) |
          (a(t) << 8) |
          a(eQ);
      }
    }
  };
  B.G.a4g = function (j, q, m, n, G, W, k, T) {
    var b = B.oM(m),
      c = b == 32 ? 1 : b == 16 ? 65535 : 255,
      a = 1 / c,
      f = T.TZ ? 1 : 0,
      U = T.fill,
      Z = T.style,
      h = B.G.Fb,
      u = q.TM(n).TM(G),
      i = Math.max(0, u.x - q.x),
      x = Math.max(0, u.x - n.x),
      X = Math.max(0, u.y - q.y),
      $ = Math.max(0, u.y - n.y),
      H = u.r,
      C = u.$,
      l = q.r,
      v = n.r,
      K = j instanceof Array,
      S = K ? j[1] : null;
    if (K) j = j[0];
    for (var y = 0; y < C; y++) {
      var o = (X + y) * l + i,
        V = ($ + y) * v + x;
      for (var P = 0; P < H; P++, o++, V++) {
        var z = K ? 0 : o * 4,
          E = V * 4,
          A = j[z] * a,
          N = j[z + 1] * a,
          Q = j[z + 2] * a,
          e = (K ? S[o] : j[z + 3]) * a * W;
        if (e == 0) continue;
        var Y = m[E] * a,
          d = m[E + 1] * a,
          I = m[E + 2] * a,
          O = m[E + 3] * a;
        if (T.qL) e *= B.G.kg(A, N, Q, Y, d, I, O, T.qL);
        var s = O * (1 - e),
          p = e + s,
          F = p == 0 ? 0 : c / p,
          g = Z ? 1 : e,
          w =
            ((1 - O) * e * A +
              (1 - g) * O * Y +
              g * O * k(A, Y, (1 + e - g) * U)) *
            F,
          r =
            ((1 - O) * e * N +
              (1 - g) * O * d +
              g * O * k(N, d, (1 + e - g) * U)) *
            F,
          eQ =
            ((1 - O) * e * Q +
              (1 - g) * O * I +
              g * O * k(Q, I, (1 + e - g) * U)) *
            F;
        p = e * U + O * (1 - e * U);
        if (b == 16) {
          m[E] = h(w);
          m[E + 1] = h(r);
          m[E + 2] = h(eQ);
          m[E + 3] = h(f * m[E + 3] + (1 - f) * (p * c));
        } else {
          m[E] = w;
          m[E + 1] = r;
          m[E + 2] = eQ;
          m[E + 3] = f * m[E + 3] + (1 - f) * (p * c);
        }
      }
    }
  };
  B.G.ajg = function (j, q, m, n, G, W, k, T) {
    var b = 1 / 255,
      c = b * W,
      a = T.TZ ? 1 : 0,
      f = q.TM(n).TM(G),
      U = Math.max(0, f.x - q.x),
      Z = Math.max(0, f.x - n.x),
      h = Math.max(0, f.y - q.y),
      u = Math.max(0, f.y - n.y),
      i = f.r,
      x = f.$,
      X = j instanceof Array,
      $ = X ? j[1] : null,
      H = new Uint32Array((X ? j[0] : j).buffer),
      C = new Uint32Array(m.buffer),
      l = H[0] & 16777215,
      v = { o: 0, i: 0, X: 0 },
      K = { o: 0, i: 0, X: 0 },
      S = { o: 0, i: 0, X: 0 };
    for (var y = 0; y < x; y++) {
      var o = (h + y) * q.r + U,
        V = (u + y) * n.r + Z;
      for (var P = 0; P < i; P++, o++, V++) {
        var z = X ? l | ($[o] << 24) : H[o],
          E = C[V],
          A = (z & 255) * b,
          N = ((z >>> 8) & 255) * b,
          Q = ((z >>> 16) & 255) * b,
          e = (E & 255) * b,
          Y = ((E >>> 8) & 255) * b,
          d = ((E >>> 16) & 255) * b,
          I = W,
          O = 1;
        if (a == 0) {
          I = (z >>> 24) * c;
          O = (E >>> 24) * b;
        }
        if (T.qL) I *= B.G.kg(A, N, Q, e, Y, d, O, T.qL);
        var s = O * (1 - I),
          p = I + s,
          F = 255 / p;
        v.o = A;
        v.i = N;
        v.X = Q;
        K.o = e;
        K.i = Y;
        K.X = d;
        k(v, K, S);
        var g = (((1 - O) * A + O * S.o) * I + e * s) * F,
          w = (((1 - O) * N + O * S.i) * I + Y * s) * F,
          r = (((1 - O) * Q + O * S.X) * I + d * s) * F,
          eQ = a * (E >>> 24) + (1 - a) * Math.round(p * 255);
        C[V] = (eQ << 24) | (r << 16) | (w << 8) | g;
      }
    }
  };
  B.G.a5n = function (j, q, m, n, G, W, k, T) {
    var b = B.oM(m),
      c = b == 32 ? 1 : b == 16 ? 65535 : 255,
      a = 1 / c,
      f = T.TZ ? 1 : 0,
      U = q.TM(n).TM(G),
      Z = Math.max(0, U.x - q.x),
      h = Math.max(0, U.x - n.x),
      u = Math.max(0, U.y - q.y),
      i = Math.max(0, U.y - n.y),
      x = U.r,
      X = U.$,
      $ = { o: 0, i: 0, X: 0 },
      H = { o: 0, i: 0, X: 0 },
      C = { o: 0, i: 0, X: 0 },
      l = j instanceof Array,
      v = l ? j[1] : null;
    if (l) j = j[0];
    for (var y = 0; y < X; y++) {
      var K = (u + y) * q.r + Z,
        S = (i + y) * n.r + h;
      for (var o = 0; o < x; o++, K++, S++) {
        var V = l ? 0 : K * 4,
          P = S * 4,
          z = j[V] * a,
          E = j[V + 1] * a,
          A = j[V + 2] * a,
          d = 1;
        if (j[V + 3] == 0) continue;
        var N = m[P] * a,
          Q = m[P + 1] * a,
          e = m[P + 2] * a,
          Y = W;
        if (f == 0) {
          Y = (l ? v[K] : j[V + 3]) * a * W;
          d = m[P + 3] * a;
        }
        if (T.qL) Y *= B.G.kg(z, E, A, N, Q, e, d, T.qL);
        var I = d * (1 - Y),
          O = Y + I,
          s = c / O;
        $.o = z;
        $.i = E;
        $.X = A;
        H.o = N;
        H.i = Q;
        H.X = e;
        k($, H, C);
        m[P] = (((1 - d) * z + d * C.o) * Y + N * I) * s;
        m[P + 1] = (((1 - d) * E + d * C.i) * Y + Q * I) * s;
        m[P + 2] = (((1 - d) * A + d * C.X) * Y + e * I) * s;
        m[P + 3] = f * m[P + 3] + (1 - f) * Math.round(O * c);
      }
    }
  };
  B.G.Ez = function (j) {
    j = j ^ 61 ^ (j >>> 16);
    j = j + (j << 3);
    j = j ^ (j >>> 4);
    j = j * 668265261;
    j = j ^ (j >> 15);
    return (j & 16777215) * (1 / 16777215);
  };
  B.G.Dv = function (j) {
    j = j ^ 61 ^ (j >>> 16);
    j = j + (j << 3);
    j = j ^ (j >>> 4);
    j = j * 668265261;
    j = j ^ (j >>> 15);
    return j;
  };
  B.G.Oy = function (j) {
    this.ZW = j;
  };
  B.G.Oy.prototype.get = function () {
    var j = (this.ZW = B.G.Dv(this.ZW));
    return (j & 16777215) * (1 / 16777215);
  };
  B.G.abF = function (j, q, m, n, G, W, k, T) {
    var b = Math.round(W * ((256 * 256 * 256) / 255)),
      c = q.TM(n).TM(G),
      a = Math.max(0, c.x - q.x),
      f = Math.max(0, c.x - n.x),
      U = Math.max(0, c.y - q.y),
      Z = Math.max(0, c.y - n.y),
      h = c.r,
      u = c.$,
      i = j instanceof Array,
      x = i ? j[1] : null,
      X = new Uint32Array((i ? j[0] : j).buffer),
      $ = new Uint32Array(m.buffer),
      H = X[0] & 16777215;
    for (var y = 0; y < u; y++) {
      var C = (U + y) * q.r + a,
        l = (Z + y) * n.r + f;
      for (var v = 0; v < h; v++, C++, l++) {
        var K = i ? H | (x[C] << 24) : X[C],
          S = $[l],
          o = T * 255 + (1 - T) * (K >>> 24);
        if ((B.G.Dv(C) & 16777215) >= o * b) continue;
        $[l] = (K & 16777215) | ((T * (S >>> 24) + (1 - T) * 255) << 24);
      }
    }
  };
  B.G.aLZ = function (j, q, m, n, G, W, k, T) {
    var b = B.oM(m),
      c = b == 32 ? 1 : b == 16 ? 65535 : 255,
      a = 1 / c,
      f = q.TM(n).TM(G),
      U = Math.max(0, f.x - q.x),
      Z = Math.max(0, f.x - n.x),
      h = Math.max(0, f.y - q.y),
      u = Math.max(0, f.y - n.y),
      i = f.r,
      x = f.$,
      X = j instanceof Array,
      $ = X ? j[1] : null;
    if (X) j = j[0];
    for (var y = 0; y < x; y++) {
      var H = (h + y) * q.r + U,
        C = (u + y) * n.r + Z;
      for (var l = 0; l < i; l++, H++, C++) {
        var v = X ? 0 : H * 4,
          K = C * 4,
          S = (X ? $[H] : j[v + 3]) * a,
          o = m[K + 3] * a;
        S = T + (1 - T) * S;
        if ((B.G.Dv(H) & 255) * (1 / 255) >= S * W) continue;
        m[K] = j[v];
        m[K + 1] = j[v + 1];
        m[K + 2] = j[v + 2];
        m[K + 3] = (T * o + (1 - T)) * c;
      }
    }
  };
  B.G.afG = function (j, q, m) {
    for (var y = 0; y < j.length; y += 4) {
      var n = m[y >>> 2];
      if (n == 0) continue;
      var G = n * (1 / 255),
        W = 1 / G,
        k = q[y],
        T = q[y + 1],
        b = q[y + 2],
        c = j[y],
        a = j[y + 1],
        f = j[y + 2];
      q[y] = Math.min(255, Math.max(0, Math.round((k - (1 - G) * c) * W)));
      q[y + 1] = Math.min(255, Math.max(0, Math.round((T - (1 - G) * a) * W)));
      q[y + 2] = Math.min(255, Math.max(0, Math.round((b - (1 - G) * f) * W)));
      q[y + 3] = 255;
    }
  };
  B.G.xf = function (j, q, m, n, G, W, k, T, b, c, a) {
    if (c == null) c = !1;
    var f = B.oM(j),
      U = f == 8 ? 255 : f == 16 ? 65535 : 1;
    if (G && G.length == W.C() * 4) {
      var Z = B.j(W.C(), f);
      B.Ih(G, Z, 3);
      G = Z;
    }
    if (G && !q.Lg(W)) {
      var h = B.j(q.C(), f);
      h.fill((U * k) / 255);
      B.sN(G, W, h, q);
      G = h;
      W = q;
    }
    if (f == 8) {
      if (a == null) a = [1, 1, 1];
      var u = (255 << 24) | (a[2] * 16711680) | (a[1] * 65280) | (a[0] * 255),
        i = ~u;
      if (c) {
        if (G == null) B.G.awH(j, q, m, n, G, T, b, u, i);
        else B.G.aaJ(j, q, m, n, G, T, b);
      } else {
        if (G == null) B.G.amF(j, q, m, n, G, T, b, u, i);
        else B.G.aqZ(j, q, m, n, G, T, b);
      }
    } else {
      if (a && a.join(",") != "1,1,1") throw "e";
      if (c) B.G.aqF(j, q, m, n, G, T, b);
      else B.G.a1h(j, q, m, n, G, T, b);
    }
  };
  B.G.amF = function (j, q, m, n, G, W, k, T, b) {
    var c = 1 / 255,
      a = q.TM(n).TM(W),
      f = Math.max(0, a.x - q.x),
      U = Math.max(0, a.x - n.x),
      Z = Math.max(0, a.y - q.y),
      h = Math.max(0, a.y - n.y),
      u = a.r,
      i = a.$,
      x = new Uint32Array(j.buffer),
      X = new Uint32Array(m.buffer),
      $ = B.G.zC,
      H = (k * 255) & 255;
    for (var y = 0; y < i; y++) {
      var C = (Z + y) * q.r + f,
        l = (h + y) * n.r + U;
      for (var v = 0; v < u; v++, C++, l++) {
        var K = x[C],
          S = X[l],
          o = K >>> 24,
          V = S >>> 24,
          P = B.Io(H * o + (255 - H) * V),
          z = B.Io(o * H),
          E = B.Io(V * (255 - H)),
          A = K & 255,
          N = (K >>> 8) & 255,
          Q = (K >>> 16) & 255,
          e = S & 255,
          Y = (S >>> 8) & 255,
          d = (S >>> 16) & 255,
          I = z * A + e * E,
          O = z * N + Y * E,
          s = z * Q + d * E;
        I = $[(P << 8) | B.Io(I)];
        O = $[(P << 8) | B.Io(O)];
        s = $[(P << 8) | B.Io(s)];
        var p = (P << 24) | (s << 16) | (O << 8) | I;
        X[l] = (b & S) | (T & p);
      }
    }
  };
  B.G.awH = function (j, q, m, n, G, W, k, T, b) {
    var c = 1 / 255,
      a = q.TM(n).TM(W),
      f = Math.max(0, a.x - q.x),
      U = Math.max(0, a.x - n.x),
      Z = Math.max(0, a.y - q.y),
      h = Math.max(0, a.y - n.y),
      u = a.r,
      i = a.$,
      x = new Uint32Array(j.buffer),
      X = new Uint32Array(m.buffer),
      $ = B.G.zC,
      H = (k * 16777215) & 16777215;
    for (var y = 0; y < i; y++) {
      var C = (Z + y) * q.r + f,
        l = (h + y) * n.r + U;
      for (var v = 0; v < u; v++, C++, l++) {
        if ((B.G.Dv(C) & 16777215) < H) {
          X[l] = (b & X[l]) | (T & x[C]);
        }
      }
    }
  };
  B.G.a1h = function (j, q, m, n, G, W, k) {
    var T = B.oM(j),
      b = T == 8 ? 255 : T == 16 ? 65535 : 1,
      c = 1 / b,
      a = q.TM(n).TM(W),
      f = Math.max(0, a.x - q.x),
      U = Math.max(0, a.x - n.x),
      Z = Math.max(0, a.y - q.y),
      h = Math.max(0, a.y - n.y),
      u = a.r,
      i = a.$;
    for (var y = 0; y < i; y++) {
      var x = (Z + y) * q.r + f,
        X = (h + y) * n.r + U;
      for (var $ = 0; $ < u; $++, x++, X++) {
        var H = (G ? G[x] * c : 1) * k,
          C = x * 4,
          l = X * 4,
          v = j[C + 3] * c,
          K = m[l + 3] * c,
          S = v * H,
          o = K * (1 - H),
          V = S + o,
          P = V == 0 ? 0 : b / V,
          z = j[C] * c,
          E = j[C + 1] * c,
          A = j[C + 2] * c,
          N = m[l] * c,
          Q = m[l + 1] * c,
          e = m[l + 2] * c;
        m[l] = (S * z + o * N) * P;
        m[l + 1] = (S * E + o * Q) * P;
        m[l + 2] = (S * A + o * e) * P;
        m[l + 3] = b * V;
      }
    }
  };
  B.G.aqZ = function (j, q, m, n, G, W, k) {
    var T = 1 / 255,
      b = q.TM(n).TM(W),
      c = Math.max(0, b.x - q.x),
      a = Math.max(0, b.x - n.x),
      f = Math.max(0, b.y - q.y),
      U = Math.max(0, b.y - n.y),
      Z = b.r,
      h = b.$,
      u = new Uint32Array(j.buffer),
      i = new Uint32Array(m.buffer),
      x = B.G.zC;
    for (var y = 0; y < h; y++) {
      var X = (f + y) * q.r + c,
        $ = (U + y) * n.r + a;
      for (var H = 0; H < Z; H++, X++, $++) {
        var C = (G[X] * k) & 255;
        if (C == 0) continue;
        if (C == 255) {
          i[$] = u[X];
          continue;
        }
        var l = u[X],
          v = i[$],
          K = l >>> 24,
          S = v >>> 24,
          o = B.Io(C * K + (255 - C) * S),
          V = B.Io(K * C),
          P = B.Io(S * (255 - C)),
          z = l & 255,
          E = (l >>> 8) & 255,
          A = (l >>> 16) & 255,
          N = v & 255,
          Q = (v >>> 8) & 255,
          e = (v >>> 16) & 255,
          Y = x[(o << 8) | B.Io(V * z + N * P)],
          d = x[(o << 8) | B.Io(V * E + Q * P)],
          I = x[(o << 8) | B.Io(V * A + e * P)];
        i[$] = (o << 24) | (I << 16) | (d << 8) | Y;
      }
    }
  };
  B.G.aqF = function (j, q, m, n, G, W, k) {
    var T = B.oM(j),
      b = T == 8 ? 255 : T == 16 ? 65535 : 1,
      c = 1 / b,
      a = q.TM(n).TM(W),
      f = Math.max(0, a.x - q.x),
      U = Math.max(0, a.x - n.x),
      Z = Math.max(0, a.y - q.y),
      h = Math.max(0, a.y - n.y),
      u = a.r,
      i = a.$,
      x = k * c * 65535;
    for (var y = 0; y < i; y++) {
      var X = (Z + y) * q.r + f,
        $ = (h + y) * n.r + U;
      for (var H = 0; H < u; H++, X++, $++) {
        var C = G[X];
        if ((B.G.Dv(X) & 65535) < C * x) {
          var l = X * 4,
            v = $ * 4;
          m[v] = j[l];
          m[v + 1] = j[l + 1];
          m[v + 2] = j[l + 2];
          m[v + 3] = j[l + 3];
        }
      }
    }
  };
  B.G.aaJ = function (j, q, m, n, G, W, k) {
    var T = 1 / 255,
      b = q.TM(n).TM(W),
      c = Math.max(0, b.x - q.x),
      a = Math.max(0, b.x - n.x),
      f = Math.max(0, b.y - q.y),
      U = Math.max(0, b.y - n.y),
      Z = b.r,
      h = b.$,
      u = new Uint32Array(j.buffer),
      i = new Uint32Array(m.buffer),
      x = B.G.zC,
      X = Math.round(k * 257);
    for (var y = 0; y < h; y++) {
      var $ = (f + y) * q.r + c,
        H = (U + y) * n.r + a;
      for (var C = 0; C < Z; C++, $++, H++) {
        var l = G[$] * X;
        if ((B.G.Dv($) & 65535) < l) i[H] = u[$];
      }
    }
  };
  B.G.a69 = function (j, q, m, n, G, W, k) {
    var T = 1 / 255,
      b = q.TM(n).TM(W),
      c = Math.max(0, b.x - q.x),
      a = Math.max(0, b.x - n.x),
      f = Math.max(0, b.y - q.y),
      U = Math.max(0, b.y - n.y),
      Z = b.r,
      h = b.$,
      u = new Uint32Array(j.buffer),
      i = new Uint32Array(m.buffer),
      x = Math.floor(Math.random() * n.C()),
      X = B.G.ar0;
    for (var y = 0; y < h; y++) {
      var $ = (f + y) * q.r + c,
        H = (U + y) * n.r + a;
      for (var C = 0; C < Z; C++) {
        var l = G[$ + C] * k;
        if (l == 0) continue;
        if (l == 255) {
          i[H + C] = u[$ + C];
          continue;
        }
        var v = u[$ + C],
          K = i[H + C],
          S = v >>> 24,
          o = K >>> 24,
          V = S * l * (1 / 255),
          P = o * (255 - l) * (1 / 255),
          z = v & 255,
          E = (v >>> 8) & 255,
          A = (v >>> 16) & 255,
          N = K & 255,
          Q = (K >>> 8) & 255,
          e = (K >>> 16) & 255,
          Y = B.G.Dv(H + C + x),
          d = (Math.floor((V + P) * 256 + 0.5) + ((Y >>> 0) & 255)) >>> 8,
          I = d == 0 ? 0 : 256 / (V + P),
          O = z * V + N * P,
          s = E * V + Q * P,
          p = A * V + e * P,
          F = (Math.floor(O * I + 0.5) + ((Y >>> 8) & 255)) >>> 8,
          g = (Math.floor(s * I + 0.5) + ((Y >>> 16) & 255)) >>> 8,
          w = (Math.floor(p * I + 0.5) + ((Y >>> 24) & 255)) >>> 8;
        i[H + C] = (d << 24) | (w << 16) | (g << 8) | F;
      }
    }
  };
  B.G.ar0 = function (j) {
    return Math.floor(j + Math.random());
  };
  B.G.SH = function (j, q, m, n, G, W, k) {
    var T = 1 / B.TN(B.oM(j)),
      b = q.TM(n).TM(W),
      c = Math.max(0, b.x - q.x),
      a = Math.max(0, b.x - n.x),
      f = Math.max(0, b.y - q.y),
      U = Math.max(0, b.y - n.y),
      Z = b.r,
      h = b.$;
    for (var y = 0; y < h; y++) {
      var u = (f + y) * q.r + c,
        i = (U + y) * n.r + a;
      for (var x = 0; x < Z; x++, u++, i++) {
        var X = k * G[u] * T;
        if (X == 0) continue;
        if (X == 1) {
          m[i] = j[u];
          continue;
        }
        m[i] = j[u] * X + m[i] * (1 - X);
      }
    }
  };
  B.azX = (function () {
    function j(W) {
      var k = W * 0.85;
      return (
        Math.exp(-(k * k) * (1 / (2 * 0.4 * 0.4))) *
        (1 / (0.4 * Math.sqrt(2 * Math.PI)))
      );
    }
    function q(W, k) {
      var T = W < k ? 1 : j((W - k) / Math.pow(1.001 - k, 0.86));
      return T;
    }
    var m = [];
    function n(W) {
      if (m[W]) return m[W];
      var k = Math.pow(W, 0.55),
        T = new Float64Array(8e3),
        b = 0,
        c = 8e3;
      for (var y = 0; y < 8e3; y++) {
        var a = q(y * (1.55 / 4e3), k);
        if (a >= 1) b = y;
        else if (a <= 0 && c == 8e3) c = y;
        T[y] = a;
      }
      var f = [T, b, c];
      m[W] = f;
      return f;
    }
    function G(W, k, T) {
      if (W < 4) k = 1;
      var b = 1 + 0.55 * (1 - k),
        c = Math.round(T * W * b) + 2,
        a = new hk(0, 0, c, c),
        f = B.j(c * c),
        U = [f, a],
        Z = c / 2,
        h = b / (Z - 1);
      if (W == 2) h *= 2;
      if (W == 3) h *= 1.6;
      var u = Date.now(),
        i = n(k),
        x = Math.round(8e3 / Z),
        X = i[0],
        $ = i[1] - x,
        H = i[2] + x,
        C = Math.min(c, (c + 1) >>> 1),
        l = h * 0.4 * (4e3 / 1.55),
        v = B.j(8e3);
      for (var y = 0; y < 8e3; y++) {
        var K = y,
          S = y,
          o = ~~Math.max(0, K - l - l),
          V = ~~Math.max(0, K - l),
          P = ~~Math.min(7999, K + l),
          z = ~~Math.min(7999, K + l + l),
          E = ~~(0.5 + 255 * (1 / 5) * (X[S] + X[o] + X[V] + X[P] + X[z]));
        v[y] = E;
        if (E == 0) break;
      }
      for (var y = 0; y < C; y++) {
        var A = h * (y - Z + 0.5),
          N = A * A,
          Q = y * c,
          e = (c - 1 - y) * c;
        for (var Y = 0; Y < C; Y++) {
          var d = h * (Y - Z + 0.5),
            S = ~~(Math.sqrt(d * d + N) * (4e3 / 1.55));
          if (H < S) continue;
          else if (S < $) {
            var E = 255;
            while (Y < C) {
              var I = c - 1 - Y;
              f[Q + Y] = E;
              f[Q + I] = E;
              f[e + Y] = E;
              f[e + I] = E;
              Y++;
            }
            break;
          } else {
            var E = v[S],
              I = c - 1 - Y;
            f[Q + Y] = E;
            f[Q + I] = E;
            f[e + Y] = E;
            f[e + I] = E;
          }
        }
      }
      return U;
    }
    return { a2W: G };
  })();
  B.lb = {};
  B.lb.ay2 = function (j, q, m, n, G, W) {
    B.lb.q2(j, q, m, n, G, W, null, 0);
  };
  B.lb.aeW = function (j, q, m, n, G) {
    B.lb.q2(j, q, m, n, G, null, null, 0);
  };
  B.lb.ayW = function (j, q, m, n, G, W, k, T) {
    B.lb.q2(j, q, m, n, G, null, W, k * 0.5, T);
  };
  B.lb.q2 = function (j, q, m, n, G, W, k, T, b) {
    var c = 0,
      O = 0,
      s = 1e9,
      p = 0,
      F = 1e9,
      g = 0,
      w = 1e9,
      r = 0,
      eQ = 0,
      o = 0,
      t = 0;
    if (W) {
      c = G * 0.5;
      G = 3 + Math.round((G - 3) * 0.75);
    }
    if (k) {
      G = Math.round(G * 2.2);
    }
    if (b == null) b = Math.floor(Math.random() * 16777215);
    var a = new B.G.Oy((b * q) & 16777215),
      f = 1 / G,
      U = Math.floor(q * f) + 1,
      Z = Math.floor(m * f) + 1,
      h = [],
      u = new Uint8Array(U * Z * 4),
      i = k ? 0.5 : 1,
      x = W ? 64 : 0,
      X = G >>> 1;
    for (var $ = 0; $ < Z; $++) {
      var H = k ? 0.5 * ($ & 1) : 0;
      for (var C = 0; C < U; C++) {
        var l = (C + a.get() * i + H) * G,
          v = ($ + a.get() * i) * G;
        h.push(l, v);
        var K = Math.min(q - 1, Math.floor(l)),
          S = Math.min(m - 1, Math.floor(v));
        for (var o = 0; o < X; o += 2) {
          var V = Math.max(0, K - o),
            P = Math.min(q - 1, K + o),
            z = Math.max(0, S - o),
            E = Math.min(m - 1, S + o);
          for (var A = z; A <= E; A++)
            for (var N = V; N <= P; N++) {
              var y = (A * q + N) * 4;
              if (j[y + 3] > 64) {
                K = N;
                S = A;
                N = A = o = 1e9;
              }
            }
        }
        var Q = (S * q + K) * 4,
          e = ($ * U + C) * 4;
        for (var y = 0; y < 4; y++)
          u[e + y] = Math.max(
            0,
            Math.min(255, Math.floor(j[Q + y] + (a.get() - 0.5) * x))
          );
      }
    }
    var Y = W ? W : k ? k : [0, 0, 0],
      d = U * Z * 2,
      I = [-U - 1, -U, -U + 1, -1, 0, 1, U - 1, U, U + 1];
    for (var $ = 0; $ < m; $++) {
      o = 0;
      for (var C = 0; C < q; C++) {
        var V = C + 0.5,
          z = $ + 0.5,
          dq = Math.floor(z * f),
          D = Math.floor(V * f),
          ha = dq * U + D,
          aA = 0,
          ex = 0;
        if (o > 1 + T) {
          s = B.lb.aqY(h, O, V, z);
          r = Math.sqrt(s);
          o--;
          t++;
        } else {
          s = F = w = 1e9;
          for (var y = 0; y < I.length; y++) {
            var am = (ha + I[y]) * 2;
            if (am < 0 || am >= d) continue;
            var k4 = B.lb.aqY(h, am, V, z);
            if (k4 < w) {
              if (k4 < F) {
                if (k4 < s) {
                  g = p;
                  w = F;
                  p = O;
                  F = s;
                  O = am;
                  s = k4;
                } else {
                  g = p;
                  w = F;
                  p = am;
                  F = k4;
                }
              } else {
                g = am;
                w = k4;
              }
            }
          }
          r = Math.sqrt(s);
          eQ = Math.sqrt(F);
          o = eQ - (r + eQ) * 0.5;
        }
        if (k == null) {
          var ac = (r + eQ) * 0.5,
            eJ = W ? Math.max(0, ac - c) : 0;
          aA = Math.max(0, Math.min(1, 0.5 + ac - r - eJ));
          ex = Math.max(0, Math.min(1, 1 - (0.5 + ac - r) - eJ));
        } else {
          var h$ = Math.min(B.lb.ap0(h, O, p, V, z), B.lb.ap0(h, O, g, V, z));
          aA = Math.max(0, Math.min(1, h$ - T * 0.5));
          if (V < T || q - T < V || z < T || m - T < z) aA = 0;
          ex = 0;
        }
        var da = 1 - ex - aA,
          e = ($ * q + C) << 2,
          bb = O << 1,
          gb = p << 1;
        n[e + 0] = Math.floor(
          0.5 + aA * u[bb + 0] + ex * u[gb + 0] + da * Y[0]
        );
        n[e + 1] = Math.floor(
          0.5 + aA * u[bb + 1] + ex * u[gb + 1] + da * Y[1]
        );
        n[e + 2] = Math.floor(
          0.5 + aA * u[bb + 2] + ex * u[gb + 2] + da * Y[2]
        );
        n[e + 3] = j[e + 3];
      }
    }
  };
  B.lb.aqY = function (j, q, m, n) {
    var G = m - j[q],
      W = n - j[q + 1];
    return G * G + W * W;
  };
  B.lb.ap0 = function (j, q, m, n, G) {
    var W = j[q],
      k = j[q + 1],
      T = j[m],
      b = j[m + 1],
      c = (W + T) * 0.5,
      a = (k + b) * 0.5,
      f = c + (b - k),
      U = a - (T - W),
      Z = U - a,
      h = f - c;
    return Math.abs(Z * n - h * G + f * a - U * c) / Math.sqrt(h * h + Z * Z);
  };
  B.Zl = (function () {
    var j = B.j(0);
    function q(h) {
      if (j.length < h) j = B.j(h);
      return j;
    }
    function m(h, aF) {
      var u = Math.sqrt((12 * h * h) / aF + 1),
        i = Math.floor(u);
      if (i % 2 == 0) i--;
      var x = i + 2,
        X = (12 * h * h - aF * i * i - 4 * aF * i - 3 * aF) / (-4 * i - 4),
        $ = Math.round(X),
        H = [];
      for (var y = 0; y < aF; y++) H.push(y < $ ? i : x);
      return H;
    }
    function n(h, u, i, x) {
      var X = B.j(u * i, B.oM(h));
      for (var y = 0; y < 4; y++) {
        B.Ih(h, X, y);
        G(X, u, i, x);
        B.ln(X, h, y);
      }
    }
    function G(h, u, i, x) {
      var X = B.oM(h);
      for (var $ = 0; $ < x.length; $++) {
        if (X == 8) W(h, u, i, (x[$] - 1) >> 1);
        if (X == 16) k(h, u, i, (x[$] - 1) >> 1);
        if (X == 32) T(h, u, i, (x[$] - 1) >> 1);
      }
    }
    function W(h, u, i, x) {
      var X = q(u * i);
      b(h, X, u, i, x);
      f(X, h, u, i, x);
    }
    function k(h, u, i, x) {
      var X = new Uint16Array(q(u * i * 2).buffer);
      c(h, X, u, i, x);
      U(X, h, u, i, x);
    }
    function T(h, u, i, x) {
      var X = new Float32Array(q(u * i * 4).buffer);
      a(h, X, u, i, x);
      Z(X, h, u, i, x);
    }
    function b(h, u, i, x, X) {
      var $ = 1 / (X + X + 1),
        H = i - X - X - 1;
      for (var y = 0; y < x; y++) {
        var C = y * i,
          l = C,
          v = C + X,
          K = h[C],
          S = h[C + i - 1],
          o = (X + 1) * K;
        for (var V = 0; V < X; V++) o += h[C + V];
        for (var V = 0; V <= X; V++) {
          o += h[v + V] - K;
          u[C + V] = o * $;
        }
        v += X + 1;
        C += X + 1;
        for (var V = 0; V < H; V++) {
          o += h[v + V] - h[l + V];
          u[C + V] = o * $;
        }
        v += H;
        l += H;
        C += H;
        for (var V = i - X; V < i; V++) {
          o += S - h[l++];
          u[C++] = o * $;
        }
      }
    }
    function c(h, u, i, x, X) {
      var $ = 1 / (X + X + 1),
        H = i - X - X - 1;
      for (var y = 0; y < x; y++) {
        var C = y * i,
          l = C,
          v = C + X,
          K = h[C],
          S = h[C + i - 1],
          o = (X + 1) * K;
        for (var V = 0; V < X; V++) o += h[C + V];
        for (var V = 0; V <= X; V++) {
          o += h[v + V] - K;
          u[C + V] = o * $;
        }
        v += X + 1;
        C += X + 1;
        for (var V = 0; V < H; V++) {
          o += h[v + V] - h[l + V];
          u[C + V] = o * $;
        }
        v += H;
        l += H;
        C += H;
        for (var V = i - X; V < i; V++) {
          o += S - h[l++];
          u[C++] = o * $;
        }
      }
    }
    function a(h, u, i, x, X) {
      var $ = 1 / (X + X + 1),
        H = i - X - X - 1;
      for (var y = 0; y < x; y++) {
        var C = y * i,
          l = C,
          v = C + X,
          K = h[C],
          S = h[C + i - 1],
          o = (X + 1) * K;
        for (var V = 0; V < X; V++) o += h[C + V];
        for (var V = 0; V <= X; V++) {
          o += h[v + V] - K;
          u[C + V] = o * $;
        }
        v += X + 1;
        C += X + 1;
        for (var V = 0; V < H; V++) {
          o += h[v + V] - h[l + V];
          u[C + V] = o * $;
        }
        v += H;
        l += H;
        C += H;
        for (var V = i - X; V < i; V++) {
          o += S - h[l++];
          u[C++] = o * $;
        }
      }
    }
    function f(h, u, i, x, X) {
      var $ = 1 / (X + X + 1),
        H = x - X - X - 1;
      for (var y = 0; y < i; y++) {
        var C = y,
          l = C,
          v = C + X * i,
          K = h[C],
          S = h[C + i * (x - 1)],
          o = (X + 1) * K;
        for (var V = 0; V < X; V++) o += h[C + V * i];
        for (var V = 0; V <= X; V++) {
          o += h[v] - K;
          u[C] = o * $;
          v += i;
          C += i;
        }
        for (var V = 0; V < H; V++) {
          var P = V * i;
          o += h[v + P] - h[l + P];
          u[C + P] = o * $;
        }
        l += H * i;
        v += H * i;
        C += H * i;
        for (var V = x - X; V < x; V++) {
          o += S - h[l];
          u[C] = o * $;
          l += i;
          C += i;
        }
      }
    }
    function U(h, u, i, x, X) {
      var $ = 1 / (X + X + 1),
        H = x - X - X - 1;
      for (var y = 0; y < i; y++) {
        var C = y,
          l = C,
          v = C + X * i,
          K = h[C],
          S = h[C + i * (x - 1)],
          o = (X + 1) * K;
        for (var V = 0; V < X; V++) o += h[C + V * i];
        for (var V = 0; V <= X; V++) {
          o += h[v] - K;
          u[C] = o * $;
          v += i;
          C += i;
        }
        for (var V = 0; V < H; V++) {
          var P = V * i;
          o += h[v + P] - h[l + P];
          u[C + P] = o * $;
        }
        l += H * i;
        v += H * i;
        C += H * i;
        for (var V = x - X; V < x; V++) {
          o += S - h[l];
          u[C] = o * $;
          l += i;
          C += i;
        }
      }
    }
    function Z(h, u, i, x, X) {
      var $ = 1 / (X + X + 1),
        H = x - X - X - 1;
      for (var y = 0; y < i; y++) {
        var C = y,
          l = C,
          v = C + X * i,
          K = h[C],
          S = h[C + i * (x - 1)],
          o = (X + 1) * K;
        for (var V = 0; V < X; V++) o += h[C + V * i];
        for (var V = 0; V <= X; V++) {
          o += h[v] - K;
          u[C] = o * $;
          v += i;
          C += i;
        }
        for (var V = 0; V < H; V++) {
          var P = V * i;
          o += h[v + P] - h[l + P];
          u[C + P] = o * $;
        }
        l += H * i;
        v += H * i;
        C += H * i;
        for (var V = x - X; V < x; V++) {
          o += S - h[l];
          u[C] = o * $;
          l += i;
          C += i;
        }
      }
    }
    return {
      oY: function (h, u, i, x) {
        G(h, u.r, u.$, m(i, x ? x : 3));
      },
      a1e: function (h, u, i) {
        n(h, u.r, u.$, m(i, 3));
      },
      kN: function (h, u, i) {
        G(h, u.r, u.$, [Math.round(i) * 2 + 1]);
      },
      a5w: function (h, u, i) {
        n(h, u.r, u.$, [Math.round(i) * 2 + 1]);
      },
      asR: function (h, u, i) {
        var x = u.r,
          X = u.$;
        i = Math.round(i);
        var $ = q(x * X),
          H = B.j(x * X);
        for (var y = 0; y < 4; y++) {
          B.Ih(h, H, y);
          b(H, $, x, X, i);
          B.ln($, h, y);
        }
      },
      a2U: m,
    };
  })();
  B.iA = (function () {
    var j = [];
    function q(Y, d, I, O) {
      var s = O.length,
        p = 0,
        F = 0,
        g = 0;
      for (var y = 0; y < s; y++) {
        var w = O[y];
        p = Math.max(p, w[2]);
        F = Math.max(F, w[0], d - w[0]);
        g = Math.max(g, w[1], I - w[1]);
      }
      if (s == 1) {
        Y.fill(255);
        return;
      }
      if (s == 2) {
        var r = O[0],
          eQ = O[1];
        if (r[2] < eQ[2]) {
          var t = r;
          r = eQ;
          eQ = t;
        }
        var dq = r[0],
          D = r[1],
          ha = eQ[0] - dq,
          am = -(eQ[1] - D),
          k4 = Math.sqrt(am * am + ha * ha),
          aA = 1 / k4;
        am /= k4;
        ha /= k4;
        var ex = Math.round((255 * Math.min(r[2], eQ[2])) / p),
          ac = [];
        for (var y = 0; y < 1100; y++) {
          var eJ = Math.pow(y * 0.001, 0.82);
          ac[y] = ~~(0.5 + eJ * ex + (1 - eJ) * 255);
        }
        for (var h$ = 0; h$ < I; h$++)
          for (var da = 0; da < d; da++) {
            var t = (da - dq) * am + (h$ - D) * ha,
              bb = dq + t * am - da,
              gb = D + t * ha - h$,
              fM = Math.sqrt(bb * bb + gb * gb),
              kS = 0;
            if (bb * ha - gb * am > 0) kS = 255;
            else if (fM > k4) kS = ex;
            else kS = ac[~~(0.5 + 1e3 * fM * aA)];
            Y[h$ * d + da] = kS;
          }
        return;
      }
      var cY = Math.round((F * F + g * g) * 0.021),
        cS = j.length;
      if (cS < cY)
        for (var y = cS; y < cY; y++)
          j[y] = 1 / (1e-6 + Math.pow(0.02 * y, 1.57));
      var k3 = 260 / p;
      for (var h$ = 0; h$ < I; h$++)
        for (var da = 0; da < d; da++) {
          var di = 0,
            a7 = 0;
          for (var y = 0; y < s; y++) {
            var b0 = O[y],
              am = da - b0[0],
              ha = h$ - b0[1],
              fM = j[~~(0.02 * (am * am + ha * ha))];
            a7 += fM * b0[2];
            di += fM;
          }
          Y[h$ * d + da] = Math.min(~~((k3 * a7) / di), 255);
        }
    }
    var m = [];
    for (var y = 0; y < 1100; y++)
      m[y] = Math.pow(0.5 - 0.5 * Math.cos((y / 1e3) * Math.PI), 2);
    function n(Y, d, I, O) {
      var s = G(O),
        p = 1 - O[10];
      for (var F = 0; F < I; F++)
        for (var g = 0; g < d; g++) {
          var w = s.Sd * g + s.ra * F + s.Tt,
            r = s.X * g + s.Jy * F + s.BL,
            eQ = Math.sqrt(w * w + r * r),
            t = eQ <= p ? 0 : eQ > 1 ? 1 : (eQ - p) / (1 - p);
          Y[F * d + g] = ~~(0.5 + Y[F * d + g] * m[~~(t * 1e3)]);
        }
    }
    function G(Y) {
      var d = Y[0],
        I = Y[1],
        O = Y[2] - d,
        s = Y[3] - I,
        p = Y[6] - d,
        F = Y[7] - I,
        g = Math.sqrt(O * O + s * s),
        w = Math.sqrt(p * p + F * F),
        r = new k$();
      r.scale(g, w);
      r.rotate(Math.atan2(-s, O));
      r.translate(d, I);
      r.BR();
      r.translate(-0.5, -0.5);
      r.scale(2, 2);
      return r;
    }
    var W = [];
    for (var y = 0; y < 1100; y++)
      W[y] = Math.pow(0.5 - 0.5 * Math.cos((y / 1e3) * Math.PI), 0.8);
    function k(Y, y, d) {
      var I = Y[y] - Y[d],
        O = Y[y + 1] - Y[d + 1];
      return Math.sqrt(I * I + O * O);
    }
    function T(Y, d, I, O) {
      var s = O[0],
        p = O[1],
        F = O[2] - s,
        g = -(O[3] - p),
        w = Math.sqrt(g * g + F * F);
      g /= w;
      F /= w;
      var r = k(O, 0, 2),
        eQ = k(O, 0, 4),
        t = k(O, 0, 6),
        dq = k(O, 0, 8);
      for (var D = 0; D < I; D++)
        for (var ha = 0; ha < d; ha++) {
          var am = (ha - s) * g + (D - p) * F,
            k4 = s + am * g - ha,
            aA = p + am * F - D,
            ex = Math.sqrt(k4 * k4 + aA * aA),
            ac = 0;
          if (k4 * F - aA * g < 0)
            ac = ex < t ? 0 : ex > r ? 1 : W[~~((1e3 * (ex - t)) / (r - t))];
          else
            ac =
              ex < dq ? 0 : ex > eQ ? 1 : W[~~((1e3 * (ex - dq)) / (eQ - dq))];
          Y[D * d + ha] = ~~(0.5 + Y[D * d + ha] * ac);
        }
    }
    function b(Y, d, I) {
      var O = Y[0],
        s = Y[1],
        p = s[0] + s[1] + s[2] + s[3],
        r = !1;
      if (p == 0) return [B.j(d * I), p];
      var F = O[0],
        g = O[1],
        w = O[3];
      if (r) console.log(F, g, w);
      var eQ = Date.now(),
        t = B.j(d * I);
      t.fill(255);
      if (s[0] != 0) q(t, d, I, F);
      if (r) console.log(Date.now() - eQ, "field done");
      eQ = Date.now();
      var dq = B.j(d * I);
      dq.fill(255);
      if (s[1] != 0) for (var y = 0; y < g.length; y++) n(dq, d, I, g[y]);
      if (r) console.log(Date.now() - eQ, "iris done");
      eQ = Date.now();
      var D = B.j(d * I);
      D.fill(255);
      if (s[3] != 0) for (var y = 0; y < w.length; y++) T(D, d, I, w[y]);
      if (r) console.log(Date.now() - eQ, "tilt done");
      eQ = Date.now();
      var ha = s[0] / p,
        am = s[1] / p,
        k4 = s[3] / p,
        aA = t,
        ex = d * I;
      for (var y = 0; y < ex; y++) {
        aA[y] = ha * t[y] + am * dq[y] + k4 * D[y];
      }
      return [aA, p];
    }
    function c(Y, d, I, O, s) {
      var p = Date.now(),
        F = new Uint32Array(5),
        g = B.aHL(Y, d, I),
        w = s / 255;
      for (var r = 0; r < I; r++)
        for (var eQ = 0; eQ < d; eQ++) {
          var y = r * d + eQ,
            t = y << 2,
            dq = O[y] * w,
            D = ~~(dq * 0.948);
          if (D == 0) {
            continue;
          }
          F[0] = 0;
          F[1] = 0;
          F[2] = 0;
          F[3] = 0;
          F[4] = 0;
          var ha = ~~(dq * 0.612);
          if (1 <= eQ - D && eQ + D + 1 <= d && 1 <= r - D && r + D + 1 <= I) {
            var am = eQ - D,
              k4 = eQ - ha,
              aA = eQ + ha + 1,
              ex = eQ + D + 1,
              ac = r - D,
              eJ = r - ha,
              h$ = r + ha + 1,
              da = r + D + 1;
            a(g, d, k4, aA, ac, eJ, F);
            a(g, d, am, ex, eJ, h$, F);
            a(g, d, k4, aA, h$, da, F);
          } else {
            var am = Math.max(1, eQ - D),
              k4 = Math.max(1, eQ - ha),
              aA = Math.min(d, eQ + ha + 1),
              ex = Math.min(d, eQ + D + 1),
              ac = Math.max(1, r - D),
              eJ = Math.max(1, r - ha),
              h$ = Math.min(I, r + ha + 1),
              da = Math.min(I, r + D + 1);
            a(g, d, k4, aA, ac, eJ, F);
            a(g, d, am, ex, eJ, h$, F);
            a(g, d, k4, aA, h$, da, F);
          }
          if (F[4] != 0) {
            var bb = 1 / F[4];
            Y[t] = Math.min(255, ~~(F[0] * bb));
            Y[t + 1] = Math.min(255, ~~(F[1] * bb));
            Y[t + 2] = Math.min(255, ~~(F[2] * bb));
            Y[t + 3] = Math.min(255, ~~(F[3] * bb));
          }
        }
    }
    function a(Y, d, I, O, s, p, F) {
      var g = (O - I) * (p - s);
      if (0 < g) {
        B.ax_(Y, I - 1, O - 1, (s - 1) * d, (p - 1) * d, F);
        F[4] += g;
      }
    }
    var f = "GeneralBlur IrisBlur  LensTilt PathBlur WheelSpinBlur".split(" ");
    function U(Y) {
      var d = [!1, !1, !1, !1, !1, !1];
      for (var y = 0; y < 6; y++) {
        var I = "blurb" + f[y] + "EffectApplied";
        if (Y[I] && Y[I].v) d[y] = !0;
      }
      return d;
    }
    function Z(Y, d) {
      for (var y = 0; y < 6; y++) {
        var I = "blurb" + f[y] + "EffectApplied";
        Y[I] = { t: "bool", v: d[y] };
      }
    }
    var h = [];
    for (var u = 0; u < 6; u++) {
      var i,
        x = "blurbWidgetLocationX",
        X = "blurbWidgetLocationY";
      if (u == 0) i = [x, X, "blurbGeneralBlurAmount"];
      if (u == 1 || u == 5) {
        var $ = "blurb" + (u == 1 ? "IrisBlur" : "WheelSpin"),
          H = $ + "Corner",
          C = $ + "Feather";
        i = [
          H + "0x",
          H + "0y",
          H + "1x",
          H + "1y",
          H + "2x",
          H + "2y",
          H + "3x",
          H + "3y",
          x,
          X,
          C + "0",
          C + "1",
          C + "2",
          C + "3",
          u == 1 ? $ + "Amount" : $ + "BlurAmount",
        ];
      }
      if (u == 3) {
        var $ = "blurbTiltShift",
          l = $ + "InnerPoint",
          K = $ + "OuterPoint";
        i = [
          $ + "CenterX",
          $ + "CenterY",
          K + "1X",
          K + "1Y",
          K + "2X",
          K + "2Y",
          l + "1X",
          l + "1Y",
          l + "2X",
          l + "2Y",
          $ + "BlurAmount",
        ];
      }
      h.push(i);
    }
    function S(Y, d) {
      function I(aA, F) {
        return {
          t: "Objc",
          v: {
            classID: "Pnt",
            Hrzn: { t: "doub", v: aA },
            Vrtc: { t: "doub", v: F },
          },
        };
      }
      var O = [];
      for (var u = 0; u < 6; u++) {
        var s = Y[u],
          i = h[u];
        for (var y = 0; y < s.length; y++) {
          var p = s[y],
            F = {
              classID: u == 4 ? "blurbPathWidget" : "blurbWidget",
              blurbWidgetEffectEnabled: { t: "bool", v: !1 },
              blurbWidgetSelected: { t: "bool", v: !1 },
              blurbWidgetType: { t: "long", v: u },
            };
          O.push({ t: "Objc", v: F });
          if (u == 4) {
            d.blurbPathBlurSpeed = {
              t: "UntF",
              v: { type: "#Prc", val: s[0][4] * 100 },
            };
            var g = (F.blurbPathPointList = {
              t: "VlLs",
              v: [I(p[0], p[1]), I(p[5], p[6])],
            });
            for (var w = 0; w < 2; w++) {
              var r = { classID: "blurbBezierKernel" };
              F["blurb" + (w == 0 ? "Start" : "End") + "BezierKernel"] = {
                t: "Objc",
                v: r,
              };
              var eQ = p[w * 5],
                t = p[w * 5 + 1],
                dq = p[w * 5 + 2],
                D = p[w * 5 + 3];
              r.blurbBezierKernelUIControlPoint = I((eQ + dq) / 2, (t + D) / 2);
              var ha = dq - eQ,
                am = D - t,
                k4 = Math.atan2(-(p[6] - p[1]), p[5] - p[0]);
              r.blurbBezierKernelTangentOffsetAngle = {
                t: "doub",
                v: ((Math.atan2(-am, ha) - k4 + Math.PI) * 180) / Math.PI,
              };
              r.blurbBezierKernelLocation = I(eQ, t);
              r.blurbBezierKernelOuterPoint = I(dq, D);
              if (ha == 0 && am == 0)
                r.blurbBezierKernelIsNull = { t: "bool", v: !0 };
            }
          } else
            for (var w = 0; w < i.length; w++) F[i[w]] = { t: "doub", v: p[w] };
        }
      }
      delete d.blurbWidgetList;
      d.blurbWidgetList2 = { t: "VlLs", v: O };
    }
    function o(Y) {
      var d = Y.blurbWidgetList;
      if (d == null || d.v.length == 0) d = Y.blurbWidgetList2;
      d = d.v;
      var I = [[], [], [], [], [], []],
        O = [0, 0, 0, 0, 0, 0];
      for (var y = 0; y < d.length; y++) {
        var s = d[y].v,
          u = s.blurbWidgetType.v,
          j = [];
        I[u].push(j);
        if (u < 4 || u == 5) {
          var i = h[u];
          for (var p = 0; p < i.length; p++) {
            j[p] = s[i[p]].v;
          }
          if (u == 5) {
            var F = j[0] - j[4],
              g = j[1] - j[5],
              w = Math.sqrt(F * F + g * g),
              r = j[j.length - 1] * w * 0.005;
            O[u] = Math.max(O[u], r);
          } else O[u] = Math.max(O[u], j[j.length - 1]);
        }
        if (u == 4) {
          var eQ = Y.blurbPathBlurSpeed.v.val / 100;
          for (var p = 0; p < 2; p++) {
            var t = s["blurb" + (p == 0 ? "Start" : "End") + "BezierKernel"].v,
              dq = t.blurbBezierKernelIsNull;
            for (var D = 0; D < 2; D++) {
              var ha =
                t["blurbBezierKernel" + (D == 0 ? "Location" : "OuterPoint")].v;
              j.push(ha.Hrzn.v, ha.Vrtc.v);
            }
            var am = j.length - 4,
              k4 = j[am],
              aA = j[am + 1],
              F = j[am + 2] - k4,
              g = j[am + 3] - aA,
              w = Math.sqrt(F * F + g * g);
            if (dq && dq.v) w = 0;
            j.push(eQ);
            O[u] = Math.max(O[u], w * eQ);
          }
        }
      }
      return [I, O];
    }
    function V(Y, d, I) {
      for (var O = 0; O < Y.length; O++) d[I + O] = Y[O];
    }
    function P(Y, d) {
      for (var u = 0; u < 5; u++) {
        var I = Y[0][u];
        for (var y = 0; y < I.length; y++) {
          var O =
            u == 0
              ? I[y].slice(0, 2)
              : u == 4
              ? I[y].slice(0, 4).concat(I[y].slice(5, 9))
              : I[y].slice(0, 10);
          B.b.u(O, d, O);
          if (u == 4) {
            V(O.slice(0, 4), I[y], 0);
            V(O.slice(4, 8), I[y], 5);
          } else V(O, I[y], 0);
        }
      }
    }
    function z(Y, d, I) {
      var O = d.H.r,
        s = d.H.$,
        p = O * s,
        F = o(Y),
        g = U(Y);
      for (var y = 0; y < 6; y++) if (!g[y]) F[1][y] = 0;
      var w = new k$();
      w.translate(-d.H.x, -d.H.y);
      P(F, w);
      var r = Date.now(),
        eQ = b(F, O, s),
        t = eQ[0],
        dq = eQ[1];
      I.buffer.set(d.buffer);
      var D = B.kP(I.buffer);
      if (D) B.nc(I.buffer);
      if (dq != 0) c(I.buffer, O, s, t, dq);
      var ha = Math.max(F[1][4], F[1][5]);
      if (ha != 0 && fS.tx) {
        var r = Date.now(),
          am = B.j(O * s * 4);
        for (var y = 0; y < am.length; y += 4) {
          am[y] = 127;
          am[y + 1] = 127;
        }
        if (F[1][4] != 0) A(am, F, O, s, ha);
        if (F[1][5] != 0) E(am, F, O, s, ha);
        var k4 = ha * 0.25,
          aA = new Float32Array([1 / O, 1 / s]),
          ex = fS.vK(0, O, s);
        ex.set(I.buffer);
        var ac = fS.vK(1, O, s);
        ac.set(am);
        fS.VF(ex, d.H);
        ex.w3(d.H);
        fS.filter.dH(
          { e: fS.filter.aBD, ZG: ac.vD, Di: aA, Gv: k4, Rj: 2 },
          ex.sR
        );
        ex.get(I.buffer);
      }
      if (D) B.B6(I.buffer);
    }
    function E(Y, d, I, O, s) {
      var p = d[0][5];
      if (p.length == 0) return;
      var F = Date.now();
      for (var y = 0; y < p.length; y++) {
        var g = p[y],
          w = G(g),
          r = w.P();
        r.BR();
        var eQ = 1 - g[10],
          t = (g[14] * 2.15) / s;
        for (var dq = 0; dq < O; dq++)
          for (var D = 0; D < I; D++) {
            var ha = w.Sd * D + w.ra * dq + w.Tt,
              am = w.X * D + w.Jy * dq + w.BL,
              k4 = ha * ha + am * am;
            if (k4 < 1) {
              var aA = ha - am * t,
                ex = am + ha * t,
                ac = r.uL(new ea(aA, ex)),
                eJ = 4 * (dq * I + D),
                h$ = Math.sqrt(k4),
                da = h$ < eQ ? 0 : (h$ - eQ) / (1 - eQ);
              Y[eJ] = Math.max(
                0,
                Math.min(255, da * Y[eJ] + (1 - da) * (127 + ac.x - D))
              );
              Y[eJ + 1] = Math.max(
                0,
                Math.min(255, da * Y[eJ + 1] + (1 - da) * (127 + ac.y - dq))
              );
            }
          }
      }
      console.log(Date.now() - F);
    }
    function A(Y, d, I, O, s) {
      var p = d[0][4];
      if (p.length == 0) return;
      var F = p[0];
      for (var y = 1; y < p.length; y++) F = F.concat(p[y]);
      var g = [];
      for (var y = 0; y < F.length; y += 5) {
        var w = F[y],
          r = F[y + 1],
          eQ = F[y + 2] - w,
          t = F[y + 3] - F[y + 1],
          dq = Math.sqrt(eQ * eQ + t * t);
        if (dq != 0) {
          eQ /= dq;
          t /= dq;
        }
        g.push(w, r, eQ, t, dq, F[y + 4]);
      }
      F = g;
      var D = Math.floor(F.length / 6),
        ha = 127 / s;
      for (var r = 0; r < O; r++)
        for (var w = 0; w < I; w++) {
          var am = 0,
            k4 = 0,
            aA = 0,
            ex = 0;
          for (var y = 0; y < D; y++) {
            var ac = y * 6,
              eJ = F[ac],
              h$ = F[ac + 1],
              eQ = w - eJ,
              t = r - h$,
              dq = 1 / Math.pow(eQ * eQ + t * t, 0.5);
            k4 += dq * F[ac + 2];
            aA += dq * F[ac + 3];
            ex += dq * F[ac + 4] * F[ac + 5];
            am += dq;
          }
          var da = Math.sqrt(k4 * k4 + aA * aA),
            bb = (ha * ex) / (da * am);
          Y[4 * (r * I + w)] = Math.min(k4 * bb + 127, 255);
          Y[4 * (r * I + w) + 1] = Math.min(aA * bb + 127, 255);
        }
    }
    function N(Y) {
      var d = Y.blurbOpenPanel;
      if (d) return d.v;
      else {
        var I = Y.blurbWidgetList2.v;
        for (var y = 0; y < I.length; y++) {
          var O = I[y].v.blurbWidgetSelected;
          if (O && O.v) return I[y].v.blurbWidgetType.v;
        }
      }
      return 0;
    }
    function Q(Y, d) {
      if (d < 4) Y.blurbOpenPanel = { t: "long", v: d };
      else {
        delete Y.blurbOpenPanel;
        var I = Y.blurbWidgetList2.v;
        for (var y = 0; y < I.length; y++) {
          I[y].v.blurbWidgetSelected.v = I[y].v.blurbWidgetType.v == d;
        }
      }
    }
    function e(Y, u, d, I) {
      var O = o(Y)[0],
        s = O[u],
        p;
      if (u == 0) {
        p = s.length;
        s.push([d, I, 20]);
      }
      if (u == 1 || u == 5) {
        p = s.length * 6 + 1;
        var F = 100;
        s.push([
          d - F,
          I - F,
          d + F,
          I - F,
          d + F,
          I + F,
          d - F,
          I + F,
          d,
          I,
          0.8,
          0.8,
          0.8,
          0.8,
          20,
        ]);
      }
      if (u == 3) {
        p = s.length * 5;
        s.push([d, I, d, I - 50, d, I + 50, d, I - 20, d, I + 20, 20]);
      }
      if (u == 4) {
        p = s.length * 4 + 2;
        s.push([d - 100, I, d - 50, I, 1, d, I, d + 50, I, 1]);
      }
      S(O, Y);
      Q(Y, u);
      return p;
    }
    return {
      apply: z,
      Qx: o,
      k_: S,
      a0B: e,
      ath: U,
      ayr: Z,
      ahS: G,
      u: P,
      adi: N,
      Ok: Q,
    };
  })();
  B.Ol = {};
  B.Ol.j = function (j, q, m, n) {
    var G = [];
    for (var W = 0; W < 4; W++)
      for (var k = 0; k < 4; k++) G.push(j + (m * k) / 3, q + (n * W) / 3);
    return G;
  };
  B.Ol.a82 = function (j, q) {
    var m = j.slice(0);
    for (var y = 0; y < 4; y++)
      for (var n = 0; n < 4; n++) {
        var G = 2 * (y * 4 + n),
          W = 2 * (n * 4 + (3 - y));
        if (q) {
          var k = G;
          G = W;
          W = k;
        }
        m[W] = j[G];
        m[W + 1] = j[G + 1];
      }
    return m;
  };
  B.Ol.drawImage = function (j, q, m, n, G, W, k) {
    var T = !1,
      b = Date.now(),
      c = 2;
    if (!n.Jn(m)) throw "e";
    var a = n.P();
    a.offset(c, c);
    var f = a.P();
    f.Lh(c, c);
    var U = B.oM(q),
      Z = B.j(f.C() * 4, U),
      h = m.P();
    m.offset(c, c);
    B.M4(q, m, Z, f);
    if (T) console.log(Date.now() - b, "copy rect");
    b = Date.now();
    B.nc(Z);
    if (T) console.log(Date.now() - b, "multiply alpha");
    b = Date.now();
    var u = f.r - 2 * c,
      i = f.$ - 2 * c,
      x = Math.max(u, i),
      X = Math.round((50 * u) / x),
      $ = Math.round((Math.sqrt(3) * 0.5 * 50 * i) / x),
      H = X - 0.5,
      C = u + 2 * c,
      l = i + 2 * c,
      v = [],
      K = [],
      S = [];
    for (var o = 0; o < $ + 1; o++) {
      var V = (o & 1) == 0;
      for (var P = 0; P < X + 1; P++) {
        var z = (P - (V ? 0.5 : 0)) / H,
          E = o / $;
        if (P == 0) z = 0;
        if (P == X) z = 1;
        v.push(C * z, l * E);
        if (P < X && o < $) {
          var A = o * (X + 1) + P,
            N = A + 1,
            Q = A + X + 1,
            e = Q + 1;
          if (V) K.push(A, N, Q, Q, N, e);
          else K.push(A, N, e, A, e, Q);
        }
        var Y = B.Ol.an2(j, z, E);
        S.push(-Y);
      }
    }
    var d = v.slice(0);
    B.Ol.u(j, d, a);
    B.b.u(d, new k$(1, 0, 0, 1, -W.x, -W.y), d);
    if (T) console.log(Date.now() - b, "mesh built");
    b = Date.now();
    var I = W.r,
      O = W.$;
    B.Hz.pe(Z, C, l, G, I, O, v, d, S, K, k);
    if (T) console.log(Date.now() - b, "rendered");
    b = Date.now();
    B.B6(G);
    if (T) console.log(Date.now() - b, "divided");
    b = Date.now();
  };
  B.Ol.a4 = new Array(10);
  B.Ol.fH = function (j, q) {
    var m = 200,
      n = 0,
      G = 0,
      W = 1e9,
      k = B.Ol.a4;
    for (var T = 0; T < m + 1; T++)
      for (var b = 0; b < m + 1; b++) {
        var c = b / m,
          a = T / m;
        B.Ol.ata(j, c, a, k);
        var f = k[8] - q.x,
          U = k[9] - q.y,
          Z = f * f + U * U;
        if (Z < W) {
          W = Z;
          n = c;
          G = a;
        }
      }
    return [n, G];
  };
  B.Ol.u = function (j, q, m) {
    var n = m.x,
      G = m.y,
      W = 1 / m.r,
      k = 1 / m.$,
      T = B.Ol.a4;
    for (var b = 0; b < q.length; b += 2) {
      var c = (q[b] - n) * W,
        a = (q[b + 1] - G) * k;
      B.Ol.ata(j, c, a, T);
      q[b] = T[8];
      q[b + 1] = T[9];
    }
  };
  B.Ol.an2 = function (j, q, m) {
    var n,
      G,
      W,
      k,
      T = B.Ol.a4;
    B.Ol.aay(j, q, m, T);
    n = T[8];
    G = T[9];
    B.Ol.aBK(j, q, m, T);
    W = T[8];
    k = T[9];
    return n * k - G * W;
  };
  B.Ol.kf = function (j, q, m) {
    var n = 0,
      G = 0,
      W = j[2][0],
      k = j[2][1];
    while (n + 2 < W.length && W[n + 1] < q) n++;
    q = (q - W[n]) / (W[n + 1] - W[n]);
    while (G + 2 < k.length && k[G + 1] < m) G++;
    m = (m - k[G]) / (k[G + 1] - k[G]);
    return [n * 3, G * 3, q, m];
  };
  B.Ol.ata = function (j, q, m, n) {
    var G = B.Ol.kf(j, q, m);
    B.Ol.nq(n, 0, G[3]);
    B.Ol.nq(n, 4, G[2]);
    B.Ol.P9(j[3], G[0], G[1], j[0], n);
  };
  B.Ol.aay = function (j, q, m, n) {
    var G = B.Ol.kf(j, q, m);
    B.Ol.nq(n, 0, G[3]);
    B.Ol.a9a(n, 4, G[2]);
    B.Ol.P9(j[3], G[0], G[1], j[0], n);
  };
  B.Ol.aBK = function (j, q, m, n) {
    var G = B.Ol.kf(j, q, m);
    B.Ol.a9a(n, 0, G[3]);
    B.Ol.nq(n, 4, G[2]);
    B.Ol.P9(j[3], G[0], G[1], j[0], n);
  };
  B.Ol.a9a = function (j, y, q) {
    var m = 1 - q;
    j[y] = -3 * (m * m);
    j[y + 1] = 3 * (m * m) - 6 * (q * m);
    j[y + 2] = 6 * (q * m) - 3 * (q * q);
    j[y + 3] = 3 * (q * q);
  };
  B.Ol.nq = function (j, y, q) {
    var m = 1 - q;
    j[y] = m * (m * m);
    j[y + 1] = 3 * q * (m * m);
    j[y + 2] = 3 * (q * q) * m;
    j[y + 3] = q * q * q;
  };
  B.Ol.a4x = function (j, q, m, n, G) {
    var W = B.Ol.kf(j, q, m),
      k = W[0],
      T = W[1],
      b = W[2],
      c = W[3],
      a = j[0],
      f = Math.floor(b * 3),
      U = Math.floor(c * 3),
      Z = B.Ol.a4,
      h = 16,
      v = 0;
    B.Ol.nq(Z, 0, c);
    B.Ol.nq(Z, 4, b);
    var u = [],
      i = [],
      x = [];
    for (var X = 0; X < 4; X++) {
      for (var $ = 0; $ < 4; $++) {
        var y = X * 4 + $,
          H = Z[X] * Z[4 + $];
        u.push(H);
        i.push((T + X) * a + k + $);
        if ((X == U || X == U + 1) && ($ == f || $ == f + 1)) {
          var C = b * 3 - f;
          if ($ == f) C = 1 - C;
          var l = c * 3 - U;
          if (X == U) l = 1 - l;
          x[y] = (C * l) / H;
        } else x[y] = 0;
      }
    }
    for (var y = 0; y < h; y++) v += u[y] * x[y];
    for (var y = 0; y < h; y++) x[y] /= v;
    for (var y = 0; y < h; y++) {
      var H = u[y],
        K = i[y];
      j[3][K * 2] += x[y] * n;
      j[3][K * 2 + 1] += x[y] * G;
    }
  };
  B.Ol.up = function (j) {
    var q = j[0],
      m = j[1],
      n = j[2],
      G = j[3],
      W = G.slice(0);
    for (var k = 0; k < m; k++)
      for (var T = 0; T < q; T++) {
        G[(T * m + k) * 2] = W[(k * q + T) * 2];
        G[(T * m + k) * 2 + 1] = W[(k * q + T) * 2 + 1];
      }
    j[0] = m;
    j[1] = q;
    j[2] = [n[1], n[0]];
  };
  B.Ol.split = function (j, q, m) {
    if (q == 1) B.Ol.up(j);
    var n = j[0],
      G = j[1],
      W = j[2][0],
      k = j[3],
      T = 0;
    while (W[T + 1] && W[T + 1] < m) T++;
    var b = (m - W[T]) / (W[T + 1] - W[T]),
      c = 1 - b;
    for (var a = 0; a < G; a++) {
      var y = (a * (n + 3) + T * 3) * 2,
        f = c * k[y] + b * k[y + 2],
        U = c * k[y + 1] + b * k[y + 3],
        Z = c * k[y + 2] + b * k[y + 4],
        h = c * k[y + 3] + b * k[y + 5],
        u = c * k[y + 4] + b * k[y + 6],
        i = c * k[y + 5] + b * k[y + 7],
        x = c * f + b * Z,
        X = c * U + b * h,
        $ = c * Z + b * u,
        H = c * h + b * i,
        C = c * x + b * $,
        l = c * X + b * H;
      k.splice(y + 2, 4, f, U, x, X, C, l, $, H, u, i);
    }
    W.push(m);
    W.sort();
    j[0] += 3;
    if (q == 1) B.Ol.up(j);
  };
  B.Ol.P9 = function (j, q, m, n, G) {
    var W = 0,
      k = 0,
      T = 0,
      b = G[0],
      c = G[1],
      a = G[2],
      f = G[3],
      U = G[4],
      Z = G[5],
      h = G[6],
      u = G[7],
      y = (m * n + q) * 2;
    T = b * U;
    W += j[y + 0] * T;
    k += j[y + 1] * T;
    T = b * Z;
    W += j[y + 2] * T;
    k += j[y + 3] * T;
    T = b * h;
    W += j[y + 4] * T;
    k += j[y + 5] * T;
    T = b * u;
    W += j[y + 6] * T;
    k += j[y + 7] * T;
    y += n + n;
    T = c * U;
    W += j[y + 0] * T;
    k += j[y + 1] * T;
    T = c * Z;
    W += j[y + 2] * T;
    k += j[y + 3] * T;
    T = c * h;
    W += j[y + 4] * T;
    k += j[y + 5] * T;
    T = c * u;
    W += j[y + 6] * T;
    k += j[y + 7] * T;
    y += n + n;
    T = a * U;
    W += j[y + 0] * T;
    k += j[y + 1] * T;
    T = a * Z;
    W += j[y + 2] * T;
    k += j[y + 3] * T;
    T = a * h;
    W += j[y + 4] * T;
    k += j[y + 5] * T;
    T = a * u;
    W += j[y + 6] * T;
    k += j[y + 7] * T;
    y += n + n;
    T = f * U;
    W += j[y + 0] * T;
    k += j[y + 1] * T;
    T = f * Z;
    W += j[y + 2] * T;
    k += j[y + 3] * T;
    T = f * h;
    W += j[y + 4] * T;
    k += j[y + 5] * T;
    T = f * u;
    W += j[y + 6] * T;
    k += j[y + 7] * T;
    y += n + n;
    G[8] = W;
    G[9] = k;
  };
  B.T3 = {};
  B.T3.aK5 = function (j, q, m) {
    var n = Date.now();
    return B.T3.aCm(j, q, m);
  };
  B.T3.are = function (j, q, m, n) {
    var G = m * n,
      W = new Uint32Array(G),
      k = new Uint8Array(G),
      T = new Int16Array(G);
    W.fill(4294967295);
    W[q] = 0;
    var b = new gX(G);
    b.push(q, W[q]);
    var c = {
      I0: j,
      Yo: W,
      ft: k,
      tE: T,
      ji: b,
      aqc: q,
      Sz: [-m - 1, -m, -m + 1, 1, m + 1, m, m - 1, -1],
    };
    return c;
  };
  B.T3.TR = function (j, q) {
    var m = j.I0,
      n = j.Yo,
      G = j.ft,
      W = j.tE,
      k = j.ji,
      T = j.Sz;
    while (k.xl != 0 && (q == null || G[q] == 0)) {
      var b = k.pop();
      if (G[b] == 1) continue;
      G[b] = 1;
      for (var y = 0; y < 8; y++) {
        var c = m[8 * b + y],
          a = b + T[y];
        if (c == 255 || G[a] == 1) continue;
        var f = n[b] + c;
        if (f < n[a]) {
          n[a] = f;
          W[a] = b - a;
          k.push(a, f);
        }
      }
    }
  };
  function gX(j) {
    this.list = [];
    this.xl = 0;
    this.IK = 4294967295;
  }
  gX.prototype.push = function (j, q) {
    var m = this.list;
    if (m[q] == null) m[q] = [];
    m[q].push(j);
    this.xl++;
    this.IK = Math.min(this.IK, q);
  };
  gX.prototype.pop = function () {
    this.xl--;
    var j = this.list,
      q = this.IK,
      m = j[q].pop();
    if (j[q].length == 0) {
      j[q] = null;
      if (this.xl == 0) this.IK = 4294967295;
      else {
        while (j[q] == null) q++;
        this.IK = q;
      }
    }
    return m;
  };
  B.T3.akq = function (j, q, m, n) {
    var G = new Int16Array(n);
    for (var W = 0; W < m; W++)
      for (var k = 0; k < q; k++) {
        var y = W * q + k,
          T = 0;
        if (1 < k && k < q - 2 && 1 < W && W < m - 2) {
          T += j[y - q - q];
          T += j[y - q - 1] + 2 * j[y - q] + j[y - q + 1];
          T += j[y - 2] + 2 * j[y - 1] - 16 * j[y] + 2 * j[y + 1] + j[y + 2];
          T += j[y + q - 1] + 2 * j[y + q] + j[y + q + 1];
          T += j[y + q + q];
        } else T = -16 * j[y];
        G[y] = T;
      }
    return G;
  };
  B.T3.av6 = function (j, q, m, n) {
    if (n == null) n = 128;
    var G = new Uint8Array(q * m);
    for (var W = 1; W < m; W++)
      for (var k = 1; k < q; k++) {
        var y = W * q + k;
        B.T3.a54(j, y, y - 1, G, n);
        B.T3.a54(j, y, y - q, G, n);
      }
    return G;
  };
  B.T3.a54 = function (j, y, q, m, n) {
    var G = j[y],
      W = j[q];
    if (Math.abs(G - W) > n && G * W < 0) {
      if (Math.abs(G) < Math.abs(W)) m[y] = 1;
      else m[q] = 1;
    }
  };
  B.T3.acs = function (j, q, m, n) {
    var G = new Float32Array(n),
      W = 0;
    G.fill(0);
    for (var k = 0; k < m; k++)
      for (var T = 0; T < q; T++) {
        var b = 0,
          c = 0,
          y = k * q + T,
          a = y * 3;
        if (0 < T && T < q - 1) b = j[y + 1] - j[y - 1];
        if (0 < k && k < m - 1) c = j[y + q] - j[y - q];
        var f = b * b + c * c;
        if (f != 0) {
          var U = (G[a + 2] = Math.sqrt(f)),
            Z = 1 / U;
          G[a] = b * Z;
          G[a + 1] = c * Z;
          if (U > W) W = U;
        }
      }
    var h = 3 * q * m,
      u = W == 0 ? 0 : 1 / W;
    for (var y = 0; y < h; y += 3) G[y + 2] = 1 - G[y + 2] * u;
    return G;
  };
  B.T3.aCm = (function () {
    function j(T, b, c) {
      var a = new ArrayBuffer(b * c * 12),
        f = Date.now(),
        U = B.T3.akq(T, b, c, a),
        Z = B.T3.av6(U, b, c),
        h = B.T3.acs(T, b, c, a),
        u = new Uint8Array(b * c * 8);
      u.fill(255);
      var i = [-b - 1, -b, -b + 1, 1];
      for (var x = 1; x < c - 1; x++)
        for (var X = 1; X < b - 1; X++) {
          var $ = x * b + X;
          for (var H = 0; H < 4; H++) k($, $ + i[H], H, u, Z, h);
        }
      return u;
    }
    var q = new Float64Array(256);
    for (var y = 0; y < 256; y++)
      q[y] = Math.acos(-1 + (2 * y) / 255) * (0.95 / Math.PI);
    var m = [-1, 0, 1, 1, 1, 0, -1, -1],
      n = [-1, -1, -1, 0, 1, 1, 1, 0];
    for (var y = 0; y < 8; y++) {
      var G = 1 / Math.sqrt(m[y] * m[y] + n[y] * n[y]);
      m[y] *= G;
      n[y] *= G;
    }
    var W = [m[0], n[0], m[1], n[1], m[2], n[2], m[3], n[3]];
    function k(T, b, c, a, f, U) {
      var Z = 3 * T,
        h = 3 * b,
        u = 1 - f[b],
        i = 1 - f[T],
        x = (c & 1) == 0 ? 1 : Math.SQRT1_2,
        X = U[h + 2] * x,
        $ = U[Z + 2] * x,
        H = U[h + 1],
        C = -U[h],
        l = U[Z + 1],
        v = -U[Z],
        K = W[c + c],
        S = W[c + c + 1],
        o = l * K + v * S,
        V = H * K + C * S;
      if (o + V < 0) {
        o = -o;
        V = -V;
      }
      var P = q[~~((0.5 + 0.5 * o) * 255)] + q[~~((0.5 + 0.5 * V) * 255)];
      a[(T << 3) + c] = 1 + ~~(0.5 + 20 * (0.43 * u + 0.43 * P + 0.14 * X));
      a[(b << 3) + c + 4] = 1 + ~~(0.5 + 20 * (0.43 * i + 0.43 * P + 0.14 * $));
    }
    return j;
  })();
  B.Vl = {};
  B.Vl.__ = function (j) {
    var q = j.slice(0),
      m = 0;
    for (var y = 0; y < j.length; y++) m += j[y];
    for (var y = 0; y < j.length; y++) q[y] /= m;
    return q;
  };
  B.Vl.B1 = [
    B.Vl.__([1, 2, 1, 2, 16, 2, 1, 2, 1]),
    B.Vl.__([1, 2, 1, 2, 4, 2, 1, 2, 1]),
    B.Vl.__([0, -1, 0, -1, 8, -1, 0, -1, 0]),
    B.Vl.__([-0.7, -1, -0.7, -1, 10, -1, -0.7, -1, -0.7]),
    [-1, 0, 1, -2, 0, 2, -1, 0, 1],
    [1, 2, 1, 0, 0, 0, -1, -2, -1],
  ];
  B.Vl.kT = function (j, q, m, n, G, W, k) {
    if (k == null) k = !1;
    var T = Math.floor(Math.sqrt(G.length)),
      b = (T - 1) >>> 1,
      c = B.oM(j),
      a = B.TN(c),
      f = new Uint32Array(j.buffer),
      U = new Uint8ClampedArray(q.buffer);
    for (var y = 0; y < n; y++)
      for (var Z = 0; Z < m; Z++) {
        var h = 0,
          u = 0,
          i = 0,
          x = 0;
        for (var X = 0; X < T; X++)
          for (var $ = 0; $ < T; $++) {
            var H = G[X * T + $];
            if (H == 0) continue;
            var C = Z - b + $,
              l = y - b + X;
            if (C < 0) C = 0;
            else if (C > m - 1) C = m - 1;
            if (l < 0) l = 0;
            else if (l > n - 1) l = n - 1;
            if (c == 8) {
              var v = f[l * m + C];
              h += (v & 255) * H;
              u += ((v >>> 8) & 255) * H;
              i += ((v >>> 16) & 255) * H;
              x += ((v >>> 24) & 255) * H;
            } else {
              var K = (l * m + C) << 2;
              h += j[K] * H;
              u += j[K + 1] * H;
              i += j[K + 2] * H;
              x += j[K + 3] * H;
            }
          }
        if (k) {
          if (h < 0) h = -h;
          if (u < 0) u = -u;
          if (i < 0) i = -i;
          if (x < 0) x = -x;
        }
        var S = (y * m + Z) << 2;
        if (c == 8) {
          U[S] = ~~(0.5 + h);
          U[S + 1] = ~~(0.5 + u);
          U[S + 2] = ~~(0.5 + i);
          if (W) U[S + 3] = ~~(0.5 + x);
        } else {
          q[S] = Math.max(0, Math.min(a, h));
          q[S + 1] = Math.max(0, Math.min(a, u));
          q[S + 2] = Math.max(0, Math.min(a, i));
          if (W) q[S + 3] = Math.max(0, Math.min(a, x));
        }
      }
  };
  B.Vl.apt = function (j, q, m, n) {
    var G = j.length,
      W = new Uint8Array(G);
    B.Vl.kT(j, q, m, n, B.Vl.B1[4], !1, !0);
    B.Vl.kT(j, W, m, n, B.Vl.B1[5], !1, !0);
    for (var y = 0; y < G; y += 4) {
      var k = q[y],
        T = q[y + 1],
        b = q[y + 2],
        c = q[y + 3],
        a = W[y],
        f = W[y + 1],
        U = W[y + 2],
        Z = W[y + 3];
      q[y] = 255 - Math.max(0, Math.min(255, Math.sqrt(k * k + a * a)));
      q[y + 1] = 255 - Math.max(0, Math.min(255, Math.sqrt(T * T + f * f)));
      q[y + 2] = 255 - Math.max(0, Math.min(255, Math.sqrt(b * b + U * U)));
    }
  };
  B.Vl.abx = function (j, q, m, n) {
    var G = j.length,
      W = new Uint8Array(G);
    B.Vl.wo(j, q, m, n, B.Vl.B1[4], !0);
    B.Vl.wo(j, W, m, n, B.Vl.B1[5], !0);
    for (var y = 0; y < G; y++) {
      var k = q[y],
        T = W[y];
      q[y] = 255 - Math.max(0, Math.min(255, Math.sqrt(k * k + T * T)));
    }
  };
  B.Vl.wo = function (j, q, m, n, G, W) {
    q = new Uint8ClampedArray(q.buffer);
    var k = [-m - 1, -m, -m + 1, -1, 0, 1, m - 1, m, m + 1],
      T = n - 1,
      b = m - 1;
    for (var y = 1; y < T; y++)
      for (var c = 1; c < b; c++) {
        var a = y * m + c,
          f = B.Vl.zb(j, a, m, G);
        if (W) {
          if (f < 0) f = -f;
        }
        q[a] = ~~(f + 0.5);
      }
  };
  B.Vl.zb = function (j, q, m, n) {
    return (
      j[q - m - 1] * n[0] +
      j[q - m] * n[1] +
      j[q - m + 1] * n[2] +
      j[q - 1] * n[3] +
      j[q] * n[4] +
      j[q + 1] * n[5] +
      j[q + m - 1] * n[6] +
      j[q + m] * n[7] +
      j[q + m + 1] * n[8]
    );
  };
  B.Vl.aKk = function (j, q, m, n, G) {
    var W = [-m - 1, -m, -m + 1, -1, 0, 1, m - 1, m, m + 1],
      k = n - 1,
      T = m - 1;
    for (var y = 1; y < k; y++)
      for (var b = 1; b < T; b++) {
        var c = y * m + b;
        q[c] = B.Vl.as4(j, c, m, G);
      }
  };
  B.Vl.as4 = function (j, q, m, n) {
    return (
      j[q - m - 1] * n[0] +
      j[q - m] * n[1] +
      j[q - m + 1] * n[2] +
      j[q - 1] * n[3] +
      j[q] * n[4] +
      j[q + 1] * n[5] +
      j[q + m - 1] * n[6] +
      j[q + m] * n[7] +
      j[q + m + 1] * n[8]
    );
  };
  B.Zv = {};
  B.Zv.Zf = (function () {
    function j(k, T, b, c, a, f) {
      if (a == 0) {
        T.set(k);
        return;
      }
      var U = B.j(b * c),
        Z = B.j(b * c);
      if (B.kP(k)) {
        q(k, T, b, c, a, f);
        B.Ih(k, U, 3);
        B.Zv.a9r(U, Z, b, c, a, f);
        B.ln(Z, T, 3);
      } else {
        for (var y = 0; y < 3; y++) {
          B.Ih(k, U, y);
          B.Zv.a9r(U, Z, b, c, a, f);
          B.ln(Z, T, y);
        }
      }
    }
    function q(k, T, b, c, a, f) {
      var U = 0,
        Z = new ArrayBuffer(512 * 4 * 3),
        h = [
          new Int32Array(Z, 0),
          new Int32Array(Z, 2048),
          new Int32Array(Z, 2 * 2048),
        ],
        u = 1 + 2 * Math.round(Math.sqrt(a)),
        i = u >>> 1,
        x = new Array(u),
        X = new Array(u);
      for (var y = 0; y < u; y++) {
        var Z = new ArrayBuffer(512 * 4 * 3);
        x[y] = [
          new Int32Array(Z, 0),
          new Int32Array(Z, 2048),
          new Int32Array(Z, 2 * 2048),
        ];
        X[y] = x[y][0];
      }
      var $ = [B.Zv.fY, B.Zv.Ai][f],
        H = $[0],
        C = $[1],
        l = h[0];
      for (var v = 0; v < b; v++)
        if (v < a || v > b - a - u - 1) {
          l.fill(0);
          var K = Math.max(v - a, 0),
            S = Math.min(b, v + a + 1),
            o = S - K;
          for (var P = 0; P < a; P++) n(l, k, P * b + K, P * b + S, 1);
          for (var P = 0; P < c; P++) {
            var z = P - a - 1,
              E = P + a;
            if (E < c) n(l, k, E * b + K, E * b + S, 1);
            if (z >= 0) n(l, k, z * b + K, z * b + S, -1);
            var A = (P * b + v) << 2;
            U = l[300];
            if (U != 0)
              for (var y = 0; y < 3; y++) T[A + y] = H(h[y], k[A + y], U);
          }
        } else {
          for (var y = 0; y < u; y++) X[y].fill(0);
          var K = v - a + i,
            S = v + a + 1 + i;
          for (var P = 0; P < a; P++) m(X, k, P * b + K, P * b + S, 1, i);
          for (var P = 0; P < c; P++) {
            var z = P - a - 1,
              E = P + a;
            if (z >= 0) m(X, k, z * b + K, z * b + S, -1, i);
            if (E < c) m(X, k, E * b + K, E * b + S, 1, i);
            var N = x[i];
            U = N[0][300];
            for (var y = 0; y < i; y++) {
              var Q = i - 1 - y,
                e = i + 1 + y,
                Y = x[Q],
                d = x[e],
                I = U + Y[0][300],
                O = U + d[0][300],
                s = (P * b + v + Q) << 2,
                p = (P * b + v + e) << 2;
              if (I != 0)
                for (var F = 0; F < 3; F++)
                  T[s + F] = C(N[F], Y[F], k[s + F], I);
              if (O != 0)
                for (var F = 0; F < 3; F++)
                  T[p + F] = C(N[F], d[F], k[p + F], O);
            }
            var A = (P * b + v + i) << 2;
            if (U != 0)
              for (var F = 0; F < 3; F++) T[A + F] = H(N[F], k[A + F], U);
          }
          v += u - 1;
        }
    }
    function m(k, T, b, c, a, f) {
      var U = G,
        Z = b << 2,
        h = c << 2;
      U(k[f - 1], T, (b - 1) << 2, a);
      U(k[f - 1], T, (c - 1) << 2, -a);
      U(k[f + 1], T, c << 2, a);
      U(k[f + 1], T, b << 2, -a);
      for (var y = 1; y < f; y++) {
        var u = k[f - y - 1],
          i = k[f + y + 1];
        for (var x = 0; x <= y; x++) {
          var X = x << 2;
          U(u, T, (b - 1 - x) << 2, a);
          U(u, T, (c - 1 - x) << 2, -a);
          U(i, T, (c + x) << 2, a);
          U(i, T, (b + x) << 2, -a);
        }
      }
      n(k[f], T, b, c, a);
    }
    function n(k, T, y, b, c) {
      var a = y << 2,
        f = b << 2;
      while (a < f) {
        G(k, T, a, c);
        a += 4;
      }
    }
    function G(k, T, b, c) {
      var a = c * T[b + 3];
      k[300] += a;
      W(k, T[b], 0, a);
      W(k, T[b + 1], 512, a);
      W(k, T[b + 2], 1024, a);
    }
    function W(k, T, b, c) {
      k[b | T] += c;
      k[b | 256 | (T >>> 4)] += c;
    }
    return j;
  })();
  B.Zv.a9r = (function () {
    function j(f, U, Z, h, u, i) {
      if (u == 0) {
        U.set(f);
        return;
      }
      if (u <= 200) q(f, U, Z, h, u, i);
      else W(f, U, Z, h, u, i);
    }
    function q(f, U, Z, h, u, i) {
      var x = 0,
        X = new Int32Array(512),
        $ = 1 + 2 * Math.round(Math.sqrt(u)),
        H = $ >>> 1,
        C = new Array($);
      for (var y = 0; y < $; y++) C[y] = new Int32Array(512);
      var l = [B.Zv.fY, B.Zv.Ai][i],
        v = l[0],
        K = l[1];
      for (var S = 0; S < Z; S++)
        if (S < u || S > Z - u - $ - 1) {
          X.fill(0);
          x = 0;
          var o = Math.max(S - u, 0),
            P = Math.min(Z, S + u + 1),
            z = P - o;
          for (var E = 0; E < u; E++) {
            x += z;
            n(X, f, E * Z + o, E * Z + P, 1);
          }
          for (var E = 0; E < h; E++) {
            var A = E - u - 1,
              N = E + u;
            if (A >= 0) {
              x -= z;
              n(X, f, A * Z + o, A * Z + P, -1);
            }
            if (N < h) {
              x += z;
              n(X, f, N * Z + o, N * Z + P, 1);
            }
            var Q = v(X, f[E * Z + S], x);
            U[E * Z + S] = Q;
          }
        } else {
          for (var y = 0; y < $; y++) C[y].fill(0);
          x = 0;
          var o = S - u + H,
            P = S + u + 1 + H,
            z = P - o;
          for (var E = 0; E < u; E++) {
            x += z;
            m(C, f, E * Z + o, E * Z + P, 1, H);
          }
          for (var E = 0; E < h; E++) {
            var A = E - u - 1,
              N = E + u;
            if (A >= 0) {
              x -= z;
              m(C, f, A * Z + o, A * Z + P, -1, H);
            }
            if (N < h) {
              x += z;
              m(C, f, N * Z + o, N * Z + P, 1, H);
            }
            for (var y = 0; y < H; y++) {
              var e = H - 1 - y,
                Y = H + 1 + y;
              U[E * Z + S + e] = K(C[H], C[e], f[E * Z + S + e], x);
              U[E * Z + S + Y] = K(C[H], C[Y], f[E * Z + S + Y], x);
            }
            U[E * Z + S + H] = v(C[H], f[E * Z + S + H], x);
          }
          S += $ - 1;
        }
    }
    function m(f, U, Z, h, u, i) {
      var x = G;
      x(f[i - 1], U[Z - 1], 0, u);
      x(f[i - 1], U[h - 1], 0, -u);
      x(f[i + 1], U[h], 0, u);
      x(f[i + 1], U[Z], 0, -u);
      for (var y = 1; y < i; y++) {
        var X = f[i - y - 1],
          $ = f[i + y + 1];
        for (var H = 0; H <= y; H++) {
          x(X, U[Z - 1 - H], 0, u);
          x(X, U[h - 1 - H], 0, -u);
          x($, U[h + H], 0, u);
          x($, U[Z + H], 0, -u);
        }
      }
      n(f[i], U, Z, h, u);
    }
    function n(f, U, y, Z, h) {
      while (y < Z) G(f, U[y++], 0, h);
    }
    function G(f, U, Z, h) {
      f[Z | U] += h;
      f[Z | 256 | (U >>> 4)] += h;
    }
    function W(f, U, Z, h, u, i) {
      var x = 0,
        X = new Int32Array(512),
        $ = new Int32Array(1 * Z),
        H = new Int32Array(512 * Z),
        C = Math.min(u, Z),
        l = Math.min(u, h),
        v = [B.Zv.fY, B.Zv.Ai][i],
        K = v[0];
      for (var S = 0; S < l; S++) k(H, $, f, Z, S, 1);
      for (var S = 0; S < h; S++) {
        if (S + u < h) k(H, $, f, Z, S + u, 1);
        if (S - u - 1 >= 0) k(H, $, f, Z, S - u - 1, -1);
        X.fill(0);
        x = 0;
        for (var o = 0; o < C; o++) {
          x += $[o];
          T(X, H, o);
        }
        for (var o = 0; o < Z; o++) {
          var P = o - u - 1,
            z = o + u;
          if (P >= 0 && $[P] != 0) {
            x -= $[P];
            b(X, H, P);
          }
          if (z < Z && $[z] != 0) {
            x += $[z];
            T(X, H, z);
          }
          var E = x == 0 ? 0 : K(X, f[S * Z + o], x);
          U[S * Z + o] = E;
        }
      }
    }
    function k(f, U, Z, h, u, i) {
      var y = u * h;
      for (var x = 0; x < h; x++) {
        G(f, Z[y + x], x << 9, i);
        U[x] += i;
      }
    }
    function T(f, U, Z) {
      for (var y = 0; y < 16; y++) {
        var h = U[(Z << 9) | 256 | y];
        if (h == 0) continue;
        f[256 | y] += h;
        var u = y << 4,
          i = (Z << 9) | u;
        c(f, U, u, i);
        c(f, U, u + 4, i + 4);
        c(f, U, u + 8, i + 8);
        c(f, U, u + 12, i + 12);
      }
    }
    function b(f, U, Z) {
      for (var y = 0; y < 16; y++) {
        var h = U[(Z << 9) | 256 | y];
        if (h == 0) continue;
        f[256 | y] -= h;
        var u = y << 4,
          i = (Z << 9) | u;
        a(f, U, u, i);
        a(f, U, u + 4, i + 4);
        a(f, U, u + 8, i + 8);
        a(f, U, u + 12, i + 12);
      }
    }
    function c(f, U, Z, h) {
      f[Z] += U[h];
      f[Z + 1] += U[h + 1];
      f[Z + 2] += U[h + 2];
      f[Z + 3] += U[h + 3];
    }
    function a(f, U, Z, h) {
      f[Z] -= U[h];
      f[Z + 1] -= U[h + 1];
      f[Z + 2] -= U[h + 2];
      f[Z + 3] -= U[h + 3];
    }
    return j;
  })();
  B.Zv.mj = 0.5;
  B.Zv.fY = [
    function (j, q, m) {
      var n = ~~(0.5 + B.Zv.mj * m),
        G = 0,
        y = 256;
      while (G + j[y] < n) G += j[y++];
      y = (y - 256) << 4;
      while (G < n) G += j[y++];
      return y - 1;
    },
    function (j, q, m, n) {
      var G = ~~(0.5 + B.Zv.mj * n),
        W = 0,
        y = 256;
      while (W + j[y] + q[y] < G) {
        W += j[y] + q[y];
        y++;
      }
      y = (y - 256) << 4;
      while (W < G) {
        W += j[y] + q[y];
        y++;
      }
      return y - 1;
    },
  ];
  B.Zv.u4 = 100;
  B.Zv.Ai = [
    function (j, q, m) {
      var n = B.Zv.u4,
        G = 0,
        W = 0,
        y = Math.max(0, q - n),
        k = Math.min(256, q + n + 1);
      while (y < k) {
        var T = j[y];
        G += y * T;
        W += T;
        y++;
      }
      return W == 0 ? 0 : G / W;
    },
    function (j, q, m, n) {
      var G = B.Zv.u4,
        W = 0,
        k = 0,
        y = Math.max(0, m - G),
        T = Math.min(256, m + G + 1);
      while (y < T) {
        var b = j[y] + q[y];
        W += y * b;
        k += b;
        y++;
      }
      return k == 0 ? 0 : W / k;
    },
  ];
  B.B = {};
  B.B.Jl = function (j) {
    var q = L.Dq.Kt(j.Trnf),
      m = new hk(0, 0, 1e3, 1e3);
    if (j.Sz) {
      var n = j.Sz.v;
      m = new hk(0, 0, n.Wdth.v, n.Hght.v);
    }
    var G = B.B.Ht(q, m);
    return B.B.Kn(G);
  };
  B.B.Ht = function (j, q) {
    var m = j[0],
      n = j[1],
      G = j[2],
      W = j[3],
      k = j[6],
      T = j[7],
      b = j[4],
      c = j[5],
      a = 0,
      f = 0,
      U = 1,
      Z = 0,
      h = 0,
      u = 1,
      i = 1,
      x = 1;
    if (q) {
      a = q.x;
      f = q.y;
      U = q.x + q.r;
      Z = q.y;
      h = q.x;
      u = q.y + q.$;
      i = q.x + q.r;
      x = q.y + q.$;
    }
    return B.B.ay3(j, [a, f, U, Z, i, x, h, u]);
  };
  B.B.agn = function (j) {
    function q(G, W) {
      for (var y = 0; y < W.length; y += 2)
        if (!m(G, W[y], W[y + 1])) return !1;
      return !0;
    }
    function m(G, W, k) {
      return G[2 * W] == G[2 * k] && G[2 * W + 1] == G[2 * k + 1];
    }
    var n = 0;
    if (q(j, [0, 1, 2, 3])) n += 1;
    if (q(j, [0, 3, 1, 2])) n += 2;
    return n;
  };
  B.B.ay3 = function (j, q) {
    function m(N, y, Q) {
      var z = N[y * 2] - N[Q * 2],
        E = N[y * 2 + 1] - N[Q * 2 + 1];
      return Math.sqrt(z * z + E * E);
    }
    var n = j[0],
      G = j[1],
      W = j[2],
      k = j[3],
      T = j[6],
      b = j[7],
      c = j[4],
      a = j[5],
      f = q[0],
      U = q[1],
      Z = q[2],
      h = q[3],
      u = q[6],
      i = q[7],
      x = q[4],
      X = q[5],
      $ = [
        [f, U, 1, 0, 0, 0, -f * n, -U * n, n],
        [0, 0, 0, f, U, 1, -f * G, -U * G, G],
        [Z, h, 1, 0, 0, 0, -Z * W, -h * W, W],
        [0, 0, 0, Z, h, 1, -Z * k, -h * k, k],
        [u, i, 1, 0, 0, 0, -u * T, -i * T, T],
        [0, 0, 0, u, i, 1, -u * b, -i * b, b],
        [x, X, 1, 0, 0, 0, -x * c, -X * c, c],
        [0, 0, 0, x, X, 1, -x * a, -X * a, a],
      ],
      H = [0, 0, 0, 0, 0, 0, 0, 0],
      C = B.OC.dl($, H);
    if (C != 0) {
      H = [0, 0, 0, 0, 0, 0, 0, 0];
      var l = B.B.agn(j),
        v = B.B.agn(q);
      if (l == v && l != 0) {
        var K = l == 1,
          S = K ? 3 : 1,
          o = m(j, 0, S),
          V = m(q, 0, S),
          P = V / o,
          z = j[2 * S] - j[0],
          E = j[2 * S + 1] - j[1],
          A = new k$();
        A.translate(-n, -G);
        A.rotate(Math.atan2(E, z) - (K ? Math.PI / 2 : 0));
        if (K) A.scale(1, P);
        else A.scale(P, 1);
        A.translate(f, U);
        A.BR();
        H = B.B.gb(A);
      }
    }
    return H;
  };
  B.B.j = function (j, q) {
    if (j == null) j = q = 0;
    return [1, 0, j, 0, 1, q, 0, 0];
  };
  B.B.hE = function (j) {
    return Math.abs(j[6]) < 1e-18 && Math.abs(j[7]) < 1e-18;
  };
  B.B.Kn = function (j) {
    return new k$(j[0], j[3], j[1], j[4], j[2], j[5]);
  };
  B.B.gb = function (j) {
    return [j.Sd, j.ra, j.Tt, j.X, j.Jy, j.BL, 0, 0];
  };
  B.B.u = function (j, q) {
    var m = new Float64Array(2);
    for (var n = 0; n < q.length; n += 2) {
      var G = q[n],
        W = q[n + 1];
      B.B.h1(G, W, j, m);
      q[n] = m[0];
      q[n + 1] = m[1];
    }
  };
  B.B.h1 = function (j, q, m, n) {
    var G = 1 / (m[6] * j + m[7] * q + 1);
    n[0] = (m[0] * j + m[1] * q + m[2]) * G;
    n[1] = (m[3] * j + m[4] * q + m[5]) * G;
  };
  B.B.a35 = function (j, q) {
    var m = new Float64Array(2);
    B.B.h1(q.x, q.y, j, m);
    return new ea(m[0], m[1]);
  };
  B.B.up = function (j, q, m, n) {
    j = new Uint32Array(j.buffer);
    q = new Uint32Array(q.buffer);
    for (var G = 0; G < n; G++) {
      for (var W = 0; W < m; W++) {
        q[W * n + G] = j[G * m + W];
      }
    }
  };
  B.B.cq = function (j, q, m, n) {
    j = new Uint32Array(j.buffer);
    q = new Uint32Array(q.buffer);
    for (var G = 0; G < n; G++) {
      for (var W = 0; W < m; W++) {
        q[G * m + W] = j[G * m + m - 1 - W];
      }
    }
  };
  B.B.aCE = function (j, q, m, n) {
    j = new Uint32Array(j.buffer);
    q = new Uint32Array(q.buffer);
    for (var G = 0; G < n; G++) {
      for (var W = 0; W < m; W++) {
        q[G * m + W] = j[(n - 1 - G) * m + W];
      }
    }
  };
  B.B.am6 = function (j) {
    return Math.abs(j[6]) < 1e-9 && Math.abs(j[7]) < 1e-9;
  };
  B.B.aKg = function (j) {
    return (
      (Math.abs(j[0]) < 1e-9 && Math.abs(j[4]) < 1e-9) ||
      (Math.abs(j[1]) < 1e-9 && Math.abs(j[3]) < 1e-9)
    );
  };
  B.B.drawImage = function (j, q, m, n, G, W, k, T) {
    if (k == null) k = !1;
    var b = B.B.BR(j),
      c = !0,
      a = 0;
    for (var y = 0; y < 8; y++) {
      var f = Math.round(j[y]);
      if (y != 2 && y != 5) a += Math.abs(f);
      if (Math.abs(f - j[y]) > 1e-9) c = !1;
    }
    var U = B.B.am6(j),
      Z = B.B.aKg(j) && U,
      h = Z ? 1 : 0;
    if (B.oM(q) != 8) {
      B.B.a6e(b, q, m, n, G, W, U, k || T);
      return;
    }
    if (k || (c && a == m + n && U)) {
      B.B.a9g(b, q, m, n, G, W, U, T);
      return;
    }
    var u = W.r,
      i = W.$,
      x = new Float64Array(2);
    G = new Uint32Array(G.buffer);
    q = new Uint32Array(q.buffer);
    for (var X = 0; X < i; X++)
      for (var $ = 0; $ < u; $++) {
        var H = X * u + $,
          C,
          l,
          v,
          K,
          Y = 0,
          d = 0,
          I = 0,
          O = 0;
        G[H] = 0;
        var S = $ + W.x + 0.5,
          o = X + W.y + 0.5;
        C = S;
        l = o;
        v = b;
        var V = v[0] * C + v[1] * l + v[2],
          P = v[3] * C + v[4] * l + v[5];
        if (!U) {
          K = 1 / (v[6] * C + v[7] * l + 1);
          V *= K;
          P *= K;
        }
        var z = V * m,
          E = P * n,
          A = z < -1 || z > m + 1 || E < -1 || E > n + 1;
        if (A) continue;
        var N = B.B.acZ(j, m, n, S, o, V, P),
          Q = Math.round(N * 2.3);
        if (N < 1.1) {
          B.B.G3(z, E, q, m, n, G, H, h);
          continue;
        }
        if (z < 0.6 || z > m - 0.6 || E < 0.6 || E > n - 0.6) {
          Q = Math.max(Q, 5);
        }
        var e = 1 / Q,
          s = W.x + $,
          p = W.y + X;
        v = b;
        for (var y = 0; y < Q; y++)
          for (var F = 0; F < Q; F++) {
            C = s + (y + 0.5) * e;
            l = p + (F + 0.5) * e;
            var z = v[0] * C + v[1] * l + v[2],
              E = v[3] * C + v[4] * l + v[5];
            if (!U) {
              K = 1 / (v[6] * C + v[7] * l + 1);
              z *= K;
              E *= K;
            }
            if (z < 0 || z >= 1 || E < 0 || E >= 1) continue;
            z = Math.floor(z * m);
            E = Math.floor(E * n);
            var g = E * m + z,
              w = q[g],
              r = w >>> 24;
            Y += (w & 255) * r;
            d += ((w >>> 8) & 255) * r;
            I += ((w >>> 16) & 255) * r;
            O += r;
          }
        if (O != 0) {
          var eQ = 1 / O;
          Y = ~~(Y * eQ + 0.5);
          d = ~~(d * eQ + 0.5);
          I = ~~(I * eQ + 0.5);
          O = ~~(O * e * e + 0.5);
          G[H] = (O << 24) | (I << 16) | (d << 8) | Y;
        }
      }
  };
  B.B.a6e = function (j, q, m, n, G, W, k, T) {
    var b = W.r,
      c = W.$,
      a = new k$();
    a.scale(m, n);
    a.translate(1, 1);
    var f = B.B.J5(B.B.gb(a), j),
      U = new hk(0, 0, m, n),
      Z = U.P();
    Z.Lh(1, 1);
    var h = B.j(Z.C() * 4, B.oM(q));
    B.M4(q, U, h, Z);
    m = Z.r;
    n = Z.$;
    var u = W.x + 0.5,
      i = W.y + 0.5;
    B.nc(h);
    for (var x = 0; x < c; x++)
      for (var X = 0; X < b; X++) {
        var $ = (x * b + X) << 2,
          H = X + u,
          C = x + i,
          l = f[0] * H + f[1] * C + f[2],
          v = f[3] * H + f[4] * C + f[5];
        if (!k) {
          var K = 1 / (f[6] * H + f[7] * C + 1);
          l *= K;
          v *= K;
        }
        if (l < 0.5 || l > m - 0.5 || v < 0.5 || v > n - 0.5) {
          G[$] = 0;
          G[$ + 1] = 0;
          G[$ + 2] = 0;
          G[$ + 3] = 0;
        } else if (T) {
          var S = (~~v * m + ~~l) << 2;
          G[$] = h[S];
          G[$ + 1] = h[S + 1];
          G[$ + 2] = h[S + 2];
          G[$ + 3] = h[S + 3];
        } else B.B.a7M(l, v, h, m, G, $);
      }
    B.B6(G);
  };
  B.B.acZ = function (j, q, m, n, G, W, k) {
    var T = B.B.aAT(j, n, G, W + 1 / q, k),
      b = B.B.aAT(j, n, G, W, k + 1 / m);
    return 1 / Math.sqrt(Math.max(T, b));
  };
  B.B.aAT = function (j, q, m, n, G) {
    var W = 1 / (j[6] * n + j[7] * G + 1),
      k = (j[0] * n + j[1] * G + j[2]) * W - q,
      T = (j[3] * n + j[4] * G + j[5]) * W - m;
    return k * k + T * T;
  };
  B.B.a9g = function (j, q, m, n, G, W, k, T) {
    if (k && W.C() > 4e6 && T) {
      B.B.ayJ(j, q, m, n, G, W, k, T);
      return;
    }
    var b = W.x + W.r,
      c = W.y + W.$,
      a = 0,
      f = new Uint32Array(G.buffer),
      U = new Uint32Array(q.buffer),
      Z = j[0] * m,
      h = j[1] * m,
      u = j[2] * m,
      i = j[3] * n,
      x = j[4] * n,
      X = j[5] * n,
      $ = j[6],
      H = j[7];
    if (k)
      for (var C = W.y + 0.5; C < c; C++)
        for (var l = W.x + 0.5; l < b; l++) {
          var v = Z * l + h * C + u,
            K = i * l + x * C + X;
          if (0 < v && v < m && 0 < K && K < n) {
            var S = ~~K * m + ~~v;
            f[a] = U[S];
          } else f[a] = 0;
          a++;
        }
    else
      for (var C = W.y + 0.5; C < c; C++)
        for (var l = W.x + 0.5; l < b; l++) {
          var o = 1 / ($ * l + H * C + 1),
            v = (Z * l + h * C + u) * o,
            K = (i * l + x * C + X) * o;
          if (0 < v && v < m && 0 < K && K < n) {
            var S = Math.floor(K) * m + Math.floor(v);
            f[a] = U[S];
          } else f[a] = 0;
          a++;
        }
  };
  B.B.ayJ = function (j, q, m, n, G, W, k, T) {
    var b = new Uint32Array(G.buffer),
      c = new Uint32Array(q.buffer),
      H = 0;
    if (T && (W.r & 3) != 0) throw "e";
    var a = j[0] * m,
      f = j[1] * m,
      U = j[2] * m,
      Z = j[3] * n,
      h = j[4] * n,
      u = j[5] * n,
      i = j[6],
      x = j[7],
      X = W.r,
      $ = W.$,
      C = W.x + 0.5,
      l = W.y + 0.5,
      v = ((X >>> 2) << 2) - 1e-9,
      K = -0.1 + (($ >>> 1) << 1) - 1e-9,
      S = ~~m,
      o = a == 0 ? 0 : 1 / a,
      V = Z == 0 ? 0 : 1 / Z;
    for (var P = 0; P < $; P++) {
      var z = C * a + f * (P + l) + U,
        E = C * Z + h * (P + l) + u,
        A = 0,
        N = X;
      if (a == 0) {
      } else if (o > 0) {
        A = Math.max(A, -z * o);
        N = Math.min(N, (m - z) * o);
      } else {
        N = Math.min(N, -z * o);
        A = Math.max(A, (m - z) * o);
      }
      if (Z == 0) {
      } else if (V > 0) {
        A = Math.max(A, -E * V);
        N = Math.min(N, (n - E) * V);
      } else {
        N = Math.min(N, -E * V);
        A = Math.max(A, (n - E) * V);
      }
      if (N < 0) N = 0;
      if (A > N) A = N;
      A = ~~Math.ceil(A);
      N = ~~N;
      H = ~~(P * X);
      b.fill(0, H, H + A);
      H += A;
      for (var Q = A; Q < N; Q += 4) {
        var e = a * Q + z,
          Y = Z * Q + E,
          d = ~~Y * S + ~~e,
          I = c[d];
        b[H] = I;
        b[H + 1] = I;
        b[H + 2] = I;
        b[H + 3] = I;
        H += 4;
      }
      b.fill(0, H, H + X - N);
    }
  };
  B.B.BR = function (j) {
    var q = j[4] - j[5] * j[7],
      m = j[2] * j[7] - j[1],
      n = j[1] * j[5] - j[2] * j[4],
      G = j[5] * j[6] - j[3],
      W = j[0] - j[2] * j[6],
      k = j[3] * j[2] - j[0] * j[5],
      T = j[3] * j[7] - j[4] * j[6],
      b = j[1] * j[6] - j[0] * j[7],
      c = 1 / (j[0] * j[4] - j[1] * j[3]);
    return [q * c, m * c, n * c, G * c, W * c, k * c, T * c, b * c];
  };
  B.B.J5 = function (j, q) {
    var m = j[0],
      n = j[1],
      G = j[2],
      W = j[3],
      k = j[4],
      T = j[5],
      b = j[6],
      c = j[7],
      f = q[0],
      U = q[1],
      Z = q[2],
      h = q[3],
      u = q[4],
      i = q[5],
      x = q[6],
      X = q[7],
      $ = [
        m * f + n * h + G * x,
        m * U + n * u + G * X,
        m * Z + n * i + G,
        W * f + k * h + T * x,
        W * U + k * u + T * X,
        W * Z + k * i + T,
        b * f + c * h + x,
        b * U + c * u + X,
      ],
      H = 1 / (b * Z + c * i + 1);
    for (var y = 0; y < 8; y++) $[y] *= H;
    return $;
  };
  B.B.G3 = function (j, q, m, n, G, W, k, T) {
    var b = j,
      c = q,
      U = 0,
      Z = 0,
      h = 0,
      u = 0;
    j -= 0.499999;
    q -= 0.499999;
    var a = Math.floor(j),
      f = Math.floor(q);
    if (T == 0) {
      var y = f * n + a,
        i = a >= 0 && a < n,
        x = a + 1 >= 0 && a + 1 < n,
        X = f >= 0 && f < G,
        $ = f + 1 >= 0 && f + 1 < G;
      if (i && X) U = m[y];
      if (x && X) Z = m[y + 1];
      if (i && $) h = m[y + n];
      if (x && $) u = m[y + n + 1];
    } else if (T == 1) {
      var H = a < 0 ? 0 : a > n - 1 ? n - 1 : a,
        C = a < -1 ? 0 : a > n - 2 ? n - 1 : a + 1,
        l = f < 0 ? 0 : f > G - 1 ? G - 1 : f,
        v = f < -1 ? 0 : f > G - 2 ? G - 1 : f + 1;
      U = m[l * n + H];
      Z = m[l * n + C];
      h = m[v * n + H];
      u = m[v * n + C];
    } else {
      var H = (a + 50 * n) % n,
        C = (a + 50 * n + 1) % n,
        l = (f + 50 * G) % G,
        v = (f + 50 * G + 1) % G;
      U = m[l * n + H];
      Z = m[l * n + C];
      h = m[v * n + H];
      u = m[v * n + C];
    }
    var K = j - a,
      S = q - f,
      o = (1 - S) * (1 - K) * (U >>> 24),
      V = (1 - S) * K * (Z >>> 24),
      P = S * (1 - K) * (h >>> 24),
      z = S * K * (u >>> 24),
      E = o + V + P + z,
      A = o * (U & 255) + V * (Z & 255) + P * (h & 255) + z * (u & 255),
      N =
        o * ((U >>> 8) & 255) +
        V * ((Z >>> 8) & 255) +
        P * ((h >>> 8) & 255) +
        z * ((u >>> 8) & 255),
      Q =
        o * ((U >>> 16) & 255) +
        V * ((Z >>> 16) & 255) +
        P * ((h >>> 16) & 255) +
        z * ((u >>> 16) & 255);
    if (E == 0) W[k] = 0;
    else {
      var e = 1 / E;
      A = ~~(A * e + 0.5);
      N = ~~(N * e + 0.5);
      Q = ~~(Q * e + 0.5);
      E = ~~(E + 0.5);
      W[k] = (E << 24) | (Q << 16) | (N << 8) | A;
    }
  };
  B.B.a7M = function (j, q, m, n, G, W) {
    var k = j - 0.499999,
      T = q - 0.499999,
      b = ~~k,
      c = ~~T,
      a = k - b,
      f = T - c,
      U = (1 - f) * (1 - a),
      Z = (1 - f) * a,
      h = f * (1 - a),
      u = f * a,
      i = (c * n + b) << 2,
      x = ((c + 1) * n + b) << 2;
    G[W] = U * m[i] + Z * m[i + 4] + h * m[x] + u * m[x + 4];
    G[W + 1] = U * m[i + 1] + Z * m[i + 5] + h * m[x + 1] + u * m[x + 5];
    G[W + 2] = U * m[i + 2] + Z * m[i + 6] + h * m[x + 2] + u * m[x + 6];
    G[W + 3] = U * m[i + 3] + Z * m[i + 7] + h * m[x + 3] + u * m[x + 7];
  };
  B.B.a5U = function (j, q, m, n, G, W) {
    var k = j - 0.499999,
      T = q - 0.499999,
      b = ~~k,
      c = ~~T,
      a = k - b,
      f = T - c,
      U = (1 - f) * (1 - a),
      Z = (1 - f) * a,
      h = f * (1 - a),
      u = f * a,
      i = (c * n + b) << 2,
      x = ((c + 1) * n + b) << 2,
      X = U * m[i] + Z * m[i + 4] + h * m[x] + u * m[x + 4],
      $ = U * m[i + 1] + Z * m[i + 5] + h * m[x + 1] + u * m[x + 5],
      H = U * m[i + 2] + Z * m[i + 6] + h * m[x + 2] + u * m[x + 6],
      C = U * m[i + 3] + Z * m[i + 7] + h * m[x + 3] + u * m[x + 7];
    W[0] = X;
    W[1] = $;
    W[2] = H;
    W[3] = C;
  };
  B.B.Xw = function (j, q, m, n, G) {
    j -= 0.499999;
    q -= 0.499999;
    var W = Math.floor(j),
      k = Math.floor(q),
      T = j - W,
      b = q - k,
      c = (1 - b) * (1 - T),
      a = (1 - b) * T,
      f = b * (1 - T),
      U = b * T,
      Z = (W + 50 * n) % n,
      h = (W + 1 + 50 * n) % n,
      u = (k + 50 * G) % G,
      i = (k + 1 + 50 * G) % G,
      x = m[u * n + Z],
      X = m[u * n + h],
      $ = m[i * n + Z],
      H = m[i * n + h];
    return c * x + a * X + f * $ + U * H;
  };
  B.B.a9z = function (j, q, m, n, G) {
    j -= 0.499999;
    q -= 0.499999;
    var W = Math.floor(j),
      k = Math.floor(q),
      T = j - W,
      b = q - k,
      c = (1 - b) * (1 - T),
      a = (1 - b) * T,
      f = b * (1 - T),
      U = b * T,
      Z = k * n + W,
      h = Z + n;
    return c * m[Z] + a * m[Z + 1] + f * m[h] + U * m[h + 1];
  };
  B.B.afQ = function (j, q, m, n, G) {
    j -= 0.499999;
    q -= 0.499999;
    var W = Math.floor(j),
      k = Math.floor(q),
      T = j - W,
      b = q - k,
      c = (1 - b) * (1 - T),
      a = (1 - b) * T,
      f = b * (1 - T),
      U = b * T,
      Z = k * n + W,
      h = Z + n;
    return c * m[Z] + a * m[Z + 1] + f * m[h] + U * m[h + 1];
  };
  B.B.azd = function (j, q, m, n, G) {
    j -= 0.499999;
    q -= 0.499999;
    var W = Math.floor(j),
      k = Math.floor(q),
      T = j - W,
      b = q - k,
      c = (1 - b) * (1 - T),
      a = (1 - b) * T,
      f = b * (1 - T),
      U = b * T,
      Z = k * n + W,
      h = Z + n;
    return c * m[Z] + a * m[Z + 1] + f * m[h] + U * m[h + 1];
  };
  B.B.aw3 = function (j, q, m, n, G, W, k, T, b, c, a, f) {
    var U = new Uint32Array(j.buffer),
      Z = new Uint32Array(n.buffer),
      h = (1 + 2 * c) / G,
      u = [],
      i = [];
    for (var x = 0; x < G; x++) {
      var X = -0.25 + c - x * h;
      u.push((Math.cos(2 * Math.PI * X) * f) / a);
      u.push(Math.sin(2 * Math.PI * X) / a);
    }
    k *= q;
    T *= m;
    for (var $ = 0; $ < W; $++) {
      var H = Math.pow($ / W, b) * W;
      for (var x = 0; x < G; x++) {
        var C = k + u[x << 1] * H,
          l = T + u[(x << 1) + 1] * H,
          v = ~~(0.5 + (C < 0 ? 0 : C > q - 1 ? q - 1 : C)),
          K = ~~(0.5 + (l < 0 ? 0 : l > m - 1 ? m - 1 : l));
        Z[$ * G + x] = U[K * q + v];
      }
    }
  };
  B.B.aFe = function (j, q, m, n, G, W, k, T, b, c, a, f) {
    var U = new Uint32Array(j.buffer),
      Z = new Uint32Array(n.buffer),
      h = 1 / f,
      u = [],
      i = m * 4,
      x = 1 / i;
    for (var X = 0; X < i + 10; X++) u.push(Math.pow(X * x, 1 / b) * m * a);
    k *= G;
    T *= W;
    for (var X = 0; X < W; X++)
      for (var $ = 0; $ < G; $++) {
        var H = h * ($ - k),
          C = X - T,
          l = 1.75 - Math.atan2(C, H) * (1 / (2 * Math.PI));
        l = l - ~~l;
        l = (l + c) * (1 / (1 + 2 * c));
        var v = Math.sqrt(H * H + C * C);
        v = u[~~(v * 4)];
        B.B.G3(l * q + 0.5, v + 0.5, U, q, m, Z, X * G + $, 1);
      }
  };
  B.B.fM = function (j, q, m, n, G) {
    var W = G[0],
      k = G[1];
    for (var T = 0; T < k; T++)
      for (var b = 0; b < W; b++) {
        var c = G[2] * b + G[3] * T + G[4],
          a = G[5] * b + G[6] * T + G[7],
          f = (T * W + b) << 2,
          U = (a * q + c) << 2;
        n[f] = j[U + 0];
        n[f + 1] = j[U + 1];
        n[f + 2] = j[U + 2];
        n[f + 3] = j[U + 3];
      }
  };
  B.MV = (function () {
    function j(H, C) {
      var l = ~~(0.499 + H * C);
      return l < 0 ? 0 : (l > C ? C : l) << 2;
    }
    function q(H, C, l, v, K, S, o, V) {
      var P = l[0],
        z = l[1],
        E = l[2],
        A = l[3],
        N = v.r,
        Q = v.$,
        e = new Uint32Array(1),
        Y = new Uint8Array(e.buffer),
        d = Math.round(Math.random() * v.C() * 100);
      for (var I = 0, y = 0; I < Q; I++) {
        for (var O = 0; O < N; O++, y++) {
          var s = O + K,
            p = I + S,
            F = P * s + z * p,
            g = E * s + A * p,
            w = 0;
          if (V == 0) w = F + 0.5;
          else if (V == 1) w = 2 * Math.sqrt(F * F + g * g);
          else if (V == 2) w = (Math.PI + Math.atan2(-g, -F)) / (2 * Math.PI);
          else if (V == 3) w = Math.abs(F * 2);
          else if (V == 4) w = 2 * (Math.abs(F) + Math.abs(g));
          var r = j(w, o),
            eQ = O * 4;
          e[0] = B.G.Dv(y + d);
          for (var t = 0; t < 4; t++) {
            var dq = C[r + t] * 255,
              D = Math.floor(dq);
            if (Y[t] < (dq - D) * 255) D++;
            H[(y << 2) + t] = D;
          }
        }
      }
    }
    function m(H, y, C, l, v) {
      var K = y << 2;
      H[K] = C[l] * v;
      H[K + 1] = C[l + 1] * v;
      H[K + 2] = C[l + 2] * v;
      H[K + 3] = C[l + 3] * v;
    }
    var n = [
      function (H, C, l, v, K, S, o, V) {
        var P = l[0],
          z = l[1],
          E = l[2],
          A = l[3],
          N = v.r,
          Q = v.$;
        for (var e = 0, y = 0; e < Q; e++)
          for (var Y = 0; Y < N; Y++, y++) {
            var d = Y + K,
              I = e + S,
              O = P * d + z * I,
              s = E * d + A * I,
              p = O + 0.5;
            m(H, y, C, j(p, o), V);
          }
      },
      function (H, C, l, v, K, S, o, V) {
        var P = l[0],
          z = l[1],
          E = l[2],
          A = l[3],
          N = v.r,
          Q = v.$;
        for (var e = 0, y = 0; e < Q; e++)
          for (var Y = 0; Y < N; Y++, y++) {
            var d = Y + K,
              I = e + S,
              O = P * d + z * I,
              s = E * d + A * I,
              p = 2 * Math.sqrt(O * O + s * s);
            m(H, y, C, j(p, o), V);
          }
      },
      function (H, C, l, v, K, S, o, V) {
        var P = l[0],
          z = l[1],
          E = l[2],
          A = l[3],
          N = v.r,
          Q = v.$;
        for (var e = 0, y = 0; e < Q; e++)
          for (var Y = 0; Y < N; Y++, y++) {
            var d = Y + K,
              I = e + S,
              O = P * d + z * I,
              s = E * d + A * I,
              p = (Math.PI + Math.atan2(-s, -O)) / (2 * Math.PI);
            m(H, y, C, j(p, o), V);
          }
      },
      function (H, C, l, v, K, S, o, V) {
        var P = l[0],
          z = l[1],
          E = l[2],
          A = l[3],
          N = v.r,
          Q = v.$;
        for (var e = 0, y = 0; e < Q; e++)
          for (var Y = 0; Y < N; Y++, y++) {
            var d = Y + K,
              I = e + S,
              O = P * d + z * I,
              s = E * d + A * I,
              p = Math.abs(O * 2);
            m(H, y, C, j(p, o), V);
          }
      },
      function (H, C, l, v, K, S, o, V) {
        var P = l[0],
          z = l[1],
          E = l[2],
          A = l[3],
          N = v.r,
          Q = v.$;
        for (var e = 0, y = 0; e < Q; e++)
          for (var Y = 0; Y < N; Y++, y++) {
            var d = Y + K,
              I = e + S,
              O = P * d + z * I,
              s = E * d + A * I,
              p = 2 * (Math.abs(O) + Math.abs(s));
            m(H, y, C, j(p, o), V);
          }
      },
    ];
    function G(H, C, l, v, K, S, o, V, P, z, E, A, N) {
      var Q = 1023,
        e = T(H, Q + 1, o, P, z, N),
        Y = B.oM(C),
        d = B.TN(Y);
      if (Y == 8 && A && H.Clrs) {
        q(C, e, v, l, l.x - K, l.y - S, Q, V);
      } else if (V < 5) {
        n[V](C, e, v, l, l.x - K, l.y - S, Q, d);
      } else {
        var I = B.sL(e, Y),
          O = l.r,
          s = l.$,
          p = E.VX,
          F = E.C7,
          g = p - F,
          w = 1 / g,
          r = (E.Eu.r - l.r) >> 1,
          eQ = (E.Eu.$ - l.$) >> 1,
          t = E.Eu.r;
        for (var dq = 0, y = 0; dq < s; dq++)
          for (var D = 0; D < O; D++, y += 4) {
            var ha = (dq + eQ) * t + D + r,
              am = (E.M2[ha] - F) * w,
              k4 = Math.max(0, Math.min(Q, Math.round(am * Q))) << 2;
            C[y] = I[k4];
            C[y + 1] = I[k4 + 1];
            C[y + 2] = I[k4 + 2];
            C[y + 3] = I[k4 + 3];
          }
      }
    }
    function W(H, C, l) {
      var v = [H.Clrs.v, H.Trns.v],
        K = [[], []],
        S = 255;
      for (var o = 0; o < 2; o++)
        for (var y = 0; y < v[o].length; y++) {
          var V,
            P = v[o][y].v;
          if (o == 0) {
            var z = P.Type.v.Clry;
            if (z == "FrgC")
              V = { o: (C >> 16) & 255, i: (C >> 8) & 255, X: C & 255 };
            else if (z == "BckC")
              V = { o: (l >> 16) & 255, i: (l >> 8) & 255, X: l & 255 };
            else V = k(P.Clr.v);
          } else {
            V = P.Opct.v.val * (255 / 100);
            if (V < S) S = V;
          }
          K[o].push([V, P.Lctn.v / 4096, P.Mdpn.v / 100]);
        }
      K.push(S > 254);
      return K;
    }
    function k(H) {
      var C,
        l = H.classID;
      if (l == "RGBC") {
        if (H.Rd) C = { o: H.Rd.v, i: H.Grn.v, X: H.Bl.v };
        else
          C = {
            o: H.redFloat.v * 255,
            i: H.greenFloat.v * 255,
            X: H.blueFloat.v * 255,
          };
        C.o = Math.max(C.o, 0);
        C.i = Math.max(C.i, 0);
        C.X = Math.max(C.X, 0);
      } else if (l == "HSBC") {
        C = B.ld(H.H.v.val / 360, H.Strt.v / 100, H.Brgh.v / 100);
        C.o *= 255;
        C.i *= 255;
        C.X *= 255;
      } else if (l == "CMYC") {
        var v = H.Cyn.v,
          K = H.Mgnt.v,
          S = H.Ylw.v,
          o = H.Blck.v,
          V = [v / 100, K / 100, S / 100, o / 100],
          P = B.Lf(V);
        C = { o: P[0] * 255, i: P[1] * 255, X: P[2] * 255 };
      } else if (l == "Grsc")
        C = { o: 255 - H.Gry.v, i: 255 - H.Gry.v, X: 255 - H.Gry.v };
      else if (l == "LbCl") {
        C = B.DD(H.Lmnc.v, H.A.v, H.B.v);
      } else if (l == "BkCl") C = { o: 0, i: 0, X: 0 };
      else console.log(H);
      if (isNaN(C.o)) C.o = C.i = C.X = 0;
      return C;
    }
    function T(H, C, l, v, K, S) {
      if (S == null) S = "Gcls";
      var o;
      if (H.Clrs) {
        o = W(H, v, K);
        for (var y = 0; y < o[0].length; y++) {
          var V = o[0][y][0];
          if (S == "Lnr") {
            V.o = 255 * B.qd(V.o / 255);
            V.i = 255 * B.qd(V.i / 255);
            V.X = 255 * B.qd(V.X / 255);
          }
          if (S == "Perc" || S == "Smoo") {
            var P = B.fa(V.o, V.i, V.X);
            V.o = P.ji * 2.55;
            V.i = 127.5 + P.Sd;
            V.X = 127.5 + P.X;
          }
        }
      }
      var z = H.Clrs ? a(H, o, C, l) : b(H, C, l);
      if (H.Clrs && S != "Gcls") {
        var E = 1 / 255,
          A = o[0],
          N = o[1];
        for (var y = 0; y < z.length; y += 4) {
          if (S == "Lnr") {
            z[y] = B.SK(z[y]);
            z[y + 1] = B.SK(z[y + 1]);
            z[y + 2] = B.SK(z[y + 2]);
          }
          if (S == "Perc" || S == "Smoo") {
            var Q = z[y] * 100,
              e = (z[y + 1] - 0.5) * 255,
              Y = (z[y + 2] - 0.5) * 255,
              d = B.DD(Q, e, Y);
            z[y] = d.o * E;
            z[y + 1] = d.i * E;
            z[y + 2] = d.X * E;
          }
          if (S == "stripes") {
            var I = 0;
            while (I < A.length - 1 && A[I + 1][1] * C < y >>> 2) I++;
            var d = A[I][0];
            z[y] = d.o * E;
            z[y + 1] = d.i * E;
            z[y + 2] = d.X * E;
            I = 0;
            while (I < N.length - 1 && N[I + 1][1] * C < y >>> 2) I++;
            z[y + 3] = N[I][0] * E;
          }
        }
      }
      return z;
    }
    function b(H, C, l) {
      var v = new Uint32Array(C),
        K = new Uint8Array(v.buffer);
      v.fill(4278190080);
      var S = [],
        o = [],
        V = H.RndS.v,
        P = H.Smth.v / 4096;
      for (var y = 0; y < 4; y++) {
        S[y] = ~~((H.Mnm.v[y].v * 255) / 100);
        o[y] = ~~((H.Mxm.v[y].v * 255) / 100);
      }
      var z = B.j(C * 4),
        E = B.j(C);
      for (var A = 0; A < 3; A++) {
        B.O.aux(null, C, 1, z, [
          1 + Math.round(P * P * P * 60),
          22,
          V * (2 + A),
        ]);
        B.Ih(z, E, 0);
        B.ln(E, K, A);
        var N = S[A],
          Q = o[A];
        for (var y = 0; y < C; y++)
          K[4 * y + A] = Math.max(N, Math.min(Q, K[4 * y + A]));
      }
      if (l)
        for (var y = 0; y < C / 2; y++) {
          var e = v[y];
          v[y] = v[C - 1 - y];
          v[C - 1 - y] = e;
        }
      return B.sL(K, 32);
    }
    function c(H) {
      return {
        classID: "RGBC",
        Rd: { t: "doub", v: H.o },
        Grn: { t: "doub", v: H.i },
        Bl: { t: "doub", v: H.X },
      };
    }
    function a(H, C, l, v) {
      var K = new Float32Array(l * 4),
        S = 1 / (l - 0);
      for (var y = 0; y < l; y++) {
        var o = y * 4,
          V = f(H, C, (v ? l - 1 - y : y) * S);
        K[o] = V[0];
        K[o + 1] = V[1];
        K[o + 2] = V[2];
        K[o + 3] = V[3];
      }
      return K;
    }
    function f(H, C, l) {
      var v = H.Intr.v * (1 / 4096),
        K = C[0],
        S = C[1],
        o = K.length - 1,
        V = S.length - 1,
        y = -1,
        P = 0,
        z = 0,
        E = 0,
        A = 0;
      if (C[2]) P = 255;
      else {
        while (y < V && S[y + 1][1] <= l) y++;
        if (y == -1) {
          P = S[0][0];
        } else if (y == V) {
          P = S[y][0];
        } else {
          var N = Z(S, y, l, v);
          P = N * S[y][0] + (1 - N) * S[y + 1][0];
        }
      }
      y = -1;
      while (y < o && K[y + 1][1] <= l) y++;
      if (y == -1) {
        var Q = K[0][0];
        z = Q.o;
        E = Q.i;
        A = Q.X;
      } else if (y == o) {
        var Q = K[y][0];
        z = Q.o;
        E = Q.i;
        A = Q.X;
      } else {
        var e = K[y][0],
          Y = K[y + 1][0],
          d = Z(K, y, l, v);
        z = Math.min(255, d * e.o + (1 - d) * Y.o);
        E = Math.min(255, d * e.i + (1 - d) * Y.i);
        A = Math.min(255, d * e.X + (1 - d) * Y.X);
      }
      return [z * (1 / 255), E * (1 / 255), A * (1 / 255), P * (1 / 255)];
    }
    function U(H, C, l) {
      var v = f(H, C, l),
        K = ~~(0.5 + v[0] * 255),
        S = ~~(0.5 + v[1] * 255),
        o = ~~(0.5 + v[2] * 255),
        V = ~~(0.5 + v[3] * 255);
      return (V << 24) | (o << 16) | (S << 8) | K;
    }
    function Z(H, y, C, l) {
      if (H.length == 2) l *= 0.5;
      var v = H[y][1],
        K = H[y + 1][1],
        S = v + H[y + 1][2] * (K - v),
        o;
      if (C < S) o = (0.5 * (C - v)) / (S - v);
      else o = 0.5 + (0.5 * (C - S)) / (K - S);
      o = 0.5 + 0.5 * (l * Math.cos(Math.PI * o) + (1 - l) * (1 - 2 * o));
      return o;
    }
    function h(H, C, l) {
      var v = 0.5 * l.$,
        K = v * (H / C),
        S = Math.sqrt(v * v + K * K),
        o = 0.5 * l.r,
        V = o * (C / H),
        P = Math.sqrt(o * o + V * V);
      return Math.min(S, P);
    }
    function u(H, C) {
      var l = (Math.PI * H.Angl.v.val) / 180,
        v = H.Scl.v.val / 100,
        K = 0,
        S = 0;
      if (H.Ofst) {
        var o = H.Ofst.v;
        K = o.Hrzn.v.val / 100;
        S = o.Vrtc.v.val / 100;
      }
      var V = Math.cos(l),
        P = -Math.sin(l),
        z = h(V, P, C),
        E = z * v,
        A = C.x + C.r / 2 + K * C.r,
        N = C.y + C.$ / 2 + S * C.$;
      return [new ea(A, N), new ea(A + V * E, N + P * E)];
    }
    function i(H, C, l, v) {
      var K = C.x - H.x,
        S = -(C.y - H.y),
        o = Math.sqrt(K * K + S * S),
        V = Math.atan2(S, K),
        P = Math.cos(V),
        z = -Math.sin(V),
        E = h(P, z, l),
        A = o / E,
        N = (H.x - l.x - l.r / 2) / l.r,
        Q = (H.y - l.y - l.$ / 2) / l.$;
      v.Angl.v.val = (180 * V) / Math.PI;
      v.Scl.v.val = A * 100;
      var e = v.Ofst.v;
      e.Hrzn.v.val = N * 100;
      e.Vrtc.v.val = Q * 100;
    }
    function x(H, C) {
      for (var y = 0; y < H.length; y++) {
        var l = H[y],
          v = Math.round(l[0] * 4096),
          K = l[1],
          S = l[2],
          o = H[Math.max(0, y - 1)][3];
        if (S == null) S = 1;
        if (o == null) o = 0.5;
        var V = c({ o: K[0] * 255, i: K[1] * 255, X: K[2] * 255 });
        C.Clrs.v[y] = {
          t: "Objc",
          v: {
            classID: "Clrt",
            Lctn: { t: "long", v: v },
            Mdpn: { t: "long", v: Math.round(o * 100) },
            Clr: { t: "Objc", v: V },
            Type: { t: "enum", v: { Clry: "UsrS" } },
          },
        };
        C.Trns.v[y] = {
          t: "Objc",
          v: {
            classID: "TrnS",
            Lctn: { t: "long", v: v },
            Mdpn: { t: "long", v: Math.round(o * 100) },
            Opct: { t: "UntF", v: { type: "#Prc", val: Math.round(S * 100) } },
          },
        };
      }
    }
    function X(H, C, l) {
      if (C) {
        H = B.S(H);
        for (var y = 0; y < 2; y++) {
          var v = H[y == 0 ? "Clrs" : "Trns"].v;
          for (var K = 0; K < v.length; K++)
            v[K].v.Lctn.v = 4096 - v[K].v.Lctn.v;
          v.reverse();
        }
      }
      var S = [],
        o = 1 / 255,
        V = H.Clrs.v,
        P = H.Trns.v,
        v = V;
      if (ei == 0 || V.length != P.length) {
        if (ei != 0) console.log("strange gradient");
        if (l != !0) v = V.concat(P);
        var z = W(H, 0, 0);
        for (var y = 0; y < v.length; y++) {
          var E = v[y].v,
            A = E.Lctn.v / 4096,
            N = f(H, z, A);
          S.push([A, [N[0], N[1], N[2]], N[3], E.Mdpn.v / 100]);
        }
        S.sort(function (e, Y) {
          return e[0] - Y[0];
        });
        for (var y = 1; y < S.length; y++)
          if (S[y][0] - S[y - 1][0] < 0.001) {
            S.splice(y, 1);
            y--;
          }
      } else {
        for (var y = 0; y < v.length; y++) {
          var E = V[y].v,
            Q = E.Clr.v,
            A = E.Lctn.v / 4096;
          S.push([
            A,
            [Q.Rd.v * o, Q.Grn.v * o, Q.Bl.v * o],
            P[y].v.Opct.v.val / 100,
            V[Math.min(y + 1, V.length - 1)].v.Mdpn.v / 100,
          ]);
        }
      }
      return S;
    }
    function $(H, C) {
      function l(H, o) {
        H.addColorStop(o[0], CSS.axm(o[1], o[2]));
      }
      function v(o, V, P, z) {
        var E = Math.log(0.5) / Math.log(z),
          A = Math.log(0.5) / Math.log(1 - z),
          N = z > 0.5 ? Math.pow(P, E) : 1 - Math.pow(1 - P, A),
          Q = 1 - N,
          e = o[0],
          Y = o[1],
          d = V[1],
          I = [
            e + (V[0] - e) * P,
            [Y[0] * Q + d[0] * N, Y[1] * Q + d[1] * N, Y[2] * Q + d[2] * N],
            o[2] * Q + V[2] * N,
          ];
        return I;
      }
      l(H, C[0]);
      for (var y = 1; y < C.length; y++) {
        var K = C[y - 1][3];
        if (K != 0.5)
          for (var S = 1; S < 20; S++) l(H, v(C[y - 1], C[y], S / 20, K));
        l(H, C[y]);
      }
    }
    return {
      S$: G,
      Ia: c,
      xH: k,
      apj: T,
      UO: i,
      aLx: u,
      Uz: $,
      gB: x,
      a4C: X,
      aD6: W,
      UM: U,
    };
  })();
  B.aga = {};
  B.aga.SU = function (j, q, m, n, G, W, k, T, b, c, a, f) {
    var U,
      Z,
      h,
      u = Date.now(),
      i = !1,
      x = k,
      X = c,
      $,
      H,
      C,
      l,
      v = W * 255,
      K = 255 - b * 255,
      S = 1 + G * 6,
      o = 1 + T * 6,
      V = 1 + f * 4,
      P = (V - 1) / 7,
      z = 0,
      E = 255 - 0,
      A,
      N,
      Q,
      e,
      Y,
      d,
      I,
      O,
      s,
      p,
      F,
      g,
      w,
      r = 0,
      eQ = 1,
      t,
      dq,
      D,
      ha,
      am,
      k4,
      aA,
      ex,
      ac,
      eJ,
      h$ = 1 + a,
      da,
      bb = B.j(m * n),
      gb = B.j(m * n),
      fM = B.j(m * n),
      kS = B.j(m * n),
      cY = 255 / v,
      cS = 255 / (255 - K);
    for (Z = 0; Z < n; Z++) {
      for (U = 0; U < m; U++) {
        var y = Z * m + U,
          k3 = y << 2;
        t = B.he(j[k3], j[k3 + 1], j[k3 + 2]);
        kS[y] = t;
        if (t < v) bb[y] = 255 - t * cY;
        if (t > K) gb[y] = 255 - (255 - t) * cS;
      }
    }
    if (i) console.log("init", Date.now() - u);
    u = Date.now();
    if (G * x > 0) {
      B.Zl.oY(bb, new hk(0, 0, m, n), x, 2);
    }
    if (T * X > 0) {
      B.Zl.oY(gb, new hk(0, 0, m, n), X, 2);
    }
    if (i) console.log("blur", Date.now() - u);
    u = Date.now();
    var di = B.j(256),
      a7 = B.j(256);
    for (var y = 0; y < 256; y++) {
      var b0 = y * (1 / 255),
        e1 = 0;
      e1 = (1 - Math.pow(1 - b0, S)) * 255;
      di[y] = Math.max(0, Math.min(255, ~~(e1 + 0.5)));
      e1 = Math.pow(b0, o) * 255;
      a7[y] = Math.max(0, Math.min(255, ~~(e1 + 0.5)));
    }
    var l2 = new Uint8ClampedArray(q.buffer),
      kL = new Float32Array(32768);
    for (var y = 0; y < 32768; y++) {
      da = Math.sqrt(y) * (1 / 128);
      if (h$ > 1) da = (1 - da) * (h$ - 1) + 1;
      else da = da * (h$ - 1) + 1;
      kL[y] = da;
    }
    for (Z = 0; Z < n; Z++) {
      for (U = 0; U < m; U++) {
        var y = Z * m + U,
          k3 = y << 2,
          e1 = kS[y],
          es = bb[y] * (1 / 255),
          kR = gb[y] * (1 / 255);
        e1 = (1 - es) * e1 + es * di[~~e1];
        e1 = (1 - kR) * e1 + kR * a7[~~e1];
        t = e1;
        var eH = j[k3],
          cZ = j[k3 + 1],
          ga = j[k3 + 2];
        dq = -eH * 0.168736 - cZ * 0.331264 + ga * 0.5;
        D = eH * 0.5 - cZ * 0.418688 - ga * 0.081312;
        da = kL[~~(0.5 + dq * dq + D * D)];
        ha = dq * da;
        k4 = D * da;
        eQ = 1 - Math.min(2 - (es + kR), 1);
        dq = eQ * dq + (1 - eQ) * ha;
        D = eQ * D + (1 - eQ) * k4;
        ex = t + 1.402 * D;
        ac = t - 0.34414 * dq - 0.71414 * D;
        eJ = t + 1.772 * dq;
        l2[k3] = ~~(0.5 + ex);
        l2[k3 + 1] = ~~(0.5 + ac);
        l2[k3 + 2] = ~~(0.5 + eJ);
      }
    }
    if (i) console.log("apply masks", Date.now() - u);
    u = Date.now();
  };
  B.EP = {};
  B.EP.AC = function (j, q, m, n, G) {
    var W = Date.now(),
      k = !1,
      u = 1,
      E = 0,
      s = 0;
    if (!q.Jn(G)) {
      var T = q.vd(G),
        b = B.j(T.C() * 4);
      B.M4(j, q, b, T);
      j = b;
      q = T;
    }
    var c = B.j(q.C());
    B.sN(m, G, c, q);
    B.round(c);
    G = G.TM(q);
    var a = G.r,
      f = G.$,
      U = a * 3 < f ? 2 : 1,
      Z = f * 3 < a ? 2 : 1;
    if (G.C() * (U * 2 + 1) * (Z * 2 + 1) < q.C()) {
      var T = new hk(
          G.x - a * U,
          G.y - f * U,
          a * (U * 2 + 1),
          f * (Z * 2 + 1)
        ).TM(q),
        b = B.j(T.C() * 4);
      B.M4(j, q, b, T);
      var h = B.j(T.C());
      B.sN(c, q, h, T);
      q = T;
      j = b;
      c = h;
    }
    while ((q.r + q.$) / 2 / u > 400) u++;
    var i = j,
      x = q,
      X = c,
      $ = Math.floor(x.r / u),
      H = Math.floor(x.$ / u);
    j = B.j($ * H * 4);
    B.scale.ce(i, x.r, x.$, j, $, H, 1 / u);
    c = B.j($ * H);
    B.scale.fM(X, x.r, x.$, c, $, H, 1 / u);
    B.round(c, 1);
    if (k) console.log("scale down:", u, $, H);
    var C = B.El(c, new hk(0, 0, $, H));
    if (C.jG()) return 1;
    var l = Math.round((C.r + C.$) / 2 / 15);
    if (k) console.log(Date.now() - W, "preprocess");
    W = Date.now();
    var v = B.j($ * H * 4);
    B.aqs(j, v);
    var K = Int16Array,
      S = new K($ * H * 24),
      o = new K(64),
      V = new K(64),
      P = new K(64),
      z = new K(64);
    for (var A = 3; A < H - 4; A++)
      for (var N = 3; N < $ - 4; N++) {
        var Q = A * $ + N;
        if (c[Q] == 255) continue;
        if (B.EP.aJ7(v, c, N, A, $, H, o, V, P) != 0) continue;
        B.EP.vR(o, z);
        var e = E * 24;
        S[e] = N;
        S[e + 1] = A;
        B.EP.wV(o, S, e + 4, 12);
        B.EP.vR(V, z);
        B.EP.wV(V, S, e + 16, 4);
        B.EP.vR(P, z);
        B.EP.wV(P, S, e + 20, 4);
        var Y = S[e + 5],
          d = S[e + 6];
        S[e + 5] = S[e + 16];
        S[e + 6] = S[e + 20];
        S[e + 16] = Y;
        S[e + 20] = d;
        E++;
      }
    if (E == 0) return 2;
    if (k) console.log(Date.now() - W, "FWHT computed");
    W = Date.now();
    var I = [];
    B.EP.s$(0, E - 1, I, S, new K(2 * 24));
    if (k) console.log(Date.now() - W, "KD tree computed");
    W = Date.now();
    var O = new Uint32Array($ * H * 4);
    for (var y = 0; y < E; y++) {
      var p = y,
        F = B.EP.aA0(p, S, I, l);
      if (F == -1) continue;
      var g = p * 24,
        w = F * 24,
        r = S[g],
        eQ = S[g + 1],
        t = S[w],
        dq = S[w + 1];
      s += B.EP.getError(w, g, S, 1e99);
      var D = t - r,
        ha = dq - eQ;
      O[(H + ha) * 2 * $ + ($ + D)] += 1;
    }
    if (k) console.log(Date.now() - W, "NN found");
    W = Date.now();
    var am = [],
      k4 = 1 / (2 * $);
    for (var y = 0; y < O.length; y++) {
      if (O[y] > 0) {
        var A = Math.floor(y * k4),
          N = y - A * 2 * $;
        am.push({ x: N - $, y: A - H, K: O[y], UA: -1 });
      }
    }
    am.sort(function (l2, kL) {
      return kL.K - l2.K;
    });
    var aA = new Int32Array($ * H),
      ex = [];
    for (var y = 0; y < $ * H; y++) {
      if (c[y] == 255) {
        aA[y] = ex.length >>> 1;
        ex.push(y % $, Math.floor(y / $));
      } else if (j[(y << 2) + 3] < 200) {
        aA[y] = -2;
      } else {
        aA[y] = -1;
      }
    }
    var ac = B.EP.awi($, H, am, aA, ex);
    if (ac == null) {
      if (k) console.log("no appropriate labeling");
      return 3;
    }
    var eJ = ac.hv,
      top = ac.top;
    eJ = B.EP.asj(eJ, j, $, H, top, aA, ex);
    if (k) console.log(Date.now() - W, "optimal labeling found");
    W = Date.now();
    var T = G.P();
    T.Lh(1, 1);
    T = T.TM(x);
    var h$ = B.j(T.C() * 4),
      da = B.j(T.C());
    B.M4(i, x, h$, T);
    var bb = x.r,
      gb = x.$;
    for (var A = 0; A < gb; A++)
      for (var N = 0; N < bb; N++) {
        if (X[A * bb + N] == 0) continue;
        var fM = Math.min(Math.floor(N / u), $ - 1),
          kS = Math.min(Math.floor(A / u), H - 1),
          cY = aA[kS * $ + fM];
        if (cY == -1) continue;
        var cS = eJ[cY],
          k3 = top[cS],
          di = N + k3.x * u,
          a7 = A + k3.y * u,
          b0 = (a7 * bb + di) << 2,
          e1 = ((A - T.y + x.y) * T.r + (N - T.x + x.x)) << 2;
        h$[e1] = i[b0];
        h$[e1 + 1] = i[b0 + 1];
        h$[e1 + 2] = i[b0 + 2];
        h$[e1 + 3] = i[b0 + 3];
        h$[e1 + 3] = i[b0 + 3];
        da[e1 >> 2] = cS + 1;
      }
    if (k) console.log(Date.now() - W, "copied back");
    W = Date.now();
    B.iL.AC(h$, da, T, null, 1e3);
    if (k) console.log(Date.now() - W, "poisson smooth");
    W = Date.now();
    B.M4(h$, T, n, G);
    return 0;
  };
  B.EP.apI = function (j, q, m, n, G, W) {
    return B.EP.Tj(j + G.x, q + G.y, m, n, W) ? 0 : 1e9;
  };
  B.EP.asj = function (j, q, m, n, top, G, W) {
    var k = Date.now(),
      T = W.length >>> 1,
      b = [-1, 0, 0, -1, 1, 0, 0, 1],
      c = 1e99,
      a = [],
      f = [],
      U = 2 * (T * 2 * 3 + T * 2),
      Z = null,
      h = 0,
      u = 0,
      i = 0,
      x = 1e99;
    while (!0 && Date.now() < k + 12e3) {
      i++;
      var X = null,
        $ = c;
      for (var H = 0; H < top.length; H++) {
        var C = top[H],
          l = 0,
          v = T + 2,
          K = 0;
        for (var y = 0; y < T; y++) {
          var S = W[y * 2],
            o = W[y * 2 + 1],
            V = top[j[y]],
            P = B.EP.apI(S, o, m, n, C, G),
            z = j[y] == H ? 1e9 : B.EP.apI(S, o, m, n, V, G);
          for (var aF = 0; aF < 4; aF++) {
            if (
              (aF == 0 && S == 0) ||
              (aF == 1 && o == 0) ||
              (aF == 2 && S == m - 1) ||
              (aF == 3 && o == n - 1)
            )
              continue;
            var E = b[2 * aF],
              A = b[2 * aF + 1],
              N = S + E,
              Q = o + A,
              e = G[Q * m + N];
            if (e == -2) {
            } else if (e == -1) {
              P += 3 * B.EP.i9(N + C.x, Q + C.y, N, Q, m, n, q, G);
              P +=
                2 * B.EP.i9(N + C.x + E, Q + C.y + A, N + E, Q + A, m, n, q, G);
              z += 3 * B.EP.i9(N + V.x, Q + V.y, N, Q, m, n, q, G);
              z +=
                2 * B.EP.i9(N + V.x + E, Q + V.y + A, N + E, Q + A, m, n, q, G);
            } else if (aF > 1) {
              if (j[y] == j[e]) {
                var Y = 0;
                Y += B.EP.i9(S + V.x, o + V.y, S + C.x, o + C.y, m, n, q, G);
                Y += B.EP.i9(N + V.x, Q + V.y, N + C.x, Q + C.y, m, n, q, G);
                a[l] = y;
                a[l + 1] = e;
                f[l] = Y;
                f[l + 1] = Y;
                l += 2;
              } else {
                var d = top[j[e]],
                  I = v,
                  O = 0,
                  s = 0,
                  p = 0;
                v++;
                O += B.EP.i9(S + V.x, o + V.y, S + C.x, o + C.y, m, n, q, G);
                O += B.EP.i9(N + V.x, Q + V.y, N + C.x, Q + C.y, m, n, q, G);
                s += B.EP.i9(S + d.x, o + d.y, S + C.x, o + C.y, m, n, q, G);
                s += B.EP.i9(N + d.x, Q + d.y, N + C.x, Q + C.y, m, n, q, G);
                p += B.EP.i9(S + d.x, o + d.y, S + V.x, o + V.y, m, n, q, G);
                p += B.EP.i9(N + d.x, Q + d.y, N + V.x, Q + V.y, m, n, q, G);
                a[l] = y;
                a[l + 1] = I;
                f[l] = O;
                f[l + 1] = O;
                l += 2;
                a[l] = e;
                a[l + 1] = I;
                f[l] = s;
                f[l + 1] = s;
                l += 2;
                a[l] = I;
                a[l + 1] = T + 1;
                f[l] = p;
                f[l + 1] = 0;
                l += 2;
              }
            }
          }
          a[l] = T;
          a[l + 1] = y;
          f[l] = P;
          f[l + 1] = 0;
          l += 2;
          a[l] = y;
          a[l + 1] = T + 1;
          f[l] = z;
          f[l + 1] = 0;
          l += 2;
          K += Math.min(P, z);
        }
        if (K > $) continue;
        var F = B.RF.dl(v, l, T, T + 1, a, f, $);
        if (F.Yo < $) {
          $ = F.Yo;
          var g = j.slice(0);
          B.EP.agl(g, l, a, F.UU, H, T);
          X = g;
        }
      }
      if ($ * 1 >= c) {
        break;
      }
      c = $;
      j = X;
      if ((i & 3) == 0) {
        if ($ * 1.03 >= x) break;
        x = $;
      }
      if ((i & 3) == 0) {
        var w = 0 * top.length;
        for (var y = 0; y < top.length && top.length > w; y++) {
          if (j.indexOf(y) != -1) continue;
          top.splice(y, 1);
          for (var e = 0; e < j.length; e++) if (j[e] > y) j[e]--;
          y--;
        }
      }
    }
    return j;
  };
  B.EP.agl = function (j, q, m, n, G, W) {
    for (var y = 0; y < n.length; y++) {
      var k = n[y] << 1,
        T = 0,
        b = 0;
      if (k < q) {
        T = m[k];
        b = m[k + 1];
      } else {
        b = m[k];
        T = m[k + 1];
      }
      if (T == W && j[b] != G) j[b] = G;
    }
  };
  B.EP.ade = function (top, j, q, m, n, G, W, k, T) {
    for (var y = 0; y < q.length; y++) {
      var b = q[y],
        c = !0;
      if (k != null && !B.EP.Tj(k + b.x, T + b.y, G, W, m)) continue;
      if (b.UA == -1) b.UA = B.EP.a96(b, m, n, G, W);
      if (b.UA <= 0) continue;
      for (var a = 0; a < top.length; a++) {
        var f = top[a],
          U = b.x - f.x,
          Z = b.y - f.y;
        if (U * U + Z * Z < j) {
          c = !1;
          break;
        }
      }
      if (c) return b;
    }
    return null;
  };
  B.EP.a96 = function (j, q, m, n, G) {
    var W = 0;
    for (var y = 0; y < m.length; y += 2) {
      var k = m[y] + j.x,
        T = m[y + 1] + j.y;
      if (B.EP.Tj(k, T, n, G, q)) W++;
    }
    return W / (m.length >> 1);
  };
  B.EP.awi = function (j, q, m, n, G) {
    var W = G.length >>> 1,
      top = [];
    for (var y = 0; y < 60; y++) {
      var k = B.EP.ade(top, 25, m, n, G, j, q);
      if (k == null) break;
      else top.push(k);
    }
    if (top.length == 0) return null;
    var T = [];
    for (var y = 0; y < W; y++) {
      var b = G[y * 2],
        c = G[y * 2 + 1],
        a = -1,
        f = 0;
      while (!0) {
        f++;
        var U = Math.random();
        a = Math.floor(U * 0.99999 * top.length);
        var Z = top[a],
          h = b + Z.x,
          u = c + Z.y;
        if (B.EP.Tj(h, u, j, q, n)) break;
        if (f > 1e3) {
          var k;
          k = B.EP.ade(top, 0, m, n, G, j, q, b, c);
          if (k == null)
            for (var i = 0; i < 4; i++) {
              var x,
                X,
                $ = 0;
              while (!0) {
                x = ~~(Math.random() * j);
                X = ~~(Math.random() * q);
                if (B.EP.Tj(x, X, j, q, n)) break;
                $++;
                if ($ > 500) throw "e";
              }
              k = { x: x - b, y: X - c, K: 1, UA: -1 };
              m.push(k);
              top.push(k);
            }
          else top.push(k);
          f = 0;
        }
      }
      T.push(a);
    }
    return { top: top, hv: T };
  };
  B.EP.i9 = function (j, q, m, n, G, W, k, T) {
    if (j == m && q == n) return 0;
    if (
      j < 0 ||
      q < 0 ||
      j >= G ||
      q >= W ||
      m < 0 ||
      n < 0 ||
      m >= G ||
      n >= W ||
      T[q * G + j] != -1 ||
      T[n * G + m] != -1
    )
      return 1e7;
    var b = (q * G + j) << 2,
      c = (n * G + m) << 2,
      a = k[b] - k[c],
      f = k[b + 1] - k[c + 1],
      U = k[b + 2] - k[c + 2];
    return 1 + (a * a + f * f + U * U);
  };
  B.EP.Tj = function (j, q, m, n, G) {
    return j >= 0 && j < m && q >= 0 && q < n && G[q * m + j] == -1;
  };
  B.EP.aA0 = function (j, q, m, n) {
    var G = 24 * j,
      W = q[G],
      k = q[G + 1],
      T = n * n,
      b = 0,
      U = 1e9;
    while (m[b] != 99)
      if (q[G + m[b]] < m[b + 1]) b = m[b + 2];
      else b = m[b + 3];
    var c = m[b + 1],
      a = m[b + 2],
      f = -1;
    for (var y = c; y <= a; y++) {
      var b = y,
        Z = b * 24,
        h = q[Z],
        u = q[Z + 1];
      if ((h - W) * (h - W) + (u - k) * (u - k) < T) continue;
      var i = B.EP.getError(Z, G, q, U);
      if (i < U) {
        U = i;
        f = b;
      }
    }
    return f;
  };
  B.EP.getError = function (j, q, m, n) {
    var G = 0;
    for (var W = 4; W < 24; W += 4) {
      var k = m[q + W] - m[j + W],
        T = m[q + W + 1] - m[j + W + 1],
        b = m[q + W + 2] - m[j + W + 2],
        c = m[q + W + 3] - m[j + W + 3];
      G += k * k + T * T + b * b + c * c;
      if (G >= n) return G + 1;
    }
    return G;
  };
  B.EP.s$ = function (j, q, m, n, G) {
    var W = 16,
      U = 0;
    if (q - j <= W) {
      m.push(99, j, q);
      return;
    }
    B.EP.RD(j, q, n, G);
    var k = -1,
      T = -1;
    for (var y = 4; y < 24; y++) {
      var b = G[2 * y + 1] - G[2 * y];
      if (b > T) {
        T = b;
        k = y;
      }
    }
    var c = (j + q) >> 1,
      a = B.EP.a7w(c, j, q, n, k),
      f = -1;
    for (var y = j; y <= q; y++)
      if (n[24 * y + k] == a) {
        if (f == -1) f = y;
        U = y;
      }
    if (j + 8 < f && f - j > q - U) c = f;
    else if (U + 1 < q - 8) c = U + 1;
    else if (q - j < 64) {
      m.push(99, j, q);
      return;
    } else c = c;
    var Z = m.length;
    m.push(k, a, 0, 0);
    m[Z + 2] = Z + 4;
    B.EP.s$(j, c - 1, m, n, G);
    m[Z + 3] = m.length;
    B.EP.s$(c, q, m, n, G);
  };
  B.EP.RD = function (j, q, m, n) {
    for (var y = 0; y < 48; y += 4) {
      n[y] = 3e4;
      n[y + 1] = -3e4;
      n[y + 2] = 3e4;
      n[y + 3] = -3e4;
    }
    for (var y = j; y <= q; y++) {
      var G = y * 24;
      for (var W = 0; W < 24; W++) {
        var k = m[G + W],
          T = n[W << 1],
          b = n[(W << 1) + 1];
        if (k < T) n[W << 1] = k;
        if (k > b) n[(W << 1) + 1] = k;
      }
    }
  };
  B.EP.TA = function (j, q, m) {
    var n = 0,
      y = 0;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
    n = m[j + y];
    m[j + y] = m[q + y];
    m[q + y] = n;
    y++;
  };
  B.EP.Xb = function (j, q, m, n) {
    var G = (m + n) >>> 1,
      W = j[24 * G + q];
    while (m <= n) {
      while (j[24 * m + q] < W) m++;
      while (j[24 * n + q] > W) n--;
      if (m <= n) {
        if (j[24 * m + q] != j[24 * n + q]) B.EP.TA(m * 24, n * 24, j);
        m++;
        n--;
      }
    }
    return m;
  };
  B.EP.a7w = function (j, q, m, n, G) {
    var W = 0;
    while (q != m) {
      W = B.EP.Xb(n, G, q, m);
      if (j < W) m = W - 1;
      else q = W;
    }
    return n[j * 24 + G];
  };
  B.EP.wV = function (j, q, m, n) {
    for (var y = 0; y < n; y++) q[m + y] = j[y];
  };
  B.EP.aJ7 = function (j, q, m, n, G, W, k, T, b) {
    var c = (n - 3) * G + (m - 3),
      a = c << 2;
    for (var f = 0; f < 8; f++) {
      if (
        q[c] +
          q[c + 1] +
          q[c + 2] +
          q[c + 3] +
          q[c + 4] +
          q[c + 5] +
          q[c + 6] +
          q[c + 7] !=
          0 ||
        j[a + 3] < 200 ||
        j[a + 7] < 200 ||
        j[a + 11] < 200 ||
        j[a + 15] < 200 ||
        j[a + 19] < 200 ||
        j[a + 23] < 200 ||
        j[a + 27] < 200 ||
        j[a + 31] < 200
      )
        return 1;
      var y = f << 3;
      k[y + 0] = j[a + 0];
      T[y + 0] = j[a + 1];
      b[y + 0] = j[a + 2];
      k[y + 1] = j[a + 4];
      T[y + 1] = j[a + 5];
      b[y + 1] = j[a + 6];
      k[y + 2] = j[a + 8];
      T[y + 2] = j[a + 9];
      b[y + 2] = j[a + 10];
      k[y + 3] = j[a + 12];
      T[y + 3] = j[a + 13];
      b[y + 3] = j[a + 14];
      k[y + 4] = j[a + 16];
      T[y + 4] = j[a + 17];
      b[y + 4] = j[a + 18];
      k[y + 5] = j[a + 20];
      T[y + 5] = j[a + 21];
      b[y + 5] = j[a + 22];
      k[y + 6] = j[a + 24];
      T[y + 6] = j[a + 25];
      b[y + 6] = j[a + 26];
      k[y + 7] = j[a + 28];
      T[y + 7] = j[a + 29];
      b[y + 7] = j[a + 30];
      a += G << 2;
      c += G;
    }
    return 0;
  };
  B.EP.vR = function (j, q) {
    q[0] = j[32] + j[0];
    q[1] = j[33] + j[1];
    q[2] = j[34] + j[2];
    q[3] = j[35] + j[3];
    q[4] = j[36] + j[4];
    q[5] = j[37] + j[5];
    q[6] = j[38] + j[6];
    q[7] = j[39] + j[7];
    q[8] = j[40] + j[8];
    q[9] = j[41] + j[9];
    q[10] = j[42] + j[10];
    q[11] = j[43] + j[11];
    q[12] = j[44] + j[12];
    q[13] = j[45] + j[13];
    q[14] = j[46] + j[14];
    q[15] = j[47] + j[15];
    q[16] = j[48] + j[16];
    q[17] = j[49] + j[17];
    q[18] = j[50] + j[18];
    q[19] = j[51] + j[19];
    q[20] = j[52] + j[20];
    q[21] = j[53] + j[21];
    q[22] = j[54] + j[22];
    q[23] = j[55] + j[23];
    q[24] = j[56] + j[24];
    q[25] = j[57] + j[25];
    q[26] = j[58] + j[26];
    q[27] = j[59] + j[27];
    q[28] = j[60] + j[28];
    q[29] = j[61] + j[29];
    q[30] = j[62] + j[30];
    q[31] = j[63] + j[31];
    q[32] = j[0] - j[32];
    q[33] = j[1] - j[33];
    q[34] = j[2] - j[34];
    q[35] = j[3] - j[35];
    q[36] = j[4] - j[36];
    q[37] = j[5] - j[37];
    q[38] = j[6] - j[38];
    q[39] = j[7] - j[39];
    q[40] = j[8] - j[40];
    q[41] = j[9] - j[41];
    q[42] = j[10] - j[42];
    q[43] = j[11] - j[43];
    q[44] = j[12] - j[44];
    q[45] = j[13] - j[45];
    q[46] = j[14] - j[46];
    q[47] = j[15] - j[47];
    q[48] = j[16] - j[48];
    q[49] = j[17] - j[49];
    q[50] = j[18] - j[50];
    q[51] = j[19] - j[51];
    q[52] = j[20] - j[52];
    q[53] = j[21] - j[53];
    q[54] = j[22] - j[54];
    q[55] = j[23] - j[55];
    q[56] = j[24] - j[56];
    q[57] = j[25] - j[57];
    q[58] = j[26] - j[58];
    q[59] = j[27] - j[59];
    q[60] = j[28] - j[60];
    q[61] = j[29] - j[61];
    q[62] = j[30] - j[62];
    q[63] = j[31] - j[63];
    j[0] = q[16] + q[0];
    j[1] = q[17] + q[1];
    j[2] = q[18] + q[2];
    j[3] = q[19] + q[3];
    j[4] = q[20] + q[4];
    j[5] = q[21] + q[5];
    j[6] = q[22] + q[6];
    j[7] = q[23] + q[7];
    j[8] = q[24] + q[8];
    j[9] = q[25] + q[9];
    j[10] = q[26] + q[10];
    j[11] = q[27] + q[11];
    j[12] = q[28] + q[12];
    j[13] = q[29] + q[13];
    j[14] = q[30] + q[14];
    j[15] = q[31] + q[15];
    j[16] = q[0] - q[16];
    j[17] = q[1] - q[17];
    j[18] = q[2] - q[18];
    j[19] = q[3] - q[19];
    j[20] = q[4] - q[20];
    j[21] = q[5] - q[21];
    j[22] = q[6] - q[22];
    j[23] = q[7] - q[23];
    j[24] = q[8] - q[24];
    j[25] = q[9] - q[25];
    j[26] = q[10] - q[26];
    j[27] = q[11] - q[27];
    j[28] = q[12] - q[28];
    j[29] = q[13] - q[29];
    j[30] = q[14] - q[30];
    j[31] = q[15] - q[31];
    q[0] = j[8] + j[0];
    q[1] = j[9] + j[1];
    q[2] = j[10] + j[2];
    q[3] = j[11] + j[3];
    q[4] = j[12] + j[4];
    q[5] = j[13] + j[5];
    q[6] = j[14] + j[6];
    q[7] = j[15] + j[7];
    q[8] = j[0] - j[8];
    q[9] = j[1] - j[9];
    q[10] = j[2] - j[10];
    q[11] = j[3] - j[11];
    q[12] = j[4] - j[12];
    q[13] = j[5] - j[13];
    q[14] = j[6] - j[14];
    q[15] = j[7] - j[15];
    j[0] = q[4] + q[0];
    j[1] = q[5] + q[1];
    j[2] = q[6] + q[2];
    j[3] = q[7] + q[3];
    j[4] = q[0] - q[4];
    j[5] = q[1] - q[5];
    j[6] = q[2] - q[6];
    j[7] = q[3] - q[7];
    j[8] = q[12] + q[8];
    j[9] = q[13] + q[9];
    j[10] = q[14] + q[10];
    j[11] = q[15] + q[11];
    j[12] = q[8] - q[12];
    j[13] = q[9] - q[13];
    j[14] = q[10] - q[14];
    j[15] = q[11] - q[15];
    q[0] = j[2] + j[0];
    q[1] = j[3] + j[1];
    q[2] = j[0] - j[2];
    q[3] = j[1] - j[3];
    q[4] = j[6] + j[4];
    q[5] = j[7] + j[5];
    q[6] = j[4] - j[6];
    q[7] = j[5] - j[7];
    q[8] = j[10] + j[8];
    q[9] = j[11] + j[9];
    q[10] = j[8] - j[10];
    q[11] = j[9] - j[11];
    q[12] = j[14] + j[12];
    q[13] = j[15] + j[13];
    q[14] = j[12] - j[14];
    q[15] = j[13] - j[15];
    j[0] = q[1] + q[0];
    j[1] = q[0] - q[1];
    j[2] = q[3] + q[2];
    j[3] = q[2] - q[3];
    j[4] = q[5] + q[4];
    j[5] = q[4] - q[5];
    j[6] = q[7] + q[6];
    j[7] = q[6] - q[7];
    j[8] = q[9] + q[8];
    j[9] = q[8] - q[9];
    j[10] = q[11] + q[10];
    j[11] = q[10] - q[11];
    j[12] = q[13] + q[12];
    j[13] = q[12] - q[13];
    j[14] = q[15] + q[14];
    j[15] = q[14] - q[15];
  };
  B.EP.a2u = function () {
    var j = "",
      aF = 64,
      q = "v",
      m = "t",
      n = "a",
      G = 5,
      y,
      W,
      k;
    for (y = aF >> 1; y > 0; y >>= 1, G--) {
      for (W = 0; W < aF; W++) {
        k = ((W >> G) & 1) != 0;
        if (k) {
          j +=
            m +
            "[" +
            W +
            "] = " +
            q +
            "[" +
            (-y + W) +
            "] - " +
            q +
            "[" +
            W +
            "];  ";
        } else {
          j +=
            m +
            "[" +
            W +
            "] = " +
            q +
            "[" +
            (y + W) +
            "] + " +
            q +
            "[" +
            W +
            "];  ";
        }
      }
      n = q;
      q = m;
      m = n;
      j += "\n";
    }
    console.log(j);
  };
  B.EP.asb = function (aF, j, q) {
    var m = j,
      n = q,
      G = m,
      W = 0,
      y,
      T,
      b;
    while (aF >> W != 2) W++;
    var k = W;
    for (y = aF >> 1; y > 0; y >>= 1, W--) {
      for (T = 0; T < aF; T++) {
        b = ((T >> W) & 1) != 0;
        if (b) n[T] = m[-y + T] - m[T];
        else n[T] = m[y + T] + m[T];
      }
      G = m;
      m = n;
      n = G;
    }
    if ((k & 1) == 1) for (y = 0; y < aF; y++) q[y] = m[y];
  };
  B.Vw = {};
  B.Vw.c1 = function (j, q, m, n, G, W, k, T, b) {
    var c = Date.now(),
      a = new Uint32Array(j.buffer),
      f = new Uint32Array(q.buffer),
      U = k / m,
      Z = T / n,
      h = 1 / U,
      u = 1 / Z,
      i = new Float64Array(2),
      x = 3,
      X = 1 / x,
      $ = 1 / (x * x),
      H = 0,
      C = 0,
      l = m,
      v = n;
    if (G) {
      H = G.x;
      C = G.y;
      l = G.r;
      v = G.$;
    }
    for (var K = 0; K < v; K++)
      for (var S = 0; S < l; S++) {
        var o = H + S,
          V = C + K,
          y = V * m + o,
          P = y << 1,
          z = y << 2;
        B.Vw.a5B(W, k, T, (o + 0.5) * U, (V + 0.5) * Z, i);
        var E = i[0] * h,
          A = i[1] * u;
        if (E == 0 && A == 0) f[y] = a[y];
        else {
          B.B.G3(o + E + 0.5, V + A + 0.5, a, m, n, f, y, b);
        }
      }
  };
  B.Vw.a5B = function (j, q, m, n, G, W) {
    n -= 0.499999;
    G -= 0.499999;
    var k = ~~n,
      T = ~~G,
      b = n - k,
      c = G - T,
      a = (1 - c) * (1 - b),
      f = (1 - c) * b,
      U = c * (1 - b),
      Z = c * b,
      h = k < q - 1 ? k + 1 : k,
      u = T < m - 1 ? T + 1 : T,
      i = (T * q + k) << 1,
      x = (T * q + h) << 1,
      X = (u * q + k) << 1,
      $ = (u * q + h) << 1;
    W[0] = a * j[i] + f * j[x] + U * j[X] + Z * j[$];
    W[1] = a * j[i + 1] + f * j[x + 1] + U * j[X + 1] + Z * j[$ + 1];
  };
  B.Vw.aLa = function (j, q, m, n, G) {
    var W = 1 / j,
      k = [-1, 1, -j, j],
      T = n.length;
    for (var b = 0; b < T; b++) {
      var y = n[b],
        c = y << 1,
        a = b << 1,
        f = ~~(y * W),
        U = y - j * f,
        Z = m[c],
        h = m[c + 1],
        u = 0,
        i = 0;
      if (U != 0 && U != j - 1) {
        var x = (y - 1) << 1,
          X = (y + 1) << 1,
          $ = m[x],
          H = m[X],
          C = m[x + 1],
          l = m[X + 1],
          v = Z - ($ + H) * 0.5,
          K = h - (C + l) * 0.5;
        u -= v * G;
        i -= K * G;
      }
      if (f != 0 && f != q - 1) {
        var x = (y - j) << 1,
          X = (y + j) << 1,
          $ = m[x],
          H = m[X],
          C = m[x + 1],
          l = m[X + 1],
          v = Z - ($ + H) * 0.5,
          K = h - (C + l) * 0.5;
        u -= v * G;
        i -= K * G;
      }
      m[c] = Z + u;
      m[c + 1] = h + i;
    }
  };
  B.Vw.ac7 = function (j, q) {
    var m = j + "," + q;
    if (B.Vw.an_ == m) return B.Vw.aoq;
    var n = (B.Vw.aoq = []);
    B.Vw.an_ = m;
    for (var y = 0; y <= 1e3; y++) {
      var G = y * 0.001,
        W = Math.sqrt(G),
        k = Math.exp(-4 * W),
        T = 0.96 * (1 - W * W),
        b = q * ((1 - j) * k + j * T);
      n[y] = b;
    }
    return n;
  };
  B.Vw.an_ = "";
  B.Vw.aoq = [];
  B.Vw.aEP = function (j, q, m, n, G, W, k, T, b, c, a, f, U) {
    var Z = Math.max(0, Math.floor(G - k - 1)),
      h = Math.min(q, Math.ceil(G + k + 1)),
      u = Math.max(0, Math.floor(W - k - 1)),
      i = Math.min(m, Math.ceil(W + k + 1)),
      x = 2 * q,
      X = k * k,
      $ = 1 / k,
      H = 0;
    if (U && (n == 3 || n == 6)) b = -b;
    var C = B.Vw.ac7(T, b);
    for (var l = u; l < i; l++)
      for (var v = Z; v < h; v++) {
        var y = l * q + v,
          K = y << 1,
          S = (G - v) * $,
          o = (W - l) * $,
          V = S * S + o * o;
        if (V < 1) {
          f[H] = y;
          var P = C[~~(V * 1e3)];
          if (n == 1) {
            j[K] = j[K] * (1 - P * 0.05);
            j[K + 1] = j[K + 1] * (1 - P * 0.05);
          } else {
            var z = 0,
              E = 0,
              Q,
              e,
              Y,
              d;
            if (n == 0) {
              z = c * P;
              E = a * P;
            } else if (n == 2) {
            } else if (n == 3) {
              z = P * o;
              E = -P * S;
            } else if (n == 4) {
              z = P * S;
              E = P * o;
            } else if (n == 5) {
              z = -P * S;
              E = -P * o;
            } else if (n == 6) {
              z = a * P;
              E = -c * P;
            }
            var A = j[K],
              N = j[K + 1];
            if (v == 0 || (v != q - 1 && z < 0)) {
              Q = 1 + j[K + 2] - A;
              Y = j[K + 3] - N;
            } else {
              Q = A - j[K - 2] + 1;
              Y = N - j[K - 1];
            }
            if (l == 0 || (l != m - 1 && E < 0)) {
              e = j[K + x] - A;
              d = 1 + j[K + x + 1] - N;
            } else {
              e = A - j[K - x];
              d = N - j[K - x + 1] + 1;
            }
            j[K] = -(Q * z + e * E - A);
            j[K + 1] = -(Y * z + d * E - N);
          }
          H++;
        }
      }
  };
  B.Vw.avD = function (j) {
    var q = j[0],
      m = j[0],
      n = j[1],
      G = j[1];
    for (var y = 0; y < j.length; y += 2) {
      var W = j[y],
        k = j[y + 1];
      if (W < q) q = W;
      else if (W > m) m = W;
      if (k < n) n = k;
      else if (k > G) G = k;
    }
    return [q, n, m, G];
  };
  B.aE3 = function (j, q, m, n, G) {
    function W(t, dq, D, ha) {
      return Math.sqrt((t - D) * (t - D) + (dq - ha) * (dq - ha));
    }
    function k(t, dq) {
      return t >= 0 && t < q && dq >= 0 && dq < m;
    }
    function T(t) {
      if (t < 0) return 0;
      if (t >= q) return q - 1;
      return t;
    }
    function b(t) {
      if (t < 0) return 0;
      if (t >= m) return m - 1;
      return t;
    }
    function c(y, t) {
      var dq = t[3] * (1 / 255),
        D = n[y] + t[0] * dq;
      if (D > 255) D = 255;
      n[y] = D;
      D = n[y + 1] + t[1] * dq;
      if (D > 255) D = 255;
      n[y + 1] = D;
      D = n[y + 2] + t[2] * dq;
      if (D > 255) D = 255;
      n[y + 2] = D;
    }
    function a(t, dq, D) {
      if (!I(t, dq)) return;
      if (D[3] < 0) D[3] = 0;
      c((dq * q + t) * 4, D);
    }
    function f(t) {
      var dq = t.slice(0, 3);
      dq[3] = 0;
      return dq;
    }
    var U = q / 800;
    function Z(t) {
      return Math.round(t * U);
    }
    function h() {
      for (var y = 0; y <= 300; y++) {
        s[y] = u(y);
      }
    }
    function u(m) {
      var t = 0.8,
        dq = 0.2,
        D = t * dq,
        ha = ((m / 60) % 2) - 1,
        am = D * (1 - ha * ha),
        k4 = dq - D,
        aA;
      if (m < 60) {
        aA = [D + k4, am, 0];
      } else if (m < 120) {
        aA = [am, D, 0];
      } else if (m < 180) {
        aA = [0, D, am];
      } else if (m < 240) {
        aA = [0, am, D];
      } else if (m < 300) {
        aA = [am, 0, D];
      } else {
        aA = [D, 0, am];
      }
      return [(aA[0] + k4) * 255, (aA[1] + k4) * 255, (aA[2] + k4) * 255];
    }
    function i(m) {
      return s[~~m];
    }
    function x(t) {
      return 1 - X(t);
    }
    function X(t) {
      return t - ~~t;
    }
    function $(t, dq, D, ha) {
      Y(t, dq, D, 0, dq + 1, 1, ha);
    }
    function H(t, dq, D, ha, am, k4) {
      Y(t, dq, D, 0, ha, 1, am, k4);
    }
    function C(t) {
      for (var y = 0; y < n.length; y += 4) {
        c(y, t);
      }
    }
    function l(t, dq, D, ha, am, k4, aA, ex) {
      v(t, dq, D, ha, am, 1, k4, aA, ex);
    }
    function v(t, dq, D, ha, am, k4, aA, ex, ac) {
      if (k4 == null) k4 = 0.5;
      if (aA == null) aA = 0;
      if (ex == null) ex = 0;
      if (ac == null) ac = !1;
      var eJ = t.x,
        h$ = t.y,
        da = D.slice(0),
        bb = ~~(D[3] * F);
      ha = ha * F;
      if (!ac) {
        dq = d(dq);
        am = d(am);
        aA = d(aA);
        ex = d(ex);
      }
      var gb = T(eJ - dq),
        fM = T(eJ + dq);
      for (var kS = gb; kS <= fM; kS++) {
        var cY = kS - eJ,
          cS = Math.floor(Math.sqrt(dq * dq - cY * cY)),
          k3 = b(h$ - cS),
          di = b(h$);
        for (var a7 = k3; a7 <= di; a7++) {
          var b0 = W(kS, a7, eJ, h$);
          if (b0 > dq || b0 <= dq - am) break;
          var e1 = (b0 - dq + am) / am;
          da[3] = bb - ha * (k4 == 1 ? e1 : Math.pow(e1, k4));
          c((a7 * q + kS) * 4, da);
        }
        k3 = b(h$ + cS);
        for (var a7 = k3; a7 > di; a7--) {
          var b0 = W(kS, a7, eJ, h$);
          if (b0 > dq || b0 <= dq - am) break;
          var e1 = (b0 - dq + am) / am;
          da[3] = bb - ha * (k4 == 1 ? e1 : Math.pow(e1, k4));
          c((a7 * q + kS) * 4, da);
        }
      }
      if (aA > 0) {
        Y(t, dq + aA, da, da[3], aA, 1, 0, 0, !0);
      }
      if (ex > 0) {
        Y(t, dq - am, O(D), -D[3], ex, 1, 0, 0, !0);
      }
    }
    function K(t, dq, D, ha, am, k4) {
      Y(t, dq, D, D[3], dq + 1, 1, ha, am, k4);
    }
    function S(t, dq, D, ha, am) {
      if (am == null) am = !1;
      var k4 = t.x,
        aA = t.y;
      ha *= F;
      if (!am) {
        dq = d(dq);
        D = d(D);
      }
      var ex = T(k4 - dq),
        ac = T(k4 + dq);
      for (var eJ = ex; eJ < ac; eJ++) {
        var h$ = eJ - k4,
          da = ~~Math.sqrt(dq * dq - h$ * h$),
          bb = b(aA - da),
          gb = b(aA);
        for (var fM = bb; fM <= gb; fM++) {
          var kS = W(eJ, fM, k4, aA);
          if (kS > dq || kS <= dq - D) break;
          var cY = (dq - kS) / D,
            cS = i(300 * cY);
          cS[3] = ha;
          c((fM * q + eJ) * 4, cS);
        }
        bb = b(aA + da);
        for (var fM = bb; fM > gb; fM--) {
          var kS = W(eJ, fM, k4, aA);
          if (kS > dq || kS <= dq - D) break;
          var cY = (dq - kS) / D,
            cS = i(300 * cY);
          cS[3] = ha;
          c((fM * q + eJ) * 4, cS);
        }
      }
    }
    function o(p, t) {
      var dq = p.IM,
        D = p.g9,
        ha = t.slice(0),
        am = t[3] * F,
        k4 = Math.abs(D.y - dq.y) > Math.abs(D.x - dq.x);
      if (k4) {
        var aA = dq.x;
        dq.x = dq.y;
        dq.y = aA;
        aA = D.x;
        D.x = D.y;
        D.y = aA;
      }
      if (dq.x > D.x) {
        var aA = dq;
        dq = D;
        D = aA;
      }
      var ex = D.x - dq.x,
        ac = D.y - dq.y,
        eJ = ex == 0 ? 1 : ac / ex,
        h$ = Math.round(dq.x),
        da = dq.y + eJ * (h$ - dq.x),
        bb = x(dq.x + 0.5),
        gb = h$,
        fM = ~~da;
      if (k4) {
        ha[3] = am * x(da) * bb;
        a(fM, gb, ha);
        ha[3] = am * X(da) * bb;
        a(fM + 1, gb, ha);
      } else {
        ha[3] = am * x(da) * bb;
        a(gb, fM, ha);
        ha[3] = am * X(da) * bb;
        a(gb, fM + 1, ha);
      }
      var kS = da - eJ;
      h$ = Math.round(D.x);
      da = D.y + eJ * (h$ - D.x);
      bb = X(D.x + 0.5);
      var cY = h$,
        cS = ~~da;
      if (k4) {
        ha[3] = am * x(da) * bb;
        a(cS, cY, ha);
        ha[3] = am * X(da) * bb;
        a(cS + 1, cY, ha);
      } else {
        ha[3] = am * x(da) * bb;
        a(cY, cS, ha);
        ha[3] = am * X(da) * bb;
        a(cY, cS + 1, ha);
      }
      if (k4) {
        for (var k3 = gb + 1; k3 <= cY - 1; k3++) {
          ha[3] = am * x(kS);
          a(~~kS, k3, ha);
          ha[3] = am * X(kS);
          a(~~kS + 1, k3, ha);
          kS += eJ;
        }
      } else {
        for (var k3 = gb + 1; k3 <= cY - 1; k3++) {
          ha[3] = am * x(kS);
          a(k3, ~~kS, ha);
          ha[3] = am * X(kS);
          a(k3, ~~kS + 1, ha);
          kS += eJ;
        }
      }
    }
    function V(t, dq, D, ha) {
      for (var y = 0; y < 4; y++) {
        var am = t.VN(dq + 1.3 * y, D);
        o(am, ha, 1);
      }
    }
    function ea(t, dq) {
      this.x = Math.round(t);
      this.y = Math.round(dq);
    }
    var P = Math.PI / 180;
    ea.prototype.VN = function (t, dq) {
      t = t * P;
      var D = this.x + dq * Math.cos(t),
        ha = this.y + dq * Math.sin(t);
      return new z(this.x, this.y, D, ha);
    };
    ea.prototype.aJ2 = function (t, dq) {
      t = t * P;
      var D = this.Bi + dq * Math.cos(t),
        ha = this.by + dq * Math.sin(t);
      return new ea(D, ha);
    };
    function z(t, dq, D, ha) {
      this.IM = new ea(t, dq);
      this.g9 = new ea(D, ha);
    }
    z.prototype.E7 = function (t) {
      var dq = t * this.IM.x + (1 - t) * this.g9.x,
        D = t * this.IM.y + (1 - t) * this.g9.y;
      return new ea(dq, D);
    };
    var E = l,
      A = K,
      N = $,
      Q = H,
      e = S,
      Y = v,
      d = Z,
      I = k,
      O = f,
      s = [];
    h();
    for (var y = 0; y < j.length; y++) {
      n[y] = j[y];
    }
    var p = new z(q * G[2], m * G[3], q / 2, m / 2),
      F = G[1],
      g = [];
    g[0] = function w() {
      var t = [80, 40, 15, 60],
        D = 0,
        ha = 0;
      N(p.E7(1.4), 260, t, 10);
      N(p.E7(1), 100, [240, 50, 50, 30], 30);
      A(p.E7(1), 60, [255, 40, 0, 40]);
      var dq = [255, 255, 255, 255];
      Y(p.E7(1), 70, dq, dq[3], 58, 0.5);
      N(p.E7(1), 12, dq);
      dq[3] = 40;
      E(p.E7(1), 150, dq, dq[3], 150);
      for (var y = 0; y < 40; y++) {
        D += Math.random() * 25;
        ha = Math.random() * d(300) + d(100);
        var am = p.E7(1).VN(D, ha);
        o(p.E7(1).VN(D, ha), [110, 110, 110, 30]);
      }
      A(p.E7(1), 130, [255, 255, 255, 8]);
      var k4 = [170, 30, 23, 70];
      Q(p.E7(1), 70, k4, 1, 3, 3);
      var aA = [60, 60, 130, 40];
      N(p.E7(0.47), 44, aA, 5);
      N(p.E7(0.43), 22, aA, 3);
      aA[3] = 16;
      N(p.E7(0.53), 15, aA, 2);
      var ex = [138, 94, 42, 100];
      N(p.E7(0.2), 16, ex, 2);
      var ac = [130, 255, 170, 180];
      A(p.E7(0), 4, ac);
      A(p.E7(-0.25), 5, ac);
      ex = [150, 90, 0, 50];
      E(p.E7(-0.45), 55, O(ex), -ex[3], 40, 2);
      N(p.E7(-0.42), 35, ex, 2);
      N(p.E7(-0.5), 15, ex, 2);
      e(p.E7(-1.28), 145, 11, 70);
      var eJ = i(0);
      eJ[3] = 50;
      E(p.E7(-1.28), 149, eJ, eJ[3], 4);
      eJ = i(300);
      eJ[3] = 50;
      E(p.E7(-1.28), 155 - 1, O(eJ), -eJ[3], 3);
      var h$ = [130, 130, 10, 50];
      Q(p.E7(-1), 73, h$, 3, 2);
      var da = [40, 130, 70, 40];
      E(p.E7(-1), 70, O(da), -da[3], 35);
      da = [40, 170, 60, 50];
      N(p.E7(-0.7), 25, da, 4);
      var da = [70, 110, 50, 60];
      E(p.E7(1.3), 30, O(da), -da[3], 11, 3);
      aA = [0, 50, 210, 80];
      A(p.E7(-0.72), 20, aA);
    };
    g[1] = function r() {
      A(p.E7(1), 150, [240, 70, 70, 60]);
      N(p.E7(1), 100, [200, 60, 60, 40], 30);
      var t = [255, 255, 255, 255],
        dq = 0,
        D = 0;
      Y(p.E7(1), 75, t, t[3], 63);
      N(p.E7(1), 12, t);
      A(p.E7(1), 270, [200, 200, 200, 20], 10);
      for (var y = 0; y < 10; y++) {
        dq += 10 + Math.random() * 40;
        D = Math.random() * d(250) + d(80);
        var ha = p.E7(1).VN(dq, D);
        o(ha, [110, 110, 110, 35]);
      }
      dq = 5;
      D = 100;
      for (var y = 0; y < 12; y++) {
        dq += 30;
        V(p.E7(1), dq, D, [90, 90, 90, 40]);
      }
      var am = [150, 40, 23, 100];
      Q(p.E7(1), 70, am, 1, 3, 3);
      var k4 = [30, 100, 60, 40];
      A(p.E7(-0.9), 180, [255, 255, 255, 20]);
      N(p.E7(-0.9), 140, k4, 15);
      var aA = [170, 80, 25, 15];
      Q(p.E7(-0.9), 120, aA, 1, 4, 4);
      var ex = [110, 240, 190, 200];
      A(p.E7(-0.6), 3, ex);
      ex[3] = 100;
      A(p.E7(-0.6), 7, ex);
      var ac = [230, 120, 40, 85];
      A(p.E7(-0.73), 9, ac);
      var eJ = [60, 60, 190, 50];
      N(p.E7(0.3), 28, eJ, 6);
      eJ[3] = 25;
      N(p.E7(0.34), 20, eJ, 3);
    };
    g[2] = function eQ() {
      var t = [255, 255, 255, 255],
        D = 0,
        ha = 0;
      N(p.E7(1), 13, t);
      Y(p.E7(1), 150, t, t[3], 137);
      var dq = [120, 80, 35, 20];
      N(p.E7(1.4), 260, dq, 10);
      for (var y = 0; y < 40; y++) {
        D += 5 + Math.random() * 30;
        ha = Math.random() * d(300);
        o(p.E7(1).VN(D, ha), [110, 110, 110, 20]);
      }
      var am = [10, 30, 255, 30];
      N(p.E7(1), 70, am, 50);
      var k4 = [15, 90, 170, 15];
      N(p.E7(1.5), 60, k4);
      var aA = [220, 220, 20, 50];
      N(p.E7(-1.15), 8, aA, 2);
      var t = [255, 255, 255, 40];
      A(p.E7(-1.18), 6, t);
      A(p.E7(-1.18), 4, t);
      aA = [110, 110, 10, 8];
      E(p.E7(-1.2), 32, O(aA), -aA[3], 20, 3);
      var ex = [5, 0, 16, 255];
      for (var y = 0; y < 4; y++) {
        N(p.E7(-1.36), 10, ex, 3);
      }
      var ac = [90, 200, 150, 20],
        eJ = ac.slice(0);
      eJ[3] *= 2;
      N(p.E7(-1.32), 7, eJ, 3);
      N(p.E7(-1.36), 7, eJ, 3);
      N(p.E7(-1.4), 7, eJ, 3);
      var t = [230, 230, 230, 100];
      A(p.E7(-1.36), 2, t);
      t[3] = 3;
      N(p.E7(-0.55), 10, t);
      aA = [120, 100, 10, 18];
      N(p.E7(-0.55), 160, aA, 8);
      N(p.E7(-0.55), 80, aA, 4);
      ac[3] = 3;
      eJ[3] = 6;
      E(p.E7(-0.49), 13, O(eJ), -eJ[3], 13, 2);
      E(p.E7(-0.55), 13, O(eJ), -eJ[3], 13, 2);
      ac[3] = 20;
      N(p.E7(0.15), 25, ac, 3);
      aA[3] = 100;
      A(p.E7(-0.52), 3, aA);
      aA = [200, 200, 50, 40];
      N(p.E7(0.27), 1, aA, 4);
      var h$ = [150, 40, 23, 30];
      E(p.E7(1), 80, O(h$), -h$[3], 2, 1);
    };
    return g[G[0]]();
  };
  B.OC = {};
  B.OC.up = function (j) {
    var q = j.length,
      aF = j[0].length,
      m = new Array(aF);
    for (var y = 0; y < aF; y++) m[y] = new Array(q);
    for (var y = 0; y < aF; y++) for (var n = 0; n < q; n++) m[y][n] = j[n][y];
    return m;
  };
  B.OC.mN = function (j, q) {
    var m = j.length,
      aF = j[0].length,
      n = new Array(m);
    for (var y = 0; y < m; y++) n[y] = new Array(aF);
    for (var y = 0; y < m; y++)
      for (var G = 0; G < aF; G++) n[y][G] = j[y][G] - q[y][G];
    return n;
  };
  B.OC.add = function (j, q) {
    var m = j.length,
      aF = j[0].length,
      n = new Array(m);
    for (var y = 0; y < m; y++) n[y] = new Array(aF);
    for (var y = 0; y < m; y++)
      for (var G = 0; G < aF; G++) n[y][G] = j[y][G] + q[y][G];
    return n;
  };
  B.OC.multiply = function (j, q) {
    var m = j.length,
      n = j[0].length,
      aF = q[0].length;
    if (n != q.length) throw "e";
    var G = new Array(m);
    for (var y = 0; y < m; y++) G[y] = new Array(aF);
    if ((n & 1) != 0)
      for (var y = 0; y < m; y++) {
        var W = j[y],
          k = G[y];
        for (var T = 0; T < aF; T++) {
          var b = 0;
          for (var c = 0; c < n; c++) b += W[c] * q[c][T];
          k[T] = b;
        }
      }
    else
      for (var y = 0; y < m; y++) {
        var W = j[y],
          k = G[y];
        for (var T = 0; T < aF; T++) {
          var b = 0;
          for (var c = 0; c < n; c += 2)
            b += W[c] * q[c][T] + W[c + 1] * q[c + 1][T];
          k[T] = b;
        }
      }
    return G;
  };
  B.OC.cg = function (j, q) {
    var m = j.length,
      aF = j[0].length,
      n = new Array(m);
    for (var y = 0; y < m; y++) {
      var G = 0;
      for (var W = 0; W < aF; W++) G += j[y][W] * q[W];
      n[y] = G;
    }
    return n;
  };
  B.OC.tq = function (j, q) {
    var m = [];
    for (var y = 0; y < j; y++) {
      m.push([]);
      for (var n = 0; n < q; n++) m[y].push(0);
    }
    return m;
  };
  B.OC.a40 = function (j) {
    for (var y = 0; y < j.length; y++) console.log(JSON.stringify(j[y]));
  };
  B.OC.a9H = function (j) {
    var q = [];
    for (var y = 0; y < j.length; y++) q.push(j[y].join(","));
    return "[" + q.join(";") + "]";
  };
  B.OC.dl = function (j, q) {
    var m = j.length;
    for (var n = 0; n < m; n++) {
      var G = 0,
        W = Number.NEGATIVE_INFINITY;
      for (var y = n; y < m; y++)
        if (Math.abs(j[y][n]) > W) {
          G = y;
          W = Math.abs(j[y][n]);
        }
      B.OC.aiL(j, n, G);
      for (var y = n + 1; y < m; y++) {
        if (j[n][n] == 0) return 1;
        var k = j[y][n] / j[n][n];
        for (var T = n; T < m + 1; T++) j[y][T] -= j[n][T] * k;
      }
    }
    for (var y = m - 1; y >= 0; y--) {
      if (j[y][y] == 0) return 1;
      var b = j[y][m] / j[y][y];
      q[y] = b;
      for (var T = y - 1; T >= 0; T--) {
        j[T][m] -= j[T][y] * b;
        j[T][y] = 0;
      }
    }
    return 0;
  };
  B.OC.aiL = function (j, q, m) {
    var n = j[q];
    j[q] = j[m];
    j[m] = n;
  };
  B.OC.ay$ = function (j) {
    var q = j.length,
      m = B.OC.tq(q, q);
    for (var y = 0; y < q; y++) m[y][y] = j[y];
    return m;
  };
  B.OC.arZ = function (j) {
    var q = j.length,
      m = j[0].length,
      n = new Array(q);
    for (var y = 0; y < q; y++) {
      n[y] = 0;
      for (var G = 0; G < m; G++) n[y] += j[y][G];
      n[y] /= m;
    }
    return n;
  };
  B.OC.nD = function (j) {
    var q = 0;
    for (var y = 0; y < j.length; y++) q += j[y] * j[y];
    return Math.sqrt(q);
  };
  B.kz = {};
  B.kz.pT = function (j) {
    var q = ~~(j + 0.5);
    return q < 0 ? 0 : q > 255 ? 255 : q;
  };
  B.kz.oF = function (j, q, m) {
    function n(b) {
      return Math.max(0, Math.min(1, b));
    }
    var G = j.o.length;
    for (var y = 0; y < G; y++) {
      var W = j.o[y],
        k = j.i[y],
        T = j.X[y];
      q.o[y] = n(m[0] * W + m[1] * k + m[2] * T + m[3]);
      q.i[y] = n(m[4] * W + m[5] * k + m[6] * T + m[7]);
      q.X[y] = n(m[8] * W + m[9] * k + m[10] * T + m[11]);
    }
  };
  B.kz.apb = function (j, q, m) {
    var n = B.oM(j),
      G = n == 8 ? 255 : n == 16 ? 65535 : 1,
      W = 1 / G,
      k = j.length;
    function T(f) {
      return Math.max(0, Math.min(1, f));
    }
    for (var y = 0; y < k; y += 4) {
      var b = j[y] * W,
        c = j[y + 1] * W,
        a = j[y + 2] * W;
      q[y] = G * T(m[0] * b + m[1] * c + m[2] * a + m[3]);
      q[y + 1] = G * T(m[4] * b + m[5] * c + m[6] * a + m[7]);
      q[y + 2] = G * T(m[8] * b + m[9] * c + m[10] * a + m[11]);
    }
  };
  B.kz.a1M = function (j) {
    var q = j[0] + j[1] + j[2],
      m = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1];
    if (q == 1) {
      var n = j.indexOf(1);
      m[n] = m[n + 4] = m[n + 8] = 1;
    } else {
      m[0] = j[0];
      m[5] = j[1];
      m[10] = j[2];
    }
    return m;
  };
  B.kz.vT = function (j, q, m) {
    return [1, 0, 0, j, 0, 1, 0, q, 0, 0, 1, m, 0, 0, 0, 1];
  };
  B.kz.Hq = function (j, q, m) {
    return [j, 0, 0, 0, 0, q, 0, 0, 0, 0, m, 0, 0, 0, 0, 1];
  };
  B.kz.aeM = function (j) {
    return [j[0], j[1], j[2], j[4], j[5], j[6], j[8], j[9], j[10]];
  };
  B.kz.PA = function (j) {
    return [
      j[0],
      j[1],
      j[2],
      0,
      j[3],
      j[4],
      j[5],
      0,
      j[6],
      j[7],
      j[8],
      0,
      0,
      0,
      0,
      1,
    ];
  };
  B.kz.$j = function (j, q) {
    return [
      j[0] * q[0] + j[1] * q[1] + j[2] * q[2] + j[3] * q[3],
      j[4] * q[0] + j[5] * q[1] + j[6] * q[2] + j[7] * q[3],
      j[8] * q[0] + j[9] * q[1] + j[10] * q[2] + j[11] * q[3],
      j[12] * q[0] + j[13] * q[1] + j[14] * q[2] + j[15] * q[3],
    ];
  };
  B.kz.up = function (j) {
    var q = [];
    q[0] = j[0];
    q[1] = j[4];
    q[2] = j[8];
    q[3] = j[12];
    q[4] = j[1];
    q[5] = j[5];
    q[6] = j[9];
    q[7] = j[13];
    q[8] = j[2];
    q[9] = j[6];
    q[10] = j[10];
    q[11] = j[14];
    q[12] = j[3];
    q[13] = j[7];
    q[14] = j[11];
    q[15] = j[15];
    return q;
  };
  B.kz.add = function (j, q) {
    var m = j.slice(0);
    for (var y = 0; y < 16; y++) m[y] += q[y];
    return m;
  };
  B.kz.multiply = function (j, q) {
    var m = [];
    m[0] = j[0] * q[0] + j[1] * q[4] + j[2] * q[8] + j[3] * q[12];
    m[1] = j[0] * q[1] + j[1] * q[5] + j[2] * q[9] + j[3] * q[13];
    m[2] = j[0] * q[2] + j[1] * q[6] + j[2] * q[10] + j[3] * q[14];
    m[3] = j[0] * q[3] + j[1] * q[7] + j[2] * q[11] + j[3] * q[15];
    m[4] = j[4] * q[0] + j[5] * q[4] + j[6] * q[8] + j[7] * q[12];
    m[5] = j[4] * q[1] + j[5] * q[5] + j[6] * q[9] + j[7] * q[13];
    m[6] = j[4] * q[2] + j[5] * q[6] + j[6] * q[10] + j[7] * q[14];
    m[7] = j[4] * q[3] + j[5] * q[7] + j[6] * q[11] + j[7] * q[15];
    m[8] = j[8] * q[0] + j[9] * q[4] + j[10] * q[8] + j[11] * q[12];
    m[9] = j[8] * q[1] + j[9] * q[5] + j[10] * q[9] + j[11] * q[13];
    m[10] = j[8] * q[2] + j[9] * q[6] + j[10] * q[10] + j[11] * q[14];
    m[11] = j[8] * q[3] + j[9] * q[7] + j[10] * q[11] + j[11] * q[15];
    m[12] = j[12] * q[0] + j[13] * q[4] + j[14] * q[8] + j[15] * q[12];
    m[13] = j[12] * q[1] + j[13] * q[5] + j[14] * q[9] + j[15] * q[13];
    m[14] = j[12] * q[2] + j[13] * q[6] + j[14] * q[10] + j[15] * q[14];
    m[15] = j[12] * q[3] + j[13] * q[7] + j[14] * q[11] + j[15] * q[15];
    return m;
  };
  B.kz.BR = function (j) {
    var q = [];
    q[0] =
      j[5] * j[10] * j[15] -
      j[5] * j[14] * j[11] -
      j[6] * j[9] * j[15] +
      j[6] * j[13] * j[11] +
      j[7] * j[9] * j[14] -
      j[7] * j[13] * j[10];
    q[1] =
      -j[1] * j[10] * j[15] +
      j[1] * j[14] * j[11] +
      j[2] * j[9] * j[15] -
      j[2] * j[13] * j[11] -
      j[3] * j[9] * j[14] +
      j[3] * j[13] * j[10];
    q[2] =
      j[1] * j[6] * j[15] -
      j[1] * j[14] * j[7] -
      j[2] * j[5] * j[15] +
      j[2] * j[13] * j[7] +
      j[3] * j[5] * j[14] -
      j[3] * j[13] * j[6];
    q[3] =
      -j[1] * j[6] * j[11] +
      j[1] * j[10] * j[7] +
      j[2] * j[5] * j[11] -
      j[2] * j[9] * j[7] -
      j[3] * j[5] * j[10] +
      j[3] * j[9] * j[6];
    q[4] =
      -j[4] * j[10] * j[15] +
      j[4] * j[14] * j[11] +
      j[6] * j[8] * j[15] -
      j[6] * j[12] * j[11] -
      j[7] * j[8] * j[14] +
      j[7] * j[12] * j[10];
    q[5] =
      j[0] * j[10] * j[15] -
      j[0] * j[14] * j[11] -
      j[2] * j[8] * j[15] +
      j[2] * j[12] * j[11] +
      j[3] * j[8] * j[14] -
      j[3] * j[12] * j[10];
    q[6] =
      -j[0] * j[6] * j[15] +
      j[0] * j[14] * j[7] +
      j[2] * j[4] * j[15] -
      j[2] * j[12] * j[7] -
      j[3] * j[4] * j[14] +
      j[3] * j[12] * j[6];
    q[7] =
      j[0] * j[6] * j[11] -
      j[0] * j[10] * j[7] -
      j[2] * j[4] * j[11] +
      j[2] * j[8] * j[7] +
      j[3] * j[4] * j[10] -
      j[3] * j[8] * j[6];
    q[8] =
      j[4] * j[9] * j[15] -
      j[4] * j[13] * j[11] -
      j[5] * j[8] * j[15] +
      j[5] * j[12] * j[11] +
      j[7] * j[8] * j[13] -
      j[7] * j[12] * j[9];
    q[9] =
      -j[0] * j[9] * j[15] +
      j[0] * j[13] * j[11] +
      j[1] * j[8] * j[15] -
      j[1] * j[12] * j[11] -
      j[3] * j[8] * j[13] +
      j[3] * j[12] * j[9];
    q[10] =
      j[0] * j[5] * j[15] -
      j[0] * j[13] * j[7] -
      j[1] * j[4] * j[15] +
      j[1] * j[12] * j[7] +
      j[3] * j[4] * j[13] -
      j[3] * j[12] * j[5];
    q[11] =
      -j[0] * j[5] * j[11] +
      j[0] * j[9] * j[7] +
      j[1] * j[4] * j[11] -
      j[1] * j[8] * j[7] -
      j[3] * j[4] * j[9] +
      j[3] * j[8] * j[5];
    q[12] =
      -j[4] * j[9] * j[14] +
      j[4] * j[13] * j[10] +
      j[5] * j[8] * j[14] -
      j[5] * j[12] * j[10] -
      j[6] * j[8] * j[13] +
      j[6] * j[12] * j[9];
    q[13] =
      j[0] * j[9] * j[14] -
      j[0] * j[13] * j[10] -
      j[1] * j[8] * j[14] +
      j[1] * j[12] * j[10] +
      j[2] * j[8] * j[13] -
      j[2] * j[12] * j[9];
    q[14] =
      -j[0] * j[5] * j[14] +
      j[0] * j[13] * j[6] +
      j[1] * j[4] * j[14] -
      j[1] * j[12] * j[6] -
      j[2] * j[4] * j[13] +
      j[2] * j[12] * j[5];
    q[15] =
      j[0] * j[5] * j[10] -
      j[0] * j[9] * j[6] -
      j[1] * j[4] * j[10] +
      j[1] * j[8] * j[6] +
      j[2] * j[4] * j[9] -
      j[2] * j[8] * j[5];
    var m = j[0] * q[0] + j[1] * q[4] + j[2] * q[8] + j[3] * q[12];
    for (var y = 0; y < 16; y++) q[y] /= m;
    return q;
  };
  B.kz.aE6 = function (j) {
    var q = [],
      m =
        j[5] * j[10] * j[15] -
        j[5] * j[14] * j[11] -
        j[6] * j[9] * j[15] +
        j[6] * j[13] * j[11] +
        j[7] * j[9] * j[14] -
        j[7] * j[13] * j[10],
      n =
        -j[4] * j[10] * j[15] +
        j[4] * j[14] * j[11] +
        j[6] * j[8] * j[15] -
        j[6] * j[12] * j[11] -
        j[7] * j[8] * j[14] +
        j[7] * j[12] * j[10],
      G =
        j[4] * j[9] * j[15] -
        j[4] * j[13] * j[11] -
        j[5] * j[8] * j[15] +
        j[5] * j[12] * j[11] +
        j[7] * j[8] * j[13] -
        j[7] * j[12] * j[9],
      W =
        -j[4] * j[9] * j[14] +
        j[4] * j[13] * j[10] +
        j[5] * j[8] * j[14] -
        j[5] * j[12] * j[10] -
        j[6] * j[8] * j[13] +
        j[6] * j[12] * j[9];
    return j[0] * m + j[1] * n + j[2] * G + j[3] * W;
  };
  B.kz.w5 = function (j, q, m, n) {
    var G = Math.sin(n),
      W = Math.cos(n),
      k = 1 / Math.sqrt(j * j + q * q + m * m);
    j *= k;
    q *= k;
    m *= k;
    return B.kz.PA([
      j * j * (1 - W) + W,
      j * q * (1 - W) - m * G,
      j * m * (1 - W) + q * G,
      j * q * (1 - W) + m * G,
      q * q * (1 - W) + W,
      q * m * (1 - W) - j * G,
      j * m * (1 - W) - q * G,
      q * m * (1 - W) + j * G,
      m * m * (1 - W) + W,
    ]);
  };
  B.kz.Dg = B.kz.PA([
    3.1338561, -1.6168667, -0.4906146, -0.9787684, 1.9161415, 0.033454,
    0.0719453, -0.2289914, 1.4052427,
  ]);
  B.kz.a3L = B.kz.PA([
    1.9624274, -0.6105343, -0.3413404, -0.9787684, 1.9161415, 0.033454,
    0.0286869, -0.1406752, 1.3487655,
  ]);
  B.kz.aC9 = B.kz.PA([
    1.3459433, -0.2556075, -0.0511118, -0.5445989, 1.5081673, 0.0205351, 0, 0,
    1.2118128,
  ]);
  B.kz.a2L = B.kz.PA([
    2.1861968, -0.8165993, -0.3530805, -0.8443876, 1.7943237, 0.024049,
    0.0479222, -0.1018347, 1.2792565,
  ]);
  B.kz.awZ = B.kz.BR(B.kz.Dg);
  B.RF = {};
  B.RF.AW = new Uint32Array(1);
  B.RF.ai6 = function (j, q, m, n, G, W) {
    var k = new Uint32Array(j),
      T = 0,
      b = B.RF.AW;
    if (b.length < q * 4) B.RF.AW = b = new Uint32Array(q * 4);
    var c = new Float64Array(b.buffer);
    for (var y = 0; y < q; y += 2) {
      var a = G[y],
        f = G[y + 1],
        U = W[y],
        Z = W[y + 1];
      b[T] = f;
      c[(T + 2) >> 1] = U;
      b[T + 1] = k[a];
      k[a] = T + 1;
      T += 4;
      b[T] = a;
      c[(T + 2) >> 1] = Z;
      b[T + 1] = k[f];
      k[f] = T + 1;
      T += 4;
    }
    return { ft: b, ahh: c, atU: k };
  };
  B.RF.dl = function (j, q, m, n, G, W, k) {
    var T = 1,
      b = B.RF.ai6(j, q, m, n, G, W),
      c = b.ft,
      a = b.ahh,
      f = b.atU,
      U = new Uint32Array(j),
      Z = new B.RF.Tc(j),
      u = 1,
      H = 0;
    Z.push(m);
    Z.push(n);
    var h = new B.RF.Tc(j),
      i = new Uint8Array(j),
      x = new Uint32Array(j);
    i[m] = 1;
    i[n] = 2;
    var X = new Uint32Array(j),
      $ = new Uint32Array(j);
    $[m] = $[n] = 0;
    X[m] = X[n] = 1;
    while (!0) {
      var C = -1,
        P = 0,
        N = 1e30;
      while (!Z.sl() && C == -1) {
        var l = Z.top(),
          v = i[l],
          K = f[l] - 1;
        while (K != -1) {
          var S = c[K],
            o = i[S],
            V = K ^ ((v - 1) << 2);
          if (a[(V + 2) >> 1] != 0) {
            if (o == 0) {
              B.RF.K4(l, K, S, i, x, $, X);
              Z.push(S);
            } else if (o == v && X[S] <= X[l] && $[S] > $[l])
              B.RF.K4(l, K, S, i, x, $, X);
            else if (o != v) {
              C = V;
            }
          }
          K = c[K + 1] - 1;
        }
        if (C != -1) break;
        Z.pop();
      }
      if (C == -1) {
        break;
      }
      u++;
      var z = C;
      while (z != -1) {
        U[P] = z;
        P++;
        z = x[c[z ^ 4]] - 1;
      }
      var E = P >> 1;
      for (var y = 0; y < E; y++) {
        var A = U[y];
        U[y] = U[P - y - 1];
        U[P - y - 1] = A;
      }
      z = x[c[C]] - 1;
      while (z != -1) {
        U[P] = z ^ 4;
        P++;
        z = x[c[z ^ 4]] - 1;
      }
      for (var y = 0; y < P; y++) N = Math.min(N, a[(U[y] + 2) >> 1]);
      H += N;
      if (H >= k) return { UU: null, Yo: H };
      for (var y = 0; y < P; y++) {
        var Q = U[y],
          e = Q ^ 4,
          l = c[e],
          S = c[Q];
        a[(Q + 2) >> 1] -= N;
        a[(e + 2) >> 1] += N;
        if (a[(Q + 2) >> 1] == 0 && i[l] == i[S]) {
          if (i[l] == 1) {
            x[S] = 0;
            h.push(S);
          }
          if (i[l] == 2) {
            x[l] = 0;
            h.push(l);
          }
        }
      }
      while (!h.sl()) {
        var l = h.pop(),
          v = i[l],
          K = f[l] - 1,
          Y = v == 1 ? 4 : 0,
          d = 0,
          I = 0,
          O = 1e9;
        while (K != -1) {
          var S = c[K],
            s = K ^ 4,
            V = K ^ Y;
          if (
            i[S] == v &&
            a[(V + 2) >> 1] > 0 &&
            B.RF.afv(S, m, n, x, c, u, X, $) + 1 < O
          ) {
            d = S;
            I = s;
            O = $[S] + 1;
          }
          K = c[K + 1] - 1;
        }
        if (I != 0) {
          B.RF.K4(d, I, l, i, x, $, X);
          continue;
        }
        K = f[l] - 1;
        while (K != -1) {
          var S = c[K],
            V = K ^ Y;
          if (i[S] == v) {
            if (a[(V + 2) >> 1] > 0) {
              Z.push(S);
            }
            if (x[S] == K + 1) {
              x[S] = 0;
              h.push(S);
            }
          }
          K = c[K + 1] - 1;
        }
        i[l] = 0;
        Z.remove(l);
      }
    }
    var p = [];
    for (var y = 0; y < q; y += 2) {
      var l = G[y],
        S = G[y + 1];
      if (i[l] == 1 && i[S] != 1) {
        p.push(y >> 1);
      }
      if (i[S] == 1 && i[l] != 1) {
        p.push((q + y) >> 1);
      }
    }
    return { UU: p, Yo: H };
  };
  B.RF.K4 = function (j, q, m, n, G, W, k) {
    n[m] = n[j];
    G[m] = q + 1;
    W[m] = W[j] + 1;
    k[m] = k[j];
  };
  B.RF.afv = function (j, q, m, n, G, W, k, T) {
    var b = j,
      c = n[j] - 1,
      a = 0;
    while (c != -1 && k[j] != W) {
      j = G[c ^ 4];
      c = n[j] - 1;
      a++;
    }
    if (c == -1 && j != q && j != m) return 1e9;
    var f = T[j] + a;
    a = 0;
    c = n[b] - 1;
    while (b != j) {
      T[b] = f - a;
      a++;
      k[b] = W;
      b = G[c ^ 4];
      c = n[b] - 1;
    }
    return f;
  };
  B.RF.a21 = function (j, q, m, n, G, W) {
    var k = B.RF.ai6(j, q, m, n, G, W),
      T = k.ft,
      b = k.ahh,
      c = k.atU,
      a = 0,
      f = 0,
      U = new Uint32Array(j * 2),
      Z = new B.RF.aEx(j),
      h = 0;
    while (!0) {
      Z.reset();
      Z.push(m);
      for (var y = 0; y < j; y++) U[y << 1] = 0;
      while (!Z.sl()) {
        var u = Z.pop(),
          i = c[u] - 1;
        while (i != -1) {
          h = T[i];
          if (U[h << 1] == 0 && b[(i + 2) >> 1] > 0 && h != m) {
            U[h << 1] = u + 1;
            U[(h << 1) + 1] = i;
            Z.push(h);
          }
          i = T[i + 1] - 1;
        }
        if (U[n << 1] != 0) {
          break;
        }
      }
      if (U[n << 1] == 0) {
        break;
      }
      var x = 1e30;
      h = n;
      while (!0) {
        var X = U[h << 1] - 1;
        if (X == -1) break;
        var $ = U[(h << 1) + 1];
        x = Math.min(x, b[($ + 2) >> 1]);
        h = X;
      }
      h = n;
      while (!0) {
        var X = U[h << 1] - 1;
        if (X == -1) break;
        var $ = U[(h << 1) + 1],
          H = $ ^ 4;
        b[($ + 2) >> 1] -= x;
        b[(H + 2) >> 1] += x;
        h = X;
      }
      a += x;
    }
    var C = [];
    for (var y = 0; y < q; y += 2) {
      var X = G[y],
        h = G[y + 1];
      if ((U[X << 1] != 0 || X == m) && U[h << 1] == 0 && h != m) {
        C.push(y >> 1);
      }
      if ((U[h << 1] != 0 || h == m) && U[X << 1] == 0 && X != m) {
        C.push((q + y) >> 1);
      }
    }
    return { UU: C, Yo: a };
  };
  B.RF.aEx = function (j) {
    j |= j >> 1;
    j |= j >> 2;
    j |= j >> 4;
    j |= j >> 8;
    j |= j >> 16;
    this.x6 = new Uint32Array(j + 1);
    this.bf = j;
    this.qK = 0;
    this.FD = 0;
  };
  B.RF.aEx.prototype = {
    push: function (j) {
      var q = this.FD;
      this.x6[q] = j;
      this.FD = (q + 1) & this.bf;
    },
    pop: function () {
      var j = this.qK,
        q = this.x6[j];
      this.qK = (j + 1) & this.bf;
      return q;
    },
    sl: function () {
      return this.qK == this.FD;
    },
    reset: function () {
      this.qK = 0;
      this.FD = 0;
    },
  };
  B.RF.Tc = function (j) {
    j |= j >> 1;
    j |= j >> 2;
    j |= j >> 4;
    j |= j >> 8;
    j |= j >> 16;
    this.x6 = new Uint32Array(j + 1);
    this.N9 = new Uint32Array(j + 1);
    this.bf = j;
    this.qK = 0;
    this.FD = 0;
  };
  B.RF.Tc.prototype = {
    top: function () {
      return this.x6[this.qK];
    },
    as7: function () {
      return this.x6[this.FD];
    },
    push: function (j) {
      if (this.N9[j] != 0) return;
      this.N9[j] = this.FD + 1;
      var q = this.FD;
      this.x6[q] = j;
      this.FD = (q + 1) & this.bf;
    },
    pop: function () {
      var j = this.qK,
        q = this.x6[j];
      this.N9[q] = 0;
      this.qK = (j + 1) & this.bf;
      return q;
    },
    sl: function () {
      return this.qK == this.FD;
    },
    remove: function (j) {
      var q = this.N9[j] - 1;
      if (q == -1) return;
      this.N9[j] = 0;
      if (q == this.qK) {
        this.pop();
        return;
      }
      var m = this.pop();
      this.x6[q] = m;
      this.N9[m] = q + 1;
    },
    Os: function (y) {
      return (y + this.bf + 1) & this.bf;
    },
  };
  B.RF.a2d = function (j, q, m) {
    var n = B.RF.Xb(j, q, m);
    if (q < n - 1) B.RF.a2d(j, q, n - 1);
    if (n < m) B.RF.a2d(j, n, m);
  };
  B.RF.Xb = function (j, q, m) {
    var n = j[(q + m) >>> 1];
    while (q <= m) {
      while (j[q] < n) q++;
      while (j[m] > n) m--;
      if (q <= m) {
        B.RF.TA(j, q, m);
        q++;
        m--;
      }
    }
    return q;
  };
  B.RF.TA = function (j, q, m) {
    var n = j[q];
    j[q] = j[m];
    j[m] = n;
  };
  B.FN = (function () {
    var j, q;
    function m(k, T, aF) {
      var b = aF - 1,
        c = T + aF;
      j[aF - 2] = k[c - 2];
      q[0] = k[c - 1];
      var a = Math.max;
      for (var y = 1; y < b; y++) {
        j[aF - 2 - y] = a(j[aF - 1 - y], k[c - 2 - y]);
        q[y] = a(q[y - 1], k[c - 1 + y]);
      }
      for (var y = 0; y < b; y++) k[T + y] = a(j[y], q[y]);
    }
    function n(k, T, aF) {
      var b = aF - 1,
        c = Math.ceil(T / b) * b;
      for (var a = 0; a < c; a += b) m(k, a, aF);
    }
    function G(k, T, b, c, aF, a) {
      T.set(k);
      if (aF == 1) return;
      j = B.j(aF - 1);
      q = B.j(aF - 1);
      var f = aF >>> 1,
        U = B.j(Math.ceil(Math.max(b, c) / (aF - 1)) * (aF - 1) + (aF - 2)),
        Z = new Uint8Array(U.buffer, 0, b);
      if (!a) B.BR(T);
      for (var h = 0; h < c; h++) {
        U.fill(0);
        U.set(new Uint8Array(T.buffer, h * b, b), f);
        n(U, b, aF);
        T.set(Z, h * b);
      }
      for (var u = 0; u < b; u++) {
        U.fill(0);
        for (var h = 0; h < c; h++) U[h + f] = T[h * b + u];
        n(U, c, aF);
        for (var h = 0; h < c; h++) T[h * b + u] = U[h];
      }
      if (!a) B.BR(T);
    }
    function W(k, T, b, c, aF, a) {
      var f = B.j(b * c);
      for (var U = 0; U < 4; U++) {
        B.Ih(k, f, U);
        if (U == 3) B.BR(f);
        G(f, f, b, c, aF, a);
        if (U == 3) B.BR(f);
        B.ln(f, T, U);
      }
    }
    return { SU: G, ahT: W };
  })();
  B.ih = {};
  B.ih.jl = function (j) {
    for (var y = 0; y < j.length; y++) B.ih.Bq(j, y);
  };
  B.ih.Bq = function (j, y) {
    j[y].v.keyShapeInvalidated = { t: "bool", v: !0 };
  };
  B.ih.akt = function (j) {
    for (var y = 0; y < j.length; y++) j[y].v.keyOriginIndex.v = y;
  };
  B.ih.B0 = function () {
    return {
      t: "Objc",
      v: {
        classID: "null",
        keyOriginIndex: { t: "long", v: 0 },
        keyShapeInvalidated: { t: "bool", v: !0 },
      },
    };
  };
  B.ih.p$ = function (j, q, m) {
    j = j.v;
    var n = { Rctn: 2, Ln: 4, Elps: 5 },
      G = n[j.classID],
      W = j.topLeft ? B.ih.a5F(j) : null,
      k = null,
      T = 0,
      b = [!1, !1, 0, 0, 0];
    if (G == 4) {
      var c = j.Strt.v,
        a = j.End.v;
      k = [c.Hrzn.v.val, c.Vrtc.v.val, a.Hrzn.v.val, a.Vrtc.v.val];
      T = j.Wdth.v.val;
      for (var y = 0; y < 2; y++) {
        var f = j[y == 0 ? "StrA" : "EndA"];
        if (f == null) continue;
        f = f.v;
        b[y] = f.On.v;
        b[2] = f.Wdth.v;
        b[3] = f.Lngt.v;
        b[4] = f.Cncv.v.val;
      }
    }
    if (G == null) return null;
    return B.ih.rk(G, G == 4 ? null : B.ih.et(j, q, m), W, k, T, b);
  };
  B.ih.xz = function (j, q, m, n, G, W, k) {
    var T = { classID: j, unitValueQuadVersion: { t: "long", v: 1 } };
    if (q) B.ih.eX(T, ["Left", "Top", "Rght", "Btom"], q);
    if (m) B.ih.eX(T, ["topLeft", "topRight", "bottomRight", "bottomLeft"], m);
    if (j == "Ln") {
      (T.Strt = {
        t: "Objc",
        v: {
          classID: "Pnt",
          Hrzn: { t: "UntF", v: { type: "#Pxl", val: n[0] } },
          Vrtc: { t: "UntF", v: { type: "#Pxl", val: n[1] } },
        },
      }),
        (T.End = {
          t: "Objc",
          v: {
            classID: "Pnt",
            Hrzn: { t: "UntF", v: { type: "#Pxl", val: n[2] } },
            Vrtc: { t: "UntF", v: { type: "#Pxl", val: n[3] } },
          },
        }),
        (T.Wdth = { t: "UntF", v: { type: "#Pxl", val: G } });
      for (var y = 0; y < 2; y++) {
        var b = y == 0 ? "StrA" : "EndA";
        T[b] = {
          t: "Objc",
          v: {
            classID: "cArw",
            On: { t: "bool", v: k[y] },
            Wdth: { t: "doub", v: k[2] },
            Lngt: { t: "doub", v: k[3] },
            Cncv: { t: "UntF", v: { type: "#Prc", val: k[4] } },
          },
        };
      }
    }
    if (W) T.Nm = { t: "TEXT", v: W };
    return { t: "Objc", v: T };
  };
  B.ih.aHa = function (j, q) {
    var m = B.ih.f9(j),
      n = j[2] - j[0],
      G = j[3] - j[1],
      W = Math.sqrt(n * n + G * G),
      k = [0, 0, W, 0, W, q, 0, q],
      T = new k$();
    T.rotate(-m);
    T.translate(j[0], j[1]);
    B.b.u(k, T, k);
    return k;
  };
  B.ih.rk = function (j, q, m, n, G, W) {
    var k = B.ih.B0(),
      T = k.v,
      b;
    delete T.keyShapeInvalidated;
    T.keyOriginType = { t: "long", v: j };
    T.keyOriginResolution = { t: "doub", v: 75 };
    if (j == 4) {
      T.keyOriginLineStart = {
        t: "Objc",
        v: {
          classID: "Pnt",
          Hrzn: { t: "doub", v: n[0] },
          Vrtc: { t: "doub", v: n[1] },
        },
      };
      T.keyOriginLineEnd = {
        t: "Objc",
        v: {
          classID: "Pnt",
          Hrzn: { t: "doub", v: n[2] },
          Vrtc: { t: "doub", v: n[3] },
        },
      };
      b = B.ih.aHa(n, G);
      var c = B.b.RD(b);
      q = [c.x, c.y, c.x + c.r, c.y + c.$];
      T.keyOriginLineWeight = { t: "doub", v: G };
      if (W) B.ih.a2c(T, W);
    } else b = [q[0], q[1], q[2], q[1], q[2], q[3], q[0], q[3]];
    T.keyOriginBoxCorners = { t: "Objc", v: { classID: "null" } };
    B.ih.do(T, "keyOriginBoxCorners", b);
    var a = { classID: "unitRect", unitValueQuadVersion: { t: "long", v: 1 } };
    T.keyOriginShapeBBox = { t: "Objc", v: a };
    B.ih.aLW(T, q);
    if (m != null) {
      var f = { classID: "radii", unitValueQuadVersion: { t: "long", v: 1 } };
      T.keyOriginRRectRadii = { t: "Objc", v: f };
      B.ih.Um(T, m);
    }
    return k;
  };
  B.ih.u = function (j, q, m, n) {
    var G = B.B.aKg(q),
      W = B.B.am6(q),
      k = B.B.Kn(q),
      T = k.Sd * k.Jy - k.X * k.ra;
    for (var y = 0; y < j.length; y++) {
      var b = j[y].v;
      if (!B.ih.Eg(b)) continue;
      if (m.length != 0 && m.indexOf(y) == -1) continue;
      var c = b.keyOriginType.v,
        a = q;
      if (T < 0 && c == 2) {
        var f = B.ih._y(b),
          U = 0;
        U = f[0];
        f[0] = f[1];
        f[1] = U;
        U = f[2];
        f[2] = f[3];
        f[3] = U;
        B.ih.Um(b, f);
        var Z = B.ih.VI(b, "keyOriginBoxCorners"),
          h = B.b.RD(Z),
          u = h.x + h.r / 2,
          i = new k$();
        i.translate(-u, 0);
        i.scale(-1, 1);
        i.translate(u, 0);
        a = B.B.J5(a, B.B.gb(i));
      }
      var x = ["keyOriginPolyTrueRectCorners", "keyOriginBoxCorners"];
      for (var X = 0; X < x.length; X++) {
        var Z = B.ih.VI(b, x[X]);
        if (Z == null) continue;
        B.B.u(a, Z);
        B.ih.do(b, x[X], Z);
        var h = B.b.RD(Z);
        B.ih.aLW(b, [h.x, h.y, h.x + h.r, h.y + h.$]);
        var $ = new k$();
        $.rotate(-B.ih.f9(Z));
        var H = { classID: "Trnf" };
        b.Trnf = { t: "Objc", v: H };
        var C = "xx xy yx yy tx ty".split(" "),
          l = [$.Sd, $.X, $.ra, $.Jy, $.Tt, $.BL];
        for (var v = 0; v < 6; v++) H[C[v]] = { t: "doub", v: l[v] };
      }
      if (c == 2 && n) {
        var f = B.ih._y(b);
        for (var X = 0; X < 4; X++) f[X] = Math.round(f[X] * q[0]);
        B.ih.Um(b, f);
      }
      var Z = B.ih.VI(b, "keyOriginBoxCorners"),
        K = Z[2] - Z[0],
        S = Z[3] - Z[1],
        o = Math.sqrt(K * K + S * S);
      K /= o;
      S /= o;
      var V = Z[6] - Z[0],
        P = Z[7] - Z[1],
        z = Math.sqrt(V * V + P * P);
      V /= z;
      P /= z;
      if (c == 4) {
        var E = k.Dc();
        b.keyOriginLineWeight.v *= E;
        var A = B.ih.Xj(b);
        B.B.u(q, A);
        B.ih.ar5(b, A);
        var N = B.ih.aHv(b);
        N[2] *= E;
        N[3] *= E;
        B.ih.a2c(b, N);
      }
      var Q = K * V + S * P;
      if (Math.abs(Q) > 0.001) {
        B.ih.Bq(j, y);
      }
    }
  };
  B.ih.Eg = function (j) {
    var q = j.keyShapeInvalidated,
      m = j.keyOriginType;
    return (q == null || !q.v) && m != null && m.v != 9;
  };
  B.ih.avn = function (j) {
    var q = j.keyOriginType.v,
      m = B.ih.M8(j),
      n = m[0],
      G = m[1],
      W = m[2],
      k = m[3],
      T = new k$(),
      b = j.keyOriginPolyCornerRadius,
      Z;
    b = b ? b.v : 0;
    var c = B.ih.VI(
        j,
        q == 7 || q == 8
          ? "keyOriginPolyTrueRectCorners"
          : "keyOriginBoxCorners"
      ),
      a = B.ih.Ke(c),
      f = a[2],
      U = a[3];
    n = -f / 2;
    W = f / 2;
    G = -U / 2;
    k = U / 2;
    T.rotate(-B.ih.f9(c));
    T.Tt = a[0];
    T.BL = a[1];
    if (q == 1 || q == 2) {
      var h = q == 1 ? 0 : B.ih._y(j);
      Z = B.z.cn.Rect(n, G, W - n, k - G, h);
    } else if (q == 4) {
      var u = B.ih.Xj(j),
        i = B.ih.aHv(j);
      T = new k$();
      if (i == null)
        Z = B.z.cn.Gy(u[0], u[1], u[2], u[3], j.keyOriginLineWeight.v);
      else Z = B.z.cn.Jo(u[0], u[1], u[2], u[3], j.keyOriginLineWeight.v, i);
    } else if (q == 5) {
      Z = B.z.cn.SQ(n, G, W - n, k - G);
    } else if (q == 7 || q == 8) {
      var x = q == 7 ? 3 : j.keyOriginPolySides.v;
      Z = B.z.cn.Or(0, 0, 100, Math.PI / x - Math.PI / 2, x, b, W, k);
    }
    B.z.La(Z, T);
    return Z;
  };
  B.ih.ib = function (j, q) {
    var m = q.D;
    for (var y = 0; y < j.length; y++) {
      var n = j[y].v;
      if (!B.ih.Eg(n)) continue;
      var G = B.ih.avn(n),
        W = B.z.kH(m, y),
        k = B.z.Uo(m, y);
      G[2].Np = m[W].Np;
      var T = m;
      m = m.slice(0, W);
      for (var b = 2; b < G.length; b++) m.push(G[b]);
      for (var b = W + k; b < T.length; b++) m.push(T[b]);
    }
    q.D = m;
    q.xo = !0;
  };
  B.ih.Ht = function (j) {
    var q = 1e9,
      m = -q,
      n = 1e9,
      G = -n,
      W = [],
      k = j.ac(),
      T = k[0],
      b = k[1];
    for (var c = 0; c < b.length; c++) {
      var a = T[b[c]],
        f = a.add.vogk;
      if (f == null) continue;
      var U = a.add.vmsk.J;
      for (var Z = 0; Z < f.length; Z++) {
        if (b.length == 1 && U.length != 0 && U.indexOf(Z) == -1) continue;
        var h = f[Z].v,
          u = B.ih.ayc(h);
        if (u) {
          W.push(u);
          var i = u[1];
          q = Math.min(q, i[0]);
          n = Math.min(n, i[1]);
          m = Math.max(m, i[2]);
          G = Math.max(G, i[3]);
        }
      }
    }
    return W.length == 1 ? W[0] : [0, q < m ? [q, n, m, G] : null, 0];
  };
  B.ih.ayc = function (j) {
    if (!B.ih.Eg(j)) return;
    var q = j.keyOriginType.v,
      n = 0;
    if (q == 9) return;
    var m = B.ih.M8(j),
      G = B.ih.VI(j, "keyOriginBoxCorners");
    if (G) {
      var W = B.ih.Ke(G),
        k = W[2],
        T = W[3];
      m[2] = m[0] + k;
      m[3] = m[1] + T;
      n = B.ih.f9(G);
    }
    var b = [q, m, n],
      c = j.keyOriginPolyCornerRadius;
    if (q == 2) b.push(B.ih._y(j));
    if (q == 7 || q == 8) b.push(c ? c.v : 0);
    if (q == 8) b.push(j.keyOriginPolySides.v);
    return b;
  };
  B.ih.aca = function (j, q, m) {
    for (var y = 0; y < j.length; y++) {
      if (q.indexOf(y) == -1) continue;
      var n = j[y].v,
        G = B.ih.ayc(n);
      if (G) {
        var W = G[0],
          k = B.ih.VI(
            n,
            W == 7 || W == 8
              ? "keyOriginPolyTrueRectCorners"
              : "keyOriginBoxCorners"
          ),
          T = B.ih.Ke(k);
        console.log(W);
        if (W == 2) {
          var b = [],
            c = [];
          for (var a = 0; a < 4; a++) {
            var f = G[2] + ((a + 0.5) * Math.PI) / 2,
              U = Math.max(G[3][a] * Math.sqrt(2), 20 / m.k3),
              Z = k[2 * a] + Math.cos(f) * U,
              h = k[2 * a + 1] + Math.sin(f) * U;
            c.push(Z, h);
            b.push(k[2 * a], k[2 * a + 1]);
          }
          return [y, c, b, k, T.slice(0, 2)];
        }
        if (W == 5) {
          return [y, null, null, k, T.slice(0, 2)];
        }
        if (W == 8) {
          var f = G[2] - Math.PI / 2,
            u = T[3] * 0.5,
            U = u - Math.max(G[3], 20 / m.k3),
            i = Math.sin(f),
            x = Math.cos(f);
          return [
            y,
            [T[0] + x * U, T[1] + i * U],
            [T[0] + x * u, T[1] + i * u],
            k,
            T.slice(0, 2),
          ];
        }
      }
    }
    return null;
  };
  B.ih.f9 = function (j) {
    var q = j[2] - j[0],
      m = j[3] - j[1];
    return -Math.atan2(-m, q);
  };
  B.ih.a4s = function (j) {
    var q = B.ih.M8(j);
    return B.ih.f9(q);
  };
  B.ih.aey = function (j, q, m) {
    var n = B.ih.Ht(j),
      G = -1;
    for (var y = 0; y < q.length; y++)
      if (JSON.stringify(q[y]) != JSON.stringify(n[y])) G = y;
    if (G == 1 || G == 2) {
    }
    var W = j.ac(),
      k = W[0],
      T = W[1];
    for (var b = 0; b < T.length; b++) {
      var c = k[T[b]],
        a = c.add.vogk;
      if (a == null) continue;
      var f = c.add.vmsk.J;
      for (var U = 0; U < a.length; U++) {
        var Z = a[U].v;
        if (!B.ih.Eg(Z)) continue;
        if (T.length == 1 && f.length != 0 && f.indexOf(U) == -1) continue;
        var h = Z.keyOriginType.v;
        if (G == 1 || G == 2) {
          B.ih.u(a, B.ih.ac2(G, Z, n, q), f, !1);
          break;
        }
        if (G == 3)
          if (h == 2) B.ih.Um(Z, q[3]);
          else Z.keyOriginPolyCornerRadius = { t: "doub", v: q[3] };
        if (G == 4) Z.keyOriginPolySides.v = q[4];
        if (m) B.ih.Bq(a, U);
      }
    }
  };
  B.ih.ac2 = function (j, q, m, n) {
    var G = n[1],
      W = m[1],
      k = (G[2] - G[0]) / (W[2] - W[0]),
      T = (G[3] - G[1]) / (W[3] - W[1]),
      b = new k$();
    if (j == 1) {
      if (Math.max(Math.abs(k - 1), Math.abs(T - 1)) > 1e-8) {
        var c = G[0],
          a = G[1];
        if (n[0] != 0) {
          var f = B.ih.VI(q, "keyOriginBoxCorners");
          c = f[0];
          a = f[1];
        }
        b.translate(-c, -a);
        b.rotate(n[2]);
        b.scale(k, T);
        b.rotate(-n[2]);
        b.translate(c, a);
      } else {
        b.translate(-W[0], -W[1]);
        b.translate(G[0], G[1]);
      }
    } else {
      if (n[0] != 0) G = B.ih.M8(q);
      var c = (G[0] + G[2]) / 2,
        a = (G[1] + G[3]) / 2;
      b.translate(-c, -a);
      if (m[0] != 0) b.rotate(m[2]);
      b.rotate(-n[2]);
      b.translate(c, a);
    }
    return B.B.gb(b);
  };
  B.ih.Ke = function (j) {
    var q = j[0],
      m = j[1],
      n = j[2],
      G = j[3],
      W = j[4],
      k = j[5],
      T = j[6],
      b = j[7],
      c = n - q,
      a = G - m,
      f = Math.sqrt(c * c + a * a),
      c = W - n,
      a = k - G,
      U = Math.sqrt(c * c + a * a);
    return [(q + W) / 2, (m + k) / 2, f, U];
  };
  B.ih.VI = function (j, q) {
    var m = j[q];
    if (m == null) return null;
    var n = [];
    m = m.v;
    for (var G = 0; G < 4; G++) {
      var W = m["rectangleCorner" + ["A", "B", "C", "D"][G]].v;
      n.push(W.Hrzn.v, W.Vrtc.v);
    }
    return n;
  };
  B.ih.do = function (j, q, m) {
    var n = j[q];
    if (n == null) return null;
    n = n.v;
    for (var G = 0; G < 4; G++) {
      var W = "rectangleCorner" + ["A", "B", "C", "D"][G];
      n[W] = {
        t: "Objc",
        v: {
          classID: "Pnt",
          Hrzn: { t: "doub", v: m[2 * G] },
          Vrtc: { t: "doub", v: m[2 * G + 1] },
        },
      };
    }
  };
  B.ih.M8 = function (j) {
    return B.ih.et(j.keyOriginShapeBBox.v);
  };
  B.ih.et = function (j, q, m) {
    var n = j.classID,
      G = j.Left.v,
      W = j.Rght.v,
      k = j.Top.v,
      T = j.Btom.v,
      b = G.type;
    if (G.val != null) {
      G = G.val;
      W = W.val;
      k = k.val;
      T = T.val;
    }
    if (b == "#Prc" && q) {
      G *= q / 100;
      W *= q / 100;
      k *= m / 100;
      T *= m / 100;
    }
    return [G, k, W, T];
  };
  B.ih.Fj = function (j, q, m) {
    var n = B.ih.et(j, q, m);
    return new hk(n[0], n[1], n[2] - n[0], n[3] - n[1]);
  };
  B.ih.aLW = function (j, q) {
    B.ih.eX(j.keyOriginShapeBBox.v, ["Left", "Top", "Rght", "Btom"], q);
  };
  B.ih._y = function (j) {
    var q = j.keyOriginRRectRadii;
    if (q == null) return [0, 0, 0, 0];
    return B.ih.a5F(q.v);
  };
  B.ih.a5F = function (j) {
    var q = [],
      m = ["topLeft", "topRight", "bottomRight", "bottomLeft"];
    for (var n = 0; n < 4; n++) q.push(j[m[n]].v.val);
    return q;
  };
  B.ih.Um = function (j, q) {
    B.ih.eX(
      j.keyOriginRRectRadii.v,
      ["topLeft", "topRight", "bottomRight", "bottomLeft"],
      q
    );
  };
  B.ih.eX = function (j, q, m) {
    var n = j.classID;
    if (n == "unitRect" || n == "radii" || n == "Rctn") {
      for (var y = 0; y < 4; y++)
        if (m[y] != null)
          j[q[y]] = { t: "UntF", v: { type: "#Pxl", val: m[y] } };
    } else {
      for (var y = 0; y < 4; y++)
        if (m[y] != null) j[q[y]] = { t: "doub", v: m[y] };
    }
  };
  B.ih.Xj = function (j) {
    var q = j.keyOriginLineStart.v,
      m = j.keyOriginLineEnd.v;
    return [q.Hrzn.v, q.Vrtc.v, m.Hrzn.v, m.Vrtc.v];
  };
  B.ih.ar5 = function (j, q) {
    var m = j.keyOriginLineStart.v,
      n = j.keyOriginLineEnd.v;
    m.Hrzn.v = q[0];
    m.Vrtc.v = q[1];
    n.Hrzn.v = q[2];
    n.Vrtc.v = q[3];
  };
  B.ih.aHv = function (j) {
    var q = [],
      m = ["owSt", "owEnd", "Wdth", "Lngth", "Conc"];
    for (var y = 0; y < 5; y++) {
      var n = j["keyOriginLineArr" + m[y]];
      if (n == null) return null;
      q[y] = n.v;
    }
    return q;
  };
  B.ih.a2c = function (j, q) {
    j.keyOriginLineArrowSt = { t: "bool", v: q[0] };
    j.keyOriginLineArrowEnd = { t: "bool", v: q[1] };
    j.keyOriginLineArrWdth = { t: "doub", v: q[2] };
    j.keyOriginLineArrLngth = { t: "doub", v: q[3] };
    j.keyOriginLineArrConc = { t: "long", v: q[4] };
  };
  B.ih.acA = function (j) {
    function q(H, C) {
      return Math.abs(H - C) < 0.5;
    }
    function m(H, C) {
      return q(H.x, C.x) && q(H.y, C.y);
    }
    function n(H, C, l, v, K, S, o) {
      for (var y = 0; y < o; y++) {
        var V = H[C + ((l + y) % o)],
          P = v[K + ((S + y) % o)];
        if (!(m(V.Ii, P.Ii) && m(V.kt, P.kt) && m(V._$, P._$))) return !1;
      }
      return !0;
    }
    var G = [];
    for (var W = 0; W < j.length; W++) {
      var k = j[W],
        b = null;
      if ((k.e != 0 && k.e != 3) || k.Np == -1) continue;
      var T = W;
      if (k.length == 4 || k.length == 8) {
        var c = B.z.arU(j.slice(0, 2).concat(j.slice(T, T + k.length + 1)));
        T = 2;
        if (k.length == 4) {
          var a = B.z.tP(c, T + 1, 4),
            f = a.x,
            U = a.y,
            Z = f + a.r,
            h = U + a.$;
          if (a.C() > 4) {
            if (B.z.Dk(c.slice(T - 2, T + 5)))
              b = B.ih.rk(2, [f, U, Z, h], [0, 0, 0, 0]);
            else {
              var u = -1;
              for (var y = 0; y < 4; y++) if (q(c[T + 1 + y].Ii.y, h)) u = y;
              if (u != -1) {
                var i = B.z.cn.SQ(f, U, Z - f, h - U),
                  x = n(c, T + 1, u, i, 3, 0, 4);
                if (x) b = B.ih.rk(5, [f, U, Z, h]);
              }
            }
          }
        }
        if (k.length == 8) {
          var a = B.z.tP(c, T + 1, 8),
            f = a.x,
            U = a.y,
            Z = f + a.r,
            h = U + a.$;
          if (a.C() > 4) {
            var u = -1;
            for (var y = 0; y < 8; y++)
              if (
                q(c[T + 1 + ((y + 1) & 7)].Ii.y, U) &&
                q(c[T + 1 + ((y + 2) & 7)].Ii.y, U)
              )
                u = y;
            if (u != -1) {
              var X = Math.abs(c[T + 1 + u].Ii.y - U),
                $ = [X, X, X, X];
              if (X > 0.5) {
                var i = B.z.cn.Rect(f, U, Z - f, h - U, $),
                  x = n(c, T + 1, u, i, 3, 0, 8);
                if (x) b = B.ih.rk(2, [f, U, Z, h], $);
              }
            }
          }
        }
        if (j[W + k.length + 1] && j[W + k.length + 1].Np == -1) b = 0;
      }
      G.push(b ? b : B.ih.B0());
    }
    return G;
  };
  B.b = {};
  B.b.P = function (j) {
    return { RC: j.RC.slice(0), L: j.L.slice(0) };
  };
  B.b.aBV = function (j) {
    if (j.length < 6) return !0;
    var q = j.length - 4;
    for (var y = 0; y < q; y += 2)
      if (!B.b.bc(j[y], j[y + 1], j[y + 2], j[y + 3], j[y + 4], j[y + 5]))
        return !1;
    if (!B.b.bc(j[q], j[q + 1], j[q + 2], j[q + 3], j[0], j[1])) return !1;
    if (!B.b.bc(j[q + 2], j[q + 3], j[0], j[1], j[2], j[3])) return !1;
    return !0;
  };
  B.b.bc = function (j, q, m, n, G, W) {
    return (q - n) * (G - m) + (m - j) * (W - n) >= 0;
  };
  B.b.afF = function (j, q) {
    function m(O, s, K) {
      var l = s[0] - O[0],
        v = s[1] - O[1],
        p = B.b.FA(K[0], K[1], -v, l, O[0], O[1], l, v);
      return [K[0] - v * p, K[1] + l * p];
    }
    function n(O, s) {
      var l = O[0] - s[0],
        v = O[1] - s[1];
      return Math.sqrt(l * l + v * v);
    }
    j = B.b.aoB(j);
    var G = [0, 0, 0, 0],
      W = j.length,
      k = [0, 0, 0, 0],
      T = Math.PI / 2,
      b = Math.atan2(-1, 0),
      Z = 1e9,
      h,
      u = 0;
    function c() {
      for (var y = 0; y < 4; y++) {
        var x = G[y],
          X = (x + 2) % W,
          O = j[X] - j[x],
          s = j[X + 1] - j[x + 1],
          p = Math.atan2(s, O),
          F = b + y * T;
        if (p < F) F -= 2 * Math.PI;
        k[y] = p - F;
      }
    }
    for (var y = 0; y < W; y += 2) {
      var a = j[y],
        f = j[y + 1];
      if (a < j[G[0]]) G[0] = y;
      if (f < j[G[1] + 1]) G[1] = y;
      if (a > j[G[2]]) G[2] = y;
      if (f > j[G[3] + 1]) G[3] = y;
    }
    c();
    var U = B.b.RD(j).C();
    while (u < W / 2) {
      var i = 0;
      for (var y = 0; y < 4; y++) if (k[y] < k[i]) i = y;
      var x = G[i],
        X = (x + 2) % W,
        $ = G[(i + 2) & 3],
        H = G[(i + 3) & 3],
        C = G[(i + 1) & 3],
        a = j[x],
        l = j[X] - a,
        f = j[x + 1],
        v = j[X + 1] - f,
        K = j.slice(x, x + 2),
        S = j.slice(X, X + 2),
        o = j.slice($, $ + 2),
        V = j.slice(H, H + 2),
        P = j.slice(C, C + 2),
        z = m(K, S, o),
        E = m(V, [V[0] - v, V[1] + l], P),
        A = n(z, o),
        N = n(E, P);
      if (N * A < Z) {
        Z = N * A;
        var Q = m(K, S, V);
        h = [Q[0], Q[1], l, v, N, A];
      }
      b += k[i];
      G[i] = X;
      c();
      u++;
    }
    var a = h[0],
      f = h[1],
      l = h[2],
      v = h[3],
      N = h[4],
      A = h[5],
      e = Math.sqrt(l * l + v * v);
    l /= e;
    v /= e;
    var Y = a + l * N,
      d = f + v * N,
      I = [a, f, Y, d, Y - v * A, d + l * A, a - v * A, f + l * A];
    while (I[0] > I[2] || Math.abs((I[3] - I[1]) / (I[2] - I[0])) > 1) {
      I.push(I.shift(), I.shift());
    }
    return I;
  };
  B.b.aoB = function (j) {
    var q = 0;
    for (var y = 0; y < j.length; y += 2) if (j[y] < j[q]) q = y;
    var m = [q];
    while (!0) {
      var n = m[m.length - 1],
        G = j[n],
        W = j[n + 1],
        k = m.length == 1 ? m[0] : m[m.length - 2],
        T = j[k],
        b = j[k + 1],
        U = 0,
        Z = 1e9,
        h = 0;
      if (m.length == 1) b += 20;
      var c = T - G,
        a = b - W,
        f = Math.sqrt(c * c + a * a);
      c /= f;
      a /= f;
      for (var y = 0; y < j.length; y += 2) {
        if (y == k || y == n) continue;
        var u = j[y],
          i = j[y + 1],
          x = u - G,
          X = i - W,
          $ = Math.sqrt(x * x + X * X);
        x /= $;
        X /= $;
        var H = c * x + a * X;
        if (H < Z || (H == Z && $ > h)) {
          Z = H;
          U = y;
          h = $;
        }
      }
      if (U == m[0]) break;
      m.push(U);
    }
    var C = [];
    for (var y = 0; y < m.length; y++) C.push(j[m[y]], j[m[y] + 1]);
    return C;
  };
  B.b.Xl = function (j) {
    var q = {},
      m = 0,
      n = { M: 2, L: 2, Q: 4, C: 6 },
      G = "",
      W = "",
      k = { L: [], RC: [] };
    for (var y = 0; y < j.RC.length; y++) {
      var T = j.RC[y];
      if (T[0] == "#") G = T;
      else if (T[0] == "X") {
        var b = G + W;
        if (q[b] == null) q[b] = { L: [], RC: [] };
        B.b.concat(q[b], k);
        G = "";
        W = "";
        k = { L: [], RC: [] };
      } else if (T[0] == "O" && T[1] == "-") W = T;
      else if (T == "OX") {
        if (W != "") W += "-1";
      } else {
        k.RC.push(T);
        var c = n[T];
        if (c == null) c = 0;
        for (var a = 0; a < c; a++) k.L.push(j.L[m + a]);
        m += c;
      }
    }
    return q;
  };
  B.b.a19 = function (j, q, m) {
    var n = j[q] - j[m - 2],
      G = j[q + 1] - j[m - 1];
    return n * n + G * G < 1e-4;
  };
  B.b.V1 = function (j) {
    var q = [],
      m = j.L,
      n = j.RC.length - 1;
    for (var G = 0; G < n; G++) {
      var y = G * 6,
        W = m[y + 6] - m[y + 0],
        k = m[y + 7] - m[y + 1],
        T = Math.ceil(Math.sqrt(W * W + k * k));
      for (var b = 0; b < T; b++) {
        var c = b / T,
          a = 1 - c,
          f =
            a * a * a * m[y + 0] +
            3 * a * a * c * m[y + 2] +
            3 * a * c * c * m[y + 4] +
            c * c * c * m[y + 6],
          U =
            a * a * a * m[y + 1] +
            3 * a * a * c * m[y + 3] +
            3 * a * c * c * m[y + 5] +
            c * c * c * m[y + 7];
        q.push(f, U);
      }
    }
    return q;
  };
  B.b.LZ = function (j, q, m) {
    j = B.b.ni(j);
    var n = j.L,
      G = j.RC,
      W = 0,
      k = "",
      T = 0,
      b = 0,
      W = 0,
      f = null;
    for (var y = 0; y < G.length; y++) {
      var c = G[y];
      if (c == "M") {
        T = n[W];
        b = n[W + 1];
        W += 2;
        k = c;
      }
      if (c == "C") {
        if (k == "Z") {
          G.splice(y, 0, "M");
          n.splice(W, 0, T, b);
          y--;
          continue;
        }
        W += 6;
        k = c;
      }
      if (c == "Z") {
        k = c;
      }
    }
    var a = [];
    W = 0;
    for (var y = 0; y < G.length; y++) {
      var c = G[y];
      if (c == "M") {
        f = { v8: W, Dh: 0, N4: !1 };
        a.push(f);
        W += 2;
      }
      if (c == "C") {
        f.Dh++;
        W += 6;
      }
      if (c == "Z" && f != null) {
        f.N4 = !0;
      }
    }
    var U = [];
    for (var y = 0; y < a.length; y++) if (a[y].Dh != 0) U.push(a[y]);
    a = U;
    for (var y = 0; y < a.length; y++) {
      var Z = a[y],
        h = Z.v8,
        u = h + 2 + Z.Dh * 6,
        x = 0;
      Z.gX = B.b.RD(n, h, u);
      var i = B.b.a19(n, h, u);
      for (var X = 0; X < Z.Dh; X++) {
        var $ = h + X * 6,
          H = $ + 6;
        x += (n[H] - n[$]) * (n[H + 1] + n[$ + 1]);
      }
      if (Z.Dh == 2) {
        var C = function (r, eQ, t) {
            var dq = 1 - t;
            return (
              dq * dq * dq * r[eQ] +
              3 * dq * dq * t * r[eQ + 2] +
              3 * dq * t * t * r[eQ + 4] +
              t * t * t * r[eQ + 6]
            );
          },
          l = n[h],
          v = n[h + 1],
          K = n[h + 6],
          S = n[h + 7],
          o = n[h + 6],
          V = n[h + 7],
          P = C(n, h, 0.5),
          z = C(n, h + 1, 0.5),
          E = C(n, h + 6, 0.5),
          A = C(n, h + 7, 0.5);
        x =
          (P - l) * (z - v) +
          (K - P) * (S - z) +
          (E - K) * (A - S) +
          (o - E) * (V - A);
      }
      if (!i) x += (n[h] - n[u - 2]) * (n[h + 1] + n[u - 1]);
      Z.Bo = x <= 0;
    }
    for (var y = 0; y < a.length - 1; y++)
      for (var $ = y + 1; $ < a.length; $++) {
        var N = a[y],
          Q = a[$];
        if (Q.gX.Jn(N.gX)) {
          a[y] = Q;
          a[$] = N;
        }
      }
    var e = a.length == 0 ? !0 : a[0].Bo,
      Y = [{ e: 6 }, { e: 8, all: 0 }];
    for (var y = 0; y < a.length; y++) {
      var Z = a[y],
        h = Z.v8,
        u = h + 2 + Z.Dh * 6,
        i = B.b.a19(n, h, u);
      if (Z.Dh == 1) i = !1;
      var d = Z.N4 || i ? 0 : 3,
        I = Z.Bo == e && !q ? 1 : 0;
      if (!q && y != 0) {
        if (a[y - 1].gX.Jn(Z.gX) && a[y - 1].Bo != Z.Bo) I = 0;
        for (var $ = 0; $ < a.length; $++)
          if ($ != y && a[$].gX.Jn(Z.gX)) I = 0;
      }
      Y.push({ e: d, length: Z.Dh + (i ? 0 : 1), Np: m ? 0 : I, uc: 2 });
      for (var $ = 0; $ < Z.Dh; $++) {
        var W = h + $ * 6,
          O = new ea(n[W], n[W + 1]),
          s = new ea(n[W + 2], n[W + 3]),
          p;
        if ($ == 0) {
          if (i) {
            p = new ea(n[u - 4], n[u - 3]);
            if (ea.gw(p, O) < 1e-5) p = O.P();
          } else p = O.P();
        } else p = new ea(n[W - 2], n[W - 1]);
        Y.push({ e: d + 2, kt: p, Ii: O, _$: s });
      }
      if (!i) {
        var F = new ea(n[u - 2], n[u - 1]);
        Y.push({ e: d + 2, kt: new ea(n[u - 4], n[u - 3]), Ii: F, _$: F.P() });
      }
    }
    for (var $ = 0; $ < Y.length; $++) {
      var g = Y[$];
      if (g.e > 5 || g.e == 0 || g.e == 3) continue;
      var w = g.kt.Lg(g.Ii) || g._$.Lg(g._$);
      if (!w) {
        var N =
          g.kt.x * (g.Ii.y - g._$.y) +
          g.Ii.x * (g._$.y - g.kt.y) +
          g._$.x * (g.kt.y - g.Ii.y);
        if (Math.abs(N) < 1e-6) w = !0;
      }
      if (w) g.e--;
    }
    return Y;
  };
  B.b.nJ = function (j, q) {
    var m = B.z.in(j),
      n = [];
    for (var y = 2; y < j.length; y++) {
      var G = j[y].Np;
      if (G != null) {
        if (G == 2 || G == 0 || G == 3 || G == -1) n.push(G);
      }
    }
    var W = n.length != 0;
    if ((W || q) && 1 < m) {
      console.log(W, q, m, "merge");
      if (j.length < 5e3 && m < 30) j = B.z.TV(j);
      else alert("Too complex shapes, skipping the merging step.");
    }
    var k = B.b.bh(j);
    return { ku: k, GG: m == 1 ? (j[2].uc == 2 ? 0 : 1) : W ? 1 : 0 };
  };
  B.b.bh = (function () {
    function j(n, G, W, k) {
      if (k != 2 && n._$.Lg(n.Ii) && G.kt.Lg(G.Ii)) {
        W.L.push(G.Ii.x, G.Ii.y);
        W.RC.push("L");
      } else {
        var T = n.Ii,
          b = n._$,
          c = G.kt,
          a = G.Ii,
          f = (3 / 2) * b.x - (1 / 2) * T.x,
          U = (3 / 2) * b.y - (1 / 2) * T.y,
          Z = (3 / 2) * c.x - (1 / 2) * a.x,
          h = (3 / 2) * c.y - (1 / 2) * a.y,
          u = Z - f,
          i = h - U;
        if (k == 0 && u * u + i * i < 0.001) {
          W.L.push((f + Z) * 0.5, (U + h) * 0.5, a.x, a.y);
          W.RC.push("Q");
        } else {
          W.L.push(b.x, b.y, c.x, c.y, a.x, a.y);
          W.RC.push("C");
        }
      }
    }
    function q(n, G, y, W, k, T) {
      var b = G[y];
      n.L.push(b.Ii.x, b.Ii.y);
      n.RC.push("M");
      for (var c = y; c < y + W - 1; c++) j(G[c], G[c + 1], n, T);
      if (!k) j(G[c], G[y], n, T);
    }
    function m(n, G) {
      if (G == null) G = 0;
      var W = { L: [], RC: [] };
      for (var y = 0; y < n.length; y++) {
        if (n[y].e > 5) continue;
        var k = n[y].length;
        if (k == 0) continue;
        if (y == n.length - 1) break;
        var T = n[y].e == 3;
        q(W, n, y + 1, k, T, G);
        if (!T) W.RC.push("Z");
        y += k;
      }
      return W;
    }
    return m;
  })();
  B.b.ajL = function (j) {
    var q = j.L,
      m = [],
      n,
      G = 0;
    for (var y = 0; y < j.RC.length; y++) {
      var W = j.RC[y];
      if (W == "C") {
        n.push(q[G++], q[G++], q[G++], q[G++], q[G++], q[G++]);
      } else if (W == "Z") {
      } else {
        n = [];
        if (W != "M") {
          n.push(W);
          y++;
        }
        n.push(q[G++], q[G++]);
        m.push(n);
      }
    }
    return m;
  };
  B.b.wB = function (j, q, m, n, G) {
    if (n == null) n = 1e9;
    if (G == null) G = -1;
    var W = 1e9,
      k = 0;
    for (var y = 0; y < j.length; y += 2) {
      if (y >>> 1 == G) continue;
      var T = q - j[y],
        b = m - j[y + 1],
        c = T * T + b * b;
      if (c < W) {
        W = c;
        k = y >>> 1;
      }
    }
    return W < n * n ? k : -1;
  };
  B.b.ahy = function (j, q, m, n) {
    for (var y = 0; y < j.length; y += 2) {
      var G = j[y],
        W = j[y + 1],
        k = q[y],
        T = q[y + 1];
      m[y] = G + (k - G) * n;
      m[y + 1] = W + (T - W) * n;
    }
  };
  B.b.u = function (j, q, m) {
    for (var y = 0; y < j.length; y += 2) {
      var n = j[y],
        G = j[y + 1];
      m[y] = n * q.Sd + G * q.ra + q.Tt;
      m[y + 1] = n * q.X + G * q.Jy + q.BL;
    }
  };
  B.b.RD = function (j, q, m) {
    if (q == null) q = 0;
    if (m == null) m = j.length;
    var n = 99999999999,
      G = -n,
      W = 99999999999,
      k = -W;
    for (var y = q; y < m; y += 2) {
      var T = j[y],
        b = j[y + 1];
      n = Math.min(n, T);
      W = Math.min(W, b);
      G = Math.max(G, T);
      k = Math.max(k, b);
    }
    return new hk(n, W, G - n, k - W);
  };
  B.b.aFl = function (j, q) {
    var m = Math.max(q.x, Math.min(q.x + q.r, j.x)),
      n = Math.max(q.y, Math.min(q.y + q.$, j.y)),
      G = j.x - m,
      W = j.y - n;
    return Math.sqrt(G * G + W * W);
  };
  B.b.mE = function (j, q) {
    var m = Math.floor,
      n = Math.ceil;
    if (q) {
      m = Math.ceil;
      n = Math.floor;
    }
    var G = m(j.x),
      W = n(j.x + j.r),
      k = m(j.y),
      T = n(j.y + j.$);
    return new hk(G, k, W - G, T - k);
  };
  B.b.YU = function (j, q) {
    var m = B.b.RD(j);
    if (q) m.Lh(-1e-9, -1e-9);
    return B.b.mE(m);
  };
  B.b._c = function (j, q) {
    var m = j.x,
      n = j.y,
      G = j.x + j.r,
      W = j.y + j.$,
      k = [m, n, G, n, G, W, m, W];
    if (q) {
      var T = q.P();
      T.BR();
      B.b.u(k, T, k);
    }
    return { RC: ["M", "L", "L", "L", "Z"], L: k };
  };
  B.b.concat = function (j, q, m) {
    if (m == null) m = new k$();
    for (var y = 0; y < q.L.length; y += 2) {
      var n = q.L[y],
        G = q.L[y + 1];
      j.L.push(n * m.Sd + G * m.ra + m.Tt);
      j.L.push(n * m.X + G * m.Jy + m.BL);
    }
    for (var y = 0; y < q.RC.length; y++) j.RC.push(q.RC[y]);
  };
  B.b.reverse = function (j) {
    var q = j.RC.slice(1),
      m = q.pop();
    if (m != "Z") q.push(m);
    q.reverse();
    q = ["M"].concat(q);
    if (m == "Z") q.push("Z");
    var n = [],
      G = j.L.length;
    for (var W = 0; W < G; W += 2) {
      n[W] = j.L[G - 2 - W];
      n[W + 1] = j.L[G - 2 - W + 1];
    }
    return { L: n, RC: q };
  };
  B.b.ahA = function (j, q, m, n, G) {
    function W(U, Z, h) {
      return new ea(U.x * (1 - h) + Z.x * h, U.y * (1 - h) + Z.y * h);
    }
    var k = W(j, q, G),
      T = W(m, n, G),
      b = W(q, m, G),
      c = W(k, b, G),
      a = W(b, T, G),
      f = W(c, a, G);
    return [k, c, f, a, T];
  };
  B.b.ni = function (j) {
    var q = j.L,
      m = [],
      n = [],
      G = 0,
      W = 0,
      k = 0,
      T = 0,
      b = 0,
      c = 0,
      a = 0,
      f = 0,
      U = 0,
      Z = 0,
      h = 0;
    for (var y = 0; y < j.RC.length; y++) {
      var u = j.RC[y];
      if (u == "M") {
        W = q[G];
        k = q[G + 1];
        G += 2;
        n.push(u);
        m.push(W, k);
        Z = W;
        h = k;
      } else if (u == "C") {
        T = q[G];
        b = q[G + 1];
        c = q[G + 2];
        a = q[G + 3];
        f = q[G + 4];
        U = q[G + 5];
        G += 6;
        n.push(u);
        m.push(T, b, c, a, f, U);
        W = f;
        k = U;
      } else if (u == "Q") {
        T = q[G];
        b = q[G + 1];
        c = q[G + 2];
        a = q[G + 3];
        G += 4;
        var i = T - W,
          x = b - k,
          X = c - T,
          $ = a - b;
        n.push("C");
        m.push(
          W + (2 / 3) * i,
          k + (2 / 3) * x,
          T + (1 / 3) * X,
          b + (1 / 3) * $,
          c,
          a
        );
        W = c;
        k = a;
      } else if (u == "L") {
        T = q[G];
        b = q[G + 1];
        G += 2;
        if (T != W || b != k) {
          n.push("C");
          m.push(W, k, T, b, T, b);
          W = T;
          k = b;
        }
      } else {
        if (u == "Z") {
          W = Z;
          k = h;
        }
        n.push(u);
      }
    }
    return { RC: n, L: m };
  };
  B.b.awf = function (j) {
    var q = j.L,
      m = [],
      n = [],
      G = 0;
    for (var y = 0; y < j.RC.length; y++) {
      var W = j.RC[y];
      if (W == "Q") {
        var k = q[G - 2],
          T = q[G - 1],
          b = q[G],
          c = q[G + 1],
          a = q[G + 2],
          f = q[G + 3];
        G += 4;
        var U = b - k,
          Z = c - T,
          h = a - b,
          u = f - c;
        n.push("C");
        m.push(
          k + (2 / 3) * U,
          T + (2 / 3) * Z,
          b + (1 / 3) * h,
          c + (1 / 3) * u,
          a,
          f
        );
      } else {
        var i = 0;
        if (W == "M" || W == "L") i = 2;
        else if (W == "C") i = 6;
        for (var x = 0; x < i; x++) m.push(q[G + x]);
        G += i;
        n.push(W);
      }
    }
    return { RC: n, L: m };
  };
  B.b.Mz = function (j, q) {
    var m = j.L,
      n = [],
      G = [],
      W = 0,
      k = 0,
      T = 0,
      b = 0,
      c = 0,
      a = 0,
      f = 0,
      U = 0,
      Z = 0;
    for (var y = 0; y < j.RC.length; y++) {
      var h = j.RC[y];
      if (h == "M") {
        k = m[W];
        T = m[W + 1];
        W += 2;
        G.push(h);
        n.push(k, T);
      } else if (h == "C") {
        b = m[W];
        c = m[W + 1];
        a = m[W + 2];
        f = m[W + 3];
        U = m[W + 4];
        Z = m[W + 5];
        W += 6;
        B.b.Y3(k, T, b, c, a, f, U, Z, q, G, n, 0);
        k = U;
        T = Z;
      } else G.push(h);
    }
    return { RC: G, L: n };
  };
  B.b.Y3 = function (j, q, m, n, G, W, k, T, b, c, a, f) {
    var U = Math.sqrt((k - j) * (k - j) + (T - q) * (T - q)),
      Z =
        Math.sqrt((k - G) * (k - G) + (T - W) * (T - W)) +
        Math.sqrt((G - m) * (G - m) + (W - n) * (W - n)) +
        Math.sqrt((m - j) * (m - j) + (n - q) * (n - q)),
      h = (U + Z) / 2;
    if (h <= b) {
      c.push("C");
      a.push(m, n, G, W, k, T);
    } else {
      var u = 0,
        i = 0,
        x = 0,
        X = 0,
        $ = 0,
        H = 0,
        C = 0,
        l = 0,
        v = 0,
        K = 0,
        S = 0,
        o = 0,
        V = 0;
      i = (j + m) / 2;
      x = (q + n) / 2;
      X = (m + G) / 2;
      $ = (n + W) / 2;
      H = (G + k) / 2;
      C = (W + T) / 2;
      l = (i + X) / 2;
      v = (x + $) / 2;
      K = (X + H) / 2;
      S = ($ + C) / 2;
      o = (l + K) / 2;
      V = (v + S) / 2;
      B.b.Y3(j, q, i, x, l, v, o, V, b, c, a, f + 1);
      B.b.Y3(o, V, K, S, H, C, k, T, b, c, a, f + 1);
    }
  };
  B.b.$r = function (j, q, m, n, G) {
    var W = Date.now(),
      k = B.b.aco(j, q, m);
    if (G) {
      console.log("trace polygons", Date.now() - W);
      W = Date.now();
    }
    var T = [];
    for (var y = 0; y < k.length; y++) {
      var b = k[y],
        c = b[0],
        a = ["M"],
        f = j[c[1] * q + c[0]];
      if (c.length > 8) c = B.b.ax$(c, n, b[1]);
      if (c.length <= 4) continue;
      for (var U = 2; U < c.length; U += 2) a.push("L");
      a.push("Z");
      T.push({ path: { L: c, RC: a }, color: f, parent: -1, gX: B.b.RD(c) });
    }
    if (G) {
      console.log("simplify polygons", Date.now() - W);
      W = Date.now();
    }
    for (var y = 1; y < T.length; y++) {
      var Z = T[y],
        h = Z.path.L,
        u = h[0],
        i = h[1],
        x = h[2],
        X = h[3],
        $ = x - u,
        H = X - i,
        C = u + 0.5 * $ - 0.001 * H,
        l = i + 0.5 * H + 0.001 * $;
      for (var U = y - 1; U >= 0; U--) {
        var v = T[U];
        if (!v.gX.Jn(Z.gX)) continue;
        if (!lv.Lo(v.path.L, C, l)) continue;
        Z.parent = U;
        break;
      }
    }
    if (G) {
      console.log("checking parents", Date.now() - W);
      W = Date.now();
    }
    return T;
  };
  B.b.aco = function (j, q, m) {
    var n = q * m,
      G = new Uint16Array(q * m),
      k = 0;
    for (var y = 0; y < n; y++) G[y] = j[y];
    var W = new Uint8Array(q * m);
    W[1 * q + 1] =
      W[(m - 1) * q + 1] =
      W[1 * q + q - 1] =
      W[(m - 1) * q + q - 1] =
        1;
    for (var T = 1; T < m; T++)
      for (var b = 1; b < q; b++) {
        var y = T * q + b,
          c = G[y - q - 1],
          a = G[y - q],
          f = G[y - 1],
          U = G[y],
          Z = c == U && a == f && c != a,
          h = 0;
        if (U < f) {
          k = U;
          U = f;
          f = k;
        }
        if (f < a) {
          k = f;
          f = a;
          a = k;
        }
        if (a < c) {
          k = a;
          a = c;
          c = k;
        }
        if (U < f) {
          k = U;
          U = f;
          f = k;
        }
        if (f < a) {
          k = f;
          f = a;
          a = k;
        }
        if (U < f) {
          k = U;
          U = f;
          f = k;
        }
        if (c != a) h++;
        if (a != f) h++;
        if (f != U) h++;
        if (U != c) h++;
        if (h >= 3 || Z) W[y] = 1;
      }
    var u = [];
    for (var T = 1; T < m; T++)
      for (var b = 1; b < q; b++) {
        var y = T * q + b;
        if (G[y] != G[y - 1]) {
          var i = B.b.agu(G, q, m, b, T),
            x = [];
          for (var X = 0; X < i.length; X += 2)
            if (W[i[X + 1] * q + i[X]] == 1) x.push(X >>> 1);
          u.push([i, x]);
          B.b.sT(G, q, m, b, T);
        }
      }
    return u;
  };
  B.b.sT = function (j, q, m, n, G) {
    var W = [G * q + n],
      k = j[G * q + n];
    j[G * q + n] = 65535;
    while (W.length != 0) {
      var y = W.pop();
      j[y] = 0;
      if (j[y + q] == k) {
        W.push(y + q);
        j[y + q] = 65535;
      }
      if (j[y - q] == k) {
        W.push(y - q);
        j[y - q] = 65535;
      }
      if (j[y - 1] == k) {
        W.push(y - 1);
        j[y - 1] = 65535;
      }
      if (j[y + 1] == k) {
        W.push(y + 1);
        j[y + 1] = 65535;
      }
    }
  };
  B.b.agu = function (j, q, m, n, G) {
    var W = [0, -1, 1, 0, 0, 1, -1, 0],
      a = 1;
    function k(U, Z, a) {
      var y = c * q + b,
        h = 0;
      if (a == 0) h = y - q;
      else if (a == 1) h = y;
      else if (a == 2) h = y - 1;
      else if (a == 3) h = y - q - 1;
      return j[h];
    }
    var T = [],
      b = n,
      c = G,
      f = k(b, c, a);
    do {
      T.push(b, c);
      b += W[a * 2];
      c += W[a * 2 + 1];
      if (k(b, c, a) != f) a = (a + 1) & 3;
      else if (k(b, c, (a + 3) & 3) != f) a = a;
      else if (k(b, c, (a + 2) & 3) != f) a = (a + 3) & 3;
    } while (b != n || c != G);
    return T;
  };
  B.b.ax$ = function (j, q, m) {
    if (q == null || q == 0) return j;
    var n = j.length - 2;
    if (m && m.length != 0) {
      var G = m[0] * 2,
        W = m[m.length - 1] * 2,
        k = G == 0 ? n : G - 2,
        T = j.slice(W);
      for (var y = 0; y < G; y++) T.push(j[y]);
      if (G == W)
        T.push(0.9 * j[G] + 0.1 * j[k], 0.9 * j[G + 1] + 0.1 * j[k + 1]);
      else T.push(j[G], j[G + 1]);
      T = B.b.YQ(T, q);
      T.pop();
      T.pop();
      for (var y = 0; y < m.length - 1; y++) {
        var b = j.slice(m[y] * 2, m[y + 1] * 2 + 2);
        b = B.b.YQ(b, q);
        for (var f = 0; f < b.length - 2; f++) T.push(b[f]);
      }
      return T;
    }
    var U = j.slice(0);
    U.push(0.9 * j[0] + 0.1 * j[n], 0.9 * j[1] + 0.1 * j[n + 1]);
    U = B.b.YQ(U, q);
    U.pop();
    U.pop();
    return U;
  };
  B.b.YQ = function (j, q) {
    var m = j.length - 2,
      n = j[0],
      G = j[1],
      W = j[m],
      k = j[m + 1],
      T = W - n,
      b = k - G,
      c = 1 / Math.sqrt(T * T + b * b),
      a = W * G - k * n,
      f = -1,
      U = -1,
      Z = 0;
    for (var y = 2; y < m; y += 2) {
      var h = j[y],
        u = j[y + 1],
        i = u * u * 1e6 + h * h,
        x = Math.abs(b * h - T * u + a) * c;
      if (x > U || (x == U && i > Z)) {
        U = x;
        f = y;
        Z = i;
      }
    }
    if (U < q) return [n, G, W, k];
    var X = B.b.YQ(j.slice(0, f + 2), q),
      $ = B.b.YQ(j.slice(f), q);
    for (var y = 2; y < $.length; y++) X.push($[y]);
    return X;
  };
  B.b.a7F = (function () {
    var j = function (n, G, W, k, T, b) {
        return (G - k) * (T - W) + (W - n) * (b - k) >= 0;
      },
      q = function (n, G, W, k, T, b, c, a) {
        var f = c - W,
          U = a - k,
          Z = T - W,
          h = b - k,
          u = n - W,
          i = G - k,
          x = f * f + U * U,
          X = f * Z + U * h,
          $ = f * u + U * i,
          H = Z * Z + h * h,
          C = Z * u + h * i,
          l = 1 / (x * H - X * X),
          v = (H * $ - X * C) * l,
          K = (x * C - X * $) * l;
        return v >= 0 && K >= 0 && v + K < 1;
      },
      m = function (n) {
        var aF = n.length >>> 1,
          y = 0;
        if (aF < 3) return [];
        var G = [],
          W = [];
        for (var y = 0; y < aF; y++) W.push(y);
        var k = aF;
        while (k > 3) {
          var T = W[(y + 0) % k],
            b = W[(y + 1) % k],
            c = W[(y + 2) % k],
            a = n[2 * T],
            f = n[2 * T + 1],
            U = n[2 * b],
            Z = n[2 * b + 1],
            h = n[2 * c],
            u = n[2 * c + 1],
            i = !1;
          if (j(a, f, U, Z, h, u)) {
            i = !0;
            for (var x = 0; x < k; x++) {
              var X = W[x];
              if (X == T || X == b || X == c) continue;
              if (q(n[2 * X], n[2 * X + 1], a, f, U, Z, h, u)) {
                i = !1;
                break;
              }
            }
          }
          if (i) {
            G.push(T, b, c);
            W.splice((y + 1) % k, 1);
            k--;
            y = 0;
          } else if (y++ > 3 * k) break;
        }
        G.push(W[0], W[1], W[2]);
        return G;
      };
    return m;
  })();
  B.b.aLs = function (j, q) {
    var m = {},
      n = { RC: [], L: [] };
    for (var y = 0; y < q.length; y += 3) {
      var G = q[y] * 2,
        W = q[y + 1] * 2,
        k = q[y + 2] * 2;
      B.b.h6(j, G, W, n, m);
      B.b.h6(j, G, k, n, m);
      B.b.h6(j, W, k, n, m);
    }
    return n;
  };
  B.b.h6 = function (j, q, m, n, G) {
    if (q > m) {
      var W = m;
      m = q;
      q = W;
    }
    if (G[q + "," + m]) return;
    G[q + "," + m] = !0;
    n.RC.push("M", "L");
    n.L.push(j[q], j[q + 1], j[m], j[m + 1]);
  };
  B.b.a3z = function (j, q) {
    var m = [],
      n = j.length;
    for (var y = 0; y < n; y += 2) {
      var G = j[y],
        W = j[y + 1],
        k = j[(y + 2) % n],
        T = j[(y + 3) % n];
      if (T < W) {
        var b = W;
        W = T;
        T = b;
      }
      if (W < q && q < T) {
        var c = (q - W) / (T - W);
        m.push(G + c * (k - G));
      }
    }
    m.sort(function (a, f) {
      return a - f;
    });
    return m;
  };
  B.b.avl = function (j, q, m, n, G, W, k) {
    var T = j - m,
      b = q - n,
      c = G - m,
      a = W - n,
      f = 1 / Math.sqrt(T * T + b * b),
      U = 1 / Math.sqrt(c * c + a * a),
      Z = T * f,
      h = b * f,
      u = c * U,
      i = a * U,
      x = h * k,
      X = -Z * k,
      $ = -i * k,
      H = u * k,
      C = B.b.FA(x, X, Z, h, $, H, u, i),
      l = x + Z * C,
      v = X + h * C,
      C = B.b.FA(0, 0, Z, h, l, v, -h, Z),
      K = Z * C,
      S = h * C;
    return [Math.sqrt(K * K + S * S), Z, h, u, i];
  };
  B.b.aJ$ = function (j, q, m, n, G, W, k) {
    var T = B.b.avl(j, q, m, n, G, W, k),
      b = T[0],
      c = T[1],
      a = T[2],
      f = T[3],
      U = T[4],
      Z = Math.atan2(c * U - a * f, c * f + a * U);
    if (Z < 0) {
      Z = Z * -1;
    }
    var h = Math.PI - Z,
      u = (4 / 3) * Math.tan(h / 4),
      i = m + b * c,
      x = n + b * a,
      X = m + b * f,
      $ = n + b * U,
      H = i + u * k * -c,
      C = x + u * k * -a,
      l = X + u * k * -f,
      v = $ + u * k * -U;
    return [0, 0, i, x, H, C, l, v, X, $];
  };
  B.b.FA = function (j, q, m, n, G, W, k, T) {
    var b = k * (q - W) - T * (j - G),
      c = T * m - k * n;
    if (c == 0) return 0;
    return b / c;
  };
  B.b.tj = function (j, q, m, n, G, W) {
    return j * (n - W) + m * (W - q) + G * (q - n);
  };
  B.b.aIX = function (j) {
    function q(E, A, N, Q, e, Y, I, O, s) {
      var p = B.b.FA(E, A, N, Q, e, Y, I, O);
      s.push(E + N * p, A + Q * p);
    }
    var m = [],
      n = j.length,
      G = [];
    for (var y = 0; y < n; y += 2) {
      var W = y == 0 ? n - 2 : y - 2,
        k = y == n - 2 ? 0 : y + 2,
        T = j[y],
        b = j[y + 1],
        c = T - j[W],
        a = b - j[W + 1],
        f = j[k] - T,
        U = j[k + 1] - b,
        Z = Math.sqrt(c * c + a * a),
        h = Math.sqrt(f * f + U * U);
      G.push(h);
      var u = Z / (Z + h),
        i = T - c * 0.5,
        x = b - a * 0.5,
        X = T + f * 0.5,
        $ = b + U * 0.5,
        H = (j[k] + j[W]) * 0.5,
        C = (j[k + 1] + j[W + 1]) * 0.5,
        l = i + u * (X - i),
        v = x + u * ($ - x),
        K = T - l,
        S = b - v,
        o = (f * -c + U * -a) / (Z * h),
        V = (u - 0.5) * 7,
        P = 1 + V * u,
        z = 1 - V * (1 - u);
      m.push(i + K * P, x + S * P, X + K * z, $ + S * z);
    }
    return m;
  };
  B.iL = function () {};
  B.iL.AC = function (j, q, m, n, G) {
    var W = m.r,
      k = m.$,
      T = W * k,
      b = new Int32Array(T),
      aF = 0;
    for (var y = 0; y < T; y++)
      if (q[y] != 0) {
        b[y] = aF;
        aF++;
      } else if (j[(y << 2) + 3] < 200) {
        b[y] = -2;
      } else b[y] = -1;
    if (aF == 0) return;
    var c = new B.$J(aF, aF),
      a = new Array(3 * aF),
      f = new Array(3 * aF);
    for (var y = 0; y < f.length; y++) f[y] = a[y] = 0;
    var U = 1 / 255,
      Z = [-W, -1, 1, W],
      h = [],
      u = [];
    for (var i = 0; i < k; i++)
      for (var x = 0; x < W; x++) {
        var X = i * W + x,
          $ = X << 2,
          y = b[X],
          H = y * 3,
          C = 0,
          l = 0,
          v = 0;
        if (y == -1 || y == -2) continue;
        for (var K = 0; K < 4; K++) {
          if (K == 2) {
            l = v;
            h[v] = 0;
            u[v] = y;
            v++;
          }
          var S = X + Z[K],
            o = S << 2,
            V = b[S];
          if (
            (K == 0 && i == 0) ||
            (K == 1 && x == 0) ||
            (K == 2 && x == W - 1) ||
            (K == 3 && i == k - 1) ||
            V == -2
          )
            continue;
          C++;
          if (V == -1) {
            a[H + 0] += j[o + 0];
            a[H + 1] += j[o + 1];
            a[H + 2] += j[o + 2];
          } else {
            h[v] = -1;
            u[v] = V;
            v++;
            if (q[X] == q[S]) {
              a[H + 0] += j[$ + 0] - j[o + 0];
              a[H + 1] += j[$ + 1] - j[o + 1];
              a[H + 2] += j[$ + 2] - j[o + 2];
            }
          }
        }
        h[l] = C;
        c.yR(h, u, v);
      }
    for (var y = 0; y < T; y++)
      if (b[y] != -1) {
        var P = y << 2,
          z = b[y],
          E = z * 3;
        f[E] = j[P + 0];
        f[E + 1] = j[P + 1];
        f[E + 2] = j[P + 2];
      }
    var A = Date.now();
    c.aDY(f, a, n, G);
    console.log(Date.now() - A);
    for (var y = 0; y < T; y++) {
      var z = b[y],
        N = z * 3,
        P = y << 2;
      if (z == -1 || j[P + 3] != 255) continue;
      j[P + 0] = ~~(0.5 + Math.max(0, Math.min(255, f[N + 0])));
      j[P + 1] = ~~(0.5 + Math.max(0, Math.min(255, f[N + 1])));
      j[P + 2] = ~~(0.5 + Math.max(0, Math.min(255, f[N + 2])));
    }
  };
  B.H = {};
  B.H.asH = function (j, q) {
    var m = [j],
      n = [];
    for (var y = 0; y < q.length; y++) {
      var G = q[y],
        W = !1;
      for (var k = y + 1; k < q.length; k++) {
        var T = q[k];
        if (T[0] <= G[0] && T[1] <= G[1] && G[2] <= T[2] && G[3] <= T[3]) {
          W = !0;
          break;
        }
      }
      if (!W) n.push(G);
    }
    q = n;
    for (var y = 0; y < q.length; y++) {
      var G = q[y];
      for (var k = 0; k < m.length; k++) {
        var T = m[k],
          b = Math.max(G[0], T[0]),
          c = Math.min(G[2], T[2]),
          a = Math.max(G[1], T[1]),
          f = Math.min(G[3], T[3]);
        if (b < c && a < f) {
          var U = [];
          if (T[1] < G[1]) {
            var Z = T.slice(0);
            Z[3] = G[1];
            U.push(Z);
          }
          if (T[0] < G[0]) {
            var h = T.slice(0);
            h[1] = a;
            h[2] = G[0];
            U.push(h);
          }
          if (G[2] < T[2]) {
            var u = T.slice(0);
            u[1] = a;
            u[0] = G[2];
            U.push(u);
          }
          if (G[3] < T[3]) {
            var i = [b, f, c, T[3]];
            U.push(i);
          }
          if (U.length != 0) {
            m[k] = U[0];
            for (var x = 1; x < U.length; x++) m.push(U[x]);
          }
        }
      }
      m.push(G);
      m = B.H.a3M(m);
    }
    m.sort(function (G, T) {
      return G[1] != T[1] ? G[1] - T[1] : G[0] - T[0];
    });
    for (var y = 1; y < m.length; y++) {
      var G = m[y - 1],
        T = m[y];
      if (G[0] == T[0] && G[1] == T[1] && G[2] == T[2] && G[3] == T[3]) {
        m.splice(G[4] == null ? y - 1 : y, 1);
        y--;
      }
    }
    return m;
  };
  B.H.a3M = function (j) {
    j = j.slice(0);
    for (var y = 0; y < j.length; y++) {
      var q = j[y],
        m = null;
      if (q[4] != null) continue;
      for (var n = 0; n < j.length; n++) {
        var G = j[n];
        if (y == n || G[4] != null) continue;
        var W = q[0] == G[0],
          k = q[1] == G[1],
          T = q[2] == G[2],
          b = q[3] == G[3];
        if (k && b && (q[2] == G[0] || q[0] == G[2])) {
          m = [Math.min(q[0], G[0]), q[1], Math.max(q[2], G[2]), q[3]];
        }
        if (W && T && (q[3] == G[1] || q[1] == G[3])) {
          m = [q[0], Math.min(q[1], G[1]), q[2], Math.max(q[3], G[3])];
        }
        if (m) {
          j[y] = m;
          j.splice(n, 1);
          break;
        }
      }
      if (m) {
        y--;
      }
    }
    return j;
  };
  B.H.VV = function (j) {
    var q = new hk();
    for (var y = 0; y < j.length; y++) q = q.vd(j[y]);
    return q;
  };
  B.H.aD_ = function (j, q) {
    var m = B.H.VV,
      n = new UnionFind(j.length),
      l = 1e3,
      v = 1e3;
    for (var y = 0; y < j.length; y++)
      for (var G = y + 1; G < j.length; G++) {
        if (!q) continue;
        var W = j[y],
          k = j[G],
          f = 1e9,
          U = 1e9;
        if (W.C2(k)) {
          n.link(y, G);
          continue;
        }
        var T = W.x + W.r,
          b = W.y + W.$,
          c = k.x + k.r,
          a = k.y + k.$;
        if ((T < k.x || c < W.x) && (b < k.y || a < W.y)) continue;
        if (!(b < k.y || a < W.y))
          f = Math.min(Math.abs(T - k.x), Math.abs(W.x - c));
        if (!(T < k.x || c < W.x))
          U = Math.min(Math.abs(b - k.y), Math.abs(W.y - a));
        var Z = Math.min(f, U),
          h = Math.min(W.r, W.$, k.r, k.$);
        if (Z < 0.3 * h) n.link(y, G);
      }
    var u = [],
      i = {};
    for (var y = 0; y < j.length; y++) {
      var x = n.find(y),
        X = j[y];
      if (i[x] == null) {
        i[x] = u.length;
        u.push([]);
      }
      u[i[x]].push(X);
    }
    var $ = [],
      H = [];
    for (var y = 0; y < u.length; y++) {
      $.push(m(u[y]));
      var C = m(u[y]);
      C.Os = y;
      H.push(C);
    }
    H.sort(function (Q, e) {
      return Math.max(e.$, e.r) - Math.max(Q.$, Q.r);
    });
    var K = new NETXUS.RectanglePacker(l, v);
    while (!0) {
      var S = !1;
      K.reset(l, v);
      for (var y = 0; y < H.length; y++) {
        var o = K.findCoords(H[y].r, H[y].$);
        if (o) {
          H[y].x = o.x;
          H[y].y = o.y;
        } else {
          l = Math.floor(l * 1.1);
          v = Math.floor(v * 1.1);
          S = !0;
          break;
        }
      }
      if (S) continue;
      break;
    }
    for (var y = 0; y < u.length; y++) {
      var V = H[y],
        P = V.Os,
        z = $[P],
        E = u[P],
        A = V.x - z.x,
        N = V.y - z.y;
      for (var G = 0; G < E.length; G++) E[G].offset(A, N);
    }
  };
  B.H.aiI = function (j) {
    var q = [],
      m = [],
      n = function (C, l) {
        return C - l;
      };
    for (var y = 0; y < j.length; y++) {
      var G = j[y];
      if (q.indexOf(G[0]) == -1) q.push(G[0]);
      if (q.indexOf(G[2]) == -1) q.push(G[2]);
      if (m.indexOf(G[1]) == -1) m.push(G[1]);
      if (m.indexOf(G[3]) == -1) m.push(G[3]);
    }
    q.sort(n);
    m.sort(n);
    q.push(q[q.length - 1] + 1);
    m.push(m[m.length - 1] + 1);
    var W = [],
      k = q.length - 1,
      T = m.length - 1;
    for (var b = 0; b < T; b++) {
      var c = [];
      W.push(c);
      for (var a = 0; a < k; a++) {
        var f = q[a],
          U = q[a + 1],
          Z = m[b],
          h = m[b + 1],
          u = (f + U) / 2,
          i = (Z + h) / 2,
          x = -1,
          X = -1;
        for (var y = 0; y < j.length; y++) {
          var G = j[y];
          if (G[0] == f && G[1] == Z) x = y;
          if (G[0] < u && u < G[2] && G[1] < i && i < G[3]) X = y;
        }
        if (x != -1) {
          var G = j[x],
            $ = 1,
            H = 1;
          while (q[a + $] < G[2]) $++;
          while (m[b + H] < G[3]) H++;
          c.push([x, G[2] - G[0], G[3] - G[1], $, H]);
        } else if (X != -1) continue;
        else c.push([-1, U - f, h - Z, 1, 1]);
      }
    }
    return [q.pop(), m.pop(), W];
  };
  B.H.axk = function (j, q, m, n) {
    var G = B.H.aiI(j),
      W = [
        '<table id="Table_01" width="' +
          G[0] +
          '" height="' +
          G[1] +
          '" border="0" cellpadding="0" cellspacing="0">',
      ],
      k = G[2];
    for (var y = 0; y < k.length; y++) {
      var T = k[y];
      W.push("\t<tr>");
      for (var b = 0; b < T.length; b++) {
        var c = T[b],
          a = null,
          f = "",
          U = "",
          Z = c[3],
          h = c[4],
          x = "";
        if (c[0] != -1) {
          var u = c[0],
            i = j[u];
          if (i.length == 5) {
            a = m[i[4]].v;
            f = a.url.v;
          }
          U = 'src="' + q[u] + '"';
          if (i[4] == null && n == 2) U = "";
        }
        if (Z != 1) x += ' colspan="' + Z + '"';
        if (h != 1) x += ' rowspan="' + h + '"';
        W.push("\t\t<td" + x + ">");
        if (f != "")
          W.push('\t\t\t<a href="' + f + '" target="' + a.null.v + '">');
        W.push(
          (f == "" ? "" : "\t") +
            "\t\t\t<img " +
            U +
            ' width="' +
            c[1] +
            '" height="' +
            c[2] +
            '" alt="' +
            (a ? a.altTag.v : "") +
            '"></td>' +
            (f == "" ? "" : "</a>")
        );
      }
      if (y == k.length - 1) {
        W.pop();
        W.pop();
        W.push("\t\t<td></td>");
      }
      W.push("\t</tr>");
    }
    W.push("</table>");
    return W.join("\n");
  };
  B.uO = function () {};
  B.uO.XF = Math.floor(16 * window.devicePixelRatio);
  B.uO.nE = {};
  B.uO.wY = 0;
  B.uO.t0 = [
    [12, 76, 2],
    [12, 76, 3],
    [12, 76, 4],
    [12, 76, 5],
    [12, 76, 6],
  ];
  B.uO._t = ["px", "in", "cm", "mm", "%"];
  B.uO.Fs = function (j, q, m, n) {
    var G = [1, q, q / 2.54, q / 25.4, m / 100][n];
    return j * G;
  };
  B.uO.J2 = function (j, q, m, n) {
    var G = [1, q, q / 2.54, q / 25.4, m / 100][n];
    return j / G;
  };
  B.uO.G7 = function (j, q, m, n, G) {
    var W = m.q1.WH,
      k = [1, q, q / 2.54, q / 25.4, n / 100][W],
      T = [2, 3, 2, 1, 2][W];
    j = j / k;
    var b = Math.round(j),
      c = W == 0 && Math.abs(j - b) < 1e-6 ? b + "" : j.toFixed(T);
    if (G) c += " " + B.uO._t[W];
    return c;
  };
  B.uO.avk = function (j, q, m, n) {
    var G = m.q1.WH,
      W = [1, q, q / 2.54, q / 25.4, n / 100][G];
    j = parseFloat(j) * W;
    return j;
  };
  B.uO.apX = function (j, q) {
    var m = j + "," + q;
    if (B.uO.nE.clr == m) return;
    var n = Math.round(B.uO.XF * 0.5);
    B.uO.wY = n;
    var G = B.l4(n, n);
    G.save();
    G.font = n * 1.5 + "px monospace";
    var W = "0 1 2 3 4 5 6 7 8 9 -".split(" ");
    for (var y = 0; y < W.length; y++) {
      G.fillStyle = "#" + B.bw(q);
      G.fillRect(0, 0, n, n);
      G.fillStyle = "#" + B.bw(j);
      G.fillText(W[y], 0, n);
      B.uO.nE[W[y]] = new Uint8Array(G.getImageData(0, 0, n, n).data.buffer);
    }
    B.uO.nE.clr = m;
    G.restore();
  };
  B.uO.a7K = function (j, q, m, n) {
    var G = 0,
      W = 0,
      k = 4 * B.uO.XF;
    for (var y = 9; y >= 0; y--) {
      var T = Math.pow(10, y);
      if (5 * T * j <= k) {
        G = 5 * T;
        W = 10;
        break;
      }
      if (2 * T * j <= k) {
        G = 2 * T;
        W = 4;
        break;
      }
      if (1 * T * j <= k) {
        G = 1 * T;
        W = n;
        break;
      }
    }
    if (G == 0) {
      G = 1;
      W = n;
    }
    var b = Math.ceil(G * j),
      c = B.j(b * B.uO.XF * 4);
    B.bs(c, 4278190080 | m);
    for (var y = 0; y < B.uO.XF; y++) B.uO.o9(c, 4 * y * b, q);
    for (var y = 0; y < b; y++) B.uO.o9(c, 4 * ((B.uO.XF - 1) * b + y), q);
    if (G == 2) W = 2;
    if (G == 5) W = 5;
    if (G > 1 || (G == 1 && b > 20))
      for (var y = 1; y < W; y++)
        B.uO.aES(c, y * (b / W), b, (y & 1) == 1 ? 0.8 : 0.7, q);
    return { NP: c, step: G };
  };
  B.uO.aES = function (j, q, m, n, G) {
    var q = Math.round(q);
    for (var W = Math.round(B.uO.XF * n); W < B.uO.XF - 1; W++)
      B.uO.o9(j, 4 * (W * m + q), G);
  };
  B.uO.o9 = function (j, q, m) {
    j[q + 0] = (m >> 16) & 255;
    j[q + 1] = (m >> 8) & 255;
    j[q + 2] = m & 255;
  };
  B.uO.a9l = function (j, q, m, n, G, W, k, T) {
    var b = j.yJ.r,
      c = j.yJ.$,
      a = B.uO.XF,
      f = q & 255,
      U = (q >> 8) & 255,
      Z = (q >> 16) & 255;
    q =
      (Math.round(f * 0.6) << 16) |
      (Math.round(U * 0.6) << 8) |
      Math.round(Z * 0.6);
    B.uO.apX(
      (Math.round(f * 0.8) << 16) |
        (Math.round(U * 0.8) << 8) |
        Math.round(Z * 0.8),
      m
    );
    var h = j.k3,
      u = j.g,
      i = j.ny;
    for (var x = 0; x < 2; x++) {
      var X = x == 0 ? W : k;
      j.k3 = X[0];
      j.g = X[1];
      j.ny = 0;
      var $ = this.a7K(j.k3, q, m, T),
        H = j.sb(0, 0),
        C = j.sb(b, c),
        l = Math.floor(H.x / $.step) * $.step,
        v = Math.ceil(C.x / $.step) * $.step,
        K = Math.floor(H.y / $.step) * $.step,
        o = Math.ceil(C.y / $.step) * $.step,
        V = j.gS(l, K),
        P = j.gS(v, K),
        z = $.step * j.k3,
        E = Math.ceil(z);
      if (x == 1) {
        var A = $.NP;
        $.NP = B.j(A.length * 4);
        B.B.up(A, $.NP, E, a);
      }
      var N = x == 0 ? j.CD.data : j.na.data,
        Q = new hk(0, 0, [b, a][x], [a, c][x]),
        e = new hk(0, 0, [E, a][x], [a, E][x]),
        Y = new hk(
          [0, Math.round(a * 0.2)][x],
          [Math.round(a * 0.08), 0][x],
          B.uO.wY,
          B.uO.wY
        ),
        d = (x == 0 ? v - l : o - K) / $.step;
      for (var y = 0; y < d; y++) {
        if (x == 0) e.x = Math.round(V.x + y * z);
        else e.y = Math.round(V.y + y * z);
        B.M4($.NP, e, N, Q, e);
        var I = (x == 0 ? l + y * $.step : Math.abs(K + y * $.step)).toString(
          10
        );
        for (var O = 0; O < I.length; O++) {
          if (x == 0) Y.x = e.x + 3 + O * Math.round(B.uO.wY * 0.8);
          else Y.y = e.y + 3 + O * Math.round(B.uO.wY * 1.15);
          var s = B.uO.nE[I[O]];
          B.M4(s, Y, N, Q, Y);
        }
      }
    }
    j.k3 = h;
    j.g = u;
    j.ny = i;
    var p = Math.floor(a * 0.6),
      F = new Uint32Array(j.CD.data.buffer),
      g = new Uint32Array(j.na.data.buffer),
      w = f < 128 ? 4278190080 : 4294967295;
    if (0 < n && n < b) for (var y = 0; y < p; y++) F[y * b + n] = w;
    if (0 < G && G < c) for (var y = 0; y < p; y++) g[G * a + y] = w;
  };
  B.scale = {};
  B.scale.Bl = document.createElement("canvas");
  B.scale.lB = B.scale.Bl.getContext("2d");
  B.scale.oO = function (j, q, m) {
    var n = B.scale.Bl,
      G = B.scale.lB;
    n.width = q;
    n.height = m;
    var W = new ImageData(new Uint8ClampedArray(j.buffer), q, m);
    G.putImageData(W, 0, 0);
    return G.createPattern(G.canvas, "repeat");
  };
  B.scale.af0 = function (j, q, m, n, G, W, k, T, b) {
    var c = B.scale.adl(j, m, n, G, W, k, T, b);
    if (q) {
      q.set(B.sL(c, B.oM(q)));
    }
    return new Uint8Array(c.buffer);
  };
  B.scale.adl = function (j, q, m, n, G, W, k, T) {
    var b = B.l4(q, m);
    b.save();
    b.beginPath();
    b.rect(0, 0, q, m);
    b.translate(W, k);
    b.scale(n, G);
    if (T != null) b.rotate(-T);
    b.fillStyle = j;
    b.fill();
    b.restore();
    return new Uint8Array(b.getImageData(0, 0, q, m).data.buffer);
  };
  B.scale.u = function (j, q, m, n, G) {
    var W = B.oM(j),
      k = m.X == 0 && m.ra == 0,
      T = G.r,
      b = G.$,
      c = B.b._c(q, m).L,
      a = B.b.YU(c, k).TM(G),
      f = a.x,
      U = a.y,
      Z = f + a.r,
      h = U + a.$,
      u = ~~q.x,
      i = ~~q.y,
      x = ~~q.r,
      X = ~~q.$;
    if (m.Sd * (Z - 1 + 0.5) + m.Tt - u > x) Z--;
    if (k && W == 8)
      for (var $ = U; $ < h; $++) {
        var H = m.Jy * ($ + 0.5) + m.BL - i,
          C = ~~H * x;
        for (var l = f; l < Z; l++) {
          var v = m.Sd * (l + 0.5) + m.Tt - u,
            y = C + ~~v;
          n[$ * T + l] = j[y];
        }
      }
    else if (k)
      for (var $ = U; $ < h; $++) {
        var H = m.Jy * ($ + 0.5) + m.BL - i,
          C = ~~H * x;
        for (var l = f; l < Z; l++) {
          var v = m.Sd * (l + 0.5) + m.Tt - u,
            y = C + ~~v;
          if (W == 8) n[$ * T + l] = j[y];
          else if (W == 16) n[$ * T + l] = j[y] >>> 8;
          else n[$ * T + l] = j[y] * 255;
        }
      }
    else
      for (var $ = U; $ < h; $++)
        for (var l = f; l < Z; l++) {
          var K = l + 0.5,
            S = $ + 0.5,
            v = m.Sd * K + m.ra * S + m.Tt - u,
            H = m.X * K + m.Jy * S + m.BL - i;
          if (0 <= v && 0 <= H && v < x && H < X) {
            var y = ~~H * x + ~~v;
            if (W == 8) n[$ * T + l] = j[y];
            else if (W == 16) n[$ * T + l] = j[y] >>> 8;
            else n[$ * T + l] = j[y] * 255;
          }
        }
  };
  B.scale.Vz = function (j, q, m, n, G, W) {
    function k(d) {
      return 255 * d;
    }
    var T = B.oM(j),
      b = new Uint32Array(j.buffer),
      c = new Uint32Array(n.buffer),
      a = G.r,
      f = G.$,
      U = B.b._c(q, m).L,
      Z = W ? G : B.b.YU(U).TM(G),
      h = Z.x,
      u = Z.y,
      i = h + Z.r,
      x = u + Z.$,
      X = ~~q.x,
      $ = ~~q.y,
      H = ~~q.r,
      C = ~~q.$;
    m = m.P();
    m.translate(-X, -$);
    var l = m.uL(new ea(1, 0)).mN(m.uL(new ea(0, 0))),
      v = l.x,
      K = l.y;
    for (var S = u; S < x; S++) {
      var o = m.uL(new ea(h + 0.5, S + 0.5)),
        V = o.x,
        P = o.y,
        z = (S - G.y) * a + h - G.x;
      for (var E = h; E < i; E++) {
        if (W) {
          V = ((H << 10) + V) % H;
          P = ((C << 10) + P) % C;
        }
        if (0 <= V && 0 <= P && V < H && P < C) {
          if (T == 8) c[z] = b[~~P * H + ~~V];
          else {
            var A = (~~P * H + ~~V) * 4,
              N,
              Q,
              e,
              Y;
            if (T == 16) {
              N = j[A] >>> 8;
              Q = j[A + 1] >>> 8;
              e = j[A + 2] >>> 8;
              Y = j[A + 3] >>> 8;
            } else {
              N = k(j[A]);
              Q = k(j[A + 1]);
              e = k(j[A + 2]);
              Y = k(j[A + 3]);
            }
            c[z] = (Y << 24) | (e << 16) | (Q << 8) | N;
          }
        }
        V += v;
        P += K;
        z++;
      }
    }
  };
  B.scale.fM = function (j, q, m, n, G, W, k) {
    if (k < 1) B.scale.amt(j, q, m, n, G, W, Math.round(1 / k));
    else B.scale.aqP(j, q, m, n, G, W, k);
  };
  B.scale.ce = function (j, q, m, n, G, W, k, T) {
    if (T) T = T.TM(new hk(0, 0, q, m));
    j = new Uint32Array(j.buffer);
    n = new Uint32Array(n.buffer);
    if (k < 1) B.scale.avo(j, q, m, n, G, W, Math.round(1 / k), T);
    else B.scale.aLL(j, q, m, n, G, W, k);
  };
  B.scale.aqP = function (j, q, m, n, G, W, k) {
    for (var T = 0; T < m; T++)
      for (var b = 0; b < q; b++) {
        var c = j[T * q + b],
          a = Math.min(k, G - b * k),
          f = Math.min(k, W - T * k);
        for (var y = 0; y < f; y++)
          for (var U = 0; U < a; U++) n[(k * T + y) * G + k * b + U] = c;
      }
  };
  B.scale.amt = function (j, q, m, n, G, W, k) {
    for (var T = 0; T < W; T++)
      for (var b = 0; b < G; b++) {
        var c = 0,
          a = Math.min(k, q - b * k),
          f = Math.min(k, m - T * k);
        for (var y = 0; y < f; y++)
          for (var U = 0; U < a; U++) c += j[(k * T + y) * q + (k * b + U)];
        n[T * G + b] = Math.round(c / (a * f));
      }
  };
  B.scale.aLL = function (j, q, m, n, G, W, k) {
    for (var T = 0; T < m; T++)
      for (var b = 0; b < q; b++) {
        var c = j[T * q + b],
          a = Math.min(k, G - b * k),
          f = Math.min(k, W - T * k);
        for (var y = 0; y < f; y++)
          for (var U = 0; U < a; U++) n[(k * T + y) * G + k * b + U] = c;
      }
  };
  B.scale.avc = function (j, q, m) {
    return (((j >>> m) & 255) + ((q >>> m) & 255)) >>> 1;
  };
  B.scale.o8 = function (j, q) {
    var m = B.scale.avc;
    return (
      (m(j, q, 24) << 24) | (m(j, q, 16) << 16) | (m(j, q, 8) << 8) | m(j, q, 0)
    );
  };
  B.scale.aM9 = function (j, q, m, n, G, W) {
    var k = B.oM(j);
    if (k == 8) {
      var T = new Uint32Array(j.buffer),
        b = new Uint32Array(n.buffer);
      for (var c = 0; c < m; c++) {
        for (var a = 0; a < q; a++) {
          var f = c * q + a,
            U = T[f],
            Z = U,
            h = U,
            u = U;
          if (a < q - 1) Z = B.scale.o8(U, T[f + 1]);
          if (c < m - 1) h = B.scale.o8(U, T[f + q]);
          if (a < q - 1 && c < m - 1) u = B.scale.o8(U, T[f + q + 1]);
          var i = (c * G + a) * 2;
          b[i] = U;
          b[i + 1] = Z;
          b[i + G] = h;
          b[i + G + 1] = u;
        }
      }
      if ((G & 1) == 1)
        for (var c = 0; c < W; c++) b[c * G + G - 1] = b[c * G + G - 2];
      var x = G * (W - 1);
      if ((W & 1) == 1) for (var a = 0; a < G; a++) b[x + a] = b[x - G + a];
    } else {
      var X = B.scale.aB3,
        $ = B.scale.aFA;
      for (var c = 0; c < m; c++) {
        for (var a = 0; a < q; a++) {
          var f = c * q + a,
            i = (c * G + a) * 2;
          X(j, f, n, i);
          if (a < q - 1) $(j, f, f + 1, n, i + 1);
          else X(j, f, n, i + 1);
          if (c < m - 1) $(j, f, f + q, n, i + G);
          else X(j, f, n, i + G);
          if (a < q - 1 && c < m - 1) $(j, f, f + q + 1, n, i + G + 1);
          else X(j, f, n, i + G + 1);
        }
      }
      if ((G & 1) == 1)
        for (var c = 0; c < W; c++) X(n, c * G + G - 2, n, c * G + G - 1);
      var x = G * (W - 1);
      if ((W & 1) == 1) for (var a = 0; a < G; a++) X(n, x - G + a, n, x + a);
    }
  };
  B.scale.aB3 = function (j, q, m, n) {
    var G = q << 2,
      W = n << 2;
    m[W] = j[G];
    m[W + 1] = j[G + 1];
    m[W + 2] = j[G + 2];
    m[W + 3] = j[G + 3];
  };
  B.scale.aFA = function (j, q, m, n, G) {
    var W = q << 2,
      k = m << 2,
      T = G << 2;
    n[T] = (j[W] + j[k]) * 0.5;
    n[T + 1] = (j[W + 1] + j[k + 1]) * 0.5;
    n[T + 2] = (j[W + 2] + j[k + 2]) * 0.5;
    n[T + 3] = (j[W + 3] + j[k + 3]) * 0.5;
  };
  B.scale.avo = function (j, q, m, n, G, W, k, T) {
    var b = 0,
      c = G,
      a = 0,
      f = W;
    if (T) {
      b = Math.floor(T.x / k);
      c = Math.ceil((T.x + T.r) / k);
      a = Math.floor(T.y / k);
      f = Math.ceil((T.y + T.$) / k);
    }
    for (var U = a; U < f; U++)
      for (var Z = b; Z < c; Z++) {
        var h = 0,
          u = 0,
          i = 0,
          x = 0,
          X = Math.min(k, q - Z * k),
          $ = Math.min(k, m - U * k);
        for (var y = 0; y < $; y++)
          for (var H = 0; H < X; H++) {
            var C = j[(k * U + y) * q + k * Z + H],
              l = C >>> 24;
            h += l;
            u += l * ((C >>> 16) & 255);
            i += l * ((C >>> 8) & 255);
            x += l * (C & 255);
          }
        if (h != 0) {
          var v = 1 / h;
          n[U * G + Z] =
            ((h / (X * $)) << 24) | ((u * v) << 16) | ((i * v) << 8) | (x * v);
        } else n[U * G + Z] = 0;
      }
  };
  B.h = (function () {
    function j(T, b, y) {
      return (
        (128 &
          T[y - b - 1] &
          T[y - b] &
          T[y - 2] &
          T[y - 1] &
          T[y + 1] &
          T[y + b - 1] &
          T[y + b]) ==
        0
      );
    }
    function q(T, b, y) {
      return (
        (128 &
          T[y - b - b] &
          T[y - b + 1] &
          T[y + 2] &
          T[y + b + 1] &
          T[y + b + b]) ==
        0
      );
    }
    function m(T, b, y) {
      return (T[y - b] & T[y - 1] & T[y + 1] & T[y + b] & 128) == 0;
    }
    function n(T, y) {
      return (T[y] & 128) != 0;
    }
    function G(T, b, c, a) {
      var y = 0,
        f = c.r,
        U = c.$;
      if (a)
        for (var Z = 0; Z < U; Z++)
          for (var h = 0; h < f; h++) {
            if (
              n(T, y) &&
              (h < 2 ||
                Z < 2 ||
                h > f - 3 ||
                Z > U - 3 ||
                (((T[y - 1] & 128) == 0 || b[y - 1] != 0) && j(T, f, y)) ||
                q(T, f, y))
            )
              b[y] = 255;
            y++;
          }
      else
        for (var Z = 0; Z < U; Z++)
          for (var h = 0; h < f; h++) {
            if (
              n(T, y) &&
              (h == 0 || Z == 0 || h == f - 1 || Z == U - 1 || m(T, f, y))
            )
              b[y] = 255;
            y++;
          }
    }
    function W(T, b, c, a, f) {
      var U = c.r,
        Z = c.$,
        h = new Uint8Array(b.buffer),
        u = new Uint32Array(b.buffer);
      if (f)
        for (var i = 2; i < Z - 2; i++)
          for (var x = 2; x < U - 2; x++) {
            var y = i * U + x;
            if (
              n(T, y) &&
              ((((T[y - 1] & 128) == 0 || u[y - 1] != 0) && j(T, U, y)) ||
                q(T, U, y))
            )
              u[y] = a[((x + i) & 4) >>> 2];
          }
      else
        for (var i = 1; i < Z - 1; i++)
          for (var x = 1; x < U - 1; x++) {
            var y = i * U + x;
            if (n(T, y) && m(T, U, y)) {
              u[y] = a[((x + i) & 4) >>> 2];
            }
          }
    }
    function k(T, b, c, a, f) {
      var U = c.r,
        Z = c.$,
        h = f >>> 16,
        u = (f >>> 8) & 255,
        i = f & 255,
        y = 0;
      f = (i << 16) | (u << 8) | h;
      var x = new Uint8Array(b.buffer),
        X = new Uint32Array(b.buffer);
      if (a == 1)
        for (var $ = 0; $ < Z; $++)
          for (var H = 0; H < U; H++, y++) {
            var C = T[y];
            X[y] = (((255 - C) >>> 1) << 24) | f;
          }
      else
        for (var $ = 0; $ < Z; $++)
          for (var H = 0; H < U; H++, y++) {
            var C = T[y];
            X[y] = (255 << 24) | ((C << 16) | (C << 8) | C);
          }
    }
    return { azz: G, aGG: W, aaB: k };
  })();
  B.hV = {};
  B.hV.ZQ = function (j, q, m) {
    var n, G;
    if (m == 0) {
      n = j.H.P();
      G = B.hV.av5;
    }
    if (m == 1) {
      n = j.H.vd(q.H);
      G = B.hV.vd;
    }
    if (m == 2) {
      n = q.H.P();
      G = B.hV.afJ;
    }
    if (m == 3) {
      n = j.H.TM(q.H);
      G = B.hV.TM;
    }
    if (m == 4) {
      n = j.H.vd(q.H);
      G = B.hV.a2p;
    }
    if (n.jG()) return null;
    var W = B.oM(j.N),
      k = B.j(n.C(), W);
    B.sN(q.N, q.H, k, n);
    var T = B.j(n.C(), W);
    B.sN(j.N, j.H, T, n);
    G(T, k, k);
    var b = B.El(k, n);
    if (b.jG()) return null;
    if (!b.Lg(n)) {
      var c = B.j(b.C(), W);
      B.sN(k, n, c, b);
      k = c;
      n = b;
    }
    return { N: k, H: n };
  };
  B.hV.av5 = function (j, q, m) {
    for (var y = 0; y < j.length; y++) m[y] = j[y];
  };
  B.hV.vd = function (j, q, m) {
    var n = B.TN(B.oM(j));
    for (var y = 0; y < j.length; y++) m[y] = Math.min(j[y] + q[y], n);
  };
  B.hV.afJ = function (j, q, m) {
    for (var y = 0; y < j.length; y++) m[y] = Math.max(q[y] - j[y], 0);
  };
  B.hV.TM = function (j, q, m) {
    var n = B.TN(B.oM(j)),
      G = 1 / n;
    for (var y = 0; y < j.length; y++) m[y] = j[y] * q[y] * G;
  };
  B.hV.a2p = function (j, q, m) {
    var n = B.TN(B.oM(j)),
      G = 1 / n;
    for (var y = 0; y < j.length; y++)
      m[y] = Math.min(j[y] + q[y], n) - j[y] * q[y] * G;
  };
  B.$J = function (j, q) {
    this.Y = [];
    this.nx = [0];
    this.YD = [];
    this.Ob = [];
    this.xZ = [0];
    this.Ca = [];
    this.RJ = [];
    this.rows = j;
    this.cols = q;
  };
  B.$J.prototype.P = function () {
    var j = this,
      q = j.rows,
      m = j.cols,
      n = new B.$J(q, m);
    n.Y = j.Y.slice(0);
    n.nx = j.nx.slice(0);
    n.YD = j.YD.slice(0);
    n.Ob = j.Ob.slice(0);
    n.xZ = j.xZ.slice(0);
    n.Ca = j.Ca.slice(0);
    n.RJ = j.RJ.slice(0);
    return n;
  };
  B.$J.prototype.yR = function (j, q, m) {
    var n = this.nx.length - 1;
    for (var y = 0; y < m; y++) {
      var G = j[y],
        W = q[y];
      this.Y.push(G);
      this.YD.push(W);
      if (W == n) {
        this.RJ.push(G == 0 ? 0 : 1 / G);
      } else {
        this.Ob.push(G);
        this.Ca.push(W);
      }
    }
    this.nx.push(this.Y.length);
    this.xZ.push(this.Ob.length);
  };
  B.$J.prototype.cg = function (j, q) {
    var m = this,
      n = m.rows,
      G = m.Y,
      W = m.YD;
    if (q == null) q = new Array(n);
    for (var y = 0; y < n; y++) {
      var k = m.nx[y],
        T = m.nx[y + 1],
        b = 0;
      while (((T - k) & 3) != 0) {
        b += G[k] * j[W[k]];
        k++;
      }
      for (var c = k; c < T; c += 4)
        b +=
          G[c] * j[W[c]] +
          G[c + 1] * j[W[c + 1]] +
          G[c + 2] * j[W[c + 2]] +
          G[c + 3] * j[W[c + 3]];
      q[y] = b;
    }
    return q;
  };
  B.$J.prototype.multiply = function (j) {
    return this.Ta(j.up());
  };
  B.$J.prototype.Ta = function (j) {
    var q = this,
      m = q.rows,
      n = q.cols,
      G = j.rows,
      W = new B.$J(m, G),
      k = q.YD,
      T = j.YD;
    for (var y = 0; y < m; y++) {
      var b = [],
        c = [],
        a = q.nx[y],
        f = q.nx[y + 1];
      for (var U = 0; U < G; U++) {
        var Z = j.nx[U],
          h = j.nx[U + 1],
          u = 0,
          i = a,
          x = Z;
        while (i < f && x < h) {
          var X = Math.max(k[i], T[x]);
          while (i < f && k[i] < X) i++;
          while (x < h && T[x] < X) x++;
          if (i < f && x < h && k[i] == T[x]) u += q.Y[i++] * j.Y[x++];
        }
        if (u != 0) {
          b.push(u);
          c.push(U);
        }
      }
      W.yR(b, c, b.length);
    }
    return W;
  };
  B.$J.prototype.up = function () {
    var j = this.rows,
      q = this.cols,
      m = [];
    for (var y = 0; y < q; y++) m.push([[], []]);
    var n = this.Y,
      G = this.nx,
      W = this.YD;
    for (var y = 0; y < j; y++) {
      var k = G[y],
        T = G[y + 1];
      for (var b = k; b < T; b++) {
        var c = m[W[b]];
        c[0].push(n[b]);
        c[1].push(y);
      }
    }
    var a = new B.$J(q, j);
    for (var y = 0; y < q; y++) a.yR(m[y][0], m[y][1], m[y][1].length);
    return a;
  };
  B.$J.prototype.anJ = function () {
    var j = this.rows,
      q = this.cols,
      m = new Array(j),
      n = this.Y,
      G = this.nx,
      W = this.YD;
    for (var y = 0; y < j; y++) {
      var k = (m[y] = new Array(q));
      for (var T = 0; T < q; T++) k[T] = 0;
      var b = G[y],
        c = G[y + 1];
      for (var a = b; a < c; a++) k[W[a]] = n[a];
    }
    return m;
  };
  B.$J.prototype.es = function (j, q, m, n, G) {
    function W(v, q, K, S) {
      var o = v.length;
      for (var y = 0; y < o; y++) S[y] = v[y] - q[y] * K;
    }
    function k(v, q, K, S) {
      var o = v.length,
        V = 0;
      while (((o - V) & 3) != 0) {
        S[V] = v[V] + q[V] * K;
        V++;
      }
      for (var y = V; y < o; y += 4) {
        S[y] = v[y] + q[y] * K;
        S[y + 1] = v[y + 1] + q[y + 1] * K;
        S[y + 2] = v[y + 2] + q[y + 2] * K;
        S[y + 3] = v[y + 3] + q[y + 3] * K;
      }
    }
    function T(v, q, K) {
      var S = v.length;
      for (var y = 0; y < S; y++) K[y] = v[y] * q[y];
    }
    function b(v, q) {
      var K = v.length,
        S = 0,
        o = 0;
      while (((K - S) & 3) != 0) {
        o += v[S] * q[S];
        S++;
      }
      for (var y = S; y < K; y += 4)
        o +=
          v[y] * q[y] +
          v[y + 1] * q[y + 1] +
          v[y + 2] * q[y + 2] +
          v[y + 3] * q[y + 3];
      return o;
    }
    var c = n != null ? 2 : 1,
      a = Date.now(),
      f = 0,
      U = this,
      Z = j.slice(0),
      h = j.slice(0);
    U.cg(j, h);
    W(q, h, 1, Z);
    var u = this.RJ;
    if (c == 0) {
      u = Z.slice(0);
      u.fill(1);
    }
    var i = Z.slice(0);
    T(u, Z, i);
    var x = i.slice(0),
      X = b(Z, i);
    while (!0) {
      U.cg(x, h);
      var $ = X / b(x, h);
      k(j, x, $, j);
      W(Z, h, $, Z);
      if ((f & 7) == 0 && Math.sqrt(b(Z, Z)) < m) break;
      if (c <= 1) T(u, Z, i);
      else {
        var H = Z.slice(0);
        n.ag_(H, Z);
        G.aC5(i, H);
      }
      var C = b(Z, i),
        l = C / X;
      k(i, x, l, x);
      X = C;
      f++;
    }
  };
  B.$J.prototype.adZ = function (j, q, m, n) {
    var G = Date.now(),
      W = 1.96,
      T = 0;
    if (m == null) m = 5e-6;
    if (n == null) n = 1e9;
    var k = 1 - W,
      aF = this.rows,
      b = this.Ob,
      c = this.xZ,
      a = this.Ca,
      f = this.RJ;
    while (!0) {
      var U = 0;
      for (var y = 0; y < aF; y++) {
        var Z = q[y],
          h = c[y],
          u = c[y + 1];
        if (u - h == 4)
          Z -=
            b[h] * j[a[h]] +
            b[h + 1] * j[a[h + 1]] +
            b[h + 2] * j[a[h + 2]] +
            b[h + 3] * j[a[h + 3]];
        else for (var i = h; i < u; i++) Z -= b[i] * j[a[i]];
        var x = j[y] * k + f[y] * Z * W,
          X = x - j[y];
        U += X * X;
        j[y] = x;
      }
      if (U / aF < m || Date.now() > G + n) break;
    }
  };
  B.$J.prototype.aDY = function (j, q, m, n) {
    var G = Date.now(),
      W = 1.96,
      T = 0;
    if (m == null) m = 5e-5;
    if (n == null) n = 1e9;
    var k = 1 - W,
      aF = this.rows,
      b = this.Ob,
      c = this.xZ,
      a = this.Ca,
      f = this.RJ;
    while (!0) {
      var U = 0;
      for (var y = 0; y < aF; y++) {
        var Z = y * 3,
          h = q[Z],
          u = q[Z + 1],
          i = q[Z + 2],
          x = c[y],
          X = c[y + 1];
        for (var $ = x; $ < X; $++) {
          var H = b[$],
            C = a[$] * 3;
          h -= H * j[C + 0];
          u -= H * j[C + 1];
          i -= H * j[C + 2];
        }
        var l = f[y] * W,
          v = j[Z + 0] * k + h * l,
          K = j[Z + 1] * k + u * l,
          S = j[Z + 2] * k + i * l,
          o = v - j[Z + 0],
          V = K - j[Z + 1],
          P = S - j[Z + 2];
        U += 0.4 * o * o + 0.5 * V * V + 0.1 * P * P;
        j[Z + 0] = v;
        j[Z + 1] = K;
        j[Z + 2] = S;
      }
      if (U / aF < m || Date.now() > G + n) break;
    }
  };
  B.SD = {};
  B.SD.Fn = function (j, q, m) {
    return {
      t: "Objc",
      v: {
        classID: "CrPt",
        Hrzn: { t: "doub", v: j },
        Vrtc: { t: "doub", v: q },
        Cnty: { t: "bool", v: m },
      },
    };
  };
  B.SD.u = function (j, q) {
    for (var y = 0; y < j.length; y++) {
      var m = j[y].v,
        n = q.uL(new ea(m.Hrzn.v, m.Vrtc.v));
      m.Hrzn.v = Math.round(n.x);
      m.Vrtc.v = Math.round(n.y);
    }
  };
  B.SD.aCz = function (j, q, m) {
    var aF = j.length - 1,
      n = B.OC.tq(aF + 1, aF + 2);
    for (var y = 1; y < aF; y++) {
      n[y][y - 1] = 1 / (j[y] - j[y - 1]);
      n[y][y] = 2 * (1 / (j[y] - j[y - 1]) + 1 / (j[y + 1] - j[y]));
      n[y][y + 1] = 1 / (j[y + 1] - j[y]);
      n[y][aF + 1] =
        3 *
        ((q[y] - q[y - 1]) / ((j[y] - j[y - 1]) * (j[y] - j[y - 1])) +
          (q[y + 1] - q[y]) / ((j[y + 1] - j[y]) * (j[y + 1] - j[y])));
    }
    n[0][0] = 2 / (j[1] - j[0]);
    n[0][1] = 1 / (j[1] - j[0]);
    n[0][aF + 1] = (3 * (q[1] - q[0])) / ((j[1] - j[0]) * (j[1] - j[0]));
    n[aF][aF - 1] = 1 / (j[aF] - j[aF - 1]);
    n[aF][aF] = 2 / (j[aF] - j[aF - 1]);
    n[aF][aF + 1] =
      (3 * (q[aF] - q[aF - 1])) / ((j[aF] - j[aF - 1]) * (j[aF] - j[aF - 1]));
    B.OC.dl(n, m);
  };
  B.SD.aHG = function (j, q, m, n) {
    if (j <= q[0]) return m[0];
    if (j >= q[q.length - 1]) return m[q.length - 1];
    var y = 1;
    while (q[y] < j) y++;
    var G = q[y],
      W = q[y - 1],
      k = m[y],
      T = m[y - 1],
      b = (j - W) / (G - W),
      c = n[y - 1] * (G - W) - (k - T),
      a = -n[y] * (G - W) + (k - T),
      f = (1 - b) * T + b * k + b * (1 - b) * (c * (1 - b) + a * b);
    return f;
  };
  B.SD.a2v = function (j, q, m, n) {
    var G = { lZ: [j[0]], S8: [q[0]], Dn: [] };
    n[0] = G;
    for (var y = 1; y < j.length - 1; y++) {
      G.lZ.push(j[y]);
      G.S8.push(q[y]);
      if (m[y] == !1) {
        B.SD.aCz(G.lZ, G.S8, G.Dn);
        G = { lZ: [j[y]], S8: [q[y]], Dn: [] };
      }
      n[y] = G;
    }
    G.lZ.push(j[y]);
    G.S8.push(q[y]);
    B.SD.aCz(G.lZ, G.S8, G.Dn);
    n[y] = G;
  };
  B.SD.aoD = function (j, q, m, n) {
    if (j <= q[0]) return m[0];
    if (j >= q[q.length - 1]) return m[q.length - 1];
    var y = 1;
    while (q[y] < j) y++;
    var G = n[y - 1];
    return B.SD.aHG(j, G.lZ, G.S8, G.Dn);
  };
  B.SD.apl = function (j) {
    var q = { lZ: [], S8: [], aBz: [] };
    for (var y = 0; y < j.length; y++) {
      q.lZ[y] = j[y].v.Hrzn.v;
      q.S8[y] = j[y].v.Vrtc.v;
      q.aBz[y] = j[y].v.Cnty ? j[y].v.Cnty.v : !0;
    }
    return q;
  };
  B.SD.Bh = function (j, aF, q) {
    var m = 0,
      n = 255;
    if (q) {
      m = -1e9;
      n = 1e9;
    }
    var G = B.SD.apl(j),
      W = [];
    B.SD.a2v(G.lZ, G.S8, G.aBz, W);
    var k = new Float32Array(aF);
    for (var y = 0; y < aF; y++)
      k[y] =
        (1 / 255) *
        Math.max(m, Math.min(n, B.SD.aoD(y * (255 / (aF - 1)), G.lZ, G.S8, W)));
    return k;
  };
  B.SD.aLj = function (j, aF, q) {
    var m = Math.round(j.length / 20),
      n = aF - j.length,
      G = q ? (j[m] - j[0]) / m : 0,
      W = q ? j[0] - n * G : j[j.length - 1],
      k = new Float32Array(aF);
    k.set(j, q ? n : 0);
    for (var y = 0; y < n; y++) k[y + (q ? 0 : n)] = W + y * G;
    return k;
  };
  B.SD.aBv = function (j, aF, q, m) {
    if (m == null) m = 8;
    var n = B.SD.Bh(j, aF, !1),
      G;
    if (m == 8) {
      G = new Uint8Array(aF);
      for (var y = 0; y < aF; y++) G[y] = ~~(0.5 + 255 * n[y]);
    }
    if (m == 16) {
      G = new Uint16Array(aF);
      for (var y = 0; y < aF; y++) G[y] = ~~(0.5 + 65535 * n[y]);
    }
    if (m == 32) G = n;
    if (q && G[0] != 0) {
      var W = Math.ceil(aF / 12);
      for (var y = 0; y < W; y++) G[y] *= y / W;
    }
    return G;
  };
  B.SD.aqW = function (j, q) {
    var m = new Uint8Array(j.length);
    for (var y = 0; y < j.length; y++) m[y] = q[j[y]];
    return m;
  };
  B.SD.a95 = function (j, q) {
    var m = q.length,
      n = new Float32Array(m);
    for (var y = 0; y < m; y++) n[y] = q[~~(j[y] * (m - 1))];
    return n;
  };
  B.SD.hj = function (j, q, m) {
    var n = document.createElement("canvas");
    n.width = q;
    n.height = m;
    var G = n.getContext("2d"),
      W = B.SD.aBv(j, 256);
    G.scale(q / 255, m / 255);
    G.fillStyle = "#fff";
    G.fillRect(0, 0, 255, 255);
    G.fillStyle = "#333";
    G.beginPath();
    G.moveTo(0, 255);
    for (var y = 0; y < W.length; y++) G.lineTo(y, 255 - W[y]);
    G.lineTo(255, 255);
    G.closePath();
    G.fill();
    return n.toDataURL();
  };
  B.style = {};
  B.style.stroke = function (j, q, m, n) {
    var G = m.r,
      W = m.$,
      k = B.style.Af(j, G, W);
    B.style.jd(q, m, k, m, n);
  };
  B.style.jd = function (j, q, m, n, G) {
    var W = B.TN(B.oM(j)),
      k = q.TM(n),
      T = k.r,
      b = k.$;
    G += 0.5;
    var c = k.x - q.x,
      a = k.y - q.y,
      f = q.r,
      U = k.x - n.x,
      Z = k.y - n.y,
      h = n.r;
    for (var u = 0; u < b; u++) {
      var i = (u + Z) * h + U,
        x = (u + a) * f + c;
      for (var X = 0; X < T; X++) {
        var $ = Math.max(0, Math.min(1, G - m[i + X]));
        j[x + X] = W == 1 ? $ : Math.round($ * W);
      }
    }
  };
  B.style.afE = function (j, q, m, n) {
    for (var G = 0; G < m; G++)
      for (var W = 0; W < q; W++) {
        var k = G * q + W,
          T = 0,
          b = 0,
          c = j[k];
        if (W == 0 || G == 0) {
          T = j[k + 1] - c;
          b = j[k + q] - c;
        } else if (W == m - 1 || G == q - 1) {
          T = c - j[k - 1];
          b = c - j[k - q];
        } else {
          T = j[k + 1] - j[k - 1];
          b = j[k + q] - j[k - q];
        }
        if (T != 0 || b != 0) {
          var a = 1 / Math.sqrt(T * T + b * b);
          T *= a;
          b *= a;
        }
        n[k + k] = T;
        n[k + k + 1] = b;
      }
  };
  B.style.Af = function (j, q, m) {
    j = B.sL(j, 8);
    var n = q * m,
      G = new ArrayBuffer((n + q * 4) * 4),
      W = new Float32Array(G, 0, n),
      k = new Uint16Array(G, 0, n << 1),
      T = new Int32Array(G, n * 4, q),
      b = new Int32Array(G, (n + q) * 4, q),
      c = new Int32Array(G, (n + q * 2) * 4, q),
      a = new Int32Array(G, (n + q * 3) * 4, q),
      f = 1 / 255;
    for (let y = 0; y < q; ++y) {
      let U = -m - q,
        Z = 0,
        h = y,
        u = 0;
      for (; u < m; ++u, h += q) {
        if (j[h] > 128) (U = u), (Z = j[h]);
        k[h << 1] = u - U;
        k[(h << 1) + 1] = Z;
      }
      (U = k[(h += h - q - q)]), (Z = k[h + 1]);
      for (; u > 1; --u) {
        if (k[(h -= q + q)] > U) (k[h] = ++U), (k[h + 1] = Z);
        else (U = k[h]), (Z = k[h + 1]);
      }
    }
    for (let i = 0; i < n; i += q) {
      var x = i + q,
        X = k[i << 1] * k[i << 1],
        $ = 0;
      let H = (T[0] = i),
        C = (b[0] = i),
        l = X,
        v = l;
      for (let h = i + 1; h < x; ++h) {
        var K = k[h << 1] * k[h << 1];
        while ($ && v > (C - h) * (C - h) + K) {
          (C = b[--$]),
            (H = T[$]),
            (l = k[H << 1] * k[H << 1]),
            (v = (C - H) * (C - H) + l);
        }
        if ($ || v <= (C - h) * (C - h) + K) {
          var S = h - H,
            o = i + Math.floor((S * (h + H - i - i) + K - l) / (S << 1)) + 1;
          if (o < x) {
            (C = b[++$] = o),
              (H = T[$] = h),
              (l = K),
              (v = (C - H) * (C - H) + l);
          }
        } else (C = i), (H = T[0] = h), (l = K), (v = (C - H) * (C - H) + l);
      }
      for (let y = 0; y < $; ++y) {
        var V = T[y] << 1;
        c[y] = k[V] * k[V];
        a[y] = k[V + 1];
      }
      let P = 0.5 - k[(T[$] << 1) + 1] * f;
      for (let h = x - 1; h >= i; --h) {
        W[h] = Math.max(0, Math.sqrt((h - H) * (h - H) + l) + P);
        if ($ && h == C) {
          (C = b[--$]), (H = T[$]), (l = c[$]), (P = 0.5 - a[$] * f);
        }
      }
    }
    return W;
  };
  B.style.aEe = function (j, q, m) {
    var n = new Float64Array(q * m),
      G = 0,
      W = q * m;
    for (var y = 0; y < W; y++) G |= j[y];
    if (G == 0) {
      n.fill(1e9);
      return;
    }
    var k = B.style.uf(j, q, m);
    for (var T = 0; T < m; T++)
      for (var b = 0; b < q; b++) {
        var y = T * q + b,
          c = k[y * 2],
          a = k[y * 2 + 1];
        if (c == 0 && a == 0) {
          n[y] = 0;
          continue;
        }
        var f = Math.sqrt(c * c + a * a),
          U = j[(T + a) * q + b + c] * (1 / 255);
        n[y] = f + 0.5 - U;
      }
    return n;
  };
  B.style.a38 = function (j, q, m) {
    return (0.5 - m) * j;
  };
  B.style.uf = function (j, q, m, n) {
    var G = new Int16Array(q * m * 2);
    B.style.alm(j, G, q, m, 128);
    return G;
  };
  B.style.alm = function (j, q, m, n, G) {
    var W = new Int32Array(m * n);
    B.style.a6H(j, W, m, n, G);
    B.style.a3X(W, q, m, n);
  };
  B.style.a6H = function (j, q, m, n, G) {
    var W = new Int32Array(n);
    for (var k = 0; k < m; k++) {
      var T = m + n;
      for (var b = n - 1; b >= 0; b--) {
        if (j[b * m + k] > G) T = 0;
        else T++;
        W[b] = T;
      }
      T = m + n;
      for (var b = 0; b < n; b++) {
        if (j[b * m + k] > G) T = 0;
        else T++;
        q[b * m + k] = T < W[b] ? -T : W[b];
      }
    }
  };
  B.style.a3X = function (j, q, m, n) {
    var G = (m + n) * (m + n),
      W = new Float64Array(m),
      k = new Uint16Array(m);
    for (var T = 0; T < n; T++) {
      var b = T * m,
        c = 0;
      k[0] = 0;
      W[0] = -G;
      W[1] = +G;
      for (var a = 1; a < m; a++) {
        var f = j[a + b] * j[a + b] + a * a,
          U =
            (f - (j[k[c] + b] * j[k[c] + b] + k[c] * k[c])) /
            (2 * a - 2 * k[c]);
        while (U <= W[c]) {
          c--;
          U =
            (f - (j[k[c] + b] * j[k[c] + b] + k[c] * k[c])) /
            (2 * a - 2 * k[c]);
        }
        c++;
        k[c] = a;
        W[c] = U;
        W[c + 1] = G;
      }
      c = 0;
      for (var a = 0; a < m; a++) {
        while (W[c + 1] < a) c++;
        var Z = k[c] - a,
          h = j[k[c] + b],
          y = (T * m + a) << 1;
        q[y] = Z;
        q[y + 1] = h;
      }
    }
  };
  B._9 = {};
  B._9.Fz = function (j, q, m) {
    var n = j.canvas;
    if (n.width != q || n.height != m) {
      n.width = q;
      n.height = m;
    }
  };
  B._9.Wa = function (j, q, m, n, G, W) {
    var k = B.oM(G.N),
      T = k == 8 ? 255 : k == 16 ? 65535 : 1,
      b = 1 / T;
    B._9.Fz(j, q, m);
    if (W == null) W = !1;
    var c = G.N,
      a = G.H,
      f = !G.isEnabled;
    if (q * m == 0) return;
    var U = new ImageData(q, m),
      Z = U.data,
      h = 1 / q,
      u = 1 / m,
      i = G.color / 255;
    for (var y = 0; y < m; y++)
      for (var x = 0; x < q; x++) {
        var X = (y * q + x) * 4,
          $ = Math.round(n.x + x * h * n.r),
          H = Math.round(n.y + y * u * n.$),
          C = 0;
        if ($ < a.x || $ >= a.x + a.r || H < a.y || H >= a.y + a.$) C = i;
        else C = c[(H - a.y) * a.r + ($ - a.x)] * b;
        C = 255 - G.CA + C * G.CA;
        if (W) C = 170 + Math.round(0.4 * (C - 170));
        Z[X] = C;
        Z[X + 1] = C;
        Z[X + 2] = C;
        Z[X + 3] = 255;
      }
    j.putImageData(U, 0, 0);
    if (f) B._9.akZ(j, q, m);
  };
  B._9.ahJ = {};
  B._9.atx = function (j, q, m, n) {
    var G, W, k;
    G = Math.ceil(Math.max(q, m) * 0.35);
    W = q - G;
    k = m - G;
    var T = n.generativeDocInfo,
      b = G + "-" + (T ? 1 : 0),
      c = B._9.ahJ[b];
    if (c == null) {
      var a = B.l4(G, G),
        f = Math.round(G * 0.27),
        U = (a.lineWidth = Math.max(1, Math.round(G * 0.12))),
        Z = U / 2;
      if (T) {
        a.fillStyle = "black";
        a.fillRect(0, 0, G, G);
        a.beginPath();
        for (var h = 0; h < 1; h++)
          for (var y = 0; y < 10; y++) {
            var u = -Math.PI / 2 + (y * 2 * Math.PI) / 10,
              i = ((y & 1) == 0 ? 1 : 0.4) * G * 0.52,
              x = 0.5,
              X = 0.52;
            x = G * x + Math.cos(u) * i;
            X = G * X + Math.sin(u) * i;
            if (y == 0) a.moveTo(x, X);
            else a.lineTo(x, X);
          }
        a.closePath();
        a.fillStyle = "white";
        a.fill();
      } else {
        a.fillStyle = "#eeeeee";
        a.fillRect(0, 0, G, G);
        a.strokeRect(1 + Z, 1 + Z, G - U - 2, G - U - 2);
        a.strokeRect(f + Z, f + Z, G - f - f - U, G - f - f - U);
      }
      c = B._9.ahJ[b] = a.getImageData(0, 0, G, G);
    }
    j.putImageData(c, W, k);
  };
  B._9.apf = [];
  B._9.azb = function (j, q, m) {
    var n, G, W;
    n = Math.ceil(Math.max(q, m) * 0.35);
    G = q - n;
    W = m - n;
    var k = B._9.apf[n];
    if (k == null) {
      var T = B.l4(n, n);
      T.fillStyle = "#eeeeee";
      T.fillRect(0, 0, n, n);
      T.lineWidth = 1;
      T.strokeRect(2.5, 2.5, n - 5, n - 5);
      var b = new ImageData(3, 3),
        c = b.data;
      B.bs(c, 4278190080);
      c[4 * 4] = c[4 * 4 + 1] = c[4 * 4 + 2] = 238;
      T.putImageData(b, 1, 1);
      T.putImageData(b, n - 4, 1);
      T.putImageData(b, 1, n - 4);
      T.putImageData(b, n - 4, n - 4);
      k = B._9.apf[n] = T.getImageData(0, 0, n, n);
    }
    j.putImageData(k, G, W);
  };
  B._9.aoy = function (j, q, m, n, G, W) {
    B._9.Fz(j, q, m);
    var k = q / n.r;
    if (q * m == 0) return;
    j.fillStyle = "#999999";
    j.setTransform(1, 0, 0, 1, 0, 0);
    j.clearRect(0, 0, q, m);
    j.save();
    var T = B._9.akw;
    if (T == null) T = B._9.akw = eu.rS.i4(!0, !0);
    T.strokeStyleLineWidth.v.val = 1 / k;
    j.fillStyle = "#ffffff";
    j.scale(k, k);
    B.z.V7(G.D, j, 0, 0);
    B.z.V7(G.D, j, 0, 0, T);
    j.restore();
    if (W) {
      j.save();
      var b = q * 0.4,
        c = m * 0.4;
      j.fillRect(q - b, m - c, b, c);
      j.beginPath();
      j.moveTo(q - b / 2, m - c);
      j.lineTo(q - b / 2, m);
      j.setLineDash([3, 3]);
      j.stroke();
      j.restore();
    }
  };
  B._9.aeE = function (j, q, m, n, G) {
    B._9.Fz(j, q, m);
    if (q * m == 0) return;
    j.setTransform(1, 0, 0, 1, 0, 0);
    j.fillStyle = "white";
    j.fillRect(0, 0, q, m);
    var W = G.v,
      k;
    if (W.add.SoLd) k = L.Dq.Kt(W.add.SoLd.nonAffineTransform);
    else if (W.add.vmsk) k = W.add.vmsk.HG();
    else if (W.add.TySh) {
      if (W.a_.c7 == null) return;
      k = B.b._c(W.a_.c7).L;
      B.b.u(k, W.add.TySh.u, k);
    } else return;
    var T = B.b.RD(k),
      b = Math.min(q / T.r, m / T.$),
      c = T.r * b,
      a = T.$ * b;
    j.translate(-T.x * b + (q - c) * 0.5, -T.y * b + (m - a) * 0.5);
    j.scale(b, b);
    G.xv(n, j, null, null);
  };
  B._9.alf = null;
  B._9.QW = function (j, q, m, n, G, W, k, T, b) {
    B._9.Fz(j, q, m);
    if (q * m == 0) return;
    var c = Math.max(q, m),
      a = B._9.alf;
    if (a == null || a.width < c || a.height < c) {
      B._9.alf = a = new ImageData(c, c);
    }
    c = a.width;
    var f = a.data,
      U = n.r / q,
      Z = n.$ / m,
      h = W.x,
      u = W.x + W.r,
      i = W.y,
      x = W.y + W.$,
      X = B.oM(G) - 8;
    for (var y = 0; y < m; y++)
      for (var $ = 0; $ < q; $++) {
        var H = y * c + $,
          C = H * 4,
          l = ~~(n.x + $ * U),
          v = ~~(n.y + y * Z),
          K = B.a7g(y, $, 2);
        if (l < h || l >= u || v < i || v >= x || b) {
          f[C] = K;
          f[C + 1] = K;
          f[C + 2] = K;
          f[C + 3] = 255;
        } else {
          var S = ((v - W.y) * W.r + (l - W.x)) << 2;
          if (X != 24) {
            var o = (G[S + 3] >>> X) * (1 / 255);
            f[C] = (G[S + 0] >>> X) * o + K * (1 - o);
            f[C + 1] = (G[S + 1] >>> X) * o + K * (1 - o);
            f[C + 2] = (G[S + 2] >>> X) * o + K * (1 - o);
          } else {
            var o = G[S + 3];
            f[C] = G[S + 0] * o * 255 + K * (1 - o);
            f[C + 1] = G[S + 1] * o * 255 + K * (1 - o);
            f[C + 2] = G[S + 2] * o * 255 + K * (1 - o);
          }
          f[C + 3] = 255;
        }
      }
    if (T != null)
      for (var y = 0; y < f.length; y += 4)
        f[y] = f[y + 1] = f[y + 2] = f[y + T];
    j.putImageData(a, 0, 0);
    if (k) B._9.akZ(j, q, m);
  };
  B._9.aDi = function (j, q, m, n) {
    B._9.Fz(j, q, m);
    j.fillStyle = B._9.xH(n.Clr.v);
    j.fillRect(0, 0, q, m);
    B._9.aW(j, q, m);
  };
  B._9.$f = null;
  B._9.ale = function (j, q, m, n) {
    B._9.Fz(j, q, m);
    var G = j.canvas.width,
      W = j.canvas.height,
      k = B._9.$f;
    if (k == null || k.width != G || k.height != W) {
      j.fillStyle = "#ffffff";
      j.fillRect(0, 0, q, m);
      j.fillStyle = "#000000";
      j.font = "" + m * 0.7 + "px serif";
      j.fillText("T", (q - m * 0.43) / 2, m * 0.75);
      j.fillText("T", (q - m * 0.43) / 2, m * 0.75);
      B._9.$f = j.getImageData(0, 0, G, W);
    } else j.putImageData(k, 0, 0);
  };
  B._9.avK = function (j, q, m) {
    B._9.Fz(j, q, m);
    j.clearRect(0, 0, q, m);
    j.font = m * 0.7 + "px serif";
    j.fillText(":(", (q - m * 0.43) / 2, m * 0.7);
  };
  B._9.asW = function (j, q, m, n) {
    B._9.Fz(j, q, m);
    var G = eV.get(n),
      W = j.canvas.width,
      k = B._9.aF7[W + G];
    if (k == null) {
      var T = PIMG["adj/" + G],
        b = gh.TD(T),
        c = UPNG.decode(b.buffer),
        a = new Uint8Array(UPNG.toRGBA8(c)[0]),
        f = new hk(0, 0, 160, 160),
        U = 0,
        Z = W - U * 2,
        h = L.Dq.Ve([a, f], new k$(Z / 160, 0, 0, Z / 160, 0, 0)),
        u = new hk(0, 0, W, W),
        i = B.j(u.C() * 4);
      B.G.Jg("norm", h.buffer, h.H, i, u, h.H, 1);
      k = B._9.aF7[W + G] = new ImageData(
        new Uint8ClampedArray(i.buffer),
        W,
        W
      );
    }
    j.putImageData(k, 0, 0);
  };
  B._9.aF7 = {};
  B._9.aEE = function (j, q, m, n) {
    B._9.Fz(j, q, m);
    var G = j.canvas.width,
      W = j.canvas.height,
      k = j.getImageData(0, 0, G, W);
    B.MV.S$(
      n.Grad.v,
      new Uint8Array(k.data.buffer),
      new hk(0, 0, G, W),
      [1 / G, 0, 0, 1 / W],
      G / 2,
      W / 2,
      !1,
      0,
      16711680,
      65280
    );
    j.putImageData(k, 0, 0);
    B._9.aW(j, q, m);
  };
  B._9.asE = function (j, q, m, n, G) {
    B._9.Fz(j, q, m);
    var W = j,
      k = dS.SP(n.Ptrn.v, G.add.Patt);
    if (k == null) return;
    var T = k.Og[1];
    B._9.QW(j, q, m, T, k.Og[0], T, !1);
    B._9.aW(W, q, m);
  };
  B._9.akZ = function (j, q, m) {
    j.strokeStyle = "#bb0000";
    j.lineWidth = 3;
    j.beginPath();
    j.moveTo(q * 0.15, m * 0.15);
    j.lineTo(q * 0.85, m * 0.85);
    j.moveTo(q * 0.85, m * 0.15);
    j.lineTo(q * 0.15, m * 0.85);
    j.closePath();
    j.stroke();
  };
  B._9.aW = function (j, q, m) {
    j.fillStyle = "#eeeeee";
    j.fillRect(0, m * 0.75, q, m * 0.25);
    j.beginPath();
    j.moveTo(0, m * 0.75);
    j.lineTo(q, m * 0.75);
    j.moveTo(q * 0.1, m * 0.875);
    j.lineTo(q * 0.9, m * 0.875);
    j.moveTo(q * 0.65, m * 0.825);
    j.lineTo(q * 0.65, m * 0.95);
    j.closePath();
    j.stroke();
  };
  B._9.xH = function (j) {
    var q = B.MV.xH(j),
      m = (Math.round(q.o) << 16) | (Math.round(q.i) << 8) | Math.round(q.X);
    return "#" + B.bw(m);
  };
  B.z = {};
  B.z.WA = function (j, q, m) {
    var n = [],
      G = -1;
    for (var y = 0; y < j.length; y++) {
      var W = j[y];
      if ((W.e == 0 || W.e == 3) && W.Np != -1) G++;
      if (W.e > 5 || W.e == 0 || W.e == 3) continue;
      if (q != null && q.indexOf(G) == -1) continue;
      if (m != null && m.indexOf(y) == -1) continue;
      n.push(W.kt.x);
      n.push(W.kt.y);
      n.push(W.Ii.x);
      n.push(W.Ii.y);
      n.push(W._$.x);
      n.push(W._$.y);
    }
    return n;
  };
  B.z.J3 = function (j, q, m, n) {
    var G = 0,
      W = -1;
    for (var y = 0; y < q.length; y++) {
      var k = q[y];
      if ((k.e == 0 || k.e == 3) && k.Np != -1) W++;
      if (k.e > 5 || k.e == 0 || k.e == 3) continue;
      if (m != null && m.indexOf(W) == -1) continue;
      if (n != null && n.indexOf(y) == -1) continue;
      k.kt.Tu(j[G], j[G + 1]);
      k.Ii.Tu(j[G + 2], j[G + 3]);
      k._$.Tu(j[G + 4], j[G + 5]);
      G += 6;
    }
  };
  B.z.La = function (j, q, m, n) {
    var G = B.z.WA(j, m, n);
    B.b.u(G, q, G);
    B.z.J3(G, j, m, n);
  };
  B.z.aft = function (j, q, m, n) {
    var G = B.z.WA(j, m, n);
    B.B.u(q, G);
    B.z.J3(G, j, m, n);
  };
  B.z.agD = function (j, q, m, n) {
    if (n == null) {
      var G = B.z.aI9(j, 40, m);
      for (var y = 0; y < G.length; y++) j[y] = G[y];
    }
    var W = B.z.WA(j, m, n);
    B.Ol.u(q, W, B.b.RD(W));
    B.z.J3(W, j, m, n);
  };
  B.z.aI9 = function (j, q, m) {
    var n = [],
      G = -1;
    for (var y = 0; y < j.length; y++) {
      var W = j[y],
        k = W.length;
      if (W.e > 5) {
        n.push(B.S(W));
        continue;
      }
      W = B.S(W);
      n.push(W);
      if (W.Np != -1) G++;
      if (m && m.indexOf(G) == -1) {
        n = n.concat(j.slice(y + 1, y + 1 + k));
      } else {
        var T = B.z.apW(j, y + 1, k);
        T = B.b.Mz(T, q);
        var b = B.z.a0V(T);
        W.length = b.length;
        for (var c = 0; c < b.length; c++) n.push(b[c]);
      }
      y += k;
    }
    return n;
  };
  B.z.apW = function (j, q, m) {
    var n = { RC: ["M"], L: [] },
      G = j[q],
      W = j[q + m - 1];
    n.L.push(G.Ii.x, G.Ii.y);
    for (var y = 1; y < m; y++) {
      var k = j[q + y - 1],
        T = j[q + y];
      n.RC.push("C");
      n.L.push(k._$.x, k._$.y, T.kt.x, T.kt.y, T.Ii.x, T.Ii.y);
    }
    n.RC.push("C");
    n.L.push(W._$.x, W._$.y, G.kt.x, G.kt.y, G.Ii.x, G.Ii.y);
    return n;
  };
  B.z.a0V = function (j) {
    var q = [],
      m = j.RC,
      n = j.L,
      G = 0,
      aF = n.length;
    q.push({
      e: 2,
      kt: new ea(n[aF - 4], n[aF - 3]),
      Ii: new ea(n[0], n[1]),
      _$: new ea(n[2], n[3]),
    });
    for (var y = 0; y < m.length - 2; y++) {
      var W = y * 6 + 4;
      q.push({
        e: 2,
        kt: new ea(n[W], n[W + 1]),
        Ii: new ea(n[W + 2], n[W + 3]),
        _$: new ea(n[W + 4], n[W + 5]),
      });
    }
    return q;
  };
  B.z.a1N = function (j) {
    for (var y = 0; y < j.length; y++) {
      if (j[y].e > 5) continue;
      var q = j[y].length;
      if (!(q == 4 || q == 6 || q == 8)) {
        y += q;
        continue;
      }
      for (var m = 0; m < q; m++) {
        var n = j[y + 1 + m],
          G = j[y + 1 + ((m + 1) % q)],
          W = Math.min(n.Ii.x, G.Ii.x),
          k = Math.min(n.Ii.y, G.Ii.y),
          T = 0,
          b = 0;
        if (n.Ii.x < G.Ii.x) {
          T = n.Ii.y - k;
          b = T - (G.Ii.x - W);
        } else {
          T = G.Ii.y - k;
          b = T - (n.Ii.x - W);
        }
        if (Math.abs(b) < 0.2 * T) return T;
      }
    }
    return -1;
  };
  B.z.zZ = function (j, q, m) {
    function n(U, Z) {
      var h = Math.min(U.x, Z.x),
        u = Math.min(U.y, Z.y),
        i = Math.max(U.x + U.r, Z.x + Z.r),
        x = Math.max(U.y + U.$, Z.y + Z.$);
      return new hk(h, u, i - h, x - u);
    }
    var G = null,
      W = -1,
      k = !B.z.iC(j);
    for (var y = 0; y < j.length; y++) {
      var T = j[y];
      if (T.e > 5) continue;
      if ((T.e == 0 || T.e == 3) && T.Np != -1) W++;
      if (q != null && q.indexOf(W) == -1) continue;
      if (y == j.length - 1) break;
      var b = T.e == 3,
        c = T.length,
        a = T.Np,
        f = B.z.tP(j, y + 1, c, b);
      if (G == null) G = f;
      else if (m) G = n(G, f);
      else if (k) {
        if (q != null || a == 0 || a == -1 || a == 2) G = n(G, f);
        else if (a == 1) G = G;
        else if (a == 3) {
          G = f;
          k = !1;
        }
      } else {
        if (q != null || a == 0 || a == -1 || a == 1) G = n(G, f);
        else if (a == 2) G = G;
        else if (a == 3) G = G.TM(f);
      }
      y += c;
    }
    if (G == null || G.r < 0 || G.$ < 0) G = new hk(0, 0, 0, 0);
    return G;
  };
  B.z.aAH = new Float64Array(4);
  B.z.tP = function (j, y, q, m) {
    var n = B.z.aAH;
    n[0] = 1e30;
    n[1] = 1e30;
    n[2] = -1e30;
    n[3] = -1e30;
    var G = j[y + q - 1];
    if (!m)
      B.z.a67(
        G.Ii.x,
        G.Ii.y,
        G._$.x,
        G._$.y,
        j[y].kt.x,
        j[y].kt.y,
        j[y].Ii.x,
        j[y].Ii.y,
        n
      );
    for (var W = y; W < y + q - 1; W++) {
      var k = j[W],
        T = j[W + 1];
      B.z.a67(
        k.Ii.x,
        k.Ii.y,
        k._$.x,
        k._$.y,
        T.kt.x,
        T.kt.y,
        T.Ii.x,
        T.Ii.y,
        n
      );
    }
    return new hk(n[0], n[1], n[2] - n[0], n[3] - n[1]);
  };
  B.z.a67 = function (j, q, m, n, G, W, k, T, b) {
    if (j == m && q == n && G == k && W == T) {
      b[0] = Math.min(b[0], Math.min(j, k));
      b[1] = Math.min(b[1], Math.min(q, T));
      b[2] = Math.max(b[2], Math.max(j, k));
      b[3] = Math.max(b[3], Math.max(q, T));
      return;
    }
    var c = j,
      a = q,
      f = j,
      U = q,
      Z = 40,
      h = 1 / (Z - 1);
    for (var u = 0; u < Z; u++) {
      var i = u * h,
        x = 1 - i,
        X = x * x * x,
        $ = 3 * x * x * i,
        H = 3 * x * i * i,
        C = i * i * i,
        l = X * j + $ * m + H * G + C * k,
        v = X * q + $ * n + H * W + C * T;
      if (l < c) c = l;
      else if (l > f) f = l;
      if (v < a) a = v;
      else if (v > U) U = v;
    }
    if (c < b[0]) b[0] = c;
    if (a < b[1]) b[1] = a;
    if (f > b[2]) b[2] = f;
    if (U > b[3]) b[3] = U;
  };
  B.z.aFE = function (j, q) {
    var m = j.length - 3,
      n = q % m,
      G = Math.floor(n);
    if (q < 0 || G >= m) return null;
    var W = j[3 + G],
      k = j[3 + ((G + 1) % m)],
      T = W.Ii,
      b = W._$,
      c = k.kt,
      a = k.Ii,
      f = n - G,
      U = 1 - f,
      Z =
        U * U * U * T.x +
        3 * U * U * f * b.x +
        3 * U * f * f * c.x +
        f * f * f * a.x,
      h =
        U * U * U * T.y +
        3 * U * U * f * b.y +
        3 * U * f * f * c.y +
        f * f * f * a.y;
    return new ea(Z, h);
  };
  B.z.Q2 = function (j, q) {
    var m = B.b.nJ(j),
      n = m.ku;
    m.ku = Typr.U.pathToSVG({ crds: n.L, cmds: n.RC }, q == null ? 2 : q);
    return m;
  };
  B.z.ah8 = function (j) {
    var q = [],
      m = j.L,
      n = 0,
      G = 0,
      W = 0,
      k = 0,
      T = 0,
      b = !0;
    for (var y = 0; y < j.RC.length; y++) {
      var c = j.RC[y];
      if (c == "M") {
        if (!b && (G != k || W != T)) q.push(["L", [G, W], [k, T]]);
        k = G = m[n];
        T = W = m[n + 1];
        n += 2;
        b = !1;
      } else if (c == "L") {
        q.push(["L", [G, W], [m[n], m[n + 1]]]);
        G = m[n];
        W = m[n + 1];
        n += 2;
      } else if (c == "Q") {
        q.push(["Q", [G, W], [m[n], m[n + 1]], [m[n + 2], m[n + 3]]]);
        G = m[n + 2];
        W = m[n + 3];
        n += 4;
      } else if (c == "C") {
        q.push([
          "C",
          [G, W],
          [m[n], m[n + 1]],
          [m[n + 2], m[n + 3]],
          [m[n + 4], m[n + 5]],
        ]);
        G = m[n + 4];
        W = m[n + 5];
        n += 6;
      } else if (c == "Z") {
      } else throw c;
    }
    if (!b && (G != k || W != T)) q.push(["L", [G, W], [k, T]]);
    return q;
  };
  B.z.TV = function (j) {
    var q = Date.now(),
      m;
    B.z.g$();
    var n = B.z.W9(j),
      G = [];
    for (var y = 0; y < n.length; y++) {
      var W = n[y][0],
        k = n[y][1];
      if (Math.abs(W.area) < 1e-5) G.push(W);
      else if (m == null) m = W;
      else {
        if (!W.closed) W.closed = !0;
        m = m[k](W);
        m.remove();
      }
    }
    if (m == null) m = new paper.CompoundPath(G);
    else {
      if (m.segments) m = new paper.CompoundPath(m);
      for (var y = 0; y < G.length; y++) {
        m.addChild(G[y]);
      }
    }
    var T = j.slice(0, 2);
    T = T.concat(B.z.Y7(m));
    B.z.Ad(n);
    B.z.Ad([[m]]);
    if (T[2]) T[2].Np = 1;
    for (var y = 3; y < T.length; y++) if (T[y].Np != null) T[y].Np = -1;
    return T;
  };
  B.z.g$ = function () {
    if (B.z.a1k == null) {
      var j = document.createElement("canvas");
      paper.setup(j);
      B.z.a1k = !0;
    }
  };
  B.z.aGP = function (j, q) {
    B.z.g$();
    var m = [],
      n = B.z.W9(j),
      G = new paper.Path.Rectangle(new paper.Rectangle(q.x, q.y, q.r, q.$));
    G.remove();
    G.fillColor = new paper.Color(1, 0, 0);
    for (var y = 0; y < n.length; y++) {
      if (
        G.intersects(n[y][0]) ||
        G.contains(n[y][0].children[0].segments[0].point)
      )
        m.push(y);
    }
    B.z.Ad(n);
    return m;
  };
  B.z.g0 = function (j, q, m, n, G) {
    B.z.g$();
    var W = m ? { curves: !0, tolerance: n } : null,
      k = new paper.Point(q.x, q.y),
      T = B.z.W9(j, G);
    B.z.Ad(T);
    for (var y = T.length - 1; y >= 0; y--) {
      var b = T[y][0],
        c = b.hitTest(k, W);
      if (c != null)
        return {
          Wy: y,
          J9: m ? c.location.index : null,
          yw: m ? c.location.time : 0,
        };
    }
    return { Wy: -1 };
  };
  B.z.O5 = function (j, q, m, n) {
    var G = [[], [], []];
    for (var y = 0; y < j.length; y++) {
      var W = j[y];
      if (W.e > 5 || W.e == 0 || W.e == 3) continue;
      var k = q.QL(W.Ii),
        T = q.QL(W.kt),
        b = q.QL(W._$);
      if (m && m.indexOf(y) == -1) {
        if (n) {
          if (m.indexOf(y - 1) == -1) T = !1;
          if (m.indexOf(y + 1) == -1) b = !1;
        } else T = b = !1;
      }
      if (k) G[0].push(y);
      if (T) G[1].push(y);
      if (b) G[2].push(y);
    }
    G[3] = G[0].length + G[1].length + G[2].length;
    return G;
  };
  B.z.aoK = function (j, q, m) {
    var n = j[q];
    for (var G = q + 1; G < m; G++) j[G - 1] = j[G];
    j[m - 1] = n;
  };
  B.z.aeY = function (j, q, m, n) {
    var y,
      G,
      W,
      k = 0;
    j = j.slice(0);
    q.sort(function (h, u) {
      return h - u;
    });
    W = -1;
    for (y = 2; y < j.length; ) {
      var T = j[y],
        b = T.length;
      if (T.Np != -1) W++;
      var c = k;
      while (c < q.length && q[c] < y + 1 + b) c++;
      if (k != c) {
        var a = q.slice(k, c);
        k = c;
        for (G = 0; G < b; G++)
          if (a.indexOf(y + 1 + G) != -1) j[y + 1 + G] = null;
        if (T.e == 0) {
          var f = a[0] - (y + 1);
          while (f != 0) {
            B.z.aoK(j, y + 1, y + 1 + b);
            f--;
          }
        }
        var U = T;
        U.length = 0;
        G = 0;
        while (G < b && j[y + 1 + G] == null) G++;
        while (G < b) {
          var Z = j[y + 1 + G];
          if (Z != null) U.length++;
          else if (G < b + 1 && j[y + 1 + G + 1] && n) {
            U = j[y + 1 + G] = { e: 0, Np: -1, length: 0, xV: 0, yg: 0, uc: 1 };
          }
          G++;
        }
        if (n)
          for (G = -1; G < b; G++)
            if (j[y + 1 + G] && j[y + 1 + G].e < 3) j[y + 1 + G].e += 3;
        B.ih.Bq(m, W);
      }
      y += 1 + b;
    }
    for (y = 0; y < j.length; y++)
      if (j[y] == null) {
        j.splice(y, 1);
        y--;
      }
    W = 0;
    for (y = 2; y < j.length; y++) {
      var T = j[y];
      if (T.length == 0) {
        if (j[y + 1] && j[y + 1].Np == -1) j[y + 1].Np = T.Np;
        else if (T.Np != -1) m.splice(W, 1);
        j.splice(y, 1);
        y--;
      } else if (T.length != null && T.Np != -1) W++;
    }
    return j;
  };
  B.z.a6O = function (j, q) {
    for (var y = 0; y < j.length; y++) {
      var m = j[y];
      if (m.e == 0 || m.e == 3) {
        m.Np = y == 2 || q ? 0 : -1;
        m.uc = q ? 1 : 2;
      }
    }
  };
  B.z.apx = function (j, q) {
    var m = j.slice(0, 2),
      n = -1;
    for (var y = 2; y < j.length; y++) {
      if ((j[y].e == 0 || j[y].e == 3) && j[y].Np != -1) n++;
      if (q.indexOf(n) == -1) m.push(j[y]);
    }
    return m;
  };
  B.z.aCM = function (j, q) {
    var m = j.slice(0, 2),
      n = -1;
    for (var y = 2; y < j.length; y++) {
      if ((j[y].e == 0 || j[y].e == 3) && j[y].Np != -1) n++;
      if (q.indexOf(n) != -1) m.push(j[y]);
    }
    return m;
  };
  B.z.aot = function (j) {
    var q = 0;
    for (var y = 0; y < j.length; y++) if (j[y].e == 0 || j[y].e == 3) q = y;
    return j[q];
  };
  B.z.in = function (j, q) {
    var m = -1;
    for (var y = 0; y < j.length; y++)
      if ((j[y].e == 0 || j[y].e == 3) && (q || j[y].Np != -1)) m++;
    return m + 1;
  };
  B.z.kH = function (j, q, m) {
    var n = -1;
    for (var y = 0; y < j.length; y++)
      if ((j[y].e == 0 || j[y].e == 3) && (m || j[y].Np != -1)) {
        n++;
        if (n == q) return y;
      }
    return -1;
  };
  B.z.mR = function (j, q, m) {
    var n = -1;
    for (var y = 0; y < j.length; y++)
      if ((j[y].e == 0 || j[y].e == 3) && (m || j[y].Np != -1)) {
        if (y >= q) return n;
        n++;
      }
    return n;
  };
  B.z.Uo = function (j, q) {
    var m = -1,
      n = 0;
    for (var y = 0; y < j.length; y++) {
      if ((j[y].e == 0 || j[y].e == 3) && j[y].Np != -1) m++;
      if (m == q) n++;
    }
    return n;
  };
  B.z.awB = function (j) {
    var q = 180;
    for (var y = 0; y < j.length; y++) {
      if (j[y].e != 0 && j[y].e != 3) continue;
      var m = j[y].length;
      if (m < 3) continue;
      for (var n = 0; n < m; n++) {
        var G = j[y + 1 + ((n - 1 + m) % m)],
          W = j[y + 1 + n],
          k = j[y + 1 + ((n + 1) % m)],
          T = W.Ii,
          b = W.kt.Lg(T) ? G._$ : W.kt,
          c = W._$.Lg(T) ? k.kt : W._$;
        if (T.Lg(b) || T.Lg(c)) continue;
        var a = b.x - T.x,
          f = b.y - T.y,
          U = c.x - T.x,
          Z = c.y - T.y,
          b = (Math.atan2(b.y - T.y, b.x - T.x) * 180) / Math.PI,
          c = (Math.atan2(c.y - T.y, c.x - T.x) * 180) / Math.PI,
          h = Math.abs(c - b) % 360,
          u = h > 180 ? 360 - h : h;
        if (u < q) q = u;
      }
    }
    return (q * Math.PI) / 180;
  };
  B.z.Y7 = function (j) {
    var q = j.segments ? [j] : j.children,
      m = [];
    for (var y = 0; y < q.length; y++) {
      var n = q[y],
        G = n.segments,
        W = n.closed ? 0 : 3,
        k = m.length,
        T = null;
      if (G.length <= 1) continue;
      m.push({ e: W, length: G.length, Np: 0, uc: 2 });
      for (var b = 0; b < G.length; b++) {
        var c = G[b],
          a = new ea(c.handleIn.x, c.handleIn.y),
          f = new ea(c.handleOut.x, c.handleOut.y),
          U = new ea(c.point.x, c.point.y),
          Z = { e: W + 1, kt: U.add(a), Ii: U, _$: U.add(f) };
        if (T == null) T = Z;
        m.push(Z);
        if (b + 1 == G.length && ea.gw(T.Ii, Z.Ii) < 1e-5) {
          m.pop();
          m[k].length--;
          T.kt = Z.kt;
          if (W == 3) for (var h = k; h < m.length; h++) m[h].e -= 3;
        }
      }
    }
    return m;
  };
  B.z.W9 = function (j, q) {
    B.z.g$();
    var m = [],
      n,
      G = new paper.Color(1, 0, 0),
      W = 1;
    function k(u, c) {
      u.remove();
      u.closed = !c;
      u.fillRule = W == 2 ? "nonzero" : "evenodd";
    }
    for (var y = 0; y < j.length; y++) {
      if (5 < j[y].e) continue;
      var T = j[y].length,
        b;
      if (y == j.length - 1) break;
      var c = j[y].e == 3;
      if (y == 2) {
        if (!B.z.cY(j)) b = "subtract";
        else b = "unite";
      } else {
        if (j[y].Np == 0) b = "exclude";
        if (j[y].Np == 1) b = "unite";
        if (j[y].Np == 2) b = "subtract";
        if (j[y].Np == 3) b = "intersect";
      }
      if (q || j[y].Np != -1) {
        W = j[y].uc;
        n = new paper.CompoundPath();
        m.push([n, b]);
        n.fillRule = W == 2 ? "nonzero" : "evenodd";
        n.fillColor = G;
      }
      var a = [];
      for (var f = 0; f < T; f++) {
        var U = j[y + 1 + f],
          Z = U.kt.mN(U.Ii),
          h = U._$.mN(U.Ii);
        a.push([
          [U.Ii.x, U.Ii.y],
          [Z.x, Z.y],
          [h.x, h.y],
        ]);
      }
      var u = new paper.Path(a);
      k(u, c);
      n.addChild(u);
      y += T;
    }
    return m;
  };
  B.z.Ad = function (j) {
    for (var y = 0; y < j.length; y++) j[y][0].remove();
  };
  B.z.Qh = function (j) {
    for (var y = 0; y < j.length; y++) {
      var q = j[y];
      if (q.Ii == null) continue;
      if (!q.Ii.Lg(q.kt) || !q.Ii.Lg(q._$)) return !1;
    }
    return !0;
  };
  B.z.aJE = function (j) {
    if (j.length <= 5) return 0;
    var q = 0,
      m = j.length - 3 - 1;
    for (var y = 0; y < m; y++) {
      var n = j[3 + y],
        G = j[3 + y + 1];
      if (n.e == 0 || G.e == 0) return 0;
      q += (G.Ii.x - n.Ii.x) * (n.Ii.y + G.Ii.y);
    }
    q += (j[3].Ii.x - j[3 + m].Ii.x) * (j[3 + m].Ii.y + j[3 + 1].Ii.y);
    return -q * 0.5;
  };
  B.z.iC = function (j) {
    var q = j[2],
      m = !1;
    if (j.length == 2) m = j[1].all == 0;
    else if (j[1].all == 1) {
      if (q.Np == 1 || q.Np == 3) m = !0;
      else m = !1;
    } else {
      if (q.Np == 1 || q.Np == 3 || q.Np == 0) m = !0;
      else m = !1;
    }
    return m;
  };
  B.z.cY = function (j) {
    var q = B.z.iC(j);
    for (var y = 3; y < j.length; y++) if (j[y].Np == 3) q = !0;
    return q;
  };
  B.z.ajH = 0;
  B.z.aLo = 0;
  B.z.ar_ = 0;
  B.z.aII = function (j, q, m, n) {
    if (m.jG()) return;
    var G = m.C(),
      x = 16384;
    B.z.ajH += G;
    if (G > B.z.aLo) {
      B.z.aLo = G;
    }
    var W = m.r,
      k = m.$;
    if (n == null && B.z.Qh(j) && j[2] && j[2].Np != 2) {
      var T = !0;
      for (var y = 2; y < j.length; )
        if (j[y].length == 2) y += 3;
        else {
          T = !1;
          break;
        }
      if (T) {
        return;
      }
      if (B.z.Dk(j)) {
        q.fill(255);
        var b = B.z.zZ(j);
        if (b.C() != G) {
          var c = 1 - (b.x - m.x),
            a = 1 - (b.y - m.y),
            f = 1 - (m.x + m.r - (b.x + b.r)),
            U = 1 - (m.y + m.$ - (b.y + b.$)),
            Z = ~~(c * 255),
            h = ~~(f * 255),
            u = ~~(a * 255),
            i = ~~(U * 255);
          q.fill(u, 0, W);
          q[0] = ~~(c * a * 255);
          q[W - 1] = ~~(f * a * 255);
          for (var y = W; y < G; y += W) {
            q[y] = Z;
            q[y + W - 1] = h;
          }
          q.fill(i, (k - 1) * W, k * W);
          q[G - W] = ~~(c * U * 255);
          q[G - 1] = ~~(f * U * 255);
        }
        return;
      }
    }
    var X = Math.ceil(W / x),
      $ = Math.ceil(k / x),
      H = Math.ceil(W / X),
      C = Math.ceil(k / $),
      l = Date.now();
    for (var v = 0; v < $; v++)
      for (var K = 0; K < X; K++) {
        var S = K * H,
          o = v * C,
          V = H,
          P = C,
          z = B.l4(V, P);
        if (!B.z.iC(j)) z.fillRect(0, 0, V, P);
        B.z.V7(j, z, -m.x - S, -m.y - o, n);
        var E = new Uint8Array(z.getImageData(0, 0, V, P).data.buffer);
        if (V == W && P == k) B.Ih(E, q, 3);
        else B.em(E, new hk(S, o, V, P), q, new hk(0, 0, W, k));
      }
  };
  B.z.avF = function (j) {
    var q = !1,
      m = !1,
      n = 0,
      G = !1;
    for (var y = 0; y < j.length; y++) {
      var W = j[y].Np;
      if (W != null) {
        n++;
        if (W == -1) q = !0;
        if (W == 1 || W == 2 || W == 3) m = !0;
        if (j[y].e == 0) G = !0;
      }
    }
    if (!q && n < 20 && G && m) j = B.z.TV(j);
    return j;
  };
  B.z.V7 = function (j, q, m, n, G, W) {
    if (G != null) {
      j = B.z.avF(j);
    }
    var k = 1;
    for (var y = 0; y < j.length; y++) {
      if (5 < j[y].e) continue;
      var T = j[y].length;
      if (T == 0) continue;
      if (y == j.length - 1) break;
      var b = j[y].e == 3,
        c = j[y].Np;
      if (c != -1) {
        q.beginPath();
        if (G) B.z.vi(eu.rS.Nx(G), q);
        else {
          k = j[y].uc;
          if (c == 3 && y == 2) c = 1;
          var a = ["xor", "source-over", "destination-out", "source-in"][c];
          q.globalCompositeOperation = a;
        }
      }
      B.z.abK(q, j, y + 1, T, m, n, b);
      if (b) {
      } else q.closePath();
      if (j[y + 1 + T] == null || j[y + 1 + T].Np != -1) {
        if (G) {
          if (W) q.clip();
          q.stroke();
        } else q.fill(k == 2 ? "nonzero" : "evenodd");
      }
      y += T;
    }
    q.globalCompositeOperation = "source-over";
    q.setLineDash([]);
  };
  B.z.vi = function (j, q) {
    var m = j.mm;
    q.setLineDash(j.QJ);
    q.lineCap = ["butt", "round", "square"][j.kv];
    q.lineJoin = ["miter", "round", "bevel"][j.h0];
    q.lineWidth = j.x2 == 1 ? m : m * 2;
    q.miterLimit = j.NV;
  };
  B.z.abK = function (j, q, y, m, n, G, W) {
    var k = q[y],
      T = null;
    j.moveTo(k.Ii.x + n, k.Ii.y + G);
    for (var b = y; b < y + m - 1; b++) {
      k = q[b];
      T = q[b + 1];
      if (k.Ii.Lg(k._$) && T.kt.Lg(T.Ii)) j.lineTo(T.Ii.x + n, T.Ii.y + G);
      else
        j.bezierCurveTo(
          k._$.x + n,
          k._$.y + G,
          T.kt.x + n,
          T.kt.y + G,
          T.Ii.x + n,
          T.Ii.y + G
        );
    }
    if (!W) {
      k = q[b];
      T = q[y];
      if (k.Ii.Lg(k._$) && T.kt.Lg(T.Ii)) j.lineTo(T.Ii.x + n, T.Ii.y + G);
      else
        j.bezierCurveTo(
          k._$.x + n,
          k._$.y + G,
          T.kt.x + n,
          T.kt.y + G,
          T.Ii.x + n,
          T.Ii.y + G
        );
    }
  };
  B.z.a6T = function (j, q) {
    var m = [],
      n = q ? 4 : 1;
    for (var y = 0; y < j.length; y += 2) {
      var G = new ea(j[y], j[y + 1]);
      m.push({ e: n, kt: G.P(), Ii: G.P(), _$: G.P() });
    }
    return m;
  };
  B.z.ag7 = function (j, q, m) {
    var n = (1 - (m != null ? m : 25) * 0.01) * 10;
    if (n > 0) {
      for (var y = 0; y < q.length; y++) {
        var G = q[y],
          W = B.z.kH(j, G),
          k = B.z.Uo(j, G),
          T = j.slice(W, W + k);
        B.z.g$();
        var b = new paper.Path();
        b.remove();
        b.closed = !0;
        for (var c = 1; c < T.length; c++)
          b.add(new paper.Point(T[c].Ii.x, T[c].Ii.y));
        var a = b.simplify(n);
        if (a) j.splice(W, k, ...B.z.Y7(b));
      }
    }
    return j;
  };
  B.z.hu = function (j, q, m) {
    var n = B.b.RD(j),
      G = Math.sqrt(Math.sqrt(n.C())) * 0.2,
      W = 0.2;
    j = j.slice(0);
    var k = j.length,
      T = q ? 0 : 2;
    for (var b = 0; b < 5; b++)
      for (var y = T; y < j.length - T; y += 2) {
        var c = (y - 2 + k) % k,
          a = (y + 2) % k,
          f = j[y],
          U = j[y + 1],
          Z = (j[c] + j[a]) * 0.5,
          h = (j[c + 1] + j[a + 1]) * 0.5;
        j[y] = f + (Z - f) * W;
        j[y + 1] = U + (h - U) * W;
      }
    if (m) return B.z.cn.yu(j, null, !q);
    B.z.g$();
    var u = new paper.Path();
    u.remove();
    u.closed = q;
    for (var y = 0; y < j.length; y += 2)
      u.add(new paper.Point(j[y], j[y + 1]));
    u.simplify(G);
    var i = [{ e: 6 }, { e: 8, all: 0 }];
    i = i.concat(B.z.Y7(u));
    return i;
  };
  B.z.E8 = function (j, q, m) {
    var n = j[q].length,
      G = j[q].e,
      W = 0,
      k = j.slice(q + 1, q + 1 + n);
    for (var y = 0; y < n; y++) {
      var T = m[(y - 1 + n) % n],
        b = m[(y + 1 + n) % n],
        c = m[y];
      if (c != 0) {
        var a = k[(y - 1 + n) % n].Ii,
          f = k[(y + 0 + n) % n].Ii,
          U = k[(y + 1 + n) % n].Ii,
          Z = ea.gw(f, a),
          h = ea.gw(f, U),
          u = B.b.avl(a.x, a.y, f.x, f.y, U.x, U.y, c)[0],
          i = Math.min(u, T == 0 ? Z : Z / 2, b == 0 ? h : h / 2);
        c *= i / u;
        var x = B.b.aJ$(a.x, a.y, f.x, f.y, U.x, U.y, c),
          X = {
            e: G + 1,
            kt: new ea(x[2], x[3]),
            Ii: new ea(x[2], x[3]),
            _$: new ea(x[4], x[5]),
          },
          $ = {
            e: G + 1,
            kt: new ea(x[6], x[7]),
            Ii: new ea(x[8], x[9]),
            _$: new ea(x[8], x[9]),
          };
        j.splice(q + W + 1, 1, X, $);
        W++;
        j[q].length++;
      }
      W++;
    }
  };
  B.z.Qh = function (j) {
    for (var y = 0; y < j.length; y++) {
      var q = j[y],
        m = q.e;
      if (m == 1 || m == 2 || m == 4 || m == 5)
        if (!q.Ii.Lg(q.kt) || !q.Ii.Lg(q._$)) return !1;
    }
    return !0;
  };
  B.z.Dk = function (j) {
    if (j.length != 7 || j[2].length != 4 || !B.z.Qh(j)) return !1;
    for (var y = 0; y < 4; y++) {
      var q = !0;
      for (var m = 0; m < 4; m++) {
        var n = j[3 + ((y + m) & 3)],
          G = j[3 + ((y + m + 1) & 3)];
        if (n.Ii.x != G.Ii.x && n.Ii.y != G.Ii.y) q = !1;
      }
      if (q) return !0;
    }
    return !1;
  };
  B.z.ar8 = function (j) {
    if (j.length < 6) return 0;
    var q = j.length - 2,
      m = 0;
    for (var y = 0; y < q; y += 2)
      m += (j[y + 2] - j[y]) * (j[y + 1] + j[y + 3]);
    m += (j[0] - j[q]) * (j[q + 1] + j[1]);
    return -m * 0.5;
  };
  B.z.arU = function (j) {
    j = R.tm.Fo(j);
    var q = B.z.in(j);
    for (var m = 0; m < q; m++) {
      var n = B.z.kH(j, m) + 1,
        G = j[n - 1].length,
        W = [];
      for (var y = 0; y < G; y++) {
        var k = j[n + y].Ii;
        W.push(k.x, k.y);
      }
      var T = B.z.ar8(W);
      if (T < 0) B.z.aH_(j, n - 1);
    }
    return j;
  };
  B.z.aH_ = function (j, q) {
    var m = q + 1,
      n = j[q].length,
      G = [];
    for (var y = 0; y < n; y++) {
      var W = j[m + y],
        k = W.kt;
      W.kt = W._$;
      W._$ = k;
      G.push(W);
    }
    for (var y = 0; y < n; y++) j[m + y] = G[n - 1 - y];
  };
  B.z.cn = {};
  B.z.cn.yu = function (j, q, m) {
    var n = [{ e: 6 }, { e: 8, all: 0 }],
      G = null;
    n.push({ e: m ? 3 : 0, Np: 1, length: 0, xV: 0, yg: 0, uc: 1 });
    if (q == 0 || q == null) G = null;
    else if (q instanceof Array) G = q;
    else {
      G = [];
      for (var y = 0; y < j.length; y += 2) G.push(q);
    }
    n = n.concat(B.z.a6T(j, m));
    n[2].length = n.length - 3;
    if (G) {
      B.z.E8(n, 2, G);
      n.push(n[3]);
      n.splice(3, 1);
    }
    return n;
  };
  B.z.cn.ag9 = function (j, q, m, n, G) {
    var W = [],
      k = [],
      T = 0.553,
      b = 1,
      c = -1;
    W.push({ e: 1, kt: new ea(0, T), Ii: new ea(0, 0), _$: new ea(0, -T) });
    G += 2;
    for (var y = 0; y < G; y++) {
      var a = { e: 1 };
      if (y == 0) {
        a.Ii = new ea(1, -1);
        a.kt = new ea(1 - T, -1);
        a._$ = new ea(1 + T, -1);
      } else {
        var f = (-(y + 2) * Math.PI) / 2,
          U = 1 + ((y & 1) == 1 ? y - 1 : y),
          Z = Math.sin(f),
          h = Math.cos(f);
        b += U * (Z - h);
        c += U * (h + Z);
        a.Ii = new ea(b, c);
        a.kt = new ea(b + U * h * T, c - U * Z * T);
        if ((y & 1) == 1) U += 2;
        a._$ = new ea(b - U * h * T, c + U * Z * T);
      }
      var u = {
        e: 1,
        kt: new ea(-a._$.x, -a._$.y),
        Ii: new ea(-a.Ii.x, -a.Ii.y),
        _$: new ea(-a.kt.x, -a.kt.y),
      };
      W.push(a);
      if (y < G - 2) k.push(u);
    }
    k.reverse();
    W = W.concat(k);
    var i = [{ e: 6 }, { e: 8, all: 0 }];
    i.push({ e: 0, Np: 1, length: W.length, xV: 0, yg: 0, uc: 1 });
    i = i.concat(W);
    var x = new k$(m / G, 0, 0, m / G, 0, 0);
    x.rotate(n);
    x.translate(j, q);
    B.z.La(i, x);
    return i;
  };
  B.z.cn.Rect = function (j, q, m, n, G) {
    var W = [j, q, j + m, q, j + m, q + n, j, q + n];
    return B.z.cn.yu(W, G);
  };
  B.z.cn.Or = function (j, q, m, n, G, W, k, T) {
    var b = [],
      c = (2 * Math.PI) / G;
    for (var y = 0; y < G; y++)
      b.push(Math.cos(y * c - n), Math.sin(y * c - n));
    if (k != null) {
      var a = B.b.RD(b),
        f = a.r,
        U = a.$,
        Z = k / (f / 2),
        h = T / (U / 2);
      for (var y = 0; y < b.length; y += 2) {
        b[y] = (b[y] - (a.x + f / 2)) * Z;
        b[y + 1] = (b[y + 1] - (a.y + U / 2)) * h;
      }
      m = 1;
    }
    var u = new k$(m, 0, 0, m, 0, 0);
    u.translate(j, q);
    B.b.u(b, u, b);
    return B.z.cn.yu(b, W);
  };
  B.z.cn.abY = function (j, q, m, n, G, W, k) {
    var T = m - j,
      b = n - q,
      c = (T - k * (W + 1)) / W,
      a = (b - k * (G + 1)) / G,
      f = { RC: [], L: [] };
    function U(h, Z, u, i) {
      f.RC.push("M", "L", "L", "L", "Z");
      f.L.push(h, Z, h + u, Z, h + u, Z + i, h, Z + i);
    }
    U(j, q, T, b);
    for (var Z = 0; Z < G; Z++)
      for (var h = 0; h < W; h++)
        U(j + k + h * (c + k), q + k + Z * (a + k), c, a);
    return B.b.LZ(f);
  };
  B.z.cn.Cz = function (j, q, m, n, G, W, k) {
    var T = [],
      b = Math.PI / G;
    for (var y = 0; y < G * 2; y++) {
      var c = (y & 1) == 0 ? 1 : k;
      T.push(c * Math.cos(y * b), c * Math.sin(y * b));
    }
    var a = new k$(m, 0, 0, m, 0, 0);
    a.rotate(n);
    a.translate(j, q);
    B.b.u(T, a, T);
    return B.z.cn.yu(T, W);
  };
  B.z.cn.Gy = function (j, q, m, n, G) {
    return B.z.cn.bS(0, j, q, m, n, G);
  };
  B.z.cn.aBe = function (j, q, m, n, G, W) {
    return B.z.cn.bS(1, j, q, m, n, G, W);
  };
  B.z.cn.Jo = function (j, q, m, n, G, W) {
    return B.z.cn.bS(2, j, q, m, n, G, W);
  };
  B.z.cn.bS = function (j, q, m, n, G, W, k) {
    var T = Math.sqrt((n - q) * (n - q) + (G - m) * (G - m)),
      b;
    W /= 2;
    if (j == 0) b = [-W, 0, W, 0, W, T, -W, T];
    if (j == 1) {
      var c = (W * 2 * k * 1.3) / 1.5,
        a = W * k;
      b = [-W, 0, W, 0, W, T - c, a, T - c, 0, T, -a, T - c, -W, T - c];
    }
    if (j == 2) {
      var c = k[3],
        a = k[2] / 2,
        f = (c * (2 / 3) * k[4]) / 100,
        U = c - f,
        Z = c;
      b = [];
      if (k[0]) b.push(-W, U, -a, Z, 0, 0, a, Z, W, U);
      else if (W == 0) b.push(0, 0);
      else b.push(-W, 0, W, 0);
      if (k[1]) b.push(W, T - U, a, T - Z, 0, T, -a, T - Z, -W, T - U);
      else if (W == 0) b.push(0, T);
      else b.push(W, T, -W, T);
    }
    var h = new k$(1, 0, 0, 1, 0, 0);
    h.rotate(Math.atan2(-G + m, n - q) + Math.PI / 2);
    h.translate(q, m);
    B.b.u(b, h, b);
    return B.z.cn.yu(b, 0);
  };
  B.z.cn.SQ = function (j, q, m, n) {
    var G = [{ e: 6 }, { e: 8, all: 0 }],
      f = 0.553;
    G.push({ e: 0, Np: 1, length: 4, xV: 0, yg: 0, uc: 1 });
    var W = j,
      k = q,
      T = j + m,
      b = q + n,
      j = (W + T) / 2,
      q = (k + b) / 2,
      c = (W - T) / 2,
      a = (k - b) / 2;
    G.push({
      e: 1,
      kt: new ea(j - f * c, q - a),
      Ii: new ea(j, q - a),
      _$: new ea(j + f * c, q - a),
    });
    G.push({
      e: 1,
      kt: new ea(j + c, q - f * a),
      Ii: new ea(j + c, q),
      _$: new ea(j + c, q + f * a),
    });
    G.push({
      e: 1,
      kt: new ea(j + f * c, q + a),
      Ii: new ea(j, q + a),
      _$: new ea(j - f * c, q + a),
    });
    G.push({
      e: 1,
      kt: new ea(j - c, q + f * a),
      Ii: new ea(j - c, q),
      _$: new ea(j - c, q - f * a),
    });
    return G;
  };
  B.z.cn.a8l = function (j, q, m, n, G) {
    var W = [{ e: 6 }, { e: 8, all: 0 }];
    W.push({ e: 3, Np: 1, length: 5, xV: 0, yg: 0, uc: 1 });
    var k = (G - n) / 4;
    for (var y = 0; y < 5; y++) {
      var T = y * k,
        b = Math.cos(T),
        c = Math.sin(T),
        a = 0.553 * (k / (Math.PI / 2)),
        f = c * a,
        U = -b * a,
        Z = new ea(b, c);
      W.push({
        e: 4,
        kt: y == 0 ? Z.P() : new ea(b + f, c + U),
        Ii: Z,
        _$: y == 4 ? Z.P() : new ea(b - f, c - U),
      });
    }
    var h = new k$();
    h.rotate(-n);
    h.scale(m, m);
    h.translate(j, q);
    B.z.La(W, h);
    return W;
  };
  B.rc = {};
  B.rc.e = {
    warpNone: [22, 5, 0],
    warpCustom: [22, 5, 16],
    warpArc: [22, 5, 1],
    warpArcLower: [22, 5, 2],
    warpArcUpper: [22, 5, 3],
    warpArch: [22, 5, 4],
    warpBulge: [22, 5, 5],
    warpShellLower: [22, 5, 6],
    warpShellUpper: [22, 5, 7],
    warpFlag: [22, 5, 8],
    warpWave: [22, 5, 9],
    warpFish: [22, 5, 10],
    warpRise: [22, 5, 11],
    warpFisheye: [22, 5, 12],
    warpInflate: [22, 5, 13],
    warpSqueeze: [22, 5, 14],
    warpTwist: [22, 5, 15],
    warpCylinder: "Cylinder",
  };
  B.rc.aM7 = {
    warpNone: [],
    warpCustom: [],
    warpArc: [0.5, 0, 0.5, 1],
    warpArcLower: [0.5, 1, 0.5, 1],
    warpArcUpper: [0.5, 0, 0.5, 1],
    warpArch: [0.5, 0, 0.5, 1],
    warpBulge: [0.5, 0, 0.5, 1],
    warpShellLower: [0.5, 1, 0.5, 1],
    warpShellUpper: [0.5, 0, 0.5, 1],
    warpFlag: [0.25, 0, 0.5],
    warpWave: [0.25, 0.501, 0.25],
    warpFish: [0.25, 0, 0.5],
    warpRise: [0, 1, 2],
    warpFisheye: [0.5, 0.66, 0.1],
    warpInflate: [0.5, 0, 0.25],
    warpSqueeze: [0.5, 0, 0.25],
    warpTwist: [0.33, 0.5, 0.16],
  };
  B.rc.TK = function (j) {
    var q = j.warpStyle.v.warpStyle;
    if (q == "warpNone") return !0;
    else if (q == "warpCylinder") return !1;
    else if (q == "warpCustom") {
      var m = !1,
        n = B.rc.awV(j);
      for (var y = 0; y < 4; y++)
        for (var G = 0; G < 4; G++) {
          var W = n[y * 2] - n[(G * 4 + y) * 2],
            k = n[y * 4 * 2 + 1] - n[(y * 4 + G) * 2 + 1];
          if (W * W > 1 || k * k > 1) m = !0;
        }
      return !m;
    } else
      return (
        j.warpValue.v == 0 &&
        j.warpPerspective.v == 0 &&
        j.warpPerspectiveOther.v == 0
      );
  };
  B.rc.aBg = function (j) {
    var q = B.S(j);
    q.v.classID = "quiltWarp";
    q.v.deformNumRows = { t: "long", v: 4 };
    q.v.deformNumCols = { t: "long", v: 4 };
    if (q.v.customEnvelopeWarp)
      B.rc.aGQ(q.v, [
        [0, 1],
        [0, 1],
      ]);
    return q;
  };
  B.rc.adk = function (j) {
    var q;
    if (B.rc.y1(j.v) == 16) q = B.S(j);
    else q = { t: "Objc", v: B.rc.j(B.rc.Fj(j.v)) };
    q.v.classID = "warp";
    delete q.v.deformNumRows;
    delete q.v.deformNumCols;
    var m = q.v.customEnvelopeWarp;
    if (m) {
      delete m.v.quiltSliceX;
      delete m.v.quiltSliceY;
    }
    return q;
  };
  B.rc.y1 = function (j) {
    return j.deformNumRows.v * j.deformNumCols.v;
  };
  B.rc.j = function (j) {
    var q = {
      classID: "warp",
      warpStyle: { t: "enum", v: { warpStyle: "warpNone" } },
      warpValue: { t: "doub", v: 0 },
      warpPerspective: { t: "doub", v: 0 },
      warpPerspectiveOther: { t: "doub", v: 0 },
      warpRotate: { t: "enum", v: { Ornt: "Hrzn" } },
    };
    if (j) {
      q.classID = "quiltWarp";
      q.bounds = {
        t: "Objc",
        v: {
          classID: "Rctn",
          Top: { t: "UntF", v: { type: "#Pxl", val: j.y } },
          Left: { t: "UntF", v: { type: "#Pxl", val: j.x } },
          Btom: { t: "UntF", v: { type: "#Pxl", val: j.y + j.$ } },
          Rght: { t: "UntF", v: { type: "#Pxl", val: j.x + j.r } },
        },
      };
      q.uOrder = { t: "long", v: 4 };
      q.vOrder = { t: "long", v: 4 };
      q.deformNumRows = { t: "long", v: 4 };
      q.deformNumCols = { t: "long", v: 4 };
    }
    return q;
  };
  B.rc.a0M = function (j, q, m) {
    for (var y = 0; y < j.length; y += 2) {
      var n = j[y],
        G = j[y + 1],
        W = (1 - q) / 2,
        k = 1 - W,
        T = W + n * (k - W);
      G = 0.5 + (G - 0.5) * T * 2;
      var b = (1 - m) / 2,
        c = 1 - b,
        a = b + G * (c - b);
      n = 0.5 + (n - 0.5) * a * 2;
      j[y] = n;
      j[y + 1] = G;
    }
  };
  B.rc.Sq = function (j, q) {
    return { id: j, type: "UnFl", uID: "#Pxl", arr: q };
  };
  B.rc.aGQ = function (j, q) {
    var m = B.rc.Fj(j);
    function n(W, k) {
      W = W.slice(0);
      var T = W.length,
        y;
      for (y = 0; y < T; y++) W[y] *= k;
      W[0] -= 0.6;
      W[T - 1] += 0.6;
      return W;
    }
    var G = j.customEnvelopeWarp.v;
    G.quiltSliceX = {
      t: "ObAr",
      v: { classID: "UntF", arr: [B.rc.Sq("quiltSliceX", n(q[0], m.r))] },
    };
    G.quiltSliceY = {
      t: "ObAr",
      v: { classID: "UntF", arr: [B.rc.Sq("quiltSliceY", n(q[1], m.$))] },
    };
  };
  B.rc.a32 = function (j) {
    var q = B.rc.Fj(j);
    function m(k, T) {
      k = k.slice(0);
      var W = k.length,
        y,
        b = 1e9,
        c = -b;
      for (y = 0; y < W; y++) {
        if (k[y] < b) b = k[y];
        if (k[y] > c) c = k[y];
      }
      for (y = 0; y < W; y++) k[y] = (k[y] - b) / (c - b);
      k[0] = 0;
      k[W - 1] = 1;
      return k;
    }
    var n = j.customEnvelopeWarp.v,
      G = [],
      W = ["X", "Y"];
    for (var y = 0; y < 2; y++)
      G.push(
        m(
          n["quiltSlice" + (y == 0 ? "X" : "Y")].v.arr[0].arr.slice(0),
          y == 0 ? q.r : q.$
        )
      );
    return G;
  };
  B.rc.aeL = function (j, q) {
    var m = [],
      n = [];
    for (var y = 0; y < q.length; y += 2) {
      m.push(q[y]);
      n.push(q[y + 1]);
    }
    j.customEnvelopeWarp.v.meshPoints.v.arr = [
      B.rc.Sq("Hrzn", m),
      B.rc.Sq("Vrtc", n),
    ];
  };
  B.rc.awV = function (j) {
    var q = [],
      m = j.customEnvelopeWarp.v.meshPoints.v.arr,
      n = m[0].arr,
      G = m[1].arr;
    for (var y = 0; y < n.length; y++) q.push(n[y], G[y]);
    return q;
  };
  B.rc._i = function (j, q) {
    var m,
      n = j.warpStyle.v.warpStyle;
    if (n == "warpCustom")
      m = [j.deformNumCols.v, j.deformNumRows.v, B.rc.a32(j), B.rc.awV(j)];
    else {
      if (q == null) q = B.rc.Fj(j);
      if (q.jG()) q.r = q.$ = 1;
      if (n == "warpCylinder") {
        var G = L.Dq.Kt(j.warpValues);
        m = B.rc.rc(n, G);
      } else {
        var W = "warpPerspective";
        m = B.rc.rc(
          n,
          j.warpValue.v / 100,
          j.warpRotate.v.Ornt == "Hrzn",
          j[W].v / 100,
          j[W + "Other"].v / 100,
          q.r / q.$
        );
      }
      B.rc.a7m(m[3], q);
    }
    return m;
  };
  B.rc.a7m = function (j, q) {
    for (var y = 0; y < j.length; y += 2) {
      j[y] = q.x + j[y] * q.r;
      j[y + 1] = q.y + j[y + 1] * q.$;
    }
  };
  B.rc.aCF = function (j) {
    var q = Math.sin((j * Math.PI) / 2),
      m = Math.pow(j, 1 / 3.5),
      n = (1 - j) * q + j * m;
    n = Math.pow(n, 1.045);
    var G = 0.1725 + 0.0573 * n,
      W = 1 - (0.96 * q + 0.04 * m);
    W = Math.pow(W, 1.27);
    var k = 1 / 129 + (0.167684 - 1 / 129) * W;
    return [G, k];
  };
  B.rc.qW = function (j, q) {
    j.warpStyle.v.warpStyle = "warpCustom";
    j.deformNumCols.v = q[0];
    j.deformNumRows.v = q[1];
    var m = "customEnvelopeWarp";
    if (j[m] == null)
      j[m] = {
        t: "Objc",
        v: {
          classID: "customEnvelopeWarp",
          meshPoints: { t: "ObAr", v: { classID: "rationalPoint", arr: [] } },
        },
      };
    B.rc.aGQ(j, q[2]);
    B.rc.aeL(j, q[3]);
  };
  B.rc.Fj = function (j) {
    var q = j.bounds.v,
      m = q.Left.v.val,
      n = q.Rght.v.val,
      G = q.Top.v.val,
      W = q.Btom.v.val;
    if (m == null) {
      (m = q.Left.v), (n = q.Rght.v);
      (G = q.Top.v), (W = q.Btom.v);
    }
    return new hk(m, G, n - m, W - G);
  };
  B.rc.rc = function (j, q, m, n, G, W) {
    if (j == "warpCylinder") {
      var k = q,
        T = k[0],
        b = k[1],
        c = k[2],
        a = k[3],
        f = k[4],
        U = k[5],
        Z = k[6],
        h = [];
      for (var u = 0; u < 4; u++)
        for (var i = 0; i < 13; i++) h.push(i / 12, u / 3);
      var x = c - T,
        X = b - a,
        $ = f * 0.5 * (x / X),
        H = U * 0.5 * (x / X),
        C = B.rc.aCF(Z),
        l = [0, 0, 0, 0, 0, C[0], 0.5],
        v = [0, 0, 0, 0, $ * 0.42, $, $],
        K = [0, 0, 0, 0, H * 0.42, H, H];
      for (var u = 0; u < 4; u++)
        for (var i = 0; i < 7; i++) {
          var y = u * 13 + i;
          h[y * 2] = l[i];
          var S = v[i],
            o = 1 + K[i],
            V = u / 3;
          h[y * 2 + 1] = S * (1 - V) + o * V;
        }
      for (var u = 0; u < 4; u++)
        for (var i = 0; i < 6; i++) {
          var y = u * 13 + i,
            P = u * 13 + 12 - i;
          h[P * 2] = 1 - h[y * 2];
          h[P * 2 + 1] = h[y * 2 + 1];
        }
      var V = C[1];
      return [
        13,
        4,
        [
          [0, V, 0.5, 1 - V, 1],
          [0, 1],
        ],
        h,
      ];
    }
    var z = B.Ol.j(0, 0, 1, 1);
    if (j != "warpNone") {
      if (!m) W = 1 / W;
      B.rc.a1w(z, j, q, n, G, W);
      var E = z.slice(0);
      if (!m)
        for (var u = 0; u < 4; u++)
          for (var i = 0; i < 4; i++) {
            z[(u * 4 + i) * 2] = E[(i * 4 + u) * 2 + 1];
            z[(u * 4 + i) * 2 + 1] = E[(i * 4 + u) * 2];
          }
      if (q == 0) B.rc.a0M(z, n, G);
      else {
        var A = new k$();
        A.translate(-0.5, -0.5);
        B.b.u(z, A, z);
        B.rc.aeb(z, G, n);
        A.BR();
        B.b.u(z, A, z);
      }
    }
    return [
      4,
      4,
      [
        [0, 1],
        [0, 1],
      ],
      z,
    ];
  };
  B.rc.a1w = function (j, q, m, n, G, W) {
    var k = new hk(0, 0, W, 1);
    for (var y = 0; y < j.length; y += 2) j[y] *= W;
    for (var y = 0; y < 4; y++) {
      for (var T = 0; T < 4; T++) {
        var b = 2 * (4 * y + T),
          c = j[b] - k.x,
          a = j[b + 1] - k.y,
          f = c,
          U = a;
        if (m != 0) {
          var Z = k.r / 2,
            h = k.$ / 2;
          f -= Z;
          U -= h;
          var u = f,
            i = f,
            x = -h,
            X = h,
            $ = Math.abs(m),
            H = Math.tan(((1 - $) * Math.PI) / 2),
            C = Math.sqrt(H * H + 1),
            l = Math.atan2(1, H),
            v = (f / Z) * l,
            K = Z * C,
            S = Z * C + k.$,
            o = Math.cos(l),
            V = Math.sin(l),
            P = B.rc.a8W(o, V),
            z = B.rc.ab4(o, V),
            E = -H * Z + P * K;
          if (q == "warpArc") {
            u = Math.sin(v) * S;
            x = H * Z - Math.cos(l) * S + h;
            i = Math.sin(v) * K;
            X = H * Z - Math.cos(l) * K + h;
            if (T == 1 || T == 2) {
              u = T == 1 ? -z * S : z * S;
              i = T == 1 ? -z * K : z * K;
              x = H * Z + h - P * S;
              X = H * Z + h - P * K;
            }
            if (m < 0) {
              var A = u;
              u = i;
              i = A;
              A = x;
              x = -X;
              X = -A;
            }
          }
          if (q == "warpArcLower") {
            if (T == 1 || T == 2) {
              i = T == 1 ? -z * K : z * K;
              X = m < 0 ? h - E : h + E;
            }
          }
          if (q == "warpArcUpper" || q == "warpArch" || q == "warpBulge") {
            if (T == 1 || T == 2) {
              u = T == 1 ? -z * K : z * K;
              x = m < 0 ? -h + E : -h - E;
            }
            if (q == "warpArch") {
              i = u;
              X = x + 2 * h;
            }
            if (q == "warpBulge") {
              i = u;
              X = -x;
            }
          }
          if (q == "warpFish" || q == "warpFlag" || q == "warpWave") {
            var N = T;
            if (q == "warpFlag") N = 3 - T;
            if (N == 1) {
              x -= m * 4 * h;
              X += m * 4 * h;
            }
            if (N == 2) {
              x += m * 4 * h;
              X -= m * 4 * h;
            }
            if (q == "warpFlag" || q == "warpWave") x = X - 2 * h;
          }
          if (q == "warpRise") {
            if (T < 2) x = -h + m * h * 4;
            X = x + 2 * h;
          }
          var Q = (U + h) / k.$;
          f = u + Q * (i - u);
          U = x + Q * (X - x);
          if (q == "warpWave") {
            if (y == 0) U = -h;
            if (y == 3) U = h;
            if (y == 1 || y == 2)
              U = 2 * h * (y / 3 - 0.5) * (1 / 3) + U * (2 / 3);
          }
          if (q == "warpFisheye") {
            if ((y == 1 || y == 2) && (T == 1 || T == 2)) {
              f = f + 4 * f * m;
              U = U + 4 * U * m;
            }
          }
          if (q == "warpInflate") {
            var e = 2 / 3;
            if ((y == 1 || y == 2) && (T == 1 || T == 2)) {
              f = f + 0.5 * f * m;
              U = U + 0.5 * U * m;
            } else if (y == 1 || y == 2) f = f + e * f * m;
            else if (T == 1 || T == 2) U = U + e * U * m;
          }
          if (q == "warpSqueeze") {
            var e = 2 / 3;
            if ((y == 1 || y == 2) && (T == 1 || T == 2)) {
              if (m > 0) f = f - e * f * m;
              else U = U + e * U * m;
            } else if (y == 1 || y == 2) f = f - e * f * m;
            else if (T == 1 || T == 2) U = U + e * U * m;
          }
          if (q == "warpTwist") {
            if ((y == 1 || y == 2) && (T == 1 || T == 2)) {
              var Y = (m * Math.PI) / 2,
                C = 1 + Math.abs(m) * 2,
                d = f * Math.cos(Y) - U * Math.sin(Y),
                I = f * Math.sin(Y) + U * Math.cos(Y);
              f = d * C;
              U = I * C;
            }
          }
          if (q == "warpShellLower" || q == "warpShellUpper") {
            if (q == "warpShellUpper") {
              y = 3 - y;
              U = -U;
            }
            if (y > 2 || (y == 2 && (T == 0 || T == 3))) {
              if (m > 0) {
                var O = K + (y / 3) * 2 * h;
                f = Math.sin(v) * O;
                U = -H * Z - h + Math.cos(v) * O;
                if (T == 1 || T == 2) {
                  f = T == 1 ? -z * O : z * O;
                  U = -H * Z - h + P * O;
                }
              } else {
                if ((T == 1 || T == 2) && y == 3) {
                  f = T == 1 ? -z * K : z * K;
                  U = H * Z - P * K + h;
                } else if (y == 2) {
                  U = h - h * (2 / 3) * Math.cos(v);
                  f = f + h * (2 / 3) * Math.sin(v);
                }
              }
            }
            if (q == "warpShellUpper") {
              y = 3 - y;
              U = -U;
            }
          }
          f += Z;
          U += h;
        }
        (c = f), (a = U);
        j[b] = c + k.x;
        j[b + 1] = a + k.y;
      }
    }
    for (var y = 0; y < j.length; y += 2) j[y] /= W;
  };
  B.rc.aeb = function (j, q, m) {
    var n = [];
    for (var G = 0; G < 4; G++) n.push(1 - m + (G / 3) * 2 * m);
    var W = [];
    for (var G = 0; G < 4; G++) W.push(1 - q + (G / 3) * 2 * q);
    var k = [0, 0, 0, 0],
      T = [0, 0, 0, 0];
    for (var y = 0; y < 4; y++)
      for (var G = 0; G < 4; G++) {
        var b = 2 * (4 * y + G),
          c = j[b],
          a = j[b + 1];
        k[G] += c / 4;
        T[G] += a / 4;
      }
    for (var y = 0; y < 4; y++)
      for (var G = 0; G < 4; G++) {
        var f = n[G],
          b = 2 * (4 * y + G),
          c = j[b],
          a = j[b + 1],
          U = k[G],
          Z = T[G];
        j[b] = U + f * (c - U);
        j[b + 1] = Z + f * (a - Z);
      }
    var h = j.slice(0);
    for (var y = 0; y < 4; y++)
      for (var G = 1; G < 3; G++) {
        var b = 2 * (4 * y + G),
          c = j[b],
          a = j[b + 1],
          u = b + (G == 1 ? -2 : 2),
          i = j[u],
          x = j[u + 1];
        j[b] = c - i;
        j[b + 1] = a - x;
      }
    var X = j[0],
      $ = j[1],
      H = j[8],
      C = j[9],
      l = j[16],
      v = j[17],
      K = j[24],
      S = j[25],
      o = j[6],
      V = j[7],
      P = j[14],
      z = j[15],
      E = j[22],
      A = j[23],
      N = j[30],
      Q = j[31],
      e = o - X,
      Y = V - $,
      d = P - H,
      I = z - C,
      O = E - l,
      s = A - v,
      p = N - K,
      F = Q - S;
    for (var y = 0; y < 4; y++) {
      var g = 2 * y * 4,
        w = 0,
        r = 0,
        eQ = y == 1 ? 0.33 : 0.66,
        t = 1 - eQ;
      if (y == 0) {
        w = e;
        r = Y;
      }
      if (y == 1) {
        w = t * e + eQ * -p;
        r = t * Y + eQ * -F;
      }
      if (y == 2) {
        w = t * e + eQ * -p;
        r = t * Y + eQ * -F;
      }
      if (y == 3) {
        w = -p;
        r = -F;
      }
      j[g] = j[g] + w / 2;
      j[g + 1] = j[g + 1] + r / 2;
      j[g + 6] = j[g + 6] - w / 2;
      j[g + 7] = j[g + 7] - r / 2;
    }
    for (var y = 0; y < 4; y++)
      for (var G = 1; G < 3; G++) {
        var b = 2 * (4 * y + G),
          c = j[b],
          a = j[b + 1],
          u = b + (G == 1 ? -2 : 2),
          i = j[u],
          x = j[u + 1],
          f = (2 * y) / 3;
        j[b] = i + f * c;
        j[b + 1] = x + f * a;
      }
    for (var y = 1; y < 3; y++)
      for (var G = 1; G < 3; G++) {
        var b = 2 * (4 * y + G),
          c = j[b],
          a = j[b + 1],
          dq = y == 1 ? -8 : -16,
          D = y == 1 ? 16 : 8,
          ha = j[b + dq],
          am = j[b + dq + 1],
          k4 = j[b + D],
          aA = j[b + D + 1],
          f = y / 3;
        c = (1 - f) * ha + f * k4;
        a = (1 - f) * am + f * aA;
        j[b] = c;
        j[b + 1] = a;
      }
    B.b.ahy(h, j, j, q);
  };
  B.rc.a8W = function (j, q) {
    return (4 - j) * (1 / 3);
  };
  B.rc.ab4 = function (j, q) {
    return ((1 - j) * (3 - j)) / (3 * q);
  };
  B.m8 = (function () {
    function j(m) {
      var n = m.quads.v,
        G = [];
      for (var y = 0; y < n.length; y++) {
        var W = n[y].v.indices.v;
        for (var k = 0; k < 4; k++) G.push(W[k].v);
      }
      var T = [],
        b = [];
      for (var c = 0; c < 2; c++) {
        var a = c == 0 ? T : b,
          f = m[c == 0 ? "vertices" : "warpedVertices"].v;
        for (var y = 0; y < f.length; y++) {
          var U = f[y].v;
          a.push(U.Hrzn.v.val, U.Vrtc.v.val);
        }
      }
      var Z = m.referenceRect.v,
        h = Z.Left.v.val,
        u = Z.Rght.v.val,
        i = Z.Top.v.val,
        x = Z.Btom.v.val,
        X = [];
      for (var $ = 0; $ < 4; $++) X.push(m["PuX" + $].v, m["PuY" + $].v);
      return {
        EO: T,
        D_: b,
        Os: G,
        aha: new hk(h, i, u - h, x - i),
        io: m.Md.v.perspectiveWarpMode == "warp" ? 1 : 0,
        tF: X,
      };
    }
    function q(m, n) {
      var G = (n.quads.v = []),
        W = m.Os;
      for (var y = 0; y < W.length; y += 4) {
        var k = [],
          T = {
            t: "Objc",
            v: { classID: "perspectiveWarpQuad", indices: { t: "VlLs", v: k } },
          };
        G.push(T);
        for (var b = 0; b < 4; b++) k.push({ t: "long", v: W[y + b] });
      }
      for (var c = 0; c < 2; c++) {
        var a = c == 0 ? m.EO : m.D_,
          f = n[c == 0 ? "vertices" : "warpedVertices"].v;
        while (f.length != 0) f.pop();
        for (var y = 0; y < a.length; y += 2) {
          var U = {
            t: "Objc",
            v: {
              classID: "Pnt",
              Hrzn: { t: "UntF", v: { type: "#Pxl", val: a[y] } },
              Vrtc: { t: "UntF", v: { type: "#Pxl", val: a[y + 1] } },
            },
          };
          f.push(U);
        }
      }
      var Z = m.tF;
      for (var h = 0; h < 4; h++) {
        n["PuX" + h].v = Z[h * 2];
        n["PuY" + h].v = Z[h * 2 + 1];
      }
      n.Md.v.perspectiveWarpMode = m.io == 0 ? "layout" : "warp";
    }
    return { N2: j, MM: q };
  })();
  var g3 = {};
  g3.azk = { x: 0.34567, y: 0.3585 };
  g3.a8_ = [
    { o: 0, JE: 0.18006, YF: 0.26352, t: -0.24341 },
    { o: 10, JE: 0.18066, YF: 0.26589, t: -0.25479 },
    { o: 20, JE: 0.18133, YF: 0.26846, t: -0.26876 },
    { o: 30, JE: 0.18208, YF: 0.27119, t: -0.28539 },
    { o: 40, JE: 0.18293, YF: 0.27407, t: -0.3047 },
    { o: 50, JE: 0.18388, YF: 0.27709, t: -0.32675 },
    { o: 60, JE: 0.18494, YF: 0.28021, t: -0.35156 },
    { o: 70, JE: 0.18611, YF: 0.28342, t: -0.37915 },
    { o: 80, JE: 0.1874, YF: 0.28668, t: -0.40955 },
    { o: 90, JE: 0.1888, YF: 0.28997, t: -0.44278 },
    { o: 100, JE: 0.19032, YF: 0.29326, t: -0.47888 },
    { o: 125, JE: 0.19462, YF: 0.30141, t: -0.58204 },
    { o: 150, JE: 0.19962, YF: 0.30921, t: -0.70471 },
    { o: 175, JE: 0.20525, YF: 0.31647, t: -0.84901 },
    { o: 200, JE: 0.21142, YF: 0.32312, t: -1.0182 },
    { o: 225, JE: 0.21807, YF: 0.32909, t: -1.2168 },
    { o: 250, JE: 0.22511, YF: 0.33439, t: -1.4512 },
    { o: 275, JE: 0.23247, YF: 0.33904, t: -1.7298 },
    { o: 300, JE: 0.2401, YF: 0.34308, t: -2.0637 },
    { o: 325, JE: 0.24792, YF: 0.34655, t: -2.4681 },
    { o: 350, JE: 0.25591, YF: 0.34951, t: -2.9641 },
    { o: 375, JE: 0.264, YF: 0.352, t: -3.5814 },
    { o: 400, JE: 0.27218, YF: 0.35407, t: -4.3633 },
    { o: 425, JE: 0.28039, YF: 0.35577, t: -5.3762 },
    { o: 450, JE: 0.28863, YF: 0.35714, t: -6.7262 },
    { o: 475, JE: 0.29685, YF: 0.35823, t: -8.5955 },
    { o: 500, JE: 0.30505, YF: 0.35907, t: -11.324 },
    { o: 525, JE: 0.3132, YF: 0.35968, t: -15.628 },
    { o: 550, JE: 0.32129, YF: 0.36011, t: -23.325 },
    { o: 575, JE: 0.32931, YF: 0.36038, t: -40.77 },
    { o: 600, JE: 0.33724, YF: 0.36051, t: -116.45 },
  ];
  g3.a5f = function (j) {
    var q = g3.a8_,
      m = (2 * j.x) / (1.5 - j.x + 6 * j.y),
      n = (3 * j.y) / (1.5 - j.x + 6 * j.y),
      G = 0,
      W = 0,
      k = 0;
    for (; k < 31; k++) {
      G = n - q[k].YF - q[k].t * (m - q[k].JE);
      if (k > 0 && G < 0) {
        break;
      }
      W = G;
    }
    while (k >= q.length) k--;
    G /= Math.sqrt(1 + q[k].t * q[k].t);
    W /= Math.sqrt(1 + q[k - 1].t * q[k - 1].t);
    var T = W / (W - G),
      b = 1e6 / ((q[k].o - q[k - 1].o) * T + q[k - 1].o),
      c = m - ((q[k].JE - q[k - 1].JE) * T + q[k - 1].JE),
      a = n - ((q[k].YF - q[k - 1].YF) * T + q[k - 1].YF),
      f = Math.sqrt(1 + q[k].t * q[k].t),
      U = 1 / f,
      Z = q[k].t / f,
      h = Math.sqrt(1 + q[k - 1].t * q[k - 1].t),
      u = 1 / h,
      i = q[k - 1].t / h,
      x = (U - u) * T + u,
      X = (Z - i) * T + i,
      $ = Math.sqrt(x * x + X * X);
    x /= $;
    X /= $;
    var H = (c * x + a * X) * -3e3;
    return { sv: b, Ao: H };
  };
  g3.ye = function (j, q) {
    var m = g3.a8_,
      n = 1e6 / j,
      G = 1;
    for (; G < 31; G++) {
      if (n < m[G].o) {
        break;
      }
    }
    var W = (m[G].o - n) / (m[G].o - m[G - 1].o),
      k = (m[G - 1].JE - m[G].JE) * W + m[G].JE,
      T = (m[G - 1].YF - m[G].YF) * W + m[G].YF,
      b = Math.sqrt(1 + m[G].t * m[G].t),
      c = 1 / b,
      a = m[G].t / b,
      f = Math.sqrt(1 + m[G - 1].t * m[G - 1].t),
      U = 1 / f,
      Z = m[G - 1].t / f,
      h = (U - c) * W + c,
      u = (Z - a) * W + a,
      i = Math.sqrt(h * h + u * u);
    h /= i;
    u /= i;
    k += (h * q) / -3e3;
    T += (u * q) / -3e3;
    return { x: (1.5 * k) / (k - 4 * T + 2), y: T / (k - 4 * T + 2) };
  };
  g3.aAg = function (j) {
    var q = j[0] + j[1] + j[2];
    return { x: j[0] / q, y: j[1] / q };
  };
  g3.LF = function (j) {
    return { x: j.x / j.y, y: 1, VP: (1 - j.x - j.y) / j.y };
  };
  g3.aGo = function (j, q) {
    var m = B.kz.PA([
        0.8951, 0.2664, -0.1614, -0.7502, 1.7135, 0.0367, 0.0389, -0.0685,
        1.0296,
      ]),
      n = [j.x, j.y, j.VP, 0],
      G = [q.x, q.y, q.VP, 0];
    n = B.kz.$j(m, n);
    G = B.kz.$j(m, G);
    var W = G[0] / n[0],
      k = G[1] / n[1],
      T = G[2] / n[2],
      b = B.kz.PA([W, 0, 0, 0, k, 0, 0, 0, T]),
      c = B.kz.BR(m);
    return B.kz.multiply(B.kz.multiply(c, b), m);
  };
  B.yk = {};
  B.yk.aeB = function (j, q, m, n, G, W, k, T, b, c) {
    for (var a = 0; a < T; a++)
      for (var f = 0; f < k; f++) {
        var U = 3 * (a * k + f),
          Z = a + W,
          h = f + G,
          u = j[Z * q + h];
        n[U] = u;
        n[U + 1] = u;
        n[U + 2] = u;
      }
  };
  B.yk.fM = function (j, q, m, n, G, W, k, T, b, c) {
    var a = [0, 1, 1 / 2, 1 / 3, 1 / 4, 1 / 5, 1 / 6, 1 / 7, 1 / 8, 1 / 9],
      f = 1 / b,
      U = [-1, -1, 0, -1, 1, -1, -1, 0, 1, 0, -1, 1, 0, 1, 1, 1],
      Z = new Uint32Array(6);
    for (var h = 0; h < T; h++) {
      for (var u = 0; u < k; u++) {
        var i = 3 * (h * k + u),
          x = h + W,
          X = u + G;
        Z[0] = 0;
        Z[1] = 0;
        Z[2] = 0;
        Z[3] = 0;
        Z[4] = 0;
        Z[5] = 0;
        for (var y = 0; y < 16; y += 2) {
          var $ = X + U[y],
            H = x + U[y + 1],
            C = $ - b * ~~($ * f),
            l = H - b * ~~(H * f),
            v = c[l * b + C];
          Z[v] += j[H * q + $];
          Z[v + 3]++;
        }
        var $ = X,
          H = x,
          C = $ - b * ~~($ * f),
          l = H - b * ~~(H * f),
          v = c[l * b + C];
        Z[v] = j[x * q + X];
        Z[v + 3] = 1;
        n[i] = Z[0] * a[Z[3]];
        n[i + 1] = Z[1] * a[Z[4]];
        n[i + 2] = Z[2] * a[Z[5]];
      }
    }
  };
  B.yk.aFs = function (j, q, m, n, G, W, k, T, b, c) {
    var a,
      f,
      U,
      Z,
      h,
      u,
      i = new Float32Array(8);
    function x(U, Z) {
      return (U & 1) * 2 + (Z & 1);
    }
    for (a = 0; a < m; a++)
      for (f = 0; f < q; f++) {
        if (f == n && a >= n && a < m - n) f = q - n;
        i.fill(0);
        for (U = a - 1; U != a + 2; U++)
          for (Z = f - 1; Z != f + 2; Z++)
            if (0 <= Z && 0 <= U && U < m && Z < q) {
              h = G[x(U, Z)];
              var X = (j[(U * q + Z) * 3 + h] = W[(U + c) * k + Z + b]);
              i[h] += X;
              i[h + 4]++;
            }
        h = G[x(a, f)];
        for (var u = 0; u < 3; u++)
          if (u != h && i[u + 4]) j[(a * q + f) * 3 + u] = i[u] / i[u + 4];
      }
  };
  B.yk.G3 = (function () {
    var j, q, m;
    function n(b, y) {
      j[b] = q[y];
      j[b + 1] = (q[y - m] + q[y - 1] + q[y + 1] + q[y + m]) >>> 2;
      j[b + 2] =
        (q[y - m - 1] + q[y - m + 1] + q[y + m - 1] + q[y + m + 1]) >>> 2;
    }
    function G(b, y) {
      j[b] = (q[y - 1] + q[y + 1]) >>> 1;
      j[b + 1] = q[y];
      j[b + 2] = (q[y - m] + q[y + m]) >>> 1;
    }
    function W(b, y) {
      j[b] = (q[y - m] + q[y + m]) >>> 1;
      j[b + 1] = q[y];
      j[b + 2] = (q[y - 1] + q[y + 1]) >>> 1;
    }
    function k(b, y) {
      j[b] = (q[y - m - 1] + q[y - m + 1] + q[y + m - 1] + q[y + m + 1]) >>> 2;
      j[b + 1] = (q[y - m] + q[y - 1] + q[y + 1] + q[y + m]) >>> 2;
      j[b + 2] = q[y];
    }
    function T(b, c, a, f, U, Z, h, u, i) {
      j = f;
      q = b;
      m = c;
      var x = 0,
        X = h,
        $ = 0,
        H = u,
        C = U > 0 && Z > 0 && m - U > h && a - Z > u,
        l = [
          [0, 1, 1, 2],
          [1, 0, 2, 1],
          [2, 1, 1, 0],
          [1, 2, 0, 1],
        ][i];
      if (!C) {
        x++;
        X--;
        $++;
        H--;
        i = [2, 3, 0, 1][i];
      }
      var v = Date.now();
      for (var K = $; K < H; K += 2) {
        var S = (K + Z) * m + U;
        if (i == 0)
          for (var o = x; o < X; o += 2) {
            var V = S + o,
              P = (K * h + o) * 3;
            n(P, V);
            G(P + 3, V + 1);
            W(P + 3 * h, V + m);
            k(P + 3 * h + 3, V + m + 1);
          }
        else if (i == 1)
          for (var o = x; o < X; o += 2) {
            var V = S + o,
              P = (K * h + o) * 3;
            G(P, V);
            n(P + 3, V + 1);
            k(P + 3 * h, V + m);
            W(P + 3 * h + 3, V + m + 1);
          }
        else if (i == 2)
          for (var o = x; o < X; o += 2) {
            var V = S + o,
              P = (K * h + o) * 3;
            k(P, V);
            W(P + 3, V + 1);
            G(P + 3 * h, V + m);
            n(P + 3 * h + 3, V + m + 1);
          }
        else if (i == 3)
          for (var o = x; o < X; o += 2) {
            var V = S + o,
              P = (K * h + o) * 3;
            W(P, V);
            k(P + 3, V + 1);
            n(P + 3 * h, V + m);
            G(P + 3 * h + 3, V + m + 1);
          }
      }
      if (!C) B.yk.aFs(j, h, u, 1, l, b, m, a, U, Z);
      console.log(Date.now() - v);
      v = Date.now();
    }
    return T;
  })();
  B.yk.af9 = (function () {
    function j(T, y, b) {
      return T[y - b - b] + T[y - 2] + T[y + 2] + T[y + b + b];
    }
    function q(T, y, b) {
      return (
        2 *
        (2 * T[y - b] +
          2 * T[y - 1] +
          4 * T[y] +
          2 * T[y + 1] +
          2 * T[y + b] -
          j(T, y, b))
      );
    }
    function m(T, y, b) {
      return T[y - b - 1] + T[y - b + 1] + T[y + b - 1] + T[y + b + 1];
    }
    function n(T, y, b) {
      return (
        T[y - b - b] +
        T[y + b + b] -
        2 * (T[y - 2] + T[y + 2]) +
        8 * (T[y - 1] + T[y + 1])
      );
    }
    function G(T, y, b) {
      return (
        T[y - 1 - 1] +
        T[y + 1 + 1] -
        2 * (T[y - 2 * b] + T[y + 2 * b]) +
        8 * (T[y - b] + T[y + b])
      );
    }
    function W(T, y, b) {
      return (
        -3 * (T[y - b - b] + T[y - 2] + T[y + 2] + T[y + b + b]) +
        4 * (T[y - b - 1] + T[y - b + 1] + T[y + b - 1] + T[y + b + 1]) +
        12 * T[y]
      );
    }
    function k(T, b, c, a, f, U, Z, h, u) {
      var i = 2,
        x = Z - 2,
        X = 2,
        $ = h - 2,
        H = [
          [0, 1, 1, 2],
          [1, 0, 2, 1],
          [2, 1, 1, 0],
          [1, 2, 0, 1],
        ][u],
        C = 0;
      if (u == 1) {
        i++;
        x--;
      }
      if (u == 2) {
        i++;
        X++;
        x--;
        $--;
      }
      if (u == 3) {
        X++;
        $--;
      }
      for (var l = X; l < $; l += 2) {
        for (var v = i; v < x; v += 2) {
          var K = 3 * (l * Z + v),
            S = (l + U) * b + v + f;
          a[K + 0] = T[S];
          a[K + 1] = q(T, S, b) >> 4;
          a[K + 2] = W(T, S, b) >> 4;
          a[K + 3 + 1] = T[S + 1];
          C = 10 * T[S + 1] - 2 * m(T, S + 1, b);
          a[K + 3 + 0] = (C + n(T, S + 1, b)) >> 4;
          a[K + 3 + 2] = (C + G(T, S + 1, b)) >> 4;
          K += 3 * Z;
          S += b;
          a[K + 1] = T[S];
          C = 10 * T[S] - 2 * m(T, S, b);
          a[K + 0] = (C + G(T, S, b)) >> 4;
          a[K + 2] = (C + n(T, S, b)) >> 4;
          a[K + 3 + 0] = W(T, S + 1, b) >> 4;
          a[K + 3 + 1] = q(T, S + 1, b) >> 4;
          a[K + 3 + 2] = T[S + 1];
        }
      }
      B.yk.aFs(a, Z, h, Math.max(i, X), H, T, b, c, f, U);
    }
    return k;
  })();
  B.raw = {};
  B.raw.aB5 = function (j) {
    var q = Date.now(),
      m = j.width,
      n = j.height,
      G = 0,
      W = 0,
      k = m,
      T = n;
    if (j.t50829) {
      var b = j.t50829;
      G = b[1];
      W = b[0];
      k = b[3];
      T = b[2];
    }
    if (j.t50720 && j.t50720[0] * 1.8 > m) {
      if (j.t50719) {
        var c = j.t50719;
        G += (c[0] >> 1) << 1;
        W += (c[1] >> 1) << 1;
      }
      if (j.t50720) {
        var a = j.t50720;
        k = G + a[0];
        T = W + a[1];
      }
    }
    var f = k - G,
      U = T - W,
      Z = B.raw.aAY(j),
      h = j.t33422,
      u = j.t33421;
    if (u) {
      var a = u[0],
        i = h.slice(0);
      for (var x = 0; x < a; x++)
        for (var X = 0; X < a; X++) {
          var $ = (X + (G & 1)) % a,
            H = (x + (W & 1)) % a;
          i[x * a + X] = h[H * a + $];
        }
      h = i;
    }
    if (j.t277[0] == 1 && h) B.raw.aD3(Z, m, n, j, h);
    B.raw.Dt(2, j, Z, m, n);
    var C = new Float32Array(f * U * 3);
    if (j.t277[0] == 1) {
      if (u == null) {
        B.yk.aeB(Z, m, n, C, G, W, f, U);
      } else if (u.length != 2 || u[0] != 2 || u[1] != 2) {
        console.log("Unknown CFA pattern size", u);
        B.yk.fM(Z, m, n, C, G, W, f, U, u[0], h);
      } else {
        var l = j.t33422.join(","),
          v = 0;
        if (l == "0,1,1,2") v = 0;
        else if (l == "1,0,2,1") v = 1;
        else if (l == "2,1,1,0") v = 2;
        else if (l == "1,2,0,1") v = 3;
        else throw "Unknown CFA pattern " + l;
        if ((f & 1) != 0 || (U & 1) != 0) throw "e";
        var q = Date.now(),
          K = j.t50728;
        if (K == null) K = [1, 1, 1];
        K = K.slice(0);
        for (var y = 0; y < 3; y++) K[y] = Math.max(K[y], 0.5);
        var S = 1 / K[h[0]],
          o = 1 / K[h[1]],
          V = 1 / K[h[2]],
          P = 1 / K[h[3]];
        for (var x = 0; x < n; x += 2)
          for (var X = 0; X < m; X += 2) {
            var y = x * m + X;
            Z[y] *= S;
            Z[y + 1] *= o;
            Z[y + m] *= V;
            Z[y + m + 1] *= P;
          }
        B.yk.af9(Z, m, n, C, G, W, f, U, v);
        for (var x = 0; x < U; x++)
          for (var X = 0; X < f; X++) {
            var z = 3 * (x * f + X);
            C[z] *= K[0];
            C[z + 1] *= K[1];
            C[z + 2] *= K[2];
          }
      }
    } else {
      for (var x = 0; x < U; x++)
        for (var X = 0; X < f; X++) {
          var E = ((x + W) * m + X + G) * 3,
            z = (x * f + X) * 3;
          C[z + 0] = Z[E + 0];
          C[z + 1] = Z[E + 1];
          C[z + 2] = Z[E + 2];
        }
    }
    var A = C,
      N = C.length,
      Q = B.raw.XO(j),
      e = 1 / Q;
    for (var y = 0; y < N; y += 3) {
      C[y] = A[y] * e;
      C[y + 1] = A[y + 1] * e;
      C[y + 2] = A[y + 2] * e;
    }
    B.raw.Dt(3, j, C, f, U);
    var Y = j.J$,
      d = f,
      I = U;
    if (Y == 1 || Y == 9) {
    } else {
      var O = B.raw.ayD(Y, f, U),
        z = 0;
      d = O[0];
      I = O[1];
      var s = C.slice(0);
      for (var x = 0; x < I; x++)
        for (var X = 0; X < d; X++) {
          var p = O[2] * X + O[3] * x + O[4],
            F = O[5] * X + O[6] * x + O[7],
            E = (F * f + p) * 3;
          C[z] = s[E];
          C[z + 1] = s[E + 1];
          C[z + 2] = s[E + 2];
          z += 3;
        }
    }
    return { sE: C, aM6: d, amx: I };
  };
  B.raw.ayD = function (j, q, m) {
    var n = q,
      G = m;
    if (!1) {
    } else if (j == 0) return [m, q, 0, -1, q - 1, 1, 0, 0];
    else if (j == 2) return [q, m, -1, 0, q - 1, 0, 1, 0];
    else if (j == 3) return [q, m, -1, 0, q - 1, 0, -1, m - 1];
    else if (j == 4) return [q, m, 1, 0, 0, 0, -1, m - 1];
    else if (j == 5) return [m, q, 0, 1, 0, 1, 0, 0];
    else if (j == 6) return [m, q, 0, 1, 0, -1, 0, m - 1];
    else if (j == 7) return [m, q, 0, -1, q - 1, -1, 0, m - 1];
    else if (j == 8) return [m, q, 0, -1, q - 1, 1, 0, 0];
    else throw "unknown orientation " + j;
  };
  B.raw.aD3 = function (j, q, m, n, G) {
    var W = Date.now(),
      Z = 0;
    if (B.raw.XO(n) > 4e4) {
      for (var y = 0; y < j.length; y++) j[y] >>= 1;
      var k = ["t50714", "t50715", "t50712", "t50717"];
      for (var y = 0; y < k.length; y++) {
        var T = n[k[y]];
        if (T) for (var b = 0; b < T.length; b++) T[b] >>>= 1;
      }
      console.log("remapping to lower bit depth");
    }
    var c = ~~Math.sqrt(G.length),
      a = ~~(0.987 * B.raw.XO(n)),
      f = n.t50728;
    if (f == null || f[0] == 0) f = [1, 1, 1];
    var W = Date.now(),
      U = [];
    for (var h = 1; h < m - 1; h++)
      for (var u = 1; u < q - 1; u++) {
        var y = h * q + u;
        if (a < j[y]) U.push(y);
        Z = Math.max(Z, j[y]);
      }
    if (U.length == 0) return;
    var i = [-1, -1, 0, -1, 0, 1, -1, 0, 0, 0, 1, 0, -1, 1, 0, 1, 1, 1],
      x = [];
    for (var h = 0; h < c; h++)
      for (var u = 0; u < c; u++) {
        var y = h * c + u,
          X = (x[h * c + u] = [0, 0, 0]);
        for (var b = 0; b < 18; b += 2) {
          var $ = (c + u + i[b]) % c,
            H = (c + h + i[b + 1]) % c,
            C = G[H * c + $];
          X[C] = i[b + 1] * q + i[b];
        }
      }
    var l = f[1] / f[0],
      v = f[1] / f[2],
      K = new Float32Array(131072);
    for (var y = 0; y < 131072; y++) K[y] = Math.pow(y, 1 / 3);
    var S = j.slice(0);
    for (var o = 0; o < U.length; o++) {
      var y = U[o],
        h = ~~(y / q),
        u = y - h * q,
        V = (h % c) * c + (u % c),
        P = G[V];
      if (P == 1) {
        var z = K[~~(j[y + x[V][0]] * l + 0.5)],
          E = K[~~(j[y + x[V][2]] * v + 0.5)],
          A = (z + E) * 0.5,
          N = Math.min(65535, ~~(A * A * A));
        if (N > S[y]) S[y] = N;
      }
    }
    j.set(S);
  };
  B.raw.axX = function (j, q, m, n, G, W, k) {
    var T = Math.max(W[0], W[1], W[2]);
    W = [W[0] / T, W[1] / T, W[2] / T];
    console.log(W);
    var b = new Uint32Array(j.length);
    for (var c = 0; c < m; c++) {}
    for (var a = 0; a < q; a++) {
      B.raw.akC(j, b, q, m, 1, 1, a, G, k, W, 0);
      B.raw.akC(j, b, q, m, 1, -1, a, G, k, W, 1);
    }
    j.set(b);
  };
  B.raw.akC = function (j, q, m, n, G, W, k, T, b, c, a) {
    var f = 1,
      U = 1,
      Z = (G == 0 ? m : n) - 1;
    if (W == -1) {
      U = Z - 1;
      Z = 0;
    }
    for (var y = U; y != Z; y += W) {
      var h = y,
        u = k;
      if (G == 1) {
        h = k;
        u = y;
      }
      var i = u * m + h,
        x = b,
        X = b,
        $ = G == 0 ? 1 : m,
        H = G == 0 ? m : 1,
        C = j[i],
        l = j[i + W * $];
      if (C < x && l < X && 3 < C && 3 < l) {
        var v = 1;
        if (y & 1) v = C / l;
        else v = l / C;
        f = (3 * f + v) * 0.25;
      }
      if (x <= C && T[(u & 1) * 2 + (h & 1)] == 1) {
        var K = 0;
        if (l < X) {
          if (y & 1) K = l * f;
          else K = l / f;
        } else {
          if (f < 1) {
            if (y & 1) K = C;
            else K = l / f;
          } else {
            if (y & 1) K = l * f;
            else K = C;
          }
        }
        if (a == 0) q[i] = K;
        else if (a == 1) q[i] = Math.min(65535, (q[i] + K) / 2);
        else q[i] += K;
      } else q[i] = C;
    }
  };
  B.raw.HY = function (j, q, m, n, G) {
    var W = g3.ye(n[0], n[1]),
      k = B.raw.ase(m, W),
      T = [B.kz.Dg, B.kz.a3L, B.kz.aC9, B.kz.a2L][G],
      b = B.kz.multiply(T, k),
      c = Math.pow(2, n[2] + (m.t50730 ? m.t50730[0] : 0));
    b = B.kz.multiply(b, B.kz.Hq(c, c, c));
    var a = B.raw.HY.abf[G];
    if (a == null) {
      a = B.raw.HY.abf[G] = new Float32Array(5e3);
      var f = 1 / [2.4, 2.1992, 1.8, 2.4][G];
      if (G == 0 || G == 3)
        for (var y = 0; y < 5e3; y++) a[y] = B.SK(y * (1 / 4e3));
      else for (var y = 0; y < 5e3; y++) a[y] = Math.pow(y * (1 / 4e3), f);
    }
    var U = j.length;
    for (var y = 0; y < U; y += 4) {
      var Z = j[y],
        h = j[y + 1],
        u = j[y + 2],
        i = b[0] * Z + b[1] * h + b[2] * u,
        x = b[4] * Z + b[5] * h + b[6] * u,
        X = b[8] * Z + b[9] * h + b[10] * u;
      if (i < 0) i = 0;
      else if (i > 1) i = 1;
      if (x < 0) x = 0;
      else if (x > 1) x = 1;
      if (X < 0) X = 0;
      else if (X > 1) X = 1;
      q[y] = a[~~(i * 4e3)];
      q[y + 1] = a[~~(x * 4e3)];
      q[y + 2] = a[~~(X * 4e3)];
    }
  };
  B.raw.HY.abf = [];
  B.raw.aAY = function (j) {
    var q = j.width,
      m = j.height,
      n = q * m * j.t277,
      G = new Uint16Array(n),
      W = null,
      k = 0;
    B.raw.amw(j, G);
    B.raw.Dt(1, j, G, q, m);
    if (j.t50712) {
      W = j.t50712;
      k = W.length - 1;
      if (W[k] > 65535) throw "too big values";
    }
    var T = B.raw.aDn(j),
      b = B.raw.ajD(j);
    if (W == null) for (var y = 0; y < n; y++) G[y] = Math.max(0, G[y] - T);
    else
      for (var y = 0; y < n; y++) {
        var c = G[y];
        if (c > k) c = k;
        c = W[c];
        G[y] = Math.max(0, c - T);
      }
    return G;
  };
  B.raw.aDn = function (j) {
    var q = j.t50714,
      m = q ? q[0] : 0,
      n = j.t50715,
      G = j.t50716;
    if (n) m += n[0][0] / n[0][1];
    if (G) m += G[0][0] / G[0][1];
    return Math.round(m);
  };
  B.raw.ajD = function (j) {
    var q = null,
      m = 0;
    if (j.t50712) {
      q = j.t50712;
      m = q.length - 1;
    }
    var n = j.t50717 ? j.t50717[0] : (1 << j.t258[0]) - 1;
    if (q) n = Math.min(n, q[m]);
    if (n == 1) n = 32767;
    return n;
  };
  B.raw.XO = function (j) {
    var q = B.raw.aDn(j),
      m = B.raw.ajD(j);
    return m - q;
  };
  B.raw.amw = function (j, q) {
    var m = q.length,
      n = j.data,
      G = j.t258[0],
      k = null;
    if (G != 32 && G != 16 && G != 14 && G != 12 && G != 10 && G != 8)
      throw "Unsupported Bits Per Sample:" + G;
    G = Math.round((n.length * 8) / m);
    if (j.t272 && j.t272[0] == "COOLPIX B700")
      for (var y = 0; y < n.length; y += 4) {
        var W = n[y];
        n[y] = n[y + 3];
        n[y + 3] = W;
        var W = n[y + 1];
        n[y + 1] = n[y + 2];
        n[y + 2] = W;
      }
    if (G == 16 && j.isLE) {
      B.wV(n, q);
      return;
    }
    for (var y = 0; y < m; y += 2) {
      var T = 0,
        b = 0,
        c = 0;
      if (G == 32) {
        if (k == null) k = new Float32Array(n.buffer);
        b = ~~(k[y] * 32767);
        c = ~~(k[y + 1] * 32767);
      } else if (G == 16) {
        T = y << 1;
        b = (n[T] << 8) | n[T + 1];
        c = (n[T + 2] << 8) | n[T + 3];
      } else if (G == 14) {
        var a = y * 14,
          f = a >>> 3,
          U = (n[f] << 24) | (n[f + 1] << 16) | (n[f + 2] << 8) | n[f + 3];
        if ((a & 7) == 0) {
          b = U >>> 18;
          c = (U >>> 4) & 16383;
        } else {
          b = (U >>> 14) & 16383;
          c = U & 16383;
        }
      } else if (G == 12) {
        T = y + (y >>> 1);
        b = (n[T] << 4) | (n[T + 1] >> 4);
        c = ((n[T + 1] & 15) << 8) | n[T + 2];
      } else if (G == 10) {
        var a = y * 10,
          f = a >>> 3;
        if ((a & 7) == 0) {
          b = ((n[f] << 2) | (n[f + 1] >> 6)) & 1023;
          c = ((n[f + 1] << 4) | (n[f + 2] >> 4)) & 1023;
        } else {
          b = ((n[f] << 6) | (n[f + 1] >> 2)) & 1023;
          c = ((n[f + 1] << 8) | (n[f + 2] >> 0)) & 1023;
        }
      } else if (G == 8) {
        T = y;
        b = n[T];
        c = n[T + 1];
      }
      q[y] = b;
      q[y + 1] = c;
    }
  };
  B.raw.apq = function (j, q, m, n, G, W, k) {
    var T = j - 0.499999,
      b = q - 0.499999,
      c = ~~T,
      a = ~~b,
      f = T - c,
      U = b - a,
      Z = (1 - U) * (1 - f),
      h = (1 - U) * f,
      u = U * (1 - f),
      i = U * f,
      x = (a * n + c) * 3,
      X = ((a + 1) * n + c) * 3,
      $ = Z * m[x] + h * m[x + 3] + u * m[X] + i * m[X + 3],
      H = Z * m[x + 1] + h * m[x + 4] + u * m[X + 1] + i * m[X + 4],
      C = Z * m[x + 2] + h * m[x + 5] + u * m[X + 2] + i * m[X + 5];
    W[k] = $;
    W[k + 1] = H;
    W[k + 2] = C;
  };
  B.raw.Dt = function (j, q, m, n, G) {
    var W = q["t" + [51008, 51009, 51022][j - 1]],
      a = 0;
    if (W == null) return;
    var k = n * G,
      T = M.Z$,
      b = M.ro,
      c = new Uint8Array(W),
      d8 = M.Z$(c, a);
    a += 4;
    for (var f = 0; f < d8; f++) {
      var U = T(c, a);
      a += 4;
      var Z = T(c, a);
      a += 4;
      var h = T(c, a);
      a += 4;
      var u = T(c, a);
      a += 4;
      if (!1) {
      } else if (U == 1 && j == 3) {
        var i = a,
          x = T(c, i);
        i += 4;
        var X = b(c, i);
        i += 8;
        var $ = b(c, i);
        i += 8;
        var H = b(c, i);
        i += 8;
        var C = b(c, i);
        i += 8;
        var l = b(c, i);
        i += 8;
        var v = b(c, i);
        i += 8;
        i += (x - 1) * 8 * 6;
        var K = b(c, i);
        i += 8;
        var S = b(c, i);
        i += 8;
        var o = K * n,
          V = S * G,
          P = Math.max(o, n - o),
          z = Math.max(V, G - V),
          E = Math.sqrt(P * P + z * z),
          A = 1 / E,
          N = m.slice(0);
        for (var Q = 0; Q < G; Q++)
          for (var e = 0; e < n; e++) {
            var Y = (e + 0.5 - o) * A,
              d = (Q + 0.5 - V) * A,
              I = Y * Y + d * d,
              O = X + $ * I + H * (I * I) + C * (I * I) * I,
              s = l * (2 * Y * d) + v * (I + 2 * Y * Y),
              p = v * (2 * Y * d) + l * (I + 2 * d * d),
              F = Math.min(o + E * (O * Y + s), n - 1),
              g = Math.min(V + E * (O * d + p), G - 1),
              w = (Q * n + e) * 3;
            B.raw.apq(F, g, N, n, G, m, w);
          }
      } else if (U == 3 && j == 3) {
        var i = a,
          r = b(c, i);
        i += 8;
        var eQ = b(c, i);
        i += 8;
        var t = b(c, i);
        i += 8;
        var dq = b(c, i);
        i += 8;
        var D = b(c, i);
        i += 8;
        var K = b(c, i);
        i += 8;
        var S = b(c, i);
        i += 8;
        var o = K * n,
          V = S * G,
          P = Math.max(o, n - o),
          z = Math.max(V, G - V),
          E = Math.sqrt(P * P + z * z),
          A = 1 / E;
        for (var Q = 0; Q < G; Q++)
          for (var e = 0; e < n; e++) {
            var Y = (e + 0.5 - o) * A,
              d = (Q + 0.5 - V) * A,
              I = Y * Y + d * d,
              ha = 1 + (r + (eQ + (t + (dq + D * I) * I) * I) * I) * I,
              w = (Q * n + e) * 3;
            m[w] = ha * m[w];
            m[w + 1] = ha * m[w + 1];
            m[w + 2] = ha * m[w + 2];
          }
      } else if (U == 4 && j == 1) {
        var i = a,
          am = T(c, i);
        i += 4;
        var k4 = T(c, i);
        i += 4;
        for (var y = 0; y < k; y++)
          if (m[y] == am) m[y] = (m[y - 2] + m[y + 2]) >> 1;
      } else if (U == 5 && j == 1) {
        var i = a,
          aA = T(c, i);
        i += 4;
        var ex = T(c, i);
        i += 4;
        var ac = T(c, i);
        i += 4;
        for (var y = 0; y < ex; y++) {
          var eJ = T(c, i);
          i += 4;
          var h$ = T(c, i);
          i += 4;
          var y = eJ * n + h$;
          m[y] = (m[y - 2] + m[y + 2]) >> 1;
        }
      } else if (U == 7 && j == 1) {
        var i = a,
          da = M.X7(c, i);
        i += 16;
        var bb = T(c, i);
        i += 4;
        var gb = T(c, i);
        i += 4;
        var fM = T(c, i),
          kS = T(c, i + 4);
        i += 8;
        var cY = T(c, i);
        i += 4;
        var cS = new Uint16Array(cY);
        for (var y = 0; y < cY; y++) cS[y] = M._h(c, i + 2 * y);
        var k3 = da.r,
          di = da.$;
        for (var Q = 0; Q < di; Q += fM)
          for (var e = 0; e < k3; e += kS) {
            var y = (da.y + Q) * n + (da.x + e);
            m[y] = cS[m[y]];
          }
      } else if (U == 8 && j == 2) {
        var i = a,
          da = M.X7(c, i);
        i += 16;
        var bb = T(c, i);
        i += 4;
        var gb = T(c, i);
        i += 4;
        var fM = T(c, i),
          kS = T(c, i + 4);
        i += 8;
        var a7 = T(c, i);
        i += 4;
        var b0 = [];
        for (var y = 0; y <= a7; y++) b0[y] = M.ro(c, i + y * 8);
        var e1 = da.x,
          l2 = da.x + da.r,
          kL = da.y,
          es = da.y + da.$,
          kR = q.t50717[0],
          eH = 1 / kR;
        for (var cZ = 0; cZ < gb; cZ++)
          for (var Q = kL; Q < es; Q += fM) {
            var w = 3 * Q * n + bb + cZ;
            for (var e = e1; e < l2; e += kS) {
              var y = w + 3 * e,
                ga = m[y] * eH,
                fi = b0[a7];
              for (var go = a7; go > 0; go--) fi = fi * ga + b0[go - 1];
              m[y] = Math.max(0, Math.min(65535, ~~(fi * kR)));
            }
          }
      } else if (U == 9 && (j == 2 || j == 3)) {
        var i = a,
          da = M.X7(c, i),
          ke = !0;
        i += 16;
        var bb = T(c, i);
        i += 4;
        var gb = T(c, i);
        i += 4;
        var fM = T(c, i),
          kS = T(c, i + 4);
        i += 8;
        var iz = T(c, i),
          i5 = T(c, i + 4);
        i += 8;
        var aI = b(c, i),
          bs = b(c, i + 8);
        i += 16;
        var k2 = b(c, i),
          jG = b(c, i + 8);
        i += 16;
        var eW = T(c, i);
        i += 4;
        var gc = iz * i5 * eW,
          k1 = new Float32Array(gc);
        for (var go = 0; go < gc; go++) k1[go] = M.$C(c, i + go * 4);
        for (var go = 0; go < gc; go++) if (k1[go] != 1) ke = !1;
        if (j == 2 && eW != 1) throw "e";
        if (j == 3 && eW != 3) throw "e";
        if (!ke) {
          var k3 = Math.min(da.r, n - da.x),
            di = Math.min(da.$, G - da.y),
            jh = (0.9999 * (i5 - 1)) / k3,
            cE = (0.9999 * (iz - 1)) / di;
          for (var Q = 0; Q < di; Q += fM)
            for (var e = 0; e < k3; e += kS) {
              var y = (da.y + Q) * n + (da.x + e),
                cy = e * jh,
                hl = Q * cE,
                c2 = Math.floor(cy),
                f9 = Math.floor(hl),
                hu = cy - c2,
                le = hl - f9,
                w = f9 * i5 + c2;
              if (j == 2) {
                var iJ = k1[w] * (1 - hu) + k1[w + 1] * hu,
                  dZ = k1[w + i5] * (1 - hu) + k1[w + 1 + i5] * hu,
                  kd = iJ * (1 - le) + dZ * le;
                m[y] = Math.max(0, Math.min(65535, ~~(m[y] * kd + 0.5)));
              }
              if (j == 3) {
                for (var bC = 0; bC < 3; bC++) {
                  var ev = w * 3 + bC,
                    iJ = k1[ev] * (1 - hu) + k1[ev + 3] * hu,
                    dZ = k1[ev + i5 * 3] * (1 - hu) + k1[ev + 3 + i5 * 3] * hu,
                    kd = iJ * (1 - le) + dZ * le;
                  m[3 * y + bC] = m[3 * y + bC] * kd;
                }
              }
            }
        }
      } else
        console.log(
          "Unknown opcode " + U + " in OpcodeList" + j + ". Length: " + u
        );
      a += u;
    }
  };
  B.raw.ase = function (j, q) {
    var m = g3.LF(q),
      n = B.raw.anh(j, q),
      G = B.kz.BR(n),
      W = g3.aGo(m, g3.LF(g3.azk)),
      k = B.kz.multiply(W, G);
    return k;
  };
  B.raw.an1 = function (j) {
    var q = j.t50728,
      m = j.t50729,
      W = 1;
    if (m) return { x: m[0][0] / m[0][1], y: m[1][0] / m[1][1] };
    if (q == null || q[0] == 0) q = [1, 1, 1];
    var n = q.slice(0);
    n.push(0);
    var G = { x: 0.34567, y: 0.3585 };
    do {
      var k = B.kz.BR(B.raw.anh(j, G)),
        T = B.kz.$j(k, n),
        b = g3.aAg(T);
      W = Math.abs(G.x - b.x) + Math.abs(G.y - b.y);
      G = b;
    } while (W > 1e-7);
    return G;
  };
  B.raw.anh = function (j, q) {
    var m = g3.a5f(q),
      n = B.raw.aoI,
      G = j.t50778 ? j.t50778[0] : 0,
      W = j.t50779 ? j.t50779[0] : 0,
      k = j.t50723,
      T = j.t50724;
    if (k && k.length == 3) k = null;
    if (T && T.length == 3) T = null;
    var b = n(j.t50721, j.t50722, G, W, m.sv),
      c = n(k, T, G, W, m.sv);
    b = b || [1, 0, 0, 0, 1, 0, 0, 0, 1];
    c = c || [1, 0, 0, 0, 1, 0, 0, 0, 1];
    var a = j.t50727
      ? [j.t50727[0], 0, 0, 0, j.t50727[1], 0, 0, 0, j.t50727[2]]
      : [1, 0, 0, 0, 1, 0, 0, 0, 1];
    return B.kz.multiply(B.kz.PA(a), B.kz.multiply(B.kz.PA(c), B.kz.PA(b)));
  };
  B.raw.aoI = function (j, q, m, n, G) {
    if (!j && !q) {
      return null;
    } else if (j && !q) {
      return j;
    } else if (G < m) {
      return j;
    } else if (G > n) {
      return q;
    } else {
      var W = (1 / G - 1 / n) / (1 / m - 1 / n),
        k = 1 - W,
        T = [];
      for (var y = 0; y < 9; y++) T[y] = j[y] * W + q[y] * k;
      return T;
    }
  };
  B.raw.nD = {};
  B.raw.zI = function (j) {
    j *= 8;
    var q = [8, 10, 12, 14, 16];
    for (var m in CAMS) {
      var n = CAMS[m];
      if (n.length == 4) continue;
      var G = n[4],
        W = n[5];
      for (var y = 0; y < q.length; y++)
        if (G * W * q[y] == j) return [m, q[y]];
    }
    var k = [[4e3, 3e3]];
    for (var y = 0; y < k.length; y++) {
      var n = k[y],
        G = n[0],
        W = n[1];
      for (var y = 0; y < q.length; y++)
        if (G * W * q[y] == j) return [n, q[y]];
    }
    return null;
  };
  B.raw.aAU = function (j) {
    var j = new Uint8Array(j);
    for (var y = 0; y < j.length; y += 2) {
      var q = j[y];
      j[y] = j[y + 1];
      j[y + 1] = q;
    }
    var m = B.raw.zI(j.length),
      n = CAMS[m[0]];
    if (n == null)
      n = [
        [8489, -2583, -1036, -8051, 15583, 2643, -1307, 1407, 7354],
        0,
        1e3,
        64383,
        m[0][0],
        m[0][1],
      ];
    var G = n[4],
      W = n[5],
      k = Math.max(n[2], 116),
      T = {
        data: j,
        J$: 1,
        width: G,
        height: W,
        t256: [G],
        t257: [W],
        t258: [m[1]],
        t277: [1],
        t33421: [2, 2],
        t33422: B.raw.hg[n[1]],
        t50706: [1, 2, 0, 0],
        t50714: [k, k, k, k],
        t50717: [n[3]],
        t50721: n[0].slice(0),
        t50723: [1, 0, 0, 0, 1, 0, 0, 0, 1],
        t50728: [0.64, 1, 0.46],
        t50778: [17],
      };
    for (var y = 0; y < 9; y++) T.t50721[y] /= 1e4;
    return T;
  };
  B.raw.ad0 = function (j) {
    if (j == null || j.length == 0 || typeof j[0] == "number") return j;
    var q = [];
    for (var y = 0; y < j.length; y++)
      q[y] = j[y][1] == 0 ? 0 : j[y][0] / j[y][1];
    return q;
  };
  B.raw.hg = [
    [2, 1, 1, 0],
    [0, 1, 1, 2],
    [1, 0, 2, 1],
    [1, 2, 0, 1],
  ];
  B.raw.normalize = function (j, q) {
    if (j.t259 && j.t259[0] == 52546)
      alert("JPEG XL compression is not supported yet.", 4e3);
    if (j.t50706 != null || j.t271[0].startsWith("Hasselblad")) {
      var m = [
        50714, 50718, 50719, 50720, 50721, 50722, 50723, 50724, 50727, 50728,
        50730, 50731, 50732, 50734, 50736, 50738, 50739, 50780, 50964, 50965,
      ];
      for (var y = 0; y < m.length; y++)
        if (j["t" + m[y]] != null) j["t" + m[y]] = B.raw.ad0(j["t" + m[y]]);
      if (j.t271 && j.t271[0].startsWith("Hasselblad")) {
        j.t50706 = [1, 2, 0, 0];
        j.t33422 = B.raw.hg[1];
        j.t50723 = [1, 0, 0, 0, 1, 0, 0, 0, 1];
        j.t50778 = [17];
        if (!j.isLE)
          for (var y = 0; y < j.data.length; y += 2) {
            var n = j.data[y];
            j.data[y] = j.data[y + 1];
            j.data[y + 1] = n;
          }
      }
      if (j.t272 && j.t272[0] == "HERO10 Black") {
        j.t50728 = [0.469725, 1, 0.739884];
        if (!j.t305[0].startsWith("Adobe")) {
          var G = new Uint16Array(j.data.buffer);
          for (var y = 0; y < G.length; y++) G[y] >>>= 2;
        }
      }
      return;
    }
    var W = j.t258[0],
      k = j.exifIFD,
      q = new Uint8Array(q);
    j.t50706 = [1, 2, 0, 0];
    var T = j.t271[0].trim(),
      b = j.t272[0].trim();
    if (j.t50708 == null) j.t50708 = [T + " " + b];
    var c = (T + ":" + b).toLowerCase().trim(),
      a = CAMS[c];
    if (c == "panasonic:dmc-lx2") a[3] = 1 << 16;
    if (a == null) {
      alert("Unknown camera:" + c);
      if (c.startsWith("canon"))
        a = [
          [8532, -701, -1167, -4095, 11879, 2508, -797, 2424, 7010],
          1,
          512,
          16e3,
        ];
    }
    if (a != null) {
      var f = a[2],
        U = a[3];
      if (f != 0) j.t50714 = [f, f, f, f];
      if (U != 0) j.t50717 = [U];
      j.t50721 = a[0].slice(0);
      for (var y = 0; y < 9; y++) j.t50721[y] = j.t50721[y] * (1 / 1e4);
    }
    j.t50723 = [1, 0, 0, 0, 1, 0, 0, 0, 1];
    if (j.t50728 == null) j.t50728 = [0.35, 1, 0.6];
    j.t50778 = [17];
    if (T.startsWith("OLYMPUS") || T.startsWith("OM Digital Solutions")) {
      j.t33422 = [2, 1, 1, 0];
      var Z = k.t41730,
        x;
      if (Z) j.t33422 = [Z[4], Z[5], Z[6], Z[7]];
      var h = j.t50341;
      if (h == null) h = k.t36864;
      var u = B.raw.am7(h.buffer, j);
      j.data = new Uint8Array(u.buffer);
      if ((j.height & 1) == 1) j.t50829 = [0, 0, j.height - 1, j.width];
      var i = k.makerNote,
        X = i.t8256;
      if (X) x = X.t256;
      else x = i.t12288.t256;
      if (x) j.t50728 = [256 / x[0], 1, 256 / x[1]];
    } else if (j.t271[0].startsWith("SONY")) {
      var $ = UTIF["_bin" + (j.isLE ? "LE" : "BE")],
        H = j.t28688,
        V;
      if (JSON.stringify(H) != "[8000,10400,12900,14100]") console.log(H);
      if (H && H.join("") != "0000") {
        var C = [0, 0, 0, 0, 0, 4095],
          l = new Uint16Array(16385);
        for (var y = 0; y < 4; y++) {
          var v = H[y] >>> 2;
          C[y + 1] = v;
          if (v > 4095) throw "e";
        }
        for (var y = 0; y < 16385; y++) l[y] = y;
        for (var y = 0; y < 5; y++)
          for (var K = C[y] + 1; K <= C[y + 1]; K++) l[K] = l[K - 1] + (1 << y);
        var S = q.length * 8 < j.width * j.height * W;
        if (S) j.t50712 = l;
      } else console.log("no curve");
      var o = j.dngPrvt;
      if (o) {
        var P = o.t29184[0],
          z = o.t29185[0],
          E = (j.isLE ? M.YZ : M.Z$)(o.t29217, 0),
          A = new Uint32Array(q.slice(P, P + (z & 4294967292)).buffer),
          N = new Uint32Array(z >>> 2);
        B.raw.aik(A, N, z >>> 2, E);
        var Q = new Uint8Array(P + z);
        Q.set(new Uint8Array(N.buffer), P);
        var e = [];
        UTIF._readIFD($, Q, P, e, 0, !1);
        var Y = e.pop(),
          d = Y.t29458;
        j.t50728 = [d[1] / d[0], 1, d[1] / d[3]];
        j.t50730 = [0.5];
        var I = Y.t29891;
        j.t50829 = [I[1], I[0], I[3], I[2]];
      } else if (k.makerNote && k.makerNote.t8208) {
        var V = k.makerNote,
          O = V.t8208,
          s = O.length,
          p = 0,
          F = new Uint8Array(256);
        for (var y = 249; y < 256; y++) F[y] = y;
        for (var y = 0; y < 249; y++) F[(y * y * y) % 249] = y;
        for (var y = 0; y < s; y++) O[y] = F[O[y]];
        if (s == 6604) p = 612;
        else throw "e";
        var d = [];
        for (var y = 0; y < 3; y++) d.push(M.O_(O, p + y * 2));
        console.log(d);
        j.t50728 = [d[1] / d[0], 1, d[1] / d[2]];
      } else console.log("no white balance");
      if (j.width * j.height * 1.5 == j.t279[0]) {
        f = f >>> 2;
        j.t50714 = [f, f, f, f];
        j.t50717 = [a[3] >>> 2];
      }
    } else if (j.t271[0].startsWith("Canon")) {
      var q = j.data,
        g = q.slice(0),
        w = j.t50752,
        r = [],
        t = 0;
      if (w == null || (w[0] == 0 && w[1] == 0)) r.push(j.width);
      else {
        for (var y = 0; y < w[0]; y++) r.push(w[1]);
        r.push(w[2]);
      }
      var eQ = j.width * 2,
        dq = j.t50885 && j.t50885[0] == 4;
      if (!dq)
        for (var D = 0; D < r.length; D++) {
          var ha = r[D],
            am = 2 * t,
            k4 = 2 * ha;
          for (var aA = 0; aA < j.height; aA += 2) {
            var ex = aA * eQ + am,
              ac = j.height * am + aA * k4;
            for (var y = 0; y < k4; y++) {
              q[ex + y] = g[ac + y];
              q[ex + y + eQ] = g[ac + y + k4];
            }
          }
          t += ha;
        }
      else {
        var eJ = new Uint16Array(g.buffer),
          h$ = new Uint16Array(q.buffer);
        function da(gb, fM) {
          h$[fM * 3 + 0] = eJ[gb * 3 + 0];
          h$[fM * 3 + 1] = eJ[gb * 3 + 1];
          h$[fM * 3 + 2] = eJ[gb * 3 + 2];
        }
        var bb = (w[0] * w[1] + w[2]) / j.width;
        for (var D = 0; D < r.length; D++) {
          var ha = Math.round(r[D] / bb);
          for (var aA = 0; aA < j.height; aA++) {
            var gb =
                j.height * t +
                (bb == 3
                  ? (aA >>> 3) * 8 + [0, 4, 1, 5, 2, 6, 3, 7][aA & 7]
                  : aA) *
                  ha,
              fM = aA * j.width + t;
            for (var kS = 0; kS < ha; kS++) da(gb + kS, fM + kS);
          }
          t += ha;
        }
        var cY = new Uint16Array(q.buffer),
          cS = new Uint16Array(1),
          k3 = new Int16Array(cS.buffer);
        for (var y = 0; y < cY.length; y += 3) {
          var di = cY[y],
            a7 = cY[y + 1],
            b0 = cY[y + 2];
          cS[0] = a7 << 2;
          a7 = k3[0] >> 2;
          cS[0] = b0 << 2;
          b0 = k3[0] >> 2;
          cY[y + 0] = Math.max(0, b0 + di);
          cY[y + 1] = Math.max(0, ((di << 12) - a7 * 778 - (b0 << 11)) >> 12);
          cY[y + 2] = Math.max(0, a7 + di);
        }
      }
      var V = k.makerNote,
        gb = V.t224;
      if (gb) {
        var P = (j.t50719 = [gb[5], gb[6]]),
          e1 = (j.t50720 = [gb[7] + 1 - gb[5], gb[8] + 1 - gb[6]]),
          l2 = V.t154;
        if (l2) {
          P[0] += l2[3];
          P[1] += l2[4];
          e1[0] = l2[1];
          e1[1] = l2[2];
        }
      }
      if (V.t16385) {
        var kL = V.t16385,
          es = kL.length,
          ga = 1;
        if (kL instanceof Array) kL = new Uint16Array(kL);
        if (kL instanceof Uint8Array) kL = new Int16Array(kL.slice(0).buffer);
        var kR = kL[0];
        if (es == 1273 || es == 1275) kR = 66;
        var eH = [
          [null, null, null],
          [63, 196, null],
          [63, 231, null],
          [63, 231, null],
          [63, 231, 696],
          [63, 231, 696],
          [63, 231, 719],
          [63, 231, 719],
          [null, null, null],
          [63, 231, 723],
          [63, 504, 508],
          [63, 728, 732],
          [63, 326, 782],
          [63, 326, 782],
          [63, 326, 560],
          [63, 326, 782],
          [71, 329, 796],
          [71, 329, 796],
          [71, 329, 796],
          [71, 329, 796],
        ];
        eH[-3] = [71, 264, 662];
        eH[-4] = [71, 333, 1385];
        eH[66] = [63, 251, 483];
        eH[32] = [85, 343, 810];
        eH[33] = [85, 343, 810];
        eH[34] = [105, 363, 640];
        eH[48] = [105, 363, 640];
        var cZ = eH[kR];
        if (cZ == null) {
          if (es == 582) cZ = [25, 166, null];
          if (es == 653) cZ = [34, 286, null];
        }
        var fi = j.t272 ? j.t272[0] : "";
        if (fi == "Canon EOS DIGITAL REBEL XS" || fi == "Canon EOS 1000D")
          ga = 0.25;
        var p = cZ[0],
          go = cZ[1],
          iz = cZ[2];
        if (p) j.t50728 = [kL[p + 1] / kL[p], 1, kL[p + 1] / kL[p + 3]];
        if (go) j.t50714 = [kL[go] * ga, kL[go] * ga, kL[go] * ga, kL[go] * ga];
        if (iz) j.t50717 = [kL[iz] * ga];
        if (fi == "Canon PowerShot SX50 HS") j.t50717 = [3965];
      } else {
        j.t50728 = [0.4, 1, 0.6];
      }
      if (dq) {
        j.t277 = [3];
        j.t50728 = [1, 1, 1];
        j.t50714 = [0, 0, 0, 0];
      }
    } else if (j.t271[0].startsWith("NIKON")) {
      var V = k.makerNote,
        i5 = j.isLE ? M.O_ : M.A_,
        gc = 0,
        k1 = 0,
        hl,
        kd = 0;
      if (V.t61) {
        var aI = V.t61,
          bs = [];
        for (var y = 0; y < 4; y++) bs[y] = aI[y] / Math.pow(2, 14 - W);
        j.t50714 = bs;
      }
      if (V.t3585) {
        var k2 = V.t3585,
          y = 0,
          P = 22;
        while (P < k2.length && y != -4) {
          var jG = M.YZ(k2, P);
          P += 4;
          P += 14;
          y = M.YZ(k2, P) - 4;
          P += 4;
          if (jG == 1990472198) {
            if (k2[P] != 0) throw "Flip";
          }
          if (jG == 1990472199) {
            var eW = M.O_(k2, P);
            if (eW == 0) j.J$ = 1;
            else if (eW == 270) j.J$ = 8;
            else throw "e " + eW;
          }
          P += y;
        }
      }
      if (V.t183) {
        var ke = V.t183,
          e1 = [];
        for (var y = 0; y < 6; y++) e1.push(i5(ke, 16 + y * 2));
        gc = e1[0];
        k1 = e1[1];
      }
      if (V.t3614) {
        var jh = V.t3614;
        gc = M.YZ(jh, 8);
        k1 = M.YZ(jh, 12);
      }
      if (gc != 0 && Math.max(gc, k1) < Math.max(j.width, j.height)) {
        if (gc < k1) {
          var n = gc;
          gc = k1;
          k1 = n;
        }
        var kS = (j.width - gc) >>> 1,
          aA = (j.height - k1) >>> 1;
        j.t50829 = [aA, kS, aA + k1, kS + gc];
      } else j.t50829 = [8, 8, j.height - 8, j.width - 56];
      var cE = V.t69;
      if (cE) {
        var cy = cE[1];
        if ((cy & 1) == 1) cy++;
        j.t50829 = [cy, cE[0], cy + cE[3], cE[0] + cE[2]];
      }
      if (V.t12) {
        var c2 = B.raw.ad0(V.t12);
        hl = [1 / c2[0], 1, 1 / c2[1]];
      } else if (V.t151) {
        var f9 = B.raw.aIO(V, 151),
          hu = f9[0],
          c_ = f9[1],
          le = f9[2];
        if (hu == "0100" && c_ >= 80) {
          var iJ = [];
          for (var y = 0; y < 4; y++) iJ.push(i5(le, 68 + y * 2));
          hl = [iJ[3] / iJ[0], 1, iJ[3] / iJ[1]];
        } else if (hu == "0102") {
          var iJ = [];
          for (var y = 0; y < 4; y++) iJ.push(i5(le, 6 + y * 2));
          hl = [iJ[1] / iJ[0], 1, iJ[1] / iJ[3]];
        } else if (hu == "0103" && c_ >= 26) {
          var iJ = [];
          for (var y = 0; y < 4; y++) iJ.push(i5(le, 16 + y * 2));
          hl = [iJ[1] / iJ[0], 1, iJ[3] / iJ[2]];
        } else if ((hu == "0204" && c_ >= 564) || (hu == "0205" && c_ >= 284)) {
          var P = hu == "0204" ? 6 : 14,
            iJ = [];
          for (var y = 0; y < 4; y++) iJ.push(i5(le, P + y * 2));
          hl = [iJ[1] / iJ[0], 1, iJ[1] / iJ[3]];
        } else throw "e";
      } else console.log("no white balance info");
      if (b == "NIKON D1") hl = [1, 1, 1];
      if (hl) j.t50728 = hl;
      var dZ = V.t150 ? V.t150 : V.t140;
      if (dZ) {
        var bC = dZ[kd++],
          ev = dZ[kd++],
          a9;
        if (bC == 73 || ev == 88) kd += 2110;
        kd += 8;
        var ak = (1 << W) & 32767,
          gD = i5(dZ, kd);
        kd += 2;
        var l = [];
        if (gD > 1) a9 = Math.floor(ak / (gD - 1));
        if (bC == 68 && ev == 32 && a9 > 0) {
          for (y = 0; y < gD; y++) {
            l[y * a9] = i5(dZ, kd);
            kd += 2;
          }
          for (y = 0; y < ak; y++)
            l[y] = Math.floor(
              (l[y - (y % a9)] * (a9 - (y % a9)) +
                l[y - (y % a9) + a9] * (y % a9)) /
                a9
            );
        } else if (bC != 70 && gD <= 16385) {
          ak = gD;
          for (var y = 0; y < gD; y++) l[y] = i5(dZ, kd + 2 * y);
          kd += 2 * gD;
        }
        var b = j.t272[0];
        if (l.length != 0) j.t50712 = new Uint16Array(l);
        if (j.t258[0] == 14 && j.t50717 && j.t50717[0] < 1e4) {
          console.log("fixing white");
          j.t50717[0] *= 4;
        }
      }
    } else if (T.startsWith("FujiFilm")) {
    } else if (T.startsWith("Panasonic")) {
      if (j.t277 == null) j.t277 = [1];
    } else alert("Unknown camera " + T);
  };
  B.raw.aik = function (j, q, m, n) {
    if (0 == m) return;
    var G = new Uint32Array(128),
      W = new Uint8Array(G.buffer),
      k = 127,
      T = 0,
      b = 0;
    for (var k = 0; k < 4; k++)
      G[k] = n = (((n * 15625) >>> 0) * 3125 + 1) >>> 0;
    G[3] = (G[3] << 1) | ((G[0] ^ G[2]) >>> 31);
    for (var k = 4; k < 127; k++)
      G[k] = ((G[k - 4] ^ G[k - 2]) << 1) | ((G[k - 3] ^ G[k - 1]) >>> 31);
    for (var k = 0; k < 127; k++) G[k] = M.Z$(W, k * 4);
    for (; m > 0; m--) {
      G[k & 127] = G[(k + 1) & 127] ^ G[(k + 1 + 64) & 127];
      var c = G[k & 127],
        a = j[T];
      a ^= c;
      q[b] = a;
      T++;
      b++;
      k++;
    }
  };
  B.raw.aJu = function (j, q) {
    var m = M.IH(q, 0, 4),
      n = B.raw.a7Y;
    for (var y = 0; y < n.length; y++)
      if (
        n[y][0] == j &&
        m.startsWith(n[y][1]) &&
        (n[y][2] == 0 || n[y][2] == q.length)
      )
        return n[y];
    throw "e";
  };
  B.raw.ah7 = function (j) {
    if (j.t29 == null) return [];
    var q = B.raw.amV,
      m = B.raw.aEz,
      n = j.t29[0],
      G = 0,
      k = 0;
    for (var y = 0; y < n.length; y++) {
      var W = n.charCodeAt(y);
      G = G * 10 + (48 <= W && W <= 57 ? W - 48 : W % 10);
    }
    var c_ = j.t167[0];
    for (var y = 0; y < 4; y++) k ^= (c_ >>> (y << 3)) & 255;
    var T = q[G & 255],
      b = m[k & 255];
    return [T, b, 96];
  };
  B.raw.aIO = function (j, q) {
    var m = j["t" + q],
      c_ = m.length,
      n = B.raw.aJu(q, m),
      G = M.IH(m, 0, 4),
      W,
      k = n[4];
    if (k == null) W = m.slice(4);
    else {
      W = new Uint8Array(c_ - k);
      var T = B.raw.ah7(j),
        b = T[0],
        c = T[1],
        a = T[2];
      for (var y = 0; y < W.length; y++) {
        c = (c + b * a++) & 255;
        W[y] = m[k++] ^ c;
      }
    }
    return [G, c_, W];
  };
  B.raw.am7 = function (j, q) {
    var m = q.t271[0],
      n = q.t272[0],
      G = q.t256[0],
      W = q.t257[0],
      k = q.t258[0],
      T = q.t273[0],
      b = T,
      c = new Uint8Array(j),
      a,
      f = G - 4,
      U = W,
      Z = c.length - T,
      i = 0,
      x = 0;
    function h() {
      var l = new Uint16Array(4096),
        aF = 0;
      l[aF] = 3084;
      for (var y = 12; y--; )
        for (var v = 0; v < 2048 >> y; v++) l[++aF] = ((y + 1) << 8) | y;
      return l;
    }
    function u() {
      return c[b++];
    }
    function X(l, v) {
      var K;
      if (l > 25) return 0;
      if (l == 0 || x < 0) return 0;
      if (l < 0) {
        i = 0;
        x = 0;
        return 0;
      }
      while (x < l) {
        K = u();
        if (K == null) break;
        i = (i << 8) + (255 & K);
        x += 8;
      }
      K = x == 0 ? 0 : (i << (32 - x)) >>> (32 - l);
      if (v) {
        x -= v[K] >> 8;
        K = 255 & v[K];
      } else x -= l;
      return K;
    }
    function $() {
      var l = h();
      b += 7;
      X(-1);
      for (var v = 0; v < U; v++) {
        var K = [new Int32Array(3), new Int32Array(3)];
        for (var S = 0; S < G; S++) {
          var o = K[S & 1],
            y = 2 * (o[2] < 3),
            V;
          for (V = 2 + y; (65535 & o[0]) >> (V + y); V++);
          var P = X(3),
            z = P & 3;
          P = (P << 29) >> 31;
          var E = X(12, l);
          if (E == 12) E = X(16 - V) >>> 1;
          var A = X(V);
          o[0] = (E << V) | A;
          var N = (o[0] ^ P) + o[1];
          o[1] = (N * 3 + o[1]) >> 5;
          o[2] = o[0] > 16 ? 0 : o[2] + 1;
          if (S >= f) continue;
          var Q = a[v * G + S - 2],
            aF = a[(v - 2) * G + S],
            e = a[(v - 2) * G + S - 2];
          a[v * G + S] =
            (v < 2 && S < 2
              ? 0
              : v < 2
              ? Q
              : S < 2
              ? aF
              : (Q < e && e < aF) || (aF < e && e < Q)
              ? Math.abs(Q - e) > 32 || Math.abs(aF - e) > 32
                ? Q + aF - e
                : (Q + aF) >> 1
              : Math.abs(Q - e) > Math.abs(aF - e)
              ? Q
              : aF) +
            ((N << 2) | z);
        }
      }
    }
    function H() {
      var l = (G * k) / 8,
        v = (W + 1) >> 1,
        S = 0,
        o = 0;
      l += l & (6 >> 7);
      var K = l * 8 - G * k;
      for (var V = 0; V < W; V++) {
        var P = (V % v) * 2 + ~~(V / v);
        if (P == 1) {
          S = 0;
          b = T - ((-v * l) & -2048);
        }
        for (var z = 0; z < G; z++) {
          for (S -= k; S < 0; S += 8) {
            o <<= 8;
            for (var y = 0; y < 8; y += 8) o |= u() << y;
          }
          var E = (o << (64 - k - S)) >>> (64 - k);
          a[P * G + z] = E;
        }
        S -= K;
      }
    }
    function C() {
      var l =
        !m.startsWith("OLYMPUS") ||
        !m.startsWith("OM Digi") ||
        (!m.toLowerCase().startsWith("clauss") &&
          !n.toLowerCase().startsWith("pix 5oo"));
      return l && Z < G * W * (k / 8);
    }
    if (C()) {
      a = new Uint16Array(f * U);
      $();
    } else if (G * W * 2 == q.data.length) {
      a = new Uint16Array(q.data.buffer);
    } else {
      a = new Uint16Array(G * W);
      H();
    }
    return a;
  };
  B.raw.a7Y = [
    [145, "0208", 0, 0, 4],
    [145, "0209", 0, 1, 4],
    [145, "0210", 5291, 2, 4],
    [145, "0210", 5303, 3, 4],
    [145, "02", 0, 4, 4],
    [145, "01", 0, 5, null],
    [151, "0100", 0, 0, null],
    [151, "0102", 0, 1, null],
    [151, "0103", 0, 4, null],
    [151, "0204", 0, 3, 284],
    [151, "0205", 0, 2, 4],
    [151, "0206", 0, 3, 284],
    [151, "0207", 0, 3, 284],
    [151, "0208", 0, 3, 284],
    [151, "0209", 0, 5, 284],
    [151, "02", 0, 3, 284],
    [152, "0100", 0, 0, null],
    [152, "0101", 0, 1, null],
    [152, "0201", 0, 1, 4],
    [152, "0202", 0, 1, 4],
    [152, "0203", 0, 1, 4],
    [152, "0204", 0, 2, 4],
    [168, "0100", 0, 0, null],
    [168, "0101", 0, 0, null],
    [168, "0102", 0, 1, null],
    [168, "0103", 0, 2, null],
  ];
  B.raw.amV = [
    193, 191, 109, 13, 89, 197, 19, 157, 131, 97, 107, 79, 199, 127, 61, 61, 83,
    89, 227, 199, 233, 47, 149, 167, 149, 31, 223, 127, 43, 41, 199, 13, 223, 7,
    239, 113, 137, 61, 19, 61, 59, 19, 251, 13, 137, 193, 101, 31, 179, 13, 107,
    41, 227, 251, 239, 163, 107, 71, 127, 149, 53, 167, 71, 79, 199, 241, 89,
    149, 53, 17, 41, 97, 241, 61, 179, 43, 13, 67, 137, 193, 157, 157, 137, 101,
    241, 233, 223, 191, 61, 127, 83, 151, 229, 233, 149, 23, 29, 61, 139, 251,
    199, 227, 103, 167, 7, 241, 113, 167, 83, 181, 41, 137, 229, 43, 167, 23,
    41, 233, 79, 197, 101, 109, 107, 239, 13, 137, 73, 47, 179, 67, 83, 101, 29,
    73, 163, 19, 137, 89, 239, 107, 239, 101, 29, 11, 89, 19, 227, 79, 157, 179,
    41, 67, 43, 7, 29, 149, 89, 89, 71, 251, 229, 233, 97, 71, 47, 53, 127, 23,
    127, 239, 127, 149, 149, 113, 211, 163, 11, 113, 163, 173, 11, 59, 181, 251,
    163, 191, 79, 131, 29, 173, 233, 47, 113, 101, 163, 229, 7, 53, 61, 13, 181,
    233, 229, 71, 59, 157, 239, 53, 163, 191, 179, 223, 83, 211, 151, 83, 73,
    113, 7, 53, 97, 113, 47, 67, 47, 17, 223, 23, 151, 251, 149, 59, 127, 107,
    211, 37, 191, 173, 199, 197, 197, 181, 139, 239, 47, 211, 7, 107, 37, 73,
    149, 37, 73, 109, 113, 199,
  ];
  B.raw.aEz = [
    167, 188, 201, 173, 145, 223, 133, 229, 212, 120, 213, 23, 70, 124, 41, 76,
    77, 3, 233, 37, 104, 17, 134, 179, 189, 247, 111, 97, 34, 162, 38, 52, 42,
    190, 30, 70, 20, 104, 157, 68, 24, 194, 64, 244, 126, 95, 27, 173, 11, 148,
    182, 103, 180, 11, 225, 234, 149, 156, 102, 220, 231, 93, 108, 5, 218, 213,
    223, 122, 239, 246, 219, 31, 130, 76, 192, 104, 71, 161, 189, 238, 57, 80,
    86, 74, 221, 223, 165, 248, 198, 218, 202, 144, 202, 1, 66, 157, 139, 12,
    115, 67, 117, 5, 148, 222, 36, 179, 128, 52, 229, 44, 220, 155, 63, 202, 51,
    69, 208, 219, 95, 245, 82, 195, 33, 218, 226, 34, 114, 107, 62, 208, 91,
    168, 135, 140, 6, 93, 15, 221, 9, 25, 147, 208, 185, 252, 139, 15, 132, 96,
    51, 28, 155, 69, 241, 240, 163, 148, 58, 18, 119, 51, 77, 68, 120, 40, 60,
    158, 253, 101, 87, 22, 148, 107, 251, 89, 208, 200, 34, 54, 219, 210, 99,
    152, 67, 161, 4, 135, 134, 247, 166, 38, 187, 214, 89, 77, 191, 106, 46,
    170, 43, 239, 230, 120, 182, 78, 224, 47, 220, 124, 190, 87, 25, 50, 126,
    42, 208, 184, 186, 41, 0, 60, 82, 125, 168, 73, 59, 45, 235, 37, 73, 250,
    163, 170, 57, 167, 197, 167, 80, 17, 54, 251, 198, 103, 74, 245, 165, 18,
    101, 126, 176, 223, 175, 78, 179, 97, 127, 47,
  ];
  B.bM = {};
  B.bM.bM = function (j, q, m, n, G) {
    if (n == null) n = 3;
    if (G == null) G = !0;
    var W = j.r,
      k = j.$,
      T = 1 / W,
      b = W * k,
      c = Date.now(),
      a = !1,
      f = B.bM.a8S(m, W, k, 255, 128),
      U = B.bM.a8S(m, W, k, 0, 128),
      dq = 0;
    if (a) console.log("extract contours", Date.now() - c);
    c = Date.now();
    var Z = function (iz, i5) {
      var aI = iz << 2,
        bs = i5 << 2;
      return q[aI] + q[aI + 1] + q[aI + 2] - (q[bs] + q[bs + 1] + q[bs + 2]);
    };
    f.sort(Z);
    U.sort(Z);
    var h = B.j(b),
      u = B.j(b),
      i = [],
      x = new Uint32Array(W * k);
    x.fill(4294967295);
    for (var y = 0; y < b; y++)
      if (m[y] == 0) u[y] = 255;
      else if (m[y] == 255) h[y] = 255;
      else {
        x[y] = i.length;
        i.push(y);
      }
    var X = f.length,
      $ = U.length,
      H = i.length;
    function C(iz, i5, aI, bs) {
      var k2 = iz.length,
        jG = new Array(k2 * 2);
      for (var y = 0; y < k2; y++) {
        var Q = iz[y],
          e = ~~(Q * bs),
          Y = Q - e * aI,
          ga = Q << 2;
        jG[y * 2] = (Y << 16) | e;
        jG[y * 2 + 1] = (i5[ga] << 16) | (i5[ga + 1] << 8) | i5[ga + 2];
      }
      return jG;
    }
    var l = C(f, q, W, T),
      v = C(U, q, W, T),
      K = C(i, q, W, T);
    if (a) console.log("Itemize", Date.now() - c, "Unknown:", H, X, $);
    c = Date.now();
    var S = B.style.uf(h, W, k, !0),
      o = B.style.uf(u, W, k, !0),
      V = new Array(H),
      P = new Array(H),
      z = new Array(H),
      E = new Array(H),
      A = new Array(H);
    if (a) console.log("Dist transform", Date.now() - c);
    c = Date.now();
    var N = B.bM.Yo;
    for (var y = 0; y < H; y++) {
      var Q = i[y],
        e = ~~(Q * T),
        Y = Q - e * W,
        d = S[Q << 1],
        I = S[(Q << 1) + 1],
        O = Math.sqrt(d * d + I * I),
        s = o[Q << 1],
        p = o[(Q << 1) + 1],
        F = Math.sqrt(s * s + p * p);
      V[y] = 1 / O;
      P[y] = 1 / F;
      var r = Math.floor(B.G.Ez(Q * 17) * X),
        eQ = Math.floor(B.G.Ez(Q * 19) * $);
      z[y] = r;
      E[y] = eQ;
      A[y] = N(
        K[y * 2],
        K[y * 2 + 1],
        l[r * 2],
        l[r * 2 + 1],
        v[eQ * 2],
        v[eQ * 2 + 1],
        V[y],
        P[y],
        1e9
      );
    }
    var t = [-W - 1, -W, -W + 1, -1, 1, W - 1, W, W + 1];
    while (Math.floor(Math.max(X, $) * Math.pow(0.5, dq)) > 1) dq++;
    for (var D = 0; D < n; D++) {
      var ha = 0;
      for (var y = 0; y < H; y++) {
        var Q = i[y],
          e = ~~(Q * T),
          Y = Q - e * W,
          am = V[y],
          k4 = P[y],
          aA = K[y * 2],
          ex = K[y * 2 + 1],
          ac = A[y],
          r = z[y],
          eQ = E[y],
          kS = 1;
        if (e != 0 && Y != 0 && Y != W - 1 && e != k - 1)
          for (var eJ = 0; eJ < 8; eJ++) {
            var h$ = x[Q + t[eJ]];
            if (h$ == 4294967295) continue;
            var da = z[h$],
              gb = E[h$];
            if (da == r && gb == eQ) continue;
            var fM = N(
              aA,
              ex,
              l[da * 2],
              l[da * 2 + 1],
              v[gb * 2],
              v[gb * 2 + 1],
              am,
              k4,
              ac
            );
            if (fM < ac) {
              ac = fM;
              r = da;
              eQ = gb;
            }
          }
        for (var cY = 0; cY < dq; cY++) {
          var cS = ~~(X * kS),
            k3 = ~~($ * kS);
          kS *= 0.5;
          var di = B.G.Ez(Q + D * 17 + cY * 31),
            a7 = B.G.Ez(Q + D * 29 + cY * 63),
            b0 = Math.max(0, r - cS),
            e1 = Math.min(r + cS, X - 1),
            l2 = Math.max(0, eQ - k3),
            kL = Math.min(eQ + k3, $ - 1),
            da = b0 + ~~(di * (e1 - b0)),
            gb = l2 + ~~(a7 * (kL - l2)),
            fM = N(
              aA,
              ex,
              l[da * 2],
              l[da * 2 + 1],
              v[gb * 2],
              v[gb * 2 + 1],
              am,
              k4,
              ac
            );
          if (fM < ac) {
            ac = fM;
            r = da;
            eQ = gb;
          }
        }
        A[y] = ac;
        z[y] = r;
        E[y] = eQ;
        ha += ac;
      }
    }
    if (a) console.log(ha);
    if (a) console.log("iterations", Date.now() - c);
    c = Date.now();
    var es = m.slice(0);
    for (var y = 0; y < H; y++) {
      var kR = B.bM.alpha(K[y * 2 + 1], l[z[y] * 2 + 1], v[E[y] * 2 + 1]);
      es[i[y]] = ~~(0.5 + 255 * kR);
    }
    es = B.Sm.auh(es, q, new hk(0, 0, W, k), 16, 0.01 * 0.01);
    if (a) console.log("guided filter", Date.now() - c);
    c = Date.now();
    if (G)
      for (var y = 0; y < b; y++) if (m[y] == 255 || m[y] == 0) es[y] = m[y];
    var eH = q.slice(0);
    for (var y = 0; y < H; y++) {
      var cZ = i[y],
        r = f[z[y]],
        ac = A[y],
        ga = cZ << 2,
        fi = es[cZ],
        go = (fi >= 250 ? cZ : r) << 2;
      eH[ga] = q[go];
      eH[ga + 1] = q[go + 1];
      eH[ga + 2] = q[go + 2];
    }
    B.ln(es, eH, 3);
    if (a) console.log(Date.now() - c);
    c = Date.now();
    return eH;
  };
  B.bM.Yo = function (j, q, m, n, G, W, k, T, b) {
    var c = j >>> 16,
      a = j & 65535,
      f = c - (m >>> 16),
      U = a - (m & 65535),
      Z = c - (G >>> 16),
      h = a - (G & 65535),
      u = Math.sqrt(f * f + U * U) * k,
      i = Math.sqrt(Z * Z + h * h) * T;
    if (u + i >= b) return 1e9;
    var x = B.bM.aE1(q, n, W);
    return x + u + i;
  };
  B.bM.aE1 = function (j, q, m) {
    var n = j >>> 16,
      G = (j >>> 8) & 255,
      W = j & 255,
      k = q >>> 16,
      T = (q >>> 8) & 255,
      b = q & 255,
      c = m >>> 16,
      a = (m >>> 8) & 255,
      f = m & 255,
      U = B.bM.alpha(j, q, m),
      Z = n - (U * k + (1 - U) * c),
      h = G - (U * T + (1 - U) * a),
      u = W - (U * b + (1 - U) * f);
    return Math.sqrt(Z * Z + h * h + u * u);
  };
  B.bM.alpha = function (j, q, m) {
    var n = j >>> 16,
      G = (j >>> 8) & 255,
      W = j & 255,
      k = q >>> 16,
      T = (q >>> 8) & 255,
      b = q & 255,
      c = m >>> 16,
      a = (m >>> 8) & 255,
      f = m & 255,
      U = k - c,
      Z = T - a,
      h = b - f,
      u = n - c,
      i = G - a,
      x = W - f,
      X = U * U + Z * Z + h * h,
      $ = X == 0 ? 0.5 : (u * U + i * Z + x * h) / X;
    return Math.max(0, Math.min(1, $));
  };
  B.bM.asp = function (j) {};
  B.bM.a8S = function (j, q, m, n, G) {
    var W = [],
      k = q - 1,
      T = m - 1;
    for (var b = 1; b < T; b++)
      for (var c = 1; c < k; c++) {
        var y = b * q + c;
        if (
          j[y] == n &&
          (j[y - q - 1] == G ||
            j[y - q] == G ||
            j[y - q + 1] == G ||
            j[y - 1] == G ||
            j[y + 1] == G ||
            j[y + q - 1] == G ||
            j[y + q] == G ||
            j[y + q + 1] == G)
        )
          W.push(y);
      }
    return W;
  };
  B.Sm = {};
  B.Sm.aIC = function (j, q, m, n, G) {
    var W = m.r,
      k = m.$,
      T = W * k,
      b = B.Sm.aq8,
      c = B.j(T * 4),
      a;
    c.fill(255);
    var f = m,
      U = j,
      Z = q,
      h = n;
    B.ln(j, c, 0);
    a = B.IT(c, m);
    a = B.IT(a.sE, a.H);
    f = a.H;
    h = n >>> 2;
    console.log(f, h);
    U = B.j(f.C());
    B.Ih(a.sE, U, 0);
    B.ln(q, c, 0);
    a = B.IT(c, m);
    a = B.IT(a.sE, a.H);
    Z = B.j(f.C());
    B.Ih(a.sE, Z, 0);
    var u = B.Sm.a1z(U, Z, f, h, G),
      i = u[0],
      x = u[1],
      X = new hk(0, 0, f.r * 2, f.$ * 2);
    i = b(i, f, X, !0);
    i = b(i, X, m, !0);
    x = b(x, f, X, !0);
    x = b(x, X, m, !0);
    var $ = B.j(T);
    for (var y = 0; y < T; y++)
      $[y] = Math.max(
        0,
        Math.min(255, Math.floor(0.5 + (i[y] * q[y] + 255 * x[y])))
      );
    return $;
  };
  B.Sm.Zl = function (j, q, m, n) {
    q.set(j);
    B.Zl.kN(q, m, n);
  };
  B.Sm.aq8 = function (j, q, m, n) {
    var G = m.r,
      W = m.$,
      k = q.r,
      T = q.$,
      b = B.Sm.G3,
      c = new Float32Array(G * W);
    for (var a = 0; a < T; a++) {
      var f = (a + a) * G;
      for (var U = 0; U < k; U++) {
        if (!0 || U == 0 || a == 0 || U == k - 1 || a == T - 1)
          c[f] = c[f + 1] = c[f + G] = c[f + G + 1] = j[a * k + U];
        else {
          c[f] = b(U + 0.25, a + 0.25, j, k, T);
          c[f + 1] = b(U + 0.75, a + 0.25, j, k, T);
          c[f + G] = b(U + 0.25, a + 0.75, j, k, T);
          c[f + G + 1] = b(U + 0.75, a + 0.75, j, k, T);
        }
        f += 2;
      }
    }
    return c;
  };
  B.Sm.G3 = function (j, q, m, n, G) {
    j -= 0.499999;
    q -= 0.499999;
    var W = Math.floor(j),
      k = Math.floor(q),
      T = k * n + W,
      b = j - W,
      c = q - k,
      a = (1 - c) * (1 - b),
      f = (1 - c) * b,
      U = c * (1 - b),
      Z = c * b;
    if (m[T] == null || m[T + n + 1] == null) {
      console.log(j, q, n, G);
      throw "e";
    }
    return a * m[T + 0] + f * m[T + 1] + U * m[T + n + 0] + Z * m[T + n + 1];
  };
  B.Sm.a1z = function (j, q, m, n, G) {
    var W = m.r,
      k = m.$,
      T = W * k,
      b = B.Sm.a0q,
      c = B.Sm.j,
      a = B.Sm.Zl,
      f = B.Sm.Ja,
      q = b(q, T),
      j = b(j, T),
      U = c(T);
    a(q, U, m, n);
    var Z = c(T);
    a(j, Z, m, n);
    var h = c(T);
    f(q, q, h);
    a(h, h, m, n);
    var u = c(T);
    f(q, j, u);
    a(u, u, m, n);
    var i = c(T),
      x = c(T);
    for (var y = 0; y < T; y++) {
      var X = U[y],
        $ = Z[y],
        H = h[y] - X * X,
        C = u[y] - X * $,
        l = C / (H + G),
        v = $ - l * X;
      i[y] = l;
      x[y] = v;
    }
    var K = c(T);
    a(i, K, m, n);
    var S = c(T);
    a(x, S, m, n);
    return [K, S];
  };
  B.Sm.auh = function (j, q, m, n, G) {
    var W = m.r,
      k = m.$,
      T = W * k,
      b = B.Sm.aq8,
      c = Date.now(),
      a = !1,
      f = m,
      U = j,
      Z = q,
      h = n;
    f = new hk(0, 0, W >>> 2, k >>> 2);
    h = n >>> 2;
    U = B.Sm.acV(j, W, k);
    Z = B.Sm.a2i(q, W, k);
    if (a) console.log(Date.now() - c);
    c = Date.now();
    var u = B.Sm.aKo(U, Z, f, h, G),
      i = u[0],
      x = u[1],
      X = u[2],
      $ = u[3];
    if (a) console.log(Date.now() - c);
    c = Date.now();
    var H = B.j(T);
    for (var C = 0; C < k; C++)
      for (var l = 0; l < W; l++) {
        var y = C * W + l,
          v = (C >>> 2) * (W >>> 2) + (l >>> 2),
          K = y << 2,
          S = i[v] * q[K] + x[v] * q[K + 1] + X[v] * q[K + 2] + $[v] * 255;
        H[y] = Math.max(0, Math.min(255, ~~(0.5 + S)));
      }
    if (a) console.log(Date.now() - c);
    c = Date.now();
    return H;
  };
  B.Sm.acV = function (j, q, m) {
    var n = q >>> 2,
      G = m >>> 2,
      W = B.j(n * G);
    for (var k = 0; k < G; k++)
      for (var T = 0; T < n; T++) W[k * n + T] = j[(k * q + T) << 2];
    return W;
  };
  B.Sm.a2i = function (j, q, m) {
    var n = q >>> 2,
      G = m >>> 2,
      W = B.j(n * G * 4);
    for (var k = 0; k < G; k++)
      for (var T = 0; T < n; T++) {
        var b = (k * n + T) << 2,
          c = (k * q + T) << 4;
        W[b] = j[c];
        W[b + 1] = j[c + 1];
        W[b + 2] = j[c + 2];
        W[b + 3] = j[c + 3];
      }
    return W;
  };
  B.Sm.aKo = function (j, q, m, n, G) {
    var W = m.r,
      k = m.$,
      T = W * k,
      b = B.Sm.a0q,
      c = B.Sm.j,
      a = B.Sm.Zl,
      f = B.Sm.Ja,
      j = b(j, T),
      U = new B.Rx(W * k);
    B.fV(q, U);
    var q = [b(U.o, T), b(U.i, T), b(U.X, T)],
      Z = B.Sm.acX(j, q, m, n, G),
      h = c(T);
    a(j, h, m, n);
    var u = c(T);
    f(q[0], j, u);
    a(u, u, m, n);
    var i = c(T);
    f(q[1], j, i);
    a(i, i, m, n);
    var x = c(T);
    f(q[2], j, x);
    a(x, x, m, n);
    var X = c(T),
      $ = c(T),
      H = c(T),
      C = c(T);
    for (var y = 0; y < T; y++) {
      var l = h[y],
        v = Z.Ee[y],
        K = Z.wR[y],
        S = Z._T[y],
        o = u[y] - v * l,
        V = i[y] - K * l,
        P = x[y] - S * l;
      X[y] = Z.awS[y] * o + Z.JB[y] * V + Z.BP[y] * P;
      $[y] = Z.JB[y] * o + Z.a09[y] * V + Z.Ah[y] * P;
      H[y] = Z.BP[y] * o + Z.Ah[y] * V + Z.atS[y] * P;
      C[y] = l - X[y] * v - $[y] * K - H[y] * S;
    }
    a(X, X, m, n);
    a($, $, m, n);
    a(H, H, m, n);
    a(C, C, m, n);
    return [X, $, H, C];
  };
  B.Sm.acX = function (j, q, m, n, G) {
    var W = m.r,
      k = m.$,
      T = W * k,
      b = B.Sm.j,
      c = B.Sm.Zl,
      a = B.Sm.Ja,
      f = {};
    f.Ee = b(T);
    c(q[0], f.Ee, m, n);
    f.wR = b(T);
    c(q[1], f.wR, m, n);
    f._T = b(T);
    c(q[2], f._T, m, n);
    var U = b(T);
    a(q[0], q[0], U);
    c(U, U, m, n);
    var Z = b(T);
    a(q[0], q[1], Z);
    c(Z, Z, m, n);
    var h = b(T);
    a(q[0], q[2], h);
    c(h, h, m, n);
    var u = b(T);
    a(q[1], q[1], u);
    c(u, u, m, n);
    var i = b(T);
    a(q[1], q[2], i);
    c(i, i, m, n);
    var x = b(T);
    a(q[2], q[2], x);
    c(x, x, m, n);
    f.awS = U;
    f.JB = Z;
    f.BP = h;
    f.a09 = u;
    f.Ah = i;
    f.atS = x;
    for (var y = 0; y < T; y++) {
      var X = f.Ee[y],
        $ = f.wR[y],
        H = f._T[y],
        C = U[y] - X * X + G,
        l = Z[y] - X * $,
        v = h[y] - X * H,
        K = u[y] - $ * $ + G,
        S = i[y] - $ * H,
        o = x[y] - H * H + G,
        V = K * o - S * S,
        P = S * v - l * o,
        z = l * S - K * v,
        E = C * o - v * v,
        A = v * l - C * S,
        N = C * K - l * l,
        Q = V * C + P * l + z * v,
        e = 1 / Q;
      f.awS[y] = V * e;
      f.JB[y] = P * e;
      f.BP[y] = z * e;
      f.a09[y] = E * e;
      f.Ah[y] = A * e;
      f.atS[y] = N * e;
    }
    return f;
  };
  B.Sm.j = function (j) {
    return new Float32Array(j);
  };
  B.Sm.a0q = function (j, q) {
    var m = new Float32Array(q);
    for (var y = 0; y < q; y++) m[y] = j[y] * (1 / 255);
    return m;
  };
  B.Sm.Ja = function (j, q, m) {
    for (var y = 0; y < j.length; y++) m[y] = j[y] * q[y];
  };
  B.Is = {};
  B.Is.Au = function (j, q, m, n) {
    var G = j[q] - m[n],
      W = j[q + 1] - m[n + 1],
      k = j[q + 2] - m[n + 2];
    return Math.sqrt(G * G + W * W + k * k) * (1 / 441.7);
  };
  B.Is.getSelection = function (j, q, m) {
    var n = q * m,
      G = B.j(n),
      W = !1,
      k = Math.round(m * 0.7),
      T = 1,
      b = new Uint32Array(12),
      c = B.j(12);
    for (var a = 0; a < k; a++)
      for (var f = 0; f < q; f++) {
        if (f < T || a < T || f > q - T - 1 || a > m - T - 1) {
          var y = a * q + f,
            U = y << 2,
            Z = 0;
          if (a < T) Z = 4;
          else if (f > q - T - 1) Z = 8;
          b[Z] += j[U];
          b[Z + 1] += j[U + 1];
          b[Z + 2] += j[U + 2];
          b[Z + 3]++;
          G[y] = 255;
        }
      }
    for (var y = 0; y < 12; y += 4)
      for (var h = 0; h < 3; h++) c[y + h] = b[y + h] / b[y + 3];
    var u = new Float32Array(n);
    for (var y = 0; y < n; y++) {
      var U = y * 4,
        i = B.Is.Au(j, U, c, 0),
        x = B.Is.Au(j, U, c, 4),
        X = B.Is.Au(j, U, c, 8),
        $ = Math.max(i, Math.max(x, X));
      u[y] = i + x + X - $;
    }
    B.Is.Ny(u);
    var H = Date.now(),
      C = new Float32Array(n),
      l = [],
      v = B.j(n);
    for (var y = 0; y < 3; y++) {
      B.Ih(j, v, y);
      var K = new Uint16Array(n);
      l.push(K);
      B.Is.aAL(v, G, q, m, K);
    }
    if (W) console.log("MBD", Date.now() - H);
    H = Date.now();
    for (var y = 0; y < n; y++) C[y] = l[0][y] + l[1][y] + l[2][y];
    B.Is.Ny(C);
    for (var y = 0; y < n; y++) C[y] += 0.4 * u[y];
    var S = q >>> 1,
      k = m >>> 1,
      o = 1 / Math.sqrt(S * S + k * k);
    for (var a = 0; a < m; a++)
      for (var f = 0; f < q; f++) {
        var V = f - S,
          P = a - k,
          z = 1 - Math.sqrt(V * V + P * P) * o;
        C[a * q + f] *= z;
      }
    if (W) console.log("Centeredness", Date.now() - H);
    H = Date.now();
    for (var y = 0; y < n; y++) G[y] = C[y] * 255;
    var E = Math.round(q / 120),
      A = Math.round(E * 0.8);
    if (W) console.log(E, A);
    B.FN.SU(G, G, q, m, E + E + 1, !1);
    if (W) console.log("erosion", Date.now() - H);
    H = Date.now();
    for (var y = 0; y < n; y++) C[y] = G[y];
    B.Is.Ny(C);
    var N = B.j(256);
    for (var y = 0; y < 256; y++)
      N[y] = 256 / (1 + Math.exp(-20 * (y / 255 - 0.5)));
    for (var y = 0; y < n; y++) {
      var Q = ~~(C[y] * 255 + 0.5);
      G[y] = N[Q];
    }
    if (W) console.log("Simoid", Date.now() - H);
    H = Date.now();
    return G;
  };
  B.Is.Ny = function (j) {
    var q = j.length,
      m = 0;
    for (var y = 0; y < q; y++) m = Math.max(m, j[y]);
    var n = 1 / m;
    for (var y = 0; y < q; y++) j[y] = j[y] * n;
  };
  B.Is.aAL = function (j, q, m, n, G) {
    var W = m * n,
      k = j.slice(0),
      T = j.slice(0);
    for (var y = 0; y < W; y++) G[y] = q[y] == 255 ? 0 : 65535;
    B.Is.aDt(j, T, k, G, m, n);
    B.Is.aFw(j, T, k, G, m, n);
    B.Is.aDt(j, T, k, G, m, n);
    B.Is.aFw(j, T, k, G, m, n);
    return G;
  };
  B.Is.aDt = function (j, q, m, n, G, W) {
    for (var k = 1; k < G; k++) B.Is.tu(k, -1, j, q, m, n);
    for (var T = 1; T < W; T++) {
      B.Is.tu(T * G, -G, j, q, m, n);
      for (var k = 1; k < G; k++) {
        var y = T * G + k;
        B.Is.tu(y, -1, j, q, m, n);
        B.Is.tu(y, -G, j, q, m, n);
      }
    }
  };
  B.Is.aFw = function (j, q, m, n, G, W) {
    for (var k = G - 2; k >= 0; k--) B.Is.tu(G * W - G + k, 1, j, q, m, n);
    for (var T = W - 2; T >= 0; T--) {
      B.Is.tu(T * G + G - 1, G, j, q, m, n);
      for (var k = G - 2; k >= 0; k--) {
        var y = T * G + k;
        B.Is.tu(y, 1, j, q, m, n);
        B.Is.tu(y, G, j, q, m, n);
      }
    }
  };
  B.Is.tu = function (y, j, q, m, n, G) {
    var W = y + j,
      k = q[y],
      T = m[W],
      b = n[W];
    if (T < k) T = k;
    else if (k < b) b = k;
    var c = T - b;
    if (G[W] != 65535 && c < G[y]) {
      G[y] = c;
      m[y] = T;
      n[y] = b;
    }
  };
  B.G1 = {};
  B.G1.filter = function (j, q, m, n) {
    var G = q.r,
      W = q.$,
      k = G * W,
      T = n[0],
      b = n[1],
      c = n[2],
      a = n[3],
      f = n[4],
      U = n[5],
      Z = n[6],
      h = Date.now(),
      u = new Float32Array(G * W * 4);
    B.G1.a5y(j, G, W, u);
    var i = Math.ceil(T * Math.sqrt(-2 * Math.log(0.1))),
      x = new ArrayBuffer(k * 4),
      X = new Float32Array(x),
      $ = new Float32Array(k),
      H = new Float32Array(k);
    for (var y = 0; y < k; y++) {
      var C = y * 4;
      X[y] = u[C];
      $[y] = u[C + 1];
      H[y] = u[C + 2];
    }
    B.Zl.oY(X, q, (i * 1) / 2.4, 2);
    B.Zl.oY($, q, (i * 1) / 2.4, 2);
    B.Zl.oY(H, q, (i * 1) / 2.4, 2);
    for (var y = 0; y < k; y++) {
      var C = y * 4;
      u[C] = X[y];
      u[C + 1] = $[y];
      u[C + 2] = H[y];
    }
    var l = new Uint8Array(x);
    for (var y = 0; y < k; y++) {
      var C = y * 4,
        v = y * 4,
        X = u[C],
        $ = u[C + 1],
        H = u[C + 2],
        K = Math.sqrt((X - H) * (X - H) + 4 * $ * $),
        S = (X + H + K) * 0.5,
        o = (X + H - K) * 0.5,
        V = o - H,
        P = $,
        z = V * V + P * P;
      if (z != 0) {
        var E = Math.sqrt(z),
          A = 1 / E;
        V *= A;
        P *= A;
      }
      l[v] = 128 + 127 * V;
      l[v + 1] = 128 + 127 * P;
    }
    var N = 1.3 * b + 2,
      Q = a * (2 / 10),
      e = j.slice();
    if (fS.tx) {
      var Y = new Float32Array([1 / G, 1 / W]),
        d = fS.vK(0, G, W);
      d.set(e);
      var I = fS.vK(1, G, W);
      I.set(l);
      fS.VF(d, q);
      if (f) {
        d.w3(q);
        fS.filter.dH({ e: fS.filter.av4, Di: Y, aiZ: 1 / c, a9F: Q }, d.sR);
      }
      d.w3(q);
      fS.filter.dH({ e: fS.filter.at, ZG: I.vD, Di: Y, Gv: N, Rj: 2 }, d.sR);
      if (f) {
        d.w3(q);
        fS.filter.dH(
          { e: fS.filter.aGR, Di: Y, ak0: new Float32Array(Z), al1: U },
          d.sR
        );
      }
      d.get(m);
    } else {
      if (f) B.G1.asl(1 / c, Q, e, G, W);
      B.G1.at(e, m, l, G, W, N);
      if (f) B.G1.awY(G, W, m, Z, U);
    }
    var O = k * 4;
    for (var y = 3; y < O; y += 4) m[y] = j[y];
  };
  B.G1.at = function (j, q, m, n, G, W) {
    var k = Math.ceil(2 * W),
      T = -1 / (2 * W * W),
      b = [],
      c = 1;
    for (var y = 0; y < k + 20; y++) b[y] = Math.exp(y * y * T);
    var a = [0, 0, 0, 0];
    for (var f = 0; f < G; f++) {
      for (var U = 0; U < n; U++) {
        var Z = f * n + U,
          h = Z * 4,
          u = 1,
          i = j[h],
          x = j[h + 1],
          X = j[h + 2],
          $ = j[h + 3],
          H = (m[h] - 128) * (1 / 127),
          C = (m[h + 1] - 128) * (1 / 127),
          l = H,
          v = C,
          K = U == 0 ? 0.51 : 0.49,
          S = f == 0 ? 0.51 : 0.49;
        for (var y = 0; y < 2; y++) {
          var o = U + K,
            V = f + S,
            P = 0;
          while (P < k) {
            if (o < 0.5 || n - 0.5 < o || V < 0.5 || G - 0.5 < V) break;
            var z = ~~o,
              E = ~~V,
              A = E * n + z,
              N = A * 4,
              Q = (m[N] - 128) * (1 / 127),
              e = (m[N + 1] - 128) * (1 / 127);
            if (Q * l + e * v < 0) {
              Q = -Q;
              e = -e;
            }
            l = Q;
            v = e;
            o += c * Q;
            V += c * e;
            if (o < 0.5 || n - 0.5 < o || V < 0.5 || G - 0.5 < V) break;
            var Y = ~~o,
              d = ~~V,
              I = (d * n + Y) << 2;
            P += c;
            var O = b[~~P];
            B.B.a5U(o, V, j, n, G, a);
            i += a[0] * O;
            x += a[1] * O;
            X += a[2] * O;
            $ += a[3] * O;
            u += O;
          }
          l = -H;
          v = -C;
        }
        var s = 1 / u;
        q[h] = ~~(0.5 + i * s);
        q[h + 1] = ~~(0.5 + x * s);
        q[h + 2] = ~~(0.5 + X * s);
        q[h + 3] = ~~(0.5 + $ * s);
      }
    }
  };
  B.G1.awY = function (j, q, m, n, G) {
    for (var W = 0; W < q; W++)
      for (var k = 0; k < j; k++) {
        var T = (W * j + k) << 2,
          b = 1 + B.G1.aFj(k, W, m, j, q, n) * G;
        m[T] = Math.max(0, Math.min(255, m[T] * b));
        m[T + 1] = Math.max(0, Math.min(255, m[T + 1] * b));
        m[T + 2] = Math.max(0, Math.min(255, m[T + 2] * b));
      }
  };
  B.G1.aFj = function (j, q, m, n, G, W) {
    var k = m[(q * n + Math.max(0, j - 1)) * 4 + 3],
      T = m[(q * n + Math.min(n - 1, j + 1)) * 4 + 3],
      b = m[(Math.max(0, q - 1) * n + j) * 4 + 3],
      c = m[(Math.min(G - 1, q + 1) * n + j) * 4 + 3],
      a = 0.7,
      f = (T - k) * (1 / 255),
      U = 0.7,
      Z = (c - b) * (1 / 255),
      h = -f * U,
      u = -a * Z,
      i = a * U,
      x = Math.sqrt(h * h + u * u + i * i),
      X = 1 / x,
      $ = h * X,
      H = u * X,
      C = i * X,
      l = W[0] * $ + W[1] * H + W[2] * C;
    return l;
  };
  B.G1.asl = function (j, q, m, n, G) {
    function W(T, c, a) {
      return Math.max(c, Math.min(a, T));
    }
    for (var k = 0; k < G; k++)
      for (var T = 0; T < n; T++) {
        var b = B.G1.ax6(T + 0.5, k + 0.5, j, q);
        m[(k * n + T) * 4 + 3] = Math.max(0, Math.min(255, b * 255));
      }
  };
  B.G1.ax6 = function (j, q, m, n) {
    function G(v, K, S) {
      return (1 - S) * v + S * K;
    }
    var W = (j + 613) * m,
      k = (q + 117) * m,
      T = ~~W,
      b = ~~k,
      c = W - T,
      a = k - b,
      f = Math.sin(11),
      U = Math.cos(T) * f,
      Z = Math.cos(T + 1) * f,
      h = Math.cos(b) * f,
      u = Math.cos(b + 1) * f,
      aF = B.G1.hash(U, h),
      i = B.G1.hash(Z, h),
      x = B.G1.hash(U, u),
      X = B.G1.hash(Z, u),
      $ = G(aF, i, c),
      H = G(x, X, c),
      C = G($, H, a);
    C = C < 0.5 ? 0 : 1;
    var l = C + n * B.G1.hash(Math.cos(W) * f, Math.cos(k) * f);
    return l * (1 / 3);
  };
  B.G1.hash = function (j, q) {
    var m = Math.sin(j * 11.697096 + q * 73.32456) * 12157.47691;
    return m - Math.floor(m);
  };
  B.G1.a5y = function (j, q, m, n) {
    var G = [-1, 0, 1, -2, 0, 2, -1, 0, 1],
      W = [-1, -2, -1, 0, 0, 0, 1, 2, 1],
      k = q - 1,
      T = m - 1,
      b = q * 4;
    for (var c = 1; c < T; c++)
      for (var a = 1; a < k; a++) {
        var y = c * q + a,
          f = y * 4,
          U = B.G1.zb(j, f, b, G),
          Z = B.G1.zb(j, f, b, W),
          h = B.G1.zb(j, f + 1, b, G),
          u = B.G1.zb(j, f + 1, b, W),
          i = B.G1.zb(j, f + 2, b, G),
          x = B.G1.zb(j, f + 2, b, W);
        n[f] = U * U + h * h + i * i;
        n[f + 1] = U * Z + h * u + i * x;
        n[f + 2] = Z * Z + u * u + x * x;
      }
    B.G1.aBY(n, q, m);
  };
  B.G1.zb = function (j, q, m, n) {
    return (
      j[q - m - 4] * n[0] +
      j[q - m] * n[1] +
      j[q - m + 4] * n[2] +
      j[q - 4] * n[3] +
      j[q] * n[4] +
      j[q + 4] * n[5] +
      j[q + m - 4] * n[6] +
      j[q + m] * n[7] +
      j[q + m + 4] * n[8]
    );
  };
  B.G1.aBY = function (j, q, m) {
    function n(b, y, c) {
      var a = y * 4,
        f = c * 4;
      b[f] = b[a];
      b[f + 1] = b[a + 1];
      b[f + 2] = b[a + 2];
    }
    var G = q - 1,
      W = m - 1;
    n(j, q + 1, 0);
    n(j, 2 * q - 2, q - 1);
    for (var k = 1; k < G; k++) n(j, q + k, k);
    for (var T = 1; T < W; T++) {
      n(j, T * q + 1, T * q);
      n(j, T * q + q - 2, T * q + q - 1);
    }
    for (var k = 1; k < G; k++) n(j, (m - 2) * q + k, (m - 1) * q + k);
    n(j, (T - 2) * q + 1, (T - 1) * q);
    n(j, (T - 1) * q - 2, T * q - 1);
  };
  B.Fy = (function () {
    function j(c, a, f, U) {
      var Z = new Float32Array(c * c),
        h = c / 2;
      for (var u = 0; u < c; u++)
        for (var i = 0; i < c; i++) {
          var x = i + f - h,
            X = u + U - h;
          Z[u * c + i] = Math.max(
            0,
            Math.min(1, a + 0.5 - Math.sqrt(x * x + X * X))
          );
        }
      return Z;
    }
    var q = [],
      n = null;
    function m(c, a, f, U) {
      var Z = Math.floor(a * 10),
        h = q[Z],
        u = c * 8,
        i = u >>> 1;
      if (h == null) {
        h = q[Z] = [];
        var x = new hk(0, 0, u, u),
          X = c / 2 / (1 + 0.2 * a),
          $ = Math.floor(c * Z * 0.1);
        for (var H = 0; H < 2; H++)
          for (var C = 0; C < 2; C++) {
            var l = j(u, X, 0.25 + C * 0.5, 0.25 + H * 0.5),
              v = 0;
            B.Zl.oY(l, x, $);
            while (l[u * i + v] < 0.005) v++;
            if (v != 0) v--;
            var K = 2 * (i - v),
              S = new hk(v, v, K, K),
              o = new Float32Array(K * K);
            for (var V = 0; V < K; V++)
              for (var P = 0; P < K; P++) o[V * K + P] = l[(v + V) * u + v + P];
            h.push([o, S]);
          }
      }
      var z = Math.floor(f),
        E = Math.floor(U),
        A = f - z,
        N = U - E,
        Q = A < 0.5 ? 1 : 0,
        e = N < 0.5 ? 1 : 0;
      h = h[e * 2 + Q];
      var S = h[1].P();
      S.x += z - i;
      S.y += E - i;
      return [h[0], S];
    }
    function G(c, a, f) {
      if (n == null) {
        n = new Uint8Array(4e4);
        for (var y = 0; y < 4e4; y++)
          n[y] = Math.min(255, ~~(0.5 + 255 * B.qd(y * (1 / 255))));
      }
      var U = c.length;
      for (var y = 0; y < U; y++) {
        var Z = c[y],
          h = ~~(255 * Z);
        a[y] = (n[h] << 24) | f;
      }
    }
    function W(c, a, f, U, Z) {
      var h = a.TM(U),
        u = Math.max(0, h.x - a.x),
        i = Math.max(0, h.x - U.x),
        x = Math.max(0, h.y - a.y),
        X = Math.max(0, h.y - U.y),
        $ = h.r,
        H = h.$;
      for (var y = 0; y < H; y++) {
        var C = (x + y) * a.r + u,
          l = (X + y) * U.r + i;
        for (var v = 0; v < $; v++) {
          f[l + v] += Z * c[C + v];
        }
      }
    }
    var k = -1;
    function T(c, a, f, U, Z) {
      var h = Math.round(U[1] * a * f * 0.01),
        u = U[2],
        i = U[3],
        x = U[4],
        X = U[5],
        $ = U[6],
        H = U[7],
        C = U[8],
        l = U[9],
        v = U[10] ? U[10] : 1,
        O = !1;
      if (u != k) {
        q = [];
        k = u;
      }
      var K = Date.now(),
        S = new hk(0, 0, a, f),
        o = new b(U[0]);
      if (Z) c.fill(0);
      var V = new Float32Array(Z ? c.buffer : a * f);
      for (var y = 0; y < h; y++) {
        var P = o.get() * a,
          z = o.get() * f,
          E = o.get() * i,
          A = o.get() * u * 4,
          N = (o.get() + $) * Math.PI * 2,
          Q = o.get() * u * 4,
          e = (o.get() + 2 * $) * Math.PI * 2;
        P += l * (A * Math.cos(N) + Q * Math.cos(e));
        z += l * (A * Math.sin(N) + Q * Math.sin(e));
        if (C) z = z + $ * f * v;
        var Y = m(u, E, P, z % f),
          d = x,
          I = o.get();
        if (H)
          d = 0.5 + 0.5 * x * (0.5 + 0.5 * Math.sin((2 * $ + I) * 2 * Math.PI));
        W(Y[0], Y[1], V, S, d);
      }
      if (O) console.log(Date.now() - K, "add floats");
      K = Date.now();
      var s = new Uint8Array(V.buffer);
      G(V, new Uint32Array(s.buffer), (X.X << 16) | (X.i << 8) | X.o);
      if (O) console.log(Date.now() - K, "toInt");
      K = Date.now();
      if (!Z) {
        B.G.Jg("scrn", s, S, c, S, S, 1);
        if (O) console.log(Date.now() - K, "blendOver");
      }
    }
    function b(c) {
      this.nI = 123456789;
      this.Cx = 987654321;
      this.x7 = 4294967295;
      this.ZW(c);
    }
    b.prototype.ZW = function (y) {
      this.nI = (123456789 + y) & this.x7;
      this.Cx = (987654321 - y) & this.x7;
    };
    b.prototype.get = function () {
      this.Cx = (36969 * (this.Cx & 65535) + (this.Cx >> 16)) & this.x7;
      this.nI = (18e3 * (this.nI & 65535) + (this.nI >> 16)) & this.x7;
      var c = ((this.Cx << 16) + (this.nI & 65535)) >>> 0;
      c /= 4294967296;
      return c;
    };
    return { nQ: T };
  })();
  B.Bx = {};
  B.Bx.hI = function (j, q, m, n) {
    var G = j[q * 2],
      W = j[q * 2 + 1],
      k = j[m * 2],
      T = j[m * 2 + 1],
      b = j[n * 2],
      c = j[n * 2 + 1];
    return G * T + k * c + b * W - b * T - k * W - G * c;
  };
  B.Bx.apn = function (j, q) {
    var m = [],
      n = [],
      G = [],
      W = {};
    for (var y = 0; y < q.length; y += 3) {
      var k = ~~(y * (1 / 3)),
        T = q[y + 0],
        b = q[y + 1],
        c = q[y + 2],
        a = B.Bx.hI(j, T, b, c);
      if (a > 0) {
        var f = b;
        b = c;
        c = f;
      }
      var U = W[c + "-" + b],
        Z = W[b + "-" + T],
        h = W[T + "-" + c],
        u = [c, U, k, null],
        i = [b, Z, k, u],
        x = [T, h, k, i];
      u[3] = x;
      if (U) U[1] = u;
      if (Z) Z[1] = i;
      if (h) h[1] = x;
      W[c + "-" + T] = x;
      W[T + "-" + b] = i;
      W[b + "-" + c] = u;
      m[T] = i;
      G[y] = i;
      m[b] = u;
      G[y + 1] = u;
      m[c] = x;
      G[y + 2] = x;
      n[k] = i;
    }
    return { m$: m, T2: n, ks: G };
  };
  B.Bx.anG = function (j) {
    var q = [],
      m = j.T2;
    for (var y = 0; y < m.length; y++) {
      var n = m[y];
      q.push(n[0]);
      n = n[3];
      q.push(n[0]);
      n = n[3];
      q.push(n[0]);
    }
    return q;
  };
  B.Bx.aFk = function (j, q, m, n) {
    var G = j[q * 2],
      W = j[q * 2 + 1],
      k = j[m * 2],
      T = j[m * 2 + 1],
      b = j[n * 2],
      c = j[n * 2 + 1],
      a = k - G,
      f = T - W,
      U = b - G,
      Z = c - W,
      h = a * (G + k) + f * (W + T),
      u = U * (G + b) + Z * (W + c),
      i = 2 * (a * (c - T) - f * (b - k));
    if (Math.abs(i) < 1e-5) {
      var x = Math.min(G, k, b),
        X = Math.min(W, T, c),
        $ = (Math.max(G, k, b) - x) * 0.5,
        H = (Math.max(W, T, c) - X) * 0.5;
      return [x + $, X + H, $ * $ + H * H, 1];
    }
    var C = (Z * h - f * u) / i,
      l = (a * u - U * h) / i,
      $ = C - G,
      H = l - W;
    return [C, l, $ * $ + H * H, 0];
  };
  B.Bx.afP = function (j, q, m) {
    var n = m[1],
      G = m[3],
      W = G[3],
      k = n[3],
      T = k[3],
      b = m[2],
      c = n[2],
      a = m[0],
      f = n[0],
      U = G[0],
      Z = k[0],
      h = B.Bx.aFk(j, f, Z, U),
      u = j[a * 2] - h[0],
      i = j[a * 2 + 1] - h[1],
      x =
        u * u + i * i > h[2] &&
        h[3] == 0 &&
        B.Bx.hI(j, Z, a, U) < 0 &&
        B.Bx.hI(j, U, f, Z) < 0;
    if (x) {
      m[0] = U;
      n[0] = Z;
      m[3] = W;
      W[3] = k;
      k[3] = m;
      n[3] = T;
      T[3] = G;
      G[3] = n;
      G[2] = c;
      k[2] = b;
      q.T2[c] = T;
      q.T2[b] = W;
      q.m$[f] = k;
      q.m$[a] = G;
    }
    return x;
  };
  B.Bx.a3A = function (j, q, m) {
    var n = j[q * 2] - j[m * 2],
      G = j[q * 2 + 1] - j[m * 2 + 1];
    return Math.sqrt(n * n + G * G);
  };
  B.Bx.aqb = function (j, q, m) {
    var n = m[1],
      G = m[3],
      W = G[3],
      k,
      T,
      b = m[2],
      c,
      a = m[0],
      f = W[0],
      U = G[0],
      Z;
    if (n) {
      k = n[3];
      T = k[3];
      c = n[2];
      Z = k[0];
    }
    var h = j.length >>> 1;
    j[2 * h] = (j[2 * f] + j[2 * a]) * 0.5;
    j[2 * h + 1] = (j[2 * f + 1] + j[2 * a + 1]) * 0.5;
    if (!0) {
      var u = b,
        i = m,
        x = q.T2.length,
        X = [h, null, u, i],
        $ = [U, X, x, W];
      X[1] = $;
      var H = [h, null, x, $];
      G[3] = X;
      W[3] = H;
      W[2] = x;
      q.T2[u] = G;
      q.T2[x] = H;
      q.m$[a] = G;
      q.m$[U] = W;
      q.ks.push(X, $, H);
    }
    if (n) {
      var C = c,
        l = n,
        v = x + 1;
      (H[1] = l), (l[1] = H);
      var K = [h, null, C, l],
        S = [Z, K, v, T];
      K[1] = S;
      var o = [h, i, v, S];
      i[1] = o;
      k[3] = K;
      T[3] = o;
      T[2] = v;
      q.T2[C] = k;
      q.T2[v] = T;
      q.m$[f] = k;
      q.m$[Z] = T;
      q.ks.push(K, S, o);
    }
    q.m$[h] = i;
  };
  B.Bx.aLu = function (j, q) {
    var m = 0;
    while (!0) {
      var n = m;
      for (var y = 0; y < q.ks.length; y++) {
        var G = q.ks[y];
        if (G[1] == null) continue;
        var W = B.Bx.afP(j, q, G);
        if (W) {
          m++;
          break;
        }
      }
      if (n == m) break;
    }
    return m != 0;
  };
  B.Bx.atF = function (j, q, m, n) {
    var G = 0;
    for (var y = 0; y < n; y++) {
      var W = null,
        k = 0;
      for (var T = 0; T < q.ks.length; T++) {
        var b = q.ks[T],
          c = B.Bx.a3A(j, b[0], b[3][3][0]) * (b[1] ? 1 : 2);
        if (c > k) {
          W = b;
          k = c;
        }
      }
      if (k > m) {
        B.Bx.aqb(j, q, W);
        G++;
      }
    }
    return G != 0;
  };
  B.Bx.ayE = function (j, q) {
    var m = [],
      U = 0;
    for (var y = 0; y < j.length; y++) m.push(0);
    for (var y = 0; y < q.ks.length; y++) {
      var n = q.ks[y],
        G = n[0],
        W = n[3][3][0],
        k = j[G * 2],
        T = j[G * 2 + 1],
        b = j[W * 2],
        c = j[W * 2 + 1],
        a = k - b,
        f = T - c;
      m[G * 2] += -a;
      m[G * 2 + 1] += -f;
      m[W * 2] += a;
      m[W * 2 + 1] += f;
    }
    for (var y = 0; y < j.length; y += 2) {
      var Z = y >>> 1,
        h = q.m$[Z],
        n = h,
        u = !0;
      do {
        if (n[1] == null) {
          u = !1;
          break;
        }
        n = n[1][3];
      } while (n != h);
      if (u) {
        var i = 0.02;
        j[y] += i * m[y];
        j[y + 1] += i * m[y + 1];
        U += i * (m[y] * m[y] + m[y + 1] * m[y + 1]);
      }
    }
    return U;
  };
  B.Bx.aDy = function (j, q, m) {
    var n = B.b.RD(j),
      G = B.Bx.apn(j, q);
    B.Bx.aLu(j, G);
    for (var W = 0; W < 300; W++) {
      var k = !1,
        T = !1;
      k = B.Bx.atF(j, G, m, 5);
      if (k) T = B.Bx.aLu(j, G);
      var b = B.Bx.ayE(j, G);
      if (!k && !T && b < 1e-4) {
        break;
      }
    }
    return B.Bx.anG(G);
  };
  B.Hz = {};
  B.Hz.aDz = function (j) {
    var q = j.eg,
      m = j.L7,
      n = j.Lv,
      G = j.F_,
      W = j.dE,
      k = j.D_,
      T = j.nz,
      b = B.OC.cg,
      X,
      $,
      H = 0;
    function c(aF) {
      var dq = new Array(aF);
      for (var y = 0; y < aF; y++) dq[y] = 0;
      return dq;
    }
    var a = m.length >>> 1,
      f = c(q.Vs * 2),
      U = c(q.Vs),
      Z = c(q.Vs),
      h = Date.now();
    for (var y = 0; y < j.Gz.length; y++) {
      var u = q.aL7 + y,
        i = q.GM * (k[y * 2] + T[y * 2]),
        x = q.GM * (k[y * 2 + 1] + T[y * 2 + 1]);
      f[u * 2] = i;
      f[u * 2 + 1] = x;
      U[u] = i;
      Z[u] = x;
    }
    q.azv.es(G, q.afr.cg(f), 0.01, X, $);
    for (var y = 0; y < q.anE.ks.length; y++) {
      var C = q.anE.ks[y],
        l = C[3][3][0],
        v = C[0],
        K = C[3][0],
        S = C[1] ? C[1][3][0] : K;
      if (C[1] && l > v) continue;
      var o = m[l * 2],
        V = m[l * 2 + 1],
        P = m[v * 2],
        z = m[v * 2 + 1],
        E = G[l * 2],
        A = G[l * 2 + 1],
        N = G[v * 2],
        Q = G[v * 2 + 1],
        e = G[K * 2],
        Y = G[K * 2 + 1],
        d = G[S * 2],
        I = G[S * 2 + 1],
        O = [E, A, N, Q, e, Y];
      if (C[1]) O.push(d, I);
      var s = b(q.ai$[H], O),
        p = s[0],
        F = s[1],
        g = 1 / Math.sqrt(p * p + F * F);
      p *= g;
      F *= g;
      var w = P - o,
        r = z - V;
      U[H] = p * w + F * r;
      Z[H] = -F * w + p * r;
      H++;
    }
    var eQ = new Array(a),
      t = new Array(a);
    for (var y = 0; y < a; y++) {
      eQ[y] = W[y * 2];
      t[y] = W[y * 2 + 1];
    }
    q.anF.es(eQ, q.aEN.cg(U), 0.5);
    q.anF.es(t, q.aEN.cg(Z), 0.5);
    for (var y = 0; y < a; y++) {
      W[y * 2] = eQ[y];
      W[y * 2 + 1] = t[y];
    }
  };
  B.Hz.afC = function (j) {
    var q = j.L7,
      m = j.Lv,
      n = j.Gz,
      G = B.OC.multiply,
      W = Date.now(),
      k = B.Bx.apn(q, m),
      T = q.length >>> 1,
      b = 0,
      h = 0,
      F = 1e3;
    for (var y = 0; y < k.ks.length; y++) b += k.ks[y][1] ? 0.5 : 1;
    var c = b + n.length,
      a = [],
      f = new B.$J(c * 2, T * 2),
      U = new B.$J(c, T),
      Z = [
        [
          [-1, 0, 1, 0, 0, 0],
          [0, -1, 0, 1, 0, 0],
        ],
        [
          [-1, 0, 1, 0, 0, 0, 0, 0],
          [0, -1, 0, 1, 0, 0, 0, 0],
        ],
      ],
      u = [],
      i = [];
    for (var y = 0; y < k.ks.length; y++) {
      var x = k.ks[y],
        X = x[3][3][0],
        $ = x[0],
        H = x[3][0],
        C = x[1] ? x[1][3][0] : H;
      if (x[1] && X > $) continue;
      var l = q[X * 2],
        v = q[X * 2 + 1],
        K = q[$ * 2],
        S = q[$ * 2 + 1],
        o = q[H * 2],
        V = q[H * 2 + 1],
        P = q[C * 2],
        z = q[C * 2 + 1],
        E = [
          [l, v, 1, 0],
          [v, -l, 0, 1],
          [K, S, 1, 0],
          [S, -K, 0, 1],
          [o, V, 1, 0],
          [V, -o, 0, 1],
        ];
      if (x[1]) E.push([P, z, 1, 0], [z, -P, 0, 1]);
      var A = B.OC.up(E),
        N = G(linear.invert(G(A, E)), A);
      N.pop();
      N.pop();
      a.push(N);
      var Q = K - l,
        e = S - v,
        Y = Z[x[1] ? 1 : 0];
      Y = B.OC.mN(
        Y,
        G(
          [
            [Q, e],
            [e, -Q],
          ],
          N
        )
      );
      var d = [
          X * 2,
          X * 2 + 1,
          $ * 2,
          $ * 2 + 1,
          H * 2,
          H * 2 + 1,
          C * 2,
          C * 2 + 1,
        ],
        I = x[1] ? 8 : 6,
        O = [];
      for (var s = 0; s < I; s++) O.push([d[s], Y[0][s], Y[1][s]]);
      O.sort(function (dq, D) {
        return dq[0] - D[0];
      });
      for (var p = 0; p < 2; p++) {
        for (var s = 0; s < I; s++) {
          u[s] = O[s][0];
          i[s] = O[s][1 + p];
        }
        f.yR(i, u, I);
      }
      if (X < $) U.yR([-1, 1], [X, $], 2);
      else U.yR([1, -1], [$, X], 2);
      h++;
    }
    for (var y = 0; y < n.length; y++) {
      var g = n[y];
      f.yR([F], [g * 2], 1);
      f.yR([F], [g * 2 + 1], 1);
      U.yR([F], [g], 1);
    }
    var w = f.up(),
      r = w.Ta(w),
      eQ = U.up(),
      t = eQ.Ta(eQ);
    return {
      aL7: b,
      Vs: c,
      afr: w,
      azv: r,
      aEN: eQ,
      anF: t,
      anE: k,
      ai$: a,
      GM: F,
    };
  };
  B.Hz.abi = function (j, q, m, n, G) {
    var W = new hk(0, 0, q, m),
      k = B.j(W.C());
    B.Ih(j, k, 3);
    B.round(k, 70);
    var T = B.El(k, W),
      b = [0.1, 0.065, 0.035][n] * Math.max(T.r, T.$),
      c = G + 1,
      a = q + c * 2,
      f = m + c * 2,
      U = new hk(-c, -c, a, f),
      Z = B.j(U.C());
    B.sN(k, W, Z, U);
    var h = Z.slice(0);
    for (var u = 0; u < G; u++) {
      for (var i = 1; i < f - 1; i++) {
        for (var x = 1; x < a - 1; x++) {
          var y = i * a + x;
          h[y] = Z[y - a] | Z[y - 1] | Z[y] | Z[y + 1] | Z[y + a];
        }
      }
      var X = h;
      h = Z;
      Z = X;
    }
    var $ = lv.$H(Z, a, f, Math.round(T.C() * 5e-4)),
      H = lv.ac($),
      C = new k$(1, 0, 0, 1, -c, -c);
    for (var y = 0; y < H.length; y++) {
      var l = H[y];
      B.b.u(l.path.L, C, l.path.L);
      l.L7 = B.Hz.anl(l.path);
      l.Lv = B.b.a7F(l.L7);
      l.Lv = B.Bx.aDy(l.L7, l.Lv, b);
    }
    return H;
  };
  B.Hz.anl = function (j) {
    var q = B.b.V1(j);
    q = B.b.ax$(q, 1);
    var m = [],
      n = q.length;
    for (var y = 0; y < n; y += 2) {
      var G = q.pop(),
        W = q.pop();
      m.push(W, G);
    }
    return m;
  };
  B.Hz.aEG = function (j, q, m, n) {
    function G(K, S, o, V, P) {
      var z = P[K * 2] - P[S * 2],
        E = P[K * 2 + 1] - P[S * 2 + 1],
        A = Math.sqrt(z * z + E * E);
      if (o[K].indexOf(S) == -1) {
        o[K].push(S);
        V[K].push(A);
      }
      if (o[S].indexOf(K) == -1) {
        o[S].push(K);
        V[S].push(A);
      }
    }
    var W = j.length >>> 1,
      k = new Array(W);
    if (m.length == 0) {
      k.fill(0);
      return k;
    }
    var T = new Array(W),
      b = new Array(W);
    for (var y = 0; y < W; y++) {
      T[y] = [];
      b[y] = [];
    }
    for (var y = 0; y < q.length; y += 3) {
      G(q[y], q[y + 1], T, b, j);
      G(q[y], q[y + 2], T, b, j);
      G(q[y + 1], q[y + 2], T, b, j);
    }
    var c = new Float64Array(W * 2),
      a = new Uint32Array(W * 2);
    c.fill(1e9);
    var f = new Uint8Array(W);
    for (var U = 0; U < m.length; U++) {
      f.fill(0);
      var Z = ["---", [0, m[U]]];
      while (Z.length != 1) {
        var h = B.a8b.SJ(Z),
          u = h[0],
          i = h[1];
        if (f[i] == 1) continue;
        var x = i << 1;
        if (u < c[x]) {
          c[x + 1] = c[x];
          a[x + 1] = a[x];
          c[x] = u;
          a[x] = U;
        } else if (u < c[x + 1]) {
          c[x + 1] = u;
          a[x + 1] = U;
        }
        f[i] = 1;
        var X = T[i],
          $ = b[i];
        for (var y = 0; y < X.length; y++) {
          var H = X[y];
          if (f[H] != 1) {
            B.a8b.G2(Z, [u + $[y], H]);
          }
        }
      }
    }
    for (var y = 0; y < W; y++) {
      var x = y << 1,
        C = c[x],
        l = c[x + 1],
        v = 1 / (C + l);
      k[y] = (1 - C * v) * n[a[x]] + (1 - l * v) * n[a[x + 1]];
    }
    return k;
  };
  B.Hz.a51 = function (j) {
    var q = { RC: [], L: [] },
      m = [j];
    while (m.length != 0) {
      var n = m.pop(),
        G = n.gX;
      if (n.axt instanceof Array || n.aiq instanceof Array) {
        q.RC.push("M", "L", "L", "L", "Z");
        q.L.push(G[0], G[1], G[2], G[1], G[2], G[3], G[0], G[3]);
      } else m.push(n.axt, n.aiq);
    }
    return q;
  };
  B.Hz.pe = function (j, q, m, n, G, W, k, T, b, c, a) {
    var f = Math.round(c.length / 3),
      U = new Array(f);
    for (var y = 0; y < f; y++) U[y] = y;
    if (b)
      U.sort(function (h, u) {
        return b[c[h * 3]] - b[c[u * 3]];
      });
    for (var y = 0; y < f; y++) {
      var Z = U[y] * 3;
      B.Hz.a2J(c[Z] * 2, c[Z + 1] * 2, c[Z + 2] * 2, k, T, j, q, m, n, G, W, a);
    }
  };
  B.Hz.a2J = function (j, q, m, n, G, W, k, T, b, c, a, f) {
    var U = [j, q, m, 1.2, 1.2, 1.2, 0],
      Z = [0, 0, 0, 0],
      h = G[j],
      u = G[j + 1],
      i = G[q],
      x = G[q + 1],
      X = G[m],
      $ = G[m + 1],
      H = i - h,
      C = x - u,
      l = X - h,
      v = $ - u,
      K = H * v - l * C + 1e-9,
      S = 1 / K,
      o = Math.max(0, Math.min(k - 1, n[j])),
      V = Math.max(0, Math.min(k - 1, n[q])),
      P = Math.max(0, Math.min(k - 1, n[m])),
      z = Math.max(0, Math.min(T - 1, n[j + 1])),
      E = Math.max(0, Math.min(T - 1, n[q + 1])),
      A = Math.max(0, Math.min(T - 1, n[m + 1])),
      N = h < i ? (h < X ? j : m) : i < X ? q : m,
      Q = G[N + 1] + 0.5,
      e = Math.max(0, Math.floor(Math.min(h, i, X))),
      Y = Math.min(c, Math.ceil(Math.max(h, i, X))),
      d = Math.max(0, Math.floor(Math.min(u, x, $))),
      I = Math.min(a, Math.ceil(Math.max(u, x, $))),
      O = 1e9;
    for (var s = d; s < I; s++) {
      var p = s > Q && O != 1e9 ? O : e;
      O = 1e9;
      for (var F = p; F < Y; F++) {
        var w = F + 0.5 - h,
          r = s + 0.5 - u,
          eQ = (w * v - l * r) * S,
          t = (H * r - w * C) * S;
        if (eQ >= 0 && t >= 0 && eQ + t <= 1) {
          if (O == 1e9) O = F;
          var dq = 1 - eQ - t,
            D = o * dq + V * eQ + P * t,
            ha = z * dq + E * eQ + A * t;
          if (f) {
            var am = Math.floor(0.5 + ha) * k + Math.floor(0.5 + D),
              k4 = am << 2,
              aA = (s * c + F) << 2;
            b[aA] = W[k4];
            b[aA + 1] = W[k4 + 1];
            b[aA + 2] = W[k4 + 2];
            b[aA + 3] = W[k4 + 3];
          } else {
            B.B.a5U(D, ha, W, k, T, Z);
            B.Hz.akG(Z, b, (s * c + F) << 2);
          }
        } else if (O != 1e9) break;
      }
    }
  };
  B.Hz.akG = function (j, q, m) {
    if (j[3] > 250) {
      q[m] = ~~(0.5 + j[0]);
      q[m + 1] = ~~(0.5 + j[1]);
      q[m + 2] = ~~(0.5 + j[2]);
      q[m + 3] = ~~(0.5 + j[3]);
    } else {
      var n = q[m],
        G = q[m + 1],
        W = q[m + 2],
        k = q[m + 3],
        T = 1 - j[3] * (1 / 255);
      q[m] = ~~(0.5 + j[0] + n * T);
      q[m + 1] = ~~(0.5 + j[1] + G * T);
      q[m + 2] = ~~(0.5 + j[2] + W * T);
      q[m + 3] = ~~(0.5 + j[3] + k * T);
    }
  };
  B.Hz.a0O = (function () {
    var j = function (m, n, G, W) {
        var k = W[0],
          T = W[1],
          b = W[2],
          c = m[k + 0],
          a = m[k + 1],
          f = m[T + 0],
          U = m[T + 1],
          Z = m[b + 0],
          h = m[b + 1],
          u = f - c,
          i = U - a,
          x = Z - c,
          X = h - a,
          $ = n - c,
          H = G - a,
          C = u * X - x * i,
          l = 1 / (C + 1e-9),
          v = ($ * X - x * H) * l,
          K = (u * H - $ * i) * l;
        if (v >= 0 && K >= 0 && v + K <= 1) {
          W[3] = 1 - v - K;
          W[4] = v;
          W[5] = K;
          return 1;
        }
        return 0;
      },
      q = function (m, n, G, W) {
        var k = [0, 0, 0, 0, 0, 0];
        for (var y = 0; y < n.length; y += 3) {
          k[0] = n[y] * 2;
          k[1] = n[y + 1] * 2;
          k[2] = n[y + 2] * 2;
          if (j(m, G, W, k) == 1) return !0;
        }
        return !1;
      };
    return { acL: j, as$: q };
  })();
  B.Pu = {};
  B.Pu.axA = function (j, q, m, n) {
    j = j.slice(0);
    if (n)
      for (var y = 0; y < j.length; y += 4)
        j[y + 3] = (j[y + 3] & 254) + (n[y >>> 2] < 128 ? 0 : 1);
    else for (var y = 0; y < j.length; y += 4) j[y + 3] = j[y + 3] & 254;
    var G = B.j(q * m * 4),
      W = !1;
    B.B.fM(j, q, m, G, [m, q, 0, 1, 0, 1, 0, 0]);
    return [B.Pu.wI(j, q, m, W), B.Pu.wI(G, m, q, W)];
  };
  B.Pu.u = function (j, q) {
    var m = !1,
      n = j[0],
      G = j[1],
      W = n[1],
      k = n[2],
      T = n[3],
      b = q.r,
      c = q.$;
    if (k == b && T == c) W = W.slice(0);
    else if (T != c) {
      var a = B.j(k * c * 4);
      B.Pu.vc(G, c, a, m);
      W = B.j(k * c * 4);
      B.B.fM(a, c, k, W, [k, c, 0, 1, 0, 1, 0, 0]);
      if (k != b) {
        n = B.Pu.wI(W, k, c, m);
        W = B.j(b * c * 4);
        B.Pu.vc(n, b, W, m);
      }
    } else if (k != b) {
      W = B.j(b * T * 4);
      B.Pu.vc(n, b, W, m);
    }
    for (var y = 0; y < W.length; y += 4) if (W[y + 3] == 254) W[y + 3] = 255;
    return W;
  };
  B.Pu.wI = function (j, q, m, n) {
    var G = Date.now(),
      W = new Uint16Array(q * m),
      b = 1;
    B.Pu.aCZ(j, q, m, W);
    for (var k = 0; k < m; k++)
      for (var T = 0; T < q; T++) {
        var y = k * q + T;
        W[y] += Math.floor((65535 - W[y]) * (j[y * 4 + 3] & 1));
      }
    var c = Math.ceil(q / b),
      a = new Uint32Array(b),
      f = new Uint32Array(b),
      c = Math.floor(q / b);
    for (var U = 0; U < b; U++) f[U] = U < b - 1 ? c : q - (b - 1) * c;
    for (var k = 0; k < m; k++) {
      var y = k * q;
      for (var U = 0; U < b; U++) {
        var c = f[U];
        for (var T = 0; T < c; T++) a[U] += W[y + T];
        y += c;
      }
    }
    if (n) {
      console.log(Date.now() - G, "cost");
      G = Date.now();
    }
    var Z = new Uint32Array(q),
      h = new Uint32Array(q),
      u = new Uint32Array(q * m);
    for (var T = 0; T < q; T++) {
      u[(m - 1) * q + T] = W[(m - 1) * q + T];
    }
    for (var k = m - 2; k >= 0; k--) {
      var i = k * q;
      for (var U = 0; U < b; U++) {
        var c = f[U];
        u[i] = W[i] + Math.min(u[i + q], u[i + q + 1]);
        for (var T = 1; T < c - 1; T++) {
          var y = i + T;
          u[y] =
            W[y] + Math.min(u[y + q - 1], Math.min(u[y + q], u[y + q + 1]));
        }
        i += c - 1;
        u[i] = W[i] + Math.min(u[i + q - 1], u[i + q]);
        i++;
      }
    }
    if (n) {
      console.log(Date.now() - G, "Building M");
      G = Date.now();
    }
    function x(V, P) {
      return V < P ? V : P;
    }
    function X(y, V) {
      var P = h[y],
        z = u[V],
        E = ~~(P * z * 1e-4);
      return E;
    }
    var $ = new Uint8Array(q * m),
      H = new Uint32Array(q);
    for (var y = 0; y < q; y++) {
      Z[y] = y;
      h[y] = W[y];
    }
    for (var k = 1; k < m; k++) {
      var C = 0,
        i = k * q;
      for (var U = 0; U < b; U++) {
        var c = f[U],
          y = i;
        H[C] = X(C, y);
        var l = H[C] + X(C + 1, y + 1),
          v = X(C, y + 1) + X(C + 1, y);
        H[C + 1] = x(l, v);
        for (var T = 2; T < c; T++) {
          var y = i + T,
            K = H[C + T - 1] + X(C + T - 1, y - 1),
            S = H[C + T - 2] + X(C + T - 1, y - 2) + X(C + T - 2, y - 1);
          H[C + T] = x(K, S);
        }
        var T = c - 1;
        while (T >= 2) {
          var y = i + T,
            K = H[C + T - 1] + X(C + T - 1, y - 1),
            S = H[C + T - 2] + X(C + T - 1, y - 2) + X(C + T - 2, y - 1);
          if (H[C + T] == K) {
            $[y - q] = 1;
            T -= 1;
          } else {
            $[y - q] = 0;
            $[y - q - 1] = 2;
            T -= 2;
          }
        }
        var y = i;
        if (T == 0) {
          $[y - q] = 1;
        } else {
          if (H[C + 1] == l) {
            $[y + 1 - q] = 1;
            $[y - q] = 1;
          } else {
            $[y + 1 - q] = 0;
            $[y - q] = 2;
          }
        }
        i += c;
        C += c;
      }
      B.Pu.azK(k, q, $, W, Z, h, !0, G);
    }
    if (n) {
      console.log(Date.now() - G, "Matching");
      G = Date.now();
    }
    var o = W;
    return [UZIP.adler(j, 0, j.length), j, q, m, b, f, a, Z, h, $, o];
  };
  B.Pu.vc = function (j, q, m, n) {
    var G = j.slice(0),
      W = G.shift(),
      k = G.shift(),
      T = G.shift(),
      b = G.shift(),
      c = G.shift(),
      a = G.shift(),
      f = G.shift(),
      U = G.shift(),
      Z = G.shift().slice(0),
      h = G.shift(),
      u = G.shift(),
      i = Date.now(),
      x = Math.abs(T - q),
      X = Math.floor(x / c),
      $ = new Uint32Array(c),
      C = 0,
      l = 1e9,
      K = 0,
      S = 0,
      o = 0;
    for (var H = 0; H < c; H++) $[H] = H < c - 1 ? X : x - (c - 1) * X;
    u.fill(0);
    for (var v = 0; v < T; v++) {
      C = Math.max(C, Z[v]);
      l = Math.min(l, Z[v]);
    }
    for (var H = 0; H < c; H++) {
      var V = a[H],
        X = $[H];
      for (var P = 0; P < X; P++) {
        var z = 0,
          E = 1e9;
        for (var v = 0; v < V; v++)
          if (Z[S + v] < E) {
            E = Z[S + v];
            z = S + v;
          }
        if (q < T) Z[z] = 1e9;
        else Z[z] *= 1.2;
        if (o < T / 3) K += E;
        var A = U[z],
          N = u[A],
          Q = N < 65280 ? 65280 : N + 1;
        if (Q < 65280) throw "e";
        for (var e = 0; e < b; e++) {
          var y = e * T + A;
          u[y] = Q;
          A += h[y] - 1;
        }
        o++;
      }
      S += V;
    }
    if (n) {
      console.log(Date.now() - i, "Removing best seams");
      i = Date.now();
    }
    function Y(y, I) {
      var O = y << 2,
        s = I << 2;
      m[O] = k[s];
      m[O + 1] = k[s + 1];
      m[O + 2] = k[s + 2];
      m[O + 3] = k[s + 3];
    }
    for (var e = 0; e < b; e++) {
      var d = 0,
        y = e * T;
      for (var v = 0; v < q; v++, d++) {
        if (q < T) {
          while (u[y + d] == 65280) d++;
          Y(e * q + v, e * T + d);
        } else {
          Y(e * q + v, e * T + d);
          while (u[y + d] >= 65280) {
            u[y + d]--;
            v++;
            Y(e * q + v, e * T + d);
          }
        }
      }
    }
    if (n) {
      console.log(Date.now() - i, "Shifting image pixels");
      i = Date.now();
    }
  };
  B.Pu.azK = function (j, q, m, n, G, W) {
    var k = 0,
      y = j * q;
    while (k < q) {
      if (m[y - q] == 1) {
        W[k] = W[k] + n[y];
        k++;
        y++;
      } else {
        var T = G[k];
        G[k] = G[k + 1];
        G[k + 1] = T;
        var b = W[k];
        W[k] = W[k + 1] + n[y];
        W[k + 1] = b + n[y + 1];
        k += 2;
        y += 2;
      }
    }
  };
  B.Pu.aCZ = function (j, q, m, n) {
    function G(j, y, b) {
      var f = y << 2,
        U = b << 2,
        Z = j[f] - j[U],
        h = j[f + 1] - j[U + 1],
        u = j[f + 2] - j[U + 2];
      return Math.abs(Z) + Math.abs(h) + Math.abs(u);
    }
    for (var W = 1; W < q; W++) {
      var k = G(j, W, W - 1);
      n[W - 1] += k;
      n[W] += k;
    }
    for (var T = 1; T < m; T++) {
      var b = T * q,
        k = G(j, b, b - q);
      n[b] += k;
      n[b - q] += k;
      for (var W = 1; W < q; W++) {
        var y = T * q + W,
          c = G(j, y, y - 1),
          a = G(j, y, y - q);
        n[y - q] += a;
        n[y - 1] += c;
        n[y] += a + c;
      }
    }
    for (var T = 0; T < m; T++) {
      n[T * q] *= 2;
      n[T * q + q - 1] *= 2;
    }
    for (var y = 0; y < n.length; y++) if (n[y] == 0) n[y] = 1;
  };
  B.H8 = (function () {
    function j() {
      return 1953e6 + Math.floor(Math.random() * 999999);
    }
    function q(E, A) {
      var N = A[0] - E[0],
        Q = A[1] - E[1];
      return N * N + Q * Q;
    }
    function m(E, A, N, Q, e, Y, d, I) {
      var O = N - E,
        s = Q - A,
        p = B.b.FA(E, A, O, s, e, Y, d - e, I - Y),
        F = [E + p * O, A + p * s],
        g =
          p > 0
            ? [
                [[E, A], F, !1, 0, 1],
                [[e, Y], F, !1, 0, 5],
              ]
            : [
                [[N, Q], F, !1, 0, 1],
                [[d, I], F, !1, 0, 5],
              ];
      return g;
    }
    function n(E, A) {
      var N = m(E[0], E[1], E[2], E[3], E[6], E[7], E[4], E[5]),
        Q = m(E[0], E[1], E[6], E[7], E[2], E[3], E[4], E[5]),
        e = [N, Q],
        Y = [N[0][1], Q[0][1]];
      for (var y = 0; y < 2; y++) {
        var d = Y[1 - y],
          I = e[y];
        if (q(I[0][0], d) < q(I[1][0], d)) {
          var O = I[0];
          I[0] = I[1];
          I[1] = O;
        }
      }
      var s = [j(), 0, -1, 0, [0, 0], N[0], N[1], Q[0], Q[1]],
        p = C(s, A),
        F = p[1][0];
      s[3] = F;
      s[4] = p[0][F];
      s[5][3] = s[6][3] = p[0].indexOf(s[5][1]);
      s[7][3] = s[8][3] = p[0].indexOf(s[7][1]);
      if ((s[6][3] + 1) % 3 != s[7][3]) {
        var O = s[5];
        s[5] = s[7];
        s[7] = O;
        var O = s[6];
        s[6] = s[8];
        s[8] = O;
      }
      for (var y = 0; y < 4; y++) s[5 + y][4] = [1, 5, 7, 3][y];
      return s;
    }
    function G(E) {
      var A = E[5],
        N = E[8],
        Q = E[6],
        e = A[0],
        Y = N[0],
        d = Q[0],
        I = A[1],
        O = N[1],
        s = Y[0],
        p = Y[1],
        F = O[0] - s,
        g = O[1] - p,
        w = B.b.FA(s, p, F, g, d[0], d[1], I[0] - d[0], I[1] - d[1]);
      return [e[0], e[1], s, p, s + w * F, p + w * g, d[0], d[1]];
    }
    function W(E, A) {
      return E[0] == A[0] && E[1] == A[1];
    }
    function k(E) {
      return { 1: 0, 5: 1, 7: 2, 3: 3 }[E];
    }
    function T(E, A, N) {
      var Q = A[5 + k(E)],
        e = Q[1],
        Y = Q[0][0] - e[0],
        d = Q[0][1] - e[1],
        I = Math.sqrt(Y * Y + d * d);
      Y /= I;
      d /= I;
      for (var O = 0; O < N.length; O++) {
        var s = N[O];
        if (s[0] != A[1] && s[1] != A[0]) continue;
        for (var y = 0; y < 4; y++) {
          var p = s[5 + y],
            F = p[0];
          if (!W(e, p[1])) continue;
          var g = F[0] - e[0],
            w = F[1] - e[1];
          I = Math.sqrt(g * g + w * w);
          g /= I;
          w /= I;
          var r = g * Y + w * d;
          if (Math.abs(r - 1) < 1e-7) return !0;
        }
      }
      return !1;
    }
    function b(E, A) {
      B.B.u(E, A);
      return A;
    }
    function c(E, A) {
      var N = [];
      for (var Q = 0; Q < E.length; Q++) {
        var e = E[Q],
          Y = e[1];
        for (var d = 0; d < Y.length; d++) {
          if (A && A[Q].indexOf(d) == -1) continue;
          var I = Y[d],
            O = [],
            s = B.B.Ht(G(I), new hk(0, 0, 1, 1));
          for (var y = 1; y <= 7; y += 2) {
            O[y] = T(y, I, Y);
          }
          if (!O[1]) {
            if (!O[7]) N.push([b(s, [0, 0]), Q, d, 0]);
            N.push([b(s, [0.5, 0]), Q, d, 1]);
          }
          if (!O[3]) {
            if (!O[1]) N.push([b(s, [1, 0]), Q, d, 2]);
            N.push([b(s, [1, 0.5]), Q, d, 3]);
          }
          if (!O[5]) {
            if (!O[3]) N.push([b(s, [1, 1]), Q, d, 4]);
            N.push([b(s, [0.5, 1]), Q, d, 5]);
          }
          if (!O[7]) {
            if (!O[5]) N.push([b(s, [0, 1]), Q, d, 6]);
            N.push([b(s, [0, 0.5]), Q, d, 7]);
          }
        }
      }
      return N;
    }
    function a(E) {
      var A = E.length - 2,
        N = 0;
      for (var y = 0; y < A; y += 2)
        N += (E[y + 2] - E[y]) * (E[y + 1] + E[y + 3]);
      N += (E[0] - E[A]) * (E[A + 1] + E[1]);
      return -N * 0.5;
    }
    function f(E, A, N, Q) {}
    function U(E, y) {
      var A = E[(y + 2) & 7] - E[y & 7],
        N = E[(y + 3) & 7] - E[(y + 1) & 7],
        Q = 1 / Math.sqrt(A * A + N * N);
      return [A * Q, N * Q];
    }
    function Z(E) {
      var A = E[2];
      E[2] = E[6];
      E[6] = A;
      var A = E[3];
      E[3] = E[7];
      E[7] = A;
    }
    function h(E, A, N, Q) {
      if (Q == null) Q = 0;
      var e = A[1],
        Y = G(A),
        w = null,
        r,
        D,
        ha,
        a7,
        b0,
        g,
        e1;
      if (e == 0) {
        if (a(Y) < 0) Z(Y);
        var d = 6,
          I = Y[7] + Y[1];
        for (var y = 0; y < 6; y += 2) {
          var O = Y[y + 1] + Y[y + 3];
          if (O < I) {
            I = O;
            d = y;
          }
        }
        Y = Y.slice(d).concat(Y.slice(0, d));
        var s = L.xC.kQ(Y, N[0], N[1]),
          p = Math.sqrt(q(Y, Y.slice(2))),
          F = Math.sqrt(q(Y.slice(4), Y.slice(6))),
          g = (p + F) * 0.5;
        return [Y, new hk(0, 0, g, g / s)];
      }
      for (var y = 0; y < E.length && w == null; y++) {
        r = E[y][1];
        for (var eQ = 0; eQ < r.length && w == null; eQ++)
          if (r[eQ][0] == e) w = r[eQ];
      }
      var t = h(E, w, N, Q + 1),
        dq = t[0];
      t = t[1];
      for (var y = 0; y < 8; y += 2) {
        var am = dq[y & 7],
          k4 = dq[(y + 1) & 7],
          aA = dq[(y + 2) & 7],
          ex = dq[(y + 3) & 7];
        for (var eQ = 0; eQ < 8; eQ += 2) {
          var ac = Y[eQ],
            eJ = Y[eQ + 1],
            h$ = Y[(eQ + 2) & 7],
            da = Y[(eQ + 3) & 7],
            bb =
              Math.abs(B.b.tj(am, k4, aA, ex, ac, eJ)) +
              Math.abs(B.b.tj(am, k4, aA, ex, h$, da));
          if (bb <= 30) {
            D = eQ;
            ha = y;
          }
        }
      }
      var gb = U(dq, ha),
        fM = U(Y, D),
        kS = gb[0] - fM[0],
        cY = gb[1] - fM[1],
        cS = kS * kS + cY * cY;
      if (cS < 0.001) {
        Z(Y);
        D = { 0: 6, 2: 4, 4: 2, 6: 0 }[D];
      }
      while (D != ((ha + 4) & 7)) {
        Y.unshift(Y.pop());
        D = (D + 1) & 7;
      }
      var s = L.xC.kQ(Y, N[0], N[1]),
        k3 = B.B.Ht(dq, t);
      k3 = B.B.BR(k3);
      var di = [Y[D], Y[D + 1], Y[(D + 2) & 7], Y[(D + 3) & 7]];
      B.B.u(k3, di);
      var l2 = B.b.RD(di);
      if (ha == 0 || ha == 4) {
        g = l2.r;
        e1 = g / s;
        a7 = l2.x;
        b0 = l2.y + (ha == 0 ? -e1 : 0);
      } else {
        e1 = l2.$;
        g = e1 * s;
        b0 = l2.y;
        a7 = l2.x + (ha == 6 ? -g : 0);
      }
      return [Y, new hk(a7, b0, g, e1)];
    }
    function u(E, A) {
      function N(F, g, w, r) {
        var eQ = b(F, [g, w]);
        eQ.push(r);
        return eQ;
      }
      var Q = [];
      for (var e = 0; e < E.length; e++) {
        var Y = E[e],
          d = Y[1];
        for (var I = 0; I < d.length; I++) {
          var O = d[I],
            s = h(E, O, A),
            p = s[0],
            F = B.B.Ht(p, new hk(0, 0, 1, 1));
          Q.push(N(F, 0.5, 0, 1));
          Q.push(N(F, 1, 0.5, 3));
          Q.push(N(F, 0.5, 1, 5));
          Q.push(N(F, 0, 0.5, 7));
          Q.push(
            N(F, 0.5, 0.5, [s ? (s[1].r / s[1].$).toFixed(2) : ""].join(", "))
          );
        }
      }
      return Q;
    }
    function i(E, A, N, Q) {
      var e = [A],
        Y = [A];
      while (!0) {
        var d = [];
        for (var y = 0; y < E.length; y++) {
          var I = E[y],
            O = !1;
          for (var s = 0; s < e.length; s++) {
            if (I[1] == E[e[s]][0] || I[0] == E[e[s]][1]) d.push(y);
          }
        }
        var p = e.length;
        for (var y = 0; y < d.length; y++) {
          var F = d[y],
            I = E[F];
          if (Y.indexOf(F) != -1) continue;
          Y.push(F);
          var g = h([[10, E]], I, Q);
          if (g[1].C2(N)) e.push(F);
        }
        if (p == e.length) break;
      }
      return e;
    }
    function x(E, A, N) {
      var Q = N[0],
        e = N[1],
        Y = A.x - E[0],
        d = A.y - E[1],
        I = B.b.FA(E[0], E[1], Y, d, e[0], e[1], Q[0] - e[0], Q[1] - e[1]);
      return [E[0] + I * Y, E[1] + I * d];
    }
    function X(E, A, N) {
      E = B.S(E);
      var Q = E[A[1]][1][A[2]],
        e = A[3] >= 8,
        Y = A[3] & 7;
      if ((Y & 1) == 0) return E;
      var d = k(Y);
      if (Y == 1 || Y == 7) {
        var I = Q[5 + d],
          O = Q[5 + 2 - d],
          s = Q[5 + (Y == 1 ? 3 : 1)],
          p = Q[5 + (Y == 1 ? 1 : 3)],
          F = I[1],
          g = x(F, N, O);
        if (!e && q(g, O[1]) < q(p[0], O[1])) return E;
        I[0] = O[0] = g;
        s[0] = x(F, N, s);
      } else {
        var s = Q[5 + d],
          F = s[1],
          I = Q[5 + (Y == 3 ? 0 : 2)],
          g = x(F, N, I);
        if (!e && q(g, I[1]) > q(I[0], I[1])) return E;
        if (Math.sign(I[1][0] - I[0][0]) != Math.sign(I[1][0] - g[0])) return E;
        s[0] = g;
      }
      return E;
    }
    function $(E, A, N) {
      var Q = A[0] - E[0],
        e = A[1] - E[1],
        Y = B.b.FA(N[0], N[1], -e, Q, E[0], E[1], Q, e);
      return [N[0] - e * Y, N[1] + Q * Y];
    }
    function H(E, A, N) {
      var Q = N[0],
        e = N[1],
        b = $(E, A, N),
        Y = b[0],
        d = b[1],
        I = $(E, N, A),
        O = B.b.FA(Y, d, Q - Y, e - d, A[0], A[1], I[0] - A[0], I[1] - A[1]);
      return [Y + (Q - Y) * O, d + (e - d) * O];
    }
    function C(E, A) {
      var N = E[5][1],
        Q = E[7][1],
        e = H(N, Q, A),
        Y = [N, Q, e];
      Y.sort(function (O, s) {
        return O[0] - s[0];
      });
      if (a([Y[0][0], Y[0][1], Y[1][0], Y[1][1], Y[2][0], Y[2][1]]) < 0) {
        var d = Y[1];
        Y[1] = Y[2];
        Y[2] = d;
      }
      var I = [Y.indexOf(N), Y.indexOf(Q), Y.indexOf(e)];
      return [Y, I];
    }
    function l(E, A, N) {
      E = B.S(E);
      var Q = A[1],
        e = E[Q][1][A[2]],
        Y = A[3];
      if ((Y & 1) != 1) return E;
      var d = C(e, N),
        I = d[1][2],
        O = d[0][I],
        s = B.S(e);
      E[Q][1].push(s);
      s[0] = j();
      s[1] = e[0];
      s[2] = -10 + Y;
      s[3] = I;
      s[4] = O;
      if (Y == 1 || Y == 5) {
        s[7][3] = s[8][3] = I;
        s[7][1] = s[8][1] = O;
        if (Y == 5) {
          s[5][0] = s[7][0] = e[6][0];
          s[8][0] = G(e).slice(4, 6);
        }
      } else {
        s[5][3] = s[6][3] = I;
        s[5][1] = s[6][1] = O;
        if (Y == 3) {
          s[5][0] = s[7][0] = e[8][0];
          s[6][0] = G(e).slice(4, 6);
        }
      }
      return E;
    }
    function v(E, A, N) {
      E = B.S(E);
      var Q = A[1],
        e = E[Q][1][A[2]],
        Y = e[2] + 10,
        d = (Y + 4) & 7,
        I = Y == 1 || Y == 5,
        O = e[5 + k(I ? 7 : 1)][1],
        s = e[5 + k(d)][0],
        p = e[5 + k(Y)][0];
      e[2] = (I ? 90 : 0) + (q(s, O) < q(p, O) ? 180 : 0);
      var F = n(G(e), N);
      for (var y = 5; y < 9; y++) e[y] = F[y];
      return E;
    }
    function K(E, A, N) {
      var aF = E.length >> 1,
        Q,
        e = E[2 * aF - 3] - N,
        Y = E[2 * aF - 2] - A,
        d = E[2 * aF - 1] - N,
        I = !1,
        O = 0;
      for (var y = 0; y < aF; y++) {
        Q = Y;
        e = d;
        Y = E[2 * y] - A;
        d = E[2 * y + 1] - N;
        if (e == d) continue;
        I = d > e;
      }
      for (var y = 0; y < aF; y++) {
        Q = Y;
        e = d;
        Y = E[2 * y] - A;
        d = E[2 * y + 1] - N;
        if (e < 0 && d < 0) continue;
        if (e > 0 && d > 0) continue;
        if (Q < 0 && Y < 0) continue;
        if (e == d && Math.min(Q, Y) <= 0) return !0;
        if (e == d) continue;
        var s = Q + ((Y - Q) * -e) / (d - e);
        if (s == 0) return !0;
        if (s > 0) O++;
        if (e == 0 && I && d > e) O--;
        if (e == 0 && !I && d < e) O--;
        I = d > e;
      }
      return (O & 1) == 1;
    }
    function S(E, A, N, Q, e) {
      var Y = null;
      for (var d = 0; d < E.length; d++) {
        var I = E[d][1];
        for (var O = 0; O < I.length; O++) {
          var s = G(I[O]);
          if (K(s, A, N) || (e && e[0] == d && e[1] == O && Y == null)) {
            Y = [d, O];
            if (Q) {
              var p = h(E, I[O], Q),
                F = B.B.Ht(p[0], p[1]),
                g = [A, N];
              F = B.B.BR(F);
              B.B.u(F, g);
              Y.push(g);
            }
          }
        }
      }
      return Y;
    }
    function o(E, A) {
      for (var N = 0; N < E.length; N++) {
        var Q = E[N][1],
          e = A[N];
        if (e.length == 0) continue;
        var Y = V(Q, e);
        for (var d = 0; d < Q.length; d++) {
          if (Y.indexOf(Q[d][0]) != -1) {
            Q.splice(d, 1);
            d--;
          }
        }
      }
      for (var N = 0; N < E.length; N++)
        if (E[N][1].length == 0) {
          E.splice(N, 1);
          N--;
        }
      return E;
    }
    function V(E, A) {
      var N = [];
      for (var y = 0; y < 10; y++)
        for (var Q = 0; Q < E.length; Q++) {
          var e = E[Q];
          if (A.indexOf(Q) != -1 || N.indexOf(e[1]) != -1)
            if (N.indexOf(e[0]) == -1) N.push(e[0]);
        }
      return N;
    }
    function P(E) {
      var A = M.IH(E, 0, E.length),
        N = A.split("\n").slice(1);
      function Q() {
        return parseFloat(N.shift());
      }
      function e() {
        var ac = [Q(), Q()];
        Y(1);
        return ac;
      }
      function Y(aF) {
        for (var y = 0; y < aF; y++) N.shift();
      }
      var d = [],
        I = Q();
      for (var O = 0; O < I; O++) {
        var s = Q(),
          p = Q(),
          F = [];
        d.push([s, F]);
        for (var g = 0; g < p; g++) {
          var w = Q(),
            r = Q(),
            eQ = Q(),
            t = Q(),
            dq = e(),
            D = [w, r, eQ, t, dq];
          F.push(D);
          for (var y = 0; y < 4; y++) {
            var ha = e(),
              am = e(),
              k4 = Q() == 1,
              aA = Q(),
              ex = Q();
            D.push([ha, am, k4, aA, ex]);
          }
        }
      }
      return d;
    }
    function z(E) {
      function A(p) {
        N.push(p[0], p[1], "");
      }
      var N = ["tNaF203"];
      N.push(E.length);
      for (var Q = 0; Q < E.length; Q++) {
        N.push(E[Q][0]);
        var e = E[Q][1];
        N.push(e.length);
        for (var Y = 0; Y < e.length; Y++) {
          var d = e[Y];
          N.push(d[0], d[1], d[2], d[3]);
          A(d[4]);
          for (var y = 0; y < 4; y++) {
            var I = d[5 + y];
            A(I[0]);
            A(I[1]);
            N.push(I[2] ? 1 : 0, I[3], I[4]);
          }
        }
      }
      var O = N.join("\n"),
        s = new Uint8Array(O.length);
      M.Sc(s, 0, O);
      return s;
    }
    return {
      VB: P,
      RS: z,
      aGx: G,
      ay0: n,
      Iy: c,
      aI1: X,
      ba: u,
      a3x: function (E, A) {
        return A && (A[3] & 1) == 0 && E[A[1]][1].length == 1;
      },
      I1: function (E, A) {
        return A && (A[3] & 1) == 1;
      },
      gV: h,
      aBN: l,
      aBd: v,
      a5G: o,
      yn: V,
      M7: S,
      pr: i,
    };
  })();
  B.a7P = (function () {
    var j = 0,
      q = 0,
      n = 15,
      W = 256;
    function m(a, f, U, Z, h, u) {
      var i = (h - 1) * f,
        x = u * f;
      return a[x + Z] - a[x + U - 1] - a[i + Z] + a[i + U - 1];
    }
    var G = Math.round(n / 8),
      k = [];
    function T(a, f) {
      for (var U = 0; U < f.length; U++) {
        var Z = f[U],
          h = 0,
          u = 0,
          i = a[Z.Rn],
          x = i.ef,
          X = i.GM,
          $ = i.uu;
        for (var H = -n; H <= n; H++)
          for (var C = -n; C <= n; C++) {
            var l = C + Z.at9,
              v = H + Z.aJb;
            if (C * C + H * H > n * n || l < 0 || v < 0 || l >= X || v >= X)
              continue;
            var K = x[v * X + l];
            h += C * K;
            u += H * K;
          }
        Z.Ci = Math.atan2(u, h);
      }
    }
    function b(a, f, U, Z, h) {
      var u = ~~(a + 0.5),
        i = ~~(f + 0.5);
      return m(U, Z, u - G, u + G, i - G, i + G);
    }
    function c(a, f, U, Z, h) {
      j = Z;
      q = h;
      if (k.length == 0) {
        var u = new B.G.Oy(16200817),
          $ = 8,
          H = 0;
        function i(dq) {
          var o = dq[0] - dq[2],
            V = dq[1] - dq[3];
          return o * o + V * V;
        }
        function x() {
          var dq = 0,
            D = 0;
          while (dq === 0) dq = u.get();
          while (D === 0) D = u.get();
          return Math.sqrt(-2 * Math.log(dq)) * Math.cos(2 * Math.PI * D);
        }
        var X = x,
          C = [];
        while (H != W) {
          var l = Math.max(-n, Math.min(n, X() * $)),
            v = Math.max(-n, Math.min(n, X() * $)),
            K = Math.max(-n, Math.min(n, X() * $)),
            S = Math.max(-n, Math.min(n, X() * $)),
            o = l - K,
            V = v - S,
            P = Math.sqrt(o * o + V * V);
          if (P < 3 || P > 12) continue;
          k.push(l, v, K, S);
          H++;
        }
      }
      var z = 20;
      for (var E = 0; E < f.length; E++) {
        var A = f[E],
          N = a[A.Rn],
          Q = N.CF,
          U = N.ef,
          Z = N.GM,
          h = N.uu,
          e = A.at9,
          Y = A.aJb,
          d = A.Ci,
          I = Math.cos(d),
          O = Math.sin(d),
          s = new Uint8Array(W >>> 3);
        A.SC = s;
        for (var y = 0; y < W; y++) {
          var p = y * 4,
            l = k[p + 0],
            v = k[p + 1],
            K = k[p + 2],
            S = k[p + 3],
            F = I * l - O * v,
            g = O * l + I * v,
            w = I * K - O * S,
            r = O * K + I * S,
            eQ = b(e + F, Y + g, Q, Z, h),
            t = b(e + w, Y + r, Q, Z, h);
          s[y >>> 3] |= (eQ < t ? 0 : 1) << (y & 7);
        }
      }
    }
    return { amL: T, a8y: c };
  })();
  B.adM = (function () {
    function j(q, m) {
      var n = [[9]],
        G = Date.now(),
        W = [];
      for (var k = 0; k < q.length; k++) {
        var T = q[k],
          b = T.CF,
          c = T.GM,
          a = T.uu,
          Z = 9,
          $ = 1,
          A = 24;
        if (b == null) continue;
        var f = new Float32Array(c * a),
          U = new Uint8Array(c * a),
          h = Z >>> 1,
          u = h >>> 1,
          i = Math.round(Z / 3);
        if (i != Z / 3) throw "e";
        var x = 1 / (Z * Z),
          X = 1.2 * (Z / 9);
        for (var H = h + 1; H < a - h; H += $)
          for (var C = h + 1; C < c - h; C += $) {
            var l =
                B.BM(b, c, C - u, C + u, H - h, H + h) -
                3 * B.BM(b, c, C - u, C + u, H - h + i, H + h - i),
              v =
                B.BM(b, c, C - h, C + h, H - u, H + u) -
                3 * B.BM(b, c, C - h + i, C + h - i, H - u, H + u),
              K = C - h + 1,
              S = C + h - 1,
              o = H - h + 1,
              V = H + h - 1,
              P =
                B.BM(b, c, K, C - 1, o, H - 1) +
                B.BM(b, c, C + 1, S, H + 1, V) -
                B.BM(b, c, C + 1, S, o, H - 1) -
                B.BM(b, c, K, C - 1, H + 1, V),
              z = (v * l - 0.9 * P * (0.9 * P)) * (x * x);
            f[H * c + C] = Math.abs(z);
            U[H * c + C] = z < 0 ? 0 : 1;
          }
        var E = c * $;
        for (var H = A; H < a - A; H += $)
          for (var C = A; C < c - A; C += $) {
            var y = H * c + C,
              N = f[y];
            if (N < 16) continue;
            if (f[y - $] >= N || f[y + $] >= N) continue;
            if (f[y - E - $] >= N || f[y - E] >= N || f[y - E + $] >= N)
              continue;
            if (f[y + E - $] >= N || f[y + E] >= N || f[y + E + $] >= N)
              continue;
            W.push({
              x: ~~(C * T.ua + 0.5),
              y: ~~(H * T.ua + 0.5),
              at9: C,
              aJb: H,
              Rn: k,
              K: N,
              acc: U[y],
              fO: X,
            });
          }
      }
      if (m != null) {
        W.sort(function (p, F) {
          return F.K - p.K;
        });
        W = W.slice(0, m);
      }
      return W;
      var Q = [];
      for (var y = 0; y < W.length; y++) {
        var e = !0,
          Y = W[y];
        for (var d = 0; d < W.length; d++) {
          var I = W[d];
          if (d != y && I.K > Y.K && (I.Rn == Y.Rn + 1 || I.Rn == Y.Rn - 1)) {
            var O = Y.x - I.x,
              s = Y.y - I.y;
            if (O * O + s * s < 5) {
              e = !1;
              break;
            }
          }
        }
        if (e) Q.push(Y);
      }
      console.log(W.length, Q.length);
      return Q;
    }
    return { aLr: j };
  })();
  B.Cr = {};
  B.Cr.alv = function (j) {
    var q = j.length,
      m = B.Cr.aK4(j, !1),
      G = 0,
      W = 1;
    throw "e";
    var n = [];
    for (var y = 0; y < q; y++) n[y] = B.Cr.ax5(m[y]);
    var k = j[0][1],
      T = B.Cr.match(m[G], m[W], n[W]);
    console.log(T.length);
    var b = Math.max(Math.min(T.length, 40), T.length * 0.54);
    b = Math.min(b, 200);
    var c = T.slice(0, b),
      a = B.T6.a2M(m[G], m[W], c, k.r, k.$),
      f = B.T6.ajR(a, [0, 0, 0], 1),
      U = k.r / 2,
      Z = k.$ / 2,
      h = 1 / Math.max(U, Z);
    for (var y = 0; y < 1; y++) {
      var u = c[y],
        i = m[G][u[0]],
        x = m[W][u[1]],
        X = B.T6.ap8(
          f,
          h * (i.x - U),
          h * (i.y - Z),
          h * (x.x - U),
          h * (x.y - Z)
        );
    }
    var $ = B.T6.asJ(a, k),
      H = [];
    for (var y = 0; y < 2; y++) {
      var C = $[y],
        l = [
          C[0][0],
          C[0][1],
          C[0][2],
          C[1][0],
          C[1][1],
          C[1][2],
          C[2][0],
          C[2][1],
        ],
        v = L.Dq.hG(j[y], null, l);
      H.push([v.buffer, v.H]);
    }
    return [B.Cr.aIc(H[0], H[1], m[G], m[W], c, a, $, k)];
  };
  B.Cr.LR = function (j, q) {
    var m = j.length,
      n = !1,
      G = Date.now(),
      W = B.Cr.aK4(j, !1, 1e4);
    if (n) console.log("Descriptors ready", Date.now() - G);
    G = Date.now();
    for (var y = 0; y < m; y++) {
      var k = j[y][1];
      for (var T = 0; T < W[y].length; T++) {
        W[y][T].x += k.x;
        W[y][T].y += k.y;
      }
    }
    if (n) console.log("shifted", Date.now() - G);
    G = Date.now();
    var b = [];
    for (var y = 0; y < m; y++) b[y] = B.Cr.ax5(W[y]);
    if (n) console.log("trees built", Date.now() - G);
    G = Date.now();
    var c = [];
    for (var y = 0; y < m - 1; y++)
      for (var T = y + 1; T < m; T++) {
        var a = B.Cr.match(W[y], W[T], b[T]);
        if (n) console.log("Matches found", y, T, a.length);
        a = a.slice(0, a.length >>> 1);
        if (a.length < 10) continue;
        var f = B.Cr.alU(W[y], W[T], a, 2);
        c.push([y, T, a, f]);
      }
    c.sort(function (S, o) {
      return o[2].length - S[2].length;
    });
    if (n) console.log("Matches found", Date.now() - G);
    G = Date.now();
    var U = [],
      Z = new UnionFind(m);
    for (var y = 0; y < c.length; y++) {
      var h = c[y],
        u = Z.find(h[0]),
        i = Z.find(h[1]);
      if (u != i) {
        U.push(h);
        Z.link(u, i);
      }
    }
    var x = [];
    for (var y = 0; y < m; y++) x[y] = [1, 0, 0, 0, 1, 0, 0, 0];
    var X = [0],
      $ = new Uint8Array(m);
    $[X[0]] = 1;
    while (X.length != 0) {
      var i = X.pop(),
        f = x[i],
        H = [];
      for (var y = 0; y < U.length; y++) {
        var h = U[y],
          C = h[0],
          l = h[1];
        if (C == i && $[l] == 0) {
          x[l] = B.B.J5(f, h[3]);
          X.push(l);
          $[l] = 1;
        }
        if (l == i && $[C] == 0) {
          x[C] = B.B.J5(f, B.B.BR(h[3]));
          X.push(C);
          $[C] = 1;
        }
      }
    }
    if (q == null) {
      var v = [];
      for (var y = 0; y < m; y++) v.push([x[y][2], y]);
      v.sort(function (S, o) {
        return S[0] - o[0];
      });
      q = v[v.length >>> 1][1];
    }
    var K = B.B.BR(x[q]);
    for (var y = 0; y < m; y++) x[y] = B.B.J5(x[y], K);
    if (n) console.log("Transforms reordered", Date.now() - G);
    G = Date.now();
    return x;
  };
  B.Cr.aK4 = function (j, q, m) {
    var n = [],
      G = !1;
    for (var y = 0; y < j.length; y++) {
      var W = j[y][0],
        k = j[y][1],
        T = k.r,
        b = k.$,
        c = B.j(k.C());
      B.P2(W, c);
      var a = Date.now(),
        f = B.Cr.aaD(c, k, !0);
      if (G) console.log("Pyramid built ---------------", Date.now() - a);
      a = Date.now();
      var U = B.adM.aLr(f, m);
      if (G) console.log("SURF Generation", Date.now() - a);
      a = Date.now();
      if (!q) {
        B.a7P.amL(f, U);
        if (G) console.log("ORB Orientations", Date.now() - a);
        a = Date.now();
        B.a7P.a8y(f, U, c, T, b);
        if (G) console.log("ORB Descriptors", Date.now() - a);
        a = Date.now();
      }
      n.push(U);
    }
    return n;
  };
  B.Cr.aaD = function (j, q, m) {
    var n = [],
      G = [j, q];
    B.Hn(G);
    if (m) {
      var W = B.azM(j, q),
        k = W.H,
        T = [W.sE, k];
      B.Hn(T);
    }
    for (var y = 0; y < G.length; y++) {
      var b = G[2 * y],
        c = G[2 * y + 1],
        a = c.r,
        f = c.$,
        U = Math.min(a, f);
      if (U < 30) break;
      if (U < 1600)
        n.push({ ef: b, GM: a, uu: f, ua: 1 << y, CF: B.Ry(b, a, f) });
      if (!m) continue;
      var b = T[2 * y],
        c = T[2 * y + 1],
        a = c.r,
        f = c.$,
        U = Math.min(a, f);
      if (U < 30) break;
      if (U < 1600)
        n.push({
          ef: b,
          GM: a,
          uu: f,
          ua: ((1 << y) * 3) / 2,
          CF: B.Ry(b, a, f),
        });
    }
    return n;
  };
  B.Cr.alU = function (j, q, m, n) {
    var G = Date.now(),
      W,
      k = 0,
      T = 0,
      b = m.length,
      c = new Float64Array(2);
    for (var a = 0; a < 3e3; a++) {
      var f = ~~(Math.random() * b),
        U = ~~(Math.random() * b),
        Z = ~~(Math.random() * b),
        h = ~~(Math.random() * b),
        E = 0,
        A = 0;
      if (f == U || f == Z || f == h || U == Z || U == h || Z == h) continue;
      var u = m[f],
        i = m[U],
        x = m[Z],
        X = m[h],
        $ = j[u[0]],
        H = q[u[1]],
        C = j[i[0]],
        l = q[i[1]],
        v = j[x[0]],
        K = q[x[1]],
        S = j[X[0]],
        o = q[X[1]],
        V = [$.x, $.y, C.x, C.y, v.x, v.y, S.x, S.y],
        P = [H.x, H.y, l.x, l.y, K.x, K.y, o.x, o.y],
        z = B.B.ay3(V, P);
      if (z[0] == 0 && z[1] == 0 && z[3] == 0 && z[4] == 0) continue;
      var N = b - k + 2;
      for (var y = 0; y < b && y - E < N; y++) {
        var Q = j[m[y][0]],
          e = q[m[y][1]];
        B.B.h1(e.x, e.y, z, c);
        var Y = c[0] - Q.x,
          d = c[1] - Q.y,
          I = Y * Y + d * d;
        if (I < n) {
          E++;
          A += I;
        }
      }
      if (E > k || (E == k && A < T)) {
        W = z;
        k = E;
        T = A;
      }
    }
    return W;
  };
  var d8 = new Uint8Array(256);
  for (var y = 0; y < 256; y++) {
    var c_ = 0,
      aF = y;
    while (aF != 0) {
      aF = aF & (aF - 1);
      c_++;
    }
    d8[y] = c_;
  }
  B.Cr.amT = function (j, q, m) {
    var n = 0,
      G = j.length;
    for (var y = 0; y < G && n < m; y++) n += d8[j[y] ^ q[y]];
    return n;
  };
  B.Cr.awM = function (j, q, m, top, n) {
    if (n[m] == 1) return;
    var G = B.Cr.amT(j.SC, q.SC, top[0]);
    if (G < top[0]) {
      if (G < top[2]) {
        top[0] = top[2];
        top[1] = top[3];
        top[2] = G;
        top[3] = m;
      } else {
        top[0] = G;
        top[1] = m;
      }
    }
    n[m] = 1;
  };
  B.Cr.ax5 = function (j) {
    var q = [],
      m = [],
      n = [[], []],
      G = 4;
    for (var y = 0; y < j.length; y++) (j[y].acc == 0 ? q : m).push(y);
    for (var W = 0; W < 2; W++) {
      var k = new Array(G),
        T = [],
        b = W == 0 ? q : m,
        c = b.length / 256,
        a = [];
      for (var f = 0; f < 32; f++) {
        var U = new Array(256),
          u = 0;
        for (var Z = 0; Z < 256; Z++) U[Z] = [];
        for (var Z = 0; Z < b.length; Z++) {
          var h = b[Z];
          U[j[h].SC[f]].push(h);
        }
        for (var Z = 0; Z < 256; Z++) u += Math.abs(U[Z].length - c);
        a.push([u, f, U]);
      }
      a.sort(function (i, x) {
        return i[0] - x[0];
      });
      var T = [],
        k = [];
      n[W] = [T, k];
      for (var y = 0; y < G; y++) {
        T.push(a[y][1]);
        k.push(a[y][2]);
      }
    }
    return n;
  };
  B.Cr.match = function (j, q, m) {
    var n = [],
      G = new Uint16Array(q.length);
    G.fill(65535);
    var W = new Uint8Array(q.length),
      top = new Uint32Array(4),
      k = [];
    for (var T = 0; T < j.length; T++) {
      var b = j[T],
        c = b.SC;
      top.fill(1e6);
      W.fill(0);
      var a = m[b.acc];
      for (var f = 0; f < a[1].length; f++) {
        var U = a[1][f][c[a[0][f]]];
        for (var Z = 0; Z < U.length; Z++) {
          var h = U[Z];
          B.Cr.awM(b, q[h], h, top, W);
        }
      }
      if (top[2] < 50 && top[2] < top[0] * 0.5) {
        var u = G[top[3]];
        if (u == 65535) {
          G[top[3]] = n.length;
          n.push([T, top[3], top[2]]);
        } else if (top[2] < n[u][2]) {
          n[u] = [T, top[3], top[2]];
        }
      }
    }
    n.sort(function (i, x) {
      return i[2] - x[2];
    });
    return n;
  };
  B.Cr.anN = function (j) {
    var q = new hk();
    for (var y = 0; y < j.length; y++) q = q.vd(j[y][1]);
    var m = B.j(q.C() * 4);
    for (var y = 0; y < j.length; y++)
      B.G.Jg("norm", j[y][0], j[y][1], m, q, q, 1);
    return [m, q];
  };
  B.Cr.aIc = function (j, q, m, n, G, W, k, T) {
    var b = j[1].P(),
      c = b.P();
    b.x = b.y = 0;
    var a = q[1].P(),
      f = a.P();
    a.x = a.y = 0;
    a.x = b.r;
    var U = b.vd(a),
      Z = f.y - c.y,
      h = B.j(U.C() * 4);
    B.M4(j[0], b, h, U);
    B.M4(q[0], new hk(a.x, a.y + Z, a.r, a.$), h, U);
    var u = document.createElement("canvas");
    u.width = U.r;
    u.height = U.$;
    var i = u.getContext("2d");
    i.lineWidth = 0.5;
    i.putImageData(
      new ImageData(new Uint8ClampedArray(h.buffer), U.r, U.$),
      0,
      0
    );
    if (W) {
      var x = W[0],
        X = B.OC.up(x),
        $ = b.r,
        H = T.r;
      for (var y = 0; y < G.length; y++) {
        var C = G[y],
          j = m[C[0]],
          q = n[C[1]];
        i.strokeStyle = "#" + "ff0000";
        i.beginPath();
        var l = B.T6.aBx(X, k[0], q, 0, H),
          v = B.T6.aBx(x, k[1], j, 0, H);
        i.moveTo(-c.x + l[0], -c.y + l[1]);
        i.lineTo(-c.x + l[2], -c.y + l[3]);
        i.moveTo($ - f.x + v[0], -f.y + Z + v[1]);
        i.lineTo($ - f.x + v[2], -f.y + Z + v[3]);
        i.stroke();
      }
    }
    if (G) {
      var K = G.length;
      for (var y = 0; y < K; y++) {
        var C = G[y],
          j = m[C[0]],
          q = n[C[1]];
        i.strokeStyle = "#" + "ffff00";
      }
    }
    var S = new Uint8Array(i.getImageData(0, 0, U.r, U.$).data.buffer);
    if (!1) {
      for (var o = 0; o < 2; o++) {
        var V = o == 0 ? m : n,
          P = o * b.r;
        for (var y = 0; y < V.length; y++) {
          var z = V[y],
            E = ~~z.x,
            A = ~~z.y,
            N = (A * U.r + E + P) * 4;
          S[N + 1] = S[N + 2] = z.ah6 * 60;
          S[N + 0] = 0;
          S[N + 3] = 255;
        }
      }
    }
    return [S, U];
  };
  B.vW = {};
  B.vW.list = [
    [[22, 4, 1], 0],
    [[22, 4, 0], 0],
    ["Dual Axis", 0],
    ["Diagonal", 0],
    [[22, 5, 9], 0],
    [[12, 93, 5], 0],
    [[12, 93, 2], 0],
    ["Parallel", 0],
    [[19, 0, 1], 1],
    ["Mandala", 2],
  ];
  B.vW.a66 = ["BasicPath", "Radial", "Mandala", "RectangularTile"];
  B.vW.m5 = function (j, q) {
    var m = 0.28 * 0.5,
      n = [
        { RC: ["M", "L"], L: [0.5, 0.1, 0.5, 0.9] },
        { RC: ["M", "L"], L: [0.1, 0.5, 0.9, 0.5] },
        {
          RC: ["M", "L", "M", "L"],
          L: [0.5, 0.1, 0.5, 0.9, 0.1, 0.5, 0.9, 0.5],
        },
        { RC: ["M", "L"], L: [0.1, 0.1, 0.9, 0.9] },
        {
          RC: ["M", "C", "C"],
          L: [
            0.5, 0.1, 0.4, 0.2, 0.4, 0.4, 0.5, 0.5, 0.6, 0.6, 0.6, 0.8, 0.5,
            0.9,
          ],
        },
        {
          RC: ["M", "C", "C", "C", "C"],
          L: [
            0.5,
            0.25,
            0.5 + m,
            0.25,
            0.75,
            0.5 - m,
            0.75,
            0.5,
            0.75,
            0.5 + m,
            0.5 + m,
            0.75,
            0.5,
            0.75,
            0.5 - m,
            0.75,
            0.25,
            0.5 + m,
            0.25,
            0.5,
            0.25,
            0.5 - m,
            0.5 - m,
            0.25,
            0.5,
            0.25,
          ],
        },
        null,
        {
          RC: ["M", "L", "M", "L"],
          L: [0.35, 0.1, 0.35, 0.9, 0.65, 0.1, 0.65, 0.9],
        },
      ],
      T = 0.4;
    if (n[j]) return n[j];
    if (j == 6) {
      var G =
          "m418 377c30 0 16-55-28-48-78 12-76 160 54 166 135 6 204-212 34-302-135-71-303 53-296 214 8 177 170 240 236 243",
        W = Typr.U.SVGToPath(G);
      W = { L: W.crds, RC: W.cmds };
      B.b.u(W.L, new k$(1 / 840, 0, 0, 1 / 840, 0, 0), W.L);
      return W;
    }
    var k = { RC: [], L: [] },
      b = (2 * Math.PI) / q;
    for (var y = 0; y < q; y++) {
      k.RC.push("M", "L");
      k.L.push(0.5, 0.5, 0.5 + Math.sin(y * b) * T, 0.5 - Math.cos(y * b) * T);
    }
    return k;
  };
  B.vW.Nb = function (j, q) {
    var m = Math.PI * 0.5 + Math.atan2(j.y - q.y, q.x - j.x),
      n = new k$();
    n.translate(-j.x, -j.y);
    n.rotate(-m);
    n.scale(-1, 1);
    n.rotate(m);
    n.translate(j.x, j.y);
    return n;
  };
  B.vW.ax7 = function (j, q, m) {
    var n = [new k$()];
    if (m == null) return n;
    var G = m[0],
      W = m[1],
      k = m[2];
    if (G == 0) {
      var T = B.z.in(k, !0),
        b = B.z.kH(k, 0, !0),
        c = k[b].length;
      if (T == 1) {
        if (c == 2) {
          n.push(B.vW.Nb(k[b + 1].Ii, k[b + 2].Ii));
        } else {
          var a = B.b.bh(k);
          a = B.b.ni(a);
          var f = B.b.V1(a),
            U = B.b.wB(f, j.x, j.y),
            aF = new ea(f[U * 2], f[U * 2 + 1]),
            Z = j.x - aF.x,
            h = j.y - aF.y,
            u = new ea(aF.x - h, aF.y + Z);
          n.push(B.vW.Nb(aF, u));
        }
      }
      if (T == 2) {
        var i = B.z.kH(k, 1, !0),
          x = k[i].length;
        if (c == 2 && x == 2) {
          var X = k[b + 1].Ii,
            $ = k[b + 2].Ii,
            H = k[i + 1].Ii,
            C = k[i + 2].Ii,
            l = B.b.FA(
              X.x,
              X.y,
              $.x - X.x,
              $.y - X.y,
              H.x,
              H.y,
              C.x - H.x,
              C.y - H.y
            ),
            v = B.vW.Nb(X, $);
          n.push(v);
          var K = B.vW.Nb(H, C);
          n.push(K);
          if (0 < l && l < 1) {
            v = v.P();
            v.concat(K);
            n.push(v);
          }
        } else alert("two curves");
      }
    }
    if (G == 1 || G == 2) {
      n = [];
      var S = k[3].Ii,
        o = k[4].Ii;
      for (var y = 0; y < W; y++) {
        var V = new k$();
        V.translate(-S.x, -S.y);
        V.rotate((y * Math.PI * 2) / W);
        V.translate(S.x, S.y);
        n.push(V);
        if (G == 2) {
          V = V.P();
          V.concat(B.vW.Nb(S, o));
          n.push(V);
        }
      }
    }
    if (G == 3) {
      n = [];
      for (var P = -1; P < 2; P++)
        for (var z = -1; z < 2; z++) {
          var V = new k$();
          V.translate(z * q.r, P * q.$);
          n.push(V);
        }
    }
    return n;
  };
  B.stack = {};
  B.stack.stack = function (j, q, m) {
    var n = j.length,
      G = q.length;
    if (n == 1) {
      q.set(j[0]);
      return;
    }
    if (m == "avrg" || m == "stdv" || m == "summ" || m == "vari") {
      var W = 1 / n;
      for (var y = 0; y < G; y++) {
        var k = 0;
        for (var T = 0; T < n; T++) k += j[T][y];
        var b = ~~(k * W + 0.5);
        if (m == "avrg" || (y & 3) == 3) q[y] = b;
        else if (m == "summ")
          q[y] = 255 * Math.pow(Math.min(255, k) * (1 / 255), 1 / 2.4);
        else {
          var c = 0;
          for (var T = 0; T < n; T++) {
            var a = j[T][y] - b;
            c += a * a;
          }
          var f = Math.sqrt(c * W) * (1 / 255);
          if (m == "stdv") q[y] = 255 * Math.pow(f, 1 / 2.4);
          else q[y] = 255 * Math.pow(f * f, 1 / 2.4);
        }
      }
    } else if (m == "maxx") {
      for (var y = 0; y < G; y++) {
        var U = 0;
        for (var T = 0; T < n; T++) U = Math.max(U, j[T][y]);
        q[y] = U;
      }
    } else if (m == "minn") {
      for (var y = 0; y < G; y++) {
        var U = 255;
        for (var T = 0; T < n; T++) U = Math.min(U, j[T][y]);
        q[y] = U;
      }
    } else if (m == "medn" || m == "rang") {
      var Z = function (x, X) {
          return x - X;
        },
        h = new Array(n),
        u = 0,
        i = 0;
      if ((n & 1) == 0) {
        i = n >>> 1;
        u = i - 1;
      } else {
        u = i = n >>> 1;
      }
      for (var y = 0; y < G; y++) {
        for (var T = 0; T < n; T++) h[T] = j[T][y];
        h.sort(Z);
        if (m == "medn") q[y] = (h[u] + h[i]) >>> 1;
        else q[y] = (y & 3) == 3 ? h[n - 1] : h[n - 1] - h[0];
      }
    } else console.log(m);
  };
  B.DV = {};
  B.DV.aJG = function (j, q, m, n) {
    if (n == 0) return;
    var G = Date.now(),
      W = new Uint32Array(q * m),
      k = new Uint8Array(q * m);
    while (!0) {
      k.fill(0);
      W.fill(0);
      var T = [],
        b = 0;
      for (var c = 0; c < m; c++) {
        for (var a = 0; a < q; a++) {
          var y = c * q + a;
          if (k[y] == 0) {
            var f = T.length,
              U = B.DV.sT(j, q, m, a, c, k, W, f);
            T.push([f, a, c, U[0], U[1], j[y]]);
            if (U[0] < n) b++;
          }
        }
      }
      if (b == 0) break;
      var Z = T.length,
        h = new UnionFind(Z),
        u = [];
      for (var y = 0; y < Z; y++) u.push([]);
      for (var y = 0; y < Z; y++) {
        var U = T[y],
          i = U[4],
          x = 0,
          X = 0;
        if (U[3] >= n) continue;
        var f = U[0];
        for (var $ = 0; $ < i.length; $ += 2) {
          var H = W[i[$ + 1] * q + i[$]],
            C = T[H];
          if (C[3] > X) {
            X = C[3];
            x = H;
          }
        }
        if (h.find(f) != h.find(x)) {
          h.link(f, x);
          u[f].push(x);
          u[x].push(f);
        }
      }
      var l = new Uint32Array(Z);
      l.fill(4294967295);
      var v = new Uint32Array(Z);
      for (var y = 0; y < Z; y++) {
        if (l[y] != 4294967295 || u[y].length == 0) continue;
        var K = [y],
          S = [y],
          o = y,
          V = T[y][3];
        while (S.length != 0) {
          var P = S.pop(),
            z = u[P];
          for (var $ = 0; $ < z.length; $++) {
            var E = z[$];
            if (K.indexOf(E) == -1) {
              K.push(E);
              S.push(E);
              var A = T[E];
              if (A[3] > V) {
                V = A[3];
                o = E;
              }
            }
          }
        }
        for (var $ = 0; $ < K.length; $++) {
          l[K[$]] = o;
          var N = T[o];
          v[K[$]] = j[N[2] * q + N[1]];
        }
      }
      for (var c = 0; c < m; c++)
        for (var a = 0; a < q; a++) {
          var y = c * q + a,
            Q = l[W[y]];
          if (Q != 4294967295) j[y] = v[Q];
        }
    }
  };
  B.DV.sT = function (j, q, m, n, G, W, k, T) {
    var b = [n, G],
      c = j[G * q + n],
      a = 0,
      f = [];
    W[G * q + n] = 1;
    while (b.length != 0) {
      var U = b.pop(),
        Z = b.pop(),
        y = U * q + Z;
      k[y] = T;
      a++;
      if (U != m - 1)
        if (j[y + q] == c) {
          if (W[y + q] == 0) {
            b.push(Z, U + 1);
            W[y + q] = 1;
          }
        } else f.push(Z, U + 1);
      if (U != 0)
        if (j[y - q] == c) {
          if (W[y - q] == 0) {
            b.push(Z, U - 1);
            W[y - q] = 1;
          }
        } else f.push(Z, U - 1);
      if (Z != q - 1)
        if (j[y + 1] == c) {
          if (W[y + 1] == 0) {
            b.push(Z + 1, U);
            W[y + 1] = 1;
          }
        } else f.push(Z + 1, U);
      if (Z != 0)
        if (j[y - 1] == c) {
          if (W[y - 1] == 0) {
            b.push(Z - 1, U);
            W[y - 1] = 1;
          }
        } else f.push(Z - 1, U);
    }
    return [a, f];
  };
  B.DV.adu = function (j, q, m) {
    var n = new Uint32Array(q * m);
    for (var y = 0; y < n.length; y++) n[y] = j[y];
    var G = [];
    for (var W = 0; W < m; W++) {
      for (var k = 0; k < q; k++) {
        var y = W * q + k,
          T = n[y];
        if (T < 1e3) {
          var b = B.DV.aCQ(n, q, m, k, W, 1e3 + G.length);
          G.push([k, W, T, b, 0]);
        }
      }
    }
    for (var y = 0; y < n.length; y++) n[y] -= 1e3;
    var c = new Float32Array(q * m);
    c.fill(q + m);
    for (var W = 0; W < m; W++)
      for (var k = 0; k < q; k++) {
        var y = W * q + k,
          T = n[y];
        if (k == 0 || W == 0 || n[y - 1] != T || n[y - q] != T) c[y] = 0;
        else {
          var a = Math.min(c[y], c[y - 1] + 1, c[y - q] + 1);
          if (n[y - q - 1] == T) a = Math.min(a, c[y - q - 1] + 1.414);
          c[y] = a;
        }
      }
    for (var W = m - 1; W >= 0; W--)
      for (var k = q - 1; k >= 0; k--) {
        var y = W * q + k,
          T = n[y];
        if (k == q - 1 || W == m - 1 || n[y + 1] != T || n[y + q] != T)
          c[y] = 0;
        else {
          var a = Math.min(c[y], c[y + 1] + 1, c[y + q] + 1);
          if (n[y + q + 1] == T) a = Math.min(a, c[y + q + 1] + 1.414);
          c[y] = a;
        }
      }
    for (var W = 0; W < m; W++)
      for (var k = 0; k < q; k++) {
        var y = W * q + k,
          f = G[n[y]];
        if (c[y] > f[4]) {
          f[4] = c[y];
          f[0] = k;
          f[1] = W;
        }
      }
    return G;
  };
  B.DV.aCQ = function (j, q, m, n, G, W) {
    var k = [n, G],
      T = j[G * q + n],
      b = 0;
    j[G * q + n] = 4294967295;
    while (k.length != 0) {
      var G = k.pop(),
        n = k.pop(),
        y = G * q + n;
      b++;
      j[y] = W;
      if (G < m - 1 && j[y + q] == T) {
        k.push(n, G + 1);
        j[y + q] = 4294967295;
      }
      if (G > 0 && j[y - q] == T) {
        k.push(n, G - 1);
        j[y - q] = 4294967295;
      }
      if (n > 0 && j[y - 1] == T) {
        k.push(n - 1, G);
        j[y - 1] = 4294967295;
      }
      if (n < q - 1 && j[y + 1] == T) {
        k.push(n + 1, G);
        j[y + 1] = 4294967295;
      }
    }
    return b;
  };
  B.DV.apM = function (j, q, m, n, G) {
    var W = B.DV.av0(j.buffer, q, m).JR,
      k = Date.now(),
      T = [];
    for (var y = 0; y < W.length; y++) {
      var b = W[y],
        c = 1;
      for (var a = 0; a < c; a++) T.push(b.ra);
    }
    var f = new Uint32Array(T),
      U = UPNG.quantize.getKDtree(new Uint8Array(f.buffer), n),
      Z = [
        q,
        1,
        -q,
        -1,
        q + 1,
        -q + 1,
        -q - 1,
        q - 1,
        q + q,
        2,
        -q - q,
        -2,
        q + q - 1,
        q + q + 1,
        q + 2,
        -q + 2,
        -q - q + 1,
        -q - q - 1,
        -q - 2,
        q - 2,
        q + q + 2,
        -q - q + 2 - q - q - 2,
        q + q - 2,
      ],
      h = new Uint8Array(q * m),
      u = j;
    for (var i = 0; i < m; i++)
      for (var x = 0; x < q; x++) {
        var y = (i * q + x) << 2,
          X = u[y] * (1 / 255),
          $ = u[y + 1] * (1 / 255),
          H = u[y + 2] * (1 / 255),
          C = u[y + 3] * (1 / 255),
          l = B.DV.wy(U, X, $, H, C, G);
        if (l == null) {
          var v = [],
            K = 0;
          while (K < 20) {
            var S = (i * q + x + Z[K]) << 2,
              o = u[S] * (1 / 255),
              V = u[S + 1] * (1 / 255),
              P = u[S + 2] * (1 / 255),
              z = u[S + 3] * (1 / 255),
              E = B.DV.wy(U, o, V, P, z, 0.005);
            if (E != null) {
              if (v.indexOf(E) == -1) {
                v.push(E);
                E.df = 1;
              } else E.df++;
            }
            K++;
          }
          v.sort(function (C, H) {
            return H.df - C.df;
          });
          while (v.length != 0 && v[v.length - 1].df < 3) v.pop();
          if (v.length == 0) l = B.DV.wy(U, X, $, H, C, 100);
          else if (v.length == 1) l = v[0];
          else if (v.length == 2) {
            var A = v[0],
              N = v[1],
              Q = A.est.q,
              e = N.est.q,
              Y = e[0] - Q[0],
              d = e[1] - Q[1],
              I = e[2] - Q[2],
              O = e[3] - Q[3],
              s = X - Q[0],
              p = $ - Q[1],
              F = H - Q[2],
              g = C - Q[3],
              w = Y * Y + d * d + I * I + O * O,
              r = s * s + p * p + F * F + g * g,
              eQ = (s * Y + p * d + F * I + g * O) / w,
              t = r - eQ * eQ * w;
            if (t < 0.5) l = eQ < 0.5 ? A : N;
            else {
              l = B.DV.wy(U, X, $, H, C, 100);
            }
          } else {
            var A = v[0],
              N = v[1],
              dq = v[2],
              Q = A.est.q,
              e = N.est.q,
              D = dq.est.q,
              ha = Q[0] - D[0],
              am = Q[1] - D[1],
              k4 = Q[2] - D[2],
              aA = Q[3] - D[3],
              ex = e[0] - D[0],
              ac = e[1] - D[1],
              eJ = e[2] - D[2],
              h$ = e[3] - D[3],
              da = D[0] - X,
              bb = D[1] - $,
              gb = D[2] - H,
              fM = D[3] - C,
              kS = ha * ha + am * am + k4 * k4 + aA * aA,
              cY = ha * ex + am * ac + k4 * eJ + aA * h$,
              cS = da * ha + bb * am + gb * k4 + fM * aA,
              k3 = ha * ex + am * ac + k4 * eJ + aA * h$,
              di = ex * ex + ac * ac + eJ * eJ + h$ * h$,
              a7 = da * ex + bb * ac + gb * eJ + fM * h$,
              b0 = 1 / (cY * k3 - kS * di),
              eQ = (di * cS - a7 * cY) * b0,
              e1 = (a7 * kS - cS * k3) * b0,
              l2 = 1 - eQ - e1,
              kL = Math.max(eQ, e1, l2);
            if (kL == eQ) l = A;
            else if (kL == e1) l = N;
            else l = dq;
          }
        }
        h[y >> 2] = l.ind;
      }
    return { Lv: h, JR: U[1] };
  };
  B.DV.av0 = function (j, q, m) {
    var n = [],
      G = {},
      W = q - 1,
      k = m - 1,
      T = 0,
      b = new Uint32Array(j),
      c = [
        -q - 1,
        -q,
        -q + 1,
        -1,
        1,
        q - 1,
        q,
        q + 1,
        q + q,
        2,
        -q - q,
        -2,
        q + q - 1,
        q + q + 1,
        q + 2,
        -q + 2,
        -q - q + 1,
        -q - q - 1,
        -q - 2,
        q - 2,
        q + q + 2,
        -q - q + 2 - q - q - 2,
        q + q - 2,
      ];
    for (var a = 1; a < k; a++)
      for (var f = 1; f < W; f++) {
        var U = a * q + f,
          Z = b[U],
          h = !0;
        for (var y = 0; y < 8; y++) h = h && b[U + c[y]] == Z;
        if (h) {
          T++;
          var u = G[Z];
          if (u == null) {
            G[Z] = n.length;
            n.push({ ra: Z, Jd: 1 });
          } else n[u].Jd++;
        }
      }
    return { JR: n, aeg: T };
  };
  B.DV.wy = function (j, q, m, n, G, W) {
    var k = UPNG.quantize.getNearest(j[0], q, m, n, G);
    return B.DV.a8F(k, q, m, n, G) < W ? k : null;
  };
  B.DV.a8F = function (j, q, m, n, G) {
    var W = j.est.q,
      k = q - W[0],
      T = m - W[1],
      b = n - W[2],
      c = G - W[3];
    return k * k + T * T + b * b + c * c;
  };
  (function () {
    B.DV.hu = function (T, b, c, a, f) {
      var U = T.aj,
        Z = b * c,
        h = T.l5,
        u = T.Lv,
        i = n(a, u, U, Z),
        x = new UnionFind(U),
        v = 0;
      for (var X = 1; X < c; X++)
        for (var $ = 1; $ < b; $++) {
          var y = X * b + $,
            H = u[y],
            C = 0;
          if ((C = u[y - 1]) != H && i[C] == i[H] && j(h, 0, H * 6, C * 6) < f)
            x.link(H, C);
          if ((C = u[y - b]) != H && i[C] == i[H] && j(h, 0, H * 6, C * 6) < f)
            x.link(H, C);
        }
      var l = new Uint16Array(U);
      l.fill(65535);
      var K = new Uint16Array(U);
      for (var y = 0; y < U; y++) {
        var S = x.find(y);
        if (l[S] == 65535) l[S] = v++;
        K[y] = l[S];
      }
      var o = new Uint16Array(Z);
      for (var y = 0; y < Z; y++) o[y] = K[u[y]];
      return { Lv: o, aj: v };
    };
    B.DV.I2 = function (T, b, c) {
      var a = B.j(b),
        f = T.length;
      for (var y = 0; y < f; y++) {
        var U = c[y];
        if (U == 0 || U == 255) {
          var Z = T[y],
            h = 2 - (U >>> 7),
            u = (a[Z] = a[Z] | h);
          if (u == 3) return Z;
        }
      }
      return -1;
    };
    function j(T, b, c, a) {
      var f = 1 / T[c + 5],
        U = 1 / T[a + 5],
        Z = T[c] * f - T[a] * U,
        h = T[c + 1] * f - T[a + 1] * U,
        u = T[c + 2] * f - T[a + 2] * U,
        i = T[c + 3] * f - T[a + 3] * U,
        x = T[c + 4] * f - T[a + 4] * U,
        X = Math.sqrt(Z * Z + h * h + u * u),
        $ = Math.sqrt(i * i + x * x);
      return ~~(X + b * $ + 0.5);
    }
    function q(T, b) {
      var y = 0,
        c = T.length;
      while (y != c && T[y] != b) y += 2;
      return y == c ? -1 : y;
    }
    function m(T, y) {
      if (y == T.length - 2) {
        T.pop();
        T.pop();
      } else {
        T[y + 1] = T.pop();
        T[y] = T.pop();
      }
    }
    B.DV.aGq = function (T, b, c, a, f) {
      var U = new Uint32Array(f * 4400),
        Z = [];
      for (var y = 0; y < f; y++) Z.push([]);
      for (var h = 0; h < c; h++)
        for (var u = 0; u < b; u++) {
          var y = h * b + u,
            i = y << 2,
            x = a[y],
            X = 0,
            $ = T[i] >>> 4,
            H = T[i + 1] >>> 4,
            C = T[i + 2] >>> 4;
          U[x * 4400 + (($ << 8) | (H << 4) | C)]++;
          U[x * 4400 + 4096]++;
          U[x * 4400 + 4100 + (($ << 4) | H)]++;
          U[x * 4400 + 4360 + $]++;
          if (u != 0 && (X = a[y - 1]) != x && q(Z[x], X) == -1) {
            Z[x].push(X, 0);
            Z[X].push(x, 0);
          }
          if (h != 0 && (X = a[y - b]) != x && q(Z[x], X) == -1) {
            Z[x].push(X, 0);
            Z[X].push(x, 0);
          }
        }
      for (var y = 0; y < f; y++) {
        var C = Z[y];
        for (var l = 0; l < C.length; l += 2) C[l + 1] = k(U, y, C[l]);
      }
      return [U, Z];
    };
    function n(T, b, c, a) {
      var f = B.j(c);
      for (var y = 0; y < a; y++) {
        var U = T[y];
        if (U == 0 || U == 255) f[b[y]] = 2 - (U >>> 7);
      }
      return f;
    }
    B.DV.a8J = function (T, b, c, a, f, U, Z) {
      var h = b * c,
        u = Z[0],
        i = Z[1],
        x = new UnionFind(a),
        X = n(f, T, a, h),
        $ = -1,
        H = !0,
        C = 0;
      for (var y = 0; y < a; y++)
        if (X[y] == 1) {
          if ($ == -1) $ = y;
          else x.link(y, $);
        }
      if ($ == -1) {
        for (var y = 0; y < h; y++) U[y] = f[y] == 255 ? 255 : 0;
        return;
      }
      while (H) {
        while (H) {
          H = !1;
          for (var y = 0; y < a; y++) {
            if (X[y] == 0) {
              var l = G(i[y]);
              if (X[l] == 1) {
                X[y] = X[l];
                H = !0;
                x.link(y, l);
              }
            }
          }
        }
        H = !0;
        C = 0;
        while (H) {
          H = !1;
          for (var y = 0; y < a; y++) {
            if (X[y] == 0) {
              var l = G(i[y]);
              if (X[l] == 0) {
                var v = y * 4400,
                  K = l * 4400;
                for (var S = 0; S < 4400; S += 2) {
                  u[v + S] += u[K + S];
                  u[v + S + 1] += u[K + S + 1];
                }
                W(i, u, y, l);
                C++;
                X[l] = 3;
                H = !0;
                x.link(y, l);
              }
            }
          }
        }
        H = C != 0;
      }
      var o = x.find($);
      for (var y = 0; y < a; y++) X[y] = x.find(y) == o ? 255 : 0;
      for (var y = 0; y < h; y++) {
        U[y] = X[T[y]];
      }
      for (var y = 0; y < h; y++) {
        var l = f[y];
        if (l == 0 || l == 255) U[y] = l;
      }
    };
    function G(T) {
      var b = 0,
        c = 0,
        a = T.length;
      for (var f = 0; f < a; f += 2) {
        var U = T[f + 1];
        if (U > c) {
          c = U;
          b = f;
        }
      }
      return T[b];
    }
    function W(T, b, c, a) {
      var f = T[c],
        U = T[a];
      m(f, q(f, a));
      m(U, q(U, c));
      for (var y = 0; y < U.length; y += 2) {
        var Z = U[y],
          h = T[Z];
        m(h, q(h, a));
        if (q(h, c) == -1) {
          h.push(c, 0);
          f.push(Z, 0);
        }
      }
      for (var y = 0; y < f.length; y += 2) {
        var Z = f[y],
          h = T[Z],
          u = k(b, c, Z);
        f[y + 1] = u;
        h[q(h, c) + 1] = u;
      }
    }
    function k(T, b, c) {
      var a = 0,
        f = 4096,
        U = b * 4400,
        Z = c * 4400;
      for (var h = 0; h < 16; h++) {
        if (T[U + 4360 + h] == 0 || T[Z + 4360 + h] == 0) continue;
        for (var u = 0; u < 16; u++) {
          var i = (h << 4) | u;
          if (T[U + 4100 + i] == 0 || T[Z + 4100 + i] == 0) continue;
          var x = U + (i << 4),
            X = Z + (i << 4);
          for (var y = 0; y < 16; y++) a += Math.sqrt(T[x + y] * T[X + y]);
        }
      }
      var $ = a / Math.sqrt(T[U + f] * T[Z + f]);
      return ~~(999.99999 * $);
    }
  })();
  B.DV.UY = (function () {
    var j,
      q,
      m,
      k = 0,
      T = 0;
    function n(Z, h, u) {
      var i = [],
        x = u,
        X = u,
        $ = u >>> 2;
      for (var H = 0; H < h; H++)
        for (var C = 0; C < Z; C++) {
          var l = ~~((C + 0.5) * x),
            v = ~~((H + 0.5) * X),
            K = 1e9,
            S = Math.max(0, l - $),
            o = Math.min(q, l + $ + 1),
            V = Math.max(0, v - $),
            P = Math.min(m, v + $ + 1);
          for (var z = V; z < P; z++)
            for (var E = S; E < o; E++) {
              var A = G(E, z);
              if (A < K) {
                l = E;
                v = z;
                K = A;
              }
            }
          i.push(l, v);
        }
      return i;
    }
    function G(Z, h) {
      var u = (h * q + Z) * 4,
        i = q * 4,
        x = W(u - 4, u) + W(u, u + 4),
        X = W(u - i, u) + W(u, u + i);
      return x + X;
    }
    function W(Z, h) {
      var u = j[Z] - j[h],
        i = j[Z + 1] - j[h + 1],
        x = j[Z + 2] - j[h + 2];
      return u * u + i * i + x * x;
    }
    function b(Z, h, u, i) {
      T++;
      if (i < k) k = i;
      Z[i].push(h, u);
    }
    function c(Z) {
      T--;
      while (Z[k].length == 0) k++;
    }
    function a(Z, h, u, i, x) {
      var X = (u * q + h) * 4,
        $ = i[x + 5],
        H = 1 / $,
        C = j[X] * $ - i[x],
        l = j[X + 1] * $ - i[x + 1],
        v = j[X + 2] * $ - i[x + 2],
        K = h * $ - i[x + 3],
        S = u * $ - i[x + 4],
        o = Math.sqrt(C * C + l * l + v * v),
        V = Math.sqrt(K * K + S * S);
      return ~~((o + Z * V) * H + 0.5);
    }
    function f(Z, h, u, i, x) {
      j = Z;
      q = h;
      m = u;
      k = 0;
      T = 0;
      var X = q * m,
        $ = Math.round(Math.min(q, m) / (i ? i : 30));
      if ($ == 0) $ = 1;
      var H = (x ? x : 30) / $,
        C = Math.floor(q / $),
        l = Math.floor(m / $),
        v = new Uint16Array(X);
      for (var y = 0; y < X; y++) v[y] = 65535;
      var K = n(C, l, $),
        S = K.length >>> 1;
      if (S > 65535) throw S;
      var o = new Uint32Array(S * 6),
        V = [];
      for (var y = 0; y < 1e3 + m; y++) V.push([]);
      var P = (1e3 * 700) / (q * m),
        z = Math.floor(l * P);
      z = Math.min(l, Math.max(4, z));
      z = l;
      var o = new Uint32Array(S * 6);
      for (var E = 0; E < l; E += z) {
        var A = Math.min(E + z, l);
        for (var N = E; N < A; N++)
          for (var Q = 0; Q < C; Q++) {
            var y = N * C + Q;
            b(V, (K[y * 2 + 1] << 16) | K[y * 2], y, 0);
          }
        var e = Math.min(m, A * $);
        if (E + z >= l) e = m;
        U(o, V, v, H, e);
      }
      j = null;
      return { Lv: v, aj: S, l5: o, aHK: H };
    }
    function U(Z, h, u, i, x) {
      while (T != 0) {
        c(h);
        var X = h[k].pop(),
          $ = h[k].pop(),
          H = $ >>> 16,
          C = $ & 65535,
          y = H * q + C;
        if (u[y] == null) throw "e";
        if (u[y] == 65535) {
          var l = X * 6,
            v = y << 2;
          u[y] = X;
          Z[l] += j[v];
          Z[l + 1] += j[v + 1];
          Z[l + 2] += j[v + 2];
          Z[l + 3] += C;
          Z[l + 4] += H;
          Z[l + 5]++;
          if (H != x - 1 && u[y + q] == 65535)
            b(h, ((H + 1) << 16) | C, X, a(i, C, H + 1, Z, l));
          if (H != 0 && u[y - q] == 65535)
            b(h, ((H - 1) << 16) | C, X, a(i, C, H - 1, Z, l));
          if (C != 0 && u[y - 1] == 65535)
            b(h, (H << 16) | (C - 1), X, a(i, C - 1, H, Z, l));
          if (C != q - 1 && u[y + 1] == 65535)
            b(h, (H << 16) | (C + 1), X, a(i, C + 1, H, Z, l));
        }
      }
    }
    f.Mz = function (Z, h, u, i, x, X) {
      j = Z;
      q = h;
      m = u;
      var $ = (i.aj = i.aj + 1),
        H = i.Lv,
        C = i.l5,
        l = (i.l5 = new Uint32Array($ * 6));
      l.set(C, 0);
      var v = H[x[1] * q + x[0]];
      for (var y = 0; y < H.length; y++) if (H[y] == v) H[y] = 65535;
      for (var y = 0; y < 6; y++) l[v * 6 + y] = 0;
      var K = [];
      for (var y = 0; y < 1e3 + m; y++) K.push([]);
      for (var y = 0; y < x.length; y += 2) b(K, (x[y + 1] << 16) | x[y], v, 0);
      for (var y = 0; y < X.length; y += 2)
        b(K, (X[y + 1] << 16) | X[y], $ - 1, 0);
      U(l, K, H, i.aHK, m);
      j = null;
    };
    return f;
  })();
  B.ahU = {};
  B.ahU.aDM = (function () {
    var j = 11,
      q = 7,
      m = j >>> 1,
      aF = q >>> 1,
      n = 2,
      G = 2e3 / n,
      W = [],
      T = null,
      b = "";
    function k(a, f, U) {
      var Z = (a[f + 0] - a[U + 0]) * (1 / 255),
        h = (a[f + 1] - a[U + 1]) * (1 / 255),
        u = (a[f + 2] - a[U + 2]) * (1 / 255),
        i = (a[f + 3] - a[U + 3]) * (1 / 255),
        x = Z * Z * 0.125 + h * h * 0.25 + u * u * 0.5 + i * i;
      return W[~~(x * G)];
    }
    function c(a, f, U, Z, h, u) {
      var i = Date.now(),
        x = B.j(f * U);
      B.P2(a, x);
      var X = UZIP.adler(x, 0, f * U);
      if (X != b) {
        var $ = B.Ry(x, f, U);
        T = B.j(f * U * 4);
        b = X;
        var H = [1, 1 / 9, 1 / 25, 1 / 49, 1 / 81];
        for (var C = 0; C < U; C++)
          for (var l = 0; l < f; l++)
            for (var y = 0; y < 4; y++) {
              var v = Math.max(1, l - y),
                K = Math.min(f - 1, l + y),
                S = Math.max(1, C - y),
                o = Math.min(U - 1, C + y),
                V = B.BM($, f, v, K, S, o);
              if (isNaN(V)) throw l + "," + C + "," + y + "," + V;
              T[(C * f + l) * 4 + y] = V * H[y];
            }
      }
      if (fS.tx) {
        var P = fS.vK(0, f, U);
        P.set(a);
        var z = fS.vK(1, f, U);
        z.set(T);
        var E = fS.vK(2, f, U);
        fS.VF(E);
        fS.filter.dH(
          {
            e: fS.filter.a0r,
            Di: new Float32Array([1 / f, 1 / U]),
            ab3: z.vD,
            amB: h,
            aru: u,
          },
          P.vD
        );
        E.get(Z);
      } else {
        for (var y = 0; y < 2e3; y++)
          W[y] = Math.exp(-(y / 2e3) * n * (100 + (1 - h) * (1 - h) * 1e4));
        var A = aF + 2;
        for (var C = A; C < U - A; C++)
          for (var l = A; l < f - A; l++) {
            var N = 0,
              Q = 0,
              e = 0,
              Y = 0;
            for (var d = 0; d < j; d++)
              for (var I = 0; I < j; I++) {
                var O = l + I - m,
                  s = C + d - m;
                if (
                  (O == l && s == C) ||
                  O < A ||
                  s < A ||
                  O >= f - A ||
                  s >= U - A
                )
                  continue;
                var p = k(T, (C * f + l) * 4, (s * f + O) * 4),
                  F = (s * f + O) << 2;
                N += p * a[F + 0];
                Q += p * a[F + 1];
                e += p * a[F + 2];
                Y += p;
              }
            if (Y == 0) {
              continue;
            }
            var g = 1 / Y,
              w = (C * f + l) * 4;
            Z[w + 0] = ~~((1 - u) * g * N + u * Z[w + 0]);
            Z[w + 1] = ~~((1 - u) * g * Q + u * Z[w + 1]);
            Z[w + 2] = ~~((1 - u) * g * e + u * Z[w + 2]);
          }
      }
    }
    return c;
  })();
  B.aek = (function () {
    var j = 6,
      q = j >>> 1,
      m = [
        [-0.0662912607, -0.0855816496],
        [0.1104854346, -0.0855816496],
        [0.6629126074, 0.1711632992],
        [0.6629126074, 0.1711632992],
        [0.1104854346, -0.0855816496],
        [-0.0662912607, -0.0855816496],
        [0, 0],
        [0, 0],
      ],
      n = [
        [-0.0662912607, 0.0855816496],
        [-0.1104854346, -0.0855816496],
        [0.6629126074, -0.1711632992],
        [-0.6629126074, 0.1711632992],
        [0.1104854346, 0.0855816496],
        [0.0662912607, -0.0855816496],
        [0, 0],
        [0, 0],
      ];
    function G(u, i) {
      var x = !1,
        X = u.length,
        $ = i[0],
        v = 5,
        S = 0,
        o = 0;
      for (var y = 1; y < X; y++) $ = $.vd(i[y]);
      if (($.r & 1) != 0) $.r++;
      if (($.$ & 1) != 0) $.$++;
      var H = $.r,
        C = $.$,
        l = Math.max(H, C);
      while (l >>> v > 8 && v < 10) v++;
      var K = 1 << v;
      if (H % K != 0) S = K - (H % K);
      if (C % K != 0) o = K - (C % K);
      $.Lh(S >>> 1, o >>> 1);
      H = $.r;
      C = $.$;
      if (H % K != 0 || C % K != 0) throw "e";
      var V = Date.now(),
        P = [],
        z = B.j($.C()),
        E = [],
        A = H * C,
        N = new Float32Array(H * C * 2);
      for (var y = 0; y < X; y++) {
        var Q = i[y],
          e = B.j(Q.C());
        B.P2(u[y], e);
        z.fill(0);
        B.sN(e, Q, z, $);
        P.push(z.slice(0));
        var Y = Q.x - $.x,
          d = Q.y - $.y,
          I = Y + Q.r - 2,
          O = d + Q.$;
        for (var s = 0; s < Q.$; s++) {
          var p = (s + d) * H;
          for (var F = 0; F < Y; F++) z[p + F] = z[p + Y];
          for (var F = I; F < H; F++) z[p + F] = z[p + I - 1];
        }
        for (var F = 0; F < H; F++) {
          for (var s = 0; s < d; s++) z[s * H + F] = z[d * H + F];
          for (var s = O; s < C; s++) z[s * H + F] = z[(O - 1) * H + F];
        }
        var g = new Float32Array(H * C * 2);
        E.push(g);
        for (var w = 0; w < A; w++) g[w * 2] = z[w] * (1 / 255);
        b(g, N, H, C, v);
        W(g, H, C, v);
      }
      if (x) console.log("to gray, decompose", Date.now() - V);
      V = Date.now();
      var r = B.j(H * C);
      for (var s = 0; s < C; s++)
        for (var F = 0; F < H; F++) {
          var eQ = 0,
            t = 0,
            dq = (s * H + F) << 1;
          for (var y = 0; y < X; y++) {
            var D = E[y],
              ha = D[dq],
              am = D[dq + 1],
              k4 = ha * ha + am * am;
            if (k4 > t) {
              t = k4;
              eQ = y;
            }
          }
          r[dq >>> 1] = eQ;
        }
      if (x) console.log("max abs value", Date.now() - V);
      V = Date.now();
      k(r, H, C, v);
      T(r, H, C);
      if (x) console.log("denoise", Date.now() - V);
      V = Date.now();
      var aA = N.slice(0);
      for (var s = 0; s < C; s++)
        for (var F = 0; F < H; F++) {
          var y = s * H + F,
            dq = y << 1,
            ex = E[r[y]];
          aA[dq] = ex[dq];
          aA[dq + 1] = ex[dq + 1];
        }
      c(aA, N, H, C, v);
      if (x) console.log("compose", Date.now() - V);
      V = Date.now();
      for (var w = 0; w < A; w++) {
        var k4 = aA[w * 2] * 255,
          eQ = 0,
          t = 1e9;
        for (var y = 0; y < X; y++) {
          var ac = Math.abs(P[y][w] - k4);
          if (ac < t) {
            t = ac;
            eQ = y;
          }
          P[y][w] = 0;
        }
        P[eQ][w] = 255;
      }
      if (x) console.log("toRGB", Date.now() - V);
      V = Date.now();
      return [P, $];
    }
    function W(u, i, x, X) {
      var $ = i >>> X,
        H = x >>> X,
        C = 1e-4;
      for (var l = 0; l < x; l++)
        for (var v = 0; v < i; v++) {
          if (v < $ && l < H) continue;
          var K = (l * i + v) * 2,
            S = u[K],
            o = u[K + 1],
            V = S * S + o * o;
          if (V < C) S = o = 0;
          else {
            var P = (V - C) / V;
            S *= P;
            o *= P;
          }
          u[K] = S;
          u[K + 1] = o;
        }
    }
    function k(u, i, x, X) {
      for (var $ = 0; $ < X; $++) {
        var H = i >>> $,
          C = x >>> $,
          l = H >>> 1,
          v = C >>> 1;
        for (var K = 0; K < v; K++)
          for (var S = 0; S < l; S++) {
            var o = K * i + l + S,
              V = (K + v) * i + l + S,
              P = (K + v) * i + S,
              z = u[o],
              E = u[V],
              A = u[P];
            if ((z == E) == A) {
            } else if (z == E) u[P] = z;
            else if (E == A) u[o] = E;
            else if (z == A) u[V] = z;
          }
      }
    }
    function T(u, i, x) {
      for (var X = 1; X < x - 1; X++)
        for (var $ = 1; $ < i - 1; $++) {
          var y = X * i + $,
            H = u[y - i],
            C = u[y - 1],
            l = u[y],
            v = u[y + 1],
            K = u[y + i],
            S =
              (H == C && H == v) ||
              (H == v && v == K) ||
              (v == K && C == K) ||
              (H == C && K == C);
          if (S) u[y] = H == C ? H : C == v ? C : H;
          else if (l > H && l > C && l > v && l > K)
            u[y] = (H + C + v + K) >>> 2;
          else if (l < H && l < C && l < v && l < K)
            u[y] = (H + C + v + K) >>> 2;
        }
    }
    function b(u, i, x, X, $) {
      for (var y = 0; y < $; y++) {
        var H = x >>> y,
          C = X >>> y;
        a(u, i, x, X, H, C);
      }
    }
    function c(u, i, x, X, $) {
      for (var y = $ - 1; y >= 0; y--) {
        var H = x >> y,
          C = X >> y;
        f(u, i, x, X, H, C);
      }
    }
    function a(u, i, x, X, $, H) {
      Z(u, i, x, X, $, H, !0);
      Z(i, u, x, X, $, H, !1);
    }
    function f(u, i, x, X, $, H) {
      h(u, i, x, X, $, H, !0);
      h(i, u, x, X, $, H, !1);
    }
    function U(u, i, x, X, $, H) {
      var C = (x * X + i) << 1;
      u[C] = $;
      u[C + 1] = H;
    }
    function Z(u, i, x, X, $, H, C) {
      var c_ = C ? $ : H,
        l = C ? H : $,
        v = l >>> 1;
      for (var K = 0; K < c_; K++) {
        for (var S = 0; S < l; S += 2) {
          var o = 0,
            V = 0,
            P = 0,
            z = 0,
            E = S >>> 1;
          for (var A = 0; A < 6; A++) {
            var N = S + A - 3;
            if (N < 0) N = l + N;
            if (N >= l) N = N - l;
            var Q = (C ? N * x + K : K * x + N) << 1,
              e = u[Q],
              Y = u[Q + 1],
              d = m[A],
              I = n[A];
            o += e * d[0] - Y * d[1];
            V += Y * d[0] + e * d[1];
            P += e * I[0] - Y * I[1];
            z += Y * I[0] + e * I[1];
          }
          if (C) {
            U(i, K, E, x, o, V);
            U(i, K, E + v, x, P, z);
          } else {
            U(i, E, K, x, o, V);
            U(i, E + v, K, x, P, z);
          }
        }
      }
    }
    function h(u, i, x, X, $, H, C) {
      var c_ = C ? $ : H,
        l = C ? H : $,
        v = l >>> 1,
        K,
        S,
        o,
        V;
      for (var P = 0; P < c_; P++) {
        for (var z = 0; z < l; z++) {
          var E = 0,
            A = 0;
          for (var N = (z + 3) & 1; N < 6; N += 2) {
            var Q = (z - N + 3) >> 1;
            if (Q < 0) Q = v + Q;
            if (Q >= v) Q = Q - v;
            if (C) {
              K = P;
              S = Q;
              o = P;
              V = Q + v;
            } else {
              S = P;
              K = Q;
              V = P;
              o = Q + v;
            }
            var e = (S * x + K) << 1,
              Y = (V * x + o) << 1,
              d = u[e],
              I = u[e + 1],
              O = u[Y],
              s = u[Y + 1],
              p = m[N],
              F = n[N];
            E += d * p[0] + O * F[0];
            E += I * p[1] + s * F[1];
            A += I * p[0] + s * F[0];
            A -= d * p[1] + O * F[1];
          }
          if (C) U(i, P, z, x, E, A);
          else U(i, z, P, x, E, A);
        }
      }
    }
    return { SU: G };
  })();
  B.ajS = (function () {
    var j = Math.floor(12e3 / 8),
      q,
      m,
      n,
      G;
    function W(f, U, Z, h) {
      var u = UPNG.quantize.findNearest,
        i = [f, new hk(0, 0, U, Z)],
        X;
      B.HZ(i);
      var x = Date.now(),
        $ = (U + Z) >>> 1;
      for (var y = $ < 1e3 ? 2 : 4; y >= 0; y -= 2) {
        var H = i[y + 1],
          m = H.r,
          n = H.$;
        if (X == null) {
          X = new Uint8Array(m * n);
          u(i[y], X, h);
        }
        k(i[y], m, n, h, X);
        if (y != 0) {
          var C = i[y - 1],
            l = C.r,
            v = C.$,
            K = new Uint8Array(l * v);
          for (var S = 0; S < v; S++)
            for (var o = 0; o < l; o++)
              K[S * l + o] = X[(S >>> 1) * m + (o >>> 1)];
          X = K;
        }
      }
      return X;
    }
    function k(f, U, Z, h, u) {
      q = f;
      m = U;
      n = Z;
      G = h;
      var i = G.length >>> 2,
        x = [-1, -m, 1, m],
        X = [-1, -m, -m + 1, 2, m + 1, m],
        $ = [-1, -m, 1, m + 1, m + m, m - 1],
        H = 8,
        C = (m + n) >>> 1,
        l = 1e9;
      while (C > 512) {
        H >>= 1;
        C >>= 1;
      }
      H = Math.max(1, Math.min(4, H));
      for (var v = 0; v < H; v++) {
        var K = 0;
        for (var S = 0; S < n; S++)
          for (var o = 0; o < m; o++) {
            if (c(u, o, S) < 2) continue;
            var V = S * m + o,
              P = u[V],
              z = 1e9,
              E = 0,
              A = o == 0 || S == 0 || o > m - 3 || S > n - 3;
            if (A) {
              z = 1e9;
              for (var y = 0; y < i; y++) {
                u[V] = y;
                var N = a(u, o, S, 2);
                if (N < z) {
                  z = N;
                  E = y;
                }
              }
              u[V] = E;
              if (E == P && o + 1 < m && u[V + 1] == P) {
                z = 1e9;
                for (var y = 0; y < i; y++) {
                  u[V] = u[V + 1] = y;
                  var N = a(u, o, S, 2) + a(u, o + 1, S, 2);
                  if (N < z) {
                    z = N;
                    E = y;
                  }
                }
                u[V] = u[V + 1] = E;
              }
              if (E == P && S + 1 < n && u[V + m] == P) {
                z = 1e9;
                for (var y = 0; y < i; y++) {
                  u[V] = u[V + m] = y;
                  var N = a(u, o, S, 2) + a(u, o, S + 1, 2);
                  if (N < z) {
                    z = N;
                    E = y;
                  }
                }
                u[V] = u[V + m] = E;
              }
            } else {
              z = 1e9;
              E = -1;
              for (var y = 0; y < 4; y++) {
                var Q = u[V + x[y]];
                if (Q == E) continue;
                u[V] = Q;
                var N = a(u, o, S, 2);
                if (N < z) {
                  z = N;
                  E = Q;
                }
              }
              u[V] = E;
              if (E == P && o + 1 < m && u[V + 1] == P) {
                z = 1e9;
                E = -1;
                for (var y = 0; y < 6; y++) {
                  var Q = u[V + X[y]];
                  if (Q == E) continue;
                  u[V] = u[V + 1] = Q;
                  var N = a(u, o, S, 2) + a(u, o + 1, S, 2);
                  if (N < z) {
                    z = N;
                    E = Q;
                  }
                }
                u[V] = u[V + 1] = E;
              }
              if (E == P && S + 1 < n && u[V + m] == P) {
                z = 1e9;
                E = -1;
                for (var y = 0; y < 6; y++) {
                  var Q = u[V + $[y]];
                  if (Q == E) continue;
                  u[V] = u[V + m] = Q;
                  var N = a(u, o, S, 2) + a(u, o, S + 1, 2);
                  if (N < z) {
                    z = N;
                    E = Q;
                  }
                }
                u[V] = u[V + m] = E;
              }
            }
            K += z;
          }
      }
    }
    function T(f) {
      var U = 0;
      for (var Z = 0; Z < n; Z++)
        for (var h = 0; h < m; h++) U += a(f, h, Z, 1);
      return U / (m * n);
    }
    function b(f, U, Z) {
      var y = Z * m + U,
        h = y * 4,
        u = f[y] * 4,
        i = q[h] - G[u],
        x = q[h + 1] - G[u + 1],
        X = q[h + 2] - G[u + 2],
        $ = q[h + 3] - G[u + 3];
      return i * i + x * x + X * X + $ * $;
    }
    function c(f, U, Z) {
      if (U < 0 || U >= m || Z < 0 || Z >= n) throw "e";
      var y = Z * m + U,
        h = f[y],
        u = 0;
      if (Z > 0 && h != f[y - m]) u += 2;
      if (U > 0 && h != f[y - 1]) u += 2;
      if (U < m - 1 && h != f[y + 1]) u += 2;
      if (Z < n - 1 && h != f[y + m]) u += 2;
      if (Z > 0 && U > 0 && h != f[y - m - 1]) u++;
      if (Z < n - 1 && U > 0 && h != f[y + m - 1]) u++;
      if (Z > 0 && U < m - 1 && h != f[y - m + 1]) u++;
      if (Z < n - 1 && U < m - 1 && h != f[y + m + 1]) u++;
      return u;
    }
    function a(f, U, Z, h) {
      return b(f, U, Z) + c(f, U, Z) * h * j;
    }
    return W;
  })();
  var lv = (function () {
    function j() {
      this.C = 0;
      this.Dh = 0;
      this.vO = {};
      this.wb = [];
      this.h4 = 1e5;
      this.Sa = 1e5;
      this.Fp = -1;
      this.Kp = -1;
      this.color = 0;
    }
    function q(aF) {
      this.s = aF;
      this.aA = new Array(aF);
      this.ra = new Array(aF * 6);
      this.agj = 0;
      this.Kb = new Array(aF * 2);
      this.alpha = new Array(aF);
      this.fx = new Array(aF);
      this.jf = new Array(aF);
    }
    function m(G, W, k, T) {
      function b(i, x, G, W) {
        return G[W * x + i];
      }
      function c(y) {
        var v = G.length;
        while (y < v && G[y] == 0) y++;
        return y < v ? y : -1;
      }
      function a(i, x, v) {
        for (var y = 2; y < 5; y++) {
          var K = 0;
          for (var S = -y + 1; S <= y - 1; S++) {
            K += b(i + S, x + y - 1, G, W) == v ? 1 : -1;
            K += b(i + y - 1, x + S - 1, G, W) == v ? 1 : -1;
            K += b(i + S - 1, x - y, G, W) == v ? 1 : -1;
            K += b(i - y, x + S, G, W) == v ? 1 : -1;
          }
          if (K > 0) return 1;
          else if (K < 0) return 0;
        }
        return 0;
      }
      function f(v, h) {
        var u = new j(),
          i = v,
          x = h,
          K = 0,
          S = 1,
          o;
        u.color = G[h * W + v];
        u.sign = b(v, h, G, W) == u.color ? "+" : "-";
        while (1) {
          u.wb.push(i, x);
          if (i > u.Fp) u.Fp = i;
          if (i < u.h4) u.h4 = i;
          if (x > u.Kp) u.Kp = x;
          if (x < u.Sa) u.Sa = x;
          u.Dh++;
          i += K;
          x += S;
          u.C -= i * S;
          if (i == v && x == h) break;
          var V =
              b(i + ((K + S - 1) >> 1), x + ((S - K - 1) >> 1), G, W) ==
              u.color,
            P =
              b(i + ((K - S - 1) >> 1), x + ((S + K - 1) >> 1), G, W) ==
              u.color;
          if (P && !V) {
            if (
              T.TT == "right" ||
              (T.TT == "black" && u.sign == "+") ||
              (T.TT == "white" && u.sign == "-") ||
              (T.TT == "majority" && a(i, x, u.color)) ||
              (T.TT == "minority" && !a(i, x, u.color))
            ) {
              o = K;
              K = -S;
              S = o;
            } else {
              o = K;
              K = S;
              S = -o;
            }
          } else if (P) {
            o = K;
            K = -S;
            S = o;
          } else if (!V) {
            o = K;
            K = S;
            S = -o;
          }
        }
        return u;
      }
      var U = 0,
        Z = [];
      while (!0) {
        var U = c(U);
        if (U == -1) break;
        var h = Math.floor(U / W),
          u = f(U - h * W, h);
        for (var y = 0; y < u.wb.length - 2; y += 2) {
          var i = u.wb[y],
            x = u.wb[y + 1],
            X = x * W + i;
          if (i == u.wb[y + 2] && x + 1 == u.wb[y + 3] && G[X] != 0)
            lv.fill(X, G, W, 0);
        }
        if (u.C > T.aF_) Z.push(u);
      }
      for (var y = 0; y < Z.length; y++) Z[y].parent = -1;
      var $ = Date.now();
      for (var y = 1; y < Z.length; y++) {
        var H = Z[y];
        for (var C = y - 1; C >= 0; C--) {
          var l = Z[C];
          if (H.h4 < l.h4 || H.Fp > l.Fp || H.Sa < l.Sa || H.Kp > l.Kp)
            continue;
          if (!lv.Lo(l.wb, H.wb[0] + 0.5, H.wb[1] + 0.5)) continue;
          H.parent = C;
          break;
        }
      }
      return Z;
    }
    function n(G, W) {
      function k(K, S, o, V, P) {
        this.x = K;
        this.y = S;
        this.kZ = o;
        this.hn = V;
        this.tH = P;
      }
      function T(K, aF) {
        return (aF + K) % aF;
      }
      function b(K, S, o, V) {
        return K * V - o * S;
      }
      function c(K, S, o, V) {
        return K * o + S * V;
      }
      function a(K, S, o) {
        if (K <= o) return K <= S && S < o;
        else return K <= S || S < o;
      }
      function f(K, S, o) {
        var V = 0;
        V += S * K[0] * S;
        V += S * K[1] * o;
        V += S * K[2];
        V += o * K[3] * S;
        V += o * K[4] * o;
        V += o * K[5];
        V += K[6] * S;
        V += K[7] * o;
        V += K[8];
        return V;
      }
      function U(K, S, o) {
        return S + K * (o - S);
      }
      function Z(K, S, o, V) {
        var P = Math.sign(o - K),
          z = -Math.sign(V - S);
        return P * (o - K) - z * (V - S);
      }
      function h(K, S) {
        return Math.sqrt(K * K + S * S);
      }
      function u(K, S, o, V, P) {
        var z = 1 - K;
        return (
          z * z * z * S +
          3 * (z * z * K) * o +
          3 * (K * K * z) * V +
          K * K * K * P
        );
      }
      function i(K, S, o, V, P, z, E, A) {
        var N = b(K, S, E, A),
          Q = b(o, V, E, A),
          e = b(P, z, E, A),
          Y = N - 2 * Q + e,
          d = -2 * N + 2 * Q,
          I = N,
          O = d * d - 4 * Y * I;
        if (Y == 0 || O < 0) return -1;
        var s = Math.sqrt(O),
          p = (-d + s) / (2 * Y),
          F = (-d - s) / (2 * Y);
        if (p >= 0 && p <= 1) return p;
        else if (F >= 0 && F <= 1) return F;
        else return -1;
      }
      function x(v) {
        var y, K, S;
        v.oV = v.wb[0];
        v.aba = v.wb[1];
        v.iF = [];
        var o = v.iF;
        o.push(new k(0, 0, 0, 0, 0));
        for (y = 0; y < v.Dh; y++) {
          K = v.wb[y << 1] - v.oV;
          S = v.wb[(y << 1) + 1] - v.aba;
          o.push(
            new k(
              o[y].x + K,
              o[y].y + S,
              o[y].kZ + K * S,
              o[y].hn + K * K,
              o[y].tH + S * S
            )
          );
        }
      }
      function X(v) {
        var aF = v.Dh,
          K = v.wb,
          S,
          o = new Array(aF),
          V = new Array(aF),
          P = new Array(4),
          z,
          E,
          A,
          N,
          Q,
          e,
          Y,
          d,
          I,
          O,
          s,
          y,
          p,
          F,
          g,
          w,
          r,
          eQ,
          t = 0;
        v.cP = new Array(aF);
        for (y = aF - 1; y >= 0; y--) {
          if (K[y << 1] != K[t << 1] && K[(y << 1) + 1] != K[(t << 1) + 1])
            t = y + 1;
          V[y] = t;
        }
        for (y = aF - 1; y >= 0; y--) {
          var dq = T(y + 1, aF) << 1;
          P[0] = P[1] = P[2] = P[3] = 0;
          S = (3 + 3 * (K[dq] - K[y << 1]) + (K[dq + 1] - K[(y << 1) + 1])) / 2;
          P[S]++;
          z = 0;
          E = 0;
          A = 0;
          N = 0;
          t = V[y];
          F = y;
          while (1) {
            s = 0;
            S =
              (3 +
                3 * Math.sign(K[t * 2] - K[F * 2]) +
                Math.sign(K[t * 2 + 1] - K[F * 2 + 1])) /
              2;
            P[S]++;
            if (P[0] && P[1] && P[2] && P[3]) {
              o[y] = F;
              s = 1;
              break;
            }
            I = K[t * 2] - K[y * 2];
            O = K[t * 2 + 1] - K[y * 2 + 1];
            if (b(z, E, I, O) < 0 || b(A, N, I, O) > 0) {
              break;
            }
            if (Math.abs(I) <= 1 && Math.abs(O) <= 1) {
            } else {
              Q = I + (O >= 0 && (O > 0 || I < 0) ? 1 : -1);
              e = O + (I <= 0 && (I < 0 || O < 0) ? 1 : -1);
              if (b(z, E, Q, e) >= 0) {
                z = Q;
                E = e;
              }
              Q = I + (O <= 0 && (O < 0 || I < 0) ? 1 : -1);
              e = O + (I >= 0 && (I > 0 || O < 0) ? 1 : -1);
              if (b(A, N, Q, e) <= 0) {
                A = Q;
                N = e;
              }
            }
            F = t;
            t = V[F];
            if (!a(t, y, F)) {
              break;
            }
          }
          if (s == 0) {
            Y = Math.sign(K[t * 2] - K[F * 2]);
            d = Math.sign(K[t * 2 + 1] - K[F * 2 + 1]);
            I = K[F * 2] - K[y * 2];
            O = K[F * 2 + 1] - K[y * 2 + 1];
            g = b(z, E, I, O);
            w = b(z, E, Y, d);
            r = b(A, N, I, O);
            eQ = b(A, N, Y, d);
            p = 1e7;
            if (w < 0) {
              p = Math.floor(g / -w);
            }
            if (eQ > 0) {
              p = Math.min(p, Math.floor(-r / eQ));
            }
            o[y] = T(F + p, aF);
          }
        }
        p = o[aF - 1];
        v.cP[aF - 1] = p;
        for (y = aF - 2; y >= 0; y--) {
          if (a(y + 1, o[y], p)) {
            p = o[y];
          }
          v.cP[y] = p;
        }
        for (y = aF - 1; a(T(y + 1, aF), p, v.cP[y]); y--) {
          v.cP[y] = p;
        }
      }
      function $(v) {
        function K(v, y, S) {
          var aF = v.Dh,
            I = v.wb,
            O = v.iF,
            s,
            p,
            F,
            g,
            w,
            V,
            r,
            eQ,
            d,
            t,
            dq,
            D,
            ha,
            am,
            k4 = 0;
          if (S >= aF) {
            S -= aF;
            k4 = 1;
          }
          if (k4 == 0) {
            s = O[S + 1].x - O[y].x;
            p = O[S + 1].y - O[y].y;
            g = O[S + 1].hn - O[y].hn;
            F = O[S + 1].kZ - O[y].kZ;
            w = O[S + 1].tH - O[y].tH;
            V = S + 1 - y;
          } else {
            s = O[S + 1].x - O[y].x + O[aF].x;
            p = O[S + 1].y - O[y].y + O[aF].y;
            g = O[S + 1].hn - O[y].hn + O[aF].hn;
            F = O[S + 1].kZ - O[y].kZ + O[aF].kZ;
            w = O[S + 1].tH - O[y].tH + O[aF].tH;
            V = S + 1 - y + aF;
          }
          dq = (I[y << 1] + I[S << 1]) / 2 - I[0];
          D = (I[(y << 1) + 1] + I[(S << 1) + 1]) / 2 - I[1];
          am = I[S << 1] - I[y << 1];
          ha = -(I[(S << 1) + 1] - I[(y << 1) + 1]);
          r = (g - 2 * s * dq) / V + dq * dq;
          eQ = (F - s * D - p * dq) / V + dq * D;
          d = (w - 2 * p * D) / V + D * D;
          t = ha * ha * r + 2 * ha * am * eQ + am * am * d;
          return Math.sqrt(t);
        }
        var y,
          S,
          o,
          V,
          aF = v.Dh,
          P = new Array(aF + 1),
          z = new Array(aF + 1),
          E = new Array(aF),
          A = new Array(aF + 1),
          N = new Array(aF + 1),
          Q = new Array(aF + 1),
          e,
          Y,
          d;
        for (y = 0; y < aF; y++) {
          d = T(v.cP[T(y - 1, aF)] - 1, aF);
          if (d == y) {
            d = T(y + 1, aF);
          }
          if (d < y) {
            E[y] = aF;
          } else {
            E[y] = d;
          }
        }
        S = 1;
        for (y = 0; y < aF; y++) {
          while (S <= E[y]) {
            A[S] = y;
            S++;
          }
        }
        y = 0;
        for (S = 0; y < aF; S++) {
          N[S] = y;
          y = E[y];
        }
        N[S] = aF;
        o = S;
        y = aF;
        for (S = o; S > 0; S--) {
          Q[S] = y;
          y = A[y];
        }
        Q[0] = 0;
        P[0] = 0;
        for (S = 1; S <= o; S++) {
          for (y = Q[S]; y <= N[S]; y++) {
            Y = -1;
            for (V = N[S - 1]; V >= A[y]; V--) {
              e = K(v, V, y) + P[V];
              if (Y < 0 || e < Y) {
                z[y] = V;
                Y = e;
              }
            }
            P[y] = Y;
          }
        }
        v.A = o;
        v.ari = new Array(o);
        for (y = aF, S = o - 1; y > 0; S--) {
          y = z[y];
          v.ari[S] = y;
        }
      }
      function H(v) {
        function K(v, y, e, E, A, aA) {
          var aF = v.Dh,
            ex = v.iF,
            ac = 0,
            d;
          while (e >= aF) {
            e -= aF;
            ac += 1;
          }
          while (y >= aF) {
            y -= aF;
            ac -= 1;
          }
          while (e < 0) {
            e += aF;
            ac -= 1;
          }
          while (y < 0) {
            y += aF;
            ac += 1;
          }
          var eJ = ex[e + 1].x - ex[y].x + ac * ex[aF].x,
            h$ = ex[e + 1].y - ex[y].y + ac * ex[aF].y,
            da = ex[e + 1].hn - ex[y].hn + ac * ex[aF].hn,
            bb = ex[e + 1].kZ - ex[y].kZ + ac * ex[aF].kZ,
            gb = ex[e + 1].tH - ex[y].tH + ac * ex[aF].tH,
            Y = e + 1 - y + ac * aF;
          E[aA] = eJ / Y;
          E[aA + 1] = h$ / Y;
          var fM = (da - (eJ * eJ) / Y) / Y,
            kS = (bb - (eJ * h$) / Y) / Y,
            cY = (gb - (h$ * h$) / Y) / Y,
            cS = (fM + cY + Math.sqrt((fM - cY) * (fM - cY) + 4 * kS * kS)) / 2;
          fM -= cS;
          cY -= cS;
          if (Math.abs(fM) >= Math.abs(cY)) {
            d = Math.sqrt(fM * fM + kS * kS);
            if (d != 0) {
              A[aA] = -kS / d;
              A[aA + 1] = fM / d;
            }
          } else {
            d = Math.sqrt(cY * cY + kS * kS);
            if (d != 0) {
              A[aA] = -cY / d;
              A[aA + 1] = kS / d;
            }
          }
          if (d == 0) {
            A[aA] = A[aA + 1] = 0;
          }
        }
        var S = v.A,
          o = v.ari,
          aF = v.Dh,
          V = v.wb,
          P = v.oV,
          z = v.aba,
          E = new Array(S * 2),
          A = new Array(S * 2),
          N = new Array(S),
          Q = new Array(3),
          y,
          e,
          Y,
          d,
          p,
          F,
          g,
          w,
          r,
          eQ,
          t;
        v.vO = new q(S);
        for (y = 0; y < S; y++) {
          e = o[T(y + 1, S)];
          e = T(e - o[y], aF) + o[y];
          E[y << 1] = 0;
          E[(y << 1) + 1] = 0;
          A[y << 1] = 0;
          A[(y << 1) + 1] = 0;
          K(v, o[y], e, E, A, y << 1);
        }
        for (y = 0; y < S; y++) {
          N[y] = [0, 0, 0, 0, 0, 0, 0, 0, 0];
          var I = A[y << 1] * A[y << 1] + A[(y << 1) + 1] * A[(y << 1) + 1],
            O = 1 / I;
          if (I != 0) {
            Q[0] = A[(y << 1) + 1];
            Q[1] = -A[y << 1];
            Q[2] = -Q[1] * E[(y << 1) + 1] - Q[0] * E[y << 1];
            for (d = 0; d < 3; d++) {
              N[y][d * 3 + 0] = Q[d] * Q[0] * O;
              N[y][d * 3 + 1] = Q[d] * Q[1] * O;
              N[y][d * 3 + 2] = Q[d] * Q[2] * O;
            }
          }
        }
        var s = [0, 0, 0, 0, 0, 0, 0, 0, 0];
        for (y = 0; y < S; y++) {
          s[0] =
            s[1] =
            s[2] =
            s[3] =
            s[4] =
            s[5] =
            s[6] =
            s[7] =
            s[8] =
            s[9] =
              0;
          var dq = V[o[y] << 1] - P,
            D = V[(o[y] << 1) + 1] - z,
            ha = 0,
            am = 0;
          e = T(y - 1, S);
          for (d = 0; d < 9; d += 3) {
            s[d + 0] = N[e][d + 0] + N[y][d + 0];
            s[d + 1] = N[e][d + 1] + N[y][d + 1];
            s[d + 2] = N[e][d + 2] + N[y][d + 2];
          }
          while (1) {
            var k4 = s[0] * s[4] - s[1] * s[3];
            if (k4 != 0) {
              ha = (-s[2] * s[4] + s[5] * s[0]) / k4;
              am = (s[2] * s[3] - s[5] * s[0]) / k4;
              break;
            }
            if (s[0] > s[4]) {
              Q[0] = -s[1];
              Q[1] = s[0];
            } else if (s[4]) {
              Q[0] = -s[4];
              Q[1] = s[3];
            } else {
              Q[0] = 1;
              Q[1] = 0;
            }
            var I = Q[0] * Q[0] + Q[1] * Q[1],
              O = 1 / I;
            Q[2] = -Q[1] * D - Q[0] * dq;
            for (d = 0; d < 3; d++) {
              s[d * 3 + 0] += Q[d] * Q[0] * O;
              s[d * 3 + 1] += Q[d] * Q[1] * O;
              s[d * 3 + 2] += Q[d] * Q[2] * O;
            }
          }
          p = Math.abs(ha - dq);
          F = Math.abs(am - D);
          if (p <= 0.5 && F <= 0.5) {
            v.vO.Kb[y << 1] = ha + P;
            v.vO.Kb[(y << 1) + 1] = am + z;
            continue;
          }
          g = f(s, dq, D);
          r = dq;
          eQ = D;
          if (s[0] != 0) {
            for (t = 0; t < 2; t++) {
              am = D - 0.5 + t;
              ha = -(s[1] * am + s[2]) / s[0];
              p = Math.abs(ha - dq);
              w = f(s, ha, am);
              if (p <= 0.5 && w < g) {
                g = w;
                r = ha;
                eQ = am;
              }
            }
          }
          if (s[4] != 0) {
            for (t = 0; t < 2; t++) {
              ha = dq - 0.5 + t;
              am = -(s[3] * ha + s[5]) / s[4];
              F = Math.abs(am - D);
              w = f(s, ha, am);
              if (F <= 0.5 && w < g) {
                g = w;
                r = ha;
                eQ = am;
              }
            }
          }
          for (d = 0; d < 2; d++) {
            for (Y = 0; Y < 2; Y++) {
              ha = dq - 0.5 + d;
              am = D - 0.5 + Y;
              w = f(s, ha, am);
              if (w < g) {
                g = w;
                r = ha;
                eQ = am;
              }
            }
          }
          v.vO.Kb[y << 1] = r + P;
          v.vO.Kb[(y << 1) + 1] = eQ + z;
        }
      }
      function C(v) {
        var K = v.vO.s,
          S = v.vO,
          y,
          o,
          V,
          P,
          z,
          E,
          A,
          N,
          Q;
        for (y = 0; y < K; y++) {
          o = T(y + 1, K);
          V = T(y + 2, K);
          var e = S.Kb[y << 1],
            Y = S.Kb[(y << 1) + 1],
            d = S.Kb[V << 1],
            I = S.Kb[(V << 1) + 1],
            O = S.Kb[o << 1],
            s = S.Kb[(o << 1) + 1],
            p = U(0.5, d, O),
            F = U(0.5, I, s);
          z = Z(e, Y, d, I);
          if (z != 0) {
            P = b(O - e, s - Y, d - e, I - Y) / z;
            P = Math.abs(P);
            E = P > 1 ? 1 - 1 / P : 0;
            E = E * (1 / 0.75);
          } else {
            E = 4 / 3;
          }
          S.fx[o] = E;
          var g = (3 * o) << 1;
          if (E >= W.atI) {
            S.aA[o] = 0;
            S.ra[g + 0] = S.ra[g + 1] = 0;
            S.ra[g + 2] = O;
            S.ra[g + 3] = s;
            S.ra[g + 4] = p;
            S.ra[g + 5] = F;
          } else {
            if (E < 0.55) {
              E = 0.55;
            } else if (E > 1) {
              E = 1;
            }
            var w = 0.5 + 0.5 * E;
            S.aA[o] = 1;
            S.ra[g] = U(w, e, O);
            S.ra[g + 1] = U(w, Y, s);
            S.ra[g + 2] = U(w, d, O);
            S.ra[g + 3] = U(w, I, s);
            S.ra[g + 4] = p;
            S.ra[g + 5] = F;
          }
          S.alpha[o] = E;
          S.jf[o] = 0.5;
        }
        S.a8Q = 1;
      }
      function l(v) {
        function K() {
          this.kU = 0;
          this.zR = 0;
          this.zu = 0;
          this.zF = 0;
          this.p5 = 0;
          this.t = 0;
          this.fO = 0;
          this.alpha = 0;
        }
        function S(v, y, e, di, a7, r, eQ) {
          var V = v.vO.s,
            b0 = v.vO.ra,
            e1 = v.vO.Kb;
          if (y == e) return 1;
          var l2 = y,
            O = T(y + 1, V),
            kL = T(l2 + 1, V),
            bb = e1[y << 1],
            gb = e1[(y << 1) + 1],
            es = e1[O << 1],
            kR = e1[(O << 1) + 1],
            eH = r[kL];
          if (eH == 0) return 1;
          var cZ = h(bb - es, gb - kR);
          for (l2 = kL; l2 != e; l2 = kL) {
            var kL = T(l2 + 1, V),
              ga = T(l2 + 2, V),
              fi = e1[kL << 1],
              go = e1[(kL << 1) + 1],
              iz = e1[ga << 1],
              i5 = e1[(ga << 1) + 1];
            if (r[kL] != eH) return 1;
            if (Math.sign(b(es - bb, kR - gb, iz - fi, i5 - go)) != eH)
              return 1;
            if (
              c(es - bb, kR - gb, iz - fi, i5 - go) <
              cZ * h(fi - iz, go - i5) * -0.999847695156
            )
              return 1;
          }
          var aI = (T(y, V) * 3 + 2) << 1,
            bs = T(y + 1, V) << 1,
            k2 = T(e, V) << 1,
            jG = (T(e, V) * 3 + 2) << 1,
            aA = b0[aI],
            ex = b0[aI + 1],
            eW = e1[bs],
            gc = e1[bs + 1],
            k1 = e1[k2],
            ke = e1[k2 + 1],
            jh = b0[jG],
            cE = b0[jG + 1],
            t = e1[0],
            dq = e1[1];
          aI = (e * 3 + 2) << 1;
          var cy = b0[aI],
            hl = b0[aI + 1],
            s = eQ[e] - eQ[y];
          s -= b(cy - t, hl - dq, cy - t, hl - dq) / 2;
          if (y >= e) {
            s += eQ[V];
          }
          var c2 = eW - aA,
            f9 = gc - ex,
            hu = k1 - aA,
            le = ke - ex,
            iJ = jh - aA,
            dZ = cE - ex,
            kd = b(c2, f9, hu, le),
            bC = b(c2, f9, iJ, dZ),
            ev = b(hu, le, iJ, dZ),
            ak = kd + ev - bC;
          if (bC == kd) return 1;
          var w = ev / (ev - ak),
            g = bC / (bC - kd),
            gD = (bC * w) / 2;
          if (gD == 0) return 1;
          var a9 = s / gD,
            p = 2 - Math.sqrt(4 - a9 / 0.3);
          di.zR = U(w * p, aA, eW);
          di.zu = U(w * p, ex, gc);
          di.zF = U(g * p, jh, k1);
          di.p5 = U(g * p, cE, ke);
          di.alpha = p;
          di.t = w;
          di.fO = g;
          eW = di.zR;
          gc = di.zu;
          k1 = di.zF;
          ke = di.p5;
          di.kU = 0;
          for (l2 = T(y + 1, V); l2 != e; l2 = kL) {
            kL = T(l2 + 1, V);
            var kk = e1[l2 << 1],
              kX = e1[(l2 << 1) + 1],
              fi = e1[kL << 1],
              go = e1[(kL << 1) + 1];
            w = i(
              eW - aA,
              gc - ex,
              k1 - eW,
              ke - gc,
              jh - k1,
              cE - ke,
              fi - kk,
              go - kX
            );
            if (w < -0.5) return 1;
            var kc = u(w, aA, eW, k1, jh),
              ew = u(w, ex, gc, ke, cE),
              cZ = h(fi - kk, go - kX);
            if (cZ == 0) return 1;
            var gS = b(fi - kk, go - kX, kc - kk, ew - kX) / cZ;
            if (Math.abs(gS) > a7) return 1;
            if (
              c(fi - kk, go - kX, kc - kk, ew - kX) < 0 ||
              c(kk - fi, kX - go, kc - fi, ew - go) < 0
            ) {
              return 1;
            }
            di.kU += gS * gS;
          }
          for (l2 = y; l2 != e; l2 = kL) {
            kL = T(l2 + 1, V);
            var aI = (l2 * 3 + 2) << 1,
              bs = (kL * 3 + 2) << 1,
              hp = b0[aI],
              g2 = b0[aI + 1],
              jY = b0[bs],
              he = b0[bs + 1];
            w = i(
              eW - aA,
              gc - ex,
              k1 - eW,
              ke - gc,
              jh - k1,
              cE - ke,
              jY - hp,
              he - g2
            );
            if (w < -0.5) return 1;
            var kc = u(w, aA, eW, k1, jh),
              ew = u(w, ex, gc, ke, cE),
              cZ = h(jY - hp, he - g2);
            if (cZ == 0) return 1;
            var gS = b(jY - hp, he - g2, kc - hp, ew - g2) / cZ,
              a5 =
                b(jY - hp, he - g2, e1[kL << 1] - hp, e1[(kL << 1) + 1] - g2) /
                cZ;
            a5 *= 0.75 * v.vO.alpha[kL];
            if (a5 < 0) {
              gS = -gS;
              a5 = -a5;
            }
            if (gS < a5 - a7) return 1;
            if (gS < a5) {
              di.kU += (gS - a5) * (gS - a5);
            }
          }
          return 0;
        }
        var o = v.vO,
          V = o.s,
          P = o.Kb,
          z = new Array(V + 1),
          E = new Array(V + 1),
          A = new Array(V + 1),
          N = new Array(V + 1),
          Q,
          y,
          e,
          Y,
          d = new K(),
          I,
          O,
          s,
          p,
          F,
          g,
          w,
          r = new Array(V),
          eQ = new Array(V + 1);
        for (y = 0; y < V; y++) {
          if (o.aA[y] == "CURVE") {
            var t = P[T(y - 1, V) << 1],
              dq = P[(T(y - 1, V) << 1) + 1],
              D = P[y << 1],
              ha = P[(y << 1) + 1],
              am = P[T(y + 1, V) << 1],
              k4 = P[(T(y + 1, V) << 1) + 1];
            r[y] = Math.sign(b(D - t, ha - dq, am - D, k4 - ha));
          } else {
            r[y] = 0;
          }
        }
        s = 0;
        eQ[0] = 0;
        var aA = o.Kb[0],
          ex = o.Kb[1];
        for (y = 0; y < V; y++) {
          O = T(y + 1, V);
          if (o.aA[O] == "CURVE") {
            p = o.alpha[O];
            var ac = (y * 3 + 2) << 1,
              eJ = (O * 3 + 2) << 1,
              h$ = o.ra[ac],
              da = o.ra[ac + 1],
              bb = P[O << 1],
              gb = P[(O << 1) + 1],
              fM = o.ra[eJ],
              kS = o.ra[eJ + 1];
            s +=
              (0.3 * p * (4 - p) * b(bb - h$, gb - da, fM - h$, kS - da)) / 2;
            s += b(h$ - aA, da - ex, fM - aA, kS - ex) / 2;
          }
          eQ[y + 1] = s;
        }
        z[0] = -1;
        E[0] = 0;
        A[0] = 0;
        for (e = 1; e <= V; e++) {
          z[e] = e - 1;
          E[e] = E[e - 1];
          A[e] = A[e - 1] + 1;
          for (y = e - 2; y >= 0; y--) {
            Y = S(v, y, T(e, V), d, W.as9, r, eQ);
            if (Y) {
              break;
            }
            if (A[e] > A[y] + 1 || (A[e] == A[y] + 1 && E[e] > E[y] + d.kU)) {
              z[e] = y;
              E[e] = E[y] + d.kU;
              A[e] = A[y] + 1;
              N[e] = d;
              d = new K();
            }
          }
        }
        Q = A[V];
        F = new q(Q);
        g = new Array(Q);
        w = new Array(Q);
        e = V;
        for (y = Q - 1; y >= 0; y--) {
          var cY = T(e, V),
            cS = (y * 3 + 0) << 1,
            k3 = (cY * 3 + 0) << 1;
          if (z[e] == e - 1) {
            F.aA[y] = o.aA[cY];
            F.ra[cS] = o.ra[k3];
            F.ra[cS + 1] = o.ra[k3 + 1];
            F.ra[cS + 2] = o.ra[k3 + 2];
            F.ra[cS + 3] = o.ra[k3 + 3];
            F.ra[cS + 4] = o.ra[k3 + 4];
            F.ra[cS + 5] = o.ra[k3 + 5];
            F.Kb[y << 1] = o.Kb[cY << 1];
            F.Kb[(y << 1) + 1] = o.Kb[(cY << 1) + 1];
            F.alpha[y] = o.alpha[cY];
            F.fx[y] = o.fx[cY];
            F.jf[y] = o.jf[cY];
            g[y] = w[y] = 1;
          } else {
            F.aA[y] = "CURVE";
            F.ra[cS] = N[e].zR;
            F.ra[cS + 1] = N[e].zu;
            F.ra[cS + 2] = N[e].zF;
            F.ra[cS + 3] = N[e].p5;
            F.ra[cS + 4] = o.ra[k3 + 4];
            F.ra[cS + 5] = o.ra[k3 + 5];
            F.Kb[y << 1] = U(N[e].fO, o.ra[k3 + 4], P[cY << 1]);
            F.Kb[(y << 1) + 1] = U(N[e].fO, o.ra[k3 + 5], P[(cY << 1) + 1]);
            F.alpha[y] = N[e].alpha;
            F.fx[y] = N[e].alpha;
            g[y] = N[e].fO;
            w[y] = N[e].t;
          }
          e = z[e];
        }
        for (y = 0; y < Q; y++) {
          O = T(y + 1, Q);
          F.jf[y] = g[y] / (g[y] + w[O]);
        }
        F.a8Q = 1;
        v.vO = F;
      }
      for (var y = 0; y < G.length; y++) {
        var v = G[y];
        x(v);
        X(v);
        $(v);
        H(v);
        C(v);
        if (W.abD) l(v);
      }
    }
    return { a8Y: m, a2Q: n };
  })();
  lv.$H = function (j, q, m, n) {
    var G = { TT: "minority", aF_: n, abD: !0, atI: 1, as9: 0.2 },
      W = lv.a8Y(j, q, m, G);
    lv.a2Q(W, G);
    return W;
  };
  lv.ac = function (j) {
    var q = [];
    for (var y = 0; y < j.length; y++) {
      var m = j[y],
        n = m.vO,
        G = ["M"],
        W = [n.ra[(n.s - 1) * 6 + 4], n.ra[(n.s - 1) * 6 + 5]];
      for (var k = 0; k < n.s; k++) {
        var T = k * 6;
        if (n.aA[k] == 1) {
          G.push("C");
          for (var b = 0; b < 6; b++) W.push(n.ra[T + b]);
        } else if (n.aA[k] == 0) {
          G.push("L");
          for (var b = 2; b < 4; b++) W.push(n.ra[T + b]);
        }
      }
      G.push("Z");
      q.push({ parent: m.parent, color: m.color, path: { L: W, RC: G } });
    }
    return q;
  };
  lv.Lo = function (j, q, m) {
    var aF = j.length >> 1,
      n,
      G = j[2 * aF - 3] - m,
      W = j[2 * aF - 2] - q,
      k = j[2 * aF - 1] - m,
      T = k > G,
      b = 0;
    for (var y = 0; y < aF; y++) {
      n = W;
      G = k;
      W = j[2 * y] - q;
      k = j[2 * y + 1] - m;
      if (G == k) continue;
      T = k > G;
    }
    for (var y = 0; y < aF; y++) {
      n = W;
      G = k;
      W = j[2 * y] - q;
      k = j[2 * y + 1] - m;
      if (G < 0 && k < 0) continue;
      if (G > 0 && k > 0) continue;
      if (n < 0 && W < 0) continue;
      if (G == k && Math.min(n, W) <= 0) return !0;
      if (G == k) continue;
      var c = n + ((W - n) * -G) / (k - G);
      if (c == 0) return !0;
      if (c > 0) b++;
      if (G == 0 && T && k > G) b--;
      if (G == 0 && !T && k < G) b--;
      T = k > G;
    }
    return (b & 1) == 1;
  };
  lv.fill = function (j, q, m, n) {
    var G = q[j],
      W = [j],
      k = 0;
    while (k < W.length) {
      var T = W[k];
      k++;
      q[T] = n;
      if (q[T - m] == G) {
        W.push(T - m);
        q[T - m] = 254;
      }
      if (q[T - 1] == G) {
        W.push(T - 1);
        q[T - 1] = 254;
      }
      if (q[T + 1] == G) {
        W.push(T + 1);
        q[T + 1] = 254;
      }
      if (q[T + m] == G) {
        W.push(T + m);
        q[T + m] = 254;
      }
    }
  };
  var ch = (function () {
    function j(c) {
      return Math.max(0, Math.min(1, c));
    }
    function q(c, a) {
      var f = a < 0 ? -a : a;
      if (c > 1) c = 0.99;
      c = c * 0.99;
      var U = Math.pow(f / 5, 0.16),
        Z = Math.pow(2, f < 1 ? f : 1 + (f - 1) * 0.8);
      if (a < 0) Z = 1 / Z;
      c = U * (1 - Math.pow(1 - c, Z)) + (1 - U) * c;
      return c;
    }
    function m(c, a) {
      var f = a / 100;
      c = c * 0.99;
      c = f * (0.5 - 0.5 * Math.cos(c * Math.PI)) + (1 - f) * c;
      return c;
    }
    function n(c, a) {
      var f = a * 0.01,
        U = Math.abs(f);
      if (a < 0) c = Math.max(0, -U * 0.33 + c * (1 + U * 0.33));
      else {
        var Z = 0.25 + 0.15 * U;
        if (c < 0.25) c *= Z / 0.25;
        else c = Z + (1 - Z) * ((c - 0.25) / (1 - 0.25));
      }
      return c;
    }
    function G(c, a) {
      if (a < 0) c = c * (1 + 862e-6 * a);
      else c = c * (1 + 0.012 * a);
      return c;
    }
    var W = B.kz.w5(1, 1, 1, -0.3),
      k = B.kz.BR(W);
    function T(c, a, f, U, Z, h, u, i, x, X) {
      var $ = c[f],
        H = c[f + 1],
        C = c[f + 2],
        l = B.kz.$j(W, [$, H, C, 1]);
      $ = l[0];
      H = l[1];
      C = l[2];
      $ = q($, U);
      H = q(H, U);
      C = q(C, U);
      var l = B.kz.$j(k, [$, H, C, 1]);
      $ = l[0];
      H = l[1];
      C = l[2];
      $ = j($);
      H = j(H);
      C = j(C);
      $ = m($, Z);
      H = m(H, Z);
      C = m(C, Z);
      $ = n($, u);
      H = n(H, u);
      C = n(C, u);
      $ = G($, h);
      H = G(H, h);
      C = G(C, h);
      var v = el.az_($, H, C, i);
      $ = v[0];
      H = v[1];
      C = v[2];
      $ = j($);
      H = j(H);
      C = j(C);
      if (x || X) {
        var K = new Float32Array(4),
          S = new hk(0, 0, 1, 1);
        K[0] = $;
        K[1] = H;
        K[2] = C;
        if (x) eV.Gi(x, K, K, S);
        if (X) eV.Gi(X, K, K, S);
        $ = K[0];
        H = K[1];
        C = K[2];
      }
      a[f] = $;
      a[f + 1] = H;
      a[f + 2] = C;
    }
    function b(c, a, f, U, Z) {
      var h = Z.Ex12 ? Z.Ex12.v : 0,
        u = Z.Cr12 ? Z.Cr12.v : 0,
        i = Z.Wh12 ? Z.Wh12.v : 0,
        x = Z.Bk12 ? Z.Bk12.v : 0,
        X = Z.Temp ? Z.Temp.v : 0,
        $ = Z.Tint ? Z.Tint.v : 0,
        H = Z.Vibr ? Z.Vibr.v : 0,
        C = Z.Strt ? Z.Strt.v : 0,
        l = el.Ht(X, $),
        v = null,
        K = null;
      h += l.abX;
      if (H != 0 || C != 0)
        v = eV.R7("vibA", { Strt: Z.Strt, vibrance: Z.Vibr });
      if (Z.Crv) {
        var S = k0.i4("curv"),
          o = !1;
        for (var V = 0; V < 4; V++) {
          var P = ["Crv", "CrvR", "CrvG", "CrvB"][V];
          if (Z[P] == null) continue;
          var z = Z[P].v,
            E = [],
            A = [];
          for (var y = 0; y < z.length; y += 2) {
            var N = z[y].v,
              Q = z[y + 1].v;
            A.push(N, Q);
            E.push(B.SD.Fn(N, Q, !0));
          }
          if (A.join("-") == "0-0-255-255") continue;
          fY.Cy(S, V, E);
          o = !0;
        }
        if (o) K = eV.R7("curv", S);
      }
      var e = Date.now();
      if (U != c) U.set(c);
      if (h != 0 || u != 0 || i != 0 || x != 0 || X != 0 || $ != 0 || v || K) {
        console.log(h, u, i, x, X, $, v);
        var Y = 17,
          d = 1 / (Y - 1),
          I = Y * Y * Y,
          O = new Array(I * 3);
        for (var s = 0; s < Y; s++)
          for (var p = 0; p < Y; p++)
            for (var F = 0; F < Y; F++) {
              var y = s * Y * Y + p * Y + F,
                g = y * 3;
              O[g] = s * d;
              O[g + 1] = p * d;
              O[g + 2] = F * d;
            }
        for (var y = 0; y < I; y++) T(O, O, y * 3, h, u, i, x, l, v, K);
        console.log(Date.now() - e, "making LUT");
        e = Date.now();
        ICC.U.applyLUT(O, Y, U, U);
        console.log(Date.now() - e, "applying LUT");
        e = Date.now();
      }
      var w = (Z.Hi12 ? Z.Hi12.v : 0) * 0.01,
        r = (Z.Sh12 ? Z.Sh12.v : 0) * 0.01;
      if (w != 0 || r != 0) {
        var e = Date.now(),
          eQ = !1,
          t = B.j(a * f, 32),
          dq = U.length,
          D = 0.3,
          ha = 0.59,
          am = 0.11;
        for (var y = 0; y < dq; y += 4) {
          var k4 = U[y + 0] * D + U[y + 1] * ha + U[y + 2] * am;
          t[y >> 2] = k4 < 0.3 ? r * 3 * (0.3 - k4) : w * 0.7 * (k4 - 0.3);
        }
        if (eQ) console.log(0, Date.now() - e);
        e = Date.now();
        B.Zl.oY(t, new hk(0, 0, a, f), 8);
        if (eQ) console.log(1, Date.now() - e);
        e = Date.now();
        for (var Q = 0; Q < f; Q++)
          for (var N = 0; N < a; N++) {
            var y = Q * a + N,
              aA = y * 4,
              ex = 1 + t[y];
            U[aA] = j(U[aA] * ex);
            U[aA + 1] = j(U[aA + 1] * ex);
            U[aA + 2] = j(U[aA + 2] * ex);
          }
        if (eQ) console.log(2, Date.now() - e, a, f);
        e = Date.now();
      }
      var ac = (Z.CrTx ? Z.CrTx.v : 0) * 0.01,
        eJ = (Z.Cl12 ? Z.Cl12.v : 0) * 0.01,
        h$ = (Z.Dhze ? Z.Dhze.v : 0) * 0.01;
      if (ac != 0 || eJ != 0) {
        var t = B.j(a * f, 32);
        for (var y = 0; y < U.length; y += 4)
          t[y >> 2] = (U[y + 0] + U[y + 1] + U[y + 2]) * 0.333333;
        var da = t.slice(0);
        B.Zl.oY(da, new hk(0, 0, a, f), 16);
        if (eQ) console.log(1, Date.now() - e);
        e = Date.now();
        for (var Q = 0; Q < f; Q++)
          for (var N = 0; N < a; N++) {
            var y = Q * a + N,
              aA = y * 4,
              k4 = t[y],
              bb = da[y],
              s = U[aA],
              p = U[aA + 1],
              F = U[aA + 2],
              gb = bb + (k4 - bb) * (1 + ac * 0.3) - k4;
            s = s + gb;
            p = p + gb;
            F = F + gb;
            s = s * (1 + eJ * (k4 - bb));
            p = p * (1 + eJ * (k4 - bb));
            F = F * (1 + eJ * (k4 - bb));
            U[aA] = j(s);
            U[aA + 1] = j(p);
            U[aA + 2] = j(F);
          }
      }
      var fM = a * f;
      if (h$ != 0) {
        var e = Date.now(),
          kS = B.j(fM),
          t = B.j(fM),
          k3 = 0;
        for (var y = 0; y < fM; y++) {
          var aA = y << 2;
          kS[y] = ~~(255 * Math.min(U[aA], U[aA + 1], U[aA + 2]));
          t[y] = ~~(255 * (U[aA] + U[aA + 1] + U[aA + 2]) * (1 / 3));
        }
        var cY = Math.round(Math.min(a, f) / 80),
          cS = kS.slice(0);
        B.FN.SU(cS, kS, a, f, cY);
        kS = B.Sm.aIC(kS, t, new hk(0, 0, a, f), Math.round(cY * 3), 0.1);
        var di = -1;
        for (var y = 0; y < fM; y++)
          if (kS[y] > di) {
            di = kS[y];
            k3 = y;
          }
        var a7 = U[k3 * 4],
          b0 = U[k3 * 4 + 1],
          e1 = U[k3 * 4 + 2],
          l2 = (a7 + b0 + e1) / 3;
        for (var y = 0; y < fM; y++) {
          var aA = y * 4,
            kL = kS[y] * (1 / 255),
            es = 1 - 0.9 * h$ * kL,
            kR = 1 / Math.max(es, 0.1);
          U[aA] = j((U[aA] - a7) * kR + a7);
          U[aA + 1] = j((U[aA + 1] - b0) * kR + b0);
          U[aA + 2] = j((U[aA + 2] - e1) * kR + e1);
        }
      }
    }
    return b;
  })();
  function io() {}
  io.VB = function (j, q) {
    var m = new Uint8Array(j),
      n = 0,
      G = q.split("/").pop().split(".")[0];
    function W(i) {
      for (var y = 0; y < i.length; y++)
        i[y].v.Nm.v = G + "/" + i[y].v.Nm.v.split("/").pop();
    }
    var k = { cd: [], cs: [], list: [] },
      T = M._h(m, n);
    n += 2;
    if (T <= 2) {
      k = io.ax9(m);
      W(k.list);
      return k;
    }
    var b = M._h(m, n);
    n += 2;
    var c = M.IH(m, n, 8);
    n += 8;
    var a = M.Z$(m, n);
    n += 4;
    if (a > 0) k.cd = io.ao6(m, n, a, b, T);
    n += a;
    var f = M.IH(m, n, 8);
    n += 8;
    var U = M.Z$(m, n);
    n += 4;
    if (U > 0) k.cs = f5.ZM(m, n, U);
    n += U;
    var Z = M.IH(m, n, 8);
    n += 8;
    var h = M.Z$(m, n);
    n += 4;
    if (h > 0) {
      var u = {};
      fj.Ky(m, u, n + 4);
      k.list = u.Brsh.v;
    }
    n += h;
    var i = k.list;
    for (var y = 0; y < i.length; y++) {
      fc.nD.check(i[y].v);
    }
    W(i);
    return k;
  };
  io.KX = function (j, q) {
    j.v.Nm.v = q;
  };
  io.ax9 = function (j) {
    var q = { cd: [], cs: [], list: [] },
      m = 0,
      n = M._h(j, m);
    m += 2;
    var G = M._h(j, m);
    m += 2;
    for (var y = 0; y < G; y++) {
      var W = M._h(j, m);
      m += 2;
      var k = M.Z$(j, m);
      m += 4;
      var T = m;
      if (W == 2) {
        var b = {};
        q.cd.push(b);
        var c = M.Z$(j, T);
        T += 4;
        var a = M._h(j, T);
        T += 2;
        if (n == 2) {
          var f = M.z5(j, T);
          T += 4 + f.length * 2 + 2;
        }
        b.id = fb.Rh() + "-d71c-11e5-b1ae-a548a96e5f9f";
        T++;
        T += 8;
        b.HA = M.X7(j, T);
        T += 16;
        var U = M._h(j, T);
        T += 2;
        var Z = j[T];
        T++;
        var h = aW.el(!1, U, j, b.HA.r, b.HA.$, T, Z);
        h = B.sL(h, 8);
        io.ast(b, h);
        var u = fc.vM(b.id),
          i = u.Brsh.v;
        i.Dmtr.v.val = b.HA.r;
        i.Spcn.v.val = a;
        q.list.push({ t: "Objc", v: u });
      }
      m += k;
    }
    return q;
  };
  io.He = function (j) {
    var q = new aj(),
      m = 0,
      n = 0;
    M.Mc(q, m, 6);
    m += 2;
    M.Mc(q, m, 2);
    m += 2;
    var G = {},
      W = [],
      k = {},
      T = [];
    for (var y = 0; y < j.list.length; y++) {
      var b = j.list[y].v,
        c = b.Brsh.v;
      if (c.classID == "sampledBrush") G[c.sampledData.v] = !0;
      if (b.Txtr) k[b.Txtr.v.Idnt.v] = !0;
    }
    for (var y = 0; y < j.cd.length; y++) if (G[j.cd[y].id]) W.push(j.cd[y]);
    for (var y = 0; y < j.cs.length; y++) if (G[j.cs[y].id]) T.push(j.cs[y]);
    M.v3(q, m, "8BIMsamp");
    m += 8;
    m += 4;
    n = m;
    m = io.a02(q, m, W);
    M.hc(q, n - 4, m - n);
    M.v3(q, m, "8BIMpatt");
    m += 8;
    m += 4;
    n = m;
    m = f5.iQ(q, m, T);
    M.hc(q, n - 4, m - n);
    var a = B.S(j.list);
    for (var y = 0; y < a.length; y++)
      a[y].v.Nm.v = a[y].v.Nm.v.split("/").pop();
    var f = { classID: "null", Brsh: { t: "VlLs", v: a } };
    M.v3(q, m, "8BIMdesc");
    m += 8;
    m += 4;
    n = m;
    M.hc(q, m, 16);
    m += 4;
    m += fj.LM(q, f, m);
    M.hc(q, n - 4, m - n);
    return q.data.slice(0, m).buffer;
  };
  io.ao6 = function (j, q, m, n, G) {
    var W = M.Z$,
      k = M.X7,
      T = q + m,
      b = [];
    while (q < T) {
      var c = {};
      b.push(c);
      var a = W(j, q);
      q += 4;
      var f = q,
        U = M.xs(j, q);
      q += U.length;
      c.id = U.ob;
      if (n == 1) {
        q += 9;
        c.HA = k(j, q);
        q += 16;
      } else {
        q += 7;
        var Z = W(j, q);
        q += 4;
        c.HA = k(j, q);
        q += 16;
        var h = W(j, q);
        q += 4;
        q += h * 4;
        var u = W(j, q);
        q += 4;
        var i = W(j, q);
        q += 4;
        var x = k(j, q);
        q += 16;
      }
      var X = M._h(j, q);
      q += 2;
      var $ = j[q];
      q += 1;
      var H = aW.el(!1, X, j, c.HA.r, c.HA.$, q, $);
      H = B.sL(H, 8);
      io.ast(c, H);
      if (a % 4 != 0) a += 4 - (a % 4);
      q = f + a;
    }
    return b;
  };
  io.ast = function (j, q) {
    var m = j.HA.P();
    m.x = m.y = 0;
    j.Og = [q, m];
  };
  io.a02 = function (j, q, m) {
    var n = M.hc,
      G = M.KY;
    for (var y = 0; y < m.length; y++) {
      var W = m[y],
        k = q + 4,
        b = 56,
        a = 1;
      q += 4;
      M.uG(j, q, W.id);
      q += W.id.length + 2;
      j.xY(q, 1);
      j.data[q] = 1;
      q += 3;
      n(j, q, 3);
      q += 4;
      var T = q;
      q += 4;
      G(j, q, W.HA);
      q += 16;
      n(j, q, b);
      q += 4;
      q += b * 4;
      n(j, q - 4, 1);
      var c = q;
      q += 4;
      n(j, q, 8);
      q += 4;
      G(j, q, W.HA);
      q += 16;
      M.Mc(j, q, 8);
      q += 2;
      j.xY(q, 1);
      j.data[q] = a;
      q++;
      var f = W.Og[0];
      j.xY(q, W.HA.C() * 2);
      q = aW.At(!1, f, j.data, W.HA.r, W.HA.$, q, a);
      j.xY(q, 8);
      q += 8;
      var U = q - k;
      n(j, k - 4, U);
      n(j, T, U - 49);
      n(j, c, U - 305);
      if (U % 4 != 0) q += 4 - (U % 4);
    }
    return q;
  };
  function fY() {}
  fY.VB = function (j, q) {
    var m = new Uint8Array(j),
      n = [],
      G = 0,
      W = M._h(m, G);
    G += 2;
    if (W != 4) {
      throw "Unknown version of curves: " + W;
    }
    var k = M._h(m, G);
    G += 2;
    for (var y = 0; y < k; y++) {
      var T = fY.avB(m, G);
      G += 2 + 2 * T.length;
      n.push(T);
    }
    if (G != m.length) {
      var b = M.IH(m, G, 4);
      G += 4;
      var c = M._h(m, G);
      G += 2;
      var a = M._h(m, G);
      G += 2;
      if (a != 0) throw "extra curves for channels";
    }
    var f = fY.aEZ(n, 0);
    f.presetKind = { t: "long", v: 3 };
    f.presetFileName = { t: "TEXT", v: q.split("/").pop().split(".")[0] };
    return [f];
  };
  fY.uq = function (j, q, m, n) {
    var G = n ? M.YZ : M.Z$,
      W = q,
      k = [],
      T = j[q];
    q += 3;
    var b = G(j, q);
    q += 4;
    for (var y = 0; y < 4; y++) {
      var c = (b >>> y) & 1;
      if (c) {
        if (T == 0) {
          var a = fY.avB(j, q, n);
          q += 2 + 2 * a.length;
        } else {
          var a = fY.a4a(j, q);
          q += 256;
        }
        k.push(a);
      } else k.push(T == 0 ? [0, 0, 255, 255] : fY.avP());
    }
    var f = fY.aEZ(k, T);
    return f;
  };
  fY.aEZ = function (j, q) {
    var m = k0.i4("curv");
    for (var y = 0; y < 4; y++) {
      if (q == 0) {
        var n = j[y],
          G = [];
        for (var W = 0; W < n.length; W += 2)
          G.push(B.SD.Fn(n[W], n[W + 1], !0));
        fY.Cy(m, y, G);
      } else fY.Cy(m, y, j[y]);
    }
    return m;
  };
  fY.A6 = function (j, q, m) {
    var n = [];
    for (var y = 0; y < 4; y++) {
      var G = fY.Lq(m, y);
      if (G.length == 256) n.push(G);
      else {
        var W = [];
        for (var k = 0; k < G.length; k++) W.push(G[k].v.Hrzn.v, G[k].v.Vrtc.v);
        n.push(W);
      }
    }
    var T = q,
      b = n[0].length == 256 ? 1 : 0;
    j.xY(q, 3);
    j.data[q] = b;
    j.data[q + 1] = 0;
    j.data[q + 2] = 1;
    q += 3;
    M.hc(j, q, 15);
    q += 4;
    for (var y = 0; y < 4; y++) {
      var c = n[y];
      if (b == 0) {
        fY.aKK(j, q, c);
        q += 2 + 2 * c.length;
      } else {
        fY.a0k(j, q, c);
        q += 256;
      }
    }
    return q - T;
  };
  fY.avP = function () {
    var j = [];
    for (var y = 0; y < 256; y++) j.push(y);
    return j;
  };
  fY.Cy = function (j, q, m) {
    var n = im.sg("CrvA", q);
    if (m.length < 256) n.Crv = { t: "VlLs", v: m };
    else {
      n.Mpng = { t: "VlLs", v: [] };
      for (var y = 0; y < 256; y++) n.Mpng.v[y] = { t: "long", v: m[y] };
    }
    n = { t: "Objc", v: n };
    if (j.Adjs == null) j.Adjs = { t: "VlLs", v: [] };
    var G = j.Adjs.v,
      W = im.pZ(G, q);
    if (W == -1) G.push(n);
    else G[W] = n;
  };
  fY.Lq = function (j, q) {
    var m = j.Adjs ? j.Adjs.v : [],
      n = im.pZ(m, q);
    if (n == -1) {
      if (m.length == 0 || m[0].v.Crv)
        return [B.SD.Fn(0, 0, !0), B.SD.Fn(255, 255, !0)];
      if (m[0].v.autoMachineLearning || m[0].v.AuCo)
        return [
          B.SD.Fn(0, 0, !0),
          B.SD.Fn(128, 160, !0),
          B.SD.Fn(255, 255, !0),
        ];
      var G = [];
      for (var y = 0; y < 256; y++) G.push(y);
      return G;
    }
    var W = m[n].v;
    if (W.Crv) return W.Crv.v;
    if (W.Mpng) {
      var G = [];
      for (var y = 0; y < 256; y++) G.push(W.Mpng.v[y].v);
      return G;
    }
    return [B.SD.Fn(0, 0, !0), B.SD.Fn(255, 255, !0)];
  };
  fY.avB = function (j, q, m) {
    var n = m ? M.d9 : M._h,
      G = [],
      W = n(j, q);
    q += 2;
    for (var k = 0; k < W; k++) {
      var T = n(j, q);
      q += 2;
      var b = n(j, q);
      q += 2;
      G.push(b, T);
    }
    return G;
  };
  fY.aKK = function (j, q, m) {
    var n = m.length / 2;
    M.Mc(j, q, n);
    q += 2;
    for (var G = 0; G < n; G++) {
      M.Mc(j, q, m[G * 2 + 1]);
      q += 2;
      M.Mc(j, q, m[G * 2 + 0]);
      q += 2;
    }
  };
  fY.a4a = function (j, q) {
    var m = [];
    for (var y = 0; y < 256; y++) m.push(j[q + y]);
    return m;
  };
  fY.a0k = function (j, q, m) {
    j.xY(q, 256);
    for (var y = 0; y < 256; y++) j.data[q + y] = m[y];
  };
  function b$() {}
  b$.uq = function (j, q, m, n) {
    var G = {},
      W = n ? M.d9 : M._h,
      k = n ? M.O_ : M.A_,
      T = W(j, q);
    q += 2;
    G.ZK = j[q] == 1;
    q++;
    q++;
    G.dG = [k(j, q), k(j, q + 2), k(j, q + 4)];
    q += 6;
    G.Z1 = [k(j, q), k(j, q + 2), k(j, q + 4)];
    q += 6;
    G.aJ = [];
    for (var y = 0; y < 6; y++) {
      var b = {};
      b.AK = [k(j, q), k(j, q + 2), k(j, q + 4), k(j, q + 6)];
      q += 8;
      b.ZE = [k(j, q), k(j, q + 2), k(j, q + 4)];
      q += 6;
      G.aJ.push(b);
    }
    var c = k0.i4("hue2"),
      a = G;
    if (c.Clrz == null) c.Clrz = { t: "bool", v: !1 };
    c.Clrz.v = a.ZK;
    for (var y = 0; y < 7; y++) {
      var f = y == 0 ? (a.ZK ? a.dG : a.Z1) : a.aJ[y - 1];
      b$.Cy(c, y, f);
    }
    return c;
  };
  b$.afq = function (j) {
    return {
      classID: "Hst2",
      H: { t: "long", v: j[0] },
      Strt: { t: "long", v: j[1] },
      Lght: { t: "long", v: j[2] },
    };
  };
  b$.pZ = function (j, q) {
    for (var y = 0; y < j.length; y++) {
      var m = j[y].v.LclR;
      if ((q == 0 && m == null) || (m != null && m.v == q)) return y;
    }
    return -1;
  };
  b$.Cy = function (j, q, m) {
    var n = q == 0 ? m : m.ZE,
      G = b$.afq(n);
    if (q != 0) {
      var W = m.AK;
      (G.LclR = { t: "long", v: q }), (G.BgnR = { t: "long", v: W[0] });
      G.BgnS = { t: "long", v: W[1] };
      G.EndS = { t: "long", v: W[2] };
      G.EndR = { t: "long", v: W[3] };
    }
    G = { t: "Objc", v: G };
    var k = j.Adjs.v,
      T = b$.pZ(k, q);
    if (T == -1) k.push(G);
    else k[T] = G;
  };
  b$.Lq = function (j, q) {
    var m = j.Adjs.v,
      n = b$.pZ(m, q);
    if (n == -1) {
      if (q == 0) return [0, 0, 0];
      else
        return [
          { AK: [315, 345, 15, 45], ZE: [0, 0, 0] },
          { AK: [15, 45, 75, 105], ZE: [0, 0, 0] },
          { AK: [75, 105, 135, 165], ZE: [0, 0, 0] },
          { AK: [135, 165, 195, 225], ZE: [0, 0, 0] },
          { AK: [195, 225, 255, 285], ZE: [0, 0, 0] },
          { AK: [255, 285, 315, 345], ZE: [0, 0, 0] },
        ][q - 1];
    }
    var G = m[n].v,
      W = [G.H.v, G.Strt.v, G.Lght.v];
    if (q == 0) return W;
    return { ZE: W, AK: [G.BgnR.v, G.BgnS.v, G.EndS.v, G.EndR.v] };
  };
  b$.A6 = function (j, q, m) {
    var n = { ZK: m.Clrz ? m.Clrz.v : !1, aJ: [] };
    n.dG = n.Z1 = b$.Lq(m, 0);
    for (var y = 1; y < 7; y++) n.aJ.push(b$.Lq(m, y));
    var G = 2 + 2 + 12 + 6 * 14,
      W = j.data;
    j.xY(q, G);
    M.JP(W, q, 2);
    q += 2;
    W[q] = n.ZK ? 1 : 0;
    q++;
    q++;
    M.SO(W, q + 0, n.dG[0]);
    M.SO(W, q + 2, n.dG[1]);
    M.SO(W, q + 4, n.dG[2]);
    q += 6;
    M.SO(W, q + 0, n.Z1[0]);
    M.SO(W, q + 2, n.Z1[1]);
    M.SO(W, q + 4, n.Z1[2]);
    q += 6;
    for (var y = 0; y < 6; y++) {
      var k = n.aJ[y].AK,
        T = n.aJ[y].ZE;
      M.SO(W, q + 0, k[0]);
      M.SO(W, q + 2, k[1]);
      M.SO(W, q + 4, k[2]);
      M.SO(W, q + 6, k[3]);
      q += 8;
      M.SO(W, q + 0, T[0]);
      M.SO(W, q + 2, T[1]);
      M.SO(W, q + 4, T[2]);
      q += 6;
    }
    return G;
  };
  function im() {}
  im.VB = function (j, q) {
    var m = new Uint8Array(j),
      n = 2,
      G = q ? M.d9 : M._h,
      W = [];
    for (var y = 0; y < 29; y++) {
      var k = [];
      W.push(k);
      for (var T = 0; T < 5; T++) k.push(G(m, n + y * 10 + T * 2));
    }
    n += 29 * 10;
    if (n < m.length) {
      var b = M.Vo(m, n, q);
      n += 4;
      var c = G(m, n);
      n += 2;
      var a = G(m, n);
      n += 2;
      var f = a - 29;
      for (var y = 0; y < f; y++) {
        var k = [];
        W.push(k);
        for (var T = 0; T < 5; T++) k.push(G(m, n + y * 10 + T * 2));
      }
    }
    var U = k0.i4("levl");
    for (var y = 0; y < 4; y++) im.Cy(U, y, W[y]);
    return U;
  };
  im.sg = function (j, y) {
    var q = ["Cmps", "Rd", "Grn", "Bl"],
      m = {
        t: "obj ",
        v: [{ t: "Enmr", v: { classID: "Chnl", typeID: "Chnl", enum: q[y] } }],
      };
    return { classID: j, Chnl: m };
  };
  im.pZ = function (j, q) {
    var m = { Cmps: 0, Rd: 1, Grn: 2, Bl: 3, Trgt: 0 };
    for (var y = 0; y < j.length; y++) {
      var n = j[y].v,
        G = m[n.Chnl.v[0].v.enum];
      if (G == q) return y;
    }
    return -1;
  };
  im.Cy = function (j, q, m) {
    var n = im.sg("LvlA", q);
    n.Inpt = {
      t: "VlLs",
      v: [
        { t: "long", v: m[0] },
        { t: "long", v: m[1] },
      ],
    };
    n.Otpt = {
      t: "VlLs",
      v: [
        { t: "long", v: m[2] },
        { t: "long", v: m[3] },
      ],
    };
    n.Gmm = { t: "doub", v: m[4] / 100 };
    n = { t: "Objc", v: n };
    var G = j.Adjs.v,
      W = im.pZ(G, q);
    if (W == -1) G.push(n);
    else G[W] = n;
  };
  im.Lq = function (j, q) {
    var m = [0, 255, 0, 255, 100],
      n = j.Adjs.v,
      G = im.pZ(n, q);
    if (G == -1) return m;
    var W = n[G].v;
    if (W.Inpt) {
      m[0] = W.Inpt.v[0].v;
      m[1] = W.Inpt.v[1].v;
    }
    if (W.Otpt) {
      m[2] = W.Otpt.v[0].v;
      m[3] = W.Otpt.v[1].v;
    }
    if (W.Gmm) {
      m[4] = Math.round(W.Gmm.v * 100);
    }
    return m;
  };
  im.He = function (j, q) {
    var m = [],
      n = 0;
    for (var y = 0; y < 4; y++) m.push(im.Lq(q, y));
    while (m.length < 29) m.push([0, 255, 0, 255, 100]);
    j.xY(0, 2 + 10 * 29);
    M.JP(j.data, n, 2);
    n += 2;
    for (var y = 0; y < 29; y++) {
      var G = m[y];
      for (var W = 0; W < 5; W++) M.JP(j.data, n + y * 10 + W * 2, G[W]);
    }
    n += 29 * 10;
    if (m.length == 29) return n;
    j.xY(n, 8 + 10 * (m.length - 29));
    M.Sc(j.data, n, "Lvls");
    n += 4;
    M.JP(j.data, n, 3);
    n += 2;
    M.JP(j.data, n, m.length);
    n += 2;
    var k = m.length - 29;
    for (var y = 0; y < k; y++) {
      var G = m[29 + y];
      for (var W = 0; W < 5; W++) M.JP(j.data, n + y * 10 + W * 2, G[W]);
    }
    n += 10 * k;
    return n;
  };
  function hS() {}
  hS.VB = function (j, q) {
    var m = new Uint8Array(j),
      n = 2,
      G = q.split("/").pop().split(".")[0],
      W = { fA: [], P_: [] },
      k = M.IH(m, n, 4);
    n += 4;
    var T = M._h(m, n);
    n += 2;
    var b = M.Z$(m, n);
    n += 4;
    W.fA = f5.ZM(m, n, b);
    n += b;
    var c = M.Z$(m, n);
    n += 4;
    for (var y = 0; y < c; y++) {
      var a = M.Z$(m, n);
      n += 4;
      var f = n,
        U = { So: {}, yL: {} };
      W.P_.push(U);
      n += 4;
      n += fj.Ky(m, U.So, n);
      U.So.Nm.v = G + "/" + U.So.Nm.v.split("=").pop();
      n += 4;
      n += fj.Ky(m, U.yL, n);
      n = f + a;
      var Z = U.yL.blendOptions,
        h = U.yL.Lefx;
      if (Z && Object.keys(Z.v).length > 1) {
      }
      if (h) {
        if (h.v.masterFXSwitch == null)
          h.v.masterFXSwitch = { t: "bool", v: !0 };
        gM.KI(h.v);
      }
    }
    return W;
  };
  hS.KX = function (j, q) {
    j.So.Nm.v = q;
  };
  hS.He = function (j) {
    var q = new aj(),
      m = 0;
    M.Mc(q, m, 2);
    m += 2;
    M.v3(q, m, "8BSL");
    m += 4;
    M.Mc(q, m, 3);
    m += 2;
    var n = m;
    m += 4;
    m = f5.iQ(q, m, j.fA);
    M.hc(q, n, m - n - 4);
    var G = j.P_.length;
    M.hc(q, m, G);
    m += 4;
    for (var y = 0; y < G; y++) {
      m += 4;
      var W = m,
        k = j.P_[y];
      M.hc(q, m, 16);
      m += 4;
      var T = k.So.Nm.v;
      k.So.Nm.v = k.So.Nm.v.split("/").pop();
      m += fj.LM(q, k.So, m);
      k.So.Nm.v = T;
      var b = k.yL.Lefx;
      if (b) {
        k.yL.Lefx = B.S(b);
        gM.P1(k.yL.Lefx.v);
      }
      M.hc(q, m, 16);
      m += 4;
      m += fj.LM(q, k.yL, m);
      if (b) k.yL.Lefx = b;
      M.hc(q, W - 4, m - W);
    }
    return q.data.slice(0, m).buffer;
  };
  function bh() {}
  bh.uq = function (j, q, m, n) {
    var G = n ? M.d9 : M._h,
      W = n ? M.O_ : M.A_,
      k = G(j, q);
    q += 2;
    var T = {};
    T.b6 = G(j, q) == 1;
    q += 2;
    T.g7 = [];
    for (var y = 0; y < 10; y++) {
      var b = [];
      T.g7.push(b);
      for (var c = 0; c < 4; c++) b.push(W(j, q + c * 2));
      q += 8;
    }
    var a = k0.i4("selc");
    a.Mthd.v.CrcM = T.b6 ? "Absl" : "Rltv";
    for (var y = 1; y < 10; y++) bh.Cy(a, y - 1, T.g7[y]);
    return a;
  };
  bh.Aj = "Rds Ylws Grns Cyns Bls Mgnt Whts Ntrl Blks".split(" ");
  bh.sg = function (j, y) {
    var q = ["Cmps", "Rd", "Grn", "Bl"],
      m = {
        t: "obj ",
        v: [{ t: "Enmr", v: { classID: "Chnl", typeID: "Chnl", enum: q[y] } }],
      };
    return { classID: j, Chnl: m };
  };
  bh.pZ = function (j, q) {
    var m = bh.Aj;
    for (var y = 0; y < j.length; y++) {
      var n = j[y].v,
        G = m.indexOf(n.Clrs.v.Clrs);
      if (G == q) return y;
    }
    return -1;
  };
  bh.Cy = function (j, q, m) {
    var n = ["Cyn", "Mgnt", "Ylw", "Blck"],
      G = { classID: "ClrC", Clrs: { t: "enum", v: { Clrs: bh.Aj[q] } } };
    for (var W = 0; W < 4; W++)
      G[n[W]] = { t: "UntF", v: { type: "#Prc", val: m[W] } };
    G = { t: "Objc", v: G };
    var k = j.ClrC.v,
      T = bh.pZ(k, q);
    if (T == -1) k.push(G);
    else k[T] = G;
  };
  bh.Lq = function (j, q) {
    var m = [0, 0, 0, 0],
      n = j.ClrC.v,
      G = bh.pZ(n, q);
    if (G == -1) return m;
    var W = ["Cyn", "Mgnt", "Ylw", "Blck"];
    for (var y = 0; y < 4; y++) if (n[G].v[W[y]]) m[y] = n[G].v[W[y]].v.val;
    return m;
  };
  bh.A6 = function (j, q, m) {
    var n = { b6: m.Mthd.v.CrcM == "Absl", g7: [[0, 0, 0, 0]] };
    for (var y = 0; y < 9; y++) n.g7.push(bh.Lq(m, y));
    j.xY(q, 84);
    M.JP(j.data, q, 1);
    q += 2;
    M.JP(j.data, q, n.b6 ? 1 : 0);
    q += 2;
    for (var y = 0; y < 10; y++) {
      var G = n.g7[y];
      for (var W = 0; W < 4; W++) M.SO(j.data, q + W * 2, G[W]);
      q += 8;
    }
    return 84;
  };
  function hR() {}
  hR.i4 = function () {
    return {
      gX: new hk(0, 0, 50, 50),
      So: "",
      q6: "play",
      D: B.z.cn.yu([0.1, 0.1, 0.9, 0.5, 0.1, 0.9], 0),
    };
  };
  hR.VB = function (j, q) {
    j = new Uint8Array(j);
    var m = 0,
      n = [],
      G = q.split("/").pop().split(".")[0],
      W = Date.now(),
      k = M.IH(j, 0, 4);
    m += 4;
    var T = M.Z$(j, m);
    m += 4;
    var b = M.Z$(j, m);
    m += 4;
    for (var y = 0; y < b; y++) {
      var c = M.z5(j, m);
      m += c.length * 2 + 4 + 2;
      if ((c.length & 1) == 0) m += 2;
      m = hR.avj(j, m, c, n);
      n[y].q6 = G + "/" + n[y].q6;
    }
    return n;
  };
  hR.avj = function (j, q, m, n) {
    var G = M.Z$(j, q);
    q += 4;
    var W = M.Z$(j, q);
    q += 4;
    var k = q,
      T = M.xs(j, k).ob;
    k += T.length + 1;
    var b = M.X7(j, k);
    k += 16;
    var c = hR.xD(j, k, W - (k - q)),
      a = B.z.WA(c),
      f = B.b.RD(a),
      U = 1 / f.r,
      Z = 1 / f.$;
    B.z.La(c, new k$(U, 0, 0, Z, -f.x * U, -f.y * Z));
    n.push({ q6: m, So: T, D: c, gX: b });
    q += W;
    return q;
  };
  hR.KX = function (j, q) {
    j.q6 = q;
  };
  hR.He = function (j) {
    var q = new aj(),
      m = 0;
    M.v3(q, m, "cush");
    m += 4;
    M.hc(q, m, 2);
    m += 4;
    M.hc(q, m, j.length);
    m += 4;
    for (var y = 0; y < j.length; y++) {
      var n = j[y],
        G = n.q6.split("/").pop() + "\0";
      M.mO(q, m, G);
      m += 4 + G.length * 2;
      if ((G.length & 1) == 1) m += 2;
      M.hc(q, m, 1);
      m += 4;
      m += 4;
      var W = m;
      M.uG(q, m, n.So);
      m += n.So.length + 1;
      M.KY(q, m, n.gX);
      m += 16;
      q.xY(m, n.D.length * 26);
      hR.WJ(q.data, m, n.D, 1, 1);
      m += n.D.length * 26;
      var k = m - W;
      if ((k & 3) != 0) k += 4 - (k & 3);
      M.hc(q, W - 4, k);
      m = W + k;
    }
    return q.data.slice(0, m).buffer;
  };
  hR.apA = function (j) {
    var q = [];
    for (var y = 0; y < j.length; y++) {
      var m = j[y],
        n = m.e,
        G = { type: n };
      q.push(G);
      if (n == 6) {
      } else if (n == 8) G.all = m.all;
      else if (n == 0 || n == 3) {
        G.length = m.length;
        G.boolop = m.Np;
        G.frule = m.uc;
        G.prmA = m.xV;
        G.prmB = m.yg;
      } else {
        G.c = [m.kt.x, m.kt.y, m.Ii.x, m.Ii.y, m._$.x, m._$.y];
      }
    }
    return q;
  };
  hR.azR = function (j) {
    var q = [];
    for (var y = 0; y < j.length; y++) {
      var m = j[y],
        n = m.type,
        G = { e: n };
      q.push(G);
      if (n == 6) {
      } else if (n == 8) G.all = m.all;
      else if (n == 0 || n == 3) {
        G.length = m.length;
        G.Np = m.boolop;
        G.uc = m.frule;
        G.xV = m.prmA;
        G.yg = m.prmB;
      } else {
        var W = m.c;
        G.kt = new ea(W[0], W[1]);
        G.Ii = new ea(W[2], W[3]);
        G._$ = new ea(W[4], W[5]);
      }
    }
    return q;
  };
  hR.xD = function (j, q, m, n, G, W) {
    if (n == null) n = 1;
    if (G == null) G = 1;
    var k = W ? M.acR : M.aCP;
    function T(X, $, H) {
      var C = k(X, $) * H,
        l = Math.round(C);
      return Math.abs(C - l) < 1e-4 ? l : C;
    }
    var b = W ? M.O_ : M.A_,
      c = W ? M.YZ : M.Z$,
      a = [],
      f = Math.floor(m / 26);
    for (var y = 0; y < f; y++) {
      var U = q + y * 26,
        Z = {},
        h = 0;
      a.push(Z);
      Z.e = b(j, U);
      U += 2;
      if (Z.e == 6) {
        h = 24;
      }
      if (Z.e == 8) {
        Z.all = b(j, U);
        U += 2;
        h = 22;
      }
      if (Z.e == 0 || Z.e == 3) {
        Z.length = b(j, U);
        U += 2;
        Z.Np = b(j, U);
        U += 2;
        Z.uc = b(j, U);
        U += 2;
        Z.xV = c(j, U);
        U += 4;
        Z.yg = c(j, U);
        U += 4;
        h = 10;
      }
      if (Z.e == 1 || Z.e == 2 || Z.e == 4 || Z.e == 5) {
        var u, i;
        i = T(j, U, G);
        U += 4;
        u = T(j, U, n);
        U += 4;
        Z.kt = new ea(u, i);
        i = T(j, U, G);
        U += 4;
        u = T(j, U, n);
        U += 4;
        Z.Ii = new ea(u, i);
        i = T(j, U, G);
        U += 4;
        u = T(j, U, n);
        U += 4;
        Z._$ = new ea(u, i);
        h = 0;
      }
      for (var x = 0; x < h; x++)
        if (j[U + x] != 0) {
          console.log("Unexpected non-zero byte!", Z, x, j[U + x]);
        }
    }
    return a;
  };
  hR.WJ = function (j, q, m, n, G) {
    var W = M.SO,
      k = M.aaQ,
      T = m.length;
    for (var y = 0; y < T; y++) {
      var b = q + y * 26,
        c = m[y];
      W(j, b, c.e);
      b += 2;
      if (c.e == 6) {
      }
      if (c.e == 8) W(j, b, c.all);
      if (c.e == 0 || c.e == 3) {
        W(j, b, c.length);
        b += 2;
        W(j, b, c.Np);
        b += 2;
        W(j, b, c.uc);
        b += 2;
      }
      if (c.e == 1 || c.e == 2 || c.e == 4 || c.e == 5) {
        k(j, b, c.kt.y / G);
        b += 4;
        k(j, b, c.kt.x / n);
        b += 4;
        k(j, b, c.Ii.y / G);
        b += 4;
        k(j, b, c.Ii.x / n);
        b += 4;
        k(j, b, c._$.y / G);
        b += 4;
        k(j, b, c._$.x / n);
        b += 4;
      }
    }
  };
  function be() {}
  be.asi = function (j, q, m, n) {
    var G = n.split(".")[0],
      W = !1;
    if (q + 3 < j.length) {
      var k = {};
      gM.wd(j, q, j.length, k);
      var T = k.phry.hierarchy.v;
      if (T.length != 0) {
        var b = [[]],
          c = 0;
        for (var y = 0; y < T.length; y++) {
          var top = b[b.length - 1],
            a = T[y].v,
            f = a.classID;
          if (f == "Grup") {
            var U = [];
            b.push(U);
            top.push([a.Nm.v, null, U, !0]);
          } else if (f == "preset") {
            top.push(m[c]);
            c++;
          } else if (f == "groupEnd") {
            b.pop();
          }
        }
        var Z = be.WD(b[0], be);
        return [[G, null, b[0], !0]];
      } else W = !0;
    } else W = !0;
    if (W) {
      for (var y = 0; y < m.length; y++) {
        var h = m[y][0].split("/");
        if (h.length > 1) {
          G = h[h.length - 2];
          m[y][0] = h.pop().split("=").pop();
        }
      }
      return [[G, null, m, !0]];
    }
  };
  be.WD = function (j, q) {
    var m = [],
      n = [];
    be.A0(j, m, n);
    var G = new Uint8Array(q.He(m)),
      W = new aj();
    W.xY(0, G.length);
    W.data.set(G, 0);
    var k = { phry: { classID: "null", hierarchy: { t: "VlLs", v: n } } },
      T = gM.c3(W, G.length, k);
    return W.data.slice(0, T);
  };
  be.A0 = function (j, q, m) {
    for (var y = 0; y < j.length; y++) {
      var n = j[y];
      if (n[1] == null) {
        m.push({
          t: "Objc",
          v: {
            classID: "Grup",
            Nm: { t: "TEXT", v: n[0] },
            zuid: { t: "TEXT", v: "0e93da90-b25e-9745-a55e-af1d4451561b" },
          },
        });
        be.A0(n[2], q, m);
        m.push({ t: "Objc", v: { classID: "groupEnd" } });
      } else {
        m.push({ t: "Objc", v: { classID: "preset" } });
        q.push(n);
      }
    }
  };
  be.VB = function (j, q) {
    var m = new Uint8Array(j),
      n = [],
      G = 0;
    if (M.IH(m, 0, 4) == "ASEF") G = be.ahH(m, n);
    else {
      G = be.an8(m, G, n);
      if (G + 3 < m.length) {
        n = [];
        G = be.an8(m, G, n);
      }
    }
    return be.asi(m, G, n, q);
  };
  be.ahH = function (j, q) {
    var m = 8,
      n = M.Z$(j, m),
      G,
      W = null,
      k,
      T,
      b,
      c;
    m += 4;
    for (var a = 0; a < n; a++) {
      var f = M._h(j, m);
      m += 2;
      var U = M.Z$(j, m);
      m += 4;
      var Z = m + U;
      if (f == 49153 || f == 1) {
        var h = M._h(j, m);
        m += 2;
        var u = M.Jz(j, m, h - 1);
        m += h * 2;
        if (f == 1) G = u;
        else W = u;
      }
      if (f == 1) {
        var i = M.IH(j, m, 4);
        m += 4;
        k = M.$C(j, m);
        m += 4;
        T = M.$C(j, m);
        m += 4;
        b = M.$C(j, m);
        m += 4;
        if (i == "RGB ") {
        } else if (i == "CMYK") {
          c = M.$C(j, m);
          m += 4;
          var x = UDOC.C.cmykToRgb([k, T, b, c]);
          k = x[0];
          T = x[1];
          b = x[2];
        } else alert("Unknown color space: " + i);
        q.push([
          (W ? W + " : " : "") + G,
          { o: k * 255, i: T * 255, X: b * 255 },
        ]);
      }
      m = Z;
    }
    return m;
  };
  be.an8 = function (j, q, m) {
    var n = M._h,
      G = M.A_,
      W = n(j, q);
    q += 2;
    var k = n(j, q);
    q += 2;
    for (var y = 0; y < k; y++) {
      var T = be.uQ(j, q),
        b = "clr" + y;
      q += 10;
      if (W == 2) {
        b = M.z5(j, q);
        q += 4 + b.length * 2 + 2;
      }
      m.push([b, T]);
    }
    return q;
  };
  be.uQ = function (j, q, m) {
    var n = m ? M.d9 : M._h,
      G = m ? M.O_ : M.A_,
      W = n(j, q),
      h = null;
    q += 2;
    var k = n(j, q);
    q += 2;
    var T = n(j, q);
    q += 2;
    var b = n(j, q);
    q += 2;
    var c = n(j, q);
    q += 2;
    var a = 1 / 65535,
      f = 255 / 65535,
      U = 100 / 65535,
      Z = 255 / 1e4;
    if (W == 0) h = { o: k * f, i: T * f, X: b * f };
    else if (W == 1) {
      h = B.ld(k * a, T * a, b * a);
      h.o *= 255;
      h.i *= 255;
      h.X *= 255;
    } else if (W == 2)
      h = B.MV.xH({
        classID: "CMYC",
        Cyn: { t: "doub", v: 100 - k * U },
        Mgnt: { t: "doub", v: 100 - T * U },
        Ylw: { t: "doub", v: 100 - b * U },
        Blck: { t: "doub", v: 100 - c * U },
      });
    else if (W == 7) {
      var u = B.DD(k / 100, G(j, q - 6) / 100, G(j, q - 4) / 100);
      h = u;
    } else if (W == 8) {
      h = { o: 255 - k * Z, i: 255 - T * Z, X: 255 - b * Z };
    } else if (W == 18) {
      var i = (255 * k) / 16384;
      h = { o: i, i: i, X: i };
    } else if (W == 65535) h = { o: 255, i: 255, X: 255 };
    else {
      throw W;
    }
    return h;
  };
  be.He = function (j) {
    var q = new aj(),
      m = 0,
      n = M.Mc;
    for (var G = 1; G < 3; G++) {
      n(q, m, G);
      m += 2;
      n(q, m, j.length);
      m += 2;
      for (var y = 0; y < j.length; y++) {
        var W = j[y];
        q.xY(m, 10);
        be.WG(q.data, m, W[1]);
        m += 10;
        if (G == 2) {
          var k = W[0] + "\0";
          M.mO(q, m, k);
          m += 4 + k.length * 2;
        }
      }
    }
    return q.data.slice(0, m).buffer;
  };
  be.WG = function (j, q, m) {
    var n = 65535 / 255,
      G = M.JP;
    G(j, q, 0);
    G(j, q + 2, Math.round(m.o * n));
    G(j, q + 4, Math.round(m.i * n));
    G(j, q + 6, Math.round(m.X * n));
    G(j, q + 8, 0);
  };
  be.hj = function (j, q, m) {
    var n = j[1],
      G = (255 << 24) | (n.X << 16) | (n.i << 8) | n.o,
      W = new Uint32Array(q * m);
    W.fill(G);
    var k = new Uint8Array(W.buffer),
      T = n.Sd == null ? 1 : n.Sd / 255;
    if (T != 1)
      for (var b = 0; b < m; b++)
        for (var c = 0; c < q; c++) {
          var a = (b * q + c) * 4,
            f = 255 - 50 * (((c >>> 3) ^ (b >>> 3)) & 1);
          k[a] = T * n.o + (1 - T) * f;
          k[a + 1] = T * n.i + (1 - T) * f;
          k[a + 2] = T * n.X + (1 - T) * f;
        }
    var U = UPNG.encode([W.buffer], q, m);
    return "data:image/png;base64," + gh.Sk(U);
  };
  function l4() {}
  l4.VB = function (j) {
    var q = new Uint8Array(j),
      m = M._h(q, 256 * 3);
    console.log(q);
    var n = [];
    for (var y = 0; y < m; y++)
      n.push(["", { o: q[y * 3], i: q[y * 3 + 1], X: q[y * 3 + 2], Sd: 255 }]);
    return [n];
  };
  l4.He = function (j) {
    j = j[0];
    var q = new Uint8Array(256 * 3 + 4);
    M.JP(q, 256 * 3, j.length);
    M.JP(q, 256 * 3 + 2, 65535);
    for (var y = 0; y < j.length; y++) {
      var m = j[y][1];
      q[3 * y] = m.o;
      q[3 * y + 1] = m.i;
      q[3 * y + 2] = m.X;
    }
    return q.buffer;
  };
  function fO() {}
  fO.VB = function (j) {
    var q = new Uint8Array(j),
      m = 4,
      n = {};
    n.ER = M.z5(q, m);
    m += 4 + n.ER.length * 2 + 2;
    n.exp = q[m++] == 1;
    n.yJ = [];
    var G = M.Z$(q, m);
    m += 4;
    for (var y = 0; y < G; y++) {
      var W = {};
      n.yJ.push(W);
      W.Wy = M._h(q, m);
      m += 2;
      W.shift = q[m++] == 1;
      W.asd = q[m++] == 1;
      W.color = M._h(q, m);
      m += 2;
      W.ER = M.z5(q, m);
      m += 4 + W.ER.length * 2 + 2;
      W.exp = q[m++] == 1;
      W.yJ = [];
      var k = M.Z$(q, m);
      m += 4;
      for (var T = 0; T < k; T++) {
        var b = {};
        W.yJ.push(b);
        b.exp = q[m++] == 1;
        b.f = q[m++] == 1;
        b.azc = q[m++] == 1;
        b.aj4 = q[m++];
        var c = M.IH(q, m, 4);
        m += 4;
        if (c == "TEXT") {
          b._D = fO.arM(q, m);
          m += 4 + b._D.length;
        } else if (c == "long") {
          b._D = M.IH(q, m, 4);
          m += 4;
        } else throw "e";
        b.v5 = fO.arM(q, m);
        m += 4 + b.v5.length;
        var a = M.dW(q, m);
        m += 4;
        if (a == -1) {
          b.SC = {};
          var f = fj.Ky(q, b.SC, m);
          m += f;
        }
      }
    }
    console.log(n);
    var U = new Uint8Array(fO.He([n]));
    for (var y = 0; y < U.length; y++)
      if (U[y] != q[y] && M.IH(q, y + 1, 4) != "None") {
        console.log(q.length, U.length);
        var Z = 4 * (y >>> 2) - 16;
        console.log(M.iD(q, Z, 64));
        console.log(M.iD(U, Z, 64));
        console.log(q.slice(Z, Z + 64));
        console.log(U.slice(Z, Z + 64));
        throw "i";
      }
    return [n];
  };
  fO.arM = function (j, q) {
    var m = M.Z$(j, q);
    return M.IH(j, q + 4, m);
  };
  fO.a6D = function (j, q, m) {
    M.hc(j, q, m.length);
    M.v3(j, q + 4, m);
  };
  fO.He = function (j) {
    var q = j[0],
      m = new aj(),
      n = 0;
    M.hc(m, n, 16);
    n += 4;
    M.mO(m, n, q.ER + "\0");
    n += 4 + q.ER.length * 2 + 2;
    m.xY(n, 1);
    m.data[n++] = q.exp ? 1 : 0;
    var G = q.yJ.length;
    M.hc(m, n, G);
    n += 4;
    for (var y = 0; y < G; y++) {
      var W = q.yJ[y];
      M.Mc(m, n, W.Wy);
      n += 2;
      m.xY(n, 2);
      m.data[n++] = W.shift ? 1 : 0;
      m.data[n++] = W.asd ? 1 : 0;
      M.Mc(m, n, W.color);
      n += 2;
      M.mO(m, n, W.ER + "\0");
      n += 4 + W.ER.length * 2 + 2;
      m.xY(n, 1);
      m.data[n++] = W.exp ? 1 : 0;
      var k = W.yJ.length;
      M.hc(m, n, k);
      n += 4;
      for (var T = 0; T < k; T++) {
        var b = W.yJ[T];
        m.xY(n, 4);
        m.data[n++] = b.exp ? 1 : 0;
        m.data[n++] = b.f ? 1 : 0;
        m.data[n++] = b.azc ? 1 : 0;
        m.data[n++] = b.aj4;
        var c =
          "LqFy Avrg GEfc PbPl Fbrs Bokh LnCr HsbP".split(" ").indexOf(b._D) !=
          -1;
        M.v3(m, n, c ? "long" : "TEXT");
        n += 4;
        if (!c) {
          fO.a6D(m, n, b._D);
          n += 4 + b._D.length;
        } else {
          M.v3(m, n, b._D);
          n += 4;
        }
        fO.a6D(m, n, b.v5);
        n += 4 + b.v5.length;
        M.Aa(m, n, b.SC ? -1 : 0);
        n += 4;
        if (b.SC) {
          var a = fj.LM(m, b.SC, n);
          n += a;
        }
      }
    }
    return m.data.slice(0, n).buffer;
  };
  function iA() {}
  iA.VB = function (j) {
    var q = new Uint8Array(j),
      m = 0,
      n = M.Z$(q, m),
      b;
    m += 4;
    var G = M.IH(q, m, 8);
    m += 8;
    var W = M.YZ(q, m);
    m += 4;
    var k = M.YZ(q, m);
    m += 4;
    var T = M.YZ(q, m);
    m += 4;
    console.log(W, k, T);
    if (n == 2) {
      b = new Float32Array(j, 32, (j.byteLength - 32) >>> 2);
    } else if (n == 3 || n == 4) {
      b = new Float32Array(k * T * 2);
      var c = 0,
        a = 0,
        f = !0;
      m = n == 3 ? 32 : 16 + 8 + 40;
      while (m < q.length) {
        var U = M.YZ(q, m);
        m += 4;
        if (f) a += U;
        else {
          for (var y = 0; y < U; y++) {
            b[(c + a + y) << 1] = M.x5(q, m);
            b[((c + a + y) << 1) + 1] = M.x5(q, m + 4);
            m += 8;
          }
          a += U;
        }
        f = !f;
        if (U != 0 && a == k) {
          c += k;
          a = 0;
          f = !0;
          if (c == k * T) break;
        }
      }
    } else throw "unknown Mesh version: " + n;
    return { GM: k, uu: T, map: b };
  };
  iA.RS = function (j) {
    var q = j.GM,
      m = j.uu,
      n = j.map,
      G = new Uint8Array(32 + m * q * 8 + m * 8),
      W = 0,
      k = 0;
    M.ZN(G, W, 3);
    W += 4;
    M.Sc(G, W, "yfqLhseM");
    W += 8;
    M.kA(G, W, 2);
    W += 4;
    M.kA(G, W, q);
    W += 4;
    M.kA(G, W, m);
    W += 4;
    M.kA(G, W, 0);
    W += 4;
    M.kA(G, W, 1);
    W += 4;
    for (var T = 0; T < m; T++) {
      M.kA(G, W, 0);
      W += 4;
      M.kA(G, W, q);
      W += 4;
      for (var b = 0; b < q; b++) {
        M.H$(G, W, n[k]);
        M.H$(G, W + 4, n[k + 1]);
        k += 2;
        W += 8;
      }
    }
    return G.buffer;
  };
  function jH() {}
  jH.VB = function (j) {
    var q = new Uint8Array(j),
      m = 0,
      n = M.IH(q, m, 4);
    m += 4;
    var G = M._h(q, m);
    m += 2;
    var W = M.Z$(q, m);
    m += 4;
    var k = [];
    for (var y = 0; y < W; y++) {
      var T = M.Z$(q, m);
      m += 4;
      var b = {
        classID: "ShpC",
        Nm: { t: "TEXT", v: "" },
        Crv: { t: "VlLs", v: [] },
      };
      k.push(b);
      var c = M.z5(q, m);
      b.Nm.v = c;
      m += 4 + c.length * 2 + 2;
      var a = M._h(q, m);
      m += 2;
      var f = M._h(q, m);
      m += 2;
      for (var U = 0; U < f; U++) {
        var Z = B.SD.Fn(0, 0, !0);
        Z.v.Vrtc.v = M._h(q, m);
        m += 2;
        Z.v.Hrzn.v = M._h(q, m);
        m += 2;
        b.Crv.v.push(Z);
      }
      if (T == 1) {
      } else if (T == 2) {
        for (var U = 0; U < f; U++) {
          b.Crv.v[U].v.Cnty.v = q[m] == 1;
          m += 1;
        }
      } else throw "error";
      var h = M.Z$(q, m);
      m += 4;
      var u = M.Z$(q, m);
      m += 4;
    }
    return k;
  };
  jH.KX = function (j, q) {
    j.Nm.v = q;
  };
  jH.He = function (j) {
    var q = new aj(),
      m = 0;
    M.v3(q, m, "8BFS");
    m += 4;
    M.Mc(q, m, 1);
    m += 2;
    M.hc(q, m, j.length);
    m += 4;
    for (var y = 0; y < j.length; y++) {
      M.hc(q, m, 2);
      m += 4;
      var n = j[y];
      M.mO(q, m, n.Nm.v + "\0");
      m += 4 + n.Nm.v.length * 2 + 2;
      M.Mc(q, m, 2);
      m += 2;
      var G = n.Crv.v.length;
      M.Mc(q, m, G);
      m += 2;
      for (var W = 0; W < G; W++) {
        var k = n.Crv.v[W];
        M.Mc(q, m, k.v.Vrtc.v);
        m += 2;
        M.Mc(q, m, k.v.Hrzn.v);
        m += 2;
      }
      q.xY(m, G);
      for (var W = 0; W < G; W++) {
        q.data[m] = n.Crv.v[W].v.Cnty.v;
        m++;
      }
      M.hc(q, m, 0);
      m += 4;
      M.hc(q, m, 0);
      m += 4;
    }
    return q.data.slice(0, m).buffer;
  };
  function f5() {}
  f5.VB = function (j, q) {
    var m = new Uint8Array(j),
      n = 4,
      G = q.split("/").pop().split(".")[0],
      W = M._h(m, n);
    n += 2;
    var k = M.Z$(m, n);
    n += 4;
    var T = [];
    for (var y = 0; y < k; y++) {
      var b = {};
      T.push(b);
      n = f5.amO(m, n, b);
      b.name = G + "/" + b.name.split("=").pop();
    }
    return T;
  };
  f5.KX = function (j, q) {
    j.name = q;
  };
  f5.He = function (j) {
    var q = new aj(),
      m = 0;
    M.v3(q, m, "8BPT");
    m += 4;
    M.Mc(q, m, 1);
    m += 2;
    M.hc(q, m, j.length);
    m += 4;
    for (var y = 0; y < j.length; y++) {
      var n = j[y],
        G = n.name;
      n.name = n.name.split("/").pop();
      m = f5.amK(q, m, n);
      n.name = G;
    }
    return q.data.slice(0, m).buffer;
  };
  f5.ZM = function (j, q, m, n) {
    var G = n ? M.YZ : M.Z$,
      W = q + m,
      k = [];
    while (q < W) {
      var T = {},
        b = G(j, q);
      q += 4;
      var c = q;
      q = f5.amO(j, q, T, n);
      if (!T.Og[1].jG()) k.push(T);
      if (b % 4 != 0) b += 4 - (b % 4);
      q = c + b;
    }
    return k;
  };
  f5.iQ = function (j, q, m) {
    for (var y = 0; y < m.length; y++) {
      var n = m[y];
      q += 4;
      var G = q;
      q = f5.amK(j, q, n);
      var W = q - G;
      M.hc(j, G - 4, W);
      if (W % 4 != 0) G += 4 - (W % 4);
      q = G + W;
    }
    return q;
  };
  f5.amO = function (j, q, m, n) {
    var G = n ? M.YZ : M.Z$,
      W = n ? M.d9 : M._h,
      k = n ? M.xG : M.z5,
      T = G(j, q);
    q += 4;
    if (T != 1) alert("Unknown version of pattern");
    var b = G(j, q);
    q += 4;
    if (b != 1 && b != 2 && b != 3)
      console.log("Unsupported mode of pattern: " + b);
    var c = W(j, q);
    q += 2;
    var a = W(j, q);
    q += 2;
    var f = new hk(0, 0, a, c);
    m.name = k(j, q);
    q += 4 + 2 * m.name.length + 2;
    var U = j[q];
    q++;
    m.id = M.IH(j, q, U);
    q += m.id.length;
    var Z = -1;
    if (b == 2) {
      Z = q;
      q += 3 * 256 + 4;
    }
    var h = new B.Rx(a * c);
    q = f5.azg(j, q, h, n);
    if (f.C() > 1e8) {
      m.Og = [B.j(4), new hk(0, 0, 1, 1)];
      return q;
    }
    if (b == 2) {
      for (var y = 0; y < h.o.length; y++) {
        var u = 3 * h.o[y];
        h.o[y] = j[Z + u + 0];
        h.i[y] = j[Z + u + 1];
        h.X[y] = j[Z + u + 2];
      }
    }
    var i = B.j(f.C() * 4);
    B.Nr(h, i);
    m.Og = [i, f];
    return q;
  };
  f5.amK = function (j, q, m) {
    var n = m.Og[0],
      G = m.Og[1];
    M.hc(j, q, 1);
    q += 4;
    M.hc(j, q, 3);
    q += 4;
    M.Mc(j, q, G.$);
    q += 2;
    M.Mc(j, q, G.r);
    q += 2;
    M.mO(j, q, m.name + "\0");
    q += 4 + 2 * m.name.length + 2;
    M.t1(j, q, m.id.length);
    q++;
    M.v3(j, q, m.id);
    q += m.id.length;
    var W = new B.Rx(G.C());
    B.fV(n, W);
    q = f5.ai2(j, q, W, G);
    return q;
  };
  f5.azg = function (j, q, m, n) {
    var G = n ? M.YZ : M.Z$,
      W = n ? M.d9 : M._h,
      k = q,
      T = { HA: null, rO: [], ahD: null, Xd: null },
      b = G(j, q);
    q += 4;
    var c = G(j, q);
    q += 4;
    T.HA = M.X7(j, q, n);
    q += 16;
    var a = G(j, q);
    q += 4;
    for (var y = 0; y < a + 2; y++) {
      var f = G(j, q);
      q += 4;
      if (f == 0) continue;
      var U = G(j, q);
      q += 4;
      if (U == 0) continue;
      var Z = G(j, q);
      q += 4;
      var h = M.X7(j, q, n);
      q += 16;
      var u = W(j, q);
      q += 2;
      var i = j[q];
      q++;
      var x = aW.el(!1, Z, j, h.r, h.$, q, i, U, n);
      x = B.sL(x, 8);
      if (y < a) T.rO.push(x);
      if (y == a) T.ahD = x;
      if (y == a + 1) T.Xd = x;
      q += U - 23;
    }
    if (!T.HA.jG()) {
      if (T.rO[0]) m.o = T.rO[0];
      if (T.rO[1]) m.i = T.rO[1];
      else m.i = T.rO[0].slice(0);
      if (T.rO[2]) m.X = T.rO[2];
      else m.X = T.rO[0].slice(0);
      if (T.Xd) m.Sd = T.Xd;
      else m.Sd.fill(255);
    }
    return q;
  };
  f5.ai2 = function (j, q, m, n) {
    var G = q,
      W = { HA: n, rO: [m.o, m.i, m.X], ahD: null, Xd: m.Sd };
    M.hc(j, q, 3);
    q += 4;
    M.hc(j, q, 0);
    q += 4;
    M.KY(j, q, n);
    q += 16;
    M.hc(j, q, 24);
    q += 4;
    for (var y = 0; y < 24 + 2; y++) {
      var k = q,
        T = y < 3 || y == 25 ? 1 : 0;
      M.hc(j, q, T);
      q += 4;
      if (T == 0) continue;
      M.hc(j, q, 0);
      q += 4;
      M.hc(j, q, 8);
      q += 4;
      M.KY(j, q, n);
      q += 16;
      M.Mc(j, q, 8);
      q += 2;
      M.t1(j, q, 1, 1);
      q++;
      var b = y < 3 ? W.rO[y] : W.Xd;
      j.xY(q, n.C() + 2);
      q = aW.At(!1, b, j.data, n.r, n.$, q, 1);
      M.hc(j, k + 4, q - k - 8);
    }
    M.hc(j, G + 4, q - G - 8);
    return q;
  };
  function e8() {}
  e8.VB = function (j, q) {
    var m = new Uint8Array(j),
      G = 0;
    if (m[0] == 71) return e8.a84(m);
    var n = q.split("/").pop().split(".")[0],
      W = M.IH(m, G, 4);
    G += 4;
    var k = M._h(m, G);
    G += 2;
    var T = [];
    if (k <= 3) {
      var b = M._h(m, G);
      G += 2;
      for (var y = 0; y < b; y++) {
        var c = m[G++],
          a = M.IH(m, G, c);
        G += c;
        var f = e8.a1Y(m, G, a),
          U = f[0];
        G = f[1];
        T.push(U);
      }
    } else {
      var f = {},
        Z = fj.Ky(m, f, G + 4),
        h = f.GrdL.v;
      for (var y = 0; y < h.length; y++) T[y] = h[y].v.Grad.v;
      G += 4 + Z;
    }
    for (var y = 0; y < T.length; y++) T[y] = [T[y].Nm.v, T[y]];
    return be.asi(m, G, T, q);
  };
  e8.KX = function (j, q) {
    j.Nm.v = q;
  };
  e8.He = function (j) {
    var q = new aj(),
      m = 0;
    M.v3(q, m, "8BGR");
    m += 4;
    M.Mc(q, m, 5);
    m += 2;
    M.hc(q, m, 16);
    m += 4;
    var n = { classID: "null", GrdL: { t: "VlLs", v: [] } },
      G = n.GrdL.v;
    for (var y = 0; y < j.length; y++) {
      var W = B.S(j[y]);
      W[1].Nm.v = W[0];
      G[y] = {
        t: "Objc",
        v: {
          classID: "Grdn",
          __name: "Gradient ",
          Grad: { t: "Objc", v: W[1] },
        },
      };
    }
    m += fj.LM(q, n, m);
    return q.data.slice(0, m).buffer;
  };
  e8.a1Y = function (j, q, m, n) {
    var G = {
        classID: "Grdn",
        Clrs: { t: "VlLs", v: [] },
        GrdF: { t: "enum", v: { GrdF: "CstS" } },
        Intr: { t: "doub", v: 4096 },
        Nm: { t: "TEXT", v: m },
        Trns: { t: "VlLs", v: [] },
      },
      W = n ? M.d9 : M._h,
      k = n ? M.YZ : M.Z$,
      T = W(j, q);
    q += 2;
    if (T == 0) throw "e";
    for (var y = 0; y < T; y++) {
      var b = k(j, q),
        c = k(j, q + 4),
        a = be.uQ(j, q + 8, n),
        f = {
          t: "Objc",
          v: {
            classID: "Clrt",
            Clr: {
              t: "Objc",
              v: {
                classID: "RGBC",
                Rd: { t: "doub", v: a.o },
                Grn: { t: "doub", v: a.i },
                Bl: { t: "doub", v: a.X },
              },
            },
            Type: { t: "enum", v: { Clry: "UsrS" } },
            Lctn: { t: "long", v: b },
            Mdpn: { t: "long", v: c },
          },
        };
      G.Clrs.v.push(f);
      q += 20;
    }
    var U = W(j, q);
    q += 2;
    for (var y = 0; y < U; y++) {
      var b = k(j, q),
        c = k(j, q + 4),
        Z = W(j, q + 8),
        f = {
          t: "Objc",
          v: {
            classID: "TrnS",
            Opct: {
              t: "UntF",
              v: { type: "#Prc", val: Math.round((100 * Z) / 255) },
            },
            Lctn: { t: "long", v: b },
            Mdpn: { t: "long", v: c },
          },
        };
      G.Trns.v.push(f);
      q += 10;
    }
    var h = W(j, q);
    q += 2;
    G.Intr.v = h == 2 ? W(j, q) : 4096;
    q += 2;
    var u = W(j, q);
    q += 2;
    return [G, q];
  };
  e8.axG = function (j, q, m) {
    var n = m.Clrs.v.length;
    M.Mc(j, q, n);
    q += 2;
    for (var y = 0; y < n; y++) {
      var G = m.Clrs.v[y];
      M.hc(j, q, G.v.Lctn.v);
      M.hc(j, q + 4, G.v.Mdpn.v);
      M.Mc(j, q + 8, 0);
      var W = B.MV.Ia(B.MV.xH(G.v.Clr.v)),
        k = [W.Rd.v, W.Grn.v, W.Bl.v, 0];
      for (var T = 0; T < 4; T++)
        M.Mc(j, q + 10 + T * 2, Math.round(65535 * (k[T] / 255)));
      q += 20;
    }
    var b = m.Trns.v.length;
    M.Mc(j, q, b);
    q += 2;
    for (var y = 0; y < b; y++) {
      var G = m.Trns.v[y];
      M.hc(j, q, G.v.Lctn.v);
      M.hc(j, q + 4, G.v.Mdpn.v);
      M.Mc(j, q + 8, Math.round((255 * G.v.Opct.v.val) / 100));
      q += 10;
    }
    M.Mc(j, q, 2);
    q += 2;
    M.Mc(j, q, m.Intr.v);
    q += 2;
    M.Mc(j, q, 32);
    q += 2;
    return q;
  };
  e8.a84 = function (j) {
    var q = M.K6(j, 0, j.length).split("\n"),
      m = parseFloat(q[2]),
      n = [],
      G = JSON.parse(eu.oy[eu.order.indexOf("GrFl")]).Grad.v;
    G.Intr.v = 0;
    G.Nm.v = q[1];
    for (var y = 0; y < m; y++) {
      var W = q[3 + y].split(" ").map(parseFloat),
        k = W[11],
        T = W[12];
      n.push([W[0], W.slice(3, 6), W[6]]);
      if (T != 0) {
        var b = B.vE(W[3], W[4], W[5]),
          c = B.vE(W[7], W[8], W[9]),
          a = b.uu,
          f = c.uu;
        if (T == 1 && a > f) f++;
        if (T == 2 && a < f) a++;
        var U = Math.round(Math.abs(f - a) * 7);
        if (U > 1)
          for (var Z = 0; Z < U; Z++) {
            var h = 1 - (Z + 1) / (U + 1),
              u = 1 - h,
              i = B.ld(h * a + u * f, h * b.fO + u * c.fO, h * b.YF + u * c.YF);
            n.push([
              h * W[0] + u * W[2],
              [i.o, i.i, i.X],
              h * W[6] + u * W[10],
            ]);
          }
      }
      n.push([W[2], W.slice(7, 10), W[10]]);
    }
    n.sort(function (x, X) {
      return x[0] - X[0];
    });
    B.MV.gB(n, G);
    return [G];
  };
  e8.hj = function (j, q, m) {
    var n = L.Pr.hj(j[1], q, m, Math.PI / 4, 16777215, 0);
    return n;
  };
  function eT() {}
  eT.VB = function (j) {
    var q = new Uint8Array(j),
      m = [],
      n = [],
      G = [],
      W = [],
      k = [],
      T = 0,
      b = M.IH(q, T, 4);
    T += 4;
    var c = M.Z$(q, T);
    T += 4;
    var a = M.Z$(q, T);
    T += 4;
    while (T < q.length) {
      var f = M.IH(q, T, 4);
      T += 4;
      var U = M.IH(q, T, 4);
      T += 4;
      var Z = M.Z$(q, T);
      T += 4;
      if (U == "tppa") {
        n = f5.ZM(q, T, Z);
        T += Z;
      } else if (U == "tpbd") {
        G = io.ao6(q, T, Z, 1, 1);
        T += Z;
      } else if (U == "tptp") {
        var h = M.Z$(q, T);
        T += 4;
        for (var y = 0; y < h; y++) {
          var u = M.z5(q, T);
          T += 6 + u.length * 2;
          T += 4;
          var i = {};
          T += fj.Ky(q, i, T);
          m.push([u, i]);
        }
        while ((T & 3) != 0) T++;
      } else if (U == "tpsh") {
        var x = T,
          X = q.slice(T, T + Z);
        while (T < x + Z) {
          var $ = M.Z$(q, T);
          T += 4;
          T = hR.avj(q, T, "Shape", W);
        }
        T = x + Z;
      } else if (U == "tpst") {
        var x = T;
        T += 4;
        while (T < x + Z) {
          var H = M.Z$(q, T);
          T += 4;
          var C = T,
            l = M.Z$(q, T);
          T += 4;
          var i = { So: {}, yL: {} };
          k.push(i);
          T += 4;
          T += fj.Ky(q, i.So, T);
          T += 4;
          T += fj.Ky(q, i.yL, T);
          T = C + H;
          var v = i.yL.Lefx;
          if (v) {
            if (v.v.masterFXSwitch == null)
              v.v.masterFXSwitch = { t: "bool", v: !0 };
            gM.KI(v.v);
          }
        }
        T = x + Z;
      } else {
        console.log(q.slice(T - 8, T + 64));
        console.log(M.IH(q, T - 8, 64));
        throw U;
      }
    }
    return { cd: G, cs: n, list: m, aF2: W, P_: k };
  };
  eT.KX = function (j, q) {
    j[0] = q;
  };
  eT.He = function (j) {
    var q = new aj(),
      m = 0;
    M.v3(q, m, "8BTP");
    m += 4;
    M.hc(q, m, 3);
    m += 4;
    M.hc(q, m, 1);
    m += 4;
    var n = [j.cs, j.cd, j.list];
    for (var y = 0; y < 3; y++) {
      if (n[y].length == 0) continue;
      M.v3(q, m, "8BIM");
      m += 4;
      var G = ["tppa", "tpbd", "tptp"][y];
      M.v3(q, m, G);
      m += 4;
      var W = m;
      m += 4;
      if (G == "tppa") {
        m = f5.iQ(q, m, j.cs);
      } else if (G == "tpbd") {
        m = io.a02(q, m, j.cd);
      } else if (G == "tptp") {
        M.hc(q, m, j.list.length);
        m += 4;
        for (var k = 0; k < j.list.length; k++) {
          var T = j.list[k];
          M.mO(q, m, T[0] + "\0");
          m += 6 + T[0].length * 2;
          M.hc(q, m, 16);
          m += 4;
          m += fj.LM(q, T[1], m);
        }
      }
      M.hc(q, W, m - W - 4);
      while ((m & 3) != 0) m++;
      q.xY(m, 0);
    }
    return q.data.slice(0, m).buffer;
  };
  function i_() {}
  i_.VB = function (j, q) {
    var m = new Uint8Array(j),
      n;
    if (M.Z$(m, 0) == m.length) n = "icc";
    else if (m[0] == "<".charCodeAt(0)) n = "look";
    else if (M.Gf(m, "LUT_3D_SIZE") != -1) n = "cube";
    else n = "3DL";
    if (n != "icc") {
      var G = i_.acI(m, n),
        W = i_.ajM(G[0], G[1]);
      m = W;
    }
    var k = [];
    for (var y = 0; y < m.length; y++) k.push(m[y]);
    return [
      {
        classID: "null",
        Dthr: { t: "bool", v: !0 },
        Nm: { t: "TEXT", v: q ? q : "file.icc" },
        lookupType: { t: "enum", v: { colorLookupType: "abstractProfile" } },
        profile: { t: "tdta", v: k },
      },
    ];
  };
  i_.He = function (j) {
    var q = j[0],
      m = new Uint8Array(q.profile.v);
    return m.buffer;
  };
  i_.KX = function (j, q) {
    j.Nm.v = q;
  };
  i_.ajM = function (j, q) {
    var m = new aj(),
      n = 128;
    m.xY(0, 128);
    var G = [
      0, 0, 14, 204, 65, 68, 66, 69, 4, 0, 0, 0, 108, 105, 110, 107, 82, 71, 66,
      32, 82, 71, 66, 32, 7, 227, 0, 7, 0, 27, 0, 8, 0, 6, 0, 49, 97, 99, 115,
      112, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      0, 0, 0, 0, 0, 0, 0, 246, 214, 0, 1, 0, 0, 0, 0, 211, 45, 65, 68, 66, 69,
      219, 126, 245, 21, 206, 223, 186, 23, 165, 212, 201, 219, 250, 10, 33, 62,
    ];
    for (var y = 0; y < G.length; y++) m.data[y] = G[y];
    var W = ["desc", "A2B0"],
      k = W.length,
      T = 128 + 4 + k * 12;
    M.hc(m, n, k);
    n += 4;
    for (var b = 0; b < k; b++) {
      var c = W[b];
      M.v3(m, n, c);
      n += 4;
      M.hc(m, n, T);
      n += 4;
      var a = T;
      if (c == "desc") {
        M.v3(m, a, "mluc");
        a += 4;
        a += 4;
        M.hc(m, a, 1);
        a += 4;
        M.hc(m, a, 12);
        a += 4;
        M.v3(m, a, "enUS");
        a += 4;
        var f = "ICC by Photopea\0",
          U = f.length * 2 + 2;
        M.hc(m, a, U);
        a += 4;
        M.hc(m, a, 28);
        a += 4;
        m.xY(a, U);
        for (var y = 0; y < f.length; y++)
          m.data[a + y * 2 + 1] = f.charCodeAt(y);
        a += U;
      }
      if (c == "A2B0") {
        M.v3(m, a, "mAB ");
        a += 4;
        a += 4;
        m.xY(a, 4);
        m.data[a] = 3;
        m.data[a + 1] = 3;
        a += 4;
        m.xY(a, 4 * 5);
        a += 4 * 3;
        M.hc(m, a, a + 8 - T);
        a += 4;
        a += 4;
        m.xY(a, 20);
        m.data[a] = j;
        m.data[a + 1] = j;
        m.data[a + 2] = j;
        a += 16;
        m.data[a] = 2;
        a += 4;
        var Z = j * j * j * 3;
        m.xY(a, Z * 2);
        for (var y = 0; y < Z; y++)
          M.JP(
            m.data,
            a + y * 2,
            Math.max(0, Math.min(65535, Math.round(q[y] * 65535)))
          );
        a += Z * 2;
      }
      var h = a - T;
      while ((h & 3) != 0) h++;
      M.hc(m, n, h);
      n += 4;
      T += h;
    }
    M.hc(m, 0, T);
    return m.data.slice(0, T);
  };
  i_.acI = function (j, q) {
    q = "LUTFormat" + q.toUpperCase();
    var m = [],
      n = 0,
      G = M.K6(j, 0, j.length),
      W = "";
    for (var y = 0; y < j.length && W == ""; y++) {
      if (j[y] == 10) W = "\n";
      else if (j[y] == 13) {
        W = "\r";
        if (j[y + 1] == 10) W += "\n";
      }
    }
    if (q == "LUTFormatCUBE") {
      var k = G.split(W);
      for (var y = 0; y < k.length; y++) {
        if (k[y] == "" || k[y][0] == "#") continue;
        var T = k[y].split(" "),
          b = T[0];
        if (b == "LUT_3D_SIZE") {
          n = parseInt(T[1]);
          continue;
        }
        if (["TITLE", "DOMAIN_MIN", "DOMAIN_MAX"].indexOf(b) != -1) continue;
        m.push(parseFloat(T[0]), parseFloat(T[1]), parseFloat(T[2]));
      }
      m = i_.a6A(n, m);
    } else if (q == "LUTFormat3DL") {
      var k = G.split(W),
        c = 1 / 4095;
      for (var y = 0; y < k.length; y++) {
        var a = k[y];
        if (a == "" || a == "3DMESH" || a.startsWith("Mesh") || a[0] == "#")
          continue;
        var T = a.split(" "),
          b = T[0];
        if (n == 0) {
          n = T.length;
          continue;
        }
        m.push(
          parseFloat(T[0]) * c,
          parseFloat(T[1]) * c,
          parseFloat(T[2]) * c
        );
      }
    } else if (q == "LUTFormatLOOK") {
      var f = new DOMParser(),
        U = f.parseFromString(G, "text/xml"),
        Z = U.getElementsByTagName("LUT")[0],
        h = Z.children[0].textContent;
      n = parseInt(JSON.parse(h));
      var u = Z.children[1].textContent;
      u = u.replace(/"/g, "").replace(/\s/g, "");
      var i = 3 * n * n * n,
        x = i * 4,
        X = new Uint8Array(x);
      for (var y = 0; y < x; y++) {
        var $ = u.charCodeAt(y * 2),
          H = u.charCodeAt(y * 2 + 1),
          C = $ < 58 ? $ - 48 : $ - 55,
          l = H < 58 ? H - 48 : H - 55;
        X[y] = (C << 4) + l;
      }
      for (var y = 0; y < i; y++) m.push(M.x5(X, y << 2));
      m = i_.a6A(n, m);
    } else throw q;
    return [n, m];
  };
  i_.aw9 = function (j, q, m) {
    var n = [
        "#Created by www.Photopea.com",
        'TITLE "' + m + '"',
        "",
        "#LUT size",
        "LUT_3D_SIZE " + q,
        "",
        "#data domain",
        "DOMAIN_MIN 0.0 0.0 0.0",
        "DOMAIN_MAX 1.0 1.0 1.0",
        "",
        "#LUT data points",
      ],
      G = 6;
    for (var y = 0; y < j.length; y += 3) {
      n.push(
        j[y].toFixed(G) + " " + j[y + 1].toFixed(G) + " " + j[y + 2].toFixed(G)
      );
    }
    n.push("");
    return M.Nh(n.join("\n")).buffer;
  };
  i_.a6A = function (j, q) {
    var m = [],
      n = j * j * j;
    for (var y = 0; y < n; y++) m.push(0, 0, 0);
    for (var G = 0; G < j; G++)
      for (var W = 0; W < j; W++)
        for (var k = 0; k < j; k++) {
          var y = 3 * (k + W * j + G * j * j),
            T = 3 * (G + W * j + k * j * j);
          m[T] = q[y];
          m[T + 1] = q[y + 1];
          m[T + 2] = q[y + 2];
        }
    return m;
  };
  function fj() {}
  fj.Ky = function (j, q, m, n, G, W) {
    var k = m,
      a;
    if (G == null) G = 0;
    var T = W ? M.YZ : M.Z$,
      b = W ? M.dq : M.dW,
      c = W ? M.xG : M.z5,
      f = T(j, m);
    if (f == 0) {
      a = "";
      m += 4;
    } else {
      a = c(j, m);
      m += 4 + 2 * a.length + 2;
    }
    if (a != "") q.__name = a;
    q.classID = fj.kE(j, m, W);
    if (n) console.log("\t".repeat(G), "- reading descriptor", q.classID, m);
    m += fj.IQ(j, m, W);
    var U = b(j, m);
    m += 4;
    for (var y = 0; y < U; y++) {
      var Z = fj.kE(j, m, W);
      m += fj.IQ(j, m, W);
      var h = fj.aED(j, m, n, G, W);
      q[Z] = h;
      m += h.size;
      delete h.size;
    }
    return m - k;
  };
  fj.LM = function (j, q, m, n) {
    var G = m,
      W = q.__name;
    if (W == null) W = "";
    W += "\0";
    M.mO(j, m, W);
    m += 4 + 2 * W.length;
    fj.$K(j, m, q.classID);
    m += fj.IQ(j.data, m);
    M.Aa(j, m, Object.keys(q).length - 1 - (q.__name == null ? 0 : 1));
    m += 4;
    for (var k in q) {
      if (k == "classID") continue;
      if (k == "__name") continue;
      fj.$K(j, m, k);
      m += fj.IQ(j.data, m);
      m += fj.amR(j, m, q[k]);
    }
    return m - G;
  };
  fj.aED = function (j, q, m, n, G) {
    var W = q,
      k = M.Vo(j, q, G);
    q += 4;
    var T = G ? M.NR : M.ro,
      b = G ? M.YZ : M.Z$,
      c = G ? M.dq : M.dW,
      a = G ? M.xG : M.z5,
      f = { size: 0, t: k, v: null };
    if (m) console.log("\t".repeat(n), "reading key", k, W);
    switch (k) {
      case "obj ":
      case "VlLs":
        f.v = [];
        var U = b(j, q);
        q += 4;
        for (var y = 0; y < U; y++) {
          var Z = fj.aED(j, q, m, n + 1, G);
          q += Z.size;
          delete Z.size;
          f.v.push(Z);
        }
        break;
      case "UntF":
        f.v = { type: M.Vo(j, q, G), val: T(j, q + 4) };
        q += 12;
        break;
      case "doub": {
        f.v = T(j, q);
        q += 8;
        break;
      }
      case "bool":
        f.v = j[q] == 1;
        q += 1;
        break;
      case "long":
        f.v = c(j, q);
        q += 4;
        break;
      case "comp":
        f.v = c(j, q + 4);
        q += 8;
        break;
      case "Objc":
        f.v = {};
        var h = fj.Ky(j, f.v, q, m, n + 1, G);
        q += h;
        break;
      case "TEXT":
        var u = b(j, q);
        if (u == 0) {
          f.v = "";
          q += 4;
        } else {
          f.v = a(j, q);
          q += 4 + f.v.length * 2 + 2;
        }
        break;
      case "enum":
        var i = fj.kE(j, q, G);
        q += fj.IQ(j, q, G);
        var x = fj.kE(j, q, G);
        q += fj.IQ(j, q, G);
        f.v = {};
        f.v[i] = x;
        break;
      case "tdta":
        var X = c(j, q);
        q += 4;
        f.v = Array.from(j.slice(q, q + X));
        q += X;
        break;
      case "ObAr":
        var $ = b(j, q);
        q += 4;
        var H = a(j, q);
        q += 4 + 2 * H.length + 2;
        if (H != "") throw H;
        var C = fj.kE(j, q, G);
        q += 4 + Math.max(4, C.length);
        f.v = { classID: C, arr: [] };
        var l = b(j, q);
        q += 4;
        for (var y = 0; y < l; y++) {
          var C = fj.kE(j, q, G);
          q += 4 + Math.max(4, C.length);
          var i = M.Vo(j, q, G);
          q += 4;
          var v = M.Vo(j, q, G);
          q += 4;
          var K = { id: C, type: i, uID: v, arr: [] };
          f.v.arr.push(K);
          var S = b(j, q, 4);
          q += 4;
          for (var o = 0; o < S; o++) {
            var V = T(j, q);
            q += 8;
            K.arr.push(V);
          }
        }
        break;
      case "Pth ":
        if (G) throw "e";
        var P = q,
          X = M.Z$(j, q);
        q += 4;
        var z = M.IH(j, q, 4);
        q += 4;
        var E = M.YZ(j, q);
        q += 4;
        var A = M.ax3(j, q);
        q += 4 + A.length * 2;
        f.v = { sig: z, pth: A };
        break;
      case "Clss":
      case "type":
      case "rele":
        var A = a(j, q);
        q += 4 + A.length * 2 + 2;
        var N = fj.kE(j, q, G);
        q += 4 + Math.max(4, N.length);
        f.v = { classID: N };
        if (A != "") f.v.__name = A;
        if (k == "rele") {
          f.v.val = c(j, q);
          q += 4;
        }
        break;
      case "prop":
      case "Enmr":
      case "indx":
      case "name":
      case "Idnt":
        var Q = fj.QT[k],
          A = a(j, q);
        q += 4 + A.length * 2 + 2;
        if (A.length != 0) {
          console.log("String found", k, A);
        }
        f.v = {};
        for (var y = 0; y < Q.length; y++) {
          var N = fj.kE(j, q, G);
          q += 4 + Math.max(4, N.length);
          f.v[Q[y]] = N;
        }
        if (k == "name") {
          var A = a(j, q);
          q += 4 + A.length * 2 + 2;
          f.v.val = A;
        }
        if (k == "indx" || k == "Idnt") {
          f.v.val = b(j, q);
          q += 4;
        }
        break;
      case "alis":
        var X = b(j, q);
        q += 4;
        f.v = M.IH(j, q, X);
        q += X;
        break;
      default: {
        console.log("unknown oskey: " + k + ", " + W);
        throw "e";
        return f;
      }
    }
    if (m) {
      console.log("\t".repeat(n), f.v);
      console.log("\t".repeat(n), "======", q);
    }
    f.size = q - W;
    return f;
  };
  fj.QT = {
    name: ["classID"],
    prop: ["classID", "keyID"],
    Enmr: ["classID", "typeID", "enum"],
    indx: ["classID"],
    Idnt: ["classID"],
  };
  fj.amR = function (j, q, m) {
    var n = q,
      G = m.t;
    m = m.v;
    M.v3(j, q, G);
    q += 4;
    switch (G) {
      case "obj ":
      case "VlLs":
        M.Aa(j, q, m.length);
        q += 4;
        for (var W = 0; W < m.length; W++) {
          var k = fj.amR(j, q, m[W]);
          q += k;
        }
        break;
      case "UntF":
        M.v3(j, q, m.type);
        M.GD(j, q + 4, m.val);
        q += 12;
        break;
      case "doub":
        M.GD(j, q, m);
        q += 8;
        break;
      case "bool":
        M.t1(j, q, m ? 1 : 0, 1);
        q += 1;
        break;
      case "long":
        M.Aa(j, q, m);
        q += 4;
        break;
      case "comp":
        M.Aa(j, q + 4, m);
        q += 8;
        break;
      case "Objc":
        var k = fj.LM(j, m, q);
        q += k;
        break;
      case "TEXT":
        M.mO(j, q, m + "\0");
        q += 4 + m.length * 2 + 2;
        break;
      case "enum":
        var T = Object.keys(m)[0],
          b = m[T];
        fj.$K(j, q, T);
        q += fj.IQ(j.data, q);
        fj.$K(j, q, b);
        q += fj.IQ(j.data, q);
        break;
      case "tdta":
        M.hc(j, q, m.length);
        q += 4;
        M.UG(j, q, m);
        q += m.length;
        break;
      case "ObAr":
        M.hc(j, q, m.arr[0].arr.length);
        q += 4;
        M.mO(j, q, "\0");
        q += 6;
        fj.$K(j, q, m.classID);
        q += 4 + Math.max(4, m.classID.length);
        M.hc(j, q, m.arr.length);
        q += 4;
        for (var y = 0; y < m.arr.length; y++) {
          var c = m.arr[y];
          fj.$K(j, q, c.id);
          q += 4 + Math.max(4, c.id.length);
          M.v3(j, q, c.type);
          q += 4;
          M.v3(j, q, c.uID);
          q += 4;
          M.hc(j, q, c.arr.length);
          q += 4;
          for (var W = 0; W < c.arr.length; W++) {
            M.GD(j, q, c.arr[W]);
            q += 8;
          }
        }
        break;
      case "Pth ":
        var a = m.pth.length * 2 + 4 + 8;
        M.hc(j, q, a);
        q += 4;
        M.v3(j, q, m.sig);
        q += 4;
        M.mq(j, q, a);
        q += 4;
        M.awP(j, q, m.pth);
        q += m.pth.length * 2 + 4;
        break;
      case "Clss":
      case "type":
      case "rele":
        var f = m.__name;
        if (f == null) f = "";
        M.mO(j, q, f + "\0");
        q += 4 + f.length * 2 + 2;
        var U = m.classID;
        fj.$K(j, q, U);
        q += 4 + Math.max(4, U.length);
        if (G == "rele") {
          M.Aa(j, q, m.val);
          q += 4;
        }
        break;
      case "prop":
      case "Enmr":
      case "indx":
      case "name":
      case "Idnt":
        var Z = fj.QT[G],
          h = "";
        if (G == "name" && m.classID == "Grdn") h = "Gradient";
        M.mO(j, q, h + "\0");
        q += 4 + h.length * 2 + 2;
        for (var y = 0; y < Z.length; y++) {
          var U = m[Z[y]];
          fj.$K(j, q, U);
          q += 4 + Math.max(4, U.length);
        }
        if (G == "name") {
          M.mO(j, q, m.val + "\0");
          q += 4 + m.val.length * 2 + 2;
        }
        if (G == "indx" || G == "Idnt") {
          M.hc(j, q, m.val);
          q += 4;
        }
        break;
      case "alis":
        var a = m.length;
        M.hc(j, q, a);
        q += 4;
        M.v3(j, q, m);
        q += a;
        break;
      default:
        console.log("unknown oskey: " + G);
        q = n;
        break;
    }
    return q - n;
  };
  fj.kE = function (j, q, m) {
    var n = m ? M.dq : M.dW,
      G = n(j, q);
    if (G > 1e3) throw "e";
    if (G == 0) return M.Vo(j, q + 4, m).trim();
    return M.IH(j, q + 4, G).trim();
  };
  fj.IQ = function (j, q, m) {
    var n = m ? M.dq : M.dW,
      G = n(j, q);
    return G == 0 ? 8 : 4 + G;
  };
  fj.$K = function (j, q, m) {
    var n =
        "warp list Comp None xx xy yx yy tx ty PinP PnRt PnOv PnDp xor PuX0 PuX1 PuX2 PuX3 PuY0 PuY1 PuY2 PuY3 base kana ruby box flow time hold clio trim then else".split(
          " "
        ),
      G = 4 < m.length || n.indexOf(m) != -1;
    M.Aa(j, q, G ? m.length : 0);
    M.v3(j, q + 4, m);
    if (m.length < 4 && !G) {
      var W = "";
      for (var y = m.length; y < 4; y++) W += " ";
      M.v3(j, q + 4 + m.length, W);
    }
  };
  fj.aG0 = function (j) {
    var q = {};
    for (var m in j) {
      if (m == "classID") q[m] = j[m];
      else if (m == "__name") q[m] = j[m];
      else q[m] = fj.aom(j[m]);
    }
    return q;
  };
  fj.aom = function (j) {
    if (j.t == "Objc") return fj.aG0(j.v);
    else if (j.t == "VlLs") {
      var q = [];
      for (var y = 0; y < j.v.length; y++) q.push(fj.aom(j.v[y]));
      return q;
    } else if (j.t == "UntF") return j.v.val;
    else return j.v;
  };
  function gM() {}
  gM.wd = function (j, q, m, n, G, W, k) {
    var T = k ? M.YZ : M.Z$,
      b = k ? M.dq : M.dW,
      c = k ? M.d9 : M._h,
      a = k ? M.O_ : M.A_,
      f = k ? M.alQ : M.K_,
      U = k ? M.NR : M.ro,
      Z = k ? M.x5 : M.$C,
      h = k ? M.ax3 : M.pJ;
    while (q < m) {
      var u = M.Vo(j, q, k);
      q += 4;
      if (u != "8BIM" && u != "8B64") {
        console.log("layer information signature error! " + u, "PSB = " + G);
        alert("Error in PSD file: wrong signature.");
        return m;
      }
      var i = M.Vo(j, q, k);
      q += 4;
      var x = T(j, q);
      q += 4;
      var X =
        G &&
        "LMsk Lr16 Lr32 Layr Mt16 Mt32 Mtrn Alph FMsk lnk2 lnkE FEid FXid PxSD extn cinf artd pths"
          .split(" ")
          .indexOf(i) != -1;
      if (X) {
        x = (x << 32) | b(j, q);
        q += 4;
      }
      var $ = ["lrFX", "PlLd"];
      if ($.indexOf(i) != -1) {
        if (i != "lrFX" && x % 4 != 0) x += 4 - (x % 4);
        q += x;
        continue;
      }
      switch (i) {
        case "iOpa":
          n[i] = j[q];
          break;
        case "brst":
          n[i] = [1, 1, 1];
          for (var y = 0; y < x; y += 4) n[i][T(j, q + y)] = 0;
          break;
        case "knko":
          n[i] = j[q];
          break;
        case "infx":
          n[i] = j[q];
          break;
        case "clbl":
          n[i] = j[q];
          break;
        case "lmgm":
          n[i] = j[q];
          break;
        case "vmgm":
          n[i] = j[q];
          break;
        case "fcmy":
          n[i] = j[q];
          break;
        case "lyid":
          n[i] = T(j, q);
          break;
        case "lsct":
          n[i] = { e: T(j, q) };
          if (x >= 12) n[i].hz = M.Vo(j, q + 8, k);
          break;
        case "lsdk":
          n.lsct = { e: T(j, q) };
          break;
        case "lyvr":
          n[i] = T(j, q);
          break;
        case "lnsr":
          var H = {
            artb: 1,
            bgnd: 1,
            cont: 1,
            layr: 1,
            lset: 1,
            rend: 1,
            shap: 1,
            user: 1,
            ____: null,
          };
          n[i] = M.Vo(j, q, k);
          break;
        case "lspf":
          n[i] = T(j, q);
          break;
        case "lclr":
          n[i] = c(j, q);
          break;
        case "luni":
          n[i] = h(j, q);
          break;
        case "fxrp":
          n[i] = new ea(U(j, q), U(j, q + 8));
          break;
        case "phry":
        case "artb":
        case "artd":
          n[i] = {};
          fj.Ky(j, n[i], q + 4, !1, null, k);
          break;
        case "SoCo":
          n[i] = {};
          fj.Ky(j, n[i], q + 4, !1, null, k);
          break;
        case "GdFl":
          n[i] = {};
          fj.Ky(j, n[i], q + 4, !1, null, k);
          gM.or(n[i], i);
          break;
        case "PtFl":
          n[i] = {};
          fj.Ky(j, n[i], q + 4, !1, null, k);
          gM.or(n[i], i);
          break;
        case "CgEd":
          n[i] = {};
          fj.Ky(j, n[i], q + 4, !1, null, k);
          break;
        case "brit":
          var C = (n.brit = k0.i4("brit")),
            l = {};
          C.Brgh.v = a(j, q);
          C.Cntr.v = a(j, q + 2);
          C.useLegacy.v = !0;
          break;
        case "levl":
          var v = j.buffer.slice(q, q + x);
          n[i] = im.VB(v, k);
          break;
        case "curv":
          n[i] = fY.uq(j, q, x, k);
          break;
        case "expA":
          var K = a(j, q),
            S = (n[i] = k0.i4("expA"));
          S.Exps.v = Z(j, q + 2);
          S.Ofst.v = Z(j, q + 6);
          S.gammaCorrection.v = Z(j, q + 10);
          break;
        case "vibA":
          n[i] = {};
          fj.Ky(j, n[i], q + 4, !1, null, k);
          break;
        case "hue2":
          n[i] = b$.uq(j, q, x, k);
          break;
        case "blnc":
          var S = (n[i] = k0.i4(i));
          S.PrsL.v = j[q + 18] == 1;
          var o = ["ShdL", "MdtL", "HghL"];
          for (var y = 0; y < 3; y++)
            for (var V = 0; V < 3; V++)
              S[o[y]].v[V].v = a(j, q + y * 6 + V * 2);
          break;
        case "blwh":
          var P = {};
          fj.Ky(j, P, q + 4, !1, null, k);
          var S = k0.i4(i),
            z = "Bl Cyn Grn Mgnt Rd Yllw tintColor useTint".split(" ");
          for (var y = 0; y < z.length; y++) {
            S[z[y]] = P[z[y]];
            delete P[z[y]];
          }
          n[i] = S;
          break;
        case "phfl":
          var S = (n[i] = k0.i4(i)),
            E = S.Clr.v,
            K = c(j, q);
          if (K == 3) {
            var A = [T(j, q + 2), T(j, q + 6), T(j, q + 10)],
              N = 32768,
              Q = B.aCw(A[0] / N, A[1] / N, A[2] / N);
            E.Lmnc.v = Q.ji;
            E.A.v = Q.Sd;
            E.B.v = Q.X;
          }
          if (K == 2) {
            var e = c(j, q + 2);
            if (e != 7) throw "e";
            E.Lmnc.v = a(j, q + 4) / 100;
            E.A.v = a(j, q + 6) / 100;
            E.B.v = a(j, q + 8) / 100;
          }
          var Y = q + 2 + (K == 3 ? 12 : 10);
          S.Dnst.v = T(j, Y);
          Y += 4;
          S.PrsL.v = j[Y] == 1;
          break;
        case "mixr":
          var d = { f0: c(j, q + 2) == 1, K: [] };
          for (var y = 0; y < 20; y++) d.K.push(a(j, q + 4 + y * 2));
          n[i] = eV.CI(d);
          break;
        case "clrL":
        case "rplc":
          n[i] = {};
          fj.Ky(j, n[i], q + 6, !1, null, k);
          break;
        case "nvrt":
          n[i] = {};
          break;
        case "post":
          n[i] = k0.i4("post");
          n[i].Lvls.v = c(j, q);
          break;
        case "thrs":
          n[i] = k0.i4("thrs");
          n[i].Lvl.v = c(j, q);
          break;
        case "grdm":
          var I = q,
            O = c(j, I),
            F = "Gcls";
          I += 2;
          var s = j[I] == 1,
            p = j[I + 1] == 1;
          I += 2;
          if (O >= 3) {
            var g = M.Vo(j, I, k);
            I += 4;
            F = { Perc: "Perc", Gcls: "Gcls", "Lnr ": "Lnr", Smoo: "Smoo" }[g];
            if (F == null) F = "stripes";
          }
          var w = h(j, I);
          I += 4 + w.length * 2;
          var r = e8.a1Y(j, I, w, k),
            eQ = r[0];
          I = r[1];
          var t = c(j, I);
          I += 2;
          var dq = T(j, I);
          I += 4;
          var D = c(j, I) == 1;
          I += 2;
          var ha = c(j, I) == 1;
          I += 2;
          var am = T(j, I);
          I += 4;
          var k4 = c(j, I);
          I += 2;
          var aA = [],
            ex = [];
          for (var y = 0; y < 4; y++) {
            aA.push({ t: "long", v: ~~((c(j, I + y * 2) * 100) / 32768) });
            ex.push({ t: "long", v: ~~((c(j, I + y * 2 + 8) * 100) / 32768) });
          }
          I += 16;
          var ac = c(j, I);
          I += 2;
          if (t == 1)
            eQ = {
              classID: "Grdn",
              Nm: { t: "TEXT", v: w },
              GrdF: { t: "enum", v: { GrdF: "ClNs" } },
              ShTr: { t: "bool", v: D },
              VctC: { t: "bool", v: ha },
              ClrS: { t: "enum", v: { ClrS: "RGBC" } },
              RndS: { t: "long", v: dq },
              Smth: { t: "long", v: am },
              Mnm: { t: "VlLs", v: aA },
              Mxm: { t: "VlLs", v: ex },
            };
          var eJ = k0.i4("grdm");
          eJ.Rvrs.v = s;
          eJ.Dthr.v = p;
          eJ.Grad.v = eQ;
          eJ.gs99.v = { gradientInterpolationMethodType: F };
          n[i] = eJ;
          break;
        case "selc":
          n[i] = bh.uq(j, q, x, k);
          break;
        case "vmsk":
        case "vsms":
          var h$ = (n.vmsk = new R.tm()),
            da = b(j, q + 4),
            bb = ((da >> 0) & 1) == 1;
          h$.jS = ((da >> 1) & 1) == 0;
          h$.isEnabled = ((da >> 2) & 1) == 0;
          h$.D = hR.xD(j, q + 8, x - 8, W.r, W.$, k);
          break;
        case "shmd":
          n[i] = {};
          var gb = T(j, q),
            Y = q + 4;
          for (var y = 0; y < gb; y++) {
            var u = M.Vo(j, Y, k);
            Y += 4;
            var fM = M.Vo(j, Y, k);
            Y += 4;
            var kS = j[Y];
            Y++;
            if (Math.max(j[Y], j[Y + 1]) != 0) throw "e";
            Y += 3;
            var cY = T(j, Y);
            Y += 4;
            if (fM == "cust" || fM == "cmls" || fM == "extn" || fM == "mlst") {
              var cS = T(j, Y);
              if (cS != 16) Y += 4;
              if (T(j, Y) == 16) {
                var P = {};
                fj.Ky(j, P, Y + 4, !1, null, k);
                n[i][fM] = P;
                if (fM == "cmls") L.YM.aoU(n[i][fM]);
              }
            } else {
              console.log("unknown shmd key: " + fM + ", size: " + cY);
            }
            Y += cY;
          }
          break;
        case "shpa":
          var K = T(j, q),
            k3 = T(j, q + 4);
          if (k3 != 0) console.log("some patterns present!");
          break;
        case "TySh":
          var di = (n[i] = {}),
            K = c(j, q);
          di.u = M.Wx(j, q + 2, k);
          var a7 = c(j, q + 2 + 48);
          di.Ix = {};
          try {
            var b0 = fj.Ky(j, di.Ix, q + 56);
          } catch (gn) {
            n[i] = null;
            break;
          }
          var e1 = al.aem();
          for (var l2 in e1) if (di.Ix[l2] == null) di.Ix[l2] = e1[l2];
          di.Uu = {};
          var kL = fj.Ky(j, di.Uu, q + 56 + b0 + 6, !1, null, k);
          di.AF = M.a0s(j, q + 56 + b0 + 6 + kL);
          di.s3 = iy.VB(di.Ix.EngineData.v);
          al.aet(di.s3.EngineDict.StyleRun.RunArray);
          if (di.s3.ResourceDict == null)
            di.s3.ResourceDict = B.S(di.s3.DocumentResources);
          delete di.Ix.EngineData;
          break;
        case "lfx2":
        case "lmfx":
        case "lfxs":
          var es = T(j, q),
            kR = T(j, q + 4);
          n.lmfx = {};
          var b0 = fj.Ky(j, n.lmfx, q + 8, !1, null, k);
          gM.KI(n.lmfx);
          break;
        case "FMsk":
          n[i] = j.slice(q, q + x);
          break;
        case "Txt2":
          n[i] = {};
          n[i].raw = j.slice(q, q + x);
          n[i].SA = dE.VB(n[i].raw);
          break;
        case "Patt":
        case "Pat2":
        case "Pat3":
          n.Patt = f5.ZM(j, q, x, k);
          break;
        case "SoLd":
          var eH = M.Vo(j, q, k),
            cZ = T(j, q + 4),
            ga = T(j, q + 8),
            fi = (n[i] = {}),
            go = fj.Ky(j, fi, q + 12, null, null, k),
            iz = fi.warp,
            i5 = fi.quiltWarp;
          if (i5 == null) i5 = fi.quiltWarp = B.rc.aBg(iz);
          delete fi.warp;
          var aI = i5.v.warpStyle.v.warpStyle,
            bs = i5.v.warpValues;
          if (aI != "warpCylinder" && bs) {
            i5.v.warpValue = { t: "doub", v: bs.v[0].v };
            delete i5.v.warpValues;
          }
          if (fi.nonAffineTransform == null)
            fi.nonAffineTransform = B.S(fi.Trnf);
          if (fi.Impr == null)
            fi.Impr = { t: "Objc", v: { __name: "None", classID: "none" } };
          break;
        case "vstk":
        case "pths":
          var cZ = T(j, q);
          n[i] = {};
          var go = fj.Ky(j, n[i], q + 4, !1, null, k);
          break;
        case "vscg":
          var fM = M.Vo(j, q, k),
            cZ = T(j, q + 4);
          n[fM] = {};
          var go = fj.Ky(j, n[fM], q + 8, !1, null, k);
          gM.or(n[fM], fM);
          break;
        case "vogk":
          var k2 = T(j, q),
            cZ = T(j, q + 4);
          n[i] = {};
          var go = fj.Ky(j, n[i], q + 8, !1, null, k);
          n[i] = n[i].keyDescriptorList.v;
          for (var y = 0; y < n[i].length; y++) {
            var jG = n[i][y].v;
            if (!B.ih.Eg(jG)) continue;
            if (jG.keyOriginBoxCorners == null) {
              var eW = B.ih.M8(jG);
              jG.keyOriginBoxCorners = { t: "Objc", v: { classID: "null" } };
              var gc = [eW[0], eW[1], eW[2], eW[1], eW[2], eW[3], eW[0], eW[3]];
              if (jG.keyOriginType.v == 4)
                gc = B.ih.aHa(B.ih.Xj(jG), jG.keyOriginLineWeight.v);
              B.ih.do(jG, "keyOriginBoxCorners", gc);
            }
          }
          break;
        case "lnk2":
        case "lnkD__":
        case "lnk3":
          n.lnk2 = [];
          var I = q;
          while (I < q + x) {
            var k1 = new R.Q9();
            n.lnk2.push(k1);
            var ke = f(j, I);
            I += 8;
            var jh = I;
            k1.e = M.Vo(j, I, k);
            I += 4;
            if (k1.e != "liFD") {
              alert("Unknown Linked Layer type: " + k1.e);
              break;
              throw k1.e;
            }
            k1.TJ = T(j, I);
            I += 4;
            var cE = M.xs(j, I);
            I += 1 + cE.ob.length;
            k1.ys = cE.ob;
            var cy = k ? M.xG : M.z5;
            k1.Sh = cy(j, I);
            I += 4 + k1.Sh.length * 2 + 2;
            k1.pb = M.Vo(j, I, k);
            I += 4;
            k1.V6 = M.Vo(j, I, k);
            I += 4;
            var hl = f(j, I);
            I += 8;
            k1.open = j[I];
            I += 1;
            if (k1.open != 0) {
              var c2 = {},
                b0 = fj.Ky(j, c2, I + 4, null, null, k);
              if (b0 % 4 != 0) b0 += 4 - (b0 % 4);
              console.log(c2);
              I += b0 + 4;
            }
            k1.open = 0;
            k1.raw = j.slice(I, I + hl);
            I = jh + ke;
            if (ke % 4 != 0) I += 4 - (ke % 4);
          }
          break;
        case "FEid":
          var I = q;
          n[i] = [];
          var f9 = I + x,
            K = T(j, I);
          I += 4;
          while (I < f9) {
            var ke = f(j, I);
            I += 8;
            var r = {};
            n[i].push(r);
            r.id = M.xs(j, I).ob;
            I += r.id.length + 1;
            var K = T(j, I);
            I += 4;
            I += 4;
            var hu = T(j, I);
            I += 4;
            r.H = M.X7(j, I, k);
            I += 16;
            var le = T(j, I);
            I += 4;
            var iJ = T(j, I);
            I += 4;
            var dZ = new B.Rx(0);
            for (var y = 0; y < iJ + 2; y++) {
              var kd = T(j, I);
              I += 4;
              if (kd != 0) {
                var bC = f(j, I),
                  ev = null;
                I += 8;
                if (y < 3 || y == 25) {
                  ev = aW.aY(!0, le, j, r.H.r, r.H.$, I, bC, k);
                }
                if (y == 0) dZ.o = ev;
                if (y == 1) dZ.i = ev;
                if (y == 2) dZ.X = ev;
                if (y == 25) dZ.Sd = ev;
                I += bC;
              }
            }
            r.buffer = B.j(r.H.C() * 4, le);
            B.Nr(dZ, r.buffer);
            var ak = j[I];
            I++;
            if (ak != 0) {
              r.x7 = new R.T0();
              r.x7.H = M.X7(j, I, k);
              I += 16;
              var gD = f(j, I);
              I += 8;
              var ev = aW.aY(!0, le, j, r.x7.H.r, r.x7.H.$, I, gD, k);
              r.x7.N = ev;
              r.x7.color = 255;
              r.x7.yy();
              I += gD;
            }
            if (ke % 4 != 0) I += 4 - (ke % 4);
          }
          break;
        case "Lr16":
          hx.EB(W, j, q, k);
          break;
        case "Lr32":
          hx.EB(W, j, q, k);
          break;
        case "Anno":
          n[i] = [];
          var a9 = q,
            kk = q + 4,
            k3 = T(j, kk);
          kk += 4;
          for (var y = 0; y < k3; y++) {
            var ke = T(j, kk);
            kk += 4;
            var kX = M.Vo(j, kk, k);
            kk += 4;
            if (kX != "txtA") throw kX;
            var kc = j[kk++],
              ew = j[kk++],
              gS = c(j, kk);
            kk += 2;
            var hp = M.X7(j, kk, k);
            kk += 16;
            var g2 = M.X7(j, kk, k);
            kk += 16;
            var E = be.uQ(j, kk, k);
            kk += 10;
            var jY = M.xs(j, kk);
            kk += jY.length;
            var he = M.xs(j, kk);
            kk += he.length;
            var a5 = M.xs(j, kk);
            kk += a5.length;
            var gq = T(j, kk);
            kk += 4;
            var fA = M.Vo(j, kk, k);
            kk += 4;
            var c3 = T(j, kk);
            kk += 4;
            var fa = k ? M.a5 : M.Jz,
              jA = fa(j, kk + 2, (c3 - 2) >> 1);
            kk += c3;
            n[i].push([hp.x, hp.y, E, jY.ob, jA]);
          }
          break;
        default:
          console.log("unknown layer tag: " + i + ", size: " + x);
          break;
      }
      var kF =
        "Layr,Lr16,Lr32,LMsk,Txt2,artd,extd,luni,pths,extn,tySh,lfx2,cinf,Anno,CAI ,GenI,phry,vmsk,vstk".split(
          ","
        );
      if (kF.indexOf(i) == -1)
        if (x % 4 != 0) console.log("size not multiple of 4!!!", i);
      if (
        i != "luni" &&
        i != "TySh" &&
        i != "tySh" &&
        i != "lfx2" &&
        i != "iOpa" &&
        i != "SoCo" &&
        i != "vmsk" &&
        i != "vstk"
      )
        if (x % 4 != 0) x += 4 - (x % 4);
      q += x;
    }
    var l = n.CgEd;
    if (l) {
      var C = n.brit;
      if (C) {
        C.Brgh.v = l.Brgh ? l.Brgh.v : 0;
        C.Cntr.v = l.Cntr ? l.Cntr.v : 0;
        C.useLegacy.v = l.useLegacy ? l.useLegacy.v : 0;
      }
      delete n.CgEd;
    }
    var dn = [];
    for (var y = 0; y < dn.length; y++) delete n[dn[y]];
    return q;
  };
  gM.c3 = function (j, q, m, n, G) {
    if (m.SoLd) {
      var W = {};
      for (var k in m) {
        if (k == "SoLd") W.PlLd = {};
        W[k] = m[k];
      }
      m = W;
    }
    for (var T in m)
      if (m[T] == null) {
        alert("A bug occured (see console).");
        console.log(
          'Please, report a bug, that "' +
            T +
            '" tag was present with a null value.'
        );
        delete m[T];
      }
    for (var T in m) {
      var b =
          n &&
          "LMsk Lr16 Lr32 Layr Mt16 Mt32 Mtrn Alph FMsk lnk2 lnkE FEid FXid PxSD extn cinf artd pths"
            .split(" ")
            .indexOf(T) != -1,
        a = 0;
      M.v3(j, q, b ? "8B64" : "8BIM");
      q += 4;
      var c = q;
      M.v3(j, q, T);
      q += 4;
      M.Aa(j, q, 0);
      q += b ? 8 : 4;
      switch (T) {
        case "iOpa":
          M.t1(j, q, m[T], 1);
          a = 4;
          break;
        case "brst":
          a = 0;
          for (var y = 0; y < 3; y++)
            if (m[T][y] == 0) {
              M.hc(j, q + a, y);
              a += 4;
            }
          break;
        case "knko":
          M.t1(j, q, m[T], 1);
          a = 4;
          break;
        case "infx":
          M.t1(j, q, m[T], 1);
          a = 4;
          break;
        case "clbl":
          M.t1(j, q, m[T], 1);
          a = 4;
          break;
        case "lmgm":
          M.t1(j, q, m[T], 1);
          a = 4;
          break;
        case "vmgm":
          M.t1(j, q, m[T], 1);
          a = 4;
          break;
        case "fcmy":
          M.t1(j, q, m[T], 1);
          a = 4;
          break;
        case "lyid":
          M.hc(j, q, m[T]);
          a = 4;
          break;
        case "lsct":
          M.hc(j, q, m[T].e);
          a = 4;
          if (m[T].hz) {
            M.v3(j, q + 4, "8BIM");
            M.v3(j, q + 8, m[T].hz);
            a = 12;
          }
          break;
        case "lyvr":
          M.hc(j, q, m[T]);
          a = 4;
          break;
        case "lnsr":
          M.v3(j, q, m[T]);
          a = 4;
          break;
        case "lspf":
          M.hc(j, q, m[T]);
          a = 4;
          break;
        case "lclr":
          M.Mc(j, q, m[T]);
          a = 8;
          break;
        case "luni":
          M.mO(j, q, m[T]);
          a = 4 + 2 * m[T].length;
          break;
        case "fxrp":
          M.GD(j, q, m[T].x);
          M.GD(j, q + 8, m[T].y);
          a = 16;
          break;
        case "phry":
        case "artb":
        case "artd":
          M.hc(j, q, 16);
          a = fj.LM(j, m[T], q + 4) + 4;
          break;
        case "SoCo":
          M.hc(j, q, 16);
          a = fj.LM(j, m[T], q + 4) + 4;
          break;
        case "GdFl":
          M.hc(j, q, 16);
          a = fj.LM(j, m[T], q + 4) + 4;
          break;
        case "PtFl":
          M.hc(j, q, 16);
          a = fj.LM(j, m[T], q + 4) + 4;
          break;
        case "CgEd":
          var f = {
              classID: "null",
              Vrsn: { t: "long", v: 1 },
              Brgh: { t: "long", v: 24 },
              Cntr: { t: "long", v: 54 },
              means: { t: "long", v: 127 },
              Lab: { t: "bool", v: !1 },
              useLegacy: { t: "bool", v: !1 },
              Auto: { t: "bool", v: !0 },
            },
            U = f,
            Z = m[T];
          U.Brgh.v = Z.Brgh.v;
          U.Cntr.v = Z.Cntr.v;
          U.useLegacy.v = Z.useLegacy.v;
          M.hc(j, q, 16);
          a = fj.LM(j, f, q + 4) + 4;
          break;
        case "brit":
          j.xY(q, 8);
          a = 8;
          break;
        case "levl":
          var h = new aj();
          a = im.He(h, m[T]);
          M.UG(j, q, h.data);
          break;
        case "curv":
          a = fY.A6(j, q, m[T]);
          break;
        case "expA":
          a = 14;
          j.xY(q, 14);
          M.JP(j.data, q, 1);
          M.MW(j.data, q + 2, m[T].Exps ? m[T].Exps.v : 0);
          M.MW(j.data, q + 6, m[T].Ofst ? m[T].Ofst.v : 0);
          M.MW(
            j.data,
            q + 10,
            m[T].gammaCorrection ? m[T].gammaCorrection.v : 1
          );
          break;
        case "vibA":
          M.hc(j, q, 16);
          a = fj.LM(j, m[T], q + 4) + 4;
          break;
        case "hue2":
          a = b$.A6(j, q, m[T]);
          break;
        case "blnc":
          a = 19;
          j.xY(q, a);
          var u = ["ShdL", "MdtL", "HghL"];
          for (var y = 0; y < 3; y++) {
            var i = m[T][u[y]].v;
            for (var x = 0; x < 3; x++)
              i.push(M.SO(j.data, q + y * 6 + x * 2, i[x].v));
          }
          j.data[q + 18] = m[T].PrsL.v ? 1 : 0;
          break;
        case "blwh":
          var f = {
              classID: "null",
              bwPresetKind: { t: "long", v: 1 },
              blackAndWhitePresetFileName: { t: "TEXT", v: "" },
            },
            X = "Bl Cyn Grn Mgnt Rd Yllw tintColor useTint".split(" ");
          for (var y = 0; y < X.length; y++) {
            f[X[y]] = m[T][X[y]];
          }
          M.hc(j, q, 16);
          a = fj.LM(j, f, q + 4) + 4;
          break;
        case "phfl":
          M.Mc(j, q, 2);
          var $ = m[T].Clr.v;
          M.Mc(j, q + 2, 7);
          M.Mc(j, q + 4, Math.round($.Lmnc.v * 100));
          M.Mc(j, q + 6, Math.round($.A.v * 100));
          M.Mc(j, q + 8, Math.round($.B.v * 100));
          M.Mc(j, q + 10, 0);
          var H = q + 2 + 10;
          j.xY(H, 5);
          M.ZN(j.data, H, m[T].Dnst.v);
          H += 4;
          j.data[H] = m[T].PrsL.v ? 1 : 0;
          H++;
          a = H - q;
          break;
        case "mixr":
          a = 44;
          j.xY(q, a);
          var C = eV.Vm(m[T]);
          M.JP(j.data, q, 1);
          M.JP(j.data, q + 2, C.f0 ? 1 : 0);
          for (var y = 0; y < 20; y++) M.SO(j.data, q + 4 + y * 2, C.K[y]);
          break;
        case "clrL":
        case "rplc":
          M.Mc(j, q, 1);
          M.hc(j, q + 2, 16);
          a = fj.LM(j, m[T], q + 6) + 6;
          break;
        case "nvrt":
          a = 0;
          break;
        case "post":
          M.Mc(j, q, m[T].Lvls.v);
          a = 2;
          break;
        case "thrs":
          M.Mc(j, q, m[T].Lvl.v);
          a = 2;
          break;
        case "grdm":
          var l = m[T].Rvrs ? m[T].Rvrs.v : !1,
            v = m[T].Dthr ? m[T].Dthr.v : !1,
            K = m[T].gs99
              ? m[T].gs99.v.gradientInterpolationMethodType
              : "Gcls",
            S = 867527939,
            o = !1,
            V = !1,
            P = 2048,
            N,
            Q;
          if (K == "Lnr") K = "Lnr ";
          if (K == "stripes") K = "\0\0\fm";
          var z = [0, 0, 0, 0],
            E = [32768, 32768, 32768, 32768],
            A = m[T].Grad.v,
            e = A.Clrs == null ? 1 : 0;
          if (e == 0) {
            N = A;
            Q = JSON.parse(eu.PV.aFu).v;
          } else {
            N = k0.i4("grdm").Grad.v;
            Q = A;
          }
          j.xY(q, 8);
          M.JP(j.data, q, 3);
          j.data[q + 2] = l ? 1 : 0;
          j.data[q + 3] = v ? 1 : 0;
          M.Sc(j.data, q + 4, K);
          var Y = q + 8;
          M.mO(j, Y, A.Nm.v);
          Y += 4 + A.Nm.v.length * 2;
          Y = e8.axG(j, Y, N);
          M.Mc(j, Y, e);
          Y += 2;
          M.hc(j, Y, Q.RndS.v);
          Y += 4;
          M.Mc(j, Y, Q.ShTr.v ? 1 : 0);
          Y += 2;
          M.Mc(j, Y, Q.VctC.v ? 1 : 0);
          Y += 2;
          M.hc(j, Y, Q.Smth.v);
          Y += 4;
          M.Mc(j, Y, 3);
          Y += 2;
          for (var y = 0; y < 4; y++) M.Mc(j, Y + y * 2, z[y]);
          Y += 8;
          for (var y = 0; y < 4; y++) M.Mc(j, Y + y * 2, E[y]);
          Y += 8;
          Y += 2;
          a = Y - q;
          break;
        case "selc":
          a = bh.A6(j, q, m[T]);
          break;
        case "FMsk":
          M.UG(j, q, m[T]);
          a = m[T].length;
          break;
        case "Txt2":
          var d = new aj(),
            I = dE.RS(m[T].SA, d),
            O = d.data.slice(0, I);
          M.UG(j, q, O);
          a = O.length;
          break;
        case "vmsk":
          var s = m[T],
            p = 0;
          M.hc(j, q, 3);
          if (!s.jS) p += 1 << 1;
          if (!s.isEnabled) p += 1 << 2;
          M.hc(j, q + 4, p);
          a = 8;
          var F = s.D.length;
          j.xY(q + 8, F * 26);
          hR.WJ(j.data, q + 8, s.D, G.r, G.$);
          a += F * 26;
          break;
        case "shmd":
          M.hc(j, q, Object.keys(m[T]).length);
          var H = q + 4;
          for (var g in m[T]) {
            M.v3(j, H, "8BIM");
            H += 4;
            M.v3(j, H, g);
            H += 4;
            M.hc(j, H, 0);
            H += 4;
            M.hc(j, H, 0);
            H += 4;
            M.hc(j, H, 16);
            H += 4;
            var w = fj.LM(j, m[T][g], H);
            if (w % 4 != 0) w += 4 - (w % 4);
            M.hc(j, H - 8, w + 4);
            H += w;
          }
          a = H - q;
          break;
        case "TySh":
          var H = q;
          M.FR(j, H, 1);
          H += 2;
          var r = m[T],
            d = new aj();
          r.s3.DocumentResources = B.S(r.s3.ResourceDict);
          var I = iy.RS(r.s3, d),
            O = d.data.slice(0, I);
          r.Ix.EngineData = { t: "tdta", v: O };
          var eQ = r.s3.EngineDict.Editor.Text;
          r.Ix.Txt.v = eQ.substring(0, eQ.length - 1);
          M.acx(j, H, r.u);
          H += 48;
          M.FR(j, H, 50);
          H += 2;
          M.hc(j, H, 16);
          H += 4;
          H += fj.LM(j, r.Ix, H);
          M.FR(j, H, 1);
          H += 2;
          M.hc(j, H, 16);
          H += 4;
          H += fj.LM(j, r.Uu, H);
          M.al7(j, H, r.AF);
          H += 16;
          a = H - q;
          break;
        case "lmfx":
          M.hc(j, q, 0);
          M.hc(j, q + 4, 16);
          var f = B.S(m[T]),
            t = !1;
          gM.P1(f);
          for (var y = 0; y < eu.C$.length; y++)
            if (f[eu.C$[y]] != null) t = !0;
          M.v3(j, c, t ? "lmfx" : "lfx2");
          a = fj.LM(j, f, q + 8) + 8;
          break;
        case "Patt":
          var H = f5.iQ(j, q, m[T]);
          a = H - q;
          break;
        case "PlLd":
          var dq = q;
          j.xY(q, 60);
          var i = m.SoLd;
          M.v3(j, q, "plcL");
          M.hc(j, q + 4, 3);
          var D = (j.data[q + 8] = i.Idnt.v.length);
          M.v3(j, q + 9, i.Idnt.v);
          var H = q + 9 + D,
            ha = [1, 1, 16, 2];
          for (var y = 0; y < 4; y++) M.hc(j, H + y * 4, ha[y]);
          H += 16;
          ha = L.Dq.Kt(i.nonAffineTransform);
          for (var y = 0; y < 8; y++) M.GD(j, H + y * 8, ha[y]);
          H += 64;
          M.hc(j, H, 0);
          M.hc(j, H + 4, 16);
          var am = B.rc.adk(i.quiltWarp).v;
          H += 8 + fj.LM(j, am, H + 8);
          a = H - q;
          break;
        case "SoLd":
          var i = m[T],
            k4 = i.quiltWarp;
          i.warp = B.rc.adk(k4);
          if (B.rc.y1(k4.v) == 16) delete i.quiltWarp;
          M.v3(j, q, "soLD");
          M.hc(j, q + 4, 4);
          M.hc(j, q + 8, 16);
          a = fj.LM(j, i, q + 12) + 12;
          i.quiltWarp = k4;
          delete i.warp;
          break;
        case "vstk":
        case "pths":
          M.hc(j, q, 16);
          a = fj.LM(j, m[T], q + 4) + 4;
          break;
        case "vscg__":
          M.v3(j, q, m[T].key);
          M.hc(j, q + 4, 16);
          a = fj.LM(j, m[T].K, q + 8) + 8;
          break;
        case "vogk":
          M.hc(j, q, 1);
          M.hc(j, q + 4, 16);
          B.ih.akt(m[T]);
          for (var y = 0; y < m[T].length; y++) {
            var aA = m[T][y].v.keyOriginResolution;
            if (aA) aA.v = G.zv;
          }
          var ex = {
            classID: "null",
            keyDescriptorList: { t: "VlLs", v: m[T] },
          };
          a = fj.LM(j, ex, q + 8) + 8;
          break;
        case "lnkD":
        case "lnk2":
        case "lnk3":
          var Y = q;
          for (var y = 0; y < m[T].length; y++) {
            var ac = m[T][y],
              eJ = Y;
            M.Ib(j, Y, 0);
            Y += 8;
            M.v3(j, Y, ac.e);
            Y += 4;
            M.hc(j, Y, ac.TJ);
            Y += 4;
            j.xY(Y, 1);
            j.data[Y] = ac.ys.length;
            Y++;
            M.v3(j, Y, ac.ys);
            Y += ac.ys.length;
            M.mO(j, Y, ac.Sh + "\0");
            Y += 4 + ac.Sh.length * 2 + 2;
            M.v3(j, Y, ac.pb);
            Y += 4;
            M.v3(j, Y, ac.V6);
            Y += 4;
            M.Ib(j, Y, ac.raw.length);
            Y += 8;
            j.xY(Y, 1);
            j.data[Y] = ac.open;
            Y++;
            M.UG(j, Y, ac.raw);
            Y += ac.raw.length;
            M.hc(j, Y, 1);
            Y += 4;
            Y += 11;
            var h$ = Y - eJ - 8;
            M.Ib(j, eJ, h$);
            if (h$ % 4 != 0) {
              j.xY(Y, 4 - (h$ % 4));
              Y += 4 - (h$ % 4);
            }
          }
          a = Y - q;
          break;
        case "FEid":
          var Y = q;
          M.hc(j, Y, 3);
          Y += 4;
          for (var da = 0; da < m[T].length; da++) {
            var bb = m[T][da];
            Y += 4;
            var gb = Y;
            Y += 4;
            M.uG(j, Y, bb.id);
            Y += bb.id.length + 1;
            M.hc(j, Y, 1);
            Y += 4;
            var fM = B.j(bb.H.C(), G.depth),
              kS = bb.H,
              cY = B.j(kS.C(), G.depth);
            Y += 4;
            var cS = Y;
            Y += 4;
            M.KY(j, Y, kS);
            Y += 16;
            M.hc(j, Y, G.depth);
            Y += 4;
            M.hc(j, Y, 24);
            Y += 4;
            for (var y = 0; y < 24 + 2; y++) {
              var k3 = -1;
              if (y == 0) k3 = 0;
              if (y == 1) k3 = 1;
              if (y == 2) k3 = 2;
              if (y == 25) k3 = 3;
              M.hc(j, Y, k3 != -1 ? 1 : 0);
              Y += 4;
              if (k3 != -1) {
                B.Ih(bb.buffer, fM, k3);
                B.sN(fM, bb.H, cY, kS);
                Y += 4;
                var di = Y;
                Y += 4;
                j.xY(Y, kS.C() * (G.depth >>> 3) + 200);
                Y = aW.TF(!0, cY, j.data, kS.r, kS.$, Y, 3);
                M.hc(j, di, Y - (di + 4));
              }
            }
            M.hc(j, cS, Y - (cS + 4));
            j.xY(Y, 1);
            j.data[Y] = bb.x7 ? 1 : 0;
            Y++;
            if (bb.x7 != null) {
              var a7 = kS,
                b0 = B.j(a7.C(), G.depth);
              b0.fill((B.TN(G.depth) * bb.x7.color) / 255);
              B.sN(bb.x7.N, bb.x7.H, b0, a7);
              M.KY(j, Y, a7);
              Y += 16;
              Y += 4;
              var e1 = Y;
              Y += 4;
              j.xY(Y, a7.C() + 2);
              Y = aW.TF(!0, b0, j.data, a7.r, a7.$, Y, 3);
              M.hc(j, e1, Y - (e1 + 4));
            }
            var h$ = Y - (gb + 4);
            M.hc(j, gb, h$);
            if (h$ % 4 != 0) Y += 4 - (h$ % 4);
          }
          a = Y - q;
          break;
        case "Lr16":
        case "Lr32":
          var l2 = hx.aia(G, j, q, [], !1);
          a = l2 - q;
          break;
        case "Anno":
          var l2 = q,
            kL = m[T].length;
          M.Mc(j, l2, 2);
          M.Mc(j, l2 + 2, 1);
          l2 += 4;
          M.hc(j, l2, kL);
          l2 += 4;
          for (var y = 0; y < kL; y++) {
            var es = m[T][y],
              kR = es[0],
              eH = es[1],
              cZ = l2;
            l2 += 4;
            M.v3(j, l2, "txtA");
            l2 += 4;
            j.xY(l2, 2);
            j.data[l2] = 1;
            j.data[l2 + 1] = 28;
            l2 += 2;
            M.Mc(j, l2, 1);
            l2 += 2;
            M.KY(j, l2, new hk(kR, eH, 17, 21));
            l2 += 16;
            M.KY(j, l2, new hk(kR + 8, eH + 10, 241, 141));
            l2 += 16;
            j.xY(l2, 10);
            be.WG(j.data, l2, es[2]);
            l2 += 10;
            l2 += M.uG(j, l2, es[3]);
            l2 += M.uG(j, l2, "");
            l2 += M.uG(j, l2, "D:20211012120233+01'00'");
            var ga = es[4].length * 2;
            M.hc(j, l2, 12 + 2 + ga);
            l2 += 4;
            M.v3(j, l2, "txtC");
            l2 += 4;
            M.hc(j, l2, 2 + ga);
            l2 += 4;
            j.xY(l2, 2);
            j.data[l2] = 254;
            j.data[l2 + 1] = 255;
            l2 += 2;
            M.a0j(j, l2, es[4]);
            l2 += ga;
            M.hc(j, cZ, l2 - cZ);
          }
          a = l2 - q;
          break;
        default:
          console.log("unknown layer tag: " + T + ", size: " + a);
          q -= 12;
          continue;
      }
      var fi = ["Txt2", "artd", "extd", "pths"];
      if (fi.indexOf(T) == -1) if (a % 4 != 0) a += 4 - (a % 4);
      if (b) M.Ib(j, q - 8, a);
      else M.hc(j, q - 4, a);
      if (T != "luni" && T != "TySh") if (a % 4 != 0) a += 4 - (a % 4);
      q += a;
    }
    return q;
  };
  gM.KI = function (j) {
    for (var y = 0; y < eu.order.length; y++) {
      var q = eu.order[y],
        m = eu.C$[y];
      if (j[m] == null) j[m] = { t: "VlLs", v: [] };
      if (j[q] != null) {
        j[m].v.push(j[q]);
        delete j[q];
      }
      var n = [];
      for (var G = 0; G < j[m].v.length; G++) {
        var W = j[m].v[G];
        if (W.v.present == null || W.v.present.v == !0) n.push(W);
      }
      j[m].v = n;
    }
  };
  gM.P1 = function (j) {
    for (var y = 0; y < eu.order.length; y++) {
      var q = eu.order[y],
        m = eu.C$[y],
        n = j[m].v.length;
      if (n == 0) {
        delete j[m];
        continue;
      }
      if (n == 1) {
        j[q] = j[m].v[0];
        delete j[m];
        continue;
      }
    }
  };
  gM.or = function (j, q) {
    if (q == "GdFl") {
      if (j.Angl == null) j.Angl = { v: { type: "#Ang", val: 0 }, t: "UntF" };
      if (j.Algn == null) j.Algn = { v: !0, t: "bool" };
      if (j.Scl == null) j.Scl = { v: { type: "#Prc", val: 100 }, t: "UntF" };
      if (j.Ofst == null)
        j.Ofst = {
          v: {
            classID: "Pnt",
            Hrzn: { v: { type: "#Prc", val: 0 }, t: "UntF" },
            Vrtc: { v: { type: "#Prc", val: 0 }, t: "UntF" },
          },
          t: "Objc",
        };
      if (j.Rvrs == null) j.Rvrs = { v: !1, t: "bool" };
      if (j.Dthr == null) j.Dthr = { v: !1, t: "bool" };
    }
    if (q == "PtFl") {
      if (j.Algn == null) j.Algn = { v: !0, t: "bool" };
      if (j.Angl == null) j.Angl = { v: { type: "#Ang", val: 0 }, t: "UntF" };
      if (j.Scl == null) j.Scl = { v: { type: "#Prc", val: 100 }, t: "UntF" };
      if (j.phase == null)
        j.phase = {
          v: {
            classID: "Pnt",
            Hrzn: { v: 0, t: "doub" },
            Vrtc: { v: 0, t: "doub" },
          },
          t: "Objc",
        };
    }
  };
  gM.P = function (j, q) {
    var m = {};
    if (j == "TySh") {
      m.u = q.u.P();
      m.Ix = B.S(q.Ix);
      m.Uu = B.S(q.Uu);
      m.AF = q.AF.P();
      m.s3 = B.S(q.s3);
      if (q.add) m.add = { vmsk: q.add.vmsk.P(), vogk: B.S(q.add.vogk) };
      return m;
    } else if (j == "fxrp") return q.P();
    else if (j == "vmsk") return q.P();
    else return B.S(q);
  };
  function eB(j, q) {}
  eB.VB = function (j, q, m, n, G) {
    n = eB.aK0(j, q, m, n, G);
    return n;
  };
  eB.RS = function (j, q, m, n, G) {
    n = eB.aer(j, q, m, n, G);
    return n;
  };
  eB.aK0 = function (j, q, m, n, G) {
    var W = n;
    j.H = M.X7(m, n, G);
    n += 16;
    var k = G ? M.d9 : M._h,
      T = G ? M.O_ : M.A_,
      b = k(m, n);
    n += 2;
    j.rl = [];
    var c = q.Wd,
      a = G ? M.alQ : M.K_,
      f = G ? M.YZ : M.Z$,
      U = c ? a : f;
    for (var y = 0; y < b; y++) {
      j.rl[y] = { id: T(m, n), length: U(m, n + 2) };
      n += c ? 10 : 6;
    }
    var Z = M.Vo(m, n, G);
    n += 4;
    if (Z != "8BIM") {
      console.log("Invalid Blend mode signature: " + JSON.stringify(Z));
      alert("Error in Photoshop file: wrong signature.");
      throw "e";
    }
    j.hz = M.Vo(m, n, G);
    n += 4;
    j.yA = m[n];
    n += 1;
    j.Yx = m[n] == 1;
    n += 1;
    j.uZ = m[n];
    n += 1;
    if (m[n] != 0) console.log("error in filler!");
    n += 1;
    var h = f(m, n);
    n += 4;
    var u = n;
    n = eB.agL(j, m, n, G);
    n = eB.afb(j, m, n, G);
    var i = M.xs(m, n);
    j.name = i.ob;
    n += i.length;
    if (i.length % 4 != 0) n += 4 - (i.length % 4);
    n = gM.wd(m, n, u + h, j.add, c, q, G);
    if (j.add.lsct) {
      if (j.add.lsct.hz) j.hz = j.add.lsct.hz;
      j.add.lsct = j.add.lsct.e;
    }
    return n;
  };
  eB.aer = function (j, q, m, n, G) {
    var W = n;
    M.KY(m, n, j.H);
    n += 16;
    var k = q.add.fcmy == 1,
      T = j.aph(k);
    M.Mc(m, n, T.length);
    n += 2;
    var b = q.Wd;
    G.push(n);
    for (var y = 0; y < T.length; y++) {
      M.FR(m, n, T[y]);
      if (b) M.Ib(m, n + 2, 0);
      else M.hc(m, n + 2, 0);
      n += b ? 10 : 6;
    }
    M.v3(m, n, "8BIM");
    n += 4;
    M.v3(m, n, j.hz);
    n += 4;
    M.t1(m, n, j.yA, 1);
    n += 1;
    M.t1(m, n, j.Yx ? 1 : 0, 1);
    n += 1;
    M.t1(m, n, j.uZ, 1);
    n += 1;
    M.t1(m, n, 0, 1);
    n += 1;
    var c = n;
    M.hc(m, n, 0);
    n += 4;
    var a = n;
    n = eB.azC(j, m, n);
    n = eB.axj(j, m, n);
    var f = M.uG(m, n, j.name.slice(0, 255));
    n += f;
    if (f % 4 != 0) n += 4 - (f % 4);
    if (j.add.lsct) {
      j.add.lsct = { e: j.add.lsct };
      if (j.hz == "pass") {
        j.add.lsct.hz = "pass";
        j.hz = "norm";
      }
    }
    if (j.hz == "pass") j.add.lsct = { e: j.add.lsct, hz: "pass" };
    if (j.add.brit) j.add.CgEd = j.add.brit;
    n = gM.c3(m, n, j.add, b, q);
    delete j.add.CgEd;
    if (j.add.lsct) {
      if (j.add.lsct.hz) j.hz = j.add.lsct.hz;
      j.add.lsct = j.add.lsct.e;
    }
    var U = n - a;
    M.hc(m, c, U);
    return n;
  };
  eB.agL = function (j, q, m, n) {
    var G = n ? M.YZ : M.Z$,
      W = G(q, m);
    m += 4;
    if (W == 0) return m;
    var k = m;
    j.x7 = new R.T0();
    j.x7.H = M.X7(q, m, n);
    m += 16;
    j.x7.color = q[m];
    m += 1;
    var T = eB.aJ4(j.x7, q, m);
    m += 1;
    if (T) {
      var b = !1,
        c = 255,
        a = 0,
        f = 255,
        U = 0;
      for (var y = 0; y < j.rl.length; y++) if (j.rl[y].id == -3) b = !0;
      if (b) {
        j.Zr = eB.a9o(q, m, n);
        m += 18;
      }
      var Z = m,
        h = q[m];
      m++;
      var u = n ? M.NR : M.ro;
      if ((h >> 0) & 1) {
        c = q[m];
        m++;
      }
      if ((h >> 1) & 1) {
        a = u(q, m);
        m += 8;
      }
      if ((h >> 2) & 1) {
        f = q[m];
        m++;
      }
      if ((h >> 3) & 1) {
        U = u(q, m);
        m += 8;
      }
      if (((m - Z) & 1) == 1) m++;
      j._P = [c, a, f, U];
    } else {
      if (W == 20) m += 2;
      else {
        j.Zr = eB.a9o(q, m, n);
        m += 18;
      }
    }
    return k + W;
  };
  eB.azC = function (j, q, m) {
    M.hc(q, m, 0);
    m += 4;
    if (j.x7 == null) return m;
    var n = j.ex(),
      G = j.add.vmsk,
      W = m,
      k = !0;
    M.hc(q, m, 0);
    M.KY(q, m, j.x7.H);
    m += 16;
    M.t1(q, m, j.x7.color);
    m += 1;
    eB.aty(j.x7, q, m, k);
    m += 1;
    if (k) {
      if (j.Zr) {
        eB.ahv(q, m, j.Zr);
        m += 18;
      }
      var T = m;
      M.t1(q, m, G ? 15 : 3);
      m += 1;
      M.t1(q, m, n ? n.CA : 255);
      m += 1;
      M.GD(q, m, n ? n.LH : 0);
      m += 8;
      if (G) {
        M.t1(q, m, G ? G.CA : 255);
        m += 1;
        M.GD(q, m, G ? G.LH : 0);
        m += 8;
      }
      if (((m - T) & 1) == 1) m++;
    }
    M.hc(q, W - 4, m - W);
    return m;
  };
  eB.a9o = function (j, q, m) {
    var n = new R.T0();
    eB.aJ4(n, j, q);
    q += 1;
    n.color = j[q];
    q += 1;
    n.H = M.X7(j, q, m);
    q += 16;
    return n;
  };
  eB.ahv = function (j, q, m) {
    eB.aty(m, j, q, !1);
    q += 1;
    M.t1(j, q, m.color);
    q += 1;
    M.KY(j, q, m.H);
    q += 16;
  };
  eB.aJ4 = function (j, q, m) {
    var n = q[m];
    j.jS = ((n >> 0) & 1) == 0;
    j.isEnabled = ((n >> 1) & 1) == 0;
    j.HU = ((n >> 3) & 1) == 1;
    return (n >> 4) & 1;
  };
  eB.aty = function (j, q, m, n) {
    var G = 0;
    if (!j.jS) G += 1 << 0;
    if (!j.isEnabled) G += 1 << 1;
    if (j.HU) G += 1 << 3;
    if (n) G += 1 << 4;
    M.t1(q, m, G);
  };
  eB.afb = function (j, q, m, n) {
    var G = n ? M.YZ : M.Z$,
      W = G(q, m);
    m += 4;
    for (var y = 0; y < W; y++) j.EG[y] = q[m + y];
    return m + W;
  };
  eB.axj = function (j, q, m) {
    M.hc(q, m, j.EG.length);
    m += 4;
    q.xY(m, 40);
    for (var y = 0; y < 40; y++) {
      q.data[m + y] = j.EG[y];
    }
    return m + 40;
  };
  function aW() {}
  aW.VB = function (j, q, m, n, G) {
    n = aW.ald(j, q, m, n, G);
    return n;
  };
  aW.He = function (j, q, m, n, G, W, k) {
    n = aW.anL(j, q, m, n, G, W, k);
    return n;
  };
  aW.ald = function (j, q, m, n, G) {
    var W = q.p7,
      k = j.rl,
      T = {},
      b = n;
    for (var y = 0; y < k.length; y++) {
      var c = k[y],
        a = c.id,
        f = c.length,
        U;
      if (a == -2 && j.x7 == null) a = -1;
      if (a == -3) U = j.Zr.H;
      else if (a == -2) U = j.x7.H;
      else U = j.H;
      var Z = aW.aY(q.Wd, q.G6, m, U.r, U.$, n, f, G);
      Z = B.sL(Z, q.depth);
      n += f;
      if (a == -3) j.Zr.N = Z;
      else if (a == -2) j.x7.N = Z;
      else T["c" + a] = Z;
    }
    var h = new B.Rx(0);
    h.Sd = null;
    if (W == 3) {
      h.o = T.c0;
      h.i = T.c1;
      h.X = T.c2;
      h.Sd = T["c-1"];
    } else if (W == 1) {
      h.o = T.c0;
      h.i = T.c0;
      h.X = T.c0;
      h.Sd = T["c-1"];
    } else if (W == 4) {
      var u = q.Gw.r1039,
        i = null,
        x = T.c0,
        X = T.c1,
        $ = T.c2,
        H = T.c3;
      if (u) {
        var i = u.aa7,
          C = 17;
        if (i == null) {
          var l = ICC.R(u.buffer);
          if (l.header.spaceIn == "RGB ") {
          } else i = u.aa7 = ICC.U.sampleLUT(l, C);
        }
      }
      if (i) {
        var v = { o: x, i: X, X: $, Sd: H },
          K = B.j(x.length * 4, q.depth);
        B.Nr(v, K);
        B.BR(K);
        ICC.U.applyLUT4(i, C, K, K);
        B.fV(K, v);
      } else {
        var v = { o: x, i: X, X: $, Sd: H },
          K = B.j(x.length * 4, q.depth);
        B.Nr(v, K);
        B.BR(K);
        B.auf(K);
        B.fV(K, v);
      }
      h.o = x;
      h.i = X;
      h.X = $;
      h.Sd = T["c-1"];
    }
    if (h.o == null) h.o = B.j(0);
    if (h.Sd == null && h.o != null) {
      h.Sd = h.o.slice(0);
      h.Sd.fill(B.TN(B.oM(h.Sd)));
    }
    if (h.i == null) h.i = h.o.slice(0);
    if (h.X == null) h.X = h.o.slice(0);
    j.buffer = B.j(Math.max(0, j.H.C() * 4), q.depth);
    B.Nr(h, j.buffer);
    return n;
  };
  aW.anL = function (j, q, m, n, G, W, k) {
    var T = q.aph(k),
      b = q.buffer,
      c = null,
      a = B.oM(b),
      f = B.j(q.H.C(), a);
    if (k) {
      c = B.j(q.H.C(), a);
      B.Ih(b, c, 3);
      b = b.slice(0);
      B.apP(b);
    }
    for (var y = 0; y < T.length; y++) {
      var U = T[y],
        Z;
      if (U == -3) Z = q.Zr.H;
      else if (U == -2) Z = q.x7.H;
      else Z = q.H;
      var h = f;
      if (U == -3) h = q.Zr.N;
      if (U == -2) h = q.x7.N;
      if (U == -1) {
        if (c) h = c;
        else B.Ih(b, f, 3);
      }
      if (U == 0) B.Ih(b, f, 0);
      if (U == 1) B.Ih(b, f, 1);
      if (U == 2) B.Ih(b, f, 2);
      if (U == 3) B.Ih(b, f, 3);
      m.xY(n, Math.round(Z.C() * (a >>> 3) * 1.2) + 4);
      var u = n;
      n = aW.TF(j, h, m.data, Z.r, Z.$, n, a != 8 || W[1] ? 3 : 1);
      var i = n - u;
      if (j) M.aml(m.data, G + y * 10 + 2, i);
      else M.ZN(m.data, G + y * 6 + 2, i);
    }
    return n;
  };
  aW.aY = function (j, q, m, n, G, W, k, T) {
    var b = T ? M.d9 : M._h,
      c = b(m, W);
    W += 2;
    var a = aW.el(j, q, m, n, G, W, c, k - 2, T);
    return a;
  };
  aW.TF = function (j, q, m, n, G, W, k) {
    M.SO(m, W, k);
    W += 2;
    W = aW.At(j, q, m, n, G, W, k);
    return W;
  };
  aW.el = function (j, q, m, n, G, W, k, T, b) {
    var c,
      a = n * G * (q >>> 3),
      f = a & 3,
      U = a + (f == 0 ? 0 : 4 - f);
    if (T <= 0) {
      return B.j(U, q);
    }
    if (k == 0) {
      c = B.j(a);
      c.set(new Uint8Array(m.buffer, W, Math.min(a, m.buffer.byteLength - W)));
      if (q == 16)
        for (var y = 0; y < a; y += 2) {
          var Z = c[y];
          c[y] = c[y + 1];
          c[y + 1] = Z;
        }
      if (q == 32)
        for (var y = 0; y < a; y += 4) {
          var Z = c[y];
          c[y] = c[y + 3];
          c[y + 3] = Z;
          Z = c[y + 1];
          c[y + 1] = c[y + 2];
          c[y + 2] = Z;
        }
      W += a;
    } else if (k == 1) {
      c = B.j(a);
      var h = j ? 4 : 2,
        u = aW.aJp(m, c, n, G, W, W + h * G, h, b);
      W += h * G + u;
    } else if (k == 2 || k == 3) {
      var i = new Uint8Array(m.buffer, W + 2, T - 6),
        x = B.j(U);
      UZIP.inflateRaw(i, x);
      if (k == 3) {
        if (q == 8)
          for (var X = 0; X < G; X++) {
            var $ = X * n + 1,
              H = $ + n - 1,
              C = x[$ - 1];
            for (var l = $; l < H; l++) {
              C += x[l];
              x[l] = C & 255;
            }
          }
        else if (q == 16)
          for (var X = 0; X < G; X++) {
            var $ = X * n,
              H = $ + n,
              C = 0;
            for (var l = $; l < H; l++) {
              var v = l << 1;
              C += (x[v] << 8) | x[v + 1];
              x[v] = C & 255;
              x[v + 1] = C >>> 8;
            }
          }
        else {
          var K = n,
            S = x.slice(0, K * 4);
          for (var X = 0; X < G; X++) {
            var $ = X * K * 4 + 1,
              H = $ + K * 4 - 1,
              C = x[$ - 1];
            for (var l = $; l < H; l++) {
              C += x[l];
              x[l] = C & 255;
            }
            var o = X * K * 4;
            for (var l = 0; l < K; l++) {
              S[4 * l + 3] = x[o + l];
              S[4 * l + 2] = x[o + K + l];
              S[4 * l + 1] = x[o + K + K + l];
              S[4 * l] = x[o + K + K + K + l];
            }
            x.set(S, o);
          }
        }
      }
      if (x.length == U) c = x;
      else {
        c = B.j(U);
        for (var y = 0; y < x.length; y++) c[y] = x[y];
      }
    } else c = B.j(U);
    if (q == 16) c = new Uint16Array(c.buffer);
    if (q == 32) c = new Float32Array(c.buffer);
    return c;
  };
  aW.At = function (j, q, m, n, G, W, k) {
    var T = n * G,
      b = B.oM(q);
    if (b != 8) q = new Uint8Array(q.buffer);
    var c = q;
    if (k == 0) for (var y = 0; y < T; y++) m[W++] = c[y];
    else if (k == 1) {
      var a = j ? 4 : 2,
        f = aW.aon(c, m, n, G, W, W + a * G, a);
      W += a * G + f;
    } else if (k == 2 || k == 3) {
      function U(S, y) {
        return (S[y + 1] << 8) | S[y];
      }
      if (k == 3) {
        c = c.slice(0);
        if (b == 8)
          for (var Z = 0; Z < G; Z++) {
            var h = Z * n,
              u = h + n;
            for (var i = u - 1; i > h; i--)
              c[i] = (c[i] - c[i - 1] + 256) & 255;
          }
        else if (b == 16)
          for (var Z = 0; Z < G; Z++) {
            var h = Z * n,
              u = h + n;
            for (var i = u - 1; i > h; i--) {
              var x = i << 1,
                X = (U(c, x) - U(c, x - 2) + 65536) & 65535;
              c[x] = X >>> 8;
              c[x + 1] = X & 255;
            }
            var $ = c[h * 2];
            c[h * 2] = c[h * 2 + 1];
            c[h * 2 + 1] = $;
          }
        else if (b == 32) {
          var H = n,
            C = c.slice(0, H * 4);
          for (var Z = 0; Z < G; Z++) {
            var l = Z * H * 4;
            for (var i = 0; i < H; i++) {
              var v = l + 4 * i;
              C[i] = c[v + 3];
              C[H + i] = c[v + 2];
              C[H + H + i] = c[v + 1];
              C[H + H + H + i] = c[v];
            }
            for (var i = H * 4 - 1; i > 0; i--)
              C[i] = (C[i] - C[i - 1] + 256) & 255;
            c.set(C, l);
          }
        }
      }
      m[W] = 120;
      m[W + 1] = 156;
      W += 2;
      var K = pako.deflateRaw(c, { acN: 4 });
      m.set(K, W);
      W += K.length + 4;
    } else console.log("Unknown compression: " + k);
    return W;
  };
  aW.aJp = function (j, q, m, n, G, W, k, T) {
    if (!(j instanceof Uint8Array) || !(q instanceof Uint8Array)) throw "e";
    var b = W,
      c = n | 0;
    if (T) {
      if (k == 2)
        for (var y = 0; y < c; y++) {
          var a = M.d9(j, G + (y << 1));
          aW.tO(j, W, a, q, y * m, m);
          W += a;
        }
      else
        for (var y = 0; y < c; y++) {
          var a = M.YZ(j, G + (y << 2));
          aW.tO(j, W, a, q, y * m, m);
          W += a;
        }
    } else {
      if (k == 2)
        for (var y = 0; y < c; y++) {
          var a = M._h(j, G + (y << 1));
          aW.tO(j, W, a, q, y * m, m);
          W += a;
        }
      else
        for (var y = 0; y < c; y++) {
          var a = M.Z$(j, G + (y << 2));
          aW.tO(j, W, a, q, y * m, m);
          W += a;
        }
    }
    return W - b;
  };
  aW.aon = function (j, q, m, n, G, W, k) {
    var T = W;
    if (k == 2)
      for (var y = 0; y < n; y++) {
        var b = aW.aCK(j, y * m, m, q, W);
        M.JP(q, G + y * 2, b);
        W += b;
      }
    else
      for (var y = 0; y < n; y++) {
        var b = aW.aCK(j, y * m, m, q, W);
        M.ZN(q, G + y * 4, b);
        W += b;
      }
    return W - T;
  };
  aW.aCK = function (j, q, aF, m, n) {
    var G, W, k, T, b, c_, c;
    T = q + aF;
    for (k = q, W = n; aF > 0; k = G, aF -= c_) {
      c = aF < 128 ? aF : 128;
      if (k <= T - 3 && j[k + 1] == j[k + 0] && j[k + 2] == j[k + 0]) {
        for (G = k + 3; G < k + c && j[G] == j[k + 0]; ) ++G;
        c_ = G - k;
        m[W++] = 1 + 256 - c_;
        m[W++] = j[k + 0];
      } else {
        for (G = k; G < k + c; )
          if (G <= T - 3 && j[G + 1] == j[G + 0] && j[G + 2] == j[G + 0]) break;
          else ++G;
        c_ = G - k;
        m[W++] = c_ - 1;
        for (var y = 0; y < c_; y++) m[W + y] = j[k + y];
        W += c_;
      }
    }
    return W - n;
  };
  aW.tO = function (j, q, m, n, G, W) {
    for (var k = 0; k < m; ) {
      var aF = j[q++];
      if (aF >= 128) {
        var T = j[q++],
          b = G + (257 - aF);
        n.fill(T, G, b);
        G = b;
        k += 2;
      } else {
        for (var y = 0; y <= aF; y++) n[G + y] = j[q + y];
        q += aF + 1;
        G += aF + 1;
        k += 1 + 1 + aF;
      }
    }
  };
  function b7() {}
  b7.aoc = function (j) {
    if (j.Gw.r1005) {
      j.zv = M.IP(j.Gw.r1005, 0);
    }
    if (j.Gw.r1025) {
      var q = j.Gw.r1025;
      delete j.Gw.r1025;
      var m = hR.xD(q, 0, q.length, j.r, j.$),
        n = new R.tm();
      n.D = m;
      j.GA[0] = fb.t8("Work Path", { vmsk: n });
    }
    if (j.Gw.r1026) {
      var G = j.Gw.r1026;
      for (var y = 0; y < G.length; y += 2) {
        var W = j.U[y >>> 1];
        if (W) W.bH = M._h(G, y);
      }
      delete j.Gw.r1026;
    }
    if (j.Gw.r1032) {
      j.M3 = hx.a3c(j.Gw.r1032, 0);
    }
    delete j.Gw.r1036;
    j.uJ(j.Gw.r1039);
    if (j.Gw.r1045) {
      j.vS = [];
      var k = j.Gw.r1045,
        T = 0;
      while (T < k.length) {
        var b = M.z5(k, T);
        j.vS.push(b);
        T += 4 + 2 + b.length * 2;
      }
    }
    if (j.Gw.r1050) {
      var c = M.Z$,
        a = j.Gw.r1050,
        f = M.Z$(a, 0);
      if (f == 6) {
        var T = 4,
          U = M.X7(a, T);
        T += 16;
        var Z = M.pJ(a, T);
        T += 4 + Z.length * 2;
        var h = c(a, T);
        T += 4;
        var u = j.gQ;
        for (var y = 0; y < h; y++) {
          var i = L.ct.HX(),
            X;
          u.push(i);
          i = i.v;
          i.sliceID.v = c(a, T);
          T += 4;
          i.groupID.v = c(a, T);
          T += 4;
          var x = c(a, T);
          T += 4;
          if (x == 1) {
            X = c(a, T);
            T += 4;
          }
          var Z = M.pJ(a, T);
          T += 4 + Z.length * 2;
          var $ = c(a, T);
          T += 4;
          var H = [c(a, T), c(a, T + 4), c(a, T + 8), c(a, T + 12)];
          T += 16;
          L.ct.As(u, u.length - 1, H);
          var C = (i.url.v = M.pJ(a, T));
          T += 4 + C.length * 2;
          var l = (i.null.v = M.pJ(a, T));
          T += 4 + l.length * 2;
          var v = (i.Msge.v = M.pJ(a, T));
          T += 4 + v.length * 2;
          var K = (i.altTag.v = M.pJ(a, T));
          T += 4 + K.length * 2;
          i.cellTextIsHTML.v = a[T] == 1;
          T++;
          var S = (i.cellText.v = M.pJ(a, T));
          T += 4 + S.length * 2;
          var o = c(a, T);
          T += 4;
          var V = c(a, T);
          T += 4;
          var P = a.slice(T, T + 4);
          T += 4;
          if (x != 2) u.pop();
        }
      } else if (f == 8) {
        var z = {},
          E = new hk(0, 0, j.r, j.$);
        fj.Ky(a, z, 8, !1);
        var a = (j.gQ = z.slices.v);
        for (var y = 0; y < a.length; y++) {
          var A = L.ct.II(a, y),
            N = new hk(A[0], A[1], A[2] - A[0], A[3] - A[1]);
          if (a[y].v.origin.v.ESliceOrigin != "userGenerated" || N.TM(E).jG()) {
            a.splice(y, 1);
            y--;
          }
        }
      }
    }
    if (j.Gw.r1058) {
      var Q = j.Gw.r1058,
        e = UTIF.decode(Q.buffer, { parseMN: !1, debug: !1 });
      kI.E5(e[0], j.Un);
      delete j.Gw.r1058;
    }
    if (j.Gw.r1060) {
      var Y = M.K6(j.Gw.r1060);
      kI.bX(Y, j.Un);
      delete j.Gw.r1060;
    }
    if (j.Gw.r1065) {
      var G = j.Gw.r1065;
      j.Qp = {};
      fj.Ky(G, j.Qp, 4, !1);
    }
    if (j.Gw.r1069) {
      var G = j.Gw.r1069,
        d = [];
      for (var y = 2; y < G.length; y += 4) {
        var X = M.Z$(G, y);
        for (var I = 0; I < j.U.length; I++) {
          var W = j.U[I];
          if (W.add.lyid == X && W.add.lsct != 3 && d.indexOf(I) == -1)
            d.push(I);
        }
      }
      j.J = d;
    }
    if (j.Gw.r1072) {
      var G = j.Gw.r1072;
      for (var y = 0; y < G.length; y++) {
        var W = j.U[y];
        if (W) W.wN = G[y] == 1;
      }
      delete j.Gw.r1072;
    }
    if (j.Gw.r1073) {
      var G = j.Gw.r1073,
        T = 0,
        O = M.dW(G, T);
      T += 4;
      var s = M.dW(G, T);
      T += 4;
      for (var y = 0; y < s; y++) {
        j.jE.push({
          y: O >= 2 ? M.$C(G, T + 2) : M.IP(G, T + 2),
          x: O >= 2 ? M.$C(G, T + 6) : M.IP(G, T + 6),
        });
        T += 14;
      }
      delete j.Gw.r1073;
    }
    if (j.Gw.r1074) {
      j.pj = {};
      fj.Ky(j.Gw.r1074, j.pj, 4, !1);
      delete j.Gw.r1074;
    }
    var p,
      F,
      am = null;
    if (j.Gw.r3000) {
      p = {};
      fj.Ky(j.Gw.r3000, p, 4, !1);
      delete j.Gw.r3000;
    }
    if (j.add.pths) {
      F = j.add.pths;
      delete j.add.pths;
    }
    for (var g = 0; g <= 997; g++) {
      var w = "r" + (2e3 + g),
        q = j.Gw[w];
      if (q == null) break;
      var m = hR.xD(q, 0, q.length, j.r, j.$),
        r = "Path " + g,
        eQ = [0, 0];
      if (F) {
        var t = F.pathList.v[g].v,
          dq = t.pathSymmetryClass;
        if (dq) {
          dq = dq.v;
          var D = dq.pathSymmetryMode.v.pathSymmetryModeEnum.slice(16),
            h = dq.pathSymmetryCount;
          eQ = [B.vW.a66.indexOf(D), h ? h.v : 0];
        }
        r = t.pathUnicodeName.v;
      }
      var ha = p ? p.keyRootDescriptorList.v[g].v.keyDescriptorList.v : R.Pp(m),
        n = new R.tm();
      n.D = m;
      j.GA.push(fb.t8(r, { vmsk: n, vogk: ha }, eQ));
      delete j.Gw[w];
    }
    if (F) {
      var k4 = F.pathSymmetrySelectedPath;
      if (k4) am = j.GA[k4.v + 1];
    }
    for (var y = 0; y < j.GA.length; y++)
      if (j.GA[y].oW[0] == 3) {
        j.GA.splice(y, 1);
        y--;
      }
    if (am) {
      if (am.oW[0] == 3) j.EK = !0;
      else j.PU = j.GA.indexOf(am);
    }
    if (j.Gw.r4000) {
      j.H8 = B.H8.VB(j.Gw.r4000);
    }
    var aA = j.Gw.r7000,
      ex = j.Gw.r7001;
    if (aA) {
      var b = M.K6(aA);
      j.Mr = hx.abI(b);
    }
    if (ex) {
      var b = M.K6(ex);
      j.$n = hx.a6B(b);
    }
    delete j.Gw.r7000;
    delete j.Gw.r7001;
  };
  b7.aBW = function (j, q, m) {
    j.Gw.r1005 = new Uint8Array([
      0, 0, 0, 0, 0, 1, 0, 2, 0, 0, 0, 0, 0, 1, 0, 2,
    ]);
    M.a6X(j.Gw.r1005, 0, j.zv);
    M.a6X(j.Gw.r1005, 8, j.zv);
    if (j.jE.length > 0) {
      var n = j.jE;
      j.Gw.r1073 = new Uint8Array(8 + n.length * 14);
      M.rd(j.Gw.r1073, 0, 3);
      M.rd(j.Gw.r1073, 4, n.length);
      for (var y = 0; y < n.length; y++) {
        var G = 8 + 14 * y;
        M.SO(j.Gw.r1073, G, 14);
        M.MW(j.Gw.r1073, G + 2, n[y].y);
        M.MW(j.Gw.r1073, G + 6, n[y].x);
        M.SO(j.Gw.r1073, G + 10, -1);
        M.SO(j.Gw.r1073, G + 12, 8);
      }
    }
    if (j._C()) {
      j.Gw.r1022 = new Uint8Array([0, 3 + j._E.length - 1, 0]);
    } else delete j.Gw.r1022;
    var W = new Uint8Array(j.U.length * 2),
      k = 0,
      T = new Uint8Array(j.U.length),
      b = 1,
      G = 16;
    for (var y = 0; y < j.U.length; y++) {
      var c = j.U[y],
        a = c.bH,
        f = c.wN ? 1 : 0;
      M.JP(W, y * 2, a);
      T[y] = f;
      if (a > k) k = a;
      if (f == 0) b = 0;
    }
    if (k > 0) j.Gw.r1026 = W;
    if (b < 1) j.Gw.r1072 = T;
    var U = j.M3,
      Z = U.length,
      h = (j.Gw.r1032 = new Uint8Array(16 + 5 * Z));
    M.ZN(h, 0, 1);
    M.ZN(h, 4, 576);
    M.ZN(h, 8, 576);
    M.ZN(h, 12, Z);
    for (var y = 0; y < Z; y++) {
      M.rd(h, G, Math.round(U[y][1] * 32));
      h[G + 4] = U[y][0];
      G += 5;
    }
    if (q[4] != !0) {
      var u = [j.ht(), new hk(0, 0, j.r, j.$)],
        i = 0;
      B.HZ(u);
      while (u[i + 1].C() > 200 * 200) i += 2;
      var x = gh.lj("jpg"),
        X = u[i + 1],
        $ = new Uint8Array(x.Ev([[u[i].buffer, null, j.zv]], X.r, X.$)),
        h = (j.Gw.r1036 = new Uint8Array(28 + $.length));
      M.ZN(h, 0, 1);
      M.ZN(h, 4, X.r);
      M.ZN(h, 8, X.$);
      M.ZN(h, 12, X.r * 3);
      M.ZN(h, 16, X.C() * 3);
      M.ZN(h, 20, $.length);
      M.JP(h, 24, 24);
      M.JP(h, 26, 1);
      h.set($, 28);
    }
    delete j.Gw.r1045;
    delete j.Gw.r1006;
    delete j.Gw.r1077;
    var H = new aj();
    G = 0;
    var C = new Uint8Array(4 + m.length * 13);
    C[3] = 1;
    for (var y = 0; y < m.length; y++) {
      var l = m[y],
        v = l.name + "\0";
      M.mO(H, G, v);
      G += 4 + v.length * 2;
      var K = 4 + y * 13;
      be.WG(C, K, l.Fx);
      C[K + 11] = l.YB;
      C[K + 12] = l.Sg;
    }
    if (G != 0) j.Gw.r1045 = H.data.slice(0, G);
    j.Gw.r1077 = C;
    for (var y = 0; y < j.gQ.length; y++)
      j.gQ[j.gQ.length - y - 1].v.sliceID.v = 2 + y * 3;
    var S = {
        classID: "null",
        baseName: { t: "TEXT", v: "User" },
        bounds: {
          t: "Objc",
          v: {
            classID: "Rct1",
            Top: { t: "long", v: 0 },
            Left: { t: "long", v: 0 },
            Btom: { t: "long", v: 0 },
            Rght: { t: "long", v: 0 },
          },
        },
        slices: { t: "VlLs", v: j.gQ },
      },
      H = new aj();
    M.hc(H, 0, 8);
    M.hc(H, 4, 16);
    var o = fj.LM(H, S, 8);
    j.Gw.r1050 = H.data.slice(0, o + 8);
    var H = new aj();
    M.hc(H, 0, 16);
    var o = fj.LM(H, j.Qp, 4);
    j.Gw.r1065 = H.data.slice(0, o + 4);
    if (j.pj) {
      var H = new aj();
      M.hc(H, 0, 16);
      var o = fj.LM(H, j.pj, 4);
      j.Gw.r1074 = H.data.slice(0, o + 4);
    }
    var V = j.J;
    h = j.Gw.r1069 = new Uint8Array(2 + V.length * 4);
    M.JP(h, 0, V.length);
    for (var y = 0; y < V.length; y++) M.ZN(h, 2 + 4 * y, j.U[V[y]].add.lyid);
    delete j.Gw.r1058;
    delete j.Gw.r1060;
    if (Object.keys(j.Un).length != 0) {
      var P = [[Math.round(j.zv * 1e4), 1e4]],
        z = [
          { t274: [1], t282: P, t283: P, t296: [2] },
          {
            t259: [6],
            t282: [[72, 1]],
            t283: [[72, 1]],
            t296: [2],
            t513: [302],
            t514: [0],
          },
        ];
      kI.Ox(j.Un, z[0], q[0] && q[1]);
      j.Gw.r1058 = new Uint8Array(UTIF.encode(z));
      var E = kI.e7(j.Un);
      j.Gw.r1060 = M.Nh(E);
    }
    var A = [],
      N = [],
      Q = j.GA.slice(0);
    if (j.EK) {
      var e = hR.azR([
          { type: 6 },
          { type: 8, all: 0 },
          { type: 3, length: 5, boolop: 1, frule: 2, prmA: 0, prmB: 0 },
          { type: 5, c: [0, 0, 0, 0, 0, 0] },
          { type: 5, c: [20, 0, 20, 0, 20, 0] },
          { type: 5, c: [20, 20, 20, 20, 20, 20] },
          { type: 5, c: [0, 20, 0, 20, 0, 20] },
          { type: 5, c: [0, 0, 0, 0, 0, 0] },
        ]),
        Y = new R.tm();
      Y.D = e;
      Q.push(fb.t8("Tile Symmetry 1", { vmsk: Y, vogk: R.Pp(e) }, [3, 1]));
    }
    var d = j.EK ? j.GA.length - 1 : j.PU - 1;
    for (var y = 0; y < Q.length; y++) {
      var I = Q[y],
        e = I.add.vmsk.D;
      if (y == 0 && e.length == 2) continue;
      var O = B.j(e.length * 26);
      hR.WJ(O, 0, e, j.r, j.$);
      var s = y == 0 ? 1025 : 2e3 + y - 1;
      j.Gw["r" + s] = O;
      if (y != 0) {
        var p = {
            classID: "pathInfoClass",
            pathUnicodeName: { t: "TEXT", v: I.name },
          },
          F = (p.pathSymmetryClass = {
            t: "Objc",
            v: {
              classID: "pathSymmetryClass",
              pathSymmetryMode: {
                t: "enum",
                v: {
                  pathSymmetryModeEnum: "pathSymmetryMode" + B.vW.a66[I.oW[0]],
                },
              },
            },
          });
        if (I.oW[1] != 0) F.v.pathSymmetryCount = { t: "long", v: I.oW[1] };
        A.push({ t: "Objc", v: p });
        N.push({
          t: "Objc",
          v: {
            classID: "null",
            keyDescriptorList: { t: "VlLs", v: I.add.vogk },
          },
        });
      }
    }
    if (A.length != 0) {
      j.add.pths = { classID: "pathsDataClass", pathList: { t: "VlLs", v: A } };
      if (d != -1) j.add.pths.pathSymmetrySelectedPath = { t: "long", v: d };
      N = { classID: "null", keyRootDescriptorList: { t: "VlLs", v: N } };
      var H = new aj();
      M.hc(H, 0, 16);
      var o = fj.LM(H, N, 4);
      j.Gw.r3000 = H.data.slice(0, o + 4);
    } else {
      delete j.add.pths;
      delete j.Gw.r3000;
    }
    if (j.H8 && j.H8.length != 0) {
      j.Gw.r4000 = B.H8.RS(j.H8);
    }
    if (j.Mr.length != 0) {
      var g =
        '<variableSets xmlns="http://ns.adobe.com/Variables/1.0/">\n' +
        '<variableSet locked="none" varSetName="binding1">\n' +
        "<variables>";
      for (var y = 0; y < j.Mr.length; y++) {
        var w = j.Mr[y],
          r = [];
        for (var s in w) r.push(s + '="' + w[s] + '"');
        g += "<variable " + r.join(" ") + ">\n</variable>\n";
      }
      g += "</variables>\n</variableSet>\n</variableSets>";
      j.Gw.r7000 = M.Nh(g);
    }
    if (j.$n.length != 0) {
      var g = '<sampleDataSets psdPath="' + j.name + '">\n';
      for (var y = 1; y < j.$n.length; y++) {
        var eQ = j.$n[y];
        g += '<sampleDataSet dataSetName="Data Set ' + y + '">\n';
        for (var t = 0; t < eQ.length; t++)
          g +=
            "<" +
            j.$n[0][t] +
            ">" +
            eQ[t].replace(/</g, "&lt;").replace(/>/g, "&gt;") +
            "</" +
            j.$n[0][t] +
            ">\n";
        g += "</sampleDataSet>\n";
      }
      g += "</sampleDataSets>";
      j.Gw.r7001 = M.Nh(g);
    }
  };
  b7.acD = function (j, q, m) {
    var n = M.Z$(q, m),
      G = 0;
    m += 4;
    var W = [];
    while (G < n) {
      var k = M.IH(q, m + G, 4);
      G += 4;
      var T = M._h(q, m + G);
      G += 2;
      var b = M.xs(q, m + G);
      G += b.length;
      if (k == "MeSa" && (T == 7e3 || T == 7001)) {
      } else if (k != "8BIM") {
        W.push(T);
        console.log("Unknown Image Resources signature: " + k + ", ID: " + T);
      }
      var c = M.Z$(q, m + G);
      G += 4;
      if (j.Gw["r" + T] != null) console.log("--- two resources with same ID");
      j.Gw["r" + T] = M.AN(q, m + G, c);
      G += c + (c & 1);
    }
    for (var y = 0; y < W.length; y++) delete j.Gw["r" + W[y]];
    delete j.Gw.r1092;
    return m + n;
  };
  b7.a2f = function (j, q, m) {
    var n = m,
      k = 0;
    m += 4;
    var G = [];
    for (var W in j.Gw) {
      G.push(parseInt(W.slice(1)));
    }
    G.sort(function (f, U) {
      return f - U;
    });
    for (var y = 0; y < G.length; y++) {
      var T = G[y];
      M.v3(q, m + k, T == 7e3 || T == 7001 ? "MeSa" : "8BIM");
      k += 4;
      M.Mc(q, m + k, T);
      k += 2;
      var b = M.uG(q, m + k, "");
      k += b;
      var c = j.Gw["r" + T],
        a = c.length;
      M.hc(q, m + k, a);
      k += 4;
      M.UG(q, m + k, c);
      k += a;
      if (a % 2 == 1) k++;
    }
    M.hc(q, n, k);
    return m + k;
  };
  function hx() {}
  hx.zy = function (j, q, m) {
    return;
    var n = "",
      G = q;
    while (G != 0) {
      var W = (G % 1e3) + "";
      while (W.length < 3) W = "0" + W;
      n = (n == "" ? W : W + " ") + n;
      G = Math.floor(G / 1e3);
    }
    while (n.startsWith("0") && n != "0") n = n.slice(1);
    while (n.length < 11) n = " " + n;
    console.log("===", n, "\t".repeat(j), ": " + m);
  };
  hx.a31 = function (j) {
    var q = { Gw: {}, add: {}, depth: 8 },
      n = 0,
      G = 0,
      T;
    q.Wd = !1;
    q.G6 = 8;
    var m = new Uint8Array(j);
    G = hx.pw(q, m, n);
    n = G;
    G = hx.aKV(q, m, n);
    n = G;
    var W = M.Z$(m, n);
    n += 4 + W;
    var k = q.Wd ? 8 : 4;
    if (q.Wd) T = M.K_(m, n);
    else T = M.Z$(m, n);
    n += k + T;
    G = hx.a3G(q, m, n);
    return [{ Iu: new hk(0, 0, q.r, q.$), data: q.buffer.buffer }];
  };
  hx.VB = function (j, q) {
    q.Wd = !1;
    var m = new Uint8Array(j),
      n = 0,
      G = 0,
      T = 0,
      U = !1,
      Z = !0,
      h = !1,
      u = 0,
      go = 0;
    G = hx.pw(q, m, n);
    hx.zy(0, G - n, "PSD Header");
    n = G;
    G = hx.aKV(q, m, n);
    hx.zy(0, G - n, "Color Mode Data");
    n = G;
    G = b7.acD(q, m, n);
    hx.zy(0, G - n, "Image Resources");
    n = G;
    var W = n;
    G = hx.a6s(q, m, n);
    hx.zy(0, G - n, "Layer And Mask Info");
    n = G;
    b7.aoc(q);
    var W = n;
    G = hx.a3G(q, m, n);
    hx.zy(0, G - n, "Merged Image");
    n = G;
    delete q.Wd;
    if (q.U.length == 0) {
      var k = q.dj();
      k.tV("Background");
      q.U.push(k);
      k.buffer = q.buffer.slice(0);
      k.H = new hk(0, 0, q.r, q.$);
    }
    for (var y = 0; y < q.U.length; y++) {
      var G = q.U[y],
        b = G.add.lsct;
      if (b == hQ.$a) T++;
      else if (b == hQ.WR || b == hQ.z$) T--;
    }
    while (T < 0) {
      q.U.unshift(q.to());
      T++;
    }
    var c = new hk(0, 0, q.r, q.$),
      a = q.add.Txt2,
      f = a;
    if (f) {
      f = f.SA;
      if (f._DocumentResources == null) f = eY.avH(f);
    }
    var i = -1;
    for (var y = 0; y < q.U.length; y++) {
      var G = q.U[y],
        x = G.add.lsct,
        X = G.add.vmsk,
        $ = G.ex();
      if (x == hQ.$a) {
        u++;
        G.add.lspf = 0;
      } else if (x == hQ.WR || x == hQ.z$) u--;
      if (G.name == "") {
        G.name = "Layer " + (y + 1);
        h = !0;
      }
      if (h && G.D1() && G.hz == "norm") G.hz = "pass";
      if (G.r3() && G.xE(q) == null) delete G.add.SoLd;
      if (G.r3() && G.xE(q).x7) {
        var H = G.xE(q);
        H.x7.isEnabled = G.add.SoLd.filterFX.v.filterMaskEnable.v;
      }
      if (X && G.ql()) {
        var C = eu.rS.i4(!0);
        if (G.add.vstk == null) G.add.vstk = B.S(C);
        else {
          var l = "strokeStyleLineDashSet";
          if (G.add.vstk[l] == null) G.add.vstk[l] = B.S(C[l]);
        }
        G.add.vstk.strokeStyleLineWidth.v.type = "#Pxl";
        G.add.vstk.strokeStyleResolution.v = q.zv;
      }
      if (X && (G.add.vogk == null || B.z.in(X.D) != G.add.vogk.length)) G.Pp();
      if (X && G.add.vogk) {
        var v = X.D,
          K = G.add.vogk,
          S = 0;
        for (var o = 0; o < v.length; o++) {
          var V = v[o];
          if (V.e == 0 || V.e == 3)
            if (V.Np != -1) {
              if (
                v[o + 1 + V.length] &&
                v[o + 1 + V.length].Np == -1 &&
                K[S].v.keyOriginType
              ) {
                G.Pp();
                break;
              }
              S++;
            }
        }
      }
      if (!1) {
        var P = G.add.vogk,
          z = !0;
        for (var S = 0; S < P.length; S++) {
          var E = P[S].v.keyShapeInvalidated;
          if (E == null || E.v == !1) z = !1;
        }
        if (z) G.Pp();
      }
      if (G.add.SoLd && G.H.jG()) {
        console.log("redrawing smart instance");
        G.yZ(q, null, null, !0, !0);
      }
      if ($ == null && G.x7 != null) {
        if (G.x7.HU == !1) {
          G.x7.HU = !0;
          G.Zr = G.x7.P();
        }
      }
      $ = G.ex();
      if (G._P) {
        var C = G._P,
          A = X;
        if ($) {
          $.CA = C[0];
          $.LH = C[1];
        }
        if (A) {
          A.CA = C[2];
          A.LH = C[3];
        }
        G._P = null;
      }
      if (
        $ != null &&
        X != null &&
        ($.LH + X.LH != 0 || $.CA + X.CA != 2 * 255)
      )
        G.D5(q);
      else if (X != null && !G.ql()) G.D5(q);
      else if ($ && $.CA != 255 && G.ql()) G.D5(q);
      var N = G.add.artb;
      if (N && N.artboardBackgroundType == null)
        N.artboardBackgroundType = { t: "long", v: 1 };
      if (N && u != 0) delete G.add.artb;
      var Q = G.add.vstk;
      if (
        G.ql() &&
        (G.H.jG() ||
          (X && X.LH != 0) ||
          (Q &&
            !Q.fillEnabled.v &&
            (!Q.strokeEnabled.v || Q.strokeStyleLineWidth.v.val == 0)))
      )
        G.tK(q);
      if (G.add.TySh) {
        U = !0;
        if (!G.H.jG()) Z = !1;
      }
      if (G.add.TySh && f) {
        i++;
        var e = G.add.TySh.s3,
          Y = al.fu(e),
          d = f._DocumentObjects._TextObjects;
        if (d.length <= i) {
          console.log("Txt2 incomplete");
          continue;
        }
        var I = d[i]._Model,
          O = I._StyleRun ? I._StyleRun._RunArray : [],
          s = e.EngineDict.StyleRun.RunArray;
        for (var p = 0; p < s.length; p++) {
          var F = s[p].StyleSheet.StyleSheetData;
          if (O[p] == null) continue;
          var g = O[p]._RunData._StyleSheet._Features;
          if (g) {
            if (g._BaselineDirection)
              F.BaselineDirection = parseInt(g._BaselineDirection.slice(1));
            if (g._FillBackgroundFlag)
              F._FillBackgroundFlag = g._FillBackgroundFlag;
            if (g._FillBackgroundColor)
              F._FillBackgroundColor = {
                Type: 1,
                Values: h6.Hh(g._FillBackgroundColor._Color._Values),
              };
            var b = al.ls;
            for (var w = 0; w < b.length; w++)
              if (g[b[w]] != null) F[b[w]] = g[b[w]];
            var r = [
              "_LineCap",
              "_LineJoin",
              "_MiterLimit",
              "_LineDashOffset",
              "_DigitSet",
            ];
            for (var w = 0; w < r.length; w++)
              if (g[r[w]] != null) F[r[w]] = parseFloat(g[r[w]].slice(1));
            if (g._MiterLimit != null)
              F._MiterLimit = Math.max(F._MiterLimit, 1);
            if (g._LineDashArray != null)
              F._LineDashArray = h6.Hh(g._LineDashArray);
          }
        }
        var eQ = e.EngineDict.ParagraphRun.RunArray,
          t = I._ParagraphRun._RunArray;
        if (t == null) t = [];
        var dq = Math.min(t.length, eQ.length);
        for (var w = 0; w < dq; w++) {
          var D = eQ[w].ParagraphSheet.Properties,
            ha = f._DocumentResources._ParagraphSheetSet._Resources,
            am = t[w]._RunData._ParagraphSheet;
          if (typeof am == "string") am = ha[parseInt(am.slice(1))]._Resource;
          var k4 =
            am._Parent == null
              ? am
              : ha[parseInt(am._Parent.slice(1))]._Resource;
          am = am._Features;
          k4 = k4._Features;
          var aA = am._ParagraphDirection;
          if (aA == null) aA = k4._ParagraphDirection;
          if (aA) D._Direction = parseInt(aA.slice(1));
          if (am._ComposerEngine)
            D._ComposerEngine = parseInt(am._ComposerEngine.slice(1));
        }
        if (I._AlternateGlyphRun) {
          var t = I._AlternateGlyphRun._RunArray,
            dq = t.length,
            ex = (e.EngineDict.AlternateGlyphRun = al.asm());
          for (var w = 0; w < dq; w++) {
            var am = t[w],
              ac = {},
              eJ = am._RunData._AlternateGlyphSheet;
            if (eJ) ac.Glyph = parseInt(eJ._Glyph.slice(1));
            ex.RunArray.push(ac);
            ex.RunLengthArray.push(parseInt(am._Length.slice(1)));
          }
        }
        var h$ = f._DocumentResources,
          da = h$._FontSet._Resources,
          bb = e.ResourceDict.FontSet;
        for (var gb = 0; gb < bb.length; gb++) {
          var fM = bb[gb],
            kS = null;
          for (var w = 0; w < da.length; w++) {
            var cY = da[w]._Resource._Identifier;
            if (fM.Name == cY._Name.slice(1)) kS = cY;
          }
          if (kS) {
            var cS = kS._MMAxis;
            if (cS) {
              fM.Axis = [];
              for (var w = 0; w < cS.length; w++)
                fM.Axis.push(parseInt(cS[w].slice(1)));
            }
          }
        }
        var k3 = h$._TextFrameSet._Resources,
          di = k3[i]._Resource,
          a7 = di._Data,
          b0 = new k$(1, 0, 0, 1, 0, 0);
        if (di._0) {
          var e1 = parseFloat(di._0[0].slice(1)),
            l2 = parseFloat(di._0[1].slice(1));
          b0.translate(e1, l2);
        }
        if (Y) {
          b0.translate(Y[0], Y[1]);
          al.ms(e, [0, 0, Y[2] - Y[0], Y[3] - Y[1]]);
        } else {
          if (di._Bezier && di._Bezier._Points) {
            var kL = di._Bezier._Points,
              e1 = parseFloat(kL[0].slice(1)),
              l2 = parseFloat(kL[1].slice(1));
            if (e1 != 0 || l2 != 0) {
              b0.translate(e1, l2);
            }
          }
        }
        if (di._Data && di._Data._FrameMatrix) {
          var es = di._Data._FrameMatrix;
          es = es.map(function (aI) {
            return parseFloat(aI.slice(1));
          });
          b0.concat(new k$(es[0], es[1], es[2], es[3], es[4], es[5]));
        }
        b0.concat(G.add.TySh.u);
        G.add.TySh.u = b0;
        var kR = a7._Type ? parseInt(a7._Type.slice(1)) : 0;
        if (
          kR == 2 ||
          (kR == 1 && a7._PathData && a7._PathData._Spacing == "i-3")
        )
          if (di._Bezier) {
            var eH = function (aI) {
                return parseFloat(aI.slice(1));
              },
              kL = di._Bezier._Points.map(eH);
            if (Y) B.b.u(kL, new k$(1, 0, 0, 1, -Y[0], -Y[1]), kL);
            var cZ = a7._PathData ? a7._PathData._Reversed : !1,
              ga = a7._TextOnPathTRange;
            if (ga == null) ga = ["f-3", "f-3"];
            e.Curve = {
              Points: kL,
              TextOnPathTRange: ga.map(eH),
              Reversed: cZ == null ? !1 : cZ,
            };
            G.add.TySh.add = { vmsk: new R.tm(), vogk: null };
            al.nk(G.add.TySh);
          }
        if (a7._LineOrientation == "i2") e._LineOrientation = 2;
      }
    }
    L.YM.DI(q, !0);
    var fi = {},
      iz = [];
    for (var y = 0; y < q.U.length; y++) {
      var i5 = q.U[y].add.lyid;
      if (i5 == null) continue;
      var go = Math.max(go, i5);
      if (fi[i5] != null) iz.push(y);
      else fi[i5] = !0;
    }
    for (var y = 0; y < iz.length; y++) q.U[iz[y]].add.lyid = go + 1 + y;
  };
  hx.a3c = function (j, q) {
    q += 12;
    var m = M.Z$(j, q),
      n = [];
    q += 4;
    m = Math.min(m, Math.floor((j.length - q) / 5));
    for (var y = 0; y < m; y++) {
      var G = Math.min(j[q + y * 5 + 4], 1),
        W = M.dW(j, q + y * 5) / 32;
      n.push([G, W]);
    }
    return n;
  };
  hx.abI = function (j) {
    var q = new DOMParser(),
      m = q.parseFromString(j, "text/xml").firstChild.children[0],
      n = m.getElementsByTagName("variables");
    if (n.length == 0) return [];
    n = n[0].children;
    var G = [],
      W = "varName trait docRef placementMethod align valign clip".split(" ");
    for (var k = 0; k < n.length; k++) {
      var T = n[k],
        b = {};
      G.push(b);
      for (var c = 0; c < W.length; c++) {
        var a = W[c],
          f = T.getAttribute(a);
        if (f == null) continue;
        b[a] = f;
      }
    }
    return G;
  };
  hx.a6B = function (j) {
    var q = new DOMParser(),
      m = q.parseFromString(j, "text/xml").firstChild.children,
      n = [[]];
    if (m == null) return n;
    for (var y = 0; y < m.length; y++) {
      var G = m[y],
        W = [];
      n.push(W);
      for (var k = 0; k < G.children.length; k++) {
        var T = G.children[k];
        if (y == 0) n[0].push(T.tagName);
        W.push(T.textContent);
      }
    }
    return n;
  };
  hx.RS = function (j, q, m) {
    L.YM.TH(j);
    L.YM.DI(j, !1);
    j.Wd = m[3] == !0;
    var n = [],
      G = [],
      u = 0;
    for (var y = 0; y < j.U.length; y++) {
      var W = j.U[y];
      if (W.r3() && W.xE(j).x7) {
        W.add.SoLd.filterFX.v.filterMaskEnable.v = W.xE(j).x7.isEnabled;
      }
      if (W.add.TySh) {
        var k = W.add.TySh.s3,
          T = al.Po(k);
        W.add.TySh.Ix.TextIndex = { t: "long", v: n.length };
        n.push(k);
        if (T == 2) al.NX(W.add.TySh);
      }
      var b = W.add.vstk;
      if (b) b.strokeStyleResolution.v = j.zv;
      if (W.ql() || (m[2] && W.add.SoLd)) {
        G[y] = [W.H, W.buffer];
        W.H = new hk();
        W.buffer = B.j(0);
        if (W.add.SoLd) {
          var c = W.xE(j);
          if (c != null) {
            G[y].push(c.buffer);
            c.buffer = B.j(c.buffer.length);
          }
        }
      }
    }
    if (n.length > 0) {
      var a = j.add.Txt2 ? j.add.Txt2.SA : null;
      if (j.add.Txt2 == null) j.add.Txt2 = {};
      j.add.Txt2.SA = h6.aor(n, null, a);
    }
    var f = [j.add.lnk2, j.add.FEid, j.add.Patt],
      U = j.a3g(j.U);
    j.ahd(U);
    var Z = B.kP(j.buffer);
    if (j.add.fcmy) Z = !1;
    var h = [];
    if (Z)
      h.push({
        name: "Transparency",
        Fx: { o: 255, i: 0, X: 0 },
        YB: 100,
        Sg: 1,
      });
    h = h.concat(j._E);
    b7.aBW(j, m, h);
    u = hx.NU(j, q, u, 3 + h.length);
    u = hx.a4U(j, q, u);
    u = b7.a2f(j, q, u);
    u = hx.ala(j, q, u, m, Z);
    u = hx.amo(j, q, u, m[0], Z);
    var i = [
      1025, 2e3, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
      2011, 2012, 2013, 2014, 2015, 2016, 7e3, 7001,
    ];
    for (var y = 0; y < i.length; y++) delete j.Gw["r" + i[y]];
    for (var y = 0; y < j.U.length; y++) {
      var W = j.U[y];
      if (W.ql() || (m[2] && W.add.SoLd)) {
        W.H = G[y][0];
        W.buffer = G[y][1];
        if (G[y][2]) {
          var c = W.xE(j);
          G[y].push(c.buffer);
          c.buffer = G[y][2];
        }
      }
    }
    j.ahd(f);
    L.YM.DI(j, !0);
    delete j.Wd;
    return u;
  };
  hx.pw = function (j, q, m) {
    var n = M.IH(q, m, 4);
    m += 4;
    if (n != "8BPS") alert("invalid header signature: " + n);
    var G = M._h(q, m);
    m += 2;
    j.Wd = G == 2;
    if (G != 1 && G != 2) alert("invalid version: " + G);
    m += 6;
    j.SE = M._h(q, m);
    m += 2;
    j.$ = M.dW(q, m);
    m += 4;
    j.r = M.dW(q, m);
    m += 4;
    j.G6 = M._h(q, m);
    if (cP) j.depth = j.G6;
    m += 2;
    j.p7 = M._h(q, m);
    m += 2;
    return m;
  };
  hx.NU = function (j, q, m, n) {
    var G = j.add.fcmy == 1;
    q.xY(0, 64);
    M.Sc(q.data, m, "8BPS");
    m += 4;
    M.JP(q.data, m, j.Wd ? 2 : 1);
    m += 2;
    M.ZN(q.data, m, 0);
    m += 4;
    M.JP(q.data, m, 0);
    m += 2;
    M.JP(q.data, m, n + (G ? 1 : 0));
    m += 2;
    M.rd(q.data, m, j.$);
    m += 4;
    M.rd(q.data, m, j.r);
    m += 4;
    M.JP(q.data, m, j.depth);
    m += 2;
    M.JP(q.data, m, G ? 4 : 3);
    m += 2;
    return m;
  };
  hx.aKV = function (j, q, m) {
    var n = M.dW(q, m);
    m += 4;
    if (n != 0) j.KW = q.slice(m, m + n);
    m += n;
    return m;
  };
  hx.a4U = function (j, q, m) {
    if (j.depth == 32) {
      var n = new Uint8Array([
        104, 100, 114, 116, 0, 0, 0, 3, 62, 107, 133, 31, 0, 0, 0, 2, 0, 0, 0,
        7, 0, 76, 0, 105, 0, 110, 0, 101, 0, 97, 0, 114, 0, 0, 0, 2, 0, 2, 0, 0,
        0, 0, 0, 255, 0, 255, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 65, 128, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 63, 128, 0, 0, 104, 100, 114, 97, 0, 0, 0, 6, 0, 0, 0,
        0, 65, 160, 0, 0, 65, 240, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 63, 128, 0, 0,
        0, 0, 0, 0, 0, 0,
      ]);
      M.Aa(q, m, n.length);
      m += 4;
      q.xY(m, n.length);
      q.data.set(n, m);
      m += n.length;
    } else {
      M.Aa(q, m, 0);
      m += 4;
    }
    return m;
  };
  hx.a6s = function (j, q, m) {
    var n = m,
      G,
      W,
      k = j.Wd ? 8 : 4;
    if (j.Wd) G = M.K_(q, m);
    else G = M.Z$(q, m);
    m += k;
    if (G == 0) return n + k;
    W = hx.a1c(j, q, m);
    hx.zy(1, W - m, "Layer Info");
    m = W;
    W = hx.amE(j, q, m);
    hx.zy(1, W - m, "Global Layer Mask Info");
    m = W;
    W = gM.wd(q, m, n + k + G, j.add, j.Wd, j);
    hx.zy(1, W - m, "Project Add Info");
    m = W;
    return n + k + G;
  };
  hx.ala = function (j, q, m, n, G) {
    var W = m;
    M.hc(q, m, 0);
    m += 4;
    if (j.Wd) {
      M.hc(q, m, 0);
      m += 4;
    }
    m = hx.aAf(j, q, m, n, G);
    m = hx.a8O(j, q, m);
    var k = j.add;
    if (j.depth != 8) {
      k = {};
      k["Lr" + j.depth] = {};
      for (var T in j.add) k[T] = j.add[T];
    }
    m = gM.c3(q, m, k, j.Wd, j);
    if (j.Wd) M.Ib(q, W, m - W - 8);
    else M.hc(q, W, m - W - 4);
    return m;
  };
  hx.a1c = function (j, q, m) {
    var n,
      G = j.Wd ? 8 : 4;
    if (j.Wd) n = M.K_(q, m);
    else n = M.Z$(q, m);
    m += G;
    if (n != 0) hx.EB(j, q, m);
    return m + n;
  };
  hx.EB = function (j, q, m, n) {
    var G = m,
      W = n ? M.O_ : M.A_,
      k = W(q, m);
    m += 2;
    var T = Math.abs(k);
    for (var y = 0; y < T; y++) {
      var b = new R();
      m = eB.VB(b, j, q, m, n);
      j.U[y] = b;
    }
    var c = new hk(0, 0, j.r, j.$);
    for (var y = 0; y < T; y++) {
      var a = j.U[y],
        f = a.ex(),
        U = aW.VB(a, j, q, m, n);
      if (U - m > 8) hx.zy(2, U - m, "Lay: " + a.getName());
      m = U;
      hx.a0z(a, c);
      if (f) hx.a0z(f, c);
    }
  };
  hx.a0z = function (j, q) {};
  hx.aAf = function (j, q, m, n, G) {
    var W = m,
      k = j.Wd;
    m += k ? 8 : 4;
    if (j.depth == 8) m = hx.aia(j, q, m, n, G);
    var T = m - W - (k ? 8 : 4);
    if (T % 2 != 0) T++;
    if (k) M.Ib(q, W, T);
    else M.hc(q, W, T);
    return W + T + (k ? 8 : 4);
  };
  hx.aia = function (j, q, m, n, G) {
    var W = j.U.length;
    M.FR(q, m, G ? -W : W);
    m += 2;
    var k = [];
    for (var y = 0; y < W; y++) m = eB.RS(j.U[y], j, q, m, k);
    for (var y = 0; y < W; y++)
      m = aW.He(j.Wd, j.U[y], q, m, k[y], n, j.add.fcmy == 1);
    return m;
  };
  hx.amE = function (j, q, m) {
    var n = M.Z$(q, m);
    m += 4;
    m += n;
    return m;
  };
  hx.a8O = function (j, q, m) {
    var n = M.hc(q, m, 0);
    m += 4;
    return m;
  };
  hx.a3G = function (j, q, m) {
    var n = j.p7,
      G = "Bitmap Grayscale Indexed RGB CMYK Multichannel Duotone Lab".split(
        " "
      ),
      W = [1, 1, 1, 3, 4, 1, 1, 3],
      f;
    delete j.add.fcmy;
    if (n != 3) {
      if (n == 1 || n == 2 || n == 4)
        console.log(
          "Project will be converted from " + G[n] + " to " + G[3] + " mode."
        );
      else {
        alert("Color mode " + G[n] + " is not supported yet :(");
      }
      if (n == 4) j.add.fcmy = 1;
    }
    var k = W[n] + (j.vS == null || j.vS[0] == "Transparency" ? 1 : 0),
      T = j.r,
      b = j.$,
      c = T * b,
      a = M._h(q, m);
    m += 2;
    j.buffer = B.j(c * 4, j.depth);
    B.EA(j.buffer, 1);
    var U = m;
    for (var Z = 0; Z < j.SE; Z++) {
      if (a == 0) {
        f = aW.el(j.Wd, j.G6, q, T, b, m, a);
        f = B.sL(f, j.depth);
        m += c * (j.G6 >>> 3);
      } else if (a == 1) {
        var h = j.G6 == 8 ? 1 : j.G6 == 16 ? 2 : 4;
        f = B.j(c * h);
        var u = j.Wd ? 4 : 2;
        if (Z == 0) m += j.SE * b * u;
        m += aW.aJp(q, f, T * h, b, U + Z * b * u, m, u);
        if (j.G6 == 16) {
          for (var y = 0; y < f.length; y += 2) {
            var i = f[y];
            f[y] = f[y + 1];
            f[y + 1] = i;
          }
          f = new Uint16Array(f.buffer);
        }
        if (j.G6 == 32) {
          for (var y = 0; y < f.length; y += 4) {
            var i = f[y];
            f[y] = f[y + 3];
            f[y + 3] = i;
            i = f[y + 1];
            f[y + 1] = f[y + 2];
            f[y + 2] = i;
          }
          f = new Float32Array(f.buffer);
        }
        f = B.sL(f, j.depth);
      } else {
        console.log("unknown compression of image data: ", a);
        return;
      }
      if (Z < k) {
        B.ln(f, j.buffer, Z);
        if (j.SE == 1 && Z == 0) {
          B.ln(f, j.buffer, 1);
          B.ln(f, j.buffer, 2);
        }
      } else {
        var x = new R.T0(),
          X = Z - k,
          $ = Z - W[j.p7];
        x.name = j.vS ? j.vS[$] : "Alpha";
        if (x.name == "Quick Mask") {
          x.Ea = !0;
          j.y2.push(X);
        }
        x.H = new hk(0, 0, T, b);
        x.N = f;
        x.color = 0;
        x.yy();
        j._E[X] = x;
        if (j.Gw.r1077) {
          var H = j.Gw.r1077.slice(4 + $ * 13);
          x.Fx = be.uQ(H, 0);
          x.YB = H[11];
          x.Sg = H[12];
          if (x.Sg == 2) x.Ea = !0;
        }
      }
    }
    j.SE = 4;
    if (j.p7 == 2)
      for (var y = 0; y < c; y++) {
        var C = y * 4,
          l = j.buffer[C];
        j.buffer[C] = j.KW[0 + l];
        j.buffer[C + 1] = j.KW[256 + l];
        j.buffer[C + 2] = j.KW[512 + l];
      }
    return m;
  };
  hx.amo = function (j, q, m, n, G) {
    var W = 1,
      k = 16,
      T = j.r,
      b = j.$,
      a,
      f,
      U;
    M.Mc(q, m, W);
    m += 2;
    if (j.depth != 8) n = !0;
    var c = T * b;
    if (!n) {
      f = new B.Rx(T * b);
      B.fV(j.buffer, f);
      var Z = f.o,
        h = f.i,
        u = f.X,
        i = f.Sd;
      for (var y = 0; y < c; y++) {
        var x = i[y] * (1 / 255);
        Z[y] = ~~(Z[y] * x + 255 * (1 - x));
        h[y] = ~~(h[y] * x + 255 * (1 - x));
        u[y] = ~~(u[y] * x + 255 * (1 - x));
      }
      U = [f.o, f.i, f.X];
      if (j.add.fcmy == 1) {
        U.push(B.j(c));
        var X = j.buffer.slice(0);
        B.apP(X);
        B.fV(X, { o: U[0], i: U[1], X: U[2], Sd: U[3] });
      }
      if (G) U.push(f.Sd);
    } else {
      a = B.j(c, j.depth);
      if (j.depth == 16) a.fill(65535);
      U = [a, a, a];
      if (j.add.fcmy == 1) U.push(a);
      if (G) U.push(a);
    }
    for (var y = 0; y < j._E.length; y++) {
      U.push(j._E[y].fy(new hk(0, 0, j.r, j.$)));
    }
    var $ = m;
    for (var H = 0; H < U.length; H++) {
      q.xY(m, T * b + 4);
      a = U[H];
      if (W == 0 || W == 2 || W == 3) m = aW.At(j.Wd, a, q.data, T, b, m, W);
      else {
        var C = new Uint8Array(a.buffer),
          l = T * (j.depth >>> 3),
          v = j.Wd ? 4 : 2;
        if (H == 0) m += U.length * b * v;
        var K = m;
        m += aW.aon(C, q.data, l, b, $ + H * b * v, m, v);
      }
    }
    return m;
  };
  function iy() {}
  iy.VB = function (j) {
    var q = {};
    iy.RQ(j, q, 0, 0);
    return q;
  };
  iy.RS = function (j, q) {
    var m = 0;
    m = iy.O7(j, q, m, 0);
    return m;
  };
  iy.RQ = function (j, q, m, n) {
    while (j[m] != "<".charCodeAt(0)) m++;
    m += 2;
    while (!0) {
      if (j[m] == "/".charCodeAt(0)) {
        m++;
        var G = M.indexOf(j, " ".charCodeAt(0), m, m + 50),
          W = M.indexOf(j, "\n".charCodeAt(0), m, m + 50);
        if (W == -1) W = Infinity;
        if (G == -1) G = Infinity;
        var k = Math.min(W, G),
          T = M.IH(j, m, k - m),
          b = iy.oi(j, k + 1, n + 1, T);
        q[T] = b.K;
        m = k + 1;
        m += b.size;
      } else if (j[m] == ">".charCodeAt(0)) {
        m += 2;
        break;
      } else {
        var c = j[m];
        if (c == 10 || c == 9 || c == 32) m++;
        else {
          console.log(
            "unknown byte: " + c + ", char: " + String.fromCharCode(c),
            m
          );
          m++;
        }
      }
    }
    return m;
  };
  iy.O7 = function (j, q, m, n) {
    M.v3(q, m, "<<\n");
    m += 3;
    var G = iy.aIi;
    for (var W in j) {
      M.t1(q, m, "\t".charCodeAt(0), n + 1);
      m += n + 1;
      M.v3(q, m, "/" + W);
      m += 1 + W.length;
      if (G(j[W]) || j[W] instanceof Array) {
        M.v3(q, m, " ");
        m++;
      } else {
        M.v3(q, m, "\n");
        m++;
        M.t1(q, m, "\t".charCodeAt(0), n + 1);
        m += n + 1;
      }
      m = iy.SL(j[W], q, m, n + 1);
      M.v3(q, m, "\n");
      m++;
    }
    M.t1(q, m, "\t".charCodeAt(0), n);
    m += n;
    M.v3(q, m, ">>");
    m += 2;
    return m;
  };
  iy.oi = function (j, q, m, n) {
    var G = q,
      W = { size: 0, K: 0 };
    while (!0) {
      while (
        j[q] == " ".charCodeAt(0) ||
        j[q] == "\t".charCodeAt(0) ||
        j[q] == "\n".charCodeAt(0)
      )
        q++;
      if (j[q] == "<".charCodeAt(0)) {
        W.K = {};
        q = iy.RQ(j, W.K, q, m + 1);
        break;
      } else if (j[q] == "(".charCodeAt(0)) {
        q += 3;
        var k = q;
        while (!0) {
          if (
            j[k - 1] != "\\".charCodeAt(0) &&
            j[k] == ")".charCodeAt(0) &&
            (j[k + 1] == "\n".charCodeAt(0) || j[k + 1] == " ".charCodeAt(0))
          )
            break;
          else k++;
        }
        W.K = M.aHz(j, q, k);
        q = k + 2;
        break;
      } else if (j[q] == "[".charCodeAt(0)) {
        q++;
        W.K = [];
        while (
          j[q] == " ".charCodeAt(0) ||
          j[q] == "\t".charCodeAt(0) ||
          j[q] == "\n".charCodeAt(0)
        )
          q++;
        while (j[q] != "]".charCodeAt(0)) {
          var T = iy.oi(j, q, m + 1, n);
          W.K.push(T.K);
          q += T.size;
          while (
            j[q] == " ".charCodeAt(0) ||
            j[q] == "\t".charCodeAt(0) ||
            j[q] == "\n".charCodeAt(0)
          )
            q++;
        }
        q++;
        break;
      } else {
        var b = M.indexOf(j, " ".charCodeAt(0), q, q + 50),
          c = M.indexOf(j, "\n".charCodeAt(0), q, q + 50);
        if (c == -1) c = Infinity;
        if (b == -1) b = Infinity;
        var a = M.IH(j, q, Math.min(b, c) - q).trim(),
          f = parseFloat(a);
        if (!isNaN(f)) {
          W.K = parseFloat(a);
          q = Math.min(b, c) + 1;
          break;
        } else if (a == "true" || a == "false") {
          W.K = a == "true";
          q = Math.min(b, c) + 1;
          break;
        } else if (a == "null" || a == "NaN" || a == "undefined") {
          W.K = 0;
          q = Math.min(b, c) + 1;
          break;
        } else {
          console.log("unknown identifier: " + a);
          throw "e";
        }
        q = Math.min(b, c) + 1;
      }
    }
    W.size = q - G;
    return W;
  };
  iy.SL = function (j, q, m, n) {
    if (j instanceof Array) {
      var G = j.length == 0 || typeof j[0] == "number";
      if (G) {
        M.v3(q, m, "[ ");
        m += 2;
        for (var y = 0; y < j.length; y++) {
          var W = j[y] + " ";
          M.v3(q, m, W);
          m += W.length;
        }
        M.v3(q, m, "]");
        m += 1;
      } else {
        M.v3(q, m, "[\n");
        m += 2;
        for (var y = 0; y < j.length; y++) {
          M.t1(q, m, "\t".charCodeAt(0), n);
          m += n;
          m = iy.SL(j[y], q, m, n);
          M.v3(q, m, "\n");
          m++;
        }
        M.t1(q, m, "\t".charCodeAt(0), n);
        m += n;
        M.v3(q, m, "]");
        m += 1;
      }
    } else if (j instanceof Object) {
      m = iy.O7(j, q, m, n);
    } else if (typeof j == "string") {
      M.v3(q, m, "(");
      m++;
      M.t1(q, m, 254);
      m++;
      M.t1(q, m, 255);
      m++;
      m = M.apo(q, m, j);
      M.v3(q, m, ")");
      m += 1;
    } else {
      var W = j + "";
      M.v3(q, m, W);
      m += W.length;
    }
    return m;
  };
  iy.aIi = function (j) {
    var q = typeof j;
    return q == "string" || q == "number" || q == "boolean";
  };
  function dE() {}
  dE.VB = function (j) {
    var q = {};
    dE.ayf(j, q, 0, 0);
    return q;
  };
  dE.RS = function (j, q) {
    var m = 0;
    M.v3(q, m, " ");
    m++;
    m = dE.aGV(j, q, m, 0);
    m--;
    q.xY(m, 2);
    q.data[m] = q.data[m + 1] = 0;
    m += 2;
    return m;
  };
  dE.RQ = function (j, q, m, n) {
    while (j[m] != "<".charCodeAt(0)) {
      m++;
      console.log("šipka");
    }
    m += 2;
    m = dE.ayf(j, q, m, n);
    return m;
  };
  dE.O7 = function (j, q, m, n) {
    M.v3(q, m, "<< ");
    m += 3;
    m = dE.aGV(j, q, m, n);
    M.v3(q, m, ">>");
    m += 2;
    return m;
  };
  dE.u1 = function (j) {
    return j == 9 || j == 10 || j == 32;
  };
  dE.ayf = function (j, q, m, n) {
    while (!0) {
      while (dE.u1(j[m]) || j[m] == 0) m++;
      if (m >= j.length) break;
      if (j[m] == "/".charCodeAt(0)) {
        m++;
        var G = m;
        while (!dE.u1(j[G])) G++;
        var W = M.IH(j, m, G - m);
        m = G + 1;
        var k = dE.oi(j, m, n, W);
        q["_" + W] = k.K;
        m += k.size;
      } else if (j[m] == ">".charCodeAt(0)) {
        m += 2;
        break;
      } else {
        var T = j[m];
        console.log(M.IH(j, m, m + 100));
        console.log(
          "unknown byte: " +
            T +
            ", char: " +
            String.fromCharCode(T) +
            ", offset: " +
            m
        );
        m++;
        throw "e";
        return -1;
      }
    }
    return m;
  };
  dE.aGV = function (j, q, m, n) {
    for (var G in j) {
      var W = G.substring(1, G.length);
      M.v3(q, m, "/" + W);
      m += 1 + W.length;
      M.v3(q, m, " ");
      m++;
      m = dE.SL(j[G], q, m, n + 1, W);
      M.v3(q, m, " ");
      m++;
    }
    return m;
  };
  dE.oi = function (j, q, m, n) {
    var G = q,
      W = { e: "", size: 0, K: 0 };
    while (dE.u1(j[q])) q++;
    if (j[q] == "<".charCodeAt(0)) {
      W.e = "Object";
      W.K = {};
      q = dE.RQ(j, W.K, q, m + 1);
    } else if (j[q] == "(".charCodeAt(0)) {
      W.e = "String";
      q++;
      if (j[q] == ")".charCodeAt(0)) {
        W.K = "e";
        q++;
      } else if (j[q] == 254 && j[q + 1] == 255) {
        q += 2;
        var k = q,
          T = 0;
        while (!0) {
          if (j[k] == ")".charCodeAt(0) && j[k - 1] != "\\".charCodeAt(0))
            break;
          else k += 1;
        }
        W.K = "s" + M.aHz(j, q, k);
        q = k + 2;
      } else {
        var k = q;
        while (j[k] != ")".charCodeAt(0)) k++;
        W.K = "s" + M.IH(j, q, k - q);
        q = k + 1;
      }
    } else if (j[q] == "[".charCodeAt(0)) {
      q++;
      W.K = [];
      W.e = "Array";
      while (dE.u1(j[q])) q++;
      while (j[q] != "]".charCodeAt(0)) {
        var b = dE.oi(j, q, m + 1, n);
        if (b == -1) return -1;
        W.K.push(b.K);
        q += b.size;
        delete b.size;
        while (dE.u1(j[q])) q++;
      }
      q++;
    } else {
      var c = q;
      while (!dE.u1(j[c])) c++;
      var a = M.IH(j, q, c - q),
        f = parseFloat(a);
      if (!isNaN(f) && a.indexOf(".") != -1) {
        W.e = "Float";
        var U = parseFloat(a);
        W.K = "f" + U;
      } else if (!isNaN(f) && a.indexOf(".") == -1) {
        W.e = "Integer";
        W.K = "i" + parseInt(a);
      } else if (a == "true" || a == "false") {
        W.e = "Boolean";
        W.K = a == "true";
      } else if (a.charAt(0) == "/") {
        W.e = "BString";
        W.K = a;
      } else if (a == "NaN" || a == "undefined") {
        W.e = "Float";
        W.K = "f0";
      } else {
        console.log("unknown value", JSON.stringify(a));
      }
      q = c + 1;
    }
    W.size = q - G;
    return W;
  };
  dE.af$ = function (j) {
    if (j == Math.round(j)) return j + ".0";
    var q = j.toFixed(5);
    while (q.endsWith("0") && q[q.length - 2] != ".")
      q = q.slice(0, q.length - 1);
    if (0 < j && j < 1) q = q.slice(1);
    if (-1 < j && j < 0) q = "-" + q.slice(2);
    return q;
  };
  dE.SL = function (j, q, m, n, G) {
    var W = typeof j == "string" ? j.charAt(0) : "";
    if (j instanceof Array) {
      M.v3(q, m, "[ ");
      m += 2;
      for (var y = 0; y < j.length; y++) {
        m = dE.SL(j[y], q, m, n, "");
        M.v3(q, m, " ");
        m++;
      }
      M.v3(q, m, "]");
      m += 1;
    } else if (j instanceof Object) {
      m = dE.O7(j, q, m, n);
    } else if (W == "e") {
      M.v3(q, m, "()");
      m += 2;
    } else if (W == "s") {
      M.v3(q, m, "(");
      m++;
      if (G == "97") {
        M.v3(q, m, j.slice(1));
        m += j.length - 1;
      } else {
        M.t1(q, m, 254);
        m++;
        M.t1(q, m, 255);
        m++;
        m = M.apo(q, m, j.slice(1));
      }
      M.v3(q, m, ")");
      m++;
    } else if (W == "/") {
      M.v3(q, m, j);
      m += j.length;
    } else if (W == "f") {
      var k = parseFloat(j.substring(1)),
        T = dE.af$(k);
      M.v3(q, m, T);
      m += T.length;
    } else if (W == "i") {
      M.v3(q, m, j.substring(1));
      m += j.length - 1;
    } else {
      var T = j + "";
      M.v3(q, m, T);
      m += T.length;
    }
    return m;
  };
  function M() {}
  M.aqr = function (aF) {
    var j = "";
    for (var y = 3; y >= 0; y--)
      j += String.fromCharCode((aF >> (y * 8)) & 255);
    return j;
  };
  M.a5D = function (j) {
    var aF = 0;
    for (var y = j.length - 1; y >= 0; y--)
      aF |= j.charCodeAt(y) << ((3 - y) * 8);
    return aF;
  };
  M.indexOf = function (j, q, m, n) {
    if (m == null) m = 0;
    if (n == null) n = j.length;
    n = Math.min(n, j.length);
    for (var y = m; y < n; y++) if (j[y] == q) return y;
    return -1;
  };
  M.Gf = function (j, q, m) {
    if (m == null) m = 0;
    var n = q.length,
      G = j.length - n;
    if (typeof q == "string") {
      var W = [];
      for (var y = 0; y < n; y++) W.push(q.charCodeAt(y));
      q = W;
    }
    if (q.length > 0) {
      var k = q[0];
      for (var y = m; y < G; y++)
        if (j[y] == k) {
          var T = !0;
          for (var b = 1; b < n; b++)
            if (q[b] != j[y + b]) {
              T = !1;
              break;
            }
          if (T) return y;
        }
    }
    return -1;
  };
  M.aHz = function (j, q, m) {
    var n = [],
      W = "";
    while (q < m) {
      var G = j[q++];
      if (G == "\\".charCodeAt(0)) n.push(j[q++]);
      else n.push(G);
    }
    for (var y = 0; y < n.length; y += 2)
      W += String.fromCharCode((n[y] << 8) | n[y + 1]);
    return W;
  };
  M.ajl = function (j, q, m) {
    var n = new Uint8Array(2);
    for (var y = 0; y < m.length; y++) {
      M.JP(n, 0, m.charCodeAt(y));
      if (
        n[0] == ")".charCodeAt(0) ||
        n[0] == "(".charCodeAt(0) ||
        n[0] == "\\".charCodeAt(0)
      ) {
        j[q] = "\\".charCodeAt(0);
        q++;
      }
      j[q] = n[0];
      q++;
      if (
        n[1] == ")".charCodeAt(0) ||
        n[1] == "(".charCodeAt(0) ||
        n[1] == "\\".charCodeAt(0)
      ) {
        j[q] = "\\".charCodeAt(0);
        q++;
      }
      j[q] = n[1];
      q++;
    }
    return q;
  };
  M.apo = function (j, q, m) {
    j.xY(q, 4 * m.length);
    return M.ajl(j.data, q, m);
  };
  M.a5 = function (j, q, m) {
    var n = "";
    for (var y = 0; y < m; y++) {
      var G = j[q++] | (j[q++] << 8);
      n += String.fromCharCode(G);
    }
    return n;
  };
  M.Jz = function (j, q, m) {
    var n = "";
    for (var y = 0; y < m; y++) {
      var G = (j[q++] << 8) | j[q++];
      n += String.fromCharCode(G);
    }
    return n;
  };
  M.avr = function (j, q, m) {
    for (var y = 0; y < m.length; y++) {
      var n = m.charCodeAt(y);
      M.pq(j, q + 2 * y, n);
    }
  };
  M.aEK = function (j, q, m) {
    for (var y = 0; y < m.length; y++) {
      var n = m.charCodeAt(y);
      M.JP(j, q + 2 * y, n);
    }
  };
  M.a0j = function (j, q, m) {
    j.xY(q, 2 * m.length);
    M.aEK(j.data, q, m);
  };
  M.az3 = function (j, y, q) {
    var m = [],
      n = 0,
      G = 0;
    q += y;
    while (y < q) {
      n = j[y++];
      if ((n & 128) == 0) G = n;
      else if ((n & 224) == 192) {
        G = (n & 31) << 6;
        n = j[y++];
        G |= n & 63;
      } else if ((n & 240) == 224) {
        G = (n & 15) << 12;
        n = j[y++];
        G |= (n & 63) << 6;
        n = j[y++];
        G |= n & 63;
      } else if ((n & 248) == 240) {
        G = (n & 7) << 18;
        n = j[y++];
        G |= (n & 63) << 12;
        n = j[y++];
        G |= (n & 63) << 6;
        n = j[y++];
        G |= n & 63;
      } else throw "e";
      m.push(G);
    }
    return m;
  };
  M.aAu = window.TextDecoder ? new window.TextDecoder("utf8") : null;
  M.K6 = function (j, q, m) {
    if (q == null) q = 0;
    if (m == null) m = j.length;
    if (M.aAu && q == 0 && m == j.length) return M.aAu.decode(j);
    var n = M.az3(j, q, m),
      G = n.length;
    for (var y = 0; y < G; y++) n[y] = String.fromCharCode(n[y]);
    return n.join("");
  };
  M.aJi = window.TextEncoder ? new window.TextEncoder("utf8") : null;
  M.Nh = function (j) {
    if (M.aJi) return M.aJi.encode(j);
    var q = new Uint8Array(j.length * 4),
      m = M.YG(j, q, 0);
    return q.slice(0, m);
  };
  M.YG = function (j, q, m) {
    var n = j.length,
      y = 0;
    for (var G = 0; G < n; G++) {
      var W = j.charCodeAt(G);
      if ((W & (4294967295 - (1 << 7) + 1)) == 0) {
        q[m + y] = W;
        y++;
      } else if ((W & (4294967295 - (1 << 11) + 1)) == 0) {
        q[m + y] = 192 | (W >> 6);
        q[m + y + 1] = 128 | ((W >> 0) & 63);
        y += 2;
      } else if ((W & (4294967295 - (1 << 16) + 1)) == 0) {
        q[m + y] = 224 | (W >> 12);
        q[m + y + 1] = 128 | ((W >> 6) & 63);
        q[m + y + 2] = 128 | ((W >> 0) & 63);
        y += 3;
      } else if ((W & (4294967295 - (1 << 21) + 1)) == 0) {
        q[m + y] = 240 | (W >> 18);
        q[m + y + 1] = 128 | ((W >> 12) & 63);
        q[m + y + 2] = 128 | ((W >> 6) & 63);
        q[m + y + 3] = 128 | ((W >> 0) & 63);
        y += 4;
      } else throw "e";
    }
    return y;
  };
  M.nB = function (j, q) {
    var m = M.Z$(j, q),
      n = M.K6(j, q + 4, m - 1);
    return { fO: n, I0: 4 + m };
  };
  M.ax3 = function (j, q) {
    var m = M.YZ(j, q),
      n = M.a5(j, q + 4, m);
    return n;
  };
  M.pJ = function (j, q) {
    var m = M.Z$(j, q),
      n = M.Jz(j, q + 4, m);
    return n;
  };
  M.z5 = function (j, q) {
    var m = M.Z$(j, q),
      n = M.Jz(j, q + 4, m - 1);
    return n;
  };
  M.xG = function (j, q) {
    var m = M.YZ(j, q),
      n = M.a5(j, q + 4, m - 1);
    return n;
  };
  M.ar4 = function (j, q, m) {
    M.kA(j, q, m.length);
    q += 4;
    M.avr(j, q, m);
  };
  M.aez = function (j, q, m) {
    M.ZN(j, q, m.length);
    q += 4;
    M.aEK(j, q, m);
  };
  M.mO = function (j, q, m) {
    j.xY(q, 4 + 2 * m.length);
    M.aez(j.data, q, m);
  };
  M.awP = function (j, q, m) {
    j.xY(q, 4 + 2 * m.length);
    M.ar4(j.data, q, m);
  };
  M.iD = function (j, q, m) {
    var n = [];
    for (var y = 0; y < m; y++) n.push(String.fromCharCode(j[q + y]));
    return n;
  };
  M.atH = function (j, q, m) {
    var n = !1,
      G = j.length - m.length;
    for (var y = q; y < G; y++) {
      for (var W = 0; W < m.length; W++) {
        if (j[y + W] != m.charCodeAt(W)) break;
        if (W == m.length - 1) return y;
      }
    }
  };
  M.Vo = function (j, q, m) {
    var n = M.IH(j, q, 4);
    if (m) n = n.split("").reverse().join("");
    return n;
  };
  M.IH = function (j, q, m) {
    var n = "";
    for (var y = 0; y < m; y++) n += String.fromCharCode(j[q + y]);
    return n;
  };
  M.Sc = function (j, q, m) {
    for (var y = 0; y < m.length; y++) j[q + y] = m.charCodeAt(y);
  };
  M.v3 = function (j, q, m) {
    j.xY(q, m.length);
    M.Sc(j.data, q, m);
  };
  M.ajX = function (j, q, m) {
    var n = "";
    for (var y = 0; y < m; y++) {
      var G = j[q + y];
      if (G < 10) n += "  ";
      else if (G < 100) n += " ";
      n += G + ", ";
    }
    return n;
  };
  M._h = function (j, q) {
    return (j[q] << 8) | j[q + 1];
  };
  M.JP = function (j, q, aF) {
    j[q] = (aF >> 8) & 255;
    j[q + 1] = aF & 255;
  };
  M.Mc = function (j, q, aF) {
    j.xY(q, 4);
    M.JP(j.data, q, aF);
  };
  M.IP = function (j, q) {
    var m = M._h(j, q),
      n = M._h(j, q + 2);
    return m + n * (1 / 65536);
  };
  M.a6X = function (j, q, aF) {
    var m = Math.floor(aF),
      n = Math.floor((aF - m) * 65536);
    M.JP(j, q, m);
    M.JP(j, q + 2, n);
  };
  M.d9 = function (j, q) {
    return (j[q + 1] << 8) | j[q];
  };
  M.pq = function (j, q, aF) {
    j[q + 1] = (aF >> 8) & 255;
    j[q] = aF & 255;
  };
  M.Vd = function (j, q, aF) {
    j.xY(q, 4);
    M.pq(j.data, q, aF);
  };
  M.A_ = function (j, q) {
    M.no[0] = j[q + 1];
    M.no[1] = j[q];
    return M.zz[0];
  };
  M.O_ = function (j, q) {
    M.no[0] = j[q];
    M.no[1] = j[q + 1];
    return M.zz[0];
  };
  M.SO = M.JP;
  M.FR = M.Mc;
  M.dW = function (j, q) {
    M.dD[0] = j[q + 3];
    M.dD[1] = j[q + 2];
    M.dD[2] = j[q + 1];
    M.dD[3] = j[q];
    return M.R6[0];
  };
  M.rd = function (j, q, aF) {
    M.R6[0] = aF;
    j[q + 3] = M.dD[0];
    j[q + 2] = M.dD[1];
    j[q + 1] = M.dD[2];
    j[q + 0] = M.dD[3];
  };
  M.Aa = function (j, q, aF) {
    j.xY(q, 4);
    M.rd(j.data, q, aF);
  };
  M.CY = function (j, q, m, n) {
    m[n + 0] = j[q + 0];
    m[n + 1] = j[q + 1];
    m[n + 2] = j[q + 2];
    m[n + 3] = j[q + 3];
  };
  M.YZ = function (j, q) {
    M.CY(j, q, M.dD, 0);
    return M.aBc[0];
  };
  M.kA = function (j, q, aF) {
    M.aBc[0] = aF;
    M.CY(M.dD, 0, j, q);
  };
  M.mq = function (j, q, aF) {
    j.xY(q, 4);
    M.kA(j.data, q, aF);
  };
  M.dq = function (j, q) {
    M.CY(j, q, M.dD, 0);
    return M.R6[0];
  };
  M.ajI = function (j, q, aF) {
    M.R6[0] = aF;
    M.CY(M.dD, 0, j, q);
  };
  M.a50 = function (j, q, aF) {
    j.xY(q, 4);
    M.ajI(j.data, q, aF);
  };
  M.Z$ = function (j, q) {
    var m =
      j[q] * (256 * 256 * 256) +
      ((j[q + 1] << 16) | (j[q + 2] << 8) | j[q + 3]);
    return m;
  };
  M.ZN = function (j, q, aF) {
    j[q] = (aF >> 24) & 255;
    j[q + 1] = (aF >> 16) & 255;
    j[q + 2] = (aF >> 8) & 255;
    j[q + 3] = (aF >> 0) & 255;
  };
  M.hc = function (j, q, aF) {
    j.xY(q, 4);
    M.ZN(j.data, q, aF);
  };
  M.K_ = function (j, q) {
    return (M.Z$(j, q) << 32) | M.Z$(j, q + 4);
  };
  M.aml = function (j, q, aF) {
    M.ZN(j, q, (aF >> 16) >> 16);
    M.ZN(j, q + 4, aF & 4294967295);
  };
  M.Ib = function (j, q, aF) {
    j.xY(q, 8);
    M.aml(j.data, q, aF);
  };
  M.alQ = function (j, q) {
    return M.YZ(j, q + 4) | (M.YZ(j, q) << 32);
  };
  M.ro = function (j, q) {
    var m = new Uint8Array(8);
    for (var y = 0; y < 8; y++) m[y] = j[q + 7 - y];
    var n = new Float64Array(m.buffer);
    return n[0];
  };
  M.NR = function (j, q) {
    var m = new Uint8Array(8);
    for (var y = 0; y < 8; y++) m[y] = j[q + y];
    var n = new Float64Array(m.buffer);
    return n[0];
  };
  M.AZ = function (j, q, aF) {
    var m = new Float64Array(1);
    m[0] = aF;
    var n = new Uint8Array(m.buffer);
    for (var y = 0; y < 4; y++) {
      var G = n[y];
      n[y] = n[7 - y];
      n[7 - y] = G;
    }
    for (var y = 0; y < 8; y++) j[q + y] = n[y];
  };
  M.GD = function (j, q, aF) {
    j.xY(q, 8);
    M.AZ(j.data, q, aF);
  };
  M.$C = function (j, q) {
    M.dD[0] = j[q + 3];
    M.dD[1] = j[q + 2];
    M.dD[2] = j[q + 1];
    M.dD[3] = j[q + 0];
    return M.t$[0];
  };
  M.x5 = function (j, q) {
    M.dD[0] = j[q + 0];
    M.dD[1] = j[q + 1];
    M.dD[2] = j[q + 2];
    M.dD[3] = j[q + 3];
    return M.t$[0];
  };
  M.MW = function (j, q, aF) {
    M.t$[0] = aF;
    j[q + 0] = M.dD[3];
    j[q + 1] = M.dD[2];
    j[q + 2] = M.dD[1];
    j[q + 3] = M.dD[0];
  };
  M.a8V = function (j, q, aF) {
    j.xY(q, 4);
    M.MW(j.data, q, aF);
  };
  M.H$ = function (j, q, aF) {
    M.t$[0] = aF;
    j[q + 0] = M.dD[0];
    j[q + 1] = M.dD[1];
    j[q + 2] = M.dD[2];
    j[q + 3] = M.dD[3];
  };
  M.aal = function (j, q, aF) {
    j.xY(q, 4);
    M.H$(j.data, q, aF);
  };
  M.aCP = function (j, q) {
    var m = M.dW(j, q),
      n = m * (1 / (1 << 24));
    return n;
  };
  M.acR = function (j, q) {
    var m = M.dq(j, q),
      n = m * (1 / (1 << 24));
    return n;
  };
  M.aaQ = function (j, q, m) {
    var n = Math.floor(m * (1 << 24));
    M.rd(j, q, n);
  };
  M.aKL = function (j, q, m) {
    j.xY(q, 4);
    M.aaQ(j.data, q, m);
  };
  M.xs = function (j, q) {
    var m = j[q],
      n = M.IH(j, q + 1, m);
    m += 1 - (m % 2);
    return { ob: n, length: m + 1 };
  };
  M.aim = function (j, q, m) {
    var n = m.length;
    j[q] = n;
    M.Sc(j, q + 1, m);
    if (n % 2 == 0) {
      j[q + 1 + n] = 0;
      ++n;
    }
    return n + 1;
  };
  M.uG = function (j, q, m) {
    j.xY(q, m.length + 2);
    return M.aim(j.data, q, m);
  };
  M.Wx = function (j, q, m) {
    var n = m ? M.NR : M.ro,
      G = new k$();
    G.Sd = n(j, q + 0 * 8);
    G.X = n(j, q + 1 * 8);
    G.ra = n(j, q + 2 * 8);
    G.Jy = n(j, q + 3 * 8);
    G.Tt = n(j, q + 4 * 8);
    G.BL = n(j, q + 5 * 8);
    return G;
  };
  M.cR = function (j, q, m) {
    M.AZ(j, q + 0 * 8, m.Sd);
    M.AZ(j, q + 1 * 8, m.X);
    M.AZ(j, q + 2 * 8, m.ra);
    M.AZ(j, q + 3 * 8, m.Jy);
    M.AZ(j, q + 4 * 8, m.Tt);
    M.AZ(j, q + 5 * 8, m.BL);
  };
  M.acx = function (j, q, m) {
    j.xY(q, 48);
    M.cR(j.data, q, m);
  };
  M.a0s = function (j, q) {
    var m = M.$C(j, q),
      n = M.$C(j, q + 4),
      G = M.$C(j, q + 8),
      W = M.$C(j, q + 12);
    return new hk(m, n, G - m, W - n);
  };
  M.aF9 = function (j, q, m) {
    M.MW(j, q, m.x);
    M.MW(j, q + 4, m.y);
    M.MW(j, q + 8, m.x + m.r);
    M.MW(j, q + 12, m.y + m.$);
  };
  M.al7 = function (j, q, m) {
    j.xY(q, 16);
    M.aF9(j.data, q, m);
  };
  M.X7 = function (j, q, m) {
    var n = m ? M.dq : M.dW,
      G = n(j, q),
      W = n(j, q + 4),
      k = n(j, q + 8),
      T = n(j, q + 12);
    return new hk(W, G, T - W, k - G);
  };
  M.aKd = function (j, q, m) {
    M.rd(j, q, m.y);
    M.rd(j, q + 4, m.x);
    M.rd(j, q + 8, m.y + m.$);
    M.rd(j, q + 12, m.x + m.r);
  };
  M.KY = function (j, q, m) {
    j.xY(q, 16);
    M.aKd(j.data, q, m);
  };
  M.AN = function (j, q, m) {
    var n = new Uint8Array(m);
    for (var y = 0; y < m; y++) n[y] = j[q + y];
    return n;
  };
  M.ajd = function (j, q, m) {
    j.set(m, q);
  };
  M.UG = function (j, q, m) {
    j.xY(q, m.length);
    M.ajd(j.data, q, m);
  };
  M.asU = function (j, q, m, aF) {
    if (!aF) aF = 1;
    for (var y = 0; y < aF; y++) j[q + y] = m;
  };
  M.t1 = function (j, q, m, aF) {
    if (!aF) aF = 1;
    j.xY(q, aF);
    M.asU(j.data, q, m, aF);
  };
  M.zz = new Int16Array(1);
  M.no = new Uint8Array(M.zz.buffer);
  M.R6 = new Int32Array(1);
  M.aBc = new Uint32Array(M.R6.buffer);
  M.dD = new Uint8Array(M.R6.buffer);
  M.t$ = new Float32Array(M.R6.buffer);
  function c7() {}
  c7.VB = function (j, q) {
    var m = new Uint8Array(j),
      n = 0,
      G = M.IH(m, n, 9),
      T = 4,
      b = 100;
    n += 9;
    var W = M.IH(m, n, 4);
    n += 4;
    n++;
    q.r = M.Z$(m, n);
    n += 4;
    q.$ = M.Z$(m, n);
    n += 4;
    var k = M.Z$(m, n);
    n += 4;
    if (k != 0) alert("Unsupported image format, not RGB!");
    if (["file", "v001", "v002", "v003"].indexOf(W) == -1) {
      b = M.Z$(m, n);
      n += 4;
      if (parseInt(W.slice(1)) >= 7) {
        b = b;
      } else alert("Unknown XCF version: " + W);
      T = 8;
    }
    var c = {};
    n = c7.y8(m, n, c);
    var a = [];
    n = c7.hf(m, n, a, T);
    var f = [];
    n = c7.hf(m, n, f, T);
    q.aO = 0;
    for (var y = 0; y < a.length; y++) c7.aas(m, a[y], q, c, T, b);
    while (q.aO > 0) {
      q.U.push(q.to());
      q.aO--;
    }
    q.U.reverse();
    delete q.aO;
    q.buffer = B.j(q.r * q.$ * 4);
    if (q.U.length == 0) console.log("No layers!!!");
    for (var y = 0; y < f.length; y++) {
      var U = c7.asn(m, f[y], c, T, b);
      if (U.Fr[dr.abb]) q.h = { N: U.ef, H: new hk(0, 0, q.r, q.$) };
    }
  };
  c7.aas = function (j, q, m, n, G, W) {
    var k = m.dj(),
      T = M.Z$(j, q),
      f = 0;
    q += 4;
    var b = M.Z$(j, q);
    q += 4;
    k.H = new hk(0, 0, T, b);
    var c = M.Z$(j, q);
    q += 4;
    var a = M.nB(j, q);
    q += a.I0;
    k.tV(a.fO);
    var U = {};
    q = c7.y8(j, q, U);
    if (U[dr.aKN]) {
      var Z = U[dr.aKN];
      f = Z.length / 4 - 1;
    }
    if (U[dr.Gk]) {
      k.H.x = M.dW(U[dr.Gk], 0);
      k.H.y = M.dW(U[dr.Gk], 4);
    }
    if (U[dr.aGF]) {
      k.yA = M.Z$(U[dr.aGF], 0);
    }
    if (U[dr.a2K]) {
      k.add.lsct = hQ.WR;
      k.uZ = 24;
    }
    if (U[dr.aI8]) {
      var h = M.Z$(U[dr.aI8], 0);
      k.hz = dr.a9I[h];
      if (k.D1() && k.hz == "norm") k.hz = "pass";
    }
    if (U[dr.aL1]) {
      if (M.Z$(U[dr.aL1], 0) == 0) k.uZ += 2;
    }
    if (U[dr.ahZ]) {
      var u = M.Z$(U[dr.ahZ], 0);
      k.add.lsct = u & (1 == 1) ? hQ.WR : hQ.z$;
    }
    if (U[dr.Wm]) {
      var i = U[dr.Wm];
      for (var x in i) {
        var X = i[x];
        if (x == "gimp-text-layer") {
          var $ = c7.agM(X),
            H = $.text,
            C = $.font,
            l = $.color,
            v = $["font-size"];
          if (H == null && $.markup) {
            var K = new DOMParser(),
              S = K.parseFromString($.markup, "image/svg+xml");
            while (S.firstChild != null && S.firstChild.tagName != null) {
              S = S.firstChild;
              var o = S.getAttribute("font"),
                V = S.getAttribute("foreground"),
                P = S.getAttribute("size");
              if (o != null) C = o;
              if (V != null) {
                V = CSS.uQ(V);
                l = [1, V.o / 255, V.i / 255, V.X / 255];
              }
              if (P != null) {
                v = "" + parseFloat(P) / 245;
              }
            }
            H = S.textContent;
          }
          k.add.lnsr = "rend";
          k.add.TySh = al.wD(0, 0);
          k.add.TySh.AF = new hk(0, 0, 100, 100);
          k.add.TySh.u = new k$(1, 0, 0, 1, k.H.x, k.H.y);
          var z = k.add.TySh.s3;
          al.Fk(z, 0, H);
          var E = al.vJ(z, 0, 0),
            A = $.justify,
            Q = $["line-spacing"];
          if (l)
            E.K2.FillColor = {
              Type: 1,
              Values: [1, parseFloat(l[1]), parseFloat(l[2]), parseFloat(l[3])],
            };
          if (v) {
            v = Math.round(parseFloat(v));
            E.K2.FontSize = v;
            k.add.TySh.u.BL += Math.min(17, v * 0.17);
          }
          if (Q) {
            Q = Math.round(parseFloat(Q) + E.K2.FontSize * 1.2);
            E.K2.Leading = Q;
            E.K2.AutoLeading = !1;
          }
          if (A)
            E.Th.Justification = ["left", "right", "center", "fill"].indexOf(A);
          if (C && C != "Sans-serif") {
            if (C instanceof Array) {
              for (var y = 0; y < C.length; y++)
                if (C[y][0] == "psname") {
                  C = C[y][1];
                  break;
                }
            } else {
              var e = C.toLowerCase(),
                Y = "bold italic semi extra regular condensed light".split(" "),
                d = e.length;
              for (var y = 0; y < Y.length; y++) {
                var O = e.indexOf(Y[y]);
                if (O != -1 && O < d && e[O - 1] == " ") d = O;
              }
              if (d != e.length)
                C =
                  C.slice(0, d - 1)
                    .split(" ")
                    .join("") +
                  "-" +
                  C.slice(d).split(" ").join("");
            }
            al.gk(E, C);
          }
          al.jD(z, 0, H.length, E);
          var s = $["box-width"],
            p = $["box-height"],
            F = s ? parseFloat(s) : k.H.r,
            g = p ? parseFloat(p) : k.H.$;
          al.cj(z, 1);
          al.ms(z, [0, 0, Math.ceil(F), Math.ceil(g)]);
        } else console.log("Unknown property " + x);
      }
    }
    while (m.aO > f) {
      m.U.push(m.to());
      m.aO--;
    }
    m.aO = f;
    if (k.add.lsct == hQ.WR || k.add.lsct == hQ.z$) m.aO++;
    var w = G == 4 ? M.Z$ : M.K_,
      r = w(j, q);
    q += G;
    var eQ = w(j, q);
    q += G;
    if (k.bm()) {
      k.buffer = B.j(k.H.C() * 4);
      var t = new B.Rx(k.H.C());
      c7.aL$(j, r, t, n, G, W);
      B.Nr(t, k.buffer);
    }
    if (eQ != 0) {
      k.x7 = new R.T0();
      var dq = c7.asn(j, eQ, n, G, W);
      k.x7.N = dq.ef;
      k.x7.H = k.H.P();
      if (U[dr.aIk]) k.x7.isEnabled = M.Z$(U[dr.aIk], 0) == 1;
      k.x7.color = k.x7.N[0];
      k.x7.yy();
    }
    if (k.D1()) k.H = new hk();
    m.U.push(k);
  };
  c7.agM = function (j) {
    var q = "(" + M.K6(j, 0, j.length - 1) + ")",
      m = [],
      n = {};
    c7.atp(q, 1, m);
    c7.aFU(m, n);
    return n;
  };
  c7.aFU = function (j, q) {
    for (var y = 0; y < j.length; y++) {
      var m = j[y],
        n = m[0];
      if (m.length == 2) q[n] = m[1];
      else q[n] = m.slice(1);
    }
  };
  c7.atp = function (j, q, m) {
    while (!0) {
      if (q >= j.length) throw "e";
      var n = j.charAt(q);
      q++;
      if (n == "(") {
        var G = [];
        q = c7.atp(j, q, G);
        m.push(G);
      } else if (n == " " || n == "\n" || n == "\r") {
      } else if (n == ")") return q;
      else if (n == '"') {
        var W = q,
          k = !1;
        while (!0) {
          var T = j[q];
          q++;
          if (T == '"') break;
          if (T == "\\") {
            if (j[q] != '"' && j[q] != "n" && j[q] != "t" && j[q] != "r")
              k = !0;
            q++;
          }
        }
        var b = j.slice(W - 1, q);
        m.push(k ? b : JSON.parse(b));
      } else {
        var W = q - 1;
        while (j[q] != " " && j[q] != ")") q++;
        m.push(j.slice(W, q));
      }
    }
  };
  c7.asn = function (j, q, m, n, G) {
    var W = M.Z$(j, q);
    q += 4;
    var k = M.Z$(j, q);
    q += 4;
    var T = M.nB(j, q);
    q += T.I0;
    var b = {};
    q = c7.y8(j, q, b);
    var c = new B.Rx(W * k),
      a = n == 4 ? M.Z$ : M.K_,
      f = a(j, q);
    q += n;
    c7.aL$(j, f, c, m, n, G);
    return { ef: c.o, Fr: b };
  };
  c7.aL$ = function (j, q, m, n, G, W) {
    var k = M.Z$(j, q);
    q += 4;
    var T = M.Z$(j, q);
    q += 4;
    var b = M.Z$(j, q);
    q += 4;
    var c = G == 4 ? M.Z$ : M.K_,
      a = c(j, q);
    q += G;
    c7.aID(j, a, m, n, b, G, W);
  };
  c7.aID = function (j, q, m, n, G, W, k) {
    var T = M.Z$(j, q),
      a = 0,
      y = 0;
    q += 4;
    var b = M.Z$(j, q);
    q += 4;
    var c = new hk(0, 0, T, b);
    if (k == 100 || k == 150) a = 1;
    else if (k == 200 || k == 250) a = 2;
    else if (k == 300 || k == 350) a = 4;
    else if (k == 500 || k == 550) a = 2;
    else if (k == 600 || k == 650) a = 4;
    else if (k == 700 || k == 750) a = 8;
    else {
      alert("unsupported bit depth " + k);
      throw "e";
    }
    var f = G / a,
      a = Math.round(G / f),
      U = [];
    q = c7.hf(j, q, U, W);
    var Z = new B.Rx(64 * 64 * a),
      h = new hk(),
      u = n[dr.aoe][0],
      i = [Z.o, Z.i, Z.X, Z.Sd];
    if (f == 3) Z.Sd.fill(255);
    var x = Date.now();
    if (U.length != 0)
      for (var X = 0; X < b; X += 64)
        for (var $ = 0; $ < T; $ += 64) {
          var H = Math.min(T - $, 64),
            C = Math.min(b - X, 64),
            l = H * C;
          h.Tu($, X, H, C);
          c7.ah0(j, U[y++], l * a, u, f, i);
          if (k == 100 || k == 150) {
          } else if (k == 250) {
            for (var v = 0; v < f; v++) {
              var K = i[v];
              for (var S = 0; S < l; S++) {
                var o = (K[S] << 8) | K[l + S];
                K[S] = Math.min(o >>> 8, 255);
              }
            }
          } else if (k == 600) {
            var V = c7.aB9(),
              P = new Uint32Array(1),
              z = new Float32Array(P.buffer);
            for (var v = 0; v < f; v++) {
              var K = i[v];
              for (var S = 0; S < l; S++) {
                P[0] =
                  (K[S] << 24) |
                  (K[l + S] << 16) |
                  (K[(l << 1) + S] << 8) |
                  (K[(l << 1) + l + S] << 0);
                var E = z[0];
                if (E < 0) E = 0;
                else if (E > 1) E = 1;
                K[S] = V[~~(0.5 + E * 1e3)];
              }
            }
          } else console.log("unknown data format", k);
          B.W4(Z, h, m, c);
        }
  };
  c7.aB9 = function () {
    var j = c7.aBj;
    if (j != null) return j;
    j = c7.aBj = new Uint8Array(1001);
    for (var y = 0; y < 1001; y++) j[y] = ~~(0.49 + 255 * B.SK(y * 0.001));
    return j;
  };
  c7.ah0 = function (j, q, m, n, G, W) {
    if (n == 1) {
      for (var k = 0; k < G; k++) {
        var T = W[k],
          b = 0;
        while (b < m) {
          var aF = j[q];
          q++;
          if (aF < 127) {
            var c = j[q];
            q++;
            aF++;
            for (var y = 0; y < aF; y++) T[b + y] = c;
          } else if (aF == 127) {
            var a = j[q];
            q++;
            var f = j[q];
            q++;
            var c = j[q];
            q++;
            aF = (a << 8) | f;
            for (var y = 0; y < aF; y++) T[b + y] = c;
          } else if (aF == 128) {
            var a = j[q];
            q++;
            var f = j[q];
            q++;
            aF = (a << 8) | f;
            for (var y = 0; y < aF; y++) T[b + y] = j[q + y];
            q += aF;
          } else {
            aF = 256 - aF;
            for (var y = 0; y < aF; y++) T[b + y] = j[q + y];
            q += aF;
          }
          b += aF;
        }
      }
    } else if (n == 2) {
      var U = pako.inflate(j.slice(q)),
        Z = Math.round(U.length / m);
      for (var y = 0; y < m; y++) {
        var h = y * Z;
        W[0][y] = U[h];
        W[1][y] = U[h + 1];
        W[2][y] = U[h + 2];
        W[3][y] = Z == 3 ? 255 : U[h + 3];
      }
    } else alert("Unknown compression " + n);
  };
  c7.hf = function (j, q, m, n) {
    var G = n == 4 ? M.Z$ : M.K_;
    while (!0) {
      var W = G(j, q);
      q += n;
      if (W == 0) break;
      else m.push(W);
    }
    return q;
  };
  c7.y8 = function (j, q, m) {
    while (!0) {
      var n = M.Z$(j, q);
      q += 4;
      var G = M.Z$(j, q);
      q += 4;
      if (n == dr.a0K) break;
      else if (n == dr.Wm) m[n] = c7.atg(j, q, q + G);
      else m[n] = M.AN(j, q, G);
      q += G;
    }
    return q;
  };
  c7.atg = function (j, q, m) {
    var n = {};
    while (q < m) {
      var G = M.nB(j, q);
      q += G.I0;
      var W = M.Z$(j, q);
      q += 4;
      if (W != 1) console.log("unknown flags", W);
      var k = M.Z$(j, q);
      q += 4;
      n[G.fO] = M.AN(j, q, k);
      q += k;
    }
    return n;
  };
  var dr = {
    a0K: 0,
    aqL: 1,
    aeC: 2,
    a6a: 3,
    abb: 4,
    a3w: 5,
    aGF: 6,
    aI8: 7,
    aL1: 8,
    a8Z: 9,
    ahW: 10,
    aIk: 11,
    aHm: 12,
    a8k: 13,
    ajC: 14,
    Gk: 15,
    aEr: 16,
    aoe: 17,
    avE: 18,
    a44: 19,
    aId: 20,
    Wm: 21,
    aH6: 22,
    ak4: 23,
    art: 24,
    a0H: 25,
    alV: 26,
    afu: 27,
    aEp: 28,
    a2K: 29,
    aKN: 30,
    ahZ: 31,
    ajp: 32,
    ak3: 33,
    aof: 34,
    aFg: 35,
    a5h: 36,
    aec: 37,
    amc: 38,
    aEH: 0,
    ayv: 1,
    a39: 2,
    ac$: 3,
    apL: 1,
    aI6: 2,
    ap5: 0,
    atA: 1,
    a5q: 1,
  };
  dr.a9I =
    "norm,diss,norm,mul ,scrn,over,diff,lddg,fsub,dark,lite,hue ,sat ,colr,lum ,fdiv,lddg,idiv,hLit,sLit,fdiv,pLit,norm,over,hue ,hue ,colr,lite,norm,norm,mul ,scrn,diff,lddg,fsub,dark,lite,hue ,sat ,colr,lum ,fdiv,lddg,idiv,hLit,sLit,fdiv,pLit,vLit,pLit,lLit,hMix,smud,lbrn,lum ,lum ,lum ,lum ,norm,norm,norm,pass".split(
      ","
    );
  var jb = (function () {
    var j = !1,
      q,
      m,
      x = 0,
      H;
    function n() {
      var v = M.IH(q, m, 4);
      m += 4;
      return v[3] + v[2] + v[1] + v[0];
    }
    function G() {
      var v = M.IH(q, m, 4);
      m += 4;
      return v;
    }
    function W() {
      var v = q[m];
      m += 1;
      return v;
    }
    function k() {
      var v = M.d9(q, m);
      m += 2;
      return v;
    }
    function T() {
      var v = M.YZ(q, m);
      m += 4;
      return v;
    }
    function b() {
      var v = M.dq(q, m);
      m += 4;
      return v;
    }
    function c() {
      var v = M.YZ(q, m);
      m += 8;
      return v;
    }
    function a() {
      var v = M.x5(q, m);
      m += 4;
      return v;
    }
    function f() {
      var v = M.NR(q, m);
      m += 8;
      return v;
    }
    function U() {
      var v = M.d9(q, m),
        K = M.K6(q, m + 2, v);
      m += 2 + v;
      return K;
    }
    function Z() {
      var v = M.YZ(q, m),
        K = M.K6(q, m + 4, v);
      m += 4 + v;
      return K;
    }
    function h(v) {
      m = v;
      var K = [];
      while (m != 0) {
        var S = G();
        if (S != "#FT4" && S != "#FT3" && S != "#FT2") throw S;
        var o = c(),
          V = c(),
          P = c(),
          z = c(),
          E = c(),
          A = T(),
          N = T(),
          Q = T(),
          e = k(),
          Y = W(),
          d = {};
        K.push(d);
        for (var y = 0; y < A; y++) {
          var I = T(),
            O = W();
          if (O != 0 && O != 1 && O != 2) throw O;
          var s = [];
          if (O == 0 || O == 1) {
            var p = c(),
              F = c(),
              g = c(),
              w = T(),
              r = W(),
              eQ = T(),
              t = S != "#FT4" ? 0 : T(),
              dq = null;
            if (S == "#FAT" || S == "#FT2") {
              switch (r) {
                case 1:
                  r = 1;
                  break;
                case 2:
                  r = 65;
                  break;
                case 3:
                  r = 129;
                  break;
                case 4:
                  r = 193;
                  break;
                default:
                  r = 0;
                  break;
              }
            }
            if (O == 0) dq = U();
            s = [p, F, g, r, dq];
          }
          d["i" + I] = [O, s];
        }
        for (var y = 0; y < e; y++) {
          var D = k(),
            ha = k(),
            am = c(),
            k4 = M.IH(q, m, D);
          m += D;
        }
        m = o;
      }
      K.reverse();
      for (var aA = 1; aA < K.length; aA++) {
        var d = K[aA],
          ex = (K[aA] = B.S(K[aA - 1]));
        for (var ac in d) {
          var eJ = d[ac];
          if (eJ[0] == 0) ex[ac] = eJ;
          else if (eJ[0] == 1) {
            eJ[1][4] = ex[ac][1][4];
            ex[ac] = eJ;
          } else if (eJ[0] == 2) delete ex[ac];
        }
      }
      var h$ = K.pop(),
        da = [];
      for (var ac in h$) da.push(h$[ac][1]);
      da.sort(function (bb, gb) {
        return bb[0] - gb[0];
      });
      return da;
    }
    function u(v, K, S, o) {
      while (m < q.length) {
        var V = W(),
          A = null;
        if (V == 0) {
          if (o) {
            var P = W();
            if (P != 2) {
              var z = n();
            }
            if (P == 0) m += 4;
            o = !1;
            continue;
          } else {
            break;
          }
        }
        var E = n();
        if (E.indexOf("\0") != -1) throw E;
        if (j) console.log("  ".repeat(K), V, V & 127, E, v._type);
        if (V > 127) A = i(V, K, S);
        else A = X(V, K, S);
        if (j) console.log("  ".repeat(K), A);
        v[E] = A;
      }
    }
    function i(v, K, S) {
      var o = [];
      v = v & 127;
      if (v == 43) m += 4;
      var V = T();
      if (v == 50) {
        var P = n(),
          z = k();
        if (z != 1) throw "e";
        for (var y = 0; y < V; y++) {
          var E = { _status: "NotShared", _type: P };
          o.push(E);
          var A = W();
          if (A != 0 && A != 1) throw A;
          u(E, K + 1, S);
        }
      } else if (v == 41) {
        if (V > 8) throw V;
        for (var y = 0; y < V; y++) o.push(((q[m] >>> y) & 1) == 1);
        m++;
      } else
        for (var y = 0; y < V; y++) {
          o.push(X(v, K, S, y != 0));
          if (v == 42) v = 2;
        }
      return o;
    }
    function X(v, K, S, o) {
      var V = null;
      if (v == 49) {
        V = {};
        var P = W();
        if (P != 0) {
          var z = T();
          if (S == null) {
            V._id = z;
            V._status = ["Shared", "Link"][P - 1];
          }
          if (S && P == 2) V = S[z];
          if (P == 1) {
            if (S) S[z] = V;
            var E = W(),
              A = !1;
            if (E > 1) throw E;
            V._type = n();
            if (V._type.indexOf("\0") != -1) throw V._type;
            if (j) console.log("  ".repeat(K), "new", V._type, E, m);
            if (E == 0) {
              while (!0) {
                var N = k();
                if (N != 0 && N != 1 && N != 2 && N != 3 && N != 4) throw N;
                if (q[m] != 0) {
                  A = !0;
                  break;
                }
                var Q = k();
                if (Q == 512) break;
                var e = n();
                if (Q == 256) break;
              }
            }
            u(V, K + 1, S, A);
          }
        }
      } else if (v == 50) {
        V = { _status: "NotShared" };
        if (W() == 1) {
          V._type = n();
          m += 2;
          u(V, K + 1, S);
        }
      } else if (v == 1) V = { type: "byte", value: W() };
      else if (v == 2) V = { type: "uint16", value: k() };
      else if (v == 3) V = { type: "uint32", value: T() };
      else if (v == 4) V = { type: "uint64", value: c() };
      else if (v == 7) V = { type: "int32", value: b() };
      else if (v == 8) V = { type: "int64", value: c() };
      else if (v == 9) V = { type: "float32", value: a() };
      else if (v == 10) V = { type: "float64", value: f() };
      else if (v == 11) V = { type: "float64", value: f() };
      else if (v == 21) V = { type: "Vec2i", value: [T(), T()] };
      else if (v == 23) V = { type: "Vec4i", value: [T(), T(), T(), T()] };
      else if (v == 33) V = { type: "Vec4f", value: [a(), a(), a(), a()] };
      else if (v == 36) V = { type: "Vec2", value: [f(), f()] };
      else if (v == 38) V = { type: "Vec4", value: [f(), f(), f(), f()] };
      else if (v == 40)
        V = { type: "Vec6", value: [f(), f(), f(), f(), f(), f()] };
      else if (v == 41) V = { type: "bool", value: W() != 0 };
      else if (v == 42) V = { type: "Enum", value: T() };
      else if (v == 43) V = { type: "string", value: Z() };
      else if (v == 44) {
        if (o != !0) x = k();
        var Y,
          d = f();
        if (x == 12) Y = [W(), W(), W(), W()];
        else if (x == 16) Y = [T(), T()];
        else if (x == 32) Y = [f(), f(), f()];
        else throw x;
        V = { type: "curv16", value: [d, Y] };
      } else if (v == 45) {
        var I = T();
        V = { type: "buff", value: q.slice(m, m + I) };
        m += I;
      } else if (v == 47) {
        V = { type: "uint32", value: T() };
      } else if (v == 48) {
        var O = [],
          s = k();
        if (s != 1) throw s;
        while (!0) {
          if (q[m] == 135) {
            var F = i(W(), K + 1, S),
              g = i(W(), K + 1, S),
              w = i(W(), K + 1, S);
            O.push([F, g, w]);
          } else {
            var r = 1;
            if (q[m] == 3) {
              W();
              r = T();
            }
            for (var y = 0; y < r; y++) {
              var eQ = q[m];
              if (eQ == 41) {
                if (W() != 41) throw "e";
                var z = W();
                if (z != 0 && z != 1) throw z;
              }
              if (W() != 172) throw "e";
              var t = T(),
                dq = k(),
                Y = [];
              O.push(Y);
              if (dq != 18) throw dq;
              if (t > 4e3) throw t;
              for (var D = 0; D < t; D++) Y.push([f(), f(), W(), W()]);
            }
          }
          if (q[m] == 0) {
            m++;
            break;
          }
        }
        V = { type: "curve", value: O };
      } else if (v == 51) {
        V = { type: "EmbeddedData" };
        V[n()] = Z();
      } else if (v == 52) V = { type: "uint32", value: T() };
      else if (v == 56) V = { type: "Color32", value: [W(), W(), W(), W()] };
      else if (v == 60) V = { type: "ColorGRAY", value: [a(), a()] };
      else if (v == 68) V = { type: "ColorRGBA", value: [a(), a(), a(), a()] };
      else if (v == 72)
        V = { type: "ColorCMYK", value: [a(), a(), a(), a(), a()] };
      else {
        throw v;
      }
      return v == 49 || v == 50 || v == 51 ? V : V.value;
    }
    function $(v) {
      var K = 0,
        S = v.length;
      for (var y = 0; y < S; y += 4) {
        v[y] = K = K + v[y];
        v[y + 1] = K = K + v[y + 1];
        v[y + 2] = K = K + v[y + 2];
        v[y + 3] = K = K + v[y + 3];
      }
    }
    function C(v) {
      q = v;
      m = 4;
      var K = T(),
        S = G();
      if (S != "nsrP") throw S;
      var S = G();
      if (S != "#Inf") throw S;
      var o = c();
      H = c();
      var V = c(),
        P = c(),
        z = c(),
        E = T(),
        A = T(),
        S = G();
      if (S != "Prot") throw S;
      var E = T(),
        N = h(o),
        Q = {},
        e = Date.now();
      for (var Y = 0; Y < N.length; Y++) {
        var d = N[Y],
          I = d[3],
          g = null;
        m = d[0];
        var S = G();
        if (S != "#Fil") throw S;
        var O = (I >>> 5) & 1,
          s = I & 3,
          p = I & 192;
        switch (p) {
          case 64:
            p = 1;
            O = 0;
            break;
          case 128:
            p = 2;
            break;
          case 192:
            p = 3;
            break;
          default:
            p = 0;
            O = 0;
        }
        var F = new Uint8Array(q.buffer, m, d[2]);
        if (s == 0) g = F;
        else if (s == 1) g = pako.inflate(F);
        else if (s == 2) g = gh.h7.md(F, d[1]);
        else throw s;
        if (O == 0) {
          if (p == 1) $(g);
          if (p == 2) throw "e";
        } else if (O == 1) {
          if (p == 2) $(g);
          else throw p;
        } else throw O;
        Q[d[4]] = g;
      }
      return Q;
    }
    function l(v) {
      var K = C(new Uint8Array(v));
      q = K["doc.dat"];
      m = 16;
      var S = {};
      u(S, 0, []);
      return [K, S, H];
    }
    return { aaz: l };
  })();
  function ki() {}
  ki.VB = (function () {
    function j(i, x) {
      var X = Date.now(),
        $ = jb.aaz(i),
        H = $[0],
        C = $[1],
        l = $[2],
        v = C.DocR,
        K = v.DfSz,
        S = v.Chld;
      if (S.length != 1) console.log(S);
      var o = S[0],
        V = o.SprB,
        P = o.bbxs;
      S = o.Chld;
      if (V) {
        x.r = ~~V[2];
        x.$ = ~~V[3];
      } else if (P) {
        var z = P.rcts,
          E = new hk();
        for (var y = 0; y < 4; y++) {
          var A = z[y];
          E = E.vd(new hk(A[0], A[1], A[2] - A[0], A[3] - A[1]));
        }
        x.r = E.r;
        x.$ = E.$;
      } else if (K) {
        x.r = K[0];
        x.$ = K[1];
      } else {
        x.r = 1920;
        x.$ = 1080;
      }
      x.buffer = B.j(x.r * x.$ * 4);
      var N = [0, {}];
      for (var y = 0; y < S.length; y++) W(S[y], x, H, new k$(), N, [], 0);
      x.cw(N[0]);
      console.log(Date.now() - X, "Document created");
      X = Date.now();
    }
    function q(i) {
      return new k$(i[0], i[3], i[1], i[4], i[2], i[5]);
    }
    function m(i, x) {
      var X = x.Xfrm;
      X = X ? q(X) : new k$();
      X.concat(i);
      return X;
    }
    function n(i) {
      var x = {
        0: "norm",
        1: "dark",
        2: "mul ",
        3: "idiv",
        196613: "lbrn",
        65538: "dkCl",
        4: "lite",
        5: "scrn",
        6: "div ",
        7: "lddg",
        65542: "lgCl",
        8: "over",
        9: "sLit",
        10: "hLit",
        11: "vLit",
        65551: "lLit",
        12: "pLit",
        13: "hMix",
        14: "diff",
        15: "smud",
        16: "fsub",
        262165: "fdiv",
        17: "hue ",
        18: "sat ",
        20: "colr",
        19: "lum ",
      }[i];
      return x ? x : "norm";
    }
    function G(i, x) {
      var X = i[x],
        $ = i.DsMa;
      if (X == null && $) X = $[x];
      return X;
    }
    function W(i, x, X, $, H, C, l) {
      var v = i._type,
        K = i.Chld,
        S = x.dj();
      S.tV(
        i.Desc == null || i.Desc == ""
          ? v == "Grup"
            ? "Folder"
            : "Layer"
          : i.Desc
      );
      var o = G(i, "Visi");
      if (o != null) S.xg(o);
      var V = G(i, "Opac");
      if (V != null) S.yA = Math.round(255 * V);
      var P = G(i, "FOpc");
      if (P != null) S.add.iOpa = Math.round(255 * P);
      var z = G(i, "Blnd");
      if (z != null) S.hz = n(z);
      if (i.BFFl && i.BFFl[0]) C.push(i.BFFl[0]);
      var E = m($, i),
        A = v == "ShpN" || v == "PCrv";
      if (K) {
        x.U.push(x.to());
        S.add.lsct = hQ.WR;
        if (S.hz == "norm") S.hz = "pass";
        S.uZ = 24;
        if (o != null) S.xg(o);
        if (v == "ShpN" && l == 0) {
          var N = i.ShpB;
          S.KP(
            new hk(
              N[0] + E.Tt,
              N[1] + E.BL,
              Math.round(E.Sd * (N[2] - N[0])),
              Math.round(E.Jy * (N[3] - N[1]))
            )
          );
          H[0]++;
          S.add.artb.Clr = {
            t: "Objc",
            v: B.MV.Ia({ o: 255, i: 255, X: 255 }),
          };
          var Q = C[0];
          for (var y = 0; y < C.length; y++)
            if (C[y].FDeF._type != "FilN") Q = C[y];
          if (Q.FDeF._type == "FilS") {
            S.add.artb.Clr = a(Q.FDeF.Colr);
            S.add.artb.artboardBackgroundType.v = 4;
          }
        }
        var e = i.Shpe ? i : null;
        if (e == null) e = i.DsMa && i.DsMa.Shpe ? i.DsMa : null;
        if (e) {
          var Y = b(e);
          if (Y.D.length != 7) {
            S.add.vmsk = Y;
            B.z.La(Y.D, E);
            S.Pp();
            S.D5(x);
          }
        }
        for (var y = 0; y < K.length; y++) W(K[y], x, X, E, H, C, l + 1);
      } else if (v == "Rstr" || v == "ImgN" || v == "MRst") {
        S = T(i, S, x, E, X, H);
      } else if (v == "TxtA" || v == "TxtF") {
        S.add.lnsr = "rend";
        S.add.TySh = al.wD(0, 0);
        S.add.TySh.AF = new hk(0, 0, 100, 100);
        var d = i.TxtH ? i : i.DsMa,
          I = d.TxtH.FrmB,
          O = 1,
          s = 1,
          p = (S.add.TySh.u = new k$()),
          eQ = 0;
        p.translate(I[0], I[1]);
        p.concat(E);
        if (v == "TxtF") {
          var F = Math.atan2(-p.X, p.Sd);
          p.rotate(-F);
          O = p.Sd;
          s = p.Jy;
          p.Jy = p.Sd = 1;
          p.rotate(F);
        }
        var g = S.add.TySh.s3,
          w = d.StSt;
        if (w == null) w = d.StMa.StSt;
        var r = w.Blok;
        if (r.length != 1) throw "e";
        for (var t = 0; t < r.length; t++) {
          var dq = r[t],
            D = eQ,
            ha = 0,
            am = dq.Glyp.Utf8;
          if (am == null) continue;
          am = am.replace(/\u2028/g, "\n");
          am = am.replace(/\u2029/g, "\n");
          am = am.slice(0, am.length - 1);
          if (am == "") continue;
          S.tV(am.slice(0, 255));
          al.Fk(g, eQ, am);
          eQ += am.length;
          var k4 = dq.GAtt.Runs,
            aA = dq.PAtt.Runs[0],
            ex = aA.Item.Ints[0];
          for (var ac = 0; ac < k4.length; ac++) {
            var eJ = k4[ac],
              h$ = eJ.Indx,
              da = eJ.Item,
              bb = da.Objs,
              gb = al.vJ(g, D, 1);
            gb.Th.Justification = ex == 0 ? 0 : ex == 1 ? 2 : 1;
            al.gk(gb, da.DFnt.Post);
            gb.K2.FontSize = da.Doub[0];
            for (var y = 0; y < bb.length; y++) {
              var fM = bb[y];
              if (fM._type == "FDsc") {
                var kS = fM.FDeF;
                if (kS._type == "FilS") {
                  var cY = f(kS.Colr);
                  gb.K2.FillColor = {
                    Type: 1,
                    Values: [1, cY[0], cY[1], cY[2]],
                  };
                }
              }
            }
            al.jD(g, D + ha, D + Math.min(h$, am.length), gb);
            ha = h$;
          }
        }
        al.cj(g, 1);
        al.ms(g, [
          0,
          0,
          Math.round((I[2] - I[0]) * O * 1.02),
          Math.round((I[3] - I[1]) * s * 1.2),
        ]);
        x.c4 = !0;
      } else if (A) {
        S.uZ |= 16;
        var cS = (S.add.vstk = eu.rS.i4(!0)),
          Y = (S.add.vmsk = b(i));
        B.z.La(Y.D, E);
        var Q = C[0];
        for (var y = 0; y < C.length; y++)
          if (C[y].FDeF._type != "FilN") Q = C[y];
        if (Q) {
          var k3 = Q.FDeF,
            di = k3._type;
          if (di == "FilS") S.add.SoCo = { classID: "null", Clr: a(k3.Colr) };
          else if (di == "FilG") {
            var a7 = (S.add.GdFl = JSON.parse(eu.oy[eu.order.indexOf("GrFl")]));
            c(Q, a7, B.z.zZ(Y.D));
          } else if (di == "FilN") {
            S.add.SoCo = {
              classID: "null",
              Clr: { t: "Objc", v: B.MV.Ia({ o: 0, i: 0, X: 0 }) },
            };
            cS.fillEnabled.v = !1;
          } else console.log(di);
        }
        if (i.LILn) {
          var b0 = i.LILn[0].LDeL,
            e1 = b0.Wght;
          if (e1 != 0) {
            cS.strokeEnabled.v = !0;
            cS.strokeStyleLineWidth.v.val = e1;
            var k3 = i.LIFl[0].FDeF,
              di = k3._type;
            if (di == "FilS") cS.strokeStyleContent.v.Clr = a(k3.Colr);
            else if (di == "FilN") cS.strokeEnabled.v = !1;
          }
        }
        S.Pp();
        S.D5(x);
      } else if (v == "RcRA") {
        var l2 = i.AdjP,
          kL = "hue2",
          es = (S.add[kL] = k0.i4(kL));
        k(es, l2);
      } else console.log(v);
      var kR = i.AdCh,
        eH = [];
      if (kR)
        for (var y = 0; y < kR.length; y++) {
          var cZ = kR[y],
            ga = cZ._type;
          if (ga == "ShpN" || ga == "PCrv") {
            var Y = (S.add.vmsk = b(cZ)),
              fi = m(E, cZ);
            B.z.La(Y.D, fi);
            S.Pp();
            S.D5(x);
          } else if (ga == "Rstr") {
            var go = G(cZ, "Bitm"),
              iz = go.Bckg,
              i5 = U(go, X, H[1]);
            console.log(i5);
            var aI = new R.T0();
            aI.color = 0;
            aI.H = i5[2].P();
            aI.N = B.j(aI.H.C());
            B.Ih(i5[1], aI.N, 3);
            L.zl.JQ(x, S, aI);
          } else if (cZ.AdjP) {
            var l2 = cZ.AdjP,
              bs = l2._type;
            console.log(bs);
            var k2 = {
              LevP: "levl",
              WhBP: "levl",
              SHiP: "curv",
              HSSP: "hue2",
              RecP: "hue2",
              "B&WP": "blwh",
              "B&CP": "brit",
              PosP: "post",
              VibP: "vibA",
              ExpP: "expA",
              ThrP: "thrs",
              CrvP: "curv",
            }[bs];
            if (k2 == null) {
              console.log(l2);
              continue;
            }
            var jG = k0.ak(k2, {});
            eH.push(jG);
            var es = jG.v.Fltr.v;
            if (bs == "LevP") {
              var eW = im.Lq(es, 0);
              eW[0] = l2.OutB * 255;
              eW[1] = l2.OutW * 255;
              im.Cy(es, 0, eW);
            } else if (bs == "WhBP") {
              var eW = im.Lq(es, 2);
              eW[4] = 100 + l2.WBTi * 20;
              im.Cy(es, 2, eW);
              var eW = im.Lq(es, 3);
              eW[4] = 100 + l2.WBTi * 200;
              im.Cy(es, 3, eW);
            } else if (bs == "HSSP") {
              var eW = b$.Lq(es, 0);
              eW[0] = Math.round(l2.HueA * 256);
              eW[1] = Math.round(l2.SatA * 256);
              eW[2] = Math.round(l2.LumA * 256);
              b$.Cy(es, 0, eW);
            } else if (bs == "RecP") {
              k(es, l2);
            } else if (bs == "B&CP") {
              es.Brgh.v = Math.round(l2.Brig * 100);
              es.Cntr.v = Math.round(l2.Ctrs * 100 - 100);
            } else if (bs == "PosP") {
              es.Lvls.v = l2.Post;
            } else if (bs == "VibP") {
              es.vibrance.v = l2.Vibr - 100;
              es.Strt.v = Math.round(l2.Satu * 100);
            } else if (bs == "ExpP") {
              es.Exps.v = l2.Expo;
              es.gammaCorrection.v = l2.Gamm / 2.2;
            } else if (bs == "ThrP") {
              es.Lvl.v = Math.round(l2.Thre * 255);
            } else if (bs == "CrvP") {
              var gc = l2.Mast["Cnt "],
                k1 = l2.Mast.Vals,
                eW = fY.Lq(es, 0),
                ke = eW[0];
              for (var jh = 0; jh < gc; jh++) {
                var cE = (eW[jh] = B.S(ke));
                cE.v.Hrzn.v = Math.round(k1[jh] * 255);
                cE.v.Vrtc.v = Math.round(k1[4 + jh] * 255);
              }
              fY.Cy(es, 0, eW);
            }
          } else console.log(cZ);
        }
      if (eH.length != 0 && S.add.SoLd) {
        S.add.SoLd.filterFX = k0.X2();
        x.N8({
          id: S.add.SoLd.placed.v,
          H: new hk(),
          buffer: B.j(1),
          x7: new R.T0(),
        });
        S.add.SoLd.filterFX.v.filterFXList.v = eH;
        S.yZ(x, !1);
      }
      var cy = i.FiEf;
      if (cy && cy.length != 0) {
        var hl = (S.add.lmfx = JSON.parse(eu.default));
        for (var y = 0; y < eu.order.length; y++)
          hl[eu.C$[y]] = { t: "VlLs", v: [] };
        for (var c2 = 0; c2 < cy.length; c2++) {
          var f9 = cy[c2],
            hu = f9._type,
            le = {
              ColO: "SoFi",
              GrdO: "GrFl",
              Shad: "DrSh",
              InnS: "IrSh",
              OutG: "OrGl",
              InnG: "IrGl",
              Strk: "FrFX",
              PhgB: "ebbl",
              BevE: "ebbl",
            }[hu],
            a7 = le ? JSON.parse(eu.oy[eu.order.indexOf(le)]) : null,
            iJ = 1;
          if (hu == "ColO") {
            a7.Clr = a(f9.Colr);
          } else if (hu == "GrdO") {
            c(f9.GrFl, a7);
          } else if (
            hu == "Shad" ||
            hu == "InnS" ||
            hu == "OutG" ||
            hu == "InnG"
          ) {
            a7.Clr = a(f9.Colr);
            a7.blur.v.val = Math.round(f9.Radi);
            var dZ = f9.Comp;
            if (dZ != null) {
              if (dZ > 0.5) iJ = 1 - 0.5 * (dZ - 0.5);
              else a7.Ckmt.v.val = Math.round(100 * (0.5 - dZ));
            }
            if (f9.Offs != null) {
              a7.Dstn.v.val = f9.Offs;
              a7.lagl.v.val = Math.round(180 - (f9.Angl * 180) / Math.PI);
              a7.uglg.v = !1;
            }
          } else if (hu == "Strk") {
            if (f9.Ftyp == 0) a7.Clr = a(f9.Colr);
            else {
              c(f9.GrFl, a7);
              a7.PntT.v.FrFl = "GrFl";
            }
            a7.Sz.v.val = Math.round(f9.Radi);
          } else if (hu == "PhgB" || hu == "BevE") {
            a7.blur.v.val = Math.round(f9.Radi);
            if (hu == "BevE") a7.bvlS.v.BESl = "PlEb";
          } else if (hu == "Gaus") {
            if (A && f9.Enab) {
              S.add.vmsk.LH = f9.Radi / 2.4;
              S.add.vmsk.xo = !0;
              S.Pp();
              S.D5(x);
            }
          }
          if (le) {
            a7.enab.v = f9.Enab;
            if (a7.Md && f9.BlnM != null) a7.Md.v.BlnM = kJ.il(n(f9.BlnM));
            if (a7.Opct && f9.Opac != null)
              a7.Opct.v.val = Math.round(iJ * f9.Opac * 100);
            var kd = eu.C$[eu.order.indexOf(le)];
            hl[kd].v.unshift({ t: "Objc", v: a7 });
          }
        }
      }
      if (i.BFFl && i.BFFl[0]) C.pop();
      x.U.push(S);
    }
    function k(i, x) {
      i.Clrz.v = !0;
      var X = b$.Lq(i, 0);
      X[0] = Math.round(x.RecH * 360);
      X[1] = Math.round(x.RecS * 100);
      X[2] = Math.round(x.RecL * 100);
      b$.Cy(i, 0, X);
    }
    function T(i, x, X, $, H, C) {
      var l = G(i, "Bitm"),
        v = l.Bckg,
        S;
      console.log(v);
      var K = Date.now();
      if (v == null) {
        S = U(l, H, C[1]);
        x.H = S[2].P();
        x.buffer = S[1].slice(0);
        x.H.x += $.Tt;
        x.H.y += $.BL;
      }
      if (v || $.Dc() != 1) {
        var o,
          V = 0,
          P = 0;
        if (v) {
          var z = H[v.Data],
            E = M.Gf(z, "ataD") + 4,
            A = M.YZ(z, E);
          E += 4;
          o = z.slice(E, E + A);
        } else {
          if (x.H.jG()) return;
          V = x.H.x - $.Tt;
          P = x.H.y - $.BL;
          if (S[3] == null)
            S[3] = new Uint8Array(
              gh.lj("PNG").Ev([[x.buffer.buffer]], x.H.r, x.H.$)
            );
          o = S[3].slice(0);
        }
        var N = X.Pi(o, x.getName(), 0, 0);
        N.uZ = x.uZ;
        N.yA = x.yA;
        x = N;
        var Q = new k$();
        Q.translate(V, P);
        Q.concat($);
        var e = x.H.P();
        e.x = e.y = 0;
        var Y = B.b._c(e).L;
        B.b.u(Y, Q, Y);
        x.add.SoLd.Trnf = L.Dq.be(Y);
        x.add.SoLd.nonAffineTransform = L.Dq.be(Y);
        x.yZ(X, !1);
      }
      return x;
    }
    function b(i) {
      var x = new R.tm(),
        X = i._type;
      if (i.ShpB == null && i.Crvs == null) i = i.DsMa;
      if (X == "PCrv") {
        var $ = i.Crvs.Data,
          H = [],
          C = [];
        for (var y = 0; y < $.length; y++) {
          var l = $[y],
            v = l.length % 3;
          if (v != 1) {
            l =
              v == 2
                ? l[0][2] != 0
                  ? l.slice(0, l.length - 1)
                  : l.slice(1)
                : l.slice(1, l.length - 1);
          }
          for (var K = 0; K < l.length; K++) {
            var S = l[K],
              o = S[2];
            if (o != 0) H.push(K == 0 ? "M" : "C");
            C.push(S[0], S[1]);
          }
        }
        x.D = B.b.LZ({ L: C, RC: H }, !0);
      } else {
        var V = i.ShpB,
          P = i.Shpe,
          z = P._type,
          E = V[2] - V[0];
        if (z == "ShpE") {
          x.D = B.z.cn.SQ(V[0], V[1], V[2] - V[0], V[3] - V[1]);
        } else if (z == "ShNR") {
          var A = [0, 0, 0, 0];
          if (P.CTyp) {
            A = P.ShCR.slice(0);
            for (var y = 0; y < 4; y++) A[y] *= V[2] - V[0];
            for (var y = 1; y < 4; y++) A[y] = A[0];
          }
          x.D = B.z.cn.Rect(V[0], V[1], V[2] - V[0], V[3] - V[1], A);
        } else if (z == "ShpT") {
          x.D = B.b.LZ(
            {
              RC: ["M", "L", "L", "Z"],
              L: [V[0], V[3], V[2], V[3], V[0] + E * 0.5, V[1]],
            },
            !0
          );
        } else if (z == "ShTz") {
          x.D = B.b.LZ(
            {
              RC: ["M", "L", "L", "L", "Z"],
              L: [
                V[0] + E * P.PosL,
                V[1],
                V[0] + E * P.PosR,
                V[1],
                V[2],
                V[3],
                V[0],
                V[3],
              ],
            },
            !0
          );
        } else {
          console.log("--", z);
          x.D = B.z.cn.Rect(V[0], V[1], V[2] - V[0], V[3] - V[1], [0, 0, 0, 0]);
        }
      }
      return x;
    }
    function c(i, x, X) {
      var $ = i.FDeF,
        H = i.FDeX;
      if (H) H = q(H);
      var C = $.Grad,
        l = C.Cols;
      x.Type.v.GrdT = $.Type == 0 ? "Lnr" : "Rdl";
      var v = [];
      for (var y = 0; y < l.length; y++) {
        var K = f(l[y]);
        v.push([C.Posn[y][0], K]);
      }
      x.Grad.v.Intr.v = 0;
      B.MV.gB(v, x.Grad.v);
      var S = C.Posn,
        o = new ea(S[0][0], S[0][1]),
        V = new ea(S[1][0], S[1][1]);
      if (H) {
        var P = new k$();
        if (X == null) P.translate(-0.5, -0.5);
        P.concat(H);
        if (X == null) P.translate(0.5, 0.5);
        o = P.uL(o);
        V = P.uL(V);
      }
      if ($.Type == 0) o = new ea((o.x + V.x) / 2, (o.y + V.y) / 2);
      B.MV.UO(o, V, X ? X : new hk(0, 0, 1, 1), x);
    }
    function a(i) {
      var x = f(i);
      return {
        t: "Objc",
        v: B.MV.Ia({ o: x[0] * 255, i: x[1] * 255, X: x[2] * 255 }),
      };
    }
    function f(i) {
      var x = i._col,
        X = i._type;
      if (X == "HSLA") {
        var $ = B.wL(x[0], x[1], x[2]);
        return [$.o, $.i, $.X, x[3]];
      } else if (X == "RGBA") return x;
      else if (X == "CMYK") return B.Lf(x);
      else if (X == "GRAY") return [x[0], x[1], x[2]];
      else if (X == "Pant") return i.srgb._col;
      else {
        console.log(x);
        throw X;
      }
    }
    function U(i, x, X) {
      var $ = i.Frmt,
        N = "";
      if ($ != 0 && $ != 1 && $ != 2 && $ != 4 && $ != 6) throw $;
      var H = i.BmpW,
        C = i.BmpH,
        l = $ == 1 ? 128 : 256,
        v = $ == 4 ? 5 : $ == 0 || $ == 1 ? 4 : $ == 2 ? 2 : 1,
        K = i.TWi1;
      if (K == null) K = Math.ceil(H / l);
      var S = i.THi1;
      if (S == null) S = Math.ceil(C / 256);
      var o = new hk(0, 0, K, S),
        V = new hk();
      for (var y = 0; y < v; y++) {
        var P = new Uint8Array(i["Sta" + (y + 1)]);
        if (P.length != o.C()) throw "e";
        for (var z = 0; z < P.length; z++) if (P[z] == 1) P[z] = 0;
        var E = B.El(P, o);
        V = V.vd(E);
      }
      var A = [];
      for (var y = 0; y < v; y++) {
        var P = new Uint8Array(i["Sta" + (y + 1)]),
          Q = B.j(V.C());
        B.sN(P, o, Q, V);
        A[y] = [];
        for (var z = 0; z < Q.length; z++) A[y][z] = Q[z];
        N +=
          JSON.stringify(A[y]) + "," + JSON.stringify(i["Idx" + (y + 1)]) + ",";
      }
      if (X[N] == null) {
        var e = V.r * l,
          Y = V.$ * 256,
          d = new Array(v);
        for (var y = 0; y < v; y++) {
          var P = (d[y] = new Uint8Array(e * Y));
          Z(P, i["Idx" + (y + 1)], A[y], x, e, Y, l);
        }
        var I = B.j(e * Y * 4);
        if ($ == 0 || $ == 1) B.Nr({ o: d[0], i: d[1], X: d[2], Sd: d[3] }, I);
        else if ($ == 2) B.Nr({ o: d[0], i: d[0], X: d[0], Sd: d[1] }, I);
        else if ($ == 4) {
          for (var y = 0; y < d[0].length; y++) {
            var O = y * 4,
              s = d[0][y] * (1 / 255),
              p = d[1][y] * (1 / 255),
              F = d[2][y] * (1 / 255),
              g = d[3][y] * (1 / 255),
              w = UDOC.C.cmykToRgb([s, p, F, g]);
            I[O] = w[0] * 255;
            I[O + 1] = w[1] * 255;
            I[O + 2] = w[2] * 255;
            I[O + 3] = d[4][y];
          }
        } else {
          I.fill(255);
          B.QZ(d[0], I);
        }
        var r = new hk(0, 0, e, Y),
          eQ = { buffer: I, H: r };
        B.TE(eQ);
        X[N] = [eQ.H, eQ.buffer];
      }
      var E = (X[N][2] = X[N][0].P());
      E.x += V.x * l;
      E.y += V.y * 256;
      return X[N];
    }
    function Z(i, x, X, $, H, C, l) {
      var v = 0,
        K = H >>> (l == 256 ? 8 : 7),
        S = C >>> 8;
      for (var o = 0; o < S; o++)
        for (var V = 0; V < K; V++) {
          var P = V * l,
            z = o * 256,
            E = o * K + V,
            A = z * H + P,
            N = X[E];
          if (N <= 1) {
          } else if (N == 2) h(i, A, 255, H, l, 256);
          else if (N == 4) {
            var Q = x[v];
            v++;
            var e = $[Q.Data.DatI],
              Y = Q.Rect;
            if (Y == null) Y = [0, 0, l, 256];
            u(
              i,
              (z + Y[1]) * H + P + Y[0],
              e,
              Y[1] * l + Y[0],
              H,
              l,
              Y[2] - Y[0],
              Y[3] - Y[1]
            );
          } else console.log(N);
        }
    }
    function h(i, x, X, $, H, C) {
      var l = x + $ * C;
      for (; x < l; x += $) {
        var v = x + H;
        for (var K = x; K < v; K++) {
          i[K] = X;
        }
      }
    }
    function u(i, x, X, $, H, C, l, v) {
      var K = x + H * v,
        S = $ + C * v;
      for (; x < K && $ < S; x += H, $ += C) {
        for (var y = 0; y < l; y++) i[x + y] = X[$ + y];
      }
    }
    return j;
  })();
  function jU() {}
  jU.VB = function (j, q) {
    var m = jU,
      n = ds.parse(j),
      b = 0,
      K = 0;
    if (n.pages.length > 1) console.log(n.pages.length, "pages");
    for (var G = 0; G < n.pages.length; G++) {
      var W = n.pages[G],
        k = W.layers;
      if (W.Name == "Symbols") continue;
      for (var y = 0; y < k.length; y++)
        if (m.Y5(k[y]) == "group") k[y]._isArtb = !0;
    }
    var T = [],
      c = new hk();
    for (var G = 0; G < n.pages.length; G++) {
      var W = n.pages[G],
        k = W.layers,
        a = m.RD(k, G),
        U = !1;
      if (a.C() > 8e3 * 8e3 || a.r > 3e4 || a.$ > 3e4) {
        m.aHh(k, !0);
        var f = m.RD(k, G);
        if (f.C() >= a.C()) m.aHh(k, !1);
      }
      a = m.RD(k, G);
      for (var Z = 0; Z < k.length; Z++) {
        var h = k[Z];
        if (m.Y5(h) == "artboard") U = !0;
      }
      if (!U) {
        console.log("no artboard");
        var u = {};
        for (var i in W) u[i] = W[i];
        u._class = "group";
        W.layers = [u];
      }
      T.push(a.P());
      if (a.jG()) continue;
      a.x = 0;
      a.y = b;
      b += a.$ + 200;
      c = c.vd(a);
    }
    var x = {};
    if (n.foreignSymbols)
      for (var y = 0; y < n.foreignSymbols.length; y++) {
        var X = n.foreignSymbols[y].symbolMaster;
        x[X.symbolID] = { Q3: X };
      }
    m.aIb(n.pages, x, q);
    for (var $ in x) {
      var h = x[$].Q3,
        H = m.az2(h.layers);
    }
    var C = jU.ud(c, 8192 * 8192);
    q.c4 = !0;
    q.r = Math.round(c.r / C);
    q.$ = Math.round(c.$ / C);
    q.buffer = B.j(q.r * q.$ * 4);
    q.iE = {};
    q.tC = [];
    b = 0;
    for (var G = 0; G < n.pages.length; G++) {
      var l = n.pages[G],
        a = T[G],
        v = new k$(C, 0, 0, C, a.x, a.y - b);
      m.Zc(l.layers, q, v, n, x, {}, []);
      b += a.$ + 200;
    }
    delete q.iE;
    delete q.tC;
    for (var y = 0; y < q.U.length; y++) if (q.U[y].add.artb) K++;
    q.cw(K);
    if (C != 1) alert("File scaled down " + C + "x");
    q.ac4();
  };
  jU.a1u = 0;
  jU.Y5 = function (j) {
    var q = j._class ? j._class : j.$class;
    if (q == "group" && j._isArtb) q = "artboard";
    return q;
  };
  jU.ud = function (j, q) {
    var m = 1;
    if (ei != 0) return m;
    while (
      Math.round(j.r / m) * Math.round(j.$ / m) > q ||
      Math.max(Math.round(j.r / m), Math.round(j.$ / m)) > 3e4
    )
      m++;
    if (window.aa9) return m;
    if (
      m != 1 &&
      !window.confirm(
        "Your image is quite large (" +
          j.r +
          " x " +
          j.$ +
          " px).\n" +
          "Press OK to scale it down " +
          m +
          "x, or Cancel to keep the size."
      )
    )
      m = 1;
    return m;
  };
  jU.RD = function (j, q) {
    var m = [],
      n = jU;
    for (var G = 0; G < j.length; G++) {
      var W = j[G],
        k = n.X7(W.frame);
      if (q == 0 || n.Y5(W) == "artboard") m.push(k);
    }
    return B.H.VV(m);
  };
  jU.aHh = function (j, q) {
    var m = [],
      n = jU;
    for (var G = 0; G < j.length; G++) {
      var W = j[G],
        k = n.X7(W.frame);
      k.r += 150;
      k.$ += 150;
      m.push(k);
    }
    var T = B.H.VV(m);
    B.H.aD_(m, q);
    var b = B.H.VV(m);
    if (
      b.C() * 1.5 < T.C() ||
      (T.r > 3e4 && b.r <= 3e4) ||
      (T.$ > 3e4 && b.$ <= 3e4)
    ) {
      alert("Re-arranging artboards");
      for (var G = 0; G < j.length; G++) {
        var c = m[G],
          W = j[G],
          a = W.frame;
        a.x = c.x;
        a.y = c.y;
      }
    }
  };
  jU.aIb = function (j, q, m) {
    if (j == null) return;
    var n = jU;
    for (var G = 0; G < j.length; G++) {
      var W = j[G],
        k = n.Y5(W);
      if (["page", "artboard", "group"].indexOf(k) != -1) n.aIb(W.layers, q, m);
      else if (k == "symbolMaster") q[W.symbolID] = { Q3: W };
    }
  };
  jU.az2 = function (j) {
    var q = jU;
    for (var m = 0; m < j.length; m++) {
      var n = j[m],
        G = q.Y5(n),
        W = null;
      if (["page", "artboard", "group"].indexOf(G) != -1) W = q.az2(n.layers);
      if (G == "symbolMaster" || G == "symbolInstance") W = n;
      if (W != null) return W;
    }
    return null;
  };
  jU.Zc = function (j, q, m, n, G, W, k) {
    if (j == null) return;
    var T = jU,
      b = [];
    for (var c = 0; c < j.length; c++) {
      var a = j[c],
        f = a.frame ? T.X7(a.frame) : null,
        U = a.style,
        x = "",
        v = null,
        K = !1;
      if (U == null) {
        console.log("no styles");
      }
      var Z = T.ae6(a, m),
        h = T.Y5(a),
        u =
          h == "shapeGroup" ||
          h == "shapePath" ||
          h == "rectangle" ||
          h == "oval" ||
          h == "triangle" ||
          h == "polygon",
        i = ["page", "artboard", "group"].indexOf(h) != -1;
      if (h == "shapeGroup") {
        for (var y = 0; y < a.layers.length; y++)
          if (T.Y5(a.layers[y]) == "shapeGroup") i = !0;
      }
      var X = a.exportOptions;
      if (X) {
        var $ = X.exportFormats;
        if ($ == null) $ = X.sizes;
        if (h != "artboard" && $ && $.length != 0) {
          var H = $[0].scale;
        }
      }
      var C = q.dj();
      C.xg(a.isVisible);
      var l = a.name;
      if (!(typeof l == "string")) l = h;
      C.tV(x + l.slice(0, 250));
      if (U != null)
        v = T.a3a(n, q, U, f, Z, C.getName(), u || h == "artboard" || i);
      if (h == "rectangle" && U && U.fills && U.fills[0]) {
        var S = U.fills[0];
        if (S.fillType == 4 && S.patternFillType > 1 && S.image != null) K = !0;
      }
      if (a.shouldBreakMaskChain) {
        while (b.length != 0) T.afV(b.pop(), q);
      }
      if (i) {
        C.add.lsct = a.layerListExpandedType == 2 ? hQ.WR : hQ.z$;
        C.hz = "pass";
        C.uZ = 24;
        C.xg(a.isVisible);
        q.U.push(q.to());
        if (
          a.hasBackgroundColor == null &&
          a.hasClickThrough == 0 &&
          a.name == "Frame" &&
          !f.jG()
        ) {
          console.log("Frame detected!!!!");
          var o = (C.add.vmsk = new R.tm());
          C.add.vstk = eu.rS.i4(!0, !1);
          var V = f.P();
          o.D = B.z.cn.Rect(V.x, V.y, V.r, V.$);
          C.Pp();
          C.D5(q);
        }
        if (h == "artboard") {
          var P = f.P(),
            z = Z.Dc();
          P.x = -Math.floor(Z.Tt / z);
          P.y = -Math.floor(Z.BL / z);
          P.r = Math.floor(P.r / z);
          P.$ = Math.floor(P.$ / z);
          C.KP(P);
          var E = a.backgroundColor,
            A = E
              ? { o: 255 * E.red, i: 255 * E.green, X: 255 * E.blue }
              : { o: 255, i: 255, X: 255 };
          C.add.artb.Clr = { t: "Objc", v: B.MV.Ia(A) };
          C.add.artb.artboardBackgroundType = { t: "long", v: 4 };
        }
        T.Zc(a.layers, q, Z, n, G, W, k);
      } else if (u && !K) {
        var N = v != null && v.frameFXMulti.v.length == 1;
        C.add.vmsk = new R.tm();
        C.add.vstk = eu.rS.i4(!0, N);
        var Q = U ? U.fills : null,
          e = U
            ? T.ank(
                n,
                Q,
                f,
                Z,
                C.getName(),
                q,
                T.KE(k, a.do_objectID + "_image")
              )
            : [];
        if (e.length == 0) {
          if (N) C.add.vstk.fillEnabled.v = !1;
          else C.add.iOpa = 0;
          C.add.SoCo = {
            classID: "null",
            Clr: { t: "Objc", v: B.MV.Ia({ o: 0, i: 0, X: 0 }) },
          };
        } else {
          var Y = e[0],
            I = null,
            O = null;
          if (Y.e == "SoFi") {
            I = "SoCo";
            O = eu.dS;
          }
          if (Y.e == "GrFl") {
            I = "GdFl";
            O = eu.GB;
          }
          if (Y.e == "patternFill") {
            I = "PtFl";
            O = eu.Pa;
          }
          if (I != null) {
            C.add[I] = { classID: "null" };
            for (var y = 0; y < O.length; y++) {
              var s = O[y];
              C.add[I][s] = Y.K.v[s];
            }
            var p = Y.K.v.Opct.v.val;
            if (N && p == 0) C.add.vstk.fillEnabled.v = !1;
            else C.add.iOpa = Math.round((255 * p) / 100);
          }
        }
        C.uZ |= 16;
        C.add.vmsk.D = T.mV(a.layers ? a.layers : [a], a.layers ? Z : m);
        var F = U ? U.blur : null;
        if (F && F.isEnabled && F.type <= 1) C.add.vmsk.LH = F.radius;
        if (C.add.vmsk.D.length == 2) {
          console.log("shape with no content:", C.getName());
        }
        if (N) {
          var w = v.frameFXMulti.v[0].v,
            r = C.add.vstk,
            eQ = U.borders[0];
          v.frameFXMulti.v = [];
          dS.a3n(w, r);
          var t = U.borderOptions,
            dq = U.miterLimit;
          if (t)
            eu.rS.write(r, {
              kv: t.lineCapStyle,
              h0: t.lineJoinStyle,
              QJ: t.dashPattern,
              NV: dq,
            });
        }
        C.Pp();
        C.D5(q);
      } else if (h == "bitmap" || K) {
        if (!K && a.image == null) continue;
        var D = K ? U.fills[0] : null,
          ha = K ? D.image.bdata : a.image.bdata,
          am = q.Pi(ha, C.getName(), 0, 0);
        am.uZ = C.uZ;
        C = am;
        var F = U ? U.blur : null,
          k4 = U ? U.colorControls : null;
        if (F || k4) {
          var Q = [];
          if (F) {
            var aA = k0.ak("GsnB", {});
            aA.v.enab.v = F.isEnabled;
            aA.v.Fltr.v.Rds.v.val = F.radius;
            Q.push(aA);
          }
          if (k4) {
            var ex = k4.brightness,
              ac = k4.contrast,
              eJ = k4.hue,
              h$ = k4.saturation;
            if (eJ != 0 || h$ != 1) {
              var aA = k0.ak("hue2", {});
              aA.v.enab.v = k4.isEnabled;
              b$.Cy(aA.v.Fltr.v, 0, [
                Math.round((eJ * 180) / Math.PI),
                Math.round((h$ - 1) * 100),
                0,
              ]);
              Q.push(aA);
            }
            if (ex != 0 || ac != 1) {
              var aA = k0.ak("brit", {});
              aA.v.enab.v = k4.isEnabled;
              ac = ac - 1;
              if (ac > 0) ac /= 2;
              var da = aA.v.Fltr.v;
              da.Brgh.v = Math.round(ex * 255);
              da.Cntr.v = Math.round(ac * 255);
              da.useLegacy.v = !0;
              Q.push(aA);
            }
          }
          if (Q.length != 0) {
            C.add.SoLd.filterFX = k0.X2();
            q.N8({
              id: C.add.SoLd.placed.v,
              H: new hk(),
              buffer: B.j(1),
              x7: new R.T0(),
            });
            C.add.SoLd.filterFX.v.filterFXList.v = Q;
          }
        }
        if (K) {
          var bb = D.patternFillType;
          if (bb == 3) {
            var gb = C.H.r / C.H.$,
              fM = f.r / f.$;
            if (gb < fM) {
              Z.translate(-(f.r * (1 - gb / fM)) / 2, 0);
              Z.scale(fM / gb, 1);
            } else {
              Z.translate(0, -(f.$ * (1 - fM / gb)) / 2);
              Z.scale(1, gb / fM);
            }
          }
        }
        f.x = f.y = 0;
        var kS = B.b._c(f).L;
        Z.BR();
        B.b.u(kS, Z, kS);
        C.add.SoLd.Trnf = L.Dq.be(kS);
        C.add.SoLd.nonAffineTransform = L.Dq.be(kS);
        C.yZ(q, !1);
      } else if (h == "text") {
        if (a.attributedString == null) continue;
        var cY = Z.P(),
          cS,
          k3,
          l2 = 0;
        cY.BR();
        cY.Sd = cY.Jy = Math.min(cY.Sd, cY.Jy);
        C.add.lnsr = "rend";
        C.add.TySh = al.wD(0, 0);
        C.add.TySh.AF = new hk(0, 0, f.r, f.$);
        C.add.TySh.u = cY;
        var di = a.attributedString;
        if (di.archivedAttributedString) di = di.archivedAttributedString;
        var a7 = di.NSString;
        if (a7 == null) a7 = di.string;
        if (a7 == null) a7 = "";
        if (a7["NS.string"]) a7 = a7["NS.string"];
        if (W[a.do_objectID] != null) a7 = W[a.do_objectID];
        var b0 = T.KE(k, a.do_objectID + "_stringValue");
        if (b0) a7 = b0.value;
        if (di.attributes != null) {
          cS = [];
          k3 = [];
          var e1 = di.attributes;
          for (var y = 0; y < e1.length; y++) {
            cS.push(e1[y].length, y);
            k3.push(e1[y].attributes);
          }
        } else if (di.NSAttributeInfo == null) {
          cS = [a7.length, 0];
          k3 = [di.NSAttributes];
        } else {
          cS = di.NSAttributeInfo["NS.data"];
          k3 = di.NSAttributes;
          cS = jU.aEy(cS, k3);
        }
        for (var y = 0; y < cS.length; y += 2) l2 += cS[y];
        if (l2 != a7.length) {
          while (l2 > a7.length) {
            cS[cS.length - 2]--;
            l2--;
            if (cS[cS.length - 2] == 0) {
              cS.pop();
              cS.pop();
            }
          }
          cS[cS.length - 2] += a7.length - l2;
        }
        a7 = a7.replace(/\u2028/g, "\n");
        a7 = a7.replace(/\u2029/g, "\n");
        a7 = a7.replace(/\r/g, "\n");
        var kL = C.add.TySh.s3;
        al.Fk(kL, 0, a7);
        if (a7 != "") {
          var es = a.textBehaviour,
            kR = U.textStyle,
            eH = kR ? kR.verticalAlignment : 0,
            cZ = T.ahq(kL, cS, k3, a7),
            z = cY.Dc(),
            ga = al.vJ(kL, 0, 1),
            iz = 0;
          if (ga.K2.Font) {
            var fi = ga.NJ[ga.K2.Font].Name;
            if (fi == "FontAwesome" || fi == "Ionicons") cZ *= 0.87;
          }
          var go = ga.K2.AutoLeading ? 0 : ga.K2.Leading * 0.6,
            i5 = Math.max(cZ, go) * z,
            aI = f.r,
            bs = f.$;
          if (es == 0) {
            al.cj(kL, 0);
            var k2 = al.xT(ga.Th);
            if (k2 == 1) iz = aI * z;
            if (k2 == 2) iz = aI * z * 0.5;
            if (eH == 0) i5 *= 1;
            else i5 *= 0.9;
          } else {
            al.cj(kL, 1);
            al.ms(kL, [0, 0, Math.round(aI), Math.round(bs)]);
            if (es == 2 && eH == 0) i5 = i5 * 0.2;
            else if (es == 2 && eH == 1) {
              i5 = z * 0.5 * (bs - ga.K2.FontSize);
            } else if (es == 1 && eH == 0) i5 = i5 * 0.2;
            else i5 = i5 * 0.35;
          }
          C.add.TySh.u.translate(iz, i5);
        }
      } else if (h == "symbolInstance" || h == "symbolMaster") {
        var jG = a.symbolID;
        if (W[a.do_objectID]) jG = W[a.do_objectID].symbolID;
        var eW = T.KE(k, a.do_objectID + "_symbolID");
        if (eW) jG = eW.value;
        if (jG == "") continue;
        var gc = {};
        for (var s in W) gc[s] = W[s];
        if (a.overrides) for (var s in a.overrides) gc[s] = a.overrides[s];
        var k1 = k.slice(0);
        if (a.overrideValues) k1 = k1.concat(a.overrideValues);
        var ke = G[jG];
        if (ke == null) {
          console.log("Unknown master master", a.symbolID);
          continue;
        }
        var V = jU.X7(ke.Q3.frame),
          jh = V.r / f.r,
          cE = V.$ / f.$,
          cy = Z.P();
        cy.scale(jh, cE);
        C.add.lsct = hQ.z$;
        C.hz = "pass";
        C.uZ = 24;
        C.xg(a.isVisible);
        q.U.push(q.to());
        var hl = ke.Q3;
        if (q.tC.indexOf(hl) == -1) {
          q.tC.push(hl);
          T.Zc(hl.layers, q, cy, n, G, gc, k1);
          q.tC.pop();
        }
      } else if (h == "slice") {
        console.log("slice layers are ignored by now");
        continue;
      } else {
        console.log("unknown layer type: " + h, a);
        continue;
      }
      if (U && U.contextSettings) {
        var c2 = U.contextSettings,
          f9 = c2.blendMode;
        if (f9 < T.pg.length) {
          C.hz = kJ.YH[kJ.Tg.indexOf(T.pg[f9])];
          if (i && C.hz == "norm") C.hz = "pass";
        }
        C.yA = Math.round(C.yA * c2.opacity);
      }
      if (v != null) {
        C.add.lmfx = v;
      }
      q.U.push(C);
      if (a.hasClippingMask && j.length > 1) {
        b.push(C);
        q.U.push(q.to());
      }
    }
    while (b.length != 0) T.afV(b.pop(), q);
  };
  jU.KE = function (j, q) {
    for (var y = 0; y < j.length; y++)
      if (j[y].overrideName.startsWith(q)) return j[y];
  };
  jU.aEy = function (j, q) {
    var m = 0,
      n = [];
    while (m + 1 < j.length) {
      var G = j[m];
      m++;
      if (G > 127) {
        G += 128 * (j[m] - 1);
        m++;
        if (j[m - 1] > 127) {
          G += 128 * (j[m] - 1);
          m++;
        }
      }
      var W = j[m];
      m++;
      n.push(G, W);
    }
    return n;
  };
  jU.ahq = function (j, q, m, n) {
    var G = jU,
      W = 0,
      a = 0,
      f = 0;
    for (var y = 0; y < n.length; y++) {
      var k = n.charCodeAt(y),
        T =
          (1473 <= k && k <= 1479) ||
          (1488 <= k && k <= 1514) ||
          (1520 <= k && k <= 1524),
        b = (1569 <= k && k <= 1594) || (1600 <= k && k <= 1749);
      if (T || b) W++;
    }
    var c = W > n.length / 2;
    for (var y = 0; y < q.length; y += 2) {
      var U = q[y],
        C = 14,
        l = "DejaVuSans";
      if (U == 0) continue;
      var Z = q[y + 1],
        h = m[Z],
        u = al.vJ(j, a, a + U - 1),
        i = h.NSColor;
      if (i == null) {
        var i = h.MSAttributedStringColorDictionaryAttribute;
        if (i == null) i = h.MSAttributedStringColorAttribute;
        if (i == null) i = "0 0 0";
        else i = [i.red, i.green, i.blue].join(" ");
      } else if (G.Y5(i) == "MSArchivedColor")
        i = i.dr + " " + i.dg + " " + i.db;
      else if (i.NSRGB) {
        i = i.NSRGB;
        i = M.IH(i, 0, i.length - 1);
      } else if (i.NSCMYK) {
        i = i.NSCMYK;
        i = M.IH(i, 0, i.length - 1);
        i = i.split(" ").map(parseFloat);
        var x = 1 - i[0],
          X = 1 - i[1],
          $ = 1 - i[2],
          H = 1 - i[3];
        i = x * H + " " + X * H + " " + $ * H;
      } else if (i.NSWhite) {
        i = "1 1 1";
      }
      i = i.split(" ");
      u.K2.FillColor = {
        Type: 1,
        Values: [1, parseFloat(i[0]), parseFloat(i[1]), parseFloat(i[2])],
      };
      var v = h.MSAttributedStringFontAttribute;
      if (h.NSFont) {
        C = h.NSFont.NSSize;
        l = h.NSFont.NSName;
      } else if (v) {
        if (v.attributes) {
          v = v.attributes;
          C = v.size;
          l = v.name;
        } else {
          var K = v.NSFontDescriptorAttributes;
          if (K == null) K = v.UIFontDescriptorAttributes;
          v = K;
          C = v.NSFontSizeAttribute;
          l = v.NSFontNameAttribute;
        }
        if (l == null) l = "DejaVuSans";
      }
      var f = Math.max(f, C);
      u.K2.FontSize = Math.round(C);
      al.gk(u, l);
      var S = h.NSKern;
      if (S == null) S = h.kerning;
      if (S != null) u.K2.Tracking = Math.round((1e3 * S) / C);
      if (h.NSUnderline != null) u.K2.Underline = h.NSUnderline > 0;
      var o = h.NSStrikethrough;
      if (o == null) o = h.strikethroughStyle;
      if (o != null) u.K2.Strikethrough = o > 0;
      if (h.MSAttributedStringTextTransformAttribute == 1) u.K2.FontCaps = 2;
      var V = h.NSParagraphStyle;
      if (V == null) V = h.paragraphStyle;
      if (V) {
        var P = V.paragraphSpacing;
        if (P != null) {
          u.Th.SpaceAfter = P;
        }
        var z = V.NSAlignment;
        if (z == null) z = V.alignment;
        if (z != null) {
          var E = 0;
          if (!1) {
          } else if (z == 1) E = 1;
          else if (z == 2) E = 2;
          else if (z == 4) E = 0;
          else {
            E = z;
            console.log("unknown align", z);
          }
          if (c && E < 2) E = 1 - E;
          u.Th.Justification = E;
        }
        var A = V.NSMinLineHeight;
        if (A == null) A = V.minimumLineHeight;
        if (A != null) {
          u.K2.AutoLeading = !1;
          u.K2.Leading = A;
        }
      }
      u.Th._Direction = c ? 1 : 0;
      al.jD(j, a, a + U, u);
      a += U;
    }
    return f;
  };
  jU.a3a = function (j, q, m, n, G, W, k) {
    var T = jU,
      b = JSON.parse(eu.default),
      c = !1;
    for (var y = 0; y < eu.order.length; y++)
      b[eu.C$[y]] = { t: "VlLs", v: [] };
    var a = m.fills,
      f = T.ank(j, a, n, G, W, q);
    for (var U = 0; U < 2; U++) {
      var Z = m[["shadows", "innerShadows"][U]];
      if (Z == null) continue;
      var h = ["DrSh", "IrSh"][U],
        u = eu.C$[eu.order.indexOf(h)];
      for (var y = 0; y < Z.length; y++) {
        var i = Z[y];
        if (!i.isEnabled) continue;
        var x = i.contextSettings;
        if ((x && x.opacity == 0) || i.color.alpha == 0) continue;
        var X = JSON.parse(eu.oy[eu.order.indexOf(h)]);
        b[u].v.unshift({ t: "Objc", v: X });
        c = !0;
        X.Clr.v = T.uQ(i.color);
        X.blur.v.val = Math.round(i.blurRadius / G.Dc());
        var $ = G.P();
        $.Tt = $.BL = 0;
        $.BR();
        var H = $.uL(new ea(i.offsetX, i.offsetY)),
          C = Math.sqrt(H.x * H.x + H.y * H.y);
        X.Dstn.v.val = Math.round(C);
        X.lagl.v.val = Math.round(Math.atan2(H.y, -H.x) * (180 / Math.PI));
        if (X.layerConceals) X.layerConceals.v = f.length != 0;
        T.un(i, X);
      }
    }
    var l = m.borders;
    if (l != null && (f.length == 0 || m.blur == null || !m.blur.isEnabled))
      for (var y = 0; y < l.length; y++) {
        var v = l[y];
        if (!v.isEnabled) continue;
        var X = JSON.parse(eu.oy[eu.order.indexOf("FrFX")]),
          u = eu.C$[eu.order.indexOf("FrFX")];
        b[u].v.unshift({ t: "Objc", v: X });
        c = !0;
        X.Clr.v = T.uQ(v.color);
        if (v.fillType != 0 && v.gradient) {
          var K = T.aef(v.gradient, n, G, W),
            S = ["Type", "Angl", "Ofst", "Scl"];
          for (var y = 0; y < S.length; y++) X[S[y]] = K[S[y]];
          X.Grad.v = K.Grad.v;
          X.PntT.v.FrFl = "GrFl";
        }
        X.Sz.v.val = Math.round(v.thickness / G.Dc());
        X.Styl.v.FStl = ["CtrF", "InsF", "OutF"][v.position];
        T.un(v, X);
      }
    for (var y = k ? 1 : 0; y < f.length; y++) {
      var o = f[y],
        u = eu.C$[eu.order.indexOf(o.e)];
      b[u].v.unshift(o.K);
      c = !0;
    }
    return c ? b : null;
  };
  jU.ank = function (j, q, m, n, G, W, k) {
    if (q == null) return [];
    var T = jU,
      b = [];
    for (var y = 0; y < q.length; y++) if (q[y].isEnabled) b.push(q[y]);
    q = b;
    var c = [];
    for (var y = 0; y < q.length; y++) {
      var a = q[y],
        f = null,
        U = null;
      if (a.fillType == 0) {
        f = "SoFi";
        var Z = JSON.parse(eu.oy[eu.order.indexOf("SoFi")]);
        U = { t: "Objc", v: Z };
        U.v.Clr.v = T.uQ(a.color);
      } else if (a.fillType == 1) {
        f = "GrFl";
        U = { t: "Objc", v: T.aef(a.gradient, m, n, G) };
      } else if (a.fillType == 4 && a.image != null) {
        var h = a.image;
        if (k) h = k.value;
        var u = gh.Qa(h.bdata.buffer);
        if (u == "fpng") u = "png";
        if (u != null && u != "pdf" && u != "eps") {
          var i,
            C = 0,
            l = 0,
            v = 0;
          if (W.iE[h.key]) i = W.iE[h.key];
          else {
            var x = { data: new ArrayBuffer(4), Iu: new hk(0, 0, 1, 1) };
            try {
              x = gh.lj(u).LN(h.bdata)[0];
            } catch (gn) {}
            i = {};
            i.id = fb.Rh() + "-d71c-11e5-b1ae-a548a96e5f9f";
            i.name = "someImage";
            i.Og = [new Uint8Array(x.data), x.Iu];
            W.Vq(i);
            W.iE[h.key] = i;
          }
          var X = i.Og[1],
            Z = JSON.parse(eu.oy[eu.order.indexOf("patternFill")]);
          f = "patternFill";
          U = { t: "Objc", v: Z };
          var $ = a.patternFillType,
            H = a.patternTileScale;
          Z.Algn.v = !0;
          Z.Ptrn.v.Idnt.v = i.id;
          if ($ == 0) {
            C = (H * X.r) / Math.min(X.r, X.$);
            l = -n.Tt;
            v = -n.BL;
          } else {
            C = Math.max(m.r / X.r, m.$ / X.$);
            l = -n.Tt - (X.r * C - m.r) / 2;
            v = -n.BL - (X.$ * C - m.$) / 2;
          }
          Z.Scl.v.val = 100 * C * (1 / n.Dc());
          Z.phase.v.Hrzn.v = Math.round(l / n.Dc());
          Z.phase.v.Vrtc.v = Math.round(v / n.Dc());
        }
      } else if (a.fillType == 5) {
        console.log("fill type Noise not supported yet");
      } else console.log("unknown fill type", a.fillType);
      if (f != null) {
        T.un(a, U.v);
        c.push({ e: f, K: U });
      }
    }
    return c;
  };
  jU.akh = function (j) {
    var q = jU,
      m = new hk(0, 0, 1, 1);
    j = j.slice(0);
    while (!0) {
      var n = !1;
      for (var y = 0; y < j.length - 1; y++) {
        var G = j[y],
          W = j[y + 1],
          k = null,
          T = G.contextSettings;
        if (
          G.fillType == 0 &&
          (T == null || (T.opacity == 1 && T.blendMode == 0)) &&
          G.color.alpha == 1
        ) {
          var b = "norm",
            c = 1,
            T = W.contextSettings;
          if (T) {
            c = T.opacity;
            b = kJ.l7(q.pg[T.blendMode]);
          }
          if (W.fillType == 0) {
            k = B.S(W);
            q.a9S(k.color, G.color, k.color, m, b, c);
          }
          if (W.fillType == 1) {
            k = B.S(W);
            var a = k.gradient.stops;
            for (var f = 0; f < a.length; f++)
              q.a9S(a[f].color, G.color, a[f].color, m, b, c);
          }
          if (k != null && k.contextSettings) {
            var T = k.contextSettings;
            T.opacity = 1;
            T.blendMode = 0;
          }
        }
        if (k != null) {
          j.splice(y, 0, k);
          n = !0;
          break;
        }
      }
      if (!n || j.length < 2) break;
    }
    return j;
  };
  jU.a9S = function (j, q, m, n, G, W) {
    var k = jU,
      T = B.j(4);
    k.aAD(j, T);
    var b = B.j(4);
    k.aAD(q, b);
    B.G.Jg(G, T, n, b, n, n, W);
    k.axJ(b, m);
  };
  jU.aAD = function (j, q) {
    q[0] = 255 * j.red;
    q[1] = 255 * j.green;
    q[2] = 255 * j.blue;
    q[3] = 255 * j.alpha;
  };
  jU.axJ = function (j, q) {
    q.red = j[0] / 255;
    q.green = j[1] / 255;
    q.blue = j[2] / 255;
    q.alpha = j[3] / 255;
  };
  jU.afV = function (j, q) {
    j = j.P();
    j.uZ = 24;
    j.tV("Mask by " + j.getName());
    q.U.push(j);
    j.add.lsct = hQ.WR;
    j.add.lyid = q.Na();
    delete j.add.lmfx;
    delete j.add.SoCo;
    delete j.add.GdFl;
    delete j.add.PtFl;
    delete j.add.iOpa;
    if (j.add.vmsk) j.add.vmsk.xo = !0;
    j.Pp();
    j.D5(q);
    if ((j.uZ & 16) == 16) j.uZ -= 16;
    if ((j.uZ & 2) == 2) j.uZ -= 2;
    j.hz = "pass";
    j.yA = 255;
  };
  jU.pg =
    "Nrml Drkn Mltp CBrn Lghn Scrn CDdg Ovrl SftL HrdL Dfrn Xclu H Strt Clr Lmns linearBurn linearDodge".split(
      " "
    );
  jU.aef = function (j, q, m, n) {
    m = m.P();
    m.BR();
    m.Tt = m.BL = 0;
    var G = m.Dc(),
      U = 0,
      Z = 0;
    m.scale(1 / G, 1 / G);
    var W = jU,
      k = JSON.parse(eu.oy[eu.order.indexOf("GrFl")]),
      T = k.Grad.v;
    T.Intr.v = 0;
    if (j == null) return k;
    var b = j.gradientType,
      c = W.Lw(j.from),
      a = W.Lw(j.to);
    c.offset(-0.5, -0.5);
    a.offset(-0.5, -0.5);
    c = m.uL(c);
    a = m.uL(a);
    var f = Math.atan2(-(a.y - c.y), a.x - c.x);
    k.Type.v.GrdT = ["Lnr", "Rdl", "Angl"][b];
    k.Scl.v.val = 100 * ea.gw(c, a);
    if (b == 0) {
      k.Angl.v.val = (180 / Math.PI) * f;
      k.Scl.v.val = 100 * ea.gw(c, a);
      U = (c.x + a.x) / 2;
      Z = (c.y + a.y) / 2;
    }
    if (b == 1) {
      k.Scl.v.val = 200 * ea.gw(c, a);
      U = c.x;
      Z = c.y;
    }
    if (b == 2) {
      k.Angl.v.val = (180 / Math.PI) * (f - Math.PI / 2);
    }
    var h = k.Ofst.v;
    h.Hrzn.v.val = U * 100;
    h.Vrtc.v.val = Z * 100;
    var u = [];
    for (var y = 0; y < j.stops.length; y++) {
      var i = j.stops[y],
        x = i.color;
      u.push([i.position, x ? [x.red, x.green, x.blue] : [0, 0, 0], x.alpha]);
    }
    B.MV.gB(u, T);
    return k;
  };
  jU.un = function (j, q) {
    var m = jU,
      n = 1,
      G = j.contextSettings;
    if (G != null) {
      q.Md.v.BlnM = m.pg[G.blendMode];
      n *= G.opacity;
    } else q.Md.v.BlnM = m.pg[0];
    q.enab.v = j.isEnabled;
    if (q.uglg != null) q.uglg.v = !1;
    if (j.color != null) n *= j.color.alpha;
    q.Opct.v.val = Math.round(n * 100);
  };
  jU.uQ = function (j) {
    return B.MV.Ia(
      j
        ? { o: j.red * 255, i: j.green * 255, X: j.blue * 255 }
        : { o: 0, i: 0, X: 0 }
    );
  };
  jU.mV = function (j, q) {
    var m = jU,
      n = [{ e: 6 }, { e: 8, all: 0 }];
    for (var G = 0; G < j.length; G++) {
      var W = j[G],
        k = W.booleanOperation,
        T = 0,
        b = W._class,
        h = !1;
      if (
        b == "group" ||
        b == "text" ||
        b == "symbolInstance" ||
        b == "slice"
      ) {
        console.log(b + " inside ShapeGroup");
        continue;
      }
      if (k == -1) T = 0;
      else if (k == 0) T = 1;
      else if (k == 1) T = 2;
      else if (k == 2) T = 3;
      else if (k == 3) T = 0;
      if (G == 0) T = 1;
      var c = jU.X7(W.frame),
        a = m.ae6(W, q),
        f = W.path ? W.path : W,
        U = [{ e: 0, length: 0, Np: T, uc: 2, xV: 0, yg: 0 }],
        Z = f.points;
      for (var y = 0; y < Z.length; y++) {
        var u = Z[y],
          i = m.Lw(u.curveTo),
          x = m.Lw(u.point),
          X = m.Lw(u.curveFrom);
        h = h || (u.hasCurveFrom && !X.Lg(x)) || (u.hasCurveTo && !i.Lg(x));
      }
      var $ = [];
      if (!h) {
        var H = [],
          aF = Z.length;
        if (aF == 0) continue;
        for (var y = 0; y < aF; y++) {
          $[y] = Z[y].cornerRadius;
          var u = m.Lw(Z[y].point);
          H.push(u.x, u.y);
        }
        a.scale(1 / c.r, 1 / c.$);
        a.BR();
        B.b.u(H, a, H);
        U = B.z.cn.yu(H, $).slice(2);
        U[0].Np = T;
      } else {
        var C = Z.length;
        U[0].length = C;
        for (var y = 0; y < C; y++) {
          var u = Z[y],
            l = u.curveMode,
            v = m.Lw(u.point);
          U[1 + y] = {
            e: l == 2 || l == 4 ? 1 : 2,
            kt: u.hasCurveTo ? m.Lw(u.curveTo) : v.P(),
            Ii: v,
            _$: u.hasCurveFrom ? m.Lw(u.curveFrom) : v.P(),
          };
        }
        a.scale(1 / c.r, 1 / c.$);
        a.BR();
        B.z.La(U, a);
        var $ = [];
        for (var y = 0; y < C; y++) {
          var u = Z[y],
            l = u.curveMode,
            K = u.cornerRadius;
          if (l == 1 && K != 0) $.push(K);
          else $.push(0);
        }
      }
      if (!f.isClosed) for (var y = 0; y < U.length; y++) U[y].e += 3;
      n = n.concat(U);
      var S = m.Y5(W);
      if (a.X == 0 && a.ra == 0) {
        var o = a.Tt,
          V = a.BL,
          P = o + a.Sd,
          z = V + a.Jy,
          E = [o, V, P, z];
      }
    }
    return n;
  };
  jU.ae6 = function (j, q) {
    var m = q.P(),
      n = j.frame ? jU.X7(j.frame) : null;
    if (n) m.translate(-n.x - n.r / 2, -n.y - n.$ / 2);
    if (j.isFlippedHorizontal) m.scale(-1, 1);
    if (j.isFlippedVertical) m.scale(1, -1);
    m.rotate(-j.rotation * (Math.PI / 180));
    if (n) m.translate(n.r / 2, n.$ / 2);
    return m;
  };
  jU.Lw = function (j) {
    j = j.slice(1, j.length - 1).split(",");
    return new ea(parseFloat(j[0]), parseFloat(j[1]));
  };
  jU.X7 = function (j) {
    return new hk(j.x, j.y, j.width, j.height);
  };
  jU.aKd = function (j) {
    return {
      _class: "rect",
      constrainProportions: !1,
      x: j.x,
      y: j.y,
      width: j.r,
      height: j.$,
    };
  };
  function ek() {}
  ek.VB = function (j, q) {
    var m = Date.now(),
      n = ek,
      G = UZIP.parse(j),
      W = JSON.parse(M.K6(G.manifest)),
      k = JSON.parse(
        M.K6(G["resources/graphics/graphicContent.agc"])
      ).resources,
      T = [],
      b = [],
      c = W.children;
    for (var y = 0; y < c.length; y++) {
      var a = c[y];
      if (a.name == "artwork") {
        var f = a.children;
        for (var U = 0; U < f.length; U++) {
          var Z = f[U],
            h = JSON.parse(
              M.K6(G["artwork/" + Z.path + "/graphics/graphicContent.agc"])
            ),
            u = h.children;
          if (u.length == 0) {
          } else if (u.length == 1) {
            if (Z["uxdesign#bounds"]) {
              Z._node = u[0];
              T.push(Z);
            }
          } else {
            var i = u[0],
              x = i.transform,
              X = i.shape;
            if (X == null) X = { x: 0, y: 0, width: 1e3, height: 1e3 };
            if (X.type == "path") {
              var $ = B.b.YU(Typr.U.SVGToPath(X.path).crds);
              X = { x: $.x, y: $.y, width: $.r, height: $.$ };
            }
            X = B.S(X);
            if (x) {
              X.x += x.tx;
              X.y += x.ty;
            }
            Z["uxdesign#bounds"] = X;
            Z._node = { type: "artboard", artboard: { children: u } };
            b.push(Z);
          }
        }
      }
    }
    if (T.length == 0) T = b;
    var H = [],
      C = new hk();
    for (var y = 0; y < T.length; y++) {
      var Z = T[y],
        l = jU.X7(Z["uxdesign#bounds"]);
      H.push(l);
      C = C.vd(l);
    }
    var v = jU.ud(C, 8192 * 8192);
    q.c4 = !0;
    q.r = Math.round(C.r / v);
    q.$ = Math.round(C.$ / v);
    q.buffer = B.j(q.r * q.$ * 4);
    q.cw(T.length);
    var K = new k$(v, 0, 0, v, C.x, C.y);
    q.iE = {};
    for (var y = 0; y < T.length; y++) {
      var Z = T[y],
        l = jU.X7(Z["uxdesign#bounds"]),
        S = Z._node,
        o = K.P(),
        V = l.P(),
        P = o.Dc();
      o.translate(-l.x, -l.y);
      V.x = -Math.floor(o.Tt / P);
      V.y = -Math.floor(o.BL / P);
      V.r = Math.floor(V.r / P);
      V.$ = Math.floor(V.$ / P);
      o.translate(l.x, l.y);
      ek.fb(S, q, o, k, G, V);
      var z = q.U[q.U.length - 1];
      z.tV(Z.name);
      z.KP(V);
      if (y != T.length - 1) z.add.lsct = hQ.z$;
    }
    delete q.iE;
  };
  ek.Wx = function (j) {
    if (j == null) return new k$();
    return new k$(j.a, j.b, j.c, j.d, j.tx, j.ty);
  };
  ek.fb = function (j, q, m, n, G, W) {
    var k = ek,
      T = j.type,
      b = j[T],
      c = j.style,
      a = k.Wx(j.transform),
      h,
      u = "none",
      i,
      x = "none",
      X,
      $;
    a.BR();
    var f = m.P();
    f.concat(a);
    var U = q.dj(),
      Z = j.name;
    U.tV(Z ? Z.slice(0, 250) : "Layer");
    if (j.visible != null) U.xg(j.visible);
    if (c) {
      h = c.stroke;
      u = h ? h.type : "none";
      i = c.fill;
      x = i ? i.type : "none";
      if (i && Object.keys(i).length == 1) x = "none";
      X = c.filters;
      $ = c.clipPath;
      if ($ && n.clipPaths[$.ref]) $ = n.clipPaths[$.ref].children;
      else $ = null;
      if (c.opacity != null) U.yA = Math.round(255 * c.opacity);
      if (x == "solid" && i.color.alpha)
        U.yA = Math.round(U.yA * i.color.alpha);
      if (X) {
        U.add.lmfx = k.aEc(X);
        for (var y = 0; y < X.length; y++)
          if (X[y].type == "uxdesign#blur") {
            var H = X[y],
              C = H.params,
              l = C.brightnessAmount;
            if (l == null) l = 0;
            l = Math.abs(l / 100);
            if ((H.visible == null || H.visible == !0) && C.backgroundEffect)
              U.yA = Math.round(U.yA * (l + (1 - l) * C.fillOpacity));
          }
      }
      if (x == "pattern" && i.pattern.meta.ux.uid == "") x = "none";
    }
    if ($ == null && j.meta && j.meta.ux && j.meta.ux.clipPathResources)
      $ = j.meta.ux.clipPathResources.children;
    if (T == "artboard" || T == "group") {
      if ($) {
        var v = $[0],
          K = v.shape,
          S = K != null && K.type == "rect" && K.width * K.height > 4e6;
        if (v.type != "text" && !S) {
          if (K) {
            var a = k.Wx(v.transform);
            a.BR();
            var o = f.P();
            o.concat(a);
            U.add.vmsk = new R.tm();
            U.add.vmsk.D = k.mV(K);
            o = o.P();
            o.BR();
            B.z.La(U.add.vmsk.D, o);
            U.Pp();
            U.D5(q);
          }
        } else if (!S) alert("Clipping by text has been ignored");
      }
      U.add.lsct = hQ.WR;
      U.hz = "pass";
      U.uZ = 24;
      if (j.visible != null) U.xg(j.visible);
      q.U.push(q.to());
      var P = b.children,
        z = i;
      if (z) z = z.color;
      if (z) z = z.value;
      if (i) {
        if (T == "artboard" && x == "solid") {
          U.KP(new hk(0, 0, 10, 10));
          U.add.artb.Clr = {
            t: "Objc",
            v: B.MV.Ia({ o: z.r, i: z.g, X: z.b }),
          };
          U.add.artb.artboardBackgroundType = { t: "long", v: 4 };
        } else {
          var E = q.dj();
          E.tV("BACKGROUND");
          E.uZ |= 16;
          E.add.vstk = eu.rS.i4();
          E.add.vmsk = new R.tm();
          E.add.vmsk.D = k.mV({
            type: "rect",
            x: W.x,
            y: W.y,
            width: W.r,
            height: W.$,
          });
          k.zX(i, x, f, W, W, E, q, n, G);
          E.Pp();
          E.D5(q);
          q.U.push(E);
        }
      }
      for (var y = 0; y < P.length; y++) {
        ek.fb(P[y], q, f, n, G, W);
      }
    } else if (
      T == "shape" &&
      ((b.type == "rect" && (b.r == null || b.r == 0)) ||
        (b.type == "path" && UDOC.G.isBox(Typr.U.SVGToPath(b.path)))) &&
      x == "pattern" &&
      (Math.abs(b.width / b.height - i.pattern.width / i.pattern.height) <
        0.01 ||
        c.fill.pattern.meta.ux.scaleBehavior == "fill")
    ) {
      var A = i.pattern,
        N = A.meta.ux,
        Q = N.uid,
        e = G["resources/" + Q];
      if (e == null) {
        console.log(A);
        return;
      }
      var Y = q.Pi(e, U.getName(), 0, 0);
      Y.uZ = U.uZ;
      Y.yA = U.yA;
      U = Y;
      var d = B.z.zZ(k.mV(b), null),
        I = B.b._c(new hk(0, 0, A.width, A.height)).L,
        O = new k$();
      O.scale(A.width / d.r, A.height / d.$);
      if (N.offsetX) O.translate(-N.offsetX * A.width, 0);
      if (N.offsetY) O.translate(0, -N.offsetY * A.height);
      f.concat(O);
      f.BR();
      B.b.u(I, f, I);
      U.add.SoLd.Trnf = L.Dq.be(I);
      U.add.SoLd.nonAffineTransform = L.Dq.be(I);
      U.yZ(q, !1);
    } else if (T == "shape") {
      U.uZ |= 16;
      U.add.vstk = eu.rS.i4();
      U.add.vmsk = new R.tm();
      U.add.vmsk.D = k.mV(b);
      var d = B.z.zZ(U.add.vmsk.D, null),
        o = f.P();
      o.BR();
      B.z.La(U.add.vmsk.D, o);
      var s = B.z.zZ(U.add.vmsk.D, null);
      if (u == "none") {
      } else {
        var p = h.color.value,
          F,
          g;
        F = "SoFi";
        var w = JSON.parse(eu.oy[eu.order.indexOf("SoFi")]);
        g = { t: "Objc", v: w };
        g.v.Clr.v = B.MV.Ia({ o: p.r, i: p.g, X: p.b });
        var r = h.align,
          eQ = h.cap;
        if (r == null) r = "center";
        var t = U.add.vstk;
        t.strokeEnabled.v = !0;
        t.strokeStyleLineWidth.v.val = h.width;
        if (r)
          t.strokeStyleLineAlignment.v.strokeStyleLineAlignment =
            eu.rS.Jr[["inside", "center", "outside"].indexOf(r)];
        if (eQ)
          t.strokeStyleLineCapType.v.strokeStyleLineCapType =
            eu.rS.u7[["butt", "round", "square"].indexOf(eQ)];
        var dq = ["SoFi", "GrFl", "patternFill"].indexOf(F),
          D = [eu.dS, eu.GB, eu.Pa][dq];
        t.strokeStyleContent.v = { classID: eu.rS.HF[0] };
        var ha = (t.strokeStyleContent.v = { classID: eu.rS.HF[dq] });
        for (var y = 0; y < D.length; y++) ha[D[y]] = g.v[D[y]];
      }
      if (X)
        for (var y = 0; y < X.length; y++)
          if (X[y].type == "uxdesign#blur" && X[y].visible) {
            var am = X[y];
            U.add.vmsk.LH = am.params.blurAmount;
          }
      k.zX(i, x, f, d, s, U, q, n, G);
      U.Pp();
      U.D5(q);
    } else if (T == "text" && j.text) {
      var k4 = j.text,
        aA = k4.frame,
        ex = c.font,
        ac = c.textAttributes,
        a = f.P(),
        fM = 0;
      a.BR();
      U.add.lnsr = "rend";
      U.add.TySh = al.wD(0, 0);
      U.add.TySh.AF = new hk(0, 0, 100, 100);
      U.add.TySh.u = a;
      var eJ = U.add.TySh.s3,
        h$ = k4.rawText.replace(/\r/g, "\n").replace(/\u000b/g, "\n");
      al.Fk(eJ, 0, h$);
      if (h$ != "") {
        var da = al.vJ(eJ, 0, 1),
          bb = ex.postscriptName;
        if (bb == null) bb = ex.family;
        al.gk(da, bb);
        da.K2.FontSize = Math.round(ex.size);
        if (x == "solid") {
          var p = i.color.value;
          da.K2.FillColor = {
            Type: 1,
            Values: [1, p.r / 255, p.g / 255, p.b / 255],
          };
        }
        if (ac) {
          if (ac.paragraphAlign)
            da.Th.Justification = ["left", "right", "center"].indexOf(
              ac.paragraphAlign
            );
          if (ac.letterSpacing) da.K2.Tracking = Math.round(ac.letterSpacing);
          if (ac.lineHeight) {
            da.K2.AutoLeading = !1;
            da.K2.Leading = Math.round(ac.lineHeight);
          }
        }
        al.jD(eJ, 0, h$.length, da);
      }
      var gb = j.meta.ux.rangedStyles;
      if (gb)
        for (var y = 0; y < gb.length; y++) {
          var b = gb[y],
            kS = Math.min(b.length, h$.length - fM);
          if (y == gb.length - 1) kS = h$.length - fM;
          var da = al.vJ(eJ, fM, fM + kS),
            bb = b.postscriptName;
          if (bb == null) bb = b.family;
          if (bb != null) al.gk(da, bb);
          var cY = b.textScript,
            cS = b.underline,
            k3 = b.fontSize,
            H = b.fill,
            di = b.textTransform;
          if (cY && cY != "none")
            da.K2.FontBaseline = cY == "superscript" ? 1 : 2;
          if (cS != null) da.K2.Underline = cS;
          if (k3 != null) da.K2.FontSize = Math.round(k3);
          if (di != null) da.K2.FontCaps = di == "uppercase" ? 2 : 0;
          if (di == "lowercase") {
            al.Sp(eJ, fM, fM + kS);
            al.Fk(eJ, fM, h$.slice(fM, fM + kS).toLowerCase());
          }
          if (H != null) {
            var a7 = H.value;
            da.K2.FillColor = {
              Type: 1,
              Values: [
                1,
                ((a7 >>> 16) & 255) / 255,
                ((a7 >>> 8) & 255) / 255,
                ((a7 >>> 0) & 255) / 255,
              ],
            };
          }
          al.jD(eJ, fM, fM + kS, da);
          fM += kS;
        }
      if (aA.type == "area" || aA.type == "autoHeight") {
        var b0 = aA.width,
          e1 = aA.height;
        al.cj(eJ, 1);
        al.ms(eJ, [0, 0, b0, e1 != null ? e1 : b0 * 2]);
      }
    } else if (T == "syncRef") {
      var l2 = j.syncSourceGuid,
        kL = n.meta.ux.symbols,
        es = k.B7(kL, l2);
      if (es) {
        var kR = f.P();
        kR.concat(k.Wx(es.transform));
        ek.fb(es, q, kR, n, G, W);
      }
      return;
    } else console.log(T, j);
    q.U.push(U);
  };
  ek.B7 = function (j, q) {
    for (var y = 0; y < j.length; y++) {
      var m = j[y],
        n = m.group;
      if (m.id == q) return m;
      if (n) {
        var G = ek.B7(n.children, q);
        if (G) return G;
      }
    }
    return null;
  };
  ek.mV = function (j) {
    var q = j.type,
      m = [{ e: 6 }, { e: 8, all: 0 }];
    if (q == "rect") {
      var n = j.r,
        G = j.x,
        W = j.y,
        k = j.width,
        T = j.height;
      m = B.z.cn.Rect(G, W, k, T, n ? n : 0);
    } else if (q == "circle") {
      var n = j.r;
      m = B.z.cn.SQ(j.cx - n, j.cy - n, 2 * n, 2 * n);
    } else if (q == "ellipse") {
      var b = j.rx,
        c = j.ry;
      m = B.z.cn.SQ(j.cx - b, j.cy - c, 2 * b, 2 * c);
    } else if ((q == "path" || q == "compound") && j.path) {
      var a = Typr.U.SVGToPath(j.path);
      m = B.b.LZ({ RC: a.cmds, L: a.crds }, !1);
    } else if (q == "line") {
      var f = j.x1,
        U = j.x2,
        Z = j.y1,
        h = j.y2;
      m = B.z.cn.yu([f, Z, U, h], 0, !0);
    } else if (q == "polygon") {
      var u = j.points,
        i = [];
      for (var y = 0; y < u.length; y++) i.push(u[y].x, u[y].y);
      m = m.concat(B.z.cn.yu(i, 0, !1).slice(2));
    } else console.log(q, j);
    return m;
  };
  ek.aEc = function (j) {
    var q = JSON.parse(eu.default);
    for (var y = 0; y < eu.order.length; y++)
      q[eu.C$[y]] = { t: "VlLs", v: [] };
    for (var y = 0; y < j.length; y++) {
      var m = j[y],
        n = m.type,
        G = m.params,
        W = m.visible;
      if (n == "dropShadow") {
        var k = eu.C$[eu.order.indexOf("DrSh")],
          T = JSON.parse(eu.oy[eu.order.indexOf("DrSh")]);
        q[k].v.unshift({ t: "Objc", v: T });
        var b = G.dropShadows;
        if (b.length != 1) throw "e";
        var c = b[0],
          a = c.color,
          f = a.value,
          U = c.dx,
          Z = c.dy;
        T.Clr.v = B.MV.Ia({ o: f.r, i: f.g, X: f.b });
        T.Opct.v.val = Math.round((a.alpha != null ? a.alpha : 1) * 100);
        T.uglg.v = !1;
        T.enab.v = W != null ? W : !0;
        T.lagl.v.val = Math.round((180 / Math.PI) * Math.atan2(Z, -U));
        T.Dstn.v.val = Math.round(Math.sqrt(U * U + Z * Z));
        T.blur.v.val = Math.round(c.r * 2.3);
      }
    }
    return q;
  };
  ek.zX = function (j, q, m, n, G, W, k, T, b) {
    var c = ek;
    W.add.vstk.fillEnabled.v = q != "none";
    if (q == "none") {
      W.add.SoCo = {
        classID: "null",
        Clr: { t: "Objc", v: B.MV.Ia({ o: 0, i: 0, X: 0 }) },
      };
    } else {
      var a, f, U;
      if (q == "solid") {
        var Z = j.color.value;
        a = "SoCo";
        f = eu.dS;
        var h = JSON.parse(eu.oy[eu.order.indexOf("SoFi")]);
        U = { t: "Objc", v: h };
        U.v.Clr.v = B.MV.Ia({ o: Z.r, i: Z.g, X: Z.b });
      } else if (q == "gradient") {
        a = "GdFl";
        f = eu.GB;
        var h = JSON.parse(eu.oy[eu.order.indexOf("GrFl")]),
          u = h.Grad.v,
          H,
          C,
          l;
        u.Intr.v = 0;
        var i = j[q],
          x = i.ref ? T.gradients[i.ref] : i.meta.ux.gradientResources,
          X = ["linear", "radial", "angular"].indexOf(x.type),
          $ = x.stops;
        h.Type.v.GrdT = ["Lnr", "Rdl", "Angl"][X];
        if (X == 0) {
          var H = new ea(i.x1, i.y1),
            C = new ea(i.x2, i.y2);
          H.x = C.x + 0.5 * (H.x - C.x);
          H.y = C.y + 0.5 * (H.y - C.y);
        } else {
          var H = new ea(i.cx, i.cy),
            C = new ea(i.cx + i.r, i.cy);
        }
        l = G;
        if (i.units == "objectBoundingBox") {
          var v = new k$(n.r, 0, 0, n.$, n.x, n.y);
          H = v.uL(H);
          C = v.uL(C);
        }
        var v = c.Wx(i.transform);
        H = v.uL(H);
        C = v.uL(C);
        v = m.P();
        v.BR();
        H = v.uL(H);
        C = v.uL(C);
        B.MV.UO(H, C, l, h);
        var K = [];
        for (var y = 0; y < $.length; y++) {
          var S = $[y],
            o = S.color,
            Z = o.value,
            V = o.alpha;
          if (V == null) V = 1;
          K.push([S.offset, [Z.r / 255, Z.g / 255, Z.b / 255], V]);
        }
        B.MV.gB(K, u);
        U = { t: "Objc", v: h };
      } else if (q == "pattern") {
        a = "PtFl";
        f = eu.Pa;
        var h = JSON.parse(eu.oy[eu.order.indexOf("patternFill")]),
          I;
        U = { t: "Objc", v: h };
        var P = j[q],
          z = P.meta.ux,
          E = z.uid,
          A = b["resources/" + E].buffer,
          N = z.flipX,
          Q = z.flipY,
          e = E + N + Q,
          Y = gh.Qa(A);
        if (k.iE[e]) I = k.iE[e];
        else {
          var O = new hk(0, 0, P.width, P.height),
            s;
          if (O.jG() || Y == null) {
            O = new hk(0, 0, 1, 1);
            s = new ArrayBuffer(4);
          } else {
            var p = gh.lj(Y);
            if (p.k5) {
              var F = new fb();
              p.LN(A, F);
              s = F.ht().buffer;
            } else {
              try {
                var g = p.LN(A)[0];
                s = g.data;
                O = g.Iu;
              } catch (gn) {
                s = new ArrayBuffer(O.C() * 4);
              }
            }
          }
          I = {};
          I.id = fb.Rh() + "-d71c-11e5-b1ae-a548a96e5f9f";
          I.name = "someImage";
          I.Og = [new Uint8Array(s), O];
          if (N) B.B.cq(I.Og[0].slice(0), I.Og[0], O.r, O.$);
          if (Q) B.B.aCE(I.Og[0].slice(0), I.Og[0], O.r, O.$);
          k.Vq(I);
          k.iE[e] = I;
        }
        var w = m.P();
        w.BR();
        w.translate(n.x, n.y);
        var r = n.r,
          eQ = n.$,
          t = I.Og[1].r,
          dq = I.Og[1].$,
          D = Math.max(r / t, eQ / dq);
        if (z.scale) D *= z.scale;
        var ha = new k$();
        ha.translate(-t / 2, -dq / 2);
        ha.scale(1 / t, 1 / dq);
        if (z.offsetX != null) ha.translate(z.offsetX, z.offsetY);
        ha.scale(t, dq);
        ha.scale(D, D);
        ha.translate(r / 2, eQ / 2);
        ha.concat(w);
        dS.ao0(I, h, 0, 0, 1e3, ha);
      } else console.log(q);
      if (a != null) {
        W.add[a] = { classID: "null" };
        for (var y = 0; y < f.length; y++) {
          var am = f[y];
          W.add[a][am] = U.v[am];
        }
      }
    }
  };
  function b4() {}
  b4.VB = (function () {
    var j = M.dq,
      q = M.YZ,
      m = M.d9;
    function n(X, $) {
      return M.IH(X, $, 4).split("").reverse().join("");
    }
    function G(X, $) {
      return M.IH(X, $, 4);
    }
    function W(X, $) {
      var H = new Uint8Array(X);
      if (q(H, 0) == 759775571) k(X, $);
      else T(X, $);
    }
    function k(X, $) {
      var H = new Uint8Array(X),
        C = 0,
        l = M.IH(H, C, 16);
      C += 16;
      if (l != "SAI-CANVAS-TYPE0") throw "e";
      var v = q(H, C);
      C += 4;
      var K = ($.r = q(H, C));
      C += 4;
      var S = ($.$ = q(H, C));
      C += 4;
      var o = q(H, C);
      C += 4;
      var V = q(H, C),
        P = q(H, C + 4);
      C += 8;
      console.log(V, P);
      for (var y = 0; y < 4; y++) if (q(H, C + y * 4) != 0) throw "e";
      C += 16;
      if (q(H, C) != 4286611584) throw "e";
      C += 4;
      var z = G(H, C);
      C += 4;
      if (z != "norm" && z != "ver1") throw z;
      var E = new Array(V),
        A = {};
      for (var N = 0; N < V; N++) {
        var Q = G(H, C);
        C += 4;
        var l = q(H, C),
          e = q(H, C + 4);
        C += 8;
        if (q(H, C) != 0) throw "e";
        C += 4;
        var Y = q(H, C + 8);
        if (N == V - 1) Y = H.length;
        if (Q == "layr") {
          var d = $.dj();
          $.U.push(d);
          if (G(H, e) != Q) throw "e";
          e += 4;
          var I = (d.add.lyid = q(H, e));
          e += 4;
          if (I != l) throw "e";
          if (q(H, e) != 0 && q(H, e + 4) != 0) throw "e";
          e += 8;
          var O = G(H, e);
          e += 4;
          var s = a(H, e);
          e += 16;
          var p = q(H, e),
            F = q(H, e + 4);
          e += 8;
          var g = G(H, e);
          e += 4;
          d.yA = Math.round((255 * q(H, e)) / 100);
          e += 4;
          var w = q(H, e);
          e += 4;
          A[l] = [d, F];
          while (!0) {
            if (q(H, e) == 0) break;
            var Q = G(H, e);
            e += 4;
            var r = q(H, e);
            e += 4;
            if (Q == "name") d.tV(M.a5(H, e + 2, m(H, e)));
            else console.log(Q, r);
            e += r;
          }
          if (e + 4 != Y) throw "e";
        } else if (Q == "lpix" || Q == "intg") {
          var eQ = G(H, e),
            t,
            dq,
            F,
            am = 0;
          e += 4;
          if (eQ != "dpcm" && eQ != "\0\0\0\0") throw eQ;
          if (Q == "intg") {
            dq = new hk(0, 0, $.r, $.$);
            t = $.buffer = B.j(dq.C() * 4);
            F = Math.ceil($.r / 256) * Math.ceil($.$ / 256);
          } else {
            var D = A[l],
              d = D[0];
            F = D[1];
            dq = d.H = new hk(0, 0, 256, 256);
            t = d.buffer = B.j(dq.C() * 4);
          }
          t.fill(255);
          var ha = B.j(256 * 256),
            k4 = e + F * 4;
          for (var y = 0; y < F; y++) {
            var aA = q(H, e);
            e += 4;
            if (y == 0) aW.tO(H, k4 + am + 4, aA, ha, 0);
            am += aA;
          }
          if (Q == "lpix") B.QZ(ha, t);
        }
      }
    }
    function T(X, $) {
      Z(X);
      var H = f(new Uint8Array(X), 2, 0),
        C = H.canvas;
      $.r = q(C, 4);
      $.$ = q(C, 8);
      $.zv = q(C, 22);
      var l = H.layers,
        v = [],
        K = {};
      for (var S in l) {
        var o = l[S],
          V = 0,
          P = q(o, V);
        V += 4;
        var z = $.dj(),
          E = { PF: z, r_: P == 8 ? [] : null },
          A = (z.add.lyid = q(o, V));
        V += 4;
        K[A] = E;
        var N = (z.H = a(o, V));
        V += 16;
        z.H.offset(-8, -8);
        var aF = q(o, V);
        if (aF != 0 && aF != 1) throw aF;
        V += 4;
        z.yA = Math.round((255 * o[V]) / 100);
        V++;
        z.xg(o[V] == 1);
        V++;
        z.buffer = B.j(N.C() * 4);
        var Q = o[V];
        V++;
        if (P != 8) z.Yx = o[V] == 1;
        V++;
        if (o[V] != 0) throw "e";
        V++;
        var e = n(o, V);
        V += 4;
        var Y = { "add ": "lddg", "sub ": "lbrn", adsb: "lLit", cbin: "norm" }[
          e
        ];
        z.hz = Y ? Y : e;
        var d = {};
        V = c(o, V, d);
        z.tV(d.name);
        var I = d.pfid;
        if (I != null) K[I].r_.push(E);
        else v.push(E);
        if (P == 8) {
          z.add.lsct = d.fopn ? hQ.WR : hQ.z$;
          z.hz = "pass";
          z.uZ = 24;
          continue;
        }
        var O = Math.ceil(N.r / 32),
          s = Math.ceil(N.$ / 32),
          p = V;
        V += O * s;
        var F = new hk(0, 0, 32, 32),
          g = B.j(F.C() * 4),
          w = B.j(F.C()),
          r = N.P();
        r.x = r.y = 0;
        for (var eQ = 0; eQ < s; eQ++) {
          for (var t = 0; t < O; t++) {
            if (o[p + eQ * O + t] == 1) {
              for (var dq = 0; dq < 8; dq++) {
                var D = m(o, V);
                V += 2;
                aW.tO(o, V, D, w, 0);
                V += D;
                if (dq < 4) B.ln(w, g, dq == 3 ? 3 : 2 - dq);
              }
              F.x = t * 32;
              F.y = eQ * 32;
              B.B6(g);
              B.M4(g, F, z.buffer, r);
            }
          }
        }
      }
      b(v, $);
    }
    function b(X, $) {
      for (var y = 0; y < X.length; y++) {
        var H = X[y];
        if (H.r_) {
          $.U.push($.to());
          b(H.r_, $);
        }
        $.U.push(H.PF);
      }
    }
    function c(X, $, H) {
      while ($ < X.length) {
        var C = n(X, $),
          v = null;
        $ += 4;
        if (q(X, $ - 4) == 0) break;
        var l = q(X, $);
        $ += 4;
        if (C == "name") {
          var K = $;
          while (X[K] != 0) K++;
          v = M.IH(X, $, K - $);
        } else if (C == "lorg") v = [j(X, $), j(X, $ + 4)];
        else if (C == "pfid") v = q(X, $);
        else if (C == "fopn") v = X[$] == 1;
        else v = X.slice($, $ + l);
        H[C] = v;
        $ += l;
      }
      return $;
    }
    function a(X, $) {
      return new hk(j(X, $), j(X, $ + 4), j(X, $ + 8), j(X, $ + 12));
    }
    function f(X, $, H) {
      var C = new Uint8Array(X.buffer, $ * 4096, 4096),
        l = {},
        q = M.YZ;
      for (var v = 0; v < 64; v++) {
        var K = v * 64,
          S = q(C, K);
        K += 4;
        if (S == 0) continue;
        var o = K;
        while (C[o] != 0) o++;
        var P = M.IH(C, K, o - K);
        K += 32;
        var z = C[K + 2];
        K += 4;
        var E = q(C, K);
        K += 4;
        var A = q(C, K);
        K += 4;
        K += 8;
        if (z == 16) l[P] = f(X, E, H + 1);
        else l[P] = U(X, E, A, H + 1);
      }
      return l;
    }
    function U(X, $, H, C) {
      var l = new Uint8Array(H),
        v = 0;
      while (v < H) {
        var K = new Uint8Array(X.buffer, $ * 4096, Math.min(4096, H - v));
        l.set(K, v);
        v += 4096;
        var S = $ & 511;
        $ = q(X, ($ - S) * 4096 + S * 8 + 4);
      }
      return l;
    }
    function Z(X) {
      var $ = X.byteLength >>> 12,
        H = null;
      for (var C = 0; C < $; C++) {
        var l = C & 511,
          v = new Uint32Array(X, C * 4096, 1024);
        if (l == 0) {
          h(C >>> 9, v);
          H = v;
        } else {
          u(H[l * 2], v);
        }
      }
    }
    function h(X, $) {
      for (var y = 0; y < 1024; y++) {
        var H = $[y],
          C = H ^ i(X);
        $[y] = (C << 16) | (C >>> 16);
        X = H;
      }
    }
    function u(X, $) {
      for (var y = 0; y < 1024; y++) {
        var H = $[y];
        $[y] = H - i(X);
        X = H;
      }
    }
    function i(X) {
      return (
        X ^
        (x[(X >> 24) & 255] +
          x[(X >> 16) & 255] +
          x[(X >> 8) & 255] +
          x[X & 255])
      );
    }
    var x = [
      2568213150, 2213907773, 3502118182, 2252615351, 2126945275, 2312593252,
      4216435257, 4278811734, 2718363422, 2537383565, 3280172813, 481610987,
      922161291, 1077111757, 2228298685, 2951699955, 2419222343, 3422529757,
      632899331, 3620054202, 3825866656, 3940214514, 1802732112, 1995240010,
      1864845004, 2616811044, 516581573, 3877394729, 2014831980, 798606449,
      962212537, 1631814467, 1581141896, 2158572332, 410633887, 2047071060,
      317232928, 4185932942, 56898934, 2520522107, 3152871894, 3306333873,
      1372277035, 1153097417, 3000323009, 1316759699, 355584419, 1134767269,
      1437751943, 1893333625, 4015737571, 2330457237, 2453308677, 496133388,
      3377109596, 668252948, 326281719, 203007998, 1694112339, 4053986157,
      2683015439, 1289817166, 545412609, 2113706180, 2688993288, 2391861182,
      1612571479, 4083217276, 13463415, 3429546452, 617369208, 2870873084,
      1787544965, 4252019696, 3567735393, 448747572, 1172110871, 1600643382,
      2492455189, 1705877237, 2175475945, 3547246402, 259999175, 464417497,
      3188812486, 3747132629, 1057723918, 3261153176, 2959472816, 1650063733,
      3298487940, 695306595, 191731997, 164592183, 1764388344, 1740016386,
      772856770, 1815406908, 2823508129, 2893004987, 1554389068, 887382403,
      1119058345, 2038971062, 141887777, 900672281, 4155148394, 1240629715,
      2708897881, 341216509, 2335581686, 1041968541, 4128117966, 290924298,
      3680272051, 1938426618, 432163045, 1494007138, 2067251986, 4227903816,
      3624455943, 3602717826, 3176198616, 2447287224, 4203131712, 4125043328,
      2591812206, 388020465, 3985941867, 3204628008, 222404520, 121327036,
      2191405380, 43992033, 1910953247, 2839027465, 1479570912, 3818444681,
      4041412870, 1963409077, 1459914302, 1861289019, 3158343475, 2377972517,
      2288815906, 1525996922, 753584693, 2412341724, 2646136500, 3328105519,
      3859780374, 176443802, 975781905, 3706914367, 1096947235, 579647323,
      686412134, 2925730687, 114868839, 3664329876, 1420159072, 2082566388,
      4074935499, 1534566649, 3105170086, 3964966144, 282949799, 941876312,
      2010342234, 26095721, 3761885269, 3586343359, 2619605226, 2243994065,
      1711643782, 68615962, 3799909832, 2979810349, 4266521999, 3538996778,
      853545920, 4007016407, 3925787112, 2760445386, 4095214355, 1922134924,
      3786429346, 2550212222, 765549531, 2915359311, 3482702964, 3223738241,
      522349805, 2806458706, 1012859507, 3243424360, 3714511003, 2479353295,
      1326740484, 831734365, 649426570, 241711918, 2502942512, 711700038,
      2740294256, 3078740119, 3947809617, 3729340749, 1212113564, 559121502,
      3020776674, 1205538512, 808291915, 1274548831, 735228076, 1036531436,
      3347519845, 3058457822, 2661858343, 3515167888, 994241647, 1671757201,
      2854788376, 1294671433, 3097518253, 3052849049, 1830780188, 3129846502,
      3843690435, 3645411559, 377353938, 2275134785, 1352051739, 95204826,
      928851182, 2133767850, 2771777336, 3402673424, 4165299770, 603804818,
      3010745650, 1405198962, 1184759007, 3902259069, 2797331118, 1758345391,
      1568161035, 1380917732, 1243970353, 3464103858, 1445781573, 867633316,
      2364443375, 3371921919, 1961177003, 3450963862,
    ];
    return W;
  })();
  var hY = (function () {
    function j(x) {
      return x.tagName ? x.tagName.split(":").pop() : null;
    }
    function q(x, X, $) {
      if ($ && $[0] == null) $ = null;
      x = new Uint8Array(x);
      var H,
        A = 1;
      if (x[0] == 255 && x[1] == 254) H = M.a5(x, 2, (x.length >>> 1) - 1);
      else H = M.K6(x, 0, x.length);
      var C = new DOMParser(),
        l = C.parseFromString(H, "image/svg+xml"),
        v = l.getElementsByTagName("style")[0];
      if (v) v = Typr.U.SVG.cssMap(v.textContent);
      else v = {};
      var K = l.firstChild;
      while (j(K) != "svg") K = K.nextSibling;
      var S = new hk(0, 0, 100, 100),
        o = K.getAttribute("viewBox"),
        V = K.getAttribute("width"),
        P = K.getAttribute("height"),
        z = V != null ? parseFloat(V) : parseFloat(P),
        E = P != null ? parseFloat(P) : parseFloat(V);
      if (V && V.endsWith("ex")) z *= 13;
      if (P && P.endsWith("ex")) E *= 13;
      if (o) {
        var N = m(o);
        S.x = N[0];
        S.y = N[1];
        S.r = N[2];
        S.$ = N[3];
        if (V != null) {
          var Q = N[2] / N[3],
            e = z / E;
          if (e > Q) {
            var Y = N[3] * e - S.r;
            S.x -= Y / 2;
            S.r += Y;
          }
          if (e < Q) {
            var d = N[2] / e - S.$;
            S.y -= d / 2;
            S.$ += d;
          }
        }
        if (z != null && !isNaN(z)) A = z / N[2];
      } else if (V != null || P != null) {
        S.r = z;
        S.$ = E;
      }
      if (ei == 0) S = B.b.mE(S);
      while (
        $ &&
        Math.max(S.r * (A * 2), S.$ * (A * 2)) <= Math.max($[0], $[1])
      )
        A *= 2;
      while ($ == null && Math.max(S.r, S.$) * A > 8192) A *= 0.5;
      X.c4 = !0;
      X.r = S.r * A;
      X.$ = Math.abs(S.$ * A);
      if (ei == 0) {
        X.r = Math.round(X.r);
        X.$ = Math.round(X.$);
      }
      var I = new k$(A, 0, 0, A, -S.x * A, -S.y * A),
        O = { yL: U(K), aBM: v, S2: 0 };
      n(l, K.children, X, I, O, new k$(), 0);
      if (X.U.length == 0) {
        var s = X.dj();
        s.tV("Layer");
        X.U.push(s);
      }
    }
    function m(x) {
      var X = " ";
      if (x.indexOf(",") != -1) X = ",";
      return x.split(X).map(parseFloat);
    }
    function n(x, X, $, H, C, l, v, K) {
      var S = ["display", "opacity", "fill-opacity", "filter", "clip-path"],
        o = 0;
      for (var V = 0; V < X.length; V++) {
        var P = X[V],
          z = j(P),
          E = P.getAttribute("id"),
          Q = 13,
          O = 1,
          F = "clip-path",
          g = null,
          bb = 0;
        if (E == null) E = P.getAttribute("data-name");
        var A = U(P, C.aBM);
        for (var N in C.yL)
          if ((S.indexOf(N) == -1 || K) && A[N] == null) A[N] = C.yL[N];
        if (A["font-size"]) Q = T(A["font-size"], Q);
        var e = c(P);
        if (P.getAttribute("dx")) e.Tt += T(P.getAttribute("dx"), Q);
        if (P.getAttribute("dy")) e.BL += T(P.getAttribute("dy"), Q);
        e.concat(H);
        var Y = P.getAttribute("visibility"),
          d = A.display,
          I = $.dj();
        if (Y == "hidden" || d == "none") I.xg(!1);
        I.tV(E != null ? E.split(":::")[0] : "Layer");
        if (A.opacity) O *= parseFloat(A.opacity);
        if (A["fill-opacity"]) {
          var s = parseFloat(A["fill-opacity"]);
          if (s != 0) O *= s;
        }
        I.yA = Math.round(255 * O);
        if (A["mix-blend-mode"]) {
          var p = kJ.Lt.indexOf(A["mix-blend-mode"]);
          if (p != -1) I.hz = kJ.YH[p];
        }
        if (P.getAttribute(F) == null) F = "mask";
        if (P.getAttribute(F) != null || A["clip-path"]) {
          var w = P.getAttribute(F);
          if (w == null) w = A["clip-path"];
          w = w.slice(4, w.length - 1);
          var r = x.getElementById(w.slice(1)),
            eQ = r ? r.children : null,
            t = r && r.tagName == "mask" && eQ[0] && eQ[0].tagName == "g";
          if (t) {
            var dq = eQ[0].children[0];
            t =
              dq &&
              dq.tagName == "g" &&
              dq.children[0] &&
              dq.children[0].tagName == "image";
          }
          if (t) {
            var D = eQ[0].children[0],
              ha = c(D);
            ha.concat(e);
            var am = D.children[0];
            console.log(am);
            var k4 = G($, am, ha),
              aA = (C.m4 = new R.T0());
            aA.H = k4.H;
            aA.N = B.j(aA.H.C());
            B.Ih(k4.buffer, aA.N, 0);
          } else if (r) {
            g = $.dj();
            g.tV("Clip-Path" + (E ? ": " + E : ""));
            g.add.lsct = v < 2 ? hQ.WR : hQ.z$;
            g.hz = "pass";
            g.uZ = 24;
            var ex = (g.add.vmsk = new R.tm());
            $.U.push($.to());
            var ac = [];
            if (r.getAttribute(F)) {
              var w = r.getAttribute(F);
              w = w.slice(4, w.length - 1);
              ac = x.getElementById(w.slice(1)).children;
            }
            for (var y = 0; y < eQ.length; y++) {
              var eJ = c(eQ[y]);
              eJ.concat(e);
              var h$ = k($, x, eQ[y], !1).slice(2);
              B.z.La(h$, eJ);
              ex.D = ex.D.concat(h$);
            }
            for (var y = 0; y < ac.length; y++) {
              var eJ = c(eQ[y]);
              eJ.concat(e);
              var h$ = k($, x, ac[y], !1).slice(2);
              for (var da = 0; da < h$.length; da++)
                if (h$[y].Np != null) h$[y].Np = 3;
              B.z.La(h$, eJ);
              ex.D = ex.D.concat(h$);
            }
            for (var y = 0; y < ex.D.length; y++)
              if (ex.D[y].Np != null) ex.D[y].Np = 0;
            g.Pp();
            g.D5($);
            v++;
          }
        }
        if (A.filter && A.filter != "none") {
          var gb = A.filter,
            kS,
            cY,
            cS,
            di = !1,
            a7 = !1,
            b0 = !1;
          gb = gb.slice(5, gb.length - 1);
          var fM = x.getElementById(gb),
            k3 = [0, 0, 0, 0.5],
            e1 = e.Dc();
          if (fM)
            for (var y = 0; y < fM.children.length; y++) {
              var l2 = fM.children[y],
                kL = j(l2);
              if (kL == "feGaussianBlur") {
                di = !0;
                kS = parseFloat(l2.getAttribute("stdDeviation")) * e1;
              }
              if (kL == "feColorMatrix") {
                var es = l2.getAttribute("values");
                if (es) {
                  es = es.split(" ").map(parseFloat);
                  k3 = [es[4], es[9], es[14], es[18]];
                }
              }
              if (kL == "feComposite") {
                b0 = !0;
              }
              if (kL == "feOffset") {
                a7 = !0;
                var kR = l2.getAttribute("dx"),
                  eH = l2.getAttribute("dy");
                cY = parseFloat(kR ? kR : 0) * e1;
                cS = parseFloat(eH ? eH : 0) * e1;
              }
            }
          if (di && (b0 || a7)) {
            var cZ = b0 ? "IrSh" : "DrSh",
              ga = JSON.parse(eu.oy[eu.order.indexOf(cZ)]);
            ga.blur.v.val = Math.round(kS * 2.4);
            var fi = Math.sqrt(cY * cY + cS * cS);
            ga.uglg.v = !1;
            ga.Dstn.v.val = Math.round(fi);
            ga.lagl.v.val = Math.round(Math.atan2(cS, -cY) * (180 / Math.PI));
            ga.Clr.v = B.MV.Ia({
              o: k3[0] * 255,
              i: k3[1] * 255,
              X: k3[2] * 255,
            });
            ga.Opct.v.val = Math.round(k3[3] * 100);
            W(I, eu.C$[eu.order.indexOf(cZ)], ga);
          } else if (di) bb = kS;
        }
        if (
          z == "g" ||
          z == "a" ||
          z == "svg" ||
          z == "switch" ||
          ((z == "text" || z == "textPath") && P.children.length > 0) ||
          (z == "symbol" && K)
        ) {
          if (z == "text") l = a(P, l);
          var go = P.getAttribute("viewBox"),
            iz = P.getAttribute("width"),
            i5 = P.getAttribute("height");
          if (z == "svg" && iz && i5 && go == null) go = "0 0 " + iz + " " + i5;
          if (go && iz && i5) {
            var aI = m(go),
              bs = a(P),
              k2 = new k$();
            k2.translate(-aI[0], -aI[1]);
            k2.scale(parseFloat(iz) / aI[2], parseFloat(i5) / aI[3]);
            k2.translate(bs.Tt, bs.BL);
            k2.concat(e);
            e = k2;
          }
          var jG = P.children.length,
            eW = C.yL;
          C.yL = A;
          var gc = C.S2;
          C.S2 = Math.max(C.S2, bb);
          var k1 = (z != "text" && z != "textPath") || jG > 1;
          if (k1) {
            var ke = I.Iw();
            I.add.lsct =
              v < 2 && ke && (E == null || !E.endsWith(":::")) ? hQ.WR : hQ.z$;
            I.hz = "pass";
            I.uZ = 24;
            I.xg(ke);
            $.U.push($.to());
          }
          n(x, P.children, $, e, C, l, v + 1);
          if (k1) $.U.push(I);
          else {
            var jh = $.U[$.U.length - 1];
            if (jh) jh.yA = I.yA;
            if (jh) jh.hz = I.hz;
          }
          C.S2 = gc;
          C.yL = eW;
        } else if (z == "use") {
          var k2 = a(P);
          k2.concat(e);
          var cE = h(P),
            cy = x.getElementById(cE.slice(1));
          if (cy) {
            var eW = C.yL;
            C.yL = A;
            if (A.filter) cy.setAttribute("filter", A.filter);
            n(x, [cy], $, k2, C, l, v + 1, !0);
            C.yL = eW;
          }
        } else if (
          z == "path" ||
          z == "rect" ||
          z == "circle" ||
          z == "ellipse" ||
          z == "polygon" ||
          z == "polyline" ||
          z == "line"
        ) {
          I.uZ |= 16;
          var ex = (I.add.vmsk = new R.tm()),
            hl = A.fill,
            c2 =
              hl == "none" ||
              (A["fill-opacity"] && parseFloat(A["fill-opacity"]) == 0),
            f9 = A["fill-rule"] == "evenodd" ? 1 : 0;
          ex.D = k($, x, P, f9 == 1, c2);
          ex.uc = f9;
          B.z.La(ex.D, e);
          var hu = A.stroke,
            le = A["stroke-width"],
            iJ = A["stroke-dasharray"],
            dZ = A["stroke-linejoin"];
          if (dZ == null) dZ = "miter";
          var kd = A["stroke-linecap"];
          if (kd == null) kd = "butt";
          var bC = A["stroke-miterlimit"];
          if (bC == null) bC = 4;
          else bC = parseFloat(bC);
          var ev = A["paint-order"],
            ak = !(hu == null || hu == "none" || hu == "null"),
            gD = (I.add.vstk = eu.rS.i4(null, ak)),
            a9 = A["stroke-opacity"] ? parseFloat(A["stroke-opacity"]) : 1;
          if (ak) {
            var kk = b(x, hu, e, ex.D, $),
              kX = ["SoFi", "GrFl", "patternFill"].indexOf(kk.e),
              kc = kk.K.v.Opct.v,
              hp = 1;
            if (kc.val != 100 || (a9 != 1 && c2)) {
              I.yA = Math.round((a9 * I.yA * kc.val) / 100);
              kc.val = 100;
              a9 = 1;
            }
            var ew = [eu.dS, eu.GB, eu.Pa][kX],
              gS = (gD.strokeStyleContent.v = { classID: eu.rS.HF[kX] });
            for (var y = 0; y < ew.length; y++) gS[ew[y]] = kk.K.v[ew[y]];
            le = le ? parseFloat(le) : 1;
            if (ev && ev.replace(/\s\s+/g, " ").slice(0, 11) == "stroke fill") {
              hp = 2;
              le /= 2;
            }
            var g2 = {
              h0: ["miter", "round", "bevel"].indexOf(dZ),
              kv: ["butt", "round", "square"].indexOf(kd),
              mm: le,
              NV: bC,
            };
            if (iJ != null && iJ != "none")
              g2.QJ = (
                iJ.indexOf(",") != -1 ? iJ.split(",") : iJ.split(" ")
              ).map(parseFloat);
            eu.rS.write(gD, g2, e.Dc());
            gD.strokeStyleLineAlignment.v.strokeStyleLineAlignment =
              eu.rS.Jr[hp];
            gD.strokeStyleOpacity.v.val = 100 * a9;
            if (kk.dZ) I.add._sstl = kk.dZ;
          }
          I.add.vstk.fillEnabled.v = !c2;
          if (c2) {
            I.add.SoCo = {
              classID: "null",
              Clr: { t: "Objc", v: B.MV.Ia({ o: 0, i: 0, X: 0 }) },
            };
          } else {
            var kk = b(x, hl, e, ex.D, $),
              jY = null,
              he = null;
            if (kk.e == "SoFi") {
              jY = "SoCo";
              he = eu.dS;
            }
            if (kk.e == "GrFl") {
              jY = "GdFl";
              he = eu.GB;
            }
            if (kk.e == "patternFill") {
              jY = "PtFl";
              he = eu.Pa;
            }
            if (jY != null) {
              var kc = kk.K.v.Opct.v;
              if (kc.val != 100) {
                I.yA = Math.round((I.yA * kc.val) / 100);
                kc.val = 100;
              }
              I.add[jY] = { classID: "null" };
              for (var y = 0; y < he.length; y++) {
                var N = he[y];
                I.add[jY][N] = kk.K.v[N];
              }
            }
            if (kk.dZ) I.add._fstl = kk.dZ;
          }
          var a5 = Math.max(bb, C.S2);
          if (a5 != 0) I.add.vmsk.LH = a5;
          I.Pp();
          I.D5($);
          $.U.push(I);
        } else if ((z == "text" || z == "tspan") && P.textContent != "") {
          l = a(P, l);
          var k2 = l.P(),
            cS = 0;
          k2.concat(e);
          if (z == "tspan" && l.x != 0) {
          } else k2.translate(o, 0);
          if (P.children.length > 0) {
            var gq = U(P.children[0], C.aBM);
            for (var N in gq) if (S.indexOf(N) == -1) A[N] = gq[N];
          }
          var fA = A["xml:space"],
            c3 = P.textContent;
          if (fA == "preserve") c3 = c3.replace(/\t/g, " ").replace(/\n/g, " ");
          if (E == null) I.tV(c3);
          I.add.lnsr = "rend";
          I.add.TySh = al.wD(0, 0);
          I.add.TySh.AF = new hk(0, 0, 100, 100);
          I.add.TySh.u = k2.P();
          var fa = I.add.TySh.s3;
          al.Fk(fa, 0, c3);
          if (z == "tspan") o += Q * c3.length * 0.5 * k2.Dc();
          var hl = A.fill,
            jA = A["font-weight"],
            kF = A["font-family"],
            dn = A["text-decoration"],
            hu = A.stroke,
            le = A["stroke-width"],
            de = A["dominant-baseline"];
          if (de == "text-before-edge") cS = Q;
          else if (de == "middle") cS = Q / 2;
          else if (de == "hanging") cS = Q;
          if (cS != 0) I.add.TySh.u.translate(0, cS);
          var ks = al.vJ(fa, 0, 1);
          if (hl && hl != "none") {
            var k3 = CSS.uQ(hl);
            ks.K2.FillColor = {
              Type: 1,
              Values: [1, k3.o / 255, k3.i / 255, k3.X / 255],
            };
          }
          if (dn == "underline") ks.K2.Underline = !0;
          ks.K2.FontSize = Math.round(Q);
          al.gk(ks, "LiberationSans");
          if (jA == "bold") al.gk(ks, "LiberationSans-Bold");
          if (kF) {
            kF = kF.split(",")[0].trim();
            if (kF[0] == '"') kF = kF.slice(1);
            if (kF[kF.length - 1] == '"') kF = kF.slice(0, kF.length - 1);
            var fx = kF + ":" + (jA ? jA : "normal"),
              hT = {
                "'DejaVu Sans':normal": "DejaVuSans",
                "'DejaVu Sans':bold": "DejaVuSans-Bold",
                "'Nimbus Sans L':normal": "NimbusSanL-Reg",
                "'Nimbus Sans L':bold": "NimbusSanL-Bol",
                "Libre Franklin:300": "LibreFranklin-Light",
                "Libre Franklin:400": "LibreFranklin-Regular",
                "Libre Franklin:500": "LibreFranklin-Medium",
                "Libre Franklin:600": "LibreFranklin-SemiBold",
                "Libre Franklin:700": "LibreFranklin-Bold",
                "Source Sans Pro:normal": "SourceSansPro-Regular",
                "Source Sans Pro:bold": "SourceSansPro-Bold",
              };
            if (hT[fx]) al.gk(ks, hT[fx]);
            else al.gk(ks, kF);
          }
          if (A["text-anchor"])
            ks.Th.Justification = ["start", "end", "middle"].indexOf(
              A["text-anchor"]
            );
          al.jD(fa, 0, c3.length, ks);
          if (hu == null || hu == "none") {
          } else {
            var ga = JSON.parse(eu.oy[eu.order.indexOf("FrFX")]);
            ga.Clr.v = B.MV.Ia(CSS.uQ(hu));
            ga.Sz.v.val = Math.round(parseFloat(le) * k2.Dc());
            W(I, "frameFXMulti", ga);
          }
          $.U.push(I);
        } else if (z == "image") {
          var k4 = G($, P, e);
          if (k4) {
            k4.tV(I.getName());
            k4.uZ = I.uZ;
            I = k4;
            $.U.push(I);
            if (C.m4) I.x7 = C.m4;
            C.m4 = null;
          }
        } else
          console.log(
            "unknown tag: " + z,
            P.children.length,
            P.textContent.length
          );
        if (g != null) {
          $.U.push(g);
          v--;
        }
      }
    }
    function G(x, X, $) {
      var H = h(X);
      if (H && H.slice(0, 4) == "data") {
        var C = gh.TD(H),
          l = C,
          v = x.Pi(l, "hey", 0, 0),
          K = v.H.P();
        K.x = K.y = 0;
        var S = X.getAttribute("width"),
          o = X.getAttribute("height");
        if (S) K.r = parseFloat(S);
        if (o) K.$ = parseFloat(o);
        var V = a(X);
        V.concat($);
        var P = B.b._c(K).L;
        B.b.u(P, V, P);
        v.add.SoLd.Trnf = L.Dq.be(P);
        v.add.SoLd.nonAffineTransform = L.Dq.be(P);
        v.yZ(x, !1);
        return v;
      }
    }
    function W(x, X, $) {
      var H = x.add.lmfx;
      if (H == null) {
        var H = (x.add.lmfx = JSON.parse(eu.default));
        for (var y = 0; y < eu.order.length; y++)
          H[eu.C$[y]] = { t: "VlLs", v: [] };
      }
      H[X].v.push({ t: "Objc", v: $ });
    }
    function k(x, X, $, H, C) {
      var l = [{ e: 6 }, { e: 8, all: 0 }],
        v = j($);
      if (v == "use") {
        var K = h($),
          S = X.getElementById(K.slice(1)),
          o = new k$();
        if (j(S) != "rect") o = a(S);
        o.concat(c(S));
        l = k(x, X, S, H, C);
        B.z.La(l, o);
      } else if (v == "path") {
        var V = $.getAttribute("d");
        if (V == null) return l;
        var P = Typr.U.SVGToPath(V);
        l = B.b.LZ({ L: P.crds, RC: P.cmds }, H, C);
        B.z.a6O(l, H);
      } else if (v == "rect") {
        var z = $.getAttribute("rx"),
          E = new ea(0, 0);
        u("x", $, x, E, !0);
        u("y", $, x, E, !1);
        var A = new ea(0, 0);
        u("width", $, x, A, !0);
        u("height", $, x, A, !1);
        l = B.z.cn.Rect(E.x, E.y, A.x, A.y, z ? parseFloat(z) : 0);
      } else if (v == "circle" || v == "ellipse") {
        var N = [0, 0, 0, 0],
          Q = ["cx", "cy", "rx", "ry", "r"];
        for (var y = 0; y < 5; y++) {
          var e = $.getAttribute(Q[y]);
          if (e) {
            e = parseFloat(e);
            if (y < 4) N[y] = e;
            else N[2] = N[3] = e;
          }
        }
        l = B.z.cn.SQ(N[0] - N[2], N[1] - N[3], 2 * N[2], 2 * N[3]);
      } else if (v == "polygon" || v == "polyline" || v == "line") {
        var Y;
        if (v == "line")
          Y = [
            $.getAttribute("x1"),
            $.getAttribute("y1"),
            $.getAttribute("x2"),
            $.getAttribute("y2"),
          ].map(parseFloat);
        else
          Y = $.getAttribute("points")
            .trim()
            .replace(/\s\s+/g, " ")
            .split(",")
            .join(" ")
            .split(" ")
            .map(parseFloat);
        l = B.z.cn.yu(Y, 0, v != "polygon");
      }
      return l;
    }
    function T(x, X) {
      if (x.endsWith("em")) return X * parseFloat(x.slice(0, x.length - 2));
      else return parseFloat(x);
    }
    function b(x, X, $, H, C) {
      var l,
        v,
        K,
        S = JSON.parse(eu.oy[eu.order.indexOf("SoFi")]),
        o = B.z.zZ(H),
        V = X != null ? X.indexOf("(") : -1;
      if (V != -1) {
        var P = X.lastIndexOf(")"),
          z = X.slice(0, V).trim(),
          A = X.slice(V + 1, P).trim();
        if (A.charAt(0) == "'" || A.charAt(0) == '"')
          A = A.slice(1, A.length - 1);
        if (z == "url") {
          if (A.charAt(0) == "#") {
            var N = x.getElementById(A.slice(1));
            if (N && j(N).toLowerCase().endsWith("gradient")) {
              K = i(x, N, $, o, H);
              var Q = gg.qm(K, H);
              l = "GrFl";
              v = { t: "Objc", v: Q };
            } else if (
              N &&
              j(N).toLowerCase() == "pattern" &&
              N.children[0] &&
              j(N.children[0]) == "use"
            ) {
              l = "SoFi";
              v = { t: "Objc", v: S };
              var e = N.children[0],
                Y = c(e),
                d = h(e),
                I = x.getElementById(d.slice(1)),
                O;
              if (h(I)) {
                var s = gh.TD(h(I)).buffer,
                  p = gh.lj(gh.Qa(s));
                O = p.LN(s)[0];
              } else {
                var F = new Uint32Array(4 * 4);
                F.fill(4278220799);
                O = { data: F.buffer, Iu: new hk(0, 0, 4, 4) };
              }
              var g = {};
              g.id = fb.Rh() + "-d71c-11e5-b1ae-a548a96e5f9f";
              g.name = "someImage";
              g.Og = [new Uint8Array(O.data), O.Iu];
              C.Vq(g);
              var S = JSON.parse(eu.oy[eu.order.indexOf("patternFill")]);
              S.Scl.v.val = Math.round(100 * o.r * Y.Sd);
              var w = S.phase.v;
              w.Hrzn.v = Math.round(o.x + Y.Tt * o.r);
              w.Vrtc.v = Math.round(o.y + Y.BL * o.$);
              S.Ptrn.v.Idnt.v = g.id;
              l = "patternFill";
              v = { t: "Objc", v: S };
            } else {
              l = "SoFi";
              v = { t: "Objc", v: S };
            }
          } else console.log("unknown url", A);
        } else if (z == "rgb" || z == "hsl" || z == "rgba" || z == "hsla") {
          l = "SoFi";
          v = { t: "Objc", v: S };
          v.v.Clr.v = B.MV.Ia(CSS.uQ(X));
          if (z == "rgba" || z == "hsla")
            v.v.Opct.v.val = Math.round(100 * parseFloat(X.split(",").pop()));
        } else if (z == "light-dark") {
          var r = 0,
            eQ = 0;
          for (var y = 0; y < A.length; y++) {
            if (A[y] == "(") eQ++;
            if (A[y] == ")") eQ--;
            if (A[y] == "," && eQ == 0) {
              r = y;
              break;
            }
          }
          return b(x, A.slice(0, r), $, H, C);
        } else console.log("unknown fill", X);
      } else {
        l = "SoFi";
        v = { t: "Objc", v: S };
        var t = CSS.uQ(X);
        v.v.Clr.v = B.MV.Ia(t);
        if (t.Sd != null) v.v.Opct.v.val = Math.round((100 * t.Sd) / 255);
      }
      return { e: l, K: v, dZ: K };
    }
    function c(x) {
      var X = new k$(),
        $ = x.getAttribute("transform");
      if ($) X = f($);
      var H = x.getAttribute("style");
      if (H != null) {
        var C = {};
        Z(C, H, ["transform"]);
        H = C.transform;
        if (H) X.concat(f(H));
      }
      return X;
    }
    function a(x, X) {
      var $ = new k$(),
        H = x.getAttribute("x"),
        C = x.getAttribute("y");
      if (H) $.Tt = parseFloat(H);
      else if (X) $.Tt = X.Tt;
      if (C) $.BL = parseFloat(C);
      else if (X) $.BL = X.BL;
      return $;
    }
    function f(x) {
      var X = Typr.U.SVG.readTrnf(x);
      return new k$(X[0], X[1], X[2], X[3], X[4], X[5]);
    }
    function U(x, X) {
      var $ = {},
        H =
          "fill-rule fill stroke stroke-width stroke-dasharray stroke-opacity stroke-linejoin stroke-linecap stroke-miterlimit font-size font-weight font-family text-decoration text-anchor dominant-baseline stop-color stop-opacity filter display opacity fill-opacity paint-order clip-path mix-blend-mode xml:space".split(
            " "
          );
      for (var y = 0; y < H.length; y++) {
        var C = x.getAttribute(H[y]);
        if (C != null && C != "inherit") $[H[y]] = C;
      }
      var l = x.getAttribute("class");
      if (X != null && l != null && X["." + l] != null) Z($, X["." + l], H);
      var v = x.getAttribute("id");
      if (X != null && v != null && X["#" + v] != null) Z($, X["#" + v], H);
      var K = x.getAttribute("style");
      if (K != null) Z($, K, H);
      return $;
    }
    function Z(x, X, $) {
      X = X.trim().split(";");
      for (var y = 0; y < X.length; y++) {
        var H = X[y].split(":"),
          C = H[0] ? H[0].trim() : "",
          l = H[1] ? H[1].trim() : "";
        for (var v = 0; v < $.length; v++)
          if (C == $[v] && l != "inherit") x[$[v]] = l;
      }
    }
    function h(x) {
      var X = x.getAttribute("xlink:href");
      if (X == null) X = x.getAttribute("href");
      if (X == null) X = x.getAttribute("xl:href");
      return X;
    }
    function u(x, X, $, H, C) {
      var l = X.getAttribute(x);
      if (l == null) return;
      var v = parseFloat(l);
      if (l.endsWith("%")) v *= (C ? $.r : $.$) / 100;
      if (C) H.x = v;
      else H.y = v;
    }
    function i(x, X, $, H, C) {
      var l = u,
        v = new k$(),
        K = X.getAttribute("gradientTransform"),
        E = !1;
      if (K) v = f(K);
      v.concat($);
      var S = j(X) == "linearGradient" ? 0 : 1,
        o = new ea(0, 0),
        V = new ea(1, 0),
        P = o.P();
      if (S == 0) {
        var z = new hk(0, 0, 1, 1);
        l("x1", X, z, o, !0);
        l("y1", X, z, o, !1);
        l("x2", X, z, V, !0);
        l("y2", X, z, V, !1);
        P.Tu(o.x, o.y);
      }
      if (S == 1) {
        if (X.getAttribute("cx")) o.x = parseFloat(X.getAttribute("cx"));
        if (X.getAttribute("cy")) o.y = parseFloat(X.getAttribute("cy"));
        V.Tu(o.x, o.y);
        P.Tu(o.x, o.y);
        if (X.getAttribute("r")) V.x += parseFloat(X.getAttribute("r"));
        if (X.getAttribute("fx")) P.x = parseFloat(X.getAttribute("fx"));
        if (X.getAttribute("fy")) P.y = parseFloat(X.getAttribute("fy"));
      }
      var A = X;
      while (!0) {
        if (A.getAttribute("gradientUnits") == "userSpaceOnUse") E = !0;
        var N = h(A);
        if (N == null || N == "none") break;
        A = x.getElementById(N.slice(1));
      }
      if (!E) v = new k$(H.r, 0, 0, H.$, H.x, H.y);
      v = gg.T$(o, V, v);
      var Q = gg.gW(S, v, C);
      gg.AX(Q, o, V, P);
      var e = X.children,
        Y = (Q[1] = []);
      if (e.length == 0) {
        var d = h(X);
        if (d == null) throw "gradient has no stops";
        var I = x.getElementById(d.slice(1));
        if (I == null) {
          console.log(d.slice(1));
        } else Y = Q[1] = i(x, I, v, H, C)[1];
      } else
        for (var y = 0; y < e.length; y++) {
          var O = e[y],
            s = U(O),
            p = s["stop-color"],
            F = s["stop-opacity"],
            g = O.getAttribute("offset");
          if (p == null) p = "#000000";
          F = F == null ? 1 : parseFloat(F);
          var w = g ? parseFloat(g) : 0;
          if (g && g.endsWith("%")) w /= 100;
          p = CSS.uQ(p);
          if (p.Sd != null) F *= p.Sd / 255;
          Y.push([w, [p.o / 255, p.i / 255, p.X / 255], parseFloat(F), 0.5]);
        }
      return Q;
    }
    return { VB: q };
  })();
  hY.He = (function () {
    var j = null,
      q = "",
      m = "",
      n;
    function G(S, o, V, P) {
      var z = [],
        Q = " { ",
        e = " } ",
        Y = !1;
      j = o;
      m = o.O2 ? "" : "\t";
      q = o.O2 ? "" : " ";
      var E = o.a85,
        A = o.aq7;
      n = ei == 0 ? new hk(0, 0, S.r, S.$) : S.u$(!0);
      if (P != null) {
        n = S.root.children[P].v.Li();
        E = n.r;
        A = n.$;
      }
      z.push(
        '<svg version="1.2" xmlns="http://www.w3.org/2000/svg" viewBox="' +
          [n.x, n.y, n.r, n.$].join(" ") +
          '" width="' +
          E +
          '" height="' +
          A +
          '">'
      );
      if (!o.O2)
        z.push(W(1) + "<title>" + X(S.name.split(".")[0]) + "</title>");
      var N = {
        KO: [],
        yJ: [],
        Mj: 0,
        jB: 0,
        oE: 0,
        WP: {},
        di: {},
        hJ: 0,
        P_: {},
        aqd: {},
        rh: 0,
        HS: [],
      };
      h(S, N, S.root.children, 1, o, V, P);
      if (N.KO.length != 0) {
        z.push(W(1) + "<defs>");
        z = z.concat(N.KO);
        z.push(W(1) + "</defs>");
      }
      z.push(W(1) + "<style>");
      if (o.O2) {
        Q = "{";
        e = "}";
      }
      for (var y = 0; y < S.U.length; y++) if (S.U[y].add.TySh) Y = !0;
      if (Y && !o.am4 && !o.ayu)
        z.push(W(2) + "tspan" + Q + "white-space:pre" + e);
      for (var d in N.P_) z.push(W(2) + "." + d + Q + N.P_[d] + e);
      z.push(W(1) + "</style>");
      z = z.concat(N.yJ);
      z.push("</svg>");
      z = z.join(o.O2 ? "" : "\n");
      return M.Nh(z);
    }
    function W(aF) {
      var S = "";
      for (var y = 0; y < aF; y++) S += m;
      return S;
    }
    function k(aF, S) {
      if (S == null) S = 1;
      var o = "" + parseFloat(aF.toFixed(S));
      if (o.startsWith("0.")) o = o.slice(1);
      return o;
    }
    function T(S, o) {
      var V = S.add.lmfx;
      if (V) V = V[o].v[0];
      if (V) V = V.v;
      if (V && !V.enab.v) V = null;
      return V;
    }
    function b(S, o) {
      var V = T(S, "frameFXMulti");
      if (V) {
        var P = V.Sz.v.val;
        if (V.Styl.v.FStl == "OutF") {
          o.push("paint-order:stroke fill markers");
          P *= 2;
        }
        Z(o, CSS.mP(V.Clr.v), 1);
        if (P != 1) o.push("stroke-width: " + P);
        o.push("stroke-linejoin: round;");
      }
    }
    var c =
      "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(
        ""
      );
    function a(S) {
      var o = c.length,
        V = "";
      for (var P = 1; P < 10; P++) {
        var z = (o - 10) * ~~Math.pow(o, P - 1);
        if (S < z) {
          for (var y = 0; y < P; y++) {
            var E = y == P - 1 ? 10 : 0,
              A = o - E,
              N = S % A;
            V = c[N + E] + V;
            S = Math.floor((S - N) / A);
          }
          break;
        }
        S -= z;
      }
      return V;
    }
    function f(S, o, V, P) {
      if (S.length != 0) {
        if (P == null) P = "s";
        var z = S.join(";"),
          E = o.aqd[z];
        if (E == null) {
          E = j.O2 ? a(o.rh) : P + o.rh;
          o.rh++;
          o.aqd[z] = E;
          o.P_[E] = z;
        }
        if (V) V.push(E);
        return E;
      }
    }
    function U(S) {
      if (j.O2 && S.length == 7 && S[0] == "#") {
        if (S[1] == S[2] && S[3] == S[4] && S[5] == S[6])
          S = "#" + S[1] + S[3] + S[5];
      }
      return S;
    }
    function Z(S, o, V) {
      o = U(o);
      if (o != "#000" || V == 1) S.push((V == 0 ? "fill:" : "stroke:") + q + o);
    }
    function h(S, o, V, P, z, E, A) {
      var N = !1;
      for (var Q = 0; Q < V.length; Q++) {
        var e = V[Q].v,
          Y = e.add.lsct;
        if (e.wp) continue;
        if (e.add.artb && A != null && Q != A) continue;
        if (!e.Yx && V[Q + 1] && V[Q + 1].v.Yx && e.ql() && e.add.vmsk) {
          var d = [];
          H(e, e.add.vmsk, o, d);
          o.yJ.push(W(P) + "<g " + d[0] + ">");
          P++;
          N = !0;
        } else if (!e.Yx && V[Q - 1] && V[Q - 1].v.Yx && N) {
          P--;
          o.yJ.push(W(P) + "</g>");
          N = !1;
        }
        var I = e.add.vmsk,
          O = e.add.vogk,
          s = e.add.vstk,
          p = e.add.TySh;
        if (I && !I.isEnabled) I = s = null;
        var F = [];
        if (!z.hidden && !e.Iw()) continue;
        var g = e.yA / 255,
          w = e.add.iOpa ? e.add.iOpa / 255 : 1;
        if (e.D1()) {
          g *= w;
          w = 1;
        }
        if (g != 1) F.push("opacity:" + q + k(g, 2));
        if (w != 1) F.push("fill-opacity:" + q + k(w, 2));
        if (e.hz != "norm") {
          var r = kJ.Lt[kJ.YH.indexOf(e.hz)];
          if (r != null) F.push("mix-blend-mode:" + q + r);
        }
        if (!e.Iw()) F.push("display:" + q + "none");
        var d = [],
          eQ = [],
          t = e.getName(),
          dq = t.indexOf(" .");
        if (!z.O2 && t != "Layer") d.push('id="' + X(t) + '"');
        var D = dS.a0L(e.add.lmfx, e.add),
          ha = D[0],
          am = D[1],
          k4 = e.add.SoLd;
        if (k4 && k4.filterFX) {
          var aA = k4.filterFX.v;
          if (aA.enab.v && aA.filterFXList.v.length != 0) k4 = null;
        }
        var ex = [];
        if (I && !e.ql() && !e.D1()) H(e, I, o, ex);
        if (ex.length != 0) o.yJ.push(W(P) + "<g " + x(ex, eQ) + ">");
        if (e.D1()) {
          var ac = V[Q].children;
          if (ac.length == 1 && ac[0].v.add.SoLd && !z.WO) {
          } else {
            var eJ = I,
              h$ = ac.length == 0 ? null : ac[ac.length - 1].v;
            if (ei == 1 && h$ && h$.wp && h$.Iw()) eJ = h$.add.vmsk;
            H(e, eJ, o, d);
            if (F.length != 0) d.push('style="' + F.join(";") + '"');
            if (ha) {
              var da = CSS.mP(ha.Clr.v),
                bb = "f" + o.jB;
              o.jB++;
              o.yJ.push(W(P) + '<filter id="' + bb + '">');
              o.yJ.push(
                W(P + 1) +
                  '<feFlood flood-color="' +
                  da +
                  '" flood-opacity="' +
                  k(ha.Opct.v.val / 100, 2) +
                  '" />'
              );
              o.yJ.push(
                W(P + 1) +
                  '<feBlend mode="' +
                  kJ.Lt[kJ.YH.indexOf(kJ.l7(ha.Md.v.BlnM))] +
                  '" in2="SourceGraphic"/>'
              );
              o.yJ.push(
                W(P + 1) + '<feComposite in2="SourceAlpha" operator="in" />'
              );
              o.yJ.push(W(P) + "</filter>");
              d.push('filter="url(#' + bb + ')"');
            }
            var gb = x(d, eQ),
              fM = z.O2 && gb == "";
            if (!fM) o.yJ.push(W(P) + "<g" + (gb == "" ? "" : " " + gb) + ">");
            h(S, o, ac, P + 1, z, E);
            if (!fM) o.yJ.push(W(P) + "</g>");
          }
        } else if (e.ql() && I == null) {
          C(S, F, e.add, o, n, z);
          if (F.length != 0) d.push('style="' + F.join(";") + '"');
          o.yJ.push(
            W(P) +
              '<rect width="' +
              n.r +
              '" height="' +
              n.$ +
              '" ' +
              x(d, eQ) +
              "/>"
          );
        } else if (I && e.ql() && e.add.PtFl == null) {
          C(S, F, e.add, o, cd, z, I.D);
          f(F, o, eQ);
          var kS,
            cY = null,
            cS = 0,
            k3;
          if (O.length != 0) {
            kS = O[0].v;
            cY = kS.keyOriginType;
            if (cY) cY = cY.v;
            if (cY == 2) {
              var di = B.ih._y(kS);
              cS = di[0];
              for (var y = 0; y < 3; y++) if (cS != di[y + 1]) cY = null;
            }
          }
          if (O.length == 1 && cY == 5 && Math.abs(B.ih.a4s(kS)) < 1e-4) {
            var a7 = B.ih.M8(kS),
              b0 = (a7[0] + a7[2]) / 2,
              e1 = (a7[1] + a7[3]) / 2,
              l2 = b0 - a7[0],
              kL = e1 - a7[1],
              es = Math.abs(l2 - kL) < 0.01,
              kR = es
                ? 'r="' + k(l2) + '"'
                : 'rx="' + k(l2) + '" ry="' + k(kL) + '"';
            k3 =
              "<" +
              (es ? "circle" : "ellipse") +
              " " +
              x(d, eQ) +
              ' cx="' +
              k(b0) +
              '" cy="' +
              k(e1) +
              '" ' +
              kR +
              "/>";
          } else if (
            O.length == 1 &&
            cY == 2 &&
            cS != 0 &&
            Math.abs(B.ih.a4s(kS)) < 1e-4
          ) {
            var a7 = B.ih.M8(kS),
              eH = a7[0],
              cZ = a7[1],
              ga = a7[2] - a7[0],
              fi = a7[3] - a7[1],
              go = "";
            if (eH != 0) go += ' x="' + k(eH) + '"';
            if (cZ != 0) go += ' y="' + k(cZ) + '"';
            go += ' width="' + k(ga) + '"';
            go += ' height="' + k(fi) + '"';
            go += ' rx="' + k(cS) + '"';
            k3 = "<rect " + x(d, eQ) + go + "></rect>";
          } else {
            var iz, i5;
            if (ei == 0) {
              var aI = B.z.Q2(I.D, 1);
              iz = aI.ku;
              i5 = aI.GG;
            } else {
              var bs = B.b.bh(I.D);
              iz = Typr.U.pathToSVG({ crds: bs.L, cmds: bs.RC }, 1);
              i5 = I.uc;
            }
            if (i5 != 0) {
              d.push('fill-rule="evenodd"');
            }
            k3 = "<path " + x(d, eQ) + ' d="' + iz + '"/>';
          }
          o.yJ.push(W(P) + k3);
        } else if (p && z.am4) {
          q = z.O2 ? "" : " ";
          var k2 = p.s3,
            jG = new gu(k2, E, p.Ix),
            eW = null;
          if (ha) eW = CSS.mP(ha.Clr.v);
          if (am) {
            var a7 = e.H.P();
            K(am, o, a7, z);
            eW = "url(#g" + o.Mj + ")";
          }
          if (eW) F.push("fill:" + q + eW);
          b(e, F);
          var bs = bq.Yi(jG, p, !0),
            gc = B.b.Xl(bs);
          for (var k1 in gc) {
            var ke = F.slice(0),
              jh = eQ.slice(0),
              cE = d.slice(0);
            if (eW == null) {
              Z(ke, k1.slice(0, 7), 0);
              if (k1.length > 7) {
                var cy = bq.av_(k1.slice(7));
                Z(ke, v(cy.Nu), 1);
                l(cy, ke);
              }
            }
            f(ke, o, jh);
            var hl = gc[k1],
              c2 = Typr.U.pathToSVG({ crds: hl.L, cmds: hl.RC }, 1);
            o.yJ.push(
              W(P) +
                "<path " +
                x(cE, jh) +
                (z.O2 ? "" : " " + i(p)) +
                ' d="' +
                c2 +
                '"/>'
            );
          }
        } else if (p && !z.ayu) {
          var k2 = p.s3,
            f9 = p.u.P(),
            eW = null;
          F.push("transform:" + q + $(f9));
          var hu = al.WT(k2),
            jG = new gu(k2, E, p.Ix);
          b(e, F);
          if (F.length != 0) d.push('style="' + F.join(";") + '"');
          o.yJ.push(W(P) + "<text " + x(d, eQ) + " >");
          if (ha) eW = CSS.mP(ha.Clr.v);
          if (am) {
            var a7 = e.H.P();
            a7.x -= f9.Tt;
            a7.y -= f9.BL;
            K(am, o, a7, z);
            eW = " url(#g" + o.Mj + ")";
          }
          for (var y = 0; y < jG.Th.length; y++) {
            var le = jG.Th[y];
            if (le.IF.length == 1 && le.IF[0].o3) continue;
            for (var iJ = 0; iJ < le.EX.length; iJ++) {
              var dZ = le.EX[iJ],
                e1 = le.Qi.y + dZ.Qi.y,
                kd = le.IF[dZ.start].start,
                bC = le.IF[dZ.end - 1].end,
                ev = al.am8(k2, kd, bC),
                ak = "";
              for (var gD = 0; gD < ev.length; gD++) {
                var a9 = jG.q9(kd),
                  kk = ev[gD],
                  kX = al.vJ(k2, kd, kd),
                  kc = kX.NJ[kX.K2.Font].Name,
                  k1 = al.xH(kX.K2.FillColor),
                  ew = Math.round(kX.K2.FontSize),
                  gS = hu.slice(kd, kd + kk);
                if (kX.K2.FontCaps == 2) gS = gS.toUpperCase();
                var hp = new k$();
                hp.translate(a9.HA.x, -e1);
                var g2 = [];
                CSS.a6R(g2, kX, null, !0, !0, eW);
                var jY = f(g2, o, null, "t");
                jY = jY ? ' class="' + jY + '"' : "";
                var b0 = a9.HA.x,
                  he = u(kX, gS);
                ak +=
                  "<tspan " +
                  (gD == 0 ? 'x="' + k(a9.HA.x) + '"' : "") +
                  ' y="' +
                  k(e1) +
                  '"' +
                  jY +
                  he +
                  ">" +
                  X(gS) +
                  "</tspan>";
                kd += kk;
              }
              o.yJ.push(W(P + 1) + ak);
            }
          }
          o.yJ.push(W(P) + "</text>");
        } else if (k4 && z.WO && ha == null) {
          var bb = k4.Idnt.v,
            a5 = 0,
            gq = k4.Crop ? k4.Crop.v : null;
          console.log(gq);
          if (o.di[bb] != null) a5 = o.di[bb];
          else {
            o.hJ++;
            a5 = o.hJ;
            o.di[bb] = o.hJ;
            var fA = S.Kv(bb, gq),
              jA = "";
            if (fA == null) return;
            var c3 = fA.Zj,
              fa = gh.Qa(fA.raw.buffer);
            console.log(fa);
            if (fa == "pdf") {
              var kF = new fb("h");
              gh.lj("PDF").LN(fA.raw.buffer, kF);
              kF.DB();
              kF.l6();
              kF.gF();
              kF.iY();
              if (k4.Crop && k4.Crop.v == 1) {
                L.xC.J0(kF, kF.root.Fj(kF, !0));
              }
              var dn = gh.lj("SVG").Ev(kF, kF.r, kF.$, null, { HS: E });
              jA = "data:image/svg+xml;base64," + gh.Sk(dn);
            } else if (
              fa == "jpg" ||
              fa == "png" ||
              fa == "gif" ||
              fa == "svg"
            ) {
              var de = {
                jpg: "image/jpg",
                png: "image/png",
                jpg: "image/jpg",
                svg: "image/svg+xml",
              };
              jA = "data:" + de[fa] + ";base64," + gh.Sk(fA.raw.buffer);
            } else {
              jA = gh.Rq(c3[0].buffer, c3[1].r, c3[1].$);
            }
            var ks = k4.Sz.v;
            o.KO.push(
              W(2) +
                '<image width="' +
                ks.Wdth.v +
                '" height="' +
                ks.Hght.v +
                '" id="img' +
                a5 +
                '" href="' +
                jA +
                '"/>'
            );
          }
          var fx = B.B.Jl(k4);
          if (F.length != 0) d.push('style="' + F.join(";") + '"');
          var hT = x(d, eQ);
          o.yJ.push(
            W(P) +
              "<use " +
              hT +
              ' href="#img' +
              a5 +
              '" transform="' +
              $(fx) +
              '"/>'
          );
        } else if (!e.H.jG() && (z.WO || p)) {
          if (F.length != 0) d.push('style="' + F.join(";") + '"');
          var hT = x(d, eQ),
            i7 = e.buffer;
          if (ha) i7 = dS.aGf(i7, ha, e.H);
          var i5 = e.H;
          o.hJ++;
          var jA = gh.Rq(i7.buffer, i5.r, i5.$, "png", null, !0);
          o.KO.push(
            W(2) +
              "<image " +
              i(p) +
              ' width="' +
              e.H.r +
              '" height="' +
              e.H.$ +
              '" id="img' +
              o.hJ +
              '" href="' +
              jA +
              '"/>'
          );
          o.yJ.push(
            W(P) +
              "<use " +
              hT +
              ' href="#img' +
              o.hJ +
              '" x="' +
              i5.x +
              '" y="' +
              i5.y +
              '"/>'
          );
        }
        if (ex.length != 0) o.yJ.push(W(P) + "</g>");
      }
      if (N) {
        P--;
        o.yJ.push(W(P) + "</g>");
        N = !1;
      }
    }
    function u(S, o) {
      var V = S.K2.Tracking,
        P = "";
      if (V != null && V != 0) {
        V = Math.round((V * S.K2.FontSize) / 1e3);
        P = ' dx="0';
        for (var z = 1; z < o.length; z++) P += " " + V;
        P += '" ';
      }
      return P;
    }
    function i(S) {
      if (S == null) return "";
      var o = S.s3,
        V = al.WT(o);
      V = X(V.slice(0, V.length - 1));
      return 'aria-label="' + V + '" ';
    }
    function x(S, o) {
      if (o.length != 0) S.push('class="' + o.join(" ") + '"');
      return S.join(" ");
    }
    function X(S) {
      return String(S)
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/\u0022/g, "&quot;");
    }
    function $(S) {
      var o = [S.Sd, S.X, S.ra, S.Jy, S.Tt, S.BL];
      for (var y = 0; y < 6; y++) o[y] = k(o[y], 3);
      return "matrix(" + o.join(",") + ")";
    }
    function H(S, o, V, P) {
      if (o || S.add.artb) {
        var z;
        if (o) z = B.z.Q2(o.D).ku;
        else {
          var E = S.Li(),
            A = B.b._c(E);
          z = Typr.U.pathToSVG({ crds: A.L, cmds: A.RC }, 1);
        }
        V.oE++;
        P.push('clip-path="url(#cp' + V.oE + ')"');
        V.KO.push(
          W(2) + '<clipPath clipPathUnits="userSpaceOnUse" id="cp' + V.oE + '">'
        );
        V.KO.push(W(3) + '<path d="' + z + '"/>');
        V.KO.push(W(2) + "</clipPath>");
      }
    }
    function C(S, o, V, P, z, E, A) {
      var N = V.vmsk,
        Q = V.lmfx,
        e = [];
      if (N && N.LH != 0) {
        var Y = k(N.LH);
        if (P.WP[Y] == null) {
          P.jB++;
          P.WP[Y] = P.jB;
          P.KO.push(
            W(2) +
              '<filter x="-50%" y="-50%" width="200%" height="200%" id="f' +
              P.jB +
              '"> <feGaussianBlur stdDeviation="' +
              Y +
              '"/> </filter>'
          );
        }
        e.push("url(#f" + P.WP[Y] + ")");
      }
      if (Q)
        for (var y = 0; y < eu.order.length; y++) {
          var d = eu.order[y],
            I = eu.C$[y],
            O = Q[I].v;
          console.log(Q);
          for (var s = 0; s < O.length; s++) {
            var p = O[s].v,
              F = p.classID;
            if (!p.enab.v || !Q.masterFXSwitch.v) continue;
            if (F == "OrGl" || F == "DrSh") {
              P.jB++;
              e.push("url(#f" + P.jB + ")");
              var w = 0,
                r = 0,
                eQ = p.blur.v.val / 2.4,
                t = p.Opct.v.val / 100;
              if (F == "DrSh") {
                var dq = p.uglg && p.uglg.v ? S.KB() : p.lagl.v.val;
                dq = dq * (Math.PI / 180);
                var D = p.Dstn.v.val;
                w = -Math.cos(dq) * D;
                r = Math.sin(dq) * D;
              }
              if (F == "OrGl") t /= p.Inpr.v.val / 100;
              var ha =
                '<filter x="-50%" y="-50%" width="200%" height="200%" id="f' +
                P.jB +
                '" >';
              ha +=
                '<feDropShadow dx="' +
                w +
                '" dy="' +
                r +
                '" stdDeviation="' +
                eQ +
                '" flood-color="' +
                CSS.mP(p.Clr.v) +
                '" flood-opacity="' +
                k(t) +
                '"/>';
              ha += "</filter>";
              P.KO.push(W(2) + ha);
            }
          }
        }
      if (e.length != 0) o.push("filter:" + q + e.join(" "));
      var am = V.vstl;
      if (am == null) am = fb.CS(V, S);
      for (var y = 0; y < 2; y++) {
        var k4 = y == 0 ? am.dZ : am.Nu;
        if (k4.length == 0) {
          if (y == 0) o.push("fill:" + q + "none");
        } else if (k4.length == 3) Z(o, v(k4), y);
        else {
          K(k4, P, z, E, A);
          Z(o, "url(#g" + P.Mj + ")", y);
        }
      }
      if (am.Nu.length != 0) {
        l(am, o);
      }
    }
    function l(S, o) {
      var V = S.kv,
        P = S.h0,
        z = S.mm,
        E = S.x2,
        A = S.QJ;
      if (E == 2) {
        z *= 2;
        o.push("paint-order:stroke fill markers");
      }
      if (V != 0)
        o.push("stroke-linecap:" + q + ["butt", "round", "square"][V]);
      if (P != 0)
        o.push("stroke-linejoin:" + q + ["miter", "round", "bevel"][P]);
      else if (S.NV != 4) o.push("stroke-miterlimit:" + S.NV);
      if (z != 1) o.push("stroke-width:" + q + k(z));
      if (A.length != 0) o.push("stroke-dasharray:" + q + A.join(","));
    }
    function v(S) {
      return CSS.WG({ o: S[0] * 255, i: S[1] * 255, X: S[2] * 255 });
    }
    function K(S, o, V, P, z) {
      if (z == null) z = B.z.cn.Rect(V.x, V.y, V.r, V.$);
      if (!(S instanceof Array)) S = gg.BZ(S, z);
      o.Mj++;
      var E = S[0],
        A = (E == 1 ? "radial" : "linear") + "Gradient",
        N = W(2) + "<" + A + ' id="g' + o.Mj + '"',
        Q = "";
      if (P.O2) {
        if (o.Mj == 1)
          o.KO.push('<linearGradient id="P" gradientUnits="userSpaceOnUse"/>');
        Q = ' href="#P"';
      } else Q = ' gradientUnits="userSpaceOnUse"';
      var e = gg.FC(S, z),
        Y = [new ea(0, 0), new ea(1, 0)];
      Q += ' gradientTransform="' + $(e) + '"';
      var d = P.O2 ? 2 : 3;
      if (E == 0) o.KO.push(N + ' x2="1"' + Q + ">");
      if (E == 1) {
        if (S[2][6] != 0) {
          var I = (S[2][5] * Math.PI) / 180,
            O = S[2][6];
          o.KO.push(
            N +
              ' cx="0" cy="0" r="1" fx="' +
              k(Math.cos(I) * O, d) +
              '" fy="' +
              k(-Math.sin(I) * O, d) +
              '"' +
              Q +
              ">"
          );
        } else o.KO.push(N + ' cx="0" cy="0" r="1"' + Q + ">");
      }
      var s = S[1];
      for (var y = 0; y < s.length; y++) {
        var p = s[y],
          F = p[0],
          g = p[1],
          w = p[2];
        w = w == 1 ? "" : ' stop-opacity="' + k(w, d) + '"';
        var r = F == 0 && P.O2 ? "" : ' offset="' + k(F, d) + '"',
          eQ = v(g);
        eQ = P.O2 && eQ == "#000000" ? "" : ' stop-color="' + U(eQ) + '"';
        o.KO.push(W(3) + "<stop" + r + eQ + w + "/>");
      }
      o.KO.push(W(2) + "</" + A + ">");
    }
    hY.cR = $;
    return G;
  })();
  hY.cn = function (j, q, m, n, G) {
    var W = [],
      k = hY.cn,
      T = !1,
      b = { GM: j, uu: q, lL: [!0, !0, !0], f2: !1, ZW: m, a8e: 0 };
    b.Sx = Math.round(Math.max(j, q) * (0.02 + k.ET(b) * 0.03));
    b._R = k.awD(b);
    b.n0 = k.aCj(b._R, (k.ET(b) < 0.5 ? -1 : 1) * (0.2 + k.ET(b) * 0.3));
    if (k.ET(b) < 0.5) {
      var c = b._R;
      b._R = b.n0;
      b.n0 = c;
    }
    b.a8X = k.ET(b) < 0.4 && k.atl(b.n0, { o: 1, i: 1, X: 1 }) > 0.3;
    b.a62 = k.ET(b) < 0.5 ? 0 : 1;
    W.push(
      '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ' +
        j +
        " " +
        q +
        '" width="' +
        j +
        '" height="' +
        q +
        '">'
    );
    b.Ww = n[Math.floor(k.Y4(b) * n.length)];
    b._L = n[Math.floor(k.Y4(b) * n.length)];
    W.push("<style>");
    W.push(
      "@font-face {  font-family: " +
        b.Ww[2] +
        ";  src: url(" +
        lw.P0("rsrc/fonts/" + b.Ww[5]) +
        ");  }"
    );
    W.push(
      "@font-face {  font-family: " +
        b._L[2] +
        ";  src: url(" +
        lw.P0("rsrc/fonts/" + b._L[5]) +
        ");  }"
    );
    W.push("</style>");
    var a = [0, 0, j, q],
      f = a;
    if (G == null)
      W.push(
        '<path style="fill: ' +
          k.pE(b._R) +
          '" d="' +
          k.Rect(a[0], a[1], a[2] - a[0], a[3] - a[1]) +
          '" id="Background" />'
      );
    else {
      b.f2 = !0;
      k.a65(b, a, W, G);
    }
    if (k.ET(b) < 0.25 && !b.f2) {
      b.lL[0] = b.lL[2] = !1;
      k.avS(a, b, W);
      f = a;
    } else if (k.ET(b) < 0.25 || b.f2) f = a;
    else {
      var U = 0.52 + k.ET(b) * 0.2;
      if (k.ET(b) < 0.5) U = 1 - U;
      var Z = a.slice(0),
        h = a.slice(0);
      if (k.ET(b) < 0.5) Z[2] = h[0] = Math.round(U * j);
      else Z[3] = h[1] = Math.round(U * q);
      if (k.ET(b) < 0.5) {
        var c = Z;
        Z = h;
        h = c;
      }
      f = Z;
      k.aA7(b, h, W, G);
    }
    k.a17(b, f, W);
    W.push("</svg>");
    W = W.join("\n");
    var u = B.j(Math.round(W.length * 1.5)),
      i = M.YG(W, u, 0);
    return [u.buffer.slice(0, i), b.NP];
  };
  hY.cn.avS = function (j, q, m) {
    var n = hY.cn,
      G = j[2] - j[0],
      W = j[3] - j[1];
    if (n.ET(q) < 0.5) {
      m.push(
        '<path id="Border" style="fill: ' +
          n.pE(q.n0) +
          '" d="' +
          n.a6i(j[0], j[1], j[2] - j[0], j[3] - j[1], q.Sx) +
          '" />'
      );
    } else {
      var k = n.ET(q) < 0.5 ? 0 : 1,
        T = (k == 0 ? W : G) / 4,
        b = n.ut(q, k, j, m, T, !0),
        b = n.ut(q, k + 2, j, m, T, !0, b);
    }
  };
  hY.cn.a17 = function (j, q, m) {
    var n = hY.cn,
      G =
        "Hello World!-What a beautiful day.-What Is Love?-Baby, don't hurt me.-Is This a Real Life?-Is this a fantasy?-Wake Me Up!-Before you go go.-I Saw The Sign.-And it opened up my mind!".split(
          "-"
        ),
      W = 2 * Math.floor((n.ET(j) * G.length) / 2),
      k = q[2] - q[0],
      T = q[3] - q[1],
      c = 0,
      f = 0;
    j.gM = (j.GM + k) * 0.5 * (0.04 + n.ET(j) * 0.05);
    j.gM = Math.min(j.gM, T * 0.4, k * 0.12);
    j.gM = Math.round(j.gM);
    var b = Math.min(j.gM * G[W].length * (0.35 + 0.3 * n.ET(j)), k * 0.9),
      a = (q[1] + q[3]) / 2,
      U = B.Sn(j._R) < 0.85 ? { o: 1, i: 1, X: 1 } : { o: 0.1, i: 0.1, X: 0.1 };
    if (n.ET(j) < 0.25 && j.lL[0]) {
      f = 0;
      c = q[0] + j.Sx;
    } else if (n.ET(j) < 0.33 && j.lL[2]) {
      f = 2;
      c = q[2] - j.Sx;
    } else {
      f = 1;
      c = (q[0] + q[2]) / 2;
    }
    var Z = U.o == 1 ? "0,0,0" : "255,255,255",
      h = j.f2 && n.ET(j) < 1;
    if (h) {
      var u = q[0],
        i = k,
        x = a - j.gM * 1.1,
        X = j.gM * 2.2,
        $ = 0.7;
      if (f == 1 && n.ET(j) < 0.5) {
        u = x = 0.2 * Math.min(k, T);
        i = k - 2 * x;
        X = T - x - x;
      } else if (n.ET(j) < 0.7) {
        u = x = 0;
        i = k;
        X = T;
        $ = 0.25;
      }
      m.push(
        '<path id="Strip" style="fill: rgb(' +
          Z +
          "); opacity: " +
          $ +
          '" d="' +
          n.Rect(u, x, i, X) +
          '" />'
      );
    }
    if (n.ET(j) < 0.4) {
      var H = j.gM * 0.07;
      H *= 1.5 + n.ET(j) * 1;
      if (f == -1 && k / T < 3 && !h) {
        m.push(
          '<path id="Bar-bottom" style="fill: ' +
            n.pE(U) +
            '" d="' +
            n.Rect(c - b / 2, a + j.gM * 1.1 - H / 2, b, H) +
            '" />'
        );
        m.push(
          '<path id="Bar-top"    style="fill: ' +
            n.pE(U) +
            '" d="' +
            n.Rect(c - b / 2, a - j.gM * 1.1 - H / 2, b, H) +
            '" />'
        );
      }
      if (f != 1) {
        m.push(
          '<path id="Bar" style="fill: ' +
            n.pE(U) +
            '" d="' +
            n.Rect(c - H / 2, a - j.gM * 0.8, H, j.gM * 0.8 * 2) +
            '" />'
        );
        c += ((f == 0 ? 1 : -1) * j.gM) / 3;
      }
    }
    var C = j.gM * 0.4;
    m.push(n.aa0(G[W + 1], c, a + C * 1.6, C, U, f, j._L));
    m.push(n.aa0(G[W], c, a + j.gM * 0.04, j.gM, U, f, j.Ww));
  };
  hY.cn.aA7 = function (j, q, m, n) {
    var G = q[2] - q[0],
      W = q[3] - q[1],
      k = Math.max(G, W),
      T = Math.min(G, W),
      b = hY.cn;
    if (k / T < 5 && !j.f2 && !1) {
      b.a65(j, q, m, n);
    } else if (b.ET(j) < 0)
      m.push(
        '<path style="fill: ' +
          b.pE(j.n0) +
          '" d="' +
          b.Rect(q[0], q[1], G, W) +
          '" />'
      );
    else {
      var c = 0;
      if (q[3] != j.uu) c = 0;
      if (q[2] != j.GM) c = 3;
      if (q[0] != 0) c = 1;
      if (q[1] != 0) c = 2;
      var a = (c + 2) & 3;
      if (k / T < 3) {
        var f = b.ajU(a),
          U = f[Math.round(b.ET(j) * (f.length - 1))],
          Z = U.eA.slice(0, 4),
          h = Z.indexOf(1);
        U = B.S(U);
        var u = -1;
        if (Z != "0000") {
          var i = new k$();
          if (U.eA[5] == "0") {
            if (h == 3 && c == 1) {
              u = 1;
              i.scale(-1, 1);
            } else u = h;
          } else {
            var x = a;
            while (x == a) x = Math.floor(b.ET(j) * 4) & 3;
            i.rotate(((-h + x) * Math.PI) / 2);
          }
          b.u(U, i);
        }
        var X = b.RD(U),
          $ = G - 2 * j.Sx,
          H = W - 2 * j.Sx;
        if (u != -1) {
          if ((u & 1) == 0) H -= j.Sx;
          else $ -= j.Sx;
        }
        var C = Math.min($ / X.r, H / X.$),
          l = new k$();
        l.translate(-X.x, -X.y);
        l.scale(C, C);
        var v = (G - X.r * C) / 2,
          K = (W - X.$ * C) / 2;
        if (u != -1) {
          if (u == 3) v = 0;
          if (u == 0) K = 0;
          if (u == 1) v = G - X.r * C;
          if (u == 2) K = W - X.$ * C;
        }
        l.translate(q[0] + v, q[1] + K);
        b.jy(j, U, l, j.n0, m);
      } else {
        b.ut(j, c, q, m, 1e9);
      }
    }
  };
  hY.cn.a65 = function (j, q, m, n) {
    var G = q[2] - q[0],
      W = q[3] - q[1],
      k = Math.max(G, W),
      T = Math.min(G, W),
      b = hY.cn,
      c = b.Y4(j),
      a,
      f,
      U,
      Z = n[0] instanceof ArrayBuffer;
    if (Z) {
      a = "data:image/jpg;base64," + jc.Uf(n[0]);
      f = n[1];
      U = n[2];
    } else {
      var h = Math.floor(c * n.length),
        u = n[h];
      j.NP = u;
      a = u.webformatURL;
      f = u.webformatWidth;
      U = u.webformatHeight;
    }
    var i = q[0],
      x = q[1],
      X = G,
      $ = W;
    if (G / W > f / U) {
      $ = (X * U) / f;
      x = x - ($ - W) / 2;
    } else {
      X = ($ * f) / U;
      i = i - (X - G) / 2;
    }
    if (Z) {
      m.push("<defs>");
      m.push(
        '<image width="' +
          f +
          '" height="' +
          U +
          '" id="Background" href="' +
          a +
          '" />'
      );
      m.push("</defs>");
      var H = X / f;
      m.push(
        '<use href="#Background" transform="' +
          hY.cR(new k$(H, 0, 0, H, i, x)) +
          '" />'
      );
    } else {
      var C = "cp" + Math.random();
      m.push('<clipPath id="' + C + '">');
      m.push(
        '<path style="fill: ' +
          b.pE(j.n0) +
          '" d="' +
          b.Rect(q[0], q[1], G, W) +
          '" />'
      );
      m.push("</clipPath>");
      m.push(
        '<image  clip-path="url(#' +
          C +
          ')" xlink:href="' +
          a +
          '" x="' +
          i +
          '" y="' +
          x +
          '" width="' +
          X +
          '" height="' +
          $ +
          '" />'
      );
    }
  };
  hY.cn.aa0 = function (j, q, m, n, G, W, k) {
    var T = hY.cn;
    return (
      '<text x="' +
      q +
      '" y="' +
      m +
      '" style="fill:' +
      T.pE(G) +
      "; font-size:" +
      n +
      "px; text-anchor:" +
      ["start", "middle", "end"][W] +
      "; font-family:" +
      k[2] +
      ';"><tspan>' +
      j +
      "</tspan></text>"
    );
  };
  hY.cn.jy = function (j, q, m, n, G) {
    var W = hY.cn,
      k = [];
    for (var y = 0; y < q.PG.length; y++) {
      k.push(n);
      if (j.a8X) {
        n = (y & 1) == j.a62 ? { o: 1, i: 1, X: 1 } : k[0];
      }
    }
    G.push(
      '<g id="' +
        q.eA.split("-")[2] +
        ':::" style="transform: ' +
        hY.cR(m) +
        ';" >'
    );
    for (var y = 0; y < q.PG.length; y++) {
      var T = q.PG[y];
      n = k.pop();
      G.push(
        '<path style="fill: ' +
          (n ? W.pE(n) : "#" + T[0]) +
          '" d="' +
          Typr.U.pathToSVG({ crds: T[1].L, cmds: T[1].RC }) +
          '" />'
      );
    }
    G.push("</g>");
  };
  hY.cn.afH = function () {
    if (SHPS[0].eA) return;
    for (var y = 0; y < SHPS.length; y++) {
      var j = SHPS[y],
        q = j[1],
        m = [];
      for (var n = 0; n < q.length; n++) {
        var G = q[n],
          W = Typr.U.SVGToPath(G[1]);
        m.push([G[0], { RC: W.cmds, L: W.crds }]);
      }
      SHPS[y] = { eA: j[0], PG: m };
    }
  };
  hY.cn.ajU = function (j) {
    var q = SHPS;
    hY.cn.afH();
    var m = [];
    for (var y = 0; y < q.length; y++) {
      var n = q[y],
        G = n.eA.slice(0, 4);
      if (G == "0000") {
        m.push(n);
        continue;
      }
      if (["1000", "0100", "0010", "0001"].indexOf(G) == -1) continue;
      var W = G.indexOf("1");
      if (n.eA[5] == "0" && j == W && W != 3) continue;
      m.push(n);
    }
    return m;
  };
  hY.cn.ut = function (j, q, m, n, G, W, k) {
    var T = SHPS,
      X,
      $;
    hY.cn.afH();
    var b = hY.cn,
      c = [];
    for (var y = 0; y < T.length; y++) {
      var a = T[y],
        f = a.eA.slice(0, 4);
      if (["1110", "1101", "1011", "0111"].indexOf(f) == -1) continue;
      var U = (f.indexOf("0") + 2) & 3;
      if (a.eA[5] == "0")
        if (W == !0 || (q != U && !(q == 1 && U == 3))) continue;
      c.push(a);
    }
    var Z = k != null ? k : Math.floor(b.ET(j) * c.length),
      a = c[Z],
      a = B.S(a),
      f = a.eA.slice(0, 4),
      U = (f.indexOf("0") + 2) & 3;
    if (U == 3 && q == 1) B.u(a, new k$(1, 0, 0, -1, 0, 1e3));
    var h = new k$();
    h.translate(-500, -500);
    h.rotate((-U * Math.PI) / 2);
    h.translate(500, 500);
    b.u(a, h);
    var u = m[3] - m[1],
      i = m[2] - m[0],
      x = b.RD(a);
    if (x.y < 0) {
      x.$ += x.y;
      x.y = 0;
    }
    if (x.y > 0) {
      x.$ += x.y;
      x.y = 0;
    }
    if ((q & 1) == 0) {
      $ = u;
      X = i;
    } else {
      X = u;
      $ = i;
    }
    var H = Math.min(Math.min(0.5 + 0.5 * b.ET(j)) * Math.min(i, u), G) / x.$,
      C = Math.ceil(X / (1e3 * H)),
      l = new k$(),
      v = new k$();
    v.scale(H, H);
    if (q == 0 || q == 2) {
      v.translate(-(i / 2), -(u / 2));
      v.rotate((-q * Math.PI) / 2);
      v.translate(i / 2 + m[0], u / 2 + m[1]);
    } else {
      v.rotate(Math.PI / 2);
      v.scale(1, -1);
      v.translate(m[0], m[1]);
      if (q == 1) {
        v.scale(-1, 1);
        v.translate(i, 0);
      }
    }
    n.push('<g id="Border-' + ["top", "right", "bottom", "left"][q] + ':::">');
    for (var y = 0; y < C; y++) {
      var K = l.P();
      K.concat(v);
      b.jy(j, a, K, j.n0, n);
      l.translate(1e3 - 2, 0);
    }
    n.push("</g>");
    return Z;
  };
  hY.cn.Rect = function (j, q, m, n) {
    return Typr.U.pathToSVG({
      crds: [j, q, j + m, q, j + m, q + n, j, q + n],
      cmds: ["M", "L", "L", "L", "Z"],
    });
  };
  hY.cn.a6i = function (j, q, m, n, G) {
    var W = [j, q, j + m, q, j + m, q + n, j, q + n];
    j += G;
    q += G;
    m -= 2 * G;
    n -= 2 * G;
    W.push(j, q, j, q + n, j + m, q + n, j + m, q);
    return Typr.U.pathToSVG({
      crds: W,
      cmds: "M L L L Z M L L L Z".split(" "),
    });
  };
  hY.cn.aCj = function (j, q) {
    var m = B.r0(j.o, j.i, j.X);
    m.I0 = Math.max(0.1, Math.min(0.9, m.I0 + q));
    return B.wL(m.uu, m.fO, m.I0);
  };
  hY.cn.a3E = function (j, q) {
    var m = B.r0(j.o, j.i, j.X);
    m.uu += q;
    return B.wL(m.uu, m.fO, m.I0);
  };
  hY.cn.aqU = function (j) {
    var q = B.r0(j.o, j.i, j.X);
    q.I0 = 1 - q.I0;
    return B.wL(q.uu, q.fO, q.I0);
  };
  hY.cn.atl = function (j, q) {
    var m = j.o - q.o,
      n = j.i - q.i,
      G = j.X - q.X;
    return Math.sqrt(m * m + n * n + G * G);
  };
  hY.cn.awD = function (j) {
    var q = hY.cn;
    return { o: q.ET(j), i: q.ET(j), X: q.ET(j) };
  };
  hY.cn.pE = function (j) {
    return CSS.WG({ o: j.o * 255, i: j.i * 255, X: j.X * 255 });
  };
  hY.cn.RD = function (j) {
    var q = j.PG,
      m = new hk();
    for (var y = 0; y < q.length; y++) m = m.vd(B.b.RD(q[y][1].L));
    return m;
  };
  hY.cn.u = function (j, q) {
    var m = j.PG;
    for (var y = 0; y < m.length; y++) B.b.u(m[y][1].L, q, m[y][1].L);
  };
  hY.cn.ET = function (j) {
    j.a8e++;
    var q = j.a8e & 3;
    if (q == 0) j.ZW = hY.cn.Dv(j.ZW);
    var m = (j.ZW >>> (8 * q)) & 255;
    return m * (0.99999999 / 255);
  };
  hY.cn.Y4 = function (j) {
    var q = hY.cn.Dv(j.ZW);
    j.ZW = hY.cn.Dv(q);
    return q * (1 / 4294967295);
  };
  hY.cn.Dv = function (j) {
    j = (j ^ 61 ^ (j >>> 16)) >>> 0;
    j = (j + (j << 3)) >>> 0;
    j = (j ^ (j >>> 4)) >>> 0;
    j = (j * 668265261) >>> 0;
    j = (j ^ (j >>> 15)) >>> 0;
    return j;
  };
  var ds = {};
  ds.parse = function (j) {
    var q = new Uint8Array(j),
      m = null;
    if (q[0] == 80 && q[1] == 75) {
      var n = Date.now(),
        G = UZIP.parse(q.buffer),
        m = G["document.json"];
      m = JSON.parse(M.K6(m, 0, m.length));
      ds.hm(m, G);
    } else {
      var W = dv.parse(j);
      m = ds.acr(W[2][0][1]);
    }
    return m;
  };
  ds.hm = function (j, q) {
    var m = typeof j;
    if (m == "string" || m == "number" || m == "boolean" || j == null) return j;
    if (j instanceof Array) {
      for (var y = 0; y < j.length; y++) j[y] = ds.hm(j[y], q);
      return j;
    }
    var n = j._class;
    if (n == null) return j;
    if (n == "MSJSONFileReference") {
      var G = j._ref;
      if (!1) {
      } else if (q[G + ".json"] != null) {
        var W = q[G + ".json"],
          k = W.length;
        for (var y = 0; y < k; y++) if (W[y] == 11 || W[y] == 3) W[y] = 32;
        var T = M.K6(W, 0, k);
        j = JSON.parse(T);
      } else if (q[G + ".png"] != null)
        return { key: G.split("/").pop(), bdata: q[G + ".png"] };
      else if (q[G + ".jpg"] != null)
        return { key: G.split("/").pop(), bdata: q[G + ".jpg"] };
      else if (q[G + ".pdf"] != null)
        return { key: G.split("/").pop(), bdata: q[G + ".pdf"] };
      else if (q[G] != null) return { key: G.split("/").pop(), bdata: q[G] };
      else {
        console.log(j, q);
        return;
      }
    } else if (n == "MSAttributedString") {
      var T = atob(j.archivedAttributedString._archive),
        b = T.length,
        c = new Uint8Array(b);
      for (var y = 0; y < b; y++) c[y] = T.charCodeAt(y);
      j.archivedAttributedString = ds.acr(c);
    }
    for (var a in j) j[a] = ds.hm(j[a], q);
    return j;
  };
  ds.auN = function (j, q, m, n, G) {
    if (j instanceof Uint8Array) return null;
    if (n.indexOf(j) != -1) return null;
    n.push(j);
    if (j == q) return m;
    for (var W in j) {
      m.push(W);
      var k = ds.auN(j[W], q, m, n, G);
      if (k) {
        console.log(j, k);
        throw "e";
      }
      m.pop();
    }
  };
  ds.acr = function (j) {
    var q = fs.parse(j, 0),
      m = q.$objects,
      n = new Uint8Array(m.length),
      G = ds.ij(m, n, q.$top.root);
    for (var y = 0; y < m.length; y++)
      if (n[y] == 0 && y != 0) {
        console.log(y, m[y]);
        ds.auN(G, y, [], [], typeof m[y]);
      }
    for (var y = 0; y < m.length; y++) {
      var W = m[y];
      if (
        W._class &&
        (W._class == "bitmap" ||
          (W._class == "fill" && W.fillType == 4 && (W.image || W.imageSHA)))
      ) {
        var k = W.image,
          T = W.imageSHA,
          b = null,
          c = null;
        if (k == "$null") k = null;
        if (T == "$null") T = null;
        if (k && k.data) {
          c = k.sha1["NS.bytes"];
          c = btoa(M.IH(c, 0, c.length));
          b = k.data instanceof Uint8Array ? k.data : k.data["NS.bytes"];
        } else if (k == null && T == null) {
          var a = gh.lj("PNG").Ev([[B.j(4).buffer]], 1, 1);
          b = new Uint8Array(a);
        } else {
          var f = (G.assets ? G.assets.imageCollection : G.images).images;
          if (T) c = T instanceof Uint8Array ? T : T["NS.bytes"];
          else c = k.sha1["NS.bytes"];
          c = btoa(M.IH(c, 0, c.length));
          var b = f[c].data;
          if (b["NS.bytes"]) b = b["NS.bytes"];
        }
        b = new Uint8Array(
          b.buffer.slice(b.byteOffset, b.byteOffset + b.length)
        );
        delete W.imageSHA;
        W.image = { key: c, bdata: b };
      }
    }
    return G;
  };
  ds.ajN = function (j) {
    return j.slice(0, 11) == "MSImmutable" ? "MS" + j.slice(11) : j;
  };
  ds.ij = function (j, q, m) {
    var n = j[m];
    if (q[m] == 1) {
      return n;
    }
    q[m] = 1;
    if (typeof n == "string") return n;
    if (typeof n == "number") return n;
    if (typeof n == "boolean") return n;
    if (n instanceof Array) return n;
    if (n instanceof Uint8Array) {
      return n;
    }
    if (j[n.$class] == null) {
      if (n.$class == null && n["NS.data"] != null) return n;
      console.log(m, n);
      throw "e";
    }
    var G = j[n.$class],
      W = ds.ajN(G.$classname);
    q[n.$class] = 1;
    n.$class = W;
    if (ds.aHt[W]) {
      delete n.$class;
      n._class = ds.aHt[W];
    }
    var k = ds.ij;
    if (W == "NSMutableArray" || W == "NSArray") {
      var T = [];
      if (n["NS.objects"] != null)
        for (var y = 0; y < n["NS.objects"].length; y++)
          T.push(k(j, q, n["NS.objects"][y]));
      else
        for (var y = 0; n["NS.object." + y] != null; y++)
          T.push(k(j, q, n["NS.object." + y]));
      j[m] = T;
      return T;
    }
    if (W == "NSDictionary" || W == "NSMutableDictionary") {
      var b = { $class: W };
      if (n["NS.keys"] != null)
        for (var y = 0; y < n["NS.keys"].length; y++) {
          var c = k(j, q, n["NS.keys"][y]);
          if (c instanceof Uint8Array) c = btoa(ds.J4.IH(c, 0, c.length));
          else if (typeof c != "string" && typeof c != "number")
            c = btoa(ds.J4.IH(c["NS.bytes"], 0, c["NS.bytes"].length));
          b[c] = k(j, q, n["NS.objects"][y]);
        }
      else
        for (var y = 0; n["NS.key." + y] != null; y++) {
          var c = k(j, q, n["NS.key." + y]);
          if (c instanceof Uint8Array) c = btoa(ds.J4.IH(c, 0, c.length));
          else if (typeof c != "string" && typeof c != "number")
            c = btoa(ds.J4.IH(c["NS.bytes"], 0, c["NS.bytes"].length));
          b[c] = k(j, q, n["NS.object." + y]);
        }
      for (var a in n) delete n[a];
      for (var a in b) n[a] = b[a];
      return n;
    }
    if (W == "NSURL")
      return {
        $class: W,
        base: k(j, q, n["NS.base"]),
        relative: k(j, q, n["NS.relative"]),
      };
    if (ds.akA.indexOf(W) != -1) {
      j[m] = k(j, q, n.array_do);
      return j[m];
    }
    if (n.do_objectID != null) n.do_objectID = k(j, q, n.do_objectID);
    if (ds.aBk.indexOf(W) != -1) return n;
    var f = ds.a4S[W];
    if (f == null) {
      console.log(j, n);
      throw "unknown class " + W;
    }
    for (var y = 0; y < f.length; y++)
      if (n[f[y]] != null) n[f[y]] = k(j, q, n[f[y]]);
    if (W == "MSTextLayer") {
      var U = n,
        Z,
        h,
        u,
        i;
      if (U.attributedString) Z = U.attributedString.archivedAttributedString;
      else Z = U.storage;
      i = Z.NSString;
      if (typeof i != "string")
        i = M.K6(i["NS.bytes"], 0, i["NS.bytes"].length);
      if (Z.NSAttributeInfo) h = Z.NSAttributeInfo["NS.bytes"];
      else {
        var x = i.length,
          X = [];
        while (x > 0) {
          var $ = Math.min(100, x);
          X.push($, 0);
          x -= $;
        }
        h = new Uint8Array(X);
      }
      u = Z.NSAttributes instanceof Array ? Z.NSAttributes : [Z.NSAttributes];
      var H = { $class: "NSAttributedString", NSString: i, NSAttributes: u };
      U.attributedString = {
        _class: "MSAttributedString",
        archivedAttributedString: H,
      };
      H.NSAttributeInfo = { $class: "NSMutableData", "NS.data": h };
      delete U.storage;
    }
    return n;
  };
  ds.J4 = {
    _h: function (j, q) {
      return (j[q + 1] << 8) | j[q];
    },
    Z$: function (j, q) {
      return (j[q + 3] << 24) | (j[q + 2] << 16) | (j[q + 1] << 8) | j[q];
    },
    IH: function (j, q, m) {
      var n = "";
      for (var y = 0; y < m; y++) n += String.fromCharCode(j[q + y]);
      return n;
    },
  };
  ds.aHt = {
    MSPage: "page",
    MSArtboardGroup: "artboard",
    MSShapeGroup: "shapeGroup",
    MSLayerGroup: "group",
    MSBitmapLayer: "bitmap",
    MSTextLayer: "text",
    MSSliceLayer: "slice",
    MSSymbolMaster: "symbolMaster",
    MSSymbolInstance: "symbolInstance",
    MSStyleFill: "fill",
    MSShapePathLayer: "shapePath",
    MSRectangleShape: "rectangle",
    MSOvalShape: "oval",
    MSTriangleShape: "triangle",
  };
  ds.akA = [
    "MSArray",
    "MSFillStyleCollection",
    "MSBorderStyleCollection",
    "MSShadowStyleCollection",
    "MSInnerShadowStyleCollection",
  ];
  ds.aBk =
    "MSArchivedColor MSLayoutGrid MSSimpleGrid MSColor MSRect MSStyleColorControls MSGraphicsContextSettings NSMutableString NSMutableData NSDecimalNumberPlaceholder MSStyleReflection".split(
      " "
    );
  ds.a4S = {
    MSAssetCollection: ["gradients", "colors", "imageCollection", "images"],
    MSImageCollection: ["images"],
    MSSharedStyleContainer: ["objects"],
    MSSharedTextStyleContainer: ["objects"],
    MSSharedLayerStyleContainer: ["objects"],
    MSSharedLayerTextStyleContainer: ["objects"],
    MSSharedLayerContainer: ["objects"],
    MSSymbolContainer: ["objects"],
    MSGradient: ["stops", "from", "to", "points"],
    MSGradientStop: ["color"],
    MSStyleFill: ["color", "gradient", "contextSettings", "image", "imageSHA"],
    MSExportFormat: ["fileFormat", "name"],
    MSExportOptions: ["exportFormats", "includedLayerIds", "sizes"],
    MSRulerData: ["guides"],
    MSStyle:
      "textStyle fills contextSettings sharedObjectID borders blur shadows innerShadows borderOptions colorControls reflection".split(
        " "
      ),
    MSSharedStyle: ["name", "value"],
    MSSymbol: ["name", "value"],
    MSAttributedString: ["archivedAttributedString"],
    MSSharedLayerStyle: ["name", "value", "instances"],
    MSSharedLayer: ["name", "value", "instances"],
    MSDocumentData:
      "assets layerStyles pages layerTextStyles layerSymbols images userInfo cloudShareID cloudShareURL cloudUserID".split(
        " "
      ),
    MSShapePathLayer:
      "exportOptions frame name userInfo path originalObjectID".split(" "),
    MSOvalShape:
      "exportOptions frame name userInfo path originalObjectID".split(" "),
    MSRectangleShape:
      "exportOptions frame name userInfo path originalObjectID".split(" "),
    MSPolygonShape:
      "exportOptions frame name userInfo path originalObjectID".split(" "),
    MSTriangleShape:
      "exportOptions frame name userInfo path originalObjectID".split(" "),
    MSStarShape:
      "exportOptions frame name userInfo path originalObjectID".split(" "),
    MSBitmapLayer:
      "exportOptions frame name userInfo style imageSHA nineSliceCenterRect nineSliceScale image clippingMask originalObjectID".split(
        " "
      ),
    MSTextLayer:
      "exportOptions frame name userInfo style originalObjectID attributedString glyphBounds storage".split(
        " "
      ),
    MSShapeGroup:
      "exportOptions frame name userInfo style originalObjectID layers".split(
        " "
      ),
    MSLayerGroup:
      "exportOptions frame name userInfo style originalObjectID layers sharedObjectID".split(
        " "
      ),
    MSArtboardGroup:
      "exportOptions frame name userInfo style layers horizontalRulerData verticalRulerData layout grid backgroundColor".split(
        " "
      ),
    MSPage:
      "exportOptions frame name userInfo style layers horizontalRulerData verticalRulerData layout grid scrollOrigin".split(
        " "
      ),
    MSSymbolMaster:
      "exportOptions frame name userInfo style layers horizontalRulerData verticalRulerData layout grid originalObjectID symbolID backgroundColor".split(
        " "
      ),
    MSSymbolInstance:
      "exportOptions frame name userInfo style symbolID overrides masterInfluenceBounds originalObjectID".split(
        " "
      ),
    MSSliceLayer: [
      "exportOptions",
      "frame",
      "name",
      "userInfo",
      "backgroundColor",
    ],
    MSTextStyle: ["attributes", "encodedAttributes"],
    MSShapePath: ["points"],
    MSPointArray: ["points"],
    MSImageData: ["data", "sha1", "name"],
    MSCurvePoint: ["curveFrom", "curveTo", "point"],
    MSImageProxy: ["sha1"],
    MSStyleBorder: ["color", "gradient", "contextSettings"],
    MSStyleBlur: ["center"],
    MSStyleShadow: ["color", "contextSettings"],
    MSStyleInnerShadow: ["color", "contextSettings"],
    MSExportSize: ["format", "name"],
    MSStyleBorderOptions: ["dashPattern"],
    NSFont: ["NSName", "NSDescriptor"],
    NSColor: ["NSCustomColorSpace"],
    NSFontDescriptor: ["NSFontDescriptorAttributes"],
    NSMutableParagraphStyle: ["NSTextBlocks", "NSTabStops", "NSTextLists"],
    NSAttributedString: ["NSAttributes", "NSString", "NSAttributeInfo"],
    NSTextStorage: ["NSAttributeInfo", "NSAttributes", "NSString"],
    NSColorSpace: ["NSICC"],
    NSParagraphStyle: ["NSTabStops", "NSTextBlocks", "NSTextLists"],
    NSTextList: ["NSMarkerFormat"],
    NSTextTab: ["NSTabOptions"],
    UIFontDescriptor: ["UIFontDescriptorAttributes"],
  };
  var fs = {};
  fs.parse = function (j, q) {
    var m = M.IH(j, q, 8);
    q += 8;
    var n = j.length - 32,
      G = fs.parse.ahR(j, n),
      W = [];
    if (G.Ce == 1) {
      var q = n - G.Ce * G.Oj;
      for (var y = 0; y < G.Oj; y++) W.push(j[q + y]);
    } else if (G.Ce == 2) {
      var q = n - G.Ce * G.Oj;
      for (var y = 0; y < G.Oj; y++) W.push(M._h(j, q + y * 2));
    } else if (G.Ce == 4) {
      var q = n - G.Ce * G.Oj;
      for (var y = 0; y < G.Oj; y++) W.push(M.Z$(j, q + y * 4));
    } else {
      throw "e";
    }
    var k = fs.parse.ij(j, W, G.root, G);
    return k;
  };
  fs.parse.ij = function (j, q, m, n) {
    var G = fs.J4,
      W = n.a8m,
      k = W == 4 ? G.Z$ : W == 2 ? G._h : G.aAX,
      T = fs.parse,
      b = q[m],
      c = j[b],
      a = c >> 4,
      f = c & 15,
      Z = null;
    b += 1;
    if ([4, 5, 6, 10, 12, 13].indexOf(a) != -1 && f == 15) {
      var U = T.dW(j, b);
      b += U.Dh;
      f = U.K;
    }
    if (!1) {
    } else if (a == 0) Z = f == 8 ? !1 : f == 9 ? !0 : null;
    else if (a == 1) Z = T.dW(j, b - 1).K;
    else if (a == 2) Z = 1 << f == 4 ? M.$C(j, b) : M.ro(j, b);
    else if (a == 3) Z = M.ro(j, b);
    else if (a == 4) Z = new Uint8Array(j.buffer, b, f);
    else if (a == 5) Z = M.IH(j, b, f);
    else if (a == 6) Z = M.Jz(j, b, f);
    else if (a == 8) {
      Z = 0;
      for (var y = 0; y < f + 1; y++) Z = (Z << 8) | j[b + y];
    } else if (a == 10) {
      Z = [];
      for (var y = 0; y < f; y++) Z.push(T.ij(j, q, k(j, b + W * y), n));
    } else if (a == 12) {
      Z = [];
      for (var y = 0; y < f; y++) Z.push(T.ij(j, q, k(j, b + W * y), n));
    } else if (a == 13) {
      Z = {};
      for (var y = 0; y < f; y++) {
        var h = T.ij(j, q, k(j, b + W * y), n),
          u = T.ij(j, q, k(j, b + W * (f + y)), n);
        Z[h] = u;
      }
    } else throw "unknown mask " + a;
    return Z;
  };
  fs.parse.dW = function (j, q) {
    var m = 1 << (j[q] & 15),
      n = 0;
    for (var y = 0; y < m; y++) n = (n << 8) | j[q + 1 + y];
    return { K: n, Dh: m + 1 };
  };
  fs.parse.ahR = function (j, q) {
    var m = {};
    q += 6;
    m.Ce = j[q];
    q++;
    m.a8m = j[q];
    q++;
    q += 4;
    m.Oj = M.Z$(j, q);
    q += 4;
    q += 4;
    m.root = M.Z$(j, q);
    q += 4;
    q += 4;
    m.a2F = M.Z$(j, q);
    q += 4;
    return m;
  };
  fs.J4 = {
    aAX: function (j, q) {
      return j[q];
    },
    _h: function (j, q) {
      return (j[q] << 8) | j[q + 1];
    },
    Z$: function (j, q) {
      return (j[q] << 24) | (j[q + 1] << 16) | (j[q + 2] << 8) | j[q + 3];
    },
    IH: function (j, q, m) {
      var n = "";
      for (var y = 0; y < m; y++) n += String.fromCharCode(j[q + y]);
      return n;
    },
  };
  var dv = {
    parse: function (j) {
      var q = new Uint8Array(j),
        m = dv.pw(q),
        n = [],
        G = new Uint8Array(q.length),
        W = [];
      n.push(W);
      dv.qo(q, m, 1, G, W);
      for (var y = 0; y < W.length; y++) {
        var k = [];
        n.push(k);
        dv.qo(q, m, W[y][3], G, k, y == 11);
        W[y][3] = y + 1;
      }
      return n;
    },
    qo: function (j, q, m, n, G, W) {
      m--;
      var k = m * q.$$ + (m == 0 ? 100 : 0),
        T = j[k],
        b = dv._h(j, k + 1),
        c = dv._h(j, k + 3),
        a = dv._h(j, k + 5),
        U = 0;
      if (a == 0) a = 65536;
      var f = j[k + 7];
      k += 8;
      if (T == 2 || T == 5) {
        U = dv.Z$(j, k);
        k += 4;
      }
      for (var Z = 0; Z < c; Z++) {
        var h = m * q.$$ + dv._h(j, k + 2 * Z),
          u = -1,
          i = 0,
          x = 0,
          X = 0;
        if (T == 2 || T == 5) {
          u = dv.Z$(j, h);
          h += 4;
        }
        if (T == 2 || T == 10 || T == 13) {
          i = dv.Y$(j, h);
          h += i.Dh;
        }
        if (T == 5 || T == 13) {
          x = dv.Y$(j, h);
          h += x.Dh;
        }
        if (T == 2 || T == 5) {
          dv.qo(j, q, u, n, G, W);
          continue;
        }
        var $ = q.$$ - (m == 0 ? 100 : 0),
          H = i.YF,
          C = T == 13 ? $ - 35 : Math.floor((($ - 12) * 64) / 255) - 23,
          l = Math.floor((($ - 12) * 32) / 255) - 23,
          v = l + ((H - l) % ($ - 4));
        if (H <= C) {
          dv.wV(j, h, n, 0, H);
        } else {
          var K = v <= C ? v : l,
            S = 0;
          dv.wV(j, h, n, 0, K);
          S += K;
          X = dv.Z$(j, h + K);
          while (X != 0) {
            var o = (X - 1) * q.$$;
            X = dv.Z$(j, o);
            var V = Math.min(q.$$ - 4, H - S);
            dv.wV(j, o + 4, n, S, V);
            S += V;
          }
        }
        G.push(dv.a9A(n, H));
      }
      if (U != 0) dv.qo(j, q, U, n, G, W);
    },
    a9A: function (j, q) {
      var m = 0,
        n = dv.Y$(j, m);
      m += n.Dh;
      var G = [],
        W = [];
      while (m < n.YF) {
        var k = dv.Y$(j, m);
        m += k.Dh;
        G.push(k.YF);
      }
      if (m != n.YF) throw "e";
      for (var y = 0; y < G.length; y++) {
        var k = G[y];
        if (!1) {
        } else if (k == 0) W.push(null);
        else if (k == 1) {
          W.push(dv.ae5(j, m));
          m += 1;
        } else if (k == 2) {
          W.push(dv.A_(j, m));
          m += 2;
        } else if (k == 3) {
          W.push(dv.a9c(j, m));
          m += 3;
        } else if (k == 4) {
          W.push(dv.dW(j, m));
          m += 4;
        } else if (k == 5) {
          W.push(dv.Z$(j, m + 2));
          m += 6;
        } else if (k == 6) {
          W.push(dv.Z$(j, m) + ":" + dv.Z$(j, m + 4));
          m += 8;
        } else if (k == 7) {
          W.push(dv.al4(j, m));
          m += 8;
        } else if (k == 8) W.push(0);
        else if (k == 9) W.push(1);
        else if (k >= 12 && (k & 1) == 0) {
          var T = (k - 12) >> 1,
            b = new Uint8Array(T);
          dv.wV(j, m, b, 0, T);
          W.push(b);
          m += T;
        } else if (k >= 13 && (k & 1) == 1) {
          var T = (k - 13) >> 1;
          W.push(dv.K6(j, m, T));
          m += T;
        } else throw "unknonw type " + k;
      }
      return W;
    },
    pw: function (j) {
      if (
        !(
          j[18] == 1 &&
          j[19] == 1 &&
          j[20] == 0 &&
          j[21] == 64 &&
          j[22] == 32 &&
          j[23] == 32
        )
      )
        throw "unexpected SQL3 header";
      var q = {
        k6: dv.IH(j, 0, 15),
        $$: dv._h(j, 16),
        azQ: dv.Z$(j, 24),
        size: dv.Z$(j, 28),
        aH5: dv.Z$(j, 32),
        auk: dv.Z$(j, 36),
        avf: dv.Z$(j, 40),
        ave: dv.Z$(j, 44),
        afw: dv.Z$(j, 48),
        aBC: dv.Z$(j, 52),
        atL: dv.Z$(j, 56),
        aAa: dv.Z$(j, 60),
        anw: dv.Z$(j, 64) != 0,
        agR: dv.Z$(j, 68),
        a9T: dv.Z$(j, 92),
        aJz: dv.Z$(j, 96),
      };
      if (q.$$ == 1) q.$$ = 65536;
      if (q.atL != 1) throw "unsupported text encoding " + q.atL;
      return q;
    },
    arX: function (j, q) {
      return (j[q] << 16) | (j[q + 1] << 8) | j[q + 2];
    },
    a9c: function (j, q) {
      var m = dv.arX(j, q),
        n = m & 8388608;
      return n ? -(16777215 - m + 1) : m;
    },
    ae5: function (j, q) {
      dv.fv[0] = j[q];
      return dv.a41[0];
    },
    dW: function (j, q) {
      var m = dv.fv;
      for (var y = 0; y < 4; y++) m[y] = j[q + 3 - y];
      return dv.aod[0];
    },
    A_: function (j, q) {
      var m = dv.fv;
      m[0] = j[q + 1];
      m[1] = j[q];
      return dv.aJs[0];
    },
    _h: function (j, q) {
      return (j[q] << 8) | j[q + 1];
    },
    Z$: function (j, q) {
      var m = dv.fv;
      for (var y = 0; y < 4; y++) m[y] = j[q + 3 - y];
      return dv.aLw[0];
    },
    al4: function (j, q) {
      var m = dv.fv;
      for (var y = 0; y < 8; y++) m[y] = j[q + 7 - y];
      return dv.alS[0];
    },
    Y$: function (j, q) {
      var m = q,
        aF = 0;
      while (!0) {
        var n = j[q];
        q++;
        aF = aF * 128 + (n & 127);
        if (n < 128) break;
      }
      return { YF: aF, Dh: q - m };
    },
    IH: function (j, q, m) {
      var n = "";
      for (var y = 0; y < m; y++) n += String.fromCharCode(j[q + y]);
      return n;
    },
    K6: function (j, q, m) {
      var n = "";
      for (var y = 0; y < m; y++) n += "%" + dv.ah5(j[q + y].toString(16));
      try {
        n = decodeURIComponent(n);
        return n;
      } catch (gn) {
        return n;
      }
    },
    wV: function (j, q, m, n, G) {
      if (G != 0 && (j[q + G - 1] == null || m[n + G - 1] == null)) {
        console.log(q, n, G);
        throw "e";
      }
      for (var y = 0; y < G; y++) m[n + y] = j[q + y];
    },
    ah5: function (aF) {
      return aF.length < 2 ? "0" + aF : aF;
    },
  };
  dv.fv = new Uint8Array(8);
  dv.a41 = new Int8Array(dv.fv.buffer);
  dv.aJs = new Int16Array(dv.fv.buffer);
  dv.aod = new Int32Array(dv.fv.buffer);
  dv.aLw = new Uint32Array(dv.fv.buffer);
  dv.alS = new Float64Array(dv.fv.buffer);
  dv.aan = function (j, q) {
    var m = j[0],
      n = {};
    for (var y = 0; y < m.length; y++) {
      var G = m[y],
        W = G[1];
      if (G[0] != "table") continue;
      var k = G[4];
      k = k.slice(k.indexOf("(") + 1, k.indexOf(")"));
      k = k.split(",");
      for (var T = 0; T < k.length; T++) {
        var b = k[T].trim().split(" ")[0];
        if (q && b.startsWith(W)) b = b.slice(W.length);
        k[T] = b;
      }
      var c = (n[W] = []),
        a = j[G[3]];
      for (var T = 0; T < a.length; T++) {
        var f = a[T],
          U = {};
        c.push(U);
        for (var Z = 0; Z < k.length; Z++) {
          if (U[k[Z]] != null) throw "e";
          U[k[Z]] = f[Z];
        }
      }
    }
    return n;
  };
  function cT(j, q, m) {
    this.sk = j;
    this.Kc = q;
    this.aqB = m;
    this.b2 = new ea(0, 0);
    this.zS = -1;
    this.Tx = 0;
    this.td = 0;
    this.d_ = new hk();
    this.Bj = [];
    this.y5 = null;
    this.aog = null;
    this.Mw = null;
    this.Tm = null;
    this.Qv = null;
    this.aDc = null;
  }
  cT.prototype.StartPage = function (j, q, m, n, G) {
    var W = this.Kc,
      k = W.Dc(),
      T = 1,
      b = (m - j) * (n - q);
    if (G != null) b = G;
    while ((b * k * k) / (T * T) > 2 * 8192 * 8192) T++;
    W.scale(1 / T, 1 / T);
    this.aog = [j, q, m, n];
    var T = W.Dc();
    j = Math.round(j * T);
    q = Math.round(q * T);
    m = Math.round(m * T);
    n = Math.round(n * T);
    var c = this.sk,
      a = this.Mw;
    if (a == null) {
      W.Tt = -j;
    } else {
      var f = a[2] - a[0] + 30,
        U = Math.round(m - j) + 30;
      if (this.b2.x + f + U > 8192) {
        W.Tt = -j;
        this.b2.x = 0;
        this.b2.y += this.td + 120;
        this.td = 0;
      } else {
        W.Tt += f;
        this.b2.x += f;
      }
    }
    W.BL = this.b2.y + (this.aqB ? n : -q);
    this.td = Math.max(this.td, Math.round(n - q));
    this.Mw = [j, q, m, n];
    this.ake = [];
    c.U.push(c.to());
  };
  cT.prototype.StartTGroup = function (j) {
    this.dP();
    var q = this.sk;
    q.U.push(q.to());
    var m = cT.V4[j.bmode];
    if (m == null) m = "norm";
    var n = q.dj();
    n.tV("<Group>");
    n.add.lsct = hQ.WR;
    n.hz = m == "norm" ? "pass" : m;
    n.uZ = 24;
    n.yA = Math.round(255 * j.ca);
    this.ake.push(n);
  };
  cT.prototype.EndTGroup = function () {
    this.sk.U.push(this.ake.pop());
  };
  cT.prototype.abw = function () {
    var j = this.sk,
      q = j.U[j.U.length - 1];
    return q;
  };
  cT.prototype.asA = function () {
    var j = this.sk,
      q = j.dj();
    q.tV("Path " + j.U.length);
    this.sk.U.push(q);
    q.uZ |= 16;
    q.add.SoCo = {
      classID: "null",
      Clr: { t: "Objc", v: B.MV.Ia({ o: 0, i: 0, X: 0 }) },
    };
    q.add.vmsk = new R.tm();
    q.add.vstk = eu.rS.i4();
    return q;
  };
  cT.prototype.DJ = function (j, q) {
    var m = { L: j.crds, RC: j.cmds },
      n = B.b.LZ(m, !1);
    B.z.a6O(n, q);
    B.z.La(n, this.Kc);
    return n;
  };
  cT.af7 = function (j, q) {
    for (var y = 0; y < j.length; y++) if (j[y].Np != null) j[y].Np = q;
  };
  cT.C_ = function (j) {
    return B.MV.Ia({ o: j[0] * 255, i: j[1] * 255, X: j[2] * 255 });
  };
  cT.Mq = function (j) {
    return new k$(j[0], j[1], j[2], j[3], j[4], j[5]);
  };
  cT.prototype.Stroke = function (j) {
    if (this.zS != -1 && this.zS != this.Tx) return;
    if (j.pth.cmds.length <= 1) return;
    var q = this.DJ(j.pth, !0),
      k = null;
    if (q.length <= 2) return;
    this._8(j);
    cT.af7(q, -1);
    q[2].Np = 1;
    var m = this.abw(),
      n = eu.rS.i4(null, !0),
      G = j.ctm,
      W = {};
    cT.aCV(W, j);
    eu.rS.write(
      n,
      W,
      Math.sqrt(Math.abs(G[0] * G[3] - G[1] * G[2])) * this.Kc.Dc()
    );
    if (!(j.COLR instanceof Array)) {
      k = B.b.RD(j.pth.crds);
      var T = B.b._c(k);
      B.b.u(T.L, this.Kc, T.L);
      k = B.b.RD(T.L);
    }
    var b = cT.Dl(j.COLR, this.Kc, q),
      c = ["SoFi", "GrFl", "patternFill"].indexOf(b.e),
      a = [eu.dS, eu.GB, eu.Pa][c],
      f = (n.strokeStyleContent.v = { classID: eu.rS.HF[c] });
    for (var y = 0; y < a.length; y++) f[a[y]] = b.K.v[a[y]];
    var U = m != null && m.add.vmsk != null && !m.D1(),
      Z =
        ei == 0 &&
        U &&
        !m.add.vstk.fillEnabled.v &&
        JSON.stringify(n) == m.add.vsjs;
    if (Z) {
      var h = m.add.vmsk.D;
      for (var y = 2; y < q.length; y++) h.push(q[y]);
    } else {
      var u = U && !m.add.vstk.strokeEnabled.v && R.tm.avG(m.add.vmsk.D, q, !0);
      if (u) {
        m.add.vstk = n;
        n.fillEnabled.v = !0;
      } else {
        m = this.asA();
        m.add.vmsk.D = q;
        m.add.vstk = n;
        m.add.vsjs = JSON.stringify(n);
      }
    }
  };
  cT.aCV = function (j, q) {
    j.mm = q.lwidth;
    j.NV = q.mlimit;
    j.QJ = q.dash.slice(0);
    j.vx = q.doff;
    j.h0 = q.ljoin;
    j.kv = q.lcap;
    j.x2 = 1;
  };
  cT.eE = function (j, q) {
    q.lwidth = j.mm * (j.x2 == 2 ? 2 : 1);
    q.mlimit = j.NV;
    q.doff = j.vx;
    q.ljoin = j.h0;
    q.lcap = j.kv;
    q.sal = j.x2;
    q.dash = j.QJ.slice(0);
    if (q.dash.length == 1 && q.dash[0] == 0) q.dash = [];
  };
  cT.prototype.Fill = function (j, q) {
    if (this.zS != -1 && this.zS != this.Tx) return;
    if (j.ca == 0) return;
    var m = j.pth.cmds;
    if (m.length == 0) return;
    if (m.length == 2 && JSON.stringify(m) == '["M","L"]') return;
    var n = B.b.RD(j.pth.crds),
      G = B.b.RD(j.cpth.crds);
    if (n.TM(G).jG()) return;
    var W = j.pth,
      k = UDOC.G.isBox(W, [n.x, n.y, n.x + n.r, n.y + n.$]),
      T = j.cpth,
      b = UDOC.G.isBox(T, [G.x, G.y, G.x + G.r, G.y + G.$]);
    if (k && b && n.C() > G.C() * 2) {
      var c = n.TM(G),
        a = c.x,
        f = c.y,
        U = a + c.r,
        Z = f + c.$;
      W = { cmds: ["M", "L", "L", "L", "Z"], crds: [a, f, U, f, U, Z, a, Z] };
      n = c;
    } else if (
      this.Tm == null &&
      UDOC.G.isBox(W, [n.x, n.y, n.x + n.r, n.y + n.$]) &&
      n.Jn(G)
    ) {
      W = T;
      n = G;
    } else this._8(j);
    var h = this.DJ(W, q),
      u = cT.Dl(j.colr, this.Kc, h),
      i = this.abw(),
      x =
        ei == 0 &&
        i != null &&
        i.yA == Math.round(255 * j.ca) &&
        i.add.vstk != null &&
        !i.add.vstk.strokeEnabled.v &&
        i.add.SoCo &&
        u.e == "SoFi" &&
        JSON.stringify(i.add.SoCo.Clr.v) == JSON.stringify(u.K.v.Clr.v);
    if (x) {
      var X = !1;
      for (var y = 0; y < h.length; y++) {
        if (h[y].Np == 0 || h[y].Np == 2) X = !0;
      }
      if (X) {
        var $ = B.b.RD(B.z.WA(i.add.vmsk.D)),
          H = B.b.RD(B.z.WA(h));
        x = $.TM(H).jG();
      }
    }
    if (x) {
      var C = i.add.vmsk.D;
      for (var y = 2; y < h.length; y++) C.push(h[y]);
    } else {
      i = this.asA();
      delete i.add.SoCo;
      i.add.vmsk.D = R.tm.Fo(h);
      cT.zX(j.colr, i, this.Kc, h);
      cT.aD5(j, i);
    }
  };
  cT.zX = function (j, q, m, n) {
    var G = cT.Dl(j, m, n),
      W = null,
      k = null;
    q.add.vstk.fillEnabled.v = !0;
    if (G.e == "SoFi") {
      W = "SoCo";
      k = eu.dS;
    }
    if (G.e == "GrFl") {
      W = "GdFl";
      k = eu.GB;
    }
    if (G.e == "patternFill") {
      W = "PtFl";
      k = eu.Pa;
    }
    if (W != null) {
      q.add[W] = { classID: "null" };
      for (var y = 0; y < k.length; y++) {
        var T = k[y];
        q.add[W][T] = G.K.v[T];
      }
      if (W == "GdFl") q.add._fstl = G.dZ;
    }
  };
  cT.prototype._8 = function (j) {
    var q = this.sk,
      m = j.cpth,
      n = m.cmds.join(""),
      G = m.crds,
      W = n + " " + G.join(","),
      k = UDOC.G.isBox(m, this.aog);
    if (k && this.Tm == null) return;
    if (W == this.Tm) return;
    this.dP();
    if (!k) {
      this.Tm = W;
      q.U.push(q.to());
      var T = q.dj();
      T.tV("Mask");
      T.add.lsct = hQ.z$;
      T.hz = "pass";
      T.uZ = 24;
      var b = (T.add.vmsk = new R.tm());
      b.D = this.DJ(j.cpth, !0);
      if (UDOC.G.isBox(m)) {
        this.Qv = B.z.zZ(b.D);
        this.Qv.Lh(3, 3);
      } else this.Qv = null;
      this.aDc = T;
    }
  };
  cT.prototype.dP = function () {
    var j = this.sk;
    if (this.Tm != null) {
      var q = j.U.length - 1,
        y = q,
        m = !1;
      while (y >= 0 && j.U[y].add.lsct != hQ.$a) y--;
      var n = this.Qv;
      if (n) {
        var G = new hk(),
          W = q;
        while (W > y) {
          G = j.U[W].Fj(this.sk, !1, !0);
          W--;
        }
        m = n.Jn(G);
      }
      if (m) {
        this.Bj.splice(y, 1);
        j.U.splice(y, 1);
      } else {
        j.U.push(this.aDc);
      }
      this.Tm = null;
    }
  };
  cT.Dl = function (j, q, m) {
    var n, G, W;
    if (j.length != null) {
      n = "SoFi";
      var k = JSON.parse(eu.oy[eu.order.indexOf("SoFi")]);
      G = { t: "Objc", v: k };
      G.v.Clr.v = cT.C_(j);
    } else {
      var T = cT.amz(j, q, m);
      n = "GrFl";
      G = { t: "Objc", v: gg.qm(T, m) };
      W = T;
    }
    return { e: n, K: G, dZ: W };
  };
  cT.amz = function (j, q, m) {
    var n = cT.Mq(j.mat);
    n.concat(q);
    var G = new ea(0, 0),
      W = new ea(0, 0),
      k = new ea(),
      T = j.crds,
      b = j.typ == "rad" ? 1 : 0;
    if (b == 1) {
      var c = 0.7;
      k.x = T[0];
      k.y = T[1];
      G.x = T[3];
      G.y = T[4];
      W.x = G.x;
      W.y = G.y;
      W.x += T[5];
    } else {
      G.x = T[0];
      G.y = T[1];
      W.x = T[2];
      W.y = T[3];
      k.Tu(G.x, G.y);
    }
    n = gg.T$(G, W, n);
    var a = gg.gW(b, n, m);
    gg.AX(a, G, W, k);
    a[1] = B.S(j.grad);
    return a;
  };
  cT.prototype.PutText = function (j, q, m, n) {
    var G = q.charCodeAt(0),
      Z = null;
    if (this.zS != -1 && this.zS != this.Tx) return;
    if (q.length == 0 || (q.length == 1 && (G == 0 || G == 8203))) return;
    this._8(j);
    var W = this.sk,
      k = j.font,
      T = Math.round(255 * j.ca);
    if (j.font.Tmode == 3) T = 0;
    var b = cT.Mq(j.ctm);
    b.concat(this.Kc);
    var c = cT.Mq(k.Tm);
    c.concat(b);
    var a = c.Dc(),
      f = new k$(1 / a, 0, 0, -1 / a, 0, 0);
    f.concat(c);
    var U = k.Tfs * a,
      h = W.U.length - 1;
    while (h >= 0 && W.U[h].add.TySh == null) h--;
    if (
      f.X * f.X + f.ra * f.ra < 0.001 &&
      n == null &&
      h >= 0 &&
      W.U[h].add.TySh &&
      W.U[h].yA == T
    ) {
      var u = W.U[h],
        i = this.Bj[h],
        x = u.add.TySh.u,
        X = (f.Tt - i.apZ) / U,
        $ = Math.abs(X),
        H = x.Sd == f.Sd && x.X == f.X && x.ra == f.ra && x.Jy == f.Jy,
        C = f.BL - i.mh,
        l = H && Math.abs(C) < 1e-5 && $ < 1;
      if (l) {
        Z = u;
        if (X > 0.2 && [".", ",", "?", ":", "!"].indexOf(q) == -1) {
          q = " " + q;
          m += 0.5;
        }
      } else if (H && 0 < C && C < U * 1.7 && i.alh == U) {
        Z = u;
        this.aew(i);
        i.mh = f.BL;
        i.avW = f.Tt;
        q = "\n" + q;
      }
    }
    if (Z == null) {
      h = W.U.length;
      this.Bj[h] = {
        Wi: [],
        E2: 0,
        apZ: f.Tt,
        mh: f.BL,
        avW: f.Tt,
        ap: "",
        alh: U,
      };
      Z = W.dj();
      W.U.push(Z);
      Z.add.lnsr = "rend";
      Z.add.TySh = al.wD(0, 0);
      Z.add.TySh.u = f;
    }
    var i = this.Bj[h];
    i.E2 += m * U;
    i.ap += q;
    i.apZ = f.Tt + m * U;
    var v = Z.add.TySh.s3,
      K = al.WT(v);
    if (n) {
      al.cj(v, 1);
      var S = [0, 0, Math.ceil(n[0] * a), Math.ceil(n[1] * a)];
      al.ms(v, S);
    }
    var o = K.length - 1,
      V = o + q.length;
    al.Fk(v, o, q);
    if (this.y5 == null) this.y5 = al.vJ(v, o, o);
    var P = this.y5;
    P.K2.FontSize = Math.round(U);
    P.K2.Tracking = Math.round(k.Tc * 100);
    P.K2.Underline = k.Tun == 1;
    P.K2.FillColor = { Type: 1, Values: [1, j.colr[0], j.colr[1], j.colr[2]] };
    if (k.Tal != null) P.Th.Justification = k.Tal;
    if (i.Wi.length != 0) {
      P.K2.AutoLeading = !1;
      P.K2.Leading = i.mh - i.Wi[i.Wi.length - 1].y;
    }
    var z = k.Tf;
    z = z.replace(/#2B/g, "+");
    z = z.replace(/#2C/g, "-");
    z = z.replace(/#2D/g, "-");
    z = z.split("+").pop();
    var E = {
      "NimbusRomNo9L-Medi": "NimbusRomNo9L-Med",
      "NimbusRomNo9L-Regu": "NimbusRomNo9L-Reg",
      "NimbusRomNo9L-MediItal": "NimbusRomNo9L-MedIta",
      "NimbusRomNo9L-ReguItal": "NimbusRomNo9L-RegIta",
      CMTT9: "NimbusMono-Regular",
      Arial: "ArialMT",
      "BebasNeue-Regular": "BebasNeueRegular",
    };
    if (E[z]) z = E[z];
    al.gk(P, z);
    al.jD(v, o, V - 1, P);
    Z.Yc();
    Z.yA = T;
  };
  cT.prototype.aew = function (j) {
    j.Wi.push({
      GM: j.E2,
      t: j.ap.slice(j.Wi.length == 0 ? 0 : 1) + "\n",
      x: j.avW,
      y: j.mh,
      fO: j.alh,
    });
    j.E2 = 0;
    j.ap = "";
  };
  cT.prototype.sm = function (j, q, m) {
    var n = gh.lj("PNG"),
      G = ei == 1 ? n.S4(j.buffer, q, m, 8) : n.Ev([[j.buffer, 0]], q, m);
    return new Uint8Array(G);
  };
  cT.prototype.PutImage = function (j, q, m, n, G, W, k) {
    if (this.zS != -1 && this.zS != this.Tx) return;
    var T = this.sk,
      b = j.font.Tmode;
    if (b == 7 && T.U[T.U.length - 1].add.TySh) {
      return;
    }
    this._8(j);
    var c = cT.Mq(j.ctm);
    c.concat(this.Kc);
    var a = new k$(1 / m, 0, 0, -1 / n, 0, 1);
    a.concat(c);
    c = a;
    q = cT.aHB(q, m, n, W, !1);
    if (G) G = cT.aHB(G, m, n, k, !0);
    if (G == null) {
      if (q.length == m * n * 4) q = this.sm(q, m, n);
    } else {
      q = this.a7H(q, m, n, W, !1);
      G = this.a7H(G, m, n, k, !0);
      var f = B.j(m * n);
      B.Ih(G, f, 0);
      B.ln(f, q, 3);
      q = this.sm(q, m, n);
    }
    var U = T.Pi(q, "Bitmap", 0, 0),
      Z = new hk(0, 0, m, n),
      h = B.b._c(Z).L;
    B.b.u(h, c, h);
    U.add.SoLd.Trnf = L.Dq.be(h);
    U.add.SoLd.nonAffineTransform = L.Dq.be(h);
    U.yZ(T, !1);
    cT.aD5(j, U);
    T.U.push(U);
  };
  cT.aD5 = function (j, q) {
    q.yA = Math.round(255 * j.ca);
    var m = cT.V4[j.bmode];
    if (m == null) console.log("Unknown blend mode", m);
    else q.hz = m;
  };
  cT.V4 = {
    "/Normal": "norm",
    "/Multiply": "mul ",
    "/Screen": "scrn",
    "/Overlay": "over",
    "/Darken": "dark",
    "/Lighten": "lite",
    "/ColorDodge": "div ",
    "/ColorBurn": "idiv",
    "/HardLight": "hLit",
    "/SoftLight": "sLit",
    "/Difference": "diff",
    "/Exclusion": "smud",
    "/Hue": "hue ",
    "/Saturation": "sat ",
    "/Color": "colr",
    "/Luminosity": "lum ",
  };
  cT.ap7 = function (j) {
    if (j == "pass") j = "norm";
    for (var q in cT.V4) if (cT.V4[q] == j) return q;
    return "/Normal";
  };
  cT.aHB = function (j, q, m, n, G) {
    var W = gh.Qa(j.buffer);
    if (W == "jpg") {
      try {
        j = new Uint8Array(gh.lj("JPG").amr(j.buffer));
      } catch (gn) {
        j = new Uint8Array(q * m * 4);
      }
    } else if (W == "jb2") {
      j = new Uint8Array(gh.lj("JPG").LN(j.buffer, n, G)[0].data);
    } else if (j.length != q * m * 4) {
      var k = new Uint8Array(q * m * 4),
        T = Math.ceil(q / 8),
        b = new Uint8Array(m * T);
      UTIF.decode._decodeG4(j, 0, j.length, b, 0, q, 1);
      var c = b[0] == (G ? 255 : 0);
      for (var a = 0; a < m; a++) {
        var f = T * a;
        for (var U = 0; U < q; U++) {
          var y = a * q + U,
            Z = y * 4,
            h = ((b[f + (U >> 3)] >> (7 - (U & 7))) & 1) * 255;
          if (c) h = 255 - h;
          k[Z] = h;
          k[Z + 1] = h;
          k[Z + 2] = h;
          k[Z + 3] = 255;
        }
      }
      j = k;
    }
    return j;
  };
  cT.prototype.a7H = function (j, q, m, n, G) {
    if (j.length != q * m * 4) {
      var W = gh.Qa(j.buffer);
      if (W == "jb2") throw "e";
      var k = gh.lj(W);
      if (k == null || W == "tga") k = gh.lj("jpg");
      j = new Uint8Array(k.LN(j, n, G)[0].data);
    }
    return j;
  };
  cT.prototype.ShowPage = function () {
    var j = this.sk;
    this.Tx++;
    var q = this.Mw;
    this.dP();
    var m = j.dj();
    j.U.push(m);
    var n = new hk(
      Math.round(this.b2.x),
      Math.round(this.b2.y),
      Math.round(q[2] - q[0]),
      Math.round(q[3] - q[1])
    );
    if (n.jG()) n.r = n.$ = 2e3;
    this.d_ = this.d_.vd(n);
    m.KP(n);
    m.add.artb.artboardBackgroundType.v = 1;
    m.tV("Page " + this.Tx);
    m.add.lsct = hQ.z$;
    m.hz = "pass";
    m.uZ = 24;
  };
  cT.prototype.Print = function (j) {
    console.log("Print:", j);
  };
  cT.prototype.Done = function () {
    var j = this.sk;
    if (this.Tx == 1) j.U[j.U.length - 1].add.lsct = hQ.WR;
    j.cw(this.Tx);
    for (var y = 0; y < j.U.length; y++) {
      var q = j.U[y],
        m = q.add.vmsk,
        n = q.add.TySh,
        G = this.Bj[y];
      q.Pp();
      delete q.add.vsjs;
      if (m) {
        var W = !1;
        for (var k = 0; k < m.D.length; k++) {
          var T = m.D[k];
          if ((T.e == 0 || T.e == 3) && T.length > 32767) W = !0;
        }
        if (W) {
          j.U.splice(y, 1);
          y--;
          continue;
        }
      }
      q.D5(j);
      if (n && G && G.Wi.length != 0) {
        this.aew(G);
        var b = n.s3,
          c = G.Wi.length,
          a = G.Wi[0],
          f = 1e9,
          U = -1e9,
          l = "";
        for (var k = 0; k < c; k++) {
          var Z = G.Wi[k];
          f = Math.min(f, Z.x);
          U = Math.max(U, Z.x + Z.GM);
        }
        var h = [];
        for (var k = 0; k < c; k++) {
          var Z = G.Wi[k],
            u = -1,
            i = a.fO * 0.1,
            x = Math.abs(Z.x - f),
            X = Math.abs(Z.x + Z.GM - U),
            $ = Math.abs(x - X);
          if ($ < i) u = 2;
          if (X < i) {
            u = 1;
            if (Z.x != f)
              if (
                (k != 0 && G.Wi[k - 1].x == Z.x) ||
                (k != c - 1 && G.Wi[k + 1].x == Z.x)
              )
                u = -1;
          }
          if (x < i) u = 0;
          if (Z.GM == U - f) u = 3;
          h.push(u);
        }
        var H = [!1, !1, !1];
        for (var k = 0; k < c; k++) {
          var u = h[k];
          if (u == 3) u = k == 0 ? h[k + 1] : h[k - 1];
          if (u == 3) u = 0;
          h[k] = u;
          H[u] = !0;
        }
        var C = (U - f) * 0.05;
        if (H[0] && !H[1]) U += C;
        if (!H[0] && H[1]) f -= C;
        if (!H[0] && !H[1]) {
          f -= C;
          U += 2 * C;
        }
        al.cj(b, 1);
        n.u.BL -= a.fO * 0.7;
        n.u.Tt = Math.round(f);
        al.ms(b, [
          0,
          0,
          Math.ceil(U - f),
          Math.ceil(G.Wi[c - 1].y - a.y + a.fO * 2),
        ]);
        for (var k = 0; k < c; k++) {
          var Z = G.Wi[k],
            u = h[k],
            v = 0;
          if (u == -1) {
            u = 0;
            v = Math.round(Z.x - f);
          }
          var K = l.length,
            S = K + Z.t.length;
          l += Z.t;
          var o = { NJ: [], K2: {}, Th: { Justification: u, StartIndent: v } };
          al.jD(n.s3, K, S - 1, o);
        }
      }
      if (n) {
        var b = n.s3;
        al.aC3(b);
        var V = al.WT(b).split("\n");
        for (var k = 0; k < V.length - 1; k++) {
          var Z = V[k],
            P = 0;
          for (var z = 0; z < Z.length; z++) {
            var E = Z.charCodeAt(z);
            if (1473 <= E && E <= 1524) P++;
          }
          if (P > Z.length / 2) {
            V[k] = Z.split("").reverse().join("");
            var A =
              b.EngineDict.ParagraphRun.RunArray[k].ParagraphSheet.Properties;
            A._Direction = 1;
            A.Justification = al.xT(A);
          }
        }
        al.aT(b, V.join("\n"));
      }
    }
    j.c4 = !0;
    j.r = this.d_.r;
    j.$ = this.d_.$;
    j.buffer = B.j(this.d_.C() * 4);
  };
  var gp = {};
  gp.I7 = null;
  gp.He = function (j, q, m, n, G, W) {
    var k = ei == 0 ? new hk(0, 0, j.r, j.$) : j.u$();
    if (G == null) G = k.r;
    if (W == null) W = k.$;
    gp.I7 = j;
    var T = [[j.root, k, null]];
    if (ei == 0 && j.add.artd) {
      var b = j.root.children,
        c = [],
        a = !0;
      for (var y = 0; y < b.length; y++) {
        var f = b[y].v,
          U = f.add.artb,
          Z = null;
        if (U == null) {
          a = !1;
          break;
        }
        var h = U.artboardBackgroundType.v;
        if (h != 1 && h != 3) Z = f.U3();
        c.push([b[y], f.Li(), Z]);
      }
      if (a) T = c;
    }
    if (ei == 1) {
      var u = j.add.arts;
      T = [];
      for (var y = 0; y < u.length; y++)
        T.push([j.root, B.b.YU(u[y].gX), null]);
    }
    var i = q.pags;
    i = i.replace(/,/g, " ").replace(/\-/g, " - ").replace(/  +/g, " ").trim();
    i = i.split(" ");
    var x = [];
    for (var y = 0; y < i.length; y++) {
      var X = i[y];
      if (X == "-") {
        var $ = x.pop(),
          H = parseInt(i[y + 1]);
        while ($ < H) {
          x.push($);
          $++;
        }
      } else x.push(parseInt(X));
    }
    i = x;
    for (var y = 0; y < i.length; y++)
      if (isNaN(i[y]) || i[y] < 1 || i[y] > T.length) {
        i.splice(y, 1);
        y--;
      }
    var C = G / k.r,
      l = W / k.$,
      v = (C * 72) / j.zv,
      K = (l * 72) / j.zv,
      S = q.mrgn;
    if (S == null) S = 0;
    var o = 72 * S,
      V = 72 * S;
    for (var P = 0; P < T.length; P++) {
      var y = P;
      if (q.rvrs) y = T.length - 1 - P;
      if (i.length != 0 && i.indexOf(y + 1) == -1) continue;
      var z = T[y][0],
        E = T[y][1];
      if (!z.v.Iw()) continue;
      var A = Math.round(E.r * v + 2 * o),
        N = Math.round(E.$ * K + 2 * V);
      m.StartPage(0, 0, A, N);
      var Q = UDOC.getState(),
        e = new k$();
      e.translate(-E.x, -E.y - E.$);
      e.scale(v, -K);
      e.translate(o, V);
      if (T[y][2]) {
        var Y = T[y][2],
          d = o * v,
          I = V * K,
          O = d + E.r * v,
          s = I + E.$ * K;
        Q.colr = [
          ((Y >>> 0) & 255) / 255,
          ((Y >>> 8) & 255) / 255,
          ((Y >>> 16) & 255) / 255,
        ];
        Q.pth = {
          cmds: ["M", "L", "L", "L", "Z"],
          crds: [d, I, O, I, O, s, d, s],
        };
        m.Fill(Q);
      }
      if (ei == 0 && q.rall) {
        var p = B.j(E.C() * 4);
        B.M4(B.sL(j.ht(), 8), k, p, E);
        var F = j.Oq();
        if (F) ICC.U.applyLUT(F[j.add.fcmy == 1 ? 5 : 3], F[2], p, p);
        var g = gh.lj("JPG").Ev([[p.buffer]], E.r, E.$, { qual: q.qual });
        p = new Uint8Array(g);
        var w = new k$();
        w.translate(E.x, E.y);
        gp.W7(Q, m, p, E, w, e);
      } else {
        gp.A0(j, z, Q, m, e, E, q, n);
        if (o != 0) {
          var d = o,
            I = V,
            O = d + (E.r * 72) / j.zv,
            s = I + (E.$ * 72) / j.zv,
            r = O + o,
            eQ = s + o;
          Q.ca = 1;
          Q.colr = [1, 1, 1];
          Q.pth = {
            cmds: "M L L L Z M L L L Z".split(" "),
            crds: [0, 0, 0, eQ, r, eQ, r, 0, d, I, O, I, O, s, d, s],
          };
          m.Fill(Q);
        }
      }
      if (q.cmrk) {
        var t = [
            [0, 0],
            [1, 0],
            [1, 1],
            [0, 1],
          ],
          dq = 50,
          D = 5,
          ha = dq * 0.5,
          am = D * 0.5,
          k4 = (E.r * 72) / j.zv,
          aA = (E.$ * 72) / j.zv;
        Q.colr = [0.1, 0.1, 0.1];
        for (var ex in t) {
          var ac = t[ex],
            eJ = [ex == 0 || ex == 3 ? -1 : 1, ex == 0 || ex == 1 ? -1 : 1],
            h$ = [
              o - ha + am * eJ[0] + ac[0] * k4,
              V - (eJ[1] != 1 ? D : 0) + ac[1] * aA,
            ],
            da = [
              o - (eJ[0] != 1 ? D : 0) + ac[0] * k4,
              V - ha + am * eJ[1] + ac[1] * aA,
            ];
          Q.pth = {
            cmds: "M L L L Z M L L L Z".split(" "),
            crds: [
              h$[0],
              h$[1],
              h$[0] + dq,
              h$[1],
              h$[0] + dq,
              h$[1] + D,
              h$[0],
              h$[1] + D,
              da[0],
              da[1],
              da[0] + D,
              da[1],
              da[0] + D,
              da[1] + dq,
              da[0],
              da[1] + dq,
            ],
          };
          m.Fill(Q);
        }
      }
      var bb = j.gQ;
      for (var gb = 0; gb < bb.length; gb++) {
        var fM = bb[gb].v,
          E = B.rc.Fj(fM),
          kS = B.b._c(E).L;
        B.b.u(kS, e, kS);
        var cY = B.b.RD(kS);
        if (!new hk(0, 0, A, N).Jn(cY)) continue;
        if (m.AddAnnot)
          m.AddAnnot([cY.x, cY.y, cY.x + cY.r, cY.y + cY.$], fM.url.v);
      }
      m.ShowPage();
    }
    m.Done();
    gp.I7 = null;
  };
  gp.oB = function (j) {
    j = B.MV.xH(j);
    return [j.o / 255, j.i / 255, j.X / 255];
  };
  gp.A0 = function (j, q, m, n, G, W, k, T) {
    var b = q.v,
      c = b.add.lsct,
      a = b.add.lmfx,
      H,
      C,
      A,
      Q = !1;
    if (b.wp) return;
    var f = b.add.vmsk,
      U = b.add.vstk,
      Z = b.add.TySh;
    if (b.Yx)
      alert(
        'Clipping layers can not be exported into a PDF. Use vector masks instead. Or use "Rasterize all".',
        4e3
      );
    if (ei == 1 && !b.D1() && !W.C2(B.b.RD(b.b8()))) return;
    var h = q.children,
      u = h && h.length != 0 ? h[h.length - 1].v : null;
    if (ei == 1 && u && u.wp && u.Iw()) f = u.add.vmsk;
    if (!b.Iw()) return;
    var i = b.yA / 255,
      x = b.add.iOpa != null ? b.add.iOpa / 255 : 1;
    m.bmode = cT.ap7(b.hz);
    var X = m.ca;
    m.ca = m.CA = i * x;
    var $ = a;
    if ($) $ = $.solidFillMulti.v[0];
    if ($) $ = $.v;
    if ($ && !$.enab.v) $ = null;
    var l = b.H;
    if (b.EC() && (!b.D1() || (b.a_ && b.a_.yB))) {
      if (b.D1()) {
        H = b.a_.yB;
        l = q.Fj(j, !1);
      } else {
        H = B.j(b.H.C());
        B.Ih(B.sL(b.buffer, 8), H, 3);
      }
      var v = dS.XW(a, b.add.fxrp, H, l, j, l),
        C = v.e;
      dS.ag8(v);
      var K = ["DrSh", "OrGl"];
      if (x != 1 || (U && !U.fillEnabled.v)) {
        var S = H.slice(0);
        B.BR(S);
        for (var y = 0; y < K.length; y++) {
          var o = C[K[y]];
          for (var V = 0; V < o.length; V++) {
            var P = o[V],
              z = P.PK.P();
            z.x += l.x;
            z.y += l.y;
            B.zn(S, l, P.sE, z);
          }
        }
      }
    }
    if (C) gp.aH0(b, H, l, C, m, n, G, k, !0);
    var E = dS.aDs(b, !1);
    if (E) {
      n.StartTGroup(m);
      A = m;
      m = UDOC.getState();
      m.alz = A.alz;
    }
    var N = f && !b.ql(),
      e = b.add.GdFl;
    if (e && e.Type.v.GrdT != "Lnr" && e.Type.v.GrdT != "Rdl") {
      Q = !0;
    }
    if (U && U.strokeEnabled.v && U.strokeStyleContent.v.Ptrn) Q = !0;
    if (N) {
      var Y = B.b.nJ(f.D, !1),
        d = Y.ku;
      B.b.u(d.L, G, d.L);
      m.cpth = { cmds: d.RC, crds: d.L };
    }
    if (b.D1()) {
      for (var y = 0; y < q.children.length; y++)
        gp.A0(j, q.children[y], m, n, G, W, k, T);
    } else if (b.ql() && b.add.PtFl == null && !Q) {
      var I = f ? f.D : B.z.cn.Rect(0, 0, j.r, j.$),
        O = b.add.vstl,
        d,
        p;
      if (O == null) O = fb.CS(b.add, j);
      for (var y = 0; y < 2; y++) {
        var s = y == 0 ? O.dZ : O.Nu;
        if (s && s.length == 4)
          for (var V = 0; V < s[1].length; V++) s[1][V][1] = gp.NZ(s[1][V][1]);
      }
      cT.eE(O, m);
      m.lwidth *= G.Dc();
      for (var y = 0; y < m.dash.length; y++) m.dash[y] *= G.Dc();
      if (ei == 0) {
        var Y = B.b.nJ(I, O.Nu == null);
        d = Y.ku;
        p = Y.GG;
      }
      if (ei == 1) {
        d = B.b.bh(I);
        p = f.uc;
      }
      B.b.u(d.L, G, d.L);
      m.pth = { cmds: d.RC, crds: d.L };
      for (var V = 0; V < 2; V++) {
        var y = O.x2 == 2 ? 1 - V : V,
          F = y == 0 ? O.dZ : O.Nu,
          w = null;
        if (F.length == 0) continue;
        else if (F.length == 3) w = F;
        else {
          var r = gg.FC(F, I);
          r.concat(G);
          var eQ = [0, 0, 1, 0];
          if (F[0] == 1) {
            var t = (F[2][5] * Math.PI) / 180,
              dq = F[2][6];
            eQ = [Math.cos(t) * dq, -Math.sin(t) * dq, 0, 0, 0, 1];
          }
          w = {
            typ: ["lin", "rad"][F[0]],
            mat: [r.Sd, r.X, r.ra, r.Jy, r.Tt, r.BL],
            grad: B.S(F[1]),
            crds: eQ,
          };
        }
        m[y == 0 ? "colr" : "COLR"] = w;
        n[y == 0 ? "Fill" : "Stroke"](m, p != 0);
      }
    } else if (Z && k.vtxt) {
      var D = Z.s3,
        ha = new gu(D, T, Z.Ix),
        d = bq.Yi(ha, Z, !0),
        am = B.b.Xl(d),
        k4 = null,
        U = dS.aj9(a);
      if (U) {
        k4 = eu.rS.Nx(U);
        k4.Nu = gp.oB(U.strokeStyleContent.v.Clr.v);
      }
      for (var aA in am) {
        var ex = parseInt(aA.slice(1, 7), 16),
          ac = 0;
        m.colr = $ ? gp.oB($.Clr.v) : gp.aql(ex);
        var eJ = am[aA];
        B.b.u(eJ.L, G, eJ.L);
        eJ = B.b.awf(eJ);
        m.pth = { cmds: eJ.RC, crds: eJ.L };
        var O = k4 ? B.S(k4) : null;
        if (aA.length > 7) O = bq.av_(aA.slice(7));
        if (O) O.mm *= G.Dc();
        if (O && O.x2 == 2) {
          m.COLR = O.Nu;
          cT.eE(O, m);
          n.Stroke(m);
        }
        n.Fill(m);
        if (O && O.x2 != 2) {
          m.COLR = O.Nu;
          cT.eE(O, m);
          n.Stroke(m);
        }
      }
    } else if (Z) {
      var D = B.S(Z.s3);
      al.aC3(D);
      var h$ = Z.u.P(),
        da = new k$(1, 0, 0, -1, 0, 0);
      da.concat(h$);
      da.concat(G);
      var bb = al.WT(D),
        ha = new gu(D, T, Z.Ix);
      for (var y = 0; y < ha.Th.length; y++) {
        var gb = ha.Th[y];
        if (gb.IF.length == 1 && gb.IF[0].o3) continue;
        for (var V = 0; V < gb.EX.length; V++) {
          var fM = gb.EX[V],
            kS = gb.Qi.y + fM.Qi.y,
            cY = gb.IF[fM.start].start,
            cS = gb.IF[fM.end - 1].end,
            k3 = al.am8(D, cY, cS);
          for (var di = 0; di < k3.length; di++) {
            var a7 = ha.q9(cY),
              b0 = k3[di],
              e1 = al.vJ(D, cY, cY),
              l2 = e1.NJ[e1.K2.Font].Name;
            m.font.Tf = l2;
            var aA = al.xH(e1.K2.FillColor);
            m.colr = $ ? gp.oB($.Clr.v) : [aA.o / 255, aA.i / 255, aA.X / 255];
            var kL = (m.font.Tfs = Math.round(e1.K2.FontSize)),
              es = bb.slice(cY, cY + b0);
            if (e1.K2.FontCaps == 2) es = es.toUpperCase();
            var r = new k$();
            r.translate(a7.HA.x, -kS);
            r.concat(da);
            m.ctm = [r.Sd, r.X, r.ra, r.Jy, r.Tt, r.BL];
            n.PutText(m, es, 0);
            for (var kR = 0; kR < 2; kR++) {
              var eH = e1.K2[kR == 0 ? "Strikethrough" : "Underline"];
              if (!eH) continue;
              var cZ = ha.q9(cY + b0 - 1),
                ga = kR == 0 ? 0.27 : -0.2,
                fi = kL * ga,
                go = kL * (ga + 0.07),
                ac = cZ.HA.x + cZ.HA.r - a7.HA.x,
                iz = [0, fi, ac, fi, ac, go, 0, go];
              B.b.u(iz, r, iz);
              m.pth = { cmds: ["M", "L", "L", "L", "Z"], crds: iz };
              n.Fill(m);
            }
            m.ctm = [1, 0, 0, 1, 0, 0];
            cY += b0;
          }
        }
      }
    } else if (!b.H.jG() || ei == 1) {
      var i5,
        aI,
        bs = !1,
        k2 = new k$(),
        jG = b.add.SoLd,
        eW = !0;
      if (jG) eW = B.B.hE(B.B.Ht(L.Dq.Kt(jG.Trnf)));
      var gc = j.Oq();
      if (jG && eW && gc == null) {
        var k1 = jG.Idnt.v,
          ke = j.Kv(k1, jG.Crop ? jG.Crop.v : null),
          cy = "";
        if (ke == null) return;
        var jh = ke.Zj,
          cE = gh.Qa(ke.raw.buffer);
        if (k.fmts.indexOf(cE) != -1) {
          i5 = ke.raw;
          bs = !0;
        } else i5 = jh[0];
        aI = jh[1];
        k2 = B.B.Jl(jG);
        if (ke.fU.C() != aI.C()) {
          var hl = new k$();
          hl.translate(aI.x, aI.y);
          hl.concat(k2);
          k2 = hl;
        }
      } else {
        i5 = B.sL(b.buffer, 8);
        aI = b.H;
        k2.translate(aI.x, aI.y);
        if (gc) {
          i5 = i5.slice(0);
          ICC.U.applyLUT(gc[j.add.fcmy == 1 ? 5 : 3], gc[2], i5, i5);
        }
        if (B.QM(i5, aI.r, aI.$) && k.fmts && k.fmts.indexOf("jpg") != -1) {
          var c2 = gh.lj("JPG").Ev([[i5.buffer]], aI.r, aI.$, [k[1]]);
          i5 = new Uint8Array(c2);
          bs = !0;
        }
      }
      if ($ && !bs) i5 = dS.aGf(i5, $, aI);
      gp.W7(m, n, i5, aI, k2, G);
      if ($ && bs) {
        var iz = [0, 0, aI.r, 0, aI.r, aI.$, 0, aI.$];
        B.b.u(iz, k2, iz);
        B.b.u(iz, G, iz);
        var f9 = B.S(m);
        f9.ca = $.Opct.v.val / 100;
        f9.pth = { cmds: ["M", "L", "L", "L", "Z"], crds: iz };
        f9.colr = gp.oB($.Clr.v);
        n.Fill(f9);
      }
    }
    if (N) m.cpth = null;
    if (E) {
      n.EndTGroup();
      m = A;
    }
    m.ca = m.CA = X;
    if (C) gp.aH0(b, H, l, C, m, n, G, k, !1);
  };
  gp.NZ = function (j) {
    var q = gp.I7;
    if (q == null) return j;
    var m = q.Oq();
    if (m && q.add.fcmy) {
      return B.Lf(B.fE(j)).slice(0, 3);
    }
    return j;
  };
  gp.oB = function (j) {
    j = B.MV.xH(j);
    return gp.NZ([j.o / 255, j.i / 255, j.X / 255]);
  };
  gp.aql = function (j) {
    return gp.NZ([
      ((j >>> 16) & 255) / 255,
      ((j >>> 8) & 255) / 255,
      (j & 255) / 255,
    ]);
  };
  gp.aH0 = function (j, q, m, n, G, W, k, T, b) {
    var c = m.P(),
      a = q;
    if (j.add.TySh && !T.vtxt) return;
    var f = G.ca,
      U = G.bmode;
    for (var y = eu.order.length - 1; y >= 0; y--) {
      var Z = eu.order[y];
      if (Z == "GrFl" || Z == "SoFi") continue;
      if ((j.add.vmsk || j.add.TySh) && Z == "FrFX") continue;
      var h = n[Z],
        u = y > 7 || Z == "FrFX";
      if (u != b) continue;
      for (var i = 0; i < h.length; i++) {
        var x = h[i];
        if (x.PK == null) x = x.D9 ? x.D9 : x.NK;
        if (x == null) continue;
        var X = B.sL(x.sE, 8),
          $ = x.PK.P();
        $.offset(c.x, c.y);
        if (!u) {
          if (!c.Jn($)) {
            var H = c.vd($),
              C = B.j(H.C());
            B.sN(a, c, C, H);
            a = C;
            c = H;
          }
          B.zn(a, c, X, $);
        }
        if (u && Z == "FrFX" && x.Wb) B.zn(x.Wb, $, X, $);
        var l = new k$();
        l.translate($.x, $.y);
        G.ca = x.uH;
        G.bmode = cT.ap7(x.aM);
        gp.W7(G, W, X, $, l, k);
      }
    }
    G.ca = f;
    G.bmode = U;
  };
  gp.W7 = function (j, q, m, n, G, W) {
    var k = new k$();
    k.scale(n.r, -n.$);
    k.translate(0, n.$);
    k.concat(G);
    k.concat(W);
    j.ctm = [k.Sd, k.X, k.ra, k.Jy, k.Tt, k.BL];
    q.PutImage(j, m, n.r, n.$);
    j.ctm = [1, 0, 0, 1, 0, 0];
  };
  var dg = {};
  dg.VB = function (j) {
    var q = new Uint8Array(j);
    return dg.s4(q, 0);
  };
  dg.s4 = function (j, q) {
    var m = M.Z$,
      n = M.IH,
      G = { ys: n(j, q, 4), g: q + 8, size: m(j, q + 4) },
      W = G.ys == "FORM" || G.ys == "FOR4" || G.ys == "LIST" || G.ys == "CAT ";
    if (W) G.HF = n(j, q + 8, 4);
    if (G.size < 0 || G.g + G.size > j.length) throw "e";
    if (W) {
      G.sub = [];
      q += 12;
      var k = G.g + G.size;
      while (q < k) {
        var T = dg.s4(j, q);
        G.sub.push(T);
        var b = T.size & 1,
          c = T.size & 3;
        if (G.ys == "FOR4") b = c == 0 ? 0 : 4 - c;
        q += 8 + T.size + b;
      }
    }
    return G;
  };
  var l3 = {};
  l3.VB = function (j, q) {
    var m = new Uint8Array(j);
    return l3.s4(m, 0, q);
  };
  l3.s4 = function (j, q, m) {
    var n = M.YZ,
      G = M.IH,
      W = { ys: G(j, q, 4), g: q + 8, size: n(j, q + 4) };
    if (m && m[W.size] != null) W.size = m[W.size];
    if (W.ys == "RIFF" || W.ys == "LIST") {
      W.HF = G(j, q + 8, 4);
    }
    if (W.size < 0 || W.g + W.size > j.length) {
      console.log(W, j.length);
      throw "e";
    }
    if (
      W.ys == "RIFF" ||
      (W.ys == "LIST" && W.HF != "cmpr" && W.HF != "stlt")
    ) {
      W.sub = [];
      q += 12;
      var k = W.g + W.size;
      while (q < k) {
        var T = l3.s4(j, q, m);
        W.sub.push(T);
        q += 8 + T.size + (T.size & 1);
      }
    }
    return W;
  };
  var jg = (function () {
      function j(w, r) {
        var eQ = null;
        if (w.sub == null) return eQ;
        for (var y = 0; y < w.sub.length; y++) {
          var t = w.sub[y];
          if (t.ys == r || t.HF == r) eQ = t;
        }
        return eQ;
      }
      function q(w) {
        if (w == 32) return 300;
        else if (w < 49) return 0;
        else if (w < 58) return 100 * (w - 48);
        else if (w < 65) return 0;
        return 100 * (w - 55);
      }
      var m;
      function n(w, r) {
        var eQ = new Uint8Array(w);
        r.c4 = !0;
        m = {};
        var t = M.IH(eQ, 0, 2);
        if (t == "WL") {
          alert("Unsupported CDR version");
        } else {
          var dq,
            D,
            ha,
            aA,
            kS = 300,
            k3 = 0;
          if (t == "PK") {
            D = UZIP.parse(eQ);
            if (D["content/root.dat"]) {
              eQ = D["content/root.dat"];
              ha = M.K6(D["content/dataFileList.dat"]).split("\n");
            } else {
              eQ = D["content/riffData.cdr"];
              D = null;
            }
          }
          dq = l3.VB(eQ.buffer);
          console.log(dq);
          var am = q(eQ[11]),
            k4 = { data: eQ, g: 0, PE: am };
          k4.Bk = k4.PE < 600 ? 16 : 32;
          K(eQ, k4, ha, D, dq.sub, 0);
          var ex = [];
          if (D) {
            aA = j(dq, "doc ");
            G(aA);
            var ac = dq.sub;
            for (var y = 0; y < ac.length; y++)
              if (ac[y].HF == "page") ex.push(ac[y]);
            ex = ex.slice(1);
          } else if (dq.sub[3] && dq.sub[3].ys == "pack") {
            alert("We dont support this version of CDR files");
            return;
          } else if (j(dq, "cmpr") == null) {
            aA = j(dq, "page");
            ex.push(aA);
            if (j(aA, "mcfg") == null) {
              aA = j(dq, "doc ");
              G(aA);
              ex = [];
              var ac = dq.sub;
              for (var y = 0; y < ac.length; y++)
                if (ac[y].HF == "page") ex.push(ac[y]);
              ex = ex.slice(1);
            }
          } else {
            var eJ = j(dq, "cmpr").sub;
            aA = eJ[0];
            ex = [eJ.slice(1)[1]];
            if (j(aA, "filt")) G(aA);
          }
          var h$ = j(aA, "mcfg").K,
            da = h$.aG_,
            bb = da.x * 0.1,
            gb = da.x * ex.length + bb * (ex.length - 1),
            fM = da.y;
          kS /= jU.ud(
            new hk(0, 0, Math.round(gb * kS), Math.round(fM * kS)),
            8192 * 8192
          );
          var cY = Math.round(gb * kS),
            cS = Math.round(fM * kS);
          r.r = cY;
          r.$ = cS;
          r.buffer = B.j(r.r * r.$ * 4);
          for (var y = 0; y < ex.length; y++) {
            var di = new k$(
              kS,
              0,
              0,
              -kS,
              (da.x * kS) / 2 + k3,
              (da.y * kS) / 2
            );
            W(ex[y], aA, r, di);
            var a7 = r.U[r.U.length - 1];
            a7.KP(
              new hk(
                Math.round(k3),
                0,
                Math.round(da.x * kS),
                Math.round(da.y * kS)
              )
            );
            a7.tV("Page " + (y + 1));
            k3 += da.x * kS + bb * kS;
          }
          r.cw(ex.length);
        }
      }
      function G(w) {
        var r = j(w, "filt").sub,
          eQ = j(w, "otlt").sub,
          t = j(w, "fntt");
        if (t) t = t.sub;
        w.Sw = {};
        for (var y = 0; y < r.length; y++)
          w.Sw[r[y].sub[0].K.id] = r[y].sub[0].K;
        w.rn = {};
        for (var y = 0; y < eQ.length; y++) w.rn[eQ[y].K.id] = eQ[y].K;
        if (t) {
          w.fonts = {};
          for (var y = 0; y < t.length; y++) w.fonts[t[y].K.id] = t[y].K;
        }
      }
      function W(w, r, eQ, t) {
        var dq = w.HF ? w.HF : w.ys,
          D = j(w, "lgob"),
          ha = j(w, "txsm"),
          am = null,
          k4 = null;
        if (D) {
          am = j(D, "trfl");
          k4 = j(D, "loda");
        } else if (j(w, "lobj")) k4 = j(w, "lobj");
        var aA = am && am.sub[0].OC ? am.sub[0].OC.P() : new k$();
        aA.concat(t);
        var ex = eQ.dj();
        if (dq == "page" || dq == "layr" || dq == "grp ") {
          ex.tV((dq == "page" ? "Page" : "Group") + " " + eQ.U.length);
          ex.add.lsct = hQ.WR;
          ex.hz = "pass";
          ex.uZ = 24;
          var ac = [];
          if (dq == "page") ac = j(w, "gobj").sub;
          if (dq == "layr") ac = w.sub.slice(2);
          if (dq == "grp ") ac = w.sub.slice(4);
          if (ac.length == 0) return;
          eQ.U.push(eQ.to());
          for (var y = ac.length - 1; y >= 0; y--) W(ac[y], r, eQ, t);
        } else if (dq == "obj " && k4.K && k4.K.path) {
          var eJ, h$;
          if (r.Sw) {
            eJ = r.Sw[k4.K.aIQ];
            h$ = r.rn[k4.K.aqj];
          }
          if (eJ == null) eJ = k4.K.arY;
          if (h$ == null) h$ = k4.K.aB6;
          ex = k(eQ, k4.K.path, t, aA, eJ, h$);
        } else if (dq == "obj " && ha) {
          var da = k4.K.ajh,
            bb = k4.K.ajv,
            kS = "";
          ex.add.TySh = al.wD(0, 0);
          var gb = aA.Dc();
          ex.add.TySh.u.translate(aA.Tt, aA.BL);
          var fM = ex.add.TySh.s3,
            cY = ha.K.Fy;
          if (cY == null) return;
          for (var y = 0; y < cY.length; y++) {
            var cS = cY[y],
              k3 = kS.length;
            kS += cS.text + "\n";
            al.Fk(fM, k3, cS.text + "\n");
            if (cS.text == "") continue;
            var di = T(cS.atb, r),
              a7 = di.aoW,
              b0 = r.fonts[a7.av3],
              e1 = al.vJ(fM, k3, kS.length);
            if (di.align == 3) e1.Th.Justification = 1;
            else if (di.align == 2) e1.Th.Justification = 2;
            else e1.Th.Justification = 0;
            var l2 = di.fill.K;
            if (l2 == null) l2 = [0, 0, 0];
            if (b0.$v) al.gk(e1, b0.$v);
            e1.K2.FillColor = { Type: 1, Values: [1, l2[0], l2[1], l2[2]] };
            e1.K2.FontSize = Math.round(a7.fontSize * t.Dc());
            al.jD(fM, k3, kS.length - 1, e1);
          }
          if (bb) {
            al.cj(fM, 0);
          } else {
            al.cj(fM, 1);
            al.ms(fM, [
              0,
              0,
              Math.round(da.x * aA.Sd),
              Math.round(-da.y * aA.Jy),
            ]);
          }
          ex.tV(kS.slice(0, 10));
        } else {
          ex = null;
        }
        if (ex) eQ.U.push(ex);
      }
      function k(w, r, eQ, t, dq, D) {
        var ha = w.dj();
        ha.tV("Object " + w.U.length);
        ha.uZ |= 16;
        var am = (ha.add.vstk = eu.rS.i4());
        ha.add.vmsk = new R.tm();
        ha.add.vmsk.D = B.b.LZ(r, !1);
        B.z.La(ha.add.vmsk.D, t);
        var k4 = dq && dq.e != 0,
          aA = k4 && dq.K != null ? dq.K : [0, 0, 0];
        cT.zX(aA, ha, t, ha.add.vmsk.D);
        am.fillEnabled.v = k4;
        if (D && D.a9Z != 1) {
          am.strokeEnabled.v = !0;
          am.strokeStyleLineAlignment.v.strokeStyleLineAlignment =
            "strokeStyleAlignCenter";
          var ex = (am.strokeStyleLineWidth.v.val = D.lineWidth * eQ.Dc()),
            ac = D.color;
          am.strokeStyleContent.v.Clr.v = B.MV.Ia({
            o: ac[0] * 255,
            i: ac[1] * 255,
            X: ac[2] * 255,
          });
          if (D.QJ.length != 0)
            am.strokeStyleLineDashSet.v = dS.Uy(D.QJ, 4 / ex);
          var eJ = D.ad_,
            h$ = D.ae$;
          if (h$ != 0) {
            var da = r.L,
              y = da.length - 4,
              bb = da[y],
              gb = da[y + 1],
              fM = da[y + 2],
              kS = da[y + 3],
              cY = new k$();
            cY.scale(0.15, 0.15);
            cY.rotate(-Math.PI / 2 + Math.atan2(kS - gb, -(fM - bb)));
            cY.translate(fM, kS);
            cY.concat(t);
            if (m[h$]) {
              var cS = k(w, m[h$], eQ, cY, ac, null);
              w.U.push(cS);
            }
          }
        }
        ha.Pp();
        ha.D5(w);
        return ha;
      }
      function T(w, r) {
        var eQ = j(r, "stlt").K,
          t = B.S(eQ.RU[w]);
        if (t.bN != 0) {
          var dq = eQ.RU[t.bN];
          for (var D in dq) if (t[D] == null || t[D] == 0) t[D] = dq[D];
          delete t.bN;
        }
        t.align = eQ.aw2[t.aen];
        t.fill = r.Sw[eQ.aiP[t.aGs]];
        t.acK = r.rn[eQ.a2B[t.ajQ]];
        t.aoW = eQ.a1j[t.al9];
        return t;
      }
      function b(y) {
        var aF = y.data[y.g];
        y.g += 1;
        return aF;
      }
      function c(y) {
        var aF = M.d9(y.data, y.g);
        y.g += 2;
        return aF;
      }
      function a(y) {
        var aF = M.YZ(y.data, y.g);
        y.g += 4;
        return aF;
      }
      function f(y) {
        var aF = M.YZ(y.data, y.g);
        y.g += 8;
        return aF;
      }
      function U(y) {
        var aF = M.O_(y.data, y.g);
        y.g += 2;
        return aF;
      }
      function Z(y) {
        var aF = M.dq(y.data, y.g);
        y.g += 4;
        return aF;
      }
      function h(y) {
        var aF = M.NR(y.data, y.g);
        y.g += 8;
        return aF;
      }
      function u(y) {
        if (y.g >= y.data.length) throw "e";
        var w = 0;
        while (y.data[y.g + w] != 0) w++;
        var r = M.IH(y.data, y.g, w);
        y.g += w + 1;
        return r;
      }
      function i(y) {
        var w = "";
        while (!0) {
          var r = c(y);
          if (r == 0) break;
          w += String.fromCharCode(r);
        }
        return w;
      }
      function x(w) {
        var r = a(w),
          eQ = (r & 4294901760) >>> 16,
          t = (r & 65535) / 65535;
        return eQ + t;
      }
      function X(w) {
        if (w.PE < 600) return (Math.PI * U(w)) / 1800;
        return (Math.PI * Z(w)) / 18e7;
      }
      function $(w) {
        if (w.PE < 1500) return H(w);
        else return h(w) / 254e3;
      }
      function H(w) {
        if (w.PE < 600) return U(w) / 1e3;
        else return Z(w) / 254e3;
      }
      function C(w) {
        if (w.PE < 600) return c(w);
        else return a(w);
      }
      function l(w) {
        if (w.PE < 600) return U(w);
        else return Z(w);
      }
      function v(w, r, eQ) {
        var t = "";
        for (var y = 0; y < eQ; y++) {
          for (var dq = 0; dq < r; dq += 4) {
            var aF = M.YZ(w.data, w.g + y * r + dq);
            t += (aF < 500 ? aF : aF) + ",";
          }
          t += "\n";
        }
        return t;
      }
      function K(w, r, eQ, t, dq, D) {
        var ha, am, k4;
        for (var aA = 0; aA < dq.length; aA++) {
          var ex = r.PE,
            ac = dq[aA];
          r.data = w;
          r.g = ac.g + (ac.ys == "LIST" ? 4 : 0);
          if (t && ac.sub == null) {
            ha = a(r);
            am = a(r);
            k4 = a(r);
            var eJ = c(r);
            if (eJ != 0 && eJ != 256 && eJ != 768) throw eJ.toString(16);
            var h$ = c(r);
            if (h$ > 32) throw "e";
            r.g -= 16;
            if (ha != 4294967295) {
              r.data = t["content/data/" + eQ[ha]];
              r.g = k4;
            }
          }
          if (ac.ys == "vrsn") {
            if (ac.size == 16) r.g += 8;
            var da = c(r);
            r.PE = da;
            console.log("Version", da);
            r.Bk = da < 600 ? 16 : 32;
          } else if (ac.ys == "DISP") {
          } else if (ac.ys == "pack") {
            var bb = a(r),
              gb = M.IH(r.data, r.g, 4),
              cY = 0;
            if (gb != "CPng") throw gb;
            var fM = new Uint8Array(
                r.data.buffer,
                r.g + 8 + 2,
                ac.size - 10 - 4
              ),
              kS = pako.inflateRaw(fM);
            ac.sub = [];
            while (cY < kS.length) {
              var cS = l3.s4(kS, cY);
              cY = cS.g + cS.size;
              ac.sub.push(cS);
            }
            var k3 = { data: kS, g: 0, PE: ex, Bk: r.Bk };
            K(kS, k3, eQ, t, ac.sub, D + 1);
          } else if (ac.ys == "LIST" && ac.HF == "cmpr") {
            var di = a(r),
              a7 = a(r),
              b0 = a(r),
              bb = a(r),
              gb = M.IH(r.data, r.g, 4),
              cY = 0;
            if (gb != "CPng") throw gb;
            var fM = new Uint8Array(r.data.buffer, r.g + 8 + 2, di - 6 - 8),
              kS = pako.inflateRaw(fM);
            r.g += di;
            fM = new Uint8Array(r.data.buffer, r.g + 8 + 2);
            var e1 = pako.inflateRaw(fM),
              l2 = [];
            for (var kL = 0; kL < e1.length; kL += 4) l2.push(M.YZ(e1, kL));
            ac.sub = [];
            while (cY < kS.length) {
              var cS = l3.s4(kS, cY, l2);
              cY = cS.g + cS.size;
              ac.sub.push(cS);
            }
            var k3 = { data: kS, g: 0, PE: ex, Bk: r.Bk };
            K(kS, k3, eQ, t, ac.sub, D + 1);
          } else if ((ac.ys == "LIST" && ac.HF == "stlt") || ac.ys == "stlt") {
            if (ha == 4294967295) return;
            var es = r.g,
              iz = "",
              c2 = 32;
            ac.K = {};
            var kR = a(r);
            if (kR == 0) return;
            ac.K.aiP = Q(r, ex >= 1300);
            ac.K.a2B = Q(r);
            ac.K.a1j = {};
            var eH = a(r);
            for (var y = 0; y < eH; y++) {
              var cZ = a(r);
              r.g += ex < 1e3 ? 12 : 20;
              var ga = c(r),
                fi = c(r);
              r.g += 8;
              var go = H(r);
              r.g += ex < 1e3 ? 12 : 20;
              ac.K.a1j[cZ] = { av3: ga, a4Z: fi, fontSize: go };
            }
            ac.K.aw2 = Q(r);
            var i5 = a(r);
            iz += "Intervals\n" + v(r, 52, i5) + "\n";
            r.g += 52 * i5;
            var aI = a(r);
            iz += "Set5s\n" + v(r, 152, aI) + "\n";
            r.g += 152 * aI;
            var bs = a(r);
            iz += "Tabs\n" + v(r, 784, bs) + "\n";
            r.g += 784 * bs;
            var k2 = a(r);
            iz += "Bullets\n";
            for (var y = 0; y < k2; y++) {
              var jG = r.g,
                eW = a(r);
              r.g += 4 * 3;
              if (ex > 1300) r.g += 4;
              var gc = a(r);
              r.g += 4 * 5;
              if (ex >= 1300) {
                var k1 = a(r);
                if (k1) {
                  if (a(r)) r.g += 64;
                  else r.g += 60;
                } else r.g += 12;
              } else {
                r.g += 20;
                if (ex >= 1e3) r.g += 8;
                if (a(r)) r.g += 8;
                r.g += 8;
              }
              var ke = r.g;
              r.g = jG;
              iz += v(r, ke - jG, 1);
              r.g = ke;
            }
            iz += "\n";
            var jh = a(r);
            iz += "Indents\n";
            ac.K.a6Z = {};
            for (var y = 0; y < jh; y++) {
              var jG = r.g,
                cE = a(r),
                cy = {};
              r.g += 12;
              cy.right = H(r);
              cy.aA5 = H(r);
              cy.left = H(r);
              ac.K.a6Z[cE] = cy;
              var ke = r.g;
              r.g = jG;
              iz += v(r, ke - jG, 1);
              r.g = ke;
            }
            iz += "\n";
            var hl = a(r);
            if (ex >= 1300) c2 += 4;
            iz += "Hypens\n" + v(r, c2, hl) + "\n";
            r.g += c2 * hl;
            var f9 = a(r);
            iz += "Dropcaps\n" + v(r, 28, f9) + "\n";
            r.g += 28 * f9;
            if (ex > 800) {
              var hu = a(r);
              iz += "Set11s\n" + v(r, 28, hu) + "\n";
              r.g += 12 * hu;
            }
            ac.K.RU = {};
            for (var y = 0; y < kR; y++) {
              var le = a(r);
              if (le > 3) throw le;
              var iJ = a(r),
                dZ = {};
              dZ.bN = a(r);
              r.g += 8;
              var kd = a(r);
              if (ex >= 1200) kd *= 2;
              r.g += kd;
              dZ.aGs = a(r);
              dZ.ajQ = a(r);
              if (le > 1) {
                dZ.al9 = a(r);
                dZ.aen = a(r);
                dZ.a3_ = a(r);
                dZ.aH4 = a(r);
                if (ex > 800) dZ.af2 = a(r);
              }
              if (le > 2) {
                dZ.a2w = a(r);
                dZ.acF = a(r);
                dZ.aln = a(r);
                dZ.avZ = a(r);
                dZ.afi = a(r);
              }
              ac.K.RU[iJ] = dZ;
            }
          } else if (ac.ys == "LIST") K(w, r, eQ, t, ac.sub, D + 1);
          else if (ac.ys == "txsm") {
            ac.K = {};
            if (ex < 600) throw "e";
            if (ex < 700) throw "e";
            if (ex >= 1600) {
              ac.K = N(r);
              return;
            }
            if (ex >= 1500) r.g += 37;
            else r.g += 36;
            if (a(r)) {
              if (ex < 800) r.g += 32;
            }
            if (ex < 800) r.g += 4;
            ac.K.ahV = a(r);
            ac.K.Fy = [];
            r.g += 48;
            if (ex >= 800) {
              if (a(r)) {
                r.g += 32;
                if (ex >= 1300) r.g += 8;
              }
            }
            if (ex >= 1500) r.g += 12;
            var le = a(r),
              bC = 1,
              ev = !1;
            if (!le) {
              if (ex >= 800) r.g += 4;
              if (ex > 800) r.g += 2;
              if (ex >= 1400) r.g += 2;
              r.g += 24;
              if (ex < 800) r.g += 8;
              bC = a(r);
            }
            for (var kL = 0; kL < bC; kL++) {
              var ak = a(r),
                y = 0;
              if (ex >= 1300 && le) r.g++;
              r.g++;
              var kR = a(r),
                gD = [];
              for (y = 0; y < kR; y++) {
                var a9 = b(r),
                  kX = 0;
                b(r);
                var kk = b(r);
                if (ex >= 800) kX = b(r);
                var dZ = {};
                if (kk & 1) {
                  dZ.av3 = c(r);
                  var kc = c(r);
                  if (kc) dZ.ad7 = kc;
                }
                if (kk & 2) r.g += 4;
                if (kk & 4) dZ.azh = H(r);
                if (kk & 8) r.g += 4;
                if (kk & 16) r.g += 4;
                if (kk & 32) r.g += 4;
                if (kk & 64) {
                  dZ.aGs = a(r);
                  if (ex >= 1500) r.g += 48;
                }
                if (kk & 128) {
                  dZ.ajQ = a(r);
                }
                if (kX & 8) {
                  if (ex >= 1300) {
                    var ew = a(r);
                    if (r.g + ew * 2 >= r.data.length) {
                      ev = !0;
                      break;
                    }
                    r.g += ew * 2;
                  } else r.g += 4;
                }
                if (kX & 32) {
                  var gS = b(r);
                  if (gS) r.g += 52;
                }
                if (a9 == 2) if (ex >= 1300) r.g += 48;
                gD.push(dZ);
              }
              if (ev) {
                break;
              }
              var hp = a(r);
              if (r.g + hp * 4 > r.data.length) break;
              var g2 = [];
              for (y = 0; y < hp; y++) {
                var jY = 0;
                if (ex >= 1200) jY = f(r) & 4294967295;
                else jY = a(r);
                g2[y] = (jY >> 16) | (jY & 1);
              }
              var he = hp;
              if (ex >= 1200) he = a(r);
              var a5 = u(r);
              ac.K.Fy.push({ atb: ak, text: a5, RU: gD });
            }
          } else if (ac.ys == "arrw") ac.K = S(r);
          else if (ac.ys == "font") {
            var jG = r.g,
              gq = c(r),
              fA = c(r),
              c3 = "";
            r.g += 14;
            if (r.PE >= 1200) c3 = i(r);
            else c3 = u(r);
            ac.K = { id: gq, aig: fA, name: c3 };
            if (t) {
              var fa = jG + am;
              while (r.data[r.g] == 0) r.g++;
              r.g += 2;
              var jA = i(r);
              while (r.data[r.g] == 0) r.g++;
              while (r.data[r.g] <= 2) r.g += 4;
              ac.K.$v = i(r);
            }
          } else if (["IKEY", "ICMT", "pfrd", "bcfg"].indexOf(ac.ys) != -1) {
          } else if (ac.ys == "flgs") ac.K = a(r);
          else if (ac.ys == "bbox") {
            var kF = H(r),
              dn = H(r),
              de = H(r),
              ks = H(r);
            ac.K = new hk(kF, dn, de - kF, ks - dn);
          } else if (ac.ys == "fild") {
            var fx = a(r),
              i7;
            if (ex >= 1300) r.g += 8;
            if (ex >= 2510) r.g += 16 + 8;
            var hT = c(r);
            if (hT == 0) {
            } else if (hT == 1) {
              r.g += ex >= 1300 ? 13 : 2;
              i7 = F(r);
            } else if (hT == 2) {
              r.g += ex >= 1300 ? 8 : 2;
              var gT = b(r),
                iC = 0;
              if (ex >= 1300) {
                r.g += 17;
                iC = U(r);
              } else if (ex >= 600) {
                r.g += 19;
                iC = Z(r);
              } else {
                r.g += 11;
                iC = U(r);
              }
              var br = X(r),
                eb = 0.5 + l(r),
                kp = 0.5 + l(r) - 0.5;
              if (ex >= 600) r.g += 2;
              var bd = C(r) & 255,
                js = b(r) / 100;
              r.g++;
              var dL = C(r) & 65535;
              if (ex >= 1300) r.g += 3;
              var hZ = [];
              for (var y = 0; y < dL; y++) {
                var fz = F(r);
                if (ex >= 1400) r.g += 26;
                else if (ex >= 1300) r.g += 5;
                var c0 = (C(r) & 65535) / 100;
                if (ex >= 1300) r.g += 3;
                hZ.push([c0, fz]);
              }
              i7 = {
                typ: gT == 1 ? "lin" : "rad",
                crds: [eb - Math.cos(br) / 2, kp - Math.sin(br) / 2, eb, kp],
                grad: hZ,
                mat: [1, 0, 0, 1, 0, 0],
              };
            } else console.log("Unknown fill type", hT);
            ac.K = { id: fx, e: hT, K: i7 };
          } else if (ac.ys == "outl") {
            var jl = a(r);
            if (ex >= 1300) {
              var h4 = 0,
                kP = 0;
              while (h4 != 1) {
                r.g += kP;
                h4 = a(r);
                kP = a(r);
              }
            }
            var gx = c(r),
              gK = c(r),
              bL = c(r);
            if (ex < 1300 && ex >= 600) r.g += 2;
            var cA = H(r),
              kK = c(r) / 100;
            if (ex >= 600) r.g += 2;
            var ce = X(r);
            if (ex >= 1300) r.g += 46;
            else if (ex >= 600) r.g += 52;
            var i7 = F(r);
            if (ex < 600) r.g += 10;
            else r.g += 16;
            var iQ = c(r),
              j0 = r.g,
              dP = [];
            for (var y = 0; y < iQ; ++y) dP.push(c(r));
            if (ex < 600) r.g = j0 + 20;
            else r.g = j0 + 22;
            var jX = a(r),
              lc = a(r);
            ac.K = {
              id: jl,
              a9Z: gx,
              aJQ: gK,
              a5T: bL,
              lineWidth: cA,
              color: i7,
              QJ: dP,
              ad_: jX,
              ae$: lc,
            };
          } else if (ac.ys == "mcfg") {
            if (1300 <= ex) r.g += 12;
            else if (900 <= ex) r.g += 4;
            else if (600 <= ex && ex < 700) r.g += 28;
            var cC = 0,
              j8 = 0;
            if (ex < 400) {
              r.g += 2;
              var kF = H(r),
                dn = H(r),
                de = H(r),
                ks = H(r);
              cC = Math.abs(de - kF);
              j8 = Math.abs(ks - dn);
            } else {
              cC = H(r);
              j8 = H(r);
            }
            ac.K = { aG_: new ea(cC, j8) };
          } else if (ac.ys == "loda" || ac.ys == "lobj") {
            var es = r.g,
              eK = C(r),
              kh = C(r),
              gI = C(r),
              h7 = C(r),
              kr = C(r),
              cJ = [],
              dF = [],
              y = 0,
              iY = null;
            r.g = es + gI;
            while (y < kh) cJ[y++] = C(r);
            r.g = es + h7;
            while (y > 0) dF[--y] = C(r);
            ac.K = {};
            for (y = 0; y < kh; y++) {
              r.g = es + cJ[y];
              var f7 = dF[y];
              if (f7 == 30) {
                if ((ex >= 400 && kr == 1) || (ex < 400 && kr == 0)) {
                  ac.K.path = E(r);
                } else if ((ex >= 400 && kr == 2) || (ex < 400 && kr == 1)) {
                  ac.K.path = z(r);
                } else if ((ex >= 400 && kr == 3) || (ex < 400 && kr == 2)) {
                  ac.K.path = I(r);
                } else if (kr == 37) {
                  ac.K.path = d(r);
                } else if ((ex >= 400 && kr == 4) || (ex < 400 && kr == 3)) {
                  ac.K.ajv = e(r);
                } else if ((ex >= 400 && kr == 6) || (ex < 400 && kr == 5)) {
                  ac.K.ajh = Y(r);
                } else console.log(kr);
              } else if (f7 == 20) {
                if (ex < 400) ac.K.arY = V(r);
                else ac.K.aIQ = a(r);
              } else if (f7 == 10) {
                if (ex < 400) ac.K.aB6 = P(r);
                else ac.K.aqj = a(r);
              } else if (f7 == 200) ac.K.aJt = C(r);
              else if (f7 == 100) {
                if (ex < 400) iY = o(r);
              }
            }
            if (iY && ac.K.path) B.b.u(ac.K.path.L, iY, ac.K.path.L);
          } else if (ac.ys == "trfd") {
            var es = r.g,
              eK = C(r),
              kh = C(r),
              gI = C(r);
            r.g = es + gI;
            var cJ = [];
            for (var y = 0; y < kh; y++) cJ[y] = C(r);
            for (var y = 0; y < kh; y++) {
              r.g = es + cJ[y];
              if (ex >= 1300) r.g += 8;
              var j$ = c(r);
              if (j$ == 8) {
                var dt, bQ, kF, fB, eP, dn;
                if (ex >= 600) r.g += 6;
                if (ex >= 500) {
                  dt = h(r);
                  bQ = h(r);
                  kF = h(r) / (ex < 600 ? 1e3 : 254e3);
                  fB = h(r);
                  eP = h(r);
                  dn = h(r) / (ex < 600 ? 1e3 : 254e3);
                } else throw "e";
                ac.OC = new k$(dt, fB, bQ, eP, kF, dn);
              } else console.log(j$);
            }
          } else if (!1) {
            console.log(ac);
            var jj = Math.min(ac.size, 32);
            console.log(M.iD(w, ac.g, jj));
            console.log(M.ajX(w, ac.g, jj));
          }
        }
      }
      function S(w) {
        var r = a(w);
        w.g += 4;
        var eQ = c(w);
        w.g += 4;
        var t = [];
        for (var dq = 0; dq < eQ; dq++) t.push(b(w));
        w.g += 1;
        var D = [];
        for (var ha = 0; ha < eQ; ha++) {
          var am = [];
          am[1] = H(w);
          am[0] = H(w);
          D.push(am);
        }
        var k4 = s(D, t);
        m[r] = k4;
      }
      function o(w) {
        var r = 0,
          eQ = 0,
          t = 0,
          dq = 0,
          D = 0,
          ha = 0;
        if (w.PE >= 300) {
          var am = w.g;
          w.g += 10;
          var k4 = C(w);
          w.g = am + k4;
          r = x(w);
          eQ = x(w);
          t = Z(w) / 1e3;
          dq = x(w);
          D = x(w);
          ha = Z(w) / 1e3;
        } else {
          t = H(w);
          ha = H(w);
          r = x(w);
          eQ = x(w);
          t += x(w) / 1e3;
          dq = x(w);
          D = x(w);
          ha += x(w) / 1e3;
        }
        return new k$(r, eQ, dq, D, t, ha);
      }
      function V(w) {
        var r = b(w);
        if (r == 0) return null;
        else if (r == 1) return F(w);
        else console.log(r);
      }
      function P(w) {
        var r = b(w);
        r <<= 1;
        var eQ = H(w),
          t = c(w) / 100,
          dq = X(w),
          D = F(w);
        return { a9Z: r, lineWidth: eQ, color: D, QJ: [], ad_: 0, ae$: 0 };
      }
      function z(w) {
        var r = H(w),
          eQ = H(w),
          t = X(w),
          dq = X(w),
          D = B.b.bh(B.z.cn.SQ(0, 0, r, eQ));
        return D;
      }
      function E(w) {
        var r = w.PE,
          eQ = $(w),
          t = $(w),
          dq = 0,
          D = 0,
          ha = 0,
          am = 0,
          k4 = 0,
          aA = 1,
          ex = 1;
        if (r < 1500) {
          am = $(w);
          ha = r < 900 ? am : $(w);
          D = r < 900 ? am : $(w);
          dq = r < 900 ? am : $(w);
        } else {
          var ac = h(w);
          if (ac != 0) aA = ac;
          ac = h(w);
          if (ac != 0) ex = ac;
          var eJ = b(w);
          w.g += 7;
          if (eJ == 0) {
            am = h(w);
            k4 = b(w);
            w.g += 15;
            ha = h(w);
            w.g += 16;
            D = h(w);
            w.g += 16;
            dq = h(w);
            var h$ = Math.abs((eQ * aA) / 2),
              da = Math.abs((t * ex) / 2);
            am *= h$ < da ? h$ : da;
            ha *= h$ < da ? h$ : da;
            D *= h$ < da ? h$ : da;
            dq *= h$ < da ? h$ : da;
          } else {
            am = $(w);
            k4 = b(w);
            w.g += 15;
            ha = $(w);
            w.g += 16;
            D = $(w);
            w.g += 16;
            dq = $(w);
          }
        }
        return B.b.bh(B.z.cn.Rect(0, 0, eQ, t, [dq, D, ha, am]));
      }
      function A(w) {
        var r = a(w);
        if (w.PE < 1700) r *= 2;
        w.g += r;
        return "";
      }
      function N(w) {
        var r = a(w),
          t = 0;
        w.g += 37;
        var eQ = a(w);
        for (var y = 0; y < eQ; y++) {
          var dq = a(w);
          t = dq;
          w.g += 48;
          var D = a(w);
          if (D == 1) w.g += 12 * 4;
          else w.g += 8;
          if (!r) {
            w.g += 16;
            A(w);
          }
        }
        var ha = { ahV: t, Fy: [] },
          am = a(w);
        for (var k4 = 0; k4 < am; k4++) {
          if (w.g > w.data.length) throw "e";
          var aA = a(w),
            ex = b(w),
            ac = -1,
            di = "";
          if (r) {
            ac = b(w);
            if (ac == 1) w.g += 64;
          }
          var eJ = A(w),
            h$ = a(w);
          for (var y = 0; y < h$; y++) {
            w.g += 2;
            var da = c(w),
              bb = c(w);
            if (bb & 4) {
              var gb = a(w);
              gb *= 2;
              w.g += gb;
            }
            if (da || bb & 4) {
              var fM = A(w);
            }
          }
          var kS = a(w),
            cY = [];
          for (var y = 0; y < kS; y++) {
            var cS = f(w) & 4294967295;
            cY[y] = (cS >> 16) | (cS & 1);
          }
          var k3 = a(w);
          for (var y = 0; y < kS; y++) {
            var a7 = cY[y] & 7,
              b0 = 0;
            if (a7 == 0 || a7 == 2 || a7 == 4 || a7 == 6) b0 = w.data[w.g++];
            else if (a7 == 1 || a7 == 3 || a7 == 5 || a7 == 7)
              b0 = w.data[w.g++] + w.data[w.g++] * 256;
            else throw a7;
            di += String.fromCharCode(b0);
          }
          if (k4 + 1 < am) w.g++;
          var e1 = di.split("\r");
          for (var y = 0; y < e1.length; y++)
            ha.Fy.push({ text: e1[y], atb: aA, RU: [] });
        }
        return ha;
      }
      function Q(w, r) {
        var eQ = {},
          t = a(w);
        for (var y = 0; y < t; y++) {
          var dq = a(w);
          w.g += 4;
          var D = a(w);
          eQ[dq] = D;
          if (r) w.g += 48;
        }
        return eQ;
      }
      function e(w) {
        var r = H(w),
          eQ = H(w);
        return new ea(r, eQ);
      }
      function Y(w) {
        w.g += 4;
        var r = H(w),
          eQ = H(w);
        return new ea(r, eQ);
      }
      function d(w) {
        w.g += 4;
        var r = c(w) + c(w);
        w.g += 16;
        var eQ = O(w, r);
        return eQ;
      }
      function I(w) {
        var r = c(w);
        w.g += 2;
        return O(w, r);
      }
      function O(w, r) {
        var eQ = [],
          t = [];
        for (var y = 0; y < r; y++) eQ.push([H(w), H(w)]);
        for (var y = 0; y < r; y++) t.push(b(w));
        return s(eQ, t);
      }
      function s(w, r) {
        var eQ = { L: [], RC: [] },
          t = 0,
          dq = 0,
          D = 0;
        for (var y = 0; y < w.length; y++) {
          var t = w[y][0],
            dq = w[y][1],
            ha = r[y];
          if ((!(ha & 64) && !(ha & 128)) || y == 0) {
            eQ.L.push(t, dq);
            eQ.RC.push("M");
            D += 2;
          } else if (ha & 64 && !(ha & 128)) {
            eQ.L.push(t, dq);
            eQ.RC.push("L");
            D += 2;
          } else if (!(ha & 64) && ha & 128) {
            eQ.L.push(t, dq);
            eQ.RC.push("C");
            D += 6;
          } else if (ha & 64 && ha & 128) {
            if (ha & 58) console.log("strange point");
            eQ.L.push(t, dq);
          }
        }
        if (D != eQ.L.length) console.log("strange path", D, eQ.L.length);
        return eQ;
      }
      function p(w, r) {
        var eQ = M.YZ;
        r += 8;
        var t = eQ(w, r);
        r += 4;
        var dq = eQ(w, r);
        r += 4;
        r += 4 * 7;
        var D = r,
          ha = B.j(t * dq * 4);
        r += 1024;
        for (var am = 0; am < dq; am++)
          for (var k4 = 0; k4 < t; k4++) {
            var y = am * t + k4,
              aA = (dq - am - 1) * t + k4,
              ex = w[r + y] << 2,
              ac = aA << 2;
            ha[ac + 0] = w[D + ex + 2];
            ha[ac + 1] = w[D + ex + 1];
            ha[ac + 2] = w[D + ex + 0];
            ha[ac + 3] = 255;
          }
        return { sE: ha, H: new hk(0, 0, t, dq) };
      }
      function F(w) {
        var r = w.PE,
          eQ = 0,
          t = 0,
          dq = 0;
        if (r >= 500) {
          eQ = c(w);
          if (eQ == 1 && r >= 1300) eQ = 25;
          if (eQ == 30) {
            eQ = 25;
            t = 30;
          } else {
            t = c(w);
            w.g += 4;
          }
          dq = a(w);
        } else if (r >= 400) throw "e";
        else {
          eQ = b(w);
          dq = a(w);
        }
        return g(eQ, t, dq);
      }
      function g(w, r, eQ) {
        var t = [0, 0, 0];
        if (w == 2 || w == 3 || w == 9 || w == 17) {
          var dq = [
            (eQ >>> 0) & 255,
            (eQ >>> 8) & 255,
            (eQ >>> 16) & 255,
            (eQ >>> 24) & 255,
          ];
          if (w == 2)
            for (var y = 0; y < 4; y++) dq[y] = Math.round((255 * dq[y]) / 100);
          for (var y = 0; y < 4; y++) dq[y] /= 255;
          t = UDOC.C.cmykToRgb(dq);
        } else if (w == 1 || w == 5) {
          t = [(eQ >>> 0) & 255, (eQ >>> 8) & 255, (eQ >>> 16) & 255];
          for (var y = 0; y < 3; y++) t[y] = t[y] / 255;
          if (w == 5) t.reverse();
        } else console.log("Unknown color model " + w, eQ, eQ.toString(16));
        return t;
      }
      return { VB: n };
    })(),
    li = (function () {
      var j,
        q,
        m = new ArrayBuffer(4),
        n = new Uint8Array(m),
        G = new Uint32Array(m),
        W = new Float32Array(m);
      function k(U, Z) {
        for (var h = 0; h < U.length; h++) if (U[h][0] == Z) return U[h];
      }
      function T() {
        var U = 0,
          Z = 0,
          h = 0;
        do {
          h = j[q++];
          U |= (h & 127) << Z;
          Z += 7;
        } while (h & 128 && Z < 35);
        return U >>> 0;
      }
      function b(U, Z, h, u, i) {
        j = U;
        q = Z;
        var x = u[0] == "mesg",
          X = u[2],
          $ = {},
          H = 1,
          C = x ? 1e9 : X.length;
        while (H <= C) {
          var l = H;
          if (x) {
            l = T();
            if (l == 0) break;
          }
          var v = k(X, l),
            K = v[2],
            S = v[1] == 1,
            o = S ? T() : 1,
            V = new Array(o);
          if (K == 3) {
            if (!S) throw "e";
            V = j.slice(q, q + o);
            q += o;
          } else
            for (var y = 0; y < o; y++) {
              var P;
              if ((K & 1) == 1) {
                if (K == 1) P = j[q++] == 1;
                else if (K == 3) P = j[q++];
                else if (K == 5) {
                  var z = T();
                  P = z & 1 ? ~(z >>> 1) : z >>> 1;
                } else if (K == 7) P = T();
                else if (K == 9) {
                  if (j[q] == 0) {
                    P = 0;
                    q++;
                  } else {
                    n[0] = j[q];
                    n[1] = j[q + 1];
                    n[2] = j[q + 2];
                    n[3] = j[q + 3];
                    var E = G[0];
                    G[0] = (E << 23) | (E >>> 9);
                    P = W[0];
                    q += 4;
                  }
                } else if (K == 11) {
                  var A = c(j, q);
                  P = A[0];
                  q += A[1] + 1;
                } else if (K == 15) {
                  var z = BigInt(0),
                    N = BigInt(0),
                    Q = BigInt(7),
                    e;
                  while ((e = j[q++]) & 128 && N < 56) {
                    z |= BigInt(e & 127) << N;
                    N += Q;
                  }
                  z |= BigInt(e) << N;
                  P = z;
                } else throw K;
              } else {
                var Y = h[K >>> 1];
                if (Y[0] == "enum") {
                  var d = T();
                  P = Y[2][d];
                } else {
                  var I = b(j, q, h, Y, i + 1);
                  P = I[0];
                  q = I[1];
                }
              }
              V[y] = P;
            }
          $[v[3]] = S ? V : V[0];
          H++;
        }
        return [$, q];
      }
      function c(U, Z) {
        var h = Z;
        while (U[h] != 0) h++;
        return [M.K6(new Uint8Array(U.buffer, Z, h - Z)), h - Z];
      }
      function a(U, Z) {
        var h = Z;
        while (U[h] != 0) h++;
        for (var y = Z; y < h; y++) if (U[y] > 127) throw "e";
        return M.IH(U, Z, h - Z);
      }
      function f(U) {
        j = U;
        q = 1;
        var Z = [];
        while (q < U.length) {
          var h = q,
            u = Z.length,
            i = a(U, q);
          q += i.length + 1;
          var x = T();
          if (x > 2) throw "e";
          var X = T(),
            $ = [];
          for (var y = 0; y < X; y++) {
            var H = a(U, q);
            q += H.length + 1;
            var C = T(),
              l = T(),
              v = T();
            $.push(x == 0 ? H : [v, l, C, H]);
          }
          Z.push([["enum", "strc", "mesg"][x], i, $]);
        }
        return Z;
      }
      return { aqy: f, aaq: b };
    })();
  function hs() {}
  hs.VB = function (j, q) {
    var m = Date.now(),
      n = new Uint8Array(j),
      G = 8,
      W,
      U = 0,
      Y = 0;
    if (n[0] == 80 && n[1] == 75) {
      W = UZIP.parse(j);
      n = W["canvas.fig"];
    }
    var k = M.YZ(n, G);
    G += 4;
    var T = [];
    while (G < n.length) {
      var b = M.YZ(n, G);
      G += 4;
      var c = n.slice(G, G + b);
      if (n[G] == 137 && n[G + 1] == 80) {
      } else if (k >= 70 && T.length != 0) {
        var a = gh.h7.md(c);
        c = a.length == 0 ? UZIP.inflateRaw(c) : a;
      } else c = UZIP.inflateRaw(c);
      T.push(c);
      G += b;
    }
    var f = li.aqy(T[0]);
    for (var y = 0; y < f.length; y++) if (f[y][1] == "Message") U = y;
    var Z = li.aaq(T[1], 0, f, f[U], 0)[0],
      h = { J9: {}, iS: {}, a7d: {}, uv: W },
      u = Z.nodeChanges;
    for (var i = 0; i < u.length; i++) {
      var x = u[i],
        X = x.guid;
      h.iS[X.sessionID + "," + X.localID] = x;
    }
    for (var i = 0; i < u.length; i++) {
      var x = u[i],
        X = x.parentIndex;
      if (X) {
        var $ = hs.B7(h.iS, X.guid);
        if ($.children == null) $.children = [];
        $.children.push(x);
      }
    }
    var H = u[0],
      C = H.children,
      l = new hk(),
      v = [],
      K = [];
    for (var X = 0; X < C.length; X++) {
      var S = C[X],
        o = S.children;
      if (S.name == "Internal Only Canvas" || o == null) continue;
      var V = new hk();
      for (var y = 0; y < o.length; y++) {
        var P = o[y],
          z = P.transform,
          E = P.size;
        if (z.m00 == 1 && z.m10 == 0 && z.m01 == 0 && z.m11 == 1) {
          var A = new hk(z.m02, z.m12, E.x, E.y);
          V = V.vd(A);
        }
      }
      var N = l.$ == 0 ? 0 : l.$ + 100,
        Q = V.P();
      Q.x = 0;
      Q.y = N;
      l = l.vd(Q);
      v[X] = V;
      K[X] = N;
    }
    var e = jU.ud(new hk(0, 0, l.r, l.$), 8192 * 8192);
    q.r = Math.round(l.r / e);
    q.$ = Math.round(l.$ / e);
    q.buffer = B.j(q.r * q.$ * 4);
    for (var X = 0; X < C.length; X++) {
      var S = C[X],
        o = S.children;
      if (S.name == "Internal Only Canvas" || o == null) continue;
      o.sort(hs.agE);
      var d = new k$(1, 0, 0, 1, -v[X].x, K[X] - v[X].y);
      d.scale(1 / e, 1 / e);
      for (var y = 0; y < o.length; y++) {
        var P = o[y];
        hs.fb(P, [], d, Z.blobs, q, 0, h);
        Y++;
      }
    }
    q.cw(Y);
    q.c4 = !0;
    if (e != 1) alert("File scaled down " + e + "x");
  };
  hs.fb = function (j, q, m, n, G, W, k) {
    var T = hs,
      o = !1,
      V,
      E = !1,
      A,
      N;
    q = B.S(q);
    var b = j.overrideKey ? j.overrideKey : j.guid;
    for (var y = 0; y < q.length; y++) {
      var c = q[y],
        a = c.guidPath.guids;
      if (T.a12(a[0], b)) {
        if (a.length == 1) {
          var f = {};
          for (var U in j) f[U] = c[U] != null ? c[U] : j[U];
          j = f;
        } else c.guidPath.guids = a.slice(1);
      }
    }
    var Z = j.type,
      h = j.children,
      u = j.size,
      i = j.effects,
      x = G.dj();
    x.tV(j.name);
    x.xg(j.visible);
    x.yA = Math.round(j.opacity * 255);
    var X = T.Wx(j.transform),
      $ = X.P();
    $.concat(m);
    if (u == null) u = { x: 0, y: 0 };
    var H = new hk(
      Math.round($.Tt),
      Math.round($.BL),
      Math.round(u.x * $.Dc()),
      Math.round(u.y * $.Dc())
    );
    if (H.r == 0 || isNaN(H.r)) H.r = 100;
    if (H.$ == 0 || isNaN(H.$)) H.$ = 100;
    var C = j.fillPaints,
      l = j.inheritFillStyleID;
    if (l) {
      var f = T.B7(k.iS, l);
      if (f) C = f.fillPaints;
    }
    if (C == null) C = [];
    var C = T.ak6(C),
      v = C[0];
    if (v && v.type == "IMAGE" && T.ht(n, hs.Kq(v), k, !0) == null) v = null;
    var K = j.strokePaints,
      l = j.inheritFillStyleIDForStroke;
    if (l) {
      var f = T.B7(k.iS, l);
      if (f) K = f.fillPaints;
    }
    if (K == null) K = [];
    var K = T.ak6(K),
      S =
        "BOOLEAN_OPERATION LINE RECTANGLE ROUNDED_RECTANGLE ELLIPSE VECTOR REGULAR_POLYGON STAR"
          .split(" ")
          .indexOf(Z) != -1;
    if (S || Z == "FRAME" || Z == "INSTANCE") {
      V = new R.tm();
      T.arG(j, n, V);
      o = B.z.Dk(V.D);
      B.z.La(V.D, $);
      var P = B.b.mE(B.z.zZ(V.D));
      if (!P.jG()) H = P;
      if (k.J9.pQ && v) {
        var z = R.tm.Fo(k.J9.pQ.D);
        for (var y = 2; y < z.length; y++) if (z[y].Np != null) z[y].Np = 3;
        V.D = V.D.concat(z.slice(2));
      }
    }
    if (v && v.type == "IMAGE") {
      N = v.imageScaleMode;
      E = !0;
      var Q = v.originalImageWidth,
        e = v.originalImageHeight;
      if (Q * e == 0) {
        var Y = T.ht(n, hs.Kq(v), k);
        Q = Y.Iu.r;
        e = Y.Iu.$;
      }
      var d = Q / e,
        I = u.x / u.y;
      A = Math.abs(d - I);
    }
    if (Z == "FRAME") {
    } else if (
      S &&
      o &&
      E &&
      (N == "FIT" ||
        (N == "FILL" && A <= 0.05) ||
        (N == "STRETCH" && A <= 0.05))
    ) {
      var O = T.ht(n, hs.Kq(v), k, !0),
        s = G.Pi(O, x.getName(), 0, 0);
      s.uZ = x.uZ;
      s.yA = x.yA;
      x = s;
      var p = new hk(0, 0, u.x, u.y);
      if (N == "FIT") {
        var F = v.originalImageWidth,
          g = v.originalImageHeight,
          w = Math.min(u.x / F, u.y / g),
          r = F * w,
          eQ = g * w;
        p = new hk(p.x + (p.r - r) / 2, p.y + (p.$ - eQ) / 2, r, eQ);
      }
      var t = B.b._c(p).L;
      B.b.u(t, $, t);
      x.add.SoLd.Trnf = L.Dq.be(t);
      x.add.SoLd.nonAffineTransform = L.Dq.be(t);
      var dq = [],
        i = j.effects,
        D = v.paintFilter;
      if (i)
        for (var y = 0; y < i.length; y++)
          if (i[y].type == "FOREGROUND_BLUR") {
            var ha = i[y],
              am = k0.ak("GsnB", {});
            dq.push(am);
            am.v.enab.v = ha.visible;
            am.v.Fltr.v.Rds.v.val = ha.radius / 2.4;
          }
      if (D && D.exposure != 0) {
        var am = k0.ak("brit", {});
        dq.push(am);
        am.v.Fltr.v.Brgh.v = Math.round(D.exposure * 160);
        am.v.Fltr.v.useLegacy.v = !0;
      }
      if (D && D.vibrance != 0) {
        var am = k0.ak("vibA", {});
        dq.push(am);
        am.v.Fltr.v.Strt.v = Math.round(Math.round(D.vibrance * 100));
      }
      if (dq.length != 0) {
        x.add.SoLd.filterFX = k0.X2();
        G.N8({
          id: x.add.SoLd.placed.v,
          H: new hk(),
          buffer: B.j(1),
          x7: new R.T0(),
        });
        x.add.SoLd.filterFX.v.filterFXList.v = dq;
      }
      x.yZ(G, !1);
      T.ay9(k, x, G);
    } else if (S) {
      T.Sv(x, V, j, v, K, $, H, n, G, k);
      if (i)
        for (var y = 0; y < i.length; y++) {
          var ha = i[y];
          if (ha.type != "FOREGROUND_BLUR") continue;
          V.LH = ha.radius / 2.4;
        }
      x.Pp();
      x.D5(G);
    } else if (Z == "TEXT") {
      var k4 = j.textData,
        aA = k4.layoutSize;
      if (aA == null) aA = j.size;
      var ex = ["LEFT", "RIGHT", "CENTER"].indexOf(j.textAlignHorizontal);
      if (ex == -1) ex = 0;
      x.add.lnsr = "rend";
      x.add.TySh = al.wD(0, 0);
      x.add.TySh.AF = new hk(0, 0, 100, 100);
      var ac = $.P();
      x.add.TySh.u = ac;
      var eJ = x.add.TySh.s3,
        h$ = k4.characters;
      if (j.textCase == "TITLE") {
        for (var y = 0; y < h$.length; y++)
          if (y == 0 || h$[y - 1] == " ") {
            var da = h$.slice(0, y),
              bb = h$.slice(y + 1);
            h$ = da + h$[y].toUpperCase() + bb;
          }
      }
      h$ = h$.replace(/\u2028/g, "\n");
      h$ = h$.replace(/\u2029/g, "\n");
      h$ = h$.replace(/\r\n/g, " \n");
      al.Fk(eJ, 0, h$);
      var gb = j.textAutoResize,
        fM = k4.baselines;
      if (gb == "WIDTH_AND_HEIGHT") {
        var kS = ex == 0 ? 0 : ex == 1 ? aA.x : aA.x / 2,
          cY = fM ? fM[0].position.y : j.fontSize;
        ac.translate(kS * $.Dc(), cY * $.Dc());
        al.cj(eJ, 0);
      } else if (gb == "HEIGHT" || gb == "NONE" || gb == null) {
        var cY = fM ? fM[0].position.y - j.fontSize * 0.7 : 0;
        ac.translate(0, cY * $.Dc());
        al.cj(eJ, 1);
        al.ms(eJ, [
          0,
          0,
          Math.round(aA.x),
          Math.round((gb == "NONE" ? 1.8 : 1) * aA.y),
        ]);
      } else throw gb;
      if (h$ != "") {
        var cS = al.vJ(eJ, 0, 1);
        T.aih(j, $, u, cS, x, n, G, k);
        al.jD(eJ, 0, h$.length, cS);
        var k3 = k4.characterStyleIDs,
          di = k4.styleOverrideTable;
        if (k3) {
          k3 = k3.slice(0);
          for (var y = 0; y < k3.length; y++) if (h$[y] == "\n") k3[y] = -y - 1;
          var a7 = [0],
            b0 = 0,
            e1 = 0;
          for (var y = 0; y < k3.length; y++) {
            e1++;
            var l2 = k3[y];
            if (y == 0 || l2 == k3[y - 1]) {
            } else {
              a7.push(e1 - 1, y);
              e1 = 1;
            }
          }
          a7.push(e1);
          for (var y = 0; y < a7.length; y += 2) {
            var kL = a7[y],
              es = a7[y + 1];
            if (h$[kL] == "\n") continue;
            var l2 = k3[kL];
            if (l2 != 0) {
              var kR;
              for (var eH = 0; eH < di.length; eH++)
                if (di[eH].styleID == l2) kR = di[eH];
              var cS = al.vJ(eJ, kL, kL + 1);
              T.aih(kR, $, u, cS, x, n, G, k);
              al.jD(eJ, kL, kL + es - 1, cS);
            }
          }
        }
      }
    } else if (Z == "SYMBOL") {
    } else if (Z == "INSTANCE" && j.symbolData) {
      var cZ = j.symbolData,
        ga = cZ.symbolOverrides,
        f = T.B7(k.iS, cZ.symbolID);
      if (f) h = f.children;
      else console.log(j.name, "symbol not found", cZ.symbolID);
      q = q.slice(0);
      for (var y = 0; y < ga.length; y++) q.push(ga[y]);
    } else console.log(Z);
    if (!1) {
    } else if (h && !S) {
      G.U.push(G.to());
      var fi = !1,
        go = W == 0 && Z != "SYMBOL" && Z != "INSTANCE";
      if (go) {
        if (H.jG()) console.log(H);
        x.KP(H);
      }
      v = C[C.length - 1];
      if (v && v.type == "IMAGE" && T.ht(n, hs.Kq(v), k, !0) == null) v = null;
      if (go && v && v.type == "SOLID") {
        var iz = v.color;
        x.add.artb.artboardBackgroundType.v = 4;
        x.add.artb.Clr = T.uQ(iz);
      } else if ((v || K[0]) && V) {
        var i5 = G.dj();
        i5.tV("Background");
        T.Sv(i5, V, j, v, K, $, H, n, G, k);
        i5.Pp();
        i5.D5(G);
        G.U.push(i5);
        fi = !0;
      }
      h.sort(T.agE);
      var aI = k.J9;
      k.J9 = {};
      for (var bs = 0; bs < h.length; bs++) T.fb(h[bs], q, $, n, G, W + 1, k);
      k.J9 = aI;
      x.add.lsct = !1 ? hQ.WR : hQ.z$;
      x.hz = "pass";
      var k2 = x.Iw();
      x.uZ = 24;
      x.xg(k2);
      var jG =
        W != 0 &&
        C.length != 0 &&
        !j.frameMaskDisabled &&
        j.containerSupportsFillStrokeAndCorners;
      if (!fi && jG && V) {
        x.add.vmsk = V;
        x.Pp();
        x.D5(G);
      } else T.ay9(k, x, G);
      G.U.push(x);
    } else if (Z == "FRAME" && v && V) {
      T.Sv(x, V, j, v, K, $, H, n, G, k);
      x.Pp();
      x.D5(G);
      G.U.push(x);
    } else if (j.mask) {
      if (V) {
        k.J9.pQ = V;
      }
    } else {
      var eW = [],
        hl = 1;
      if (i)
        for (var gc = 0; gc < i.length; gc++) {
          var ha = i[gc],
            k1 = ha.color,
            ke = ha.type,
            jh = ["DROP_SHADOW", "INNER_SHADOW"].indexOf(ke);
          if (jh != -1) {
            var cE = ["DrSh", "IrSh"][jh],
              cy = JSON.parse(eu.oy[eu.order.indexOf(cE)]);
            eW.push([cE, cy]);
            cy.enab.v = ha.visible;
            cy.Md.v.BlnM = kJ.il(T.axu(ha.blendMode));
            cy.Opct.v.val = Math.round(100 * k1.a);
            cy.blur.v.val = Math.round(ha.radius * $.Dc());
            cy.Clr = T.uQ(k1);
            var kS = ha.offset.x,
              cY = ha.offset.y;
            cy.uglg.v = !1;
            cy.lagl.v.val = Math.round((180 / Math.PI) * Math.atan2(cY, -kS));
            cy.Dstn.v.val = Math.round(Math.sqrt(kS * kS + cY * cY) * $.Dc());
          }
        }
      if (Z == "TEXT" && C[0] && C[0].type != "SOLID") hl = 0;
      for (var y = hl; y < C.length; y++) {
        var c2 = C[y],
          f9 = T.RG(j, c2, $, H, n, G, k);
        if (f9[0] == "GdFl") eW.push(["GrFl", f9[1]]);
        else if (f9[0] == "SoCo") eW.push(["SoFi", f9[1]]);
        else if (f9[0] == "PtFl") eW.push(["patternFill", f9[1]]);
        else if (f9[0] == "None") {
        } else throw f9;
      }
      if (!S)
        for (var y = 0; y < K.length; y++) {
          var c2 = K[y],
            f9 = T.RG(j, c2, $, H, n, G, k);
          if (f9[0] == "SoCo") {
            var cy = JSON.parse(eu.oy[eu.order.indexOf("FrFX")]);
            eW.push(["FrFX", cy]);
            cy.enab = f9[1].enab;
            cy.Opct = f9[1].Opct;
            cy.Md = f9[1].Md;
            cy.Clr = f9[1].Clr;
            cy.Sz.v.val = Math.round(j.strokeWeight);
            var hu = j.strokeAlign;
            if (hu)
              cy.Styl.v.FStl =
                eu.stroke.types[["INSIDE", "CENTER", "OUTSIDE"].indexOf(hu)];
          }
        }
      if (eW.length != 0) {
        var le = JSON.parse(eu.default);
        for (var y = 0; y < eu.order.length; y++)
          le[eu.C$[y]] = { t: "VlLs", v: [] };
        for (var y = 0; y < eW.length; y++) {
          var iJ = eW[y],
            cE = eu.C$[eu.order.indexOf(iJ[0])];
          le[cE].v.unshift({ t: "Objc", v: iJ[1] });
        }
        if (h == null) x.add.lmfx = le;
      }
      G.U.push(x);
    }
  };
  hs.Sv = function (j, q, m, n, G, W, k, T, b, c) {
    var a = hs;
    j.uZ |= 16;
    j.add.vmsk = q;
    var f = (j.add.vstk = eu.rS.i4()),
      U = a.RG(m, n, W, k, T, b, c);
    f.fillEnabled.v = U[0] != "None";
    if (U[0] == "None") {
      j.add.SoCo = U[1];
    } else {
      a.Z2(U, j);
      j.add[U[0]] = U[1];
    }
    var U = a.RG(m, G[0], W, k, T, b, c);
    if (U[0] != "None") {
      var f = j.add.vstk;
      f.strokeEnabled.v = !0;
      f.strokeStyleLineWidth.v.val = m.strokeWeight * W.Dc();
      f.strokeStyleLineAlignment.v.strokeStyleLineAlignment =
        eu.rS.Jr[["INSIDE", "CENTER", "OUTSIDE"].indexOf(m.strokeAlign)];
      var Z = { SoCo: "SoFi", GdFl: "GrFl", PtFl: "patternFill" }[U[0]],
        h = ["SoFi", "GrFl", "patternFill"].indexOf(Z),
        u = [eu.dS, eu.GB, eu.Pa][h];
      f.strokeStyleContent.v = { classID: eu.rS.HF[0] };
      var i = m.dashPattern;
      if (i) f.strokeStyleLineDashSet.v = dS.Uy(i, 1 / m.strokeWeight);
      var x = (f.strokeStyleContent.v = { classID: eu.rS.HF[h] });
      for (var y = 0; y < u.length; y++) x[u[y]] = U[1][u[y]];
      if (!f.fillEnabled.v) a.Z2(U, j);
    }
  };
  hs.Z2 = function (j, q) {
    var m = j[1].Opct.v.val;
    if (m != 100) q.yA = Math.round((q.yA / 255) * (m / 100) * 255);
  };
  hs.agE = function (j, q) {
    var m = j.parentIndex.position,
      n = q.parentIndex.position;
    return m > n ? 1 : -1;
  };
  hs.ak6 = function (j) {
    for (var y = 1; y < j.length; y++) {
      var q = j[y];
      if (q.type == "IMAGE" && q.opacity == 1) {
        j = j.slice(y);
        break;
      }
    }
    for (var y = 0; y < j.length; y++) {
      var q = j[y],
        m = q.imageThumbnail,
        n = q.type == "IMAGE";
      if (n && (q.image == null || q.image.dataBlob == null) && m && m.dataBlob)
        q.image = m;
      if (!q.visible || (n && q.image == null)) {
        j.splice(y, 1);
        y--;
      }
    }
    return j;
  };
  hs.ay9 = function (j, q, m) {
    if (j.J9.pQ) {
      q.add.vmsk = j.J9.pQ.P();
      q.Pp();
      q.D5(m);
    }
  };
  hs.aih = function (j, q, m, n, G, W, k, T) {
    var b = j.fontSize,
      c = j.lineHeight,
      a = j.fontName,
      f = j.textAlignHorizontal,
      U = j.textTracking,
      Z = j.textCase,
      h = j.textDecoration;
    if (b == null) b = n.K2.FontSize;
    if (a) {
      var u = a.postscript;
      if (u == "") {
        var i = a.family,
          x = a.style;
        u = i.split(" ").join("") + "-" + x;
      }
      al.gk(n, u);
    }
    if (b != null) n.K2.FontSize = Math.round(b);
    if (h == "UNDERLINE") n.K2.Underline = !0;
    if (U) n.K2.Tracking = Math.round(U * 1e3);
    if (Z) n.K2.FontCaps = Z == "UPPER" ? 2 : 0;
    if (c && (c.units != "PERCENT" || c.value != 100)) {
      if (b == null) b = 15;
      var X = c.value;
      if (c.units == "PERCENT") X = (1 * b * X) / 100;
      if (c.units == "RAW") X = 1 * b * X;
      n.K2.AutoLeading = !1;
      n.K2.Leading = Math.round(X);
    }
    if (f) n.Th.Justification = ["LEFT", "RIGHT", "CENTER"].indexOf(f);
    var $ = j.fillPaints,
      H = j.inheritFillStyleID;
    if (H) {
      var C = hs.B7(T.iS, H);
      if (C) $ = C.fillPaints;
    }
    if ($ && $[0]) {
      var l = hs.RG(j, $[0], q, m, W, k, T);
      if (l[0] == "SoCo") {
        var v = B.MV.xH(l[1].Clr.v);
        n.K2.FillColor = {
          Type: 1,
          Values: [1, v.o / 255, v.i / 255, v.X / 255],
        };
        hs.Z2(l, G);
      }
    }
  };
  hs.RG = function (j, q, m, n, G, W, k) {
    var T = hs,
      b,
      c,
      a = j.size;
    if (a == null) a = { x: 0, y: 0 };
    if (q) {
      var f = q.type,
        U = [
          "GRADIENT_LINEAR",
          "GRADIENT_RADIAL",
          "GRADIENT_DIAMOND",
          "GRADIENT_ANGULAR",
        ].indexOf(f);
      if (f == "SOLID") {
        b = "SoCo";
        var Z = q.color;
        c = JSON.parse(eu.oy[eu.order.indexOf("SoFi")]);
        c.Clr = T.uQ(Z);
      } else if (f == "PATTERN") {
        b = "SoCo";
        var Z = q.color;
        c = JSON.parse(eu.oy[eu.order.indexOf("SoFi")]);
        console.log(f);
      } else if (U != -1) {
        var h = JSON.parse(eu.oy[eu.order.indexOf("GrFl")]),
          u = h.Grad.v;
        u.Intr.v = 0;
        h.Type.v.GrdT = ["Lnr", "Rdl", "Dmnd", "Angl"][U];
        var i = [],
          x = q.stops;
        for (var y = 0; y < x.length; y++) {
          var X = x[y],
            $ = X.color;
          i.push([X.position, [$.r, $.g, $.b], $.a]);
        }
        B.MV.gB(i, u);
        var H = T.Wx(q.transform);
        H.BR();
        var C = H.P();
        if (a) C.scale(a.x, a.y);
        C.concat(m);
        var l = new ea(0, 0.5),
          v = new ea(1, 0.5);
        l = C.uL(l);
        v = C.uL(v);
        if (!0) {
          l.x = v.x + 0.5 * (l.x - v.x);
          l.y = v.y + 0.5 * (l.y - v.y);
        }
        B.MV.UO(l, v, n, h);
        if (U == 3) {
          if (C.Sd * C.Jy - C.X * C.ra < 0) h.Rvrs.v = !h.Rvrs.v;
        }
        b = "GdFl";
        c = h;
      } else if (f == "IMAGE") {
        var h = JSON.parse(eu.oy[eu.order.indexOf("patternFill")]),
          H = T.Wx(q.transform);
        H.BR();
        var K = hs.Kq(q),
          S = k.a7d[K];
        if (S == null) {
          var o = T.ht(G, K, k);
          if (o == null) o = { data: B.j(4), Iu: new hk(0, 0, 1, 1) };
          S = k.a7d[K] = {};
          S.id = fb.Rh() + "-d71c-11e5-b1ae-a548a96e5f9f";
          S.Og = [new Uint8Array(o.data), o.Iu];
          if (H.Sd < 0) {
            var V = S.Og[0].slice(0);
            B.B.cq(V, S.Og[0], o.Iu.r, o.Iu.$);
          }
          S.name = "someImage";
          W.Vq(S);
        }
        if (H.Sd < 0) H.Sd = -H.Sd;
        var P = ["FILL", "FIT", "STRETCH", "TILE"].indexOf(q.imageScaleMode),
          z = P == 3 ? q.scale : 1;
        dS.ao0(S, h, a.x, a.y, P, m, H, z);
        b = "PtFl";
        c = h;
      } else if (f == "VIDEO") {
        b = "SoCo";
        c = JSON.parse(eu.oy[eu.order.indexOf("SoFi")]);
        c.Clr = T.uQ({ r: 255, g: 0, b: 255 });
      } else throw f;
      if (c)
        c.Opct = {
          t: "UntF",
          v: { type: "#Prc", val: Math.round(q.opacity * 100) },
        };
    }
    if (b == null || q.opacity < 0.001) {
      b = "None";
      c = {
        classID: "null",
        Clr: { t: "Objc", v: B.MV.Ia({ o: 0, i: 0, X: 0 }) },
      };
    }
    return [b, c];
  };
  hs.Kq = function (j) {
    var q = j.image,
      m = q.dataBlob;
    if (m == null) {
      m = "";
      for (var y = 0; y < 20; y++) m += q.hash[y].toString(16).padStart(2, "0");
    }
    return m;
  };
  hs.ht = function (j, q, m, n) {
    if (j[q]) {
      var G = j[q];
      if (n) return G.bytes;
      if (G.rslt) return G.rslt;
      var W = G.bytes.buffer;
      G.rslt = hs.aB0(W);
      return G.rslt;
    } else {
      if (m.uv == null) return null;
      if (n) return m.uv["images/" + q];
      var k = m.uv["images/" + q];
      if (k == null) return null;
      var W = k.buffer;
      if (m.uv["images/-" + q]) return m.uv["images/-" + q];
      m.uv["images/-" + q] = hs.aB0(W);
      return m.uv["images/-" + q];
    }
  };
  hs.aB0 = function (j) {
    var q = gh.Qa(j);
    if (q == "fpng") q = "png";
    var m = gh.lj(q);
    try {
      var n = m.LN(j)[0];
      if (n.depth == 16) {
        n.depth = 8;
        n.data = B.sL(new Uint16Array(n.data), 8).buffer;
      }
      return n;
    } catch (gn) {
      return { data: B.j(4), Iu: new hk(0, 0, 1, 1) };
    }
  };
  hs.arG = function (j, q, m) {
    var n = j.type,
      G = j.size,
      W = j.cornerRadius,
      c;
    if (W == null) W = 0;
    var k = G.x,
      T = G.y,
      b = [W, W, W, W],
      a = [
        "rectangleTopLeftCornerRadius",
        "rectangleTopRightCornerRadius",
        "rectangleBottomRightCornerRadius",
        "rectangleBottomLeftCornerRadius",
      ];
    for (var y = 0; y < 4; y++) if (j[a[y]] != null) b[y] = j[a[y]];
    if (
      n == "RECTANGLE" ||
      n == "ROUNDED_RECTANGLE" ||
      n == "FRAME" ||
      n == "INSTANCE"
    ) {
      c = B.z.cn.Rect(0, 0, k, T, b);
    } else if (n == "ELLIPSE") {
      var f = j.arcData,
        U = f ? f.startingAngle : 0,
        Z = f ? f.endingAngle : 2 * Math.PI,
        h = f ? f.innerRadius : 0;
      if (U == 0 && Z > 1.999 * Math.PI) c = B.z.cn.SQ(0, 0, k, T, 0);
      else c = B.z.cn.a8l(k / 2, T / 2, T / 2, U, Z);
      if (h != 0 && h != 1) {
        var u = R.tm.Fo(c).slice(3);
        u.reverse();
        for (var y = 0; y < u.length; y++) {
          var i = u[y],
            x = i.kt;
          i.kt = i._$;
          i._$ = x;
        }
        var X = new k$();
        X.translate(-k / 2, -T / 2);
        X.scale(h, h);
        X.translate(k / 2, T / 2);
        B.z.La(u, X);
        c = c.concat(u);
        c[2].length *= 2;
      }
    } else if (n == "LINE") {
      c = B.z.cn.Rect(0, 0, k, T, 0);
      c.pop();
      c.pop();
      c[2].length = 2;
    } else if (n == "STAR") {
      c = B.z.cn.Cz(
        k / 2,
        T / 2,
        k / 2,
        2 * Math.PI * (1 / 4),
        5,
        0,
        j.starInnerScale
      );
    } else if (n == "REGULAR_POLYGON") {
      c = B.z.cn.Or(0.5, 0.5, 0.5, Math.PI / 2, j.count, 0);
      var $ = new k$();
      $.scale(k, T);
      B.z.La(c, $);
    } else if (n == "BOOLEAN_OPERATION") {
      c = [{ e: 6 }, { e: 8, all: 0 }];
      var H = j.children,
        C = ["XOR", "UNION", "SUBTRACT", "INTERSECT"].indexOf(
          j.booleanOperation
        );
      if (C == -1) throw j;
      if (H == null) H = [];
      for (var y = 0; y < H.length; y++) {
        var l = H[y],
          v = new R.tm(),
          K = hs.arG(l, q, v);
        if (v.D == null) continue;
        B.z.La(v.D, hs.Wx(l.transform));
        c = c.concat(v.D.slice(2));
      }
      for (var y = 3; y < c.length; y++) if (c[y].Np != null) c[y].Np = C;
    } else if (n == "VECTOR") {
      var S,
        o,
        I = 3;
      if (!0) {
        var V = j.vectorData;
        if (V == null) return;
        S = V.normalizedSize;
        o = V.vectorNetworkBlob;
      }
      var P = q[o].bytes,
        z = new Uint32Array(P.buffer),
        E = new Float32Array(P.buffer),
        A = z[0],
        N = z[1],
        Q = z[2],
        e = [],
        Y = [],
        d = [],
        O = I + A * 3,
        s = O + N * 7;
      for (var y = 0; y < A; y++) {
        var p = I + y * 3;
        if (Math.abs(E[p + 0]) > 1e-7) throw "e";
        e.push(new ea(E[p + 1], E[p + 2]));
      }
      for (var y = 0; y < N; y++) {
        var F = O + y * 7;
        Y.push([
          z[F + 0],
          z[F + 1],
          E[F + 2],
          E[F + 3],
          z[F + 4],
          E[F + 5],
          E[F + 6],
        ]);
      }
      for (var y = 0; y < Q; y++) {
        var g = z[s + 1],
          w = (d[y] = []);
        s += 2;
        for (var r = 0; r < g; r++) {
          var eQ = z[s++],
            t = (w[r] = []);
          for (var dq = 0; dq < eQ; dq++) t[dq] = z[s + dq];
          s += eQ;
        }
      }
      if (s != z.length && s != z.length - 1) throw "e";
      if (d.length == 0 && Y.length != 0) {
        var D = new Uint8Array(e.length),
          ha = new Uint8Array(e.length),
          am = -1;
        for (var y = 0; y < Y.length; y++) {
          var k4 = Y[y];
          D[k4[1]]++;
          D[k4[4]]++;
          ha[k4[1]] = 1;
        }
        for (var y = 0; y < e.length; y++) {
          if (D[y] == 1 && ha[y] == 1) {
            am = y;
            break;
          }
        }
        if (am != -1)
          for (var y = 0; y < Y.length; y++) {
            if (Y[y][1] == am) {
              var x = Y[0];
              Y[0] = Y[y];
              Y[y] = x;
              break;
            }
          }
        var aA = Y[0][4];
        for (var y = 1; y < Y.length; y++) {
          var ex = -1;
          for (var r = y; r < Y.length; r++) if (Y[r][4] == aA) ex = r;
          for (var r = y; r < Y.length; r++) if (Y[r][1] == aA) ex = r;
          if (ex != -1) {
            var ac = 0,
              x = Y[ex];
            Y[ex] = Y[y];
            Y[y] = x;
            if (x[1] != aA) {
              ac = x[1];
              x[1] = x[4];
              x[4] = ac;
              ac = x[2];
              x[2] = x[5];
              x[5] = ac;
              ac = x[3];
              x[3] = x[6];
              x[6] = ac;
            }
          }
          aA = Y[y][4];
        }
        d.push([[]]);
        for (var y = 0; y < Y.length; y++) d[0][0].push(y);
      }
      var eJ = [],
        h$ = [];
      for (var da = 0; da < d.length; da++) {
        for (var bb = 0; bb < d[da].length; bb++) {
          var gb = d[da][bb],
            fM = 0;
          if (gb.length > 1) {
            var kS = Y[gb[0]],
              cY = Y[gb[1]];
            fM = kS[4] == cY[1] ? 1 : 0;
          }
          for (var y = 0; y < gb.length; y++) {
            var cS = Y[gb[y]],
              k3 = 1,
              di = 4;
            if (fM == 0) {
              k3 = 4;
              di = 1;
            }
            var a7 = e[cS[k3]],
              b0 = e[cS[di]];
            if (y == 0) {
              h$.push("M");
              eJ.push(a7.x, a7.y);
            }
            h$.push("C");
            eJ.push(
              a7.x + cS[k3 + 1],
              a7.y + cS[k3 + 2],
              b0.x + cS[di + 1],
              b0.y + cS[di + 2],
              b0.x,
              b0.y
            );
          }
        }
      }
      c = B.b.LZ({ L: eJ, RC: h$ }, !1);
      if (W != 0) {
        var b = [],
          e1 = c[2].length;
        for (var y = 0; y < e1; y++) b.push(W);
        if (B.z.Qh(c)) B.z.E8(c, 2, b);
      }
      var l2 = new k$();
      l2.scale(S.x == 0 ? 1 : G.x / S.x, S.y == 0 ? 1 : G.y / S.y);
      B.z.La(c, l2);
    }
    m.D = c;
  };
  hs.B7 = function (j, q) {
    return j[q.sessionID + "," + q.localID];
  };
  hs.a12 = function (j, q) {
    return j.sessionID == q.sessionID && j.localID == q.localID;
  };
  hs.axu = function (j) {
    var q = {
      NORMAL: "norm",
      MULTIPLY: "mul ",
      SCREEN: "scrn",
      COLOR_DODGE: "div ",
      LINEAR_DODGE: "lddg",
      COLOR_BURN: "idiv",
      LINEAR_BURN: "lbrn",
      SOFT_LIGHT: "sLit",
      HARD_LIGHT: "hLit",
      DARKEN: "dark",
      LUMINOSITY: "lum ",
      OVERLAY: "over",
      COLOR: "colr",
    }[j];
    if (q == null) throw j;
    return q;
  };
  hs.uQ = function (j) {
    return {
      t: "Objc",
      v: B.MV.Ia({ o: j.r * 255, i: j.g * 255, X: j.b * 255 }),
    };
  };
  hs.Wx = function (j) {
    if (j == null) return new k$();
    var q = [j.m00, j.m10, j.m01, j.m11, j.m02, j.m12];
    for (var y = 0; y < 6; y++) if (Math.abs(q[y]) < 1e-20) q[y] = 0;
    return new k$(q[0], q[1], q[2], q[3], q[4], q[5]);
  };
  function je() {}
  je.VB = (function () {
    var j = M.IH;
    function q(Z, h, u, i) {
      var x = i ? [] : {};
      while (h < Z.length - 1 && Z[h] != 125) {
        var X = j(Z, h, 3),
          $ = j(Z, h + 3, 1),
          H;
        h += 4;
        h++;
        if ($ == "v") {
          var C = q(Z, h, u + 1, X == "ELM" || X == "TIL" || X == "TFS");
          H = C.K;
          h = C.g;
        } else if ($ == "i" || $ == "f") {
          var l = h;
          while (Z[l] != 125) l++;
          var v = j(Z, h, l - h);
          H = $ == "i" ? parseInt(v, 16) : parseFloat(v);
          h = l + 1;
        } else if ($ == "s") {
          var K = M._h(Z, h),
            v = "";
          h += 2;
          for (var y = 0; y < K; y++)
            v += String.fromCharCode(Z[h + 2 * y + 1]);
          H = v;
          h = h + 2 * K + 1;
        } else if ($ == "b") {
          H = Z[h] == 49;
          h = h + 2;
        } else throw "e";
        if (i) x.push([X, H]);
        else if (x[X] == null) x[X] = H;
        else {
          if (!(x[X] instanceof Array)) x[X] = [x[X]];
          x[X].push(H);
        }
      }
      h++;
      return { K: x, g: h };
    }
    function m(Z, h) {
      var u = n(Z).slice(1),
        Z = h.Clr.v;
      Z.Rd.v = u[0] * 255;
      Z.Grn.v = u[1] * 255;
      Z.Bl.v = u[2] * 255;
    }
    function n(Z) {
      return [
        ((Z >>> 24) & 255) / 255,
        ((Z >>> 16) & 255) / 255,
        ((Z >>> 8) & 255) / 255,
        ((Z >>> 0) & 255) / 255,
      ];
    }
    function G(Z, h) {
      var u =
        (h & 4278190080) |
        ((h & 255) << 16) |
        (((h >>> 8) & 255) << 8) |
        ((h >>> 16) & 255);
      B.bs(Z, u);
    }
    function W(Z, h) {
      var u = Z.TSZ,
        i = Z.WPX,
        x = Z.HPX,
        X = Z.TIL,
        $ = new hk(0, 0, i, x),
        H = B.j(i * x * 4),
        C = 0;
      for (var l = 0; l < x; l += u)
        for (var v = 0; v < i; v += u) {
          var K = new hk(v, l, u, u),
            S,
            o = X[C];
          if (o[0] == "TMC") {
            S = B.j(K.C() * 4);
            G(S, o[1]);
          } else if (o[0] == "TID") {
            S = h[o[1]];
          }
          B.M4(S, K, H, $);
          C++;
        }
      return [H, $];
    }
    function k(Z, h) {
      Z = new Uint8Array(Z);
      var u = 8,
        i,
        x = {},
        N = 0;
      while (u < Z.length) {
        var X = M.Z$(Z, u);
        u += 4;
        var $ = j(Z, u, 4);
        u += 4;
        if ($ == "mkTS") {
          var H = pako.inflate(Z.slice(u, u + X)),
            C = q(H, 0, 0);
          i = C.K;
        } else if ($ == "mkBT") {
          var l = M.Z$(Z, u + 4),
            v = M.Z$(Z, u + 8),
            H = pako.inflate(Z.slice(u + 76, u + X));
          if (v == 0)
            for (var y = 0; y < H.length; y += 4) {
              var K = H[y],
                S = H[y + 1],
                o = H[y + 2],
                V = H[y + 3];
              H[y + 3] = K;
              H[y + 2] = V;
              H[y + 1] = o;
              H[y] = S;
            }
          else {
            var P = B.j(H.length * 4);
            P.fill(255);
            B.QZ(H, P);
            H = P;
          }
          x[l] = H;
        }
        u += X + 4;
      }
      var z = i.PDC,
        E = z ? (z instanceof Array ? z : [z]) : [i.MKB],
        A = new hk();
      for (var y = 0; y < E.length; y++) {
        var Q = E[y];
        A = A.vd(new hk(0, N, Q.WID, Q.HIT));
        N += Q.HIT + 100;
      }
      h.r = A.r;
      h.$ = A.$;
      h.buffer = B.j(A.C() * 4);
      h.cw(E.length);
      N = 0;
      for (var e = 0; e < E.length; e++) {
        h.U.push(h.to());
        var Q = E[e],
          Y = Q.WID,
          d = Q.HIT,
          I = Q.BGC,
          O = (Q.LYL ? Q : i).LYL.LAY,
          F = 3;
        for (var y = 0; y < O.length; y++)
          b(O[y], h, null, x, new k$(1, 0, 0, 1, -Q.XLC, -Q.YLC + N));
        var s = h.dj();
        h.U.push(s);
        var p = new hk(0, N, Y, d);
        N += d + 100;
        s.KP(p);
        if (I >>> 24 != 0) {
          var g = B.MV.Ia({
            o: (I >>> 16) & 255,
            i: (I >>> 8) & 255,
            X: (I >>> 0) & 255,
          });
          s.add.artb.Clr = { t: "Objc", v: g };
          F = 4;
        }
        s.add.artb.artboardBackgroundType.v = F;
        s.tV(Q.PGN ? Q.PGN : "Page " + (e + 1));
        s.add.lsct = hQ.z$;
        s.hz = "pass";
        s.uZ = 24;
      }
    }
    function T(Z, h, u) {
      var i = Z[h];
      return i instanceof Array ? i[u] : i;
    }
    function b(Z, h, u, i, x) {
      var X = h.dj();
      if (Z.VIS != null) X.xg(Z.VIS);
      if (Z.VIF != null) X.xg(Z.VIF.VIS);
      if (Z.OPA != null) X.yA = Math.round((255 * Z.OPA) / 1e3);
      X.hz = Z.CLL || u == "GRP" ? "pass" : "norm";
      if (Z.BLD != null) {
        var $ = Z.BLD,
          H = {
            0: "norm",
            2: "mul ",
            4: "over",
            5: "scrn",
            7: "diss",
            9: "dark",
            10: "lite",
            37: "idiv",
            30: "norm",
            39: "lbrn",
            41: "vLit",
          }[$ + ""];
        if (H == null) console.log(Z.OBN, $);
        else X.hz = H;
        if ($ == 30) X.yA >>>= 1;
      }
      if (Z.CLL) {
        X.tV(Z.LNM);
        h.U.push(h.to());
        var C = Z.CLL.CEL;
        if (C.length == null) C = [C];
        for (var l = C.length - 1; l >= 0; l--) {
          var v = C[l].ELM;
          for (var y = v.length - 1; y >= 0; y--) b(v[y][1], h, v[y][0], i, x);
        }
        X.add.lsct = Z.DIS ? hQ.WR : hQ.z$;
        X.uZ |= 24;
      } else if (u == "URL") {
        var K = Z.LFT,
          S = Z.TOP,
          o = new hk(x.Tt + K, x.BL + S, Z.RIT - K, Z.BOT - S),
          V = L.ct.HX();
        V.v.Nm = { t: "TEXT", v: Z.FIL ? Z.FIL : "" };
        h.gQ.push(V);
        L.ct.As(h.gQ, h.gQ.length - 1, [o.x, o.y, o.x + o.r, o.y + o.$]);
        return;
      } else if (u == "GRP") {
        var P = (X.add.lmfx = a(Z.EFL)),
          z;
        h.U.push(h.to());
        var v = Z.ELM,
          E = Z.MRM;
        if (Z.MNA) {
          z = v[0][1];
          v = v.slice(1);
        }
        X.tV("Group: " + v.length + " objects");
        for (var y = v.length - 1; y >= 0; y--) b(v[y][1], h, v[y][0], i, x);
        if (z) {
          if (Z.MRX) {
            var A = W(z, i),
              N = (X.x7 = new R.T0());
            N.H = A[1].P();
            N.H.x = z.XLC;
            N.H.y = z.YLC + x.BL;
            N.N = B.j(N.H.C());
            B.Ih(A[0], N.N, 0);
            B.BR(N.N);
          } else {
            c(X, z, x);
            X.Pp();
            X.D5(h);
          }
        }
        if (E) {
          c(X, E.PTH, x);
          X.Pp();
          X.D5(h);
        }
        X.add.lsct = hQ.z$;
        X.uZ |= 24;
      } else if (u == "IMG") {
        X.tV(Z.OBN ? Z.OBN : "Bitmap");
        var A = W(Z, i);
        X.H = A[1].P();
        X.H.x = Z.XLC;
        X.H.y = Z.YLC + x.BL;
        X.buffer = A[0];
      } else if (u == "TXT") {
        var Q = Z.TFS,
          O = "";
        X.add.lnsr = "rend";
        X.add.TySh = al.wD(0, 0);
        X.add.TySh.AF = new hk(0, 0, 100, 100);
        var e = new k$(1, 0, 0, 1, Z.LFT, Z.TOP);
        if (Z.MTX) {
          var Y = Z.MTX,
            N = new k$(Y.M00, Y.M01, Y.M10, Y.M11, Y.M20, Y.M21);
          e.concat(N);
        }
        e.concat(x);
        X.add.TySh.u = e;
        var d = X.add.TySh.s3,
          I = al.vJ(d, 0, 0),
          s = T(Z, "FON");
        if (s) al.gk(I, s);
        var p = T(Z, "PTS");
        if (p) I.K2.FontSize = Math.round(p);
        var F = T(Z, "ITL");
        if (F) I.K2.FauxItalic = F;
        if (Z.PAT) I.K2.FillColor = { Type: 1, Values: n(T(Z.PAT, "FCL")) };
        for (var y = 0; y < Q.length; y++) {
          var w = Q[y][0],
            r = Q[y][1];
          if (w == "TRN") {
            r = r
              .replaceAll("\x18", "'")
              .replaceAll("\x19", "'")
              .replaceAll("\x1C", "'")
              .replaceAll("\x1D", "'");
            r = r.replaceAll("\x03", "\n").replaceAll("\r", "\n");
            al.Fk(d, O.length, r);
            al.jD(d, O.length, O.length + r.length, I);
            O += r;
          } else if (w == "FON") al.gk(I, r);
          else if (w == "PTS") I.K2.FontSize = Math.round(r);
          else if (w == "ITL") I.K2.FauxItalic = r;
          else if (w == "UND") I.K2.Underline = r;
          else if (w == "FCL") I.K2.FillColor = { Type: 1, Values: n(r) };
          else if (w == "LED") {
            I.K2.Leading = r * I.K2.FontSize;
            I.K2.AutoLeading = !1;
          } else if (w == "JST")
            I.Th.Justification = [0, 2, 1, 3, 5, 4, 6, 7, 8][r];
        }
        X.tV(O.slice(0, 255));
        var eQ = Z.RIT - Z.LFT,
          t = Z.BOT - Z.TOP;
        if (Z.IMG) {
          b(Z.IMG, h, "IMG", i, x);
          var dq = h.U.pop();
          X.buffer = dq.buffer;
          X.H = dq.H.P();
        }
        al.cj(d, 1);
        al.ms(d, [0, 0, eQ, t]);
      } else if (u == "PTH") {
        X.tV(Z.OBN ? Z.OBN : "Path");
        X.uZ |= 16;
        var D = !1;
        c(X, Z, x);
        var ha = X.add.vmsk,
          am = X.add.vstk,
          k4 = B.z.zZ(ha.D),
          aA = Z.PAT,
          ex = aA.BPL,
          ac = aA.FPL,
          eJ = aA.TXF;
        if (ac && ac.FEF) ha.LH += ac.FEF / 2.4;
        if (ex) {
          var h$ = ex.CAT;
          am.strokeEnabled.v = !0;
          am.strokeStyleLineWidth.v.val = ex.BDI;
          am.strokeStyleLineAlignment.v.strokeStyleLineAlignment =
            eu.rS.Jr[Z.BRP];
          m(aA.BCL, am.strokeStyleContent.v);
          if (h$ != "bc_Basic" && h$ != "bc_Pencil") D = !0;
        }
        am.fillEnabled.v = ac != null;
        if (ac == null) {
          X.add.SoCo = JSON.parse(eu.oy[eu.order.indexOf("SoFi")]);
          m(0, X.add.SoCo);
        } else if (ac.CAT == "fc_Solid") {
          X.add.SoCo = JSON.parse(eu.oy[eu.order.indexOf("SoFi")]);
          m(Z.PAT.FCL, X.add.SoCo);
        } else if (
          ac.CAT == "fc_Linear" ||
          ac.CAT == "fc_Circular" ||
          ac.CAT == "fc_Elliptical"
        ) {
          var da = ac.CAT == "fc_Linear",
            bb = (X.add.GdFl = JSON.parse(eu.oy[eu.order.indexOf("GrFl")])),
            gb = bb.Grad.v,
            fM = [],
            kS = ac.FGL,
            cY,
            cS = [];
          if (kS.FGY) {
            var k3 = kS.FGY,
              cY = k3.FG0.FGI,
              cS = k3.FG1.FGI;
          } else cY = kS.FGV.FGI;
          for (var y = 0; y < cY.length; y++) {
            var di = cY[y],
              a7 = n(di.FGC),
              b0 = 1;
            if (cS.length == cY.length) b0 = n(cS[y].FGC)[0];
            fM.push([di.FGP, a7.slice(1), b0]);
          }
          bb.Type.v.GrdT = da ? "Lnr" : "Rdl";
          B.MV.gB(fM, gb);
          gb.Intr.v = 0;
          var e1 = Z.PRI ? Z.PRI : Z,
            l2 = new ea(e1.PSX, e1.PSY),
            kL = new ea(e1.PEX, e1.PEY);
          if (ac.CAT == "fc_Elliptical" && e1.PFX != null) {
            var es = new ea(e1.PFX, e1.PFY),
              kR = ea.gw(l2, kL),
              eH = ea.gw(l2, es);
            if (eH < kR) {
              var cZ = kR;
              kR = eH;
              eH = cZ;
            }
            kL = new ea(l2.x + (kR + eH) / 2, l2.y);
            if (kR / eH < 0.5) D = !0;
          }
          if (da) {
            l2.x = (l2.x + kL.x) / 2;
            l2.y = (l2.y + kL.y) / 2;
          }
          B.MV.UO(l2, kL, k4, bb);
        } else console.log(ac.CAT);
        var P = (X.add.lmfx = a(Z.EFL, ha));
        if (ac && ac.FTB != 0 && eJ) {
          var A = W(eJ.MSK, i),
            ga = {};
          ga.id = fb.Rh() + "-d71c-11e5-b1ae-a548a96e5f9f";
          ga.name = "someImage";
          ga.Og = A;
          h.Vq(ga);
          var fi = A[0];
          for (var y = 0; y < fi.length; y += 4) {
            fi[y + 3] = 255 - fi[y];
            fi[y] = fi[y + 1] = fi[y + 2] = 255;
          }
          var bb = JSON.parse(eu.oy[eu.order.indexOf("patternFill")]);
          bb.Opct.v.val = Math.round(ac.FTB / 10);
          bb.Algn.v = !0;
          bb.Ptrn.v.Idnt.v = ga.id;
          P.patternFillMulti.v.unshift({ t: "Objc", v: bb });
        }
        if (D && Z.IMG) {
          b(Z.IMG, h, "IMG", i, x);
          var go = h.U[h.U.length - 1];
          go.yA = X.yA;
          return;
        }
        X.Pp();
        X.D5(h);
      } else {
        console.log("unknown layer type", u, Z);
        X.tV("Layer");
      }
      h.U.push(X);
    }
    function c(Z, h, u) {
      if (h.PBL == null) return;
      var i = (Z.add.vmsk = new R.tm()),
        x = (Z.add.vstk = eu.rS.i4(!0)),
        X = h.PBL.PBP;
      if (!(X instanceof Array)) X = [X];
      for (var $ = 0; $ < X.length; $++) {
        var H = X[$].PBT;
        if (H == null) continue;
        if (!(H instanceof Array)) H = [H];
        var C = X[$].ISC ? 0 : 3;
        i.D.push({ e: C, length: H.length, Np: 0, uc: 2, xV: 0, yg: 0 });
        for (var y = 0; y < H.length; y++) {
          var l = H[y],
            v = l.XLC,
            K = l.YLC,
            S = [v, K, v, K, v, K],
            o = "XPC YPC XLC YLC XSC YSC".split(" ");
          for (var V = 0; V < 6; V++) {
            var P = o[V],
              z = l[P];
            if (z != null) S[V] = z;
          }
          i.D.push({
            e: C + 2,
            Ii: new ea(v, K),
            kt: new ea(S[0], S[1]),
            _$: new ea(S[4], S[5]),
          });
        }
      }
      B.z.La(i.D, u);
    }
    function a(Z, h) {
      var u = JSON.parse(eu.default);
      for (var y = 0; y < eu.order.length; y++)
        u[eu.C$[y]] = { t: "VlLs", v: [] };
      if (Z == null || Z.EPS == null) return u;
      var i = Z.EPS;
      if (!(i instanceof Array)) i = [i];
      for (var y = 0; y < i.length; y++) {
        var x = i[y].DCE,
          X = {};
        for (var $ = 0; $ < x.length; $++) X[x[$].DCK] = x[$].DCV;
        if (X.EffectIsVisible == "false") continue;
        var H = X.mkbFile_WriteOnly_TemporaryEffectUiName;
        if (H == "Gaussian Blur..." && h) {
          h.LH += parseFloat(X.gaussian_blur_radius);
          continue;
        }
        var C = ["Drop Shadow", "Inner Bevel", "Inner Glow", "Glow"].indexOf(H);
        if (C == -1) {
          continue;
        }
        var l = ["DrSh", "ebbl", "IrGl", "OrGl"][C],
          v = eu.C$[eu.order.indexOf(l)],
          K = JSON.parse(eu.oy[eu.order.indexOf(l)]);
        u[v].v.unshift({ t: "Objc", v: K });
        if (l == "DrSh") {
          K.uglg.v = !1;
          f(X, "ShadowDistance", K, "Dstn");
          f(X, "ShadowBlur", K, "blur");
          f(X, "ShadowAngle", K, "lagl", 180);
          K.Opct.v.val = 100;
          U(X, "ShadowColor", K, "Clr");
        }
        if (l == "IrGl") {
          K.Md.v.BlnM = "Nrml";
          var S = X.MaskSoftness,
            o = X.GlowWidth;
          if (S && o) {
            S = parseInt(S);
            o = parseInt(o);
            K.blur.v.val = o + S;
            K.Ckmt.v.val = Math.round((100 * o) / (o + S));
          }
          f(X, "BevelContrast", K, "Opct");
          U(X, "OuterBevelColor", K, "Clr");
        }
        if (l == "OrGl") {
          K.Md.v.BlnM = "Nrml";
          var S = X.MaskSoftness,
            o = X.GlowWidth;
          if (S && o) {
            S = parseInt(S);
            o = parseInt(o);
            K.blur.v.val = o + S;
          }
          f(X, "BevelContrast", K, "Opct");
          U(X, "OuterBevelColor", K, "Clr");
        }
        if (l == "ebbl") {
          K.uglg.v = !1;
          f(X, "BevelWidth", K, "blur");
          f(X, "AngleSoftness", K, "Sftn");
          f(X, "BevelContrast", K, "srgR");
          f(X, "LightAngle", K, "lagl");
        }
      }
      return u;
    }
    function f(Z, h, u, i, x) {
      var X = Z[h];
      if (x == null) x = 0;
      if (X) u[i].v.val = parseInt(X) + x;
    }
    function U(Z, h, u, i) {
      var x = Z[h];
      if (x) {
        x = x.slice(1);
        if (x.length == 6) x = x + "ff";
        if (x.length != 8) throw "e";
        var X = n(parseInt(x, 16)),
          $ = u[i].v;
        $.Rd.v = X[0] * 255;
        $.Grn.v = X[1] * 255;
        $.Bl.v = X[2] * 255;
        u.Opct.v.val = Math.round((u.Opct.v.val / 100) * X[3] * 100);
      }
    }
    return k;
  })();
  var fv = (function () {
    function j(k) {
      var T = new Uint8Array(k.length);
      M.Sc(T, 0, k);
      return T;
    }
    function q(k) {
      var T = [
          "<< /Type /Catalog  /Pages 2 0 R  >>",
          "<< /Type /Pages  /Kids [ 3 0 R ] /Count 1 >>",
          "<< /Type /Page   /Parent 2 0 R    /MediaBox [ 0 0 283 283 ] /Contents 4 0 R  /PieceInfo << /Illustrator << /Private 5 0 R>> >>   >>",
          j(""),
        ],
        b = T.length,
        a = 0;
      T.push(
        "<< /AIMetaData  " +
          (b + 2) +
          " 0 R /AIPrivateData1 " +
          (b + 3) +
          " 0 R  /AIPrivateData2 " +
          (b + 4) +
          " 0 R  /CreatorVersion 15  /ContainerVersion  9  /RoundtripVersion  15  /NumBlock 2  >>"
      );
      T.push(j(""));
      T.push(j(""));
      T.push(k);
      var c = new aj(),
        f = [];
      function U(i) {
        M.v3(c, a, i);
        a += i.length;
      }
      U("%PDF-1.5\n");
      for (var y = 0; y < T.length; y++) {
        f.push(a);
        U(y + 1 + " 0 obj\n");
        var Z = T[y];
        if (typeof Z == "string") U(T[y] + "\n");
        else {
          var h = pako.deflate(Z);
          U(
            "<< /Length " + h.length + " /Filter [ /FlateDecode ] >>\nstream\n"
          );
          c.xY(a, h.length);
          c.data.set(h, a);
          a += h.length;
          U("\nendstream\n");
        }
        U("endobj\n");
      }
      var u = a;
      U("xref\n0 " + (f.length + 1) + "\n0000000000 65535 f\r\n");
      for (var y = 0; y < f.length; y++)
        U((f[y] + "").padStart(10, "0") + " 00000 n\r\n");
      U(
        "trailer\n<< /Root 1 0 R /Size " +
          (f.length + 1) +
          " >>\nstartxref\n" +
          u +
          "\n%%EOF\n"
      );
      return c.data.slice(0, a);
    }
    function m(k, T) {
      var b = Date.now(),
        c = new Uint8Array(k),
        a,
        f = c[2] == 68;
      if (T) console.log(!f ? "EPS" : "PDF");
      if (f) {
        var U = M.Gf(c, "/AIMetaData "),
          l,
          v,
          K;
        while (c[U] != 60) U--;
        U--;
        var Z = M.Gf(c, ">>", U),
          h = M.IH(c, U + 2, Z - U - 2).split("/"),
          u = [];
        for (var y = 0; y < h.length; y++) {
          var i = h[y],
            x = i.startsWith("AIPrivateData"),
            X = i.startsWith("AIPDFPrivateData");
          if (!x && !X) continue;
          var $ = i.trim().split(/\s+/),
            H = parseInt($[1]),
            C = parseInt($[0].slice(x ? 13 : 16));
          u.push([C, H]);
        }
        if (T) console.log("--- map made", Date.now() - b);
        b = Date.now();
        while (!0) {
          var S = FromPDF.indexOfXref(c),
            o = [],
            V = FromPDF.readXrefTrail(c, S, o),
            P = { buff: c, off: 0 },
            z = !1;
          l = new Array(u.length);
          v = !1;
          K = !1;
          for (var y = 0; y < u.length; y++) {
            var C = u[y][0],
              H = u[y][1],
              Q = 0;
            if (o[H] == null) {
              z = !0;
              break;
            }
            var E = FromPDF.getIndirect(H, 0, P, o),
              A = E.buff,
              N = E["/Filter"];
            if (N != null && typeof N == "string") N = [N];
            if (A == null) {
              z = !0;
              break;
            }
            var e = M.IH(A, Q, Q + 20);
            if (e == "%AI12_CompressedData") {
              Q += 20;
              v = !0;
            } else if (e == "%AI24_ZStandard_Data") {
              Q += 20;
              K = !0;
            }
            A = new Uint8Array(A.buffer, A.byteOffset + Q, A.length - Q);
            if (N)
              for (var Y = 0; Y < N.length; Y++) {
                var d = N[Y];
                if (d == "/FlateDecode") A = pako.inflate(A);
                else if (d == "/ASCIIHexDecode")
                  A = FromPS.F.HexDecode({ buff: A, off: 0 });
                else if (d == "/ASCII85Decode")
                  A = FromPS.F.ASCII85Decode({ buff: A, off: 0 });
                else throw d;
              }
            l[C - 1] = A;
          }
          if (z) {
            console.log("extra xref after AI");
            c = c.slice(0, S);
            continue;
          }
          break;
        }
        if (T) console.log("--- arrays found", Date.now() - b);
        b = Date.now();
        var I = M.IH(l[0], 0, 13);
        if (I == "%%BoundingBox" || I == "%AI7_Thumbnai") l = l.slice(1);
        if (I == "%AI24_ZStanda") {
          l[0] = l[0].slice(20);
          K = !0;
        }
        if (M.IH(l[0], 0, 13) == "%AI12_Compres") {
          l[0] = l[0].slice(20);
          v = !0;
        }
        a = n(l);
        if (T) console.log("--- concatenated", Date.now() - b);
        b = Date.now();
        if (v) a = UZIP.inflate(a);
        if (K) a = gh.h7.md(a);
        if (T) console.log("--- inflated", Date.now() - b);
        b = Date.now();
      } else {
        var O = M.K6(c);
        if (
          O.indexOf("%AI5_BeginLayer") != -1 ||
          O.indexOf("%AI5_NumLayers") != -1
        ) {
          a = c;
        } else {
          var s = O.split(/[\n\r]+/),
            p = [],
            F = !1;
          for (var g = 0; g < s.length; g++) {
            var w = s[g].trim();
            if (w == "%AI9_PrivateDataEnd") {
              F = !1;
              break;
            } else if (w == "%AI9_DataStream" || w == "%AI24_DataStream") {
              F = !0;
            } else if (F) p.push(w.slice(1));
          }
          var r = M.Nh(p.join("")),
            eQ = FromPS.F.ASCII85Decode({ buff: r, off: 0 });
          if (eQ[0] == 120 && eQ[1] == 156) a = UZIP.inflate(eQ);
          else a = gh.h7.md(eQ);
        }
      }
      return a;
    }
    function n(k) {
      var T = 0,
        c = 0;
      for (var y = 0; y < k.length; y++) T += k[y].length;
      var b = new Uint8Array(T);
      for (var y = 0; y < k.length; y++) {
        var a = k[y];
        b.set(a, c);
        c += a.length;
      }
      return b;
    }
    function G(k) {
      var T = 0,
        b = [];
      while (T < k.length) {
        var c = k[T],
          a = c.charCodeAt(0);
        if (c == " ") T++;
        else if (c == "," || c == ";" || c == ":") {
          b.push(c);
          T++;
          var f = b[b.length - 2];
          if (f == "/ASCII85Decode") {
            var U = T + 1;
            while (k[U] != "~" || k[U + 1] != ">") U++;
            U += 2;
            var Z = k.slice(T, U),
              h = FromPS.F.ASCII85Decode({ off: 0, buff: M.Nh(Z) });
            b.push(h);
            T = U;
          }
          if (
            f == "/StrokeStyle" ||
            f == "/FillStyle" ||
            f == "/BlendStyle" ||
            f == "/SimpleStyle" ||
            f == "/SmoothShadingStyle"
          ) {
            var U = T + 1;
            while (k[U] != ";") U++;
            b.pop();
            b.pop();
            b.push(k.slice(T, U));
            b.push("/String");
            T = U + 1;
          }
        } else if (c == "(") {
          var U = T + 1;
          while (!(k[U] == ")" && (k[U - 1] != "\\" || k[U - 2] == "\\"))) U++;
          var u = k.slice(T + 1, U);
          b.push(u);
          T = U + 1;
        } else if (c == "/" || c == "-" || (48 <= a && a <= 57)) {
          var U = T;
          while (k[U] != " ") U++;
          b.push(k.slice(T, U));
          T = U;
        } else if (c == "X" && k[T + 1] == "=") {
          var U = T,
            i = 0;
          while (!0) {
            if (k[U] == "X" && k[U + 1] == "=") {
              i++;
            }
            if (k[U] == "X" && k[U + 1] == "+" && k[U + 2] == " ") {
              i--;
              if (i == 0) break;
            }
            U++;
          }
          b.push(k.slice(T + 3, U));
          b.push("/String");
          T = U + 2;
        } else {
          console.log(b);
          console.log(k.slice(T - 600, T + 10));
          throw c;
        }
      }
      return b;
    }
    function W(k) {
      var T = {
          "/Filter": 3,
          "/Visible": 1,
          "/FillOrStroke": 1,
          "/PluginFileName": 1,
          "/Title": 1,
        },
        b = {},
        c = G(k.join(" ")),
        a = [],
        f = parseFloat;
      while (c.length != 0) {
        var U = c.shift();
        if (U == "/Recorded" || U == "/NotRecorded") {
          continue;
        } else if (U == "/Dict") {
          a.pop();
          var Z = a.pop();
          a[a.length - 1][U] = Z;
        } else if (U == "/Execution") {
          a.pop();
          var Z = a.pop();
          a[a.length - 1][U] = Z;
        } else if (U == "/Part") {
          a.pop();
          var Z = a.pop(),
            h = a[a.length - 1];
          if (h[U] == null) h[U] = [];
          h[U].push(Z);
          c.shift();
        } else if (U == "/Def") {
          a.pop();
          var u = a.pop(),
            i = a[0];
          if (b[i] == null) b[i] = [];
          if (i == "/KnownStyle") {
            u = { val: u };
            u[a.pop()] = a.pop();
          }
          a.pop();
          b[i].push(u);
          c.shift();
        } else if (U == ":") {
          var i = a.pop();
          if (
            i == "/Dictionary" ||
            i == "/ArtDictionary" ||
            i == "/XMLNode" ||
            i == "/Mask" ||
            i == "/ActiveStyle"
          )
            a.push({});
          else if (i == "/CompoundFilter" || i == "/BasicFilter") {
            a.push({ typ: "Filter" });
          } else if (i == "/SVGFilter" || i == "/KnownStyle") {
            a.push(i);
          } else if (i == "/Array" || i == "/Document") a.push([]);
          else if (i == "/Binary") {
            var x = c.shift();
            if (x != "/ASCII85Decode") throw "e";
            c.shift();
            a.push(c.shift());
          } else if (i == "/XMLUID" || i == "/XMLUIDREF") {
            c[1] = i;
          } else if (i == "/GObjRef") {
            a.push(c.shift());
            a.push("/String");
            c.shift();
            c.shift();
          } else {
            console.log(a);
            console.log(c);
            throw i;
          }
          if (c[0] == "/NotRecorded") {
            c.shift();
            c.shift();
          }
        } else if (U == ",") {
          var X = a.pop(),
            i,
            $;
          if (
            (X[0] == "/" && X[1] == X[1].toUpperCase() && X[1] != "\\") ||
            X == ";"
          ) {
            i = X;
            X = null;
          } else i = a.pop();
          if (i == "/Name") {
            a.push(i);
            continue;
          }
          if (T[i]) {
            $ = a.slice(a.length - T[i]);
            for (var y = 0; y < T[i]; y++) a.pop();
            var H = a.pop();
            H[i] = $;
            a.push(H);
            continue;
          }
          if (i == "/RealPoint" || i == "/RealPointRelToROrigin") {
            var C = a.pop();
            $ = [f(a.pop()), f(C)];
          } else if (i == "/RealMatrix") {
            $ = [];
            for (var y = 0; y < 6; y++) $.push(f(a.pop()));
            $.reverse();
          } else if (i == "/String" && typeof a[a.length - 1] != "string")
            $ = "";
          else {
            var top = a.pop();
            if (i == ";") $ = top;
            else if (
              i == "/String" ||
              i == "/UnicodeString" ||
              i == "/XMLUID" ||
              i == "/XMLUIDREF"
            ) {
              $ = top;
              while (typeof a[a.length - 1] == "string") $ = a.pop() + $;
            } else if (i == "/Int" || i == "/Real") $ = f(top);
            else if (i == "/Bool") $ = top == "1";
            else throw JSON.stringify(i);
          }
          if (a.length == 0) throw "e";
          var H = a.pop();
          if (X == null && !(H instanceof Array)) {
            alert("key is null in a Dict");
            continue;
          }
          if (X) H[X] = $;
          else H.push($);
          a.push(H);
        } else a.push(U);
      }
      return a.length == 0 ? b : a[0];
    }
    return { ae8: m, aap: q, acf: W };
  })();
  function gg() {}
  gg.VB = (function () {
    function j(V, P, z) {
      var E = !1,
        A = Date.now(),
        N = fv.ae8(V, E);
      if (N == null) return;
      if (E) console.log("part found", Date.now() - A);
      A = Date.now();
      var Q = K(N);
      if (Q.Layer == null) Q.Layer = [{ _begin: Q.Setup._end, _end: N.length }];
      var e = Q.Layer,
        Y = Q.Header;
      if (E) console.log(Q);
      var d = Q.Setup.TextDocument,
        I = e[0];
      I = Q.Layer[0];
      if (E) console.log("document parsed", Date.now() - A);
      A = Date.now();
      Q.Setup.Gradient = v(Q.Setup.Gradient, N);
      if (E) console.log("grads loaded", Date.now() - A);
      A = Date.now();
      Q.Setup.Pattern = C(Q.Setup.Pattern, N);
      if (E) console.log("patts loaded", Date.now() - A);
      A = Date.now();
      Q.Setup.Palette = l(Q.Setup.Palette, N);
      if (E) console.log("palet loaded", Date.now() - A);
      A = Date.now();
      Q.Setup.DocumentData = H(Q.Setup.DocumentData, N);
      if (E) console.log("docdata loaded", Date.now() - A);
      A = Date.now();
      Q.Setup.SVGFilter = H(Q.Setup.SVGFilter, N);
      if (E) console.log("svgfilter loaded", Date.now() - A);
      A = Date.now();
      var O = Q.Setup.ArtStyles;
      if (O) {
        Q.Setup.ArtStyles = H(O, N);
      }
      var s = Q.Setup.Palette;
      for (var y = 0; y < s.length; y++) {
        var p = s[y],
          F = p[0],
          g = p[1][0];
        if (F == null) F = p[1][1];
        var w = Q.Setup.Gradient[F];
        if (g == 0) P.JR.push([F, p[1][1]]);
        if (g == 1) P.JR.push([F, [w.Sg, w.aDf, 0, 0]]);
        if (g == 2) P.JR.push([F, [F, 0]]);
      }
      var r = Y.Cropmarks,
        eQ = Y.BoundingBox.split(" ").map(parseFloat),
        t = Y.ArtSize
          ? Y.ArtSize.split(" ").map(parseFloat)
          : [eQ[2] - eQ[0], eQ[3] - eQ[1]];
      P.r = Math.round(Math.abs(t[0]));
      P.$ = Math.round(Math.abs(t[1]));
      var dq = [
        1,
        0,
        0,
        1,
        -eQ[0] + (P.r - (eQ[2] - eQ[0])) / 2,
        -eQ[1] + (P.$ - (eQ[3] - eQ[1])) / 2,
      ];
      dq[3] = -1;
      dq[5] = P.$ - dq[5];
      if (r) {
        r = r.split(" ").map(parseFloat);
        P.r = Math.round(r[2] - r[0]);
        P.$ = Math.round(r[3] - r[1]);
        dq = [1, 0, 0, -1, -r[0], P.$ + r[1]];
      }
      console.log(Q);
      var D = Q.Setup.DocumentData,
        ha = [],
        am = [];
      if (D && D[0] && D[0].ArtboardArray) {
        var ha = D[0].ArtboardArray;
        if (ha.length != 1) console.log(ha.length, "artboards");
        var k4 = new hk();
        for (var y = 0; y < ha.length; y++) {
          var aA = ha[y],
            ex = aA.PositionPoint1,
            ac = aA.PositionPoint2,
            eJ = ex[0],
            h$ = Math.min(ex[1], ac[1]),
            da = ac[0],
            bb = Math.max(ex[1], ac[1]),
            gb = new hk(eJ, h$, da - eJ, bb - h$);
          am.push(gb);
          k4 = k4.vd(gb);
        }
        P.r = Math.round(k4.r);
        P.$ = Math.round(k4.$);
        dq[4] = -k4.x;
        dq[5] = k4.y + P.$;
      }
      if (D && D[0] && D[0]["#document"]) {
        var fM = D[0]["#document"],
          kS = fM["xmlnode-children"][0];
        if (kS && kS["xmlnode-children"]) kS = kS["xmlnode-children"][0];
        if (kS && kS["xmlnode-nodename"] == "variableSets") {
          var cY = kS["xmlnode-children"][0]["xmlnode-children"],
            cS = cY[0],
            k3 = cY[1],
            di = o(cS);
          P.Mr = hx.abI(
            "<variableSets><variableSet>" + di + "</variableSet></variableSets>"
          );
          if (k3) {
            var a7 = o(k3),
              b0 = (P.$n = hx.a6B(a7));
            for (var y = 0; y < b0.length; y++)
              for (var e1 = 0; e1 < b0[y].length; e1++)
                b0[y][e1] = b0[y][e1].trim();
          }
        }
      }
      var l2 = 1 / jU.ud(new hk(0, 0, P.r, P.$), 8192 * 8192);
      if (Math.max(P.r * l2, P.$ * l2) < 800) l2 *= 2;
      while (z && Math.max(P.r * l2, P.$ * l2) < Math.max(z[0], z[1])) l2++;
      if (ei == 1) l2 = 1;
      P.r = Math.round(P.r * l2);
      P.$ = Math.round(P.$ * l2);
      P.zv = Math.round(72 * l2);
      for (var y = 0; y < 6; y++) dq[y] *= l2;
      var kL = [];
      if (ha.length != [1, 0][ei]) {
        var es = ei == 0 ? P.U : [];
        es.push(P.to());
        for (var y = 0; y < am.length; y++) {
          var aA = ha[y],
            gb = am[y],
            kR = P.dj();
          kR.tV(aA.Name);
          es.push(kR);
          kR.add.SoCo = JSON.parse(eu.oy[eu.order.indexOf("SoFi")]);
          var eH = kR.add.SoCo.Clr.v;
          f(eH, [1, 1, 1]);
          var eJ = gb.x,
            h$ = gb.y,
            da = eJ + gb.r,
            bb = h$ + gb.$,
            cZ = [eJ, h$, da, h$, da, bb, eJ, bb];
          B.b.u(cZ, Z(dq), cZ);
          i(kR, { cmds: ["M", "L", "L", "L", "Z"], crds: cZ }, P, 0);
          kR.add.vstk = eu.rS.i4(!0);
          var ga = B.b.RD(cZ);
          kL.push({
            eA: aA.Name,
            gX: [ga.x, ga.y, ga.x + ga.r, ga.y + ga.$],
            J: aA.IsArtboardSelected,
          });
        }
        var kR = P.dj();
        kR.tV("_Artboards_");
        kR.add.lsct = hQ.z$;
        kR.hz = "pass";
        kR.uZ = 24;
        es.push(kR);
      } else kL = [{ eA: "Artboard", gX: [0, 0, P.r, P.$], J: !0 }];
      if (ei == 1) P.add.arts = kL;
      m = [0, 0, 0];
      n = [0, 0, 0];
      G = "SoCo";
      W = "SoCo";
      for (var fi = 0; fi < e.length; fi++) {
        var go = e[fi];
        go.Raster = q(go, "Raster");
        go.Place = q(go, "Place");
        var iz = X(N, go);
        k(P, iz, dq, Q, go, N);
      }
      if (ei == 0)
        for (var y = 0; y < P.U.length; y++) {
          var kR = P.U[y];
          if (kR.wp) {
            P.U.splice(y, 1);
            var i5,
              aI = 0;
            for (var e1 = y; e1 < P.U.length; e1++) {
              i5 = P.U[e1];
              if (i5.add.lsct == hQ.$a) aI++;
              else if (i5.D1()) aI--;
              if (aI == -1) break;
            }
            i5.add.vmsk = kR.add.vmsk;
            i5.add.vogk = kR.add.vogk;
            kR.add.vmsk.xo = !0;
            i5.D5(P);
          }
        }
      else {
      }
      if (z) {
        P.DB();
        var bs = P.root.Fj();
        L.xC.J0(P, bs);
      }
      if (E) console.log("layers created", Date.now() - A);
      A = Date.now();
    }
    function q(V, P) {
      var z = V.Layer,
        E = V[P];
      if (E == null) E = [];
      if (z) {
        for (var y = 0; y < z.length; y++) {
          var A = z[y],
            N = (A[P] = q(A, P));
          E = E.concat(N);
        }
        E.sort(function (Q, e) {
          return Q._begin - e._begin;
        });
      }
      return E;
    }
    var m, n, G, W;
    function k(V, P, z, E, A, N) {
      var Q = [],
        e = 0,
        Y = "",
        d = !1,
        I = {},
        O = UDOC.G,
        s = UDOC.getState(),
        F = "norm",
        g = 1,
        w = 0,
        r = !1,
        eQ = 0,
        t = !1,
        dq = !0,
        D = null,
        ha = null,
        am = !1,
        k4 = !1,
        aA = 0,
        ex = null,
        ac,
        eJ,
        h$ = 0,
        da = 0,
        bb = 0,
        cY = 0,
        cS = !1;
      s.ctm = z;
      var p = eu.TB.i4(),
        gb = [0, 0],
        fM = [],
        kS = [];
      for (var k3 = 0; k3 < P.length; k3++) {
        var di = P[k3],
          es = 1e9;
        if (di[0] == "%") {
          if (di == "%_/ArtDictionary :" && aA == 0) {
            D = [di.slice(2)];
          } else if (D != null) {
            if (di == "%_" && aA == 0) {
              var a7 = fv.acf(D),
                b0 = V.U[V.U.length - 1],
                e1 = a7.AI10_ArtUID,
                l2 = a7.BBAccumRotation;
              if (e1 && !e1.startsWith("XMLID")) b0.tV(S(e1));
              if (l2 && b0.add.vmsk == null && V.U[V.U.length - 2])
                b0 = V.U[V.U.length - 2];
              if (l2 && b0.add.vmsk) b0.add.vmsk.kx = parseFloat(l2);
              D = null;
            } else {
              D.push(di.slice(am ? 1 : 2));
              if (di == "%_X=") aA++;
              if (di == "%_X+") aA--;
              if (di == "%_/Binary : /ASCII85Decode ,") am = !0;
              if (am && di.endsWith("~>")) am = !1;
            }
          } else if (ex) {
            ac += (ac == "" ? "" : " ") + di.slice(2);
            if (ac.endsWith("X#")) {
              ex.push(ac.slice(0, ac.length - 3));
              ac = "";
            }
          } else if (di.startsWith("%BeginData:")) k4 = !0;
          else if (di.endsWith("%EndData")) k4 = !1;
          continue;
        } else if (di.endsWith("%EndData")) k4 = !1;
        else if (di == "/Mesh X!") {
          ex = [];
          ac = "";
          continue;
        } else if (di == "/End X!") {
          c(ex, s, V);
          ex = null;
          continue;
        }
        if (di != "XI" && k4) continue;
        var kL = "Xa XR m l c f Q q U u *U w W h n J j M d".split(" "),
          kR = -1,
          eH = di.indexOf("(") != -1;
        for (var y = 0; y < kL.length; y++) {
          var cZ = di.indexOf(" " + kL[y] + " ");
          if (cZ != -1 && cZ < es && !eH) {
            es = cZ;
            kR = y;
          }
        }
        if (kR != -1) {
          d = !0;
          var ga = es + 1 + kL[kR].length;
          P[k3] = di.slice(0, ga);
          var fi = P[k3 + 1];
          if (fi == null || fi[0] == "%" || kR > 9)
            P.splice(k3 + 1, 0, di.slice(ga));
          else P[k3 + 1] = (di.slice(ga) + " " + fi).replace(/\s\s+/g, " ");
          k3--;
          continue;
        }
        di = di.trim();
        var go = di.split(" "),
          iz = go[go.length - 1],
          i5 = iz.toLowerCase(),
          aI = go.map(parseFloat);
        if (iz == "m") O.moveTo(s, aI[0], aI[1]);
        else if (iz == "L" || iz == "l") O.lineTo(s, aI[0], aI[1]);
        else if (iz == "V" || iz == "v") {
          var bs = s.pth.crds,
            k2 = s.cpos[0],
            jG = s.cpos[1];
          O.curveTo(s, k2, jG, aI[0], aI[1], aI[2], aI[3]);
          var eW = bs.length;
          bs[eW - 6] = k2;
          bs[eW - 5] = jG;
        } else if (iz == "Y" || iz == "y")
          O.curveTo(s, aI[0], aI[1], aI[2], aI[3], aI[2], aI[3]);
        else if (iz == "C" || iz == "c")
          O.curveTo(s, aI[0], aI[1], aI[2], aI[3], aI[4], aI[5]);
        else if (iz == "H" || iz == "h") {
          if (iz == i5) O.closePath(s);
          if (!r) {
            var gc = V.dj();
            V.U.push(gc);
            gc.tV("<Clipping Path>");
            gc.wp = !0;
            gc.add.vstk = eu.rS.i4();
            gc.add.SoCo = JSON.parse(eu.oy[eu.order.indexOf("SoFi")]);
            i(gc, s.pth, V, w);
          } else t = !0;
        } else if (iz == "XR") {
          w = aI[0];
        } else if (iz == "Xy") {
          F = gg.aAG[aI[0]];
          g = aI[1];
          if (F == null) {
            F = "norm";
            console.log("unknown blend mode", aI[0]);
          }
        } else if (iz == "Xd") {
          var b0 = V.U[V.U.length - 1];
          b0.yA = Math.round(255 * g);
          b0.hz = b0.D1() && F == "norm" ? "pass" : F;
        } else if (iz == "AE") h$ = aI[0];
        else if (iz == "Ae") da = aI[0];
        else if (iz == "Xw") bb = aI[0];
        else if (iz == "*") {
          var k1 = s.pth.crds,
            ke = s.ctm,
            cZ = k1[0] == k1[2] ? 0 : 1;
          V.M3.push([cZ, k1[cZ]]);
          O.newPath(s);
        } else if (iz == "XN") eJ = di.split(" ")[0];
        else if (iz == "XI") {
          var jh = A.Raster,
            cE,
            cy,
            ew;
          if (jh == null || jh.length == 0) {
            console.log("no Raster");
            continue;
          }
          if (di != "XI") {
            continue;
          } else {
            var hl = jh[e++];
            if (hl.Data) hl = hl.Data;
            var c2 = hl._begin,
              f9 = hl._end;
            while (N[c2] != 88) c2++;
            c2 += 3;
            cE = N.slice(c2, f9);
            cy = P[k3 - 2].split(" ").map(parseFloat);
          }
          var hu = cy.slice(8),
            le = hu[2],
            iJ = hu[3],
            dZ = le * iJ,
            kd = B.j(dZ * 4);
          kd.fill(255);
          var bC = hu[7],
            ev = hu[8],
            ak = hu[6],
            gD = Math.ceil((le * bC * ak) / 8);
          if (bC == 1) {
            if (ak == 8)
              for (var y = 0; y < dZ; y++)
                for (var a9 = 0; a9 < 3; a9++) kd[4 * y + a9] = cE[y];
            else if (ak == 1)
              for (var kk = 0; kk < iJ; kk++)
                for (var kX = 0; kX < le; kX++)
                  for (var a9 = 0; a9 < 3; a9++)
                    kd[4 * (kk * le + kX) + a9] =
                      255 * ((cE[kk * gD + (kX >>> 3)] >>> (7 - (kX & 7))) & 1);
            else throw ak;
          } else if (bC == 3)
            for (var y = 0; y < dZ; y++)
              for (var a9 = 0; a9 < 3; a9++) kd[4 * y + a9] = cE[3 * y + a9];
          else if (bC == 4 || bC == 5) {
            for (var y = 0; y < dZ; y++) {
              kd[4 * y + 0] = cE[bC * y + 0];
              kd[4 * y + 1] = cE[bC * y + 1];
              kd[4 * y + 2] = cE[bC * y + 2];
              kd[4 * y + 3] = cE[bC * y + 3];
            }
            B.auf(kd);
            for (var y = 0; y < dZ; y++) kd[y * 4 + 3] = 255;
          } else if (bC == 7)
            for (var y = 0; y < dZ; y++) {
              kd[4 * y + 0] = cE[bC * y + 0];
              kd[4 * y + 1] = cE[bC * y + 1];
              kd[4 * y + 2] = cE[bC * y + 2];
            }
          else console.log("unknown number of channels", bC);
          if (ev == 1) {
            var kc = iJ * gD;
            for (var y = 0; y < dZ; y++) kd[4 * y + 3] = cE[kc + y];
          }
          if (le * iJ < 700 * 700) ew = "PNG";
          else if (Math.max(le, iJ) > 32768) ew = "PNG";
          else ew = B.QM(kd, le, iJ) ? "JPG" : "PNG";
          var gS = gh.lj(ew).Ev([[kd.buffer]], le, iJ),
            hp = V.Pi(new Uint8Array(gS), "<Image>", 0, 0);
          V.U.push(hp);
          hp.hz = F;
          hp.yA = Math.round(255 * g);
          hp.xg(bb == 0);
          var g2 = new k$();
          g2.scale(1, -1);
          g2.concat(Z(cy.slice(1)));
          g2.concat(Z(s.ctm));
          var jY = hp.add.SoLd,
            he = jY.Sz.v,
            a5 = new hk(0, 0, he.Wdth.v, he.Hght.v),
            go = B.b._c(a5).L;
          B.b.u(go, g2, go);
          hp.add.SoLd.Trnf = L.Dq.be(go);
          hp.add.SoLd.nonAffineTransform = L.Dq.be(go);
          hp.yZ(V, !1);
        } else if (iz == "Ln") {
          Q.push(a(di));
        } else if (iz == "u" || iz == "q" || iz == "Lb") {
          if (iz == "Lb") V.add.prvw = aI[1];
          fM.push(da == 1);
          kS.push((iz == "Lb" ? 1 - aI[0] : bb) == 0);
          if (r) continue;
          V.U.push(V.to());
        } else if (iz == "U" || iz == "Q" || iz == "LB") {
          if (fM.length == 0 || kS.length == 0) throw k3;
          var gq = fM.pop(),
            fA = kS.pop();
          if (iz == "LB") gq = h$ == 1;
          if (r) continue;
          var hp = V.dj();
          hp.tV((iz == "U" ? "<Group>" : "<Clip Group>") + Y);
          if (iz == "LB") hp.tV(Q.pop());
          hp.add.lsct = gq ? hQ.WR : hQ.z$;
          hp.hz = "pass";
          hp.uZ = 24;
          hp.xg(fA);
          V.U.push(hp);
          if (cS) {
            if (V.U[V.U.length - 3].getName() == "</Layer group>") {
              V.U.pop();
              V.U.splice(V.U.length - 2, 1);
            }
            cS = !1;
          }
        } else if (iz == "Bb") dq = aI[0] != 1;
        else if (iz == "BB") {
        } else if (iz == "Bm" || iz == "Bc" || iz == "Xm") {
        } else if (iz == "Bh") gb = aI.slice(2, 4);
        else if (iz == "Bg") {
          var c3 = E.Setup.Gradient,
            fa = c3[a(di)],
            go = di
              .slice(di.indexOf(")") + 2)
              .split(" ")
              .map(parseFloat);
          if (fa == null) {
            console.log("gradient not found");
            for (var jA in c3) {
              fa = c3[jA];
              break;
            }
          }
          var kF = go[10];
          if (isNaN(kF)) kF = 1;
          var dn = go.slice(0, 4);
          dn.push(kF, gb[0], gb[1]);
          if (Math.max(Math.abs(dn[0]), Math.abs(dn[1])) > 20) {
            dn[0] = 0;
            dn[1] = 0;
            dn[3] = 1;
            console.log("strange gradient");
          }
          var de = [fa.Sg, fa.aDf, dn, go.slice(4, 10)];
          b(de, "GdFl", dq);
        } else if (i5 == "p" && 1 < di.length && di.length < 100) {
          var ks = a(di),
            fx = E.Setup.Pattern[ks],
            hT = fx.gX,
            le = Math.round(hT[2] - hT[0]),
            iJ = Math.round(hT[3] - hT[1]);
          if (V.iE[ks] == null) {
            var a7 = new fb(),
              i7 = Math.sqrt(Math.abs(z[0] * z[3] - z[1] * z[2])),
              g2 = new k$(1, 0, 0, -1, -fx.gX[0], iJ + fx.gX[1]);
            g2.concat(new k$(i7, 0, 0, i7, 0, 0));
            var gT = [m, n, G, W];
            m = [0, 0, 0];
            n = [0, 0, 0];
            G = "SoCo";
            W = "SoCo";
            k(a7, fx.Wi, k$.Bf(g2), E, A, N);
            a7.r = Math.round(le * i7);
            a7.$ = Math.round(iJ * i7);
            a7.DB();
            a7.gF();
            if (ei == 0) {
              a7.buffer = B.j(a7.r * a7.$ * 4);
              a7.iY();
            }
            m = gT[0];
            n = gT[1];
            G = gT[2];
            W = gT[3];
            V.iE[ks] = a7;
          }
          var iC = di.slice(di.indexOf(")") + 2),
            br = iC
              .slice(0, iC.indexOf("[") - 1)
              .split(" ")
              .map(parseFloat),
            eb = iC
              .slice(iC.indexOf("[") + 1, iC.indexOf("]"))
              .split(" ")
              .map(parseFloat),
            g2 = new k$(1, 0, 0, -1, 0, iJ);
          g2.concat(k$.aGN(eb));
          b([ks, [br, k$.Bf(g2)]], "patt", iz == "p");
        } else if (
          iz == "J" ||
          iz == "j" ||
          iz == "w" ||
          iz == "M" ||
          iz == "d"
        ) {
          var g2 = s.ctm,
            i7 = Math.sqrt(Math.abs(g2[0] * g2[3] - g2[1] * g2[2]));
          for (var y = 1; y < go.length; y++) {
            var kp = go[y],
              bd = aI[y - 1];
            if (kp == "w") p.mm = bd * i7;
            if (kp == "j") p.h0 = bd;
            if (kp == "J") p.kv = bd;
            if (kp == "M") p.NV = bd;
            if (kp == "d") {
              var js = di.slice(di.indexOf("[") + 1, di.indexOf("]")).trim();
              if (js.length != 0) {
                var dL = js.split(" ").map(parseFloat);
                p.QJ = dL;
                for (var a9 = 0; a9 < dL.length; a9++) dL[a9] *= i7;
              } else if (js == "") p.QJ = [];
            }
          }
        } else if (i5 == "xa" || i5 == "xx") {
          var hZ = u(di);
          b(hZ, "SoCo", iz == "Xa" || iz == "Xx");
        } else if (i5 == "xk") {
          hZ = u(di);
          b(hZ, "SoCo", iz == "Xk");
        } else if (i5 == "k" || i5 == "x") {
          hZ = u(di);
          b(hZ, "SoCo", iz == i5);
        } else if (i5 == "g") {
          var hZ = [aI[0], aI[0], aI[0]];
          b(hZ, "SoCo", iz == i5);
        } else if (i5 == "n") {
          if (!r) O.newPath(s);
        } else if (iz == "*u") {
          r = !0;
          eQ = 0;
          kS.push(bb == 0);
        } else if (iz == "*U" || i5 == "s" || i5 == "f" || i5 == "b") {
          if (iz != "*U" && r) {
            if (i5 == "f" || i5 == "b") eQ |= 1;
            if (i5 == "s" || i5 == "b") eQ |= 2;
            continue;
          }
          if (iz == i5) O.closePath(s);
          if (iz == "*U") {
            r = !1;
          }
          var hp;
          {
            hp = V.dj();
            hp.uZ |= 16;
            i(hp, s.pth, V, w);
            var fz = i5 == "f" || i5 == "b" || (iz == "*U" && eQ & 1),
              c0 = i5 == "s" || i5 == "b" || (iz == "*U" && eQ & 2),
              jl = (hp.add.vstk = eu.rS.i4(fz, c0)),
              h4 = B.S(p);
            h4.dZ = [];
            h4.Nu = [];
            if (fz) h4.dZ = m;
            if (c0) h4.Nu = n;
            if (ei == 0) {
              eu.rS.write(jl, h4);
              if (G == "SoCo") {
                hp.add.SoCo = JSON.parse(eu.oy[eu.order.indexOf("SoFi")]);
                var kP = hp.add.SoCo.Clr.v;
                f(kP, m);
              }
              if (G == "GdFl") {
                hp.add.GdFl = gg.qm(m, hp.add.vmsk.D);
              }
              if (G == "patt") {
                hp.add.PtFl = T(m, V);
              }
              if (c0) {
                var gx = ["SoCo", "GdFl", "patt"].indexOf(W),
                  gK =
                    gx == 0
                      ? { Clr: { t: "Objc", v: cT.C_(n) } }
                      : gx == 1
                      ? gg.qm(n, hp.add.vmsk.D)
                      : T(n, V),
                  bL = [eu.dS, eu.GB, eu.Pa][gx],
                  cA = (jl.strokeStyleContent.v = { classID: eu.rS.HF[gx] });
                for (var y = 0; y < bL.length; y++) cA[bL[y]] = gK[bL[y]];
              }
            } else hp.add.vstl = h4;
          }
          if (iz == "*U" && t) {
            hp.wp = !0;
            t = !1;
          }
          hp.tV("<" + (iz == "*U" ? "Compound " : "") + "Path>" + Y);
          hp.hz = F;
          hp.yA = Math.round(255 * g);
          hp.xg(iz == "*U" ? kS.pop() : bb == 0);
          hp.D5(V);
          V.U.push(hp);
          O.newPath(s);
        } else if (iz == "," && go[0] == "/XMLUID") {
          var b0 = V.U[V.U.length - 1];
          for (var y = 0; y < V.Mr.length; y++)
            if ("(" + V.Mr[y].docRef + ")" == go[2])
              V.Mr[y].docRef = "id('" + b0.add.lyid + "')";
        } else if (iz == "," && go[1] == "/FreeUndo") {
          cY = aI[0];
        } else if (iz == "," && go[1] == "/StoryIndex") {
          var kK = E.Setup.TextDocument,
            eK = null;
          if (!(kK instanceof Array))
            window.ahx = kK = E.Setup.TextDocument = $(kK, N);
          var ce = kK[0],
            iQ = kK[2];
          if (ce._DocumentResources) ce = kK[0] = eY.aix(ce);
          else eY.avH(ce);
          var hp = V.dj();
          hp.add.lnsr = "rend";
          hp.add.TySh = al.wD(0, 0);
          var j0 = aI[0];
          if (cY == 1) {
            for (var y = 1; y < 60; y++) {
              var fi = P[k3 + y];
              if (fi && fi.endsWith("/StoryIndex ,")) {
                j0 = parseFloat(fi.slice(2, fi.indexOf(" ")));
                cS = !0;
                break;
              }
            }
            cY = 0;
          }
          var dP = h6.a2O(ce),
            jX = (hp.add.TySh.s3 = dP[j0]);
          if (jX == null) {
            console.log("text not found");
            cS = !1;
            continue;
          }
          hp.tV(al.WT(jX).slice(0, 50));
          hp.hz = F;
          hp.yA = Math.round(255 * g);
          hp.xg(bb == 0);
          var lc = ce._1._1[j0]._1._0[0]._0;
          lc = parseInt(lc.slice(1));
          var cC = ce._0._8._0,
            j8 = cC[lc]._0;
          if (j8._0) eK = U(j8._0);
          else if (j8._1) eK = U(j8._1._0);
          else eK = U(j8._2._2).slice(3);
          if (eK.length != 2) {
            var hT = B.b.RD(eK);
            eK = [hT.x, hT.y];
            if (hT.C() != 0) {
              al.cj(jX, 1);
              al.ms(jX, [0, 0, Math.round(hT.r), Math.round(hT.$)]);
            }
          }
          var kh = new k$(),
            gI = new k$(1, 0, 0, 1, eK[0], eK[1]),
            h7 = new k$(1, 0, 0, 1, -iQ[0], -iQ[1]),
            kr = Z(s.ctm),
            cJ = new k$();
          if (j8._2 && j8._2._2) {
            var z = U(j8._2._2);
            cJ = Z(z);
          }
          kh.concat(gI);
          kh.concat(cJ);
          kh.concat(h7);
          kh.scale(1, -1);
          kh.concat(kr);
          hp.add.TySh.u = kh;
          V.U.push(hp);
          V.c4 = !0;
        } else if (iz == "Tp") {
          I.OC = Z(aI);
        } else if (iz == "Tf") {
          I.font = go[0].slice(2);
        } else if (iz == "Tk") {
          var hp = V.dj();
          hp.add.lnsr = "rend";
          var dF = (hp.add.TySh = al.wD(0, 0)),
            jX = dF.s3,
            g2 = I.OC.P(),
            he = g2.Dc();
          g2.concat(Z(s.ctm));
          var iY = new k$(1 / he, 0, 0, -1 / he, 0, 0);
          iY.concat(g2);
          dF.u = iY;
          var f7 = a(di);
          hp.tV(f7);
          al.Fk(jX, 0, f7);
          var j$ = al.vJ(jX, 0, f7.length);
          j$.K2.FontSize = he;
          j$.K2.FillColor = { Type: 1, Values: [1, m[0], m[1], m[2]] };
          al.gk(j$, I.font);
          al.jD(jX, 0, f7.length, j$);
          V.U.push(hp);
          V.c4 = !0;
        } else if (d && aI.length > 3) {
          var dt = !1;
          for (var y = 0; y < aI.length; y++) if (isNaN(aI[y])) dt = !0;
          if (!dt) P[k3 + 1] = (di + " " + P[k3 + 1]).replace(/\s\s+/g, " ");
        }
      }
    }
    function T(m, V) {
      if (V.Fu == null) V.Fu = {};
      var P = V.Fu[m[0]];
      if (P == null) {
        var z = V.iE[m[0]],
          P = (V.Fu[m[0]] = {});
        P.id = fb.Rh() + "-d71c-11e5-b1ae-a548a96e5f9f";
        P.name = "someImage";
        P.Og = [z.ht(), new hk(0, 0, z.r, z.$)];
        V.Vq(P);
      }
      var E = JSON.parse(eu.oy[eu.order.indexOf("patternFill")]);
      E.Ptrn.v.Idnt.v = P.id;
      var A = Z(m[1][1]),
        N = -Math.atan2(-A.X, A.Sd);
      E.Angl.v.val = Math.round((N * 180) / Math.PI);
      E.Scl.v.val = Math.round(100 * A.Dc());
      return E;
    }
    gg.qm = function (V, P) {
      var z = gg.FC(V, P),
        E = [0, 0, 1, 0];
      if (V[0] == 0) E[0] = 0.5;
      B.b.u(E, z, E);
      var A = JSON.parse(eu.oy[eu.order.indexOf("GrFl")]),
        N = A.Grad.v;
      N.Intr.v = 0;
      A.Type.v.GrdT = ["Lnr", "Rdl"][V[0]];
      B.MV.gB(V[1], N);
      B.MV.UO(new ea(E[0], E[1]), new ea(E[2], E[3]), B.z.zZ(P), A);
      return A;
    };
    gg.BZ = function (V, P, z) {
      var E = { Lnr: 0, Rflc: 0, Rdl: 1, Angl: 1, Dmnd: 1 }[V.Type.v.GrdT],
        A = B.z.zZ(P);
      if (z && V.Algn && !V.Algn.v) A = new hk(0, 0, z.r, z.$);
      var N = B.MV.aLx(V, A),
        Q = N[0],
        e = N[1];
      if (E == 0) {
        Q.x -= e.x - Q.x;
        Q.y -= e.y - Q.y;
      }
      var Y = e.x - Q.x,
        d = e.y - Q.y,
        I = Math.sqrt(Y * Y + d * d),
        O = new k$();
      O.rotate(Math.atan2(-d, Y));
      O.scale(I, I);
      O.translate(Q.x, Q.y);
      var s = gg.gW(E, O, P),
        p = V.Grad.v;
      s[1] = B.MV.a4C(p, null, null);
      return s;
    };
    gg.T$ = function (V, P, z) {
      var E = ea.gw(V, P),
        A = new k$();
      A.scale(E, E);
      A.rotate(-Math.atan2(P.y - V.y, P.x - V.x));
      A.translate(V.x, V.y);
      if (z) A.concat(z);
      return A;
    };
    gg.AX = function (V, P, z, E, A) {
      if (P && !E.Lg(P)) {
        var N = Math.atan2(-(z.y - P.y), z.x - P.x);
        if (A != null || N != 0) {
          var Q = new k$();
          Q.translate(-P.x, -P.y);
          Q.scale(1, A);
          Q.rotate(N);
          Q.translate(P.x, P.y);
          Q.BR();
          E = Q.uL(E);
        }
        var e = Math.atan2(-(E.y - P.y), E.x - P.x);
        V[2][5] = (e * 180) / Math.PI;
        V[2][6] = ea.gw(E, P) / ea.gw(z, P);
      }
    };
    gg.gW = function (V, P, z) {
      var E = P.P(),
        Y,
        d,
        I = 1;
      E.BR();
      var A = R.tm.Fo(z);
      B.z.La(A, E);
      var N = B.z.zZ(A),
        Q = N.r,
        e = N.$;
      if (V == 0) {
        var O = new k$();
        O.translate(-N.x, -N.y);
        O.translate(-Q / 2, -e / 2);
        var s = gg.a15(Q, e, 0);
        O.scale(1 / s, 1 / s);
        O.scale(1 / Q, 1 / e);
        Y = O.Tt + 0.5;
        d = O.BL + 0.5;
        I = O.Sd;
      } else {
        Y = -N.x / Q - 0.5;
        d = -N.y / e - 0.5;
        var p = ((Y - 0.5) * Q) / 2,
          F = ((d - 0.5) * e) / 2;
        I = 1 / Math.sqrt(2 * (p * p + F * F));
      }
      var g = [
        V,
        null,
        [Y, d, 0, I, 1, 0, 0],
        [P.Sd, P.X, P.ra, P.Jy, P.Tt, P.BL],
      ];
      return g;
    };
    gg.FC = function (V, P) {
      var z = V[0],
        E = V[2],
        A = V[3],
        N = Z(A);
      N.BR();
      var Q = R.tm.Fo(P);
      B.z.La(Q, N);
      var e = B.z.zZ(Q),
        Y = e.r,
        d = e.$,
        I = E[0],
        O = E[1],
        s = (E[2] * Math.PI) / 180,
        p = E[3],
        F = new k$();
      if (z == 0) {
        F.scale(p, p);
        F.translate(I - 0.5, O - 0.5);
        F.scale(Y, d);
        F.rotate(s);
        var g = gg.a15(Y, d, s);
        F.scale(g, g);
        F.translate(Y / 2, d / 2);
      } else {
        var w = ((I - 0.5) * Y) / 2,
          r = ((O - 0.5) * d) / 2,
          g = p * Math.sqrt(2 * (w * w + r * r));
        F.scale(g, g * E[4]);
        F.rotate(s);
        F.translate((I + 0.5) * Y, (O + 0.5) * d);
      }
      F.translate(e.x, e.y);
      F.concat(Z(A));
      return F;
    };
    function b(V, P, z) {
      if (z) {
        G = P;
        m = V;
      } else {
        W = P;
        n = V;
      }
    }
    function c(V, P, z) {
      var E = UDOC.G,
        A = [],
        N = [],
        Q = "/DeviceGray",
        e = 1,
        Y = [],
        d = 1;
      for (var I = 0; I < V.length; I++) {
        var O = V[I];
        if (O.endsWith(" /CS")) {
          var s = O.indexOf("/NChannel"),
            p = O.indexOf("/Process");
          if (O.startsWith("/DeviceRGB")) {
            Q = "/DeviceRGB";
            e = 3;
          } else if (O.startsWith("/DeviceGray")) {
            Q = "/DeviceGray";
            e = 1;
          } else if (O.startsWith("/DeviceCMYK")) {
            Q = "/DeviceCMYK";
            e = 4;
            Y = [
              [1, 0, 0, 0],
              [0, 1, 0, 0],
              [0, 0, 1, 0],
              [0, 0, 0, 1],
            ];
          } else if (s != -1) {
            Q = "/DeviceCMYK";
            e = parseInt(O.slice(s - 2, s - 1));
            var F = 1;
            for (var y = 0; y < e; y++) {
              F = O.indexOf("[", F);
              Y[e - 1 - y] = O.slice(F + 1, F + 8)
                .split(" ")
                .map(parseFloat);
              F++;
            }
          } else if (p) {
            Q = "/DeviceGray";
            e = 1;
          } else throw O;
        } else if (O[0] == "[") {
          var g = O.indexOf("]"),
            w = O.slice(1, g).split(" ").map(parseFloat),
            r = O.slice(g + 2),
            eQ,
            t,
            dq,
            D,
            ha,
            am;
          if (r == "/Size" || r == "/P" || r == "/R") continue;
          if (r == "/S" || r == "/A") {
            eQ = w[0];
            t = w[1];
            dq = w[2];
            D = w[3];
            ha = w[4];
            am = w[5];
          } else if (r == "/N") {
            var k4 = e + (d == 1 ? 0 : 1),
              aA;
            eQ = w[k4 + 0];
            t = w[k4 + 1];
            dq = w[k4 + 2];
            D = w[k4 + 3];
            ha = w[k4 + 5];
            am = w[k4 + 6];
            if (Q == "/DeviceRGB") aA = w.slice(0, 3);
            else if (Q == "/DeviceGray") aA = [w[0], w[0], w[0]];
            else if (Q == "/DeviceCMYK") {
              var ex = [0, 0, 0, 0];
              for (var y = 0; y < e; y++) {
                var ac = w[y],
                  eJ = Y[y];
                ex[0] += ac * eJ[0];
                ex[1] += ac * eJ[1];
                ex[2] += ac * eJ[2];
                ex[3] += ac * eJ[3];
              }
              aA = h(ex);
            } else throw aA;
            aA.push(w[e]);
            N.push([aA, eQ, t]);
          } else throw r;
          A.push([r, ha, am, eQ, t, dq, D]);
        } else if (O == "/E") {
          var h$ = A.slice(0),
            da = 0;
          for (var y = 0; y < A.length; y++) {
            var bb = A[y][0];
            if (bb == "/N") {
              da++;
              continue;
            }
            var gb = y,
              fM = y + 1;
            while (A[fM][0] != "/N" && fM < A.length) fM++;
            if (da == 0 || da == 3) {
              for (var kS = 0; kS < fM - gb; kS++) h$[gb + kS] = A[fM - 1 - kS];
            } else
              for (var kS = gb; kS < fM; kS++) {
                var cY = h$[kS],
                  cS = cY[1];
                cY[1] = cY[5];
                cY[5] = cS;
                cS = cY[2];
                cY[2] = cY[6];
                cY[6] = cS;
              }
            y = fM - 1;
          }
          A = [];
          for (var y = 0; y < h$.length; y++) {
            var cY = h$[y];
            A.push(cY[1], cY[2], cY[3], cY[4], cY[5], cY[6]);
          }
          var k3 = A.length;
          E.moveTo(P, A[2], A[3]);
          for (var y = 0; y < k3; y += 6) {
            var dq = A[(y + 4) % k3],
              D = A[(y + 5) % k3],
              ha = A[(y + 6) % k3],
              am = A[(y + 7) % k3],
              eQ = A[(y + 8) % k3],
              t = A[(y + 9) % k3];
            E.curveTo(P, dq, D, ha, am, eQ, t);
          }
          E.closePath(P);
          A = [];
        } else if (O.endsWith("/Version")) d = parseFloat(O[0]);
      }
      var di = z.dj();
      di.uZ |= 16;
      di.tV("<Mesh>");
      var a7 = (di.add.vstk = eu.rS.i4(!0));
      if (N.length >= 2) {
        var b0 = 0,
          e1 = 0,
          l2 = 0;
        for (var y = 0; y < N.length; y++)
          for (var kS = y + 1; kS < N.length; kS++) {
            var kL = N[y][0],
              es = N[kS][0],
              kR = kL[0] - es[0],
              eH = kL[1] - es[1],
              cZ = kL[2] - es[2],
              ga = Math.sqrt(kR * kR + eH * eH + cZ * cZ);
            if (ga > l2) {
              l2 = ga;
              b0 = y;
              e1 = kS;
            }
          }
        var fi = N[b0],
          go = N[e1],
          iz = [
            [0, fi[0], 1, 0.5],
            [1, go[0], 1, 0.5],
          ],
          i5 = Z(P.ctm),
          aI = i5.uL(new ea(fi[1], fi[2])),
          bs = i5.uL(new ea(go[1], go[2]));
        if (aI.Lg(bs)) bs.x += 1;
        if (ei == 0) {
          var k2 = (di.add.GdFl = JSON.parse(eu.oy[eu.order.indexOf("GrFl")])),
            jG = k2.Grad.v;
          jG.Intr.v = 0;
          k2.Type.v.GrdT = "Lnr";
          B.MV.gB(iz, jG);
          var eW = B.b.RD(P.pth.crds);
          aI.x = (aI.x + bs.x) / 2;
          aI.y = (aI.y + bs.y) / 2;
          B.MV.UO(aI, bs, eW, k2);
          i(di, P.pth, z, 0);
        } else {
          var gc = (di.add.vstl = eu.TB.i4());
          gc.Nu = [];
          var ke = gg.T$(aI, bs, new k$());
          i(di, P.pth, z, 0);
          gc.dZ = gg.gW(0, ke, di.add.vmsk.D);
          gc.dZ[1] = iz;
        }
      } else i(di, P.pth, z, 0);
      z.U.push(di);
      E.newPath(P);
    }
    function a(V) {
      var P = V.indexOf(")");
      while (V[P - 1] == "\\") P = V.indexOf(")", P + 1);
      return V.slice(V.indexOf("(") + 1, P).replaceAll("\\", "");
    }
    function f(V, m) {
      V.Rd.v = m[0] * 255;
      V.Grn.v = m[1] * 255;
      V.Bl.v = m[2] * 255;
    }
    function U(V) {
      var P = [];
      for (var y = 0; y < V.length; y++) P[y] = parseFloat(V[y].slice(1));
      return P;
    }
    function Z(V) {
      return k$.aGN(V);
    }
    function h(V) {
      return B.Lf(V.slice(0, 4)).slice(0, 3);
    }
    function u(V) {
      var P = V.split(" "),
        z = P[P.length - 1],
        E = z.toLowerCase(),
        A = P.map(parseFloat),
        N = null;
      if (E == "xa" || E == "xx" || E == "xz") {
        var N = A[4] == null ? A.slice(0, 3) : [A[4], A[5], A[6]];
        if (E == "xx" && A[A.length - 2] == 2) N = h(A);
      } else if (E == "g") N = h([0, 0, 0, 1 - A[0]]);
      else if (E == "x" || E == "k") {
        if (E == "x") {
          A.pop();
          var Q = 1 - A.pop();
          for (var y = 0; y < 4; y++) A[y] *= Q;
        }
        N = h(A);
      } else if (E == "xk") {
        var e = A[A.length - 2],
          Y = A[A.length - 3];
        if (e == 0) N = h(A);
        else if (e == 1) {
          N = [A[4], A[5], A[6]];
          for (var y = 0; y < 3; y++) N[y] = Y * 1 + (1 - Y) * N[y];
        } else throw V;
      } else throw E;
      return N;
    }
    function i(V, P, z, E) {
      V.add.vmsk = new R.tm();
      if (P.crds.length != 0) V.add.vmsk.D = x(P);
      V.add.vmsk.uc = E;
      V.Pp();
      V.D5(z);
    }
    function x(V) {
      var P = { L: V.crds, RC: V.cmds },
        z = B.b.LZ(P, !1);
      return z;
    }
    function X(V, P) {
      var z = [],
        s = 0,
        w = 0;
      for (var E = 0; E < 2; E++) {
        var A = P[["Raster", "Place"][E]];
        if (A == null) continue;
        for (var y = 0; y < A.length; y++) {
          for (var N = 0; N < 3; N++) {
            var Q = A[y][["Data", "Document", "PlacedObjectPreview"][N]];
            if (Q == null) continue;
            if (Q._begin != null) Q = [Q];
            for (var e = 0; e < Q.length; e++) {
              var Y = Q[e],
                d = Y._begin,
                I = Y._end;
              if (d > I) d = I;
              z.push([d, I]);
            }
          }
        }
      }
      z.sort(function (eQ, t) {
        return eQ[0] - t[0];
      });
      var O = [P._begin];
      for (var y = 0; y < z.length; y++) {
        var p = z[y],
          d = p[0] + 32;
        O.push(d, p[1]);
        s += p[1] - d;
      }
      O.push(P._end);
      var F = P._end - P._begin,
        g = new Uint8Array(F - s);
      for (var y = 0; y < O.length; y += 2) {
        var d = O[y],
          r = O[y + 1] - d;
        g.set(new Uint8Array(V.buffer, d, r), w);
        w += r;
      }
      return M.K6(g).split(/\r\n|\r|\n/);
    }
    function $(V, P) {
      if (V == null) return [];
      var z = X(P, V),
        E = "",
        A = "",
        N = 0,
        Q;
      for (var y = 2; y < z.length; y++) {
        var e = z[y];
        if (e[0] == "%") {
          if (N == 0) E += e.slice(1);
          else A += e.slice(1);
        } else if (e == ";") N++;
        else if (e.endsWith("/RulerOrigin ,"))
          Q = e.split(" ").slice(0, 2).map(parseFloat);
      }
      var Y = [E, A],
        d = [];
      for (var y = 0; y < 2; y++) {
        var I = Y[y],
          O = new Uint8Array(I.length);
        M.Sc(O, 0, I);
        var s = FromPS.F.ASCII85Decode({ buff: O, off: 0 }),
          p = dE.VB(s);
        d.push(p);
      }
      d.push(Q);
      return d;
    }
    function H(V, P) {
      if (V == null) return [];
      var z = X(P, V);
      z = z.slice(1);
      for (var y = 0; y < z.length; y++) {
        var E = z[y];
        if (
          E.startsWith("%AI17_Begin_Content_if_version_gt") ||
          E == "%AI17_Alternate_Content" ||
          E == "%AI17_End_Versioned_Content"
        )
          z[y] = "";
        else if (E[0] == "%") z[y] = E.slice(E[1] == "_" ? 2 : 1);
      }
      var A = fv.acf(z);
      return A;
    }
    function C(V, P) {
      var z = {};
      if (V == null) return z;
      for (var y = 0; y < V.length; y++) {
        var E = X(P, V[y]),
          A = E[1],
          N = a(A),
          Q = A.slice(A.lastIndexOf(")") + 2)
            .split(" ")
            .map(parseFloat),
          e = [];
        for (var Y = 2; Y < E.length; Y++) e.push(E[Y].slice(2));
        z[N] = { gX: Q, Wi: e };
      }
      return z;
    }
    function l(V, P) {
      var z = [],
        A,
        N;
      if (V == null) return z;
      var E = X(P, V);
      for (var y = 1; y < E.length; y++) {
        var Q = E[y];
        if (Q == "0 0 Pb" || Q == "PB" || Q == "") {
        } else if (
          Q.endsWith("Xa") ||
          Q.endsWith("Xz") ||
          Q.endsWith("Xx") ||
          Q.endsWith("Xk") ||
          Q.endsWith(" g") ||
          Q.endsWith(" x") ||
          Q.endsWith(" k")
        )
          A = [0, u(Q)];
        else if (Q.endsWith("Xs")) A = [0, [0, 0, 0]];
        else if (Q.endsWith("Bg")) A = [1, a(Q)];
        else if (Q.endsWith("Pg") || Q.endsWith("p")) A = [2, a(Q)];
        else if (Q[0] == "(") N = a(Q);
        else if (Q == "Pc") z.push([N, A]);
        else if (Q == "0 BB" || Q == "Bb" || Q.endsWith("Bh")) {
        } else if (Q.startsWith("%AI17_")) {
        } else throw Q;
      }
      return z;
    }
    function v(V, P) {
      var z = {},
        E,
        A;
      if (V == null) return z;
      var N = [];
      for (var y = 0; y < V.length; y++) {
        var Q = X(P, V[y]);
        for (var e = 0; e < Q.length; e++) {
          var Y = Q[e];
          if (Y.endsWith("%_Bs")) {
            var d = Y.slice(0, Y.length - 4);
            if (!d.endsWith(" ")) d += " ";
            Y = d + "%_BS";
          }
          if (Y[0] == "(") {
            E = a(Y);
            var I = Y.slice(Y.lastIndexOf(")") + 2).split(" ");
            A = parseInt(I[0]);
          } else if (Y.endsWith("%_BS")) {
            var O = Y.split(" "),
              g,
              w = 1;
            O.pop();
            O = O.map(parseFloat);
            var s = O.pop(),
              p = O.pop(),
              F = O.pop();
            if (F == 0) g = [O[0], O[0], O[0]];
            else if (F == 2 || F == 4) g = [O[4], O[5], O[6]];
            else if (F == 1 || F == 3) g = h(O);
            else if (F == 6) {
              if (O.length == 3) g = [O[0], O[0], O[0]];
              else if (O.length >= 8 && Y.indexOf("(") == -1) g = O.slice(4, 7);
              else g = h(O);
              w = O.pop();
            } else {
              throw F;
            }
            N.push([s / 100, g, w, p / 100]);
          } else if (Y == "BD") {
            N.sort(function (r, eQ) {
              return r[0] - eQ[0];
            });
            z[E] = { Sg: A, aDf: N };
            N = [];
          }
        }
      }
      return z;
    }
    function K(V) {
      var P =
          "Gradient PluginObject Symbol Pattern PatternLayer BrushPattern Encoding Raster Layer Resource Place Rider Document".split(
            " "
          ),
        z = Date.now(),
        E = 0,
        A = [],
        N = { Header: {} },
        Q = [N],
        e = V.length;
      while (E < e) {
        var Y = E;
        while (Y != e && V[Y] != 13 && V[Y] != 10) {
          Y++;
        }
        if (V[E] == 37 && V[E + 1] == 95 && V[E + 2] == 37) E += 2;
        if (V[E] == 37 && (V[E + 1] == 37 || V[E + 1] == 65)) {
          var d = M.IH(V, E, Y - E);
          if (d == "%%EOF") break;
          if (
            d == "%%EndComments" ||
            d == "%EndComments" ||
            d == "%AI5_Begin_NonPrinting" ||
            d == "%AI5_End_NonPrinting--" ||
            d.startsWith("%AI17_Begin_Content_if_version_gt") ||
            d == "%AI17_End_Versioned_Content"
          ) {
          } else {
            var I = d.indexOf("Begin"),
              O = Math.max(d.indexOf("_End"), d.indexOf("%End"));
            if (I != -1 && d[I - 1] != "%" && d[I - 1] != "_") I = -1;
            if (I != -1) {
              var s = d.slice(I + 5).split(":")[0],
                p = { _begin: E, _end: E },
                F = Q[Q.length - 1];
              if (P.indexOf(s) != -1) {
                if (F[s] == null) F[s] = [];
                F[s].push(p);
              } else {
                if (F[s] != null) {
                  console.log(Q);
                  throw d;
                }
                F[s] = p;
              }
              Q.push(p);
              if (d.startsWith("%%BeginData")) {
                Y = M.Gf(V, "%%EndData", E);
              } else if (d.slice(0, 15) == "%%BeginDocument")
                Y = M.Gf(V, "%%EndDocument", Y);
              else if (d == "%AI9_BeginDocumentData")
                Y = M.Gf(V, "%AI9_EndDocumentData", Y);
              else if (d == "%AI11_BeginTextDocument")
                Y = M.Gf(V, "%AI11_EndTextDocument", Y);
            } else if (O != -1) {
              if (Q.length > 1) Q.pop()._end = E;
            } else if (
              Q.length == 1 &&
              (d.startsWith("%AI") ||
                (d.startsWith("%%") && d.indexOf(" ") != -1))
            ) {
              var g = 1;
              if (d.startsWith("%AI")) while (d[g] != "_" && g < d.length) g++;
              var w = d.indexOf(":");
              if (w == -1) w = d.indexOf(" ");
              var r = d.slice(g + 1, w),
                eQ = d.slice(w + 1).trim();
              N.Header[r] = eQ;
            }
          }
        }
        E = Y;
        if (V[E] == 13) E++;
        if (V[E] == 10) E++;
      }
      return N;
    }
    function S(V) {
      var P = "";
      for (var y = 0; y < V.length; y++) {
        if (V[y] == "_" && V[y + 1] == "x") {
          var aF = parseInt(V.slice(y + 2, y + 4), 16);
          P += String.fromCharCode(aF);
          y += 4;
        } else if (V[y] == "_") P += " ";
        else P += V[y];
      }
      return P;
    }
    function o(V) {
      var P = "xmlnode-nodename",
        z = "xmlnode-nodevalue",
        E = "xmlnode-attributes",
        A = "xmlnode-children",
        N = V[P].split(":").pop().replace("#", ""),
        Q = V[E],
        e = V[A],
        Y = "<" + N;
      for (var d in Q)
        if (d != "xmlns" && d != "xmlns:v")
          Y += " " + d.split(":").pop() + '="' + Q[d][z] + '"';
      Y += ">" + (e.length == 0 ? "" : "\n");
      for (var y = 0; y < e.length; y++) Y += o(e[y]);
      if (V[z]) Y += V[z];
      return Y + "</" + N + ">\n";
    }
    return j;
  })();
  gg.a15 = function (j, q, m) {
    var n = B.b._c(new hk(0, 0, j, q)).L,
      G = new k$();
    G.rotate(m);
    B.b.u(n, G, n);
    var W = B.b.RD(n);
    return W.r / j;
  };
  gg.aAG =
    "norm,mul ,scrn,over,sLit,hLit,div ,idiv,dark,lite,diff,smud,hue ,sat ,colr,lum ".split(
      ","
    );
  gg.He = (function () {
    function j(h) {
      var u = 72 / h.zv,
        i = new k$(u, 0, 0, -u, 0, 0),
        x = h.root.children,
        X = [],
        $ = { gJ: [], vU: {}, adY: 0 },
        C = 16383,
        D = 0,
        am = 0;
      for (var y = 0; y < h.JR.length; y++) {
        var H = h.JR[y];
        if (H[1].length == 4) U(H[1], $, H[0]);
      }
      for (var y = 0; y < x.length; y++) b(x[y], h, i, $, X, 0);
      var l = [
        "%!PS-Adobe-3.0\r",
        "%%Creator:Adobe Illustrator (TM) 15.000000 Exported from Photopea",
        "%%Title:Sitecreator.io.ai\r",
        "%%CreationDate:\r",
        "%%Canvassize:" + C + "\r",
        "%%BoundingBox:0 0 0 0\r",
        "%%DocumentProcessColors: Cyan Magenta Yellow Black\r",
        "%AI3_ColorUsage: Color\r",
        "%AI3_Cropmarks:0 0 1 1\r",
        "%AI3_TileBox:0 0 1 1\r",
        "%AI3_TemplateBox:0 0 1 1\r",
        "%AI3_DocumentPreview: None\r",
        "%AI5_ArtSize: 0 0 \r",
        "%AI5_NumLayers: 1\r",
        "%AI5_FileFormat 2.0\r",
        "%AI9_ColorModel: 1\r",
        "%AI12_CMSettings: 00.MS\r",
        "%%BeginProlog\r",
        "%%EndProlog\r",
      ];
      l.push("%%BeginSetup\r");
      l = l.concat($.gJ);
      for (pn in h.iE) {
        var v = h.iE[pn],
          K = h.zv / 72;
        l.push("%AI3_BeginPattern: (" + pn + ")");
        l.push(
          "(" + pn + ") 0 0 " + Math.round(v.r / K) + " " + Math.round(v.$ / K)
        );
        var x = v.root.children,
          S = [];
        for (var y = 0; y < x.length; y++) b(x[y], v, i, $, S, 1);
        S = window.aJq;
        for (var y = 0; y < S.length; y++) {
          var o = S[y];
          l.push(o.startsWith("%_") ? o : "%_" + o);
        }
        l.push("E", "%AI3_EndPattern");
      }
      if (h.JR.length != 0) {
        l.push("%AI5_BeginPalette", "0 0 Pb");
        for (var y = 0; y < h.JR.length; y++) {
          var H = h.JR[y],
            V = "(" + H[0] + ")",
            P = H[1].length;
          if (H[0] == "[Registration]")
            l.push(
              "0.749721 0.679194 0.670497 0.901457 0 0 0 ([Registration]) 0 1 Xz"
            );
          else if (P == 3)
            l.push(T(B.fE(H[1]).concat(H[1])) + " " + V + " 0 1 Xk");
          else if (P == 4)
            l.push(
              "Bb",
              "0 0 0 0 Bh",
              H[1][0] + 1 + " " + V + " 0 0 0 1 1 0 0 1 0 0 1 Bg",
              "0 BB"
            );
          else if (P == 2) l.push(V + " 0 0 1 1 0 0 0 0 0 [1 0 0 1 0 0] p");
          l.push(V, "Pc");
        }
        l.push("PB", "%AI5_EndPalette");
      }
      l = l.concat([
        "%AI9_BeginDocumentData\r",
        "/Document :",
        "/Dictionary :",
        "0 /Int (CropAreaActive) ,",
        "/Array :",
      ]);
      var z = h.add.arts;
      for (var y = 0; y < z.length; y++) {
        var E = z[y];
        console.log(E);
        var A = E.gX[0] * u,
          N = -E.gX[1] * u,
          Q = E.gX[2] * u,
          e = -E.gX[3] * u;
        l.push(
          "/Dictionary :",
          "(" + E.eA + ") /UnicodeString (Name) ,",
          "1 /Real (PAR) ,",
          "1 /Bool (IsArtboardDefaultName) ,",
          C / 2 + " " + C / 2 + " /RealPoint",
          " (RulerOrigin) ,",
          "0 /Int (DisplayMark) ,",
          m(A) + " " + m(N) + " /RealPointRelToROrigin",
          " (PositionPoint1) ,",
          m(Q) + " " + m(e) + " /RealPointRelToROrigin",
          " (PositionPoint2) ,",
          "; ,"
        );
      }
      l = l.concat(
        "; (ArtboardArray) ,-/Dictionary :-/Array :-; (SelHatDocInterIDsArray) ,-; (SelHatDocTableDict) ,-; /Recorded ,-/Dictionary : /NotRecorded ,-/Dictionary : /NotRecorded ,-; (PDFPresetCollection) ,-; /NotRecorded ,-;-%AI9_EndDocumentData\r".split(
          "-"
        )
      );
      var Y = [],
        d = [];
      for (var y = 0; y < h.U.length; y++) {
        var I = h.U[y],
          O = I.add.TySh;
        if (O) {
          Y.push(O.s3);
          d.push(O);
        }
      }
      if (Y.length != 0) {
        var s = h6.aor(Y, null, null);
        function p(E) {
          return E.map(function (k4) {
            return "f" + k4;
          });
        }
        for (var F = 0; F < Y.length; F++) {
          var O = d[F],
            g = s._1._1[F],
            w = g._1._0[0]._0;
          w = parseInt(w.slice(1));
          var r = s._0._8._0[w]._0,
            eQ = O.u.P();
          eQ.concat(i);
          eQ.scale(1, -1);
          r._2._2 = p([eQ.Sd, eQ.X, eQ.ra, eQ.Jy, eQ.Tt, eQ.BL]);
        }
        var t = q(s),
          dq = q(s);
        l.push("%AI11_BeginTextDocument");
        l.push("/AI11TextDocument : /ASCII85Decode ,");
        l = l.concat(t);
        l.push("0.0001 0.0001 /RulerOrigin ,");
        l.push(";");
        l.push("/AI11UndoFreeTextDocument : /ASCII85Decode ,");
        l = l.concat(dq);
        l.push(";");
        l.push("%AI11_EndTextDocument");
      }
      l.push("%%EndSetup\r");
      l = l.concat(X);
      l.push(
        "%%PageTrailer\r",
        "gsave annotatepage grestore showpage\r",
        "%%Trailer\r",
        "%%EOF\r",
        "\r",
        ""
      );
      for (var y = 0; y < l.length; y++) {
        var E = l[y];
        if (typeof E == "string") E = l[y] = M.Nh(E);
        D += E.length + 1;
      }
      var ha = new Uint8Array(D);
      for (var y = 0; y < l.length; y++) {
        var E = l[y];
        ha.set(E, am);
        am += E.length;
        ha[am] = 13;
        am++;
      }
      return fv.aap(ha).buffer;
    }
    function q(h) {
      var u = new aj(),
        i = dE.RS(h, u) - 2,
        x = Z(u.data.slice(0, i)),
        X = [];
      for (var $ = 0; $ < x.length; $ += 100) {
        if (x.length - $ < 103) {
          X.push("%" + x.slice($));
          break;
        }
        X.push("%" + x.slice($, $ + 100));
      }
      return X;
    }
    function m(aF) {
      return aF.toFixed(3);
    }
    function n(h, u) {
      var i = h.getName(),
        x = null;
      u.push("%_/ArtDictionary :");
      if (h.add.vmsk) x = h.add.vmsk.kx;
      if (h.add.SoLd) {
        var X = B.B.Jl(h.add.SoLd);
        x = Math.atan2(-X.X, X.Sd);
      }
      if (h.add.TySh) {
        var X = h.add.TySh.u;
        x = Math.atan2(-X.X, X.Sd);
      }
      if (x != null && x != 0)
        u.push("%_(" + x + ") /String (BBAccumRotation) ,");
      if (h.add.TySh)
        u.push(
          "%_(21b560b4-4fda-4f2d-b9c0-837007f17e72) /UnicodeString (AI24 TextStoryRawDataUUID) ,"
        );
      else if (!i.startsWith("<") && !i.endsWith(">")) {
        u.push("%_/XMLUID : " + G(i) + " ; (AI10_ArtUID) ,");
      }
      u.push("%_;", "%_");
    }
    function G(h) {
      var u = "";
      for (var y = 0; y < h.length; y++) {
        var i = h[y],
          x = h.charCodeAt(y);
        if (i == " ") u += "_";
        else if (
          i == "." ||
          i == ":" ||
          i == "-" ||
          (48 <= x && x <= 57) ||
          (65 <= x && x <= 90) ||
          (97 <= x && x <= 122) ||
          127 < x
        )
          u += i;
        else u += "_x" + x.toString(16).toUpperCase() + "_";
      }
      return "(" + u + ")";
    }
    function W(h, u, i) {
      i.push(T(h) + " " + u);
    }
    function k(h) {
      return "[ " + T(h) + " ]";
    }
    function T(h) {
      return h.map(m).join(" ");
    }
    function b(h, u, i, x, X, $) {
      var H = h.v;
      if ($ != 0) X.push("0 A", (H.Iw() ? 0 : 1) + " Xw");
      if (H.D1()) {
        var C = !1;
        for (var y = 0; y < h.children.length; y++)
          if (h.children[y].v.wp) C = !0;
        var l = H.add.lsct == hQ.WR ? 1 : 0;
        if ($ == 0) {
          X.push("%AI5_BeginLayer");
          X.push(
            (H.Iw() ? 1 : 0) +
              " " +
              u.add.prvw +
              " 1 1 0 0 1 -1 51 44 43 0 100 0 Lb"
          );
          X.push("(" + H.getName() + ") Ln");
          X.push(l + " AE");
          n(H, X);
        } else {
          X.push(l + " Ae");
          X.push(C ? "q" : "u");
        }
        for (var y = 0; y < h.children.length; y++)
          b(h.children[y], u, i, x, X, $ + 1);
        if ($ == 0) X.push("LB", "%AI5_EndLayer--");
        else {
          X.push(C ? "Q" : "U");
          n(H, X);
          c(H, X);
          X.push("0 0 Xd", "6 () XW");
        }
      } else if (!0) {
        c(H, X);
        var v = H.add.TySh,
          K = H.add.vmsk;
        if (v) {
          X.push(
            "/AI11Text :",
            "0 /FreeUndo ,",
            "0 /FrameIndex ,",
            x.adY + " /StoryIndex ,"
          );
          if (al.Po(v.s3) == 1) {
            var S = al.fu(v.s3),
              o = B.b._c(new hk(S[0], S[1], S[2], S[3])).L;
            B.b.u(o, v.u, o);
            B.b.u(o, i, o);
            X.push(
              "/Art :",
              "X=",
              "1 Ap",
              o[0] + " " + o[1] + " m",
              o[2] + " " + o[3] + " L",
              o[4] + " " + o[5] + " L",
              o[6] + " " + o[7] + " L",
              o[0] + " " + o[1] + " L",
              "n",
              "X+",
              "; /ConfiningPath ,"
            );
          }
          X.push("2 /TextAntialiasing ,", ";");
          x.adY++;
        } else if (H.add.SoLd) {
          var V,
            P,
            z,
            E = H.add.SoLd,
            A = E.Idnt.v,
            N = u.Kv(A, E.Crop ? E.Crop.v : null),
            Q = N.Zj,
            V = Q[0],
            P = Q[1];
          z = B.B.Jl(E);
          var e = new k$(1, 0, 0, -1, 0, 0);
          e.concat(z);
          e.concat(i);
          var Y = P.C(),
            d = P.r,
            I = P.$,
            O = B.j(Y * 4 + 8);
          for (var y = 0; y < Y; y++) {
            var s = y * 4,
              p = y * 3;
            O[p] = V[s];
            O[p + 1] = V[s + 1];
            O[p + 2] = V[s + 2];
            O[3 * Y + y] = V[s + 3];
          }
          M.Sc(O, Y * 4, "%EndData");
          X.push(
            "%AI5_File:",
            "%AI5_BeginRaster",
            k([e.Sd, e.X, e.ra, e.Jy, e.Tt, e.BL]) +
              " 0 0 " +
              [d, I, d, I].join(" ") +
              " 8 3 1 17 1 0 4 4 0 0",
            "%BeginData: " + (Y * 4 + 4),
            "XI",
            O,
            "XH",
            "%AI5_EndRaster",
            "N"
          );
        } else if (K) {
          var F = H.add.vstl,
            g,
            w;
          if (F) {
            g = F.dZ;
            w = F.Nu;
            if (g.length == 0) g = null;
            if (w.length == 0) w = null;
          }
          var r = B.z.in(K.D, !0) > 1;
          if (r) X.push("*u", "0 Xw");
          if (g) {
            if (g.length == 3) W(g, "Xa", X);
            else if (g.length == 4) {
              var eQ = f(g, x);
              X.push("Bb", eQ, "2 BB");
            } else {
              X.push(
                "(" +
                  g[0] +
                  ") " +
                  g[1][0].join(" ") +
                  " [" +
                  g[1][1].join(" ") +
                  "] p"
              );
            }
          }
          if (w) {
            var t = i.Dc(),
              dq = F.QJ.slice(0);
            for (var y = 0; y < dq.length; y++) dq[y] *= t;
            X.push(
              F.kv +
                " J " +
                F.h0 +
                " j " +
                F.mm * t +
                " w " +
                m(F.NV) +
                " M [" +
                dq.join(" ") +
                "]0 d"
            );
            if (w.length == 3) W(w, "XA", X);
            else if (w.length == 4) {
              var eQ = f(w, x);
              X.push("1 Bb", eQ, "2 BB");
            } else {
              X.push(
                "(" +
                  w[0] +
                  ") " +
                  w[1][0].join(" ") +
                  " [" +
                  w[1][1].join(" ") +
                  "] P"
              );
            }
          }
          var D = B.b.bh(K.D, 1);
          B.b.u(D.L, i, D.L);
          var ha = H.wp ? "h\nW\nn" : g && w ? "b" : g ? "f" : "s";
          a(D, ha, K.uc, X);
          if (r) X.push("*U");
        }
        n(H, X);
      } else {
        var am = [
          "0 Ae",
          "u",
          "0 Ae",
          "*u",
          "4 As",
          "0 O",
          "0.749721467494965 0.679194271564484 0.670496642589569 0.901457190513611 0 0 0 Xa",
          "0 1 0 0 0 Xy",
          "0 J 0 j 1 w 10 M []0 d",
          "0 XR",
          "111.18822479248 -34.0734329223633 m",
          "78.6218032836914 -68.3782501220703 L",
          "50.4593849182129 -42.8814239501953 L",
          "111.18822479248 -34.0734329223633 L",
          "F",
          "4 As",
          "1 D",
          "127.456848144531 -25.6510887145996 m",
          "36.9820060729981 -38.7733764648438 L",
          "78.938850402832 -76.7589797973633 L",
          "127.456848144531 -25.6510887145996 L",
          "127.456848144531 -25.6510887145996 L",
          "f",
          "*U",
          "U",
          "%_/ArtDictionary :",
          "%_/XMLUID : (stroke_center_00000129180656820086388900000009385145657589981339_) ; (AI10_ArtUID) ,",
          "%_;",
          "%_",
          "0 0 Xd",
          "6 () XW",
          "%_3 As",
          "%_0 D",
          "%_36.9820193421074 -38.7733812949637 m",
          "%_127.456839485992 -25.65107913669 l",
          "%_78.9388538744815 -76.758992805755 l",
          "%_36.9820193421074 -38.7733812949637 l",
          "%_n",
          "%_/ArtDictionary :",
          "%_/XMLUID : (stroke_center) ; (AI10_ArtUID) ,",
          "%_;",
          "%_",
          "1 (Anon EuoqR7CI7zs=) XW",
        ];
        X = X.push(am.join("\n"));
      }
    }
    function c(h, u) {
      var i = gg.aAG.indexOf(h.hz);
      if (i == -1) i = 0;
      u.push(i + " " + m(h.yA / 255) + " 0 0 0 Xy");
    }
    function a(h, u, i, x) {
      x.push(i + " XR");
      var X = 0;
      for (var $ = 0; $ < h.RC.length; $++) {
        var H = h.RC[$],
          C,
          l = 0,
          v = "";
        if (H == "M") {
          l = 2;
          C = "m";
        }
        if (H == "L") {
          l = 2;
          C = "l";
        }
        if (H == "C") {
          l = 6;
          C = "c";
        }
        for (var y = 0; y < l; y++) v += m(h.L[X + y]) + " ";
        X += l;
        if (l != 0) x.push(v + C);
        if ($ == h.RC.length - 1 || h.RC[$ + 1] == "M") {
          x.push(H == "Z" ? u : u.toUpperCase());
        }
      }
    }
    function f(h, u) {
      var i = U(h, u),
        x = "";
      if (h[0] == 1) x = "0 0 " + h[2].slice(5).map(m).join(" ") + " Bh\n";
      return (
        x +
        "1 (" +
        i +
        ") " +
        h[2].slice(0, 4).map(m).join(" ") +
        " " +
        h[3].map(m).join(" ") +
        " " +
        m(h[2][4]) +
        " Bg"
      );
    }
    function U(h, u, i) {
      var x = h[0],
        X = h[1].slice(0),
        $ = x + "-" + JSON.stringify(X);
      if (u.vU[$]) return u.vU[$];
      console.log(i);
      var H = (u.vU[$] = i ? i : "grd" + u.gJ.length);
      u.gJ.push(
        "%AI5_BeginGradient: (" + H + ")",
        "(" + H + ") " + x + " " + X.length + " Bd",
        "[",
        "4 %_Br",
        "0",
        "0",
        "1",
        "4 %_Br",
        "["
      );
      if (x == 0) X = X.reverse();
      for (var y = 0; y < X.length; y++) {
        var C = X[y];
        if (C[3] == null) throw "e";
        var l = B.fE(C[1]),
          v = 100 * C[3],
          K =
            l.concat(C[1]).map(m).join(" ") +
            " 2 " +
            m(C[2]) +
            " 6 " +
            v +
            " " +
            m(C[0] * 100);
        u.gJ.push(K + " %_BS");
        u.gJ.push("%_" + K + " Bs");
      }
      u.gJ.push("BD", "%AI5_EndGradient");
      return H;
    }
    function Z(h) {
      var u = [85 * 85 * 85 * 85, 85 * 85 * 85, 85 * 85, 85, 1],
        i = "",
        x = h.length,
        X = new Uint8Array(4),
        $ = new Uint32Array(X.buffer);
      for (var y = 0; y < x; y += 4) {
        var H = x - y;
        X[3] = h[y];
        X[2] = H > 1 ? h[y + 1] : 0;
        X[1] = H > 2 ? h[y + 2] : 0;
        X[0] = H > 3 ? h[y + 3] : 0;
        var C = $[0],
          l = 1 + Math.min(4, H);
        for (var v = 0; v < l; v++) {
          var K = Math.floor(C / u[v]);
          i += String.fromCharCode(33 + K);
          C -= K * u[v];
        }
      }
      return i + "~>";
    }
    return j;
  })();
  function f8() {}
  f8.VB = (function () {
    var j,
      q,
      m,
      n,
      G,
      W = !0,
      k = !0,
      C,
      l,
      v;
    function T(d) {
      return W ? M.YZ(j, d) : M.Z$(j, d);
    }
    function b(d) {
      return W ? M.d9(j, d) : M._h(j, d);
    }
    function c(d) {
      return W ? M.NR(j, d) : M.ro(j, d);
    }
    function a(d) {
      return M.d9(j, d);
    }
    function f(d) {
      return M.YZ(j, d);
    }
    function U(d) {
      return M.dq(j, d);
    }
    function Z(d, I) {
      if (d + I * 4 > j.length) throw I;
      var O = [];
      for (var y = 0; y < I; y++) O.push(T(d + y * 4));
      return O;
    }
    function h(d, I) {
      var O = [];
      for (var y = 0; y < I; y++) O.push(c(d + y * 8));
      return O;
    }
    function u(d) {
      return f((d + 1) * 4096 - 12);
    }
    function i(d) {
      return f((d + 1) * 4096 - 8);
    }
    function x(d, q, I, O) {
      if (n[d] == null) n[d] = [];
      n[d].push([O, new Uint8Array(j.buffer, q, I)]);
    }
    function X(d, I, O, s) {
      var p = m[d],
        q = p * 4096;
      q = q + f(q + 4096 - 24 - 12 - I * 4);
      var F = a(q),
        g = j[q + 2],
        w = j[q + 3];
      if (I != g) throw g;
      if (w == 0) x(s, q + 4, O, 9);
      else {
        var r = a(q + 6),
          eQ = f(q + 8);
        x(s, q + 12, F - 12, 9);
        X(eQ, r, O - (F - 12), s);
      }
    }
    function $() {
      var d = f(352),
        I = f(d * 4096 + 128),
        O = f(936);
      m = [];
      n = {};
      G = {};
      for (var y = 0; y < 1e9; y++) {
        var s = f(O * 4096 + 128 + y * 4);
        if (s == 0) break;
        var p = Z(s * 4096 + 128, (4096 - 128 - 12) >>> 2);
        m = m.concat(p);
      }
      for (var F = 0; F < m.length; F++) {
        var g = m[F],
          w = u(g);
        if (w != 6) continue;
        var q = g * 4096,
          r = f(q);
        q += 4;
        for (var y = 0; y < r; y++) {
          var eQ = f(q);
          q += 4;
          var t = f(q);
          q += 4;
          var dq = f(q);
          q += 4;
          var D = f(q);
          q += 4;
          if (eQ == 0) G[t] = dq;
          else {
            var ha = dq & 65535,
              am = dq >>> 16;
            if (am == 0) x(t, D * 4096, ha, 8);
            else X(D, am, ha, t);
          }
        }
      }
      var C = {};
      for (var k4 in n) {
        var aA = n[k4],
          ex = aA.length;
        if (ex == 1) C[k4] = aA[0][1];
        else {
          var ac = 0,
            q = 0;
          for (var y = 0; y < ex; y++) ac += aA[y][1].length;
          var eJ = (C[k4] = new Uint8Array(ac));
          for (var y = 0; y < ex; y++) {
            eJ.set(aA[y][1], q);
            q += aA[y][1].length;
          }
        }
      }
      return C;
    }
    function H(q, d) {
      var I = 0,
        O = "";
      if (d) {
        I = T(q);
        q += 4;
      } else {
        q += 3;
        I = b(q);
        q += 2;
      }
      while (O.length < I) {
        var s = b(q),
          p = s & 255,
          F = s >>> 8,
          g = 0,
          w = "";
        p += (F & 15) * 256;
        F = F & 240;
        q += 2;
        if (p == 0) throw "e";
        for (var y = 0; y < p; y++) {
          if (F == 64) g = j[q++];
          else if (F == 128) {
            g = b(q);
            q += 2;
          } else throw F;
          w += String.fromCharCode(g);
        }
        O += w;
      }
      return [O, q];
    }
    function K(q, d, I) {
      var O = Z(q, d);
      for (var y = 0; y < d; y++) {
        I.push(y);
        if (O[y] > l) throw "e";
        O[y] = o(O[y], I);
        I.pop();
      }
      return O;
    }
    var S = {};
    function o(d, I) {
      if (v.indexOf(d) != -1) return C[d];
      if (d == 0) return null;
      if (C[d] == null) return null;
      if (!(C[d] instanceof Uint8Array)) return C[d];
      var O = j,
        q = 0;
      j = C[d];
      v.push(d);
      var s = G[d].toString(16),
        p = (C[d] = { _type: Y[s] ? Y[s] + ":" + s : "typ-" + s, _eid: d });
      while (q + 8 < j.length) {
        var F = T(q);
        q += 4;
        var g = T(q);
        q += 4;
        var w = F.toString(16),
          r = q + g;
        if (q + g > j.length) {
          p._bin = j;
          break;
        }
        V(w, A, p, q, g, I);
        q = r;
      }
      j = O;
      v.pop();
      return p;
    }
    function V(d, I, O, q, s, p) {
      var F = I[d + ":" + O._type];
      if (F == null) F = I[d];
      p.push(F ? (F[0] == "" ? d : F[0]) : d);
      if (F) {
        var g = F[0],
          w = null,
          r = F[1];
        if (g == "") g = r + "-" + d;
        if (Q[r] && s != Q[r]) {
          console.log(r);
          console.log(d, F);
          console.log(j.slice(q, q + s));
          throw "e";
        }
        if (r == "mat") w = h(q, 6);
        else if (r == "mmat")
          w = [o(T(q), p), s == 6 ? [1, 0, 0, 1, 0, 0] : h(q + 6, 6)];
        else if (r == "rect") w = h(q, 4);
        else if (r == "mrct") {
          w = h(q, 4);
          w.push(a(q + 32));
        } else if (r == "doub") w = c(q);
        else if (r == "pointArr") {
          var eQ = a(q);
          w = Z(q + 2, eQ * 2);
        } else if (r == "usrt") w = a(q);
        else if (r == "uint") w = T(q);
        else if (r == "pntr" || r == "ptr6") {
          w = o(T(q), p);
        } else if (r == "bool2") {
          if (b(q) != 0 && b(q) != 1) throw b(q);
          w = b(q) == 1;
        } else if (r == "bool4") {
          if (T(q) > 60) throw d + "," + T(q);
          w = T(q) == 1;
        } else if (r == "color") {
          if (s != 38 && s != 30 && s != 22 && s != 94) throw s;
          var t = T(q),
            dq = b(q + 4);
          w = [t];
          for (var y = 0; y < dq; y++) w.push(c(q + 6 + y * 8));
        } else if (r == "path") {
          var D = q + s;
          w = [];
          var ha = T(q);
          q += 4;
          for (var y = 0; y < ha; y++) {
            var am = [[]];
            w.push(am);
            var k4 = T(q);
            q += 4;
            for (var aA = 0; aA < k4; aA++) {
              var t = T(q);
              q += 4;
              if (t < 2) {
                am[0].push([
                  t,
                  c(q),
                  c(q + 8),
                  c(q + 16),
                  c(q + 24),
                  c(q + 32),
                  c(q + 40),
                ]);
                q += 48;
              } else if (t == 2) {
                am[0].push([t, c(q), c(q + 8)]);
                q += 16;
              } else throw t;
            }
            var ex = a(q);
            if (ex != 0 && ex != 1 && ex != 256) {
              console.log("unknown last", ex);
              w.pop();
              break;
            }
            am.push(ex);
            q += 2;
          }
        } else if (r == "ptrAndList") {
          var ac = T(q),
            w = [];
          if (s > 4) {
            var eJ = T(q + 4);
            if (eJ > 600) throw eJ;
            w = K(q + 8, eJ, p);
          }
          w.unshift(o(ac, p));
        } else if (r == "ptrArray" || r == "ptrArrayX") {
          var h$ = s >> 2;
          if (r == "ptrArray") {
            h$ = T(q);
            q += 4;
            if (s != 4 + h$ * 4) throw s;
          }
          w = K(q, h$, p);
        } else if (r == "ptrArray2") {
          var h$ = T(q);
          q += 4;
          w = K(q, h$, p);
          q += h$ * 4;
          h$ = T(q);
          q += 4;
          w.push(K(q, h$, p));
        } else if (r == "cldrn") {
          var da = T(q),
            bb = T(q + 4),
            h$ = T(q + 8);
          w = { Y: o(da, p), xa: o(bb, p), Wv: K(q + 12, h$, p) };
          if (s != 12 + h$ * 4) {
            console.log(d, sa);
            throw "e";
          }
          if (da == 0) throw da;
        } else if (r == "aprnc") {
          var h$ = T(q);
          q += 4;
          w = {};
          for (var y = 0; y < h$; y++) {
            var gb = T(q),
              fM = b(q + 4),
              kS = b(q + 6);
            q += 8;
            var cY = e[gb.toString(16)];
            if (cY == null) cY = "prm-" + gb.toString(16);
            else cY = E(cY);
            w[cY] = [];
            for (var aA = 0; aA < kS; aA++) {
              var cS = T(q),
                k3 = b(q + 4),
                di = null;
              q += 6;
              if (cS == 28264) di = c(q);
              else if (cS == 28263) di = T(q);
              else if (cS == 279 || cS == 6917) di = o(T(q), p);
              else if (cS == 28261) di = a(q) == 1;
              else if (cS == 28265) di = [c(q), c(q + 4)];
              else if (cS == 6914 || cS == 83231) di = H(q)[0];
              else if (
                cS == 28259 ||
                cS == 28260 ||
                cS == 23094 ||
                cS == 67679
              ) {
                di = j.slice(q, q + k3);
              } else throw cS.toString(16);
              w[cY].push(di);
              q += k3;
            }
          }
        } else if (r == "lopts") {
          var a7 = 8;
          if (W && b(q + a7) < 2) a7 += 2;
          if (!W && (T(q + a7) == 0 || T(q + a7) == 65536)) a7 += 2;
          w = {
            a4G: b(q + 0) == 1,
            show: b(q + 2) == 1,
            aGn: b(q + 4) == 1,
            ek: T(q + a7),
            name: H(q + a7 + 8)[0],
          };
        } else if (r == "origin") {
          var D = q + s;
          if (j[q++] != 1) throw "e";
          var eQ = T(q);
          q += 4;
          var b0 = M.IH(j, q, eQ);
          q += eQ;
          q++;
          var e1 = j[q++],
            l2 = b(q);
          q += 2;
          var kL = T(q);
          q += 4;
          if (kL != 0 && kL != 1) throw kL;
          var es = T(q);
          q += 4;
          if (es != 0 && es != 2 && es != 3) throw es;
          var kR = f(q);
          q += 4;
          var eH = H(q, !0);
          q = eH[1];
          eH = eH[0];
          var cZ = f(q),
            ga = f(q + 4);
          q += 8;
          var fi = f(q);
          q += 4;
          if (fi != 0 && fi != 2) throw fi;
          var go = f(q);
          q += 4;
          var iz = H(q)[0];
          q += 2 + 2 + iz.length + 3;
          w = { file: b0, id: eH, hr: iz };
        } else if (r == "string") w = H(q)[0];
        else if (r == "relEnt") {
          var i5 = b(q);
          q += 2;
          w = [];
          for (var y = 0; y < i5; y++)
            w.push([T(q + y * 8), o(T(q + y * 8 + 4), p)]);
        } else if (r == "textData") {
          var D = q + s,
            aI = T(q);
          q += 4;
          var gb = T(q);
          q += 4;
          var dq = b(q);
          q += 2;
          var bs = [];
          for (var y = 0; y < dq; y++) {
            var k2 = T(q);
            q += 4;
            if (aI == 514) bs.push(H(q, !0)[0]);
            else if (aI == 515) {
              var jG = T(q),
                d = T(q + 4),
                eW = P(q + 8, p);
              bs.push([jG, o(d, p), eW]);
            } else if (aI == 516) {
              var jG = T(q),
                d = T(q + 4),
                gc = b(q + 8),
                eW = P(q + 8, p);
              bs.push([jG, o(d, p), eW]);
            } else bs.push(j.slice(q, q + k2));
            q += k2;
          }
          if (D - q != 12) throw D - q;
          w = bs;
        } else if (r == "storyProps") {
          var k1 = q;
          if (b(k1 + 4) > 1) throw "e";
          var dq = T(k1 + 10);
          w = {
            asG: T(k1),
            acM: o(T(k1 + 6), p),
            Wv: K(k1 + 14, dq, p),
            ab5: o(T(k1 + 14 + dq * 4), p),
          };
        } else if (r == "styleProps") w = P(q, p);
        else if (r == "bounds") {
          var k1 = q,
            i5 = T(q);
          q += 4;
          w = [];
          for (var y = 0; y < i5; y++) {
            var ke = [];
            w.push(ke);
            for (var aA = 0; aA < 4; aA++) ke.push(c(q + aA * 8));
            q += 32;
            ke.push(j[q]);
            q++;
          }
          if (q != k1 + s) throw "e";
        } else if (r == "columnPos") {
          var i5 = T(q);
          q += 4;
          w = [h(q, i5), c(q + i5 * 8)];
          q += i5 * 8 + 8;
        } else if (r == "StyleName") {
          w = [T(q + 4)];
        } else if (r == "fontName") {
          var D = q + s;
          w = [b(q)];
          q += 2;
          if (w[0] == 2) {
            q = D;
          } else if (w[0] == 3) {
            for (var y = 0; y < 2; y++) {
              if (b(q + 3) == 0) {
                q += 7;
                continue;
              }
              var b0 = H(q);
              q = b0[1];
              w.push(b0[0]);
            }
            var jh = T(q);
            q += 4;
            if (jh == 0) {
              q = D;
            } else {
              var b0 = H(q);
              q = b0[1];
              w.push(b0[0]);
              var b0 = H(q);
              q = b0[1];
              w.push(b0[0]);
              var b0 = H(q);
              q = b0[1];
              w.push(b0[0]);
              q += 10;
            }
            q = D;
          } else {
            if (w[0] != 1 && w[0] != 4) throw w[0];
            for (var y = 0; y < 2; y++) {
              var b0 = H(q);
              q = b0[1];
              w.push(b0[0]);
            }
            var cE = b(q),
              cy = b(q + 2);
            q += 4;
            w.push(cE);
            var jh = b(q);
            q += 2;
            w.push(jh);
            var hl = b(q);
            q += 2;
            var c2 = [];
            w.push(c2);
            for (var f9 = 0; f9 < hl; f9++) {
              var hu = [];
              c2.push(hu);
              var b0 = H(q);
              q = b0[1];
              hu.push(b0[0]);
              var le = b(q);
              if (le < 256) {
                q += 2;
                var b0 = M.IH(j, q, le);
                q += le;
                hu.push(b0);
              } else {
                var b0 = H(q);
                q = b0[1];
                hu.push(b0[0]);
              }
              for (var y = 0; y < 3; y++) {
                var b0 = H(q);
                q = b0[1];
                hu.push(b0[0]);
              }
              var iJ = T(q);
              hu.push(iJ);
              q += 4;
              if (T(q) > 65535) k = !1;
              if (!k) continue;
              var b0 = H(q, !0);
              q = b0[1];
              hu.push(b0[0]);
            }
            w.push(T(q));
            q += 4;
          }
          if (q != D) {
            q = D;
            console.log("strange fontName");
          }
        } else throw r;
        if (O[g] != null) {
          console.log(g, O[g], w);
          console.log(p.slice(0));
          console.log(eid, d, q, O[g], F, w);
          throw "e";
        }
        O[g] = w;
      } else {
        var dZ = j.slice(q, q + s);
        O["prop-" + d] = dZ;
      }
      p.pop();
    }
    function P(q, d) {
      var I = b(q);
      q += 2;
      var O = {};
      for (var y = 0; y < I; y++) {
        var s = T(q);
        q += 4;
        var p = s.toString(16),
          F = b(q);
        q += 2;
        var g = b(q);
        q += 2;
        for (var w = 0; w < g; w++) {
          var r = T(q);
          q += 4;
          var eQ = b(q);
          q += 2;
          V(p, N, O, q, eQ, d);
          q += eQ;
        }
      }
      return O;
    }
    function z(d) {
      W = !0;
      k = !0;
      j = new Uint8Array(d);
      C = $();
      var I = C[2147483649];
      I = M.K6(I, 4, I.length - 4);
      delete C[2147483649];
      l = 0;
      for (var O in C) l = Math.max(l, parseInt(O));
      v = [];
      var s = {};
      for (var O in C) s[O] = C[O];
      var p = C[1];
      if (p[0] == 0) W = !1;
      for (var O in C) o(parseInt(O), []);
      return C;
    }
    function E(d) {
      d = d.split(" ").join("");
      return d[0].toLowerCase() + d.slice(1);
    }
    var A = {
        1623: ["", "bool2"],
        "2c32": ["visible", "bool2"],
        cd1f: ["", "bool2"],
        "1b8": ["", "bool4"],
        "2c2d": ["locked", "bool4"],
        118: ["", "uint"],
        119: ["bitmap", "uint"],
        117: ["", "uint"],
        "117:Page:50f": ["color", "pntr"],
        "117:Fill:1f05": ["parentFill", "pntr"],
        "56c": ["", "uint"],
        bf31: ["", "uint"],
        ca58: ["", "uint"],
        cade: ["", "uint"],
        313: ["", "pntr"],
        a6b: ["trapPreset", "pntr"],
        e02: ["", "pntr"],
        "170d": ["bitmapFill", "pntr"],
        "1b916": ["", "pntr"],
        205: ["columns", "ptrAndList"],
        220: ["obj228", "ptrAndList"],
        "2ab": ["story", "ptrArrayX"],
        302: ["layer", "ptr6"],
        154: ["rect", "rect"],
        "21f": ["rect", "rect"],
        "27e": ["", "rect"],
        "2d6": ["rect", "rect"],
        565: ["rect", "rect"],
        "5dd": ["rect", "rect"],
        1633: ["rect", "rect"],
        "51a": ["margins", "mrct"],
        151: ["transform", "mat"],
        "2de": ["transform", "mat"],
        "40d": ["transform", "mat"],
        "56e": ["transform", "mat"],
        "5cc": ["transform", "mat"],
        "140f": ["mTransform", "mmat"],
        14527: ["transform", "mat"],
        528: ["columnPos", "columnPos"],
        261: ["relEnt", "relEnt"],
        262: ["textData", "textData"],
        "15b": ["children", "cldrn"],
        "2c8": ["children", "cldrn"],
        303: ["children", "cldrn"],
        503: ["children", "cldrn"],
        "28dc": ["children", "cldrn"],
        "104e5": ["children", "cldrn"],
        "1b95a": ["children", "cldrn"],
        "1f01": ["color", "color"],
        "162b": ["path", "path"],
        "6e03": ["appearance", "aprnc"],
        304: ["lopts", "lopts"],
        "2c10": ["name", "string"],
        "8c92": ["origin", "origin"],
        "3e05": ["name", "fontName"],
        "20f": ["", "ptrArrayX"],
        210: ["", "ptrArrayX"],
        211: ["", "ptrArrayX"],
        222: ["stories", "ptrArray2"],
        223: ["stoProps", "storyProps"],
        "23f": ["styProps", "styleProps"],
        "2c6b": ["bounds", "bounds"],
        230: ["name", "StyleName"],
        301: ["layers", "ptrArray"],
        501: ["spreads", "ptrArray"],
        "4c01": ["sections", "ptrArray"],
        1401: ["masterSpreads", "ptrArray"],
        a67: ["", "ptrArray"],
        "1f05": ["colors", "ptrArray"],
        "1f0c": ["", "ptrArray"],
        "1f60": ["", "ptrArray"],
        "1f61": ["", "ptrArray"],
        "288a": ["", "ptrArray"],
        "377c": ["textFrames", "ptrArray"],
        "3e06": ["", "ptrArray"],
        "1081d": ["", "ptrArray"],
      },
      N = {
        "1b01": ["fillColor", "pntr"],
        "1b02": ["fontStyle", "string"],
        "1b03": ["FontSize", "doub"],
        "1b11": ["FontCaps", "usrt"],
        "1b16": ["StartIndent", "doub"],
        "1b17": ["EndIndent", "doub"],
        "1b18": ["FirstLineIndent", "doub"],
        "1b1b": ["leading", "doub"],
        "1b26": ["SpaceBefore", "doub"],
        "1b27": ["SpaceAfter", "doub"],
        "1b2a": ["Underline", "bool2"],
        "1b2b": ["font", "pntr"],
        "1b3c": ["FontBaseline", "usrt"],
        "1b3d": ["Strikethrough", "bool2"],
        "1b7e": ["align", "usrt"],
      },
      Q = {
        mat: 48,
        mrct: 34,
        rect: 32,
        doub: 8,
        ptr6: 6,
        uint: 4,
        pntr: 4,
        bool4: 4,
        bool2: 2,
        usrt: 2,
      },
      e = {
        10816: "Object Opacity",
        10891: "Stroke Opacity",
        10892: "Stroke Blending Mode",
        10893: "Stroke Knockout Group",
        10894: "Stroke Isolate Blending",
        "108d8": "Fill Opacity",
        "108d9": "Fill Blending Mode",
        "108da": "Fill Knockout Group",
        "108db": "Fill Isolate Blending",
        10817: "Object Blending Mode",
        10818: "Object Knockout Group",
        10819: "Object Isolate Blending",
        "6e64": "Stroke Swatch",
        "6e65": "Stroke Weight",
        "6e66": "Stroke Tint",
        "6e6e": "Stroke Type",
        "6e68": "Fill Swatch",
        "6e69": "Fill Tint",
        "6e6b": "Stroke Cap",
        "6e6c": "Stroke Join",
        "6e6d": "Stroke Mitre Limit",
        "6e8c": "Stroke Align Stroke",
        "6e71": "Stroke Start Arrrowhead",
        "6e72": "Stroke End Arrrowhead",
        "6e89": "Stroke Gap Color Swatch",
        "6e8a": "Stroke Gap Tint",
        "6e84": "Stroke Arrowhead Align",
        "6e95": "Stroke Start Arrowhead Scale",
        "6e96": "Stroke End Arrowhead Scale",
        "6e8f": "Corner 1 Shape",
        "6e6f": "Corner 2 Shape",
        "6e90": "Corner 3 Shape",
        "6e91": "Corner 4 Shape",
        "6e70": "Corner 1 Size",
        "6e92": "Corner 2 Size",
        "6e93": "Corner 3 Size",
        "6e94": "Corner 4 Size",
        "1081a": "Drop Shadow",
        "1081b": "Drop Shadow DX",
        "1081c": "Drop Shadow DY",
        "1081e": "Drop Shadow Opacity",
        "1081f": "Drop Shadow BMode",
        10820: "Drop Shadow Size",
        10837: "Drop Shadow Color",
        "1084d": "Inner Shadow",
        "1084e": "Inner Shadow Color",
        "1084f": "Inner Shadow BMode",
        10850: "Inner Shadow Opacity",
        10851: "Inner Shadow Angle",
        10852: "Inner Shadow Dist",
        10855: "Inner Shadow Size",
        10857: "Oglow",
        10858: "Oglow BMode",
        10859: "Oglow Opacity",
        "1085b": "Oglow Color",
        "1086d": "Oglow Choke",
        "1085e": "Oglow Size",
        "1085f": "Iglow",
        10860: "Iglow BMode",
        10861: "Iglow Opacity",
        10863: "Iglow Color",
        10865: "Iglow Choke",
        10866: "Iglow Size",
        10868: "Bevel",
        "1086b": "Bevel Depth",
        "1086d": "Bevel Size",
        "1086f": "Bevel Angle",
        10870: "Bevel Alt",
        10872: "Bevel ColorH",
        10873: "Bevel BModeH",
        10874: "Bevel OpacityH",
        10875: "Bevel ColorS",
        10875: "Bevel BModeS",
        10877: "Bevel OpacityS",
        10878: "Satin",
        10879: "Satin Color",
        "1087a": "Satin BMode",
        "1087b": "Satin Opacity",
        "1087c": "Satin Angle",
        "1087d": "Satin Dist",
        "1087e": "Satin Size",
        "1087f": "Satin Invert",
        10821: "Basic Feather",
        10822: "Basic Feather Width",
        10895: "Stroke Drop Shadow",
        10899: "Stroke Drop Shadow Blending Mode",
        "1eb8f": "GradientFeatherSetting GradientStart",
        "1eb8e": "GradientFeatherSetting Length",
        14534: "name",
      },
      Y = {
        e01: "Document",
        301: "RESpread",
        236: "REParStyle",
        302: "Layer",
        401: "Group",
        501: "Spread",
        "50f": "Page",
        227: "Column",
        201: "Story",
        205: "Style",
        263: "TextFrame",
        a32: "Trapping",
        "1f05": "Fill",
        "3e03": "Font",
        6201: "Path",
        ca18: "StoryText",
      };
    return z;
  })();
  function d1() {}
  d1.VB = (function () {
    var j = 0;
    function q(f, U) {
      var Z = f8.VB(f),
        z = 1;
      j = 0;
      var h = Z[1],
        u = h.spreads,
        i = [],
        x = new hk();
      for (var X = 0; X < u.length; X++) {
        var $ = u[X],
          H = $.children;
        if (H == null) continue;
        var C = H.Wv,
          l = n($),
          v = C[0].children.Wv,
          K = new hk();
        for (var S = 0; S < v.length; S++) {
          var o = v[S],
            V = n(o);
          V.concat(l);
          var P = m(o);
          P.offset(V.Tt, V.BL);
          P = B.b.mE(P);
          K = K.vd(P);
        }
        i.push(K);
        x = x.vd(K);
      }
      while (Math.sqrt(x.C()) * z < 1e3) z++;
      while (x.C() * z * z * 4 > 2e9) z /= 2;
      U.r = x.r * z;
      U.$ = x.$ * z;
      U.buffer = new Uint8Array(4 * U.r * U.$);
      U.c4 = !0;
      U.zv = Math.round(72 * z);
      U.cw(u.length);
      for (var X = 0; X < u.length; X++) {
        var $ = u[X],
          H = $.children;
        if (H == null) continue;
        var C = H.Wv,
          E = U.dj();
        E.uZ = 24;
        E.add.lsct = hQ.WR;
        E.tV("Artboard " + (X + 1));
        var A = i[X].P();
        A.offset(-x.x, -x.y);
        A.x *= z;
        A.y *= z;
        A.r *= z;
        A.$ *= z;
        A = B.b.mE(A);
        E.KP(A);
        E.hz = "pass";
        U.U.push(U.to());
        var l = n($);
        l.translate(-x.x, -x.y);
        l.scale(z, z);
        var N = {};
        for (var Q = 0; Q < C.length - 1; Q++) {
          var e = C[Q],
            Y = e.children;
          if (Y == null) continue;
          Y = Y.Wv;
          var d = U.dj(),
            I = e.layer;
          if (I == null) continue;
          var O = I.lopts;
          if (O.name == "Internal_pages_layer_name" || N[O.name]) continue;
          N[O.name] = !0;
          d.uZ = 24;
          d.add.lsct = hQ.WR;
          d.tV(O.name);
          d.xg(O.show);
          if (O.a4G) d.add.lspf = 1 << 31;
          d.hz = "pass";
          U.U.push(U.to());
          for (var y = 0; y < Y.length; y++) b(Y[y], U, l, Z);
          U.U.push(d);
        }
        U.U.push(E);
      }
    }
    function m(f) {
      var U = f.rect;
      return new hk(U[0], U[1], U[2] - U[0], U[3] - U[1]);
    }
    function n(f) {
      var U = f.transform;
      if (U == null) U = new k$();
      return new k$(U[0], U[1], U[2], U[3], U[4], U[5]);
    }
    function G(f) {
      var U = f.color,
        Z = f.parentFill,
        u;
      if (U == null && Z) U = Z.color;
      if (U == null) {
        console.log("strange color", f);
        return [0, 0, 0];
      }
      var h = U[0];
      if (h == 5) u = U.slice(1);
      else if (h == 6) u = UDOC.C.cmykToRgb(U.slice(1));
      else if (h == 7) {
        var i = B.DD(U[1], U[2], U[3]);
        u = [i.o / 255, i.i / 255, i.X / 255];
      } else if (h == 9) u = [U[1], U[1], U[1]];
      else if (h == 14) {
        u = U.slice(1);
        console.log("unsure about the color");
      } else {
        console.log(U);
        throw h;
      }
      return u;
    }
    function W(f) {
      var U = G(f);
      return B.MV.Ia({ o: U[0] * 255, i: U[1] * 255, X: U[2] * 255 });
    }
    function k(f) {
      return "norm,mul ,scrn,over,sLit,hLit,div ,idiv,dark,lite,diff,smud,hue ,sat ,colr,lum ".split(
        ","
      )[f];
    }
    function T(f, U) {
      var y = 0,
        Z = 0;
      while (f[y + 1] && Z + f[y][0] <= U) {
        Z += f[y][0];
        y++;
      }
      f = f[y][1].textData;
      y = 0;
      while (f[y + 1] && Z + f[y][0] <= U) {
        Z += f[y][0];
        y++;
      }
      return f[y];
    }
    function b(f, U, Z, h) {
      var u = f.transform ? n(f) : new k$();
      u.concat(Z);
      var i = f.path,
        x = f.appearance,
        X = f.visible,
        $ = f.children ? f.children.Wv : null,
        H = U.dj();
      if (X != null) H.xg(X);
      var C = $ && $.length == 1 && $[0] && $[0].bitmapFill,
        l =
          f["bool2-1623"] &&
          $ &&
          $.length == 1 &&
          $[0].rect &&
          $[0]._type.startsWith("TextFrame");
      if (C) {
        H.tV("bitmap");
        var v = $[0],
          K = m(v),
          S = n(v),
          A = null;
        S.concat(u);
        var o = v.bitmapFill.bitmap;
        o = h[o]._bin;
        if (o == null) return;
        if (o.length != o.buffer.byteLength) o = o.slice(0);
        if (o[0] == 123) {
          console.log("unknown bitmap format");
          return;
        }
        var V = gh.Qa(o.buffer);
        if (["jpg", "tiff", "png", "gif", "webp"].indexOf(V) == -1) {
          alert("unsupported bitmap format:" + V);
          return;
        }
        var P = U.Pi(o, "img.jpg", 0, 0);
        P.uZ = H.uZ;
        H = P;
        var z = [0, 0, K.r, 0, K.r, K.$, 0, K.$];
        B.b.u(z, S, z);
        H.add.SoLd.Trnf = L.Dq.be(z);
        H.add.SoLd.nonAffineTransform = L.Dq.be(z);
        H.yZ(U, !1);
        var E = v.path;
        if (E && E.length != 0) A = a(E, S, x);
        else if (i && i.length != 0) A = a(i, u, x);
        if (A) {
          var N = B.z.zZ(A.D),
            Q = B.b.RD(z);
          if (N.C() / Q.TM(N).C() > 1.1) {
            if (N.contains(Q)) A = null;
            var e = f.children;
            f.children = null;
            b(f, U, Z, h);
            f.children = e;
          }
        }
        if (A) H.add.vmsk = A;
        H.Pp();
        H.D5(U);
      } else if (l) {
        if (x && x.strokeSwatch) {
          var Y = U.dj();
          c(Y, U, x, i, u);
          U.U.push(Y);
        }
        var d = $[0],
          K = m(d),
          S = n(d),
          ex = 0;
        S.concat(u);
        var I = d.children.Wv[0],
          O = I.obj228,
          s = O[0].story[1],
          p = s.stoProps.acM.relEnt,
          F = s.stoProps.Wv[0].relEnt;
        if (F == null) F = s.stoProps.Wv[2].relEnt;
        var g = s.stoProps.Wv[1];
        if (g["ptrArrayX-210"] == null) g = s.stoProps.Wv[6];
        if (g["ptrArrayX-210"][0] == null) return;
        g = g["ptrArrayX-210"][0].textData;
        var w = h[p[0][1].textData[0][1].name[0]],
          r = w ? w.styProps : {};
        g = g.join("").replace(/\r/g, "\n");
        var eQ = -1;
        while ((eQ = g.indexOf("\uFFFC")) != -1) {
          g =
            g.slice(0, eQ) + (g[eQ - 1] == "\n" ? " " : " ") + g.slice(eQ + 1);
        }
        H.tV(g.slice(0, 255));
        H.add.lnsr = "rend";
        H.add.TySh = al.wD(0, 0);
        H.add.TySh.AF = K;
        H.add.TySh.u = S;
        var t = H.add.TySh.s3;
        al.Fk(t, 0, g);
        var dq = al.vJ(t, 0, g.length);
        dq.K2.FontSize = 10;
        al.jD(t, 0, g.length, dq);
        var D = [];
        if (g.length != 0) {
          var ha = T(p, 0),
            am = T(F, 0),
            k4 = 1;
          for (var y = 1; y < g.length; y++) {
            var i = T(p, y),
              aA = T(F, y);
            if (i != ha || aA != am) {
              D.push(k4);
              k4 = 0;
            }
            ha = i;
            am = aA;
            k4++;
          }
          if (k4 != 0) D.push(k4);
        }
        for (var y = 0; y < D.length; y++) {
          var ac = T(F, ex),
            eJ = D[y],
            h$ = Math.min(ex + eJ, g.length - 1),
            da = ac[2],
            bb = ac[1] ? ac[1].styProps : null;
          if (bb == null) bb = {};
          var gb = T(p, ex),
            fM = gb[1].styProps,
            kS = gb[2],
            cY = {};
          for (var cS in r) cY[cS] = r[cS];
          for (var cS in fM) cY[cS] = fM[cS];
          for (var cS in kS) cY[cS] = kS[cS];
          for (var cS in bb) cY[cS] = bb[cS];
          for (var cS in da) cY[cS] = da[cS];
          cY.FontCaps = cY.FontCaps & 3;
          var dq = al.vJ(t, ex, h$),
            k3 = [
              "FontSize",
              "FontCaps",
              "Underline",
              "Strikethrough",
              "FontBaseline",
            ],
            di = k3.concat([
              "StartIndent",
              "EndIndent",
              "FirstLineIndent",
              "SpaceBefore",
              "SpaceAfter",
            ]);
          for (var a7 = 0; a7 < di.length; a7++) {
            var cS = di[a7],
              b0 = a7 < k3.length ? dq.K2 : dq.Th;
            if (cY[cS] != null) b0[cS] = cY[cS];
          }
          if (cY.fillColor) {
            var e1 = G(cY.fillColor);
            dq.K2.FillColor = { Type: 1, Values: [1].concat(e1) };
          }
          if (cY.font) {
            var l2 = cY.font.name[5],
              kL = cY.fontStyle;
            if (kL == null) kL = "Regular";
            if (l2)
              for (var es = 0; es < l2.length; es++)
                if (l2[es][0] == kL) al.gk(dq, l2[es][1]);
          }
          if (cY.leading != null && cY.leading > 1) {
            dq.K2.Leading = cY.leading;
            dq.K2.AutoLeading = !1;
          }
          if (cY.align != null)
            dq.Th.Justification = [0, 2, 1, 6, 3, 5, 4, 0, 0, 0][cY.align];
          al.jD(t, ex, h$, dq);
          ex += eJ;
        }
        al.cj(t, 1);
        al.ms(t, [0, 0, Math.round(K.r), Math.round(K.$)]);
      } else if (
        f._type.startsWith("Path") &&
        ($ == null || $.length == 0) &&
        i
      ) {
        c(H, U, x, i, u);
      } else {
        var kR = f["prop-14526"];
        if ($ == null && kR) {
          var eH = h[M.YZ(kR, 20)];
          $ = [eH];
        }
        if ($) {
          if (i && i.length != 0) {
            H.add.vmsk = a(i, u, x);
            H.Pp();
            H.D5(U);
          }
          H.tV("group");
          H.uZ = 24;
          H.add.lsct = hQ.WR;
          U.U.push(U.to());
          for (var y = 0; y < $.length; y++) if ($[y]) b($[y], U, u, h);
        }
      }
      if (x) {
        var cZ = x.objectBlendingMode,
          ga = x.objectOpacity,
          fi = x.fillTint,
          iz = !1;
        if (cZ) H.hz = k(cZ[0]);
        if (ga) H.yA = Math.round((H.yA * ga[0]) / 100);
        if (!C && fi) H.yA = Math.round((H.yA * fi[0]) / 100);
        var go = JSON.parse(eu.default);
        for (var y = 0; y < eu.order.length; y++)
          go[eu.C$[y]] = { t: "VlLs", v: [] };
        var i5 = "dropShadow innerShadow satin bevel iglow oglow".split(" "),
          aI = "DrSh IrSh ChFX ebbl IrGl OrGl".split(" ");
        for (var y = 0; y < i5.length; y++) {
          var bs = i5[y];
          if (x[bs] && x[bs][0]) {
            var k2 = x[bs],
              eW = 135,
              gc = 10;
            iz = !0;
            var jG = JSON.parse(eu.oy[eu.order.indexOf(aI[y])]);
            go[eu.C$[eu.order.indexOf(aI[y])]].v.push({ t: "Objc", v: jG });
            if (x[bs + "Color"]) jG.Clr.v = W(x[bs + "Color"][0]);
            else if (i5[y] == "iglow" || i5[y] == "oglow")
              jG.Clr.v = B.MV.Ia({ o: 255, i: 255, X: 255 });
            if (x[bs + "ColorH"]) jG.hglC.v = W(x[bs + "ColorH"][0]);
            if (x[bs + "ColorS"]) jG.sdwC.v = W(x[bs + "ColorS"][0]);
            if (x[bs + "BMode"]) jG.Md.v.BlnM = kJ.il(k(x[bs + "BMode"][0]));
            if (x[bs + "BModeH"])
              jG.hglM.v.BlnM = kJ.il(k(x[bs + "BModeH"][0]));
            if (x[bs + "BModeS"])
              jG.sdwM.v.BlnM = kJ.il(k(x[bs + "BModeS"][0]));
            if (x[bs + "Opacity"]) jG.Opct.v.val = x[bs + "Opacity"][0];
            if (x[bs + "OpacityH"]) jG.hglO.v.val = x[bs + "OpacityH"][0];
            if (x[bs + "OpacityS"]) jG.sdwO.v.val = x[bs + "OpacityS"][0];
            if (x[bs + "Size"]) jG.blur.v.val = x[bs + "Size"][0];
            if (x[bs + "Angle"]) eW = x[bs + "Angle"][0];
            if (x[bs + "Dist"]) gc = x[bs + "Dist"][0];
            if (x[bs + "DX"]) {
              var k1 = x[bs + "DX"][0],
                ke = x[bs + "DY"] ? x[bs + "DY"][0] : 0;
              gc = Math.round(Math.sqrt(k1 * k1 + ke * ke));
              eW = Math.round((Math.atan2(ke, -k1) * 180) / Math.PI);
            }
            if (jG.lagl) jG.lagl.v.val = eW;
            if (jG.Dstn) jG.Dstn.v.val = gc;
            if (jG.uglg) jG.uglg.v = !1;
            if (x[bs + "Invert"]) jG.Invr.v = x[bs + "Invert"][0];
            else if (i5[y] == "satin") jG.Invr.v = !1;
            if (x[bs + "Alt"]) jG.Lald.v.val = x[bs + "Alt"][0];
            if (x[bs + "Depth"]) jG.srgR.v.val = x[bs + "Depth"][0];
            if (x[bs + "Choke"]) jG.Ckmt.v.val = x[bs + "Choke"][0];
          }
        }
        if (iz) H.add.lmfx = go;
      }
      if (f.name) H.tV(f.name);
      else if (x && x.name) H.tV(x.name[0]);
      U.U.push(H);
    }
    function c(f, U, Z, h, u) {
      f.tV("path");
      f.uZ |= 16;
      f.add.vmsk = a(h, u, Z);
      var i = (f.add.vstk = eu.rS.i4()),
        x = B.MV.Ia({ o: 0, i: 0, X: 0 });
      if (Z) {
        var X = Z.strokeSwatch,
          $ = Z.fillSwatch,
          H = Z.basicFeather,
          C = Z.basicFeatherWidth,
          l = Z.strokeWeight;
        i.strokeEnabled.v = X != null;
        i.fillEnabled.v = $ != null;
        if (H) f.add.vmsk.LH = C ? C[0] : 9;
        if (X) {
          i.strokeStyleLineWidth.v.val = l ? l[0] : 1;
          x = W(X[0]);
          i.strokeStyleContent.v.Clr.v = x;
        }
        if ($) {
          x = W($[0]);
        }
      }
      if (x) f.add.SoCo = { classID: "null", Clr: { t: "Objc", v: x } };
      f.Pp();
      f.D5(U);
    }
    function a(f, U, Z) {
      var h = new R.tm(),
        u = h.D;
      for (var i = 0; i < f.length; i++) {
        var x = f[i],
          X = x[0].length,
          $ = x[1] == 0;
        if (X == 0) continue;
        var H = $ ? 0 : 3;
        u.push({ e: H, length: X, Np: 0, uc: 2, xV: 0, yg: 0 });
        for (var y = 0; y < X; y++) {
          var C = x[0][y],
            l = C[0],
            v = new ea(C[1], C[2]),
            K = new ea(C[3], C[4]),
            S = new ea(C[5], C[6]);
          if (l == 0 || l == 1) u.push({ e: H + 2, kt: v, Ii: K, _$: S });
          else if (l == 2) u.push({ e: H + 2, kt: v, Ii: v, _$: v });
          else throw l;
        }
      }
      B.z.La(u, U);
      return h;
    }
    return q;
  })();
  function bk() {}
  bk.qc = async function (j, q, m) {
    if (m == null) {
      m = 8 * 1024 * 1024;
    }
    var n = await j.slice(q, q + m),
      G = await n.arrayBuffer();
    return new Uint8Array(G);
  };
  bk.as6 = function (j, q) {
    var m = j[q],
      n = m,
      G = 1;
    while (!(m & 128)) {
      ++G;
      m = (m << 1) & 255;
    }
    m &= 127;
    m >>>= G - 1;
    for (var y = 1; y < G; ++y) {
      var W = j[q + y];
      m *= 256;
      m += W;
      n *= 256;
      n += W;
    }
    return [m, G, n];
  };
  bk.dW = function (j, q, m) {
    var n = j[q],
      G = n & 128,
      W = n & 127;
    for (var y = 1; y < m; ++y) {
      G *= 256;
      W *= 256;
      W += j[q + y];
    }
    return W - G;
  };
  bk.Z$ = function (j, q, m) {
    var n = j[q];
    for (var y = 1; y < m; ++y) {
      n *= 256;
      n += j[q + y];
    }
    return n;
  };
  bk.aF1 = function (j) {
    var q = 1,
      m = bk.Z$(j, q, 1),
      c = "hvc1",
      f = 0,
      U = !1,
      Z = "";
    q += 1;
    var n = m >> 6,
      G = (m & 32) >> 5,
      W = m & 31,
      k = bk.Z$(j, q, 4);
    q += 4;
    var T = j.slice(q, q + 6);
    q += 6;
    var b = bk.Z$(j, q, 1);
    c += ".";
    switch (n) {
      case 0:
        c += "";
        break;
      case 1:
        c += "A";
        break;
      case 2:
        c += "B";
        break;
      case 3:
        c += "C";
        break;
    }
    c += W;
    c += ".";
    var a = k;
    for (var y = 0; y < 32; y++) {
      f |= a & 1;
      if (y == 31) break;
      f <<= 1;
      a >>= 1;
    }
    c += f.toString(16);
    c += ".";
    if (G === 0) {
      c += "L";
    } else {
      c += "H";
    }
    c += b;
    for (y = 5; y >= 0; y--) {
      if (T[y] || U) {
        Z = "." + T[y].toString(16) + Z;
        U = !0;
      }
    }
    c += Z;
    return c;
  };
  bk.Ir = function (j, q) {
    this.pD = !1;
    this.s9 = j;
    this.position = 0;
    this.HH = [];
    this.Fv = [];
    this.wK = [];
    this.Fa = [];
    this.Xq = !0;
    this.awy = 0;
    this.I9 = 10;
    this.t6 = 6;
    this.xr = [];
    this.t3 = -2;
    this.z9 = [];
    this.fN;
    this._S;
    this.k7 = q;
    this.SV;
    this.Ux;
    this.ai7 = -1;
    this.frames;
    this.tB = null;
    this.RK = null;
    this.ox = null;
  };
  bk.Ir.k6 = async function () {
    if (!this.pD) {
      await this.fu();
    }
    return this.oh;
  };
  bk.Ir.Cg = function (j) {
    var q = this.Fv[this.position],
      m;
    if (this.Xq && q == this.awy) this.Xq = !1;
    if (!this.k7) {
      if (this.wK[q]) {
        this._S.drawImage(j, 0, 0);
        m = this._S.getImageData(
          0,
          0,
          this.oh.YF.width,
          this.oh.YF.height
        ).data;
      }
      if (this.Fa[this.position] == 0) j.close();
    }
    try {
      if (this.HH[q]) {
        if (this.k7) {
          this.HH[q](j);
        } else if (this.wK[q]) {
          this.HH[q](m);
        }
      }
      var n = this.position - this.I9;
      if (n >= 0) {
        var G = this.Fv[n];
        delete this.jg[G];
        delete this.HH[G];
        this.wK[G] = !1;
      }
      this.position++;
    } catch (gn) {
      console.log(q);
      console.log(this.HH[q]);
      console.log(gn);
    }
  };
  bk.Ir.q0 = async function (j) {
    if (this.Fa[this.position] == 0) {
      if (this.k7) {
        createImageBitmap(j).then((img) => {
          this.Cg(img);
        });
        j.close();
      } else {
        this.Cg(j);
      }
    } else {
      var q = this.Fa[this.position];
      createImageBitmap(j, {
        resizeWidth: j.acy >> q,
        resizeHeight: j.ajJ >> q,
      }).then((img) => {
        this.Cg(img);
      });
      j.close();
    }
  };
  bk.Ir.yd = async function (j, q, eT = 0) {
    if (!this.pD) {
      await this.fu();
    }
    if (!this.RK) {
      await this.aqN();
      if (this.RK.state != "configured") {
        console.log("Could not make decoder.");
        return;
      }
    }
    if (this.SV.length <= j) {
      console.log("Requested track does not exist");
      return;
    }
    var m = this.SV[j],
      W,
      k,
      T;
    if (q >= this.oh.YF.GN || q < 0) {
      console.log("Requested frame out of range");
      return;
    }
    var n = q;
    q = this._J(q);
    this.wK[q] = !0;
    var G = q - this.t3;
    if (this.Xq) {
      G = 1;
      this.awy = q;
    }
    if (q != this.t3 + 1) {
      k = this.xr[this.xr.length - 1];
      for (var y = 0; y < this.xr.length; ++y) {
        if (q < this.xr[y]) {
          k = this.xr[y - 1];
          break;
        }
      }
      if (k == this.ai7) {
        if (q > this.Fv[this.Fv.length - 1]) {
          k = this.Fv[this.Fv.length - 1] + 1;
        } else if (this.jg[q.toString()]) {
          k = this.Fv[this.Fv.length - 1] + 1;
        } else {
          for (var y = this.Fv.length - this.t6; y < this.Fv.length; ++y) {
            if (this.Fv[y] == q) {
              k = this.Fv[this.Fv.length - 1] + 1;
              break;
            }
          }
        }
      } else {
        this.ai7 = k;
        for (var y = this.Fv.length - this.t6; y < this.Fv.length; ++y) {
          if (this.Fv[y] == q) {
            k = this.Fv[this.Fv.length - 1] + 1;
            break;
          }
        }
      }
    } else {
      k = 0;
      if (this.Fv.length > 0) {
        k = this.Fv[this.Fv.length - 1] + 1;
      }
    }
    if (k < this.frames) {
      T = Math.min(q + this.t6, this.frames);
      for (var y = k; y < T; ++y) {
        this.jg[y] = new Promise(function (b, c) {
          W = b;
        });
        this.HH[y] = W;
        this.Fv.push(y);
        this.Fa.push(eT);
        if ((y - q) % G == 0) this.wK[y] = !0;
      }
      this.alY(m, k, T);
    }
    this.t3 = q;
    if (this.Xq) await new Promise((resolve) => setTimeout(resolve, 200));
    if (this.Xq) {
      this.I9 += 10;
      this.t6 += 6;
      this.yd(j, n + 1, eT);
    }
    return this.jg[q.toString()];
  };
  var gi = (function (j) {
    function q(k, T) {
      var b = [];
      for (var y = 0; y < 9; y++) {
        var c = M.Z$(k, T + y * 4);
        if (y % 3 == 2) b.push((c >>> 30) + (c & 1073741823) / 1073741823);
        else b.push((c >>> 16) + (c & 65535) / 65535);
      }
      return b;
    }
    async function m(k, T, b, c, a, f) {
      var U = {},
        Z = M.Z$,
        h = M._h;
      if (T == null) {
        T = await bk.qc(k, b);
      }
      var u = c - b;
      while (c < a) {
        var i = u,
          x = M.Z$(T, u);
        u += 4;
        var X = M.IH(T, u, 4);
        u += 4;
        if (x == 0) x = a - i - b;
        if (x == 1) {
          x = M.K_(T, u);
          u += 8;
        }
        var $ = i + x,
          H = "".padStart(f, "\t");
        if (X != "mdat" && $ > T.byteLength) {
          T = await bk.qc(k, b, $);
        }
        var C = {};
        if (X == "mvhd") {
          var l = T[u];
          if (l > 1) throw X + "-e";
          u += 4;
          if (l == 0) {
            C.Y2 = Z(T, u);
            u += 4;
            C.gZ = Z(T, u);
            u += 4;
            C.kL = Z(T, u);
            u += 4;
            C.duration = Z(T, u);
            u += 4;
          } else {
            C.Y2 = M.K_(T, u);
            u += 8;
            C.gZ = M.K_(T, u);
            u += 8;
            C.kL = Z(T, u);
            u += 4;
            C.duration = M.K_(T, u);
            u += 8;
          }
          C.bp = Z(T, u);
          u += 4;
          C.volume = h(T, u);
          u += 2;
          u += 10;
          C.asL = q(T, u);
          u += 4 * 9;
          C.a7r = [];
          for (var y = 0; y < 6; y++) C.a7r.push(Z(T, u + y * 4));
          u += 4 * 6;
          C.aFn = Z(T, u);
          u += 4;
        } else if (X == "tkhd") {
          var l = T[u];
          if (l > 1) throw X + "-e";
          u += 4;
          if (l == 0) {
            C.Y2 = Z(T, u);
            u += 4;
            C.gZ = Z(T, u);
            u += 4;
            C.E3 = Z(T, u);
            u += 4;
            u += 4;
            C.duration = Z(T, u);
            u += 4;
          } else {
            C.Y2 = M.K_(T, u);
            u += 8;
            C.gZ = M.K_(T, u);
            u += 8;
            C.E3 = Z(T, u);
            u += 4;
            u += 4;
            C.duration = M.K_(T, u);
            u += 8;
          }
          u += 8;
          C.v = h(T, u);
          u += 2;
          C.arx = h(T, u);
          u += 2;
          C.volume = h(T, u);
          u += 2;
          u += 2;
          C.asL = q(T, u);
          u += 4 * 9;
          C.GM = Z(T, u) >>> 16;
          u += 4;
          C.uu = Z(T, u) >>> 16;
          u += 4;
        } else if (X == "mdhd") {
          var l = T[u];
          if (l > 1) throw X + "-e";
          u += 4;
          if (l == 0) {
            C.Y2 = Z(T, u);
            u += 4;
            C.gZ = Z(T, u);
            u += 4;
            C.kL = Z(T, u);
            u += 4;
            C.duration = Z(T, u);
            u += 4;
          } else {
            C.Y2 = M.K_(T, u);
            u += 8;
            C.gZ = M.K_(T, u);
            u += 8;
            C.kL = Z(T, u);
            u += 4;
            C.duration = M.K_(T, u);
            u += 8;
          }
          C.lang = h(T, u);
          u += 2;
          C.Ae = h(T, u);
          u += 2;
        } else if (X == "hdlr") {
          var v = Z(T, u);
          u += 4;
          if (v != 0) throw v;
          C.Sg = M.IH(T, u, 4);
          u += 4;
          C.avJ = M.IH(T, u, 4);
          u += 4;
          C.aai = Z(T, u);
          u += 4;
          C.uZ = Z(T, u);
          u += 4;
          C.akR = Z(T, u);
          u += 4;
          var K = u;
          while (T[K] != 0) K++;
          C.name = M.IH(T, u, K - u);
          u += K - u + 1;
        } else if (X == "stsd") {
          var v = Z(T, u);
          u += 4;
          if (v != 0) throw v;
          var S = Z(T, u);
          u += 4;
          if (S != 1) throw S;
          var o = Z(T, u);
          u += 4;
          C.Em = M.IH(T, u, 4);
          u += 4;
          if (C.Em == "mett") {
            C.a1X = M.IH(T, u, $ - u);
          } else {
            for (var y = 0; y < 6; y++) if (T[u + y] != 0) throw X + "-e";
            u += 6;
            C.au4 = h(T, u);
            u += 2;
            C.a1f = h(T, u);
            u += 2;
            C.aJr = h(T, u);
            u += 2;
            C.aKy = Z(T, u);
            u += 4;
            if (
              "mp4v,avc1,encv,s263,vp09,hvc1,hev1,apcn,raw ,rle "
                .split(",")
                .indexOf(C.Em) != -1
            ) {
              C.aIU = Z(T, u);
              u += 4;
              C.aKQ = Z(T, u);
              u += 4;
              C.a77 = [h(T, u), h(T, u + 2)];
              u += 4;
              C.aLh = [Z(T, u) / (1 << 16), Z(T, u + 4) / (1 << 16)];
              u += 8;
              var V = Z(T, u);
              u += 4;
              if (V != 0) throw X + "-e";
              var P = h(T, u);
              u += 2;
              if (P != 1) throw X + "-e";
              var z = T[u];
              u++;
              C.at5 = M.IH(T, u, z);
              u += 31;
              C.aJg = h(T, u);
              u += 2;
              var E = h(T, u);
              u += 2;
              if (E != 65535) throw X + "-e";
              if (u != $) C.sd = await m(k, T, b, b + u, b + $, f + 1);
            } else if (
              "mp4a enca samr sawb ec-3 ac-3 lpcm".split(" ").indexOf(C.Em) !=
              -1
            ) {
              C._E = h(T, u);
              u += 2;
              C.aie = h(T, u);
              u += 2;
              var A = h(T, u);
              u += 2;
              if (A != 0 && A != 65534) throw A;
              var N = h(T, u);
              u += 2;
              if (N != 0) throw N;
              C.aE$ = Z(T, u) / (1 << 16);
              u += 4;
              if (u != $) C.sd = await m(k, T, b, b + u, b + $, f + 1);
            } else if (C.Em == "CTMD") {
              C.K = T.slice(u, $);
            } else if (C.Em == "tx3g" || C.Em == "text" || C.Em == "mebx") {
            } else if (C.Em == "tmcd") {
            } else if (C.Em == "CRAW") {
            } else if (C.Em == "sowt") {
            } else throw JSON.stringify(C.Em);
          }
        } else if (
          X == "stts" ||
          X == "stsz" ||
          X == "stco" ||
          X == "stsc" ||
          X == "ctts" ||
          X == "elst"
        ) {
          var v = Z(T, u),
            Q = 0,
            d = 0;
          u += 4;
          if (X == "stsz") {
            Q = Z(T, u);
            u += 4;
          }
          var e =
            Z(T, u) *
            (X == "stsc" || X == "elst"
              ? 3
              : X == "stts" || X == "ctts"
              ? 2
              : 1);
          u += 4;
          C = [];
          for (var y = 0; y < e; y++) {
            if (Q != 0) C.push(Q);
            else {
              if (X == "elst") {
                if (y % 3 == 2) {
                  var Y = Z(T, u);
                  Y *= 1 / (1 << 16);
                  C.push(Y);
                } else C.push(M.dW(T, u));
              } else C.push(Z(T, u));
              u += 4;
            }
          }
          for (var y = 0; y < e; y++) d += C[y];
        } else if (X == "co64") {
          var v = Z(T, u);
          u += 4;
          if (v != 0) throw v;
          var e = Z(T, u);
          u += 4;
          C = [];
          for (var y = 0; y < e; y++) {
            C.push(M.K_(T, u));
            u += 8;
          }
        } else if (X == "iinf") {
          C = [];
          u += 2;
          var I = Z(T, u);
          u += 4;
          for (var y = 0; y < I; y++) {
            var O = Z(T, u),
              s = M.IH(T, u + 4, 4),
              p = h(T, u + 12),
              F = M.IH(T, u + 16, 4),
              i = [s, p, F];
            C.push(i);
            if (O > 21) i.push(M.IH(T, u + 21, O - 22));
            u += O;
          }
        } else if (
          "moov trak mdia minf dinf stbl uuid edts meta iprp moof traf mvex"
            .split(" ")
            .indexOf(X) != -1
        ) {
          if (X == "uuid") u += 16;
          if (X == "meta") u += 4;
          C = await m(k, T, b, b + u, b + $, f + 1);
          if (X == "moof") {
            C.g = u + b;
            C.tA = x;
          }
        } else if (X == "CMT1" || X == "CMT2" || X == "CMT3" || X == "CMT4") {
          C = UTIF.decode(T.slice(u, $));
        } else if (X == "stss") {
          C.g = u + b;
          C.tA = x;
          C.abm = Z(T, u + 4);
        } else if (X == "trex") {
          C.uZ = Z(T, u);
          u += 4;
          C.Qf = Z(T, u);
          u += 4;
          C.a24 = Z(T, u);
          u += 4;
          C.n9 = Z(T, u);
          u += 4;
          C.aw6 = Z(T, u);
          u += 4;
          C.atT = Z(T, u);
          u += 4;
        } else if (X == "tfhd") {
          C.uZ = Z(T, u);
          u += 4;
          C.Qf = Z(T, u);
          u += 4;
          if (C.uZ & 1) u += 8;
          if (C.uZ & 2) u += 4;
          if (C.uZ & 8) {
            C.n9 = Z(T, u);
            u += 4;
          }
        } else if (X == "trun") {
          C.g = u + b;
          C.tA = x;
          C.uZ = Z(T, u);
          u += 4;
          C.ana = Z(T, u);
          u += 4;
        } else {
          C.g = u + b;
          C.tA = x;
        }
        u = $;
        if (
          X == "trak" ||
          X == "free" ||
          X == "uuid" ||
          X == "traf" ||
          X == "trex" ||
          (U.moov && U.moov.mvex && (X == "moof" || X == "mdat"))
        ) {
          if (U[X] == null) U[X] = [];
          U[X].push(C);
        } else {
          if (U[X] != null) throw X;
          U[X] = C;
        }
        c = u + b;
        if (u >= T.byteLength) {
          b += u;
          u = 0;
          T = await bk.qc(k, b);
        }
      }
      return U;
    }
    async function n(k) {
      return await m(k, null, 0, 0, k.size, 0);
    }
    function G(k, T) {
      var b = k.mdia.minf.stbl,
        c = b.stsc,
        a = 0,
        f = 0;
      for (var y = 0; y < c.length; y += 3) {
        var U = (y + 3 < c.length ? c[y + 3] : 1e4) - c[y],
          Z = f + U * c[y + 1];
        if (f <= T && T < Z) {
          while (f + c[y + 1] <= T) {
            a++;
            f += c[y + 1];
          }
          break;
        }
        a += U;
        f = Z;
      }
      var h = b.stco;
      if (h == null) h = b.co64;
      var u = h[a];
      while (f < T) {
        u += b.stsz[f];
        f++;
      }
      return [u, b.stsz[T]];
    }
    function W(k, T) {
      var b = k.moov.trak,
        c = [];
      for (var y = 0; y < b.length; y++) {
        if (b[y].mdia.hdlr.avJ == T) {
          c.push(b[y]);
        }
      }
      return c;
    }
    return { VB: n, OO: G, getTracks: W };
  })();
  function dN(j, q) {
    bk.Ir.call(this, j, q);
    this.k6 = bk.Ir.k6;
    this.Cg = bk.Ir.Cg;
    this.q0 = bk.Ir.q0;
    this.yd = bk.Ir.yd;
    this.sE;
    this.a2h = 0;
    this.Pw = 0;
    this.Nm = 0;
    this.WL = null;
    this.oN = null;
    this.Qn;
  }
  dN.prototype.Px = function (j) {
    this.z9.push(j);
  };
  dN.prototype.abN = function (j, y) {
    var q = 0,
      m = j.getUint8(y, !1);
    y += 1;
    q = m & 127;
    var n = m >> 7;
    while (n == 1) {
      m = j.getUint8(y, !1);
      y += 1;
      n = m >> 7;
      var G = m & 127;
      q = (q << 7) | G;
    }
    return [q, y];
  };
  dN.prototype.aJP = function (j) {
    this.ns = {};
    var q = new DataView(j.buffer),
      y = 4;
    y += 4;
    while (y < q.byteLength) {
      var m = q.getUint8(y, !1);
      y += 1;
      var n = this.abN(q, y),
        G = n[0];
      y = n[1];
      if (m == 3) {
        y += 2;
        y += 1;
      } else if (m == 4) {
        this.ns.objectType = q.getUint8(y, !1);
        y += 1;
        this.ns.streamType = q.getUint8(y, !1) >> 2;
        y += 1;
        y += 3;
        this.ns.maxBitrate = q.getUint32(y, !1);
        y += 4;
        this.ns.avgBitrate = q.getUint32(y, !1);
        y += 4;
      } else if (m == 5) {
        this.ns.decoderSpecificInfo = j.slice(y, y + G);
        y += G;
      } else {
        y += G;
      }
    }
  };
  dN.prototype.ah4 = function (j) {
    var q = null,
      W = 0;
    if (j.ae9) {
      if (j.edts.aoL) q = j.edts.aoL;
    }
    if (q == null) {
      this.tB = this.frames;
      return;
    }
    var m = this.kB.moov.mvhd.kL,
      n = j.mdia.mdhd.kL,
      G = (j.mdia.mdhd.duration * 1e3) / n / this.nY.stsz.length;
    this.WL = [];
    for (var y = 0; y < q.length; y += 3) {
      var k;
      if (q[y + 1] == -1) k = -1;
      else k = (q[y + 1] * 1e3) / G / n;
      var c_ = (q[y] * 1e3) / G / m;
      this.WL.push(W);
      this.WL.push(Math.floor(k));
      this.WL.push(q[y + 2]);
      W += Math.floor(c_);
    }
    this.tB = W;
    if (this._J(this.tB - 1) > this.frames - 1) this.tB--;
    if ((W + 1) * G < (j.tkhd.duration * 1e3) / m) {
      this.WL.push(W);
      this.WL.push(0);
      this.WL.push(1);
      this.tB = Math.floor((j.tkhd.duration * 1e3) / m / G);
    }
  };
  dN.prototype._J = function (j) {
    if (this.WL) {
      for (var y = this.WL.length - 3; y >= 0; y -= 3) {
        if (j >= this.WL[y]) {
          if (this.WL[y + 1] == -1) j = this.t3;
          else if (this.WL[y + 2] == 0) j = this.WL[y + 1];
          else j = j - this.WL[y] + this.WL[y + 1];
          break;
        }
      }
    }
    return j;
  };
  dN.prototype.aqN = async function () {
    this.RK = new VideoDecoder({
      output: (jK) => this.q0(jK),
      error: function (n) {
        console.log(n.message);
      },
    });
    var j = this.nY.stsd.Em;
    if (j == "avc1") {
      this.Xg = this.nY.stsd.sd.avcC;
      var q = { codec: "avc1.640034" };
      q.description = new Uint8Array(
        await this.s9.slice(this.Xg.g, this.Xg.g + this.Xg.tA).arrayBuffer()
      );
      this.RK.configure(q);
    } else if (j == "hev1" || j == "hvc1") {
      var q = {};
      this.Bp = this.nY.stsd.sd.hvcC;
      q.description = new Uint8Array(
        await this.s9.slice(this.Bp.g, this.Bp.g + this.Bp.tA).arrayBuffer()
      );
      var m = bk.aF1(q.description);
      q.codec = m;
      q.codedWidth = this.oh.YF.width;
      q.codedHeight = this.oh.YF.height;
      this.RK.configure(q);
    } else {
      var q = { codec: "vp09.00.10.08" };
      this.RK.configure(q);
    }
  };
  dN.prototype.aEL = async function () {
    this.ox = new AudioDecoder({
      output: (jK) => this.Px(jK),
      error: function (j) {
        console.log(j);
      },
    });
    console.assert(await AudioDecoder.isConfigSupported(this.$A));
    this.ox.configure(this.$A);
  };
  dN.prototype.a7T = async function () {
    var j = this.kB.moof,
      q = null,
      m = this.kB.moov.mvex.trex,
      k = 0;
    for (var y = 0; y < m.length; ++y) {
      if (m[y].Qf == this.Qn) {
        q = m[y];
        break;
      }
    }
    if (q == null) throw "fmp4 video track not found";
    var n = q.n9;
    if (n == 0) {
      for (var y = 0; y < j[0].traf.length; ++y) {
        var G = j[0].traf[y].tfhd;
        if (G.Qf == this.Qn) {
          n = G.n9;
          break;
        }
      }
    }
    var W = this.SV[0].mdia.mdhd.kL;
    this.bp = 1 / (n / W);
    this.sizes = [];
    this.Fc = [];
    for (var y = 0; y < j.length; ++y) {
      for (var T = 0; T < j[y].traf.length; ++T) {
        var G = j[y].traf[T].tfhd;
        if (G.Qf != this.Qn && G.Qf != this.awT) continue;
        var b = j[y].traf[T].trun,
          c = this.kB.mdat[y].g,
          a = await this.s9.slice(b.g - 4, b.g + b.tA),
          f = await a.arrayBuffer(),
          U = new Uint8Array(f),
          Z = new DataView(U.buffer),
          h = 8 + 3 * 4;
        if (G.Qf == this.Qn) {
          this.xr.push(this.sizes.length);
          while (h < Z.byteLength - 8) {
            if (b.uZ & 256) h += 4;
            if (b.uZ & 512) {
              this.sizes.push(Z.getUint32(h, !1));
              h += 4;
            }
            if (b.uZ & 1024) h += 4;
            if (b.uZ & 2048) h += 4;
          }
          for (var u = 0; u < b.ana; ++u) {
            if (u == 0) this.Fc.push(c);
            else this.Fc.push(this.Fc[k + u - 1] + this.sizes[k + u - 1]);
          }
          k += b.ana;
        }
      }
    }
  };
  dN.prototype.fu = async function () {
    this.kB = await gi.VB(this.s9);
    if (this.kB.moov.mvex) this.oN = !0;
    this.afT = {};
    this.jg = {};
    this.SV = gi.getTracks(this.kB, "vide");
    var j = !0,
      T = !0;
    if (this.SV.length > 0) {
      var q = this.SV[0],
        m = q.tkhd;
      this.Qn = m.E3;
      this.nY = q.mdia.minf.stbl;
      var n = this.nY.stsd.Em;
      if (n == "avc1" || n == "vp09" || n == "hvc1" || n == "hev1") {
        if (
          (n == "avc1" && !this.nY.stsd.sd.avcC) ||
          ((n == "hvc1" || n == "hev1") && !this.nY.stsd.sd.hvcC)
        ) {
          console.log(n + " video codec not supported (avcC missing).");
          j = !1;
        } else {
          if (!this.oN) {
            await this.axQ(this.nY.stss.g + 8, this.nY.stss.tA - 8);
            for (var y = 0; y < this.aAv.byteLength; y += 4) {
              var G = this.aAv.getUint32(y, !1) - 1;
              this.xr.push(G);
            }
            var W = q.mdia.mdhd.kL,
              k = q.mdia.mdhd.duration / W;
            this.frames = this.nY.stsz.length;
            this.bp = this.frames / k;
            this.ah4(q);
          }
        }
      } else {
        console.log(n + " video codec not supported.");
        j = !1;
      }
    }
    this.Ux = gi.getTracks(this.kB, "soun");
    if (this.Ux.length > 0) {
      var b = this.Ux[0],
        a;
      this.awT = b.tkhd.E3;
      var c = b.mdia.minf.stbl,
        f = c.stsd._E;
      if (c.stsd.Em == "mp4a") {
        if (c.stsd.sd.esds) {
          this.aw1 = c.stsz.length;
          var U = c.stsd.sd.esds.g,
            Z = c.stsd.sd.esds.tA,
            h = await this.s9.slice(U - 4, U + Z + 4),
            u = await h.arrayBuffer(),
            i = new Uint8Array(u),
            x = null;
          this.aJP(i);
          a = "mp4a.";
          if (this.ns.objectType == 64) {
            a += this.ns.objectType.toString(16);
            a += ".";
            a += (this.ns.decoderSpecificInfo[0] >> 3).toString();
            x = this.ns.decoderSpecificInfo;
          } else {
            a += this.ns.objectType.toString(16).toUpperCase();
          }
          if (x) {
            var X = x[0] >> 3;
            if (X == 31) {
              var $ = ((x[0] & 7) << 3) | (x[1] >> 5);
              X = 32 + $;
              var H = x[1] & (31 >> 1);
              if (H == 15) {
                f = ((x[4] & 1) << 3) | (x[5] >> 5);
              } else {
                f = ((x[1] & 1) << 3) | (x[2] >> 5);
              }
            } else {
              var H = ((x[0] & 7) << 1) | (x[1] >> 7);
              if (H == 15) {
                f = (x[4] & 127) >> 3;
              } else {
                f = (x[1] & 127) >> 3;
              }
            }
          }
          this.$A = { codec: a, numberOfChannels: f, sampleRate: c.stsd.aE$ };
          if (x) {
            this.$A.description = x;
          }
        } else {
          console.log("Audio codec not supported.");
          T = !1;
        }
      } else {
        console.log("Audio codec not supported.");
        T = !1;
      }
    }
    if (this.oN) {
      await this.a7T();
      this.frames = this.Fc.length;
      this.tB = this.Fc.length;
    }
    this.oh = {};
    if (j && this.SV.length > 0) {
      this.oh.YF = {
        SV: 1,
        GN: this.tB,
        bp: this.bp,
        width: m.GM,
        height: m.uu,
      };
    }
    if (T && this.Ux.length > 0 && !this.oN) {
      this.oh.Sd = { SV: f, bp: c.stsd.aE$, GN: b.mdia.mdhd.duration };
    }
    if (!this.k7) {
      this.fN = new OffscreenCanvas(this.oh.YF.width, this.oh.YF.height);
      this._S = this.fN.getContext("2d", { willReadFrequently: !0 });
      this.I9 = 10;
      this.t6 = 6;
    }
    this.pD = !0;
  };
  dN.prototype.axQ = async function (j, q) {
    this.a1G = await this.s9.slice(j, j + q).arrayBuffer();
    this.aAv = new DataView(this.a1G);
  };
  dN.prototype.qX = async function (j, q) {
    var m = Math.min(q + 250, this.frames - 1),
      n,
      G;
    if (this.oN) {
      n = this.S6(q);
      G = this.S6(m);
    } else {
      n = gi.OO(j, q);
      G = gi.OO(j, m);
    }
    var W = await this.s9.slice(n[0], G[0] + G[1]),
      k = await W.arrayBuffer();
    this.sE = new Uint8Array(k);
    this.a2h = q;
    this.Pw = m;
    this.Nm = n[0];
    return;
  };
  dN.prototype.S6 = function (y) {
    var j = [];
    j.push(this.Fc[y]);
    j.push(this.sizes[y]);
    return j;
  };
  dN.prototype.alY = async function (j, q, m) {
    if (q >= this.Pw || m < this.a2h) {
      await this.qX(j, q);
    }
    for (var y = q; y < m; ++y) {
      if (y >= this.Pw) {
        await this.qX(j, y);
      }
      var n = this.xr.indexOf(y),
        G = this.oN ? this.S6(y) : gi.OO(j, y),
        W = this.sE.slice(G[0] - this.Nm, G[0] + G[1] - this.Nm),
        k = new EncodedVideoChunk({
          timestamp: y,
          duration: 1e3,
          type: n != -1 ? "key" : "delta",
          data: W,
        });
      if (this.RK.state == "configured") {
        try {
          this.RK.decode(k);
        } catch (m) {
          console.log("CAUGHT unconfigured");
          console.log(m);
          console.log(k);
        }
      } else {
        console.log("unconfigured");
        delete W;
      }
      delete W;
    }
    if (m == this.frames) {
      await this.RK.flush();
    }
  };
  dN.prototype.am_ = async function (j, q, m) {
    if (!this.ox) {
      await this.aEL();
    }
    if (this.Ux.length <= j) {
      console.log("Requested audio track does not exist");
      return;
    }
    var n = this.Ux[j],
      G = n.mdia.minf.stbl.stts,
      W = null,
      k = null,
      T = 0,
      b = 0;
    for (var y = 0; y < G.length; y += 2) {
      if (W == null && T + G[y] * G[y + 1] >= q) {
        W = Math.ceil(b + (q - T) / G[y + 1]);
      }
      if (k == null && T + G[y] * G[y + 1] >= m) {
        k = Math.ceil(b + (m - T) / G[y + 1]);
      }
      if (W && k) {
        break;
      }
      T += G[y] * G[y + 1];
      b += G[y];
    }
    var c = gi.OO(n, W),
      a = gi.OO(n, k),
      f = await this.s9.slice(c[0], a[0] + a[1]),
      U = await f.arrayBuffer(),
      Z = new Uint8Array(U);
    for (var y = W; y < k; ++y) {
      var h = gi.OO(n, y),
        u = Z.slice(h[0] - c[0], h[0] + h[1] - c[0]),
        i = new EncodedAudioChunk({
          timestamp: y,
          duration: 1e3,
          type: "key",
          data: u,
        });
      try {
        this.ox.decode(i);
      } catch (gn) {
        console.log(
          "Error decoding audioframe " + y.toString() + ". " + gn.message
        );
      }
    }
    try {
      await this.ox.flush();
    } catch (gn) {
      console.log("CAUGHT flush, but returning");
      return this.z9;
    }
    return this.z9;
  };
  function iK(j, q, m) {
    this.oh = q;
    this.ZZ = j;
    this.aLg = [
      0, 0, 0, 24, 102, 116, 121, 112, 109, 112, 52, 50, 0, 0, 0, 0, 109, 112,
      52, 50, 105, 115, 111, 109, 0, 0, 0, 8, 102, 114, 101, 101,
    ];
    this.aDL = 40;
    this.GM, this.uu;
    this.Hs;
    this.p3;
    this._X;
    this.aL2;
    this.description;
    this.NQ;
    this.aQ;
    this.Je;
    this.xP;
    this.qA;
    this.Cf;
    this.FZ = m;
    this.PX;
    this.yw;
    this.vQ;
    this.aCl;
    this.lI;
    if (this.oh.YF) {
      this.aJ1();
    }
    if (this.oh.Sd) {
      this.aIj();
    }
  }
  iK.prototype.abn = function (j) {
    return new Uint8Array([
      j.charCodeAt(0),
      j.charCodeAt(1),
      j.charCodeAt(2),
      j.charCodeAt(3),
    ]).buffer;
  };
  iK.prototype.ag$ = function (j) {
    var q = new Uint32Array([j]),
      m = new Uint8Array(q.buffer);
    return new Uint8Array([m[3], m[2], m[1], m[0]]);
  };
  iK.prototype.d1 = function (j) {
    this.vQ[this.yw] = j;
    ++this.yw;
  };
  iK.prototype.fl = function (j) {
    this.vQ[this.yw] = (j >> 8) & 255;
    this.vQ[this.yw + 1] = j & 255;
    this.yw += 2;
  };
  iK.prototype.afO = function (j) {
    this.vQ[this.yw] = (j >> 16) & 255;
    this.vQ[this.yw + 1] = (j >> 8) & 255;
    this.vQ[this.yw + 2] = j & 255;
    this.yw += 3;
  };
  iK.prototype.Zi = function (j) {
    this.vQ[this.yw] = (j >> 24) & 255;
    this.vQ[this.yw + 1] = (j >> 16) & 255;
    this.vQ[this.yw + 2] = (j >> 8) & 255;
    this.vQ[this.yw + 3] = j & 255;
    this.yw += 4;
  };
  iK.prototype.dN = function (j) {
    this.PX.push(this.yw);
    this.yw += 4;
    this.Yy(j);
  };
  iK.prototype.Yy = function (j) {
    for (var y = 0; y < j.length; ++y) {
      this.vQ[this.yw] = j.charCodeAt(y);
      ++this.yw;
    }
  };
  iK.prototype.aCr = function (j) {
    this.vQ.set(new Uint8Array(j), this.yw);
    this.yw += j.byteLength;
  };
  iK.prototype.h_ = function () {
    var j = this.yw;
    this.yw = this.PX.pop();
    this.Zi(j - this.yw);
    this.yw = j;
  };
  iK.prototype.as_ = function (j, q) {
    if (!this.description && q) {
      if (q.description) {
        this.description = q.description;
      }
      if (q.decoderConfig && q.decoderConfig.description) {
        this.description = q.decoderConfig.description;
      }
    }
    var m = new ArrayBuffer(j.byteLength);
    j.copyTo(m);
    this.tW(m);
    this.Hs.push({
      duration: j.duration,
      timestamp: j.timestamp,
      type: j.type,
      byteLength: j.byteLength,
    });
    if (j.type == "key") {
      this._X.push(this.Hs.length);
    }
  };
  iK.prototype.Px = function (j, q) {
    if (!this.NQ && q) {
      if (q.decoderConfig) {
        this.NQ = q.decoderConfig;
      }
    }
    var m = new ArrayBuffer(j.byteLength);
    j.copyTo(m);
    this.az7(m);
    this.p3.push({
      duration: j.duration,
      timestamp: j.timestamp,
      type: j.type,
      byteLength: j.byteLength,
    });
    if (j.type == "key") {
      this.aL2.push(this.p3.length);
    }
  };
  iK.prototype.tW = function (j) {
    var q = new Uint8Array(this.aQ.byteLength + j.byteLength);
    q.set(new Uint8Array(this.aQ));
    q.set(new Uint8Array(j), this.aQ.byteLength);
    this.aQ = q.buffer;
    if (this.aQ.byteLength > 20 * 1024 * 1024) {
      this.ZZ.write(this.aQ);
      this.aQ = new Uint8Array();
    }
  };
  iK.prototype.az7 = function (j) {
    var q = new Uint8Array(this.Je.byteLength + j.byteLength);
    q.set(new Uint8Array(this.Je));
    q.set(new Uint8Array(j), this.Je.byteLength);
    this.Je = q.buffer;
  };
  iK.prototype.a5o = function () {
    this.PX = [];
    var j = this.aDL,
      q = [],
      m = {},
      n = 9e4,
      G = this.Hs.length,
      W = this._X.length,
      k = -1,
      b = !1,
      h = 1;
    for (var y = 0; y < this.Hs.length; ++y) {
      this.xP += this.Hs[y].duration / 1e3;
      this.Cf += this.Hs[y].byteLength;
      if (this.Hs[y].duration != k) {
        if (y != 0) {
          q.push(m);
        }
        k = this.Hs[y].duration;
        m = { duration: (9e4 * this.Hs[y].duration) / 1e6, sampleCount: 1 };
      } else {
        m.sampleCount = m.sampleCount + 1;
      }
    }
    this.Cf += 8;
    q.push(m);
    var T = q.length;
    if (this.oh.Sd) {
      b = !0;
    }
    if (b) {
      var c = [],
        a = this.p3.length;
      this.qA = 0;
      var f = this.NQ.sampleRate,
        k = -1;
      for (var y = 0; y < this.p3.length; ++y) {
        this.qA += this.p3[y].duration / 1e3;
        this.Cf += this.p3[y].byteLength;
        var U = Math.round((f * this.p3[y].duration) / 1e6);
        if (U != k) {
          if (y != 0) {
            c.push(m);
          }
          k = U;
          m = { duration: U, sampleCount: 1 };
        } else {
          m.sampleCount = m.sampleCount + 1;
        }
      }
      c.push(m);
      var Z = c.length;
    }
    var u = 579 + this.description.byteLength + 4 * G + 4 * G + 4 * W + 8 * T;
    if (b) {
      u += 426 + this.NQ.description.byteLength + 4 * a + 4 * a + 8 * T;
      h = 2;
    }
    this.vQ = new Uint8Array(u);
    this.yw = 0;
    this.dN("moov");
    this.dN("mvhd");
    this.Zi(0);
    this.Zi(0);
    this.Zi(0);
    this.Zi(1e3);
    this.Zi(this.xP);
    this.Zi(65536);
    this.fl(256);
    this.fl(0);
    this.Zi(0);
    this.Zi(0);
    this.Zi(65536);
    this.Zi(0);
    this.Zi(0);
    this.Zi(0);
    this.Zi(65536);
    this.Zi(0);
    this.Zi(0);
    this.Zi(0);
    this.Zi(1073741824);
    this.Zi(0);
    this.Zi(0);
    this.Zi(0);
    this.Zi(0);
    this.Zi(0);
    this.Zi(0);
    this.Zi(2);
    this.h_();
    for (var i = 0; i < h; ++i) {
      this.dN("trak");
      this.dN("tkhd");
      this.Zi(7);
      this.Zi(0);
      this.Zi(0);
      this.Zi(1);
      this.Zi(0);
      if (i == 1) this.Zi(this.qA);
      else this.Zi(this.xP);
      this.Zi(0);
      this.Zi(0);
      this.fl(0);
      this.fl(0);
      this.fl(256);
      this.fl(0);
      if (i == 1) {
        this.Zi(1);
        this.Zi(0);
        this.Zi(0);
        this.Zi(0);
        this.Zi(1);
        this.Zi(0);
        this.Zi(0);
        this.Zi(0);
        this.Zi(1);
        this.Zi(this.GM * 0);
        this.Zi(this.uu * 0);
      } else {
        this.Zi(65536);
        this.Zi(0);
        this.Zi(0);
        this.Zi(0);
        this.Zi(65536);
        this.Zi(0);
        this.Zi(0);
        this.Zi(0);
        this.Zi(1073741824);
        this.Zi(this.GM * 65536);
        this.Zi(this.uu * 65536);
      }
      this.h_();
      this.dN("mdia");
      this.dN("mdhd");
      this.Zi(0);
      this.Zi(0);
      this.Zi(0);
      if (i == 1) {
        this.Zi(this.NQ.sampleRate);
        this.Zi((this.qA / 1e3) * this.NQ.sampleRate);
      } else {
        this.Zi(n);
        this.Zi((this.xP / 1e3) * n);
      }
      this.d1(85);
      this.d1(196);
      this.fl(0);
      this.h_();
      this.dN("hdlr");
      this.Zi(0);
      this.Zi(0);
      if (i == 1) {
        this.Yy("soun");
        this.Zi(0);
        this.Zi(0);
        this.Zi(0);
        this.Yy("SoundHandler");
        this.d1(0);
      } else {
        this.Yy("vide");
        this.Zi(0);
        this.Zi(0);
        this.Zi(0);
        this.Yy("VideoHandler");
        this.d1(0);
      }
      this.h_();
      this.dN("minf");
      if (i == 1) {
        this.dN("smhd");
        this.Zi(0);
        this.fl(0);
        this.fl(0);
        this.h_();
      } else {
        this.dN("vmhd");
        this.Zi(1);
        this.fl(0);
        this.fl(0);
        this.fl(0);
        this.fl(0);
        this.h_();
      }
      this.dN("dinf");
      this.dN("dref");
      this.Zi(0);
      this.Zi(1);
      this.dN("url ");
      this.Zi(1);
      this.h_();
      this.h_();
      this.h_();
      if (i == 1) {
        this.dN("stbl");
        this.dN("stsd");
        this.Zi(0);
        this.Zi(1);
        this.dN("mp4a");
        this.fl(0);
        this.fl(0);
        this.fl(0);
        this.fl(1);
        this.Zi(0);
        this.Zi(0);
        this.fl(this.NQ.numberOfChannels);
        this.fl(16);
        this.fl(0);
        this.fl(0);
        this.fl(this.NQ.sampleRate);
        this.fl(0);
        this.dN("esds");
        this.Zi(0);
        this.d1(3);
        this.d1(25);
        this.fl(0);
        this.d1(0);
        this.d1(4);
        this.d1(17);
        this.d1(64);
        this.d1(21);
        this.afO(0);
        this.Zi(16e4);
        this.Zi(16e4);
        this.d1(5);
        this.d1(2);
        this.aCr(this.NQ.description);
        this.d1(6);
        this.d1(1);
        this.d1(2);
        this.h_();
        this.h_();
        this.h_();
        this.dN("stts");
        this.Zi(0);
        this.Zi(Z);
        for (var y = 0; y < Z; ++y) {
          this.Zi(c[y].sampleCount);
          this.Zi(c[y].duration);
        }
        this.h_();
        this.dN("stsc");
        this.Zi(0);
        this.Zi(1);
        this.Zi(1);
        this.Zi(1);
        this.Zi(1);
        this.h_();
        this.dN("stsz");
        this.Zi(0);
        this.Zi(0);
        this.Zi(a);
        for (var y = 0; y < a; ++y) {
          this.Zi(this.p3[y].byteLength);
        }
        this.h_();
        this.dN("stco");
        this.Zi(0);
        this.Zi(a);
        for (var y = 0; y < a; ++y) {
          this.Zi(j);
          j += this.p3[y].byteLength;
        }
        this.h_();
        this.h_();
      } else {
        this.dN("stbl");
        this.dN("stsd");
        this.Zi(0);
        this.Zi(1);
        this.dN("avc1");
        this.fl(0);
        this.fl(0);
        this.fl(0);
        this.fl(1);
        this.fl(0);
        this.fl(0);
        this.Zi(0);
        this.Zi(0);
        this.Zi(0);
        this.fl(this.GM);
        this.fl(this.uu);
        this.Zi(4718592);
        this.Zi(4718592);
        this.Zi(0);
        this.fl(1);
        for (var y = 0; y < 8; ++y) {
          this.Zi(0);
        }
        this.fl(24);
        this.fl(-1);
        this.dN("avcC");
        this.aCr(this.description);
        this.h_();
        this.h_();
        this.h_();
        this.dN("stts");
        this.Zi(0);
        this.Zi(T);
        for (var y = 0; y < T; ++y) {
          this.Zi(q[y].sampleCount);
          this.Zi(q[y].duration);
        }
        this.h_();
        this.dN("stsc");
        this.Zi(0);
        this.Zi(1);
        this.Zi(1);
        this.Zi(1);
        this.Zi(1);
        this.h_();
        this.dN("stsz");
        this.Zi(0);
        this.Zi(0);
        this.Zi(G);
        for (var y = 0; y < G; ++y) {
          this.Zi(this.Hs[y].byteLength);
        }
        this.h_();
        this.dN("stco");
        this.Zi(0);
        this.Zi(G);
        for (var y = 0; y < G; ++y) {
          this.Zi(j);
          j += this.Hs[y].byteLength;
        }
        this.h_();
        this.dN("stss");
        this.Zi(0);
        this.Zi(W);
        for (var y = 0; y < W; ++y) {
          this.Zi(this._X[y]);
        }
        this.h_();
        this.h_();
      }
      this.h_();
      this.h_();
      this.h_();
    }
    this.h_();
    return;
  };
  iK.prototype.aoG = async function (j) {
    console.assert(await VideoEncoder.isConfigSupported(j));
  };
  iK.prototype.aJ1 = function () {
    var j = Date.now(),
      q = this.oh.YF.width,
      m = this.oh.YF.height;
    this.GM = q;
    this.uu = m;
    this.description = null;
    this._X = [];
    this.Hs = [];
    this.xP = 0;
    this.Cf = 0;
    this.aQ = new Uint8Array();
    this.tW(new Uint8Array(this.aLg));
    this.tW(this.ag$(0).buffer);
    this.tW(this.abn("mdat"));
    this.$M = new VideoEncoder({
      output: (chunk, opts) => this.as_(chunk, opts),
      error: (gn) => {
        console.log(gn);
      },
    });
    var n = this.FZ * this.GM * this.uu,
      G = n * this.oh.YF.GN,
      W = Math.round(n * 24),
      k = {
        width: this.GM,
        height: this.uu,
        codec: "avc1.420034",
        bitrate: W,
        acceleration: "prefer-hardware",
      };
    this.aoG(k);
    this.$M.configure(k);
    this.lI = 0;
  };
  iK.prototype.aLM = async function (j) {
    console.assert(await AudioDecoder.aja(j));
  };
  iK.prototype.aIj = function () {
    this.Je = new Uint8Array();
    this.NQ = null;
    this.aL2 = [];
    this.p3 = [];
    var j = {
      codec: "mp4a.40.2",
      numberOfChannels: this.oh.Sd.SV,
      sampleRate: this.oh.Sd.bp,
      bitrate: 16e4,
    };
    this.atv = new AudioEncoder({
      output: (jK, lw) => this.Px(jK, lw),
      error: function (q) {
        console.log(q);
      },
    });
    this.aLM(j);
    this.atv.configure(j);
  };
  iK.prototype.k6 = function () {
    return this.oh;
  };
  iK.prototype.ajs = async function (j, q, m) {
    var n = j,
      G = 1e6 / this.oh.YF.bp;
    if (m % 50 == 0) {
      console.log(Math.round((m / this.oh.YF.GN) * 100).toString() + "%");
    }
    var W = new VideoFrame(n.buffer, {
      timestamp: this.lI,
      duration: G,
      format: "RGBA",
      codedWidth: this.GM,
      codedHeight: this.uu,
    });
    this.$M.encode(W);
    W.close();
    this.lI += G;
    delete n;
    delete j;
    delete W;
  };
  iK.prototype.a2q = async function (j, q, m, n) {
    for (var y = 0; y < j.length; ++y) {
      this.atv.encode(j[y]);
    }
  };
  iK.prototype.finish = async function () {
    if (this.oh.YF) {
      await this.$M.flush();
    }
    if (this.oh.Sd) {
      await this.atv.flush();
    }
    this.a5o();
    this.ZZ.write(this.aQ);
    if (this.oh.Sd) {
      this.ZZ.write(this.Je);
    }
    this.ZZ.write(this.vQ);
    this.ZZ.write({
      e: "write",
      data: this.ag$(this.Cf),
      position: this.aDL - 8,
    });
    return this.ZZ.close();
  };
  var e2 = (function (j) {
    var q = [
        [21, 73, 169, 102],
        [22, 84, 174, 107],
        [17, 77, 155, 116],
        [28, 83, 187, 107],
        [31, 67, 182, 117],
        [18, 84, 195, 103],
      ],
      m = "KaxInfo KaxTracks KaxSeekHead KaxCues KaxCluster KaxTags".split(" "),
      n = !1,
      G = bk.as6,
      W = bk.Z$,
      k = bk.dW;
    function T(u) {
      for (var y = 0; y < q.length; ++y) {
        var i = !0;
        for (var x = 0; x < q[y].length; ++x) {
          if (u[x] != q[y][x]) {
            i = !1;
            break;
          }
        }
        if (i == !0) {
          return m[y];
        }
      }
    }
    async function b(u, i, x, X) {
      if (i == null || X < x || X >= x + i.byteLength) {
        i = await bk.qc(u, X);
        x = X;
        X = 0;
      } else {
        X -= x;
        var $ = X,
          H = G(i, X),
          C = H[2];
        X += H[1];
        H = G(i, X);
        var l = H[0];
        X += H[1];
        if (X + l > i.byteLength) {
          i = await bk.qc(u, x + $, l + X - $);
          x += $;
          X = 0;
        } else {
          X = $;
        }
      }
      return [i, x, X];
    }
    async function c(u, i, x, X, $) {
      var H = $.qO.CueClusterPosition,
        P = !1;
      H += i.Segment.axg;
      var C = await b(u, x, X, H);
      x = C[0];
      X = C[1];
      H = C[2];
      if (x.length == 0) return { Er: 0, data: x, start: X, zd: null };
      var l = G(x, H),
        v = l[2];
      H += l[1];
      l = G(x, H);
      var K = l[0];
      H += l[1];
      var S = H;
      l = G(x, S);
      v = l[2];
      S += l[1];
      l = G(x, S);
      K = l[0];
      S += l[1];
      var o = e2.Rv[v];
      if (o.s == "CRC-32") {
        S += K;
        l = G(x, S);
        v = l[2];
        S += l[1];
        l = G(x, S);
        K = l[0];
        S += l[1];
      }
      var V = W(x, S, K);
      if ($.qO.CueRelativePosition) {
        H += $.qO.CueRelativePosition;
        l = G(x, H);
        v = l[2];
        H += l[1];
        l = G(x, H);
        K = l[0];
        H += l[1];
        if (o.s == "BlockGroup") {
          P = !0;
        }
        return {
          Er: X + H + K,
          data: x,
          start: X,
          zd: Z(x.slice(H, H + K), P),
          timeStamp: V,
        };
      } else {
        var z = 0;
        if ($.qO.CueBlockNumber) {
          z = $.qO.CueBlockNumber - 1;
          if (i.Segment.Info.MuxingApp.toLowerCase().includes("yamka")) {
            z++;
          }
        }
        K = 0;
        do {
          H += K;
          l = G(x, H);
          v = l[2];
          H += l[1];
          l = G(x, H);
          K = l[0];
          H += l[1];
          o = e2.Rv[v];
        } while (o.s != "SimpleBlock" && o.s != "BlockGroup");
        for (var y = 0; y < z; ++y) {
          H += K;
          l = G(x, H);
          v = l[2];
          H += l[1];
          l = G(x, H);
          K = l[0];
          H += l[1];
        }
        o = e2.Rv[v];
        if (o.s == "BlockGroup") {
          P = !0;
        }
        return {
          Er: X + H + K,
          data: x,
          start: X,
          zd: Z(x.slice(H, H + K), P),
          timeStamp: V,
        };
      }
    }
    async function a(u, i, x, X) {
      var $ = null,
        H = await b(u, i, x, X),
        o = !1;
      i = H[0];
      x = H[1];
      X = H[2];
      if (i.length == 0) return { Er: 0, data: i, start: x, zd: null };
      var C = G(i, X),
        l = C[2];
      X += C[1];
      C = G(i, X);
      var v = C[0];
      X += C[1];
      var K = e2.Rv[l];
      if (K.s != "SimpleBlock" && K.s != "BlockGroup") {
        var S =
          "SeekHead Tags Void Info Tracks Attachments Chapters Tags Cues".split(
            " "
          );
        if (S.indexOf(K.s) == -1) {
          do {
            if (K.s == "Cluster") {
              v = 0;
            }
            X += v;
            H = await b(u, i, x, x + X);
            i = H[0];
            x = H[1];
            X = H[2];
            if (i.length == 0) return { Er: 0, data: i, start: x, zd: null };
            C = G(i, X);
            l = C[2];
            X += C[1];
            C = G(i, X);
            v = C[0];
            X += C[1];
            K = e2.Rv[l];
            if (K.s == "Timestamp") {
              $ = W(i, X, v);
            }
          } while (K.s != "SimpleBlock" && K.s != "BlockGroup");
        } else return { Er: 0, data: i, start: x, zd: null };
      }
      if (K.s == "BlockGroup") {
        o = !0;
      }
      return {
        Er: x + X + v,
        data: i,
        start: x,
        zd: Z(i.slice(X, X + v), o),
        timeStamp: $,
      };
    }
    async function f(u, i, x, X, $) {
      var H = {},
        C = X - x;
      if (i == null) {
        i = await bk.qc(u, C);
        x = C;
        C = 0;
      }
      while (C + x < $ && !n) {
        var l,
          v = C + x,
          K = G(i, C),
          S = K[2];
        C += K[1];
        K = G(i, C);
        var o = K[0];
        C += K[1];
        var V = e2.Rv[S];
        if (!V) {
          throw "Unknown EBML element " + S.toString(16);
        }
        var P = V.s,
          z = C + o,
          E = C + x;
        if (z > i.byteLength && P != "Segment") {
          i = await bk.qc(u, x, z);
        }
        if (V.t == "m" && P == "Cluster") {
          n = !0;
          return [C, H];
        }
        if (V.t == "m") {
          var A = await f(u, i, x, x + C, x + z);
          C = A[0];
          A[1].g = v;
          A[1].axg = E;
          if (V.A == 1) {
            if (H[P] == null) {
              H[P] = [];
            }
            H[P].push(A[1]);
          } else {
            H[P] = A[1];
          }
          if (n) {
            break;
          }
        } else {
          if (V.t == "8") {
            l = M.K6(i, C, o);
          } else if (V.t == "s") {
            l = M.IH(i, C, o);
          } else if (V.t == "b") {
            l = M.AN(i, C, o);
          } else if (V.t == "u") {
            l = W(i, C, o);
          } else if (V.t == "i") {
            l = k(i, C, o);
          } else if (V.t == "f") {
            if (o == 4) {
              l = M.$C(i, C);
            } else if (o == 8) {
              l = M.ro(i, C);
            } else throw "Cannot read float of size " + o.toString();
          } else if (V.t == "d") {
            var N = W(i, C, o);
            N *= 1e-6;
            N +=
              new Date(2001, 1, 1).valueOf() - new Date(1970, 1, 1).valueOf();
            l = new Date(N);
          } else {
            l = o;
          }
          C += o;
          if (V.s == "SeekID") {
            var Q = T(l);
            l = Q;
          }
          if (V.A == 1) {
            if (H[P] == null) {
              H[P] = [];
            }
            H[P].push(l);
          } else {
            H[P] = l;
          }
        }
        if (C + x < $ && C >= i.byteLength) {
          x += C;
          C = 0;
          i = await bk.qc(u, x);
        }
      }
      return [C, H];
    }
    function U(u, i) {
      var x = u.Segment.Tracks.TrackEntry,
        X = [];
      for (var y = 0; y < x.length; ++y) {
        var $ = x[y];
        if ($.TrackType == i) {
          X.push($);
        }
      }
      return X;
    }
    function Z(u, i) {
      var x,
        X,
        $,
        H = 0;
      if (i) {
        x = G(u, H);
        var C = x[2];
        H += x[1];
        x = G(u, H);
        var l = x[0];
        H += x[1];
        X = H + l;
      }
      x = G(u, H);
      H += x[1];
      var v = x[0],
        K = k(u, H, 2);
      H += 2;
      var S = u[H],
        o = S >>> 7;
      H += 1;
      if (i) {
        $ = u.slice(H, X);
      } else {
        $ = u.slice(H);
      }
      return [v, K, o, $];
    }
    async function h(u) {
      var i = await f(u, null, 0, 0, u.size);
      n = !1;
      var x = i[1];
      if (x.Segment.SeekHead) {
        var X = x.Segment.SeekHead;
        for (var y = 0; y < X.length; ++y) {
          if (X[y].Seek) {
            for (var $ = 0; $ < X[y].Seek.length; ++$) {
              if (X[y].Seek[$].SeekID == "KaxSeekHead") {
                var H = X[y].Seek[$].SeekPosition + x.Segment.axg;
                i = await f(u, null, 0, H, u.size);
                n = !1;
                x.Segment.SeekHead.push(i[1]);
              } else if (X[y].Seek[$].SeekID == "KaxCues") {
                if (!x.Segment.Cues) {
                  H = X[y].Seek[$].SeekPosition + x.Segment.axg;
                  i = await f(u, null, 0, H, u.size);
                  n = !1;
                  x.Segment.Cues = i[1].Cues;
                }
              }
            }
          }
        }
      } else {
        console.log("No seek heads parsed, WIP, not implemented yet.");
      }
      return x;
    }
    return { VB: h, getTracks: U, cX: a, lE: c };
  })();
  e2.Rv = {
    440786851: { s: "EBML", t: "m", A: 0 },
    17030: { s: "EBMLVersion", t: "u", A: 0 },
    17143: { s: "EBMLReadVersion", t: "u", A: 0 },
    17026: { s: "DocType", t: "s", A: 0 },
    17031: { s: "DocTypeVersion", t: "u", A: 0 },
    17029: { s: "DocTypeReadVersion", t: "u", A: 0 },
    17028: { s: "DocTypeExtensionVersion", t: "u", A: 0 },
    191: { s: "CRC-32", t: "b", A: 0 },
    236: { s: "Void", t: "b", A: 1 },
    17138: { s: "EBMLMaxIDLength", t: "u", A: 0 },
    17139: { s: "EBMLMaxSizeLength", t: "u", A: 0 },
    408125543: { s: "Segment", t: "m", A: 0 },
    290298740: { s: "SeekHead", t: "m", A: 1 },
    19899: { s: "Seek", t: "m", A: 1 },
    21419: { s: "SeekID", t: "b", A: 0 },
    21420: { s: "SeekPosition", t: "u", A: 0 },
    357149030: { s: "Info", t: "m", A: 0 },
    29604: { s: "SegmentUUID", t: "b", A: 0 },
    29572: { s: "SegmentFilename", t: "8", A: 0 },
    3979555: { s: "PrevUUID", t: "b", A: 0 },
    3965867: { s: "PrevFilename", t: "8", A: 0 },
    4110627: { s: "NextUUID", t: "b", A: 0 },
    4096955: { s: "NextFilename", t: "8", A: 0 },
    17476: { s: "SegmentFamily", t: "b", A: 1 },
    26916: { s: "ChapterTranslate", t: "m", A: 1 },
    27045: { s: "ChapterTranslateID", t: "b", A: 0 },
    27071: { s: "ChapterTranslateCodec", t: "u", A: 0 },
    27132: { s: "ChapterTranslateEditionUID", t: "u", A: 1 },
    2807729: { s: "TimestampScale", t: "u", A: 0 },
    17545: { s: "Duration", t: "f", A: 0 },
    17505: { s: "DateUTC", t: "d", A: 0 },
    31657: { s: "Title", t: "8", A: 0 },
    19840: { s: "MuxingApp", t: "8", A: 0 },
    22337: { s: "WritingApp", t: "8", A: 0 },
    524531317: { s: "Cluster", t: "m", A: 1 },
    231: { s: "Timestamp", t: "u", A: 0 },
    22612: { s: "SilentTracks", t: "m", A: 0 },
    22743: { s: "SilentTrackNumber", t: "u", A: 1 },
    167: { s: "Position", t: "u", A: 0 },
    171: { s: "PrevSize", t: "u", A: 0 },
    163: { s: "SimpleBlock", t: "b", A: 1 },
    160: { s: "BlockGroup", t: "m", A: 1 },
    161: { s: "Block", t: "b", A: 0 },
    162: { s: "BlockVirtual", t: "b", A: 0 },
    30113: { s: "BlockAdditions", t: "m", A: 0 },
    166: { s: "BlockMore", t: "m", A: 1 },
    165: { s: "BlockAdditional", t: "b", A: 0 },
    238: { s: "BlockAddID", t: "u", A: 0 },
    155: { s: "BlockDuration", t: "u", A: 0 },
    250: { s: "ReferencePriority", t: "u", A: 0 },
    251: { s: "ReferenceBlock", t: "i", A: 1 },
    253: { s: "ReferenceVirtual", t: "i", A: 0 },
    164: { s: "CodecState", t: "b", A: 0 },
    30114: { s: "DiscardPadding", t: "i", A: 0 },
    142: { s: "Slices", t: "m", A: 0 },
    232: { s: "TimeSlice", t: "m", A: 1 },
    204: { s: "LaceNumber", t: "u", A: 0 },
    205: { s: "FrameNumber", t: "u", A: 0 },
    203: { s: "BlockAdditionID", t: "u", A: 0 },
    206: { s: "Delay", t: "u", A: 0 },
    207: { s: "SliceDuration", t: "u", A: 0 },
    200: { s: "ReferenceFrame", t: "m", A: 0 },
    201: { s: "ReferenceOffset", t: "u", A: 0 },
    202: { s: "ReferenceTimestamp", t: "u", A: 0 },
    175: { s: "EncryptedBlock", t: "b", A: 1 },
    374648427: { s: "Tracks", t: "m", A: 0 },
    174: { s: "TrackEntry", t: "m", A: 1 },
    215: { s: "TrackNumber", t: "u", A: 0 },
    29637: { s: "TrackUID", t: "u", A: 0 },
    131: { s: "TrackType", t: "u", A: 0 },
    185: { s: "FlagEnabled", t: "u", A: 0 },
    136: { s: "FlagDefault", t: "u", A: 0 },
    21930: { s: "FlagForced", t: "u", A: 0 },
    21931: { s: "FlagHearingImpaired", t: "u", A: 0 },
    21932: { s: "FlagVisualImpaired", t: "u", A: 0 },
    21933: { s: "FlagTextDescriptions", t: "u", A: 0 },
    21934: { s: "FlagOriginal", t: "u", A: 0 },
    21935: { s: "FlagCommentary", t: "u", A: 0 },
    156: { s: "FlagLacing", t: "u", A: 0 },
    28135: { s: "MinCache", t: "u", A: 0 },
    28152: { s: "MaxCache", t: "u", A: 0 },
    2352003: { s: "DefaultDuration", t: "u", A: 0 },
    2313850: { s: "DefaultDecodedFieldDuration", t: "u", A: 0 },
    2306383: { s: "TrackTimestampScale", t: "f", A: 0 },
    21375: { s: "TrackOffset", t: "i", A: 0 },
    21998: { s: "MaxBlockAdditionID", t: "u", A: 0 },
    16868: { s: "BlockAdditionMapping", t: "m", A: 1 },
    16880: { s: "BlockAddIDValue", t: "u", A: 0 },
    16804: { s: "BlockAddIDName", t: "s", A: 0 },
    16871: { s: "BlockAddIDType", t: "u", A: 0 },
    16877: { s: "BlockAddIDExtraData", t: "b", A: 0 },
    21358: { s: "Name", t: "8", A: 0 },
    2274716: { s: "Language", t: "s", A: 0 },
    2274717: { s: "LanguageBCP47", t: "s", A: 0 },
    134: { s: "CodecID", t: "s", A: 0 },
    25506: { s: "CodecPrivate", t: "b", A: 0 },
    2459272: { s: "CodecName", t: "8", A: 0 },
    29766: { s: "AttachmentLink", t: "u", A: 0 },
    3839639: { s: "CodecSettings", t: "8", A: 0 },
    3883072: { s: "CodecInfoURL", t: "s", A: 1 },
    2536e3: { s: "CodecDownloadURL", t: "s", A: 1 },
    170: { s: "CodecDecodeAll", t: "u", A: 0 },
    28587: { s: "TrackOverlay", t: "u", A: 1 },
    22186: { s: "CodecDelay", t: "u", A: 0 },
    22203: { s: "SeekPreRoll", t: "u", A: 0 },
    26148: { s: "TrackTranslate", t: "m", A: 1 },
    26277: { s: "TrackTranslateTrackID", t: "b", A: 0 },
    26303: { s: "TrackTranslateCodec", t: "u", A: 0 },
    26364: { s: "TrackTranslateEditionUID", t: "u", A: 1 },
    224: { s: "Video", t: "m", A: 0 },
    154: { s: "FlagInterlaced", t: "u", A: 0 },
    157: { s: "FieldOrder", t: "u", A: 0 },
    21432: { s: "StereoMode", t: "u", A: 0 },
    21440: { s: "AlphaMode", t: "u", A: 0 },
    21433: { s: "OldStereoMode", t: "u", A: 0 },
    176: { s: "PixelWidth", t: "u", A: 0 },
    186: { s: "PixelHeight", t: "u", A: 0 },
    21674: { s: "PixelCropBottom", t: "u", A: 0 },
    21691: { s: "PixelCropTop", t: "u", A: 0 },
    21708: { s: "PixelCropLeft", t: "u", A: 0 },
    21725: { s: "PixelCropRight", t: "u", A: 0 },
    21680: { s: "DisplayWidth", t: "u", A: 0 },
    21690: { s: "DisplayHeight", t: "u", A: 0 },
    21682: { s: "DisplayUnit", t: "u", A: 0 },
    21683: { s: "AspectRatioType", t: "u", A: 0 },
    3061028: { s: "UncompressedFourCC", t: "b", A: 0 },
    3126563: { s: "GammaValue", t: "f", A: 0 },
    2327523: { s: "FrameRate", t: "f", A: 0 },
    21936: { s: "Colour", t: "m", A: 0 },
    21937: { s: "MatrixCoefficients", t: "u", A: 0 },
    21938: { s: "BitsPerChannel", t: "u", A: 0 },
    21939: { s: "ChromaSubsamplingHorz", t: "u", A: 0 },
    21940: { s: "ChromaSubsamplingVert", t: "u", A: 0 },
    21941: { s: "CbSubsamplingHorz", t: "u", A: 0 },
    21942: { s: "CbSubsamplingVert", t: "u", A: 0 },
    21943: { s: "ChromaSitingHorz", t: "u", A: 0 },
    21944: { s: "ChromaSitingVert", t: "u", A: 0 },
    21945: { s: "Range", t: "u", A: 0 },
    21946: { s: "TransferCharacteristics", t: "u", A: 0 },
    21947: { s: "Primaries", t: "u", A: 0 },
    21948: { s: "MaxCLL", t: "u", A: 0 },
    21949: { s: "MaxFALL", t: "u", A: 0 },
    21968: { s: "mingMetadata", t: "m", A: 0 },
    21969: { s: "PrimaryRChromaticityX", t: "f", A: 0 },
    21970: { s: "PrimaryRChromaticityY", t: "f", A: 0 },
    21971: { s: "PrimaryGChromaticityX", t: "f", A: 0 },
    21972: { s: "PrimaryGChromaticityY", t: "f", A: 0 },
    21973: { s: "PrimaryBChromaticityX", t: "f", A: 0 },
    21974: { s: "PrimaryBChromaticityY", t: "f", A: 0 },
    21975: { s: "WhitePointChromaticityX", t: "f", A: 0 },
    21976: { s: "WhitePointChromaticityY", t: "f", A: 0 },
    21977: { s: "LuminanceMax", t: "f", A: 0 },
    21978: { s: "LuminanceMin", t: "f", A: 0 },
    30320: { s: "Projection", t: "m", A: 0 },
    30321: { s: "ProjectionType", t: "u", A: 0 },
    30322: { s: "ProjectionPrivate", t: "b", A: 0 },
    30323: { s: "ProjectionPoseYaw", t: "f", A: 0 },
    30324: { s: "ProjectionPosePitch", t: "f", A: 0 },
    30325: { s: "ProjectionPoseRoll", t: "f", A: 0 },
    225: { s: "Audio", t: "m", A: 0 },
    181: { s: "SamplingFrequency", t: "f", A: 0 },
    30901: { s: "OutputSamplingFrequency", t: "f", A: 0 },
    159: { s: "Channels", t: "u", A: 0 },
    32123: { s: "ChannelPositions", t: "b", A: 0 },
    25188: { s: "BitDepth", t: "u", A: 0 },
    21233: { s: "Emphasis", t: "u", A: 0 },
    226: { s: "TrackOperation", t: "m", A: 0 },
    227: { s: "TrackCombinePlanes", t: "m", A: 0 },
    228: { s: "TrackPlane", t: "m", A: 1 },
    229: { s: "TrackPlaneUID", t: "u", A: 0 },
    230: { s: "TrackPlaneType", t: "u", A: 0 },
    233: { s: "TrackJoinBlocks", t: "m", A: 0 },
    237: { s: "TrackJoinUID", t: "u", A: 1 },
    192: { s: "TrickTrackUID", t: "u", A: 0 },
    193: { s: "TrickTrackSegmentUID", t: "b", A: 0 },
    198: { s: "TrickTrackFlag", t: "u", A: 0 },
    199: { s: "TrickmTrackUID", t: "u", A: 0 },
    196: { s: "TrickmTrackSegmentUID", t: "b", A: 0 },
    28032: { s: "ContentEncodings", t: "m", A: 0 },
    25152: { s: "ContentEncoding", t: "m", A: 1 },
    20529: { s: "ContentEncodingOrder", t: "u", A: 0 },
    20530: { s: "ContentEncodingScope", t: "u", A: 0 },
    20531: { s: "ContentEncodingType", t: "u", A: 0 },
    20532: { s: "ContentCompression", t: "m", A: 0 },
    16980: { s: "ContentCompAlgo", t: "u", A: 0 },
    16981: { s: "ContentCompSettings", t: "b", A: 0 },
    20533: { s: "ContentEncryption", t: "m", A: 0 },
    18401: { s: "ContentEncAlgo", t: "u", A: 0 },
    18402: { s: "ContentEncKeyID", t: "b", A: 0 },
    18407: { s: "ContentEncAESSettings", t: "m", A: 0 },
    18408: { s: "AESSettingsCipherMode", t: "u", A: 0 },
    18403: { s: "ContentSignature", t: "b", A: 0 },
    18404: { s: "ContentSigKeyID", t: "b", A: 0 },
    18405: { s: "ContentSigAlgo", t: "u", A: 0 },
    18406: { s: "ContentSigHashAlgo", t: "u", A: 0 },
    475249515: { s: "Cues", t: "m", A: 0 },
    187: { s: "CuePoint", t: "m", A: 1 },
    179: { s: "CueTime", t: "u", A: 0 },
    183: { s: "CueTrackPositions", t: "m", A: 1 },
    247: { s: "CueTrack", t: "u", A: 0 },
    241: { s: "CueClusterPosition", t: "u", A: 0 },
    240: { s: "CueRelativePosition", t: "u", A: 0 },
    178: { s: "CueDuration", t: "u", A: 0 },
    21368: { s: "CueBlockNumber", t: "u", A: 0 },
    234: { s: "CueCodecState", t: "u", A: 0 },
    219: { s: "CueReference", t: "m", A: 1 },
    150: { s: "CueRefTime", t: "u", A: 0 },
    151: { s: "CueRefCluster", t: "u", A: 0 },
    21343: { s: "CueRefNumber", t: "u", A: 0 },
    235: { s: "CueRefCodecState", t: "u", A: 0 },
    423732329: { s: "Attachments", t: "m", A: 0 },
    24999: { s: "AttachedFile", t: "m", A: 1 },
    18046: { s: "FileDescription", t: "8", A: 0 },
    18030: { s: "FileName", t: "8", A: 0 },
    18016: { s: "FileMediaType", t: "s", A: 0 },
    18012: { s: "FileData", t: "b", A: 0 },
    18094: { s: "FileUID", t: "u", A: 0 },
    18037: { s: "FileReferral", t: "b", A: 0 },
    18017: { s: "FileUsedStartTime", t: "u", A: 0 },
    18018: { s: "FileUsedEndTime", t: "u", A: 0 },
    272869232: { s: "Chapters", t: "m", A: 0 },
    17849: { s: "EditionEntry", t: "m", A: 1 },
    17852: { s: "EditionUID", t: "u", A: 0 },
    17853: { s: "EditionFlagHidden", t: "u", A: 0 },
    17883: { s: "EditionFlagDefault", t: "u", A: 0 },
    17885: { s: "EditionFlagOrdered", t: "u", A: 0 },
    17696: { s: "EditionDisplay", t: "m", A: 1 },
    17697: { s: "Editions", t: "8", A: 0 },
    17892: { s: "EditionLanguageIETF", t: "s", A: 1 },
    182: { s: "ChapterAtom", t: "m", A: 1 },
    29636: { s: "ChapterUID", t: "u", A: 0 },
    22100: { s: "ChaptersUID", t: "8", A: 0 },
    145: { s: "ChapterTimeStart", t: "u", A: 0 },
    146: { s: "ChapterTimeEnd", t: "u", A: 0 },
    152: { s: "ChapterFlagHidden", t: "u", A: 0 },
    17816: { s: "ChapterFlagEnabled", t: "u", A: 0 },
    28263: { s: "ChapterSegmentUUID", t: "b", A: 0 },
    17800: { s: "ChapterSkipType", t: "u", A: 0 },
    28348: { s: "ChapterSegmentEditionUID", t: "u", A: 0 },
    25539: { s: "ChapterPhysicalEquiv", t: "u", A: 0 },
    143: { s: "ChapterTrack", t: "m", A: 0 },
    137: { s: "ChapterTrackUID", t: "u", A: 1 },
    128: { s: "ChapterDisplay", t: "m", A: 1 },
    133: { s: "Chaps", t: "8", A: 0 },
    17276: { s: "ChapLanguage", t: "s", A: 1 },
    17277: { s: "ChapLanguageBCP47", t: "s", A: 1 },
    17278: { s: "ChapCountry", t: "s", A: 1 },
    26948: { s: "ChapProcess", t: "m", A: 1 },
    26965: { s: "ChapProcessCodecID", t: "u", A: 0 },
    17677: { s: "ChapProcessPrivate", t: "b", A: 0 },
    26897: { s: "ChapProcessCommand", t: "m", A: 1 },
    26914: { s: "ChapProcessTime", t: "u", A: 0 },
    26931: { s: "ChapProcessData", t: "b", A: 0 },
    307544935: { s: "Tags", t: "m", A: 1 },
    29555: { s: "Tag", t: "m", A: 1 },
    25536: { s: "Targets", t: "m", A: 0 },
    26826: { s: "TargetTypeValue", t: "u", A: 0 },
    25546: { s: "TargetType", t: "s", A: 0 },
    25541: { s: "TagTrackUID", t: "u", A: 1 },
    25545: { s: "TagEditionUID", t: "u", A: 1 },
    25540: { s: "TagChapterUID", t: "u", A: 1 },
    25542: { s: "TagAttachmentUID", t: "u", A: 1 },
    26568: { s: "SimpleTag", t: "m", A: 1 },
    17827: { s: "TagName", t: "8", A: 0 },
    17530: { s: "TagLanguage", t: "s", A: 0 },
    17531: { s: "TagLanguageBCP47", t: "s", A: 0 },
    17540: { s: "TagDefault", t: "u", A: 0 },
    17588: { s: "TagDefaultBogus", t: "u", A: 0 },
    17543: { s: "Tags", t: "8", A: 0 },
    17541: { s: "Tagb", t: "b", A: 0 },
  };
  function hD(j, q) {
    bk.Ir.call(this, j, q);
    this.k6 = bk.Ir.k6;
    this.Cg = bk.Ir.Cg;
    this.q0 = bk.Ir.q0;
    this.yd = bk.Ir.yd;
    this._J = function (m) {
      return m;
    };
    this.Er = 0;
    this.data = null;
    this.start = 0;
    this.a6 = null;
    this.yj = null;
    this.aCd = 0;
    this.GS = 0;
  }
  hD.prototype.aqN = async function () {
    this.RK = new VideoDecoder({
      output: (jK) => this.q0(jK),
      error: function (m) {
        console.log(m.message);
      },
    });
    var j = { codec: this.a6 };
    if (this.yj) {
      j.description = this.yj;
    }
    var q = await VideoDecoder.isConfigSupported(j);
    if (q.supported == !0) {
      this.RK.configure(j);
    } else {
      console.log("Codec not supported.", j);
    }
  };
  hD.prototype.avu = async function () {
    if (!this.cues) return null;
    var j = this.cues[this.cues.length - 1],
      q = await e2.lE(this.s9, this.kB, this.data, this.start, j),
      m = q.timeStamp,
      n,
      G = [];
    this.Er = q.Er;
    this.data = q.data;
    this.start = q.start;
    do {
      if (q.zd && q.zd[0] == 1) {
        n = q;
        G.push(q.zd[1]);
      }
      q = await e2.cX(this.s9, this.data, this.start, this.Er);
      if (q.timeStamp) {
        m = q.timeStamp;
      }
      this.Er = q.Er;
      this.data = q.data;
      this.start = q.start;
    } while (q.Er > 0);
    if (!this.nO) {
      G.sort((ei, cP) => ei - cP);
      this.nO = Math.round((G[G.length - 1] - G[0]) / (G.length - 1));
      this.bp = 1e3 / this.nO;
    }
    this.frames = Math.floor((m + n.zd[1] + this.nO - this.aCd) / this.nO);
  };
  hD.prototype.fu = async function () {
    this.kB = await e2.VB(this.s9);
    this.afT = {};
    this.jg = {};
    this.SV = e2.getTracks(this.kB, 1);
    var j = !0;
    if (this.SV.length > 0) {
      var q = this.SV[0],
        m = q.TrackNumber,
        n = q.CodecID;
      if (q.CodecPrivate) this.yj = q.CodecPrivate;
      var G = q.Video.PixelWidth,
        W = q.Video.PixelHeight,
        k = this.kB.Segment.Info.TimestampScale,
        T = q.DefaultDuration / k;
      this.bp = 1e3 / T;
      this.nO = T;
      var b = ["V_VP8", "V_VP9", "V_MPEG4/ISO/AVC", "V_MPEGH/ISO/HEVC"],
        c = ["vp8", "vp09.00.10.08", "avc1.640034", "hvc1"],
        a = b.indexOf(n);
      if (a >= 0) this.a6 = c[a];
      if (this.a6 == "hvc1") {
        if (this.yj) {
          this.a6 = bk.aF1(this.yj);
        } else {
          this.a6 = null;
        }
      }
      console.assert(
        this.a6 != null,
        "Codec " + n.toString() + " not supported."
      );
      if (this.a6 == null) {
        j = !1;
      }
      var f = this.kB.Segment.Cues.CuePoint;
      this.cues = [];
      for (var y = 0; y < f.length; ++y) {
        for (var U = 0; U < f[y].CueTrackPositions.length; ++U) {
          if (f[y].CueTrackPositions[U].CueTrack == m) {
            this.cues.push({
              aje: f[y].CueTime,
              qO: f[y].CueTrackPositions[U],
            });
          }
        }
      }
      if (this.cues[0].aje > 0) {
        this.aCd = this.cues[0].aje;
      }
      await this.avu();
      this.xr = [];
      for (var y = 0; y < this.cues.length; ++y) {
        this.xr.push(Math.round((this.cues[y].aje - this.aCd) / this.nO));
      }
    }
    this.oh = {};
    if (j && this.SV.length > 0) {
      this.oh.YF = { SV: 1, GN: this.frames, bp: this.bp, width: G, height: W };
    }
    if (!this.k7) {
      this.fN = new OffscreenCanvas(this.oh.YF.width, this.oh.YF.height);
      this._S = this.fN.getContext("2d", { akl: !0 });
      this.I9 = 10;
      this.t6 = 6;
    }
    this.pD = !0;
  };
  1,
    0,
    (hD.prototype.lE = async function (j) {
      var q = await e2.lE(
        this.s9,
        this.kB,
        this.data,
        this.start,
        this.cues[j]
      );
      this.Er = q.Er;
      this.data = q.data;
      this.start = q.start;
      this.a5V(q);
    });
  hD.prototype.cX = async function () {
    var j;
    do {
      j = await e2.cX(this.s9, this.data, this.start, this.Er);
      this.Er = j.Er;
      this.data = j.data;
      this.start = j.start;
    } while (j.Er > 0 && j.zd[0] != 1);
    if (this.Er > 0) {
      this.a5V(j);
    }
  };
  hD.prototype.a5V = function (j) {
    var q = new EncodedVideoChunk({
      timestamp: j.zd[1],
      duration: this.nO,
      type: j.zd[2] == 1 ? "key" : "delta",
      data: j.zd[3],
    });
    if (this.RK.state == "configured") {
      try {
        this.RK.decode(q);
      } catch (gn) {
        console.log("CAUGHT unconfigured");
        console.log(gn);
        console.log(q);
      }
    } else {
      console.log("unconfigured", this.Er, j);
      delete j;
    }
    delete j;
  };
  hD.prototype.alY = async function (j, q, m) {
    var n = m * this.nO,
      G = this.xr.indexOf(q),
      W = 0,
      k;
    for (var y = q; y < m; ++y) {
      while (this.GS > 0) {
        await new Promise((resolve) => setTimeout(resolve, 50));
      }
      this.GS = 1;
      if (y == q && G >= 0) {
        await this.lE(G);
      } else {
        await this.cX();
      }
      this.GS = 0;
    }
    if (m == this.frames) {
      await new Promise((resolve) => setTimeout(resolve, 100));
      while (this.Er != 0) {
        while (this.GS > 0) {
          await new Promise((resolve) => setTimeout(resolve, 50));
        }
        this.GS = 1;
        await this.cX();
        this.GS = 0;
      }
      await this.RK.flush();
    }
  };
  var kj = (function () {
      var j,
        q,
        m,
        n,
        G,
        W,
        k = 4294967292,
        T = 4294967293,
        b = 4294967294,
        c = 4294967295;
      function a() {
        n += 1;
        return m[n - 1];
      }
      function f() {
        n += 2;
        return M.O_(m, n - 2);
      }
      function U() {
        n += 4;
        return M.dq(m, n - 4);
      }
      function Z() {
        n += 4;
        return M.YZ(m, n - 4);
      }
      function h(C) {
        return 512 + 512 * C;
      }
      function u(C) {
        return 64 * C;
      }
      function i(C, l) {
        if (C >= l.length) {
          console.log("error?");
          return [];
        }
        var v = [];
        while (C != b) {
          v.push(C);
          C = l[C];
          if (C == null) throw C;
        }
        return v;
      }
      function x(C, l, v) {
        var K = i(C, v == 64 ? W : G);
        if (l == null) l = K.length * v;
        var S = new Uint8Array(l),
          o = v == 64 ? q : j;
        for (var y = 0; y < K.length; y++) {
          var V = K[y],
            P = v == 64 ? u(V) : h(V);
          S.set(new Uint8Array(o.buffer, P, Math.min(v, l - y * v)), y * v);
        }
        return S;
      }
      function X(C, l) {
        for (var y = 0; y < C; y++) {
          var v = Z();
          if (v == c) continue;
          l.push(v);
        }
      }
      function $(C, l, v, K) {
        var S = m,
          o = n,
          d;
        m = C;
        n = l * 128;
        var V = M.a5(m, n, 32);
        n += 64;
        var P = f();
        V = V.slice(0, (P - 2) >>> 1);
        var z = a(),
          E = a();
        if (z > 5) throw "e";
        if (E > 1) throw "e";
        var A = U(),
          N = U(),
          Q = U();
        n += 16;
        if (U() != 0) throw "e";
        n += 8;
        n += 8;
        var e = U(),
          Y = U();
        if (U() != 0) throw "e";
        if (z == 1 || z == 5) {
          if (z == 5) {
            q = x(e, null, 512);
          }
          d = {};
          $(C, Q, d, K + 1);
        } else if (z == 2) {
          if (Y < 4096) d = x(e, Y, 64);
          else d = x(e, Y, 512);
        } else throw z;
        if (A != -1) $(C, A, v, K + 1);
        if (N != -1) $(C, N, v, K + 1);
        v[V] = d;
        m = S;
        n = o;
      }
      function H(C) {
        m = j = new Uint8Array(C);
        n = 0;
        var l = [208, 207, 17, 224, 161, 177, 26, 225];
        for (var y = 0; y < 8; y++) if (a() != l[y]) throw "e";
        for (var y = 0; y < 16; y++) if (a() != 0) throw "e";
        var v = f(),
          K = f();
        if (f() != -2) throw "big endian";
        if (f() != 9) throw "not 512";
        if (f() != 6) throw "not  64";
        for (var y = 0; y < 10; y++) if (a() != 0) throw "e";
        var S = U(),
          o = U();
        if (U() != 0) throw "e";
        if (U() != 4096) throw "e";
        var V = U(),
          P = U(),
          z = U(),
          E = U(),
          A = [];
        X(109, A);
        for (var y = 0; y < E; y++) {
          n = h(z);
          X(127, A);
          z = U();
        }
        if (A.length != S) throw "e";
        G = [];
        for (var y = 0; y < S; y++) {
          n = h(A[y]);
          for (var N = 0; N < 128; N++) {
            var Q = Z();
            G.push(Q);
          }
        }
        W = [];
        for (var y = 0; y < P; y++) {
          if (isNaN(V)) throw "e";
          n = h(V);
          for (var N = 0; N < 128; N++) {
            var Q = Z();
            W.push(Q);
          }
          V = G[V];
        }
        var e = x(o, null, 512),
          Y = {};
        $(e, 0, Y, 0);
        return Y["Root Entry"];
      }
      return { parse: H };
    })(),
    L = {};
  L.IC = function (j) {
    return window.devicePixelRatio || 1;
  };
  L.vp = function (j, q) {
    return ((q.a2_ == "touch" ? 12 : 8) * L.IC()) / j.I.k3;
  };
  L.OZ = function () {
    var j =
        "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAfAgMAAABiwP6qAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAlQTFRFAAAAAAAA////g93P0gAAAAN0Uk5TAP//RFDWIQAAACxJREFUeJxjYGBgYHVggAA2ujNCQ0PDgDiEIWvVqpWrVq1aghAZEPcwQEMDAMwiEgB+z9L1AAAAAElFTkSuQmCC",
      q = L.IC(),
      m = 15.5 / q;
    return "image-set(url('" + j + "') " + q + "x) " + m + " " + m + ",auto";
  };
  L.ju = function (j, q, m) {
    this.name = j;
    this.id = q;
    this.AS = null;
    if (m != null) this.af = m;
  };
  L.ju.prototype.BT = function (j, q, m, n, G) {};
  L.ju.prototype.enable = function (j, q, m, n, G, W) {
    var k = new fd(_.E.c, !0);
    k.data = { R: _.Y.t5, $U: "default" };
    q.k(k);
  };
  L.ju.prototype.disable = function (j, q, m, n, G) {};
  L.ju.prototype.abM = function (j, q, m, n, G) {
    return !1;
  };
  L.ju.prototype.oo = function (j, q, m, n, G) {};
  L.ju.prototype.DC = function (j, q, m, n, G) {};
  L.ju.prototype.C3 = function (j, q, m, n, G) {};
  L.ju.prototype.H_ = function (j, q, m, n, G, W) {};
  L.ju.prototype.FO = function (j, q, m, n, G) {};
  L.ju.prototype.uY = function (j, q, m, n) {};
  L.ju.prototype.yc = function (j, q, m, n) {};
  L.ju.prototype.km = function (j, q) {};
  L.ju.prototype.W6 = function (j, q) {};
  L.ju.prototype._W = function (j) {
    return 0;
  };
  L.ju.prototype.uS = function (j, q, m, n, G) {};
  L.ju.prototype.yp = function (j, q) {};
  L.ju.prototype.oa = function (j, q) {
    return !1;
  };
  L.ju.prototype.wr = function (j, q) {
    return !1;
  };
  L.ju.prototype.bx = function () {
    return !1;
  };
  L.ju.prototype.xM = function (j, q) {
    return !0;
  };
  L.ju.prototype.rm = function () {
    return null;
  };
  L.ju.prototype.ui = function (j, q, m) {};
  L.ju.prototype.a3D = function () {
    return !1;
  };
  L.ju.prototype.Yg = function (j, q, m, n) {};
  L.ju.prototype.track = function (j) {
    var q = new fd(_.E.NI, !0);
    q.data = j;
    j.cV = !0;
    this.AS.k(q);
  };
  L.ju.G0 = function (j, q, m, n) {
    var G = 10 * L.IC() * (j.a2_ == "touch" ? 2 : 1),
      W = j.x + G,
      k = j.y - G,
      T = B.uO.G7(q.r, m.zv, n, m.r, !0),
      b = B.uO.G7(q.$, m.zv, n, m.$, !0);
    while (T.length < b.length) T = " " + T;
    while (T.length > b.length) b = " " + b;
    L.ju.i_(
      W,
      k,
      [
        g$.get([12, 41]).charAt(0) + ": " + T,
        g$.get([12, 42]).charAt(0) + ": " + b,
      ],
      m
    );
  };
  L.ju.i_ = function (j, q, m, n) {
    function G(c, u, i, x, X, $) {
      c.beginPath();
      c.moveTo(u, i + $);
      c.arcTo(u, i + X, u + $, i + X, $);
      c.arcTo(u + x, i + X, u + x, i + X - $, $);
      c.arcTo(u + x, i, u + x - $, i, $);
      c.arcTo(u, i, u, i + $, $);
    }
    var W = L.IC(),
      k = Math.round,
      T = k(11 * W),
      b = L.ju.avt,
      a = 0;
    if (b == null) b = L.ju.avt = document.createElement("canvas");
    var c = b.getContext("2d");
    c.font = T + "px monospace";
    for (var y = 0; y < m.length; y++)
      a = Math.max(a, c.measureText(m[y]).width);
    var f = k(a + 12 * W),
      U = k((m.length * 14 + 5) * W),
      Z = new hk(j, q - U, f, U);
    if (b.width != f || b.height != U) {
      b.width = f;
      b.height = U;
      c.font = T + "px monospace";
    }
    c.clearRect(0, 0, f, U);
    c.fillStyle = "rgba(0,0,3,0.8)";
    G(c, 0, 0, f, U, k(4 * W));
    c.fill();
    c.fillStyle = "rgba(255,255,255,1)";
    for (var y = 0; y < m.length; y++)
      c.fillText(m[y], k(6 * W), k((y + 1) * 13 * W));
    var h = [c.getImageData(0, 0, f, U).data, Z.P()];
    if (n) n.W.Z9 = [h];
    return h;
  };
  L.ju.avt = null;
  L.ju.a2$ = function (j, q, m, n) {
    if (q) this.AS = q;
    var G = this.aGm;
    if (j) G = [j.r, j.$, j.zv];
    if (m && G) G[3] = m.q1.WH;
    this.aGm = G;
    var W = new fd(_.E.c, !0);
    W.data = { R: _.Y.vv, l: this.id, Bm: G };
    if (this.AS) this.AS.k(W);
  };
  L.ju.rp = function (j) {
    j.prototype.yc = L.ju.a2$;
    j.prototype.yp = function (q, m) {
      if (m == fG.Tz || m == fG.HN) this.yc(null, null, q, null);
    };
  };
  L.Lx = "0";
  L.ag = "1";
  L.aee = "2";
  L.atR = "3";
  L.Eb = "5";
  L.aG1 = "6";
  L.a4q = "7";
  L.eu = "8";
  L.Ct = "9";
  L.aC = "10";
  L.N5 = "11";
  L.Y8 = "12";
  L.IL = "13";
  L.JF = "14";
  L.a0a = "15";
  L.VO = "16";
  L.J6 = "18";
  L.Su = "19";
  L.a8t = "90";
  L.DX = "20";
  L.P6 = "21";
  L.qt = "22";
  L.cS = "23";
  L.$o = "24";
  L.yK = "25";
  L.A7 = "27";
  L.Ij = "31";
  L.T1 = "32";
  L.arj = "33";
  L.Dz = "34";
  L.agp = "35";
  L.Mx = "36";
  L.Bd = "37";
  L.Ro = "38";
  L.pA = "39";
  L.kS = "40";
  L.mU = "41";
  L.iR = "42";
  L.Gd = "43";
  L.a8s = "44";
  L.amS = "45";
  L.aI5 = "46";
  L.aqw = "72";
  L.G_ = "47";
  L.MD = "48";
  L.Nj = "51";
  L.Cl = "52";
  L.HO = "54";
  L.ZR = "55";
  L.Zo = "56";
  L.lp = "57";
  L.Yz = "58";
  L.C9 = "59";
  L.H0 = "60";
  L.R2 = "61";
  L.Be = "70";
  L.eO = "71";
  L.aI_ = "73";
  L.Fg = "100";
  L.IX = "101";
  L.I6 = "102";
  L.ii = "103";
  L.Bb = "120";
  L.v7 = "121";
  L.Oi = "122";
  L.vP = "230";
  L.aoM = "231";
  L.cJ = "232";
  L.W1 = "233";
  L.EJ = "234";
  L.b_ = "235";
  L.lt = "236";
  L.FW = {};
  L.FW[L.cS] = "tools/brush";
  L.FW[L.$o] = "tools/pencil";
  L.FW[L.Ij] = "tools/eraser";
  L.FW[L.G_] = "tools/htype";
  L.Rt = {
    PcTl: L.$o,
    PbTl: L.cS,
    moveTool: L.Lx,
    cloneStampTool: L.A7,
    typeCreateOrEditTool: L.G_,
    artboardTool: L.Be,
    marqueeRectTool: L.ag,
    typeVerticalCreateOrEditTool: L.MD,
    perspectiveCropTool: L.N5,
    marqueeEllipTool: L.aee,
    eyedropperTool: L.JF,
    eraserTool: L.Ij,
    pathComponentSelectTool: L.Nj,
    lassoTool: L.Eb,
    backgroundEraserTool: L.T1,
    directSelectTool: L.Cl,
    polySelTool: L.aG1,
    rectangleTool: L.HO,
    magneticLassoTool: L.a4q,
    gradientTool: L.Dz,
    quickSelectTool: L.eu,
    bucketTool: L.agp,
    ellipseTool: L.ZR,
    magicWandTool: L.Ct,
    blurTool: L.Mx,
    polygonTool: L.Zo,
    cropTool: L.aC,
    sharpenTool: L.Bd,
    lineTool: L.lp,
    sliceTool: L.Y8,
    smudgeTool: L.Ro,
    customShapeTool: L.Yz,
    sliceSelectTool: L.IL,
    dodgeTool: L.pA,
    spotHealingBrushTool: L.J6,
    burnInTool: L.kS,
    saturationTool: L.mU,
    penTool: L.iR,
    redEyeTool: L.qt,
    freeformPenTool: L.Gd,
    rulerTool: L.VO,
    paintbrushTool: L.cS,
    handTool: L.C9,
    pencilTool: L.$o,
    zoomTool: L.R2,
    objectSelectTool: L.atR,
    healingBrushTool: L.Su,
    patchTool: L.DX,
    contentAwareMoveTool: L.P6,
    colorReplacementBrushTool: L.yK,
    curvaturePenTool: L.a8s,
    rotareViewTool: L.H0,
  };
  L.tt = function (j, q, m) {
    L.ju.call(this, j, q, m);
    this.TX = {
      brush: j ? fc.vM() : null,
      bmode: "norm",
      opacity: 1,
      flow: 1,
      smth: 0,
      samp: 0,
      emode: 0,
      wconf: [40, !0, !0],
      sall: !1,
      algnd: !1,
      sfrom: 0,
      alt: [!1],
      expo: 0.5,
      rng: 1,
      strn: 0.5,
      pdetail: !0,
      smode: 1,
      qsmode: 0,
      setop: 0,
      patch: 0,
    };
    this.a = null;
    this.ok = null;
    this.Et = null;
    this.gn = null;
    this.l$ = null;
    this.Oc = null;
    this.t4 = null;
    this.FM = null;
    this.Zz = null;
    this.iH = null;
    this.fU = null;
    this.Go = null;
    this.hF = null;
    this.eG = 1;
    this.B8 = !1;
    this.zO = !1;
    this.Qs = null;
    this.MF;
    this.caller = null;
  };
  L.tt.prototype = new L.ju();
  L.tt.prototype.wr = function (j, q) {
    return j.qT && q.M(gn.X6);
  };
  L.tt.prototype.DC = function (j, q, m, n, G) {
    if (n.M(gn.O4)) {
      this.Oc = new ea(G.x, G.y);
      var W = this.TX.brush.Brsh.v,
        k = W.Dmtr.v.val,
        T = W.Hrdn != null ? W.Hrdn.v.val : -1;
      this.t4 = [k, T, !0, B.S(this.TX.brush), G];
      this.Vn(m);
    }
  };
  L.tt.prototype.UI = function (j, q, m) {
    var n = this.t4,
      G = j.I.k3,
      W = m.x - n[4].x,
      k = m.y - n[4].y,
      T = n[0],
      b = n[1],
      c = Math.abs(W) > Math.abs(k);
    if (c && n[2]) {
      var a = Math.round((2 * W) / G);
      T += a;
      m.x -= W - 0.5 * a * G;
    }
    if (!c && !n[2] && b != -1) {
      var a = Math.round(0.25 * k);
      b += a;
      m.y -= k - 4 * a;
    }
    T = Math.max(1, T);
    b = n[1] == -1 ? -1 : Math.max(0, Math.min(100, b));
    var f = n[3];
    f.Brsh.v.Dmtr.v.val = T;
    if (b != -1) f.Brsh.v.Hrdn.v.val = b;
    this.t4 = [T, b, c, f, m];
    var U = e4.Ei(f, q.AU.cd, G),
      Z = U[1];
    Z.x = Math.round(this.Oc.x - Z.r / 2);
    Z.y = Math.round(this.Oc.y - Z.$ / 2);
    j.W.eT = [U];
    var h = j.I.sb(this.Oc.x, this.Oc.y);
    j.W.QV = { _a: [], FU: [h.x - T / 2, h.y, h.x + T / 2, h.y] };
    if (b != -1)
      j.W.QV.FU.push(h.x + 50 / G, h.y - b / 2, h.x + 50 / G, h.y + b / 2);
    j._F = !0;
  };
  L.tt.prototype.FO = function (j, q, m, n, G) {
    if (this.id == L.DX || this.id == L.P6) return;
    if (this.Oc) {
      this.Oc = null;
      this.gO(B.S(this.t4[3]));
      j.W.eT = [];
      j.W.QV = null;
      j._F = !0;
      return;
    }
    var W = new fd(_.E.c, !0);
    W.data = {
      R: _.Y.vv,
      l: this.id,
      aET: "showBrushOpts",
      yw: new ea(G.uA + 4, G.Ql),
    };
    q.k(W);
  };
  L.tt.prototype.gO = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = { R: _.Y.fh, rw: fG.ww, YP: j };
    this.caller.k(q);
  };
  L.tt.QQ = function (j, q, m, n, G, W) {
    if (j == null) j = "FrgC";
    if (q == null) q = "norm";
    if (m == null) m = 1;
    if (G == null) G = !1;
    var k = {
      classID: "Fl",
      Usng: { t: "enum", v: { FlCn: j } },
      Opct: { t: "UntF", v: { type: "#Prc", val: Math.round(m * 100) } },
      PrsT: { t: "bool", v: G },
      Md: { t: "enum", v: { BlnM: kJ.il(q) } },
    };
    if (j == "Clr") k.Clr = { t: "Objc", v: n };
    if (j == "contentAware")
      k.contentAwareColorAdaptationFill = { t: "bool", v: !0 };
    if (j == "Ptrn") k.Ptrn = { t: "Objc", v: W };
    return { _D: "fill", SC: k };
  };
  L.tt.prototype.BT = function (j, q, m, n, G) {
    this.AS = q;
    var W = m.y2.length,
      k = W != 0 ? -1 - m.y2[0] : m.J[0],
      T = m.U[k],
      b = T && T.add.SoLd && T.add.SoLd.generativeDocInfo,
      c =
        j.R == "fromAction" &&
        j.tp &&
        j.tp.SC &&
        JSON.stringify(j.tp.SC).indexOf("aiHeal") != 1;
    if (W == 0 && !c && !m.Ph(q)) return;
    if (j.R == "fromAction") {
      var a = j.tp,
        f = a.SC;
      if (f && f.null && f.null.v[0] && f.null.v[0].v.classID == "Path") {
        var U = m.ac(),
          Z = U[0],
          h = U[1],
          u = Z[h.length == 0 ? 0 : h[0]].add.vmsk;
        if (a._D == "fill") {
          var i = u.ex(),
            x = G.UP,
            X = this.TX,
            $ = (x >> 16) & 255,
            H = (x >> 8) & 255,
            C = (x >> 0) & 255;
          this.En(
            m,
            T,
            i,
            $,
            H,
            C,
            Math.round(X.opacity * 255),
            X.bmode,
            "Fill Path"
          );
        } else {
          var l = f && f.Prs && f.Prs.v,
            v = JSON.stringify(this.TX.brush);
          if (l) fc.aeR(this.TX.brush, [!1, !0]);
          var K = Date.now();
          for (var S = 0; S < 1e3; S++) {
            var o = B.z.kH(u.D, S, !0);
            if (o == -1) {
              this.H_(m, q, G, n, null);
              break;
            }
            var V = u.D[o],
              P = u.D.slice(o, o + 1 + V.length),
              z = B.b.bh(P, 2).L,
              E = z.slice(0, 8);
            for (var A = 8; A < z.length; A += 6)
              E.push(
                z[A - 2],
                z[A - 1],
                z[A],
                z[A + 1],
                z[A + 2],
                z[A + 3],
                z[A + 4],
                z[A + 5]
              );
            var N = {};
            N.Points = E;
            N.TextOnPathTRange = u.PG.slice(0);
            var N = gu.gg(N, 2, V.e == 3),
              Q = N[0],
              e = m.I.gS(Q[0], Q[1]);
            if (l) e.vV = 0;
            if (S == 0) this.oo(m, q, G, n, e);
            else this.ok.moveTo(Q[0], Q[1], l ? 0 : null);
            var Y = Q.length,
              d = V.e == 0 ? Y + 2 : Y;
            for (var y = 2; y < d; y += 2) {
              e = m.I.gS(Q[y % Y], Q[(y + 1) % Y]);
              e.qT = !0;
              if (l) {
                var I = y / d;
                e.vV = 2 * Math.min(I, 1 - I);
              }
              this.C3(m, q, G, n, e, this.TX.flow);
            }
            this.ok.finish();
            this.Am(m);
          }
          console.log(Date.now() - K);
          if (l) this.TX.brush = JSON.parse(v);
        }
      } else if (a._D == "fill") {
        var O = f.PrsT ? f.PrsT.v : !1,
          s = T ? T.add.lspf : 0;
        if (O && T) {
          T.add.lspf = s == null ? 1 : s | 1;
        }
        var p = (f.Opct ? f.Opct.v.val : 100) / 100,
          F = f.Md ? kJ.l7(f.Md.v.BlnM) : "norm";
        p = Math.round(255 * p);
        var g = f.Usng.v.FlCn;
        if (g == "contentAware" || g == "aiHeal") {
          if (m.h == null && !b) {
            alert("Select an area to heal first.");
            return;
          }
          var w = m.h;
          if (g == "aiHeal" && !c9.$m(m)) return;
          if (g == "contentAware") {
            this.g5(m);
            this.w7(m, 0);
            var r = B.j(w.H.C() * 4);
            B.ln(w.N, r, 3);
            this.xU(m, "sheal", r, w.H, w.H);
            this.gF(m, w.H);
            this.finish(m, w.H);
          } else {
            this.I7 = m;
            this.a = G;
            var eQ = c9.jP(G, 3),
              t = function () {
                this.MF = f.prmt.v;
                c9.abc(this.MF, eQ, m, this.ae2.bind(this), f.rw);
                var a7 = new fd(_.E.c, !0);
                a7.data = { R: _.Y.gu, r8: "Processing ..." };
                q.k(a7);
                this.caller = q;
              }.bind(this);
            if (eQ || c9.N1(3)) t();
            else c9.$Q(t);
          }
        } else if (g == "Ptrn") {
          var dq = G.wP,
            D = m.h ? m.h.H.P() : new hk(0, 0, m.r, m.$),
            ha = B.j(D.C() * 4);
          dS.oO(f, ha, D, dq, new ea(0, 0));
          for (var y = 0; y < ha.length; y += 4) ha[y + 3] = p;
          this.oI(m, T, m.h, ha, F, [6, 48, 0, 2]);
        } else {
          var x;
          if (g == "FrgC") x = G.UP;
          else if (g == "BckC") x = G.vH;
          else if (g == "Blck") x = 0;
          else if (g == "Wht") x = 16777215;
          else if (g == "Gry") x = 8421504;
          else if (g == "Clr") {
            var am = B.MV.xH(f.Clr.v);
            x = (am.o << 16) | (am.i << 8) | am.X;
          }
          var $ = (x >> 16) & 255,
            H = (x >> 8) & 255,
            C = (x >> 0) & 255;
          this.En(m, T, m.h, $, H, C, p, F, [2, 3]);
        }
        if (O && T) {
          T.add.lspf = s == null ? 0 : s;
        }
      } else if (a._D == "delete") {
        var k4 = k < 0 ? 1 : T.ma,
          w = m.h,
          eJ;
        if (w == null) return;
        var aA =
            k < 0
              ? m._E[-k - 1]
              : k4 <= 0
              ? null
              : k4 == 1
              ? T.ex()
              : T.xE(m).x7,
          D = k4 <= 0 ? T.H : aA.H,
          ex = k4 <= 0 ? w.H.TM(D) : w.H.P();
        if (ex.jG()) return;
        var ac = ex.C();
        if (k4 <= 0) {
          eJ = B.j(ac * 4, m.depth);
          B.M4(T.buffer, T.H, eJ, ex);
        } else {
          eJ = B.j(ac, m.depth);
          aA.extend(ex);
          B.sN(aA.N, aA.H, eJ, ex);
        }
        if (0 <= k && T.i6(m, w)) {
          if (k4 <= 0) {
            eJ.fill(0);
            B.M4(T.k2.gX, T.k2.M5, eJ, ex);
          } else {
            eJ.fill(255);
            B.sN(T.k2.gX, T.k2.M5, eJ, ex);
          }
        } else {
          if (k4 <= 0) {
            var h$ = B.j(eJ.length >> 2, m.depth);
            B.Ih(eJ, h$, 3);
            B.G.SH(B.j(w.H.C(), m.depth), w.H, h$, ex, w.N, ex, 1);
            B.ln(h$, eJ, 3);
          } else {
            var da = B.j(w.H.C(), m.depth),
              $ = (G.vH >>> 16) & 255,
              H = (G.vH >> 8) & 255,
              C = (G.vH >> 0) & 255;
            da.fill(Math.round(B.he($, H, C)));
            B.G.SH(da, w.H, eJ, ex, w.N, ex, 1);
          }
        }
        this.RY(m, !0, [2, 2], k, k4, ex, eJ);
      }
    }
    if (j.R == "stroke") {
      var bb = j.aqh,
        w = m.h;
      if (w == null) {
        w = { H: T.H.P(), N: B.j(T.H.C()) };
        B.Ih(T.buffer, w.N, 3);
      }
      var gb = dS.J8(bb),
        fM = L.pI.aFO(w, Math.ceil(gb[0]), Math.ceil(gb[1])),
        x = B.MV.xH(bb.Clr.v),
        $ = Math.round(x.o),
        H = Math.round(x.i),
        C = Math.round(x.X);
      this.En(
        m,
        T,
        fM,
        $,
        H,
        C,
        Math.round((255 * bb.Opct.v.val) / 100),
        kJ.l7(bb.Md.v.BlnM),
        [14, 9]
      );
    }
    if (j.R == "fillBMP") {
      this.oI(m, T, m.h, j.u2, j.aM, j.ER);
    }
    if (j.R == "draw") {
      var kS = j.kJ,
        cY = kS.H;
      this.g5(m);
      var cS = m.U[m.J[0]];
      if (j.a0W && cS && cS.ma <= 0 && m.y2.length == 0) {
        cY = L.zl.a1l(kS, m);
        cS.buffer = kS.buffer.slice(0);
        cS.H = cY.P();
      } else {
        var k3 = this.TX.bmode,
          di = this.TX.opacity;
        this.TX.bmode = "norm";
        this.TX.opacity = 1;
        this.xU(m, "draw", kS.buffer, cY, cY.TM(new hk(0, 0, m.r, m.$)));
        this.TX.bmode = k3;
        this.TX.opacity = di;
      }
      this.gF(m, cY);
      m.qB = !0;
      this.finish(m, cY, j.ER, j.a0W);
    }
  };
  L.tt.prototype.ae2 = function (j) {
    var q = j.target.response,
      m = new Uint8Array(q);
    if (this.a47) {
      this.a47 = !1;
      q = gh.vG(M.K6(m));
    } else if (m[0] == 123) {
      var n = JSON.parse(M.K6(m)),
        y = 0;
      console.log(n);
      if (n.status == "error") {
        alert(n.message.prompt[0]);
        return;
      }
      var G = n.image_links;
      if (G == null) G = n.output;
      var W = G[0],
        k = new XMLHttpRequest();
      k.responseType = "arraybuffer";
      while (!0) {
        var T = new XMLHttpRequest();
        T.open("HEAD", W, !1);
        T.send();
        if (T.status != 404) break;
        console.log("not ready");
        y++;
      }
      k.open("GET", W, !0);
      k.onload = this.ae2.bind(this);
      this.a47 = !0;
      k.send();
      return;
    }
    if (q == null || q.byteLength == 0) {
      alert("An error occured.");
      var b = new fd(_.E.c, !0);
      b.data = { R: _.Y.dO, r8: "Processing ..." };
      this.caller.k(b);
      return;
    }
    var c = gh.v1.LN(q)[0],
      a = new Uint8Array(c.data),
      f = this.I7,
      U = c9.NN(f)[0],
      Z = c9.NN(f)[1];
    this.I7 = null;
    var h = U.r / c.Iu.r;
    if (h > 1.1) {
      var u = L.Dq.Ve([a, c.Iu], new k$(h, 0, 0, h, 0, 0));
      a = u.buffer;
    }
    var i = f.U[f.J[0]],
      x = i.add.SoLd && f.h == null,
      X = x ? i.ex() : f.h,
      $ = B.j(U.C() * 4);
    B.M4(B.sL(f.ht(), 8), new hk(0, 0, f.r, f.$), $, U);
    var H = B.j(U.C());
    B.sN(B.sL(X.N, 8), X.H, H, U);
    B.round(H);
    var C = new Uint32Array($.buffer),
      l = new Uint32Array(a.buffer);
    for (var y = 0; y < C.length; y++) if (H[y] == 0) l[y] = C[y];
    B.iL.AC(a, H, U, null, 500 * (1 + Z));
    var b = new fd(_.E.c, !0);
    b.data = { R: _.Y.dO, r8: "Processing ..." };
    this.caller.k(b);
    if (x) {
      var b = new fd(_.E.w, !0);
      b.l = L.W1;
      b.data = { R: R.hA, K: [a, U], ajW: this.MF };
      this.caller.k(b);
    } else {
      var v = new fb(this.MF),
        q = X.H.TM(new hk(0, 0, f.r, f.$));
      v.r = q.r;
      v.$ = q.$;
      v.zv = f.zv;
      v.U.push(v.to());
      var i = v.dj();
      i.H = q.P();
      v.U.push(i);
      i.tV(this.MF);
      i.buffer = B.j(i.H.C() * 4);
      B.M4(a, U, i.buffer, i.H);
      i.H.x = i.H.y = 0;
      i = v.dj();
      i.tV("Variations");
      i.add.lsct = hQ.WR;
      i.hz = "pass";
      i.uZ = 24;
      v.U.push(i);
      v.gF();
      var b = new fd(_.E.w, !0);
      b.data = { R: R.YK, fg: v };
      b.l = L.W1;
      this.caller.k(b);
      i = f.U[f.J[0]];
      var K = i.add.SoLd;
      K.generativeDocInfo = {
        t: "Objc",
        v: {
          classID: "generativeDocInfo",
          Vrsn: { t: "long", v: 1 },
          workflow: { t: "long", v: 0 },
        },
      };
      L.YE.BY(f, f.J, null, [q.x - i.H.x, q.y - i.H.y]);
      i.x7 = new R.T0();
      i.x7.color = 0;
      i.x7.H = f.h.H.P();
      i.x7.N = f.h.N.slice(0);
      f.gF();
      b = new fd(_.E.NI, !0);
      b.data = L.pI.TP();
      this.caller.k(b);
      b = new fd(_.E.c);
      b.data = { R: _.Y.UN, kO: bI.Fb.Hy };
      this.caller.k(b);
    }
    if (c9.jP(this.a, 3) == null) c9.ai("Inpaint", 3);
  };
  L.tt.prototype.En = function (j, q, m, n, G, W, k, T, b) {
    var c = m == null ? new hk(0, 0, j.r, j.$) : m.H,
      a = B.j(c.C() * 4, j.depth);
    if (j.depth == 8) B.bs(a, (k << 24) | (W << 16) | (G << 8) | (n << 0));
    else {
      var f = B.TN(j.depth) / 255;
      for (var y = 0; y < a.length; y += 4) {
        a[y] = n * f;
        a[y + 1] = G * f;
        a[y + 2] = W * f;
        a[y + 3] = k * f;
      }
    }
    this.oI(j, q, m, a, T, b);
  };
  L.tt.prototype.oI = function (j, q, m, n, G, W) {
    var k = j.y2.length != 0 ? -1 - j.y2[0] : j.J[0],
      T = k < 0 ? 1 : q.ma,
      b = k < 0 ? j._E[-1 - k] : T <= 0 ? null : T == 1 ? q.ex() : q.xE(j).x7,
      c = T <= 0 ? q.H : b.H,
      a = m == null ? new hk(0, 0, j.r, j.$) : m.H,
      f;
    if (m) f = m.N;
    else {
      f = B.j(j.r * j.$, j.depth);
      f.fill(B.TN(j.depth));
    }
    if (m != null) B.w6(f, n);
    var U = a.C(),
      Z = B.j(U * 4, j.depth);
    if (T <= 0) B.M4(q.buffer, q.H, Z, a);
    else {
      b.extend(a);
      Z.fill(255);
      B.QZ(b.pC(a), Z);
    }
    if (0 <= k && m && q.i6(j, m) && T <= 0) {
      var h = q.k2.DL,
        u = q.k2.DL.slice(0);
      if (T <= 0) B.wV(n, u);
      else B.wV(fullc, u);
      var i = new eN([2, 3], this);
      i.data = { R: "drawtemp", v: j.J[0], mY: T, atw: h, a2Z: u };
      j.Du(i);
      this.km(i.data, j);
    } else {
      if (T <= 0) {
        var x;
        if (q.op(0)) {
          x = B.j(a.C(), j.depth);
          B.Ih(Z, x, 3);
        }
        B.G.Jg(G, n, a, Z, a, a, 1);
        if (q.op(0)) B.ln(x, Z, 3);
      } else {
        B.G.Jg(G, n, a, Z, a, a, 1);
        var X = B.j(U, j.depth);
        B.P2(Z, X);
        Z = X;
      }
      this.RY(j, !0, W, k, T, a, Z);
    }
  };
  L.tt.prototype.oa = function (j) {
    if (gn.xx.indexOf(j) != -1) return !0;
    return !1;
  };
  L.tt.prototype.uY = function (j, q, m, n) {
    var G = this.TX.brush,
      W = n.M(gn.O4),
      k = n.axe(),
      T = W != this.B8,
      b = k != this.zO;
    this.B8 = W;
    this.zO = k;
    var c = L.tt.s6(G, n);
    if (c != null) this.gO(c);
    if (!n.M(gn.A8) && n.TC() != -1 && this.id != L.yK) {
      var a = gn.aaZ(Math.round(this.TX.opacity * 100), n.TC()) / 100;
      this.Ut({ opacity: a }, q);
    }
    if (this.id == L.eu && T && j != null) {
      var f = this.TX.qsmode;
      if (f == 2) f = j.h == null ? 0 : 1;
      else f = 2;
      this.Ut({ qsmode: f }, q);
    }
    if (T || b) {
      if (j) this.eG = j.I.k3;
      this.Vn(m, n);
    }
  };
  L.tt.s6 = function (j, q) {
    var m = j.Brsh.v.Dmtr.v.val,
      n = j.Brsh.v.Hrdn != null ? j.Brsh.v.Hrdn.v.val : -1,
      G = j.Brsh.v.Angl.v.val,
      W = m,
      k = n,
      T = G,
      b = q.M(gn.X6);
    if (q.M(gn.Z7)) {
      if (b) n = 25 * Math.floor((n - 1) / 25);
      else {
        if (m <= 10) m--;
        else if (m <= 50) m = 5 * Math.floor((m - 1) / 5);
        else if (m <= 100) m = 10 * Math.floor((m - 1) / 10);
        else if (m <= 200) m = 25 * Math.floor((m - 1) / 25);
        else if (m <= 400) m = 50 * Math.floor((m - 1) / 50);
        else m = 100 * Math.floor((m - 1) / 100);
      }
    }
    if (q.M(gn.UZ)) {
      if (b) n = 25 * Math.ceil((n + 1) / 25);
      else {
        if (m < 10) m++;
        else if (m < 50) m = 5 * Math.ceil((m + 1) / 5);
        else if (m < 100) m = 10 * Math.ceil((m + 1) / 10);
        else if (m < 200) m = 25 * Math.ceil((m + 1) / 25);
        else if (m < 400) m = 50 * Math.ceil((m + 1) / 50);
        else m = 100 * Math.ceil((m + 1) / 100);
      }
    }
    var c = q.M(gn.MN),
      a = q.M(gn.Al);
    if (b && (c || a)) {
      G = (G + 360 + 15 * (c ? 1 : -1)) % 360;
    }
    m = Math.max(1, m);
    n = Math.max(0, Math.min(100, n));
    if (k == -1) n = -1;
    if (m != W || n != k || G != T) {
      var f = B.S(j);
      f.Brsh.v.Dmtr.v.val = m;
      f.Brsh.v.Angl.v.val = G;
      if (k != -1) f.Brsh.v.Hrdn.v.val = n;
      return f;
    }
    return null;
  };
  L.tt.prototype.Vn = function (j, q, m, n) {
    if (j.AU.list.length == 0) return;
    var G = this.id,
      W;
    if (
      (G == L.A7 || G == L.Su || G == L.cS || G == L.$o) &&
      ((q != null && q.M(gn.O4)) || this.TX.alt[0])
    )
      W = "crosshair";
    else {
      var k = this.eG,
        T = this.TX.brush;
      if (
        (G == L.A7 || G == L.Su) &&
        m &&
        this.Go &&
        this.Go.length == this.fU.C() * 4
      ) {
        var b = m.I.sb(n.x, n.y),
          c = this.anb(b),
          a = this.Go,
          f = this.fU,
          U = new hk(f.x + c.x, f.y + c.y, f.r, f.$),
          Z = e4.Ei(T, j.AU.cd, k),
          h = Z[0],
          u = Z[1],
          i = Math.ceil(u.r / k),
          x = new hk(Math.round(b.x - i / 2), Math.round(b.y - i / 2), i, i),
          X = B.j(x.C() * 4),
          $,
          H;
        if (m.depth == 8) B.M4(a, U, X, x);
        else {
          var C = B.j(x.C() * 4, m.depth);
          B.M4(a, U, C, x);
          X = B.sL(C, 8);
        }
        if (k == 1) {
          $ = X;
          H = x;
        } else {
          var l = new k$(k, 0, 0, k, 0, 0),
            v = L.Dq.Ve([X, x], l, !0);
          H = u.P();
          H.x = v.H.x;
          H.y = v.H.y;
          if (H.Lg(v.H)) $ = v.buffer;
          else {
            $ = B.j(H.C() * 4);
            B.M4(v.buffer, v.H, $, H);
          }
        }
        var K = this.TX.opacity / 255;
        for (var y = 0; y < $.length; y += 4)
          $[y + 3] = K * (h[y + 3] * $[y + 3]);
        e4.lO(new Uint32Array($.buffer), H, 4278190080, 4294967295);
        W = { NP: $, HA: H, Ly: new ea(H.r / 2, H.$ / 2) };
      } else {
        W = e4.EN(T, j.AU.cd, k, G == L.yK || G == L.T1);
        if (this.zO) {
          W.NP.fill(0);
          e4.lO(new Uint32Array(W.NP.buffer), W.HA, 4278190080, 4294967295);
        }
      }
    }
    var S = new fd(_.E.c, !0);
    S.data = { R: _.Y.t5, $U: W };
    if (this.caller) this.caller.k(S);
  };
  L.tt.prototype.enable = function (j, q, m, n) {
    this.a = m;
    this.caller = q;
    this.gO(B.S(this.TX.brush));
    if (j && j.I.k3 != 0) this.eG = j.I.k3;
    this.zO = n.axe();
    this.Vn(m, n);
  };
  L.tt.prototype.yp = function (j, q) {
    if (q == fG.ww) {
      this.TX.brush = j.AU.Kw;
      this.Vn(j);
    }
  };
  L.tt.prototype.uS = function (j, q, m, n, G) {
    for (var W in j) this.TX[W] = j[W];
    if (this.TX.alt[0]) this.Vn(G, n, m);
  };
  L.tt.prototype.abA = function (j) {
    var q = j.y2.length != 0 ? -1 - j.y2[0] : j.J[0],
      m = j.U[q],
      n = q < 0 ? 1 : m.ma,
      G = q < 0 ? j._E[-q - 1] : n <= 0 ? null : n == 1 ? m.ex() : m.xE(j).x7,
      W = G ? G.N : m.buffer,
      k = (G ? G.H : m.H).P();
    return [m, n, G, W, k];
  };
  L.tt.prototype.g5 = function (j, q) {
    this.hF = j.h == null ? null : { H: j.h.H.P(), N: j.h.N.slice(0) };
    var m = this.iH,
      n = this.abA(j),
      G = n[0],
      W = n[1],
      k = n[2];
    this.iH = n[3];
    this.Zz = n[4];
    var T = new hk(0, 0, j.r, j.$),
      b = T.vd(this.Zz);
    if (((this.QH() && W <= 0) || b.Lg(this.Zz)) && q != !0) {
      if (m && m.length == this.iH.length) {
        m.set(this.iH);
        this.iH = m;
      } else this.iH = this.iH.slice(0);
    } else {
      if (k) k.extend(b);
      else G.extend(b);
    }
  };
  L.tt.prototype.w7 = function (j, q) {
    var m = this.abA(j),
      n = m[1],
      G = m[3],
      W = m[4],
      k = [G, W],
      T = q != null ? q : this.TX.sfrom;
    if (n <= 0 && T != 0) {
      k[1] = new hk(0, 0, j.r, j.$);
      k[0] = j.ht(T == 1 && j.J[0] != j.U.length - 1 ? j.J[0] : null).slice(0);
    }
    this.fU = k[1].P();
    this.Go = k[0].slice(0);
  };
  L.tt.prototype.dr = function (j, q, m, n, G, W) {
    if (G.qT && n.M(gn.O4) && this.Oc == null) {
      if (W) this.wh = m.UP;
      var k = new fd(_.E.w, !0);
      k.l = L.JF;
      k.data = { R: "pickhere", amX: G };
      q.k(k);
      var T = L.KH.aAl(j, !1, !0, G, null, m.UP, this.wh, 1),
        k = new fd(_.E.c, !0);
      k.data = { R: _.Y.t5, $U: T };
      q.k(k);
      return !0;
    }
    return !1;
  };
  L.tt.prototype.vh = function (j, q, m, n, G, W) {
    if (this.id != L.eu && !j.Ph(this.caller)) {
      this.ok = null;
      return;
    }
    if (this.id != L.eu && this.ok) return;
    this.g5(j);
    var k = new hk(0, 0, j.r, j.$),
      T = null;
    if (W != null) {
      var b = j.y2.length != 0 ? -1 - j.y2[0] : j.J[0],
        c = j.U[b],
        a =
          b < 0
            ? j._E[-b - 1]
            : c.ma <= 0
            ? null
            : c.ma == 1
            ? c.ex()
            : c.xE(j).x7;
      T = B.j(k.C() * 4, j.depth);
      if (a) L.tt.Sy(this.iH, this.Zz, a.color, T, k);
      else B.M4(this.iH, this.Zz, T, k);
    }
    var f = this.TX;
    if (this.ok && this.id == L.eu && f.qsmode != 0 && j.h != null) {
    } else {
      var U = q.UP,
        Z = q.vH,
        i = null;
      if (this.Qs == "erase") {
        var h = U;
        U = Z;
        Z = h;
      }
      var u = this.id == L.eu ? this.Zz : k;
      if (j.EK) i = [3];
      else if (j.PU != -1) {
        var x = j.GA[j.PU];
        i = [x.oW[0], x.oW[1], x.add.vmsk.D];
      }
      this.ok = new e4(
        f.brush,
        q.AU.cd,
        q.AU.cs,
        {
          rv: G,
          ahz: W,
          aLY: (f.smth * 50) / j.I.k3,
          mv: this.id == L.$o || f.emode == 1,
          oW: i,
          depth: j.depth,
        },
        U,
        Z,
        u,
        T
      );
    }
    if (this.id == L.eu) {
      this.ok.al6(f.brush, f.qsmode == 2 ? 0 : 16777215);
    }
    var X = j.I.sb(n.x, n.y);
    if (m.M(gn.X6) && this.Et) {
      var $ = this.Et;
      this.ok.moveTo($.x, $.y, n.vV);
      this.ok.lineTo(
        0.001 * $.x + 0.999 * X.x,
        0.001 * $.y + 0.999 * X.y,
        n.vV
      );
      this.ok.lineTo(X.x, X.y, n.vV);
    } else this.ok.moveTo(X.x, X.y, n.vV);
    this.Et = X;
    this.gn = X.P();
    this.l$ = new k_(X, j.I.ny);
  };
  L.tt.prototype.BX = function (j, q, m) {
    if (j && j.I.k3 != 0 && j.I.k3 != this.eG) {
      this.eG = j.I.k3;
      this.Vn(m);
    }
  };
  L.tt.prototype.Df = function (j, q, m, n) {
    if (this.ok == null) return;
    var G = j.U[j.J[0]],
      W = j.I.sb(n.x, n.y),
      k = this.l$.e_(W, m);
    if (k.Lg(this.Et)) return 1;
    this.ok.lineTo(k.x, k.y, n.vV);
    this.Et = k;
    if (this.id == L.A7 || this.id == L.Su) {
      var T = this.om(),
        b = 11;
      T = j.I.gS(W.x - T.x, W.y - T.y);
      var c = b >>> 1,
        a = new hk(Math.round(T.x) - c, Math.round(T.y) - c, b, b),
        f = B.j(a.C() * 4);
      for (var y = 0; y < b; y++)
        f[(y * b + c) * 4 + 3] = f[(b * c + y) * 4 + 3] = 255;
      j.W.Z9 = [[f, a]];
      j._F = !0;
    }
  };
  L.tt.prototype.yc = function (j, q, m, n) {
    if (m.RW != this.id) return;
    if (this.id != L.eu || j == null) return;
    if (j.h == null || j.J[0] != this.as1) {
      this.as1 = j.J[0];
      this.Ut({ qsmode: 0 }, q);
    }
  };
  L.tt.prototype.gF = function (j, q) {
    if (j.y2.length != 0) {
      j._F = !0;
      return;
    }
    var m = j.U[j.J[0]];
    if (q == null) {
      q = this.ok.WF();
      if (this.QH() && m.ma <= 0) q = q.TM(this.Zz);
    }
    var n = m.ma;
    if (n == 1 || n == 3) {
      var G = Math.round((n == 1 ? m.ex() : m.xE(j).x7).LH * 2.4);
      q = q.P();
      q.Lh(G, G);
    }
    if (q.jG()) return;
    if (n <= 0) {
      m.gF(q);
    }
    if (n == 1) {
      m.ex().xo = !0;
      m.D5(j, q);
    }
    if (n == 3) {
      m.gF(q);
    }
    j.gF(j.root.s2(q, j, j.J[0], !0));
  };
  L.tt.prototype.H_ = function (j, q, m, n, G) {
    if (this.ok == null) return;
    this.ok.finish();
    if (this.id != L.J6 && this.id != L.Su && this.id != L.eu) this.Am(j);
    if (this.id == L.A7 || this.id == L.Su) {
      j.W.Z9 = [];
      j._F = !0;
    }
    if (this.id == L.eu) {
      var W = j.h;
      j.h = this.hF;
      var k = new fd(_.E.w, !0);
      k.data = { R: "setsel", ER: this.name, h: W };
      k.l = L.ag;
      q.k(k);
      if (this.TX.qsmode == 0) this.Ut({ qsmode: 1 }, q);
    } else {
      this.finish(j, this.ok.XQ());
      this.ok = null;
      this.FM = null;
    }
    this.dir = 0;
  };
  L.tt.prototype.Ut = function (j, q) {
    for (var m in j) this.TX[m] = j[m];
    var n = new fd(_.E.c, !0);
    n.data = { R: _.Y.vv, l: this.id, XX: j };
    q.k(n);
  };
  L.tt.prototype.QH = function () {
    var j = this.id;
    return (
      j == L.eu || j == L.Ij || j == L.pA || j == L.kS || j == L.mU || j == L.qt
    );
  };
  L.tt.prototype.finish = function (j, q, m, n, G) {
    var W = j.y2.length != 0 ? -1 - j.y2[0] : j.J[0],
      k = j.U[W],
      T = W < 0 ? 1 : k.ma,
      b = W < 0 ? j._E[-W - 1] : T <= 0 ? null : T == 1 ? k.ex() : k.xE(j).x7,
      c = b ? b.H : k.H,
      U;
    if (this.QH() || !c.Lg(this.Zz)) {
      if (b == null) {
        if (this.QH()) k.yy();
        else {
          if (this.id != L.cS && this.id != L.$o) {
            var a = q.vd(this.Zz),
              f = B.j(a.C() * 4, j.depth);
            B.M4(k.buffer, k.H, f, a);
            k.buffer = f;
            k.H = a;
          }
        }
      } else b.yy();
      this.gF(j, c);
    }
    if (T <= 0) {
      U = B.j(q.C() * 4, j.depth);
      B.M4(this.iH, this.Zz, U, q);
    } else {
      U = B.j(q.C(), j.depth);
      U.fill(Math.round((B.TN(j.depth) * b.color) / 255));
      B.sN(this.iH, this.Zz, U, q);
    }
    this.RY(j, !1, m ? m : this.name, W, T, q, U, n, G);
  };
  L.tt.prototype.RY = function (j, q, m, n, G, W, k, T, b) {
    var c = k;
    if (G > 0) {
      c = B.j(W.C() * 4, B.oM(k));
      L.tt.Sy(k, W, 0, c, W);
    }
    var a = new eN(m, this);
    a.data = [{ v: n, mY: G, HA: W, py: c }];
    if (T) a.data.aus = [j.h, null];
    if (b) a.data.aus = [this.hF, j.h];
    j.Du(a);
    if (q) this.km(a.data, j);
    else if (T) j.h = null;
    L.DO.aLO(j, a.data);
  };
  L.tt.prototype.W6 = function (j, q) {
    this.aqA(j, q, !1);
  };
  L.tt.prototype.km = function (j, q) {
    this.aqA(j, q, !0);
  };
  L.tt.prototype._W = function (j) {
    return L.DO._W(j);
  };
  L.tt.prototype.aqA = function (j, q, m) {
    if (j.R == "drawtemp") {
      var n = m ? j.a2Z : j.atw,
        G = q.U[j.v];
      G.k2.DL = n;
      G.zB(q, 0, 0, q.h);
      G.gF();
      q.qB = !0;
    } else {
      L.DO.RH(q, j);
      if (j.aus) {
        q.h = j.aus[m ? 1 : 0];
        q.hM = !0;
      }
    }
    q.gF();
  };
  L.tt.prototype.Am = function (j) {
    var q = this.ok.qX(),
      m = this.ok.Fj(),
      n = this.ok.WF();
    this.xU(j, this.Qs, q, m, n);
    this.gF(j);
  };
  L.tt.prototype.xU = function (j, q, m, n, G) {
    var W = this.TX,
      k = j.U[j.J[0]],
      T =
        j.y2.length != 0
          ? j._E[j.y2[0]]
          : k.ma <= 0
          ? null
          : k.ma == 1
          ? k.ex()
          : k.xE(j).x7,
      b = B.j(G.C() * 4, j.depth),
      c,
      a = k.op(0);
    if (T == null) {
      if (this.id == L.P6 && q == "heal") B.M4(k.buffer, k.H, b, G);
      else B.M4(this.iH, this.Zz, b, G);
      if (a) {
        c = B.j(G.C(), j.depth);
        B.Ih(b, c, 3);
      }
    } else {
      L.tt.Sy(this.iH, this.Zz, T.color, b, G);
    }
    if (j.h && q != "qselect") {
      var f = G.TM(j.h.H),
        U = B.j(f.C() * 4, j.depth);
      if (q == "copy") {
        var Z = B.j(f.C(), j.depth);
        B.sN(j.h.N, j.h.H, Z, f);
        B.M4(b, G, U, f);
        B.G.xf(m, n, U, f, Z, f, 0, f, 1, !1);
      } else {
        B.M4(m, n, U, f);
        B.zn(j.h.N, j.h.H, U, f);
      }
      m = U;
      n = f;
    }
    function h(x, gb) {
      var kS = Math.max(gb.x, Math.min(gb.x + gb.r - 1, x.x)),
        cY = Math.max(gb.y, Math.min(gb.y + gb.$ - 1, x.y));
      return new ea(kS, cY);
    }
    if (q == "idraw" || q == "ierase") {
      if (this.FM == null) this.FM = B.j(this.Zz.C());
      var u = W.samp,
        i = this.a.vH,
        x = h(this.Et, G),
        X = u == 0 ? x : this.gn,
        $ = X.x,
        H = X.y,
        C = L.y4.dk(this.iH, this.Zz, [
          X,
          new ea($ - 2, H),
          new ea($ + 2, H),
          new ea($, H - 2),
          new ea($, H + 2),
        ]);
      if (u == 2)
        C = [[(i >>> 16) & 255, (i >>> 8) & 255, (i >>> 0) & 255, 255]];
      var l = L.y4.o4(b, G, x, C, W.wconf),
        v = B.j(G.C());
      B.sN(this.FM, this.Zz, v, G);
      B.hV.vd(l, v, v);
      B.sN(v, G, this.FM, this.Zz);
      B.zn(v, G, m, n);
      q = q.slice(1);
    }
    if (q == "erase" && (L.DO.az6(j) != 16777215 || T)) q = "draw";
    if (q == "draw") B.G.Jg(W.bmode, m, n, b, G, G, W.opacity);
    else if (q == "erase") {
      var K = W.opacity;
      if (this.id == L.T1) K = 1;
      var S = B.j(G.C() * 4, j.depth);
      B.M4(m, n, S, G);
      if (T == null) {
        var o = B.j(G.C(), j.depth);
        B.Ih(S, o, 3);
        B.q8(o, K);
        B.BR(o);
        B.zn(o, G, b, G);
      } else {
        B.nn(S, 0, 0, 0);
        B.G.Jg("norm", S, G, b, G, G, K);
      }
    } else if (q == "clone" || q == "heal") {
      var V = this.om(),
        P = this.fU.P();
      P.offset(V.x, V.y);
      var z = G.P();
      z.Lh(1, 1);
      var E = B.j(z.C() * 4, j.depth),
        A = B.j(z.C(), j.depth);
      B.M4(m, n, E, z);
      B.Ih(E, A, 3);
      E.fill(0);
      if (T == null) {
        B.M4(this.Go, P, E, z);
        var N = B.j(z.C(), j.depth);
        B.Ih(E, N, 3);
        B.WE(N, A);
      } else L.tt.Sy(this.Go, P, T.color, E, z);
      if (q == "clone") {
        B.ln(A, E, 3);
        B.G.Jg(W.bmode, E, z, b, G, G, W.opacity);
      }
      if (q == "heal") {
        var Q = A.slice(0);
        B.round(Q, B.TN(j.depth) / 10);
        var e = B.j(z.C() * 4, j.depth);
        if (T == null) B.M4(this.iH, this.Zz, e, z);
        else L.tt.Sy(this.iH, this.Zz, T.color, e, z);
        B.G.xf(E, z, e, z, Q, z, 0, z, 1, !1);
        var Y = B.sL(e, 8);
        B.iL.AC(Y, Q, z);
        B.sL(Y, j.depth, e);
        B.G.xf(e, z, b, G, A, z, 0, G, 1, !1);
      }
    } else if (q == "dodge" || q == "burn") {
      var d = G.C() * 4,
        I = B.TN(j.depth),
        O = 1 / I,
        E = B.j(d, j.depth),
        p = 1,
        F = 0,
        g = 0,
        w = 0;
      B.M4(m, n, E, G);
      var s = L.tt.rK;
      if (this.B8) {
        if (q == "dodge") q = "burn";
        else q = "dodge";
      }
      var r = W.rng;
      if (q == "dodge") {
        F = [1 - p / 2, 1, 1 + p][r];
        g = [1, 1 / (1 + p), 1][r];
        w = [p / 2, 0, 0][r];
      }
      if (q == "burn") {
        F = [1 / (1 - p / 2), 1, 1 - p / 2][r];
        g = [1, 1 + p, 1][r];
        w = [-(p / 2) / (1 - p / 2), 0, 0][r];
      }
      for (var y = 0; y < d; y += 4) {
        var eQ = E[y + 3] * O;
        b[y + 0] = I * s(b[y + 0] * O, F, g, w, eQ);
        b[y + 1] = I * s(b[y + 1] * O, F, g, w, eQ);
        b[y + 2] = I * s(b[y + 2] * O, F, g, w, eQ);
      }
    } else if (q == "sponge" || q == "redeye") {
      var E = B.j(G.C() * 4, j.depth),
        A = B.j(G.C(), j.depth);
      B.M4(m, n, E, G);
      B.Ih(E, A, 3);
      B.wV(b, E);
      var t = W.smode;
      if (this.B8) t = 1 - t;
      var dq = k0.i4("hue2");
      if (q == "sponge") b$.Cy(dq, 0, [0, [-50, 46][t], [6, 5][t]]);
      else b$.Cy(dq, 1, { AK: [265, 305, 25, 55], ZE: [0, -90, -70] });
      var D = eV.R7("hue2", dq);
      eV.Gi(D, E, E, G);
      B.G.xf(E, G, b, G, A, G, 0, G, 1, !1);
    } else if (q == "copy") B.M4(m, n, b, G);
    else if (q == "sheal") {
      var E = B.j(G.C() * 4, j.depth),
        A = B.j(G.C(), j.depth);
      B.M4(m, n, E, G);
      B.Ih(E, A, 3);
      E.fill(0);
      var ha = this.Go,
        am = this.fU;
      if (T) {
        ha = B.j(am.C() * 4, j.depth);
        L.tt.Sy(this.Go, am, 0, ha, am);
      }
      var k4 = B.sL(E, 8),
        aA = B.EP.AC(B.sL(ha, 8), am, B.sL(A, 8), k4, G);
      B.sL(k4, j.depth, E);
      if (aA != 0) B.M4(ha, am, E, G);
      if (W.sfrom == 0) B.M4(E, G, b, G);
      else {
        B.M4(this.iH, this.Zz, b, G);
        B.ln(A, E, 3);
        B.G.Jg("norm", E, G, b, G, G, 1);
      }
    } else if (q == "qselect") {
      var ex = this.Zz,
        ac = ex.r,
        eJ = ex.$,
        h$ = ac * eJ,
        da = B.sL(this.ok.qX(), 8),
        bb = L.pI._7,
        A = bb.QY;
      A.fill(128);
      for (var y = 0; y < h$; y++) {
        var gb = da[y << 2],
          fM = da[(y << 2) + 3];
        if (fM == 255 && (gb == 0 || gb == 255)) A[y] = gb;
      }
      A[0] = A[ac - 1] = 0;
      A[(eJ >>> 1) * ac] = A[(eJ >>> 1) * ac + ac - 1] = 0;
      L.C8.Gs(bb, !0, j);
      j.h = { H: ex, N: B.sL(bb.h.slice(0), j.depth) };
      j.hM = !0;
    }
    if (T == null) {
      if (a) B.ln(c, b, 3);
      B.M4(b, G, k.buffer, k.H);
    } else L.tt.ZJ(b, G, T);
  };
  L.tt.om = function () {
    return null;
  };
  L.tt.rK = function (j, q, m, n, G) {
    var W = n + q * Math.pow(j, m),
      k = W * G + j * (1 - G);
    return Math.max(0, Math.min(1, k));
  };
  L.tt.Sy = function (j, q, m, n, G) {
    var W = B.oM(j),
      k = B.TN(W),
      T = B.j(G.C(), W);
    T.fill((k * m) / 255);
    B.sN(j, q, T, G);
    n.fill(k);
    B.QZ(T, n);
  };
  L.tt.ZJ = function (j, q, m) {
    var n = B.j(q.C(), B.oM(j));
    B.P2(j, n);
    B.sN(n, q, m.N, m.H);
  };
  L.pI = function (j, q, m) {
    L.ju.call(this, j, q, m);
    this.TX = {
      binop: 0,
      feat: 0,
      cstr: { t: 0, x: 3, y: 2 },
      wconf: [16, !0, !0],
      anta: !0,
      sall: !1,
    };
    this.ou = new ea(-1, -1);
    this.BE = new ea(-1, -1);
    this.Jm = "default";
    this.AS = null;
    this.pu = !1;
    this.bB = new iX();
    this.uo = !1;
    this.eb = null;
    this.NF = null;
    this.r4 = !1;
    this.ahN = !1;
  };
  L.pI.prototype = new L.ju();
  L.pI.prototype.rm = function () {
    var j = this.TX,
      q = [j.binop, j.feat],
      m = j.wconf.slice(0);
    m[1] = m[1] ? 1 : 0;
    m[2] = m[2] ? 1 : 0;
    var n = m.join(",") == "16,1,1";
    if (q[0] == 0 && q[1] == 0 && n) return null;
    if (!n) q.push(m);
    return q;
  };
  L.pI.prototype.ui = function (j, q, m) {
    var n = this.TX;
    if (j[0]) n.binop = j[0];
    if (j[1]) n.feat = j[1];
    if (j[2]) {
      var G = (n.wconf = j[2].slice(0));
      if (typeof G[1] == "number") {
        G[1] = G[1] == 1;
        G[2] = G[2] == 1;
      }
    }
    this.zh(m);
  };
  L.pI.prototype.zh = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = { R: _.Y.vv, l: this.id, TX: this.TX };
    j.k(q);
  };
  L.pI._7 = { key: "" };
  L.pI.Vb = function (j, q, m) {
    var n = {
      _D: j,
      SC: {
        classID: "setd",
        null: {
          t: "obj ",
          v: [{ t: "prop", v: { classID: "Chnl", keyID: "fsel" } }],
        },
      },
    };
    if (q) n.SC.T = q;
    if (m != null) n.SC.AntA = { t: "bool", v: m };
    return n;
  };
  L.pI.gD = function (j, q, m) {
    return L.pI.Vb(
      "set",
      {
        t: "Objc",
        v: {
          classID: j,
          Top: { t: "UntF", v: { type: "#Pxl", val: q.y } },
          Left: { t: "UntF", v: { type: "#Pxl", val: q.x } },
          Btom: { t: "UntF", v: { type: "#Pxl", val: q.y + q.$ } },
          Rght: { t: "UntF", v: { type: "#Pxl", val: q.x + q.r } },
        },
      },
      m
    );
  };
  L.pI.zt = function (j, q, m) {
    var n = [],
      G = [],
      k = "set";
    for (var y = 0; y < j.length; y += 2) {
      n.push(j[y]);
      G.push(j[y + 1]);
    }
    var W = {
      t: "Objc",
      v: {
        classID: "Plgn",
        Pts: {
          t: "ObAr",
          v: {
            classID: "Pnt",
            arr: [
              { id: "Hrzn", type: "UnFl", uID: "#Pxl", arr: n },
              { id: "Vrtc", type: "UnFl", uID: "#Pxl", arr: G },
            ],
          },
        },
      },
    };
    if (q) k = ["set", "addTo", "subtractFrom", "interfaceWhite"][q];
    return L.pI.Vb(k, W, m);
  };
  L.pI.ayi = function (j, q, m) {
    var n = {
        t: "Objc",
        v: {
          classID: "Pnt",
          Hrzn: { t: "UntF", v: { type: "#Pxl", val: j.x } },
          Vrtc: { t: "UntF", v: { type: "#Pxl", val: j.y } },
        },
      },
      G = L.pI.Vb("set", n);
    G.SC.Tlrn = { t: "long", v: q[0] };
    G.SC.AntA = { t: "bool", v: q[1] };
    G.SC.Cntg = { t: "bool", v: q[2] };
    if (m == !0) G.SC.Mrgd = { t: "bool", v: m };
    return G;
  };
  L.pI.TP = function (j) {
    return L.pI.Vb("set", { t: "enum", v: { Ordn: j ? "Al" : "None" } });
  };
  L.pI.Lz = function (j, q, m) {
    var n = { classID: "null" };
    if (j != "border")
      n.selectionModifyEffectAtCanvasBounds = { t: "bool", v: m };
    var G = { e: "By", c: "By", b: "Wdth", f: "Rds", s: "Rds" }[j[0]];
    n[G] = { t: "UntF", v: { type: "#Pxl", val: q } };
    return { _D: j, SC: n };
  };
  L.pI.j7 = function (j, q, m) {
    var n = {
        t: "obj ",
        v: [{ t: "prop", v: { classID: "Chnl", keyID: "fsel" } }],
      },
      G = {
        t: "obj ",
        v: [{ t: "Enmr", v: { classID: "Chnl", typeID: "Chnl", enum: q } }],
      };
    if (m) G.v.push({ t: "name", v: { classID: "Lyr", val: m } });
    var W = [
        { classID: "null", null: n, T: G },
        { classID: "null", null: G, T: n },
        { classID: "null", null: G, From: n },
        { classID: "null", null: G, With: n },
      ],
      k = ["set", "add", "subtract", "interfaceIconFrameDimmed"];
    return { _D: k[j], SC: W[j] };
  };
  L.pI.aiC = function () {
    return {
      _D: "make",
      SC: {
        classID: "null",
        null: { t: "obj ", v: [{ t: "Clss", v: { classID: "Path" } }] },
        From: {
          t: "obj ",
          v: [{ t: "prop", v: { classID: "csel", keyID: "fsel" } }],
        },
        Tlrn: { t: "UntF", v: { type: "#Pxl", val: 2 } },
      },
    };
  };
  L.pI.a3y = function (j, q) {
    var m = new fd(_.E.c, !0);
    m.data = { R: _.Y.fh, rw: fG.rf };
    if (!q.x_) j.k(m);
    m.data = { R: _.Y.fh, rw: fG.uW };
    if (!q.q1.hl) j.k(m);
  };
  L.pI.prototype.BT = function (j, q, m, n, G) {
    L.pI.a3y(q, G);
    this.AS = q;
    var W = j.R,
      k,
      T,
      b = new hk(0, 0, m.r, m.$),
      fi = !1,
      go,
      iz,
      i5,
      aI;
    if (W == "fromAction") {
      var c = j.tp,
        a = c._D,
        f = c.SC,
        U = f ? f.selectionModifyEffectAtCanvasBounds : null,
        Z = U && U.v;
      if (a == "colorRange") {
        if (f.Clrs) {
          var h = f.Clrs.v.Clrs,
            u = 0,
            i = 255,
            x = ["Shdw", "Mdtn", "Hghl"].indexOf(h),
            C = 0.4;
          if (x == 0) i = 60;
          else if (x == 1) {
            u = 100;
            i = 150;
          } else u = 190;
          var X = ["shadows", "midtones", "highlights"][x],
            $ = f[X + "LowerLimit"],
            H = f[X + "UpperLimit"];
          if ($) u = $.v;
          if (H) i = H.v;
          var l = f[X + "Fuzziness"];
          if (l) C = l.v / 100;
          k = L.pI.VQ(m, u, i, C, !0);
        } else {
          var u = f.Mnm.v,
            i = f.Mxm.v,
            C;
          u = { ji: u.Lmnc.v, Sd: u.A.v, X: u.B.v };
          i = { ji: i.Lmnc.v, Sd: i.A.v, X: i.B.v };
          C = f.Fzns.v / 200;
          k = L.pI.VQ(m, u, i, C);
        }
        T = [7, 8];
      } else if (a == "inverse") {
        if (m.h == null) {
          alert("No selection!");
          return;
        }
        k = { N: B.j(b.C(), m.depth), H: b };
        B.sN(m.h.N, m.h.H, k.N, k.H);
        B.BR(k.N);
        T = [7, 2];
      } else if (a == "expand") {
        var v = f.By.v.val,
          K = m.h.H.P();
        K.Lh(v, v);
        var S = B.j(K.C()),
          o = B.j(K.C(), m.depth);
        B.sN(m.h.N, m.h.H, o, K);
        B.style.stroke(B.sL(o, 8), S, K, v);
        k = { N: B.sL(S, m.depth), H: K };
        T = [7, 4];
      } else if (a == "contract") {
        var v = f.By.v.val,
          V = m.h.H.P();
        V.Lh(1, 1);
        if (!Z) V = V.TM(b);
        var o = B.j(V.C(), m.depth),
          P = B.j(o.length, 8);
        B.sN(m.h.N, m.h.H, o, V);
        B.BR(o);
        B.style.stroke(B.sL(o, 8), P, V, v);
        B.BR(P);
        k = { N: B.sL(P, m.depth), H: V };
        B.yy(k);
        T = [7, 5];
      } else if (a == "border") {
        var v = f.Wdth.v.val;
        k = L.pI.aFO(m.h, v / 2, v / 2);
        T = [7, 9];
      } else if (a == "feather" || a == "smoothness") {
        var v = f.Rds.v.val;
        k = L.pI.abL(m.h, v, a == "smoothness", b, Z);
        T = a == "feather" ? [7, 6] : [19, 3, 0];
      } else if (a == "move") {
        var z = f.T.v,
          K = m.h.H.P();
        K.x += z.Hrzn.v.val;
        K.y += z.Vrtc.v.val;
        k = { N: m.h.N, H: K };
        T = [7, 7];
      } else if (a == "grow" || a == "similar") {
        var E = this.TX.wconf.slice(0);
        if (f.Tlrn) E[0] = f.Tlrn.v;
        E[2] = a == "grow";
        var A = m.ht(),
          N = new hk(0, 0, m.r, m.$),
          Q = m.h.H,
          e = Math.max(1, Math.round(Math.sqrt(Q.C()) / 10)),
          Y = B.j(N.C());
        B.sN(m.h.N, Q, Y, N);
        var d = [];
        for (var I = 0; I < Q.$; I += e)
          for (var O = (Q.C() + I) % e; O < Q.r; O += e)
            if (m.h.N[I * Q.r + O] == 255) {
              var s = new ea(Q.x + O, Q.y + I);
              d.push(s);
              if (E[2]) B.hV.vd(L.y4.o4(A, N, s, null, E), Y, Y);
            }
        if (!E[2]) B.hV.vd(L.y4.o4(A, N, s, L.y4.dk(A, N, d), E), Y, Y);
        k = { N: Y, H: N };
        T = a == "grow" ? "Grow Selection" : "Similar Selection";
        console.log(f);
      } else {
        var p = f.null.v,
          F = f.AntA != null && f.AntA.v;
        function g(kX) {
          return B.b.mE(B.ih.Fj(kX, m.r, m.$), !0);
        }
        function w(kX) {
          var kc = kX[0].arr,
            ew = kX[1].arr,
            gS = { L: [], RC: [] };
          for (var y = 0; y < kc.length; y++) {
            gS.RC.push(y == 0 ? "M" : "L");
            gS.L.push(kc[y], ew[y]);
          }
          gS.RC.push("Z");
          if (kX[0].uID == "#Prc")
            B.b.u(gS.L, new k$(m.r / 100, 0, 0, m.$ / 100, 0, 0), gS.L);
          return gS;
        }
        var r = ["set", "addTo", "subtractFrom", "interfaceWhite"].indexOf(a),
          eQ = f.T ? f.T.v : null;
        if (eQ && eQ.classID == "Elps") {
          k = this.a7J(L.ty.afI(g(eQ)), m.depth);
          T = [10, 4];
        } else if (eQ && eQ.classID == "Rctn") {
          var t = g(eQ);
          k = { N: B.j(t.C(), m.depth), H: t.P() };
          k.N.fill(B.TN(m.depth));
          T = [10, 15];
        } else if (eQ && eQ.classID == "ObSl") {
          var t = g(eQ),
            dq = L.pI._7,
            D = dq.H,
            ha = dq.QY,
            am = D.r,
            k4 = D.$,
            aA = t.x - D.x,
            ex = aA + t.r - 1,
            ac = Math.max(aA, Math.min(ex, (aA + ex) >>> 1)),
            eJ = t.y - D.y,
            h$ = eJ + t.$ - 1,
            da = Math.max(eJ, Math.min(h$, (eJ + h$) >>> 1)),
            bb = Math.max(aA, 0),
            gb = Math.min(ex, am),
            fM = Math.max(eJ, 0),
            kS = Math.min(h$, k4);
          ha.fill(128);
          if (0 <= eJ) for (var O = bb; O < gb; O++) ha[eJ * am + O] = 0;
          if (h$ < k4) for (var O = bb; O < gb; O++) ha[h$ * am + O] = 0;
          if (0 <= aA) for (var I = fM; I < kS; I++) ha[I * am + aA] = 0;
          if (ex < am) for (var I = fM; I < kS; I++) ha[I * am + ex] = 0;
          var cY = L.hZ.azt,
            cS = Math.round(t.r * cY),
            k3 = Math.round(t.$ * cY);
          for (var O = Math.max(0, ac - cS); O < Math.min(am, ac + cS); O++)
            ha[da * am + O] = 255;
          for (var I = Math.max(0, da - k3); I < Math.min(k4, da + k3); I++)
            ha[I * am + ac] = 255;
          L.C8.Gs(dq, !0);
          k = { N: dq.h.slice(0), H: D.P() };
          T = [10, 44];
        } else if (eQ && eQ.classID == "Plgn") {
          k = this.a7J(w(eQ.Pts.v.arr), m.depth);
          T = [10, 9];
        } else if (eQ && eQ.classID == "Pnt") {
          k = L.y4.amM(
            m,
            new ea(eQ.Hrzn.v.val, eQ.Vrtc.v.val),
            [f.Tlrn.v, F, f.Cntg == null || f.Cntg.v],
            f.Mrgd ? f.Mrgd.v : !1
          );
          T = [10, 12];
        } else if (eQ && eQ.Ordn == "None") {
          k = null;
          T = [7, 1];
        } else if (eQ && eQ.Ordn == "Al") {
          var di = b;
          if (m.J.length != 0) {
            var a7 = m.root.Zg(m.J[0]);
            while (a7.parent && a7.parent.parent) a7 = a7.parent;
            if (a7.v.add.artb) di = a7.v.Li();
          }
          k = { N: B.j(di.C(), m.depth), H: di };
          k.N.fill(B.TN(m.depth));
          T = [7, 0];
        } else if (eQ && eQ[0] && eQ[0].v.keyID == "WrPt") {
          var b0 = { R: "frompath", eQ: [-1, 0, 0] };
          this.BT(b0, q, m, n, G);
          return;
        } else {
          var e1 = [
              "set",
              "add",
              "subtract",
              "interfaceIconFrameDimmed",
            ].indexOf(a),
            l2 = a == "set" ? eQ : p,
            kL = l2[0].v.enum,
            b0;
          if (
            kL == "Trsp" ||
            kL == "Gray" ||
            kL == "Msk" ||
            kL == "vectorMask" ||
            kL == "Trgt"
          ) {
            var es = m.J[0];
            if (l2.length == 2) es = jw.jq(m, l2[1]);
            var kR = ["Trsp", "Msk", "vectorMask"].indexOf(kL);
            if (kL == "Trgt" && m.U[es].ma == 1) kR = 1;
            if (kL == "Gray") kR = -1;
            b0 = { R: "fromlayer", eQ: [es, kR, e1] };
          } else {
            if (l2[0].t == "name") {
              var es = 0;
              for (var y = 0; y < m._E.length; y++)
                if (m._E[y].name == l2[0].v.val) es = y;
              b0 = { R: "fromchannel", eQ: [-5 - es, 0, e1] };
            } else {
              var eH = ["RGB", "Rd", "Grn", "Bl"].indexOf(kL);
              b0 = { R: "fromchannel", eQ: [-1 - eH, 0, e1] };
            }
          }
          this.BT(b0, q, m, n, G);
          return;
        }
        if (k) {
          if (!F) B.round(k.N);
          if (f.Fthr) k = L.pI.abL(k, f.Fthr.v.val, !1);
          if (a != "set" && m.h != null) k = B.hV.ZQ(k, m.h, r);
        }
      }
      if (a == "expand" || a == "contract")
        if (!Z && !b.contains(k.H)) {
          var cZ = k.H.TM(b),
            ga = B.j(cZ.C(), m.depth);
          B.sN(k.N, k.H, ga, cZ);
          k.N = ga;
          k.H = cZ;
        }
    }
    if (W == "qmask") {
      fi = !0;
      var bs = m._C(),
        N = new hk(0, 0, m.r, m.$);
      if (bs) {
        k =
          bs.H.Lg(N) && B.kp(bs.N, 255)
            ? null
            : { H: bs.H.P(), N: bs.N.slice(0) };
        go = bs;
      } else {
        k = null;
        iz = new R.T0();
        iz.color = 0;
        iz.name = "Quick Mask";
        iz.Ea = !0;
        if (m.h) {
          iz.H = m.h.H.P();
          iz.N = m.h.N.slice(0);
        } else {
          iz.H = N;
          iz.N = B.j(iz.H.C());
          iz.N.fill(255);
        }
      }
      T = [6, 6, 1];
      m.qB = !0;
    }
    if (W == "setsel") {
      k = j.h;
      T = j.ER;
    }
    if (W == "crange") {
      var u = j.IG,
        i = j.Lc;
      k = L.pI.VQ(m, u, i, j.qY);
      T = [7, 8];
    }
    if (W == "fromlayer" || W == "fromchannel" || W == "frompath") {
      var k2 = j.eQ[0],
        kR = j.eQ[1],
        r = j.eQ[2];
      if (W == "fromlayer") {
        if (k2 == null) k2 = m.J[0];
        var jG = m.U[k2];
        if (kR <= 0) {
          if (jG.D1()) {
            var a7 = m.root.Zg(k2);
            k = { N: B.j(0), H: new hk() };
            for (var y = 0; y < a7.children.length; y++) {
              var eW = a7.children[y].v;
              if (eW.H.jG()) continue;
              var gc = B.j(eW.H.C());
              B.Ih(eW.buffer, gc, 3);
              var k1 = { N: gc, H: eW.H.P() };
              if (y == 0) k = k1;
              else k = B.hV.ZQ(k, k1, 1);
            }
            if (k.H.jG()) return;
          } else {
            var ke = jG.H,
              jh = jG.buffer;
            if (ke.jG()) return;
            var cE = B.j(jh.length >>> 2, m.depth);
            if (kR == 0) B.Ih(jh, cE, 3);
            if (kR == -1) B.P2(jh, cE);
            k = { N: cE, H: ke.P() };
          }
        } else {
          if (jG.x7 == null) jG.D5(m);
          var cy = kR == 1 ? jG.ex() : jG.x7;
          if (kR == 3) cy = jG.xE(m).x7;
          k = L.pI.aKD(cy, b);
        }
        this.track(L.pI.j7(r, ["Trsp", "Msk"][kR], jG.getName()));
      } else if (W == "frompath") {
        var hl = m.ac(),
          c2 = hl[1],
          hl = hl[0],
          le = !0;
        if (k2 == null) if (hl.length == 0 || c2.length == 0) return;
        var f9 = hl[c2[0]];
        if (k2 != null)
          for (var y = 0; y < hl.length; y++) if (hl[y].Wy == k2) f9 = hl[y];
        var cy = f9.add.vmsk.ex(),
          hu = cy.Fj();
        if (hu.C() == 0) return;
        var cE = cy.XY();
        if (j.eQ[3] != null) le = j.eQ[3];
        if (!le) {
          cE = cE.slice(0);
          B.round(cE);
        }
        i5 = [JSON.stringify(m.bR), JSON.stringify(m.H7)];
        aI = ["[]", "[]"];
        m.bR = [];
        m.H7 = [];
        k = { N: cE, H: hu };
      } else if (W == "fromchannel") {
        if (k2 == null) k2 = L.pI.aAj(m);
        k = L.pI.aku(m, k2);
      }
      if (r != 0 && m.h) k = B.hV.ZQ(k, m.h, r);
      T = [14, 11];
    }
    if (W == "bgrm") {
      if (L.pI.aLV(m, q, j, G)) return;
      var iJ = window.locStor.getItem("bgrmt");
      if (iJ == null) iJ = 0;
      var dZ = 24 * 60 * 60,
        kd = L.pI.a63.bind([m, q, j, G]),
        bC = Math.floor((Date.now() - iJ) / 1e3);
      if (!c9.N1(1) && c9.jP(G, 1) == null) {
        var ak = lw.eo(),
          gD = ak
            ? "Out of AI credits :( "
            : "This is a Premium feature. Go Premium for $5 a month (press Account at the top). ",
          a9 = gD + "\nWatch a short ad to use the feature?";
        gd.$Q(kd, a9, "rmbg");
      } else kd();
      return;
    }
    if (k != null && B.kp(k.N, 0)) {
      k = null;
      T = [7, 1];
    }
    if (k) B.yy(k);
    var kk = new eN(T, this);
    kk.data = {
      R: "changesel",
      h: k,
      _C: fi,
      aEv: go,
      a6x: iz,
      OQ: i5,
      asM: aI,
    };
    m.Du(kk);
    this.km(kk.data, m);
  };
  L.pI.aLV = function (j, q, m, n) {
    var G = j.U[j.J[0]],
      W = G.H,
      k = B.sL(G.buffer, 8),
      T = W.r,
      b = W.$,
      c = [0, 0, T - 1, 0, 0, b - 1, T - 1, b - 1],
      a = !0;
    for (var y = 0; y < 4; y += 2) {
      var f = (c[y + 1] * T + c[y]) * 4,
        U = 0;
      for (var Z = 0; Z < 3; Z++) {
        U += (k[Z] - k[f + Z]) * (k[Z] - k[f + Z]);
      }
      if (U > 25) a = !1;
    }
    if (a && G.ex() == null && j.h == null) {
      var h = B.j(T * b);
      for (var y = 0; y < 4; y++) {
        var u = c[y * 2],
          i = c[y * 2 + 1],
          x = 20,
          X = 1,
          $ = null;
        if (h[i * T + u] > 200) continue;
        while (x < 120) {
          var H = L.y4.o4(k, W, new ea(u, i), null, [x, !0, !0]),
            C = 0;
          for (var Z = 0; Z < H.length; Z++) C += H[Z];
          var l = x < 50 ? 1.015 : 1.004;
          if ($ && C > X * l) break;
          $ = H;
          X = C;
          x += 10;
        }
        for (var Z = 0; Z < $.length; Z++) h[Z] = Math.max(h[Z], $[Z]);
      }
      B.BR(h);
      L.pI.a0E(G, q, h, W, m.K, null);
      alert(bA.Cs("5[[eD_??KH6@J:*54(-A2 ~nyv qb\\sSc_\\TP^=@7<>Z"), 2500);
      return !0;
    }
    return !1;
  };
  L.pI.a63 = function () {
    var j = this[0],
      q = this[1],
      m = this[2],
      n = this[3],
      G = 2,
      W = j.U[j.J[0]],
      k = W.H,
      T = B.sL(W.buffer, 8),
      b = 1,
      c = [4096, 4096, 2048][G];
    while (Math.max(k.r, k.$) > c) {
      var a = B.IT(T, k);
      k = a.H;
      T = a.sE;
      b *= 2;
    }
    var f = gh.lj("png"),
      U = gh.lj("jpg"),
      Z = U.Ev([[T.buffer]], k.r, k.$),
      h = new FormData();
    h.append("image", new Blob([Z], { type: "ima" + "ge/j" + "pg" }));
    h.append("mode", "mask");
    var u = new fd(_.E.c, !0);
    u.data = { R: _.Y.gu, r8: "Processing ..." };
    q.k(u);
    window.a0p = Date.now();
    var i = function (x) {
      console.log(Date.now() - window.a0p);
      var X = x.target.response,
        $ = new Uint8Array(X);
      if ($.length != 0) {
        var H = f.LN(X)[0],
          C = H.Iu,
          v = B.j(C.C());
        B.P2(new Uint8Array(H.data), v);
        for (var y = 0; y < v.length; y++) {
          if (v[y] > 250) v[y] = 255;
        }
        if (b != 1) {
          var a = L.Dq.ac1([v, C], new k$(b, 0, 0, b, 0, 0));
          C = a.H;
          v = a.N;
        }
        C.x = W.H.x;
        C.y = W.H.y;
        L.pI.a0E(W, q, v, C, m.K, bA.Cs("AQVUYE\\{}"));
        if (c9.jP(n, 1) == null) {
          c9.ai("Rem" + "ove B" + "G", 1);
          window.locStor.setItem("bgrmt", Date.now());
        }
      } else {
        alert("An error occured :( we are trying to fix it.");
      }
      var u = new fd(_.E.c, !0);
      u.data = { R: _.Y.dO, r8: "Processing ..." };
      q.k(u);
    };
    c9.acH(bA.Cs("aQVUYEi<87<5=7:0#"), h, c9.jP(n, 1), i);
  };
  L.pI.a0E = function (j, q, m, n, G, W) {
    var k = new fd(_.E.w, !0);
    if (G == 1) {
      k.l = L.W1;
      k.data = { R: R.c5, p6: W, aAn: !0, io: "HdAl" };
      q.k(k);
      var T = j.ex();
      T.color = 0;
      T.H = n;
      T.N = B.sL(m, B.oM(j.buffer));
      T.yy();
      j.D5();
    } else if (G == 2) {
      k.l = L.ag;
      k.data = { R: "setsel", h: { N: m, H: n }, ER: "Select Subject" };
      q.k(k);
    } else throw "e";
  };
  L.pI.aAj = function (j) {
    var q = 0;
    if (j.y2.length != 0) q = -5 - j.y2[0];
    else if (JSON.stringify(j.I.rO) == "[1,1,1]") q = -1;
    else q = -2 - j.I.rO.indexOf(1);
    return q;
  };
  L.pI.aku = function (j, q) {
    var m,
      n = new hk(0, 0, j.r, j.$);
    if ((-5 < q) & (q < 0)) {
      var G = -q - 1,
        W = j.ht(),
        k = B.j(n.C());
      if (G == 0) B.P2(W, k);
      else B.Ih(W, k, G - 1);
      m = { N: k, H: n.P() };
    }
    if (q < -4) {
      m = L.pI.aKD(j._E[-q - 5], n);
    }
    return m;
  };
  L.pI.aKD = function (j, q) {
    var m, n;
    if (j.xH() == 0) {
      n = j.Fj().P();
      if (n.C() == 0) return;
      m = j.XY();
    } else {
      n = q;
      m = B.j(n.C());
      j.fy(n, m);
    }
    return { N: m, H: n };
  };
  L.pI.prototype.wr = function (j) {
    return this.uo || (j.qT && this.id != L.Eb);
  };
  L.pI.prototype.Qo = function (j, q, m) {
    var n = new fd(q, !0);
    n.data = m;
    j.k(n);
  };
  L.pI.prototype.aff = function (j, q) {
    var m = new fd(_.E.c, !0);
    m.data = { R: _.Y.t5, $U: q };
    j.k(m);
  };
  L.pI.prototype.Fj = function (j, q, m) {
    q = j.h == null || this.bB.VZ(1) || this.bB.KL(1) ? q : null;
    var n = this.ou,
      G = this.BE;
    if (m) {
      n.x = Math.max(0, Math.min(j.r, n.x));
      n.y = Math.max(0, Math.min(j.$, n.y));
      G.x = Math.max(0, Math.min(j.r, G.x));
      G.y = Math.max(0, Math.min(j.$, G.y));
    }
    var W = L.jy.ci(n, G, q, !0, this.TX.cstr),
      k = W[0].x,
      T = W[0].y,
      b = new hk(k, T, W[1].x - k, W[1].y - T);
    if (m) {
      b.x = Math.max(b.x, 0);
      b.y = Math.max(b.y, 0);
    }
    return b;
  };
  L.pI.prototype.oo = function (j, q, m, n, G) {
    this.ahN = !0;
    if (this.tf()) return;
    this.AS = q;
    this.pu = !1;
    this.bB.oo(n);
    this.ou = j.I.sb(G.x, G.y);
    this.ou = L.YE.BU(j, this.ou, m);
    if (this.a6F(j, this.ou, n)) {
      this.uo = !0;
      this.eb = j.h.H.P();
      return;
    }
    this.Q7(j, m, n, G);
    j.I.qN = new hk();
  };
  L.pI.prototype.a6F = function (j, q, m) {
    var n = m.M(gn.X6),
      G = m.M(gn.O4);
    if (j.h && !n && !G && this.TX.binop == 0) return B.g0(q, j.h.N, j.h.H);
    return !1;
  };
  L.pI.prototype.C3 = function (j, q, m, n, G) {
    this.AS = q;
    if (this.r4) return;
    var W = j.I.sb(G.x, G.y);
    if (ea.gw(this.ou, W) * j.I.k3 > 5) {
      this.pu = !0;
      this.bB.C3();
    }
    if (n.M(gn.Xe)) {
      if (this.NF == null) this.NF = new ea(W.x - this.ou.x, W.y - this.ou.y);
      this.ou.x = W.x - this.NF.x;
      this.ou.y = W.y - this.NF.y;
    } else this.NF = null;
    this.BE = W;
    if (!this.uo && this.id != L.Eb) this.BE = L.YE.BU(j, this.BE, m);
    if (this.a6F(j, this.BE, n)) this.aff(q, "move");
    else this.aff(q, this.Jm);
    if (this.uo) {
      var k = this.eb.P();
      k.x += this.BE.x - this.ou.x;
      k.y += this.BE.y - this.ou.y;
      var T = L.YE.xO(j, k, m);
      j.h.H.x = Math.round(this.BE.x - this.ou.x + this.eb.x + T[0]);
      j.h.H.y = Math.round(this.BE.y - this.ou.y + this.eb.y + T[1]);
      j.hM = !0;
      L.YE.HJ(j, k, T);
      return;
    }
    this.dU(j, m, n, G, q);
    if (j.I.qN) j.I.qN = this.Fj(j, n);
  };
  L.pI.prototype.tf = function () {
    return !1;
  };
  L.pI.prototype.H_ = function (j, q, m, n, G, W) {
    var k = this.ahN;
    this.ahN = !1;
    if (W || !k) return;
    j.I.qN = null;
    this.BE = j.I.sb(G.x, G.y);
    this.BE = L.YE.BU(j, this.BE, m);
    if (this.uo) {
      this.uo = !1;
      if (j != null && j.W.x$) {
        j.W.x$ = null;
        j._F = !0;
      }
      if (this.BE.Lg(this.ou) && this.OE() == 0) {
        this.Qo(q, _.E.NI, L.pI.TP());
        return;
      }
      this.aKA(j, this.eb, j.h.H.P());
      return;
    }
    this.IB(j, m, n, G, q);
    L.pI.a3y(q, m);
    this.bB.H_();
    this.tR(q);
  };
  L.pI.prototype.aKA = function (j, q, m) {
    var n = j.iw();
    if (n != null && n.l == this && n.data.R == "movesel") {
    } else {
      n = new eN([7, 7], this);
      n.data = { R: "movesel", OM: q };
      j.Du(n);
    }
    n.data.ad = m;
    this.km(n.data, j);
  };
  L.pI.prototype.DC = function (j, q, m, n, G) {
    this.r4 = !0;
  };
  L.pI.prototype.FO = function (j, q, m, n, G) {
    var W = new fd(_.E.c, !0);
    W.data = { R: _.Y.vv, l: this.id, sy: G, sk: j, a: m };
    q.k(W);
    this.r4 = !1;
  };
  L.pI.prototype.uY = function (j, q, m, n) {
    this.bB.uY(n);
    if (j != null && j.h != null) {
      var G = n.m2();
      if (G.x != 0 || G.y != 0) {
        var W = j.h.H.P();
        W.x += G.x;
        W.y += G.y;
        this.aKA(j, j.h.H.P(), W);
      }
    }
    this.tR(q);
  };
  L.pI.prototype.tR = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = { R: _.Y.vv, l: this.id, uH: this.OE() };
    j.k(q);
  };
  L.pI.prototype.OE = function () {
    var j = this.bB.VZ(0),
      q = this.bB.KL(0);
    return L.pI.tI(this.TX.binop, j, q);
  };
  L.pI.tI = function (j, q, m) {
    if (q) j = 1;
    if (m) j = 2;
    if (q && m) j = 3;
    return j;
  };
  L.pI.prototype.finish = function (j, q, m, n) {
    var G = j.h,
      W = this.getSelection(j, q, m, n);
    if (W == null) W = L.pI.TP();
    else {
      var k = this.TX.feat,
        T = this.OE();
      if (k != 0) W.SC.Fthr = { t: "UntF", v: { type: "#Pxl", val: k } };
      if (T != 0 && T != 4)
        W._D = ["", "addTo", "subtractFrom", "interfaceWhite", ""][T];
    }
    this.Qo(this.AS, _.E.NI, W);
    this.ou.Tu(-1, -1);
    this.BE.Tu(-1, -1);
  };
  L.pI.prototype.getSelection = function (j, q, m, n) {
    return null;
  };
  L.pI.prototype.Q7 = function (j, q, m, n) {};
  L.pI.prototype.dU = function (j, q, m, n) {};
  L.pI.prototype.IB = function (j, q, m, n) {};
  L.pI.prototype.W6 = function (j, q) {
    var m = j.R;
    if (m == "changesel") {
      var n = q.h;
      q.h = j.h;
      j.h = n;
    }
    if (m == "movesel") q.h.H = j.OM;
    if (j._C) {
      if (j.aEv) {
        q.y2 = [q._E.length];
        q._E.push(j.aEv);
      } else {
        q._E.pop();
        q.y2 = [];
      }
    }
    if (j.OQ) {
      q.bR = JSON.parse(j.OQ[0]);
      q.H7 = JSON.parse(j.OQ[1]);
    }
    q.hM = !0;
  };
  L.pI.prototype.km = function (j, q) {
    var m = j.R;
    if (m == "changesel") {
      var n = q.h;
      q.h = j.h;
      j.h = n;
    }
    if (m == "movesel") q.h.H = j.ad;
    if (j._C) {
      if (j.a6x) {
        q.y2 = [q._E.length];
        q._E.push(j.a6x);
      } else {
        q._E.pop();
        q.y2 = [];
      }
    }
    if (j.OQ) {
      q.bR = JSON.parse(j.asM[0]);
      q.H7 = JSON.parse(j.asM[1]);
    }
    q.hM = !0;
  };
  L.pI.prototype._W = function (j) {
    return j.R == "changesel" && j.h ? j.h.N.length : 0;
  };
  L.pI.prototype.uS = function (j) {
    for (var q in j.TX) this.TX[q] = j.TX[q];
  };
  L.pI.prototype.a7J = function (j, q) {
    var m = B.b.YU(j.L);
    if (m.jG()) return null;
    var n = B.l4(m.r, m.$);
    n.save();
    n.beginPath();
    n.translate(-m.x, -m.y);
    Typr.U.pathToContext({ cmds: j.RC, crds: j.L }, n);
    n.closePath();
    n.fill();
    n.restore();
    var G = B.j(m.C()),
      W = n.getImageData(0, 0, m.r, m.$);
    B.Ih(new Uint8Array(W.data.buffer), G, 3);
    if (q != 8) G = B.sL(G, q);
    return { H: m, N: G };
  };
  L.pI.abL = function (j, q, m, n, G) {
    if (m) q = Math.round(q * 0.7);
    var W = Math.ceil(2.6 * q),
      k = j.H.P();
    k.Lh(W, W);
    if (n && !G) k = k.TM(n);
    var T = B.j(k.C(), B.oM(j.N));
    B.sN(j.N, j.H, T, k);
    B.Zl.oY(T, k, q);
    if (m) {
      var b = T.length,
        c = B.TN(B.oM(T)),
        a = c / 2;
      for (var y = 0; y < b; y++) {
        var f = (T[y] - a) * q * 2.5;
        T[y] = Math.max(0, Math.min(c, a + f));
      }
    }
    return { N: T, H: k };
  };
  L.pI.aFO = function (j, q, m) {
    var n = B.oM(j.N),
      G = B.sL(j.N, 8),
      W = Math.max(1, Math.ceil(m)),
      k = j.H.P();
    k.Lh(W, W);
    var T = k.C(),
      b = { N: B.j(T), H: k },
      c = B.j(T);
    B.sN(G, j.H, c, b.H);
    if (m != 0) B.style.stroke(c, b.N, b.H, m);
    else B.wV(c, b.N);
    var a = B.j(T);
    B.BR(c);
    if (q != 0) B.style.stroke(c, a, b.H, q);
    else B.wV(c, a);
    B.hV.TM(b.N, a, b.N);
    b.N = B.sL(b.N, n);
    return b;
  };
  L.pI.VQ = function (j, q, m, n, G) {
    var W = new hk(0, 0, j.r, j.$),
      k = j.ht();
    if (j.h) {
      var T = j.h.H.TM(W),
        b = B.j(T.C() * 4, j.depth);
      B.M4(k, W, b, T);
      W = T;
      k = b;
    }
    var c = W.C(),
      a = B.j(c, j.depth),
      f = 1 / n,
      U = 255 / B.TN(j.depth);
    if (G) {
      if (q >= m) q = m - 1;
      var Z = q * (1 - n),
        h = q,
        u = m,
        i = m + (255 - m) * n,
        x = Z == h ? 0 : 1 / (h - Z),
        X = u == i ? 0 : 1 / (i - u);
      for (var y = 0; y < c; y++) {
        var $ = y << 2,
          H = B.he(k[$] * U, k[$ + 1] * U, k[$ + 2] * U),
          C = 0;
        if (H < Z) C = 0;
        else if (H < h) C = (H - Z) * x;
        else if (H <= u) C = 1;
        else if (H <= i) C = 1 - (H - u) * X;
        else C = 0;
        a[y] = k[$ + 3] * C * C;
      }
    } else
      for (var y = 0; y < c; y++) {
        var $ = y << 2,
          l = B.fa(k[$] * U, k[$ + 1] * U, k[$ + 2] * U),
          C = B.aDX(l, q, m, n, f);
        a[y] = k[$ + 3] * C;
      }
    return { H: W, N: a };
  };
  L.i$ = function () {
    L.tt.call(this, [10, 18], L.Mx, "tools/blur");
    this.Qs = "copy";
  };
  L.i$.prototype = new L.tt();
  L.i$.prototype.oo = function (j, q, m, n, G) {
    var W = n.M(gn.O4) ? e4.Xu : e4.Mx;
    this.vh(j, m, n, G, this.TX.strn, W);
    if (this.ok == null) return;
    this.Am(j);
  };
  L.i$.prototype.C3 = function (j, q, m, n, G) {
    this.BX(j, q, m);
    if (this.Oc) this.UI(j, m, G);
    if (this.ok == null) return;
    if (!G.qT) return;
    this.Df(j, m, n, G);
    this.Am(j);
  };
  L.IE = function () {
    L.tt.call(this, [10, 0], L.cS, "tools/brush");
    this.Qs = "draw";
  };
  L.IE.prototype = new L.tt();
  L.IE.prototype.oo = function (j, q, m, n, G) {
    if (this.dr(j, q, m, n, G, !0)) return;
    this.vh(j, m, n, G, this.TX.flow);
    if (this.ok == null) return;
    this.Am(j);
  };
  L.IE.prototype.C3 = function (j, q, m, n, G) {
    if (this.dr(j, q, m, n, G)) return;
    this.BX(j, q, m);
    if (this.Oc) this.UI(j, m, G);
    if (this.ok == null) {
      if (j) j.A$();
      return;
    }
    if (!G.qT) return;
    this.Df(j, m, n, G);
    this.Am(j);
  };
  L.QE = function () {
    L.tt.call(this, [10, 42], L.yK, "tools/crepl");
    this.Qs = "idraw";
    this.TX.bmode = "hue ";
  };
  L.QE.prototype = new L.tt();
  L.QE.prototype.oo = function (j, q, m, n, G) {
    if (this.dr(j, q, m, n, G, !0)) return;
    this.vh(j, m, n, G, this.TX.flow);
    if (this.ok == null) return;
    this.Am(j);
  };
  L.QE.prototype.C3 = function (j, q, m, n, G) {
    if (this.dr(j, q, m, n, G)) return;
    this.BX(j, q, m);
    if (this.Oc) this.UI(j, m, G);
    if (this.ok == null) return;
    if (!G.qT) return;
    this.Df(j, m, n, G);
    this.Am(j);
  };
  L.sh = function () {
    L.tt.call(this, [10, 43], L.qt, "tools/redeye");
    this.TX.smode = 0;
    this.Qs = "redeye";
  };
  L.sh.prototype = new L.tt();
  L.sh.prototype.oo = function (j, q, m, n, G) {
    this.vh(j, m, n, G, this.TX.flow);
    if (this.ok == null) return;
    this.Am(j);
  };
  L.sh.prototype.C3 = function (j, q, m, n, G) {
    this.BX(j, q, m);
    if (this.Oc) this.UI(j, m, G);
    if (this.ok == null) return;
    if (!G.qT) return;
    this.Df(j, m, n, G);
    this.Am(j);
  };
  L.XG = function () {
    L.tt.call(this, [10, 38], L.$o, "tools/pencil");
    this.Qs = "draw";
  };
  L.XG.prototype = new L.tt();
  L.XG.prototype.oo = function (j, q, m, n, G) {
    if (this.dr(j, q, m, n, G, !0)) return;
    this.vh(j, m, n, G, this.TX.flow);
    if (this.ok == null) return;
    this.Am(j);
  };
  L.XG.prototype.C3 = function (j, q, m, n, G) {
    if (this.dr(j, q, m, n, G)) return;
    this.BX(j, q, m);
    if (this.Oc) this.UI(j, m, G);
    if (this.ok == null) {
      if (j) j.A$();
      return;
    }
    if (!G.qT) return;
    this.Df(j, m, n, G);
    this.Am(j);
  };
  L.M1 = function () {
    L.tt.call(this, [10, 22], L.kS, "tools/burn");
    this.Qs = "burn";
  };
  L.M1.prototype = new L.tt();
  L.M1.prototype.oo = function (j, q, m, n, G) {
    this.vh(j, m, n, G, this.TX.expo / Math.E);
    if (this.ok == null) return;
    this.Am(j);
  };
  L.M1.prototype.C3 = function (j, q, m, n, G) {
    this.BX(j, q, m);
    if (this.Oc) this.UI(j, m, G);
    if (this.ok == null) return;
    if (!G.qT) return;
    this.Df(j, m, n, G);
    this.Am(j);
  };
  L.mn = function (j, q, m) {
    L.tt.call(
      this,
      j == "" ? null : j ? j : [10, 1],
      q ? q : L.A7,
      m ? m : "tools/clone"
    );
    this.Qs = "clone";
    this.mD = null;
    this.g = null;
  };
  L.mn.prototype = new L.tt();
  L.mn.prototype.oo = function (j, q, m, n, G) {
    var W = this.TX,
      k = W.alt[0];
    if (n.M(gn.O4) || n.M(gn.aj) || k) {
      this.mD = j.I.sb(G.x, G.y);
      this.g = null;
      if (k) this.Ut({ alt: [!1] }, q);
      this.w7(j);
      this.Vn(m, n, j, G);
      return;
    }
    if (this.mD == null) {
      alert(g$.get([15, 7, 0]));
      return;
    }
    this.Vn(m, n);
    this.vh(j, m, n, G, this.TX.flow);
    if (this.ok == null) return;
    this.g = this.anb(j.I.sb(G.x, G.y));
    this.Am(j);
  };
  L.mn.prototype.anb = function (j) {
    var q = this.g;
    if (q == null || !this.TX.algnd)
      q = new ea(Math.round(j.x - this.mD.x), Math.round(j.y - this.mD.y));
    return q;
  };
  L.mn.prototype.C3 = function (j, q, m, n, G) {
    this.BX(j, q, m);
    if (this.Oc) this.UI(j, m, G);
    if (this.ok == null) {
      if (this.mD != null) this.Vn(m, n, j, G);
      return;
    }
    if (!G.qT || this.mD == null) return;
    this.Df(j, m, n, G);
    this.Am(j);
  };
  L.mn.prototype.om = function () {
    return this.g;
  };
  L.nj = function () {
    L.ju.call(this, [10, 53], L.a0a, "tools/csamp");
    this.J1 = -1;
    this.od = null;
  };
  L.nj.prototype = new L.ju();
  L.nj.prototype.oo = function (j, q, m, n, G) {
    this.od = JSON.stringify(j.jE);
    var W = j.I.sb(G.x, G.y),
      k = j.jE,
      T = 1e9,
      b = -1;
    for (var y = 0; y < k.length; y++) {
      var c = k[y],
        a = W.x - c.x,
        f = W.y - c.y,
        U = a * a + f * f;
      if (U < T) {
        T = U;
        b = y;
      }
    }
    var Z = 15 / j.I.k3;
    b = T < Z * Z ? b : -1;
    if (b == -1) {
      b = k.length;
      k.push({ x: W.x, y: W.y });
    } else if (n.M(gn.O4)) {
      k.splice(b, 1);
      b = -1;
    }
    this.J1 = b;
    j._F = !0;
  };
  L.nj.prototype.C3 = function (j, q, m, n, G) {
    var W = this.J1;
    if (W != -1) {
      var k = j.I.sb(G.x, G.y);
      j.jE[W].x = k.x;
      j.jE[W].y = k.y;
      j._F = !0;
    }
  };
  L.nj.prototype.H_ = function (j, q, m, n, G, W) {
    var k = new eN(this.name, this);
    k.data = { pv: this.od, jt: JSON.stringify(j.jE) };
    j.Du(k);
    this.J1 = -1;
  };
  L.nj.prototype.W6 = function (j, q) {
    q.jE = JSON.parse(j.pv);
  };
  L.nj.prototype.km = function (j, q) {
    q.jE = JSON.parse(j.jt);
  };
  L.xC = function (j, q, m) {
    L.ju.call(this, j, q, m);
    this.TX = { On: { t: 0, x: 0, y: 0 }, J0: !1, Xt: !1 };
    this.oR = !1;
    this.Jm = L.OZ();
    this.db = null;
    this.cursor = null;
    this.a0C = 0;
    this.Aw = null;
    this.ou = null;
    this.a45 = null;
    this.ais = !1;
    this.GZ = !1;
  };
  L.xC.prototype = new L.ju();
  L.xC.prototype.bx = function () {
    return this.db != null;
  };
  L.xC.prototype.wr = function (j) {
    return this.ou != null || (this.db && this.db.afU());
  };
  L.xC.prototype.oo = function (j, q, m, n, G) {
    this.Aw = G;
    var W = j.I.sb(G.x, G.y),
      k = this.TX.On,
      T = k.t != 0 ? k.x / k.y : null,
      b = this.ais;
    this.ais = !1;
    if (this.db) {
      var c = this.db.Xy(W, j.I.k3);
      if (b && c == null) {
        this.db.clear(j);
        this.db = null;
      } else {
        this.db.oo(j, m, n, W, T, !1, G);
        this.GZ = !1;
        return;
      }
    }
    this.ou = L.YE.BU(j, W, m);
  };
  L.xC.prototype.zK = function (j, q, m) {
    if (m == null)
      m = [j.x, j.y, j.x + j.r, j.y, j.x + j.r, j.y + j.$, j.x, j.y + j.$];
    return new bn(
      m,
      !0,
      !1,
      this.id == L.N5,
      !0,
      q,
      this.id == L.N5 ? 2 : 0,
      this.id == L.N5 ? 4 : 3
    );
  };
  L.xC.prototype.Vn = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = { R: _.Y.t5, $U: this.cursor };
    j.k(q);
  };
  L.xC.prototype.enable = function (j, q, m, n) {
    this.AS = q;
    this.cursor = this.Jm;
    this.Vn(q);
    if (j != null && this.db == null) {
      var G = j.h
        ? { mu: "cropby", aeU: 3 }
        : { mu: "config", TX: this.TX, aaI: !0 };
      this.uS(G, q, j, n, m);
      if (j.h == null && this.TX.On.t == 0) this.ais = !0;
      this.GZ = !0;
    }
  };
  L.xC.prototype.C3 = function (j, q, m, n, G) {
    this.Aw = G;
    var W = j.I.sb(G.x, G.y);
    if (!G.qT) {
      var k = this.Jm;
      if (this.db) {
        var T = this.db.Xy(W, j.I.k3, null, G);
        if (T) k = T;
        else k = "default";
      }
      if (k != this.cursor) {
        this.cursor = k;
        this.Vn(q);
      }
    }
    if (this.db) this.db.C3(j, m, n, W);
    else if (this.ou) {
      if (this.oR) {
        j.W.cT = { RC: ["M", "L"], L: [this.ou.x, this.ou.y, W.x, W.y] };
      } else {
        var b = L.jy.ci(this.ou, L.YE.BU(j, W, m), n, !0, this.TX.On),
          c = b[0].x,
          a = b[0].y,
          f = (this.a45 = new hk(c, a, b[1].x - c, b[1].y - a));
        j.W.cT = B.b._c(f);
        L.ju.G0(G, f, j, m);
      }
      j._F = !0;
    }
  };
  L.xC.a7Q = function (j, q, m) {
    var n, G, T, b;
    if (q <= m) {
      n = q;
      G = m;
    } else {
      n = m;
      G = q;
    }
    var W = j - Math.floor((j + Math.PI) / (2 * Math.PI)) * 2 * Math.PI;
    W = Math.abs(W);
    if (W > Math.PI / 2) W = Math.PI - W;
    var k = n / (G * Math.sin(W) + n * Math.cos(W));
    if (q <= m) {
      T = n * k;
      b = G * k;
    } else {
      T = G * k;
      b = n * k;
    }
    return { GM: T, uu: b };
  };
  L.xC.prototype.H_ = function (j, q, m, n, G) {
    this.Aw = G;
    var W = j.I.sb(G.x, G.y);
    if (this.db == null) {
      var k = this.a45;
      if (this.ou && (k || this.oR)) {
        if (this.oR) {
          var T = this.ou,
            b = W,
            c = b.x - T.x,
            a = b.y - T.y;
          if (Math.abs(c) < Math.abs(a)) b = new ea(T.x - a, T.y + c);
          if (T.x > b.x) {
            var f = T;
            T = b;
            b = f;
          }
          var T = Math.atan2(-(b.y - T.y), b.x - T.x),
            U = L.xC.a7Q(T, j.r, j.$);
          if (this.TX.Xt) {
            var Z = B.b._c(new hk(0, 0, j.r, j.$)),
              h = new k$();
            h.rotate(T);
            B.b.u(Z.L, h, Z.L);
            U = B.b.YU(Z.L);
            U = { GM: U.r, uu: U.$ };
          }
          var u = [0, 0, U.GM, 0, U.GM, U.uu, 0, U.uu],
            i = new k$();
          i.translate(-U.GM / 2, -U.uu / 2);
          i.rotate(T);
          i.translate(j.r / 2, j.$ / 2);
          B.b.u(u, i, u);
          this.db = this.zK(k, !1, u);
          this.oR = !1;
        } else {
          var x = this.TX.On;
          this.db = this.zK(k, x.t != 0);
        }
        this.GZ = !1;
        this.db.d4(j, m);
        this.a45 = null;
        this.Qo(q, _.E.c, { R: _.Y.vv, l: this.id, f1: !0 });
        this.ou = null;
        j.W.Z9 = [];
        j.W.cT = null;
        j._F = !0;
      }
      return;
    }
    this.db.H_(j, m, n, W);
    this.Qo(q, _.E.c, { R: _.Y.vv, l: this.id, f1: !0 });
    var u = this.db.Iy();
    if (Math.abs(u[0] - u[4]) < 2 && Math.abs(u[1] - u[5]) < 2) {
      this.nW(j, q, null, n);
      return;
    }
    if (Date.now() - this.a0C < 200 && this.db.VG(W)) {
      this.H3(j, m);
      this.nW(j, q, m, n);
      return;
    }
    this.a0C = Date.now();
  };
  L.xC.prototype.uY = function (j, q, m, n) {
    var G = this.db;
    if (G == null || (this.Aw && this.Aw.qT)) return;
    if (n.M(gn.FP)) {
      this.H3(j, m);
      this.nW(j, q, m, n);
    } else if (n.M(gn.k9)) {
      this.nW(j, q, m, n);
    } else G.uY(j, m, n);
  };
  L.xC.agF = function (j, q, m) {
    var n = {
      classID: "null",
      T: {
        t: "Objc",
        v: {
          classID: "Rctn",
          Top: { t: "UntF", v: { type: "#Pxl", val: j[1] } },
          Left: { t: "UntF", v: { type: "#Pxl", val: j[0] } },
          Btom: { t: "UntF", v: { type: "#Pxl", val: j[1] + j[3] } },
          Rght: { t: "UntF", v: { type: "#Pxl", val: j[0] + j[2] } },
        },
      },
      Angl: { t: "UntF", v: { type: "#Ang", val: q != null ? q : 0 } },
      Dlt: { t: "bool", v: m != null ? m : !0 },
      cropAspectRatioModeKey: {
        t: "enum",
        v: { cropAspectRatioModeClass: "pureAspectRatio" },
      },
      CnsP: { t: "bool", v: !1 },
    };
    return { _D: "crop", SC: n };
  };
  L.xC.$0 = function (j, q) {
    if (q == null) q = [!0, !0, !0, !0];
    var m = {
        classID: "trim",
        trimBasedOn: {
          t: "enum",
          v: {
            trimBasedOn: ["topLeftPixelColor", "bottomRightPixelColor", "Trns"][
              j
            ],
          },
        },
      },
      n = ["Top", "Left", "Btom", "Rght"];
    for (var y = 0; y < 4; y++) m[n[y]] = { t: "bool", v: q[y] };
    return { _D: "trim", SC: m };
  };
  L.xC.ly = function (j, q, m, n, G) {
    var W = { classID: "null" };
    if (n != null) {
      W.Wdth = {
        t: "UntF",
        v: G ? { type: "#Prc", val: j * 100 } : { type: "#Pxl", val: j },
      };
      W.Hght = {
        t: "UntF",
        v: G ? { type: "#Prc", val: q * 100 } : { type: "#Pxl", val: q },
      };
      W.Intr = {
        t: "enum",
        v: { Intp: ["Nrst", "Blnr", "bicubicSharper"][n] },
      };
    }
    if (m != null) W.Rslt = { t: "UntF", v: { type: "#Rsl", val: m } };
    return { _D: "imageSize", SC: W };
  };
  L.xC.aDh = function (j, q, m, n) {
    if (m == null) m = 4;
    if (n == null) n = !1;
    var G = Math.floor(m / 3),
      W = m % 3;
    return {
      _D: "canvasSize",
      SC: {
        classID: "null",
        Wdth: { t: "UntF", v: { type: "#Pxl", val: j } },
        Hght: { t: "UntF", v: { type: "#Pxl", val: q } },
        Hrzn: { t: "enum", v: { HrzL: ["Left", "Cntr", "Rght"][W] } },
        Vrtc: { t: "enum", v: { VrtL: ["Top", "Cntr", "Btom"][G] } },
        Rltv: { t: "bool", v: n },
      },
    };
  };
  L.xC.prototype.BT = function (j, q, m, n, G) {
    var W = new hk(0, 0, m.r, m.$),
      k = [11, 3],
      T = m.zv,
      b = m.r / 2,
      c = m.$ / 2,
      dq = 1,
      es,
      kR,
      eH;
    function a(aI, y) {
      return (aI[y] + 2 * aI[y + 1] + aI[y + 2]) >>> 2;
    }
    if (j.R == "cropAndStr") {
      var f = m.U[m.J[0]],
        U = f.buffer,
        Z = f.H,
        h = Z.r,
        u = Z.$,
        i = h + 2,
        x = [0, 0, h - 1, 0, h - 1, u - 1, 0, u - 1],
        X,
        $ = 1e9,
        Y = 0;
      for (var y = 0; y < 4; y++)
        for (var H = y + 1; H < 4; H++) {
          var C = x[2 * y],
            l = x[2 * y + 1],
            v = (l * h + C) * 4,
            K = (x[2 * H + 1] * h + x[2 * H]) * 4,
            S = U[v] - U[K],
            o = U[v + 1] - U[K + 1],
            V = U[v + 2] - U[K + 2],
            P = S * S + o * o + V * V;
          if (P < $) {
            $ = P;
            X = new ea(C + 0.5, l + 0.5);
          }
        }
      var z = Date.now(),
        E = L.y4.o4(f.buffer, Z, X, null, [16, !1, !0]);
      B.BR(E);
      var A = Z.P();
      A.Lh(1, 1);
      var N = B.j(A.C());
      B.sN(E, Z, N, A);
      var Q = N.slice(0);
      for (var l = 0; l < u; l++)
        for (var C = 0; C < h; C++) {
          var H = l * h + C;
          if (E[H] == 255 && a(U, H * 4) > 200) {
            var y = (l + 1) * i + C + 1;
            N[y] = Q[y - i] & Q[y - 1] & Q[y + 1] & Q[y + i];
          }
        }
      var e = B.b.$r(N, A.r, A.$, 0),
        d = new fd(_.E.c, !0);
      d.data = { R: _.Y.ED };
      var z = Date.now();
      for (var I = 0; I < e.length; I++) {
        var O = e[I].path.L;
        if (e[I].gX.C() < 2500) continue;
        var s = B.b.afF(O, Y == 3);
        for (var y = 0; y < s.length; y++) s[y] -= 1;
        var p = new ea(s[0], s[1]),
          F = Math.ceil(ea.gw(p, new ea(s[2], s[3]))),
          g = Math.ceil(ea.gw(p, new ea(s[6], s[7]))),
          w = new hk(0, 0, F, g),
          r = B.j(w.C() * 4),
          O = B.B.Ht(s, new hk(-1, -1, F + 2, g + 2));
        O = B.B.BR(O);
        O = B.B.J5(O, B.B.gb(new k$(Z.r, 0, 0, Z.$, Z.x, Z.y)));
        B.B.drawImage(O, f.buffer, Z.r, Z.$, r, w);
        Y++;
        var eQ = (d.data.fg = new fb("Image " + Y + ".psd"));
        eQ.r = F;
        eQ.$ = g;
        var t = eQ.dj();
        t.tV("Background");
        t.buffer = r;
        t.H = w;
        eQ.U.push(t);
        q.k(d);
      }
      return;
    }
    if (j.R == "fromAction") {
      var D = j.tp,
        ha = D._D,
        am = D.SC,
        k4 = m.r / m.$,
        i = am.Wdth ? am.Wdth.v.val : -1,
        aA = am.Hght ? am.Hght.v.val : -1,
        T = am.Rslt ? am.Rslt.v.val : null,
        ex = am.Wdth ? am.Wdth.v.type : am.Hght ? am.Hght.v.type : -1,
        ac = 1,
        eJ;
      if (ex == "#Prc") {
        if (i != -1) i = Math.round((m.r * i) / 100);
        if (aA != -1) aA = Math.round((m.$ * aA) / 100);
      }
      if (ha == "imageSize") {
        if (am.Intr) {
          if (am.Intr.v.Intp == "Nrst") ac = 0;
          if (am.Intr.v.Intp == "bicubicSharper") ac = 2;
          if (i == -1 && aA == -1) {
            var h$ = T / m.zv;
            i = Math.round(m.r * h$);
            aA = Math.round(m.$ * h$);
          }
          if (am.CnsP && am.CnsP.v) {
            if (i == -1) i = Math.round(aA * k4);
            if (aA == -1) aA = Math.round(i / k4);
          }
        } else {
          if (ex == "#Prc") T = Math.round(m.zv * (m.r / i));
          else if (ex == -1) T = Math.round(T);
          else throw "e";
          i = m.r;
          aA = m.$;
        }
        eJ = { R: "imgsize", $u: i, ZD: aA, Ng: T, X4: ac };
      } else if (ha == "canvasSize") {
        if (i == -1) i = m.r;
        if (aA == -1) aA = m.$;
        if (am.Rltv && am.Rltv.v == !0) {
          if (am.Wdth) i += m.r;
          if (am.Hght) aA += m.$;
        }
        var da = am.Vrtc ? am.Vrtc.v.VrtL : "Cntr",
          bb = am.Hrzn ? am.Hrzn.v.HrzL : "Cntr";
        eJ = {
          R: "canvsize",
          $u: i,
          ZD: aA,
          Kj:
            3 * ["Top", "Cntr", "Btom"].indexOf(da) +
            ["Left", "Cntr", "Rght"].indexOf(bb),
        };
      } else if (ha == "revealAll") {
        eJ = { R: "revealAll" };
      } else if (ha == "trim") {
        var gb = { topLeftPixelColor: 0, bottomRightPixelColor: 1, Trns: 2 }[
          am.trimBasedOn.v.trimBasedOn
        ];
        if (gb == null) throw "e";
        var fM = ["Top", "Left", "Btom", "Rght"],
          kS = [!0, !0, !0, !0];
        for (var y = 0; y < 4; y++) if (am[fM[y]]) kS[y] = am[fM[y]].v;
        eJ = { R: "trim", alW: gb, Z5: kS };
      } else if (ha == "crop") {
        var C, l, h, u;
        if (am.T) {
          var cY = am.T.v,
            C = Math.round(cY.Left.v.val),
            l = Math.round(cY.Top.v.val),
            h = Math.round(cY.Rght.v.val) - C,
            u = Math.round(cY.Btom.v.val) - l;
        } else {
          var Z = m.h.H;
          C = Z.x;
          l = Z.y;
          h = Z.r;
          u = Z.$;
        }
        eJ = {
          R: "canvsize",
          $u: h,
          ZD: u,
          g: new ea(C, l),
          aDE: am.Dlt != null && am.Dlt.v,
        };
      } else console.log(D);
      if (eJ) this.BT(eJ, q, m, n, G);
      return;
    } else if (j.R == "imgsize") {
      W = new hk(0, 0, j.$u, j.ZD);
      if (j.Ng) T = j.Ng;
      dq = j.X4;
    } else if (j.R == "canvsize") {
      var cS = j.Kj != null ? j.Kj : 0;
      W = new hk(0, 0, j.$u, j.ZD);
      var k3 = m.r - j.$u,
        di = m.$ - j.ZD,
        a7 = Math.round(k3 / 2),
        b0 = Math.round(di / 2);
      if (cS == 1 || cS == 4 || cS == 7) W.x = a7;
      if (cS == 2 || cS == 5 || cS == 8) W.x = k3;
      if (cS == 3 || cS == 4 || cS == 5) W.y = b0;
      if (cS == 6 || cS == 7 || cS == 8) W.y = di;
      if (j.g) {
        W.x = j.g.x;
        W.y = j.g.y;
      }
    } else if (j.R == "rot" && (j.K + 2 * Math.PI) % (Math.PI / 2) != 0) {
      var e1 = B.b._c(W).L,
        l2 = new k$();
      l2.translate(-b, -c);
      l2.rotate(j.K);
      l2.translate(b, c);
      B.b.u(e1, l2, e1);
      W = B.b.YU(e1);
    } else if (j.R == "rot" && j.K != Math.PI && j.K != -Math.PI) {
      W = new hk(b - m.$ / 2, c - m.r / 2, m.$, m.r);
      if (((m.r + m.$) & 1) == 1) {
        b = Math.floor(b);
        c = Math.floor(c);
        W = new hk(b - Math.floor(m.$ / 2), c - Math.floor(m.r / 2), m.$, m.r);
        if ((m.r & 1) == 1 && j.K != -Math.PI / 2) W.y--;
        if ((m.$ & 1) == 1 && j.K == -Math.PI / 2) W.x--;
      }
    } else if (j.R == "trim") {
      k = [11, 12, 0];
      var kL = m.ht(),
        Z = new hk(0, 0, m.r, m.$);
      W = B.Xh(kL, Z, j.alW, j.Z5);
      if (W.jG()) W = Z;
    } else if (j.R == "revealAll") {
      k = [11, 12, 2];
      W = m.root.Fj(m, !0);
    }
    var cZ = j.R == "canvsize" && j.aDE;
    if (j.R == "imgsize" || j.R == "rot" || j.R == "scl" || cZ) {
      var ga = new k$();
      if (j.R == "imgsize") {
        k = [11, 10];
        ga.scale(j.$u / m.r, j.ZD / m.$);
        eH = m.f8();
        for (var y = 0; y < eH[0].length; y++)
          eH[0][y][1] *= eH[0][y][0] == 0 ? ga.Sd : ga.Jy;
      } else if (cZ) {
      } else {
        ga.translate(-b, -c);
        if (j.R == "rot") ga.rotate(j.K);
        if (j.R == "scl") ga.scale(j.K.x, j.K.y);
        ga.translate(b, c);
        k = j.ER;
      }
      kR = B.B.gb(ga);
      es = this.b7(m, G, !0, kR, dq, cZ ? W : null);
    } else if (j.R == "auto-align") {
      if (m.J.length < 2) {
        alert("Select two or more layers.");
        return;
      }
      var fi = [];
      for (var y = 0; y < m.J.length; y++) {
        var f = m.U[m.J[y]];
        if (!f.bm() && f.add.SoLd == null) {
          alert("Unsupported layer selected.");
          return;
        }
        if (f.H.jG()) {
          alert("Empty layer selected.");
          return;
        }
        fi.push([f.buffer, f.H]);
      }
      var go = B.Cr.LR(fi);
      if (go == null) {
        alert("No similarity found.");
        return;
      }
      kR = go[1];
      es = this.b7(m, G, !1, go, dq);
      W = m.root.Fj(m, !0);
      k = [2, 10, 1];
    }
    var iz = new hk(0, 0, m.r, m.$);
    if (!W.jG() && (!W.Lg(iz) || es != null)) {
      var i5 = new eN(k, this);
      i5.data = {
        aaL: m.zv,
        Ng: T,
        os: es,
        a3o: kR,
        GI: L.xC.a4W(m, W, iz, es != null),
      };
      if (eH) {
        i5.data.Dj = m.f8();
        i5.data.mt = eH;
      }
      L.xC.as0(m, i5.data, W);
      m.Du(i5);
      this.km(i5.data, m, !0);
    }
  };
  L.xC.a4W = function (j, q, m, n) {
    if (j.gQ.length == 0) return null;
    var G = JSON.stringify(j.gQ),
      W = JSON.parse(G);
    L.ct.auQ(W, q, m, n);
    W = JSON.stringify(W);
    return [G, W];
  };
  L.xC.prototype.b7 = function (j, q, m, n, G, W, k) {
    var T = { U: [], KN: null, a1Z: !0 };
    if (m) T.U = L.Dq.rR(j);
    else T.U = j.J.slice(0);
    T.KN = L.Dq.zD(j, T.U, !0);
    var b = Math.abs(n[3] * n[1]) > 1e-9;
    L.Dq.iZ(j, q, T.U, T.KN, G, n, null, !0, b && B.B.hE(n) ? null : W);
    if (m && k && j.Ph()) {
      var c = j.U[j.J[0]],
        a = c.buffer,
        f = c.H,
        U = b ? f.P() : W.P(),
        Z = B.j(U.C() * 4),
        h = B.j(f.C());
      B.Ih(a, h, 3);
      var u = B.j(U.C());
      B.sN(h, f, u, U);
      B.round(u, 255);
      B.BR(u);
      var i = B.EP.AC(a, f, u, Z, U);
      if (i == 0) {
        c.H = U;
        c.buffer = Z;
      }
    }
    return T;
  };
  L.xC.prototype.km = function (j, q, m) {
    if (j.Ng) q.zv = j.Ng;
    if (j.GI) q.gQ = JSON.parse(j.GI[1]);
    if (j.os) {
      L.xC.pW(q, B.B.Kn(j.a3o));
      if (m == null) L.Dq.j2(q, j.os);
      if (j.mt) q.gE(j.mt);
    }
    L.xC.O1(q, j);
  };
  L.xC.prototype.W6 = function (j, q) {
    if (j.aaL) q.zv = j.aaL;
    if (j.GI) q.gQ = JSON.parse(j.GI[0]);
    L.xC.ae(q, j);
    if (j.Hl) q.I.g.qE(j.Hl);
    q.a9p();
    if (j.os) {
      var m = B.B.Kn(j.a3o).P();
      m.BR();
      L.xC.pW(q, m);
      L.Dq.j2(q, j.os);
      if (j.Dj) q.gE(j.Dj);
    }
  };
  L.xC.pW = function (j, q) {
    for (var y = 0; y < j.U.length; y++) {
      var m = j.U[y];
      if (m.add.artb == null) continue;
      var n = B.b._c(m.Li()).L;
      B.b.u(n, q, n);
      var G = B.b.YU(n);
      m.KP(G);
    }
  };
  L.xC.IU = function (j) {
    var q = new hk(),
      m = 0,
      n = j.root.children.length;
    for (var y = 0; y < n; y++) {
      var G = j.root.children[y].v;
      if (G.add.artb == null) continue;
      q = q.vd(G.Li());
      m++;
    }
    var W = new hk(0, 0, j.r, j.$);
    if (!q.jG() && !W.Lg(q)) return q;
    return null;
  };
  L.xC.jQ = function (j) {
    var q = L.xC.IU(j);
    if (q) L.xC.J0(j, q, !0);
    return q;
  };
  L.xC.J0 = function (j, q, m) {
    var n = j.r,
      G = j.$,
      W = q.r,
      k = q.$,
      T = q.x == 0 && q.y == 0;
    if (T && n == W && G == k) return;
    j.r = W;
    j.$ = k;
    var b = [];
    for (var y = 0; y < j.U.length; y++) b.push(y);
    if (!T) L.YE.kW(j, b, null, -q.x, -q.y);
    for (var y = 0; y < j.U.length; y++) {
      j.U[y].D5(j);
    }
    j.a9p();
    if (m) {
      var c = j.I.g,
        a = j.I.k3;
      c.x += Math.round((q.x + (W - n) / 2) * a);
      c.y += Math.round((q.y + (k - G) / 2) * a);
    } else j.I.g.Tu(0, 0);
    if (j.h) j.h.H.offset(-q.x, -q.y);
    var f = j.f8();
    for (var U = 0; U < f[0].length; U++)
      if (f[1][U] == -1) {
        var Z = j.M3[U];
        Z[1] -= Z[0] == 0 ? q.x : q.y;
      }
    for (var y = 0; y < j._E.length; y++) j._E[y].H.offset(-q.x, -q.y);
    for (var y = 0; y < j.GA.length; y++)
      B.z.La(j.GA[y].add.vmsk.D, new k$(1, 0, 0, 1, -q.x, -q.y));
  };
  L.xC.prototype.uS = function (j, q, m, n, G) {
    if (j.mu == "commit") {
      this.H3(m, G);
      this.nW(m, q, null, n);
    } else if (j.mu == "cancel") {
      this.nW(m, q, null, n);
    }
    var W = null,
      k = new hk(0, 0, m.r, m.$),
      T = this.TX.On;
    if (j.mu == "config") {
      this.TX = j.TX;
      T = this.TX.On;
      if (m == null || !j.aaI) return;
      W = k;
      if (T.t == 1) {
        var b = T.x / T.y;
        if (W.r / b < W.$) W.$ = Math.round(W.r / b);
        else W.r = Math.round(W.$ * b);
      }
      if (T.t == 2) {
        W.r = T.x;
        W.$ = T.y;
      }
      W.x = Math.round((m.r - W.r) / 2);
      W.y = Math.round((m.$ - W.$) / 2);
      this.GZ = !1;
    }
    if (j.mu == "straighten") {
      alert("Draw a line in the image.");
      this.oR = !0;
    }
    if (j.mu == "cropby") {
      if (m == null) return;
      var c = j.aeU,
        W;
      if (c == 0) W = m.root.Fj(m, !0);
      if (c == 1) {
        if (m.J.length == 0) alert("No layer is selected.");
        else {
          var a = m.root.Zg(m.J[0]);
          W = a.Fj(m, !0);
        }
      }
      if (c == 2) {
        if (m.J.length == 0) alert("No layer is selected.");
        else {
          W = B.Xh(m.ht(), k, 0);
          if (W.jG()) W = k.P();
        }
      }
      if (c == 3) {
        if (m.h != null) W = m.h.H;
        else alert("There is no selection.");
      }
      if (c == 4) {
        W = new hk(0, 0, m.r, m.$);
      }
    }
    if (W && W.jG()) W = null;
    if (W != null) {
      this.db = this.zK(W, T.t != 0);
      this.db.d4(m, G);
      this.Qo(q, _.E.c, { R: _.Y.vv, l: this.id, f1: !0 });
    }
  };
  L.ju.rp(L.xC);
  L.xC.prototype.H3 = function (j, q) {
    var m = this.db.Iy(),
      n = B.b.YU(m),
      G = this.aqH(j, m),
      W = !1,
      k = this.TX,
      T = k.On,
      b = k.J0,
      c = T.x,
      a = T.y,
      Z;
    if (this.id == L.aC && T.t == 2 && G.C() != c * a) {
      G = new hk(G.x, G.y, c, a);
      W = !0;
    }
    var f = B.B.Ht(m, G);
    f = B.B.BR(f);
    var U = !B.B.hE(f),
      h = Math.abs(Math.atan2(f[3], f[0])) > 1e-9,
      u = new hk(0, 0, j.r, j.$);
    if (h || U || W || b || k.Xt) Z = this.b7(j, q, !0, f, 1, n, k.Xt);
    if (!h && !U && !W && G.Lg(u)) return;
    var i = new eN(this.name, this);
    i.data = { os: Z, a3o: f, Hl: j.I.g.P(), GI: L.xC.a4W(j, G, u, !1) };
    if (T.zv != null) {
      i.data.aaL = j.zv;
      i.data.Ng = T.zv;
    }
    L.xC.as0(j, i.data, G);
    j.Du(i);
    this.km(i.data, j, !0);
    this.track(L.xC.agF([n.x, n.y, n.r, n.$], null, b));
  };
  L.xC.as0 = function (j, q, m) {
    if (m == null) return;
    q.OM = new hk(0, 0, j.r, j.$);
    q.ad = m;
  };
  L.xC.O1 = function (j, q) {
    if (q.ad == null) return;
    L.xC.J0(j, q.ad);
  };
  L.xC.ae = function (j, q) {
    if (q.ad == null) return;
    var m = q.OM.P();
    m.offset(-q.ad.x, -q.ad.y);
    L.xC.J0(j, m);
  };
  L.xC.prototype.aqH = function (j, q) {
    var m = B.B.Ht(q),
      n = B.B.hE(m),
      G = B.B.Kn(m),
      W = G.Tt,
      k = G.BL,
      T = Math.atan2(G.X, G.Sd);
    G.rotate(T);
    var b = new hk(W, k, G.Sd, G.Jy);
    if (!n) {
      function c($, y, H) {
        var C = $[y] - $[H],
          l = $[y + 1] - $[H + 1];
        return Math.sqrt(C * C + l * l);
      }
      var a = c(q, 0, 2),
        f = c(q, 4, 6),
        U = Math.max(a, f),
        Z = c(q, 2, 4),
        h = c(q, 6, 0),
        u = Math.max(Z, h),
        i = L.xC.kQ(q, j.r / 2, j.$ / 2),
        x,
        X;
      if (
        isNaN(i) ||
        i == Infinity ||
        i == -Infinity ||
        Math.min(i, 1 / i) < 0.1
      )
        i = (a + f) / (Z + h);
      if (U / u > i) {
        x = U * 1;
        X = x / i;
      } else {
        X = u * 1;
        x = X * i;
      }
      b.r = x;
      b.$ = X;
    }
    b.x = Math.round(b.x);
    b.y = Math.round(b.y);
    b.r = Math.round(b.r);
    b.$ = Math.round(b.$);
    return b;
  };
  L.xC.kQ = function (j, q, m) {
    var n = j[0] - q,
      G = j[1] - m,
      W = j[2] - q,
      k = j[3] - m,
      T = j[6] - q,
      b = j[7] - m,
      c = j[4] - q,
      a = j[5] - m,
      f =
        ((G - a) * T - (n - c) * b + n * a - G * c) /
        ((k - a) * T - (W - c) * b + W * a - k * c),
      U =
        ((G - a) * W - (n - c) * k + n * a - G * c) /
        ((b - a) * W - (T - c) * k + T * a - b * c),
      Z =
        -((U * b - G) * (f * k - G) + (U * T - n) * (f * W - n)) /
        ((U - 1) * (f - 1));
    function h(i) {
      return i * i;
    }
    var u = Math.sqrt(
      (h(f - 1) + h(f * k - G) / Z + h(f * W - n) / Z) /
        (h(U - 1) + h(U * b - G) / Z + h(U * T - n) / Z)
    );
    if (f == 1 && U == 1)
      u = Math.sqrt((h(k - G) + h(W - n)) / (h(b - G) + h(T - n)));
    return u;
  };
  L.xC.prototype.nW = function (j, q, m, n) {
    if (j == null) return;
    if (this.db) this.db.clear(j);
    this.db = null;
    this.Qo(q, _.E.c, { R: _.Y.vv, l: this.id, f1: !1 });
  };
  L.xC.prototype.disable = function (j, q, m, n) {
    if (this.db && !this.GZ) this.H3(j, m);
    this.nW(j, q, m, n);
  };
  L.xC.prototype.Qo = function (j, q, m, n) {
    var G = new fd(q, !0);
    G.data = m;
    if (n) G.l = n;
    j.k(G);
  };
  L.abh = function () {
    L.xC.call(this, [10, 2], L.aC, "tools/rcrop");
  };
  L.abh.prototype = new L.xC();
  L.amD = function () {
    L.xC.call(this, [10, 39], L.N5, "tools/pcrop");
  };
  L.amD.prototype = new L.xC();
  L.GR = function () {
    L.tt.call(this, [10, 21], L.pA, "tools/dodge");
    this.Qs = "dodge";
  };
  L.GR.prototype = new L.tt();
  L.GR.prototype.oo = function (j, q, m, n, G) {
    this.vh(j, m, n, G, this.TX.expo / Math.PI);
    if (this.ok == null) return;
    this.Am(j);
  };
  L.GR.prototype.C3 = function (j, q, m, n, G) {
    this.BX(j, q, m);
    if (this.Oc) this.UI(j, m, G);
    if (this.ok == null) return;
    if (!G.qT) return;
    this.Df(j, m, n, G);
    this.Am(j);
  };
  L.Il = function () {
    L.tt.call(this, [10, 3], L.Ij, "tools/eraser");
    this.Qs = "erase";
  };
  L.Il.prototype = new L.tt();
  L.Il.prototype.oo = function (j, q, m, n, G) {
    this.vh(j, m, n, G, this.TX.flow);
    if (this.ok == null) return;
    this.Am(j);
  };
  L.Il.prototype.C3 = function (j, q, m, n, G) {
    this.BX(j, q, m);
    if (this.Oc) this.UI(j, m, G);
    if (this.ok == null) return;
    if (!G.qT) return;
    var W = this.Df(j, m, n, G);
    this.Am(j);
  };
  L.Pb = function () {
    L.tt.call(this, [10, 45], L.T1, "tools/beraser");
    this.Qs = "ierase";
  };
  L.Pb.prototype = new L.tt();
  L.Pb.prototype.oo = function (j, q, m, n, G) {
    if (this.dr(j, q, m, n, G, !0)) return;
    this.vh(j, m, n, G, this.TX.flow);
    if (this.ok == null) return;
    this.Am(j);
  };
  L.Pb.prototype.C3 = function (j, q, m, n, G) {
    if (this.dr(j, q, m, n, G)) return;
    this.BX(j, q, m);
    if (this.Oc) this.UI(j, m, G);
    if (this.ok == null) return;
    if (!G.qT) return;
    this.Df(j, m, n, G);
    this.Am(j);
  };
  L.so = function () {
    L.pI.call(this, [10, 15], L.ag, "tools/rselect");
    this.Jm = L.OZ();
  };
  L.so.prototype = new L.pI();
  L.so.prototype.dU = function (j, q, m, n) {
    if (!n.qT || !this.pu) return;
    var G = this.Fj(j, m, !0);
    j.W.cT = B.b._c(G);
    j._F = !0;
    L.ju.G0(n, G, j, q);
  };
  L.so.prototype.IB = function (j, q, m, n) {
    j.W.cT = null;
    j.W.Z9 = [];
    j._F = !0;
    this.finish(j, q, m, n);
  };
  L.so.prototype.getSelection = function (j, q, m, n) {
    if (this.ou.Lg(this.BE) || !this.pu) return null;
    var G = this.Fj(j, m, !0);
    if (G.jG()) return null;
    return L.pI.gD("Rctn", G, this.TX.anta);
  };
  L.ju.rp(L.so);
  L.ty = function () {
    L.pI.call(this, [10, 4], L.aee, "tools/eselect");
    this.Jm = L.OZ();
  };
  L.ty.prototype = new L.pI();
  L.ty.prototype.dU = function (j, q, m, n) {
    if (!n.qT || !this.pu) return;
    var G = this.Fj(j, m);
    j.W.cT = L.ty.afI(G);
    j._F = !0;
    L.ju.G0(n, G, j, q);
  };
  L.ty.prototype.IB = function (j, q, m, n) {
    j.W.cT = null;
    j.W.Z9 = [];
    j._F = !0;
    this.finish(j, q, m, n);
  };
  L.ty.prototype.getSelection = function (j, q, m, n) {
    if (this.ou.Lg(this.BE) || !this.pu) return null;
    var G = this.Fj(j, m);
    if (!G.C2(new hk(0, 0, j.r, j.$))) return null;
    return L.pI.gD("Elps", G, this.TX.anta);
  };
  L.ty.afI = function (j) {
    var q = j.x,
      m = j.y,
      n = j.x + j.r,
      G = j.y + j.$,
      W = (q + n) / 2,
      k = (m + G) / 2,
      T = (q - n) / 2,
      b = (m - G) / 2,
      c = 0.5522848,
      a = { L: [W, k - b], RC: ["M", "C", "C", "C", "C"] };
    a.L.push(W + c * T, k - b, W + T, k - c * b, W + T, k);
    a.L.push(W + T, k + c * b, W + c * T, k + b, W, k + b);
    a.L.push(W - c * T, k + b, W - T, k + c * b, W - T, k);
    a.L.push(W - T, k - c * b, W - c * T, k - b, W, k - b);
    return a;
  };
  L.ju.rp(L.ty);
  L.KH = function (j) {
    L.ju.call(this, [10, 5], j ? L.ii : L.JF, "tools/eyedropper");
    this.CH = null;
    this.aBX = !1;
    this.wh = 0;
    this.Oo = null;
    this.aqx = 1;
    this.vk = 2;
    this.a7f = !0;
    this.vo = !1;
  };
  L.KH.prototype = new L.ju();
  L.KH.prototype.wr = function (j) {
    return j.qT;
  };
  L.KH.prototype.enable = function (j, q, m, n, G) {
    L.ju.prototype.enable.call(this, j, q, m, n, G);
    this.aBX = G;
  };
  L.KH.prototype.BT = function (j, q, m, n, G) {
    if (j.R == "pickhere") this.US(m, q, G, null, j.amX);
    if (j.R == "supertool") this.CH = j.l;
  };
  L.KH.prototype.oo = function (j, q, m, n, G) {
    var W = this.CH;
    if (W) {
      W.oo(j, q, m, n, G);
      return;
    }
    if (ei == 0) {
      this.Oo = G;
      this.wh = m.UP;
      var k = this.US(j, null, m, n, G);
      this.Vn(j, q, k, G);
    }
  };
  L.KH.prototype.C3 = function (j, q, m, n, G) {
    if (ei != 0) return;
    var W = this.CH;
    if (W) {
      W.C3(j, q, m, n, G);
      return;
    }
    var k = this.Oo;
    if (k) {
      var T = G.x - k.x,
        b = G.y - k.y,
        c = 1,
        a = new ea(k.x + T * c, k.y + b * c),
        f = this.US(j, null, m, n, a);
      this.Vn(j, q, f, a, new ea(T * (1 - c), b * (1 - c)));
    }
  };
  L.KH.prototype.Vn = function (j, q, m, n, G) {
    var W = this.a7f,
      k = this.vo;
    if (j.I.k3 > 4) k = !1;
    if (!k && !W) return;
    var T = L.KH.aAl(j, k, W, n, G, m, this.wh, this.aqx),
      b = new fd(_.E.c, !0);
    b.data = { R: _.Y.t5, $U: T };
    q.k(b);
  };
  L.KH.prototype.H_ = function (j, q, m, n, G, W) {
    var k = this.CH;
    if (k) {
      k.H_(j, q, m, n, G);
      return;
    }
    if (ei == 0) {
      this.US(j, q, m, n, G);
      if (this.Oo) {
        this.Oo = null;
        if (W) this.US(j, q, m, n, G, this.wh);
        var T = new fd(_.E.c, !0);
        T.data = { R: _.Y.t5, $U: "default" };
        q.k(T);
      }
    } else {
      var b = j.I.sb(G.x, G.y),
        c;
      if (n.M(gn.X6)) {
        var a = j.u$(),
          f = new Uint8Array(j.fQ(m)),
          U = Math.floor(b.x),
          Z = Math.floor(b.y),
          y = (Z - a.y) * a.r + U - a.x;
        if (a.QL(new ea(U, Z))) {
          var h = f[y * 4 + 3];
          if (h == 0) c = { dZ: [1, 1, 1] };
          else
            c = {
              dZ: [f[y * 4] / 255, f[y * 4 + 1] / 255, f[y * 4 + 2] / 255],
            };
        }
      } else {
        var u = j.root.g0(new ea(Math.floor(b.x), Math.floor(b.y)));
        if (u == null) return;
        var i = u.v.add,
          x = i.TySh;
        c = i.vstl;
        if (c == null && x) {
          var X = x.s3,
            $ = al.vJ(X, 0, 1);
          c = { dZ: $.K2.FillColor.Values.slice(1), Nu: [] };
        }
      }
      if (c == null) return;
      var T = new fd(_.E.c);
      T.data = { R: _.Y.fh, rw: fG.f7, K: B.S(c) };
      q.k(T);
    }
  };
  L.KH.prototype.US = function (j, q, m, n, G, W) {
    if (W == null) W = L.KH.th(j, G, this.aqx, this.vk);
    var k = new fd(_.E.c);
    k.data = {
      R: _.Y.fh,
      rw: fG.Ru,
      _G: !this.aBX && n && n.M(gn.O4) ? 1 : 0,
      K: W,
    };
    if (q) q.k(k);
    return W;
  };
  L.KH.aAl = function (j, q, m, n, G, W, k, T) {
    if (G == null) G = new ea(0, 0);
    var b = new hk(0, 0, j.r, j.$),
      c = j.ht(),
      a = 12,
      f = 11,
      U = (a * 2 + 1) * f,
      Z = new ea(U / 2, U / 2),
      h = new hk(0, 0, U, U),
      u = B.j(h.C() * 4),
      i = j.I.sb(n.x, n.y),
      x = Math.floor(i.x),
      X = Math.floor(i.y),
      $ = new k$();
    $.scale(1 / f, 1 / f);
    $.translate(x - a, X - a);
    if (q) B.scale.Vz(c, b, $, u, h);
    var H = (a - 3.4) * f,
      C = (a - 1.7) * f,
      l = a * f;
    for (var v = 0; v < U; v++)
      for (var K = 0; K < U; K++) {
        var S = ea.gw(new ea(K, v), Z);
        if (S > H) {
          if (m) {
            var o = Math.max(0, H - S + 1),
              V = (v * U + K) * 4,
              P = (u[V + 3] << 24) | (u[V] << 16) | (u[V + 1] << 8) | u[V + 2],
              z = (255 << 24) | (v < l + f * 0.5 ? W : k);
            if (S > C) {
              o = Math.max(0, C - S + 1);
              P = z;
              z = 4286611584;
            } else if (!q) {
              P = z & 16777215;
            }
            u[V + 0] = (1 - o) * ((z >>> 16) & 255) + o * ((P >>> 16) & 255);
            u[V + 1] = (1 - o) * ((z >>> 8) & 255) + o * ((P >>> 8) & 255);
            u[V + 2] = (1 - o) * ((z >>> 0) & 255) + o * ((P >>> 0) & 255);
            u[V + 3] = (1 - o) * ((z >>> 24) & 255) + o * ((P >>> 24) & 255);
          }
          if (S > l) {
            u[(v * U + K) * 4 + 3] = Math.max(0, 255 * (l - S + 1));
          }
        }
      }
    function E(y) {
      var ha = y << 2;
      u[ha] = 0;
      u[ha + 1] = 0;
      u[ha + 2] = 0;
      u[ha + 3] = 255;
    }
    function A(y) {
      var ha = y << 2;
      u[ha] = 255;
      u[ha + 1] = 255;
      u[ha + 2] = 255;
      u[ha + 3] = 255;
    }
    var N = T * f + 2,
      Q = (U - N) >>> 1,
      e = Q + N - 1;
    if (q && N < U)
      for (var y = 0; y < N; y++) {
        var Y = Q * U + Q + y,
          I = e * U + Q + y,
          O = (Q + y) * U + Q,
          s = (Q + y) * U + e;
        E(Y);
        E(I);
        E(O);
        E(s);
        if (y != 0 && y != N - 1) {
          A(Y + U);
          A(I - U);
          A(O + 1);
          A(s - 1);
        }
      }
    if (!q)
      for (var y = -9; y <= 9; y++) {
        if (-3 < y && y < 3) continue;
        var p = U >>> 1,
          K = p * U + p + y,
          v = (p + y) * U + p;
        A(K - U);
        E(K);
        A(K + U);
        A(v - 1);
        E(v);
        A(v + 1);
      }
    var F = (W >>> 16) & 255,
      r = (W >>> 8) & 255,
      eQ = (W >>> 0) & 255,
      t = "RGB " + F + "," + r + "," + eQ,
      dq = B.fE([F / 255, r / 255, eQ / 255]);
    if (j.add.fcmy)
      t =
        "CMYK " +
        dq
          .map(function (ha) {
            return Math.round(ha * 100);
          })
          .join(",");
    var D = L.ju.i_(0, 0, ["#" + B.bw(W), t]),
      b = D[1];
    b.y = 0;
    b.x = (U - b.r) >>> 1;
    B.M4(D[0], b, u, h);
    return { NP: u, HA: h, Ly: new ea(Z.x + G.x, Z.y + G.y) };
  };
  L.KH.th = function (j, q, m, n, G) {
    if (n == null) n = 2;
    var W = j.I.sb(q.x, q.y),
      k,
      T,
      b = j.J.length == 1 && j.U[j.J[0]].ma > 0 && G != !0,
      c = j.y2.length != 0,
      C = 0,
      l = 0,
      v = 0;
    if (b || c) {
      var a;
      if (c) a = j._E[j.y2[0]];
      else {
        var f = j.U[j.J[0]];
        a = f.ma == 1 ? f.ex() : f.aBJ();
      }
      T = a.Fj();
      if (!T.QL(W)) return a.color == 0 ? 0 : 16777215;
      k = B.j(T.C() * 4);
      k.fill(255);
      var U = a.XY();
      B.QZ(U, k);
    } else if (n == 0 && j.J.length != 0) {
      var f = j.U[j.J[0]];
      k = f.buffer;
      T = f.H;
    } else {
      k = n == 2 ? j.ht() : j.ht(j.J[0]);
      T = new hk(0, 0, j.r, j.$);
    }
    var Z = Math.floor(W.x) - T.x,
      h = Math.floor(W.y) - T.y,
      u = (m - 1) / 2,
      i = Math.max(0, Z - u),
      x = Math.max(0, h - u),
      X = Math.min(T.r, Z + u + 1),
      $ = Math.min(T.$, h + u + 1),
      H = (X - i) * ($ - x);
    for (var Z = i; Z < X; Z++)
      for (var h = x; h < $; h++) {
        var y = 4 * (h * T.r + Z);
        C += k[y];
        l += k[y + 1];
        v += k[y + 2];
      }
    var K = B.oM(k),
      S = K == 8 ? 255 : K == 16 ? 65535 : 1,
      o = 255 / (S * H);
    C = Math.round(C * o);
    l = Math.round(l * o);
    v = Math.round(v * o);
    return (C << 16) | (l << 8) | v;
  };
  L.KH.prototype.uS = function (j) {
    var q = j.TX;
    this.aqx = [1, 3, 5, 11, 31][q[0]];
    this.vk = q[1];
    this.a7f = q[2];
    this.vo = q[3];
  };
  L.Pr = function () {
    L.ju.call(this, [10, 6], L.Dz, "tools/gradient");
    this.TX = JSON.parse(eu.oy[6]);
    this.TX.Grad = JSON.parse(eu.PV.aiw);
    this.BK = !1;
    this.I7 = null;
    this.dz = null;
  };
  L.Pr.prototype = new L.ju();
  L.Pr.prototype.enable = function (j, q, m, n) {
    L.ju.prototype.enable.call(this, j, q, m, n);
    this.I7 = j;
    if (this.BK) L.mQ.t7(j);
  };
  L.Pr.prototype.yc = function (j, q, m, n) {
    if (m.RW != this.id) return;
    this.I7 = j;
    this.aDG(j, q);
  };
  L.Pr.prototype.disable = function (j, q, m, n) {
    this.I7 = null;
    if (this.BK) L.mQ.s8(j);
  };
  L.Pr.prototype.aDG = function (j, q) {
    var m = L.mQ.ve(j);
    this.BK = m != null;
    var n = new fd(_.E.c, !0);
    n.data = {
      R: _.Y.vv,
      l: this.id,
      rw: m ? j.U[j.J[0]].add.GdFl : this.TX,
      z: this.BK,
    };
    q.k(n);
    if (this.BK) L.mQ.t7(j);
    else L.mQ.s8(j);
  };
  L.Pr.prototype.uS = function (j) {
    var q = this.I7;
    if (this.BK) {
      var m = q.U[q.J[0]],
        n = m.add.GdFl;
      if (n == null) return;
      this.a4f = JSON.stringify(n);
      m.add.GdFl = j.rw;
      m.D5(q);
      q.gF();
      L.mQ.ahr(this, q);
      L.mQ.t7(q);
    } else this.TX = j.rw;
  };
  L.Pr.prototype.oo = function (j, q, m, n, G) {
    if (this.BK) {
      L.mQ.prototype.oo.call(this, j, q, m, n, G);
      return;
    }
    if (!j.Ph()) return;
    this.dz = L.YE.BU(j, j.I.sb(G.x, G.y), m);
  };
  L.Pr.prototype.C3 = function (j, q, m, n, G) {
    if (this.BK) {
      L.mQ.prototype.C3.call(this, j, q, m, n, G);
      return;
    }
    if (!this.dz) return;
    var W = j.I.sb(G.x, G.y);
    W = L.YE.BU(j, W, m);
    if (n.M(gn.X6)) W = L.Pr.jO(this.dz, W);
    j.W.cT = { L: [this.dz.x, this.dz.y, W.x, W.y], RC: ["M", "L"] };
    j.W.Ye = [this.dz.x, this.dz.y, W.x, W.y];
    j._F = !0;
  };
  L.Pr.prototype.H_ = function (j, q, m, n, G) {
    if (this.BK) {
      L.mQ.prototype.H_.call(this, j, q, m, n, G);
      return;
    }
    if (!this.dz) return;
    var W = j.U[j.J[0]],
      k = j.I.sb(G.x, G.y);
    k = L.YE.BU(j, k, m);
    if (n.M(gn.X6)) k = L.Pr.jO(this.dz, k);
    if (ea.gw(this.dz, k) > 2) {
      var T;
      if (j.h) T = j.h.H;
      else T = new hk(0, 0, j.r, j.$);
      var b = B.j(T.C() * 4, j.depth),
        c = this.TX,
        a = c.Type.v.GrdT,
        f = c.Opct.v.val,
        U = this.dz;
      if (a == "Lnr") U = new ea((U.x + k.x) / 2, (U.y + k.y) / 2);
      B.MV.UO(U, k, T, c);
      dS.Mo(c, b, T, j, null, null, m.UP, m.vH);
      var Z = b.length,
        h = f / 100;
      if (f != 100)
        for (var y = 0; y < Z; y += 4) b[y + 3] = Math.round(b[y + 3] * h);
      var u = new fd(_.E.w);
      u.l = L.Ij;
      u.data = { R: "fillBMP", u2: b, aM: kJ.l7(c.Md.v.BlnM), ER: this.name };
      q.k(u);
    }
    j.W.cT = null;
    j.W.Ye = [];
    j._F = !0;
    this.dz = null;
  };
  L.Pr.prototype.BT = function (j, q, m, n, G) {
    function W(f) {
      f = f.v;
      var U = f.Hrzn.v.val,
        Z = f.Vrtc.v.val;
      return m.I.gS(U, Z);
    }
    if (j.R == "fromAction") {
      var k = this.TX;
      this.TX = B.S(k);
      var T = j.tp.SC,
        b = ["Grad", "Type", "Opct", "Dthr"];
      for (var y = 0; y < b.length; y++) if (T[b[y]]) this.TX[b[y]] = T[b[y]];
      var c = W(T.From),
        a = W(T.T);
      this.oo(m, q, G, n, c);
      this.H_(m, q, G, n, a);
      this.TX = k;
    }
  };
  L.Pr.jO = function (j, q) {
    if (j.Lg(q)) return j;
    var m = q.x - j.x,
      n = q.y - j.y,
      G = Math.abs(m),
      W = Math.abs(n);
    if (G > W) W = G / 2 > W ? 0 : G;
    if (W > G) G = W / 2 > G ? 0 : W;
    G = m > 0 ? G : -G;
    W = n > 0 ? W : -W;
    var k = Math.sqrt(m * m + n * n) / Math.sqrt(G * G + W * W);
    return new ea(j.x + G * k, j.y + W * k);
  };
  L.Pr.hj = function (j, q, m, n, G, W, k) {
    var T = new hk(0, 0, q, m),
      b = B.j(q * m * 4);
    B.L_(b, q, m, 4);
    var c = Math.sin(n),
      a = Math.cos(n),
      f = B.j(q * m * 4);
    B.MV.S$(
      j,
      f,
      T,
      [(a * 1) / q, (c * 1) / q, (-c * 1) / m, (a * 1) / m],
      q / 2,
      m / 2,
      !1,
      0,
      G,
      W
    );
    B.G.Jg("norm", f, T, b, T, T, 1);
    if (k) return new ImageData(new Uint8ClampedArray(b.buffer), q, m);
    else return gh.Rq(b.buffer, q, m, null, null, !0);
  };
  L.Pr.a72 = function (j, q, m) {
    var n = B.S(j);
    if (n.Clrs)
      for (var y = 0; y < n.Clrs.v.length; y++) {
        var G = n.Clrs.v[y].v,
          W = G.Type.v.Clry;
        if (W == "UsrS") continue;
        var k = W == "FrgC" ? q : m;
        G.Type.v.Clry = "UsrS";
        G.Clr = {
          t: "Objc",
          v: B.MV.Ia({ o: (k >> 16) & 255, i: (k >> 8) & 255, X: k & 255 }),
        };
      }
    return n;
  };
  L.Pr.prototype.km = function (j, q) {
    L.mQ.prototype.km.call(this, j, q);
  };
  L.Pr.prototype.W6 = function (j, q) {
    L.mQ.prototype.W6.call(this, j, q);
  };
  L.mQ = function () {
    L.ju.call(this, "Vector Gradient", L.aI_, "tools/gradient");
    this.uh = null;
    this.UF = null;
    this.J1 = null;
    this.a4f;
  };
  L.mQ.prototype = new L.ju();
  L.mQ.prototype.enable = function (j, q, m, n) {
    L.mQ.t7(j);
  };
  L.mQ.prototype.yc = function (j, q, m, n) {
    if (m.RW != this.id) return;
    L.mQ.t7(j);
  };
  L.mQ.prototype.disable = function (j, q, m, n) {
    L.mQ.s8(j);
  };
  L.mQ.s8 = function (j) {
    if (j == null) return;
    j.W.$p = null;
    j.W.Ye = [];
    j._F = !0;
  };
  L.mQ.prototype.oo = function (j, q, m, n, G) {
    var W = L.mQ.ve(j);
    if (W == null && ei == 0) {
      var k = new fd(_.E.NI, !0);
      k.data = L.jy.QQ(1);
      q.k(k);
      W = L.mQ.ve(j);
    }
    if (W == null) return;
    var T = L.YE.BU(j, j.I.sb(G.x, G.y), m),
      b = L.mQ.I5(W, T, j),
      c = j.U[j.J[0]],
      a = c.add.GdFl,
      f = c.add.vstl;
    this.a4f = JSON.stringify(ei == 0 ? a : f);
    this.uh = T;
    if (b == -1) {
      var U = W[1];
      this.UF = [T.x, T.y, T.x + 2, T.y];
      if (U[0] == 1) {
        this.UF.push(T.x, T.y - 2);
        U[2][4] = 1;
      }
      this.J1 = 1;
      L.mQ.a01(j, this.UF);
    } else {
      this.UF = W[0];
      this.J1 = b;
    }
  };
  L.mQ.prototype.C3 = function (j, q, m, n, G) {
    var W = j.I.sb(G.x, G.y),
      k = L.mQ.ve(j),
      T = this.J1;
    if (T != null) {
      var b = this.UF.slice(0);
      W = L.YE.BU(j, W, m);
      if (n.M(gn.X6)) W = L.Pr.jO(new ea(b[0], b[1]), W);
      var c = W.x - b[T * 2],
        a = W.y - b[T * 2 + 1];
      if (T == 0) {
        for (var y = 0; y < b.length; y += 2) {
          b[y] += c;
          b[y + 1] += a;
        }
      } else {
        b[T * 2] += c;
        b[T * 2 + 1] += a;
      }
      L.mQ.a01(j, b, T);
    } else if (k) {
      var f = L.mQ.I5(k, W, j),
        U = new fd(_.E.c, !0);
      U.data = {
        R: _.Y.t5,
        $U: f == -1 ? "default" : f == 0 ? "move" : "pointer",
      };
      q.k(U);
    }
    L.mQ.t7(j);
  };
  L.mQ.I5 = function (j, q, m) {
    var n = (6 * L.IC()) / m.I.k3,
      G = j[0],
      W = B.b.wB(G, q.x, q.y, n);
    if (W == 0 && G.length == 8 && G[0] == G[6] && G[1] == G[7]) W = 3;
    if (W == -1 && j[1][0] == 1) W = B.b.wB(G.slice(0, 2), q.x, q.y, 2 * n);
    return W;
  };
  L.mQ.prototype.H_ = function (j, q, m, n, G) {
    if (this.UF == null) return;
    this.UF = null;
    this.J1 = null;
    L.mQ.ahr(this, j);
  };
  L.mQ.ahr = function (j, q) {
    var m = q.J[0],
      n = q.U[m],
      G = n.add.GdFl,
      W = n.add.vstl,
      k = JSON.stringify(G ? G : W),
      T = q.history[q.d6];
    if (T && T.l == j && T.data.PF == m) T.data.mt = k;
    else {
      var b = new eN("Change Gradient", j);
      b.data = { PF: m, Dj: j.a4f, mt: k };
      q.Du(b);
    }
  };
  L.mQ.a01 = function (j, q, m) {
    var n = j.U[j.J[0]],
      G = n.add.GdFl,
      W = n.add.vstl,
      k = n.add.vmsk,
      T = new ea(q[0], q[1]),
      b = new ea(q[2], q[3]),
      c = new ea(q[4], q[5]),
      a = new ea(q[6], q[7]);
    if (W) {
      var f = W.dZ[0],
        U = W.dZ[2],
        Z = gg.T$(T, b, new k$()),
        h = gg.gW(f, Z, k.D);
      if (f == 1) {
        var u = ea.gw(c, T) / ea.gw(b, T);
        if (Math.abs(u - 1) < 0.03) u = 1;
        h[2][4] = m == 2 ? u : U[4];
        if (m == 3) {
          if (ea.gw(a, T) / ea.gw(b, T) < 0.05) a = T.P();
          gg.AX(h, T, b, a, h[2][4]);
          if (h[2][6] > 0.999) h[2][6] = 0.999;
        } else {
          h[2][5] = U[5];
          h[2][6] = U[6];
        }
      }
      h[1] = W.dZ[1];
      W.dZ = h;
    } else {
      var f = G.Type.v.GrdT,
        i = n.H;
      if (f == "Lnr" || f == "Rflc") {
        T.x = (T.x + b.x) / 2;
        T.y = (T.y + b.y) / 2;
      }
      B.MV.UO(T, b, i, G);
      n.D5(j);
    }
    j.gF();
  };
  L.mQ.ve = function (j) {
    if (j == null || j.J.length == 0) return;
    var q = j.U[j.J[0]],
      m = q.add.GdFl,
      n = q.add.vstl;
    if (m == null && n == null) return;
    if (n == null) n = fb.CS(q.add, j);
    var G = n.dZ;
    if (G.length != 4) return;
    var W = q.add.vmsk ? q.add.vmsk.D : B.z.cn.Rect(0, 0, j.r, j.$),
      k = gg.FC(G, W),
      W = [0, 0, 1, 0];
    if (ei == 1 && G[0] == 1) {
      var T = (G[2][5] * Math.PI) / 180,
        b = G[2][6];
      W.push(0, -1, Math.cos(T) * b, -Math.sin(T) * b);
    }
    B.b.u(W, k, W);
    return [W, G, k];
  };
  L.mQ.t7 = function (j) {
    if (j) L.mQ.s8(j);
    var q = L.mQ.ve(j);
    if (q == null) return;
    var m = q[0],
      n = q[1],
      G = q[2],
      W = { L: m.slice(0, 4), RC: ["M", "L"] };
    if (n[0] == 1) {
      var k = B.z.cn.SQ(-1, -1, 2, 2),
        T = B.b.bh(k);
      B.b.u(T.L, G, T.L);
      B.b.concat(W, T);
    }
    j.W.$p = W;
    j.W.Ye = m;
    j._F = !0;
  };
  L.mQ.prototype.km = function (j, q) {
    var m = q.U[j.PF],
      n = ei == 0 ? "GdFl" : "vstl";
    if (j.mt) {
      m.add[n] = JSON.parse(j.mt);
      m.D5(q);
      q.gF();
      L.mQ.s8(q);
    }
  };
  L.mQ.prototype.W6 = function (j, q) {
    var m = q.U[j.PF],
      n = ei == 0 ? "GdFl" : "vstl";
    if (j.mt) {
      m.add[n] = JSON.parse(j.Dj);
      m.D5(q);
      q.gF();
      L.mQ.s8(q);
    }
  };
  L.gA = function () {
    L.ju.call(this, [10, 7], L.C9, "tools/hand");
    this.RR = !1;
    this.Oo = new ea(0, 0);
    this.n5 = null;
    this.d5 = 0;
    this.aDK = !1;
  };
  L.gA.prototype = new L.ju();
  L.gA.prototype.uS = function (j, q, m, n) {
    this.RR = j.RR;
  };
  L.gA.prototype.BT = function (j, q, m, n, G) {
    var W = j.R;
    if (W == "setcls") {
      m.I.rO = j.rO;
      m._F = !0;
      m.Ls = !0;
    }
    if (W == "scroll") {
      if (n.M(gn.A8)) L.gA.hL(m, m.I.g.x - j.rH.y, m.I.g.y - j.rH.x);
      else L.gA.hL(m, m.I.g.x - j.rH.x, m.I.g.y - j.rH.y);
    }
  };
  L.gA.prototype.enable = function (j, q, m, n) {
    this.n5 = null;
    var G = new fd(_.E.c, !0);
    G.data = { R: _.Y.t5, $U: "grab" };
    q.k(G);
    if (ei < 2 && j && Date.now() - this.d5 < 300) {
      G.e = _.E.w;
      G.l = L.R2;
      G.data = { R: "adapt", K: "fitscr" };
      q.k(G);
    }
    this.d5 = Date.now();
  };
  L.gA.prototype.oo = function (j, q, m, n, G) {
    this.n5 = j.I.g.P();
    this.Oo.Tu(G.x, G.y);
    if (ei == 2) {
      this.aDK = j.Y.rN;
      if (this.aDK) {
        var W = new fd(_.E.c, !0);
        W.data = { R: _.Y.ND };
        q.k(W);
      }
    }
  };
  L.gA.prototype.C3 = function (j, q, m, n, G) {
    if (!G.qT) return;
    if (this.n5 == null) this.oo(j, q, m, n, G);
    var W = this.RR ? q.mS : [j];
    for (var y = 0; y < W.length; y++)
      L.gA.hL(
        W[y],
        this.n5.x + (G.x - this.Oo.x),
        this.n5.y + (G.y - this.Oo.y)
      );
  };
  L.gA.prototype.H_ = function (j, q, m, n, G) {
    this.n5 = null;
    if (ei == 2 && this.aDK) {
      var W = new fd(_.E.c, !0);
      W.data = { R: _.Y.ND };
      q.k(W);
    }
  };
  L.gA.hL = function (j, q, m) {
    var n = j.I.k3,
      G = j.I.yJ,
      W = G.r,
      k = G.$,
      T = B.b._c(new hk(0, 0, j.r, j.$)).L,
      b = new k$();
    b.rotate(j.I.ny);
    B.b.u(T, b, T);
    var c = B.b.RD(T),
      a = c.r * n,
      f = c.$ * n,
      U = a < W && f < k,
      Z = W / 2 + a / 2 - 64,
      h = k / 2 + f / 2 - 64;
    if (ei == 1 || ei == 2) {
      Z = h = 1e9;
    }
    j.I.g.Tu(Math.max(-Z, Math.min(Z, q)), Math.max(-h, Math.min(h, m)));
    j.Ls = !0;
  };
  L.RT = function () {
    L.ju.call(this, [10, 47], L.H0, "tools/rview");
    this.Oo = new ea(0, 0);
    this.Et = null;
    this.qg = null;
    this.d5 = 0;
  };
  L.RT.prototype = new L.ju();
  L.RT.prototype.enable = function (j, q, m, n) {
    this.n5 = null;
    var G = new fd(_.E.c, !0);
    G.data = { R: _.Y.t5, $U: "grab" };
    q.k(G);
    if (j && Date.now() - this.d5 < 300 && j.I.ny != 0) {
      j.I.ny = 0;
      j._F = !0;
    }
    this.d5 = Date.now();
    if (j) this.Cu(j, q);
  };
  L.RT.prototype.disable = function (j, q, m, n, G) {
    if (j) this.Cu(j, q);
  };
  L.RT.prototype.Yg = function (j, q, m, n) {
    if (j) this.Cu(j, q);
  };
  L.RT.prototype.oo = function (j, q, m, n, G) {
    this.Oo.Tu(G.x, G.y);
    var W = j.I;
    this.Et = W.sb(W.yJ.r / 2, W.yJ.$ / 2);
    this.qg = W.WQ();
    var k = W.sb(W.yJ.r / 2, W.yJ.$ / 2),
      T = (Math.min(W.yJ.r, W.yJ.$) * 0.35) / W.k3,
      b = T * 0.2,
      c = k.x,
      a = k.y;
    j.W.cT = {
      RC: "M L L L L L".split(" "),
      L: [c, a, c, a - T, c + b, a, c, a + T, c - b, a, c, a - T],
    };
    j._F = !0;
  };
  L.RT.prototype.a99 = function (j) {
    var q = j.I,
      m = q.sb(q.yJ.r / 2, q.yJ.$ / 2);
    j.W.cT = { RC: ["M", "L"], L: [m.x, m.y, m.x, m.y - 200] };
  };
  L.RT.prototype.C3 = function (j, q, m, n, G) {
    if (!G.qT) return;
    var W = j.I,
      k = this.Et,
      T = this.Oo,
      b = new ea(W.yJ.r / 2, W.yJ.$ / 2),
      c = Math.atan2(G.y - b.y, G.x - b.x),
      a = Math.atan2(T.y - b.y, T.x - b.x),
      f = Math.atan2(this.qg.X, this.qg.Sd),
      U = c - a,
      Z = Math.PI / 4;
    if (n.M(gn.X6)) {
      U = f + Z * Math.round((U - f) / Z);
    }
    this.aFP(j, q, this.qg.P(), k, U);
  };
  L.RT.prototype.H_ = function (j, q, m, n, G) {
    j.W.cT = null;
    j._F = !0;
  };
  L.RT.prototype.uS = function (j, q, m, n) {
    this.aFP(m, q, null, null, j.Ci - m.I.ny);
    m.I.ny = j.Ci;
  };
  L.RT.prototype.aFP = function (j, q, m, n, G) {
    var W = j.I;
    if (m == null) m = W.WQ();
    if (n == null) n = W.sb(W.yJ.r / 2, W.yJ.$ / 2);
    m.translate(-n.x, -n.y);
    m.rotate(G);
    m.translate(n.x, n.y);
    W.azH(m);
    if (j.r * W.k3 < W.yJ.r && j.$ * W.k3 < W.yJ.$) W.g.Tu(0, 0);
    j._F = !0;
    this.Cu(j, q);
  };
  L.RT.prototype.Cu = function (j, q) {
    var m = new fd(_.E.c, !0);
    m.data = { R: _.Y.vv, l: this.id, Ci: j.I.ny };
    q.k(m);
  };
  L.I_ = function () {
    L.mn.call(this, [10, 25], L.Su, "tools/hbrush");
  };
  L.I_.prototype = new L.mn("");
  L.I_.prototype.H_ = function (j, q, m, n, G) {
    if (this.ok == null) return;
    this.xU(j, "heal", this.ok.qX(), this.ok.Fj(), this.ok.XQ());
    this.gF(j, this.ok.XQ());
    L.tt.prototype.H_.call(this, j, q, m, n, G);
    if (!this.TX.algnd) this.g = null;
  };
  L.Kf = function (j) {
    L.ju.call(
      this,
      j ? ["VAR0 VAR1", [22, 4, 1], [10, 8]] : [10, 8],
      j ? L.MD : L.G_,
      j ? "tools/vtype" : "tools/htype"
    );
    this.j0 = [];
    this.a = null;
    this.caller = null;
    this.Ab = 1;
    this.gH = 0;
    this.lQ = null;
    this.awb = 0;
    this.yQ = 0;
    this.aJF = 0;
    this.a8c = null;
    this.atB = null;
    this.ay = null;
    this.fn = null;
    this.zN = null;
    this.RN = null;
    this.a8U = null;
    this.Jq = null;
    this.db = null;
    this.Ts = null;
    this.aA6 = null;
    this.g_ = !1;
    this.qz = !1;
    this.qn = !1;
    this.D2 = null;
    this.JD = null;
    this.aKU = null;
    this.an6 = !1;
    this.y7 = !1;
    this.Jk = -1;
    this.rs = -1;
    this.oJ = document.createElement("textarea");
    this.oJ.setAttribute(
      "style",
      "font-family:Arial; font-size:14px; z-index:-1; " +
        " position:absolute; top:0px; left:0px;  pointer-events: none; opacity:0; width:" +
        (window.innerWidth - 10) +
        "px; height:150px;"
    );
    this.oJ.addEventListener("input", this.Gx.bind(this), !1);
    this.oJ.addEventListener("keydown", this.afa.bind(this), !1);
    this.oJ.addEventListener("keyup", this.a93.bind(this), !1);
  };
  L.Kf.prototype = new L.ju();
  L.Kf.prototype.wr = function (j) {
    return j.qT;
  };
  L.Kf.prototype.yc = function (j, q, m, n) {
    if (this.ay != null || this.id == L.MD) return;
    this.caller = q;
    var G = this.azf(j);
    if (G.length != 0) {
      var W = null,
        k = [],
        T = [];
      for (var y = 0; y < G.length; y++) {
        var b = j.U[G[y]],
          c = b.add.TySh,
          a = 0,
          f = al.WT(c.s3).length - 2,
          U = al.vJ(c.s3, a, f);
        al.Gt(U, c.u.Dc());
        if (U.K2.Font != null) U.K2.Font = U.NJ[U.K2.Font].Name;
        W = U.NJ;
        k.push(U.K2);
        T.push(U.Th);
      }
      var U = { NJ: W, K2: al.J5(k), Th: al.J5(T) };
      if (U.K2.Font != null) al.gk(U, U.K2.Font);
      this.aDP(q, U, c);
    }
  };
  L.Kf.prototype.azf = function (j) {
    var q = [];
    for (var y = 0; y < j.J.length; y++)
      if (j.U[j.J[y]] && j.U[j.J[y]].add.TySh) q.push(j.J[y]);
    return q;
  };
  L.Kf.prototype.BT = function (j, q, m, n, G) {
    var W = j.R == "insertGlyph",
      k = j.R == "copyText",
      T = j.R == "selectAll";
    if ((W || k || j.R == "insertText" || T) && this.ay) {
      var b = W ? String.fromCharCode(65533) : j.K,
        c = this.oJ,
        a = c.value,
        f = c.selectionStart,
        U = c.selectionEnd;
      if (k) {
        jc.Ni(new Blob([a.slice(f, U)], { type: "text/plain" }));
      } else if (T) {
        this.Jk = c.selectionStart = 0;
        this.rs = c.selectionEnd = a.length;
        this.bo(m);
        c.focus();
      } else {
        c.value = a.slice(0, f) + b + a.slice(U);
        c.selectionStart = c.selectionEnd = f + b.length;
        this.Gx(null, W ? j.K : null);
        c.focus();
      }
    }
    if (j.R == "updateStyles") {
      if (this.ay == null) {
        var Z = this.azf(m),
          h = !1;
        if (Z.length != 0) {
          this.Ax(m, q, G, Z);
          for (var y = 0; y < Z.length; y++) {
            var u = m.U[Z[y]],
              i = u.add.TySh;
            al.m7(i, this.Ab);
            i.Ix.VAlign.v = this.gH;
            this.ay = u;
            var x = al.WT(i.s3);
            this.Jk = 0;
            this.rs = x.length - 1;
            al.jD(i.s3, this.Jk, this.rs, this.Ya(G, i));
            var X = this.qS(m, G);
            if (X == !1) h = !0;
          }
          if (h) {
            this.an6 = !0;
            return;
          }
          this._A(m, q, !0);
        }
        return;
      }
      this.We(G);
    }
    if (j.R.startsWith("warp")) {
      var $ = this.y7;
      if (j.R == "warp" || j.R == "warpCancel") {
        if (this.ay == null) return;
        if (j.R == "warp") this.ay.add.TySh.Uu = j.rc;
        else this.ay.add.TySh.Uu = this.a8U;
        this.qS(m, G);
        if (!$) this.bo(m);
      }
      if (j.R != "warp") this.oJ.focus();
      if ((j.R == "warpConfirm" || j.R == "warpCancel") && $) {
        this.y7 = !1;
        if (j.R == "warpConfirm") this._A(m, q);
        else this.iO(m, q);
      }
    }
    if (j.R == "editCurr") {
      if (G.RW != L.G_) {
        this.lQ = G.RW;
        var H = new fd(_.E.c, !0);
        H.data = { R: _.Y.UK, l: L.G_ };
        q.k(H);
      }
      if (this.ay != null) this.disable(m, q, G, n);
      this.a = G;
      this.caller = q;
      this.Ax(m, q, G, [j.lR]);
      var x = al.WT(this.ay.add.TySh.s3);
      this.Jk = 0;
      this.rs = x.length - 1;
      this.bo(m);
      this.R1();
      this.oJ.focus();
    }
    if (j.R == "switchPntPrgr") {
      if (this.ay) return;
      var u = m.U[m.J[0]],
        i = u.add.TySh,
        C = i.u.Dc(),
        l = u.Fj(),
        v = B.S(i.s3),
        K = al.Po(v),
        S =
          K == 1
            ? al.fu(v)
            : [
                0,
                0,
                Math.round((l.r * 1.05) / C),
                Math.round((l.$ * 1.25) / C),
              ],
        o = al.vJ(v, 0, 0),
        V = o.NJ[o.K2.Font].Name,
        P = G.HS.yM(V),
        z = [0, S[2], S[2] / 2][o.Th.Justification % 3],
        E = (P ? gu.OH(P) : 0.8) * o.K2.FontSize;
      al.cj(v, 1 - K);
      if (K == 0) {
        z = -z;
        E = -E;
        al.ms(v, [0, 0, S[2], S[3]]);
      }
      var A = new k$(1, 0, 0, 1, z, E);
      A.concat(i.u);
      this.BT(
        { jR: m.J[0], R: "newED", aCn: v, u: A, aLe: [16, 3, K == 1 ? 0 : 1] },
        q,
        m,
        n,
        G
      );
    }
    if (j.R == "newED") {
      var u = m.U[j.jR],
        i = u.add.TySh,
        N = this.ML(m, [j.jR]);
      i.s3 = j.aCn;
      if (j.u) i.u = j.u;
      if (bq.wM(i, G.HS, q)) {
        bq.qS(u, G.HS, m);
        m.gF();
      } else m.c4 = !0;
      var Q = new eN(j.aLe ? j.aLe : this.name, this);
      Q.data = { Yk: N, a9J: this.ML(m, [j.jR]) };
      m.Du(Q);
    }
    if (j.R == "fromAction") {
      var e;
      if (j.tp._D == "set") {
        e = j.tp.SC.T.v;
      } else {
        e = j.tp.SC.Usng.v;
        window.a9t = e;
        var Y = e.TxtC.v,
          d = [];
        for (var y = 0; y < 2; y++) {
          var I = Y[y == 0 ? "Hrzn" : "Vrtc"].v,
            b = I.val;
          if (I.type == "#Prc") b = (y == 0 ? m.r : m.$) * (b / 100);
          d[y] = b;
        }
        this.fp(m, q, G, n, m.I.gS(d[0], d[1]), !0);
      }
      var u = m.U[m.J[0]],
        i = u.add.TySh,
        O = i.s3,
        a = al.WT(O);
      al.Sp(O, 0, a.length - 1);
      al.Fk(O, 0, e.Txt.v.replace(/\r/g, "\n"));
      al.aip(e, O, m);
      if (bq.xL(m, G.HS, q)) bq.qS(u, G.HS, m);
      else m.c4 = !0;
      m.gF();
      this._A(m, q);
    }
  };
  L.Kf.prototype.We = function (j) {
    var q = Math.min(this.Jk, this.rs),
      m = Math.max(this.Jk, this.rs),
      n = this.ay.add.TySh;
    al.m7(n, this.Ab);
    n.Ix.VAlign.v = this.gH;
    var G = this.Ya(j, n);
    al.jD(n.s3, q, m - 1, G);
    var W = this.caller.WM(),
      k = this.qS(W, j);
    if (k) this.bo(W);
    if (document.activeElement.tagName.toLowerCase() != "input")
      this.oJ.focus();
  };
  L.Kf.prototype.oa = function (j) {
    return this.j0.indexOf(j) != -1;
  };
  L.Kf.prototype.enable = function (j, q, m, n) {
    var G = this.oJ;
    q._.appendChild(G);
    this.Jq = "default";
    this.Vn(q);
  };
  L.Kf.prototype.bx = function () {
    return this.ay != null;
  };
  L.Kf.LJ = function (j, q) {
    var m = new ea(q.x, q.y);
    for (var y = j.U.length - 1; y >= 0; y--) {
      var n = j.U[y],
        G = n.add.TySh;
      if (G && j.aea(y)) {
        var W = m,
          k = n.H;
        if (ei == 1) {
          var T = G.u.P();
          T.BR();
          W = T.uL(m);
          k = n.a_.c7;
        }
        if (!k.QL(W)) continue;
        var b = n.op(31);
        return b ? -2 : y;
      }
    }
    return -1;
  };
  L.Kf.prototype.oo = function (j, q, m, n, G) {
    this.a = m;
    this.caller = q;
    var W = j.I.sb(G.x, G.y),
      k = this.ay == null;
    if (k) {
      var T = L.Kf.LJ(j, W);
      if (T == -2) {
        alert(g$.get([6, 57, 0]));
        return;
      }
      if (T >= 0 && !n.M(gn.X6)) {
        if (!bq.wM(j.U[T].add.TySh, m.HS, q)) {
          alert("Fonts not loaded yet");
          return;
        }
        this.Ax(j, q, m, [T]);
      } else {
        this.qn = !0;
        this.D2 = G;
        return;
      }
    }
    var b = k ? -1 : al.Po(this.ay.add.TySh.s3),
      c = this.Ts ? this.Ts : this.db,
      a = c && c.oo(j, m, n, W, null, null, G) && B.rc.TK(this.ay.add.TySh.Uu),
      f = !k && B.b.aFl(W, this.ay.Fj()) > 20 / j.I.k3 && (b == 0 || b == 1),
      U = L.tz.ec(j, W);
    if (this.Ts && U) {
      alert("moving curve range");
      this.KF = U;
    } else if (a || f) {
      this.g_ = !0;
      this.JD = W;
      this.aKU = this.ay.add.TySh.u.P();
      if (this.Jk == -1 && this.rs == -1) this.Jk = this.rs = this.jr(W);
    } else {
      if (this.zN == null) {
        alert("Fonts not loaded yet");
        return;
      }
      this.qz = !0;
      this.Jk = this.rs = this.jr(W);
      var Z = Date.now();
      if (Z - this.awb > 300) this.yQ = 0;
      this.yQ++;
      this.awb = Z;
      if (this.yQ == 2) this.aEF();
      if (this.yQ == 3) this.atj();
      if (this.yQ > 1) {
        this.qz = !1;
      }
    }
    this.R1();
    this.bo(j);
  };
  L.Kf.prototype.Ax = function (j, q, m, n) {
    var G = j.U[n[0]];
    this.ay = G;
    this.Qo(q, _.E.c, { R: _.Y.vv, l: this.id, mu: "showactive" });
    this.fn = n;
    j.J = n.slice(0);
    j.um();
    j.u9 = !0;
    this.RN = this.ML(j, n);
    this.L8(G.add.TySh);
    this.qS(j, m);
  };
  L.Kf.prototype.L8 = function (j) {
    if (al.Po(j.s3) != 1) return;
    var q = al.fu(j.s3);
    q = new hk(0, 0, q[2] - q[0], q[3] - q[1]);
    var m = [q.x, q.y, q.x + q.r, q.y, q.x + q.r, q.y + q.$, q.x, q.y + q.$];
    B.b.u(m, j.u, m);
    this.db = new bn(m, !1, !1, !1, !0);
    this.db.kK(0);
  };
  L.Kf.prototype.aEF = function () {
    var j = al.WT(this.ay.add.TySh.s3);
    this.Jk = this.alJ(j, this.Jk);
    this.rs = this.ay4(j, this.Jk);
  };
  L.Kf.prototype.alJ = function (j, q) {
    var m = " \t\n,.?!_-+=@#$%^&*'\"(){}[]\\/<>:;|",
      n = [];
    for (var y = 0; y < m.length; y++) n.push(m.charAt(y));
    var G = n.indexOf(j[q]) == -1 ? !0 : !1;
    for (var y = q - 1; y >= 0; y--)
      if ((n.indexOf(j.charAt(y)) != -1) == G) return y + 1;
    return 0;
  };
  L.Kf.prototype.ay4 = function (j, q) {
    var m = " \t\n,.?!_-+=@#$%^&*'\"(){}[]\\/<>:;|",
      n = [];
    for (var y = 0; y < m.length; y++) n.push(m.charAt(y));
    var G = n.indexOf(j[q]) == -1 ? !0 : !1;
    for (var y = q + 1; y < j.length; y++)
      if ((n.indexOf(j.charAt(y)) != -1) == G) return y;
    return j.length - 1;
  };
  L.Kf.prototype.atj = function () {
    var j = this.zN.aBl(this.Jk);
    this.Jk = j[0];
    this.rs = j[1];
  };
  L.Kf.prototype.Vn = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = { R: _.Y.t5, $U: this.Jq };
    j.k(q);
  };
  L.Kf.prototype.C3 = function (j, q, m, n, G) {
    var W = j.I.sb(G.x, G.y),
      k = this.ay;
    if (!G.qT) {
      var T = "default",
        b = this.db,
        c = this.Ts ? this.Ts : b;
      if (c && B.rc.TK(k.add.TySh.Uu)) {
        var a = c.Xy(W, j.I.k3, null, G);
        if (a) T = a;
        else if (c == b && b.VG(W)) T = "text";
        var f = L.tz.ec(j, W);
        if (f) T = "default";
      } else if (k && B.b.aFl(W, k.Fj()) > 20 / j.I.k3) T = "move";
      else if (L.Kf.LJ(j, W) >= 0) T = "text";
      if (T != this.Jq) {
        this.Jq = T;
        this.Vn(q);
      }
    }
    var U = this.D2;
    if (this.qn && Math.min(G.x - U.x, G.y - U.y) > 4 / j.I.k3) {
      this.qn = !1;
      this.fp(j, q, m, n, G);
      k = this.ay;
      this.g_ = !0;
      this.db = new bn(null, !1, !1, !1, !0);
      this.db.kK(0);
      var Z = j.I.sb(this.D2.x, this.D2.y);
      Z.x = Math.round(Z.x);
      Z.y = Math.round(Z.y);
      this.db.oo(j, m, n, Z, null, null, G, j.I.ny);
    }
    if (this.KF) {
      var h = k.add.TySh,
        b = this.KF,
        u = b[3].add.vmsk;
      L.tz.auG(b, u, W);
      h.add = { vmsk: u };
      al.NX(h);
      this.qS(j, m);
    }
    if (this.g_) {
      var h = k.add.TySh;
      if (this.Ts) {
        this.Ts.C3(j, m, n, W);
        var i = B.B.Kn(B.B.Ht(this.Ts.Iy(), this.aA6));
        h.u = i;
        this.qS(j, m);
        al.nk(h);
      } else if (this.db) {
        this.db.C3(j, m, n, W);
        var x = h.u.P(),
          X = Math.atan2(x.X, x.Sd);
        x.rotate(X);
        var i = B.B.Kn(B.B.Ht(this.db.Iy())),
          $ = Math.atan2(i.X, i.Sd);
        i.rotate($);
        if (!isNaN(i.Sd) && i.Sd * i.Jy - i.X * i.ra != 0) {
          var H = new hk(0, 0, i.Sd / x.Sd, i.Jy / x.Jy),
            C = H.r,
            l = H.$,
            v = h.s3.Curve;
          if (v) {
            var K = al.fu(h.s3),
              S = new k$(C / K[2], 0, 0, l / K[3], 0, 0);
            B.b.u(v.Points, S, v.Points);
            al.nk(h);
          }
          al.ms(h.s3, [0, 0, C, l]);
          h.u = B.B.Kn(B.B.Ht(this.db.Iy(), H));
          this.qS(j, m);
          al.nk(h);
        }
      } else {
        var o = W.x - this.JD.x,
          V = W.y - this.JD.y;
        h.u = this.aKU.P();
        var P = new ea(h.u.Tt + o, h.u.BL + V);
        P = L.YE.BU(j, P, m);
        h.u.Tt = P.x;
        h.u.BL = P.y;
        this.qS(j, m);
      }
    }
    if (this.qz) this.rs = this.jr(W);
    if (this.g_ || this.qz) this.bo(j);
  };
  L.Kf.prototype.fp = function (j, q, m, n, G, W) {
    var k = j.ac(),
      T = k[0],
      b = k[1],
      c = j.dj();
    c.add.lnsr = "rend";
    var a = j.U.slice(0);
    c.tV("Text layer " + a.length);
    this.ay = c;
    var f = j.J.length == 0 ? j.U.length - 1 : j.J[j.J.length - 1],
      U = f + 1;
    if (a[f].add.lsct == hQ.WR) U--;
    this.RN = { np: a.slice(0), hF: j.J.slice(0) };
    a.splice(U, 0, c);
    j.J = [U];
    this.Jk = this.rs = 0;
    j.e0(a);
    this.RN.nR = a.slice(0);
    this.RN.c_ = j.J.slice(0);
    this.Qo(q, _.E.c, { R: _.Y.vv, l: this.id, mu: "showactive" });
    var Z = j.I.sb(G.x, G.y),
      h = m.Cw;
    console.log(h);
    if (this.id == L.MD) {
      h = B.S(h);
      h.K2.BaselineDirection = 1;
    }
    c.add.TySh = al.wD(Z.x, Z.y, h, j.I.ny);
    var u = c.add.TySh,
      i = u.s3;
    if (this.id == L.MD) i._LineOrientation = 2;
    al.m7(u, this.Ab);
    u.Ix.VAlign.v = this.gH;
    if (G.qT) al.cj(i, 1);
    else {
      al.cj(i, 0);
      var x = T[b.pop()],
        X = x ? x.add.vmsk : null;
      if (W) X = null;
      if (X && !n.M(gn.X6)) {
        X = X.P();
        var $ = X.D,
          C,
          l;
        for (var y = 0; y < $.length; y++) if ($[y].Np != null) $[y].Np = 0;
        var H = 5 / j.I.k3;
        C = B.z.g0(X.D, Z, !0, H);
        if (C.Wy == -1) C = B.z.g0(X.D, Z);
        if (C.Wy != -1) {
          al.cj(i, 1);
          var v = B.z.kH($, C.Wy),
            K = B.z.Uo($, C.Wy) - 1;
          $ = X.D = $.slice(0, 2).concat($.slice(v, v + K + 1));
          X.J = [];
          u.add = { vmsk: X, vogk: R.Pp($) };
          i.Curve = {};
          al.NX(u);
          if (C.J9 != null) {
            var S = gu.gg(i.Curve);
            B.b.u(S[0], u.u, S[0]);
            var o = B.b.wB(S[0], Z.x, Z.y),
              V = m.Cw.Th.Justification;
            if (V == 2 || V == 5) {
              var P = (S[2][o] + S[3] * 0.5) % S[3];
              o = gu.E0(P, S[2]);
            }
            var z = S[1][o];
            z = z % K;
            X.PG = [z, z];
            al.NX(u);
          } else this.L8(u);
        }
      }
    }
    return c;
  };
  L.Kf.prototype.H_ = function (j, q, m, n, G, W) {
    if (W) {
      this.qn = !1;
      return;
    }
    if (this.ay == null && !this.qn) return;
    var k = j.I.sb(G.x, G.y),
      T = this.qn;
    if (this.qn) {
      this.qn = !1;
      this.fp(j, q, m, n, G);
      this.qz = !0;
    }
    if (this.g_ || this.qz || this.KF) {
      this.bo(j);
      this.R1();
      if (T) this.We(m);
    }
    this.KF = null;
    if (this.g_ && this.db) this.db.H_(j, m, n, k);
    this.g_ = this.qz = !1;
    this.oJ.focus();
  };
  L.Kf.prototype.R1 = function () {
    var j = this.ay.add.TySh,
      q = Math.min(this.Jk, this.rs),
      m = Math.max(this.Jk, this.rs),
      n,
      G;
    if (q == m) {
      var W = al.WT(j.s3);
      if (q == 0 || W.charAt(q - 1) == "\n") n = G = q;
      else n = G = q - 1;
    } else {
      n = q;
      G = m - 1;
    }
    var k = al.vJ(j.s3, n, G);
    al.Gt(k, j.u.Dc());
    this.aDP(this.caller, k, j);
  };
  L.Kf.prototype.aDP = function (j, q, m) {
    this.Qo(j, _.E.c, { R: _.Y.fh, rw: fG.R3, Cw: q });
    var n = (this.Ab = al.OK(m)),
      G = (this.gH = m.Ix.VAlign.v);
    this.Qo(this.caller, _.E.c, {
      R: _.Y.vv,
      l: this.id,
      mu: "changeOther",
      YI: n,
      aub: G,
    });
  };
  L.Kf.prototype.FO = function (j, q, m, n, G) {
    if (j == null) return;
    var W = j.I.sb(G.x, G.y),
      k = L.Kf.LJ(j, W);
    if (k == -1) return;
    var T = new fd(_.E.c, !0);
    T.data = {
      R: _.Y.vv,
      l: this.id,
      mu: "showpan",
      aaS: this.ay != null,
      lR: k,
      sy: G,
      sk: j,
      a: m,
    };
    q.k(T);
  };
  L.Kf.prototype.agB = function () {
    var j = this.ay;
    if (j && !this.g_ && this.Ts != null) {
      var q = this.caller.WM();
      this.Ts.H_(q, this.a, null, null);
      this.Ts = null;
      this.L8(j.add.TySh);
      this.bo(q);
    }
  };
  L.Kf.prototype.disable = function (j, q, m, n) {
    var G = this.ay;
    this._A(j, q);
  };
  L.Kf.prototype.uS = function (j, q, m, n, G) {
    if (this.y7) return;
    if (j.mu == "commit") this._A(m, q);
    if (j.mu == "cancel") this.iO(m, q);
    if (j.mu == "changeOther") {
      this.Ab = j.YI;
      this.gH = j.aub;
      if (m != null) this.BT({ R: "updateStyles" }, q, m, n, G);
    }
    if (j.mu == "showwarp") {
      if (m == null) return;
      if (this.ay == null) {
        var W = m.U[m.J[0]],
          k = W.add.TySh;
        if (k == null) return;
        this.Ax(m, q, G, [m.J[0]]);
        this.oJ.focus();
        this.y7 = !0;
      }
      this.a8U = this.ay.add.TySh.Uu;
      var T = new fd(_.E.c, !0);
      T.data = { R: _.Y.s0, kO: "textwarp" };
      q.k(T);
    }
  };
  L.Kf.prototype.yp = function (j, q) {
    if (q != fG.uk) return;
    if (this.an6 && this.fn) {
      this.an6 = !1;
      var m = this.caller.WM(),
        n = this.fn;
      for (var y = 0; y < n.length; y++) {
        this.ay = m.U[n[y]];
        this.qS(m, j);
      }
      this._A(m, this.caller);
      return;
    }
    if (this.ay) this.We(j);
  };
  L.Kf.prototype.Ya = function (j, q) {
    var m = B.S(j.Cw);
    al.Gt(m, 1 / q.u.Dc());
    return m;
  };
  L.Kf.prototype.km = function (j, q) {
    if (j.Yk != null) this.TW(q, j.a9J);
    else this.aB4(q, j.nR, j.c_);
  };
  L.Kf.prototype.W6 = function (j, q) {
    if (j.Yk != null) this.TW(q, j.Yk);
    else this.aB4(q, j.np, j.hF);
  };
  L.Kf.prototype.TW = function (j, q) {
    for (var y = 0; y < q.length; y++) {
      var m = q[y],
        n = m.jR,
        G = j.U[n];
      G.buffer = m.py;
      G.H = m.HA.P();
      G.gF();
      G.a_.Og = null;
      G.a_.path = null;
      var W = G.add.TySh;
      W.Uu = m.rc;
      W.AF = m.AF.P();
      W.u = m.u.P();
      W.s3 = B.S(m.s3);
      if (W.add) al.nk(W);
      G.Yc();
    }
    j.gF();
  };
  L.Kf.prototype.ML = function (j, q) {
    var m = [];
    for (var y = 0; y < q.length; y++) {
      var n = q[y],
        G = j.U[n],
        W = G.add.TySh;
      m.push({
        jR: n,
        u: W.u.P(),
        rc: B.S(W.Uu),
        AF: W.AF.P(),
        s3: B.S(W.s3),
        py: G.buffer.slice(0),
        HA: G.H.P(),
      });
    }
    return m;
  };
  L.Kf.prototype.aB4 = function (j, q, m) {
    j.J = m;
    j.e0(q);
    j.gF();
    j.qB = !0;
  };
  L.Kf.prototype.qS = function (j, q, m) {
    if (m == null) m = !1;
    var n = this.ay.add.TySh;
    if (!bq.wM(n, q.HS, this.caller)) return !1;
    if (!m) {
      var G = al.WT(n.s3);
      this.oJ.value = G.slice(0, G.length - 1);
    }
    var W = this.ay.H,
      k = bq.qS(this.ay, q.HS, j);
    this.zN = k[1];
    var T = this.zN.mL();
    if (B.rc.TK(n.Uu)) n.AF = new hk();
    else {
      if (al.Po(n.s3) == 1) {
        var b = al.fu(n.s3),
          aF = T.y;
        n.AF = new hk(0, aF, b[2] - b[0], b[3] - b[1] - aF);
      } else n.AF = T;
    }
    j.DB();
    if (k[2]) j.gF(j.root.s2(k[2].HA.vd(W), j, j.U.indexOf(this.ay)));
    return !0;
  };
  L.Kf.prototype.Gx = function (j, q) {
    if (this.ay == null || this.y7) return;
    var m = this.oJ.selectionStart,
      n = this.ay.add.TySh,
      G = al.WT(n.s3),
      W = this.oJ.value + "\n",
      k = Math.min(this.Jk, this.rs),
      T = Math.max(this.Jk, this.rs),
      U = !1;
    this.Jk = Math.min(m, k);
    if (W.length - m < G.length - this.rs) this.rs = G.length - W.length + m;
    if (G != W) {
      while (this.Jk > 0 && G.charAt(this.Jk - 1) != W.charAt(this.Jk - 1))
        this.Jk--;
    }
    var b = G.substring(0, this.Jk),
      c = G.substring(this.rs, G.length),
      a = W.substring(this.Jk, W.length - c.length);
    al.Sp(n.s3, this.Jk, this.rs);
    al.Fk(n.s3, this.Jk, a);
    if (q != null) al.a3j(n.s3, this.Jk, q);
    var f = this.Ya(this.a, n),
      Z = -1,
      h = Array.from(a);
    for (var y = 0; y < h.length; y++) Z = Math.max(Z, h[y].codePointAt(0));
    if (Z != -1 && Z > 32 && Z != 65533 && f.K2.Font != null) {
      var u = f.NJ[f.K2.Font].Name,
        i = this.a.HS.aB7(Z, u, f.NJ);
      if (u != i) {
        al.gk(f, i);
        U = !0;
      }
    }
    if (this.atB != null && a == this.atB) {
      var x = JSON.parse(this.a8c);
      al.Gt(x, 1 / n.u.Dc());
      f.K2 = x.K2;
      f.NJ = x.NJ;
      U = !0;
    }
    al.jD(n.s3, this.Jk, this.Jk + a.length - 1, f);
    this.Jk = this.rs = b.length + a.length;
    var X = this.caller.WM(),
      $ = this.qS(X, this.a, !0);
    if ($) this.bo(X, !0);
    if (U) this.R1();
  };
  L.Kf.prototype.a93 = function (j) {
    var q = gn;
    if (!j.ctrlKey) this.agB();
    j.stopPropagation();
  };
  L.Kf.prototype.afa = function (j) {
    j.stopPropagation();
    var q = j.ctrlKey || j.metaKey,
      m = gn,
      b = 0,
      c = 0,
      $ = 0,
      E = !1;
    if (this.ay == null || this.y7) return;
    if (this.ay == null) return;
    if (this.caller.AV.BS()) return;
    var n = this.caller.WM();
    if (this.Ts == null && q) {
      var G = this.ay.add.TySh,
        W = al.Po(G.s3),
        k;
      if (W == 1) {
        k = al.fu(G.s3);
        k = new hk(0, 0, k[2] - k[0], k[3] - k[1]);
      } else k = this.zN.mL();
      var T = [k.x, k.y, k.x + k.r, k.y, k.x + k.r, k.y + k.$, k.x, k.y + k.$];
      B.b.u(T, G.u, T);
      this.Ts = new bn(T, !0, !0, !1, !1);
      this.Ts.kK(0);
      this.aA6 = k;
      this.bo(n);
    }
    if (m.Uw(j.code, m.Al)) b = 1;
    if (m.Uw(j.code, m.MN)) b = -1;
    if (m.Uw(j.code, m.w0)) c = -1;
    if (m.Uw(j.code, m.K3)) c = 1;
    var a = m.Uw(j.code, gn.m_),
      f = m.Uw(j.code, gn.aHE);
    if (m.Uw(j.code, gn.FP) && q) {
      this._A(n, this.caller);
      return;
    }
    if (m.Uw(j.code, gn.k9)) {
      this.iO(n, this.caller);
      return;
    }
    if (m.Uw(j.code, gn.da)) {
      j.preventDefault();
      var U = this.oJ,
        Z = U.value,
        h = U.selectionStart,
        u = U.selectionEnd;
      U.value = Z.substring(0, h) + "\t" + Z.substring(u);
      U.selectionStart = U.selectionEnd = h + 1;
      this.Gx(null);
      return;
    }
    var i = m.Uw(j.code, m.h5),
      x = m.Uw(j.code, m.Nc);
    if (q && (i || x)) {
      j.preventDefault();
      var X = new fd(_.E.w, !0);
      X.l = L.R2;
      X.data = { R: "zoom", Ow: i };
      this.caller.k(X);
    }
    if (m.Uw(j.code, m.$b)) $ = 1;
    if (m.Uw(j.code, m.cb)) $ = -1;
    var H = this.Jk == this.rs,
      C = q && j.shiftKey && $ != 0 && !H;
    if (C || (j.altKey && b != 0)) {
      var l = B.S(this.a.Cw);
      if (C) {
        var v = l.K2.FontSize;
        if (v == null) v = 16;
        l.K2.FontSize = Math.max(1, v + $ * (j.altKey ? 5 : 1));
      } else {
        if (H) {
          l.K2.Kerning += 20 * b;
          l.K2.AutoKerning = !1;
        } else l.K2.Tracking += 20 * b;
      }
      j.preventDefault();
      var K = new fd(_.E.c, !0);
      K.data = { R: _.Y.fh, rw: fG.R3, Cw: l };
      this.caller.k(K);
      var X = new fd(_.E.w, !0);
      X.l = L.G_;
      X.data = { R: "updateStyles" };
      this.caller.k(X);
      return;
    }
    if ((m.Uw(j.code, m.dV) || m.Uw(j.code, m.Bi)) && q) {
      var S = this.Jk,
        o = this.rs;
      if (S > o) {
        var V = S;
        S = o;
        o = V;
      }
      var G = this.ay.add.TySh,
        P = al.WT(G.s3);
      if (S != o) {
        this.atB = P.slice(S, o);
        this.a8c = JSON.stringify(this.a.Cw);
      }
    }
    var z = al.WT(this.ay.add.TySh.s3);
    if (b != 0 || c != 0 || a || f) {
      j.preventDefault();
      var A = this.Jk;
      if (b != 0) {
        if (q && b == -1) A = this.alJ(z, this.Jk - 1);
        else if (q && b == 1) A = this.ay4(z, this.Jk);
        else {
          var U = this.oJ,
            Z = U.value;
          A = this.Jk + b;
          if (A != 0 && Z.codePointAt(A - 1) > 65535) A += b;
        }
      } else if (c != 0) {
        var N = this.zN.q9(this.Jk);
        if (c == -1 && N.Ma == 0) A = 0;
        else if (c == 1 && N.Ma == this.zN.aaG() - 1) A = 99999999999;
        else A = this.zN.ann(new ea(N.HA.x + N.HA.r / 2, 0), N.Ma + c);
      } else if (a) {
        var Q = this.Jk - 1;
        while (Q > 0 && z.charCodeAt(Q) != 10) Q--;
        A = Q == 0 ? 0 : Q + 1;
      } else if (f) {
        var Q = this.Jk;
        while (Q < z.length - 1 && z.charCodeAt(Q) != 10) Q++;
        A = Q;
      }
      A = Math.max(0, Math.min(z.length - 1, A));
      if (j.shiftKey) this.Jk = A;
      else this.Jk = this.rs = A;
      E = !0;
    }
    if (q && m.a2x(j, gn.Y)) {
      this.Jk = 0;
      this.rs = z.length - 1;
      E = !0;
    }
    if (E) {
      this.R1();
      this.bo(n);
    }
  };
  L.Kf.a1v = function (j, q) {
    var m = j.length;
    if (m != q.length) return !1;
    for (var y = 0; y < m; y++) if (j[y].jR != q[y].jR) return !1;
    return !0;
  };
  L.Kf.prototype._A = function (j, q, m) {
    if (this.ay == null) return;
    if (Date.now() - this.aJF < 5e3) m = !0;
    this.aJF = Date.now();
    this.ay.Yc();
    var n = this.RN;
    if (n instanceof Array) {
      var G = this.ML(j, this.fn),
        W = j.iw();
      if (W != null && W.l == this && W.data.Yk && L.Kf.a1v(W.data.Yk, n) && m)
        W.data.a9J = G;
      else {
        var k = new eN(this.name, this);
        k.data = { Yk: n, a9J: G };
        j.Du(k);
      }
    } else {
      var k = new eN(this.name, this);
      k.data = { np: n.np, nR: n.nR, hF: n.hF, c_: n.c_ };
      j.Du(k);
      var T = this.ay.add.TySh,
        b = T.s3,
        c = al.WT(b).slice(0, -1),
        a = {
          classID: "null",
          null: jw.$W("TxLr"),
          Usng: {
            t: "Objc",
            v: {
              classID: "TxLr",
              Txt: { t: "TEXT", v: c },
              TxtC: {
                t: "Objc",
                v: {
                  classID: "Pnt",
                  Hrzn: {
                    t: "UntF",
                    v: { type: "#Prc", val: (100 * T.u.Tt) / j.r },
                  },
                  Vrtc: {
                    t: "UntF",
                    v: { type: "#Prc", val: (100 * T.u.BL) / j.$ },
                  },
                },
              },
            },
          },
        };
      al.aBf(a.Usng.v, b, j);
      this.AS = q;
      this.track({ _D: "make", SC: a });
    }
    this.escape(j, q);
  };
  L.Kf.prototype.iO = function (j, q) {
    if (this.ay == null) return;
    if (this.RN instanceof Array) {
      this.TW(j, this.RN);
      if (this.ay) al.nk(this.ay.add.TySh);
    } else {
      j.J = this.RN.hF;
      j.e0(this.RN.np);
      j.qB = !0;
    }
    j.gF();
    this.escape(j, q);
  };
  L.Kf.prototype.escape = function (j, q) {
    this.agB();
    this.ay = null;
    this.fn = null;
    this.zN = null;
    this.db = null;
    this.oJ.blur();
    j.W.cT = null;
    j.W.qb = null;
    j.W.a0 = [];
    j._F = !0;
    this.g_ = !1;
    this.qz = !1;
    this.Jk = this.rs = -1;
    this.Qo(q, _.E.c, { R: _.Y.vv, l: this.id, mu: "hideactive" });
    if (this.lQ) {
      var m = new fd(_.E.c, !0);
      m.data = { R: _.Y.UK, l: this.lQ };
      q.k(m);
      this.lQ = null;
    }
  };
  L.Kf.prototype.Qo = function (j, q, m, n) {
    var G = new fd(q, !0);
    G.data = m;
    if (n) G.l = n;
    j.k(G);
  };
  L.Kf.prototype.jr = function (j) {
    var q = this.ay.add.TySh,
      m = this.zN,
      n = q.u.P();
    n.BR();
    var G = n.uL(j),
      W = al.Fj(q, m),
      k = B.rc._i(q.Uu, W),
      T = B.Ol.fH(k, G);
    if (T == null) T = new Float64Array(2);
    G = new ea(W.x + T[0] * W.r, W.y + T[1] * W.$);
    if (m.NH) {
      var b = m.NH.P();
      b.BR();
      G = b.uL(G);
    }
    var c = m.ann(G);
    return c;
  };
  L.Kf.prototype.bo = function (j, q) {
    if (q == null) q = !1;
    var m = this.ay.add.TySh,
      n = al.Po(m.s3),
      G = this.zN,
      W = G ? al.Fj(m, G) : null;
    j.W.a0 = [];
    j.W.cT = null;
    j.W.qb = null;
    var k = this.Ts ? this.Ts : this.db;
    if (k) {
      k.d4(j, this.a, !B.rc.TK(m.Uu));
      var T = m.u.P();
      T.BR();
      if (G && G.NH && G.Sg == 1) {
        var b = G.NH.P();
        b.BR();
        T.concat(b);
      }
      B.b.u(j.W.a0, T, j.W.a0);
      B.b.u(j.W.cT.L, T, j.W.cT.L);
      if (G && G.NH == null && G.afc()) {
        var c = W.r - 20,
          a = W.$ + 8;
        j.W.cT.L.push(c, a, c + 10, a, c + 5, a - 5, c + 5, a + 5);
        j.W.cT.RC.push("M", "L", "M", "L");
      }
    } else if (n == 0) this.am2(j, m, G);
    else j.W.cT = { L: [], RC: [] };
    var f = Math.min(this.Jk, this.rs),
      U = Math.max(this.Jk, this.rs);
    if (!q) {
      this.oJ.selectionStart = f;
      this.oJ.selectionEnd = U;
    }
    if (G != null) {
      var Z = function (k, H) {
        var C = k.x,
          l = k.y + k.$,
          v = new k$();
        v.translate(-C, -l);
        v.rotate(-H);
        v.translate(C, l);
        k.y += k.$ * 0.27;
        var $ = B.b._c(k);
        B.b.u($.L, v, $.L);
        return $;
      };
      if (f == U) {
        f = Math.max(f, 0);
        var h = G.q9(f);
        if (h) {
          var u = h.HA,
            i = this.a.Cw.K2.FontSize;
          if (i != null && i != 0) {
            i /= m.u.Dc();
            u.y += u.$ - i;
            u.$ = i;
          }
          var x = G.aEf(f);
          if (x != null && x.Se == 1) u.x += u.r;
          var X = Z(u, h.ny).L;
          j.W.cT.RC.push("M", "L");
          j.W.cT.L.push(X[0], X[1] - 1, X[6], X[7] - 1);
        }
      } else if (this.caller.AV.BS() == null) {
        j.W.qb = { L: [], RC: [] };
        for (var y = f; y < U; y++) {
          var h = G.q9(y),
            $ = Z(h.HA, h.ny);
          B.b.concat(j.W.qb, $);
        }
      }
    }
    j.W.cT = bq.VD(j.W.cT, m, G, !0);
    j.W.qb = bq.VD(j.W.qb, m, G, !0);
    j.W.a0 = bq.VD({ L: j.W.a0 }, m, G, !0).L;
    j._F = !0;
  };
  L.Kf.prototype.am2 = function (j, q, m) {
    if (m == null) return;
    j.W.a0.push(0, 0);
    if (j.W.cT == null) j.W.cT = { RC: [], L: [] };
    for (var y = 0; y < m.Th.length; y++) {
      var n = m.Th[y];
      for (var G = 0; G < n.EX.length; G++) {
        var W = n.EX[G],
          k = n.Qi.x + W.Qi.x + W.HA.x,
          T = n.Qi.y + W.Qi.y + W.HA.y + W.HA.$;
        j.W.cT.RC.push("M", "L");
        j.W.cT.L.push(k, T, k + W.HA.r, T);
      }
    }
    j._F = !0;
  };
  L.yh = function () {
    L.Kf.call(this, !0);
  };
  L.yh.prototype = new L.Kf();
  L.oj = function (j) {
    L.pI.call(
      this,
      j ? "Magic Replace" : [10, 9],
      j ? L.a8t : L.Eb,
      j ? "tools/mremove" : "tools/lasso"
    );
    this.Hm = null;
    this.rD = null;
    this.JD = null;
  };
  L.oj.prototype = new L.pI();
  L.oj.prototype.Q7 = function (j, q, m, n) {
    this.Hm = this.ou;
    this.rD = { L: [this.Hm.x, this.Hm.y], RC: ["M"] };
  };
  L.oj.prototype.dU = function (j, q, m, n) {
    this.JD = n;
    var G = this.rD;
    if (G == null) return;
    if (!n.qT) {
      if (this.rD != null && this.bB.KL(1) && m.M(gn.O4)) {
        G.L.pop();
        G.L.pop();
        G.L.push(this.BE.x, this.BE.y);
        j.W.cT = G;
        j._F = !0;
      }
      return;
    }
    G.RC.push("L");
    G.L.push(this.BE.x, this.BE.y);
    this.Hm = this.BE;
    if (this.pu) {
      j.W.cT = G;
      j._F = !0;
    }
  };
  L.oj.prototype.bx = function () {
    return this.rD != null;
  };
  L.oj.prototype.tf = function () {
    return this.rD != null;
  };
  L.oj.prototype.uY = function (j, q, m, n) {
    L.pI.prototype.uY.call(this, j, q, m, n);
    if (this.rD && this.bB.KL(1) && this.JD && !this.JD.qT && !n.M(gn.O4))
      this.aL_(j, m, n);
  };
  L.oj.prototype.IB = function (j, q, m, n) {
    this.JD = n;
    var G = this.rD;
    if (G == null) return;
    if (this.bB.KL(1) && m.M(gn.O4)) {
      G.RC.push("L");
      G.L.push(this.BE.x, this.BE.y);
      return;
    }
    this.aL_(j, q, m);
  };
  L.oj.prototype.aL_ = function (j, q, m) {
    this.finish(j, q, m, this.JD);
    this.rD = null;
    j.W.cT = null;
    j._F = !0;
  };
  L.oj.prototype.getSelection = function (j, q, m, n) {
    if (this.ou.Lg(this.BE) || !this.pu) return null;
    return L.pI.zt(this.rD.L, null, this.TX.anta);
  };
  L.YE = function () {
    L.ju.call(this, [10, 11], L.Lx, "tools/move");
    this.iM = new ea(0, 0);
    this.B_ = new ea(0, 0);
    this.tZ = null;
    this.l$ = null;
    this.Zh = new ea(0, 0);
    this.fg = null;
    this.a = null;
    this.AS = null;
    this.d5 = 0;
    this.X$ = null;
    this.Ha = [];
    this.aB = null;
    this.lT = null;
    this.yD = !1;
    this.R = 0;
    this.any = null;
    this.M6 = null;
    this.nN = null;
    this.EL = !1;
    this.TX = { uC: !0, XN: ei == 1, QV: !1, aFI: 1 };
    this.aBt = !1;
    this.aCN = !1;
    this.db = null;
    this.oQ = null;
    this.alO = null;
    var j = [];
    for (var y = 0; y < B.uO.t0.length; y++)
      j.push({
        name: B.uO.t0[y],
        f: function (q, m, n) {
          return { Wr: m.q1.WH == n };
        },
      });
    this.hU = new cG(j);
    this.hU.Q("select", this.T9, this);
  };
  L.YE.prototype = new L.ju();
  L.ju.prototype.wr = function (j) {
    return this.yD && this.R != 2;
  };
  L.YE.prototype.a3D = function () {
    return this.yD && (this.R == 0 || this.R == 1);
  };
  L.YE.prototype.Yg = function (j, q, m, n) {
    this.ZH(j, -this.Zh.x, -this.Zh.y);
    this.Zh.Tu(0, 0);
    this.EY(j, null, m);
    this.t7(j);
  };
  L.YE.prototype.rm = function () {
    var j = this.TX;
    if (j.uC && !j.XN && !j.QV) return null;
    return [j.uC ? 1 : 0, j.XN ? 1 : 0, j.QV ? 1 : 0];
  };
  L.YE.prototype.ui = function (j, q, m) {
    var n = this.TX;
    if (j && j[0] != null) n.uC = j[0] == 1;
    if (j && j[1] != null) n.XN = j[1] == 1;
    if (j && j[2] != null) n.QV = j[2] == 1;
    if (ei == 1) n.XN = !0;
    var G = new fd(_.E.c, !0);
    G.data = { R: _.Y.vv, l: this.id, xB: n, al_: q };
    m.k(G);
  };
  L.YE.a3S = function (j, q, m, n, G, W, k) {
    if (k == null) k = [!1, !0];
    var T = j.LP(null, G, !0),
      b,
      c = G == null ? j.J[0] : G;
    if (j.add.artd && (G != null || j.J.length == 1) && j.U[c].add.artb) {
      var a = j.U[c].Li();
      b = j.rY(T, a, a)[0];
    } else {
      var f = new hk(0, 0, j.r, j.$),
        b = j.rY(T, k[0] ? f : null, k[1] ? null : f)[0];
      delete b.add.artd;
      if (k[1]) {
        var U = B.Xh(b.ht(), new hk(0, 0, b.r, b.$), 2);
        L.xC.J0(b, U);
      }
    }
    if (m != 1) {
      var Z = new hk(0, 0, Math.round(b.r * m), Math.round(b.$ * m));
      L.xC.J0(b, Z);
      var h = [];
      for (var y = 0; y < b.U.length; y++) h.push(y);
      var u = L.Dq.zD(b, h, !0);
      L.xC.pW(b, new k$(m, 0, 0, m, 0, 0));
      L.Dq.iZ(b, n, h, u, 1, B.B.gb(new k$(m, 0, 0, m, 0, 0)), null, !0);
      b.iY();
    }
    var i = [];
    for (var y = 0; y < q.length; y++)
      if (b.r * b.$ != 0)
        i.push(gh.Wo(b, q[y].toUpperCase(), null, null, W ? W[y] : null, n));
    return i;
  };
  L.YE.prototype.aEY = function (j, q, m, n, G) {
    if (j == null || j.J.length == 0) return;
    var W = L.YE.a3S(j, [q], m, n, null);
    if (W.length == 0) {
      alert("Empty layer selected.");
      return;
    }
    var k = W[0],
      T = new fd(_.E.c, !0);
    T.data = {
      R: _.Y.xk,
      data: k,
      name: j.U[j.J[0]].getName() + (m == 1 ? "" : "@" + m + "x") + "." + q,
    };
    G.k(T);
  };
  L.YE.prototype.uS = function (j, q, m, n, G) {
    if (j._G == "getPNG") {
      this.aEY(m, "png", j.ua, G, q);
    } else if (j._G == "getSVG") {
      this.aEY(m, "svg", j.ua, G, q);
    }
    if (j._G == "prms") {
      this.TX = j;
      this.t7(m);
    }
  };
  L.YE.ar9 = function (j) {
    var aF = j.length,
      m = 0;
    j.sort(function (W, k) {
      return W[0] + W[1] / 2 - (k[0] + k[1] / 2);
    });
    var q = j[aF - 1][0] + j[aF - 1][1] - j[0][0];
    for (var y = 0; y < aF; y++) m += j[y][1];
    var n = Math.round((q - m) / (aF - 1)),
      G = j[0][0];
    for (var y = 0; y < aF; y++) {
      j[y][0] = G;
      G += j[y][1] + n;
    }
  };
  L.YE.prototype.BT = function (j, q, m, n, G) {
    var W = j.R;
    if (W == "trsl") {
      var k = Math.round(j.p2),
        T = Math.round(j.DK);
      this.Zh.Tu(k, T);
      this.gI(m, q, n, G, !1, j.v);
      this.ZH(m, k, T);
      this.EY(m, null, G);
    } else if (W == "fcmy" || W == "fvec") {
      var b = ["RGB", "CMYK"][j.K] + " Color";
      if (W == "fvec") b = ["Raster", "Vector"][j.K] + " Mode";
      var c = new eN(b, this);
      c.data = { R: j.R, pv: m.add[W] == null ? 0 : m.add[W], jt: j.K };
      m.Du(c);
      this.km(c.data, m);
    } else if (W == "pview") {
      var W = new eN([8, 14], this);
      W.data = { R: j.R };
      m.Du(W);
      this.km(W.data, m);
    } else if (W == "lockguides") {
      if (m) m.zg = !m.zg;
    } else if (W == "gids" || W == "gidsFromLayer") {
      var a = j.M6,
        f,
        U;
      if (a == null) a = m.f8();
      if (W == "gids") {
        f = j.MK;
        var Z = a[0].length,
          h = f[0].length;
        U = Z == h ? [23, 2] : Z > h ? [23, 3] : [23, 4];
        if (h == 0) U = [11, 15, 0];
      } else if (W == "gidsFromLayer") {
        var u = [],
          i = [],
          x = m.Tl();
        for (var y = 0; y < m.J.length; y++) {
          var X = m.U[m.J[y]].H;
          if (X.jG()) continue;
          u.push([0, X.x], [1, X.y], [0, X.x + X.r], [1, X.y + X.$]);
          i.push(x, x, x, x);
        }
        U = [11, 15, 1];
        f = m.f8();
        L.YE.cW(f, [u, i]);
      }
      if (JSON.stringify(a) == JSON.stringify(f)) return;
      var W = new eN(U, this);
      W.data = { R: 2, M6: a, MK: f };
      m.Du(W);
      this.km(W.data, m);
    } else if (W == "algn") {
      var $ = j.K,
        H = j.arf,
        Y = 0,
        d = 0;
      if (m == null) return;
      if (m.J.length < 2 && !(m.h != null && $ != 3 && $ != 7) && H != 1) {
        alert(g$.get([15, 7, 5]));
        return;
      }
      var C = m.h;
      m.h = null;
      var X = H == 1 ? new hk(0, 0, m.r, m.$) : C ? C.H : L.Dq.Fj(m);
      this.gI(m, q, n, G, !1);
      if (!this.yD) return;
      var l = this.X$,
        v = {},
        K = [],
        S = [],
        o = [];
      for (var y = 0; y < l.length; y++) {
        var V = l[y];
        while (m.U[V].getName() == "</Layer group>") V++;
        var P = m.root.Zg(V),
          z = P;
        while (P.parent != null) {
          P = P.parent;
          if (l.indexOf(P.index) != -1) z = P;
        }
        var E = S.indexOf(z.index);
        if (E == -1) {
          E = S.length;
          S.push(z.index);
        }
        K[y] = E;
      }
      var A = [],
        N = [],
        Q = [],
        e = new hk();
      for (var y = 0; y < S.length; y++) {
        var I = L.Dq.Fj(m, m.LP(!0, S[y]));
        Q.push(I);
        e = e.vd(I);
        Y = Math.max(Y, I.r);
        d = Math.max(d, I.$);
        var O = $ == 3 ? [I.y, I.$] : [I.x, I.r];
        A[y] = O;
        N.push(O);
      }
      L.YE.ar9(N);
      if ($ == 8) {
        var s = j.cols,
          p = B.uO.Fs(j.apd, m.zv, m.r, G.q1.WH),
          F = B.uO.Fs(j.auA, m.zv, m.r, G.q1.WH);
        for (var y = 0; y < S.length; y++) {
          var g = Math.floor(y / s),
            E = y - g * s,
            I = Q[y],
            w = e.x + E * (Y + p),
            r = e.y + g * (d + F);
          o.push(Math.round(w - I.x), Math.round(r - I.y));
        }
      } else
        for (var y = 0; y < S.length; y++) {
          var I = Q[y],
            w = I.x,
            r = I.y;
          if ($ == 0) w = X.x;
          if ($ == 1) w = X.x + (X.r - I.r) / 2;
          if ($ == 2) w = X.x + (X.r - I.r);
          if ($ == 3) r = A[y][0];
          if ($ == 4) r = X.y;
          if ($ == 5) r = X.y + (X.$ - I.$) / 2;
          if ($ == 6) r = X.y + (X.$ - I.$);
          if ($ == 7) w = A[y][0];
          o.push(Math.round(w - I.x), Math.round(r - I.y));
        }
      var eQ = [];
      for (var y = 0; y < l.length; y++) {
        var t = K[y];
        eQ[2 * y] = o[2 * t];
        eQ[2 * y + 1] = o[2 * t + 1];
      }
      this.ZH(m, 0, 0, null, eQ);
      var dq = $ == 3 || $ == 7 ? [20, 4, 6] : [20, 4, $ < 3 ? $ : $ - 1];
      if ($ == 8) dq = [2, 10, 1];
      this.EY(m, null, G, eQ, dq);
      m.h = C;
    } else if (W == "disabAuto") {
      this.ui([!1], null, q);
    }
  };
  L.YE.cW = function (j, q) {
    for (var y = 0; y < q[0].length; y++) {
      var m = q[0][y],
        n = q[1][y],
        G = !1;
      for (var W = 0; W < j[0].length; W++) {
        var k = j[0][W],
          T = j[1][W];
        if (m[0] == k[0] && m[1] == k[1] && n == T) G = !0;
      }
      if (!G) {
        j[0].push(m.slice(0));
        j[1].push(n);
      }
    }
  };
  L.YE.prototype.enable = function (j, q, m, n, G) {
    this.a = m;
    this.AS = q;
    this.EL = G ? !0 : !1;
    this.t7(j);
    this.Vn("default", q);
    this.uY(j, q, m, n);
  };
  L.YE.prototype.disable = function (j, q, m, n) {
    this.s8(j);
  };
  L.YE.prototype.s8 = function (j) {
    if (j == null) return;
    if (this.db) {
      this.db.clear(j);
      this.db = null;
    }
    if (j.W.QV) {
      j.W.QV = null;
      j._F = !0;
    }
    if (j.W.x$) {
      j.W.x$ = null;
      j._F = !0;
    }
    if (j.W.rI[this.id]) {
      delete j.W.rI[this.id];
      j._F = !0;
    }
    if (j.W.Z9.length != 0) {
      j.W.Z9 = [];
      j._F = !0;
    }
  };
  L.YE.prototype.yc = function (j, q, m, n) {
    if (m.RW != this.id) return;
    this.t7(j);
  };
  L.YE.prototype.t7 = function (j, q) {
    if (j == null) return;
    var m = this.TX;
    this.s8(j);
    if (!this.EL) {
      var n;
      if (m.XN || m.QV) {
        n = L.Dq.Fj(j);
        if (ei == 0) n = B.b.mE(n);
      }
      if (m.XN && !n.jG()) {
        var G = j.U[j.J[0]],
          W = B.b._c(n).L;
        if (ei == 1 && j.J.length == 1) {
          if (G.add.vmsk) W = G.add.vmsk.HG();
          if (G.add.SoLd) W = L.Dq.Kt(G.add.SoLd.nonAffineTransform);
          if (G.add.TySh) {
            W = B.b._c(G.a_.c7).L;
            B.b.u(W, G.add.TySh.u, W);
          }
        }
        this.db = new bn(W, !0);
        this.db.d4(j, this.a);
      }
      if (m.QV) {
        var k = null,
          U = null,
          Z = !1;
        if (j.Tl() != -1) k = j.U[j.Tl()].Li();
        else k = new hk(0, 0, j.r, j.$);
        j.W.QV = { _a: [n], FU: [] };
        var T = j.W.QV.FU,
          b = n.x + n.r,
          c = n.y + n.$,
          a = n.x + Math.floor(n.r / 2),
          f = n.y + Math.floor(n.$ / 2);
        if (q) {
          var h = j.root.g0(new ea(Math.floor(q.x), Math.floor(q.y)));
          if (h) {
            U = B.b.mE(h.v.Fj(j));
            if (U.C2(n)) {
              Z = (U.Jn(n) || n.Jn(U)) && !n.Lg(U);
              if (!Z) U = null;
            }
          }
        }
        this.aLU(n, T);
        if (U != null) {
          j.W.QV._a.push(U);
          var u = U.x + U.r,
            i = U.y + U.$,
            x = U.x + Math.floor(U.r / 2),
            X = U.y + Math.floor(U.$ / 2);
          if (Z) {
            var $ = a,
              H = f;
            if (n.Jn(U)) {
              $ = x;
              H = X;
            }
            T.push(n.x, H, U.x, H);
            T.push(b, H, u, H);
            T.push($, n.y, $, U.y);
            T.push($, c, $, i);
          } else {
            this.aLU(U, T);
            var C = c < U.y || i < n.y,
              l = b < U.x || u < n.x;
            if (b < U.x) T.push(b, f, U.x, f);
            if (u < n.x) T.push(u, f, n.x, f);
            if (c < U.y) T.push(a, c, a, U.y);
            if (i < n.y) T.push(a, i, a, n.y);
            if (C && !l) {
              if (n.x < U.x) T.push(n.x, X, U.x, X);
              if (U.x < n.x) T.push(U.x, f, n.x, f);
            }
          }
        } else {
          if (n.y > k.y) T.push(a, k.y, a, n.y);
          if (c < k.y + k.$) T.push(a, c, a, k.y + k.$);
          if (n.x > k.x) T.push(k.x, f, n.x, f);
          if (b < k.x + k.r) T.push(b, f, k.x + k.r, f);
        }
        j._F = !0;
      }
    }
    if (this.R == 2 && this.yD) {
      var v = new hk(0, 0, j.r, j.$),
        K = j.Tl();
      if (K != -1) {
        var S = j.f8(),
          o = S[1][this.X$];
        if (o == -1) o = K;
        v = j.U[o].Li();
      }
      var V = j.M3[this.X$],
        P = V[0],
        z =
          (P == 0 ? "X" : "Y") +
          ": " +
          B.uO.G7(
            V[1] - (P == 0 ? v.x : v.y),
            j.zv,
            this.a,
            P == 0 ? v.r : v.$,
            !0
          );
      L.ju.i_(Math.round(this.tZ.x) + 10, Math.round(this.tZ.y) - 10, [z], j);
      j._F = !0;
    }
    if (this.R == 3 && this.yD) {
      var E = B.b._c(this.any);
      j.W.rI[this.id] = { cT: E };
      j._F = !0;
    }
  };
  L.YE.prototype.aLU = function (j, q) {
    var m = j.r,
      n = j.$,
      G = j.x + Math.floor(m * 0.2),
      W = j.y + Math.floor(n * 0.2);
    q.push(G, j.y, G, j.y + n);
    q.push(j.x, W, j.x + m, W);
  };
  L.YE.prototype.Vn = function (j, q) {
    var m = { R: _.Y.t5, $U: j },
      n = new fd(_.E.c, !0);
    n.data = m;
    q.k(n);
  };
  L.YE.prototype.WS = function (j) {
    var q = this.oQ.r9()[0],
      m = this.alO.length;
    if (q < m) {
      var n = this.fg,
        G = this.alO[q];
      this.y0(n, G);
    } else {
      var W = new fd(q == m ? _.E.c : _.E.w, !0);
      if (q == m) W.data = { R: _.Y.KC, hr: "psd" };
      else {
        W.l = L.ag;
        W.data = { R: "bgrm", K: 1 };
      }
      this.AS.k(W);
    }
  };
  L.YE.prototype.T9 = function (j) {
    var q = B.S(this.a.q1);
    q.WH = this.hU.r9()[0];
    var m = new fd(_.E.c, !0);
    m.data = { R: _.Y.fh, rw: fG.Tz, jt: q };
    this.AS.k(m);
  };
  L.YE.prototype.FO = function (j, q, m, n, G) {
    if (this.yD) this.H_(j, q, m, n, G);
    this.fg = j;
    this.a = m;
    this.AS = q;
    var W = j.I.sb(G.x, G.y),
      k;
    if (L.YE.ux(m, G, j.I)) {
      k = this.hU;
    } else {
      if (this.oQ) this.oQ.removeEventListener("select", this.WS);
      var T = [];
      j.root.g0(W, T);
      if (T.length == 0) return;
      if (n.M(gn.O4)) {
        this.y0(j, T[0]);
        return;
      }
      var b = [];
      this.alO = T;
      for (var y = 0; y < T.length; y++)
        b.push({ name: j.U[T[y]].getName(), q7: y == T.length - 1 });
      b.push({ name: [1, 18], QU: !0 });
      b.push({ name: "Remove BG", f: jv.MG });
      k = this.oQ = new cG(b);
      k.Q("select", this.WS, this);
    }
    k.parent = q;
    k.T();
    k.update(j, m);
    var c = new fd(_.E.c, !0);
    c.data = { R: _.Y.wQ, Tf: k, x: G.uA + 2, y: G.Ql + 1 };
    q.k(c);
  };
  L.YE.prototype.abM = function (j, q, m, n, G) {
    var W = L.YE.zc(j, G);
    return W != -1 || L.YE.ux(m, G, j.I);
  };
  L.YE.zc = function (j, q) {
    if (j == null || j.add.artd == null) return -1;
    var m = j.I.sb(q.x, q.y),
      n = (12 * L.IC()) / j.I.k3;
    for (var y = 0; y < j.U.length; y++) {
      var G = j.U[y];
      if (!G.Iw() || G.add.artb == null) continue;
      var W = G.Li(),
        k = new hk(W.x, W.y - 1.7 * n, n * G.getName().length * 0.5, n);
      if (k.QL(m)) return y;
    }
    return -1;
  };
  L.YE.prototype.oo = function (j, q, m, n, G) {
    var W = L.YE.zc(j, G),
      k = L.YE.aDq(j, j.I.sb(G.x, G.y));
    if (W != -1) {
      j.J = [W];
      if (m.RW == L.Lx) {
        var T = new fd(_.E.c);
        T.data = { R: _.Y.UK, l: L.Be };
        q.k(T);
      }
      return;
    }
    if (k != -1) {
      j.I.er = k;
      j.Ls = !0;
      var T = new fd(_.E.c, !0);
      T.data = { R: _.Y.UN, kO: bI.Fb.alX };
      q.k(T);
      return;
    }
    this.tZ = G;
    this.iM.Tu(G.x, G.y);
    this.B_ = j.I.sb(G.x, G.y);
    this.l$ = new k_(this.B_);
    this.gI(j, q, n, m, !0);
  };
  L.YE.ux = function (j, q, m, n) {
    var G = B.uO.XF,
      W = m.yJ.$;
    return (
      j.sB &&
      ((0 < q.x && q.x < G) ||
        (0 < q.y && q.y < G) ||
        (n && 0 < q.x && q.x < 4 * G && W - G < q.y && q.y < W))
    );
  };
  L.YE.prototype.gI = function (j, q, m, n, G, W) {
    var k,
      T = this.B_,
      b = !1;
    if (G) {
      var c = n.x_ && n.q1.M3;
      if (L.YE.ux(n, this.iM, j.I)) {
        k = j.f8();
        var a = j.f8(),
          f = null;
        if (this.iM.x < B.uO.XF) {
          f = [0, T.x];
        }
        if (this.iM.y < B.uO.XF) {
          f = [1, T.y];
        }
        a[0].push(f);
        a[1].push(j.Tl(!0));
        j.gE(a);
        if (!c) {
          var U = new fd(_.E.c);
          if (!n.q1.M3) {
            U.data = { R: _.Y.fh, rw: fG.EE };
            q.k(U);
          }
          if (!n.x_) {
            U.data = { R: _.Y.fh, rw: fG.rf };
            q.k(U);
          }
          c = !0;
        }
      }
      var Z = this.arK(j, T);
      if (c && Z != null && !j.zg) {
        this.R = 2;
        this.M6 = k ? k : j.f8();
        this.X$ = Z;
        this.yD = !0;
        this.lT = L.Dq.Fj(j);
        return;
      }
      if (j.y2.length != 0) {
        this.R = 4;
        this.lT = j._E[j.y2[0]].H.P();
        this.yD = !0;
        return;
      }
      if (this.db && this.db.Xy(T, j.I.k3, !0, this.tZ) != null) {
        var U = new fd(_.E.c);
        U.data = { R: _.Y.UK, l: L.Fg, ay8: !0 };
        q.k(U);
        return;
      }
      if (j.h && j.h.H.QL(T)) {
        var h = Math.round(T.x),
          u = Math.round(T.y),
          i = j.h.H;
        b = j.h.N[(u - i.y) * i.r + h - i.x] > B.TN(j.depth) / 2;
      }
      var x = this.TX.uC || ei == 1;
      if (
        !b &&
        ((!this.EL && x) || (this.EL && x && (m.M(gn.X6) || j.J.length < 2)))
      ) {
        var X = this.a1p(j, T, m);
        if (!X) {
          j.J = [];
          j.H7 = null;
          j.qB = j.hS = !0;
          this.R = 3;
          this.any = new hk();
          this.yD = !0;
          return;
        }
      }
      if (m.M(gn.O4) && !b) {
        var $ = new fd(_.E.w);
        $.l = L.W1;
        $.data = { R: R.iq, aah: !0 };
        q.k($);
      }
    }
    if (j.y2.length != 0) {
      this.R = 4;
      this.lT = j._E[j.y2[0]].H.P();
      this.yD = !0;
      return;
    }
    this.X$ = j.LP(W == null, W, null, !0);
    for (var y = 0; y < this.X$.length; y++) {
      var H = this.X$[y],
        C = j.U[H];
      if (C.op(2) || C.op(31) || j.$X(H)) {
        alert(g$.get([6, 57, 0]));
        return;
      }
    }
    if (j.add.artd && G) {
      var l = this.X$,
        v = !1;
      for (var y = 0; y < l.length; y++) if (j.U[l[y]].add.artb) v = !0;
      if (!v) {
        this.aB = [j, j.U.slice(0), j.J.slice(0), -1];
        this.X$.sort(function (A, N) {
          return A - N;
        });
      }
    }
    this.Ha = L.YE.a9n(j, this.X$);
    this.R = 0;
    if (j.h && (!G || b) && j.J.length == 1 && j.Ph(!1)) {
      if (!j.a9e()) {
        this.yD = !1;
        return;
      }
      var K = j.U[j.J[0]],
        S = m.M(gn.O4);
      this.R = 1;
      var o = j.history[j.d6];
      if (
        o.l == this &&
        o.data.R == 1 &&
        o.data.v == j.J[0] &&
        K.ma == K.k2.ma &&
        !S
      ) {
        this.nN = o;
      } else {
        var V = K.k2,
          P = !1,
          z;
        if (!K.i6(j, j.h) || S) {
          P = !0;
          K.YC(j, j.h, S);
        }
        if (K.k2.ma <= 0) {
          z = B.j(K.k2.DL.length >> 2, j.depth);
          B.Ih(K.k2.DL, z, 3);
        } else z = j.h.N.slice(0);
        var E = { H: K.k2.GG.P(), N: z };
        this.nN = new eN(S ? [12, 53] : [12, 54], this);
        this.nN.data = {
          R: 1,
          v: j.J[0],
          k2: K.k2,
          sC: V,
          ca: P,
          hF: j.h,
          c_: E,
          Jy: new ea(0, 0),
        };
        j.Du(this.nN);
        j.h = E;
        j.hM = !0;
      }
    }
    this.yD = !0;
    this.lT = L.Dq.Fj(j);
  };
  L.YE.prototype.a1p = function (j, q, m) {
    var n = j.root.g0(new ea(Math.floor(q.x), Math.floor(q.y)));
    if (n) {
      if (n.v.add.vmsk) j._F = !0;
      var G = j.U.indexOf(n.v);
      if (this.TX.aFI == 0) {
        var W = j.root.Zg(G);
        while (W.parent && W.parent.depth != 0 && W.parent.v.add.artb == null)
          W = W.parent;
        G = W.index;
      }
      if (m.M(gn.X6)) {
        var k = j.J.indexOf(G);
        if (k == -1) j.J.push(G);
        else if (j.J.length > 1) j.J.splice(k, 1);
      } else if (j.J.indexOf(G) == -1) {
        this.y0(j, G);
      }
    }
    return n != null;
  };
  L.YE.prototype.y0 = function (j, q) {
    j.U[q].ma = 0;
    j.J = [q];
    j.H7 = null;
    j.um();
    j.u9 = !0;
    j.qB = !0;
  };
  L.YE.aDq = function (j, q) {
    var m = j.add.Anno;
    if (m == null || m.length == 0) return -1;
    var n = 30 / j.I.k3;
    for (var y = 0; y < m.length; y++)
      if (new hk(m[y][0], m[y][1], n, n).QL(q)) return y;
    return -1;
  };
  L.YE.prototype.C3 = function (j, q, m, n, G) {
    this.tZ = G;
    var W = j.I.sb(G.x, G.y),
      Z,
      h;
    if (this.l$ && this.R < 2) W = this.l$.e_(W, n);
    if (!this.yD) {
      if (m.x_ && m.q1.M3 && j && !j.zg) {
        var k = this.arK(j, W),
          T = "default",
          b = L.YE.zc(j, G);
        if (k != null) T = ["col-resize", "row-resize"][j.M3[k][0]];
        else if (this.db) {
          var c = this.db.Xy(W, j.I.k3, null, G);
          if (c) T = c;
        } else if (b != -1 || L.YE.aDq(j, W) != -1) {
          T = "pointer";
        }
        this.Vn(T, q);
      }
      this.t7(j, W);
      return;
    }
    var a = this.B_,
      f = Math.round(W.x - a.x) - this.Zh.x,
      U = Math.round(W.y - a.y) - this.Zh.y;
    if (this.lT) {
      if (this.R == 2) {
        var u = [];
        if (j.h) u.push(j.h.H);
        if (this.lT) u.push(this.lT);
        if (j.I.qN) u.push(j.I.qN);
        W = L.YE.BU(j, W, m, [!1, u, !0, !0]);
      } else {
        h = this.lT.P();
        h.offset(this.Zh.x + f, this.Zh.y + U);
        Z = L.YE.xO(j, h, m);
        var i = this.l$.aox(n);
        if (i == 1) {
          Z[0] = 0;
          Z[2] = 1e9;
        }
        if (i == 2) {
          Z[1] = 0;
          Z[3] = 1e9;
        }
        f += Math.round(Z[0]);
        U += Math.round(Z[1]);
      }
    }
    this.Zh.x += f;
    this.Zh.y += U;
    var x = this.aB;
    if (x && j == x[0]) {
      j.e0(x[1]);
      j.J = x[2].slice(0);
      x[3] = -1;
    }
    this.ZH(j, f, U, W, null, n.M(gn.X6));
    if (x && j == x[0]) {
      var X = this.lT.P();
      X.offset(this.Zh.x, this.Zh.y);
      var $ = W,
        b = j.Tl(),
        H = -1;
      for (var y = 0; y < j.U.length; y++) {
        var C = j.U[y];
        if (!C.Iw() || C.add.artb == null) continue;
        var l = C.Li();
        if (l.QL($)) H = y;
      }
      if (H != -1 && H != b) {
        var v = L.zl.Zb(j, this.X$, H, !0, null, !1);
        j.e0(v[0]);
        j.J = v[1];
        x[3] = H;
      }
    }
    this.t7(j, W);
    if (Z) L.YE.HJ(j, h, Z);
  };
  L.YE.prototype.arK = function (j, q) {
    var m = L.vp(j, this.tZ);
    q = [q.x, q.y];
    var n = j.f8(),
      G = j.Tl();
    for (var y = 0; y < n[0].length; y++) {
      var W = n[0][y],
        k = n[1][y];
      if (k != -1 && k != G) continue;
      if (Math.abs(W[1] - q[W[0]]) < m) return y;
    }
    return null;
  };
  L.YE.prototype.ZH = function (j, q, m, n, G, W) {
    if (this.R == 0) {
      if (G) L.YE.BY(j, this.X$, this.Ha, G);
      else L.YE.kW(j, this.X$, this.Ha, q, m);
    } else if (this.R == 1) {
      var k = this.nN.data;
      k.Jy.offset(q, m);
      L.YE.bU(j, k.v, q, m);
    } else if (this.R == 2) {
      var T = 1e-4;
      if (W) T = j.I.k3 <= 1 ? 10 : 1;
      var b = T * Math.round(n.x / T),
        c = T * Math.round(n.y / T),
        a = [b, c],
        f = j.M3[this.X$];
      f[1] = a[f[0]];
    } else if (this.R == 3) {
      var U = this.B_,
        Z = B.b.YU([U.x, U.y, n.x, n.y]);
      this.any = Z;
      var h = [];
      j.root.fk(Z, h);
      if (JSON.stringify(j.J) != JSON.stringify(h)) {
        j.J = h;
        j.qB = j.hS = !0;
      }
    } else if (this.R == 4) {
      for (var y = 0; y < j.y2.length; y++) j._E[j.y2[y]].H.offset(q, m);
      j._F = !0;
    }
  };
  L.YE.bU = function (j, q, m, n) {
    var G = j.U[q];
    j.h.H.offset(m, n);
    G.zB(j, m, n, j.h);
    j.hM = !0;
    j.gF();
  };
  L.YE.prototype.H_ = function (j, q, m, n, G, W) {
    this.EY(j, G, m);
    this.t7(j);
    if (Date.now() - this.d5 < 300 && !W) {
      var k = L.Kf.LJ(j, j.I.sb(G.x, G.y));
      if (L.YE.ux(m, G, j.I, !0)) {
        var T = new fd(_.E.c);
        if (G.y > j.I.yJ.$ - 20) {
          T.data = {
            R: _.Y.s0,
            kO: "doczoom",
            pv: j.I.k3 * 100,
            N0: { p: _.E.w, l: L.R2, d: { R: "pzoom" } },
          };
        } else {
          T.data = { R: _.Y.s0, kO: "preferences" };
        }
        q.k(T);
      } else if (k >= 0) {
        var b = new fd(_.E.w, !0);
        b.l = L.G_;
        b.data = { R: "editCurr", lR: k };
        q.k(b);
      }
    }
    this.d5 = Date.now();
    L.xC.jQ(j);
  };
  L.YE.prototype.EY = function (j, q, m, n, G) {
    if (!this.yD) return;
    this.yD = !1;
    if (this.R <= 1) {
      if (n) {
        this.a9k(j, null, n, G);
      } else {
        if (this.Zh.x == 0 && this.Zh.y == 0) return;
        this.a9k(j, this.Zh.P());
      }
      j.Ls = !0;
    } else if (this.R == 2) {
      var W = 0;
      q = [q.x, q.y];
      var k = this.X$,
        T = j.M3[k],
        d8 = this.M6[0].length,
        b = j.M3.length;
      if (m.sB && q[T[0]] < B.uO.XF) {
        var c = j.f8();
        c[0].splice(k, 1);
        c[1].splice(k, 1);
        j.gE(c);
        W = 1;
        if (d8 == b - 1) return;
      }
      if (d8 < b) W = 2;
      var a = new eN(
        [
          [23, 2],
          [23, 3],
          [23, 4],
        ][W],
        this
      );
      a.data = { R: 2, M6: this.M6, MK: j.f8() };
      j.Du(a);
    } else if (this.R == 4) {
      var a = new eN([12, 54], this);
      a.data = { R: 4, J: j.y2.slice(0), g: this.Zh.P() };
      j.Du(a);
    }
    this.Zh.Tu(0, 0);
  };
  L.YE.prototype.uY = function (j, q, m, n) {
    var G = n.m2(j ? j.I.ny : 0);
    if (j != null && (G.x != 0 || G.y != 0)) {
      if (n.M(gn.O4) && j.h == null) {
        var W = new fd(_.E.w);
        W.l = L.W1;
        W.data = { R: R.iq, aah: !0 };
        q.k(W);
      }
      this.Zh.Tu(G.x, G.y);
      this.gI(j, q, n, m, !1);
      if (!this.yD) return;
      this.ZH(j, G.x, G.y);
      this.EY(j, null, m);
      this.t7(j);
    }
    var k = n.M(gn.A8);
    if (!this.EL && this.aCN != k) {
      if (k) {
        this.aBt = this.TX.uC;
        this.TX.uC = !0;
      } else {
        this.TX.uC = this.aBt;
      }
      this.aCN = k;
      var T = new fd(_.E.c, !0);
      T.data = { R: _.Y.vv, l: this.id, xB: this.TX };
      q.k(T);
    }
  };
  L.YE.prototype.W6 = function (j, q) {
    if (j.R == 0) {
      var m = j.a8P;
      if (m) {
        q.e0(m.np);
        q.J = m.Ne.slice(0);
        q.gF();
        q.qB = !0;
      }
      L.YE.BY(q, j.J, j.Az, j.aG, !0);
      L.xC.jQ(q);
    } else if (j.R == "fcmy" || j.R == "fvec") {
      if (j.pv == 0) delete q.add[j.R];
      else q.add[j.R] = j.pv;
      q._F = !0;
    } else if (j.R == "pview") {
      q.EK = !q.EK;
      q.gF();
    } else if (j.R == 2) {
      q.gE(j.M6);
      q._F = !0;
    } else if (j.R == 4) {
      for (var y = 0; y < j.J.length; y++)
        q._E[j.J[y]].H.offset(-j.g.x, -j.g.y);
      q._F = !0;
    } else {
      var n = q.U[j.v];
      if (j.ca) {
        n.lf(q, j.sC);
        q.h = j.hF;
        q.hM = !0;
        q.gF();
        n.gF();
      } else {
        L.YE.bU(q, j.v, -j.Jy.x, -j.Jy.y);
      }
    }
  };
  L.YE.prototype.km = function (j, q) {
    if (j.R == 0) {
      L.YE.BY(q, j.J, j.Az, j.aG);
      var m = j.a8P;
      if (m) {
        q.e0(m.nR);
        q.J = m.jw.slice(0);
        q.gF();
        q.qB = !0;
      }
      L.xC.jQ(q);
    } else if (j.R == "fcmy" || j.R == "fvec") {
      if (j.jt == 0) delete q.add[j.R];
      else q.add[j.R] = j.jt;
      q._F = !0;
    } else if (j.R == "pview") {
      q.EK = !q.EK;
      q.gF();
    } else if (j.R == 2) {
      q.gE(j.MK);
      q._F = !0;
    } else if (j.R == 4) {
      for (var y = 0; y < j.J.length; y++) q._E[j.J[y]].H.offset(j.g.x, j.g.y);
      q._F = !0;
    } else {
      var n = q.U[j.v];
      if (j.ca) {
        n.k2 = j.k2;
        q.h = j.c_;
        L.YE.bU(q, j.v, 0, 0);
        n.gF();
      } else {
        L.YE.bU(q, j.v, j.Jy.x, j.Jy.y);
      }
    }
  };
  L.YE.prototype.a9k = function (j, q, m, n) {
    if (m) {
      var G = !0;
      for (var y = 0; y < m.length; y++) if (m[y] != 0) G = !1;
      if (G) return;
    }
    var W = j.history[j.d6],
      k = this.aB,
      T = k != null && k[3] != -1 && k[0] == j;
    if (
      !T &&
      m == null &&
      W.data &&
      W.l == this &&
      W.data.R == 0 &&
      JSON.stringify(W.data.J) == JSON.stringify(this.X$) &&
      JSON.stringify(W.data.Az) == JSON.stringify(this.Ha)
    ) {
      var b = W.data.aG,
        c = W.data.a8C.SC.T.v;
      c.Hrzn.v.val += q.x;
      c.Vrtc.v.val += q.y;
      for (var y = 0; y < b.length; y += 2) {
        b[y] += q.x;
        b[y + 1] += q.y;
      }
    } else {
      if (q == null) q = new ea(m[0], m[1]);
      var a = {
          _D: this.R == 0 ? "move" : "cut",
          SC: {
            classID: "null",
            null:
              this.R == 0
                ? jw.$W("Lyr", !0)
                : {
                    t: "obj ",
                    v: [{ t: "prop", v: { classID: "Chnl", keyID: "fsel" } }],
                  },
            T: {
              t: "Objc",
              v: {
                classID: "Ofst",
                Hrzn: { t: "UntF", v: { type: "#Rlt", val: q.x } },
                Vrtc: { t: "UntF", v: { type: "#Rlt", val: q.y } },
              },
            },
          },
        },
        f = null;
      if (T) f = { np: k[1], Ne: k[2], nR: j.U.slice(0), jw: j.J.slice(0) };
      this.aB = null;
      this.track(a);
      if (this.R != 0) return;
      var U = new eN(n ? n : [12, 54], this);
      if (m) U.data = { R: 0, J: this.X$, Az: this.Ha, a8P: f, aG: m };
      else
        U.data = {
          R: 0,
          J: this.X$,
          Az: this.Ha,
          a8P: f,
          aG: L.YE.azS(this.X$, q.x, q.y),
        };
      U.data.a8C = a;
      j.Du(U);
    }
  };
  L.YE.azS = function (j, q, m) {
    var n = [];
    for (var y = 0; y < j.length; y++) n.push(q, m);
    return n;
  };
  L.YE.kW = function (j, q, m, n, G) {
    L.YE.BY(j, q, m, L.YE.azS(q, n, G));
  };
  L.YE.BY = function (j, q, m, n, G) {
    if (q.length == 0) return;
    if (m == null) {
      m = [];
      for (var y = 0; y < q.length; y++) {
        m.push(j.U[q[y]].O8(j, !0));
      }
    }
    var W = new hk(),
      k = new hk(0, 0, j.r, j.$);
    for (var y = 0; y < q.length; y++) {
      var T = n[2 * y],
        b = n[2 * y + 1];
      if (G) {
        T = -T;
        b = -b;
      }
      var c = j.U[q[y]],
        a = m[y];
      if (c.add.fxrp && (a.indexOf(0) != -1 || c.ql())) c.add.fxrp.offset(T, b);
      for (var f = 0; f < a.length; f++) {
        var U = a[f];
        if (U == 0) {
          c.H.offset(T, b);
          if (c.r3() && c.xE(j)) c.xE(j).H.offset(T, b);
          if (c.add.artb) {
            var Z = c.Li();
            Z.offset(T, b);
            c.KP(Z);
            var h = c.add.artb.guideIndeces;
            h = h ? h.v : [];
            for (var u = 0; u < h.length; u++) {
              var i = j.M3[h[u].v];
              i[1] += i[0] == 0 ? T : b;
            }
          }
          if (c.add.TySh) {
            c.add.TySh.u.translate(T, b);
            if (c.add.TySh.add) {
              c.add.TySh.add.vmsk.offset(T, b);
            }
          }
          if (c.add.SoLd) {
            var x = new k$(1, 0, 0, 1, T, b),
              X = c.add.SoLd,
              $ = L.Dq.Kt(X.Trnf),
              H = L.Dq.Kt(X.nonAffineTransform);
            B.b.u($, x, $);
            B.b.u(H, x, H);
            X.Trnf = L.Dq.be($);
            X.nonAffineTransform = L.Dq.be(H);
            L.Dq.a26(X, x);
          }
        }
        if (U == 1) c.ex().H.offset(T, b);
        if (U == 2) {
          c.add.vmsk.offset(T, b);
          if (c.add.vogk) B.ih.u(c.add.vogk, [1, 0, T, 0, 1, b, 0, 0], []);
          if (c.a_.rD) {
            var C = c.a_.rD.ku.L;
            B.b.u(C, new k$(1, 0, 0, 1, T, b), C);
          }
        }
        if (U == 3) {
          c.xE(j).x7.H.offset(T, b);
          if (a.length == 1) c.gF();
        }
      }
      if (a.length > 0) {
        var l = c.add.GdFl;
        if (l == null) l = c.add.PtFl;
        if (
          c.ql() &&
          (!c.Uk() || c.ex().jS) &&
          c.add.vmsk != null &&
          B.z.cY(c.add.vmsk.D) &&
          c.add.vmsk.CA == 255 &&
          (l == null || (l.Algn && l.Algn.v))
        ) {
          c.H.offset(T, b);
        } else c.D5(j);
        var v = j.root.s2(c.Fj(j), j, q[y]);
        if (c.add.artb) v = v.vd(c.Li());
        W = W.vd(v);
        v.offset(-T, -b);
        W = W.vd(v);
        if (c.EC() && c.x7 && c.x7.color == 255) W = W.vd(k);
        c.aAZ();
      }
    }
    j.gF(B.b.mE(W));
  };
  L.YE.a9n = function (j, q) {
    var m = [];
    for (var y = 0; y < q.length; y++) {
      var n = j.U[q[y]];
      m.push(n.O8(j));
    }
    return m;
  };
  L.YE.HJ = function (j, q, m) {
    var n = { L: [], RC: [] },
      G = q.x + m[0],
      W = q.y + m[1];
    if (m[2] != 1e9) {
      n.RC.push("M", "L");
      var k = W + q.$;
      if (m[4])
        n.L.push(m[2], Math.min(W, k, m[4][1]), m[2], Math.max(W, k, m[4][1]));
      else n.L.push(m[2], W, m[2], W + q.$);
    }
    if (m[3] != 1e9) {
      n.RC.push("M", "L");
      var T = G + q.r;
      if (m[5])
        n.L.push(Math.min(G, T, m[5][0]), m[3], Math.max(G, T, m[5][0]), m[3]);
      else n.L.push(G, m[3], T, m[3]);
    }
    if (n.L.length != 0) {
      j.W.x$ = n;
      j._F = !0;
    }
  };
  L.YE.BU = function (j, q, m, n) {
    var G = L.YE.aqJ(j, [[q.x], [q.y]], m, n);
    return new ea(q.x + G[0], q.y + G[1]);
  };
  L.YE.xO = function (j, q, m, n, G) {
    var W = G == !0 ? 1 : 0.5,
      k = L.YE.aqJ(
        j,
        [
          [q.x, q.x + Math.round(q.r * W), q.x + q.r],
          [q.y, q.y + Math.round(q.$ * W), q.y + q.$],
        ],
        m,
        n
      );
    return k;
  };
  L.YE.aqJ = function (j, q, m, n) {
    if (n == null) n = [!0, null, !0];
    var G = [0, 0, 1e9, 1e9, null, null];
    if (!m.m0) return G;
    var W = B.S(q);
    for (var k = 0; k < 2; k++) {
      var T = 1e9,
        b = q[k],
        c = 0,
        a = null;
      for (var f = 0; f < b.length; f++) {
        var U = L.YE.a0I(j, b[f], W[1 - k][f], k, m, n),
          Z = U[0];
        if (Z != 1e9) W[k][f] = Z;
        if (Z != 1e9 && Math.abs(Z - b[f]) < Math.abs(T)) {
          T = Z - b[f];
          c = Z;
          a = U[1];
        }
      }
      if (T != 1e9) {
        G[k] = T;
        G[k + 2] = c;
        G[k + 4] = a;
      }
    }
    return G;
  };
  L.YE.a0I = function (j, q, m, n, G, W) {
    var k = 1e9,
      T = null,
      b = G.b0,
      c = G.q1,
      a = [j.root];
    while (a.length != 0 && b[2]) {
      var f = a.pop(),
        U = f.v,
        Z = U.H;
      if (!U.Iw()) continue;
      if (f.children)
        for (var y = 0; y < f.children.length; y++) a.push(f.children[y]);
      if (j.J.indexOf(f.index) != -1 || Z.jG()) continue;
      var h = Z.r,
        u = h >>> 1,
        i = Z.$,
        x = i >>> 1,
        X = k;
      if (n == 0) {
        if (Math.abs(Z.x - q) < Math.abs(k - q)) k = Z.x;
        if (Math.abs(Z.x + u - q) < Math.abs(k - q)) k = Z.x + u;
        if (Math.abs(Z.x + h - q) < Math.abs(k - q)) k = Z.x + h;
      } else {
        if (Math.abs(Z.y - q) < Math.abs(k - q)) k = Z.y;
        if (Math.abs(Z.y + x - q) < Math.abs(k - q)) k = Z.y + x;
        if (Math.abs(Z.y + i - q) < Math.abs(k - q)) k = Z.y + i;
      }
      if (X != k) {
        T = [Z.x + u, Z.y + x];
      }
    }
    var $ = k;
    k = 1e9;
    if (W[0] && b[0] && c.M3 && G.x_) {
      var H = j.f8(),
        C = H[0],
        l = H[1],
        v = j.Tl();
      for (var y = 0; y < C.length; y++)
        if (
          (l[y] == -1 || l[y] == v) &&
          C[y][0] == n &&
          Math.abs(C[y][1] - q) < Math.abs(k - q)
        )
          k = C[y][1];
    }
    if (b[1] && c.GX && G.x_) {
      var K = n == 0 || c.XR == 0 ? c.y1 : c.XR,
        S = Math.round(B.uO.Fs(K / c.nL, j.zv, j.r, c.lA));
      if (n == 1 && c.Mt == 1) {
        var o = m * 0.5 * Math.sqrt(4 / 3),
          V;
        S *= Math.sqrt(4 / 3);
        V = Math.round((q - o) / S) * S + o;
        if (Math.abs(V - q) < Math.abs(k - q)) k = V;
        V = Math.round((q + o) / S) * S - o;
        if (Math.abs(V - q) < Math.abs(k - q)) k = V;
      } else {
        var V = Math.round(q / S) * S;
        if (Math.abs(V - q) < Math.abs(k - q)) k = V;
      }
    }
    var P = j.gQ;
    if (b[3] && c.gQ && G.x_ && P.length != 0) {
      for (var y = 0; y < P.length; y++) {
        if (!W[2] && j.Zy.indexOf(y) != -1) continue;
        var z = L.ct.II(P, y);
        for (var E = 0; E < 3; E += 2)
          if (z[E + n] != q && Math.abs(z[E + n] - q) < Math.abs(k - q))
            k = z[E + n];
      }
    }
    if (W[1])
      for (var A = 0; A < W[1].length; A++) {
        var Z = W[1][A],
          h = Z.r,
          i = Z.$,
          u = h >>> 1,
          x = i >>> 1;
        if (W[3]) {
          u = h / 2;
          x = i / 2;
        }
        var N = [Z.x, Z.y, Z.x + u, Z.y + x, Z.x + h, Z.y + i];
        for (var y = 0; y < 6; y += 2)
          if (Math.abs(N[y + n] - q) < Math.abs(k - q)) k = N[y + n];
      }
    if (b[4]) {
      var Z = new hk(0, 0, j.r, j.$),
        v = j.Tl();
      if (v != -1) Z = j.U[v].Li();
      var h = Z.r,
        i = Z.$,
        u = h >>> 1,
        x = i >>> 1;
      if (W[3]) {
        u = h / 2;
        x = i / 2;
      }
      var N = [Z.x, Z.y, Z.x + u, Z.y + x, Z.x + h, Z.y + i];
      for (var y = 0; y < 6; y += 2)
        if (Math.abs(N[y + n] - q) < Math.abs(k - q)) k = N[y + n];
    }
    if (Math.abs(k - q) <= Math.abs($ - q)) T = null;
    else k = $;
    var Q = Math.abs(k - q) <= (4 * L.IC()) / j.I.k3 ? k : 1e9;
    return [Q, T];
  };
  L.y4 = function () {
    L.pI.call(this, [10, 12], L.Ct, "tools/mwand");
    this.uh = null;
  };
  L.y4.prototype = new L.pI();
  L.y4.prototype.Q7 = function (j, q, m, n) {
    this.uh = n;
    this.a7_ = this.TX.wconf[0];
    this.finish(j, q, m, n);
  };
  L.y4.prototype.dU = function (j, q, m, n, G) {
    if (!n.qT) return;
    var W = new fd(_.E.w);
    W.l = L.cJ;
    W.data = { R: "h_stepbck" };
    G.k(W);
    var k = n.x - this.uh.x,
      T = Math.max(0, Math.min(255, Math.round(this.a7_ + k / 4)));
    this.TX.wconf[0] = T;
    this.zh(G);
    this.finish(j, q, m, this.uh);
  };
  L.y4.prototype.IB = function (j, q, m, n, G) {
    this.TX.wconf[0] = this.a7_;
    this.zh(G);
  };
  L.y4.prototype.getSelection = function (j, q, m, n) {
    var G = this.BE;
    G = j.I.sb(n.x, n.y);
    var W = L.pI.ayi(
      new ea(Math.floor(G.x), Math.floor(G.y)),
      this.TX.wconf,
      this.TX.sall
    );
    return W;
  };
  L.y4.amM = function (j, q, m, n, G) {
    if (q.x < 0 || q.x > j.r || q.y < 0 || q.y > j.$) return null;
    var W,
      k = new hk(0, 0, j.r, j.$);
    if (n) W = j.ht();
    else {
      var T = j.J.length,
        c = null;
      if (T != 1) {
        alert(T == 0 ? "No layer selected." : "More than one layer selected.");
        return null;
      }
      var b = j.U[j.J[0]],
        a = b.ma <= 0 ? null : b.ma == 1 ? b.ex() : b.xE(j).x7;
      if (G || (a && a.Ea)) c = a;
      if (c == null && b.add.lsct != null && b.add.lsct != hQ.yi) {
        alert("No layer selected.");
        return null;
      }
      if (c == null && k.Lg(b.H)) W = b.buffer;
      else {
        W = B.j(k.C() * 4, j.depth);
        if (c == null) B.M4(b.buffer, b.H, W, k);
        else L.tt.Sy(c.N, c.H, c.color, W, k);
      }
    }
    var f = L.y4.o4(W, k, q, null, m),
      U = B.El(f, k),
      Z = B.j(U.C(), j.depth);
    B.sN(f, k, Z, U);
    return { H: U, N: Z };
  };
  L.y4.dk = function (j, q, m) {
    var n = q.r,
      G = q.$,
      k = 0,
      T = 0,
      b = 0,
      c = 0;
    j = new Uint32Array(j.buffer);
    var W = [],
      a = m.length;
    for (var y = 0; y < a; y++) {
      var f = m[y],
        U = Math.round(f.x - 0.5 - q.x),
        Z = Math.round(f.y - 0.5 - q.y);
      U = Math.max(0, Math.min(n - 1, U));
      Z = Math.max(0, Math.min(G - 1, Z));
      var h = Z * n + U,
        u = j[h];
      W.push([u & 255, (u >> 8) & 255, (u >> 16) & 255, u >>> 24]);
    }
    return W;
  };
  L.y4.o4 = function (j, q, m, n, G) {
    var W = B.oM(j);
    j = B.sL(j, 8);
    j = new Uint32Array(j.buffer);
    var k = q.r,
      T = q.$,
      b = k * T;
    if (n == null) n = L.y4.dk(j, q, [m]);
    var c = Math.round(m.x - 0.5 - q.x),
      a = Math.round(m.y - 0.5 - q.y),
      f = a * k + c,
      U = Date.now(),
      Z = B.j(k * T),
      h = G[0],
      u = 1 / h,
      i = G[1] && h > 0 ? 255 : 0;
    if (G[2]) {
      var x = B.j(Z.length),
        X = new Uint32Array(b),
        $ = 1;
      X[0] = (c << 16) | a;
      x[f] = 1;
      while ($ > 0) {
        var H = X[$ - 1];
        $--;
        var C = H >>> 16,
          l = H & 65535,
          y = l * k + C,
          v = L.y4.vg(j[y], n);
        if (v > h) {
          var K = i * (1 - Math.max(0, Math.min(1, (v - h) * u)));
          Z[y] = ~~K;
        } else {
          Z[y] = 255;
          if (l != T - 1 && x[y + k] == 0) {
            X[$++] = (C << 16) | (l + 1);
            x[y + k] = 1;
          }
          if (l != 0 && x[y - k] == 0) {
            X[$++] = (C << 16) | (l - 1);
            x[y - k] = 1;
          }
          if (C != k - 1 && x[y + 1] == 0) {
            X[$++] = ((C + 1) << 16) | l;
            x[y + 1] = 1;
          }
          if (C != 0 && x[y - 1] == 0) {
            X[$++] = ((C - 1) << 16) | l;
            x[y - 1] = 1;
          }
        }
      }
    } else {
      for (var y = 0; y < b; y++) {
        var v = L.y4.vg(j[y], n);
        if (v <= h) Z[y] = 255;
      }
      for (var l = 0; l < T; l++)
        for (var C = 0; C < k; C++) {
          var y = l * k + C;
          if (
            Z[y] == 0 &&
            ((C > 0 &&
              (Z[y - 1] == 255 ||
                (l > 0 && Z[y - k - 1] == 255) ||
                (l < T - 1 && Z[y + k - 1] == 255))) ||
              (C < k - 1 &&
                (Z[y + 1] == 255 ||
                  (l > 0 && Z[y - k + 1] == 255) ||
                  (l < T - 1 && Z[y + k + 1] == 255))) ||
              (l > 0 && Z[y - k] == 255) ||
              (l < T - 1 && Z[y + k] == 255))
          ) {
            var v = L.y4.vg(j[y], n),
              K = i * (1 - Math.max(0, Math.min(1, (v - h) * u)));
            Z[y] = ~~K;
          }
        }
    }
    Z = B.sL(Z, W);
    return Z;
  };
  L.y4.vg = function (j, q) {
    var m = q.length,
      n = L.y4.avX(j, q[0]),
      y = 1;
    while (y != m) {
      n = Math.min(n, L.y4.avX(j, q[y]));
      y++;
    }
    return n;
  };
  L.y4.avX = function (j, q) {
    var m = j & 255,
      n = (j >>> 8) & 255,
      G = (j >>> 16) & 255,
      W = (j >>> 24) & 255;
    if (q[3] == 0) return W < 5 ? 0 : 255;
    var k = Math.max(
      Math.abs(m - q[0]),
      Math.max(Math.abs(n - q[1]), Math.abs(G - q[2]))
    );
    return W == 0 ? 255 : k;
  };
  L.VR = function (j, q) {
    if (q) L.tt.call(this);
    else if (j) L.tt.call(this, [10, 49], L.P6, "tools/camove");
    else L.tt.call(this, [10, 26], L.DX, "tools/patch");
    this.Hm = null;
    this.rD = null;
    this.g = null;
    this.Qi = null;
    this.aiW = new ea();
    this.arg = null;
    this.a1x = null;
  };
  L.VR.prototype = new L.tt();
  L.VR.prototype.oo = function (j, q, m, n, G) {
    var W = j.I.sb(G.x, G.y);
    if (j.h && B.g0(W, j.h.N, j.h.H)) {
      var k = new hk(0, 0, j.r, j.$),
        T = k.TM(j.h.H);
      if (!j.Ph() || T.jG()) return;
      if (!0) {
        var b = B.j(T.C(), j.depth);
        B.sN(j.h.N, j.h.H, b, T);
        j.h = { N: b, H: T };
      }
      this.g5(j);
      this.w7(j);
      this.Qi = W;
      this.aiW = new ea(W.x - j.h.H.x, W.y - j.h.H.y);
      this.a1x = B.j(j.h.H.C() * 4, j.depth);
      this.a1x.fill(B.TN(j.depth));
      if (this.TX.patch == 1) {
        var c = j.U[j.J[0]];
        c.YC(j, j.h, !0);
        if (c.k2 == null) this.Qi = null;
      }
      this.arg = j.h.H.P();
    } else {
      this.rD = { L: [W.x, W.y], RC: ["M"] };
      this.Hm = W;
    }
  };
  L.VR.prototype.C3 = function (j, q, m, n, G) {
    var W = j.I.sb(G.x, G.y);
    if (this.Qi) {
      if (this.TX.patch == 1) {
        if (j.y2.length == 0) {
          var k = j.U[j.J[0]].k2,
            T = W.x - this.aiW.x,
            b = W.y - this.aiW.y;
          L.YE.bU(j, j.J[0], Math.round(T - k.GG.x), Math.round(b - k.GG.y));
        }
      } else this.ac8(j, W, "clone");
    }
    if (this.Hm) {
      this.rD.RC.push("L");
      this.rD.L.push(W.x, W.y);
      this.Hm = W;
      j.W.cT = this.rD;
      j._F = !0;
    }
  };
  L.VR.prototype.H_ = function (j, q, m, n, G) {
    var W = j.I.sb(G.x, G.y);
    if (this.Qi) {
      var k = j.h.H.P();
      if (this.id == L.P6) {
        var T = j.U[j.J[0]];
        T.lf(j, T.k2);
        j.h.H = this.arg.P();
        var b = B.j(j.h.H.C() * 4, j.depth);
        B.ln(j.h.N, b, 3);
        this.xU(j, "sheal", b, j.h.H, j.h.H);
        j.h.H = k;
        k = k.vd(this.arg);
      }
      this.ac8(j, W, "heal");
      this.finish(j, k, null, null, !0);
      j.gF(k);
      this.Qi = null;
    }
    if (this.Hm) {
      var c = L.pI.tI(this.TX.setop, n.M(gn.X6), n.M(gn.O4)),
        a = new fd(_.E.NI, !0);
      if (this.rD.L.length <= 4) a.data = L.pI.TP();
      else a.data = L.pI.zt(this.rD.L, c);
      q.k(a);
      this.Hm = null;
      j.W.cT = null;
      j._F = !0;
    }
  };
  L.VR.prototype.om = function () {
    return this.g;
  };
  L.VR.prototype.uS = function (j, q, m, n, G) {
    L.tt.prototype.uS.call(this, j, q, m, n, G);
    this.Vn(G, n);
  };
  L.VR.prototype.Vn = function (j, q) {
    var m = "auto;";
    if ((q != null && q.M(gn.X6) && !q.M(gn.O4)) || this.TX.setop == "union")
      m = "copy";
    var n = new fd(_.E.c, !0);
    n.data = { R: _.Y.t5, $U: m };
    if (this.caller) this.caller.k(n);
  };
  L.VR.prototype.ac8 = function (j, q, m) {
    var n = new ea(Math.round(this.Qi.x - q.x), Math.round(this.Qi.y - q.y));
    if (this.TX.patch == 1) n.Tu(-n.x, -n.y);
    this.g = n;
    this.xU(j, m, this.a1x, j.h.H, j.h.H);
    this.gF(j, j.h.H);
  };
  L.alo = function () {
    L.VR.call(this, !0);
    this.TX.patch = 1;
  };
  L.alo.prototype = new L.VR(!0, !0);
  L.aZ = function (j) {
    if (j) L.tt.call(this, [10, 52], L.arj, "tools/meraser");
    else L.tt.call(this, [10, 13], L.agp, "tools/pbucket");
    this.Sj = !1;
    this.adf = j;
  };
  L.aZ.prototype = new L.tt();
  L.aZ.prototype.enable = function (j, q, m, n) {
    var G = new fd(_.E.c, !0);
    G.data = { R: _.Y.t5, $U: "default" };
    q.k(G);
  };
  L.aZ.prototype.yp = function (j, q) {};
  L.aZ.prototype.oo = function (j, q, m, n, G) {
    if (this.dr(j, q, m, n, G, !0)) return;
    this.Sj = !0;
  };
  L.aZ.prototype.C3 = function (j, q, m, n, G) {
    if (this.dr(j, q, m, n, G)) return;
  };
  L.aZ.prototype.H_ = function (j, q, m, n, G, W) {
    this.enable(j, q, m, n);
    var k = this.Sj;
    this.Sj = !1;
    if (!k || W) return;
    if (!j.Ph()) return;
    var T = j.I.sb(G.x, G.y),
      b = L.y4.amM(j, T, this.TX.wconf, this.TX.sall, !0);
    if (b == null) return;
    if (j.h) {
      var c = j.h.H.TM(b.H);
      if (c.C() < b.H.C()) {
        var a = B.j(c.C(), j.depth);
        B.sN(b.N, b.H, a, c);
        b.H = c;
        b.N = a;
      }
    }
    var f = B.j(b.H.C() * 4, j.depth),
      U = B.b4(m.UP, 1);
    B.nn(f, U.o, U.i, U.X);
    B.ln(b.N, f, 3);
    this.g5(j);
    this.xU(j, this.adf ? "erase" : "draw", f, b.H, b.H);
    this.gF(j, b.H);
    this.finish(j, b.H);
  };
  L.vr = function () {
    L.pI.call(this, [10, 14], L.aG1, "tools/plasso");
    this.j0 = [];
    this.LI = null;
    this.rD = null;
    this.awK = 0;
  };
  L.vr.prototype = new L.pI();
  L.vr.prototype.disable = function (j, q, m, n) {
    this.zE(j);
  };
  L.vr.prototype.Q7 = function (j, q, m, n) {
    this.j0 = [gn.gv, gn.N7];
  };
  L.vr.prototype.oa = function (j) {
    return this.j0.indexOf(j) != -1;
  };
  L.vr.prototype.wr = function (j) {
    return this.rD != null;
  };
  L.vr.prototype.tf = function () {
    return this.rD != null;
  };
  L.vr.prototype.bx = function () {
    return this.rD != null;
  };
  L.vr.prototype.dU = function (j, q, m, n) {
    if (this.rD == null) return;
    var G = this.rD,
      W = G.L,
      k = W.length - 2,
      T = this.BE;
    if (this.bB.KL(1) && m.M(gn.O4) && n.qT) {
      W.push(0, 0);
      G.RC.push("L");
      k += 2;
    } else if (m.M(gn.X6)) T = L.Pr.jO(new ea(W[k - 2], W[k - 1]), T);
    W[k] = T.x;
    W[k + 1] = T.y;
    j.W.cT = G;
    j._F = !0;
  };
  L.vr.prototype.IB = function (j, q, m, n) {
    var G = Date.now();
    if (this.rD == null)
      this.rD = {
        L: [this.BE.x, this.BE.y, this.BE.x, this.BE.y],
        RC: ["M", "L"],
      };
    else {
      this.dU(j, q, m, n);
      if (
        G - this.awK < 250 ||
        ea.gw(this.BE, new ea(this.rD.L[0], this.rD.L[1])) < L.vp(j, n)
      ) {
        this.LI = this.rD;
        this.finish(j, q, m, n);
        this.zE(j);
        return;
      }
      this.rD.RC.push("L");
      this.rD.L.push(this.BE.x, this.BE.y);
    }
    this.awK = G;
    j.W.cT = this.rD;
  };
  L.vr.prototype.zE = function (j) {
    this.rD = null;
    this.j0 = [];
    if (j != null) {
      j.W.cT = null;
      j._F = !0;
    }
  };
  L.vr.prototype.uY = function (j, q, m, n) {
    L.pI.prototype.uY.call(this, j, q, m, n);
    if (n.M(gn.k9) && this.rD == null && this.LI && j.h != null) {
      var G = new fd(_.E.w);
      G.l = L.cJ;
      G.data = { R: "h_stepbck" };
      q.k(G);
      this.Q7(j, m, n, null);
      this.rD = this.LI;
      return;
    }
    if (this.rD == null) return;
    if (n.M(gn.gv) || n.M(gn.N7)) {
      this.rD.L.pop();
      this.rD.L.pop();
      this.rD.RC.pop();
      this.dU(j, m, n);
    }
    if (n.M(gn.FP)) {
      if (this.rD.L.length > 4) {
        this.LI = this.rD;
        this.finish(j, m, n);
      }
      this.rD = null;
    }
    if (n.M(gn.k9)) {
      this.rD = null;
    }
    j.W.cT = this.rD;
    j._F = !0;
  };
  L.vr.prototype.getSelection = function (j, q, m, n) {
    return L.pI.zt(this.rD.L, null, this.TX.anta);
  };
  L.FB = function () {
    L.pI.call(this, [10, 10], L.a4q, "tools/mlasso");
    this.j0 = [];
    this.D = [];
    this.z2 = [];
    this.EX = [];
    this.atK = null;
    this.abG = 0;
    this.dx = null;
    this.WY = null;
    this.d5 = 0;
    this.Dm = 0;
  };
  L.FB.prototype = new L.pI();
  L.FB.prototype.disable = function (j, q, m, n) {
    this.clear(j);
  };
  L.FB.prototype.wr = function (j) {
    return this.D.length != 0;
  };
  L.FB.prototype.bx = function () {
    return this.D.length != 0;
  };
  L.FB.prototype.oa = function (j) {
    return this.j0.indexOf(j) != -1;
  };
  L.FB.prototype.Q7 = function (j, q, m, n) {
    this.j0 = [gn.gv, gn.N7];
    var G = this.vX(this.ou, j);
    if (
      this.D.length != 0 &&
      (ea.gw(G, this.D[0]) < L.vp(j, n) || Date.now() - this.d5 < 300)
    ) {
      this.ME(j, this.D[0]);
      this.finish(j, q, m);
      this.clear(j);
      return;
    }
    this.d5 = Date.now();
    if (this.D.length != 0) G = this.zk(G, j);
    else {
      var W = j.r,
        k = j.$,
        T = B.sL(j.ht(), 8),
        b = UZIP.adler(T, 0, T.length);
      if (b == this.abG) {
      } else {
        var c = B.j(W * k),
          a = W * k * 4;
        for (var y = 0; y < a; y += 4)
          c[y >>> 2] = ~~(
            0.5 +
            B.he(T[y], T[y + 1], T[y + 2]) * (T[y + 3] * (1 / 255))
          );
        this.atK = B.T3.aK5(c, W, k);
        this.abG = b;
      }
      this.WY = new Uint16Array(W * k);
    }
    this.ME(j, G);
    this.Dm = m.M(gn.O4) ? 1 : 0;
    this.FE(j);
  };
  L.FB.prototype.ME = function (j, q) {
    var m = this.D;
    this.z2[m.length] = this.EX.length;
    if (m.length != 0) {
      B.T3.TR(this.dx, q.y * j.r + q.x);
      var n = this.m5(j, q);
      n.reverse();
      var G = L.FB.aAK(j, n);
      this.EX = this.EX.concat(G);
    }
    m.push(q);
    this.aad(j);
  };
  L.FB.prototype.aad = function (j) {
    var q = this.D[this.D.length - 1],
      m = q.y * j.r + q.x;
    this.dx = B.T3.are(this.atK, m, j.r, j.$);
    this.WY.fill(0);
  };
  L.FB.prototype.vX = function (j, q) {
    return new ea(
      Math.floor(Math.max(0, Math.min(q.r - 1, j.x))),
      Math.floor(Math.max(0, Math.min(q.$ - 1, j.y)))
    );
  };
  L.FB.prototype.clear = function (j) {
    this.EX = [];
    this.D = [];
    this.z2 = [];
    this.dx = null;
    this.WY = null;
    if (j != null) {
      j.W.cT = null;
      j.W.a0 = [];
      j._F = !0;
    }
    this.j0 = [];
  };
  L.FB.prototype.dU = function (j, q, m, n) {
    var G = this.D,
      W = G.length;
    if (W == 0) return;
    var k = this.zk(this.vX(this.BE, j), j),
      T = this.m5(j, k);
    for (var y = 0; y < T.length; y++) {
      var b = T[y],
        c = new ea(b % j.r, Math.floor(b / j.r));
      if (this.WY[b] > 30 && ea.gw(c, G[W - 1]) > 20) {
        this.ME(j, c);
        return;
      }
      this.WY[b]++;
    }
    if (this.Dm == 1 && n.qT) this.ME(j, k);
    this.FE(j);
  };
  L.FB.prototype.FE = function (j) {
    var q = this.D;
    if (q.length != 0) {
      var m = this.zk(this.vX(this.BE, j), j),
        n = this.m5(j, m);
      n.reverse();
      var G = L.FB.aAK(j, n),
        W = this.EX.concat(G),
        k = (j.W.cT = { L: W, RC: ["M"] });
      for (var y = 2; y < W.length; y += 2) k.RC.push("L");
    }
    j.W.a0 = [];
    for (var y = 0; y < q.length; y++) j.W.a0.push(q[y].x + 0.5, q[y].y + 0.5);
    j._F = !0;
  };
  L.FB.prototype.IB = function (j, q, m, n) {};
  L.FB.prototype.uY = function (j, q, m, n) {
    if (this.D.length == 0) return;
    if (n.M(gn.gv) || n.M(gn.N7)) {
      this.D.pop();
      this.EX = this.EX.slice(0, this.z2[this.D.length]);
      this.z2.pop();
      if (this.D.length == 0) this.clear(j);
      else this.aad(j);
      this.FE(j);
    }
    if (n.M(gn.FP)) {
      var G = this.vX(this.BE, j);
      this.ME(j, G);
      this.finish(j, m, n);
      this.clear(j);
    }
    if (n.M(gn.k9)) {
      this.clear(j);
    }
  };
  L.FB.prototype.getSelection = function (j, q, m, n) {
    return L.pI.zt(this.EX, null, this.TX.anta);
  };
  L.FB.prototype.m5 = function (j, q) {
    var m = this.D[this.D.length - 1],
      n = m.y * j.r + m.x,
      G = q.y * j.r + q.x;
    if (this.Dm == 1) return [G, n];
    var W = [G];
    while (G != n) {
      G = G + this.dx.tE[G];
      W.push(G);
      if (W.length > 5e3) {
        console.log(W);
        throw "e";
      }
    }
    return W;
  };
  L.FB.aAK = function (j, q) {
    var m = [],
      n = j.r;
    for (var y = 0; y < q.length; y++) {
      var G = q[y];
      m.push((G % n) + 0.5, Math.floor(G / n) + 0.5);
    }
    return m;
  };
  L.FB.prototype.zk = function (j, q) {
    var m = q.r,
      n = q.$,
      G = j.P(),
      k = 3;
    B.T3.TR(this.dx, j.y * m + j.x);
    var W = this.dx.Yo[j.y * m + j.x];
    for (var T = -k + 1; T < k; T++)
      for (var b = -k + 1; b < k; b++) {
        var c = j.x + b,
          a = j.y + T;
        if (c < 0 || c >= m || a < 0 || a >= n) continue;
        B.T3.TR(this.dx, a * m + c);
        if (this.dx.Yo[a * m + c] < W) G.Tu(c, a);
      }
    return G;
  };
  L.c9 = function () {
    L.ju.call(this, [10, 36], L.VO, "tools/ruler");
    this.PG = null;
    this.uE = null;
    this.LX = null;
    this.an9 = null;
    this.ay5 = null;
  };
  L.c9.prototype = new L.ju();
  L.c9.prototype.wr = function (j) {
    return j.qT;
  };
  L.c9.prototype.enable = function (j, q, m, n) {
    L.ju.prototype.enable.call(this, j, q, n, m);
    if (j) {
      this.t7(j);
    }
  };
  L.c9.prototype.disable = function (j, q, m, n) {
    if (j) this.zE(j);
  };
  L.c9.prototype.BT = function (j, q, m, n, G) {
    if (j.R == "unit") {
      var W = this.PG,
        k = j.K;
      m.pj = {
        classID: "null",
        null: {
          t: "obj ",
          v: [
            { t: "prop", v: { classID: "Prpr", keyID: "measurementScale" } },
            { t: "Enmr", v: { classID: "Dcmn", typeID: "Ordn", enum: "Trgt" } },
          ],
        },
        T: {
          t: "Objc",
          v: {
            classID: "measurementScale",
            pixelLength: { t: "long", v: k[0] },
            logicalLength: { t: "doub", v: k[1] },
            logicalUnits: { t: "TEXT", v: k[2] },
          },
        },
      };
      this.Qo(q, _.E.c, {
        R: _.Y.vv,
        l: this.id,
        aLp: W[0],
        IM: W[1],
        g9: W[2],
        zv: m.zv,
        a55: m.r,
        pj: m.pj,
      });
    }
    if (j.R == "reset") {
      this.PG = this.LX = null;
      this.t7(m);
    }
  };
  L.c9.prototype.oo = function (j, q, m, n, G) {
    var W = L.vp(j, G),
      k = j.I.sb(G.x, G.y);
    k.x = Math.round(k.x);
    k.y = Math.round(k.y);
    var T = this.PG;
    this.uE = T ? T.slice(0) : null;
    var b = T && ea.gw(k, T[0]) < W,
      c = T && ea.gw(k, T[1]) < W,
      a = T && T[2] && ea.gw(k, T[2]) < W;
    if (b || c || a) {
      if (n.M(gn.O4) && T.length == 2) {
        if (c) {
          var f = T[0];
          T[0] = T[1];
          T[1] = f;
        }
        T[2] = T[0].P();
        this.LX = [2];
      } else this.LX = [b ? 0 : c ? 1 : 2];
    } else if (
      T &&
      L.c9.au$(T[0], T[1], k) < W &&
      Math.min(T[0].x, T[1].x) - 5 <= k.x &&
      k.x <= Math.max(T[0].x, T[1].x) + 5 &&
      Math.min(T[0].y, T[1].y) - 5 <= k.y &&
      k.y <= Math.max(T[0].y, T[1].y) + 5
    ) {
      this.LX = [];
      this.ay5 = [];
      for (var y = 0; y < T.length; y++) {
        this.LX.push(y);
        this.ay5.push(T[y].P());
      }
      this.an9 = k;
    } else {
      this.PG = [k.P(), k.P()];
      this.LX = [1];
    }
  };
  L.c9.prototype.C3 = function (j, q, m, n, G) {
    if (this.LX == null) return;
    var W = this.PG,
      k = this.LX,
      T = j.I.sb(G.x, G.y);
    T.x = Math.round(T.x);
    T.y = Math.round(T.y);
    if (k.length > 1) {
      var b = T.x - this.an9.x,
        c = T.y - this.an9.y;
      for (var y = 0; y < W.length; y++) {
        W[y] = this.ay5[y].P();
        W[y].offset(b, c);
      }
    } else {
      W[k[0]].Tu(T.x, T.y);
      if (n.M(gn.X6)) {
        W[k[0]] = L.Pr.jO(W[1 - k[0]], W[k[0]]);
      }
    }
    this.t7(j);
    this.Qo(q, _.E.c, {
      R: _.Y.vv,
      l: this.id,
      aLp: W[0],
      IM: W[1],
      g9: W[2],
      zv: j.zv,
      a55: j.r,
      pj: j.pj,
    });
    j.I.qN = B.b.YU([W[0].x, W[0].y, W[1].x, W[1].y]);
  };
  L.c9.prototype.H_ = function (j, q, m, n, G, W) {
    this.LX = null;
    if (W) {
      this.PG = this.uE.slice(0);
      this.t7(j);
    }
  };
  L.c9.prototype.Qo = function (j, q, m) {
    var n = new fd(q, !0);
    n.data = m;
    j.k(n);
  };
  L.c9.prototype.t7 = function (j) {
    var q = this.PG;
    if (q == null) this.zE(j);
    else {
      var m = [q[1].x, q[1].y, q[0].x, q[0].y],
        n = ["M", "L"];
      if (q.length > 2) {
        m.push(q[2].x, q[2].y);
        n.push("L");
      }
      j.W.cT = { RC: n, L: m };
      j.W.a0 = m;
    }
    j._F = !0;
  };
  L.c9.prototype.zE = function (j) {
    j.W.cT = null;
    j.W.a0 = [];
  };
  L.c9.au$ = function (j, q, m) {
    var n = q.x - j.x,
      G = q.y - j.y,
      W = Math.abs(G * m.x - n * m.y + q.x * j.y - q.y * j.x),
      k = Math.sqrt(n * n + G * G);
    return k == 0 ? 0 : W / k;
  };
  L.wj = function () {
    L.tt.call(this, [10, 19], L.Bd, "tools/sharpen");
    this.Qs = "copy";
  };
  L.wj.prototype = new L.tt();
  L.wj.prototype.oo = function (j, q, m, n, G) {
    var W = this.TX.pdetail ? e4.Xu : e4.Bd;
    if (n.M(gn.O4)) W = e4.Mx;
    this.vh(j, m, n, G, this.TX.strn, W);
    if (this.ok == null) return;
    this.Am(j);
  };
  L.wj.prototype.C3 = function (j, q, m, n, G) {
    this.BX(j, q, m);
    if (this.Oc) this.UI(j, m, G);
    if (this.ok == null) return;
    if (!G.qT) return;
    this.Df(j, m, n, G);
    this.Am(j);
  };
  L.Jx = function () {
    L.tt.call(this, [10, 24], L.J6, "tools/shbrush");
    this.Qs = "draw";
    this.TX.opacity = 0.5;
  };
  L.Jx.prototype = new L.tt();
  L.Jx.prototype.oo = function (j, q, m, n, G) {
    this.vh(j, m, n, G, 1);
    if (this.ok == null) return;
    this.w7(j);
    this.Am(j);
  };
  L.Jx.prototype.C3 = function (j, q, m, n, G) {
    this.BX(j, q, m);
    if (this.Oc) this.UI(j, m, G);
    if (this.ok == null) return;
    if (!G.qT) return;
    this.Df(j, m, n, G);
    this.Am(j);
  };
  L.Jx.prototype.H_ = function (j, q, m, n, G) {
    if (this.ok == null) return;
    this.xU(j, "sheal", this.ok.qX(), this.ok.Fj(), this.ok.XQ(), null);
    this.gF(j, this.ok.XQ());
    L.tt.prototype.H_.call(this, j, q, m, n, G);
  };
  L.bI = function () {
    L.tt.call(this, [10, 20], L.Ro, "tools/smudge");
    this.Qs = "copy";
  };
  L.bI.prototype = new L.tt();
  L.bI.prototype.oo = function (j, q, m, n, G) {
    var W = this.TX.brush.toolOptions;
    this.vh(j, m, n, G, this.TX.strn, e4.Ro);
    if (this.ok == null) return;
    this.Am(j);
  };
  L.bI.prototype.C3 = function (j, q, m, n, G) {
    this.BX(j, q, m);
    if (this.Oc) this.UI(j, m, G);
    if (this.ok == null) return;
    if (!G.qT) return;
    this.Df(j, m, n, G);
    this.Am(j);
  };
  L.Kz = function () {
    L.tt.call(this, [10, 23], L.mU, "tools/sponge");
    this.Qs = "sponge";
  };
  L.Kz.prototype = new L.tt();
  L.Kz.prototype.oo = function (j, q, m, n, G) {
    this.vh(j, m, n, G, this.TX.flow);
    if (this.ok == null) return;
    this.Am(j);
  };
  L.Kz.prototype.C3 = function (j, q, m, n, G) {
    this.BX(j, q, m);
    if (this.Oc) this.UI(j, m, G);
    if (this.ok == null) return;
    if (!G.qT) return;
    this.Df(j, m, n, G);
    this.Am(j);
  };
  L.Lr = function () {
    L.ju.call(this, [10, 17], L.R2, "tools/zoom");
    this.BR = !1;
    this.Ow = !0;
    this.RR = !1;
    this.Ds = 0;
    this.D0 = null;
    this.dz = null;
    this.aif = 0;
    this.Hl = null;
    this.amd = 0;
    this.hU = new cG(
      [
        { name: [8, 0], RP: "Ctrl + +" },
        { name: [8, 1], RP: "Ctrl + -", q7: !0 },
        { name: [20, 3], RP: "Ctrl + 0" },
        { name: ["VAR0: 100%", [20, 2]], RP: "Ctrl + 1" },
      ],
      [
        { p: _.E.w, l: L.R2, d: { R: "zoom", Ow: !0 } },
        { p: _.E.w, l: L.R2, d: { R: "zoom", Ow: !1 } },
        { p: _.E.w, l: L.R2, d: { R: "adapt", K: "fitscr" } },
        { p: _.E.w, l: L.R2, d: { R: "adapt", K: "pixel" } },
      ]
    );
  };
  L.Lr.prototype = new L.ju();
  L.Lr.prototype.FO = function (j, q, m, n, G) {
    var W = this.hU;
    W.T();
    W.parent = q;
    W.update(j, m);
    var k = new fd(_.E.c, !0);
    k.data = { R: _.Y.wQ, Tf: W, x: G.uA + 2, y: G.Ql + 1 };
    q.k(k);
  };
  L.Lr.prototype.enable = function (j, q, m, n) {
    this.kM(q, n);
    if (ei < 2 && j && Date.now() - this.Ds < 300)
      this.BT({ R: "adapt", K: "pixel" }, q, j, n, m);
    this.Ds = Date.now();
  };
  L.Lr.prototype.oo = function (j, q, m, n, G) {
    this.dz = new ea(G.x, G.y);
    this.aif = j.I.k3;
    this.Hl = j.I.g.P();
  };
  L.Lr.prototype.C3 = function (j, q, m, n, G) {
    if (this.dz == null) return;
    var W = Math.exp(Math.log(this.aif) + (G.x - this.dz.x) / 64);
    W = Math.max(0.02, Math.min(L.Lr.Nk[0], W));
    j.I.k3 = this.aif;
    j.I.g = this.Hl.P();
    this.BT({ R: "zoom", k3: W, tZ: this.dz, RR: this.RR }, q, j, n, m);
  };
  L.Lr.prototype.H_ = function (j, q, m, n, G) {
    if (ea.gw(this.dz, G) < 4) {
      var W = this.aD$(n);
      this.BT({ R: "zoom", Ow: W, tZ: G, RR: this.RR }, q, j, n, m);
    }
    this.dz = null;
  };
  L.Lr.Nk = [
    128,
    64,
    32,
    16,
    12,
    8,
    6,
    5,
    4,
    3,
    2,
    1,
    2 / 3,
    1 / 2,
    (1 / 2) * (2 / 3),
    1 / 4,
    (1 / 4) * (2 / 3),
    1 / 8,
    (1 / 8) * (2 / 3),
    1 / 16,
    (1 / 16) * (2 / 3),
    1 / 32,
    (1 / 32) * (2 / 3),
    1 / 64,
  ];
  L.Lr.gp = function (j, q, m, n) {
    var G = 1;
    while ((j * G * 1) / 2 > m || (q * G * 1) / 2 > n) G *= 1 / 2;
    if ((j * G * 2) / 3 > m || (q * G * 2) / 3 > n) G *= 1 / 2;
    else if (j * G > m || q * G > n) G *= 2 / 3;
    return G;
  };
  L.Lr.a9M = function (j, q) {
    var m = L.Lr.apH(j);
    if (q && m == 0) return j;
    if (!q && m == L.Lr.Nk.length - 1) return j;
    return L.Lr.Nk[q ? m - 1 : m + 1];
  };
  L.Lr.apH = function (j) {
    var q = 0;
    while (L.Lr.Nk[q] > j) q++;
    return q;
  };
  L.Lr.b5 = function (j, q, m, n) {
    var G = j.fg;
    if (n == 0 || n == null) {
      n = L.Lr.a9M(j.k3, m);
      if (n == j.k3) return;
    }
    var W = j.sb(q.x, q.y);
    if (ei == 1 || ei == 2) {
    } else {
      W.x = Math.max(0, Math.min(G.r, W.x));
      W.y = Math.max(0, Math.min(G.$, W.y));
    }
    if (!1) {
    } else {
      var k = j.WQ(),
        T = j.k3 / n;
      k.translate(-W.x, -W.y);
      k.scale(T, T);
      k.translate(W.x, W.y);
      var b = j.g.y;
      j.azH(k);
    }
  };
  L.Lr.prototype.BT = function (j, q, m, n, G) {
    if (j.R == "pzoom") {
      if (typeof j.K == "string") return;
      j = { R: "zoom", k3: j.K / 100 };
    }
    if (j.R == "prvw") {
      if (m.add.prvw == null) m.add.prvw = 0;
      m.add.prvw = 1 - m.add.prvw;
      m._F = !0;
      if (ei == 2) {
        m.I.k3 = 1;
        m.I.g = new ea(0, 0);
        if (m.add.prvw == 1) {
          var W = m.I.yJ;
          m.I.k3 = (0.8 * W.r) / 1e3;
          m.I.g.y = 500 * m.I.k3 - W.$ * 0.5 + W.r * 0.07;
        }
      }
    }
    var k = 0,
      T = !1,
      b = null;
    if (j.R == "adapt") {
      var c = 0;
      if (j.K == "pixel") c = 1;
      if (j.K == "fitscr") {
        var c = 0,
          a = m.I.yJ.r,
          f = m.I.yJ.$,
          U = new hk(0, 0, m.r, m.$),
          Z = B.b._c(U).L,
          h = new k$();
        h.rotate(m.I.ny);
        B.b.u(Z, h, Z);
        var u = B.b.RD(Z),
          i = G.sB ? B.uO.XF + 4 : 8;
        c = Math.min((a - i * 2) / u.r, (f - i * 2) / u.$);
        m.I.g.Tu(0, 0);
      }
      b = new ea(Math.round(m.I.yJ.r / 2), Math.round(m.I.yJ.$ / 2));
      k = c;
      L.Lr.b5(m.I, b, T, k);
      m.Ls = !0;
    }
    if (j.R.startsWith("multi")) {
      function x(A) {
        var d = A[0].x - A[1].x,
          I = A[0].y - A[1].y;
        return Math.sqrt(d * d + I * I);
      }
      function X(A) {
        return new ea((A[0].x + A[1].x) / 2, (A[0].y + A[1].y) / 2);
      }
      function $(A) {
        var d = A[0].x - A[1].x,
          I = A[0].y - A[1].y;
        return Math.atan2(I, d);
      }
      var H = j.rC,
        C = X(H);
      if (j.R == "multidown") {
        this.D0 = [H, m.I.k3, m.I.sb(C.x, C.y), m.I.ny];
      } else {
        var l = L.Lr.Nk;
        k = (this.D0[1] * x(H)) / x(this.D0[0]);
        k = Math.max(l[l.length - 1], Math.min(l[0], k));
        if (k != m.I.k3) L.Lr.b5(m.I, C, T, k);
        var v = this.D0[2],
          K = m.I.gS(v.x, v.y),
          S = m.I.g;
        S.x = Math.round(S.x + C.x - K.x);
        S.y = Math.round(S.y + C.y - K.y);
        var o = this.D0[3] + ($(H) - $(this.D0[0])),
          V = 2 * Math.PI,
          P = [0, V / 4, V / 2, (V * 3) / 4, V];
        while (o < 0) o += V;
        o = o % V;
        for (var y = 0; y < P.length; y++)
          if (Math.abs(o - P[y]) < 0.08) {
            o = P[y];
            break;
          }
        m.I.ny = o;
        m.Ls = !0;
      }
    }
    if (j.R == "scroll") {
      b = j.tZ;
      var l = L.Lr.Nk,
        z = j.rH.y,
        E = 1 + Math.abs(z) * 8e-4 * (j.ahL ? 10 : 1);
      if (z > 0) E = 1 / E;
      k = m.I.k3 * E;
      L.Lr.b5(m.I, b, T, Math.min(l[0], Math.max(l[l.length - 1], k)));
      m.Ls = !0;
    }
    if (j.R == "zoom") {
      var A = j.RR ? q.mS : [m];
      for (var y = 0; y < A.length; y++) {
        var N = A[y],
          Q = N.I;
        b = j.tZ
          ? j.tZ
          : new ea(Math.round(Q.yJ.r / 2), Math.round(Q.yJ.$ / 2));
        if (j.k3 != null) k = j.k3;
        else T = j.Ow;
        L.Lr.b5(Q, b, T, k);
        N.Ls = !0;
      }
    }
    if (j.R == "mskView") {
      var e = m.U[m.J[0]];
      if (e.ma <= 0) {
        e.ma = 1;
        m.qB = !0;
      }
      var Y = e.ma == 3 ? e.xE(m).x7 : e.ex();
      if (j.K == 0) {
        m.I.rO = [1, 1, 1];
        Y.Ea = !1;
      }
      if (j.K == 1) {
        m.I.rO = [1, 1, 1];
        Y.Ea = !0;
      }
      if (j.K == 2) {
        m.I.rO = [0, 0, 0];
        Y.Ea = !0;
      }
      for (var y = 0; y < m._E.length; y++) m._E[y].Ea = !1;
      m.y2 = [];
      m._F = !0;
    }
  };
  L.Lr.prototype.uY = function (j, q, m, n) {
    if (this.BR != n.M(gn.O4)) {
      this.BR = n.M(gn.O4);
      var G = { R: _.Y.vv, l: this.id, BR: this.BR },
        W = new fd(_.E.c, !0);
      W.data = G;
      q.k(W);
      this.kM(q, n);
    }
  };
  L.Lr.prototype.kM = function (j, q) {
    var m = new fd(_.E.c, !0),
      n = this.aD$(q);
    m.data = { R: _.Y.t5, $U: n ? "zoom-in" : "zoom-out" };
    j.k(m);
  };
  L.Lr.prototype.uS = function (j, q, m, n) {
    this.Ow = j.Ow;
    this.RR = j.RR;
    this.kM(q, n);
  };
  L.Lr.prototype.aD$ = function (j) {
    var q = this.Ow;
    if (j.M(gn.Xe) && j.M(gn.A8)) q = !0;
    if (this.BR) q = !q;
    return q;
  };
  L.Lr.aDD = function (j, q) {
    if (j.M(gn.h5) || j.M(gn.an3)) {
      q.l = L.R2;
      q.data = { R: "zoom", Ow: !0 };
    }
    if (j.M(gn.Nc)) {
      q.l = L.R2;
      q.data = { R: "zoom", Ow: !1 };
    }
    if (j.M(gn.Uj)) {
      q.l = L.R2;
      q.data = { R: "adapt", K: "fitscr" };
    }
    if (j.M(gn.kF)) {
      q.l = L.R2;
      q.data = { R: "adapt", K: "pixel" };
    }
  };
  L.Qc = function (j, q, m) {
    L.ju.call(this, j, q, m);
    this.fg = null;
    this.a = null;
    this.AS = null;
    this.a05 = 0;
    this.qC = null;
    this.IR = -1;
    this.a6I = null;
    this.afY = null;
  };
  L.Qc.prototype = new L.ju();
  L.Qc.Rr = function (j, q) {
    var m = {
        t: "obj ",
        v: [{ t: "prop", v: { classID: "Path", keyID: "WrPt" } }],
      },
      n =
        j == null
          ? { classID: "null", null: m, WhPt: { t: "bool", v: !0 } }
          : {
              classID: "Strk",
              null: m,
              Usng: { t: "type", v: { classID: j } },
              __name: "Stroke",
            };
    if (q) n.Prs = { t: "bool", v: !0 };
    return { _D: j == null ? "fill" : "stroke", SC: n };
  };
  L.Qc.Br = function (y) {
    var j = {
        t: "Enmr",
        v: { classID: "Path", typeID: "Path", enum: "vectorMask" },
      },
      n;
    if (y == 3) {
      var q = jw.$W("Lyr", !0);
      q.v.unshift(j);
      return { _D: "delete", SC: { classID: "Dlt", null: q } };
    }
    var q = jw.$W("Path"),
      m = { t: "obj ", v: [j] };
    if (y < 2)
      n = { t: "enum", v: { vectorMaskEnabled: y == 0 ? "RvlA" : "HdAl" } };
    else n = jw.$W("Path", !0);
    return { _D: "make", SC: { classID: "Mk", null: q, At: m, Usng: n } };
  };
  L.Qc.prototype.enable = function (j, q, m, n, G) {
    this.a = m;
    var W = new fd(_.E.c, !0);
    W.data = { R: _.Y.t5, $U: "default" };
    q.k(W);
  };
  L.Qc.prototype.FO = function (j, q, m, n, G) {
    var W = j.ac(),
      k = W[0],
      T = W[1];
    if (T.length == 0) return;
    var b = k[T[0]],
      c = b.add.vmsk,
      a = j.I.sb(G.x, G.y),
      f = (4 * L.IC()) / j.I.k3,
      U = new hk(a.x - f, a.y - f, f * 2, f * 2),
      Z = B.z.O5(c.D, U)[0];
    if (Z.length != 0) {
      c.U9 = Z;
      j._F = !0;
    }
    var h = B.z.g0(c.D, a).Wy;
    if (h != -1) {
      c.J = [h];
      j._F = !0;
    }
    var u = new fd(_.E.c, !0);
    u.data = { R: _.Y.vv, l: this.id, sy: G, sk: j, a: m };
    q.k(u);
  };
  L.Qc.prototype.aK1 = function (j, q) {
    var m = new fd(_.E.c, !0);
    m.data = { R: _.Y.fh, rw: fG.rf };
    if (!q.x_) j.k(m);
    m.data = { R: _.Y.fh, rw: fG.yt };
    if (!q.q1.GA) j.k(m);
  };
  L.Qc.prototype.yc = function (j, q, m, n, G) {
    if (this.qC && this.IR == -1) {
      console.log("updating over live");
      this.vy(j, m);
    }
    if ([L.HO, L.ZR, L.Zo, L.lp, L.Yz].indexOf(this.id) != -1)
      L.ju.a2$.call(this, j, q, m, n);
    if (j == null) return;
    if (m.RW != this.id && G == null) return;
    if (j.J.length == 0) return;
    var W = j.U[j.J[0]],
      k = W.add.vmsk,
      T = W.add.vstk;
    if (ei == 0) {
      var b = eu.H4(W.add);
      this.fg = j;
      this.AS = q;
      if (
        W.ql() &&
        k != null &&
        (JSON.stringify(T) != JSON.stringify(m.pk) ||
          JSON.stringify(b) != JSON.stringify(m.MJ))
      ) {
        this.a05 = Date.now();
        var c = new fd(_.E.c, !0);
        c.data = { R: _.Y.fh, rw: fG.Vx, K: b };
        q.k(c);
        c.data = { R: _.Y.fh, rw: fG.lF, K: T };
        q.k(c);
      }
    } else {
      var a = null;
      for (var y = 0; y < j.J.length; y++) {
        var W = j.U[j.J[y]],
          f = W.add.vstl;
        if (f == null) continue;
        if (a == null) a = B.S(f);
        else {
          for (var U in f) {
            if (a[U] == null) continue;
            if (f[U] == f.Nu) {
              if (JSON.stringify(f[U]) != JSON.stringify(a[U])) delete a[U];
            } else if (f[U] == f.dZ) {
              if (JSON.stringify(f[U]) != JSON.stringify(a[U])) delete a[U];
            } else if (f[U] != a[U]) delete a[U];
          }
        }
      }
      if (a == null) return;
      var Z = JSON.stringify(a);
      if (Z != JSON.stringify(m.TB)) {
        var c = new fd(_.E.c, !0);
        c.data = { R: _.Y.fh, rw: fG.f7, K: a };
        q.k(c);
      }
    }
  };
  L.Qc.prototype.yp = function (j, q) {
    if (q == fG.Tz || q == fG.HN) this.yc(null, null, j, null);
    if (this.fg == null) return;
    if (q == fG.HN || q == fG.Vx || q == fG.lF) {
      if (Date.now() - this.a05 < 50) return;
      var m = q == fG.Vx,
        n = this.fg,
        G = m ? j.MJ : j.pk,
        W = [],
        k = n.J;
      for (var y = 0; y < k.length; y++) {
        var T = k[y],
          b = n.U[T];
        if (!b.ql() || b.add.vmsk == null) continue;
        W.push(T);
      }
      var c = new fd(_.E.w, !0);
      c.l = L.W1;
      c.data = { R: R.o_, Gj: W, nt: m, K: G };
      if (W.length != 0) this.AS.k(c);
    }
  };
  L.Qc.prototype.a8a = function (j) {
    if (typeof j == "number") {
      var q = new fd(_.E.NI, !0);
      q.data = L.jy.QQ(0);
      q.data.SC.Usng.v.Type.v.Clr.v = B.MV.Ia({
        o: (j >>> 16) & 255,
        i: (j >>> 8) & 255,
        X: (j >>> 0) & 255,
      });
      this.AS.k(q);
    }
  };
  L.Qc.prototype.BT = function (j, q, m, n, G) {
    this.AS = q;
    if (j.R == "newfill") {
      if (j.Sg == 0) {
        var W = new fd(_.E.c, !0);
        W.data = {
          R: _.Y.s0,
          kO: "colorpicker",
          Fx: G.UP,
          cy: this.a8a.bind(this),
        };
        q.k(W);
      }
    } else if (j.R == "smplp") {
      if (m == null) return;
      var k = m.ac(),
        T = k[0],
        b = k[1];
      if (b.length == 0) {
        alert("No paths selected");
        return;
      }
      var c = T[b[0]];
      if (c.add.vmsk.J.length <= 0) {
        alert("No paths selected");
        return;
      }
      if (this.Vr == null) {
        this.Vr = c.add.vmsk.P();
        this.dg = JSON.stringify(c.add.vogk);
        this.rD = c;
        this.fg = m;
      }
      var W = new fd(_.E.c, !0);
      W.data = {
        R: _.Y.s0,
        kO: "simplifypath",
        pv: 100,
        ml: this.a6z.bind(this),
      };
      q.k(W);
    } else if (j.R == "pathedit") {
      var a = j._G,
        f = "",
        U = m.GA.slice(0),
        Z = m.bR.slice(0),
        h = m.GA.slice(0),
        u = m.bR.slice(0),
        i = m.PU,
        x = m.PU;
      if (a == "rnm") {
        var X = -1 - j.Wy,
          $ = U[X],
          H = fb.t8(j.name, $.add);
        if (X != 0) h[X] = H;
        else {
          u = [h.length];
          h.push(H);
          h[0] = fb.t8("Work Path");
        }
        f = "Rename";
      } else if (a == "sspath") {
        if (j.K == -1) {
          x = -1;
          u = [];
        } else if (j.K == 1 && m.PU != -1) u = [m.PU];
        else if (m.bR.length != 0) {
          if (m.EK) {
            alert("Symmetry can't be used in the Pattern Preview");
            return;
          }
          x = m.bR[0];
        } else return;
        f = "Symmetry";
      } else if (a == "new") {
        var H = fb.t8("Path " + U.length);
        if (j.ku) H = j.ku;
        if (j.adN) {
          var k = m.ac(),
            T = k[0],
            b = k[1],
            C = T[b[0]];
          H.add.vmsk = C.add.vmsk.P();
          H.add.vogk = B.S(C.add.vogk);
          if (C.Wy == -1) {
            var l = (h[u[0]] = fb.t8("Path " + U.length));
            l.name = C.name;
            l.Wy = C.Wy;
          }
        }
        h.push(H);
        u = [h.length - 1];
        f = "New";
        if (j.oW != null) {
          if (m.EK) {
            alert("Symmetry can't be used in the Pattern Preview");
            return;
          }
          var v = j.oW[0],
            K = j.oW[1];
          H.name = g$.get(B.vW.list[v][0]);
          var S = B.vW.m5(v, K),
            o = Math.min(m.r, m.$),
            V = (m.r - o) / 2,
            P = (m.$ - o) / 2;
          B.b.u(S.L, new k$(o, 0, 0, o, V, P), S.L);
          H.add.vmsk.D = B.b.LZ(S);
          H.oW = [B.vW.list[v][1], K];
          x = u[0];
          f = "New Symmetry";
        }
      } else if (a == "del") {
        if (m.H7 && m.H7.length != 0) {
          var W = new fd(_.E.NI, !0);
          W.data = L.Qc.Br(3);
          q.k(W);
        }
        if (u.length == 0) return;
        u.sort(function (E, g) {
          return E - g;
        });
        if (u[0] == 0) {
          h[0] = fb.t8(U[0].name);
          u = u.slice(1);
        }
        var z = 0;
        while (u.length != 0) {
          h.splice(u[0] - z, 1);
          u = u.slice(1);
          z++;
        }
        f = "Delete";
      } else if (a == "fromsel") {
        var c = (h[0] = fb.t8("Work Path"));
        u = [0];
        L.Qc.aCv(m.h, c);
        f = "Selection to";
      }
      var E = new eN(f + " Path", this);
      E.data = { uE: U, aud: Z, acd: h, auC: u, aIn: i, agV: x };
      if (a == "fromsel") {
        E.data.hF = m.h;
        E.data.c_ = null;
      }
      m.Du(E);
      this.km(E.data, m);
      if ((a == "new" && j.oW) || (a == "sspath" && j.K != -1)) {
        var W = new fd(_.E.c, !0);
        W.data = { R: _.Y.UK, l: L.Fg };
        q.k(W);
      }
    } else {
      var A = j.ER,
        k = m.ac(j.R == "append" || j.R == "fromAction"),
        T = k[0],
        b = k[1],
        c = T[b[0]],
        N = c.add.vmsk,
        Q = c.add.vogk,
        e = N.P(),
        Y = N.P(),
        d = JSON.stringify(Q);
      if (j.R == "fromAction") {
        var I = j.tp,
          O = I._D,
          s = I.SC,
          p = s.T;
        if (O == "set") {
          if (p) {
            Q = [B.ih.p$(p, m.r, m.$)];
            Y.D.push({ e: 0, Np: 1, length: 0 });
            B.ih.ib(Q, Y);
            A = [12, 76, 0];
          } else throw s;
        } else if (O == "draw") {
          Q = [B.ih.p$(s.Shp, m.r, m.$)];
          Y.D.push({ e: 0, Np: 1, length: 0 });
          B.ih.ib(Q, Y);
          L.Qc.avM(Y.D, s.AntA.v, G.UP, q);
          return;
        } else throw O;
      } else if (j.R == "remove") {
        if (j.L9 && Y.U9.length != 0) {
          Y.D = B.z.aeY(Y.D, Y.U9, Q, j.amn);
          var F = B.z.in(Y.D);
          for (var y = 0; y < Y.J.length; y++)
            if (Y.J[y] >= F) {
              Y.J.splice(y, 1);
              y--;
            }
          Y.U9 = [];
          A = "Delete Anchors";
        } else {
          if (Y.J.length == 0) return;
          var z = 0;
          for (var y = 0; y < Y.J.length; y++) {
            Q.splice(Y.J[y] + z, 1);
            z--;
          }
          Y.D = B.z.apx(Y.D, Y.J);
          Y.J = [];
          Y.U9 = [];
          if (A == null) A = "Delete Paths";
        }
      }
      if (j.R == "append") {
        L.Qc.e5(j.av8, Y, Q);
      }
      this.V8(m, c.Wy, Y, Q);
      this.d7(m, A, c.Wy, e, Y.P(), null, d, JSON.stringify(Q));
    }
  };
  L.Qc.aCv = function (j, q) {
    if (j == null) return;
    var m = j.N.slice(0);
    for (var y = 0; y < m.length; y++) m[y] = m[y] > 128 ? 2 : 1;
    var n = j.H.P();
    n.Lh(1, 1);
    var G = B.j(n.C());
    B.sN(m, j.H, G, n);
    var W = lv.$H(G, n.r, n.$, Math.round(n.C() * 2e-5)),
      k = lv.ac(W),
      T = new k$(1, 0, 0, 1, -1 + j.H.x, -1 + j.H.y);
    for (var y = 0; y < k.length; y++) B.b.u(k[y].path.L, T, k[y].path.L);
    for (var y = 0; y < k.length; y++) {
      var b = k[y];
      if (b.color == 1 && b.parent == -1) continue;
      var c = B.b.LZ(k[y].path, !1);
      c[2].Np = 0;
      q.add.vmsk.D = q.add.vmsk.D.concat(c.slice(2));
    }
    q.add.vogk = R.Pp(q.add.vmsk.D);
  };
  L.Qc.avM = function (j, q, m, n) {
    var G = new R.tm();
    G.D = G.D.concat(j.slice(2));
    var W = G.ex();
    if (!q) B.round(W.N);
    var k = B.j(W.H.C() * 4);
    B.bs(
      k,
      ((m & 255) << 16) | (((m >> 8) & 255) << 8) | (((m >> 16) & 255) << 0)
    );
    B.ln(W.N, k, 3);
    var T = new fd(_.E.w, !0);
    T.l = L.cS;
    T.data = { R: "draw", kJ: { buffer: k, H: W.H.P() }, ER: this.name };
    n.k(T);
  };
  L.Qc.FT = function (j, q) {
    var m = B.z.aCM(j.D, j.J),
      n = [];
    for (var y = 0; y < j.J.length; y++) n.push(B.S(q[j.J[y]]));
    return [m, n];
  };
  L.Qc.e5 = function (j, q, m) {
    var n = B.z.in(q.D),
      G = B.z.in(j[0]);
    q.D = q.D.concat(j[0].slice(2));
    q.J = [];
    for (var y = 0; y < G; y++) q.J.push(n + y);
    for (var y = 0; y < G; y++) m.push(B.S(j[1][y]));
  };
  L.Qc.prototype.oa = function (j, q) {
    if (q == null) return !1;
    var m = q.ac(),
      n = m[0],
      G = m[1];
    if (G.length == 0) return !1;
    var W = n[G[0]],
      k = W.add.vmsk;
    if (k && k.J.length + k.U9.length != 0)
      return [gn.gv, gn.N7].indexOf(j) != -1;
  };
  L.Qc.prototype.uY = function (j, q, m, n) {
    if (j == null) return;
    var G = j.ac(),
      W = G[0],
      k = G[1];
    if (k.length == 0) return;
    var T = W[k[0]],
      b = T.add.vmsk;
    if (
      n.M(gn.k9) ||
      n.M(gn.FP) ||
      (this.id == L.iR && n.M(gn.cp) && b.U9.length == 1)
    ) {
      b.U9 = [];
      j._F = !0;
    }
    if (b.J.length != 0) {
      var c = n.m2(j ? j.I.ny : 0);
      if (c.x != 0 || c.y != 0) {
        var a = b.P(),
          f = b.P(),
          U = new k$(1, 0, 0, 1, c.x, c.y),
          Z = T.add.vogk,
          h = JSON.stringify(Z);
        if (n.M(gn.O4)) {
          var u = L.Qc.FT(f, Z);
          L.Qc.e5(u, f, Z);
        }
        B.z.La(f.D, U, f.J);
        B.ih.u(Z, B.B.gb(U), f.J);
        this.V8(j, T.Wy, f, Z);
        this.d7(j, "Move Paths", T.Wy, a, f.P(), !0, h, JSON.stringify(Z));
      }
      if (n.M(gn.gv) || n.M(gn.N7))
        this.BT({ R: "remove", L9: this.id == L.iR }, q, j, n, m);
    }
  };
  L.Qc.prototype.d7 = function (j, q, m, n, G, W, k, T) {
    var b = new eN(q, this);
    b.data = { le: m, ahu: n, Lj: G, anT: W, axO: k, anM: T };
    j.Du(b);
  };
  L.Qc.prototype.km = function (j, q) {
    if (j.le != null) this.V8(q, j.le, j.Lj.P(), JSON.parse(j.anM));
    else {
      q.GA = j.acd.slice(0);
      q.bR = j.auC.slice(0);
      q._F = q.qB = !0;
    }
    if (j.hF || j.c_) {
      q.h = j.c_;
      q.hM = !0;
    }
    if (j.agV != null) q.PU = j.agV;
  };
  L.Qc.prototype.W6 = function (j, q) {
    if (j.le != null) this.V8(q, j.le, j.ahu.P(), JSON.parse(j.axO));
    else {
      q.GA = j.uE.slice(0);
      q.bR = j.aud.slice(0);
      q._F = q.qB = !0;
    }
    if (j.hF || j.c_) {
      q.h = j.hF;
      q.hM = !0;
    }
    if (j.aIn != null) q.PU = j.aIn;
  };
  L.Qc.prototype.V8 = function (j, q, m, n) {
    var G = q < 0 ? j.GA[-1 - q] : q < 1e6 ? j.U[q] : j.U[q - 1e6].add.TySh,
      W = G.add.vmsk;
    W.N = null;
    W.xo = !0;
    if (W.Zr) {
      W.Zr.N = null;
      W.Zr.xo = !0;
    }
    G.add.vmsk = m;
    G.add.vogk = n;
    if (1e6 <= q) {
      al.NX(G);
      var k = j.U[q - 1e6],
        T = G,
        b = this.a;
      bq.qS(k, b.HS);
      j.gF();
    } else if (0 <= q) {
      m.xo = !0;
      G.D5(j);
      j.gF();
    }
    j._F = j.qB = !0;
  };
  L.Qc.prototype.vy = function (j, q, m) {
    if (!m) this.azw(j, q);
    var n = j.ac(),
      G = n[0],
      W = n[1];
    for (var k = 0; k < W.length; k++) {
      var T = G[W[k]],
        b = B.ih.aca(T.add.vogk, T.add.vmsk.J, j.I);
      if (b == null) continue;
      j._F = !0;
      if (b[1]) j.W.Ye = b[1];
      if (m) {
        this.qC[0] = b;
        return;
      }
      var c = new bn(b[3], !1, !1);
      c.d4(j, q);
      this.qC = [b, c, T];
    }
  };
  L.Qc.prototype.azw = function (j, q) {
    var m = this.qC;
    if (m == null) return;
    j.W.Ye = [];
    j.W.Z9 = [];
    m[1].clear(j);
    this.qC = null;
  };
  L.Qc.prototype.anc = function (j, q, m, n, G) {
    var W = this.qC,
      k = this.IR;
    if (W == null) return !1;
    var T = j.I.sb(G.x, G.y);
    if (k != -1) {
      var b = W[0],
        c = W[1],
        a = W[2],
        f = this.Vr.P(),
        U = JSON.parse(this.dg);
      if (k == 10) {
        W[1].C3(j, m, n, T);
        var Z = B.B.Ht(W[1].Iy()),
          h = B.B.J5(Z, B.B.BR(this.afY));
        B.ih.u(U, h, f.J);
        B.ih.ib(U, f);
        this.V8(j, a.Wy, f, U);
      } else {
        var u = JSON.parse(this.a6I),
          i = new ea(b[2][k * 2], b[2][k * 2 + 1]),
          x = new ea(b[4][0], b[4][1]),
          X = Math.round(ea.gw(i, T) / Math.sqrt(2));
        if (ea.gw(T, x) > ea.gw(i, x)) X = 0;
        L.ju.i_(G.x + 20, G.y, [g$.get([12, 56]) + ": " + X + " px"], j);
        if (u[0] == 8) u[3] = X;
        else {
          var $ = X - u[3][k];
          if (n.M(gn.O4)) u[3][k] = X;
          else for (var y = 0; y < 4; y++) u[3][y] = Math.max(u[3][y] + $, 0);
        }
        var H = new fd(_.E.w, !0);
        H.l = L.W1;
        H.data = { R: R.$I, K: u };
        q.k(H);
      }
      this.vy(j, m, !0);
      return !0;
    } else {
      var C = W[1].Xy(T, j.I.k3, !0);
      if (C == null && W[0][1]) {
        var l = B.b.wB(W[0][1], T.x, T.y, 7 / j.I.k3);
        if (l != -1) C = "default";
      }
      var H = new fd(_.E.c, !0);
      H.data = { R: _.Y.t5, $U: C ? C : L.OZ() };
      q.k(H);
    }
  };
  L.Qc.prototype.a6d = function (j, q, m, n, G) {
    var W = this.qC;
    if (W == null) return !1;
    var k = j.I.sb(G.x, G.y),
      T = -1;
    if (W[1].Xy(k, j.I.k3, !0) && W[1].oo(j, m, n, k)) T = 10;
    else if (W[0][1]) {
      var b = B.b.wB(W[0][1], k.x, k.y, 7 / j.I.k3);
      if (b != -1) T = b;
    }
    if (T != -1) {
      var c = W[2];
      this.Vr = c.add.vmsk.P();
      this.dg = JSON.stringify(c.add.vogk);
      this.IR = T;
      this.a6I = JSON.stringify(B.ih.Ht(j));
      this.afY = B.B.Ht(W[1].Iy());
      return !0;
    }
  };
  L.Qc.prototype.a8x = function (j, q, m, n, G) {
    var W = this.qC,
      k = this.IR;
    if (k == -1) return !1;
    var T = j.I.sb(G.x, G.y);
    if (k == 10) {
      W[1].H_(j, m, n, T);
      var b = W[2];
      this.d7(
        j,
        [10, 16],
        b.Wy,
        this.Vr,
        b.add.vmsk,
        null,
        this.dg,
        JSON.stringify(b.add.vogk)
      );
    }
    this.IR = -1;
    this.vy(j, m);
  };
  L.jy = function (j, q, m, n) {
    L.Qc.call(this, j, q, m);
    this.TX = {
      shape: hR.i4(),
      pshape: 0,
      binop: 0,
      crad: 0,
      irad: 40,
      length: 4,
      sides: 5,
      width: 5,
      tolr: 5,
      tsiz: 300,
      cstr: { t: 0 },
      anta: !0,
      aopts: [!1, !1, 50, 100, 0],
    };
    this.asN = n;
    this.kR = null;
    this.adg = null;
    this.Gn = null;
    this.bB = new iX();
  };
  L.jy.prototype = new L.Qc();
  L.jy.prototype.wr = function (j) {
    return j.qT && this.id != L.Gd;
  };
  L.jy.prototype.enable = function (j, q, m, n, G) {
    this.a = m;
    var W = new fd(_.E.c, !0);
    W.data = { R: _.Y.t5, $U: L.OZ() };
    q.k(W);
    this.vy(j, m);
  };
  L.jy.prototype.disable = function (j, q, m, n) {
    this.azw(j, m);
  };
  L.jy.prototype.uY = function (j, q, m, n) {
    L.Qc.prototype.uY.call(this, j, q, m, n);
    this.bB.uY(n);
    this.tR(q, m);
  };
  L.jy.prototype.tR = function (j, q) {
    var m = new fd(_.E.c, !0);
    m.data = { R: _.Y.vv, l: this.id, uH: this.OE(q) };
    j.k(m);
  };
  L.jy.prototype.OE = function (j) {
    var q = this.bB.VZ(0),
      m = this.bB.KL(0),
      n = L.pI.tI(this.TX.binop, q, m),
      G = this.id == L.Gd ? j.aw : j.sV;
    if (G == 1 && n == 0) n = 1;
    return n;
  };
  L.jy.prototype.rk = function (j, q, m, n) {};
  L.jy.prototype.oo = function (j, q, m, n, G) {
    if (this.a6d(j, q, m, n, G)) return;
    var W = this.id == L.Gd ? m.aw : m.sV;
    if (W != 2) this.aK1(q, m);
    if (W == 2 && !j.Ph()) return;
    var k = j.I.sb(G.x, G.y);
    k = L.YE.BU(j, k, m);
    this.Gn = [k.x, k.y];
    this.kR = k;
    this.adg = new ea(0, 0);
    this.bB.oo(n);
  };
  L.jy.prototype.au2 = function (j, q, m, n) {
    var G = [this.kR.P(), q.P()];
    m = this.bB.VZ(1) || m.M(gn.X6) || this.bB.KL(1) ? m : null;
    if (this.asN) G = L.jy.ci(G[0], G[1], m, !0, this.TX.cstr);
    if (j) j.I.qN = new hk(G[0].x, G[0].y, G[1].x - G[0].x, G[1].y - G[0].y);
    return this.rk(G[0], G[1], this.bB.VZ(1) && m.M(gn.X6), this.Gn, j.I, n);
  };
  L.jy.prototype.aaj = function (j, q, m) {
    var n = j.I.sb(q.x, q.y);
    if (this.id == L.Gd) return n;
    var G = this.TX.cstr;
    if (G.t == 2) {
      var W = new hk(n.x - G.x, n.y - G.y, G.x, G.y),
        k = L.YE.xO(j, W, m);
      n.x += k[0];
      n.y += k[1];
      L.YE.HJ(j, W, k);
    } else n = L.YE.BU(j, n, m);
    return n;
  };
  L.jy.prototype.C3 = function (j, q, m, n, G) {
    if (this.anc(j, q, m, n, G)) return;
    if (this.kR == null) return;
    var W = this.Gn,
      k = W.length,
      T = G ? this.aaj(j, G, m) : new ea(W[k - 2], W[k - 1]);
    if (n.M(gn.Xe)) this.kR = T.mN(this.adg);
    else this.adg = T.mN(this.kR);
    W.push(T.x, T.y);
    if (this.TX.shape == null) this.TX.shape = m.Jh[0];
    var b = this.au2(j, T, n, !0)[0],
      c = B.b.bh(b);
    j.W.cT = c;
    if (this.id != L.Gd && this.id != L.Zo && this.id != L.lp)
      L.ju.G0(G, j.I.qN, j, m);
    j._F = !0;
    this.bB.C3();
  };
  L.jy.prototype.ael = function (j, q, m, n) {
    var G = j[4].P();
    if (n) {
      G.x -= q / 2;
      G.y -= m / 2;
    }
    if (this.id == L.Zo) {
      q /= 2;
      m /= 2;
      G.x += q;
      G.y += m;
      m = -m;
      q = 0;
    }
    var W = this.rk(G, new ea(G.x + q, G.y + m), !1, this.Gn);
    this.a7a(j[0], j[1], j[2], W);
  };
  L.jy.prototype.a7a = function (j, q, m, n) {
    var G = this.id == L.Gd ? m.aw : m.sV,
      W = new fd(_.E.NI, !0);
    if (G == 0) W.data = L.jy.atd(n[1], m);
    else if (G == 1) {
      var k = {
        __name: "Set",
        classID: "setd",
        null: {
          t: "obj ",
          v: [{ t: "prop", v: { classID: "Path", keyID: "WrPt" } }],
        },
        T: n[1],
      };
      W.data = { _D: "set", SC: k };
    } else {
      var k = {
        __name: "Draw",
        classID: "Draw",
        AntA: { t: "bool", v: !0 },
        Shp: n[1],
      };
      W.data = { _D: "draw", SC: k };
    }
    q.k(W);
    if (n[1].v.classID == "customShape" && n[1].v.Nm.v.startsWith("--")) {
      var T = j.ac(),
        b = T[0],
        c = T[1],
        a = b[c.pop()],
        f = a.add.vmsk,
        U = a.add.vogk;
      B.ih.jl(U);
      var Z = f.P();
      Z.D = n[0];
      this.V8(j, a.Wy, Z, U);
    }
    if (this.id == L.HO || this.id == L.ZR) {
      var T = j.ac(),
        b = T[0],
        c = T[1],
        a = b[c.pop()],
        f = a.add.vmsk;
      f.J = [0];
      this.vy(j, m);
    }
  };
  L.jy.prototype.H_ = function (j, q, m, n, G, W) {
    if (this.a8x(j, q, m, n, G)) return;
    if (this.kR == null) return;
    var k = this.aaj(j, G, m),
      T = this.OE(m),
      b = this.id == L.Gd ? m.aw : m.sV,
      c = this.Gn,
      a = c.length;
    if (this.id == L.Gd && a <= 4) {
    } else if (a <= 4) {
      k.x = Math.round(k.x);
      k.y = Math.round(k.y);
      var f = new fd(_.E.c);
      f.data = {
        R: _.Y.s0,
        kO: "createshape",
        atz: this.ael.bind(this),
        a0N: this.name,
        a90: [j, q, m, n, k],
      };
      if (!W) q.k(f);
    } else if (a != 2) {
      var U = this.au2(j, k, n),
        Z = U[0],
        h = j.ac(!0),
        u = h[0],
        i = h[1],
        x = i.length - 1;
      if (
        (b == 1 && Z.length > 2) ||
        (b == 0 && T != 0 && x != -1 && u[i[x]].Wy >= 0)
      ) {
        Z[2].Np = [1, 2, 3, 0][T - 1];
        var X = u[i.pop()],
          $ = X.add.vmsk,
          H = X.add.vogk,
          C = $.P(),
          l = $.P(),
          v = JSON.stringify(H);
        l.D = l.D.concat(Z.slice(2));
        l.J = [B.z.in(l.D) - 1];
        var K = B.ih.p$(U[1]);
        H.push(K ? K : B.ih.B0());
        this.V8(j, X.Wy, l, H);
        this.d7(j, this.name, X.Wy, C, l, null, v, JSON.stringify(H));
      } else if (b == 0) {
        this.a7a(j, q, m, U);
      } else if (b == 2) {
        L.Qc.avM(Z, this.TX.anta, m.UP, q);
      }
    }
    this.kR = null;
    j.W.cT = null;
    j.W.x$ = null;
    j.W.Z9 = [];
    j.I.qN = null;
    j._F = !0;
    this.bB.H_();
    this.tR(q, m);
  };
  L.jy.prototype.uS = function (j, q, m, n, G) {
    for (var m in j) this.TX[m] = j[m];
  };
  L.jy.ci = function (j, q, m, n, G) {
    var W = j.x,
      k = j.y,
      T = q.x,
      b = q.y;
    if (G && G.t == 2) {
      if (n) {
        T = Math.round(T);
        b = Math.round(b);
      }
      W = T - G.x;
      k = b - G.y;
    } else {
      var c = 0;
      if (G && G.t == 1) c = G.y / G.x;
      else if (m && m.M(gn.X6)) c = 1;
      if (c != 0) {
        if (n) {
          if (W < T) W = Math.floor(W);
          else W = Math.ceil(W);
          if (k < b) k = Math.floor(k);
          else k = Math.ceil(k);
        }
        var a = Math.abs(T - W),
          f = Math.abs(b - k),
          U = a;
        if (f / a < c) U *= f / a / c;
        T = T > W ? W + U : W - U;
        b = b > k ? k + U * c : k - U * c;
      }
      if (m && m.M(gn.O4)) {
        W -= T - W;
        k -= b - k;
      }
    }
    var j = new ea(W, k),
      q = new ea(T, b);
    if (n) L.jy.aIS(j, q);
    return [j, q];
  };
  L.jy.aIS = function (j, q) {
    if (j.x > q.x) {
      var m = j.x;
      j.x = q.x;
      q.x = m;
    }
    if (j.y > q.y) {
      var m = j.y;
      j.y = q.y;
      q.y = m;
    }
    j.x = Math.floor(j.x);
    j.y = Math.floor(j.y);
    q.x = Math.ceil(q.x);
    q.y = Math.ceil(q.y);
  };
  L.jy.an5 = function () {
    return {
      classID: "Mk",
      null: { t: "obj ", v: [{ t: "Clss", v: { classID: "contentLayer" } }] },
      Usng: {
        t: "Objc",
        v: { classID: "contentLayer", Type: { t: "Objc", v: {} } },
      },
    };
  };
  L.jy.QQ = function (j, q) {
    var m = L.jy.an5(),
      n = m.Usng.v.Type;
    if (q == null) {
      n.v = B.S(eu.zf[j]);
      n.v.classID = ["solidColorLayer", "gradientLayer", "patternLayer"][j];
    } else L.zl.C5(q, n.v, j);
    return { _D: "make", SC: m };
  };
  L.jy.atd = function (j, q) {
    var m = q.MJ,
      n = B.S(q.pk);
    n.fillEnabled.v = m.pb != 0;
    var G = L.jy.QQ(Math.max(0, m.pb - 1), m.pH);
    G.SC.Usng.v.Shp = j;
    G.SC.Usng.v.strokeStyle = { t: "Objc", v: n };
    return G;
  };
  L.dQ = function (j) {
    L.Qc.call(
      this,
      [
        [10, 29],
        [10, 51],
        "Add Anchor Point",
        "Delete Anchor Point",
        "Convert Point",
      ][j],
      [L.iR, L.a8s, L.amS, L.aI5, L.aqw][j],
      [
        "tools/pen",
        "tools/cpen",
        "tools/aapoint",
        "tools/dapoint",
        "tools/capoint",
      ][j]
    );
    this.Dm = j;
    this.zW = null;
    this.JD = null;
    this.Vr = null;
    this.dg = null;
    this.a3$ = 0;
    this.QB = null;
    this.Wg = !1;
    this.EV = !1;
    this.aG7 = !1;
    this.Mf = !1;
    this.at8 = !1;
    this.aE2 = !1;
    this.Ds = 0;
  };
  L.dQ.prototype = new L.Qc();
  L.dQ.prototype.wr = function (j) {
    return this.Vr != null;
  };
  L.dQ.prototype.uY = function (j, q, m, n) {
    if (!n.M(gn.O4)) this.at8 = !1;
    if (this.Dm == 1 && (n.M(gn.gv) || n.M(gn.N7)) && this.oa(gn.gv, j)) {
      this.BT({ R: "remove", L9: !0 }, q, j, n, m);
      return;
    }
    if (this.JD) this.Vn(j, q, m, n, this.JD);
    L.Qc.prototype.uY.call(this, j, q, m, n);
  };
  L.dQ.prototype.Nz = function (j, q, m, n) {
    var G = j.I.sb(n.x, n.y, !0),
      W = L.YE.BU(j, G, q),
      k = this.Dm,
      T = q.aw,
      b = this.a3$;
    if (T == 2) T = 0;
    var c = j.ac(),
      a = c[0],
      f = c[1],
      U = f.length == 0 ? null : a[f.pop()],
      Z = U ? U.add.vmsk : null;
    if (T == 0 && b != 0 && U && U.Wy >= 0) T = 1;
    var h = L.vp(j, n);
    if (
      k <= 1 &&
      T == 0 &&
      (Z == null || (Z.U9.length == 0 && B.z.g0(Z.D, G, !0, h).Wy == -1))
    )
      return ["new", !0];
    if (k <= 1 && T == 1 && Z == null) return ["new"];
    if (Z == null) return [null];
    var u = Z.D,
      i = B.z.O5(u, new hk(G.x - h, G.y - h, h * 2, h * 2), Z.U9, !0),
      x = B.z.g0(u, G, !0, h);
    if (k < 3 && x.Wy != -1 && i[0].length == 0) return ["add"];
    if ((i[3] != 0 || x.Wy != -1) && (m.M(gn.O4) || k == 4)) return ["cnv"];
    var X =
      i[0].length == 1 &&
      u[i[0][0] - 1] &&
      (u[i[0][0] - 1].Ii != null ||
        u[i[0][0] - 1].e == 0 ||
        u[i[0][0] - 1].length == 1);
    if (X) return [k == 0 || k == 3 ? "del" : k == 2 ? "mva" : "mov"];
    if (k < 2) {
      var $ = B.z.kH(u, B.z.mR(u, Z.U9[0], !0), !0);
      if ($ != -1 && ea.gw(G, u[$ + 1].Ii) < h) return ["fin"];
      if (Z.U9.length != 1) return ["new"];
      return ["nrm"];
    }
    return [null];
  };
  L.dQ.prototype.oo = function (j, q, m, n, G) {
    var W = j.bR.indexOf(0) != -1,
      k = j.I.sb(G.x, G.y, !0),
      T = L.YE.BU(j, k, m),
      b = this.Dm,
      c = m.aw,
      a = this.a3$;
    if (c == 2) c = 0;
    var f = j.ac(c == 1),
      U = f[0],
      Z = f[1],
      h = U[Z.pop()],
      u = h ? h.add.vmsk : null;
    if (c == 0 && a != 0 && h && h.Wy >= 0) c = 1;
    var i = L.vp(j, G),
      x = this.Nz(j, m, n, G);
    if (x[0] == null) return;
    if (x[1]) {
      var X = new fd(_.E.NI, !0),
        $ = B.ih.xz("customShape", [0, 0, 1, 1], null, null, null, "--");
      X.data = L.jy.atd($, m);
      q.k(X);
      this.aE2 = !0;
      f = j.ac(!0);
      U = f[0];
      Z = f[1];
      h = U[Z.pop()];
      u = h.add.vmsk;
      u.D = u.D.slice(0, 2);
    }
    var H = h.add.vogk,
      C = u.D;
    this.Vr = u.P();
    this.dg = JSON.stringify(H);
    if (h.name == "Work Path" && !W) {
      C = u.D = C.slice(0, 2);
      H = [];
    }
    this.zW = G;
    this.aK1(q, m);
    var l = B.z.O5(C, new hk(k.x - i, k.y - i, i * 2, i * 2), u.U9, !0),
      v = B.z.g0(C, k, !0, i, !0);
    if (x[0] == "add") {
      var K = B.z.kH(C, v.Wy, !0),
        S = C[K].length,
        o = { e: 4, kt: T.P(), Ii: T.P(), _$: T.P() },
        V = K + 2 + v.J9,
        P = K + 1 + ((1 + v.J9) % S),
        z = C[V - 1],
        E = C[P];
      if (!z.Ii.Lg(z._$) || !E.kt.Lg(E.Ii)) {
        var A = B.b.ahA(z.Ii, z._$, E.kt, E.Ii, v.yw);
        z._$ = A[0];
        o.kt = A[1];
        o.Ii = A[2];
        o._$ = A[3];
        E.kt = A[4];
      }
      this.Mf = !0;
      C.splice(V, 0, o);
      C[K].length++;
      u.U9 = [V];
      if (b == 1) {
        o.kt.x += 2;
        this.UC(u);
      }
    } else if (x[0] == "cnv") {
      var N = -1;
      if (l[0].length != 0) {
        N = l[0][0];
        var Q = C[N],
          e = Q.e >= 3 ? 3 : 0,
          Y = N == C.length - 1;
        Q.e = e + 1;
        if (!(b == 4 && n.M(gn.O4)) && !(b == 0 && Y)) Q.kt = Q.Ii.P();
        Q._$ = Q.Ii.P();
        this.Mf = !0;
        if (b == 0 && !Y) this.at8 = !0;
      } else if (l[1].length + l[2].length != 0) {
        var N = l[2][0];
        if (N == null) {
          N = l[1][0];
          this.EV = !0;
        }
        var Q = C[N],
          e = Q.e >= 3 ? 3 : 0;
        Q.e = e + 2;
      } else N = B.z.kH(C, v.Wy, !0) + v.J9 + 1;
      if (N != -1) u.U9 = [N];
    } else if (x[0] == "mva") {
      this.aG7 = !0;
      u.U9 = [l[0][0]];
    } else if (x[0] == "mov") {
      var N = l[0][0],
        d = C[N],
        I = d.Ii,
        O = Math.abs(B.b.tj(d.kt.x, d.kt.y, I.x, I.y, d._$.x, d._$.y));
      if (O > 0.01) {
        d.kt = I.P();
        d._$ = I.P();
      }
      if (Date.now() - this.Ds < 300) {
        var s = d.kt.Lg(I) && d._$.Lg(I);
        if (s) d._$.offset(2, 2);
        else {
          d.kt = I.P();
          d._$ = I.P();
        }
        this.Ds = 0;
      } else this.Ds = Date.now();
      u.U9 = [N];
      this.UC(u);
    } else if (x[0] == "del") {
      var N = l[0][0],
        K = B.z.kH(C, B.z.mR(C, N, !0), !0),
        $ = C[K],
        p = K + $.length;
      if (N != p || $.e == 0) {
        C[K].length--;
        C.splice(N, 1);
        p--;
        if ($.length == 0) {
          C.splice(K, 1);
          p = -1;
        }
      }
      if (p != -1) u.U9 = [p];
      else u.U9 = [];
    } else if (x[0] == "fin") {
      var K = B.z.kH(C, B.z.mR(C, u.U9[0], !0), !0);
      C[K].e = 0;
      u.U9 = [K + 1];
      this.QB = T;
      this.Wg = !0;
      this.Mf = !0;
    } else {
      var F = 0;
      if (x[0] == "new") {
        u.J = [B.z.in(C)];
        C.push({
          e: 3,
          length: 1,
          Np: [1, 2, 3, 0][Math.max(0, a - 1)],
          uc: 2,
          xV: 0,
          yg: 0,
        });
        F = C.length;
        H.push(B.ih.B0());
      }
      if (x[0] == "nrm") {
        var K = B.z.kH(C, B.z.mR(C, u.U9[0])),
          d = K + C[K].length;
        C[K].length++;
        F = d + 1;
        if (d == K + 1 && C[K].length != 2) F = K + 1;
      }
      if (n.M(gn.X6) && C[F - 1] && C[F - 1].Ii) T = L.Pr.jO(C[F - 1].Ii, T);
      var o = { e: 4, kt: T.P(), Ii: T.P(), _$: T.P() };
      C.splice(F, 0, o);
      u.U9 = [F];
      this.QB = T;
      if (this.Dm == 1) {
        o.kt.x += 2;
        this.UC(u);
      }
      this.Mf = !0;
      this.Ds = Date.now();
    }
    this.V8(j, h.Wy, u, H);
    j._F = !0;
  };
  L.dQ.prototype.UC = function (j) {
    var q = j.D,
      m = j.U9[0],
      n = B.z.kH(q, B.z.mR(q, m)) + 1,
      G = q[n - 1].length;
    if (G < 3) return;
    var W = [],
      k = [];
    for (var y = 0; y < 5; y++) {
      var T = n + ((m - n - 2 + y + 5 * G) % G);
      k.push(T);
      var b = q[T].Ii;
      W.push(b.x, b.y);
    }
    var c = B.b.aIX(W);
    for (var y = 1; y < 4; y++) {
      var a = y * 4,
        f = q[k[y]],
        b = f.Ii,
        U = f.kt.Lg(b) && f._$.Lg(b);
      if (!U) {
        f.kt.Tu(c[a], c[a + 1]);
        f._$.Tu(c[a + 2], c[a + 3]);
      } else {
        f.kt = b.P();
        f._$ = b.P();
      }
    }
  };
  L.dQ.prototype.Vn = function (j, q, m, n, G) {
    var W = this.Nz(j, m, n, G)[0],
      k = null;
    if (W == null) k = "default";
    else k = L.dQ.EN(W);
    var T = new fd(_.E.c, !0);
    T.data = { R: _.Y.t5, $U: k };
    q.k(T);
  };
  L.dQ.prototype.C3 = function (j, q, m, n, G) {
    this.JD = G;
    if (this.Vr == null) {
      this.Vn(j, q, m, n, G);
      return;
    }
    var W = this.zW;
    if (W && ea.gw(W, G) < L.vp({ I: { k3: 1 } }, G)) return;
    this.zW = null;
    var k = j.I.sb(G.x, G.y),
      T = L.YE.BU(j, k, m),
      b = j.ac(m.aw == 1),
      c = b[0],
      a = b[1],
      f = c[a.pop()],
      U = f.add.vmsk,
      Z = U.D,
      h = Z[U.U9[0]];
    if (this.Dm == 1) {
      var u = h.Ii.Lg(h.kt) && h.Ii.Lg(h._$);
      h.Ii = k.P();
      h.kt = k.P();
      h._$ = k.P();
      if (!u) h.kt.x += 2;
      this.UC(U);
    } else if (n.M(gn.Xe)) {
      if (n.M(gn.X6)) T = L.Pr.jO(this.QB, T);
      var i = h.Ii.mN(h._$),
        x = h.kt.mN(h.Ii);
      h._$ = T;
      h.Ii = T.add(i);
      h.kt = h.Ii.add(x);
    } else if (this.aG7) {
      var X = h.kt.mN(h.Ii),
        $ = h._$.mN(h.Ii);
      h.Ii = T;
      h.kt = h.Ii.add(X);
      h._$ = h.Ii.add($);
    } else {
      if (n.M(gn.X6)) T = L.Pr.jO(h.Ii, T);
      if (this.EV) {
        var H = h.kt;
        h.kt = h._$;
        h._$ = H;
      }
      if (this.Wg) {
        var C = ea.gw(h.Ii, T),
          l = C == 0 ? 0 : ea.gw(h.Ii, h._$) / C;
        h._$.x = h.Ii.x + l * (T.x - h.Ii.x);
        h._$.y = h.Ii.y + l * (T.y - h.Ii.y);
      } else h._$ = T;
      var v = h.e >= 3 ? 3 : 0;
      if (this.Mf && !this.at8) h.e = v + n.M(gn.O4) ? 2 : 1;
      if (h.e - v == 1) {
        h.kt = h.Ii.add(h.Ii.mN(T));
      }
      this.QB = T;
      if (this.EV) {
        var H = h.kt;
        h.kt = h._$;
        h._$ = H;
      }
    }
    this.V8(j, f.Wy, U, f.add.vogk);
    j._F = !0;
  };
  L.dQ.prototype.H_ = function (j, q, m, n, G) {
    if (this.Vr == null) return;
    var W = j.ac(m.aw == 1),
      k = W[0],
      T = W[1],
      b = k[T.pop()],
      c = b.add.vmsk,
      a = b.add.vogk;
    if (this.Wg) {
      c.U9 = [];
      this.V8(j, b.Wy, c, b.add.vogk);
    }
    var f = this.Vr.D.length,
      U = c.D.length;
    if (!this.aE2)
      this.d7(
        j,
        this.Wg
          ? "Close Path"
          : (f == U ? "Move" : f < U ? "Add" : "Delete") + " Anchor Point",
        b.Wy,
        this.Vr,
        c.P(),
        null,
        this.dg,
        JSON.stringify(a)
      );
    this.aE2 = !1;
    this.Wg = !1;
    this.EV = !1;
    this.aG7 = !1;
    this.Mf = !1;
    this.Vr = null;
  };
  L.dQ.prototype.uS = function (j, q, m, n, G) {
    this.a3$ = j.binop;
  };
  L.dQ.abJ = {};
  L.dQ.EN = function (j) {
    var q = L.dQ.abJ[j],
      m = 64,
      T = 2,
      b = 10,
      c = 25,
      a = 5,
      f = 35;
    if (q) return q;
    var n = new hk(0, 0, m, m),
      G = -0.38,
      W = B.l4(m, m);
    W.clearRect(0, 0, m, m);
    var k = L.IC();
    W.save();
    W.lineWidth = T;
    W.translate(4 - T / 2, 4 - T / 2);
    W.rotate(G);
    if (k < 1.5) {
      var U = 0.66;
      b *= U;
      c *= U;
      a *= U;
      f *= U;
    }
    W.lineJoin = "miter";
    W.beginPath();
    if (j == "cnv") {
      W.moveTo(-b, c);
      W.lineTo(0, 0);
      W.lineTo(b, c);
      W.stroke();
    } else {
      W.moveTo(0, 0);
      W.lineTo(b, c);
      W.lineTo(a, f);
      W.lineTo(-a, f);
      W.lineTo(-b, c);
      W.lineTo(0, 0);
      W.moveTo(0, 0);
      W.lineTo(0, c);
      W.fillStyle = "white";
      W.fill();
      W.stroke();
      W.fillStyle = "black";
      W.fillRect(-a - 1, f, 2 * a + 2, 6);
      W.beginPath();
      W.arc(0, c - 2, 2.5, 0, 2 * Math.PI, !1);
      W.fill();
      W.rotate(-G);
      W.translate(24, 7);
      W.beginPath();
      if (j == "add" || j == "del" || j == "new") {
        W.moveTo(-5, 0);
        W.lineTo(5, 0);
        if (j == "add") {
          W.moveTo(0, -5);
          W.lineTo(0, 5);
        }
        if (j == "new") {
          W.moveTo(-2.5, -4.5);
          W.lineTo(2.5, 4.5);
          W.moveTo(2.5, -4.5);
          W.lineTo(-2.5, 4.5);
        }
      } else if (j == "fin") W.arc(0, 0, 5, 0, 2 * Math.PI, !1);
      else if (j == "mov" || j == "mva") {
        for (var y = 0; y < 4; y++) {
          W.moveTo(0, 0);
          W.lineTo(-7, 0);
          var Z = 1 + T;
          W.moveTo(-7 + Z, -Z);
          W.lineTo(-7, 0);
          W.lineTo(-7 + Z, Z);
          W.rotate(Math.PI / 2);
        }
      }
      W.stroke();
    }
    W.restore();
    var h = new Uint8Array(W.getImageData(0, 0, m, m).data.buffer),
      u = B.j(m * m);
    B.Ih(h, u, 3);
    var i = B.j(m * m),
      x = [3, 5, 3, 4, 8, 4, 3, 5, 3];
    x = B.Vl.__(x);
    B.Vl.wo(u, i, m, m, x);
    for (var y = 0; y < i.length; y++) i[y] = Math.min(255, i[y] * 2);
    B.Vl.wo(i, u, m, m, x);
    for (var y = 0; y < u.length; y++) u[y] = Math.min(255, u[y] * 2);
    var X = h.slice(0);
    h.fill(255);
    B.ln(u, h, 3);
    B.G.Jg("norm", X, n, h, n, n, 1);
    L.dQ.abJ[j] = q = { NP: h, HA: n, Ly: new ea(4, 4) };
    return q;
  };
  L._K = function () {
    L.jy.call(this, [10, 30], L.Gd, "tools/fpen", !1);
  };
  L._K.prototype = new L.jy();
  L._K.prototype.rk = function (j, q, m, n, G, W) {
    var k = n.length - 1,
      T =
        Math.sqrt(
          (n[k - 1] - n[0]) * (n[k - 1] - n[0]) + (n[k] - n[1]) * (n[k] - n[1])
        ) <
        6 / G.k3;
    return [
      B.z.hu(n, T, W),
      B.ih.xz("customShape", [0, 0, 1, 1], null, null, null, "--"),
    ];
  };
  L.tz = function () {
    L.Qc.call(this, [10, 27], L.Nj, "tools/pselect");
    this.HV = null;
    this.Vv = !1;
    this.rD = null;
    this.Vr = null;
    this.a7C = null;
    this.dg = null;
    this.aiK = null;
    this.lT = null;
    this.KF = null;
    this.l$ = null;
  };
  L.tz.prototype = new L.Qc();
  L.tz.prototype.wr = function (j) {
    return j.qT;
  };
  L.tz.ec = function (j, q) {
    var m = j.ac(),
      n = m[0],
      G = m[1];
    for (var y = 0; y < G.length; y++) {
      var W = n[G[y]],
        k = W.add.vmsk;
      for (var T = 0; T < k.PG.length; T++) {
        var b = B.z.aFE(k.D, k.PG[T]);
        if (b == null) continue;
        var c = ea.gw(b, q);
        if (c < (5 * L.IC()) / j.I.k3) {
          var a = j.U[W.Wy - 1e6].add.TySh,
            f = a.s3.Curve,
            U = a.u,
            Z = f.Reversed;
          f.Reversed = !1;
          var f = gu.gg(a.s3.Curve);
          f.Reversed = Z;
          B.b.u(f[0], U, f[0]);
          return [f, T, U.Sd * U.Jy - U.X * U.ra, W];
        }
      }
    }
  };
  L.tz.auG = function (j, q, m) {
    var n = j[0][0],
      G = B.b.wB(n, m.x, m.y);
    q.PG[j[1]] = j[0][1][G];
    var W = n[G * 2],
      k = n[G * 2 + 1],
      T = (n[G * 2 + 2] - W) * (m.y - k) - (n[G * 2 + 3] - k) * (m.x - W);
    if (j[2] < 0) T = -T;
    q.Rl = T > 0;
  };
  L.tz.prototype.oo = function (j, q, m, n, G) {
    var W = j.I.sb(G.x, G.y),
      k = j.ac(),
      T = k[0],
      b = k[1],
      c,
      a;
    for (var y = 0; y < b.length; y++) {
      var f = T[b[y]],
        U = f.add.vmsk,
        Z = B.z.g0(U.D, W).Wy;
      if (Z != -1) {
        this.rD = c = f;
        a = Z;
      }
    }
    var h = L.tz.ec(j, W);
    if (h) {
      this.KF = h;
      this.rD = c = h.pop();
      a = 0;
    }
    if (c != null) {
      var U = c.add.vmsk;
      U.U9 = [];
      var u = U.J.indexOf(a);
      if (n.M(gn.X6)) {
        if (u == -1) {
          U.J.push(a);
          this.Vv = !0;
        } else U.J.splice(u, 1);
      } else {
        if (u == -1) U.J = [a];
        this.Vv = !0;
      }
      this.lT = B.z.zZ(U.D, U.J);
    }
    this.HV = W;
    this.l$ = new k_(W);
    j.qB = !0;
    j._F = !0;
  };
  L.tz.prototype.C3 = function (j, q, m, n, G) {
    if (this.HV == null) return;
    var W = j.I.sb(G.x, G.y);
    if (this.Vv) {
      W = this.l$.e_(W, n);
      var k = this.rD;
      if (this.Vr == null) {
        this.Vr = this.a7C = k.add.vmsk.P();
        this.dg = this.aiK = JSON.stringify(k.add.vogk);
        if (n.M(gn.O4)) {
          var T = this.Vr.P(),
            b = JSON.parse(this.dg),
            c = L.Qc.FT(T, b);
          L.Qc.e5(c, T, b);
          this.a7C = T;
          this.aiK = JSON.stringify(b);
        }
      }
      var T = this.a7C.P(),
        b = JSON.parse(this.aiK);
      if (this.KF) {
        L.tz.auG(this.KF, T, W);
      } else {
        var a = this.lT.P(),
          f = a.x,
          U = a.y;
        a.offset(W.x - this.HV.x, W.y - this.HV.y);
        a.x = Math.round(a.x);
        a.y = Math.round(a.y);
        var Z = L.YE.xO(j, a, m),
          h = new k$(1, 0, 0, 1, a.x - f + Z[0], a.y - U + Z[1]);
        B.z.La(T.D, h, T.J);
        B.ih.u(b, B.B.gb(h), T.J);
        L.YE.HJ(j, a, Z);
      }
      this.V8(j, k.Wy, T, b);
    } else {
      var u = this.HV;
      j.W.cT = B.b._c(new hk(u.x, u.y, W.x - u.x, W.y - u.y));
      j._F = !0;
    }
  };
  L.tz.prototype.H_ = function (j, q, m, n, G) {
    if (this.HV == null) return;
    var W = j.I.sb(G.x, G.y),
      k = this.rD,
      T = k ? k.add.vmsk : null;
    if (this.Vv) {
      var b = JSON.stringify(k.add.vogk);
      if (!this.HV.Lg(W))
        this.d7(j, "Move Paths", k.Wy, this.Vr, T, null, this.dg, b);
      if (j != null && j.W.x$) {
        j.W.x$ = null;
        j._F = !0;
      }
    } else {
      var c = j.ac(),
        a = c[0],
        f = c[1];
      if (f.length != 0) {
        var U = a[f[0]];
        T = U.add.vmsk;
        var Z = this.HV,
          h = new hk(Z.x, Z.y, W.x - Z.x, W.y - Z.y),
          u = B.z.aGP(T.D, h);
        if (n.M(gn.X6)) {
          for (var y = 0; y < u.length; y++)
            if (T.J.indexOf(u[y]) == -1) T.J.push(u[y]);
        } else T.J = u;
      }
      j.W.cT = null;
      j._F = !0;
    }
    this.HV = null;
    this.Vr = null;
    this.KF = null;
    this.Vv = !1;
    this.l$ = null;
  };
  L.tz.prototype.a6z = function (j) {
    var q = this.rD,
      m = this.fg,
      n = q.add.vmsk,
      G = q.add.vogk,
      W = G.length;
    if (j == "confirm") {
      if (n != this.Vr)
        this.d7(
          m,
          [12, 94, 2],
          q.Wy,
          this.Vr,
          n,
          null,
          this.dg,
          JSON.stringify(G)
        );
      this.zE();
      return;
    }
    if (j == "cancel") {
      this.V8(this.fg, this.rD.Wy, this.Vr.P(), JSON.parse(this.dg));
      this.zE();
    } else {
      var n = this.Vr.P(),
        G = JSON.parse(this.dg);
      n.D = B.z.ag7(n.D, n.J, j);
      this.V8(this.fg, this.rD.Wy, n, G);
    }
  };
  L.tz.prototype.zE = function () {
    this.rD = null;
    this.Vr = null;
    this.HV = null;
    this._H = this.Xm = -1;
    this.l$ = null;
  };
  L.tz.prototype.yc = function (j, q, m, n) {
    L.Qc.prototype.yc.call(this, j, q, m, n);
    if (m.RW != this.id) return;
    if (j.J.length == 0) return;
    var G = j.ac(),
      W = G[0],
      k = G[1];
    if (k.length == 0) return;
    var T = W[k[0]],
      b = T.add.vmsk,
      c = T.add.vstk,
      a = T.add.vogk,
      f = new fd(_.E.c, !0);
    f.data = { R: _.Y.vv, l: this.id, mu: "main", pQ: b ? b : null, ih: a };
    q.k(f);
  };
  L.tz.prototype.uS = function (j, q, m, n, G) {
    var W = j.eQ;
    if (W.pQ) {
      var k = m.ac(),
        T = k[0],
        b = k[1];
      if (b.length == 0) return;
      var c = T[b[0]],
        a = c.add.vmsk.P(),
        f = JSON.stringify(c.add.vogk),
        U = W.pQ;
      this.V8(m, c.Wy, U, W.ih);
      var Z = [18, 5];
      if (a.D.length == U.D.length)
        Z = a.J[0] == U.J[0] ? "Fill Rule" : "Path Order";
      this.d7(m, Z, c.Wy, a, U, null, f, JSON.stringify(W.ih));
    }
  };
  L.sr = function () {
    L.Qc.call(this, [10, 28], L.Cl, "tools/dselect");
    this._H = -1;
    this.Xm = -1;
    this.sU = null;
    this.HV = null;
    this.Iv = null;
    this.rD = null;
    this.Vr = null;
    this.dg = null;
    this.d5 = 0;
    this.zT = { psnap: !1 };
    this.l$ = null;
  };
  L.sr.prototype = new L.Qc();
  L.sr.prototype.wr = function (j) {
    return j.qT;
  };
  L.sr.prototype.uS = function (j) {
    this.zT = j;
  };
  L.sr.prototype.BT = function (j, q, m, n, G) {
    if (j.R == "crnr") {
      if (m == null) return;
      var W = m.ac(),
        k = W[0],
        T = W[1];
      if (T.length == 0) {
        alert("No paths selected");
        return;
      }
      var b = k[T[0]],
        c = b.add.vmsk;
      if (c.U9.length == 0) {
        alert("No corners selected");
        return;
      }
      for (var y = 0; y < c.U9.length; y++) {
        var a = c.D[c.U9[y]];
        if (!a.Ii.Lg(a._$) || !a.Ii.Lg(a.kt)) {
          alert("Only sharp corners can be rounded");
          return;
        }
      }
      if (this.Vr == null) {
        this.Vr = b.add.vmsk.P();
        this.dg = JSON.stringify(b.add.vogk);
        this.rD = b;
        this.fg = m;
      }
      var f = new fd(_.E.c, !0);
      f.data = {
        R: _.Y.s0,
        kO: "cornerradius",
        pv: 5,
        ml: this.axU.bind(this),
      };
      q.k(f);
    } else L.Qc.prototype.BT.call(this, j, q, m, n, G);
  };
  L.sr.prototype.axU = function (j) {
    if (j == "confirm") {
      var q = this.fg,
        m = this.rD,
        n = m.add.vmsk,
        G = m.add.vogk;
      this.d7(
        q,
        [12, 94, 0],
        m.Wy,
        this.Vr,
        n,
        null,
        this.dg,
        JSON.stringify(G)
      );
      this.zE();
      return;
    }
    var n = this.Vr.P(),
      G = JSON.parse(this.dg),
      W = n.U9;
    if (j == "cancel") {
    } else {
      var k = [];
      for (var y = 0; y < W.length; y++) {
        var T = W[y],
          b = B.z.mR(n.D, T, !0),
          f = 0;
        if (k.indexOf(b) != -1) continue;
        k.push(b);
        var c = B.z.kH(n.D, b, !0),
          a = n.D[c].length,
          U = [];
        for (var Z = 0; Z < a; Z++) {
          var h = n.U9.indexOf(c + Z + 1) == -1 ? 0 : j;
          U.push(h);
          if (h != 0) f++;
        }
        B.z.E8(n.D, c, U);
        for (var Z = 0; Z < W.length; Z++) if (W[Z] > c + a) W[Z] += f;
      }
      this.Of(n, G);
      n.U9 = [];
    }
    this.V8(this.fg, this.rD.Wy, n, G);
    if (j == "cancel") this.zE();
  };
  L.sr.prototype.disable = function (j, q, m, n) {
    this.KT(j);
  };
  L.sr.prototype.oo = function (j, q, m, n, G) {
    this.KT(j);
    var W = j.I.sb(G.x, G.y),
      f,
      U,
      Z;
    this.sU = W.P();
    var k = j.ac(),
      T = k[0],
      b = k[1];
    if (b.length == 0) return;
    var c = L.vp(j, G),
      a = new hk(W.x - c, W.y - c, c * 2, c * 2);
    for (var h = 0; h < b.length; h++) {
      f = this.rD = T[b[h]];
      U = f.add.vmsk;
      Z = B.z.O5(U.D, a);
      if (Z[0].length + Z[1].length + Z[2].length != 0) break;
    }
    var u = [!1, !1, !1];
    for (var y = 0; y < 3; y++) {
      for (var i = 0; i < Z[y].length; i++) {
        var x = Z[y][i],
          X = U.D[x];
        if (
          U.U9.indexOf(x) != -1 ||
          (y == 1 && U.U9.indexOf(x - 1) != -1 && !X.Ii.Lg(X.kt)) ||
          (y == 2 && U.U9.indexOf(x + 1) != -1 && !X.Ii.Lg(X._$))
        ) {
          Z[y] = [x];
          u[y] = !0;
          break;
        }
      }
    }
    if (Z[0].length != 0 && (u[0] || (!u[1] && !u[2]))) {
      var $ = Z[0][0],
        H = U.U9.indexOf($);
      if (n.M(gn.X6)) {
        if (H == -1) U.U9.push($);
        else {
          U.U9.splice(H, 1);
          j._F = !0;
          return;
        }
      } else if (H == -1) U.U9 = [$];
      this._H = $;
      this.Xm = 0;
    } else if (Z[1].length != 0 && u[1]) {
      this._H = Z[1][0];
      this.Xm = 1;
    } else if (Z[2].length != 0 && u[2]) {
      this._H = Z[2][0];
      this.Xm = 2;
    } else {
      var C = B.z.g0(U.D, W, !0, c);
      if (C.Wy == -1) this.HV = W;
      else {
        this.Iv = C;
        var l = B.z.kH(U.D, C.Wy);
        U.J = [C.Wy];
        U.U9 = [l + 1 + C.J9];
      }
    }
    if (this.Vr == null) {
      this.Vr = f.add.vmsk.P();
      this.dg = JSON.stringify(f.add.vogk);
    }
    this.l$ = new k_(W);
    j._F = !0;
  };
  L.sr.prototype.C3 = function (j, q, m, n, G) {
    if (j == null) return;
    var W = j.I.sb(G.x, G.y),
      k = this.rD;
    if (this._H != -1) {
      var T = this.Vr.P(),
        b = k.add.vogk,
        c = T.D[this._H];
      c = [c.Ii, c.kt, c._$][this.Xm];
      if (n.M(gn.X6)) {
        if (this.Xm == 0) {
          W = this.l$.e_(W, n);
          W.x += c.x - this.sU.x;
          W.y += c.y - this.sU.y;
        } else W = L.Pr.jO(T.D[this._H].Ii, W);
      } else {
        if (this.zT.psnap) {
          W.x = Math.round(W.x);
          W.y = Math.round(W.y);
        }
        W = L.YE.BU(j, W, m);
      }
      if (this.Xm == 0) {
        var a = new k$(1, 0, 0, 1, W.x - c.x, W.y - c.y);
        B.z.La(T.D, a, null, T.U9);
      } else {
        var f = T.D[this._H];
        if (n.M(gn.O4) && (f.e == 1 || f.e == 4)) f.e++;
        L.sr.qi(f, W, this.Xm == 1);
      }
      this.Of(T, b);
      this.V8(j, k.Wy, T, b);
    } else if (this.HV != null) {
      var U = this.HV;
      j.W.cT = B.b._c(new hk(U.x, U.y, W.x - U.x, W.y - U.y));
      j._F = !0;
    } else if (this.Iv != null) {
      var T = this.Vr.P(),
        b = k.add.vogk,
        Z = this.Iv,
        h = this.sU,
        u = B.z.kH(T.D, Z.Wy),
        i = T.D[u].length,
        x,
        X = Z.yw;
      if (X <= 1 / 6) x = 0;
      else if (X <= 0.5) x = Math.pow((6 * X - 1) / 2, 3) / 2;
      else if (X <= 5 / 6)
        x = (1 - Math.pow((6 * (1 - X) - 1) / 2, 3)) / 2 + 0.5;
      else x = 1;
      var $ = W.x - h.x,
        H = W.y - h.y,
        C = (1 - x) / (3 * X * (1 - X) * (1 - X)),
        l = x / (3 * X * X * (1 - X)),
        v = T.D[u + 1 + Z.J9];
      v._$.offset(C * $, C * H);
      var K = T.D[u + 1 + ((Z.J9 + 1) % i)];
      K.kt.offset(l * $, l * H);
      L.sr.qi(v, v._$, !1);
      L.sr.qi(K, K.kt, !0);
      this.Of(T, b);
      this.V8(j, k.Wy, T, b);
    } else {
      var S = j.ac(),
        o = S[0],
        V = S[1],
        k,
        T,
        E;
      if (V.length == 0) return;
      var P = L.vp(j, G),
        z = new hk(W.x - P, W.y - P, P * 2, P * 2);
      for (var A = 0; A < V.length; A++) {
        k = o[V[A]];
        T = k.add.vmsk;
        E = B.z.O5(T.D, z);
        if (E[0].length + E[1].length + E[2].length != 0) break;
      }
      this.KT(j);
      for (var y = 0; y < 3; y++) {
        for (var N = 0; N < E[y].length; N++) {
          var Q = E[y][N],
            e = T.D[Q];
          e = y == 0 ? e.Ii : y == 1 ? e.kt : e._$;
          j.W.Ye.push(e.x, e.y);
          j._F = !0;
        }
      }
    }
  };
  L.sr.prototype.KT = function (j) {
    if (j && j.W.Ye.length != 0) {
      j.W.Ye = [];
      j._F = !0;
    }
  };
  L.sr.prototype.H_ = function (j, q, m, n, G) {
    var W = j.I.sb(G.x, G.y),
      k = this.rD,
      T = k ? k.add.vmsk : null,
      b = k ? k.add.vogk : null;
    if (this._H != -1 || this.Iv) {
      if (Date.now() - this.d5 < 300) {
        var c = T.D[this._H],
          a = this.Xm,
          f = null;
        if (a == 0) {
          var U = c.kt.Lg(c.Ii),
            Z = c._$.Lg(c.Ii);
          if (!U && !Z) {
            f = "Anchor Type";
            if (c.e == 1 || c.e == 4) c.e++;
            else {
              c.e--;
              c._$ = c.Ii.add(c.Ii.mN(c.kt));
            }
          } else {
            f = "Add Handles";
            if (U && Z) {
              c.kt.x -= 30;
              c._$.x += 30;
            } else if (U) c.kt = c.Ii.add(c.Ii.mN(c._$));
            else if (Z) c._$ = c.Ii.add(c.Ii.mN(c.kt));
          }
        } else {
          f = "Remove Handle";
          if (a == 1) c.kt.qE(c.Ii);
          else c._$.qE(c.Ii);
        }
        this.Of(T, b);
        this.V8(j, k.Wy, T, b);
        this.d7(j, f, k.Wy, this.Vr, T, null, this.dg, JSON.stringify(b));
      } else if (this.Iv || !this.sU.Lg(W)) {
        this.d7(
          j,
          "Drag Anchors",
          k.Wy,
          this.Vr,
          T,
          null,
          this.dg,
          JSON.stringify(b)
        );
      }
      this.Iv = null;
      this.d5 = Date.now();
    } else if (this.HV != null) {
      var h = this.HV,
        u = new hk(h.x, h.y, W.x - h.x, W.y - h.y);
      if (u.r < 0) u.x += u.r;
      if (u.$ < 0) u.y += u.$;
      u.r = Math.abs(u.r);
      u.$ = Math.abs(u.$);
      var i = B.z.O5(T.D, u);
      T.U9 = i[0].concat(n.M(gn.X6) ? T.U9 : []);
      j.W.cT = null;
    }
    this.zE();
    j._F = !0;
  };
  L.sr.prototype.zE = function () {
    this.rD = null;
    this.Vr = null;
    this.HV = null;
    this._H = this.Xm = -1;
    this.l$ = null;
  };
  L.sr.prototype.Of = function (j, q) {
    for (var y = 0; y < j.U9.length; y++) {
      var m = B.z.mR(j.D, j.U9[y]);
      B.ih.Bq(q, m);
    }
  };
  L.sr.prototype.uY = function (j, q, m, n) {
    if (j == null) return;
    var G = j.ac(),
      W = G[0],
      k = G[1];
    if (k.length == 0) return;
    var T = W[k[0]],
      b = T.add.vmsk;
    if (b == null || b.U9.length == 0) return;
    var c = T.add.vogk,
      a = JSON.stringify(c),
      f = n.m2(j ? j.I.ny : 0);
    if (f.x != 0 || f.y != 0) {
      var U = b.P(),
        Z = b.P(),
        h = new k$(1, 0, 0, 1, f.x, f.y);
      B.z.La(Z.D, h, null, Z.U9);
      this.Of(Z, c);
      this.V8(j, T.Wy, Z, c);
      this.d7(j, "Move Anchors", j.J[0], U, Z.P(), !0, a, JSON.stringify(c));
    }
    if (n.M(gn.gv) || n.M(gn.N7))
      this.BT({ R: "remove", L9: !0, amn: !0 }, q, j, n, m);
  };
  L.sr.prototype.d7 = function (j, q, m, n, G, W, k, T) {
    var b = j.iw();
    if (
      W &&
      b != null &&
      b.l == this &&
      b.data.anT &&
      b.data.le == m &&
      JSON.stringify(b.data.ahu.U9) == JSON.stringify(n.U9)
    ) {
      b.data.Lj = G;
      b.data.anM = T;
    } else {
      var b = new eN(q, this);
      b.data = { le: m, ahu: n, Lj: G, anT: W, axO: k, anM: T };
      j.Du(b);
    }
  };
  L.sr.qi = function (j, q, m) {
    var n = j.kt,
      G = j._$;
    if (!m) {
      n = j._$;
      G = j.kt;
    }
    n.Tu(q.x, q.y);
    if (j.e == 1 || j.e == 4) {
      var W = ea.gw(n, j.Ii),
        k = ea.gw(G, j.Ii);
      if (k != 0) {
        G.x = j.Ii.x - (n.x - j.Ii.x) * (k / W);
        G.y = j.Ii.y - (n.y - j.Ii.y) * (k / W);
      }
    }
  };
  L.Rect = function () {
    L.jy.call(this, [10, 32], L.HO, "tools/rect", !0);
  };
  L.Rect.prototype = new L.jy();
  L.Rect.prototype.rk = function (j, q, m) {
    var n = this.TX.crad,
      G = q.x - j.x,
      W = q.y - j.y;
    return [
      B.z.cn.Rect(j.x, j.y, G, W, n),
      B.ih.xz("Rctn", [j.x, j.y, q.x, q.y], [n, n, n, n]),
    ];
  };
  L.SQ = function () {
    L.jy.call(this, [10, 33], L.ZR, "tools/ellipse", !0);
  };
  L.SQ.prototype = new L.jy();
  L.SQ.prototype.rk = function (j, q, m) {
    var n = q.x - j.x,
      G = q.y - j.y;
    return [B.z.cn.SQ(j.x, j.y, n, G), B.ih.xz("Elps", [j.x, j.y, q.x, q.y])];
  };
  L.Tq = function () {
    L.jy.call(this, [10, 34], L.Zo, "tools/pshape", !1);
    this.TX.aopts = [!1, !0, 50, 100, 0];
  };
  L.Tq.prototype = new L.jy();
  L.Tq.prototype.rk = function (j, q, m) {
    var n = this.TX.pshape,
      G = this.TX.crad,
      W = this.TX.irad / 100,
      k = this.TX.sides,
      T = this.TX.width,
      b = this.TX.aopts,
      c = this.TX.length,
      a = this.TX.rows,
      f = this.TX.cols,
      U = this.TX.brdr,
      $;
    q = q.P();
    var Z = j.x,
      h = j.y,
      u = q.x,
      i = q.y,
      x = Math.sqrt((u - Z) * (u - Z) + (i - h) * (i - h)),
      X = Math.atan2(-i + h, u - Z);
    if (m) X = (Math.round((X * 180) / Math.PI / 15) * 15 * Math.PI) / 180;
    if (n == 0) $ = B.z.cn.Or(Z, h, x, X, k, G);
    if (n == 1) $ = B.z.cn.Cz(Z, h, x, X, k, G, W);
    if (n == 2) $ = B.z.cn.Jo(j.x, j.y, q.x, q.y, T, b);
    if (n == 3) {
      if (Z > u) {
        var H = Z;
        Z = u;
        u = H;
      }
      if (h > i) {
        var H = h;
        h = i;
        i = H;
      }
      if (m) {
        if (f > a) i = h + ((u - Z - U) * a) / f + U;
        else u = Z + ((i - h - U) * f) / a + U;
      }
      $ = B.z.cn.abY(Z, h, u, i, a, f, U);
    }
    if (n == 4) $ = B.z.cn.ag9(Z, h, x, X, c);
    return [
      $,
      B.ih.xz("customShape", [j.x, j.y, q.x, q.y], null, null, null, "--"),
    ];
  };
  L.Tq.prototype.uY = function (j, q, m, n) {
    L.jy.prototype.uY.call(this, j, q, m, n);
    var G = n.m2(),
      W = this.TX,
      k,
      T;
    if (G.y != 0) {
      var b = -G.y,
        c = W.pshape;
      if (c < 2) {
        k = "sides";
        T = Math.max(3, Math.min(100, W.sides + b));
      } else if (c == 2) {
        k = "width";
        T = Math.max(1, Math.min(100, W.width + b));
      } else if (c == 3) {
        k = "length";
        T = Math.max(4, Math.min(40, W.length + b));
      }
    }
    if (G.x != 0) {
      k = "pshape";
      T = Math.max(0, Math.min(3, W.pshape + G.x));
    }
    if (k) {
      var a = new fd(_.E.c, !0),
        f = {};
      f[k] = T;
      W[k] = T;
      a.data = { R: _.Y.vv, l: this.id, _G: "vals", at3: f };
      q.k(a);
      this.C3(j, q, m, n);
    }
  };
  L.Gy = function () {
    L.jy.call(this, [10, 35], L.lp, "tools/line", !1);
  };
  L.Gy.prototype = new L.jy();
  L.Gy.prototype.rk = function (j, q, m) {
    var n = this.TX.width,
      G = this.TX.aopts;
    q = q.P();
    if (m) {
      q = L.Pr.jO(j, q);
    }
    if (ei == 1) n = 0;
    return [
      B.z.cn.Jo(j.x, j.y, q.x, q.y, n, G),
      B.ih.xz("Ln", null, null, [j.x, j.y, q.x, q.y], n, null, G),
    ];
  };
  L.fj = function () {
    L.jy.call(this, [10, 31], L.Yz, "tools/cshape", !0);
  };
  L.fj.prototype = new L.jy();
  L.fj.prototype.rk = function (j, q, m) {
    var n = this.TX.shape,
      G = n.gX.r / n.gX.$,
      W = R.tm.Fo(n.D);
    q = q.P();
    if (m) {
      q.y = j.y + (q.x - j.x) / G;
    }
    var k = q.x - j.x,
      T = q.y - j.y;
    B.z.La(W, new k$(k, 0, 0, T, j.x, j.y));
    return [
      W,
      B.ih.xz("customShape", [j.x, j.y, q.x, q.y], null, null, null, n.q6),
    ];
  };
  L.Dq = function (j, q, m) {
    L.ju.call(this, j, q, m);
    this.n1 = 0;
    this.U = null;
    this.KN = null;
    this.a = null;
    this.X4 = 1;
    this.CV = 0;
    this.P4 = !0;
    this.TQ = !1;
    this.cursor = null;
    this.sC = null;
    this.hF = null;
    this.ca = !1;
    this.eK = null;
    this.a1E = 0;
    this.rF = null;
    this.Dm = 0;
    this.OM = null;
    this.db = null;
    this.v_ = null;
    this.Md = null;
    this.a2E = null;
    this.w$ = null;
  };
  L.Dq.prototype = new L.ju();
  L.Dq.R0 = function (j, q, m) {
    var n = { classID: "null", null: jw.$W(m ? "Lyr" : "Dcmn", !0) };
    if (j) n.Angl = { t: "UntF", v: { type: "#Ang", val: q } };
    else n.Axis = { t: "enum", v: { Ornt: q } };
    return { _D: j ? "rotateEventEnum" : "flip", SC: n };
  };
  L.Dq.prototype.FO = function (j, q, m, n, G) {
    var W = new fd(_.E.c, !0);
    W.data = { R: _.Y.vv, l: this.id, sy: G, sk: j, a: m };
    q.k(W);
    this.r4 = !1;
  };
  L.Dq.prototype.wr = function (j) {
    return this.db && this.db.afU();
  };
  L.Dq.prototype.BT = function (j, q, m, n, G) {
    this.a = G;
    if (j.R == "again" && this.rF == null) return;
    if (j.R == "cmode") {
      if (m.depth == j.K) return;
      var W = L.Dq.rR(m),
        k = L.Dq.zD(m, W, !0),
        T = new eN("Mode: " + m.depth + "-Bit to " + j.K + "-Bit", this);
      T.data = { e: 0, U: W, KN: k, a1Z: !0, depth: m.depth };
      m.Du(T);
      L.Dq.aIY(m, W, j.K);
      return;
    }
    if (j.R == "cprof") {
      var b = m.$T(),
        W,
        k;
      b = b ? b[0] : null;
      var c = fb.FF[fb.H2.indexOf(j.K)];
      if (c) c = gh.$P.get(c);
      if (j.af5) {
        W = L.Dq.rR(m);
        k = L.Dq.zD(m, W, !0);
      }
      var T = new eN(
        (W ? "Convert To" : "Assing") + " Profile: " + (c ? j.K : "sRGB"),
        this
      );
      T.data = { e: 0, U: W, KN: k, a1Z: !0, aHY: [b] };
      m.Du(T);
      if (j.af5) L.Dq.aEm(m, W, c);
      m.uJ(c);
      return;
    }
    if (!this.xM(m, G)) return;
    if (this.db) {
      this.axR(j, this.db.d$(), q, m, n, G);
      this.De(m, G, 0, !0);
      this.ck(m);
      return;
    }
    this.anD(m, j.v == null, j.v);
    this.aIx(m);
    this.axR(j, j.ayl, q, m, n, G);
    this._A(m, q, j.ER, !1);
  };
  L.Dq.prototype.axR = function (j, q, m, n, G, W) {
    var k = j.Kj != null ? j.Kj : 4;
    this.db.a6k(k);
    if (q == null) q = this.db.d$();
    var T = this.OM,
      b = q.x,
      c = q.y;
    if (j.R == "rot" && j.K != Math.PI && ((T.r + T.$) & 1) == 1) {
      b = Math.floor(b);
      c = Math.floor(c);
    }
    var a = new k$();
    a.translate(-b, -c);
    if (j.R == "rot") a.rotate(j.K);
    if (j.R == "scl") a.scale(j.K.x, j.K.y);
    if (j.R == "mat") a.concat(j.K);
    a.translate(b, c);
    if (j.R == "again") a = this.rF;
    var f = B.B.gb(a);
    if (j.R == "dtr") {
      var U = B.B;
      f = U.J5(j.K, U.j(-b, -c));
      f = U.J5(U.j(b, c), f);
    }
    var Z = this.db.Iy();
    B.B.u(f, Z);
    if (j.R == "reset") {
      var h = n.U[n.J[0]].add.SoLd,
        u = h.Sz.v,
        i = u.Wdth.v,
        x = u.Hght.v;
      console.log(h);
      var f = this.db.d$(),
        X = new hk(Math.round(f.x - i / 2), Math.round(f.y - x / 2), i, x);
      Z = B.b._c(X).L;
      h.quiltWarp.v = B.rc.j(X);
    }
    this.db.gz(Z);
    if (k == 9) this.db.abQ(q);
    if (j.p_) {
      var $ = j.p_.v;
      this.uS({ mu: "switchWarp" }, m, n, G);
      this.uS({ mu: "wrp", p_: $ }, m, n, G);
    }
  };
  L.Dq.prototype.bx = function () {
    return !0;
  };
  L.Dq.prototype.xM = function (j, q, m) {
    if (j == null) return !1;
    if (this.id == L.IX) return j.h != null;
    var n = j.LP(!0, null, null, !0);
    if (this.id == L.I6 && j.U[n[0]].H.jG()) {
      alert("Layer is empty.");
      return !1;
    }
    if (j.bR.length != 0) return !0;
    for (var y = 0; y < n.length; y++) {
      var G = j.U[n[y]];
      if (G.op(2) || G.op(31)) {
        alert(g$.get([6, 57, 0]));
        return !1;
      }
      if (G.add.artb) {
        alert("You can not transform the whole artboard");
        return !1;
      }
      if (G.add.TySh) if (!bq.wM(G.add.TySh, q.HS)) return !1;
      if (G.add.SoLd) {
        if (
          n.length == 1 &&
          m &&
          m.io == -1 &&
          ((G.ex() && G.ex().jS) || (G.add.vmsk && G.add.vmsk.jS))
        ) {
          alert("Unlink masks before transforming Smart Object");
          return !1;
        }
        if (!j.aHR(G.add.SoLd.Idnt.v)) {
          alert(
            "Unsupported format of the smart object (" +
              j.dp(G.add.SoLd.Idnt.v).Sh +
              ")"
          );
          return !1;
        }
      }
    }
    if (j.h == null) return !0;
    if (!j.Ph()) return !1;
    return j.a9e();
  };
  L.Dq.prototype.oo = function (j, q, m, n, G) {
    var W = this.nl(G, j),
      k = W[0],
      T = W[1],
      b = this.Dm == 0 ? this.db : this.v_;
    j.I.k3 *= T;
    this.TQ = b.oo(j, m, n, k, null, null, G);
    if (!this.TQ && ei == 1) {
      this._A(j, q, null, !0);
      return;
    }
    this.ck(j, k);
    j.I.k3 /= T;
    if (this.TQ && b.VG(k)) {
      if (Date.now() - this.a1E < 250) this._A(j, q, null, !0);
      this.a1E = Date.now();
    }
  };
  L.Dq.prototype.Vn = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = { R: _.Y.t5, $U: this.cursor };
    j.k(q);
  };
  L.Dq.prototype.nl = function (j, q) {
    var m = 1;
    j = q.I.sb(j.x, j.y);
    if (this.Dm == 1) {
      var n = B.B.Ht(this.db.Iy(), this.OM);
      m = B.B.Kn(n).Dc();
      var G = B.B.BR(n);
      j = B.B.a35(G, j);
    }
    return [j, m];
  };
  L.Dq.prototype.C3 = function (j, q, m, n, G) {
    var W = this.nl(G, j),
      k = W[0],
      T = W[1],
      b = this.Dm == 0 ? this.db : this.v_;
    if (!G.qT) {
      var c = "default";
      if (b) {
        var a = b.Xy(k, j.I.k3 * T, null, G, null, n);
        if (a) c = a;
      }
      if (c != this.cursor) {
        this.cursor = c;
        this.Vn(q);
      }
      if (this.v_) {
        this.ck(j, k);
      }
    }
    if (!this.TQ) return;
    j.I.k3 *= T;
    var f = (this.OX = b.C3(j, m, n, k, this.P4));
    j.I.k3 /= T;
    this.De(j, m, 0, !0);
    this.ck(j, k);
    this.cF(q, null, j);
  };
  L.Dq.prototype.H_ = function (j, q, m, n, G) {
    var W = this.nl(G, j),
      k = W[0],
      T = W[1];
    this.db.H_(j, m, n, k);
    if (this.v_) {
      var b = this.v_.H_(j, m, n, k);
      if (b) {
        this.cF(q, !0, j);
        this.ck(j);
      }
    }
    if (this.OX) {
      var c = this.mo(),
        a = B.b._c(this.OM).L;
      B.B.u(c, a);
      this.db.gz(a);
      this.OX = null;
    }
    this.TQ = !1;
  };
  L.Dq.prototype.uY = function (j, q, m, n) {
    if (n.M(gn.FP)) this._A(j, q, null, !0);
    else if (n.M(gn.k9)) this.iO(j, q);
    else {
      var G = this.db.uY(j, m, n);
      if (G) {
        this.De(j, m, 0, !0);
        this.cF(q, null, j);
      }
    }
  };
  L.Dq.prototype.uS = function (j, q, m, n) {
    if (j.mu == "commit") this._A(m, q, null, !0);
    else if (j.mu == "cancel") this.iO(m, q);
    else if (j.mu == "switchWarp") {
      this.Dm = 1 - this.Dm;
      this.amA();
      this.ck(m);
      this.cF(q, null, m);
    } else if (j.mu == "wrp") {
      this.v_.aFD(j.p_);
      this.ck(m);
      this.De(m, this.a, 0, !0);
    } else if (j.mu == "splt") this.v_.anQ(j.K);
    else if (j.mu == "ctyp") {
      this.db.a6k(j.ate);
      this.ck(m);
      this.cF(q, null, m);
    } else if (j.mu == "cen") {
      this.db.abQ(j.Ly);
      this.ck(m);
      this.De(m, this.a, 0, !0);
      this.cF(q, null, m);
    } else if (j.mu == "trn") {
      var G = B.B.gb(j.vq),
        W = this.OM,
        k = B.B.Ht(this.db.Iy(), this.OM);
      (G[6] = k[6]), (G[7] = k[7]);
      var T = [W.x, W.y, W.x + W.r, W.y, W.x + W.r, W.y + W.$, W.x, W.y + W.$];
      B.B.u(G, T);
      this.X4 = j.X4;
      if (j.CV != this.CV) {
        this.CV = j.CV;
        this.ajr(m);
      }
      this.P4 = j.P4;
      this.db.gz(T);
      this.ck(m);
      this.De(m, this.a, 0, !0);
    }
  };
  L.Dq.prototype.ck = function (j, q) {
    if (this.Dm == 0) this.db.d4(j, this.a);
    else {
      this.v_.d4(j, q);
      var m = this.mo();
      B.B.u(m, j.W.w2.L);
      B.B.u(m, j.W.ee);
      B.B.u(m, j.W.dY);
    }
  };
  L.Dq.prototype._A = function (j, q, m, n) {
    this.De(j, this.a, this.X4);
    var G = new eN(m ? m : this.name, this);
    if (this.n1 == 0) G.data = { e: this.n1, U: this.U, KN: this.KN };
    else if (this.n1 == 1) {
      var W = j.U[this.U[0]],
        k;
      if (W.k2.ma <= 0) {
        k = B.j(W.k2.GG.C(), j.depth);
        B.Ih(W.k2.DL, k, 3);
      } else k = j.h.N;
      var T = { H: W.k2.GG.P(), N: k };
      G.data = {
        e: this.n1,
        v: this.U[0],
        hF: this.hF,
        c_: T,
        sC: this.sC,
        ca: this.ca,
        k2: W.k2,
        eK: this.eK,
        Ap: { HA: W.k2.GG, py: W.k2.DL },
      };
    } else if (this.n1 == 2) {
      G.data = {
        e: this.n1,
        hF: this.hF,
        c_: { H: j.h.H.P(), N: j.h.N.slice(0) },
      };
    }
    j.Du(G);
    var b = B.B.Ht(this.db.Iy(), this.OM),
      c = this.KN,
      a = c ? c[0] : null;
    if (c && c.length == 1 && a[4]) {
      var f = L.Dq.Kt(a[4].nonAffineTransform),
        U = B.b.RD(B.rc._i(a[4].quiltWarp.v)[3]),
        Z = B.B.Ht(f, U);
      b = B.B.J5(b, B.B.BR(Z));
    }
    var h = this.v_ ? this.v_.lv() : null;
    if (h && B.rc.TK(h)) h = null;
    var u = this.db.Iy();
    B.B.u(B.B.BR(b), u);
    var i = this.db.d$(u),
      x = B.B;
    b = x.J5(x.J5(x.j(-i.x, -i.y), b), x.j(i.x, i.y));
    var X = L.Dq.apu(b, this.db.Ef, i, h);
    if (this.id == L.IX)
      X.null.v[0] = { t: "prop", v: { classID: "Chnl", keyID: "fsel" } };
    this.AS = q;
    this.track({ _D: "transform", SC: X });
    this.escape(j, q, n);
  };
  L.Dq.avR = {
    Qcsa: 4,
    Qcs0: 0,
    Qcs1: 2,
    Qcs2: 8,
    Qcs3: 6,
    Qcs4: 1,
    Qcs5: 5,
    Qcs6: 7,
    Qcs7: 3,
  };
  L.Dq.apu = function (j, q, m, n) {
    var G = B.B.Kn(j),
      W = G.Tt,
      k = G.BL,
      T = -Math.atan2(-G.X, G.Sd),
      c = "Qcsi";
    G.rotate(T);
    function b(Z, h) {
      return { t: "UntF", v: { type: ["#Pxl", "#Prc", "#Ang"][h], val: Z } };
    }
    var a = L.Dq.avR;
    for (var f in a) if (a[f] == q) c = f;
    var U = {
      classID: "null",
      null: jw.$W("Lyr", !0),
      FTcs: { t: "enum", v: { QCSt: c } },
      Intr: { t: "enum", v: { Intp: "Bcbc" } },
      Ofst: {
        t: "Objc",
        v: { __name: "Offset", classID: "Ofst", Hrzn: b(W, 0), Vrtc: b(k, 0) },
      },
      Skew: {
        t: "Objc",
        v: {
          classID: "Pnt",
          Hrzn: b((Math.atan(G.ra / G.Jy) * 180) / Math.PI, 2),
          Vrtc: b(0, 2),
        },
      },
      Usng: {
        t: "Objc",
        v: { classID: "Pnt", Hrzn: b(100 * j[6], 1), Vrtc: b(100 * j[7], 1) },
      },
      Wdth: b(G.Sd * 100, 1),
      Hght: b(G.Jy * 100, 1),
      Angl: b((T * 180) / Math.PI, 2),
    };
    if (q == 9) U.Pstn = { t: "Objc", v: { Hrzn: b(m.x, 0), Vrtc: b(m.y, 0) } };
    if (n) U.quiltWarp = { t: "Objc", v: n };
    return U;
  };
  L.Dq.a5p = function (j) {
    var q = 1,
      m = 1,
      n = 0,
      G = 0,
      W = 0,
      k = 0,
      T = 0,
      U = null,
      Z = null;
    if (j.Wdth) q = j.Wdth.v.val / 100;
    if (j.Hght) m = j.Hght.v.val / 100;
    if (j.Skew) {
      var b = j.Skew.v;
      n = b.Hrzn.v.val;
      G = b.Vrtc.v.val;
    }
    if (j.Ofst) {
      var c = j.Ofst.v;
      k = c.Hrzn.v.val;
      T = c.Vrtc.v.val;
    }
    if (j.Angl) W = j.Angl.v.val;
    var a = new k$();
    a.concat(
      new k$(
        q,
        q * Math.tan((G * Math.PI) / 180),
        m * Math.tan((n * Math.PI) / 180),
        m,
        0,
        0
      )
    );
    a.rotate((-W * Math.PI) / 180);
    a.translate(k, T);
    var f = B.B.gb(a);
    if (j.Usng) {
      var c = j.Usng.v;
      f[6] = c.Hrzn.v.val / 100;
      f[7] = c.Vrtc.v.val / 100;
    }
    var h = j.FTcs.v.QCSt;
    if (h == "Qcsi") {
      var u = j.Pstn.v;
      U = new ea(u.Hrzn.v.val, u.Vrtc.v.val);
      Z = 9;
    } else Z = L.Dq.avR[h];
    return { R: "dtr", Kj: Z, K: f, p_: j.warp, ayl: U };
  };
  L.Dq.prototype.iO = function (j, q) {
    if (this.n1 == 0) L.Dq.aEg(j, this.U, this.KN);
    else if (this.n1 == 1) {
      var m = j.U[this.U[0]];
      j.h = this.hF;
      if (!this.ca) {
        m.k2.GG = this.eK.HA;
        m.k2.DL = this.eK.py;
        m.zB(j, 0, 0, j.h);
      } else {
        m.lf(j, this.sC);
      }
      j.gF();
      j.hM = !0;
    } else if (this.n1 == 2) {
      j.h = this.hF;
      j.hM = !0;
    }
    this.escape(j, q, !0);
  };
  L.Dq.prototype.escape = function (j, q, m) {
    this.db.clear(j);
    if (this.v_) this.v_.clear(j);
    this.db = null;
    this.v_ = null;
    this.w$ = null;
    this.Dm = 0;
    if (m) this.Qo(q, _.E.c, { R: _.Y.xQ });
  };
  L.Dq.prototype.km = function (j, q) {
    if (j.e == 0) L.Dq.j2(q, j);
    else {
      if (j.e == 1) {
        var m = q.U[j.v];
        if (j.ca) {
          m.k2 = j.k2;
        } else {
          m.k2.GG = j.Ap.HA;
          m.k2.DL = j.Ap.py;
        }
        m.zB(q, 0, 0, q.h);
        q.gF();
      }
      q.h = { H: j.c_.H.P(), N: j.c_.N.slice(0) };
      q.hM = !0;
    }
  };
  L.Dq.prototype.W6 = function (j, q) {
    if (j.e == 0) L.Dq.j2(q, j);
    else {
      if (j.e == 1) {
        var m = q.U[j.v];
        if (j.ca) {
          m.lf(q, j.sC);
        } else {
          m.k2.GG = j.eK.HA;
          m.k2.DL = j.eK.py;
          m.zB(q, 0, 0, q.h);
        }
        q.gF();
      }
      q.h = j.hF;
      q.hM = !0;
    }
  };
  L.Dq.prototype.anD = function (j, q, m) {
    j.ac();
    var n = [];
    if (m == null)
      for (var y = 0; y < j.bR.length; y++)
        if (j.GA[j.bR[y]].add.vmsk.D.length > 2) n.push(-1 - j.bR[y]);
    var G = [],
      W = j.I.rO;
    if (W[0] + W[1] + W[2] == 3)
      if (m != null || n.length == 0 || (j.H7 != null && j.H7.length != 0)) {
        if (j.J.length == 1) {
          var k = j.U[j.J[0]];
          if (k.D1() && k.q_) G = [j.J[0]];
        }
        if (G.length == 0) G = j.LP(q, m, null, !0);
      }
    G = G.concat(n);
    for (var y = 0; y < j.y2.length; y++) G.push(-1e3 - j.y2[y]);
    this.U = G;
  };
  L.Dq.prototype.enable = function (j, q, m, n, G, W) {
    if (this.cursor == null) this.cursor = "default";
    this.Vn(q);
    if (this.db) return;
    this.a = m;
    this.anD(j, !0);
    this.aIx(j, W && W.io != null && W.io != -1 ? W.io : null);
    this.cF(q, null, j);
    this.ck(j);
    if (W && W.io == -1) this.uS({ mu: "switchWarp" }, q, j, n);
  };
  L.Dq.prototype.rm = function () {
    return this.P4 ? null : [0];
  };
  L.Dq.prototype.ui = function (j, q, m) {
    if (j && j[0] != null) this.P4 = j[0] == 1;
  };
  L.Dq.prototype.cF = function (j, q, m) {
    var n = { R: _.Y.vv, l: this.id };
    if (this.Dm == 0) {
      var G = B.B.Ht(this.db.Iy(), this.OM),
        W = B.B.Kn(G);
      n.vq = {
        OC: W,
        ate: this.db.aDN(),
        Ly: this.db.d$(),
        HA: this.OM.P(),
        P4: this.P4,
      };
    } else {
      n.amU = q;
      n.p_ = this.v_.lv();
    }
    if (m) {
      n._E = ["---"];
      for (var y = 0; y < m._E.length; y++) n._E.push(m._E[y].name);
    }
    n.aKO = this.v_ != null;
    n.aEi = !1;
    if (m)
      for (var y = 0; y < m.J.length; y++) {
        var k = m.U[m.J[y]];
        if (!(k.add.SoLd || k.add.TySh || k.ql() || k.D1())) n.aEi = !0;
      }
    this.Qo(j, _.E.c, n);
  };
  L.Dq.prototype.aIx = function (j, q) {
    var m = this.id == L.IX,
      n = !0,
      G = this.U[0],
      W = j.U[G],
      T = null,
      b = null,
      c = null,
      U = null;
    if (m) {
      this.n1 = 2;
      this.hF = j.h;
    } else if (j.h && this.U.length == 1 && G >= 0 && !W.H.jG()) {
      this.n1 = 1;
      this.hF = j.h;
      this.sC = W.k2;
      this.ca = !1;
      if (!W.i6(j, j.h)) {
        this.ca = !0;
        W.YC(j, j.h, !1);
      }
      this.eK = { py: W.k2.DL, HA: W.k2.GG };
    } else {
      this.n1 = 0;
      this.KN = L.Dq.zD(j, this.U, null);
      for (var y = 0; y < this.KN.length; y++)
        if (this.KN[y][3] != null) n = !1;
    }
    var k = this.n1 == 1;
    if (this.KN && this.KN.length == 1) {
      var a = this.KN[0];
      if (a[2] != null) b = a[2].pQ;
      if (a[3] == null) k = !0;
      if (a[3] != null) c = a[3];
      if (a[4] != null) {
        T = j.U[this.U[0]].add.SoLd;
        if (a[1] || a[2]) k = !1;
      }
    }
    var f = m ? j.h.H.P() : L.Dq.Fj(j, this.U);
    this.OM = f;
    if (!m && b && ei == 1) {
      U = b.HG();
      this.Md = B.B.Ht(U, this.OM);
    } else if (!m && c && ei == 1) {
      var Z = j.U[this.U[0]],
        c = Z.add.TySh;
      U = B.b._c(Z.a_.c7).L;
      B.b.u(U, c.u, U);
      this.Md = B.B.Ht(U, this.OM);
    } else if (!m && T) {
      U = L.Dq.Kt(T.nonAffineTransform);
      this.OM = B.b.RD(B.rc._i(T.quiltWarp.v)[3]);
      if (k) this.v_ = new cN(T.quiltWarp.v);
      this.Md = B.B.Ht(U, this.OM);
    } else {
      if (k || m) this.v_ = new cN(B.rc.j(this.OM));
      this.Md = [1, 0, 0, 0, 1, 0, 0, 0];
      if (this.id == L.I6) q = 3;
      U = [f.x, f.y, f.x + f.r, f.y, f.x + f.r, f.y + f.$, f.x, f.y + f.$];
    }
    this.db = new bn(U, !0, !0, n, !1, !1, q);
    this.a2E = [1, 0, 0, 0, 1, 0, 0, 0];
    this.ajr(j);
  };
  L.Dq.prototype.ajr = function (j) {
    if (this.id == L.I6) {
      var q,
        m,
        W = null;
      if (this.KN && j.h == null) {
        var n = this.KN[0][0],
          G = n.la;
        q = G[0];
        m = G[1];
      } else if (this.eK) {
        q = this.eK.py;
        m = this.eK.HA;
      }
      if (this.CV != 0) W = j._E[this.CV - 1].fy(m);
      this.w$ = B.Pu.axA(B.sL(q, 8), m.r, m.$, W);
    }
  };
  L.Dq.Fj = function (j, q) {
    if (q == null) q = j.LP(!0, null, null, !0);
    var m = new hk(),
      n = new hk();
    if (j.h && q.length == 1 && q[0] >= 0) m = j.h.H.P();
    else
      for (var y = 0; y < q.length; y++) {
        var G = q[y],
          W = 0 <= G ? j.U[G] : -1e3 < G ? j.GA[-1 - G] : j._E[-1e3 - G],
          k = W.add ? W.add.vmsk : null,
          T =
            0 <= G
              ? W.Fj(j, q.length == 1, !1, !0)
              : -1e3 < G
              ? B.z.zZ(k.D, q.length == 1 && k.J.length != 0 ? k.J : null)
              : W.H.P();
        m = m.vd(T);
        if (G > 0 && W.add.artb) n = n.vd(W.Li());
      }
    if (!n.jG()) return n;
    if (m.r == 0) {
      if (m.$ == 0) return m;
      m.x -= 10;
      m.r += 20;
    }
    if (m.$ == 0) {
      m.y -= 10;
      m.$ += 20;
    }
    return m;
  };
  L.Dq.prototype.Qo = function (j, q, m, n) {
    var G = new fd(q, !0);
    G.data = m;
    if (n) G.l = n;
    j.k(G);
  };
  L.Dq.rR = function (j) {
    var q = [];
    for (var y = 0; y < j.U.length; y++) q.push(y);
    for (var y = 0; y < j.GA.length; y++) q.push(-1 - y);
    for (var y = 0; y < j._E.length; y++) q.push(-1e3 - y);
    return q;
  };
  L.Dq.zD = function (j, q, m) {
    var n = [];
    for (var y = 0; y < q.length; y++) {
      var G = q[y],
        W,
        k;
      if (G >= 0) {
        W = j.U[G];
        k = W.O8(j, m, !0);
      } else if (G > -1e3) {
        W = j.GA[-1 - G];
        k = [2];
      } else {
        n.push([null, null, null, null, null, null, null, j._E[-1e3 - G].P()]);
        continue;
      }
      var T = [],
        b = k.indexOf(0) != -1;
      if (b) {
        var c = { la: W.add.SoLd ? null : [W.buffer.slice(0), W.H.P()] };
        T.push(c);
        if (W.r3()) {
          var a = W.xE(j);
          c.arF = a.buffer.slice(0);
          c.aaX = a.H.P();
        }
      } else T.push(null);
      if (k.indexOf(1) != -1) T.push(W.ex().P());
      else T.push(null);
      if (k.indexOf(2) != -1)
        T.push({
          pQ: W.add.vmsk.P(),
          rS: W.add.vstk ? B.S(W.add.vstk) : null,
          pH: W.add.vstk ? eu.H4(j.U[G].add) : null,
          TB: W.add.vstl ? JSON.stringify(W.add.vstl) : null,
          ih: W.add.vogk ? B.S(W.add.vogk) : null,
        });
      else T.push(null);
      if (W.add.TySh && b) {
        al.NX(W.add.TySh);
        T.push(W.add.TySh.u.P());
      } else T.push(null);
      if (W.add.SoLd && b) T.push(B.S(W.add.SoLd));
      else T.push(null);
      if (k.indexOf(3) != -1) T.push(W.xE(j).x7.P());
      else T.push(null);
      if (W.add.lmfx) T.push(JSON.stringify(W.add.lmfx));
      else T.push(null);
      n.push(T);
    }
    return n;
  };
  L.Dq.aEg = function (j, q, m) {
    for (var y = 0; y < q.length; y++) {
      var n = q[y],
        G = 0 <= n ? j.U[n] : -1e3 < n ? j.GA[-1 - n] : j._E[-1e3 - n],
        W = m[y];
      if (W[0]) {
        if (W[0].la) {
          G.H = W[0].la[1].P();
          G.buffer = W[0].la[0].slice(0);
        }
        if (G.r3()) {
          var k = G.xE(j);
          k.buffer = W[0].arF.slice(0);
          k.H = W[0].aaX.P();
        }
      }
      if (W[1]) {
        G.ex().N = W[1].N.slice(0);
        G.ex().H = W[1].H.P();
        G.ex().xo = !0;
      }
      if (W[2]) {
        G.add.vmsk = W[2].pQ.P();
        if (W[2].pH) eu.Qw(G.add, W[2].pH);
        if (W[2].rS) G.add.vstk = B.S(W[2].rS);
        if (W[2].ih) G.add.vogk = B.S(W[2].ih);
        if (W[2].TB) G.add.vstl = JSON.parse(W[2].TB);
      }
      if (W[3]) {
        G.add.TySh.u = W[3].P();
        al.nk(G.add.TySh);
      }
      if (W[4]) {
        G.add.SoLd = B.S(W[4]);
      }
      if (W[5]) {
        var T = G.xE(j).x7;
        T.N = W[5].N.slice(0);
        T.H = W[5].H.P();
      }
      if (W[6]) {
        G.add.lmfx = JSON.parse(W[6]);
      }
      if (W[7]) {
        G.N = W[7].N.slice(0);
        G.H = W[7].H.P();
        G.xo = !0;
      }
      if (0 <= n) {
        G.D5(j);
        G.gF();
        if (W[4]) G.yZ(j, !1);
      }
    }
    j.gF();
  };
  L.Dq.aIY = function (j, q, m) {
    j.depth = m;
    j.buffer = B.j(j.r * j.$ * 4, m);
    for (var y = 0; y < q.length; y++) {
      var n = q[y];
      if (0 <= n) {
        var G = j.U[n],
          W = G.ex();
        if (W) {
          W.N = B.sL(W.N, m);
          W.xo = !0;
        }
        if (G.add.vmsk) G.add.vmsk.xo = !0;
        if (G.ql()) G.D5(j);
        else if (G.add.SoLd) {
          if (G.r3()) {
            var k = G.xE(j),
              W = k.x7;
            if (W) {
              W.N = B.sL(W.N, m);
              W.xo = !0;
            }
          }
          G.yZ(j);
        } else G.buffer = B.sL(G.buffer, m);
        G.gF();
      } else if (-1e3 < n) {
      } else {
        var W = j._E[-1e3 - n];
        W.N = B.sL(W.N, m);
      }
    }
    j.gF();
  };
  L.Dq.aEm = function (j, q, m) {
    var n,
      G,
      W = 17,
      k = j.$T();
    if (k) {
      W = k[2];
      n = k[3].slice(0);
    }
    if (m) {
      var T = ICC.R(m.buffer);
      G = ICC.U.sampleLUT(T, W, !0);
    }
    for (var y = 0; y < q.length; y++) {
      var b = q[y];
      if (0 <= b) {
        var c = j.U[b];
        if (c.ql()) c.D5(j);
        else if (c.add.SoLd) {
        } else {
          if (n) ICC.U.applyLUT(n, W, c.buffer, c.buffer);
          if (G) ICC.U.applyLUT(G, W, c.buffer, c.buffer);
        }
        c.gF();
      }
    }
    j.gF();
  };
  L.Dq.j2 = function (j, q) {
    if (q.aHY) {
      var m = j.$T();
      j.uJ(q.aHY[0]);
      q.aHY = [m ? m[0] : null];
    }
    if (q.U == null) return;
    var n = L.Dq.zD(j, q.U, q.a1Z);
    if (q.depth != null) {
      var G = q.depth;
      q.depth = j.depth;
      j.depth = G;
      j.buffer = B.j(j.r * j.$ * 4, j.depth);
      j.gF();
    }
    L.Dq.aEg(j, q.U, q.KN);
    q.KN = n;
  };
  L.Dq.iZ = function (j, q, m, n, G, W, k, T, b, c) {
    if (typeof W[0] == "number") {
      var a = [];
      for (var y = 0; y < m.length; y++) a[y] = W;
      W = a;
    }
    for (var y = 0; y < m.length; y++) {
      var f = W[y],
        U = B.B.Kn(f),
        Z = U.Dc(),
        h = m[y],
        u = 0 <= h ? j.U[h] : -1e3 < h ? j.GA[-1 - h] : j._E[-1e3 - h],
        i = n[y];
      if (u.add && u.add.lmfx && T) dS.yI(u.add.lmfx, Z);
      if (i[0] && !i[3] && !i[4] && !i[5]) {
        var x = i[0].la;
        if (b) {
          var X = b.TM(x[1]),
            $ = B.j(X.C() * 4);
          B.M4(x[0], x[1], $, X);
          x = [$, X];
        }
        var H = L.Dq.hG(x, G, f, k, G == 0 ? u.buffer.buffer : null, null, c);
        if (H) {
          u.H = H.H;
          u.buffer = H.buffer;
        }
      }
      if (i[1]) {
        var C = u.ex();
        L.Dq.Mu(
          j,
          i[1],
          C,
          G,
          f,
          k,
          C.jS && k && !B.rc.TK(k) && i[0] ? i[0].la[1] : null
        );
        if (b) {
          var X = C.H.TM(b),
            l = B.j(X.C());
          B.sN(C.N, C.H, l, X);
          C.N = l;
          C.H = X;
        }
      }
      if (i[2]) {
        var v = k && !B.rc.TK(k),
          K = i[2].pQ.P(),
          S = m.length == 1 && K.J.length != 0,
          o = m.length == 1 && K.U9.length > 1;
        if (o) S = !1;
        var V = S ? K.J : null,
          P = o ? K.U9 : null;
        if (v) {
          var z = B.rc._i(k);
          B.B.u(f, z[3]);
          B.z.agD(K.D, z, V, P);
        } else B.z.aft(K.D, f, V, P);
        if (u.add.vstk && T) {
          u.add.vstk.strokeStyleLineWidth.v.val =
            i[2].rS.strokeStyleLineWidth.v.val * Z;
          var E = i[2].pH;
          if (E && E.pb == 3) {
            E = B.S(E);
            var A = E.pH.phase.v;
            E.pH.Scl.v.val = Math.round(E.pH.Scl.v.val * Z);
            A.Hrzn.v = Math.round(A.Hrzn.v * Z);
            A.Vrtc.v = Math.round(A.Vrtc.v * Z);
            eu.Qw(u.add, E);
          }
        }
        if (u.add.vogk) {
          u.add.vogk = B.S(i[2].ih);
          if (v || o) B.ih.jl(u.add.vogk);
          else B.ih.u(u.add.vogk, f, m.length > 1 ? [] : K.J, T);
        }
        if (u.add.vstl) {
          var N = (u.add.vstl = JSON.parse(i[2].TB));
          for (var Q = 0; Q < 2; Q++) {
            var e = Q == 0 ? N.dZ : N.Nu;
            if (e == null || e[3] == null) continue;
            var Y = e[3],
              d = new k$(Y[0], Y[1], Y[2], Y[3], Y[4], Y[5]);
            d.concat(U);
            e[3] = [d.Sd, d.X, d.ra, d.Jy, d.Tt, d.BL];
          }
        }
        K.LH *= Z;
        var I = new k$();
        I.rotate(K.kx);
        I.concat(U);
        K.kx = Math.atan2(-I.X, I.Sd);
        u.add.vmsk = K;
        if (u.add.vogk) B.ih.ib(u.add.vogk, u.add.vmsk);
      }
      if (i[3]) {
        var d = i[3].P();
        d.concat(U);
        u.add.TySh.u = d;
        al.nk(u.add.TySh);
        bq.qS(u, q.HS);
      }
      if (i[4]) {
        var O = u.add.SoLd,
          s = L.Dq.Kt(i[4].nonAffineTransform);
        B.B.u(f, s);
        var p = B.b.YU(s);
        if (bn.Zx(s)) {
          if (k) {
            var F = B.b.RD(B.rc._i(i[4].quiltWarp.v)[3]),
              l = B.B.Ht(s, F),
              g = B.b.RD(B.rc._i(k)[3]);
            s = [
              g.x,
              g.y,
              g.x + g.r,
              g.y,
              g.x + g.r,
              g.y + g.$,
              g.x,
              g.y + g.$,
            ];
            B.B.u(l, s);
            O.quiltWarp.v = k;
          }
          var w = B.B.Ht(s),
            r = s;
          if (!B.B.hE(w)) {
            w[6] = w[7] = 0;
            r = [0, 0, 1, 0, 1, 1, 0, 1];
            B.B.u(w, r);
          }
          O.Trnf = L.Dq.be(r);
          O.nonAffineTransform = L.Dq.be(s);
          if (O.filterFX) O.filterFX = B.S(i[4].filterFX);
          L.Dq.a26(O, U);
          u.yZ(j, G == 0, q.HS);
        }
      }
      if (i[5]) L.Dq.Mu(j, i[5], u.xE(j).x7, G, f, k);
      if (i[7]) L.Dq.Mu(j, i[7], u, G, f, k);
      if (0 <= h) {
        if (!c) u.yy();
        u.D5(j);
        u.gF();
        if (u.a_) u.a_.Zs = !0;
      }
    }
    j.gF();
  };
  L.Dq.ac1 = function (j, q) {
    var m = q.Dc(),
      n = 0;
    B.Hn(j);
    var G = B.aBi(j, q, 0.3, 4);
    n = G[0];
    q = G[1];
    var W = j[n],
      k = j[n + 1],
      T = B.oM(W),
      b = k.r,
      c = k.$,
      a = B.b._c(k).L;
    B.b.u(a, q, a);
    var f = B.b.YU(a),
      U = B.j(f.C(), T),
      Z = f.x,
      h = f.y,
      u = f.r,
      i = f.$,
      x = q.P();
    x.BR();
    var X = x.uL(new ea(0, 0)),
      $ = x.uL(new ea(1, 0)),
      H = $.x - X.x,
      C = $.y - X.y;
    for (var l = 0; l < i; l++) {
      var v = x.Sd * (Z + 0.5) + x.ra * (l + h + 0.5) + x.Tt,
        K = x.X * (Z + 0.5) + x.Jy * (l + h + 0.5) + x.BL;
      if (T == 8)
        for (var S = 0; S < u; S++) {
          if (0.5 < v && v < b - 0.5 && 0.5 < K && K < c - 0.5)
            U[l * u + S] = Math.floor(0.5 + B.B.a9z(v, K, W, b, c));
          v += H;
          K += C;
        }
      else if (T == 16)
        for (var S = 0; S < u; S++) {
          if (0.5 < v && v < b - 0.5 && 0.5 < K && K < c - 0.5)
            U[l * u + S] = Math.floor(0.5 + B.B.afQ(v, K, W, b, c));
          v += H;
          K += C;
        }
      else if (T == 32)
        for (var S = 0; S < u; S++) {
          if (0.5 < v && v < b - 0.5 && 0.5 < K && K < c - 0.5)
            U[l * u + S] = B.B.afQ(v, K, W, b, c);
          v += H;
          K += C;
        }
    }
    return { H: f, N: U };
  };
  L.Dq.Ve = function (j, q, m, n, G) {
    if (m == null) m = !1;
    return L.Dq.hG(j, m ? 0 : 1, B.B.gb(q), null, n, G, m);
  };
  L.Dq.hG = function (j, q, m, n, G, W, k) {
    if (k == null) k = !1;
    if (k && W) throw "e";
    var T = B.oM(j[0]),
      b = {},
      U = 0;
    if (n && !B.rc.TK(n)) {
      var c = B.rc._i(n);
      B.B.u(m, c[3]);
      b.H = B.b.YU(c[3]);
      b.buffer = B.j(b.H.C() * 4, T);
      var a = B.rc.Fj(n);
      a.x = a.y = 0;
      var f = j[1].P();
      if (a.C() == f.C()) f.x = f.y = 0;
      B.Ol.drawImage(c, j[0], f, a, b.buffer, b.H, q == 0);
      return b;
    }
    if (B.B.hE(m)) {
      B.HZ(j);
      var Z = 0.3,
        U = 0,
        h = B.B.Kn(m),
        u = j[1],
        i = u.C() * h.Dc();
      if (k && i > 4e6) Z = i > 8e6 ? 2.2 : 1.2;
      var x = B.aBi(j, h, Z, 16);
      U = x[0];
      m = B.B.gb(x[1]);
    }
    var X = j[U],
      u = j[U + 1],
      $ = B.B.J5(m, B.B.gb(new k$(u.r, 0, 0, u.$, u.x, u.y))),
      H = [0, 0, 1, 0, 1, 1, 0, 1];
    for (var C = 0.1; C < 0.99; C += 0.1) H.push(0, C, C, 0, 1, C, C, 1);
    B.B.u($, H);
    b.H = B.b.YU(H, !0);
    if (W) b.H = b.H.TM(W);
    if (k) {
      while ((b.H.r & 3) != 0) b.H.r++;
      while ((b.H.$ & 3) != 0) b.H.$++;
    }
    if (b.H.r > 1e5 || b.H.$ > 1e5 || b.H.C() > 3e4 * 3e4) return null;
    var l = b.H.C() * 4;
    if (T == 8 && G && G.byteLength >= l && l >= G.byteLength >> 2) {
      b.buffer = new Uint8Array(G);
    } else {
      b.buffer = B.j(l, T);
    }
    B.B.drawImage($, X, u.r, u.$, b.buffer, b.H, q == 0, k);
    if (q == 2 && b.buffer) {
      var v = b.H.r,
        K = b.H.$,
        S;
      S = [0, -1, 0, -1, 16, -1, 0, -1, 0];
      S = B.Vl.__(S);
      var o = b.buffer.slice(0);
      B.Vl.kT(o, b.buffer, v, K, S, !0, !1);
    }
    if (b.buffer) return b;
  };
  L.Dq.Mu = function (j, q, m, n, G, W, k) {
    var T = q.H,
      b = q.N;
    if (k) {
      T = k;
      b = q.fy(T);
    }
    if (q.color == 255) B.BR(b);
    var c = B.j(T.C() * 4, j.depth);
    B.ln(b, c, 3);
    var a = L.Dq.hG([c, T], n, G, W);
    if (a) {
      m.H = a.H;
      m.N = B.j(a.H.C(), j.depth);
      B.Ih(a.buffer, m.N, 3);
      m.xo = !0;
    }
    if (q.color == 255) {
      B.BR(b);
      if (a) B.BR(m.N);
    }
  };
  L.Dq.a26 = function (j, q) {
    var m = j.filterFX;
    if (m) m = m.v.filterFXList;
    if (m) m = m.v;
    if (m)
      for (var n = 0; n < m.length; n++) {
        var G = m[n].v.Fltr;
        if (G == null) continue;
        var W = G.v.classID;
        G = G.v;
        if (
          W != "rigidTransform" &&
          W != "blurbTransform" &&
          W != "perspectiveWarpTransform"
        )
          continue;
        var k = [];
        for (var T = 0; T < 4; T++) k.push(G["PuX" + T].v, G["PuY" + T].v);
        var b = k.slice(0);
        B.b.u(k, q, k);
        for (var T = 0; T < 4; T++) {
          G["PuX" + T].v = k[T * 2];
          G["PuY" + T].v = k[T * 2 + 1];
        }
        if (W == "rigidTransform") {
          var c = ["PinP", "posFinalPins"],
            a = ["originalVertexArray", "deformedVertexArray"],
            f = G.puppetShapeList.v;
          for (var U = 0; U < f.length; U++) {
            var Z = f[U].v;
            for (var h = 0; h < c.length; h++) {
              var u = L.Dq.Kt(Z[c[h]]);
              B.b.u(u, q, u);
              Z[c[h]] = L.Dq.be(u);
              var i = new Uint8Array(Z[a[h]].v),
                b = new Float32Array(i.buffer);
              B.b.u(b, q, b);
              var x = [];
              for (var X = 0; X < i.length; X++) x[X] = i[X];
              Z[a[h]].v = x;
            }
          }
        }
        if (W == "blurbTransform") {
          var $ = B.iA.Qx(G);
          B.iA.u($, q);
          B.iA.k_($[0], G);
        }
        if (W == "perspectiveWarpTransform") {
          var H = B.m8.N2(G);
          B.b.u(H.EO, q, H.EO);
          B.b.u(H.D_, q, H.D_);
          B.m8.MM(H, G);
        }
      }
  };
  L.Dq.Kt = function (j) {
    var q = [],
      m = j.v.length;
    for (var y = 0; y < m; y++) q.push(j.v[y].v);
    return q;
  };
  L.Dq.be = function (j) {
    var q = { t: "VlLs", v: [] },
      m = j.length;
    for (var y = 0; y < m; y++) q.v.push({ t: "doub", v: j[y] });
    return q;
  };
  L.Dq.prototype.amA = function () {
    var j = B.b.RD(B.rc._i(this.v_.lv())[3]),
      q = B.B.Ht(this.db.Iy(), this.OM),
      m = [j.x, j.y, j.x + j.r, j.y, j.x + j.r, j.y + j.$, j.x, j.y + j.$];
    B.B.u(q, m);
    this.db.gz(m);
    this.OM = j;
  };
  L.Dq.prototype.mo = function () {
    var j = B.B.Ht(this.db.Iy(), this.OM);
    if (this.OX) j = B.B.J5(j, B.B.gb(this.OX));
    return j;
  };
  L.Dq.prototype.De = function (j, q, m, n) {
    var G = this.mo();
    G = B.B.J5(G, B.B.BR(this.Md));
    var W = this.v_ ? this.v_.lv() : null;
    if (this.n1 == 0) {
      var k = (this.rF = B.B.Kn(G));
      if (this.id == L.I6) {
        var T = this.KN[0][0],
          b = T.la,
          c = b[1],
          a = ~~(c.r * Math.max(0, k.Sd)),
          f = ~~(c.$ * Math.max(0, k.Jy)),
          U = new hk(
            Math.round(k.Sd * c.x + k.Tt),
            Math.round(k.Jy * c.y + k.BL),
            a,
            f
          ),
          Z = B.Pu.u(this.w$, U),
          h = j.U[this.U[0]];
        h.buffer = B.sL(Z, j.depth);
        h.H = U;
        h.gF();
        j.gF();
      } else L.Dq.iZ(j, q, this.U, this.KN, m, G, W, null, null, n);
    } else if (this.n1 == 1) {
      var u = j.U[this.U[0]],
        c = this.eK.HA;
      if (u.ma <= 0) {
        var i = this.eK.py,
          x = this.hF,
          X = null;
        if (W && !B.rc.TK(W) && !x.H.Lg(c)) {
          var Z = B.j(x.H.C() * 4);
          B.M4(i, c, Z, x.H);
          i = Z;
          c = x.H;
        }
        if (this.id == L.I6) {
          var k = (this.rF = B.B.Kn(G)),
            a = ~~(c.r * Math.max(0, k.Sd)),
            f = ~~(c.$ * Math.max(0, k.Jy)),
            U = new hk(
              Math.round(k.Sd * c.x + k.Tt),
              Math.round(k.Jy * c.y + k.BL),
              a,
              f
            ),
            Z = B.Pu.u(this.w$, U);
          X = { buffer: B.sL(Z, j.depth), H: U };
        } else X = L.Dq.hG([i, c], m, G, W);
        if (X) {
          u.k2.DL = X.buffer;
          u.k2.GG = X.H;
          var $ = B.j(X.H.C(), j.depth);
          B.Ih(u.k2.DL, $, 3);
          j.h = { N: $, H: u.k2.GG.P() };
        }
      } else {
        var H = B.j(c.C() * 4);
        B.ln(this.eK.py, H, 3);
        var X = L.Dq.hG([H, c], m, G, W);
        if (X) {
          u.k2.DL = B.j(X.H.C());
          B.Ih(X.buffer, u.k2.DL, 3);
          u.k2.GG = X.H;
        }
        this.azP(j, m, G, W);
      }
      u.zB(j, 0, 0, j.h);
      if (m != 0) {
        u.yy();
        B.yy(j.h);
      }
      j.hM = !0;
      j.gF();
    } else if (this.n1 == 2) this.azP(j, m, G, W);
  };
  L.Dq.prototype.azP = function (j, q, m, n) {
    var G = this.hF.H,
      W = B.j(G.C() * 4);
    B.ln(this.hF.N, W, 3);
    var k = L.Dq.hG([W, G], q, m, n),
      T = B.j(k.H.C());
    B.Ih(k.buffer, T, 3);
    j.h = { N: T, H: k.H };
    j.hM = !0;
  };
  L.Dq.prototype.disable = function (j, q, m, n) {
    if (this.db) this._A(j, q, null, !0);
  };
  L.aaW = function () {
    L.Dq.call(this, [10, 16], L.Fg, "tools/transform");
  };
  L.aaW.prototype = new L.Dq();
  L.a0S = function () {
    L.Dq.call(this, [7, 10], L.IX, "tools/transform");
  };
  L.a0S.prototype = new L.Dq();
  L.aqt = function () {
    L.Dq.call(this, [10, 48], L.I6, "tools/transform");
  };
  L.aqt.prototype = new L.Dq();
  L.ct = function (j, q, m) {
    L.ju.call(this, j ? j : [10, 40], q ? q : L.Y8, m ? m : "tools/slice");
    this.I7 = null;
    this.AS = null;
    this.On = { t: 0, x: 0, y: 0 };
    this.RB = null;
    this.ayX = null;
    this.yN = null;
    this.hU = null;
  };
  L.ct.prototype = new L.ju();
  L.ct.g0 = function (j, q) {
    var m = -1;
    for (var y = 0; y < j.length; y++) {
      var n = L.ct.II(j, y);
      if (n[0] <= q.x && q.x <= n[2] && n[1] <= q.y && q.y <= n[3]) {
        m = y;
        break;
      }
    }
    return m;
  };
  L.ct.prototype.BT = function (j, q, m, n, G) {
    if (m == null) return;
    this.bi(m);
    if (j.R == "fromAction") {
      var W = j.tp,
        k = W._D,
        T = W.SC,
        b = m.f8(),
        c = m.Tl(),
        a = c == -1 ? new hk(0, 0, m.r, m.$) : m.U[c].Li();
      if (k == "divide") {
        if (m.Zy.length != 0) {
          var f = m.Zy[0],
            U = L.ct.II(m.gQ, f);
          a = new hk(U[0], U[1], U[2] - U[0], U[3] - U[1]);
          m.gQ.splice(f, 1);
          m.Zy = [];
        }
        b = [[], []];
        for (var Z = 0; Z < 2; Z++) {
          var h = ["Across", "Down"][Z],
            u = T["pixels" + h] ? 0 : 1,
            i = T[["pixels", "slices"][u] + h];
          if (i == null) continue;
          i = i.v;
          var x = Z == 0 ? a.x : a.y,
            X = Z == 0 ? a.r : a.$;
          if (u == 0)
            for (var y = 1; y * i < X; y++) {
              b[0].push([Z, x + y * i]);
              b[1].push(c);
            }
          else {
            var $ = Math.floor(X / i);
            for (var y = 1; y < i; y++) {
              b[0].push([Z, x + y * $]);
              b[1].push(c);
            }
          }
        }
      }
      var H = [a.x, a.x + a.r],
        C = [a.y, a.y + a.$];
      for (var y = 0; y < b[0].length; y++) {
        var l = b[0][y],
          v = Math.round(l[1]),
          K = b[1][y];
        if (K != -1 && K != c) continue;
        if (l[0] == 0 && H.indexOf(v) == -1) H.push(v);
        if (l[0] == 1 && C.indexOf(v) == -1) C.push(v);
      }
      H.sort(function (e, Y) {
        return e - Y;
      });
      C.sort(function (e, Y) {
        return e - Y;
      });
      for (var S = 1; S < C.length; S++)
        for (var o = 1; o < H.length; o++) {
          m.gQ.push(L.ct.HX());
          L.ct.As(m.gQ, m.gQ.length - 1, [H[o - 1], C[S - 1], H[o], C[S]]);
          m._F = !0;
        }
    } else if (j.R == "reorder") {
      if (m.Zy.length == 0) return;
      var V = m.gQ,
        P = m.Zy;
      P.sort(function (e, Y) {
        return e - Y;
      });
      console.log(P);
      var z = V.slice(0),
        E = [],
        A = [];
      for (var y = 0; y < P.length; y++) {
        var f = P[y],
          N = V[f];
        A.push(N);
        z.splice(z.indexOf(N), 1);
      }
      var Q = Math.max(0, Math.min(z.length, P[0] - j.dir));
      for (var y = 0; y < A.length; y++) {
        z.splice(Q + y, 0, A[y]);
        E.push(Q + y);
      }
      m.gQ = z;
      m.Zy = E;
    } else if (j.R == "delete") {
      var V = m.gQ.slice(0);
      for (var y = 0; y < m.Zy.length; y++)
        m.gQ.splice(m.gQ.indexOf(V[m.Zy[y]]), 1);
      m.Zy = [];
    } else if (j.R == "deleteAll") {
      m.gQ = [];
      m.Zy = [];
    } else {
      m.gQ[m.Zy[0]].v = j;
      m._F = !0;
    }
    this.JG(m);
  };
  L.ct.prototype.enable = function (j, q, m, n, G, W) {
    L.ju.prototype.enable.call(this, j, q, m, n, G, W);
    if (!m.q1.gQ) {
      var k = new fd(_.E.c, !0);
      k.data = { R: _.Y.fh, rw: fG.V2 };
      q.k(k);
    }
  };
  L.ct.prototype.disable = function () {
    this.I7 = null;
    this.AS = null;
  };
  L.ct.prototype.FO = function (j, q, m, n, G) {
    var W = j.I.sb(G.x, G.y),
      k = L.ct.g0(j.gQ, W);
    if (k == -1) return;
    this.I7 = j;
    this.AS = q;
    j.Zy = [k];
    j._F = !0;
    if (this.hU == null) {
      this.hU = new cG([{ name: [5, 4] }, { name: [8, 11, 1], QU: !0 }]);
      this.hU.Q("select", this.T9, this);
    }
    var T = this.hU;
    T.parent = q;
    T.T();
    T.update(j, m);
    var b = new fd(_.E.c, !0);
    b.data = { R: _.Y.wQ, Tf: T, x: G.uA + 2, y: G.Ql + 1 };
    q.k(b);
  };
  L.ct.prototype.T9 = function (j) {
    var q = this.hU.r9()[0],
      m = this.I7;
    if (q == 0) {
      this.bi(m);
      m.gQ.splice(m.Zy[0], 1);
      m.Zy = [];
      m._F = !0;
      this.JG(m);
    }
    if (q == 1) {
      var n = new fd(_.E.c, !0);
      n.data = { R: _.Y.s0, kO: "soptions", K: m.gQ[m.Zy[0]].v };
      this.AS.k(n);
    }
  };
  L.ct.prototype.oo = function (j, q, m, n, G) {
    if (j == null) return;
    this.bi(j);
    var W = j.I.sb(G.x, G.y);
    W = L.YE.BU(j, W, m, [!0, null, !1]);
    W.x = Math.round(W.x);
    W.y = Math.round(W.y);
    this.yN = W;
    j.gQ.unshift(L.ct.HX());
    j.Zy = [0];
    L.ct.As(j.gQ, 0, [W.x, W.y, W.x + 20, W.y + 20]);
    j._F = !0;
  };
  L.ct.prototype.C3 = function (j, q, m, n, G) {
    if (this.RB == null) return;
    var W = j.I.sb(G.x, G.y),
      k = this.yN;
    W = L.YE.BU(j, W, m, [!0, null, !1]);
    var T = L.jy.ci(k, W, n, !0, this.On);
    k = T[0];
    W = T[1];
    var b = [k.x, k.y, W.x, W.y];
    L.ct.agN(b);
    L.ct.As(j.gQ, 0, b);
    j._F = !0;
  };
  L.ct.prototype.H_ = function (j, q, m, n, G) {
    this.JG(j);
    this.yN = null;
  };
  L.ct.prototype.bi = function (j) {
    this.RB = JSON.stringify(j.gQ);
    this.ayX = JSON.stringify(j.Zy);
  };
  L.ct.prototype.JG = function (j) {
    var q = JSON.stringify(j.gQ);
    if (q != this.RB) {
      var m = new eN(this.name, this);
      m.data = { eK: this.RB, Ap: q, aC1: this.ayX, aop: JSON.stringify(j.Zy) };
      j.Du(m);
    }
    this.RB = null;
  };
  L.ct.prototype.W6 = function (j, q) {
    q.gQ = JSON.parse(j.eK);
    q.Zy = JSON.parse(j.aC1);
    q._F = !0;
  };
  L.ct.prototype.km = function (j, q) {
    q.gQ = JSON.parse(j.Ap);
    q.Zy = JSON.parse(j.aop);
    q._F = !0;
  };
  L.ct.prototype.oa = function (j, q) {
    return q != null && q.Zy.length != 0 && (j == gn.gv || j == gn.N7);
  };
  L.ct.prototype.uY = function (j, q, m, n) {
    if (j == null) return;
    if (n.M(gn.gv) || n.M(gn.N7)) this.BT({ R: "delete" }, q, j, n, m);
    var G = n.m2();
    if (G.x != 0 || G.y != 0) {
      this.bi(j);
      L.ct.qz(j, G);
      this.JG(j);
    }
  };
  L.ct.prototype.uS = function (j, q, m, n, G) {
    this.On = j.Z5;
  };
  L.ct.auQ = function (j, q, m, n) {
    var G = new ea(-q.x, -q.y),
      W = q.r / m.r,
      k = q.$ / m.$,
      T = [0, 0, q.r, q.$];
    for (var y = 0; y < j.length; y++) {
      var b = L.ct.II(j, y);
      if (n) {
        b[0] = Math.round(b[0] * W);
        b[1] = Math.round(b[1] * k);
        b[2] = Math.round(b[2] * W);
        b[3] = Math.round(b[3] * k);
      } else {
        L.ct.$L(b, G);
        L.ct.aIP(b, T);
      }
      if (b[0] >= b[2] || b[1] >= b[3]) {
        j.splice(y, 1);
        y--;
        continue;
      }
      L.ct.As(j, y, b);
    }
  };
  L.ct.qz = function (j, q) {
    var m = j.gQ;
    for (var y = 0; y < j.Zy.length; y++) {
      var n = L.ct.II(m, j.Zy[y]);
      L.ct.$L(n, q);
      L.ct.As(m, j.Zy[y], n);
    }
  };
  L.ct.aIP = function (j, q) {
    if (j[0] < q[0]) j[0] = q[0];
    if (j[1] < q[1]) j[1] = q[1];
    if (q[2] < j[2]) j[2] = q[2];
    if (q[3] < j[3]) j[3] = q[3];
  };
  L.ct.$L = function (j, q) {
    j[0] = Math.round(j[0] + q.x);
    j[2] = Math.round(j[2] + q.x);
    j[1] = Math.round(j[1] + q.y);
    j[3] = Math.round(j[3] + q.y);
  };
  L.ct.As = function (j, y, q) {
    var m = j[y].v.bounds.v;
    m.Left.v = q[0];
    m.Top.v = q[1];
    m.Rght.v = q[2];
    m.Btom.v = q[3];
  };
  L.ct.II = function (j, y) {
    var q = j[y].v.bounds.v;
    return [q.Left.v, q.Top.v, q.Rght.v, q.Btom.v, y];
  };
  L.ct.agN = function (j) {
    if (j[2] < j[0]) {
      var q = j[0];
      j[0] = j[2];
      j[2] = q;
    }
    if (j[2] == j[0]) j[2]++;
    if (j[3] < j[1]) {
      var q = j[1];
      j[1] = j[3];
      j[3] = q;
    }
    if (j[3] == j[1]) j[3]++;
  };
  L.ct.RD = function (j, q) {
    var m = 1e9,
      n = -1e9,
      G = 1e9,
      W = -1e9;
    for (var y = 0; y < q.length; y++) {
      var k = L.ct.II(j, q[y]);
      m = Math.min(m, k[0]);
      G = Math.min(G, k[1]);
      n = Math.max(n, k[2]);
      W = Math.max(W, k[3]);
    }
    return [m, G, n, W];
  };
  L.ct.HX = function () {
    return {
      t: "Objc",
      v: {
        classID: "slice",
        sliceID: { t: "long", v: 0 },
        groupID: { t: "long", v: 0 },
        origin: { t: "enum", v: { ESliceOrigin: "userGenerated" } },
        Type: { t: "enum", v: { ESliceType: "Img" } },
        bounds: {
          t: "Objc",
          v: {
            classID: "Rct1",
            Top: { t: "long", v: 0 },
            Left: { t: "long", v: 0 },
            Btom: { t: "long", v: 0 },
            Rght: { t: "long", v: 0 },
          },
        },
        url: { t: "TEXT", v: "" },
        null: { t: "TEXT", v: "" },
        Msge: { t: "TEXT", v: "" },
        altTag: { t: "TEXT", v: "" },
        cellTextIsHTML: { t: "bool", v: !0 },
        cellText: { t: "TEXT", v: "" },
        horzAlign: { t: "enum", v: { ESliceHorzAlign: "default" } },
        vertAlign: { t: "enum", v: { ESliceVertAlign: "default" } },
        bgColorType: { t: "enum", v: { ESliceBGColorType: "None" } },
        topOutset: { t: "long", v: 0 },
        leftOutset: { t: "long", v: 0 },
        bottomOutset: { t: "long", v: 0 },
        rightOutset: { t: "long", v: 0 },
      },
    };
  };
  L.ev = function () {
    L.ct.call(this, [10, 41], L.IL, "tools/sselect");
    this.yN = null;
    this.HI = null;
    this.AW = null;
    this.zV = null;
    this.av$ = !1;
  };
  L.ev.prototype = new L.ct();
  L.ev.prototype.oo = function (j, q, m, n, G) {
    if (j == null) return;
    var W = j.I.sb(G.x, G.y),
      k = L.ev.a1b(W, 4 / j.I.k3, j.gQ, j.Zy);
    k.pop();
    if (k.length != 0) {
      this.yN = W;
      this.AW = k;
      this.bi(j);
      return;
    }
    var T = j.gQ,
      b = L.ct.g0(T, W);
    if (b == -1) j.Zy = [];
    else {
      var c = j.Zy.indexOf(b);
      if (n.M(gn.X6)) {
        if (c == -1) j.Zy.push(b);
        else j.Zy.splice(c, 1);
      } else {
        j.Zy.sort(function (u, i) {
          return u - i;
        });
        if (c == -1) j.Zy = [b];
        this.yN = W;
        this.bi(j);
        this.HI = L.ct.RD(T, j.Zy);
        this.zV = [];
        for (var y = 0; y < j.Zy.length; y++) this.zV.push(L.ct.II(T, j.Zy[y]));
        if (n.M(gn.O4)) {
          var a = T.slice(0),
            f = j.Zy,
            U = [];
          for (var y = 0; y < f.length; y++) {
            var b = f[y],
              Z = a[b],
              h = T.indexOf(Z);
            U.push(h);
            T.splice(h, 0, B.S(Z));
          }
          j.Zy = U;
        }
      }
    }
    j._F = !0;
  };
  L.ev.prototype.C3 = function (j, q, m, n, G) {
    var W = j.I.sb(G.x, G.y);
    if (this.yN == null) {
      var k = L.ev.a1b(W, 4 / j.I.k3, j.gQ, j.Zy),
        T = k.pop(),
        b =
          k.length == 0
            ? "default"
            : ["ew", "nwse", "ns", "nesw"][T] + "-resize",
        c = new fd(_.E.c, !0);
      c.data = { R: _.Y.t5, $U: b };
      q.k(c);
      return;
    }
    if (!this.av$ && W.Lg(this.yN)) return;
    this.av$ = !0;
    var a = j.gQ,
      k = this.AW;
    if (k) {
      W = L.YE.BU(j, W, m, [!0, null, !1]);
      var f = Math.round(W.x),
        U = Math.round(W.y);
      for (var y = 0; y < k.length; y += 2) {
        var Z = L.ct.II(a, k[y]),
          h = k[y + 1];
        Z[h] = (h & 1) == 0 ? f : U;
        L.ct.agN(Z);
        L.ct.As(a, k[y], Z);
      }
    } else {
      var u = W.mN(this.yN),
        i = this.HI.slice(0);
      L.ct.$L(i, u);
      var x = new hk(i[0], i[1], i[2] - i[0], i[3] - i[1]),
        X = L.YE.xO(j, x, m, [!0, null, !1], !0);
      L.YE.HJ(j, x, X);
      u.x += X[0];
      u.y += X[1];
      for (var y = 0; y < j.Zy.length; y++) L.ct.As(a, j.Zy[y], this.zV[y]);
      L.ct.qz(j, u);
    }
    j._F = !0;
  };
  L.ev.prototype.H_ = function (j, q, m, n, G) {
    if (this.yN == null) return;
    this.JG(j);
    j.W.x$ = null;
    j._F = !0;
    this.yN = null;
    this.AW = null;
    this.zV = null;
    this.av$ = !1;
  };
  L.ev.a1b = function (j, q, m, n) {
    var G = j.x,
      W = j.y,
      k = [],
      T = -1,
      b = [];
    for (var y = 0; y < n.length; y++) {
      var c = n[y],
        a = L.ct.II(m, c),
        f = a[0],
        U = a[1],
        Z = a[2],
        h = a[3];
      if (G < f - q || Z + q < G || W < U - q || h + q < W) continue;
      var u = [G < f + q, W < U + q, Z - q < G, h - q < W],
        i = -1;
      for (var x = 0; x < 4; x++) {
        if (u[x] && u[(x + 1) & 3]) i = 1 + 2 * (x & 1);
        if (u[x]) k.push(c, x);
      }
      if (i == -1) {
        if (u[0] || u[2]) i = 0;
        if (u[1] || u[3]) i = 2;
      }
      if (i != -1) {
        T = i;
        b.push(c);
      }
    }
    var X = k.length;
    for (var y = 0; y < X; y += 2) {
      var c = k[y],
        $ = k[y + 1],
        H = L.ct.II(m, c)[$];
      for (var x = 0; x < n.length; x++) {
        var C = n[x];
        if (b.indexOf(C) != -1) continue;
        var a = L.ct.II(m, C);
        if (a[$ & 1] == H) k.push(C, $ & 1);
        if (a[2 + ($ & 1)] == H) k.push(C, 2 + ($ & 1));
      }
    }
    k.push(T);
    return k;
  };
  L.Zm = function (j, q, m) {
    L.ju.call(this, j, q, m);
    this.aA = null;
    this.a6w = null;
    this.Vu = null;
    this.YX = null;
    this.l2 = null;
    this.mM = null;
    this.JD = null;
    this.Kg = [];
  };
  L.Zm.prototype = new L.ju();
  L.Zm.prototype.bx = function () {
    return !0;
  };
  L.Zm.$m = function (j) {
    if (j == null) return !1;
    if (j.J.length != 1) return !1;
    var q = j.U[j.J[0]];
    return q.add.SoLd || j.Ph(!1);
  };
  L.Zm.prototype.xM = function (j, q) {
    return L.Zm.$m(j);
  };
  L.Zm.prototype.oa = function (j, q) {
    return j == gn.gv || j == gn.N7;
  };
  L.Zm.prototype.enable = function (j, q, m, n, G, W, k) {
    this.a6w = W.sK;
    var T = W.sK,
      b,
      h = null;
    if (T) {
      var c = j.U[T.v];
      if (c.add.SoLd.filterFX != null) {
        var a = c.add.SoLd.filterFX.v.filterFXList.v;
        if (a[T.index]) b = B.S(a[T.index].v.Fltr.v);
      }
    }
    var c = j.U[j.J[0]],
      f = c.buffer,
      U = c.H,
      Z = c.add.SoLd;
    if (Z) {
      var u = Z.nonAffineTransform.v;
      h = [];
      for (var y = 0; y < 4; y++) h.push(u[y * 2].v, u[y * 2 + 1].v);
      if (b == null) this.ZS("edit", q);
      var i = c.xE(j);
      f = i.buffer;
      U = i.H;
    }
    this.YX = { buffer: f.slice(0), H: U.P(), tF: h };
    this.ao(b, j, q, W.a5A);
    this.OL(q);
    var x = new fd(_.E.c, !0);
    x.data = { R: _.Y.t5, $U: "default" };
    q.k(x);
  };
  L.Zm.prototype.OL = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = { R: _.Y.vv, l: this.id, rw: this.l2 };
    j.k(q);
  };
  L.Zm.prototype.disable = function (j, q, m, n) {
    if (this.mM) this._A(j, q, !0);
  };
  L.Zm.prototype.ZS = function (j, q) {
    var m = new fd(_.E.w, !0);
    m.l = L.b_;
    m.data = { R: j, sK: this.a6w, aA: this.aA, YF: this.Vu };
    q.k(m);
  };
  L.Zm.prototype._A = function (j, q, m) {
    this.ZS("confirm", q);
    this.escape(j, q, m);
  };
  L.Zm.prototype.iO = function (j, q, m) {
    this.ZS("cancel", q);
    this.escape(j, q, m);
  };
  L.aU = function (j, q, m) {
    L.Zm.call(this, [10, 46], L.Bb, "tools/transform");
    this.aA = "rigidTransform";
    this.l2 = [1, 1, 2, !0];
  };
  L.aU.prototype = new L.Zm();
  L.aU.prototype.ao = function (j, q, m) {
    this.Vu = j ? j : L.aU.Pm(this.YX, this.l2);
    this.mM = L.aU.re(this.Vu, this.l2);
    this.Yu();
    this.t7(q);
    if (j == null) this.ip(m);
  };
  L.aU.prototype.Yu = function (j) {
    var q = this.mM;
    this.Kg = [];
    for (var y = 0; y < q.length; y++) {
      var m = q[y];
      for (var n = 0; n < m.J.length; n++) this.Kg.push([y, m.J[y]]);
      m.eg = B.Hz.afC(m);
      if (j) B.Hz.aDz(m);
    }
  };
  L.aU.prototype.uS = function (j, q, m, n) {
    if (j.mu == "commit") this._A(m, q, !0);
    else if (j.mu == "cancel") this.iO(m, q, !0);
    else if (j.mu == "prm") {
      var G = !1;
      for (var y = 0; y < 3; y++) if (this.l2[y] != j.rw[y]) G = !0;
      this.l2 = j.rw;
      if (G) {
        this.Vu = L.aU.Pm(this.YX, this.l2, this.Vu);
        this.mM = L.aU.re(this.Vu, this.l2);
        this.Yu(!0);
        this.ip(q);
      }
      this.t7(m);
    } else if (j.mu == "moveDepth") {
      var W = this.mM;
      for (var k = 0; k < W.length; k++) {
        var T = W[k];
        for (var y = 0; y < T.J.length; y++) {
          var b = T.J[y];
          T.Q$[b] += j.aIo ? 1 : -1;
        }
      }
      this.ip(q);
    }
  };
  L.aU.prototype.uY = function (j, q, m, n) {
    var G = n.m2();
    if (n.M(gn.FP)) this._A(j, q, !0);
    else if (n.M(gn.k9)) this.iO(j, q, !0);
    else if (n.M(gn.gv) || n.M(gn.N7)) {
      var W = this.mM;
      for (var k = 0; k < W.length; k++) {
        var T = W[k];
        T.J.sort(function (a, f) {
          return f - a;
        });
        for (var y = 0; y < T.J.length; y++) {
          var b = T.J[y],
            c = b * 2;
          T.Q$.splice(b, 1);
          T.Hu.splice(b, 1);
          T.$t.splice(b, 1);
          T.Gz.splice(b, 1);
          T.nz.splice(c, 2);
          T.D_.splice(c, 2);
        }
        T.J = [];
        if (T.Gz.length == 0) {
          T.F_ = T.L7.slice(0);
          T.dE = T.L7.slice(0);
        }
      }
      this.Yu(!0);
      this.ip(q);
      this.t7(j);
    } else if (G.x != 0 || G.y != 0) {
      this.axc(j, G.x, G.y, q);
      this.i0 = null;
    }
  };
  L.aU.prototype.escape = function (j, q, m) {
    j.W.cT = null;
    j.W.Ye = [];
    j.W.q5 = [];
    j._F = !0;
    this.mM = null;
    var n = new fd(_.E.c, !0);
    n.data = { R: _.Y.xQ };
    if (m) q.k(n);
  };
  L.aU.prototype.oo = function (j, q, m, n, G) {
    var W = j.I.sb(G.x, G.y),
      k = W.x,
      T = W.y,
      b = this.mM,
      c = null,
      a = [0, 2, 4, 1.2, 1.2, 1.2],
      f = -1,
      U = L.vp(j, G);
    for (var y = 0; y < b.length; y++) {
      var Z = b[y],
        h = B.b.wB(Z.D_, k, T, U);
      if (h != -1) c = [y, h];
      if (f == -1 && B.Hz.a0O.as$(Z.dE, Z.Lv, k, T)) f = y;
    }
    if (c == null && f != -1) {
      var Z = b[f];
      L.aU.aFc(Z, k, T, k, T, 0);
      c = [f, Z.Gz.length - 1];
      Z.eg = B.Hz.afC(Z);
    }
    this.JD = W;
    if (c) {
      var u = b[c[0]].J.indexOf(c[1]) != -1;
      if (n.M(gn.X6) && !u) {
        b[c[0]].J.push(c[1]);
        this.Kg.push(c);
      } else if (!u) {
        b[c[0]].J = [c[1]];
        this.Kg = [c];
      }
    }
    this.t7(j);
  };
  L.aU.aFc = function (j, q, m, n, G, W) {
    var k = B.b.wB(j.dE, q, m);
    j.Gz.push(k);
    j.D_.push(n, G);
    j.nz.push(j.dE[k * 2] - q, j.dE[k * 2 + 1] - m);
    j.$t.push(0);
    j.Hu.push(!1);
    j.Q$.push(W);
  };
  L.aU.prototype.C3 = function (j, q, m, n, G) {
    var W = j.I.sb(G.x, G.y),
      k = this.JD;
    if (k) this.axc(j, W.x - k.x, W.y - k.y, q);
  };
  L.aU.prototype.axc = function (j, q, m, n) {
    var G = {},
      W = this.Kg,
      k = this.mM;
    if (this.i0 == null) {
      this.i0 = [];
      for (var y = 0; y < k.length; y++) this.i0.push(k[y].D_.slice(0));
    }
    for (var y = 0; y < W.length; y++) {
      var T = this.Kg[y],
        b = T[0],
        c = k[T[0]],
        a = T[1] * 2;
      c.D_[a + 0] = this.i0[b][a + 0] + q;
      c.D_[a + 1] = this.i0[b][a + 1] + m;
      G[b] = b;
    }
    for (var b in G) B.Hz.aDz(this.mM[G[b]]);
    this.t7(j);
    this.ip(n);
  };
  L.aU.prototype.H_ = function (j, q, m, n, G) {
    this.JD = null;
    this.i0 = null;
  };
  L.aU.prototype.ip = function (j) {
    L.aU.aAA(this.mM, this.l2, this.Vu);
    this.ZS("edit", j);
  };
  L.aU.prototype.t7 = function (j) {
    var q = this.mM,
      m = this.Vu;
    j.W.cT = { L: [], RC: [] };
    j.W.Ye = [];
    j.W.q5 = [];
    for (var y = 0; y < q.length; y++) {
      var n = q[y];
      for (var G = 0; G < n.D_.length; G += 2) {
        var W = j.W.q5;
        if (n.J.indexOf(G >>> 1) != -1) W = j.W.Ye;
        W.push(n.D_[G], n.D_[G + 1]);
      }
      if (this.l2[3]) B.b.concat(j.W.cT, B.b.aLs(n.dE, n.Lv));
    }
    j._F = !0;
  };
  L.aU.Pm = function (j, q, m) {
    var n = j.buffer,
      G = j.H,
      W = j.tF,
      k = k0.i4("rigidTransform");
    if (W)
      for (var y = 0; y < 4; y++) {
        k["PuX" + y].v = W[y * 2];
        k["PuY" + y].v = W[y * 2 + 1];
      }
    var T = k.puppetShapeList.v,
      b = B.Hz.abi(n, G.r, G.$, q[1], q[2]),
      c = [];
    for (var a = 0; a < b.length; a++) {
      var f = {
        classID: "puppetShape",
        rigidType: { t: "bool", v: !0 },
        VrsM: { t: "long", v: 1 },
        VrsN: { t: "long", v: 0 },
        originalVertexArray: { t: "tdta", v: [] },
        deformedVertexArray: { t: "tdta", v: [] },
        indexArray: { t: "tdta", v: [] },
        pinOffsets: { t: "VlLs", v: [] },
        posFinalPins: { t: "VlLs", v: [] },
        pinVertexIndices: { t: "VlLs", v: [] },
        PinP: { t: "VlLs", v: [] },
        PnRt: { t: "VlLs", v: [] },
        PnOv: { t: "VlLs", v: [] },
        PnDp: { t: "VlLs", v: [] },
        meshQuality: { t: "long", v: 2 },
        meshExpansion: { t: "long", v: 2 },
        meshRigidity: { t: "long", v: 2 },
        imageResolution: { t: "doub", v: 72 },
        selectedPin: { t: "VlLs", v: [] },
      };
      f.meshBoundaryPath = {
        t: "Objc",
        v: {
          classID: "pathClass",
          pathComponents: {
            t: "VlLs",
            v: [
              {
                t: "Objc",
                v: {
                  classID: "PaCm",
                  shapeOperation: { t: "enum", v: { shapeOperation: "xor" } },
                  SbpL: {
                    t: "VlLs",
                    v: [
                      {
                        t: "Objc",
                        v: {
                          classID: "Sbpl",
                          Clsp: { t: "bool", v: !0 },
                          Pts: { t: "VlLs", v: [] },
                        },
                      },
                    ],
                  },
                },
              },
            ],
          },
        },
      };
      var U = b[a];
      T.push({ t: "Objc", v: f });
      var Z = U.L7.slice(0);
      B.b.u(Z, new k$(1, 0, 0, 1, G.x, G.y), Z);
      var h = U.Lv;
      for (var y = 0; y < h.length; y += 3) {
        var u = h[y + 1];
        h[y + 1] = h[y + 2];
        h[y + 2] = u;
      }
      c.push({
        Lv: h,
        L7: Z,
        F_: Z,
        dE: Z,
        Gz: [],
        nz: [],
        D_: [],
        eg: null,
        J: [],
        $t: [],
        Hu: [],
        Q$: [],
      });
    }
    if (m) {
      var i = L.aU.re(m, []),
        x = c[0];
      for (var y = 0; y < i.length; y++) {
        var X = i[y];
        for (var $ = 0; $ < X.J.length; $++)
          x.J.push((x.D_.length >>> 1) + X.J[$]);
        for (var $ = 0; $ < X.Gz.length; $++) {
          var H = X.Gz[$] * 2,
            C = X.L7[H] - X.nz[$ * 2],
            l = X.L7[H + 1] - X.nz[$ * 2 + 1];
          L.aU.aFc(x, C, l, X.D_[$ * 2], X.D_[$ * 2 + 1], X.Q$[$]);
        }
      }
    }
    L.aU.aAA(c, q, k);
    return k;
  };
  L.aU.re = function (j, q) {
    var m = L.Dq.Kt,
      n = j.puppetShapeList.v,
      G = [];
    for (var W = 0; W < n.length; W++) {
      var k = n[W].v;
      q[0] = k.meshRigidity.v - 1;
      q[1] = k.meshQuality.v - 1;
      q[2] = k.meshExpansion.v;
      var T = k.pinVertexIndices.v.length,
        b = k.meshBoundaryPath.v.pathComponents.v;
      if (b.length != 0) {
        var c = b[0].v.SbpL.v[0].v.Pts;
        c.v = [];
      }
      var a = new Uint32Array(new Uint8Array(k.indexArray.v).buffer),
        f = new Float32Array(new Uint8Array(k.originalVertexArray.v).buffer),
        U = new Float32Array(new Uint8Array(k.deformedVertexArray.v).buffer),
        Z = [],
        h = [],
        u = [];
      for (var y = 0; y < a.length; y++) Z.push(a[y]);
      for (var y = 0; y < f.length; y++) {
        h.push(f[y]);
        u.push(U[y]);
      }
      var i = m(k.pinVertexIndices),
        x = m(k.pinOffsets),
        X = m(k.posFinalPins),
        $ = m(k.PnRt),
        H = m(k.PnOv),
        C = m(k.PnDp),
        l = m(k.selectedPin);
      G.push({
        Lv: Z,
        L7: h,
        F_: u.slice(0),
        dE: u,
        Gz: i,
        nz: x,
        D_: X,
        eg: null,
        $t: $,
        Hu: H,
        Q$: C,
        J: l,
      });
    }
    return G;
  };
  L.aU.aAA = function (j, q, m) {
    function n(U, Z) {
      var h = [];
      for (var y = 0; y < U.length; y++) h.push({ t: Z, v: U[y] });
      return h;
    }
    function G(U, Z, h) {
      var u = new (h ? Uint32Array : Float32Array)(U),
        i = new Uint8Array(u.buffer);
      for (var y = 0; y < i.length; y++) Z[y] = i[y];
    }
    var W = m.puppetShapeList.v;
    for (var k = 0; k < W.length; k++) {
      var T = j[k],
        b = W[k].v;
      b.meshRigidity.v = q[0] + 1;
      b.meshQuality.v = q[1] + 1;
      b.meshExpansion.v = q[2];
      G(T.Lv, b.indexArray.v, !0);
      G(T.L7, b.originalVertexArray.v);
      G(T.dE, b.deformedVertexArray.v);
      var c = [];
      for (var y = 0; y < T.Gz.length; y++) {
        var a = T.Gz[y] * 2,
          f = y * 2;
        c[f] = T.L7[a] - T.nz[f];
        c[f + 1] = T.L7[a + 1] - T.nz[f + 1];
      }
      b.PinP.v = n(c, "doub");
      b.pinVertexIndices.v = n(T.Gz, "long");
      b.pinOffsets.v = n(T.nz, "doub");
      b.posFinalPins.v = n(T.D_, "doub");
      b.PnRt.v = n(T.$t, "long");
      b.PnOv.v = n(T.Hu, "bool");
      b.PnDp.v = n(T.Q$, "doub");
      b.selectedPin.v = n(T.J, "long");
    }
  };
  L.B3 = function (j, q, m) {
    L.Zm.call(this, "Perspective Warp", L.v7, "tools/transform");
    this.aA = "perspectiveWarpTransform";
    this.J1 = -1;
    this.z_ = -1;
    this.nT = !1;
    this.aA4 = !1;
  };
  L.B3.prototype = new L.Zm();
  L.B3.prototype.ao = function (j, q, m) {
    this.Vu = j ? j : k0.i4(this.aA);
    this.mM = B.m8.N2(this.Vu);
    if (this.YX.tF) {
      this.mM.tF = this.YX.tF;
      B.m8.MM(this.mM, this.Vu);
    }
    this.l2 = this.mM.io;
    this.OL(m);
    this.t7(q);
  };
  L.B3.prototype.oo = function (j, q, m, n, G) {
    var W = j.I.sb(G.x, G.y),
      k = this.mM,
      T = k.io,
      b = T == 0 ? k.EO : k.D_;
    this.nT = !0;
    var c = L.vp(j, G);
    this.J1 = B.b.wB(b, W.x, W.y, c);
    if (T == 0 && this.J1 == -1) {
      var a = b.length >>> 1,
        f = -((j.r + j.$) >>> 4);
      k.Os.push(a, a + 1, a + 2, a + 3);
      b.push(W.x, W.y, W.x + f, W.y, W.x + f, W.y + f, W.x, W.y + f);
      k.D_ = b.slice(0);
      this.aA4 = !0;
      this.J1 = a;
      B.m8.MM(k, this.Vu);
      this.t7(j);
    }
    if (this.J1 != -1) this.z_ = this.J1;
  };
  L.B3.prototype.C3 = function (j, q, m, n, G) {
    var W = j.I.sb(G.x, G.y),
      k = this.mM,
      T = k.io,
      b = T == 0 ? k.EO : k.D_,
      c = k.Os;
    if (this.nT) {
      var a = this.J1,
        f = b.slice(0);
      f[a * 2] = W.x;
      f[a * 2 + 1] = W.y;
      for (var y = 0; y < c.length; y += 4) {
        var U = [];
        for (var Z = 0; Z < 4; Z++)
          U.push(f[2 * c[y + Z]], f[2 * c[y + Z] + 1]);
        if (!bn.Zx(U)) return;
      }
      if (T == 0) {
        k.EO = f;
        if (this.aA4) k.D_ = f.slice(0);
      } else {
        k.D_ = f;
        this.aA4 = !1;
      }
      B.m8.MM(k, this.Vu);
      if (T == 1) this.ZS("edit", q);
    } else {
      var h = L.vp(j, G);
      this.J1 = B.b.wB(b, W.x, W.y, h);
    }
    this.t7(j);
  };
  L.B3.prototype.H_ = function (j, q, m, n, G) {
    var W = j.I.sb(G.x, G.y),
      k = this.mM,
      T = k.io,
      b = T == 0 ? k.EO : k.D_,
      c = k.Os,
      a = this.J1;
    this.nT = !1;
    if (T == 0 && a != -1) {
      var f = L.vp(j, G),
        U = B.b.wB(b, W.x, W.y, f, a);
      if (U != -1) {
        if (U < a) {
          var Z = a;
          a = U;
          U = Z;
        }
        var h = c.slice(0),
          u = b.slice(0);
        u.splice(U * 2, 2);
        for (var y = 0; y < h.length; y++) {
          if (h[y] == U) h[y] = a;
          else if (h[y] > U) h[y]--;
        }
        for (var y = 0; y < h.length; y += 4) {
          for (var i = 0; i < 4; i++)
            for (var x = i + 1; x < 4; x++) if (h[y + i] == h[y + x]) return;
        }
        k.Os = h;
        if (T == 0) k.EO = u;
        else k.D_ = u;
        B.m8.MM(k, this.Vu);
        this.t7(j);
      }
    }
  };
  L.B3.prototype.uY = function (j, q, m, n, G) {
    var W = n.m2(),
      k = this.z_,
      T = this.mM,
      b = T.io;
    if (n.M(gn.FP)) this._A(j, q, !0);
    else if (n.M(gn.k9)) this.iO(j, q, !0);
    else if (n.M(gn.gv) || n.M(gn.N7) || G)
      if (b == 0 && k != -1) {
        var c = T.Os;
        for (var y = 0; y < c.length; y += 4) {
          if (c[y] == k || c[y + 1] == k || c[y + 2] == k || c[y + 3] == k) {
            c.splice(y, 4);
            y -= 4;
          }
        }
        var a = [];
        for (var y = 0; y < T.EO.length; y++) a.push(y);
        for (var y = (T.EO.length >>> 1) - 1; y >= 0; y--) {
          if (c.indexOf(y) == -1) {
            a.splice(y, 1);
            T.EO.splice(y * 2, 2);
            T.D_.splice(y * 2, 2);
          }
        }
        for (var y = 0; y < c.length; y++) c[y] = a.indexOf(c[y]);
        B.m8.MM(T, this.Vu);
        this.z_ = -1;
        this.t7(j);
      }
  };
  L.B3.prototype.uS = function (j, q, m, n) {
    if (j.mu == "commit") this._A(m, q, !0);
    else if (j.mu == "cancel") this.iO(m, q, !0);
    else if (j.mu == "delete") this.uY(m, q, null, n, !0);
    else {
      this.mM.io = j.rw;
      B.m8.MM(this.mM, this.Vu);
      this.t7(m);
      this.ZS("edit", q);
    }
  };
  L.B3.prototype.escape = function (j, q, m) {
    j.W.$p = null;
    j.W.Ye = [];
    j.W.q5 = [];
    j._F = !0;
    this.mM = null;
    var n = new fd(_.E.c, !0);
    n.data = { R: _.Y.xQ };
    if (m) q.k(n);
  };
  L.B3.prototype.t7 = function (j) {
    var q = this.mM,
      m = this.J1,
      n = this.z_,
      G = q.io == 0 ? q.EO : q.D_,
      W = q.Os;
    j.W.q5 = G.slice(0);
    j.W.Ye = [];
    if (n > m) {
      var k = m;
      m = n;
      n = k;
    }
    if (m != -1) {
      j.W.Ye.push(G[m * 2], G[m * 2 + 1]);
      j.W.q5.splice(m * 2, 2);
    }
    if (n != -1 && n != m) {
      j.W.Ye.push(G[n * 2], G[n * 2 + 1]);
      j.W.q5.splice(n * 2, 2);
    }
    j.W.$p = { L: [], RC: [] };
    for (var y = 0; y < W.length; y += 4) {
      j.W.$p.RC.push("M", "L", "L", "L", "Z");
      for (var T = 0; T < 4; T++)
        j.W.$p.L.push(G[2 * W[y + T]], G[2 * W[y + T] + 1]);
    }
    j._F = !0;
  };
  L.j6 = function () {
    L.Zm.call(this, "Blur Gallery", L.Oi, "tools/ruler");
    this.aA = "blurbTransform";
    this.l2 = [0, [], null];
    this.J1 = -1;
  };
  L.j6.prototype = new L.Zm();
  L.j6.prototype.ao = function (j, q, m, n) {
    this.mM = {};
    var G = j == null;
    if (j == null) {
      j = k0.i4(this.aA);
      B.iA.a0B(j, n, q.r / 2, q.$ / 2);
      var W = [!1, !1, !1, !1, !1, !1];
      W[n] = !0;
      B.iA.ayr(j, W);
    }
    this.Vu = j;
    this.l2[0] = B.iA.adi(j);
    this.l2[1] = B.iA.ath(j);
    this.t7(q);
    if (G) this.ZS("edit", m);
  };
  L.j6.prototype.uY = function (j, q, m, n) {
    if (n.M(gn.FP)) this._A(j, q, !0);
    else if (n.M(gn.k9)) this.iO(j, q, !0);
    else if (n.M(gn.gv) || n.M(gn.N7)) {
      var G = this.J1;
      if (G == -1) return;
      var W = this.l2[0],
        k = B.iA.Qx(this.Vu)[0],
        T = k[W];
      if (W == 0) T.splice(G, 1);
      if (W == 1 || W == 5) T.splice(Math.floor(G / 6), 1);
      if (W == 3) T.splice(Math.floor(G / 5), 1);
      if (W == 4) T.splice(Math.floor(G / 4), 1);
      B.iA.k_(k, this.Vu);
      B.iA.Ok(this.Vu, W);
      this.J1 = -1;
      this.t7(j);
      this.ZS("edit", q);
    }
  };
  L.j6.prototype.uS = function (j, q, m, n) {
    if (j.mu == "commit") this._A(m, q, !0);
    else if (j.mu == "cancel") this.iO(m, q, !0);
    else {
      this.l2 = j.rw;
      var G = this.l2[0],
        W = this.J1;
      B.iA.ayr(this.Vu, this.l2[1]);
      if (this.l2[2]) {
        var k = B.iA.Qx(this.Vu)[0],
          T = k[G];
        if (G == 0) T[W][2] = this.l2[2][0];
        if (G == 1 || G == 5) T[Math.floor(W / 6)][14] = this.l2[2][0];
        if (G == 3) T[Math.floor(W / 5)][10] = this.l2[2][0];
        if (G == 4) {
          T[0][4] = this.l2[2][0] / 100;
          var b = (W & 3) < 2 ? 0 : 5,
            c = T[Math.floor(W / 4)],
            a = c[b],
            f = c[b + 1],
            U = c[b + 2] - a,
            Z = c[b + 3] - f,
            h = Math.sqrt(U * U + Z * Z),
            u = this.l2[2][1];
          if (h == 0) {
            c[b + 2] = a + u;
            c[b + 3] = f;
          } else {
            c[b + 2] = a + (u * U) / h;
            c[b + 3] = f + (u * Z) / h;
          }
        }
        B.iA.k_(k, this.Vu);
      }
      B.iA.Ok(this.Vu, G);
      this.t7(m);
      this.ZS("edit", q);
    }
  };
  L.j6.prototype.escape = function (j, q, m) {
    j.W.w2 = null;
    j.W.$p = null;
    j.W.v6 = null;
    j.W.Ye = [];
    j.W.q5 = [];
    j._F = !0;
    this.mM = null;
    var n = new fd(_.E.c, !0);
    n.data = { R: _.Y.xQ };
    if (m) q.k(n);
  };
  L.j6.prototype.t7 = function (j) {
    var q = B.iA.Qx(this.Vu)[0];
    j.W.Ye = [];
    j.W.q5 = [];
    var m = (j.W.w2 = { L: [], RC: [] }),
      n = (j.W.$p = { L: [], RC: [] }),
      G = (j.W.v6 = { L: [], RC: [] });
    this.Kg = [];
    this.adL = [];
    var W = this.l2[0],
      k = this.J1,
      T = q[W];
    for (var y = 0; y < T.length; y++) {
      var b = T[y];
      if (W == 0) {
        if (y == k) {
          j.W.Ye.push(b[0], b[1]);
          this.l2[2] = [b[2]];
        } else j.W.q5.push(b[0], b[1]);
        this.adL.push([]);
        this.Kg.push(b[0], b[1]);
      } else if (W == 1 || W == 5) {
        var c = B.iA.ahS(b);
        c.BR();
        var a = [0, -1, 1, 0, 0, 1, -1, 0, 0, 0, 1 - b[10], 0];
        B.b.u(a, c, a);
        for (var f = 0; f < a.length; f += 2) {
          if (k == y * 6 + (f >>> 1)) {
            j.W.Ye.push(a[f], a[f + 1]);
            this.l2[2] = [b[14]];
          } else j.W.q5.push(a[f], a[f + 1]);
          this.Kg.push(a[f], a[f + 1]);
        }
        var U = B.b.bh(B.z.cn.SQ(-1, -1, 2, 2));
        B.b.concat(m, U, c);
      } else if (W == 3) {
        var Z = b[0],
          h = b[1],
          u = b[2] - b[0],
          i = b[3] - b[1],
          x = Math.sqrt(u * u + i * i),
          X = (i * 1e4) / x,
          $ = (-u * 1e4) / x;
        for (var f = 0; f < 10; f += 2) {
          if (k == y * 5 + (f >>> 1)) {
            j.W.Ye.push(b[f], b[f + 1]);
            this.l2[2] = [b[10]];
          } else j.W.q5.push(b[f], b[f + 1]);
          this.Kg.push(b[f], b[f + 1]);
          if (f == 0) continue;
          if (Math.floor(k / 5) != y) continue;
          m.L.push(b[f] - X, b[f + 1] - $, b[f] + X, b[f + 1] + $);
          m.RC.push("M", "L");
        }
      } else if (W == 4) {
        G.L.push(b[0], b[1], b[5], b[6]);
        G.RC.push("M", "L");
        for (var f = 0; f < 2; f++) {
          var H = f * 5,
            Z = b[H],
            h = b[H + 1],
            C = b[H + 2],
            l = b[H + 3],
            u = C - Z,
            i = l - h,
            v = Math.sqrt(u * u + i * i),
            K = 25;
          if (v != 0) {
            u /= v;
            i /= v;
          }
          if ((k & 14) == y * 4 + f * 2) {
            j.W.Ye.push(Z, h, C, l);
            this.l2[2] = [b[4] * 100, v];
          } else j.W.q5.push(Z, h, C, l);
          n.L.push(Z, h, C, l);
          n.RC.push("M", "L");
          this.Kg.push(Z, h, C, l);
          if (v == 0) continue;
          var S = -u * K * 2,
            o = -i * K * 2;
          n.L.push(C, l, C + (-i * K + S), l + (u * K + o));
          n.L.push(C, l, C + (i * K + S), l + (-u * K + o));
          n.RC.push("M", "L", "M", "L", "M", "L");
        }
      }
    }
    j._F = !0;
  };
  L.j6.prototype.C3 = function (j, q, m, n, G) {
    function W(F, y, g) {
      var l = F[y] - F[g],
        K = F[y + 1] - F[g + 1];
      return Math.sqrt(l * l + K * K);
    }
    var k = j.I.sb(G.x, G.y),
      T = B.b.wB(this.Kg, k.x, k.y, 6 / j.I.k3);
    if (this.JD) {
      var b = this.J1,
        c = this.l2,
        a = c[0],
        f = B.iA.Qx(this.Vu)[0],
        U = f[a];
      if (a == 0) {
        U[b][0] = k.x;
        U[b][1] = k.y;
      }
      if (a == 1 || a == 5) {
        var Z = Math.floor(b / 6),
          h = b - Z * 6,
          u = U[Z],
          i = W(u, 0, 2) / 2,
          x = W(u, 2, 4) / 2,
          X = u[8],
          $ = u[9],
          H = Math.atan2(-u[3] + u[1], u[2] - u[0]),
          C = u[10],
          l = k.x - X,
          K = k.y - $,
          S = Math.sqrt(l * l + K * K);
        if (h < 4) {
          H = Math.atan2(-K, l) + ((-1 + h) * Math.PI) / 2;
          if (h == 0 || h == 2) x = S;
          else i = S;
        }
        if (h == 4) {
          X = k.x;
          $ = k.y;
        }
        if (h == 5) C = Math.max(0, Math.min(1, 1 - S / i));
        var o = new k$();
        o.scale(i, x);
        o.rotate(H);
        o.translate(X, $);
        var V = (U[Z] = [-1, -1, 1, -1, 1, 1, -1, 1, 0, 0]);
        B.b.u(V, o, V);
        V.push(C, C, C, C, u[14]);
      }
      if (a == 3) {
        var Z = Math.floor(b / 5),
          h = b - Z * 5,
          u = U[Z],
          P = u[0],
          z = u[1],
          E = W(u, 0, 2),
          A = W(u, 0, 4),
          N = W(u, 0, 6),
          Q = W(u, 0, 8),
          H = Math.atan2(-u[3] + u[1], u[2] - u[0]),
          l = k.x - P,
          K = k.y - z,
          S = Math.sqrt(l * l + K * K);
        if (h == 0) {
          P = k.x;
          z = k.y;
        }
        if (h == 1) E = Math.max(N * 1.1, S);
        if (h == 2) A = Math.max(Q * 1.1, S);
        if (h == 3) N = Math.min(E, S);
        if (h == 4) Q = Math.min(A, S);
        if (h == 1) H = Math.atan2(-K, l);
        if (h == 2) H = Math.atan2(K, -l);
        var V = (U[Z] = [0, 0, -E, 0, A, 0, -N, 0, Q, 0]),
          o = new k$();
        o.rotate(H + Math.PI);
        o.translate(P, z);
        B.b.u(V, o, V);
        V.push(u[10]);
      }
      if (a == 4) {
        var Z = Math.floor(b / 4),
          h = b - Z * 4,
          u = U[Z],
          e = h < 2 ? 0 : 5;
        if ((h & 1) == 0) {
          var Y = [u[2] - u[0], u[3] - u[1], u[7] - u[5], u[8] - u[6]],
            d = Math.atan2(-(u[6] - u[1]), u[5] - u[0]);
          u[e] = k.x;
          u[e + 1] = k.y;
          var I = Math.atan2(-(u[6] - u[1]), u[5] - u[0]),
            o = new k$();
          o.rotate(I - d);
          for (var y = 0; y < 2; y++) {
            var O = new ea(Y[y * 2], Y[y * 2 + 1]);
            O = o.uL(O);
            u[y * 5 + 2] = u[y * 5] + O.x;
            u[y * 5 + 3] = u[y * 5 + 1] + O.y;
          }
        } else {
          u[e + 2] = k.x;
          u[e + 3] = k.y;
        }
      }
      B.iA.k_(f, this.Vu);
      B.iA.Ok(this.Vu, a);
      this.t7(j);
    } else {
      var s = "default";
      if (T != -1) s = "pointer";
      var p = new fd(_.E.c, !0);
      p.data = { R: _.Y.t5, $U: s };
      q.k(p);
    }
  };
  L.j6.prototype.oo = function (j, q, m, n, G) {
    var W = this.l2[0],
      k = j.I.sb(G.x, G.y),
      T = k.x,
      b = k.y,
      c = B.b.wB(this.Kg, T, b, 10 / j.I.k3);
    if (c == -1) {
      c = B.iA.a0B(this.Vu, W, T, b);
    }
    this.JD = k;
    this.J1 = c;
    this.t7(j);
  };
  L.j6.prototype.H_ = function (j, q, m, n, G) {
    if (this.JD) {
      this.ZS("edit", q);
      this.OL(q);
    }
    this.JD = null;
  };
  L.hZ = function () {
    L.pI.call(this, [10, 44], L.atR, "tools/oselect");
    this.Jm = "crosshair";
    this.arV = 0;
  };
  L.hZ.prototype = new L.pI();
  L.hZ.prototype.Q7 = function (j, q, m, n) {
    if (Math.random() < 1 / (1 + this.arV)) {
      alert("The cross should be fully inside the object.", 3500);
      this.arV++;
    }
  };
  L.hZ.prototype.dU = function (j, q, m, n) {
    L.C8.DY(j, L.pI._7, this.AS);
    if (!n.qT || !this.pu) return;
    var G = this.Fj(j, m, !1),
      W = G.r,
      k = G.$,
      T = G.x,
      b = G.y,
      c = G.x + W,
      a = G.y + k,
      f = T + W / 2,
      U = b + k / 2,
      Z = L.hZ.azt;
    j.W.cT = {
      L: [
        T,
        b,
        c,
        b,
        c,
        a,
        T,
        a,
        f - W * Z,
        U,
        f + W * Z,
        U,
        f,
        U - k * Z,
        f,
        U + k * Z,
      ],
      RC: "M L L L Z M L M L".split(" "),
    };
    j._F = !0;
  };
  L.hZ.azt = 0.12;
  L.hZ.prototype.IB = function (j, q, m, n) {
    j.W.cT = null;
    j._F = !0;
    this.finish(j, q, m, n);
  };
  L.hZ.prototype.getSelection = function (j, q, m, n) {
    if (this.ou.Lg(this.BE) || !this.pu) return null;
    var G = this.Fj(j, m, !1),
      W = j.U[j.J[0]];
    if (G.jG() || !G.C2(W.H)) return null;
    return L.pI.gD("ObSl", G);
  };
  L.C8 = function () {
    L.tt.call(this, [10, 37], L.eu, "tools/qselect");
    this.Qs = "qselect";
  };
  L.C8.prototype = new L.tt();
  L.C8.prototype.oo = function (j, q, m, n, G) {
    if (j.J.length == 0) {
      alert("Select a layer first.");
      return;
    }
    L.C8.DY(j, L.pI._7, q, !0);
    this.vh(j, m, n, G, 1);
    if (this.ok == null) return;
    this.Am(j);
  };
  L.C8.prototype.C3 = function (j, q, m, n, G) {
    this.BX(j, q, m);
    L.C8.DY(j, L.pI._7, q);
    if (this.Oc) this.UI(j, m, G);
    if (this.ok == null) return;
    if (!G.qT) return;
    var W = this.Df(j, m, n, G);
    if (W != 1) this.Am(j);
  };
  L.C8.DY = function (j, q, m, n) {
    if (j.J.length == 0) return;
    if (j && q.key != L.C8.e2(j)) {
      q.key = L.C8.e2(j);
      var G = j.U[j.J[0]].H.C(),
        k = "Image Analysis ...";
      if (G == 0) return;
      var W = G > 1e6 && n != !0,
        T = new fd(_.E.c, !0);
      T.data = { R: _.Y.gu, r8: k };
      if (W) m.k(T);
      var b = function () {
        var c = L.C8.aC0(j);
        for (var a in c) q[a] = c[a];
        var T = new fd(_.E.c, !0);
        T.data = { R: _.Y.dO, r8: k };
        if (W) m.k(T);
      };
      if (n) b();
      else setTimeout(b, 30);
    }
  };
  L.C8.e2 = function (j) {
    var q = j.J[0],
      m = j.U[q],
      n = m.H,
      G = n.r,
      W = n.$,
      k = G * W,
      T = B.sL(m.buffer, 8);
    return [q, n.x, n.y, G, W, T[0], T[1], T[2], T[3]].join(",");
  };
  L.C8.aC0 = function (j) {
    var q = j.J[0],
      m = j.U[q],
      n = m.H,
      G = n.r,
      W = n.$,
      k = G * W,
      T = B.sL(m.buffer, 8),
      b = Date.now(),
      c = B.j(k);
    c.fill(128);
    var a = B.DV.UY(T, G, W);
    console.log(Date.now() - b);
    var f = {
      key: L.C8.e2(j),
      y9: T,
      H: n.P(),
      GM: G,
      uu: W,
      qY: 12,
      QY: c,
      dL: a,
      h: B.j(k),
      JR: null,
      u5: null,
      Rz: null,
    };
    L.C8.Gs(f, null, j);
    return f;
  };
  L.C8.Gs = function (j, q, m) {
    var n = j.GM,
      G = j.uu,
      W = 0,
      k = 0,
      T = Date.now(),
      b = j.JR != null && B.DV.I2(j.JR.Lv, j.JR.aj, j.QY) == -1;
    W = Date.now() - T;
    T = Date.now();
    if (!b) {
      var c = B.DV.I2(j.dL.Lv, j.dL.aj, j.QY),
        a = 0;
      while (c != -1) {
        var f = [],
          U = [],
          Z = j.dL.Lv;
        for (var h = 0; h < G; h++)
          for (var u = 0; u < n; u++) {
            var y = h * n + u;
            if (Z[y] == c) {
              var i = j.QY[y];
              if (i == 0) f.push(u, h);
              if (i == 255) U.push(u, h);
            }
          }
        var x = m.U[m.J[0]],
          X = B.sL(x.buffer, 8);
        B.DV.UY.Mz(X, n, G, j.dL, f, U);
        c = B.DV.I2(j.dL.Lv, j.dL.aj, j.QY);
        a++;
        if (a >= 10) {
          console.log("too many subdivisions");
          break;
        }
      }
      j.JR = B.DV.hu(j.dL, n, G, j.QY, j.qY);
      j.u5 = B.DV.aGq(j.y9, n, G, j.JR.Lv, j.JR.aj);
      j.Rz = [j.u5[0].slice(0), []];
      k = Date.now() - T;
      T = Date.now();
    }
    var T = Date.now();
    if (q) {
      j.Rz[0].set(j.u5[0]);
      var $ = j.u5[1],
        H = j.Rz[1];
      for (var C = 0; C < $.length; C++) H[C] = $[C].slice(0);
      B.DV.a8J(j.JR.Lv, n, G, j.JR.aj, j.QY, j.h, j.Rz);
    }
  };
  L.gd = function () {
    L.ju.call(this, [10, 50], L.Be, "tools/artb");
    this.ID = null;
    this.awm = !1;
    this.db = null;
    this.rP = !1;
    this.aHc = null;
    this.M2 = 100;
    this.w1 = null;
    this.d5 = 0;
  };
  L.gd.prototype = new L.ju();
  L.gd.prototype.BT = function (j, q, m, n, G) {
    this.D7(m, j.azL, q, j.io);
  };
  L.gd.a8i = function (j, q) {
    var m = j[0],
      n = 0,
      G = 0;
    if (m == 0) G = -1;
    else if (m == 1) n = 1;
    else if (m == 2) G = 1;
    else n = -1;
    return [20 / q.QI, j[1] + (n * 60) / q.QI, j[2] + (G * 60) / q.QI];
  };
  L.gd.prototype.uS = function (j, q, m, n, G) {
    this.ID = j.rw;
    this.d5 = Date.now();
  };
  L.gd.prototype.yc = function (j, q, m, n) {
    if (m.RW != this.id) return;
    if (j == null || j.J.length != 1) {
      this.zE(j);
      return;
    }
    var G = j.J[0],
      W = j.U[G],
      k = W.add.artb;
    if (k == null) {
      this.zE(j);
      return;
    }
    if (this.rP) return;
    if (Date.now() - this.d5 > 50) {
      this.ID = {};
      var T = ["artboardBackgroundType", "Clr"];
      for (var y = 0; y < T.length; y++)
        if (k[T[y]]) this.ID[T[y]] = B.S(k[T[y]]);
      var b = new fd(_.E.c, !0);
      b.data = { R: _.Y.vv, l: this.id, xB: this.ID };
      q.k(b);
    }
    var c = W.Li(),
      a = B.b._c(c).L,
      f = (this.db = new bn(a, !0, !1, !1, !0, !1, 3, !1));
    f.d4(j, m, !1);
    var U = { L: [1, 0], RC: ["M"] };
    for (var y = 1; y < 30; y++) {
      var Z = (Math.PI * 2 * y) / 30;
      U.L.push(Math.cos(Z), Math.sin(Z));
      U.RC.push("L");
    }
    U.RC.push("Z", "M", "L", "M", "L");
    U.L.push(-0.5, 0, 0.5, 0, 0, -0.5, 0, 0.5);
    var h = c.x + c.r / 2,
      u = c.y + c.$ / 2,
      i = this.M2 * 1.1,
      x = (this.aHc = [h, c.y, c.x + c.r, u, h, c.y + c.$, c.x, u]),
      X = [0, -i, i, 0, 0, i, -i, 0],
      $ = j.root.children;
    j.W.EF = [];
    for (var y = 0; y < 4; y++) {
      var H = new ea(x[y * 2] + X[y * 2], x[y * 2 + 1] + X[y * 2 + 1]),
        C = !1;
      for (var l = 0; l < $.length; l++) {
        var W = $[l].v;
        if (W.add.artb == null) continue;
        var c = W.Li();
        if (c.QL(H)) C = !0;
      }
      if (C) {
        x[y * 2] = 1e9;
        continue;
      }
      j.W.EF.push([y, x[y * 2], x[y * 2 + 1]]);
    }
  };
  L.gd.prototype.disable = function (j, q, m, n, G) {
    this.zE(j);
  };
  L.gd.prototype.zE = function (j) {
    if (this.db) {
      this.db.clear(j);
      this.db = null;
      j.W.EF = null;
    }
  };
  L.gd.prototype.oo = function (j, q, m, n, G) {
    this.d5 = Date.now();
    var W = j.I.sb(G.x, G.y),
      k = this.db;
    if (k) {
      var T = new fd(_.E.w),
        b = k.Nz(null, W, j, G);
      if (b < 9) {
        this.rP = k.oo(j, m, n, W, null, !0, G);
        return;
      } else if (k.VG(W)) {
        T.l = L.Lx;
        T.data = { R: "disabAuto" };
        q.k(T);
        var c = new fd(_.E.c);
        c.data = { R: _.Y.UK, l: L.Lx, ay8: !0 };
        q.k(c);
        return;
      } else {
        var a = -1,
          f = j.W.EF;
        for (var y = 0; y < f.length; y++) {
          var U = L.gd.a8i(f[y], j.I);
          if (ea.gw(W, new ea(U[1], U[2])) < U[0]) a = f[y][0];
        }
        if (a != -1) {
          var Z = j.U[j.J[0]].Li(),
            h = Z.P(),
            u = (a == 0 || a == 2 ? Z.$ : Z.r) + this.M2;
          if (a == 0 || a == 3) u = -u;
          if (a == 0 || a == 2) Z.y += u;
          else Z.x += u;
          if (n.M(gn.O4)) {
            var i = new hk(0, 0, j.r, j.$);
            T.l = L.W1;
            T.data = { R: R.iq };
            q.k(T);
            L.YE.kW(
              j,
              j.LP(null, j.J[0], null, !0),
              null,
              Z.x - h.x,
              Z.y - h.y
            );
            j.J = j.J.slice(j.J.length - 1);
            var x = L.xC.jQ(j);
            if (x) {
              var X = j.iw();
              X.data.OM = i;
              X.data.ad = x;
              X.data.jw = j.J;
            }
          } else this.D7(j, Z, q);
          return;
        }
      }
    }
    this.w1 = L.YE.BU(j, W, m);
  };
  L.gd.prototype.D7 = function (j, q, m, n) {
    if (n == null) n = 0;
    var G = j.U.slice(0),
      W = [j.U.length + 1],
      k = j.dj();
    k.tV(
      g$.get([1, 16, 0]) +
        " " +
        (j.add.artd == null ? 1 : j.root.children.length + 1)
    );
    k.add.lsct = hQ.WR;
    k.KP(q);
    if (this.ID) {
      var T = k.add.artb,
        b = this.ID;
      for (var c in b) T[c] = b[c];
    }
    k.hz = "pass";
    k.uZ = 24;
    if (n == 0) {
      if (j.add.artd || q.TM(new hk(0, 0, j.r, j.$)).jG()) G.push(j.to());
      else G.unshift(j.to());
    } else {
      var a = j.LP();
      a.sort(function (u, i) {
        return u - i;
      });
      var f = L.zl.Zb(j, a, G.length - 1, !1, null, !1),
        U = f.pop(),
        Z = f.pop();
      G = f.pop();
      G.splice(j.U.length - a.length, 0, j.to());
    }
    G.push(k);
    var h = new fd(_.E.w);
    h.l = L.W1;
    h.data = { R: R.DH, nR: G, c_: W, ER: [1, 16, 2] };
    m.k(h);
  };
  L.gd.prototype.C3 = function (j, q, m, n, G) {
    var W = j.I.sb(G.x, G.y),
      k = this.db,
      T = this.w1;
    if (k) {
      if (this.rP) {
        k.C3(j, m, n, W);
      } else {
        var b = k.Xy(W, j.I.k3, null, G);
        if (b == null) b = "default";
        var c = new fd(_.E.c, !0);
        c.data = { R: _.Y.t5, $U: b };
        q.k(c);
      }
    }
    if (T) {
      var a = this.II(j, W, n, m);
      j.W.cT = B.b._c(a);
      j._F = !0;
      L.ju.G0(G, a, j, m);
    }
  };
  L.gd.prototype.H_ = function (j, q, m, n, G) {
    var W = j.I.sb(G.x, G.y),
      k = this.w1;
    if (this.rP) {
      this.db.H_(j, m, n, W);
      this.rP = !1;
      var T = B.b.YU(this.db.Iy()),
        b = R.jo(T),
        c = j.U[j.J[0]],
        a = B.S(c.add.artb);
      a.artboardRect.v = b;
      var f = new fd(_.E.w, !0);
      f.l = L.W1;
      f.data = { R: R.lN, iB: a };
      q.k(f);
    }
    if (k) {
      var U = this.II(j, W, n, m);
      if (U.C() > 20) this.D7(j, U, q);
      j.W.cT = null;
      j._F = !0;
      this.w1 = null;
      j.W.Z9 = [];
    }
  };
  L.gd.prototype.II = function (j, q, m, n) {
    var G = this.w1,
      W = L.YE.BU(j, q, n),
      k = L.jy.ci(G, W, m, !0);
    G = k[0];
    W = k[1];
    return B.b.YU([G.x, G.y, W.x, W.y]);
  };
  L.bA = function () {
    L.ju.call(this, [10, 50], L.eO, "tools/artb");
    this.db = null;
    this.ir = !1;
    this.a = null;
    this.aKn = null;
    this.fP = null;
    this.a6M = null;
    this.a4u = null;
    this.fr = null;
    this.uh = null;
  };
  L.bA.prototype = new L.ju();
  L.bA.prototype.oa = function (j, q) {
    return j == gn.gv || j == gn.N7;
  };
  L.bA.prototype.uY = function (j, q, m, n) {
    if (n.M(gn.gv) || n.M(gn.N7)) this.BT({ R: "del" }, q, j, n, m);
  };
  L.bA.prototype.BT = function (j, q, m, n, G) {
    var W = m.add.arts;
    this.aKn = JSON.stringify(W);
    if (j.R == "del") {
      for (var y = 0; y < W.length; y++)
        if (W[y].J) {
          W.splice(y, 1);
          y--;
        }
    }
    if (j.R == "new") {
      for (var y = 0; y < W.length; y++) W[y].J = !1;
      var k = m.u$(),
        T = k.x + k.r + 20;
      W.push({
        eA: "Artboard " + (W.length + 1),
        gX: [T, k.y, T + 100, k.y + 100],
        J: !0,
      });
    }
    if (j.R == "rpl") {
      var b = 0;
      for (var y = 0; y < W.length; y++) if (W[y].J) b = y;
      W[b] = j.K;
    }
    if (j.R == "adapt") {
      var c = [];
      for (var y = 0; y < m.U.length; y++) c.push(y);
      var a = L.Dq.Fj(m, c),
        f = W[W.length - 1];
      f.gX = [a.x, a.y, a.x + a.r, a.y + a.$];
    }
    this.arl(m);
    this.vB(m);
  };
  L.bA.prototype.disable = function (j, q, m, n, G) {
    this.ir = !1;
  };
  L.bA.prototype.enable = function (j, q, m, n, G) {
    this.ir = !0;
    this.a = m;
    this.vB(j);
  };
  L.bA.prototype.zE = function (j) {};
  L.bA.prototype.oo = function (j, q, m, n, G) {
    var W = (this.uh = j.I.sb(G.x, G.y)),
      k = j.add.arts;
    this.aKn = JSON.stringify(k);
    var T = this.db,
      b = T ? T.Xy(W, j.I.k3, null, G) : null,
      c = n.M(gn.A8) || n.M(gn.X6);
    if (T && !c && (B.b.RD(T.Iy()).QL(W) || b)) {
    } else {
      var a = -1;
      for (var y = 0; y < k.length; y++) if (B.b.RD(k[y].gX).QL(W)) a = y;
      if (a == -1) this.aP(j, -1);
      else if (c) k[a].J = !k[a].J;
      else this.aP(j, a);
      this.vB(j);
    }
    if (this.db) {
      this.db.oo(j, m, n, W, null, !0, G);
    }
    j._F = !0;
  };
  L.bA.prototype.C3 = function (j, q, m, n, G) {
    var W = j.I.sb(G.x, G.y),
      k = j.add.arts,
      T = JSON.parse(this.fP);
    if (this.db) {
      this.db.C3(j, m, n, W);
      if (G.qT) {
        var b = B.b.RD(this.db.Iy()),
          c = this.a4u,
          a = new k$();
        a.translate(-c.x, -c.y);
        a.scale(b.r / c.r, b.$ / c.$);
        a.translate(b.x, b.y);
        var f = this.db.Nz(n, W, j, G);
        for (var y = 0; y < k.length; y++) {
          var U = k[y];
          if (!U.J) continue;
          if (B.b.RD(T[y].gX).jG()) U.gX = [b.x, b.y, b.x + b.r, b.y + b.$];
          else {
            U.gX = T[y].gX.slice(0);
            B.b.u(U.gX, a, U.gX);
          }
        }
        if (f == 10) {
          L.YE.kW(j, this.a6M, null, b.x - this.fr.x, b.y - this.fr.y);
          this.fr = b;
        }
        j.gF();
      }
      var Z = "default",
        h = this.db.Xy(W, j.I.k3, null, G);
      if (h) Z = h;
      var u = new fd(_.E.c, !0);
      u.data = { R: _.Y.t5, $U: Z };
      q.k(u);
    } else if (G.qT && ea.gw(W, this.uh) >= 6 / j.I.k3) {
      k.push({ eA: "Artboard " + (k.length + 1), gX: [0, 0, 0, 0], J: !0 });
      this.vB(j);
      this.db.oo(j, m, n, this.uh, null, !0, G);
    }
  };
  L.bA.prototype.H_ = function (j, q, m, n, G) {
    var W = j.I.sb(G.x, G.y),
      k = j.add.arts,
      T = JSON.parse(this.fP),
      b = n.M(gn.A8) || n.M(gn.X6);
    if (!b && ea.gw(this.uh, W) < 6 / j.I.k3) {
      var c = -1;
      for (var y = 0; y < k.length; y++) if (B.b.RD(k[y].gX).QL(W)) c = y;
      if (c != -1) {
        this.aP(j, c);
        this.vB(j);
      }
      if (B.b.RD(T[T.length - 1].gX).jG()) {
        this.db.clear(j);
        k.pop();
      }
    }
    if (this.db) {
      var a = this.db.Nz(n, W, j, G);
      this.db.H_(j, m, n, W);
      if (!W.Lg(this.uh)) this.arl(j, a == 10 ? W.mN(this.uh) : null);
    }
  };
  L.bA.prototype.arl = function (j, q) {
    var m = new eN([10, 50], this);
    m.data = { pv: this.aKn, jt: JSON.stringify(j.add.arts) };
    if (q) {
      m.data.J = this.a6M;
      m.data.Sz = q;
    }
    j.Du(m);
  };
  L.bA.prototype.vB = function (j) {
    var q = j.add.arts,
      m = new hk(),
      n = 0,
      G = [];
    for (var y = 0; y < q.length; y++)
      if (q[y].J) {
        var W = B.b.RD(q[y].gX);
        m = m.vd(W);
        j.root.fk(W, G);
        n++;
      }
    if (n == 0) {
      if (this.db) this.db.clear(j);
      j._F = !0;
      this.db = null;
      return;
    }
    this.fP = JSON.stringify(q);
    this.a6M = G;
    this.a4u = this.fr = m;
    var k = B.b._c(m).L;
    this.db = new bn(m.jG() ? null : k, !0, !1, !1, !1, !1, 3);
    if (!m.jG()) this.db.d4(j, this.a);
  };
  L.bA.prototype.aP = function (j, q) {
    var m = j.add.arts;
    for (var y = 0; y < m.length; y++) m[y].J = q == y;
  };
  L.bA.prototype.km = function (j, q) {
    q.add.arts = JSON.parse(j.jt);
    if (j.J) L.YE.kW(q, j.J, null, j.Sz.x, j.Sz.y);
    if (this.ir) this.vB(q);
    q._F;
  };
  L.bA.prototype.W6 = function (j, q) {
    q.add.arts = JSON.parse(j.pv);
    if (j.J) L.YE.kW(q, j.J, null, -j.Sz.x, -j.Sz.y);
    if (this.ir) this.vB(q);
    q._F;
  };
  function bn(j, q, m, n, G, W, k, T) {
    this.uE = null;
    this.PG = j ? j.slice(0) : null;
    this.eB = 1;
    this.Ef = 4;
    this.BE = null;
    this.aF = null;
    this.zW = null;
    this.J1 = -1;
    this.JD = null;
    this.aDj = !1;
    this.aJl = [];
    for (var y = 0; y < 8; y++)
      this.aJl.push(gh.a1_(0, PIMG.rotate, -0.5, -0.5, -45 - y * 45));
    this.a2R = q;
    this.ant = m;
    this.a3F = n;
    this.au_ = G;
    this.afZ = W;
    this.io = k;
    this.azY = T == null ? 1 : T;
  }
  bn.prototype.afU = function () {
    return this.J1 != -1;
  };
  bn.prototype.Iy = function () {
    return this.PG.slice(0);
  };
  bn.prototype.gz = function (j) {
    this.PG = j;
  };
  bn.prototype.au6 = function () {
    return this.WC(this.PG);
  };
  bn.prototype.aDN = function () {
    return this.Ef;
  };
  bn.prototype.a6k = function (j) {
    this.Ef = j;
  };
  bn.prototype.d$ = function (j) {
    if (j == null) j = this.PG;
    if (this.Ef == 9) return this.BE;
    else return this.WC(j)[this.Ef];
  };
  bn.prototype.abQ = function (j) {
    if (this.Ef == 9) this.BE = j.P();
    else {
      var q = this.d$(),
        m = new k$(1, 0, 0, 1, j.x - q.x, j.y - q.y);
      B.b.u(this.PG, m, this.PG);
    }
  };
  bn.prototype.kK = function (j) {
    this.eB = j;
  };
  bn.prototype.Xy = function (j, q, m, n, G, W) {
    var k = this.I5(W, j, q, n),
      T;
    if (k == 9) return "default";
    if (k == 10) {
      if (m) return null;
      return !this.a2R ? "move" : null;
    }
    if (k == -1 || k == 4) return null;
    if (k == 11) {
      var b = this.d$().mN(j);
      if (G == null) G = Math.atan2(b.y, b.x);
      T = 90 - (G * 180) / Math.PI;
      var c = Math.round(8 * (T / 360));
      c = (c + 8) % 8;
      return this.aJl[c];
    } else {
      var a = this.C1(j, this.PG);
      T = ([135, 90, 45, 180, 0, 0, 225, 270, 315][k] * Math.PI) / 180;
      var f = B.B.Ht(this.PG);
      return bn.aBE(f[0], f[3], T);
    }
  };
  bn.aBE = function (j, q, m) {
    var n = Math.atan2(-q, j);
    if (m) n += m;
    var G = "ew nesw ns nwse ew nesw ns nwse".split(" "),
      W = Math.round(8 * (n / (2 * Math.PI)));
    W = (W + 8) % 8;
    return G[W] + "-resize";
  };
  bn.prototype.C1 = function (j, q) {
    var m = B.B.BR(B.B.Ht(q)),
      n = new Float64Array(2);
    B.B.h1(j.x, j.y, m, n);
    return new ea(n[0], n[1]);
  };
  bn.prototype.VG = function (j) {
    var q = this.C1(j, this.PG);
    return 0 <= q.x && q.x <= 1 && 0 <= q.y && q.y <= 1;
  };
  bn.prototype.oo = function (j, q, m, n, G, W, k, T) {
    this.aDj = W;
    this.JD = n;
    var b = j.I.k3,
      c;
    if (this.PG == null) n = L.YE.BU(j, n, q);
    this.zW = n.P();
    if (this.PG == null) {
      if (T == null) T = 0;
      var a = new k$();
      a.rotate(T);
      var f = a.uL(new ea(1, 1));
      this.zW.offset(f.x, f.y);
      var U = G == null ? 1 : 1 / G,
        Z = (this.PG = [0, 0, 1, 0, 1, U, 0, U]);
      a.translate(n.x, n.y);
      B.b.u(this.PG, a, this.PG);
      c = 8;
    } else {
      c = this.I5(m, n, b, k);
      var h = m.M(gn.A8) && (c == 1 || c == 3 || c == 5 || c == 7);
      if (0 <= c && c <= 8 && !h) this.zW = this.WC(this.PG)[c];
      if (c == 9) {
        this.Ef = 9;
        this.BE = n.P();
      }
    }
    this.uE = this.PG.slice(0);
    this.J1 = c;
    this.d4(j, q);
    this.aF = this.d$();
    return c != -1;
  };
  bn.prototype.Nz = function (j, q, m, n) {
    return this.I5(j, q, m.I.k3, n);
  };
  bn.prototype.I5 = function (j, q, m, n) {
    var G = j && j.M(gn.A8),
      W = -1,
      k = this.WC(),
      T = [0, 2, 6, 8, 1, 3, 5, 7],
      b = n ? L.vp({ I: { k3: m } }, n) : (8 * L.IC()) / m,
      c = ea.gw(k[0], k[2]),
      a = ea.gw(k[0], k[6]),
      f = this.C1(q, this.PG);
    f.x *= c;
    f.y *= a;
    var U = new hk(0, 0, c, a);
    U.Lh(b, b);
    if (W == -1) if (ea.gw(this.d$(), q) < b) W = 9;
    if (W == -1)
      for (var y = 0; y < T.length; y++) if (ea.gw(k[T[y]], q) < b) W = T[y];
    if (W == -1 && U.QL(f)) {
      if (Math.abs(f.y - 0) < b) W = 1;
      if (Math.abs(f.x - 0) < b) W = 3;
      if (Math.abs(f.y - a) < b) W = 7;
      if (Math.abs(f.x - c) < b) W = 5;
    }
    if (W == -1 && j && j.M(gn.O4)) W = 9;
    if (W == -1 || this.io == 4) {
      if (this.VG(q)) {
        if (this.a2R) W = 10;
      } else {
        var Z = [3, 0.85][ei];
        U.Lh(Z * b, Z * b);
        W = U.QL(f) && this.io != 3 ? 11 : 10;
        if (W == 10 && ei == 1) W = -1;
      }
    }
    return W;
  };
  bn.prototype.C3 = function (j, q, m, n, G) {
    if (this.J1 == -1) return;
    this.JD = n;
    var W = m && m.M(gn.X6),
      k = m && m.M(gn.O4),
      T = m && m.M(gn.A8),
      b = j.I.k3,
      c = this.zW,
      a = this.J1,
      f = a == 0 || a == 2 || a == 6 || a == 8,
      U = this.WC(),
      Z = L.YE.BU(j, c, q),
      h = L.YE.BU(j, n, q),
      u,
      i;
    if (a == 9) {
      var U = this.WC(),
        x = -1;
      for (var y = 0; y < U.length; y++) if (ea.gw(U[y], h) * b < 10) x = y;
      this.Ef = x == -1 ? 9 : x;
      this.BE = W ? L.Pr.jO(Z, h) : h.P();
    } else if (a == 10) {
      i = B.b.RD(this.uE);
      var X = i.x,
        $ = i.y;
      i.offset(n.x - c.x, n.y - c.y);
      if (this.awv()) {
        i.x = Math.round(i.x);
        i.y = Math.round(i.y);
      }
      u = L.YE.xO(j, i, q);
      var H = new k$(1, 0, 0, 1, i.x - X + u[0], i.y - $ + u[1]);
      B.b.u(this.uE, H, this.PG);
    } else if (a == 11) {
      var C = this.d$(this.uE),
        l = C.mN(n),
        v = C.mN(c),
        K = Math.atan2(l.y, l.x),
        S = Math.atan2(v.y, v.x),
        H = new k$(1, 0, 0, 1, -C.x, -C.y),
        o = Math.PI / 12;
      if (W) H.rotate(Math.round((S - K) / o) * o);
      else H.rotate(S - K);
      H.translate(C.x, C.y);
      B.b.u(this.uE, H, this.PG);
    } else {
      var V = W,
        P;
      if (G && !T) V = !V;
      if (this.afZ) V = !0;
      var z = this.uE;
      if (this.io == 1) {
        if (f) W = k = T = !0;
      } else if (this.io == 2 && f && this.aDj != !0) T = !0;
      if (this.io == 3) T = !1;
      else if (this.io == 5) {
        W = T = !0;
      }
      if (this.a3F && f && T) {
        var y = [0, 0, 2, 0, 0, 0, 6, 0, 4, 0][a],
          E = -1,
          A = h.x,
          N = h.y;
        if (W) {
          var Q = (y + 6) & 7,
            e = (y + 10) & 7,
            Y = bn.aqv(z[y], z[y + 1], z[Q], z[Q + 1], h.x, h.y),
            d = bn.aqv(z[y], z[y + 1], z[e], z[e + 1], h.x, h.y),
            I = Y[2] < d[2] ? Y : d;
          A = I[0];
          N = I[1];
          if (k) E = Y[2] < d[2] ? Q : e;
        } else if (k) E = (y + 4) & 7;
        P = z.slice(0);
        if (E != -1) {
          var O = z[E],
            s = z[E + 1],
            p = (z[y] + O) / 2,
            F = (z[y + 1] + s) / 2;
          P[E] = p - (A - p);
          P[E + 1] = F - (N - F);
        }
        P[y] = A;
        P[y + 1] = N;
      } else if (f && k) {
        var C = this.aF,
          g = C.x,
          w = C.y,
          r = Z.x - g,
          eQ = Z.y - w,
          t = 1,
          dq = 1;
        if (Math.abs(r) >= 1) t = (h.x - g) / r;
        if (Math.abs(eQ) >= 1) dq = (h.y - w) / eQ;
        if (V) t = dq = (t + dq) / 2;
        var H = new k$();
        H.translate(-g, -w);
        H.scale(t, dq);
        H.translate(g, w);
        P = z.slice(0);
        B.b.u(P, H, P);
      } else if (!f && T && this.ant) {
        function D(ga, fi, da) {
          var eJ = fi[0] - ga[0],
            h$ = fi[1] - ga[1],
            kS = B.b.FA(da[0], da[1], -h$, eJ, ga[0], ga[1], eJ, h$);
          return kS;
        }
        var ha = [1, 5, 7, 3].indexOf(a),
          am = (ha + 1) & 3,
          k4 = z.slice(ha * 2, ha * 2 + 2),
          aA = z.slice(am * 2, am * 2 + 2),
          ex = h;
        if (W) {
          var ac = D(k4, aA, [h.x, h.y]);
          ex = new ea(h.x - ac * (aA[1] - k4[1]), h.y + ac * (aA[0] - k4[0]));
        }
        var eJ = ex.x - c.x,
          h$ = ex.y - c.y,
          da = [this.aF.x, this.aF.y],
          bb = [da[0] + aA[0] - k4[0], da[1] + aA[1] - k4[1]],
          gb = D(da, bb, [c.x, c.y]);
        P = z.slice(0);
        for (var y = 0; y < 4; y++) {
          if (!k && y != ha && y != am) continue;
          var fM = z.slice(y * 2, y * 2 + 2),
            kS = D(da, bb, fM) / gb;
          P[y * 2] += kS * eJ;
          P[y * 2 + 1] += kS * h$;
        }
      } else {
        if (this.awv()) {
          h.x = Math.round(h.x);
          h.y = Math.round(h.y);
        }
        var cY = [0, 1, 2, 5, 8, 7, 6, 3],
          cS = cY[(cY.indexOf(a) + 4) % 8],
          k3 = [];
        for (var y = 0; y < 3; y++)
          for (var E = 0; E < 3; E++) k3.push(new ea(E / 2, y / 2));
        var C = this.aF,
          di = k && (this.Ef == 4 || this.Ef == 9) ? this.C1(C, z) : k3[cS],
          a7 = k && (this.Ef == 4 || this.Ef == 9) ? C : U[cS];
        if (f && V) {
          function b0(ga, fi, da) {
            var eJ = fi[0] - ga[0],
              h$ = fi[1] - ga[1],
              kS = B.b.FA(da[0], da[1], -h$, eJ, ga[0], ga[1], eJ, h$);
            return [da[0] - h$ * kS, da[1] + eJ * kS];
          }
          while (!0) {
            var e1 = b0([a7.x, a7.y], [c.x, c.y], [h.x, h.y]);
            e1 = new ea(e1[0], e1[1]);
            e1 = L.YE.BU(j, e1, q);
            if (ea.gw(e1, h) < 1e-6) break;
            h = e1;
          }
        }
        var l2 = this.C1(h, z),
          kL = this.C1(c, z),
          es = new k$(),
          kR = new k$(),
          t = (l2.x - di.x) / (kL.x - di.x);
        if (t == 0) t = 1e-4;
        var dq = (l2.y - di.y) / (kL.y - di.y);
        if (dq == 0) dq = 1e-4;
        if (this.au_) {
          t = Math.max(t, 0);
          dq = Math.max(dq, 0);
        }
        if (f) {
          if (V) es.scale(t, t);
          else es.scale(t, dq);
        } else if (a != 4) {
          var eH = V,
            cZ = T && W;
          if (cZ) eH = !1;
          if (a == 1 || a == 7) es.scale(eH ? dq : 1, cZ ? 1 : dq);
          else es.scale(cZ ? 1 : t, eH ? t : 1);
          if (this.ant && T) {
            if (a == 1 || a == 7) kR.ra = (l2.x - di.x) / (l2.y - di.y);
            else kR.X = (l2.y - di.y) / (l2.x - di.x);
          }
        }
        var H = new k$();
        H.translate(-di.x, -di.y);
        H.concat(es);
        H.concat(kR);
        H.translate(di.x, di.y);
        P = [0, 0, 1, 0, 1, 1, 0, 1];
        B.b.u(P, H, P);
        var I = B.B.Ht(z);
        B.B.u(I, P);
      }
      if (bn.Zx(P)) this.PG = P;
    }
    this.d4(j, q);
    if (u) L.YE.HJ(j, i, u);
  };
  bn.aqv = function (j, q, m, n, G, W) {
    var k = m - j,
      T = n - q,
      b = G - j,
      c = W - q,
      a = k * k + T * T,
      f = b * k + c * T,
      U = f / a,
      Z = j + U * k,
      h = q + U * T,
      u = G - Z,
      i = W - h;
    return [Z, h, Math.sqrt(u * u + i * i)];
  };
  bn.prototype.awv = function () {
    var j = this.PG;
    return (
      (Math.abs(j[1] - j[3]) < 1e-6 && Math.abs(j[2] - j[4]) < 1e-6) ||
      (Math.abs(j[0] - j[2]) < 1e-6 && Math.abs(j[3] - j[5]) < 1e-6)
    );
  };
  bn.Zx = function (j) {
    return (
      B.b.aBV(j) || B.b.aBV([j[6], j[7], j[4], j[5], j[2], j[3], j[0], j[1]])
    );
  };
  bn.prototype.H_ = function (j, q, m, n) {
    this.J1 = -1;
    this.JD = null;
    j.W.x$ = null;
    j.W.Z9 = [];
    j._F = !0;
  };
  bn.prototype.uY = function (j, q, m) {
    var n = m.m2(j ? j.I.ny : 0);
    if (n.x || n.y) {
      var G = new k$(1, 0, 0, 1, n.x, n.y);
      B.b.u(this.PG, G, this.PG);
      this.d4(j, q);
      return !0;
    }
    return !1;
  };
  bn.prototype.WC = function (j) {
    if (j == null) j = this.PG;
    var q = j[6] - j[0],
      m = j[7] - j[1],
      n = j[4] - j[2],
      G = j[5] - j[3],
      W = [
        j[0],
        j[1],
        j[2],
        j[3],
        j[0] + q / 2,
        j[1] + m / 2,
        j[2] + n / 2,
        j[3] + G / 2,
        j[6],
        j[7],
        j[4],
        j[5],
      ],
      k = [];
    for (var y = 0; y < 3; y++) {
      var T = y * 4,
        b = W[T + 0],
        c = W[T + 1],
        a = W[T + 2],
        f = W[T + 3];
      k.push(new ea(b, c));
      k.push(new ea(b + (a - b) / 2, c + (f - c) / 2));
      k.push(new ea(a, f));
    }
    return k;
  };
  bn.prototype.d4 = function (j, q, m) {
    if (j.W == null) return;
    if (m == null) m = !1;
    var n = this.eB,
      G = this.WC(),
      W = G[0],
      k = G[2],
      T = G[6],
      b = G[8],
      c = { RC: [], L: [] };
    if (n == 0) j.W.cT = c;
    else j.W.w2 = c;
    var a = B.B.Ht([W.x, W.y, k.x, k.y, b.x, b.y, T.x, T.y]);
    c.RC.push("M", "L", "L", "L", "Z");
    c.L.push(0, 0, 1, 0, 1, 1, 0, 1);
    var f = this.azY;
    if (f > 1) {
      j.W.Sb = B.S(c);
      B.B.u(a, j.W.Sb.L);
      for (var y = 1; y < f; y++) {
        var U = y / f;
        c.RC.push("M", "L", "M", "L");
        c.L.push(0, U, 1, U, U, 0, U, 1);
      }
    }
    B.B.u(a, c.L);
    j.I.qN = new hk(0, 0, ea.gw(G[0], G[2]), ea.gw(G[0], G[6]));
    if (this.J1 != -1 && this.J1 < 9 && this.JD) {
      var Z = j.I.gS(this.JD.x, this.JD.y);
      L.ju.G0(Z, j.I.qN, j, q);
    }
    if (!m) {
      var h = [];
      if (n == 0) j.W.a0 = h;
      else j.W.ee = h;
      for (var y = 0; y < G.length; y++) if (y != 4) h.push(G[y].x, G[y].y);
      var u = this.d$();
      h.push(u.x, u.y);
    }
    j._F = !0;
  };
  bn.prototype.clear = function (j) {
    j.I.qN = null;
    j.W.x$ = null;
    j.W.cT = null;
    j.W.w2 = null;
    j.W.Sb = null;
    j.W.a0 = [];
    j.W.ee = [];
    j._F = !0;
  };
  function cN(j) {
    this.rc = null;
    this.J1 = -1;
    this.axq = null;
    this.aLm = null;
    this.Ec = null;
    this.Da = -1;
    this.aF0 = null;
    this.aFD(j);
  }
  cN.prototype.lv = function () {
    return B.S(this.rc);
  };
  cN.prototype.aFD = function (j) {
    this.rc = B.S(j);
  };
  cN.prototype.anQ = function (j) {
    this.Da = j;
  };
  cN.prototype.VG = function (j) {
    return !0;
  };
  cN.prototype.Xy = function (j, q, m, n) {
    var G = this.I5(j, q, n);
    if (G == -1) return "default";
    return "pointer";
  };
  cN.prototype.oo = function (j, q, m, n, G, W, k) {
    if (this.Da != -1) return !0;
    this.J1 = this.I5(n, j.I.k3, k);
    var T = B.rc._i(this.rc),
      b = B.Ol.fH(T, n),
      c = 0 < b[0] && b[0] < 1 && 0 < b[1] && b[1] < 1;
    this.axq = c ? b : null;
    this.aLm = JSON.stringify(T);
    this.aF0 = JSON.stringify(this.rc);
    this.Ec = n;
    return this.J1 != -1 || c;
  };
  cN.prototype.I5 = function (j, q, m) {
    var n = m ? L.vp({ I: { k3: q } }, m) * 2 : (20 * L.IC()) / q,
      G = this.rc,
      W = cN.arA(G),
      k = -1;
    if (W) {
      k = B.b.wB(W, j.x, j.y, n);
      if (k != -1) k += 1e6;
    } else {
      var T = B.rc._i(G);
      k = B.b.wB(T[3], j.x, j.y, n);
      if (k != -1 && this.Z_(T, k) == null) k = -1;
    }
    return k;
  };
  cN.prototype.C3 = function (j, q, m, n) {
    if (this.Da != -1) return;
    var G = this.rc,
      W = this.J1,
      k = this.axq,
      T = JSON.parse(this.aLm),
      b = T[0],
      c = T[1],
      a = T[3];
    if (W >= 1e6) {
      var f = G.warpStyle.v.warpStyle,
        U = B.rc.Fj(G);
      if (f == "warpCylinder") {
        this.rc = G = JSON.parse(this.aF0);
        var Z = L.Dq.Kt(G.warpValues),
          h = (Z[2] - Z[0]) / (Z[1] - Z[3]),
          u = Z[4] * h * U.$,
          i = Z[5] * h * U.$,
          x = n.x - this.Ec.x,
          X = n.y - this.Ec.y;
        Z[0] = U.x;
        Z[1] = U.y + U.$;
        Z[2] = U.x + U.r;
        Z[3] = U.y;
        W -= 1e6;
        if (W == 0) {
          Z[0] += x;
          Z[1] += X;
        }
        if (W == 1) {
          Z[2] += x;
          Z[3] += X;
        }
        if (W == 2) {
          u += 2 * X;
          i += 2 * X;
        }
        if (W == 3) {
          i += 2 * X;
        }
        if (W == 4) {
          Z[6] = Math.max(0, Math.min(1, Z[6] - (2 * x) / U.r));
        }
        var $ = B.b.RD(Z.slice(0, 4)),
          H = $.r / U.r,
          C = $.$ / U.$;
        Z[4] = u / $.r;
        Z[5] = i / $.r;
        G.warpValues = L.Dq.be(Z);
        var l = new k$();
        l.translate(-U.x, -U.y);
        l.scale(H, C);
        l.translate($.x, $.y);
        if (W < 4) return l;
      } else {
        var v = G.warpRotate.v.Ornt,
          K = v == "Vrtc",
          S = B.rc.aM7[f],
          o = K ? -n.x / U.r : -n.y / U.$;
        o += S[1];
        if (S[1] > 0.5) o = -o;
        o /= S[2];
        var H = U.r / U.$;
        if (K) H = 1 / H;
        if (S[3]) o /= H;
        G.warpValue.v = 100 * Math.max(-1, Math.min(1, o));
      }
    } else if (W != -1) {
      var V = [W],
        x = n.x - a[W * 2],
        X = n.y - a[W * 2 + 1];
      if (b * c > 16) {
        var P = this.Z_(T, W);
        if (P[0] == 0) {
          var z = Math.floor(W / b),
            E = W - z * b;
          if (E > 0) V.push(W - 1);
          if (E < b - 1) V.push(W + 1);
          if (z > 0) V.push(W - b);
          if (z < c - 1) V.push(W + b);
        }
      }
      for (var y = 0; y < V.length; y++) {
        a[V[y] * 2] += x;
        a[V[y] * 2 + 1] += X;
      }
      B.rc.qW(G, T);
    } else if (k) {
      B.Ol.a4x(T, k[0], k[1], n.x - this.Ec.x, n.y - this.Ec.y);
      B.rc.qW(G, T);
    }
  };
  cN.prototype.H_ = function (j, q, m, n) {
    var G = this.Da;
    this.axq = null;
    this.Da = -1;
    if (G != -1) {
      var W = B.rc._i(this.rc),
        k = B.Ol.fH(W, n);
      if (G == 0 || G == 1) B.Ol.split(W, 0, k[0]);
      if (G == 0 || G == 2) B.Ol.split(W, 1, k[1]);
      B.rc.qW(this.rc, W);
    }
    j._F = !0;
    return G != -1;
  };
  cN.prototype.uY = function (j, q, m) {
    var n = m.m2();
    if (n.x || n.y) {
      var G = new k$(1, 0, 0, 1, n.x, n.y);
      B.b.u(this.PG, G, this.PG);
      this.d4(j);
    }
  };
  cN.prototype.Z_ = function (j, y) {
    var q = j[0],
      m = j[1],
      n = this.J1,
      G = Math.floor(n / q),
      W = n - G * q,
      k = n % 3,
      T = n % 3,
      b = k == 0 && T == 0,
      G = Math.floor(y / q),
      W = y - G * q,
      k = W % 3,
      T = G % 3;
    if (k != 0 && T != 0) return null;
    if (k == 0 && T == 0) return [0];
    else {
      var c = 0;
      if (T == 0) c = k == 1 ? y - 1 : y + 1;
      if (k == 0) c = T == 1 ? y - q : y + q;
      if (q * m > 16) {
        var a = n == y || n == y + 1 || n == y - 1 || n == y + q || n == y - q;
        if (
          b &&
          (a || n == y + 2 || n == y - 2 || n == y + 2 * q || n == y - 2 * q)
        ) {
        } else if (!b && a) {
        } else return null;
      }
      return [1, c];
    }
  };
  cN.arA = function (j, q) {
    var q = j.warpStyle.v.warpStyle,
      n;
    if (q == "warpCustom" || q == "warpNone") return null;
    var m = B.rc._i(j);
    if (q == "warpCylinder") {
      var G = j.warpValues.v;
      n = [0, 1, 1, 0, 0.5, 0, 0.5, 1, 0.75 - 0.25 * G[6].v, 0.5];
    } else {
      var W = j.warpRotate.v.Ornt,
        k = B.rc.aM7[q];
      n = W == "Hrzn" ? [k[0], k[1]] : [k[1], k[0]];
    }
    B.Ol.u(m, n, new hk(0, 0, 1, 1));
    return n;
  };
  cN.prototype.d4 = function (j, q) {
    var m = this.rc,
      n = m.warpStyle.v.warpStyle,
      G = B.rc._i(m),
      W = G[0],
      k = G[1],
      T = G[3],
      b = (j.W.w2 = { RC: [], L: [] }),
      c = (j.W.ee = []),
      a = (j.W.dY = []),
      f = this.J1;
    if (n == "warpCustom" || n == "warpNone")
      for (var U = 0; U < k; U++)
        for (var Z = 0; Z < W; Z++) {
          var y = U * W + Z,
            h = this.Z_(G, y);
          if (h == null) continue;
          var u = T[2 * y],
            i = T[2 * y + 1],
            x = a;
          if (h[0] == 0) x = y == f && W * k > 16 ? a : c;
          else {
            var X = h[1];
            b.RC.push("M", "L");
            b.L.push(u, i, T[2 * X], T[2 * X + 1]);
          }
          x.push(u, i);
        }
    else {
      var $ = cN.arA(m);
      if ($) for (var y = 0; y < $.length; y++) c.push($[y]);
    }
    for (var U = 0; U + 1 < k; U += 3)
      for (var Z = 0; Z + 1 < W; Z += 3) {
        b.RC.push("M", "C", "C", "C", "C");
        var y = U * W + Z,
          H = y + W + W,
          C = [
            y,
            y + 1,
            y + 2,
            y + 3,
            y + W + 3,
            H + 3,
            H + W + 3,
            H + W + 2,
            H + W + 1,
            H + W,
            H,
            y + W,
            y,
          ];
        for (var y = 0; y < C.length; y++) {
          var u = T[C[y] * 2],
            i = T[C[y] * 2 + 1];
          b.L.push(u, i);
        }
      }
    var l = [],
      v = [];
    function K(S, Z, P) {
      for (var C = 0; C <= P; C++) {
        v.push(C == 0 ? "M" : "L");
        if (S == 0) l.push(Z, C / P);
        else l.push(C / P, Z);
      }
    }
    if (q) q = B.Ol.fH(G, q);
    for (var S = 0; S < 2; S++) {
      var o = G[2][S],
        V = S == 0 ? W : k,
        P = V * 5;
      for (var z = 1; z < V; z++) {
        var E = Math.floor((z - 1) / 3),
          A = z - (1 + E * 3);
        if (A == 0) continue;
        var Z = o[E] + (A / 3) * (o[E + 1] - o[E]);
        K(S, Z, P);
      }
      var N = this.Da;
      if (q && N != -1 && (N == 0 || N - 1 == S)) K(S, q[S], P);
    }
    B.Ol.u(G, l, new hk(0, 0, 1, 1));
    B.b.concat(b, { L: l, RC: v });
    j._F = !0;
  };
  cN.prototype.clear = function (j) {
    j.W.w2 = null;
    j.W.ee = [];
    j.W.dY = [];
    j._F = !0;
  };
  function iX() {
    this.nT = !1;
    this.rT = !1;
    this.ac6 = !1;
    this.aFN = !1;
    this.akd = !1;
    this.B8 = !1;
    this.Kl = 0;
    this.iK = 0;
  }
  iX.prototype.oo = function (j) {
    this.nT = !0;
    this.rT = !1;
    this.akd = j.M(gn.X6);
    this.B8 = j.M(gn.O4);
    this.Kl = this.akd ? 0 : 1;
    this.iK = this.B8 ? 0 : 1;
  };
  iX.prototype.uY = function (j) {
    var q = (this.aFN = j.M(gn.X6)),
      m = (this.ac6 = j.M(gn.O4));
    if (this.rT) {
      if (this.Kl == 0 && !q) this.Kl++;
      if (this.Kl == 1 && q) this.Kl++;
      if (this.iK == 0 && !m) this.iK++;
      if (this.iK == 1 && m) this.iK++;
    }
  };
  iX.prototype.C3 = function () {
    this.rT = !0;
  };
  iX.prototype.H_ = function () {
    this.nT = !1;
  };
  iX.prototype.KL = function (y) {
    if (y == 0) return this.nT ? this.B8 : this.ac6;
    if (y == 1) return this.rT ? this.iK == 2 : !1;
  };
  iX.prototype.VZ = function (y) {
    if (y == 0) return this.nT ? this.akd : this.aFN;
    if (y == 1) return this.rT ? this.Kl == 2 : !1;
  };
  L.History = function () {
    L.ju.call(this, "History", L.cJ);
    this.akK = !0;
    this.aCR = 0;
  };
  L.History.prototype = new L.ju();
  L.History.prototype.BT = function (j, q, m, n) {
    m.Ls = !0;
    if (j.R == "h_itemchange") {
      if (j.index < m.d6) for (var y = m.d6; y > j.index; y--) this.nr(m);
      if (j.index > m.d6) for (var y = m.d6; y < j.index; y++) this.BB(m);
    }
    if (j.R == "h_stepfwd") this.BB(m);
    if (j.R == "h_stepbck") this.nr(m);
    if (j.R == "h_undoredo") {
      var G = this.akK || this.aCR != m.d6;
      if (G) {
        this.nr(m);
        G = !1;
      } else {
        this.BB(m);
        G = !0;
      }
      this.akK = G;
      this.aCR = m.d6;
    }
    if (j.R == "h_clear") {
      if (j.force == null)
        if (
          !window.confirm(
            "Do you really want to clear all states in History? You won't be able to undo it."
          )
        )
          return;
      m.history = [new eN([1, 0], null)];
      m.d6 = 0;
    } else this.akK = !0;
  };
  L.History.prototype.nr = function (j) {
    if (j.d6 == 0) return;
    var q = j.history[j.d6];
    q.l.W6(q.data, j);
    j.d6--;
  };
  L.History.prototype.BB = function (j) {
    if (j.d6 == j.history.length - 1) return;
    var q = j.history[j.d6 + 1];
    q.l.km(q.data, j);
    j.d6++;
  };
  L.zl = function () {
    L.ju.call(this, "Layers", L.W1);
    this.AS = null;
  };
  L.zl.prototype = new L.ju();
  L.zl.prototype.BT = function (j, q, m, n, G) {
    this.AS = q;
    var W = j.R,
      k = j.v != null ? j.v : m.J.length != 0 ? m.J[0] : m.U.length - 1,
      T = m.U[k];
    m.qB = !0;
    var b = n.M(gn.O4),
      c = n.M(gn.X6),
      a = n.M(gn.A8);
    if (
      W == R.IW &&
      m.h == null &&
      (m.J.length > 1 || !m.Ph(!1) || m.U[m.J[0]].D1())
    )
      W = R.iq;
    if (W == R.Jf) {
      var f = new eN([6, 33], this),
        U = T.D1() ? ["pass"].concat(kJ.YH) : kJ.YH,
        Z = U[j.jt],
        h = j.v != null ? [j.v] : m.J,
        u = JSON.stringify(h),
        i = [];
      for (var y = 0; y < h.length; y++) i.push(m.U[h[y]].hz);
      f.data = { R: W, Gj: u, bn: i, jt: Z };
      m.Du(f);
      this.km(f.data, m);
      this.track(jw.BH("Md", { t: "enum", v: { BlnM: kJ.il(Z) } }));
    }
    if (W == R.G4) {
      var f,
        x = m.iw(),
        h = j.v != null ? [j.v] : m.J,
        u = JSON.stringify(h);
      if (x && x.data && x.data.R == W && x.data.Gj == u) f = x;
      else {
        var X = jw.BH("Opct", { t: "UntF", v: { type: "#Prc", val: 0 } });
        this.track(X);
        var i = [];
        for (var y = 0; y < h.length; y++) i.push(m.U[h[y]].yA);
        f = new eN([6, 32], this);
        f.data = { R: W, Gj: u, bn: i, jt: j.jt, atE: X.SC };
        m.Du(f);
      }
      f.data.jt = j.jt;
      f.data.atE.T.v.Opct.v.val = Math.round((j.jt * 100) / 255);
      this.km(f.data, m);
    }
    if (W == R.yX) {
      var f,
        x = m.iw(),
        h = j.v != null ? [j.v] : m.J,
        u = JSON.stringify(h);
      if (x && x.data && x.data.R == W && x.data.Gj == u) f = x;
      else {
        var i = [];
        for (var y = 0; y < h.length; y++) {
          var $ = m.U[h[y]].add.iOpa;
          i.push($ == null ? 255 : $);
        }
        f = new eN("Fill Opacity Change", this);
        f.data = { R: W, Gj: u, bn: i, jt: j.jt };
        m.Du(f);
      }
      f.data.jt = j.jt;
      this.km(f.data, m);
    }
    if (W == R.Rp) {
      var H = T.Y,
        f,
        x = m.iw();
      if (x && x.data && x.data.R == W && x.data.v == k) f = x;
      else {
        f = new eN("Audio Change", this);
        f.data = { R: W, v: k, bn: { yY: H.yY, volume: H.volume } };
        m.Du(f);
      }
      f.data.jt = j.jt;
      this.km(f.data, m);
    }
    if (W == R.VY) {
      var H = m.Y,
        f,
        x = m.iw();
      if (x && x.data && x.data.R == W) f = x;
      else {
        f = new eN("Project Audio", this);
        f.data = { R: W, bn: { W0: H.W0, Ss: H.Ss } };
        m.Du(f);
      }
      f.data.jt = j.jt;
      this.km(f.data, m);
    }
    if (W == R.p4) {
      var C = j.jt,
        l = j.v != null ? [j.v] : m.J.slice(0),
        v = [],
        K = [],
        f;
      for (var S = 0; S < l.length; S++) {
        var o = m.U[l[S]];
        if (o.add.lspf == null) o.add.lspf = 0;
        var i = o.add.lspf,
          Z = i;
        for (var y = 0; y < C[0].length; y++) {
          var V = C[1][y],
            P = 1 << V;
          if ((Z & P) == 0 && C[0][y]) Z ^= P;
          else if ((Z & P) != 0 && !C[0][y]) Z ^= P;
        }
        v.push(i);
        K.push(Z);
      }
      var x = m.iw(),
        h = JSON.stringify(l);
      if (x && x.data && x.data.R == W && JSON.stringify(x.data.Gj) == h) {
        f = x;
        f.data.jt = K;
      } else {
        var f = new eN([6, 57, 1], this);
        f.data = { R: W, Gj: h, bn: v, jt: K };
        m.Du(f);
      }
      this.km(f.data, m);
    }
    if (W == R.Ri) {
      var z = "----",
        E = j.ZI,
        Z = null;
      for (var y = 0; y < iv.Ms.WI.length; y++)
        if (T.add[iv.Ms.WI[y]]) z = iv.Ms.WI[y];
      var A = T.add[z];
      if (E == "TySh") Z = al.wD(50, 50, G.Cw);
      var f = new eN("Layer Type", this);
      f.data = { R: W, v: k, aAh: [z, A], ZI: [E, Z] };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.Ov) {
      var l = [];
      if (b) {
        var N = m.iw(),
          Q = N ? N.data : null;
        if (N != null && N.l == this && Q.R == R.Ov && Q.Gj.length != 1) {
          var e = new fd(_.E.w);
          e.l = L.cJ;
          e.data = { R: "h_stepbck" };
          q.k(e);
          if (Q.v == k) return;
        }
        var Y = m.root.Zg(k),
          d = Y,
          I = [j.v];
        while (d.parent != m.root) {
          I.push(d.parent.index);
          d = d.parent;
        }
        for (var y = 0; y < m.U.length; y++) {
          var O = m.U[y],
            d = m.root.Zg(y),
            s = I.indexOf(y) != -1 ? !0 : O.Iw() && Y.depth < d.depth;
          if (s != O.Iw()) l.push(y);
        }
      } else if (j.Gj) l = j.Gj;
      else {
        l.push(k);
        var p = m.U[k].Iw(),
          X = {
            _D: p ? "hide" : "show",
            SC: {
              classID: p ? "Hd" : "Shw",
              null: { t: "VlLs", v: [jw.$W("Lyr", !0)] },
            },
          };
        this.track(X);
      }
      var f = new eN("Layer visibility", this, !0);
      f.data = { R: W, Gj: l, v: k };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.nu) {
      if (G.RW == L.Be) {
        var F = new fd(_.E.c);
        F.data = { R: _.Y.UK, l: L.Lx };
        q.k(F);
      }
      var g = j.apN,
        w = j.NM,
        t,
        escape = !1,
        dq = !1;
      if (j.adE) {
        if (a && (w == 0 || w == 1 || w == 2)) {
          var r = 0;
          if (c) r++;
          if (b) r += 2;
          var eQ = new fd(_.E.w, !0);
          eQ.l = L.ag;
          eQ.data = { R: "fromlayer", eQ: [j.v, w, r] };
          q.k(eQ);
          return;
        }
      }
      var X = {
        _D: "select",
        SC: { classID: "null", MkVs: { t: "bool", v: !1 } },
      };
      m.av7();
      if (n.M(gn.A8) || j.aLC == 0) {
        var D = m.J.indexOf(k);
        if (D == -1) m.J.push(k);
        else if (m.J.length > 1) {
          if (j.aLC != 0) m.J.splice(D, 1);
        }
        m.J.sort(function (f, h7) {
          return f - h7;
        });
        X.SC.selectionModifier = {
          t: "enum",
          v: { selectionModifierType: "addToSelection" },
        };
        t = k;
      } else if (c && !b && w > 0) {
        W = w == 1 ? R.bQ : w == 2 ? R.d3 : R.u8;
        escape = !0;
      } else if ((c || j.aLC == 1) && m.J.length > 0) {
        var ha = Math.min(k, m.J[0]),
          am = Math.max(k, m.J[m.J.length - 1]);
        m.J = [];
        for (var y = ha; y <= am; y++)
          if (m.U[y].add.lsct != hQ.$a) m.J.push(y);
        X.SC.selectionModifier = {
          t: "enum",
          v: { selectionModifierType: "addToSelectionContinuous" },
        };
        t = k;
      } else {
        t = k;
        if (k >= m.U.length) return;
        var O = m.U[k];
        if (O && O.D1() && j.aiy) O.add.lsct = hQ.WR;
        else if (m.J.length == 1 && m.J[0] == k && Math.max(0, w) == O.ma) {
          dq = !0;
          m.qB = !1;
        }
        if (!dq) {
          m.J = [k];
          m.um();
        }
      }
      if (!dq) {
        if (t != null && t < m.U.length) {
          (X.SC.null = {
            t: "obj ",
            v: [{ t: "name", v: { classID: "Lyr", val: m.U[t].getName() } }],
          }),
            this.track(X);
        }
        if (!escape) {
          console.log("no escape");
          if (m.J.length == 1) {
            var k4 = m.J[0];
            for (var y = 0; y < m.U.length; y++) {
              if (y == k4) continue;
              var o = m.U[y];
              o.ma = 0;
              o.q_ = !1;
            }
            var T = m.U[k4];
            if (w == 2) {
              T.q_ = !T.q_;
              m.bR = [];
            } else if (T) {
              T.ma = w <= 0 ? 0 : w;
            }
          } else
            for (var y = 0; y < m.U.length; y++) {
              var o = m.U[y];
              o.ma = 0;
              o.q_ = !1;
            }
          m.H7 = null;
          m.Ls = !0;
        }
      }
      if (j.adE && b) {
        if ((w == 1 || w == 3) && g != null) {
          var eQ = new fd(_.E.w, !0);
          eQ.l = L.R2;
          eQ.data = { R: "mskView", K: g != 0 ? 0 : c ? 1 : 2 };
          q.k(eQ);
        } else {
          this.BT({ R: R.vu, v: j.v }, q, m, n, G);
        }
      }
    }
    if (W == R.bQ || W == R.u8) {
      var aA = W == R.bQ,
        ex = aA ? T.ex() : T.xE(m).x7;
      if (ex == null) return;
      var f = new eN(
        ex.isEnabled ? (aA ? [6, 15] : [6, 42]) : aA ? [6, 14] : [6, 41],
        this
      );
      f.data = { R: W, v: k };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.d3) {
      var ex = T.add.vmsk;
      if (ex == null) return;
      var f = new eN(ex.isEnabled ? [6, 17] : [6, 16], this);
      f.data = { R: W, v: k };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.aum) {
      var ac = T.add.lsct == hQ.WR ? hQ.z$ : hQ.WR,
        d = m.root.Zg(m.U.indexOf(T)),
        da = !1;
      if (n.M(gn.A8)) {
        var eJ = d.parent;
        for (var y = 0; y < eJ.children.length; y++) {
          var h$ = eJ.children[y].v;
          if (h$.D1()) h$.add.lsct = ac;
        }
      } else T.add.lsct = ac;
      for (var y = 0; y < m.J.length; y++) {
        var bb = m.J[y];
        if (d.dv < bb && bb < d.index) da = !0;
      }
      if (da) m.J = [d.index];
      m.Ls = !0;
    }
    if (W == R.vu) {
      if (!m.Lu(k)) return;
      var f = new eN(T.Yx ? [6, 19] : [6, 18], this);
      f.data = { R: W, v: k };
      m.Du(f);
      if (j.jt == null || j.jt != T.Yx) this.km(f.data, m);
    }
    if (W == R.au3) {
      if (T.mG()) T.uZ -= 32;
      else T.uZ += 32;
      m.Ls = !0;
    }
    if (W == R.yz || W == R.Re) {
      var f;
      if (W == R.yz)
        f = new eN(T.add.lmfx.masterFXSwitch.v ? [6, 30, 0] : [6, 29], this);
      if (W == R.Re)
        f = new eN(T.add.SoLd.filterFX.v.enab.v ? [6, 44] : [6, 43], this);
      f.data = { R: W, v: k };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.Ug || W == R.AR) {
      var k4 = j.index,
        f;
      if (W == R.Ug)
        f = new eN(
          T.add.lmfx[eu.C$[k4[0]]].v[k4[1]].v.enab.v ? [6, 30, 0] : [6, 29],
          this
        );
      if (W == R.AR)
        f = new eN(
          T.add.SoLd.filterFX.v.filterFXList.v[k4].v.enab.v ? [6, 44] : [6, 43],
          this
        );
      f.data = { R: W, v: k, index: j.index };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.hY) {
      if (j.src == j.Xf) return;
      var gb = m.U[j.src],
        fM = m.U[j.Xf],
        kS = gb.add.lmfx ? JSON.stringify(gb.add.lmfx) : "",
        cY = fM.add.lmfx ? JSON.stringify(fM.add.lmfx) : "";
      if (fM.add.lmfx == null) {
        fM.add.lmfx = JSON.parse(eu.default);
        for (var y = 0; y < eu.order.length; y++)
          fM.add.lmfx[eu.C$[y]] = { t: "VlLs", v: [] };
      }
      if (j.UX == null) {
        fM.add.lmfx = JSON.parse(kS);
        if (!b) delete gb.add.lmfx;
      } else {
        var cS = j.UX[0],
          k3 = eu.C$[cS];
        if (eu.acY.indexOf(eu.order[cS]) == -1) fM.add.lmfx[k3].v = [];
        fM.add.lmfx[k3].v.push(gb.add.lmfx[k3].v[j.UX[1]]);
        if (!b) gb.add.lmfx[k3].v.splice(j.UX[1], 1);
      }
      var di = gb.add.lmfx ? JSON.stringify(gb.add.lmfx) : "",
        a7 = fM.add.lmfx ? JSON.stringify(fM.add.lmfx) : "";
      if (!fM.mG()) fM.uZ += 32;
      var f = new eN("Move Layer Styles", this);
      f.data = {
        R: W,
        ZF: j.src,
        oU: j.Xf,
        a4Y: kS,
        at7: cY,
        akn: di,
        a9Y: a7,
      };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.Zq) {
      if (j.src != null) k = j.src;
      var o = m.U[k],
        b0 = JSON.stringify(o.add.SoLd),
        e1 = JSON.parse(b0),
        l2 = e1.filterFX.v.filterFXList.v;
      l2.splice(j.UX, 1);
      var f = new eN([6, 53], this);
      f.data = { R: R.vf, Az: [{ le: k, dM: [b0, JSON.stringify(e1)] }] };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.ao7) {
      var kL = b,
        gb = m.U[j.src],
        fM = m.U[j.Xf],
        es = [];
      if (gb != fM && fM.add.SoLd == null) {
        alert("Target layer is not a smart object!");
        return;
      }
      if (gb == fM && !kL && j.UX == j.wO) return;
      if (gb == fM && j.UX == -1) return;
      var kR = gb.xE(m),
        b0 = JSON.stringify(gb.add.SoLd),
        e1 = JSON.parse(b0),
        l2 = e1.filterFX.v.filterFXList.v;
      if (gb == fM) {
        l2.splice(j.wO, 0, l2[j.UX]);
        if (!kL) l2.splice(j.UX + (j.UX < j.wO ? 0 : 1), 1);
        es.push({ le: j.src, dM: [b0, JSON.stringify(e1)] });
      } else if (j.UX == -1) {
        var eH = e1.filterFX;
        if (!kL) {
          delete e1.filterFX;
          es.push({ le: j.src, dM: [b0, JSON.stringify(e1)], Pd: [kR, null] });
        }
        var cZ = fM.r3() ? fM.xE(m) : null,
          ga = fb.a9_(kR),
          fi = JSON.stringify(fM.add.SoLd),
          go = JSON.parse(fi);
        go.placed.v = ga.id;
        go.filterFX = eH;
        es.push({ le: j.Xf, dM: [fi, JSON.stringify(go)], Pd: [cZ, ga] });
      } else {
        var iz = l2[j.UX];
        if (!kL) {
          l2.splice(j.UX, 1);
          es.push({ le: j.src, dM: [b0, JSON.stringify(e1)] });
        }
        var fi = JSON.stringify(fM.add.SoLd),
          go = JSON.parse(fi);
        if (go.filterFX == null) go.filterFX = k0.X2();
        var i5 = go.filterFX.v.filterFXList.v;
        i5.splice(j.wO, 0, iz);
        var aI = { le: j.Xf, dM: [fi, JSON.stringify(go)] };
        if (!fM.r3()) {
          var ga = fb.aJK(fM.add.SoLd.placed.v, m.depth);
          aI.Pd = [null, ga];
        }
        es.push(aI);
      }
      var f = new eN([6, 52], this);
      f.data = { R: R.vf, Az: es };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.c8) {
      var ex = T.ex(),
        f = new eN(ex.jS ? [6, 26] : [6, 25], this);
      f.data = { R: W, v: k };
      m.Du(f);
      this.km(f.data, m);
      this.track({
        _D: "set",
        SC: {
          classID: "setd",
          null: { t: "obj ", v: [jw.$W("Lyr", !0)] },
          T: {
            t: "Objc",
            v: { classID: "Lyr", Usrs: { t: "bool", v: ex.jS } },
          },
        },
      });
    }
    if (W == R.jx) {
      var ex = T.add.vmsk,
        f = new eN(ex.jS ? [6, 28] : [6, 27], this);
      f.data = { R: W, v: k };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.oS) {
      var f = new eN("Variables / Datasets", this),
        bs = JSON.stringify([m.Mr, m.$n]);
      if (bs == j.K) return;
      f.data = { R: W, as2: bs, a8I: j.K };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.$I) {
      var k2 = [],
        f;
      for (var y = 0; y < m.J.length; y++) {
        var S = m.J[y],
          O = m.U[S];
        if (O.add.vogk) k2.push(S, JSON.stringify(O.add.vogk));
      }
      for (var y = 0; y < m.bR.length; y++) {
        var S = m.bR[y],
          O = m.GA[S];
        if (O.add.vogk) k2.push(-1 - S, JSON.stringify(O.add.vogk));
      }
      B.ih.aey(m, j.K, j.akU);
      var jG = [];
      for (var y = 0; y < m.J.length; y++) {
        var S = m.J[y],
          O = m.U[S];
        if (O.add.vogk) jG.push(S, JSON.stringify(O.add.vogk));
      }
      for (var y = 0; y < m.bR.length; y++) {
        var S = m.bR[y],
          O = m.GA[S];
        if (O.add.vogk) jG.push(-1 - S, JSON.stringify(O.add.vogk));
      }
      var x = m.iw();
      if (x && x.data && x.data.R == W) {
        var eW = !0;
        for (var y = 0; y < k2.length; y += 2)
          if (k2[y] != x.data.eD[y]) eW = !1;
        if (eW) {
          f = x;
          f.data.XX = jG;
        }
      }
      if (f == null) {
        var f = new eN([12, 91, 1], this);
        f.data = { R: W, eD: k2, XX: jG };
        m.Du(f);
      }
      this.km(f.data, m);
    }
    if (W == R.lN) {
      var gc = JSON.stringify(T.add.artb),
        k1 = JSON.stringify(j.iB),
        f;
      m.U[k].add.artb = JSON.parse(k1);
      var ke = new hk(0, 0, m.r, m.$),
        jh = L.xC.IU(m),
        x = m.iw();
      if (x && x.data && x.data.R == W && x.data.v == k) {
        f = x;
        f.data.iB = k1;
      }
      if (f == null) {
        var f = new eN("Editing Artboard", this);
        f.data = { R: W, v: k, aJR: gc, iB: k1, OM: ke };
        m.Du(f);
      }
      f.data.ad = jh;
      this.km(f.data, m);
    }
    if (W == R.z3) {
      var jG = m._E.slice(0),
        cE = m.y2.slice(0),
        cy = m.h,
        hl = m.h,
        s = m.I.rO.slice(0);
      if (j._G == "seltochannel") {
        var c2 = j.eQ[0],
          f9 = (jG[c2] = jG[c2].P()),
          d = B.hV.ZQ(m.h, f9, j.eQ[1]);
        f9.N = d.N;
        f9.H = d.H;
      }
      if (j._G == "fromAction") {
        var hu = j.K._D,
          le = j.K.SC;
        if (hu == "make" || hu == "duplicate") {
          var iJ = jG.length,
            kd = !1,
            bC = !1;
          if (m._C()) iJ--;
          var dZ = new R.T0(m.depth);
          dZ.name = "Alpha " + (iJ + 1);
          if (hu == "make") {
            var ev = le.Nw.v;
            dZ.color = 0;
            cE = [iJ];
            dZ.Ea = !0;
            dZ.YB = ev.Opct.v;
            if (ev.Nm) dZ.name = ev.Nm.v;
            if (ev.classID == "SCch") {
              kd = !0;
              hl = null;
              dZ.Sg = 1;
            }
            for (var y = 0; y < m._E.length; y++) m._E[y].Ea = !1;
            s = [0, 0, 0];
          } else {
            var O = m.U[m.J[0]],
              ak = O.ma == 1 ? O.ex() : O.ma == 3 ? O.xE(m).x7 : null,
              gD = le.null.v[0].v;
            if (le.Nm) dZ.name = le.Nm.v;
            if (gD.keyID == "fsel") kd = !0;
            else if (ak) {
              dZ.N = ak.N.slice(0);
              dZ.H = ak.H.P();
              dZ.color = ak.color;
            } else {
              var a9 = L.pI.aAj(m);
              hl = L.pI.aku(m, a9);
              dZ.color = 0;
              dZ.H = hl.H;
              dZ.N = hl.N;
            }
          }
          if (kd) {
            dZ.color = 0;
            if (m.h) {
              dZ.H = m.h.H.P();
              dZ.N = m.h.N.slice(0);
            }
            if (bC) {
              dZ.color = 255 - dZ.color;
              B.BR(dZ.N);
            }
          }
          jG.splice(iJ, 0, dZ);
        } else if (hu == "delete") {
          if (T && T.ex() && T.ma == 1) {
            this.BT({ R: R.zQ }, q, m, n, G);
            return;
          }
          var kk = m.y2;
          kk.sort(function (f, h7) {
            return h7 - f;
          });
          if (kk.length == 0) return;
          for (var y = 0; y < kk.length; y++) jG.splice(kk[y], 1);
          cE = [];
          s = [1, 1, 1];
        } else if (hu == "show" || hu == "hide") {
          var kX = le.null.v,
            kc = null,
            ew = !1;
          for (var y = 0; y < kX.length; y++) {
            var gS = kX[y].v[0].v,
              hp = gS.enum;
            if (hp == "Trgt") {
              if (jG[cE[0]] == null) continue;
              jG[cE[0]] = jG[cE[0]].P();
              jG[cE[0]].Ea = hu == "show";
              ew = !0;
            } else {
              var c2 = ["Rd", "Grn", "Bl"].indexOf(hp);
              if (kc == null) kc = m.I.rO.slice(0);
              kc[c2] = hu == "show" ? 1 : 0;
            }
          }
          if (kc) {
            var e = new fd(_.E.w, !0);
            e.l = L.C9;
            e.data = { R: "setcls", rO: kc };
            q.k(e);
            if (!ew) return;
          }
        }
      }
      if (j._G == "rnm") {
        jG[j.Wy] = jG[j.Wy].P();
        jG[j.Wy].name = j.name;
      }
      var f = new eN("Channel Edit", this);
      f.data = {
        R: W,
        eD: m._E.slice(0),
        aud: m.y2.slice(0),
        XX: jG,
        auC: cE,
        hF: cy,
        c_: hl,
        a97: m.I.rO.slice(0),
        abk: s,
      };
      this.km(f.data, m);
      m.Du(f);
    }
    if (W == R.DH) {
      var g2 = new hk(0, 0, m.r, m.$),
        f = new eN(j.ER, this);
      f.data = {
        R: R.DH,
        np: m.U.slice(0),
        nR: j.nR,
        Ne: m.J.slice(0),
        jw: j.c_,
      };
      m.Du(f);
      this.km(f.data, m);
      var jY = L.xC.jQ(m);
      if (jY) {
        f.data.OM = g2;
        f.data.ad = jY;
      }
    }
    if (W == R.dh) {
      var he = m.LP(null, j.v),
        gq = 1e10;
      if (he.length == 0) return;
      if (m.U.length == he.length) {
        alert("Project must have at least 1 layer");
        return;
      }
      var a5 = [];
      for (var y = 0; y < m.U.length; y++)
        if (he.indexOf(y) == -1) a5.push(m.U[y]);
      for (var y = 0; y < he.length; y++) gq = Math.min(gq, he[y]);
      while (gq > a5.length - 1) gq--;
      gq = Math.max(gq, 0);
      while (a5[gq].name == "</Layer group>") gq++;
      this.track({
        _D: "delete",
        SC: { classID: "Dlt", null: jw.$W("Lyr", !0) },
      });
      var ke = new hk(0, 0, m.r, m.$),
        f = new eN([6, 31], this);
      f.data = {
        R: R.DH,
        np: m.U.slice(0),
        nR: a5,
        Ne: m.J.slice(0),
        jw: [gq],
      };
      m.Du(f);
      this.km(f.data, m);
      var jh = L.xC.IU(m);
      if (jh) {
        f.data.ad = jh;
        f.data.OM = ke;
        L.xC.jQ(m);
      }
    }
    if (W == R.xp) {
      if (!n.M(gn.X6)) return;
      var f = new eN("Switch Layer Link", this);
      f.data = { R: W, v: j.v };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.Y1) {
      var kk = j.auL ? j.auL : m.J,
        fA = 0,
        jA = !1;
      if (kk.length == 0) return;
      if (kk.length == 1 && m.U[kk[0]].bH == 0) {
        alert(g$.get([15, 7, 5]));
        return;
      }
      var c3 = [];
      for (var y = 0; y < m.U.length; y++) {
        var fa = m.U[y].bH;
        c3.push(fa);
        fA = Math.max(fA, fa);
      }
      var kF = -1,
        dn = -1;
      for (var y = 0; y < kk.length; y++) {
        var fa = m.U[kk[y]].bH;
        if (fa == 0) jA = !0;
        else if (kF == -1 || kF == fa) kF = fa;
        else dn = fa;
      }
      if (!jA) for (var y = 0; y < kk.length; y++) m.U[kk[y]].bH = 0;
      else if (kF != -1 && dn == -1)
        for (var y = 0; y < kk.length; y++) m.U[kk[y]].bH = kF;
      else for (var y = 0; y < kk.length; y++) m.U[kk[y]].bH = fA + 1;
      var de = [];
      for (var y = 0; y < m.U.length; y++) {
        var fa = m.U[y].bH;
        if (de[fa] == null) de[fa] = 0;
        de[fa]++;
      }
      for (var y = 0; y < m.U.length; y++) {
        var fa = m.U[y].bH;
        if (de[fa] == 1) m.U[y].bH = 0;
      }
      var ks = c3;
      c3 = [];
      for (var y = 0; y < m.U.length; y++) {
        var fa = m.U[y].bH;
        c3.push(fa);
        fA = Math.max(fA, fa);
      }
      var f = new eN(jA ? [6, 54, 0] : [6, 54, 1], this);
      f.data = { R: R.Y1, a7N: ks, aj8: c3 };
      m.Du(f);
      this.km(f.data, m);
    }
    if ((W == R.iq && (j.v != null || m.J.length != 0)) || W == R.bF) {
      var fx = m.iG(W == R.iq ? j.v : k, null, j.aah),
        hT;
      if (W == R.bF) {
        var o = fx[0],
          hu = o.add.SoLd.Idnt.v,
          i7 = m.dp(hu).P();
        o.add.SoLd.Idnt.v = i7.ys = fb.Rh() + hu.slice(8);
        m.add.lnk2.push(i7);
      }
      if (W == R.iq) {
        var gT = {
          _D: "duplicate",
          SC: { classID: "null", null: jw.$W("Lyr", !0) },
        };
        if (j.p6) {
          fx[fx.length - 1].tV(j.p6);
          gT.Nm = { t: "TEXT", v: j.p6 };
        }
        this.track(gT);
        j.abp = j.v;
      }
      W = R.Cd;
      j.U = fx;
      j.xw = m;
      j.bC = m;
    }
    if (W == R.Cd) {
      var iC,
        br,
        eb = j.xw,
        kp = j.bC,
        bd = 0,
        js = 0,
        dL = eb.Tl(),
        bL = !1,
        cA,
        dP = 0,
        jX = 0;
      if (eb != kp) {
        console.log("ADDLAYERS different projs");
        var iC = new hk(0, 0, eb.r, eb.$),
          br = new hk(0, 0, kp.r, kp.$),
          hZ = [],
          fz = [],
          c0 = new hk();
        for (var y = 0; y < j.U.length; y++) {
          var o = j.U[y];
          c0 = c0.vd(o.H);
          if (o.add.SoLd == null) continue;
          var hu = o.add.SoLd.Idnt.v;
          if (hZ.indexOf(hu) == -1) {
            hZ.push(hu);
            fz.push(fb.Rh() + hu.slice(8));
          }
          o.add.SoLd.Idnt.v = fz[hZ.indexOf(hu)];
          var kR = o.xE(eb);
          if (kR) {
            eb._e(kR);
            kp.N8(kR);
          }
        }
        if (dL == -1 && !j.TL && j.ayS && !br.C2(c0)) {
          bd = -c0.x;
          js = -c0.y;
        }
        if (hZ.length > 0) {
          if (kp.add.lnk2 == null) kp.add.lnk2 = [];
          for (var y = 0; y < hZ.length; y++) {
            var jl = eb.dp(hZ[y]),
              i7 = jl.P();
            i7.ys = fz[y];
            kp.add.lnk2.push(i7);
          }
        }
      }
      var cy = kp.J.slice(0);
      cy.sort(function (f, h7) {
        return f - h7;
      });
      var a5 = kp.U.slice(0),
        hl = [],
        h4 = -1;
      for (var y = 0; y < cy.length; y++) h4 = Math.max(h4, cy[y]);
      if (j.abp != null) h4 = j.abp;
      if (j.TL) {
        h4 = j.TL - 1;
        var kP = kp.U[j.TL].Li();
        bd += kP.x;
        js += kP.y;
      }
      if (dL != -1 && (eb != kp || j.TL)) {
        var gx = eb.U[dL].Li();
        bd -= gx.x;
        js -= gx.y;
      }
      var gK = kp.f8();
      for (var y = 0; y < gK[0].length; y++) {
        var kK = gK[1][y];
        if (kK != -1) gK[1][y] = a5[kK];
      }
      h4++;
      for (var y = 0; y < j.U.length; y++) {
        var O = j.U[y],
          ce = O.add.artb;
        a5.splice(h4, 0, O);
        hl.push(h4);
        h4++;
        if (ce) {
          cA = !0;
          var iQ = ce.guideIndeces;
          if (iQ) {
            iQ = iQ.v;
            for (var j0 = 0; j0 < iQ.length; j0++) {
              gK[0].push(eb.M3[iQ[j0].v].slice(0));
              gK[1].push(O);
              bL = !0;
            }
          }
        }
      }
      for (var y = 0; y < gK[0].length; y++) {
        var kK = gK[1][y];
        if (kK != -1) gK[1][y] = a5.indexOf(kK);
      }
      for (var y = 0; y < j.U.length; y++) {
        var O = j.U[y];
        if (O.add.lsct == hQ.$a) {
          if (dP == 0) jX++;
          dP++;
        } else if (O.D1()) dP--;
      }
      if (jX == 1) hl = [h4 - 1];
      var lc = j.aBa;
      if (lc) {
        var h = [];
        for (var y = 0; y < hl.length; y++) h.push(a5[hl[y]]);
        for (var y = 0; y < lc.length; y++) a5.splice(a5.indexOf(lc[y]), 1);
        hl = [];
        for (var y = 0; y < h.length; y++) hl.push(a5.indexOf(h[y]));
      }
      var f = new eN([6, 0], this);
      f.data = { R: R.DH, np: kp.U.slice(0), nR: a5, Ne: cy, jw: hl };
      if (bL) {
        f.data.V$ = [kp.f8(), gK];
      }
      kp.Du(f);
      this.km(f.data, kp);
      if (bd != 0 || js != 0) L.YE.kW(kp, kp.LP(), null, bd, js);
      if (cA) {
        f.data.OM = new hk(0, 0, kp.r, kp.$);
        f.data.ad = L.xC.IU(kp);
        L.xC.jQ(kp);
      }
      if (eb.depth != kp.depth) {
        alert(
          "Converting from " +
            eb.depth +
            "-bit mode to " +
            kp.depth +
            "-bit mode."
        );
        L.Dq.aIY(kp, kp.J, kp.depth);
      }
      var cC = eb.$T(),
        j8 = kp.$T();
      if (eb != kp && (cC || j8)) {
        if (cC && j8 && B.Lg(cC[0], j8[0])) {
        } else {
          alert("Converting between color spaces");
          var eK = 17;
          if (cC) {
            var kh = cC[1],
              gI = ICC.U.sampleLUT(kh, eK);
            for (var y = 0; y < j.U.length; y++) {
              var h7 = j.U[y].buffer;
              ICC.U.applyLUT(gI, eK, h7, h7);
            }
          }
          if (j8) {
            var kh = j8[1],
              gI = ICC.U.sampleLUT(kh, eK, !0);
            for (var y = 0; y < j.U.length; y++) {
              var h7 = j.U[y].buffer;
              ICC.U.applyLUT(gI, eK, h7, h7);
            }
          }
        }
      }
    }
    if (W == R.kd) {
      var kr = j.v != null ? [j.v] : m.LP(),
        a5 = m.U.slice(0);
      for (var y = 0; y < kr.length; y++) {
        var O = m.U[kr[y]].P();
        O.pt(m);
        a5.splice(kr[y], 1, O);
      }
      var f = new eN([6, 8], this);
      f.data = {
        R: R.DH,
        np: m.U.slice(0),
        nR: a5,
        Ne: m.J.slice(0),
        jw: m.J.slice(0),
      };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.ad4) {
      var a5 = m.U.slice(0),
        O = (a5[m.J[0]] = a5[m.J[0]].P()),
        cJ = O.add.lmfx,
        dF,
        kP;
      delete O.add.lmfx;
      var iY = m.J[0],
        f7 = iY + 1;
      if (O.D1()) {
        var j$ = m.U[m.J[0]].a_;
        kP = j$.ahM;
        dF = j$.yB;
        var d = m.root.Zg(iY);
        iY = d.dv;
      } else {
        kP = O.H;
        dF = B.j(kP.C());
        B.Ih(B.sL(O.buffer, 8), dF, 3);
      }
      var dt = dS.XW(cJ, O.add.fxrp, dF, kP, m, kP),
        bQ = dt.e;
      dS.ag8(dt);
      for (var y = 0; y < eu.order.length; y++) {
        var fB = eu.order[y],
          eP = bQ[fB];
        eP.reverse();
        for (var j0 = 0; j0 < eP.length; j0++) {
          var jj = eP[j0],
            h = m.dj(),
            hU = y > 7;
          if (fB == "ebbl") {
            if (jj.NK || jj.D9) {
              var bi = jj.NK ? jj.NK : jj.D9;
              if (jj.NK) delete jj.NK;
              else delete jj.D9;
              if (jj.D9 || jj.oL) j0--;
            } else if (jj.oL || jj.y6) {
              var bi = jj.y6 ? jj.y6 : jj.oL;
              if (jj.y6) {
                delete jj.y6;
                if (jj.oL) j0--;
              }
              hU = !0;
            }
            jj = bi;
          }
          h.hz = jj.aM;
          h.yA = Math.round(255 * jj.uH);
          h.buffer = B.sL(jj.sE, m.depth);
          h.H = jj.PK.P();
          h.H.offset(kP.x, kP.y);
          if (fB == "FrFX") {
            h.buffer = h.buffer.slice(0);
            B.ln(B.sL(jj.Wb ? jj.Wb : jj.fd, m.depth), h.buffer, 3);
            if (jj.Wb) {
              hU = !0;
              delete jj.Wb;
              if (jj.fd) j0--;
            }
          }
          h.Yx = !hU;
          h.tV(O.getName() + "'s " + g$.get(eu.names[y]));
          a5.splice(hU ? iY : f7, 0, h);
          if (hU) f7++;
        }
      }
      var f = new eN("Styles to Layers", this);
      f.data = {
        R: R.DH,
        np: m.U.slice(0),
        nR: a5,
        Ne: m.J.slice(0),
        jw: [f7 - 1],
      };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.aqQ) {
      var kr = m.LP(),
        a5 = m.U.slice(0),
        kw = new hk(0, 0, m.r, m.$);
      for (var y = 0; y < kr.length; y++) {
        var dY = m.U[kr[y]],
          g5 = dY.Iw();
        dY.xg(!0);
        var ge = m.root.Zg(kr[y]);
        if (dY.D1()) continue;
        if (ge == null) continue;
        var O = dY.P();
        O.pt(m);
        var ez = ge.Fj(m, !0),
          lu = m.U;
        m.e0([dY]);
        m.gF();
        m.iY();
        O.buffer = B.j(ez.C() * 4);
        B.M4(m.ht(), kw, O.buffer, ez);
        O.H = ez;
        O.yA = 255;
        O.add.iOpa = 255;
        O.hz = "norm";
        O.gF();
        O.a_.Zs = !0;
        m.e0(lu);
        if (O.add.lmfx) delete O.add.lmfx;
        O.x7 = O.Zr = null;
        a5.splice(kr[y], 1, O);
        O.xg(g5);
        dY.xg(g5);
      }
      var f = new eN([6, 34], this);
      f.data = {
        R: R.DH,
        np: m.U.slice(0),
        nR: a5,
        Ne: m.J.slice(0),
        jw: m.J.slice(0),
      };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.ei) {
      var kr = m.LP(),
        a5 = m.U.slice(0);
      for (var y = 0; y < kr.length; y++) {
        var O = m.U[kr[y]],
          h3 = O.add.TySh;
        if (h3 == null) continue;
        var o = new gu(h3.s3, G.HS, h3.Ix),
          fm = B.b.Xl(bq.Yi(o, h3, !0));
        for (var lg in fm) {
          var dd = fm[lg],
            h$ = O.P();
          delete h$.add.TySh;
          h$.uZ = h$.uZ | (1 << 4);
          h$.add.SoCo = B.S(eu.zf[0]);
          var j4 = h$.add.SoCo.Clr.v;
          j4.Rd.v = parseInt(lg.slice(1, 3), 16);
          j4.Grn.v = parseInt(lg.slice(3, 5), 16);
          j4.Bl.v = parseInt(lg.slice(5, 7), 16);
          var fP = new R.tm();
          fP.D = B.b.LZ(dd, !1);
          if (h$.add.vmsk != null) {
            h$.add.vmsk.axz();
            fP.concat(h$.add.vmsk);
          }
          h$.add.vmsk = fP;
          h$.add.vstk = eu.rS.i4(!0);
          h$.Pp();
          h$.D5(m);
          a5.splice(a5.indexOf(O), 0, h$);
        }
        a5.splice(a5.indexOf(O), 1);
      }
      var hl = m.J.slice(0);
      for (var y = hl.length - 1; y >= 0; y--)
        if (hl[y] >= a5.length) hl.splice(y, 1);
      var f = new eN([6, 40], this);
      f.data = { R: R.DH, np: m.U.slice(0), nR: a5, Ne: m.J.slice(0), jw: hl };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.ax4) {
      var iV = m.J.length,
        aN,
        e0;
      if (iV < 2) {
        alert("Select two or more layers.");
        return;
      }
      for (var y = 0; y < iV; y++) {
        var gx = m.U[m.J[y]].H;
        aN = y == 0 ? gx : aN.TM(gx);
        e0 = y == 0 ? gx : e0.vd(gx);
      }
      if (aN.C() * 1.2 > e0.C()) {
        alert("stacking images");
        var h_ = [],
          gB = [];
        for (var y = 0; y < iV; y++) {
          var O = m.U[m.J[y]];
          h_.push(O.buffer);
          gB.push(O.H);
        }
        var l5 = B.aek.SU(h_, gB),
          ih = l5[0],
          kg = l5[1],
          fp = [];
        for (var y = 0; y < iV; y++) {
          var ex = new R.T0(m.depth);
          ex.color = 255;
          ex.H = kg;
          ex.N = ih[y];
          fp.push(m.J[y], null, ex);
        }
        var f = new eN("Focus-Stack", this);
        f.data = { R: R.MT, xI: fp };
        m.Du(f);
        this.km(f.data, m);
        return;
      }
      if (!m.Pl()) return;
      var h$ = m.U[m.J[0]].P(),
        a5 = [];
      for (var y = 0; y < m.U.length; y++)
        if (m.J.indexOf(y) == -1) a5.push(m.U[y]);
      a5.splice(m.J[0], 0, h$);
      for (var y = 1; y < iV; y++)
        if (m.U[m.J[y]].H.C() > 2e6) {
          alert("Blended areas are too large.");
          return;
        }
      for (var y = 1; y < iV; y++) {
        var O = m.U[m.J[y]],
          kg = O.H.P();
        kg.Lh(1, 1);
        var h7 = B.j(kg.C() * 4);
        B.M4(O.buffer, O.H, h7, kg);
        h$.extend(kg);
        var e6 = B.j(kg.C() * 4);
        B.M4(h$.buffer, h$.H, e6, kg);
        var f = B.j(kg.C());
        B.Ih(h7, f, 3);
        B.round(f, 200);
        B.ln(f, h7, 3);
        B.G.Jg("norm", h7, kg, e6, kg, kg, 1);
        B.iL.AC(e6, f, kg);
        B.M4(e6, kg, h$.buffer, h$.H);
      }
      var f = new eN([2, 10, 0], this);
      f.data = {
        R: R.DH,
        np: m.U.slice(0),
        nR: a5,
        Ne: m.J.slice(0),
        jw: [m.J[0]],
      };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.Ll) {
      var a5 = m.U.slice(0),
        cE = m.J.slice(0);
      for (var y = 0; y < a5.length; y++) {
        var O = a5[y],
          ck = O.add.vmsk;
        if (
          O.ql() &&
          ck &&
          O.add.vstk.strokeEnabled.v &&
          !O.add.vstk.fillEnabled.v
        ) {
          var eF = ck.D,
            aq = 0,
            jW = -1;
          for (var j0 = 0; j0 < eF.length; j0++) {
            if ((eF[j0].e == 0 || eF[j0].e == 3) && eF[j0].Np != -1) {
              aq++;
              if (eF[j0].e == 3 && jW == -1) {
                eF[j0].uc = eF[j0].Np = 1;
                jW = j0;
              }
            }
          }
          if (aq > 1 && jW != -1 && aq < 10) {
            console.log("separating an open path into a new layer");
            O = O.P();
            ck = O.add.vmsk;
            eF = ck.D;
            var h = eF[jW].length,
              lc = O.P();
            lc.add.lyid = m.Na();
            ck.D = eF.slice(0, 2).concat(eF.slice(jW, jW + h + 1));
            ck.J = [];
            O.D5(m);
            O.gF();
            var eU = lc.add.vmsk.D;
            lc.add.vmsk.D = eU
              .slice(0, jW)
              .concat(eU.slice(jW + h + 1, eU.length));
            lc.add.vmsk.J = [];
            lc.D5(m);
            a5[y] = O;
            a5.splice(y + 1, 0, lc);
            for (var j0 = 0; j0 < cE.length; j0++) if (cE[j0] > y) cE[j0]++;
            var bB = cE.indexOf(y);
            if (bB != -1) {
              cE.splice(bB + 1, 0, y + 1);
            }
          }
        }
      }
      if (a5.length != m.U.length) {
        var f = new eN("Splitting open paths", this);
        f.data = {
          R: R.DH,
          np: m.U.slice(0),
          nR: a5,
          Ne: m.J.slice(0),
          jw: cE,
        };
        m.Du(f);
        this.km(f.data, m);
      }
    }
    if (W == R.k1) {
      this.BT({ R: R.Ll }, q, m, n, G);
      var cy = m.J.slice(0),
        lu = m.U.slice(0),
        kr = m.LP();
      if (kr.length == 0) return;
      m.apY(kr, !1, j.hr);
      var f = new eN([6, 36, 0], this);
      f.data = { R: R.DH, np: lu, nR: m.U.slice(), Ne: cy, jw: m.J.slice(0) };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.aGz) {
      var b0 = T.add.SoLd;
      if (b0 == null) return;
      var hu = b0.Idnt.v,
        j_ = m.dp(hu);
      j_.ht(!1);
      var cH = B.sL(j_.Zj[0], 8),
        kg = j_.Zj[1];
      if (B.kP(cH)) {
        alert("The smart object contains transparency.");
        return;
      }
      var bP = gh.lj("jpg").Ev([[cH.buffer]], kg.r, kg.$, [90]);
      this.BT(
        { R: R.wm, data: new Uint8Array(bP), Sh: "image.jpg" },
        q,
        m,
        n,
        G
      );
      console.log(m.add);
      return;
    }
    if (W == R.hA) {
      var b0 = T.add.SoLd,
        i2 = !1;
      if (b0 == null) return;
      var hu = b0.Idnt.v,
        ed = new fb();
      hx.VB(m.Kv(hu).raw.buffer, ed);
      if (j._G != "del")
        for (var y = 1; y < ed.U.length - 1; y++) ed.U[y].xg(!1);
      if (j._G == "switch") {
        ed.U[j.K].xg(!0);
        i2 = !0;
      } else if (j._G == "del") {
        ed.U.splice(j.K, 1);
        ed.J = [ed.U.length - 1];
      } else {
        var O = ed.dj();
        O.H = T.H.P();
        O.tV(j.ajW);
        var cX = (O.buffer = B.j(O.H.C() * 4));
        B.M4(j.K[0], j.K[1], cX, O.H);
        O.H.x = O.H.y = 0;
        ed.U.splice(ed.U.length - 1, 0, O);
      }
      var kE = gh.qs.Ev(ed);
      this.BT(
        { R: R.wm, data: new Uint8Array(kE), Sh: "image.psd", id: hu, adA: i2 },
        q,
        m,
        n,
        G
      );
      return;
    }
    if (W == R.wm) {
      var kw = j.fg,
        hu = j.id;
      if (kw == null) kw = m;
      if (hu == null) hu = T.add.SoLd.Idnt.v;
      var jl = kw.dp(hu),
        i7 = jl.P();
      i7.raw = j.data;
      i7.Sh = j.Sh;
      var iM = gh.Qa(j.data.buffer);
      if (iM == "psd") {
        i7.V6 = "8BIM";
        i7.pb = "8BPB";
      } else {
        i7.V6 = "    ";
        i7.pb = "    ";
      }
      i7.ht(!1);
      jl.ht(!1);
      var N = m.iw();
      if (j.adA && N && N.l == this && N.data.R == W && N.data.id == hu) {
        f = N;
        f.data.Dx = i7;
      } else {
        var f = new eN(j.adA ? "Select Variation" : [6, 36, 1], this);
        f.data = { R: R.wm, id: hu, aB1: jl, Dx: i7 };
        kw.Du(f);
      }
      this.km(f.data, kw);
    }
    if (W == R.b1) {
      var f = new eN([6, 36, 4], this);
      f.data = { R: W, v: k, pv: T.add.SoLd.Impr.v.classID, jt: j.jt };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.YK) {
      var hA, hf;
      if (j.Ps) {
        hA = j.fg;
        hf = j.Ps;
      } else {
        j.fg.DB();
        j.fg.l6();
        j.fg.gF();
        j.fg.iY();
        j.fg.ht();
        hA = gh.lj("PSD").Ev(j.fg, 0, 0, [!0, !0]);
        hf = j.fg.name;
      }
      if (!(hA instanceof ArrayBuffer)) throw "e";
      hA = new Uint8Array(hA);
      var D = j.lR;
      if (D == null) {
        if (m.J.length == 0) D = m.J.length;
        else {
          var bb = m.J[m.J.length - 1],
            h = m.U[bb];
          D = h.D1() ? bb : bb + 1;
        }
      }
      var hi = new hk(0, 0, m.r, m.$),
        bX = m.Tl();
      if (bX != -1) hi = m.U[bX].Li();
      var a6 = m.Pi(hA, hf, null, null, hi, G.HS, q),
        a5 = m.U.slice(0);
      a5.splice(D, 0, a6);
      var f = new eN([6, 36, 2], this);
      f.data = {
        R: R.DH,
        np: m.U.slice(),
        nR: a5,
        Ne: m.J.slice(0),
        jw: [a5.indexOf(a6)],
      };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.Pk && j._G == "merge") {
      var jQ = [],
        ae = m.root.children,
        gF = 0;
      for (var y = 0; y < ae.length; y++) {
        var d = ae[y],
          O = d.v,
          jR = d.children,
          k5 = !0;
        if (!O.D1() || jR.length == 0) continue;
        for (var j0 = 0; j0 < jR.length; j0++)
          if (!jR[j0].v.getName().startsWith("_a_")) {
            k5 = !1;
            break;
          }
        if (k5) jQ.push(m.U.indexOf(O));
      }
      var jf = [];
      for (var y = 0; y < jQ.length; y++)
        if (m.J.indexOf(jQ[y]) != -1) jf.push(jQ[y]);
      if (jf.length >= 2) jQ = jf;
      if (jQ.length < 2) {
        alert(
          'At least two animation folders needed (whose layers start with "_a_").',
          3500
        );
        return;
      }
      var ig = [];
      for (var y = 0; y < jQ.length; y++) ig.push(m.U[jQ[y]].getName());
      var eP = [];
      for (var kH = 0; kH < jQ.length; kH++) {
        var d = m.root.Zg(jQ[kH]),
          aI = [[], [], 0, kH];
        eP.push(aI);
        for (var y = 0; y < d.children.length; y++) {
          var S = d.children[y].index,
            O = d.children[y].v,
            dZ = O.getName(),
            i6 = 20,
            d3 = dZ.split(",");
          if (d3.length > 1) {
            var g4 = parseInt(d3.pop());
            if (!isNaN(g4) && g4 != 0) i6 = g4;
          }
          if (i6 < 17) i6 = 17;
          aI[0].push(O);
          aI[1].push(i6);
          aI[2] += i6;
        }
      }
      eP.sort(function (f, h7) {
        return h7[2] - f[2];
      });
      if (eP[0][2] > 2e3) {
        var fH = 0,
          kM = 0;
        for (var y = 0; y < eP.length; y++) {
          var b9 = eP[y][1].length / eP[y][2];
          if (b9 > kM) {
            kM = b9;
            fH = y;
          }
        }
        var iU = (eP[0][2] / 1e3).toFixed(1),
          cM = window.confirm(
            '- "' +
              ig[eP[0][3]] +
              '" is ' +
              iU +
              " seconds long\n" +
              '- "' +
              ig[eP[fH][3]] +
              '" is playing at ' +
              Math.round(kM * 1e3) +
              " frames per second\n" +
              "A merged animation must be " +
              iU +
              " sec, up to " +
              Math.round(eP[0][2] * kM) +
              " frames. Proceed?"
          );
        if (!cM) return;
      }
      var hq = eP[0],
        fX = hq[2];
      for (var kK = 1; kK < eP.length; kK++) {
        var aI = eP[kK],
          hV = 1,
          bO = aI[1].slice(0),
          aK = 0;
        while ((hV + 1) * aI[2] <= hq[2]) {
          hV++;
          bO = bO.concat(aI[1]);
        }
        aI[1] = bO;
        aI[2] *= hV;
        var d_ = hq[2] / aI[2];
        for (var y = 0; y < aI[1].length; y++) {
          var jD = Math.floor(aI[1][y] * d_);
          aI[1][y] = jD;
          aK += jD;
        }
        while (aK < fX) {
          aK++;
          aI[1][aI[1].length - 1]++;
        }
        aI[2] = aK;
      }
      var b1 = [],
        g6 = [],
        jD = [];
      for (var y = 0; y < eP.length; y++) {
        b1.push(0);
        g6.push(0);
      }
      while (gF < fX) {
        var km = 1e9,
          iJ = -1;
        for (var y = 0; y < eP.length; y++) {
          var la = eP[y][1],
            iY = b1[y];
          if (iY != la.length && g6[y] + la[iY] < gF + km) {
            iJ = y;
            km = g6[y] + la[iY] - gF;
          }
        }
        g6[iJ] += eP[iJ][1][b1[iJ]];
        b1[iJ]++;
        if (km != 0) {
          jD.push(km);
          gF += km;
        }
      }
      for (var y = 1; y < jD.length; y++) {
        var hr = jD[y];
        if (
          hr < 16 &&
          (jD[y - 1] < 16 || (y < jD.length - 1 && 16 <= jD[y + 1]))
        ) {
          jD[y - 1] += hr;
          jD.splice(y, 1);
          y--;
        }
      }
      var g5 = [],
        kw = new hk(0, 0, m.r, m.$);
      for (var y = 0; y < m.U.length; y++) {
        g5[y] = m.U[y].Iw();
        m.U[y].xg(!1);
      }
      var cc = m.J.slice(0);
      m.J = jQ;
      var he = m.LP();
      he.sort(function (f, h7) {
        return f - h7;
      });
      var a5 = [];
      for (var y = 0; y < m.U.length; y++) {
        if (he.indexOf(y) == -1) a5.push(m.U[y]);
      }
      eP.sort(function (f, h7) {
        return f[3] - h7[3];
      });
      function gW(la, l7) {
        var y = 0,
          cO = 0;
        while (cO + la[y] <= l7) {
          cO += la[y];
          y++;
        }
        return y;
      }
      gF = 0;
      a5.splice(he[0], 0, m.to());
      for (var cz = 0; cz < jD.length; cz++) {
        var l = [];
        for (var y = 0; y < eP.length; y++) {
          var iY = gW(eP[y][1], gF) % eP[y][0].length,
            O = eP[y][0][iY];
          l.push(O);
        }
        var O = m.dj();
        for (var y = 0; y < eP.length; y++) {
          var e7 = l[y],
            eJ = m.U[jQ[y]];
          e7.xg(!0);
          eJ.xg(!0);
        }
        m.gF();
        m.iY();
        var cH = m.ht();
        O.H = B.Xh(cH, kw, 2);
        O.buffer = B.j(O.H.C() * 4);
        B.M4(cH, kw, O.buffer, O.H);
        for (var y = 0; y < eP.length; y++) {
          var e7 = l[y],
            eJ = m.U[jQ[y]];
          e7.xg(!1);
          eJ.xg(!1);
        }
        O.xg(cz == 0);
        O.tV("_a_frm" + cz + "," + jD[cz]);
        a5.splice(he[0] + 1 + cz, 0, O);
        gF += jD[cz];
      }
      var O = m.dj();
      O.tV(ig.join(" + "));
      O.hz = "pass";
      O.add.lsct = hQ.z$;
      O.uZ = 24;
      a5.splice(he[0] + 1 + jD.length, 0, O);
      for (var y = 0; y < m.U.length; y++) m.U[y].xg(g5[y]);
      var f = new eN([6, 12, 0], this);
      f.data = {
        R: R.DH,
        np: m.U,
        nR: a5,
        Ne: cc,
        jw: [he[0] + 1 + jD.length],
      };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.T4) {
      var d$ = j.hV,
        ad = m.J.slice(0);
      ad.sort(function (f, h7) {
        return f - h7;
      });
      if (ad.length < 2) {
        alert("Select at least two layers.");
        return;
      }
      for (var y = 0; y < ad.length; y++)
        if (!m.U[ad[y]].ql()) {
          alert("Select only vector shapes.");
          return;
        }
      var h2 = [
          ["AuB"],
          ["AsB"],
          ["AiB"],
          ["AsB", "BsA"],
          ["AsB", "BsA", "AiB"],
          ["AsB", "B"],
          ["AuB"],
          ["BsAs", "AiB"],
          ["BsAs", "AiBs", "AsBs"],
          ["BsA"],
        ],
        fx = [],
        dU = h2[d$],
        jS = R.tm.Fo,
        kt = m.U[ad[0]].add.vmsk,
        dT = m.U[ad[1]].add.vmsk,
        H = jS(kt.D),
        iG = jS(dT.D);
      for (var y = 2; y < ad.length; y++)
        iG = iG.concat(m.U[ad[y]].add.vmsk.D.slice(2));
      H[2].uc = kt.uc == 0 ? 2 : 1;
      for (var y = 3; y < H.length; y++) if (H[y].Np != null) H[y].Np = -1;
      iG[2].uc = dT.uc == 0 ? 2 : 1;
      for (var y = 3; y < iG.length; y++) if (iG[y].Np != null) iG[y].Np = -1;
      if (dU.length > 1) fx.push(m.to());
      for (var y = 0; y < dU.length; y++) {
        var aZ = dU[y],
          O = m.U[ad[d$ == 1 ? 0 : ad.length - 1]].P(),
          ck = O.add.vmsk;
        B.ih.jl(O.add.vogk);
        fx.push(O);
        if (aZ.length == 1) ck.D = jS(aZ == "A" ? H : iG);
        else {
          var f = H,
            h7 = iG;
          if (aZ[0] == "B") {
            f = iG;
            h7 = H;
          }
          f = jS(f);
          h7 = jS(h7);
          for (var j0 = 0; j0 < h7.length; j0++)
            if (h7[j0].Np != null && h7[j0].Np != -1)
              h7[j0].Np = { u: 1, s: 2, i: 3 }[aZ[1]];
          ck.D = B.z.TV(f.concat(h7.slice(2)));
          if (aZ[3] == "s") O.add.vstl.dZ = [];
        }
      }
      if (dU.length > 1) {
        var O = m.dj();
        O.tV("<Group>");
        fx.push(O);
        O.add.lsct = hQ.z$;
        O.hz = "pass";
        O.uZ = 24;
      }
      var a5 = [],
        hl = [];
      for (var y = 0; y < m.U.length; y++)
        if (ad.indexOf(y) == -1) a5.push(m.U[y]);
      for (var y = 0; y < fx.length; y++) {
        a5.splice(ad[0] + y, 0, fx[y]);
        hl.push(ad[0] + y);
      }
      var f = new eN("Pathfinder", this);
      f.data = { R: R.DH, np: m.U.slice(0), nR: a5, Ne: m.J, jw: hl };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.agg) {
      var a5 = m.U.slice(0),
        hl = [],
        iJ = m.J[0],
        bb = 0;
      a5.splice(iJ, 1);
      var dY = m.U[iJ];
      while (!0) {
        var O = dY.P(),
          ck = O.add.vmsk,
          eF = ck.D,
          aH = B.z.kH(eF, bb),
          kG = B.z.kH(eF, bb + 1);
        if (aH == -1) break;
        if (kG == -1) kG = 1e9;
        ck.D = eF.slice(0, 2).concat(eF.slice(aH, kG));
        O.D5(m);
        a5.splice(iJ + bb, 0, O);
        hl.push(iJ + bb);
        bb++;
      }
      var f = new eN([6, 12, 0], this);
      f.data = { R: R.DH, np: m.U.slice(0), nR: a5, Ne: m.J.slice(0), jw: hl };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R._6 || W == R.wq) {
      var db = m.J.length == 1 && !m.U[m.J[0]].D1(),
        fN = !0,
        a6 = null,
        hl;
      if (db && m.J[0] == 0) return;
      var b3 = W == R._6 && j.v != null && m.J.indexOf(j.v) == -1,
        lu = m.U.slice(0),
        cy = m.J.slice(0);
      if (db || b3) m.J = [k, k - 1];
      if (W == R.wq) {
        m.J = [];
        for (var y = 0; y < m.U.length; y++) if (m.U[y].Iw()) m.J.push(y);
      }
      var kr = m.LP();
      kr.sort(function (f, h7) {
        return f - h7;
      });
      var gQ = new hk(),
        kw = new hk(0, 0, m.r, m.$);
      for (var y = 0; y < kr.length; y++) {
        var S = kr[y],
          O = m.U[S];
        if (O.D1() || O.getName() == "</Layer group>") continue;
        fN = fN && O.ql() && O.add.vmsk != null;
        gQ = gQ.vd(m.root.Zg(S).Fj(m, !0));
      }
      if (j.hV != null && !fN) {
        alert("Select shape layers only.");
        return;
      }
      if (fN) {
        var ck = null,
          d$ = j.hV;
        for (var y = 0; y < kr.length; y++) {
          var h = m.U[kr[y]];
          if (ei == 0 && h.H.C() == 0) continue;
          if (a6 == null) {
            a6 = h.P();
            ck = a6.add.vmsk;
          } else {
            var h = m.U[kr[y]],
              eU = R.tm.Fo(h.add.vmsk.D);
            if (d$ != null)
              for (var j0 = 0; j0 < eU.length; j0++)
                if (eU[j0].Np != null && eU[j0].Np != -1)
                  eU[j0].Np = [1, 2, 3, 0][d$];
            ck.D = ck.D.concat(eU.slice(2));
            a6.add.vogk = a6.add.vogk.concat(B.S(h.add.vogk));
          }
        }
        a6.add.vmsk.xo = !0;
        a6.D5(m);
      } else if (kw.Jn(gQ)) {
        a6 = m.dj();
        a6.tV(m.U[kr[kr.length - 1]].getName());
        a6.H = gQ;
        a6.buffer = B.j(gQ.C() * 4, m.depth);
        var iW = m.add.artd;
        delete m.add.artd;
        var bw = m.ht(kr);
        if (iW) m.add.artd = iW;
        B.M4(bw, kw, a6.buffer, gQ);
        a6.yy();
        a6.gF();
      } else {
        m.apY(kr, !0);
        a6 = m.U[m.J[0]];
        m.U.splice(m.J[0], 1);
        var cF = m.dp(a6.add.SoLd.Idnt.v);
        m.add.lnk2.splice(m.add.lnk2.indexOf(cF), 1);
        delete a6.add.SoLd;
      }
      var fe = b,
        cv = -1;
      if (j.SC && j.SC.Dplc && j.SC.Dplc.v) fe = !0;
      if (
        fe &&
        W == R.wq &&
        cy.length != 0 &&
        m.U[cy[0]].bm() &&
        m.U[cy[0]].H.jG()
      ) {
        cv = cy[0];
      }
      if (cv != -1 || db) {
        var jN = m.U[cv != -1 ? cv : k - 1];
        a6.tV(jN.getName());
        a6.add.lclr = jN.add.lclr;
      }
      var a5 = [];
      for (var y = 0; y < m.U.length; y++)
        if (fe || kr.indexOf(y) == -1) if (y != cv) a5.push(m.U[y]);
      var aV = kr[kr.length - 1],
        cR = aV == m.U.length - 1 ? null : m.U[aV + 1],
        kO = cR ? a5.indexOf(cR) : a5.length;
      a5.splice(kO, 0, a6);
      hl = [kO];
      if (b3) hl = cy.slice(0);
      var f = new eN([6, 12, 0], this);
      f.data = { R: R.DH, np: lu, nR: a5, Ne: cy, jw: hl };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.a1P) {
      var h$ = m.dj();
      h$.H = new hk(0, 0, m.r, m.$);
      h$.buffer = B.j(h$.H.C() * 4);
      h$.buffer.fill(255);
      B.G.Jg("norm", m.ht(), h$.H, h$.buffer, h$.H, h$.H, 1);
      h$.tV("Background");
      h$.add.lspf = 1 << 2;
      var f = new eN([6, 12, 1], this);
      f.data = {
        R: R.DH,
        np: m.U.slice(),
        nR: [h$],
        Ne: m.J.slice(0),
        jw: [0],
      };
      m.Du(f);
      this.km(f.data, m);
    }
    var gm = W == R.IW || W == R.tD;
    if (W == R.YJ || W == R.Vh || W == R.gy || W == R.bG || gm) {
      var O = gm ? m.iG()[0] : m.dj(),
        is = g$.get([0, 3]),
        f4 = j.p6,
        fR = !1,
        aT,
        ai;
      if (W == R.gy) is = g$.get([12, 76, 1]);
      if (gm) {
        if (m.h) {
          var dY = m.U[m.J[0]],
            l0 = dY.mr(m, m.h);
          if (l0 == null) {
            alert("Copied area is empty");
            return;
          }
          O.H = l0.H;
          O.buffer = l0.py;
          O.pt(m);
          O.xg(!0);
        } else f4 = O.getName();
        O.add.lspf = 0;
        O.Yx = !1;
        if ((O.uZ & 1) != 0) O.uZ--;
      }
      if (W == R.bG) {
        O.H = L.zl.a1l(j.kJ, m);
        O.buffer = B.sL(j.kJ.buffer.slice(0), B.oM(O.buffer));
        if (j.azG && m.h) {
          O.x7 = new R.T0(m.depth);
          O.x7.H = m.h.H;
          O.x7.color = 0;
          O.x7.N = m.h.N.slice(0);
        }
      }
      if (W == R.YJ) {
        this.track({ _D: "make", SC: { classID: "Mk", null: jw.$W("Lyr") } });
      }
      if (W == R.Vh) {
        O.uZ |= 16;
        var jO = j.SC.Usng.v,
          d6 = jO.Type.v,
          jk = eV.cl[d6.classID];
        is = g$.get(eV.names[jk]);
        if (jO.Nm) f4 = jO.Nm.v;
        O.add[jk] = k0.i4(jk);
        if (O.add[jk] == null) O.add[jk] = {};
        for (var dB in d6) O.add[jk][dB] = B.S(d6[dB]);
        O.x7 = L.zl.a4P(m);
        O.ma = 1;
      }
      if (W == R.gy) {
        O.uZ |= 16;
        var le = j.SC,
          jO = le.Usng.v,
          jZ = jO.Type.v,
          ix = jO.Shp;
        if (jO.Nm) f4 = jO.Nm.v;
        if (ix == null) {
          var ie = m.ac(),
            fm = ie[0],
            bN = ie[1];
          if (bN.length != 0 && fm[bN[0]].Wy < 0) {
            var b5 = fm[bN[0]].add;
            O.add.vmsk = b5.vmsk.P();
            O.add.vstk = eu.rS.i4(!0);
            O.add.vogk = B.S(b5.vogk);
            m.bR = [];
          } else O.x7 = L.zl.a4P(m);
        } else {
          O.add.vmsk = new R.tm();
          O.add.vstk = B.S(jO.strokeStyle ? jO.strokeStyle.v : eu.rS.i4(!0));
          O.add.vogk = [];
          if (ix) {
            var lp = B.ih.p$(ix, m.r, m.$);
            if (lp) {
              O.add.vogk = [lp];
              O.add.vmsk.D.push({ e: 0, Np: 1, length: 0 });
              B.ih.ib(O.add.vogk, O.add.vmsk);
            } else {
              ix = ix.v;
              var bF = ix.classID;
              if (bF == "Plgn") {
                var gS = ix.Cntr.v,
                  gx = ix.corner.v;
                gS = new ea(gS.Hrzn.v.val, gS.Vrtc.v.val);
                gx = new ea(gx.Hrzn.v.val, gx.Vrtc.v.val);
                O.add.vmsk.D = B.z.cn.Or(
                  gS.x,
                  gS.y,
                  Math.sqrt(gx.x * gx.x + gx.y * gx.y),
                  Math.atan2(gx.y, gx.x),
                  ix.sides.v,
                  0
                );
              } else if (bF == "customShape") {
                var jr = B.ih.et(ix),
                  fw = jr[2] - jr[0],
                  eI = jr[3] - jr[1],
                  hE = G.Jh,
                  jx,
                  fV;
                for (var y = 0; y < hE.length; y++)
                  if (hE[y].q6 == ix.Nm.v) jx = hE[y];
                if (jx) {
                  fV = R.tm.Fo(jx.D);
                  B.z.La(fV, new k$(fw, 0, 0, eI, jr[0], jr[1]));
                } else fV = B.z.cn.Rect(jr[0], jr[1], fw, eI, 0);
                O.add.vmsk.D = fV;
              }
              O.Pp();
            }
          }
        }
        if (ei == 0) {
          var gs = { solidColorLayer: 0, gradientLayer: 1, patternLayer: 2 }[
              jZ.classID
            ],
            il = ["SoCo", "GdFl", "PtFl"][gs];
          O.add[il] = B.S(eu.zf[gs]);
          if (gs == 0) O.add[il].Clr.v = B.MV.Ia(B.b4(G.UP));
          L.zl.C5(jZ, O.add[il], gs);
          if (ix == null) is = g$.get([6, 48, 0, gs]);
          var j1 = m.Tl();
          if (il == "GdFl" && j1 != -1) {
            var kP = m.U[j1].Li(),
              h1 = kP.x + kP.r / 2,
              d4 = kP.y + kP.$ / 2,
              iT = O.add[il].Ofst.v;
            iT.Hrzn.v.val = Math.round(100 * (-0.5 + h1 / m.r));
            iT.Vrtc.v.val = Math.round(100 * (-0.5 + d4 / m.$));
            var d_ = Math.min(kP.r / m.r, kP.$ / m.$);
            O.add[il].Scl.v.val = Math.round(100 * d_);
          }
          if (il == "PtFl") {
            var em = O.add[il].Ptrn.v,
              d3 = dS.SP(em, G.wP);
            if (d3 == null) d3 = dS.SP(em, m.add.Patt);
            if (d3 == null) d3 = G.wP[0];
            em.Idnt.v = d3.id;
            m.Vq(d3);
          }
          O.D5(m);
        } else {
          O.add.vstl = B.S(G.aGU);
        }
      }
      var iV = L.zl.cK(m, is + " ");
      O.tV(is + " " + (iV + 1));
      if (f4) O.tV(f4);
      var ib = m.J.length == 0 ? m.U.length - 1 : m.J[m.J.length - 1],
        au = m.U[ib];
      if (ei == 0 && W == R.gy && au.bm() && au.H.jG()) {
        fR = !0;
        O.tV(au.getName());
        aT = ib;
      } else {
        aT = ib + (W == R.YJ && a && !c ? 0 : 1);
        if (au && au.add.lsct == hQ.WR) aT--;
      }
      if (j.alu) aT = Math.max(0, aT - 1);
      var a5 = m.U.slice(0);
      if (W == R.tD) {
        var jy = (a5[m.J[0]] = a5[m.J[0]].P()),
          ao = m.h.N.slice(0);
        B.BR(ao);
        B.zn(ao, m.h.H, jy.buffer, jy.H);
      }
      a5.splice(aT, fR ? 1 : 0, O);
      var ia = [5, 2];
      if (W == R.YJ) ia = [6, 13];
      if (W == R.Vh) ia = [6, 1];
      if (W == R.gy) {
        ia = [6, 48, 1];
        var ix = j.SC.Usng.v.Shp;
        if (ix) {
          var dA = {
            Rctn: [10, 32],
            Ln: [10, 35],
            Elps: [10, 33],
            Plgn: [12, 93, 0],
            customShape: [10, 31],
          }[ix.v.classID];
          if (dA) ia = dA;
        }
      }
      if (gm) {
        ia = [6, 49, W == R.IW ? 0 : 1];
      }
      if (gm || W == R.gy || W == R.bG || W == R.Vh) if (m.h) ai = [m.h, null];
      var f = new eN(ia, this);
      f.data = {
        R: R.DH,
        np: m.U.slice(0),
        nR: a5,
        Ne: m.J.slice(0),
        jw: [aT],
        p1: ai,
      };
      m.Du(f);
      this.km(f.data, m);
      if ((W == R.gy && ix == null && gs != 0) || W == R.Vh) {
        var F = new fd(_.E.c);
        F.data = { R: _.Y.UN, kO: bI.Fb.Hy };
        q.k(F);
      }
    }
    if (W == R.ahk) {
      var a5 = m.U.slice(0),
        O = m.U[m.J[0]],
        aJ = O.H.C(),
        gJ = aJ * 4,
        k4 = a5.indexOf(O),
        jN = m.dj();
      jN.tV("Decomposition");
      jN.add.lsct = hQ.WR;
      jN.hz = "pass";
      jN.uZ = 24;
      a5.splice(k4 + 1, 0, jN);
      a5.splice(k4 + 1, 0, m.to());
      var dp = O.P();
      dp.tV("Residual");
      a5.splice(k4 + 2, 0, dp);
      function km(f, h7, y) {
        h7[y] += 128 - f[y];
        h7[y + 1] += 128 - f[y + 1];
        h7[y + 2] += 128 - f[y + 2];
        h7[y + 4] += 128 - f[y + 4];
        h7[y + 5] += 128 - f[y + 5];
        h7[y + 6] += 128 - f[y + 6];
      }
      a5.splice(k4, 0);
      var f0 = Date.now();
      for (var ip = 0; ip < 5; ip++) {
        var lc = dp.P();
        a5.splice(k4 + 3, 0, lc);
        lc.yA = 128;
        lc.hz = "lLit";
        lc.tV("Scale " + (ip + 1));
        k0.po(1 << ip, 1, dp.buffer, O.H);
        var jr = dp.buffer,
          aC = new Uint8ClampedArray(lc.buffer.buffer);
        for (var y = 0; y < gJ; y += 8) km(jr, aC, y);
      }
      var f = new eN("Wavelet Decompose", this);
      f.data = {
        R: R.DH,
        np: m.U.slice(0),
        nR: a5,
        Ne: m.J.slice(0),
        jw: [k4 + 2],
      };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R._u) {
      var O = m.dj(),
        is = g$.get([0, 4]),
        iV = L.zl.cK(m, is + " ");
      O.tV(is + " " + (iV + 1));
      O.hz = "pass";
      O.add.lsct = hQ.WR;
      O.uZ = 24;
      if (j.p6) O.tV(j.p6);
      if (j.YS != null) O.add.lclr = j.YS;
      var kA = m.to(),
        ib = k,
        aT = ib + (a ? 0 : 1),
        a5 = m.U.slice(0);
      a5.splice(aT, 0, kA, O);
      var f = new eN([6, 20], this);
      f.data = {
        R: R.DH,
        np: m.U.slice(0),
        nR: a5,
        Ne: m.J.slice(0),
        jw: [aT + 1],
      };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.Vy || W == R.Wh) {
      var dI = W == R.Vy ? j.source : m.J[0],
        f3,
        k9,
        eC = m.J.indexOf(dI) != -1,
        ay = b | j.a4e,
        fk,
        km = null;
      if (eC) fk = m.LP();
      else fk = m.Hv(dI);
      fk.sort(function (f, h7) {
        return f - h7;
      });
      if (W == R.Vy) {
        f3 = j.target;
        k9 = j.FK > 0.5;
      } else if (j.target != null) {
        f3 = Math.min(j.target, m.U.length - 1);
        k9 = j.target < m.U.length;
        m.u9 = !0;
      } else {
        var ky = j._G;
        k9 = ky > 1;
        if (ky == 0) {
          f3 = m.U.length - 1;
        }
        if (ky == 1) {
          f3 = fk[fk.length - 1] + 1;
          var h = m.Hv(f3);
          if (h.indexOf(dI) == -1) f3 += h.length - 1;
        }
        if (ky == 2) {
          f3 = fk[0] - 1;
          var h = m.Hv(f3);
          if (h.indexOf(dI) == -1) f3 -= h.length - 1;
        }
        if (ky == 3) {
          f3 = 0;
          if (m.U[0].add.lnsr == "bgnd") f3++;
        }
        if (f3 < 0 || f3 > m.U.length - 1) return;
        m.u9 = !0;
      }
      if (fk.indexOf(f3) != -1 && !ay) return;
      var aS = L.zl.Zb(
          m,
          fk,
          f3,
          k9,
          ay ? m.iG(eC ? null : dI) : null,
          W == R.Vy && j.FK > 0.8
        ),
        an = aS.pop(),
        cE = aS.pop(),
        a5 = aS.pop(),
        bH = m.J;
      m.J = [dI];
      var dL = m.Tl();
      m.J = [f3];
      var gI = m.Tl();
      if (gI == f3 && !k9) gI = -1;
      m.J = bH;
      if (dI == dL) {
      } else if (dL != gI) {
        var km = new ea(0, 0);
        if (dL != -1) {
          var kg = m.U[dL].Li();
          km.x -= kg.x;
          km.y -= kg.y;
        }
        if (gI != -1) {
          var kg = m.U[gI].Li();
          km.x += kg.x;
          km.y += kg.y;
        }
      }
      var f = new eN(ay ? [6, 0] : [6, 35], this);
      f.data = {
        R: R.DH,
        np: m.U.slice(0),
        nR: a5,
        Ne: m.J.slice(0),
        jw: cE,
        Kh: km,
      };
      m.Du(f);
      this.km(f.data, m);
      var le = {
        classID: "move",
        null: jw.$W("Lyr", !0),
        T: {
          t: "obj ",
          v: [{ t: "indx", v: { classID: "Lyr", val: an + (k9 ? 0 : 1) } }],
        },
        Adjs: { t: "bool", v: !1 },
        Vrsn: { t: "long", v: 5 },
        Dplc: { t: "long", v: ay },
      };
      this.track({ _D: "move", SC: le });
    }
    if (W == R._k) {
      var au = j.wp;
      if (j.V_) {
        if (T == null || !T.D1()) return;
        var d = m.root.Zg(k),
          cn = m.U.indexOf(d.aKx),
          a5 = m.U.slice(0);
        a5.splice(k, 1);
        a5.splice(cn, 1);
        var cE = [];
        for (var y = cn; y < k - 1; y++) cE.push(y);
        if (au) {
          var ha = k - 2;
          a5[ha] = a5[ha].P();
          a5[ha].wp = !1;
        }
        var f = new eN(au ? [6, 6, 0] : "Ungroup Layers", this);
        f.data = {
          R: R.DH,
          np: m.U.slice(0),
          nR: a5,
          Ne: m.J.slice(0),
          jw: cE,
        };
        m.Du(f);
        this.km(f.data, m);
      } else {
        var O = m.dj(),
          lj = g$.get([0, 4]) + " ";
        O.tV(lj + (L.zl.cK(m, lj) + 1));
        O.hz = "pass";
        if (au) {
          if (m.J.length == 1) {
            alert("Select more than one layer for a clipping group.");
            return;
          }
          O.tV("<Clip Group>");
        }
        if (j.p6) O.tV(j.p6);
        if (j.YS != null) O.add.lclr = j.YS;
        O.add.lsct = m.J.length == 1 ? hQ.WR : hQ.z$;
        O.uZ = 24;
        var kA = m.to(),
          fk = m.LP();
        if (fk.length == 0) return;
        fk.sort(function (f, h7) {
          return f - h7;
        });
        var a5 = [];
        for (var y = 0; y < m.U.length; y++)
          if (fk.indexOf(y) == -1) a5.push(m.U[y]);
        var ib = m.J[m.J.length - 1] - fk.length;
        a5.splice(ib + 1, 0, kA);
        for (var y = 0; y < fk.length; y++)
          a5.splice(ib + 2 + y, 0, m.U[fk[y]]);
        a5.splice(ib + 2 + fk.length, 0, O);
        if (au) {
          var ha = ib + fk.length + 1;
          a5[ha] = a5[ha].P();
          a5[ha].wp = !0;
        }
        var f = new eN(au ? [6, 6, 0] : [6, 9], this);
        f.data = {
          R: R.DH,
          np: m.U.slice(0),
          nR: a5,
          Ne: m.J.slice(0),
          jw: [a5.indexOf(O)],
        };
        m.Du(f);
        this.km(f.data, m);
        var X = { _D: "make", cV: !0 };
        X.SC = {
          classID: "Mk",
          null: jw.$W("layerSection"),
          From: jw.$W("Lyr", !0),
          Usng: {
            t: "Objc",
            v: { classID: "layerSection", Nm: { t: "TEXT", v: O.getName() } },
          },
        };
        this.track(X);
      }
    }
    if (W == R.aDg) {
      if (m.J.length != 1) return;
      var D = m.J[0],
        jt = b;
      if (m.U[D].ex() == null && !n.M(gn.A8)) {
        W = R.c5;
        j.io = m.h ? (!jt ? "RvlS" : "HdSl") : !jt ? "RvlA" : "HdAl";
      } else {
        W = R.n2;
        j.aw_ = !0;
      }
    }
    if (W == R.c5) {
      if (m.J.length != 1) return;
      var D = m.J[0],
        O = m.U[D];
      if (O.add.vmsk && O.x7 == null) O.D5(m);
      var bR = O.ex();
      if (bR == null || j.aAn) {
        var f = new eN(j.p6 ? j.p6 : [6, 21], this),
          bZ = new R.T0(m.depth),
          gr = j.io,
          gv = gr == "RvlS" || gr == "HdSl";
        if (gr == "RvlS" || gr == "HdAl" || gr == "Trns") bZ.color = 0;
        if (gv) {
          bZ.N = m.h.N.slice(0);
          bZ.H = m.h.H.P();
          if (gr == "HdSl") B.BR(bZ.N);
        }
        if (gr == "Trns") {
          bZ.H = O.H.P();
          bZ.N = B.j(O.H.C());
          B.Ih(O.buffer, bZ.N, 3);
        }
        f.data = {
          R: R.MT,
          xI: [D, bR, bZ],
          p1: gv ? [m.h, null] : null,
          aB$: gr == "Trns",
        };
        m.Du(f);
        this.km(f.data, m);
        m.U[D].ma = 1;
        this.track({
          _D: "make",
          SC: {
            __name: "Make",
            classID: "Mk",
            Nw: { t: "type", v: { classID: "Chnl" } },
            At: {
              t: "obj ",
              v: [
                {
                  t: "Enmr",
                  v: { classID: "Chnl", typeID: "Chnl", enum: "Msk" },
                },
              ],
            },
            Usng: { t: "enum", v: { UsrM: gr } },
          },
        });
      }
    } else if (W == R.abe) {
      var gb = m.U[j.src],
        fM = m.U[j.Xf],
        f = new eN([6, 21], this),
        ik = gb.ex(),
        cx = fM.ex(),
        ex = [j.src, ik, null, j.Xf, cx, ik];
      if (b || c) {
        var dZ = ik.P();
        if (b) ex = [j.Xf, cx, dZ];
        else ex[5] = dZ;
        if (c) {
          B.BR(dZ.N);
          dZ.color = 255 - dZ.color;
        }
      }
      f.data = { R: R.MT, xI: ex };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.zQ) {
      if (m.J.length != 1) return;
      var D = k,
        ku = m.U[D].ex();
      if (ku != null) {
        var f = new eN([6, 22], this);
        f.data = { R: R.MT, xI: [k, ku, null] };
        m.Du(f);
        this.km(f.data, m);
      }
    }
    if (W == R.yT) {
      var lu = m.U.slice(0),
        h$ = T.P(),
        ak = h$.ex();
      B.zn(ak.fy(h$.H), h$.H, h$.buffer, h$.H);
      L.zl.JQ(m, h$);
      h$.yy();
      m.U[m.J[0]] = h$;
      var f = new eN([5, 8], this);
      f.data = {
        R: R.DH,
        np: lu,
        nR: m.U.slice(),
        Ne: m.J.slice(0),
        jw: m.J.slice(0),
      };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.kc) {
      if (m.J.length != 1) return;
      var D = m.J[0];
      if (m.U[D].xE(m).x7 == null) {
        var f = new eN([6, 45], this);
        f.data = { R: W, v: D, x7: new R.T0(m.depth) };
        m.Du(f);
        this.km(f.data, m);
      }
    }
    if (W == R.Ko) {
      if (m.J.length != 1) return;
      var D = m.J[0];
      if (m.U[D].xE(m).x7 != null) {
        var f = new eN([6, 46], this);
        f.data = { R: W, v: D, x7: m.U[D].xE(m).x7 };
        m.Du(f);
        this.km(f.data, m);
      }
    }
    if (W == R.rJ) {
      if (j.src == null && m.J.length != 1) return;
      if (j.src != null) k = j.src;
      if (m.U[k].r3()) {
        var f = new eN([6, 47], this),
          b0 = JSON.stringify(m.U[k].add.SoLd),
          e1 = JSON.parse(b0);
        delete e1.filterFX;
        f.data = {
          R: R.vf,
          Az: [
            { le: k, dM: [b0, JSON.stringify(e1)], Pd: [m.U[k].xE(m), null] },
          ],
        };
        m.Du(f);
        this.km(f.data, m);
      }
    }
    if (W == R.n2) {
      if (m.J.length != 1) return;
      if (T.add.vmsk == null) {
        var f = new eN([6, 23], this),
          eF = m.ac(),
          kk = eF[1],
          eF = eF[0],
          bZ,
          lp;
        if (j.aw_ && kk.length != 0) {
          var b5 = eF[kk[0]].add;
          bZ = b5.vmsk.P();
          lp = b5.vogk;
        } else {
          bZ = new R.tm();
          lp = [];
          bZ.D[1].all = j.aKC ? 0 : 1;
        }
        f.data = {
          R: W,
          v: k,
          a9$: !0,
          x7: bZ,
          ih: JSON.stringify(lp),
          rS: null,
        };
        if (T.ql()) {
          f.data.rS = Stroke.rS.i4(!0);
        }
        m.Du(f);
        this.km(f.data, m);
      }
    }
    if (W == R.f4) {
      var gb = m.U[j.src],
        fM = m.U[j.Xf];
      if (fM.add.vmsk) return;
      var f = new eN([6, 23], this),
        ck = gb.add.vmsk;
      f.data = {
        v: j.Xf,
        a9$: gb.q_,
        x7: ck.P(),
        ih: JSON.stringify(gb.add.vogk),
        rS: gb.add.vstk ? JSON.stringify(gb.add.vstk) : null,
      };
      if (b) {
        f.data.R = R.n2;
      } else {
        f.data.R = W;
        f.data.src = j.src;
        f.data.Xf = j.Xf;
      }
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.aX || W == R.gt) {
      if (m.J.length != 1) return;
      var O = m.U[k],
        ck = O.add.vmsk;
      if (ck != null) {
        var hP = W == R.gt,
          f = new eN(hP ? [6, 8] : [6, 24], this);
        f.data = {
          R: R.aX,
          v: k,
          a9$: O.q_,
          x7: ck,
          ih: JSON.stringify(O.add.vogk),
          rS: O.add.vstk ? JSON.stringify(O.add.vstk) : null,
        };
        if (hP) {
          f.data.Zr = ck.ex(O.add.vstk);
          f.data.Zr.HU = !1;
        }
        m.Du(f);
        this.km(f.data, m);
      }
    }
    if (W == R.uM) {
      var f = new eN("Metadata", this);
      f.data = { R: W, eK: JSON.stringify(m.Un), Ap: JSON.stringify(j.Ap) };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.CG) {
      var hv = j.Xf ? j.Xf : m,
        cs = hv.name,
        f4 = j.K + "." + cs.split(".").pop();
      if (cs == f4) return;
      var f = new eN([6, 37], this);
      f.data = { R: W, aKY: cs, p6: f4 };
      if (j.aGT != !0) hv.Du(f);
      this.km(f.data, hv);
    }
    if (W == R.Pk && j._G.endsWith("makeframes")) {
      var e5 = [],
        eO = j._G.startsWith("make");
      for (var y = 0; y < m.J.length; y++) {
        var S = m.J[y],
          O = m.U[S],
          g_ = O.getName(),
          fu = g_.startsWith("_a_");
        if (eO == fu || O.add.lsct == hQ.$a) continue;
        var fC = eO ? "_a_" + g_ : g_.slice(3);
        e5.push([S, g_, fC, O.add.lnsr, null]);
      }
      var f = new eN([6, 37], this);
      f.data = { R: R.dy, rw: e5 };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.dy) {
      var cs = T.getName(),
        f4 = j.name.substring(0, 255);
      if (cs == f4) return;
      var f = new eN([6, 37], this);
      f.data = { R: W, rw: [[k, cs, f4, T.add.lnsr, null]] };
      m.Du(f);
      this.km(f.data, m);
      this.track(jw.BH("Nm", { t: "TEXT", v: f4 }));
    }
    if (W == R.LV) {
      var hM = m.LP(),
        dH = [],
        aQ = [];
      for (var y = 0; y < hM.length; y++) {
        dH.push(m.U[hM[y]].add.lclr);
        aQ.push(j.aGE);
      }
      var f = new eN([6, 38], this);
      f.data = { R: W, U: hM, ad1: dH, YS: aQ };
      m.Du(f);
      this.km(f.data, m);
    }
    if (W == R.Z0) {
      var f = m.history[m.d6];
      if (
        f != null &&
        f.l == this &&
        f.data.R == W &&
        f.data.v == j.oq &&
        f.data.jt.jA == j.i1.jA
      )
        f.data.jt = j.i1;
      else {
        f = new eN("Mask Density / Feather", this);
        f.data = { R: W, v: j.oq, pv: m.U[j.oq].K$(j.i1.jA), jt: j.i1 };
        m.Du(f);
      }
      this.km(f.data, m);
    }
    if (W == R.o_) {
      var d0 = JSON.stringify(j.K),
        aa = JSON.parse(d0),
        f = m.history[m.d6];
      if (
        f != null &&
        f.l == this &&
        f.data.R == W &&
        f.data.nt == j.nt &&
        f.data.Gj.join(",") == j.Gj.join(",")
      ) {
        for (var y = 0; y < j.Gj.length; y++) f.data.a0o[y] = aa;
        if (f.data.SC && aa.pb != 0) L.zl.C5(aa.pH, f.data.SC.T.v, aa.pb - 1);
      } else {
        f = new eN([11, 6], this);
        f.data = { R: W, Gj: j.Gj, nt: j.nt, a3U: [], a0o: [] };
        var ag = !1;
        for (var y = 0; y < j.Gj.length; y++) {
          var S = j.Gj[y],
            O = m.U[S],
            gt = j.nt ? eu.H4(O.add) : B.S(O.add.vstk);
          f.data.a3U.push(gt);
          f.data.a0o.push(aa);
          if (JSON.stringify(gt) != d0) ag = !0;
        }
        if (!ag) return;
        m.Du(f);
        if (j.nt && aa.pb > 0) {
          var le = (f.data.SC = {
            classID: "setd",
            null: jw.$W("contentLayer", !0),
            T: { t: "Objc", v: {} },
          });
          L.zl.C5(aa.pH, le.T.v, aa.pb - 1);
          this.track({ _D: "set", SC: le });
        }
      }
      if (j.nt && aa.pb == 3) m.Vq(dS.SP(aa.pH.Ptrn.v, G.wP));
      if (!j.nt) {
        var jm = aa.strokeStyleContent.v;
        if (jm.classID == eu.rS.HF[2]) m.Vq(dS.SP(jm.Ptrn.v, G.wP));
      }
      this.km(f.data, m);
    }
    if (W == R.pl) {
      var fE = G.TB,
        jP = [];
      for (var y = 0; y < m.J.length; y++) {
        var S = m.J[y],
          O = m.U[S],
          ee = O.add.vstl;
        if (ee == null) continue;
        var gt = JSON.stringify(ee);
        for (var kw in fE) ee[kw] = fE[kw];
        var aa = JSON.stringify(ee);
        if (gt == aa) continue;
        jP.push([S, gt, aa]);
      }
      if (jP.length != 0) {
        var N = m.iw();
        if (
          N &&
          N.l == this &&
          N.data.R == W &&
          N.data.Ty.length == jP.length
        ) {
          var eW = !0;
          for (var y = 0; y < jP.length; y++)
            if (jP[y][0] != N.data.Ty[y][0]) eW = !1;
          if (eW) {
            for (var y = 0; y < jP.length; y++) N.data.Ty[y][2] = jP[y][2];
            m.gF();
            return;
          }
        }
        var f = new eN("Style Change", this);
        f.data = { R: W, Ty: jP };
        m.Du(f);
        m.gF();
      }
    }
  };
  L.zl.Zb = function (j, q, m, n, G, W) {
    var k = j.U[m],
      T = [];
    if (G) T = j.U.slice(0);
    else
      for (var y = 0; y < j.U.length; y++)
        if (q.indexOf(y) == -1) T.push(j.U[y]);
    var b = T.indexOf(k);
    if (W && k.D1() && k.add.lsct == hQ.z$) b -= j.Hv(m).length - 1;
    var c = [];
    for (var y = 0; y < q.length; y++) {
      var a = b + (n ? 0 : 1) + y,
        f = G ? G[y] : j.U[q[y]];
      T.splice(a, 0, f);
      c.push(a);
    }
    return [T, c, b];
  };
  L.zl.C5 = function (j, q, m) {
    var n = [eu.dS, eu.GB, eu.Pa][m];
    if (q.classID == null)
      q.classID = ["solidColorLayer", "gradientLayer", "patternLayer"][m];
    for (var y = 0; y < n.length; y++) if (j[n[y]]) q[n[y]] = B.S(j[n[y]]);
  };
  L.zl.a4P = function (j) {
    var q = new R.T0(j.depth);
    if (j.h != null) {
      q.color = 0;
      q.N = j.h.N.slice(0);
      q.H = j.h.H.P();
    }
    return q;
  };
  L.zl.ZV = function (j, q, m, n, G) {
    var W = n.fU,
      k = m.fU,
      T = n.zv / m.zv,
      b = W.r / k.r,
      c = W.$ / k.$,
      a = W.r / 2,
      f = W.$ / 2;
    b /= T;
    c /= T;
    var U = B.b._c(W).L;
    for (var y = 0; y < j.U.length; y++) {
      var Z = j.U[y],
        h = Z.add.SoLd;
      if (h == null || h.Idnt.v != q) continue;
      var u = b != 1 || c != 1;
      if (u) {
        var i = L.Dq.Kt(h.nonAffineTransform),
          x = B.B.Ht(i, W),
          X = new k$();
        X.translate(-a, -f);
        X.scale(b, c);
        X.translate(a, f);
        var $ = B.B.J5(x, B.B.gb(X)),
          H = U.slice(0);
        B.B.u($, H);
        if (B.rc.TK(h.quiltWarp.v)) {
          h.Trnf = L.Dq.be(H);
          h.nonAffineTransform = L.Dq.be(H);
        }
        if (h.quiltWarp) {
          var C = h.quiltWarp.v.bounds.v;
          if (C.Rght.v.val != null) {
            C.Rght.v.val = W.r;
            C.Btom.v.val = W.$;
          } else {
            C.Rght.v = W.r;
            C.Btom.v = W.$;
          }
        }
      }
      Z.yZ(j, null, G, !u);
    }
    j.gF();
  };
  L.zl.aLk = function (j, q, m) {
    q.color = 255 - q.color;
    B.BR(q.N);
    q.xo = !0;
    j.D5(m);
    m.gF();
  };
  L.zl.prototype.W6 = function (j, q) {
    var m = j.R,
      n = q.U[j.v];
    q.qB = !0;
    if (m == R.wm) {
      var y = q.add.lnk2.indexOf(q.dp(j.id));
      if (y == -1) throw "e";
      q.add.lnk2[y] = j.aB1;
      L.zl.ZV(q, j.id, j.Dx, j.aB1);
    }
    if (m == R.b1) {
      n.add.SoLd.Impr.v.classID = j.pv;
      n.yZ(q);
    }
    if (m == R.Jf) {
      var G = JSON.parse(j.Gj);
      for (var y = 0; y < G.length; y++) q.U[G[y]].hz = j.bn[y];
      q.gF();
    }
    if (m == R.G4) {
      var G = JSON.parse(j.Gj);
      for (var y = 0; y < G.length; y++) q.U[G[y]].yA = j.bn[y];
      q.gF();
    }
    if (m == R.yX) {
      var G = JSON.parse(j.Gj);
      for (var y = 0; y < G.length; y++) q.U[G[y]].add.iOpa = j.bn[y];
      q.gF();
    }
    if (m == R.Rp) {
      n.Y.yY = j.bn.yY;
      n.Y.volume = j.bn.volume;
    }
    if (m == R.VY) {
      q.Y.W0 = j.bn.W0;
      q.Y.Ss = j.bn.Ss;
    }
    if (m == R.p4) {
      var G = JSON.parse(j.Gj);
      for (var y = 0; y < G.length; y++)
        if (q.U[G[y]].add.lsct != hQ.$a) q.U[G[y]].add.lspf = j.bn[y];
    }
    if (m == R.Ri) {
      var W = j.ZI,
        k = j.aAh;
      delete n.add[W[0]];
      if (k[0] != "----") n.add[k[0]] = k[1];
    }
    if (m == R.Ov) {
      for (var y = 0; y < j.Gj.length; y++) {
        var T = q.U[j.Gj[y]];
        T.xg(!T.Iw());
      }
      q.gF();
    }
    if (m == R.bQ) {
      var b = n.ex();
      b.isEnabled = !b.isEnabled;
      n.D5(q);
      q.gF();
    }
    if (m == R.u8) {
      var b = n.xE(q).x7;
      b.isEnabled = !b.isEnabled;
      n.gF();
      q.gF();
    }
    if (m == R.d3) {
      var b = n.add.vmsk;
      b.isEnabled = !b.isEnabled;
      if (!b.isEnabled) {
        if (n.Zr) {
          n.x7 = n.Zr;
          n.Zr = null;
        } else n.x7 = null;
      } else if (n.x7) {
        n.Zr = n.x7;
        n.x7 = null;
      }
      n.D5(q);
      q.gF();
    }
    if (m == R.vu) {
      n.Yx = !n.Yx;
      q.gF();
    }
    if (m == R.yz) {
      n.add.lmfx.masterFXSwitch.v = !n.add.lmfx.masterFXSwitch.v;
      n.a_.Zs = !0;
      q.gF();
    }
    if (m == R.Re) {
      n.add.SoLd.filterFX.v.enab.v = !n.add.SoLd.filterFX.v.enab.v;
      n.dm(q);
      q.gF();
    }
    if (m == R.Ug) {
      var c = j.index,
        a = n.add.lmfx[eu.C$[c[0]]].v[c[1]].v;
      a.enab.v = !a.enab.v;
      n.a_.Zs = !0;
      q.gF();
    }
    if (m == R.hY) {
      var f = q.U[j.ZF],
        U = q.U[j.oU],
        Z = j.a4Y,
        h = j.at7;
      if (Z == "") delete f.add.lmfx;
      else f.add.lmfx = JSON.parse(Z);
      if (h == "") delete U.add.lmfx;
      else U.add.lmfx = JSON.parse(h);
      f.a_.Zs = !0;
      U.a_.Zs = !0;
      q.gF();
    }
    if (m == R.AR) {
      var u = n.add.SoLd.filterFX.v.filterFXList.v[j.index].v;
      u.enab.v = !u.enab.v;
      n.dm(q);
      q.gF();
    }
    if (m == R.azr) {
      n.add.SoLd.filterFX.v = B.S(j.aIN);
      n.dm(q);
      q.gF();
    }
    if (m == R.c8) {
      var b = n.ex();
      b.jS = !b.jS;
    }
    if (m == R.jx) {
      var b = n.add.vmsk;
      b.jS = !b.jS;
    }
    if (m == R.oS) {
      var i = JSON.parse(j.as2);
      q.Mr = i[0];
      q.$n = i[1];
    }
    if (m == R.$I) {
      var i = j.eD;
      for (var y = 0; y < i.length; y += 2) {
        var x = i[y],
          T = x >= 0 ? q.U[x] : q.GA[-1 - x];
        T.add.vogk = JSON.parse(i[y + 1]);
        B.ih.ib(T.add.vogk, T.add.vmsk);
        if (x >= 0) T.D5(q);
      }
      q.gF();
    }
    if (m == R.lN) {
      n.add.artb = JSON.parse(j.aJR);
      q.gF();
      L.xC.ae(q, j);
    }
    if (m == R.z3) {
      q.h = j.hF;
      if (j.a97) q.I.rO = j.a97.slice(0);
      q._E = j.eD.slice(0);
      q.y2 = j.aud.slice(0);
      q._F = q.Ls = !0;
    }
    if (m == R.xp) {
      n.wN = !n.wN;
    }
    if (m == R.Y1) {
      var X = j.a7N;
      for (var y = 0; y < X.length; y++) q.U[y].bH = X[y];
    }
    if (m == R.DH) {
      if (j.Kh) L.YE.kW(q, q.J, null, -j.Kh.x, -j.Kh.y);
      if (j.Ne) q.J = j.Ne;
      if (j.p1) q.h = j.p1[0];
      q.H7 = null;
      q.gF();
      L.xC.ae(q, j);
      q.e0(j.np);
      if (j.V$) q.gE(j.V$[0]);
    }
    if (m == R.MT) {
      for (var y = 0; y < j.xI.length; y += 3)
        L.zl.JQ(q, q.U[j.xI[y]], j.xI[y + 1]);
      if (j.p1) {
        var $ = j.p1[0];
        if ($ == null) delete q.h;
        else q.h = $;
      }
      if (j.aB$) {
        var T = q.U[j.xI[0]];
        B.ln(j.xI[2].N, T.buffer, 3);
      }
    }
    if (m == R.kc) {
      n.xE(q).x7 = null;
      n.gF();
      q.gF();
    }
    if (m == R.Ko) {
      n.xE(q).x7 = j.x7;
      n.gF();
      q.gF();
    }
    if (m == R.vf) {
      L.zl.adb(q, j.Az, 0);
    }
    if (m == R.n2) {
      L.zl.IO(q, n, !0);
    }
    if (m == R.f4) {
      L.zl.IO(q, q.U[j.Xf], j.x7.isEnabled);
      L.zl.iP(q, q.U[j.src], j);
    }
    if (m == R.aX) {
      if (j.Zr) L.zl.JQ(q, n, null);
      L.zl.iP(q, n, j);
    }
    if (m == R.uM) {
      q.Un = JSON.parse(j.eK);
    }
    if (m == R.CG) {
      q.name = j.aKY;
    }
    if (m == R.dy) {
      for (var y = 0; y < j.rw.length; y++) {
        var H = j.rw[y],
          T = q.U[H[0]];
        T.tV(H[1]);
        if (H[3]) T.add.lnsr = H[3];
        else delete T.add.lnsr;
      }
    }
    if (m == R.LV) {
      for (var y = 0; y < j.U.length; y++) q.U[j.U[y]].add.lclr = j.ad1[y];
    }
    if (m == R.o_) {
      var C = j.a3U;
      for (var y = 0; y < j.Gj.length; y++) {
        var T = q.U[j.Gj[y]],
          l = C[y];
        if (!j.nt) T.add.vstk = B.S(l);
        else eu.Qw(T.add, B.S(l));
        T.tK(q);
      }
      q.gF();
    }
    if (m == R.pl) {
      for (var y = 0; y < j.Ty.length; y++) {
        var v = j.Ty[y];
        q.U[v[0]].add.vstl = JSON.parse(v[1]);
      }
      q.gF();
    }
    if (m == R.Z0) {
      n.a9y(j.pv);
      n.D5(q);
      q.gF();
    }
    q.Ls = !0;
  };
  L.zl.prototype.km = function (j, q) {
    var m = j.R,
      n = q.U[j.v];
    q.qB = !0;
    if (m == R.wm) {
      var y = q.add.lnk2.indexOf(q.dp(j.id));
      if (y == -1) throw "e";
      q.add.lnk2[y] = j.Dx;
      L.zl.ZV(q, j.id, j.aB1, j.Dx);
    }
    if (m == R.b1) {
      n.add.SoLd.Impr.v.classID = j.jt;
      n.yZ(q);
    }
    if (m == R.Jf) {
      var G = JSON.parse(j.Gj);
      for (var y = 0; y < G.length; y++) q.U[G[y]].hz = j.jt;
      q.gF();
    }
    if (m == R.G4) {
      var G = JSON.parse(j.Gj);
      for (var y = 0; y < G.length; y++) q.U[G[y]].yA = j.jt;
      q.gF();
    }
    if (m == R.yX) {
      var G = JSON.parse(j.Gj);
      for (var y = 0; y < G.length; y++) q.U[G[y]].add.iOpa = j.jt;
      q.gF();
    }
    if (m == R.Rp) {
      n.Y.yY = j.jt.yY;
      n.Y.volume = j.jt.volume;
    }
    if (m == R.VY) {
      q.Y.W0 = j.jt.W0;
      q.Y.Ss = j.jt.Ss;
    }
    if (m == R.p4) {
      var G = JSON.parse(j.Gj);
      for (var y = 0; y < G.length; y++)
        if (q.U[G[y]].add.lsct != hQ.$a) q.U[G[y]].add.lspf = j.jt[y];
    }
    if (m == R.Ri) {
      var W = j.aAh,
        k = j.ZI;
      delete n.add[W[0]];
      if (k[0] != "----") n.add[k[0]] = k[1];
    }
    if (m == R.Ov) {
      for (var y = 0; y < j.Gj.length; y++) {
        var T = q.U[j.Gj[y]];
        T.xg(!T.Iw());
      }
      q.gF();
    }
    if (m == R.bQ) {
      var b = n.ex();
      b.isEnabled = !b.isEnabled;
      n.D5(q);
      q.gF();
    }
    if (m == R.u8) {
      var b = n.xE(q).x7;
      b.isEnabled = !b.isEnabled;
      n.gF();
      q.gF();
    }
    if (m == R.d3) {
      var b = n.add.vmsk;
      b.isEnabled = !b.isEnabled;
      if (!b.isEnabled) {
        if (n.Zr) {
          n.x7 = n.Zr;
          n.Zr = null;
        } else n.x7 = null;
      } else if (n.x7) {
        n.Zr = n.x7;
        n.x7 = null;
      }
      n.D5(q);
      q.gF();
    }
    if (m == R.vu) {
      n.Yx = !n.Yx;
      q.gF();
    }
    if (m == R.yz) {
      n.add.lmfx.masterFXSwitch.v = !n.add.lmfx.masterFXSwitch.v;
      n.a_.Zs = !0;
      q.gF();
    }
    if (m == R.Re) {
      n.add.SoLd.filterFX.v.enab.v = !n.add.SoLd.filterFX.v.enab.v;
      n.dm(q);
      q.gF();
    }
    if (m == R.Ug) {
      var c = j.index,
        a = n.add.lmfx[eu.C$[c[0]]].v[c[1]].v;
      a.enab.v = !a.enab.v;
      n.a_.Zs = !0;
      q.gF();
    }
    if (m == R.hY) {
      var f = q.U[j.ZF],
        U = q.U[j.oU],
        Z = j.akn,
        h = j.a9Y;
      if (Z == "") delete f.add.lmfx;
      else f.add.lmfx = JSON.parse(Z);
      if (h == "") delete U.add.lmfx;
      else U.add.lmfx = JSON.parse(h);
      f.a_.Zs = !0;
      U.a_.Zs = !0;
      q.gF();
    }
    if (m == R.AR) {
      var u = n.add.SoLd.filterFX.v.filterFXList.v[j.index].v;
      u.enab.v = !u.enab.v;
      n.dm(q);
      q.gF();
    }
    if (m == R.azr) {
      n.add.SoLd.filterFX.v = B.S(j.aCq);
      n.dm(q);
      q.gF();
    }
    if (m == R.c8) {
      var b = n.ex();
      b.jS = !b.jS;
    }
    if (m == R.jx) {
      var b = n.add.vmsk;
      b.jS = !b.jS;
    }
    if (m == R.oS) {
      var i = JSON.parse(j.a8I);
      q.Mr = i[0];
      q.$n = i[1];
    }
    if (m == R.$I) {
      var i = j.XX;
      for (var y = 0; y < i.length; y += 2) {
        var x = i[y],
          T = x >= 0 ? q.U[x] : q.GA[-1 - x];
        T.add.vogk = JSON.parse(i[y + 1]);
        B.ih.ib(T.add.vogk, T.add.vmsk);
        if (x >= 0) T.D5(q);
      }
      q.gF();
    }
    if (m == R.lN) {
      n.add.artb = JSON.parse(j.iB);
      q.gF();
      L.xC.O1(q, j);
    }
    if (m == R.z3) {
      q.h = j.c_;
      if (j.abk) q.I.rO = j.abk.slice(0);
      q._E = j.XX.slice(0);
      q.y2 = j.auC.slice(0);
      q._F = q.Ls = !0;
    }
    if (m == R.xp) {
      n.wN = !n.wN;
    }
    if (m == R.Y1) {
      var X = j.aj8;
      for (var y = 0; y < X.length; y++) q.U[y].bH = X[y];
    }
    if (m == R.DH) {
      q.av7();
      var $ = j.nR,
        H = 0,
        C;
      for (var y = 0; y < $.length; y++) {
        var T = $[y],
          l = T.add.lsct;
        if (l == hQ.$a) H++;
        else if (l == hQ.WR || l == hQ.z$) H--;
        if (T.add.artb && H != 0) C = "Artboards can not be inside folders.";
      }
      if (C) {
        q.history.pop();
        q.d6--;
        alert(C);
        return;
      }
      if (j.jw) q.J = j.jw;
      if (j.p1) q.h = j.p1[1];
      q.H7 = null;
      q.gF();
      q.e0(j.nR);
      L.xC.O1(q, j);
      if (j.Kh) L.YE.kW(q, q.J, null, j.Kh.x, j.Kh.y);
      if (j.V$) q.gE(j.V$[1]);
    }
    if (m == R.MT) {
      for (var y = 0; y < j.xI.length; y += 3)
        L.zl.JQ(q, q.U[j.xI[y]], j.xI[y + 2]);
      if (j.p1) {
        var v = j.p1[1];
        if (v == null) delete q.h;
        else q.h = v;
      }
      if (j.aB$) {
        var T = q.U[j.xI[0]],
          K = T.buffer;
        for (var y = 0; y < K.length; y += 4) K[y + 3] = 255;
      }
    }
    if (m == R.kc) {
      n.xE(q).x7 = j.x7;
      n.ma = 0;
      n.gF();
      q.gF();
    }
    if (m == R.Ko) {
      n.xE(q).x7 = null;
      n.ma = 0;
      n.gF();
      q.gF();
    }
    if (m == R.vf) {
      L.zl.adb(q, j.Az, 1);
    }
    if (m == R.n2) {
      L.zl.iP(q, n, j);
    }
    if (m == R.f4) {
      L.zl.IO(q, q.U[j.src], j.x7.isEnabled);
      L.zl.iP(q, q.U[j.Xf], j);
    }
    if (m == R.aX) {
      L.zl.IO(q, n, j.x7.isEnabled);
      if (j.Zr) L.zl.JQ(q, n, j.Zr);
    }
    if (m == R.uM) {
      q.Un = JSON.parse(j.Ap);
    }
    if (m == R.CG) {
      q.name = j.p6;
    }
    if (m == R.dy) {
      for (var y = 0; y < j.rw.length; y++) {
        var S = j.rw[y],
          T = q.U[S[0]];
        T.tV(S[2]);
        if (S[4]) T.add.lnsr = S[4];
        else delete T.add.lnsr;
      }
    }
    if (m == R.LV) {
      for (var y = 0; y < j.U.length; y++) q.U[j.U[y]].add.lclr = j.YS[y];
    }
    if (m == R.o_) {
      var o = j.a0o;
      for (var y = 0; y < j.Gj.length; y++) {
        var T = q.U[j.Gj[y]],
          V = o[y];
        if (!j.nt) T.add.vstk = B.S(V);
        else eu.Qw(T.add, B.S(V));
        T.tK(q);
      }
      q.gF();
    }
    if (m == R.pl) {
      for (var y = 0; y < j.Ty.length; y++) {
        var P = j.Ty[y];
        q.U[P[0]].add.vstl = JSON.parse(P[2]);
      }
      q.gF();
    }
    if (m == R.Z0) {
      n.a9y(j.jt);
      n.D5(q);
      q.gF();
    }
    q.Ls = !0;
  };
  L.zl.cK = function (j, q) {
    var m = 0;
    for (var y = 0; y < j.U.length; y++) {
      var n = j.U[y].getName();
      if (n.startsWith(q)) {
        var G = n.slice(q.length).trim(),
          W = parseInt(G);
        if (!isNaN(W) && W + "" == G && W > m) m = W;
      }
    }
    return m;
  };
  L.zl.adb = function (j, q, m) {
    for (var y = 0; y < q.length; y++) {
      var n = q[y],
        G = j.U[n.le];
      if (n.dM) {
        G.add.SoLd = JSON.parse(n.dM[m]);
      }
      if (n.Pd) {
        if (n.Pd[1 - m] != null) j._e(n.Pd[1 - m]);
        if (n.Pd[m] != null) j.N8(n.Pd[m]);
        else G.ma = 0;
      }
      G.yZ(j);
    }
  };
  L.zl.a1l = function (j, q) {
    var m = j.Zz,
      n = j.H.P();
    if (m != null && (m.x != q.r || m.y != q.$)) {
      n.x = Math.floor((q.r - n.r) / 2);
      n.y = Math.floor((q.$ - n.$) / 2);
    } else if (m == null) {
      var G = new hk(0, 0, q.r, q.$),
        W = q.Tl();
      if (W != -1) G = q.U[W].Li();
      n.x += G.x;
      n.y += G.y;
    }
    return n;
  };
  L.zl.aKj = function (j, q) {
    if (q.Zr) q.Zr = null;
    else q.x7 = null;
    q.D5(j);
    j.gF();
    q.ma = 0;
  };
  L.zl.JQ = function (j, q, m) {
    var n = q.ex();
    if (n == null && m == null) return;
    if (n) L.zl.aKj(j, q);
    if (m == null) return;
    if (q.x7) q.Zr = m;
    else q.x7 = m;
    q.D5(j);
    j.gF();
  };
  L.zl.IO = function (j, q, m) {
    if (q.Zr && m) {
      q.x7 = q.Zr;
      q.Zr = null;
    } else if (q.x7 && m) {
      q.x7 = null;
    }
    delete q.add.vogk;
    delete q.add.vstk;
    delete q.add.vmsk;
    q.D5(j);
    q.q_ = !1;
    j.H7 = [];
    j.gF();
  };
  L.zl.iP = function (j, q, m) {
    q.add.vogk = JSON.parse(m.ih);
    if (m.rS) q.add.vstk = JSON.parse(m.rS);
    else delete q.add.vstk;
    q.add.vmsk = m.x7.P();
    if (q.x7 && q.add.vmsk.isEnabled) q.Zr = q.x7;
    q.D5(j);
    q.q_ = m.a9$;
    j.H7 = [j.U.indexOf(q)];
    j.bR = [];
    j.gF();
  };
  L.co = function () {
    L.ju.call(this, "Layer Styles", L.EJ);
    this.oG = null;
    this.PP = null;
    this.F$ = null;
    this.oy = [];
    this.Tw = null;
  };
  L.co.prototype = new L.ju();
  L.co.prototype.BT = function (j, q, m, n, G) {
    var W = j.v;
    if (W == null) W = m.J[0];
    var k = m.U[W],
      T = j.Wy;
    if (this.oG == null) {
      this.F$ = L.co.Hc(m, k);
      this.oG = JSON.stringify(this.F$);
      if (k.add.lmfx) this.PP = JSON.stringify(k.add.lmfx);
    }
    if (k.add.lmfx == null) {
      k.add.lmfx = JSON.parse(eu.default);
      for (var y = 0; y < eu.order.length; y++)
        k.add.lmfx[eu.C$[y]] = { t: "VlLs", v: [] };
    }
    if (j.R == "scaleeffects") {
      if (j.K == "confirm" || j.K == "cancel") {
        this.BT({ R: j.K }, q, m, n, G);
        return;
      }
      k.add.lmfx = JSON.parse(this.PP);
      dS.yI(k.add.lmfx, j.K / 100);
    } else if (j.R == "changeprop") {
      var b = null;
      if (T != 0) {
        var c = this.oy[T[0]];
        if (c == null) c = eu.oy[T[0]];
        c = JSON.parse(c);
        var a = k.add.lmfx[eu.C$[T[0]]].v;
        if (a[T[1]] == null) a[T[1]] = { t: "Objc", v: c };
        b = a[T[1]].v;
        for (var f in c) if (b[f] == null) b[f] = c[f];
      }
      if (j.R == "changeprop") {
        if (T == 0) {
          this.F$[j.Fr].v = j.K;
          L.co.hy(m, k, this.F$);
        } else if (j.Fr == "lagl") {
          if (b.uglg && b.uglg.v) {
            m.CO(j.K.val);
            this.F$.gagl.v.val = m.KB();
          } else b[j.Fr].v = j.K;
        } else if (j.Fr == "Lald") {
          if (b.uglg.v) {
            m.tL(j.K.val);
            this.F$.globalAlt = m.AL();
          } else b[j.Fr].v = j.K;
        } else if (
          (T[0] == 3 || T[0] == 8) &&
          (j.Fr == "Clr" || j.Fr == "Grad")
        ) {
          if (j.Fr == "Clr") {
            b.Clr = { t: "Objc", v: j.K };
            delete b.Grad;
          }
          if (j.Fr == "Grad") {
            b.Grad = { t: "Objc", v: j.K };
            delete b.Clr;
          }
        } else {
          b[j.Fr].v = j.K;
        }
        if (T != 0) this.oy[T[0]] = JSON.stringify(b);
      }
      if (T != 0) if (b.Ptrn) m.Vq(dS.SP(b.Ptrn.v, G.wP));
    } else if (j.R == "setstl") {
      var U = j.K.Lefx;
      if (U) dS.aui(U, m, G.wP);
      dS.aD2(j.K, k, null, m);
      this.F$ = L.co.Hc(m, k);
    } else if (j.R == "st_dupsingle") {
      var Z = k.add.lmfx[eu.C$[j.Os[0]]].v;
      if (Z[j.Os[1]] == null) return;
      var h = B.S(Z[j.Os[1]]);
      Z.splice(j.Os[1], 0, h);
    } else if (j.R == "st_movsingle") {
      var u = j.Os[1],
        Z = k.add.lmfx[eu.C$[j.Os[0]]].v;
      if (Z[j.Os[1]] == null) return;
      var i = Math.max(0, Math.min(Z.length - 1, u + j.ad5)),
        x = Z[i];
      Z[i] = Z[u];
      Z[u] = x;
    } else if (j.R == "cancel") {
      if (this.PP == null) delete k.add.lmfx;
      else k.add.lmfx = JSON.parse(this.PP);
      L.co.hy(m, k, JSON.parse(this.oG));
      this.oG = null;
      this.PP = null;
    } else if (j.R == "confirm") {
      var X = JSON.stringify(k.add.lmfx),
        $ = new eN([11, 6], this);
      $.data = {
        U: [W],
        aw7: [this.PP],
        axn: [X],
        a6q: [this.oG],
        alM: [JSON.stringify(this.F$)],
      };
      m.Du($);
      this.oG = null;
      this.PP = null;
      if (X != null) {
        var H = JSON.parse(X);
        gM.P1(H);
        H.classID = "Lefx";
        delete H.masterFXSwitch;
        var C = new fd(_.E.NI);
        C.XE = !0;
        C.data = { _D: "set", cV: !0 };
        var l = jw.$W("Lyr", !0);
        l.v.splice(0, 0, { t: "prop", v: { classID: "Prpr", keyID: "Lefx" } });
        C.data.SC = {
          __name: "Set",
          classID: "setd",
          null: l,
          T: { t: "Objc", v: H },
        };
        q.k(C);
      }
    } else if (j.R == "st_copy") {
      this.Tw = [this.oG, this.PP];
      this.oG = null;
      this.PP = null;
    } else if (j.R == "st_paste" || j.R == "st_clear") {
      if (j.R == "st_paste" && this.Tw == null) return;
      var v = j.v != null ? [j.v] : m.J.slice(0),
        K = [],
        S = [],
        o = [],
        V = [];
      for (var y = 0; y < v.length; y++) {
        var k = m.U[v[y]],
          P = L.co.Hc(m, k);
        K.push(k.add.lmfx ? JSON.stringify(k.add.lmfx) : null);
        o.push(JSON.stringify(P));
        if (j.R == "st_paste") {
          S.push(this.Tw[1]);
          V.push(this.Tw[0]);
        } else {
          S.push(null);
          P.lrMd.v = 0;
          P.Opct.v.val = 100;
          P.iOpa.v.val = 100;
          P.blIf = { v: [] };
          for (var z = 0; z < 10; z++) P.blIf.v.push(0, 0, 255, 255);
          V.push(JSON.stringify(P));
        }
      }
      var $ = new eN([11, 6], this);
      $.data = { U: v, aw7: K, axn: S, a6q: o, alM: V };
      this.km($.data, m);
      m.Du($);
      this.oG = null;
      this.PP = null;
    } else {
      var E = this.F$,
        H = null;
      if (j.R == "st_delsingle") {
        H = JSON.parse(this.PP);
        H[eu.C$[j.Os[0]]].v.splice(j.Os[1], 1);
        H = JSON.stringify(H);
      }
      if (H == null) delete k.add.lmfx;
      else k.add.lmfx = JSON.parse(H);
      if (E != null) L.co.hy(m, k, E);
      var $ = new eN([11, 6], this);
      $.data = {
        U: [j.v],
        aw7: [this.PP],
        axn: [H],
        a6q: [this.oG],
        alM: [JSON.stringify(E)],
      };
      m.Du($);
      this.oG = null;
      this.PP = null;
    }
    k.a_.Zs = !0;
    m.qB = !0;
    m.gF();
  };
  L.co.Hc = function (j, q) {
    if (q.add.iOpa == null) q.add.iOpa = 255;
    if (q.add.brst == null) q.add.brst = [1, 1, 1];
    var m = q.D1() ? ["pass"].concat(kJ.YH) : kJ.YH;
    return {
      lrMd: { v: m.indexOf(q.hz) },
      Opct: {
        v: { type: "#Prc", val: Math.round((q.yA * 100) / 255) },
        t: "UntF",
      },
      iOpa: {
        v: { type: "#Prc", val: Math.round((q.add.iOpa * 100) / 255) },
        t: "UntF",
      },
      blIf: { v: q.EG.slice(0) },
      brst: { v: q.add.brst },
      gagl: { t: "UntF", v: { type: "#Ang", val: j.KB() } },
      globalAlt: j.AL(),
      isFolder: q.D1(),
    };
  };
  L.co.hy = function (j, q, m) {
    var n = q.D1() ? ["pass"].concat(kJ.YH) : kJ.YH;
    q.hz = n[m.lrMd.v];
    q.yA = Math.round((m.Opct.v.val * 255) / 100);
    q.add.iOpa = Math.round((m.iOpa.v.val * 255) / 100);
    q.EG = m.blIf.v.slice(0);
    q.add.brst = m.brst.v.slice(0);
    j.CO(m.gagl.v.val);
    j.tL(m.globalAlt);
  };
  L.co.prototype.W6 = function (j, q) {
    for (var y = 0; y < j.U.length; y++) {
      var m = q.U[j.U[y]],
        n = j.aw7[y];
      if (n == null) delete m.add.lmfx;
      else m.add.lmfx = JSON.parse(n);
      L.co.hy(q, m, JSON.parse(j.a6q[y]));
      m.a_.Zs = !0;
    }
    q.qB = !0;
    q.gF();
  };
  L.co.prototype.km = function (j, q) {
    for (var y = 0; y < j.U.length; y++) {
      var m = q.U[j.U[y]],
        n = j.axn[y];
      if (n == null) delete m.add.lmfx;
      else m.add.lmfx = JSON.parse(n);
      L.co.hy(q, m, JSON.parse(j.alM[y]));
      m.a_.Zs = !0;
    }
    q.qB = !0;
    q.gF();
  };
  L.YM = function () {
    L.ju.call(this, "Layer Comps", L.lt);
  };
  L.YM.prototype = new L.ju();
  L.YM.prototype.BT = function (j, q, m, n) {
    var G = B.S(m.Qp),
      W = B.S(m.Qp),
      k = null,
      T = null,
      b = null,
      c = -1,
      a = !1;
    if (j.R == "delLC") {
      var f = L.YM.D3(m.Qp, j.Wy),
        U = m.Qp.lastAppliedComp ? m.Qp.lastAppliedComp.v : 0;
      W.list.v.splice(f, 1);
      if (U == j.Wy) delete W.lastAppliedComp;
      k = "Delete Layer Comp";
    }
    if (j.R == "editLC") {
      var f = L.YM.D3(m.Qp, j.Wy),
        Z = W.list.v[f].v;
      if (j.p6 != null) Z.Nm.v = j.p6;
      if (j.a7z != null) {
        var h = j.a7z,
          u = Z.capturedInfo.v,
          i = u & ((1 << h) - 1);
        u = u >> h;
        if ((u & 1) == 1) u--;
        else u++;
        Z.capturedInfo.v = (u << h) + i;
      }
      k = "Layer Comp properties";
    }
    if (j.R == "setLC") {
      L.YM.TH(m);
      if (j.Wy == 0) delete W.lastAppliedComp;
      else W.lastAppliedComp = { t: "long", v: j.Wy };
      k = "Switch Layer Comp";
      a = !0;
    }
    if (j.R == "updLC") {
      L.YM.TH(m);
      T = L.YM.au9(m, j.Wy);
      b = L.YM.yF(m, j.Wy);
      W.lastAppliedComp = { t: "long", v: j.Wy };
      k = "Update Layer Comp";
      c = j.Wy;
      a = !0;
    }
    if (j.R == "addLC") {
      L.YM.TH(m);
      var x = 1;
      for (var y = 0; y < W.list.v.length; y++)
        x = Math.max(x, W.list.v[y].v.compID.v) + 1;
      x += Math.floor(Math.random() * 1e4);
      var X = {
        t: "Objc",
        v: {
          classID: "Comp",
          Nm: { t: "TEXT", v: "New Comp " + (W.list.v.length + 1) },
          compID: { t: "long", v: x },
          capturedInfo: { t: "long", v: 7 },
        },
      };
      W.list.v.push(X);
      W.lastAppliedComp = { t: "long", v: x };
      k = "New Layer Comp";
      var $ = L.YM.yF(m, x);
      L.YM.jW(m, $, x);
    }
    var H = new eN(k, this);
    H.data = { azT: G, aER: W, a3K: T, aq3: b, Wy: c, FE: a };
    this.km(H.data, m);
    m.Du(H);
  };
  L.YM.prototype.km = function (j, q) {
    q.Qp = j.aER;
    q.qB = !0;
    if (j.aq3) L.YM.jW(q, j.aq3, j.Wy);
    if (j.FE) {
      var m = q.Qp.lastAppliedComp ? q.Qp.lastAppliedComp.v : 0,
        n = L.YM.D3(q.Qp, m),
        G = n == -1 ? null : q.Qp.list.v[n].v,
        W = G ? G.capturedInfo.v : 7;
      L.YM.Zp(q, m, W);
      q.gF();
    }
  };
  L.YM.prototype.W6 = function (j, q) {
    q.Qp = j.azT;
    q.qB = !0;
    if (j.a3K) L.YM.jW(q, j.a3K, j.Wy);
    if (j.FE) {
      var m = q.Qp.lastAppliedComp ? q.Qp.lastAppliedComp.v : 0,
        n = L.YM.D3(q.Qp, m),
        G = n == -1 ? null : q.Qp.list.v[n].v,
        W = G ? G.capturedInfo.v : 7;
      L.YM.Zp(q, m, W);
      q.gF();
    }
  };
  L.YM.TH = function (j) {
    if (j.Qp.lastAppliedComp != null || !j.aFG) return;
    var q = L.YM.yF(j, 0);
    L.YM.jW(j, q, 0);
    j.aFG = !1;
  };
  L.YM.bJ = function (j, q, m) {
    j.v.Hrzn.v += q;
    j.v.Vrtc.v += m;
  };
  L.YM.D3 = function (j, q) {
    var m = j.list.v;
    for (var y = 0; y < m.length; y++) if (m[y].v.compID.v == q) return y;
    return -1;
  };
  L.YM.aoU = function (j) {
    var q = j.layerSettings.v,
      G = null;
    if (q.length == 0) return;
    var m =
        "compList enab Ofst blendOptions Lefx FXRefPoint imageMask vectorMask layerSpecific".split(
          " "
        ),
      n = q[0].v;
    if (n.enab == null) n.enab = { t: "bool", v: !0 };
    if (n.Ofst == null)
      n.Ofst = {
        t: "Objc",
        v: {
          classID: "null",
          Hrzn: { t: "long", v: 0 },
          Vrtc: { t: "long", v: 0 },
        },
      };
    for (var y = 0; y < q.length; y++) {
      var W = q[y].v;
      if (G == null) G = B.S(W);
      else
        for (var k = 0; k < m.length; k++) {
          var T = m[k];
          if (W[T]) G[T] = B.S(W[T]);
        }
      q[y].v = B.S(G);
    }
  };
  L.YM.aCT = function (j, q) {
    var m = j.add.shmd.cmls,
      n = m.layerSettings.v;
    for (var G = 0; G < n.length; G++) {
      var W = n[G].v,
        k = W.compList.v[0].v;
      if (k == q) return G;
    }
    return -1;
  };
  L.YM.aJ6 = function (j, q) {
    var m = L.YM.aCT(j, q);
    return m == -1 ? null : j.add.shmd.cmls.layerSettings.v[m].v;
  };
  L.YM.Zp = function (j, q, m) {
    for (var y = 0; y < j.U.length; y++) {
      var n = j.U[y],
        G = n.add.shmd.cmls;
      if (G == null) continue;
      var W = G.layerSettings.v,
        k = L.YM.aJ6(n, q);
      if (k == null) {
        n.xg(!1);
        continue;
      }
      if ((m & 1) != 0) {
        if (k.enab) n.xg(k.enab.v);
        else n.xg(!0);
      }
      if ((m & 2) != 0) {
        if (k.Ofst) {
          var T = k.Ofst.v,
            b = n.Fj(j),
            c = Math.round(T.Hrzn.v - b.x),
            a = Math.round(T.Vrtc.v - b.y);
          if (c != 0 || a != 0) L.YE.kW(j, [y], null, c, a);
        }
      }
      if ((m & 4) != 0) {
        if (k.Lefx) {
          var f = B.S(k.Lefx.v);
          gM.KI(f);
          if (JSON.stringify(f) != JSON.stringify(n.add.lmfx)) {
            n.add.lmfx = f;
            n.a_.Zs = !0;
          }
        } else delete n.add.lmfx;
        if (k.blendOptions) {
          var U = k.blendOptions.v;
          if (U.Opct) n.yA = Math.round((255 * U.Opct.v.val) / 100);
          if (U.fillOpacity)
            n.add.iOpa = Math.round((255 * U.fillOpacity.v.val) / 100);
          if (U.Md) n.hz = n.add.lsct == hQ.$a ? "norm" : kJ.l7(U.Md.v.BlnM);
        } else {
          n.yA = 255;
          n.hz = n.D1() ? "pass" : "norm";
          n.add.iOpa = 255;
        }
      }
    }
  };
  L.YM.au9 = function (j, q) {
    var m = {};
    for (var y = 0; y < j.U.length; y++) {
      var n = j.U[y];
      if (n.add.shmd == null || n.add.shmd.cmls == null) continue;
      m["l" + n.add.lyid] = B.S(L.YM.aJ6(n, q));
    }
    return m;
  };
  L.YM.yF = function (j, q) {
    var m = {};
    for (var y = 0; y < j.U.length; y++) {
      var n = j.U[y],
        G = n.add.lyid;
      m["l" + G] = L.YM.a2Y(j, n, q);
    }
    return m;
  };
  L.YM.a2Y = function (j, q, m) {
    var n = q.add.shmd ? q.add.shmd.cmls : null,
      G = { classID: "null" },
      W = q.Fj(j),
      k = {
        t: "Objc",
        v: {
          classID: "null",
          Hrzn: { t: "long", v: W.x },
          Vrtc: { t: "long", v: W.y },
        },
      };
    G.compList = { t: "VlLs", v: [{ t: "long", v: m }] };
    G.enab = { t: "bool", v: q.Iw() };
    G.Ofst = B.S(k);
    G.FXRefPoint = B.S(n && n.origFXRefPoint ? n.origFXRefPoint : k);
    G.blendOptions = {
      t: "Objc",
      v: {
        classID: "null",
        Md: { t: "enum", v: { BlnM: kJ.il(q.hz) } },
        Opct: { t: "UntF", v: { type: "#Prc", val: (100 * q.yA) / 255 } },
        fillOpacity: {
          t: "UntF",
          v: {
            type: "#Prc",
            val: q.add.iOpa != null ? (100 * q.add.iOpa) / 255 : 100,
          },
        },
      },
    };
    if (q.add.vmsk) {
      G.vectorMask = { t: "Objc", v: { classID: "null" } };
      G.vectorMask.v.Ofst = B.S(k);
    }
    if (q.add.lmfx) {
      G.Lefx = { t: "Objc", v: B.S(q.add.lmfx) };
      gM.P1(G.Lefx.v);
    }
    return G;
  };
  L.YM.aKc = function (j, q) {
    var m = q.add.lyid;
    if (q.add.shmd == null) q.add.shmd = {};
    if (q.add.shmd.cmls == null) {
      q.add.shmd.cmls = {
        classID: "null",
        LyrI: { t: "long", v: m },
        layerSettings: { t: "VlLs", v: [{ t: "Objc", v: L.YM.a2Y(j, q, 0) }] },
      };
    }
  };
  L.YM.jW = function (j, q, m) {
    for (var y = 0; y < j.U.length; y++) {
      var n = j.U[y],
        G = n.add.lyid;
      L.YM.aKc(j, n);
      var W = n.add.shmd.cmls,
        k = W.layerSettings.v,
        T = q["l" + G];
      if (T != null) T = { t: "Objc", v: B.S(T) };
      var b = L.YM.aCT(n, m);
      if (b == -1) {
        if (T == null) continue;
        else k.push(T);
      } else {
        if (T == null) k.splice(b, 1);
        else k[b] = T;
      }
    }
  };
  L.YM.DI = function (j, q) {
    for (var y = 0; y < j.U.length; y++) {
      var m = j.U[y],
        n = m.add.lyid;
      if (m.add.shmd == null || m.add.shmd.cmls == null) continue;
      var G = m.Fj(j),
        W = Math.round(G.x),
        k = Math.round(G.y);
      if (!q) {
        W = -W;
        k = -k;
      }
      var T = m.add.shmd.cmls,
        b = T.layerSettings.v;
      if (T.origFXRefPoint) L.YM.bJ(T.origFXRefPoint, -W, -k);
      for (var c = 0; c < b.length; c++) {
        var a = b[c].v;
        L.YM.bJ(a.Ofst, W, k);
        var f = a.imageMask,
          U = a.vectorMask;
        if (f && f.v.Ofst) L.YM.bJ(f.v.Ofst, W, k);
        if (U && U.v.Ofst) L.YM.bJ(U.v.Ofst, W, k);
      }
    }
  };
  L.DO = function () {
    L.ju.call(this, "Adjust Edit", L.vP);
    this.Ap = null;
    this._f = null;
  };
  L.DO.prototype = new L.ju();
  L.DO.dC = function (j, q, m, n) {
    if (n) q /= 4;
    var G = 0,
      W = 0,
      k = 255,
      T = 0,
      b = 0,
      c = 255;
    while (W + j[G] < q) {
      W += j[G];
      G++;
    }
    while (T + j[k] < q) {
      T += j[k];
      k--;
    }
    if (n) {
      G -= Math.round(j[G] / (m / 32));
      k += Math.round(j[k] / (m / 32));
      if (G < 0) b = Math.round((-G * 255) / (k - G));
      if (k > 255) c = 255 - Math.round(((k - 255) * 255) / (k - G));
    }
    return [Math.max(G, 0), Math.min(k, 255), b, c, 100];
  };
  L.DO.prototype.BT = function (j, q, m, n, G) {
    var W = j.R;
    if (W == "auto") {
      var k = j.auF,
        T = L.DO.getData(m);
      for (var y = 0; y < T.length; y++) {
        var b = T[y],
          c;
        if (k < 3) {
        } else {
          var a = k0.i4("hue2");
          b$.Cy(a, 0, [0, -100, 0]);
          c = eV.R7("hue2", a);
        }
        eV.Gi(c, b.py, b.vj, b.HA);
      }
      L.DO.xm(m, T);
      L.DO.bL(m, T, k < 3 ? [4, 16, k] : [19, 7, 0], this);
      m.gF();
    }
    if (W == "edit_layer") this.aat(j, q, m, n);
    if (W == "edit" || W == "confirm" || W == "cancel") this.XM(j, q, m, G, !0);
    if (W == "start") {
      if (m.J.length == 0) return;
      var f = m.U[m.J[0]];
      if (f.add.SoLd && f.ma <= 0 && m.y2.length == 0) {
        var U = new fd(_.E.w, !0);
        U.l = L.b_;
        U.data = { R: "start", aA: j.QF, YF: j.YF };
        q.k(U);
        return;
      }
      if (!m.Pl(q, null, !0)) return;
      if (gj[j.QF] && j.YF == null) {
        if (m.J.length != 1)
          alert("Will be applied to " + m.J.length + " layers.");
        var U = new fd(_.E.c, !0);
        U.data = { R: _.Y.s0, kO: "afw_" + j.QF };
        q.k(U);
      } else {
        this.XM({ R: "edit", YF: j.YF, aA: j.QF }, q, m, G);
        this.XM({ R: "confirm", aA: j.QF }, q, m, G);
      }
    }
  };
  L.DO.prototype.aat = function (j, q, m, n) {
    var G = j.R,
      W = m.J[0],
      k = m.U[W],
      T = eV.get(k.add),
      U;
    if (k.add[T] == null) return;
    var b = B.S(k.add[T]);
    for (var c in j.K) b[c] = j.K[c];
    var a = B.S(b);
    for (var c in eV.cl) if (eV.cl[c] == T) a.classID = c;
    var f = m.history[m.d6];
    if (f && f.l == this && f.data.pv != null && f.data.v == W) U = f;
    else {
      var Z = new fd(_.E.NI, !0),
        h = {
          classID: "setd",
          null: jw.$W("AdjL", !0),
          T: { t: "Objc", v: a },
        };
      Z.data = { cV: !0, _D: "set", SC: h };
      q.k(Z);
      var U = new eN([6, 39], this);
      U.data = { v: W, pv: k.add[T], jt: b, atE: h };
      m.Du(U);
    }
    U.data.jt = b;
    U.data.atE.T.v = a;
    this.km(U.data, m);
  };
  L.DO.getData = function (j, q, m) {
    var n = [],
      G = new hk(0, 0, j.r, j.$),
      W = j.y2.length != 0 ? [-1 - j.y2[0]] : j.J;
    for (var y = 0; y < W.length; y++) {
      var k = W[y],
        T = k < 0 ? null : j.U[k],
        b = { v: k, mY: k < 0 ? 1 : T.ma };
      n.push(b);
      var c = j._E[-1 - k];
      if (0 <= k) c = T.ma <= 0 ? null : T.ma == 1 ? T.ex() : T.xE(j).x7;
      var a = c ? c.H : T.H;
      if (j.h) {
        b.HA = j.h.H.TM(q || c != null ? G : a);
      } else b.HA = q || c != null ? a.vd(G) : a.P();
      if (m) b.HA = m[y].HA.P();
      var f = b.HA.C();
      b.py = B.j(f * 4, j.depth);
      if (c) L.tt.Sy(c.N, c.H, c.color, b.py, b.HA);
      else B.M4(T.buffer, a, b.py, b.HA);
      b.vj = b.py.slice(0);
      if (j.h) {
        b.xI = B.j(f, j.depth);
        B.sN(j.h.N, j.h.H, b.xI, b.HA);
      }
    }
    return n;
  };
  L.DO.asT = function (j, q, m) {
    if (q == null) return q;
    var n = eV.rV(j, q),
      W;
    if (n == -1) return q;
    var G = m.length >>> 2,
      k = B.OA(m),
      T = 0.001 * G;
    if (n == 0 || n == 2)
      W = [
        [0, 255, 0, 255, 100],
        L.DO.dC(k[1], T, G, n == 2),
        L.DO.dC(k[2], T, G, n == 2),
        L.DO.dC(k[3], T, G, n == 2),
      ];
    if (n == 1)
      W = [
        L.DO.dC(k[0], T * 0.33, G, !1),
        [0, 255, 0, 255, 100],
        [0, 255, 0, 255, 100],
        [0, 255, 0, 255, 100],
      ];
    var b = k0.i4("levl");
    for (var y = 0; y < 4; y++) im.Cy(b, y, W[y]);
    return b;
  };
  L.DO.asF = function (j, q, m, n) {
    var G, W;
    if (m.t == "name") {
      var k = 0;
      for (var T = 0; T < j.U.length; T++)
        if (j.U[T].getName() == m.v.val) k = T;
      if (j == q && k == n.v) {
        G = n.py;
        W = n.HA;
      } else {
        var b = j.U[k];
        G = b.buffer;
        W = b.H;
      }
    } else {
      W = new hk(0, 0, j.r, j.$);
      G = j == q ? n.NP : j.ht();
    }
    return [G, W];
  };
  L.DO.prototype.XM = function (j, q, m, n) {
    var G = m.h,
      W = j.aA == "matc" && j.YF;
    if (this.Ap == null) {
      if (j.aA == "aply") m.U[m.J[0]].extend(new hk(0, 0, m.r, m.$));
      if (W) m.h = null;
      this.Ap = L.DO.getData(m, null, j.aA == "fade" ? m.iw().data : null);
      m.h = G;
      if (j.aA == "aply" || j.aA == "matc") this.Ap[0].NP = m.ht();
    }
    if (j.R == "edit") {
      this._f = [j.aA, j.YF];
      var k = this.Ap[0],
        T = L.DO.asT(j.aA, j.YF, k.py),
        b = eV.R7(j.aA, T);
      if (j.aA == "fade" || j.aA == "matc" || j.aA == "aply") b = j.YF;
      if (b != null) {
        for (var c = 0; c < this.Ap.length; c++) {
          var a = this.Ap[c];
          if (j.KV) B.wV(a.py, a.vj);
          else if (j.aA == "fade") {
            var f = kJ.l7(j.YF.Md.v.BlnM),
              U = j.YF.Opct.v.val / 100,
              Z = m.iw().data[c];
            B.wV(Z.py, a.vj);
            if (f == "norm")
              B.G.xf(a.py, a.HA, a.vj, a.HA, null, null, null, a.HA, U);
            else {
              var h = dS.ZA();
              h.TZ = !0;
              for (var y = 0; y < Z.py.length; y += 4)
                if (Z.py[y + 3] != a.py[y + 3]) {
                  h = null;
                  break;
                }
              B.G.Jg(f, a.py, a.HA, a.vj, a.HA, a.HA, U, h);
            }
          } else if (j.aA == "matc") {
            function u(s, p) {
              if (p == null) return s;
              var F = B.j(p[1].C() * 4);
              B.M4(s, p[0], F, p[1]);
              return F;
            }
            var i,
              x,
              v = null,
              K = null,
              S = null;
            if (b.noReference && b.noReference.v) {
              i = a.py;
              x = a.HA;
            } else {
              var X = b.Srce.v,
                $ = X[1].v.val,
                H = q.mS,
                C = m;
              for (var y = 0; y < H.length; y++) if (H[y].name == $) C = H[y];
              var l = L.DO.asF(C, m, X[0], a);
              i = l[0];
              x = l[1];
            }
            if (G && b.selectedSourceAreas && b.selectedSourceAreas.v)
              K = [x, G.H];
            if (G && b.SlcA && b.SlcA.v) v = [a.HA, G.H];
            if (G && b.fsel && b.fsel.v) S = [a.HA, G.H];
            a.vj.set(a.py);
            var o = u(a.vj, S);
            kq(u(a.py, v), u(i, K), o, [
              b.Lght.v,
              b.ClrR.v,
              b.Fade.v,
              b.neutralizeColor ? b.neutralizeColor.v : !1,
            ]);
            if (S) B.M4(o, G.H, a.vj, a.HA);
          } else if (j.aA == "aply") {
            b = b.With.v;
            var V = b.T.v,
              l = L.DO.asF(m, m, V[1], a),
              i = l[0],
              x = l[1],
              P = b.Clcl ? b.Clcl.v.Clcn : null,
              f = P ? kJ.l7(P) : "norm",
              U = b.Opct ? b.Opct.v.val / 100 : 1,
              z = ["RGB", "Rd", "Grn", "Bl", "Trsp"].indexOf(V[0].v.enum),
              T = b.Invr && b.Invr.v;
            if (T || z != 0) {
              i = i.slice(0);
              if (T) B.azI(i);
              if (z != 0) {
                var E = B.j(x.C());
                B.Ih(i, E, z - 1);
                if (z == 4) B.BR(E);
                for (var A = 0; A < 3; A++) B.ln(E, i, A);
              }
            }
            if (P == "Add" || P == "Sbtr") {
              var N = 1 / b.Scl.v,
                Q = b.Ofst.v,
                e = P == "Add" ? 1 : -1,
                Y = new Uint8ClampedArray(a.vj.buffer);
              for (var y = 0; y < i.length; y += 4) {
                Y[y] = (a.py[y] + e * i[y]) * N + Q;
                Y[y + 1] = (a.py[y + 1] + e * i[y + 1]) * N + Q;
                Y[y + 2] = (a.py[y + 2] + e * i[y + 2]) * N + Q;
              }
            } else {
              var h = dS.ZA();
              h.TZ = b.PrsT && b.PrsT.v;
              a.vj.fill(0);
              a.vj.set(a.py);
              B.G.Jg(f, i, x, a.vj, a.HA, a.HA, U, h);
            }
          } else eV.Gi(b, a.py, a.vj, a.HA);
        }
        if (W) m.h = null;
        L.DO.xm(m, this.Ap);
        m.h = G;
      }
    }
    if (j.R == "cancel") {
      L.DO.ahG(m, this.Ap);
      this.Ap = null;
    }
    if (j.R == "confirm") {
      var d = { fade: [2, 11], aply: [2, 12], matc: [4, 18] },
        I = d[j.aA];
      if (I == null) I = eV.names[j.aA];
      var O = eV.rV(j.aA, this._f[1]);
      if (O != -1) I = [4, 16, O];
      L.DO.bL(m, this.Ap, I, this);
      this.Ap = null;
      if (O == -1) L.DO.ai(q, this._f);
    }
    m.gF();
  };
  L.DO.ai = function (j, q) {
    var m = q[0],
      n = q[1],
      G,
      W;
    if (eV.Rt[m]) {
      G = eV.Rt[m];
      if (gj[m]) W = n;
    }
    if (k0.Rt[m]) {
      G = k0.Rt[m];
      if (gj[m]) W = n;
    }
    if (m == "fade") {
      G = "fade";
      W = n;
    }
    if (m == "matc") {
      G = "matchColor";
      W = n;
    }
    if (m == "aply") {
      G = "applyImageEvent";
      W = n;
    }
    if (m == "GEfc") {
      if (W.GEfs) W = W.GEfs.v[0].v;
    }
    if (G == null) return;
    var k = new fd(_.E.NI, !0);
    k.data = { cV: !0, _D: G };
    if (W) {
      W = B.S(W);
      k.data.SC = W;
    }
    j.k(k);
  };
  L.DO.ahG = function (j, q) {
    L.DO.RH(j, q);
  };
  L.DO.bL = function (j, q, m, n) {
    for (var y = 0; y < q.length; y++) {
      var G = q[y],
        W = j.U[G.v],
        k =
          G.v < 0
            ? j._E[-1 - G.v]
            : G.mY <= 0
            ? null
            : G.mY == 1
            ? W.ex()
            : W.xE(j).x7;
      if (k) {
        k.yy();
        k.xo = !0;
        if (W) W.D5(j);
      } else {
        W.yy();
        W.gF();
      }
      delete G.vj;
      delete G.xI;
    }
    var T = new eN(m, n);
    T.data = q;
    j.Du(T);
    j.qB = !0;
  };
  L.DO.xm = function (j, q, m) {
    for (var y = 0; y < q.length; y++) {
      var n = q[y],
        G = j.U[n.v],
        W = m ? n.py : n.vj,
        k = n.HA;
      if (n.mY == 0) {
        G.extend(k);
        if (n.xI) {
          B.M4(n.py, k, G.buffer, G.H);
          B.G.xf(W, k, G.buffer, G.H, n.xI, k, 0, k, 1);
        } else B.M4(W, k, G.buffer, G.H);
      } else {
        var T = n.v < 0 ? j._E[-1 - n.v] : n.mY == 1 ? G.ex() : G.xE(j).x7;
        T.extend(k);
        if (n.xI) {
          var b = B.j(k.C() * 4);
          B.wV(n.py, b);
          B.G.xf(W, k, b, k, n.xI, k, 0, k, 1);
          L.tt.ZJ(b, k, T);
        } else L.tt.ZJ(W, k, T);
        T.xo = !0;
        if (G) G.D5(j);
      }
      if (G) G.gF();
    }
    if (!m) L.DO.aLO(j, q);
  };
  L.DO.RH = function (j, q) {
    for (var y = 0; y < q.length; y++) {
      var m = q[y],
        n = j.U[m.v],
        G = m.HA,
        W = B.j(G.C() * 4, j.depth);
      if (m.mY == 0) {
        B.M4(n.buffer, n.H, W, G);
        n.extend(G);
        B.M4(m.py, G, n.buffer, n.H);
        n.yy();
      } else {
        var k = m.v < 0 ? j._E[-1 - m.v] : m.mY == 1 ? n.ex() : n.xE(j).x7;
        L.tt.Sy(k.N, k.H, k.color, W, G);
        k.extend(G);
        L.tt.ZJ(m.py, G, k);
        k.yy();
        k.xo = !0;
        if (n) n.D5(j);
      }
      m.py = W;
      if (n) n.gF();
    }
    j.qB = !0;
  };
  L.DO._W = function (j) {
    var q = 0;
    for (var y = 0; y < j.length; y++) q += j[y].py.length;
    return q;
  };
  L.DO.aLO = function (j, q) {
    var m = L.DO.az6(j),
      n = ~m;
    if (m == 16777215) return;
    var G = j.I.rO;
    for (var y = 0; y < q.length; y++) {
      var W = q[y],
        k = j.U[W.v],
        T = W.HA;
      if (W.mY != 0) continue;
      k.extend(T);
      var b = T.x - k.H.x,
        c = T.y - k.H.y,
        a = k.H.r;
      if (j.depth == 8) {
        var f = new Uint32Array(W.py.buffer),
          U = new Uint32Array(k.buffer.buffer);
        for (var Z = 0; Z < T.$; Z++)
          for (var h = 0; h < T.r; h++) {
            var u = Z * T.r + h,
              i = (Z + c) * a + (h + b);
            U[i] = (U[i] & m) | (f[u] & n);
          }
      } else {
        for (var Z = 0; Z < T.$; Z++)
          for (var h = 0; h < T.r; h++) {
            var u = Z * T.r + h,
              i = (Z + c) * a + (h + b);
            if (G[0] == 0) k.buffer[i * 4] = W.py[u * 4];
            if (G[1] == 0) k.buffer[i * 4 + 1] = W.py[u * 4 + 1];
            if (G[2] == 0) k.buffer[i * 4 + 2] = W.py[u * 4 + 2];
          }
      }
      k.yy();
      k.gF();
    }
    j.gF();
  };
  L.DO.az6 = function (j) {
    var q = j.I.rO;
    return (q[2] * 16711680) | (q[1] * 65280) | (q[0] * 255);
  };
  L.DO.prototype.W6 = function (j, q) {
    var m = q.U[j.v];
    if (j.pv != null) m.add[eV.get(m.add)] = j.pv;
    else L.DO.RH(q, j);
    q.gF();
  };
  L.DO.prototype.km = function (j, q) {
    var m = q.U[j.v];
    if (j.pv != null) m.add[eV.get(m.add)] = j.jt;
    else L.DO.RH(q, j);
    q.gF();
  };
  L.DO.prototype._W = function (j) {
    return j.pv == null ? L.DO._W(j) : 0;
  };
  L.wC = function () {
    L.ju.call(this, "Filter Edit", L.b_);
    this.Ap = null;
    this.tc = null;
    this.R = null;
    this._f = null;
    this.cD = null;
  };
  L.wC.prototype = new L.ju();
  L.wC.prototype.BT = function (j, q, m, n, G) {
    if (j.R == "start") {
      if (m.J.length == 0) return;
      var W = m.U[m.J[0]];
      if (W.add.SoLd && W.ma <= 0 && m.y2.length == 0) {
      } else if (!m.Pl(q, null, !0)) return;
      var k = j.aA;
      if ((gj[k] || k0.Z[k]) && j.YF == null) {
        if (m.J.length != 1)
          alert("Will be applied to " + m.J.length + " layers.");
        var T = new fd(_.E.c, !0);
        T.data = L.wC.Ym(k, this.vl(m, k), j.a5A);
        q.k(T);
      } else {
        var b = { R: "edit", aA: k, YF: j.YF, sK: this.vl(m) };
        this.BT(b, q, m, n, G);
        b.R = "confirm";
        delete b.YF;
        this.BT(b, q, m, n, G);
      }
    }
    if (j.R == "edit" || j.R == "cancel" || j.R == "confirm") {
      if (j.R == "edit") {
        this._f = [j.aA, j.YF];
        if (eV.names[j.aA] == null) this.cD = this._f;
      }
      if (j.sK) this.ahK(j, q, m, G);
      else this.aC$(j, q, m, G);
    }
    if (j.R == "applylast" && this.cD != null) {
      var k = this.cD[0],
        c = this.cD[1];
      if (n.M(gn.O4) && (gj[k] || k0.Z[k])) {
        var T = new fd(_.E.c, !0);
        T.data = L.wC.Ym(k, this.vl(m, k), null, c);
        q.k(T);
      } else {
        var b = { R: "edit", aA: k, YF: c, sK: this.vl(m) };
        this.BT(b, q, m, n, G);
        b.R = "confirm";
        delete b.YF;
        this.BT(b, q, m, n, G);
      }
    }
  };
  L.wC.Ym = function (j, q, m, n) {
    var G = k0.Z[j];
    if (G) return { R: _.Y.UK, l: G, xB: { sK: q, a5A: m } };
    else return { R: _.Y.s0, kO: "afw_" + j, sK: q, HX: n };
  };
  L.wC.prototype.vl = function (j, q) {
    var m = j.U[j.J[0]],
      n;
    if (m.add.SoLd && m.ma <= 0 && j.y2.length == 0) {
      n = { v: j.J[0], index: 0 };
      if (m.add.SoLd.filterFX != null) {
        var G = m.add.SoLd.filterFX.v.filterFXList.v;
        n.index = G.length;
        for (var y = 0; y < G.length; y++)
          if (k0.mK(G[y].v) == "rigidTransform") n.index = y;
      }
    }
    return n;
  };
  L.wC.prototype.ahK = function (j, q, m, n) {
    var G = m.U[j.sK.v],
      W = j.aA;
    if (j.R == "edit") {
      if (this.R == null) {
        var k = k0.names[W];
        if (k == null) k = eV.names[W];
        if (W == "blendOptions") k = [14, 10];
        this.R = new eN(k, this);
        this.R.data = { sK: j.sK, aBs: B.S(G.add.SoLd) };
      }
      if (!G.r3()) {
        G.add.SoLd.filterFX = k0.X2();
        var T = (this.R.data.Pd = fb.aJK(G.add.SoLd.placed.v, m.depth));
        m.N8(T);
        if (m.h) {
          T.x7.N = m.h.N.slice(0);
          T.x7.H = m.h.H.P();
          T.x7.color = 0;
          this.R.data.hF = m.h;
          m.h = null;
        }
        G.yZ(m);
      }
      var b = G.add.SoLd.filterFX.v.filterFXList.v;
      if (b[j.sK.index] == null) {
        b.push(k0.ak(W, n));
      }
      if (j.YF) {
        b[j.sK.index].v.enab.v = j.KV != !0;
        if (W == "blendOptions") b[j.sK.index].v.blendOptions.v = j.YF;
        else b[j.sK.index].v.Fltr.v = j.YF;
      }
      this.R.data.a6h = B.S(G.add.SoLd);
      this.km(this.R.data, m);
    }
    if (j.R == "cancel") {
      if (this.R) this.W6(this.R.data, m);
      this.R = null;
    }
    if (j.R == "confirm") {
      if (this.R) m.Du(this.R);
      if (this._f) L.DO.ai(q, this._f);
      this.R = null;
    }
  };
  L.wC.prototype.aC$ = function (j, q, m, n) {
    if (this.Ap == null) {
      var G = k0.$V(j.aA, j.YF);
      this.Ap = L.DO.getData(
        m,
        G.x != 0 || G.y != 0,
        j.aA == "VaPo" ? [{ HA: j.NP[1] }] : null
      );
    }
    if (j.R == "edit") {
      var W = JSON.stringify(j.YF);
      if ((j.YF == null || W != this.tc) && j.KV != !0)
        for (var y = 0; y < this.Ap.length; y++) {
          var k = this.Ap[y],
            T = { H: k.HA, buffer: k.py },
            b = { H: k.HA, buffer: k.vj };
          if (j.aA == "Avrg" && k.xI) {
            T.buffer = k.py.slice(0);
            B.w6(k.xI, T.buffer);
          }
          k0.Gi(j.aA, T, j.YF, B.b4(n.UP), B.b4(n.vH), b, [
            m.add.lnk2 ? m.add.lnk2 : [],
            m.U[m.J[0]].ex(),
            m._E,
            m.ac(),
          ]);
          if (j.aA == "VaPo") {
            B.M4(j.NP[0], j.NP[1], b.buffer, b.H);
          }
          if (j.aA == "Avrg" && k.xI) {
            var c = k.py.length;
            for (var y = 0; y < c; y += 4) k.vj[y + 3] = k.py[y + 3];
          }
          this.tc = W;
        }
      L.DO.xm(m, this.Ap, j.KV);
    }
    if (j.R == "cancel") {
      L.DO.ahG(m, this.Ap);
      this.Ap = null;
      this.tc = null;
    }
    if (j.R == "confirm") {
      if (j.aA == "VaPo") {
        this.Ap.a4O = JSON.stringify(m.H8);
        this.Ap.aKM = JSON.stringify(j.K);
        m.H8 = j.K;
      }
      L.DO.bL(m, this.Ap, k0.names[j.aA], this);
      this.Ap = null;
      this.tc = null;
      L.DO.ai(q, this._f);
    }
    m.gF();
    m.qB = !0;
  };
  L.wC.prototype.W6 = function (j, q) {
    if (j.aKM) q.H8 = JSON.parse(j.a4O);
    if (j.sK) {
      var m = q.U[j.sK.v];
      if (j.Pd) q._e(j.Pd);
      if (j.hF) q.h = j.hF;
      m.add.SoLd = B.S(j.aBs);
      if (m.r3()) m.dm(q);
      else {
        m.yZ(q);
        m.ma = 0;
      }
    } else L.DO.RH(q, j);
    q.gF();
    q.qB = !0;
  };
  L.wC.prototype.km = function (j, q) {
    if (j.aKM) q.H8 = JSON.parse(j.aKM);
    if (j.sK) {
      var m = q.U[j.sK.v];
      if (j.Pd) q.N8(j.Pd);
      if (j.hF) q.h = null;
      m.add.SoLd = B.S(j.a6h);
      if (m.r3()) m.dm(q);
      else m.yZ(q);
      if (!m.mG()) m.uZ += 32;
    } else L.DO.RH(q, j);
    q.gF();
    q.qB = !0;
  };
  L.wC.prototype._W = function (j) {
    return j.sK == null ? L.DO._W(j) : 0;
  };
  var fG = {
    HN: "0",
    cS: "1",
    WX: "2",
    im: "3",
    gP: "3.5",
    S0: "4",
    OF: "5",
    lG: "6",
    Ns: "7",
    yr: "7.5",
    w: "8",
    D$: "8.5",
    Hd: "8.8",
    lr: "9",
    uk: "10",
    aK8: "10.5",
    R3: "11",
    Vx: "12",
    lF: "13",
    ww: "14",
    Hp: "15",
    BG: "16",
    UQ: "17",
    SZ: "18",
    f7: "19",
    Ru: "21",
    NE: "22",
    rf: "23",
    Tz: "23.0",
    EE: "23.1",
    ZB: "23.2",
    yt: "23.3",
    t2: "23.4",
    V2: "23.5",
    uW: "23.6",
    aCJ: "30",
    kn: "31",
    p0: "40",
    LS: "41",
    SW: "42",
  };
  fG.Zu = {};
  fG.Zu[fG.cS] = ["abr", "brushes", io, [9, 3], 3];
  fG.Zu[fG.WX] = ["grd", "gradients", e8, [12, 37], 4, 36, 36];
  fG.Zu[fG.im] = ["shc", "contours", jH, [12, 21], 0];
  fG.Zu[fG.gP] = ["acv", "curves", fY, [4, 2], 0];
  fG.Zu[fG.S0] = ["asl", "styles", hS, [12, 22], 5];
  fG.Zu[fG.OF] = ["pat", "patterns", f5, [12, 62], 6];
  fG.Zu[fG.lG] = ["csh", "shapes", hR, [12, 77], 7];
  fG.Zu[fG.Ns] = ["aco", "swatches", be, [9, 8], 0, 22, 22];
  fG.Zu[fG.yr] = ["act", "color tables", l4, "Color tables", 0, 22, 22];
  fG.Zu[fG.w] = ["atn", "actions", fO, [9, 9], 2];
  fG.Zu[fG.D$] = ["tpl", "tpresets", eT, [9, 12], 0];
  fG.Zu[fG.Hd] = ["icc", "profiles", i_, "LUTs", 8];
  fG.Ml = {};
  fG.Ml[fG.Ns] = !0;
  function eN(j, q, m) {
    if (m == null) m = !1;
    this.name = j;
    this.l = q;
    this.aoz = m;
    this.data = null;
    this.aIl = Date.now();
  }
  eN.prototype._W = function () {
    return this.l ? this.l._W(this.data) : 0;
  };
  var jw = {};
  jw.$W = function (j, q) {
    var m = { t: "Clss", v: { classID: j } };
    if (q) m = { t: "Enmr", v: { classID: j, typeID: "Ordn", enum: "Trgt" } };
    return { t: "obj ", v: [m] };
  };
  jw.BH = function (j, q) {
    var m = { classID: "Lyr" };
    m[j] = q;
    return {
      _D: "set",
      SC: { classID: "null", null: jw.$W("Lyr", !0), T: { t: "Objc", v: m } },
    };
  };
  jw.aDk = function (j, q, m, n, G) {
    var W = new fd(_.E.NI, !0),
      k = [],
      y = 0,
      T = jw.lY(q, m, n, k);
    while (k.length != 0) {
      var b = k.pop();
      y++;
      if (!b.f) continue;
      console.log(y - 1);
      if (b._D == "conditional") {
        var c = j.U[j.J[0]],
          a = b.SC.null.v.Cndt,
          f = !1;
        if (a == "Bckg") f = !1;
        else if (a == "Pxel" && j.Ph(!1)) f = !0;
        else if (a == "Adjs" && eV.get(c.add)) f = !0;
        else if (a == "Shp" && c.add.vogk) f = !0;
        else if (a == "Grup" && c.D1()) f = !0;
        else if (a == "Opn" && j != null) f = !0;
        else if (a == "32Bt") f = !1;
        else if (a == "RGB") f = !0;
        var U = b.SC.then,
          Z = b.SC.else;
        if (f && U) jw.lY(q, U.v[0].v.val, U.v[1].v.val, k);
        if (!f && Z) jw.lY(q, Z.v[0].v.val, Z.v[1].v.val, k);
      } else if (b._D == "stop") {
        if (b.SC.Cntn && b.SC.Cntn.v == !0) window.confirm(b.SC.Msge.v);
        else {
          alert(b.SC.Msge.v);
          break;
        }
      } else if (b._D == "play") {
        var h = b.SC.null.v,
          u = new fd(_.E.c, !0);
        u.data = { R: _.Y.k0, eQ: [h[0].v.val, h[1].v.val] };
        G.k(u);
      } else {
        W.data = { _D: b._D, SC: b.SC };
        G.k(W);
      }
    }
  };
  jw.zA = function (j, q, m) {
    var n;
    for (var y = 0; y < j.length; y++) {
      if (j[y].ER != m) continue;
      var G = j[y].yJ;
      for (var W = 0; W < G.length; W++) {
        if (G[W].ER != q) continue;
        n = G[W];
      }
    }
    return n;
  };
  jw.lY = function (j, q, m, n) {
    var G = jw.zA(j, q, m).yJ,
      W = G.length;
    for (var y = 0; y < W; y++) n.push(G[W - 1 - y]);
  };
  jw.agT = function (j) {
    var q = j._D,
      m = j.SC,
      n,
      k,
      T,
      b,
      c;
    if (m && m.null) n = m.null.v[0];
    if (m && n == null && m.At) n = m.At.v[0];
    if (n && n.t == "obj ") n = n.v[0];
    var G = n && n.v ? n.v.classID : null,
      W = ["purge"];
    if (W.indexOf(q) != -1) return q[0].toUpperCase() + q.slice(1);
    if (q == "GEfc" || q == "paintDaubs") return i9.names[m.GEfk.v.GEft][1];
    c = eV.Rt;
    for (k in c) if (c[k] == q) T = k;
    c = k0.Rt;
    for (k in c) if (c[k] == q) b = k;
    c = k0.Rt;
    for (k in c) if (k == q) b = k;
    if (T) {
      var a = eV.rV(T, m);
      if (a != -1) return [4, 16, a];
      return eV.names[T];
    }
    if (b) return k0.names[b];
    var f = jw.a2l;
    if (q == "make") {
      if (n) {
        if (G == "AdjL") return [6, 1];
        else if (G == "layerSection") return m.From ? [6, 9] : [6, 20];
        else if (G == "Lyr") return [6, 13];
        else if (G == "Chnl" && n.v.enum == "Msk") return [6, 2];
        else if (G == "contentLayer") return [6, 48, 1];
        else if (G == "BckL") return "Make Background Layer";
        else if (G == "Path") return "Make Path";
        else if (G == "TxLr") return "Make Text Layer";
        else if (G == "slice") return "Make Slices";
        else if (G == "Dcmn") return [11, 7];
        else if (G == "Gd") return [23, 4];
        else if (G == "Brsh") return ["VAR0: VAR1", [12, 87], [9, 3]];
      }
      if (m.Nw) {
        G = m.Nw.v.classID;
        if (G == "Dcmn") return [11, 7];
        else if (G == "Chnl" || G == "SCch") return "New Channel";
      }
    } else if (q == "deselect") {
      if (G == "Path") return "Deselect current path";
      else throw G;
    } else if (q == "draw") {
      return "Draw";
    } else if (q == "select") {
      if (G == "Chnl") {
        var U = {
          Msk: "Mask",
          Grn: "Green",
          Rd: "Red",
          Bl: "Blue",
          RGB: "RGB",
        }[n.v.enum];
        if (U == null) U = "";
        return "Select " + U + " Channel";
      } else if (G == "Mn") return 'Select Panel "' + n.v.enum + '"';
      else if (G == "Lyr") {
        if (n.t == "Enmr")
          return (
            "Select " +
            { Bckw: "Backward", Frwr: "Forward", Back: "Back", Frnt: "Front" }[
              n.v.enum
            ] +
            " Layer"
          );
        return 'Select Layer "' + n.v.val + '"';
      } else if (G == "Path") return "Select Path";
      else if (G == "Brsh") return "Select Brush";
      else if (G == "Dcmn") return "Select Document";
    } else if (f[q] && G == "Chnl") {
      var Z = n.v.keyID == "fsel";
      return f[q] + " " + (Z ? "Selection" : "Channel");
    } else if (q == "set") {
      if (G == "Lyr") return "Set Current Layer";
      else if (G == "AdjL") return [6, 39];
      else if (G == "contentLayer") return [6, 48, 2];
      else if (G == "Prpr") {
        var h = n.v.keyID;
        if (h == "TxtS") return "Set Text Style";
        else if (h == "paragraphStyle") return "Set Paragraph Style";
        else if (h == "Lefx") return [11, 6];
        else if (h == "FlIn") return "Set " + g$.get([1, 14]);
        else if (h == "GnrP") return "Set General Preferences";
        else if (h == "QucM") return ["+ VAR0", [6, 6, 1]];
        else console.log(h);
      } else if (G == "Clr")
        return (
          "Set " +
          (n.v.keyID == "FrgC" ? "Foreground" : "Background") +
          " color"
        );
      else if (G == "Brsh") return "Set Brush";
      else if (G == "Path") return "Set Work Path";
      else console.log(G);
    } else if (q == "move") {
      if (G == "Lyr") return "Move Layer";
      else if (G == "Chnl" && n.v.keyID == "fsel") return [7, 7];
      else console.log(G);
    } else if (q == "show" || q == "hide") {
      var u = "";
      if (G == "Lyr") u = "Layer";
      if (G == "Chnl") u = "Channel";
      if (G == "filterFX") u = "Filter Effect";
      return (q == "show" ? "Show" : "Hide") + " " + u;
    } else if (q == "reset") {
      if (G == "Clr") return "Reset Colors";
    } else if (q == "exchange") {
      if (G == "Clr") return [22, 7, 0];
    } else if (q == "rotateEventEnum") return [2, 5];
    else if (q == "flip") {
      var i = m.Axis.v.Ornt == "Hrzn";
      return [
        [2, 6],
        [22, 4, i ? 2 : 3],
      ];
    }
    if (q == "duplicate" && G == "Dcmn") return "Duplicate first document";
    if (G == "Chnl") {
      if (q == "duplicate") {
        if (n.v.keyID == "fsel") return "Selection to Channel";
        else return "Duplicate Channel";
      }
      if (q == "delete") return "Delete Channel";
    }
    if (q == "transform") return n && n.v.keyID == "fsel" ? [7, 10] : [10, 16];
    if (q == "convertMode") {
      var x = "Convert Mode",
        X = m.Dpth;
      if (X) x += " To " + X.v + "-Bit";
      return x;
    }
    var $ = {
        cut: [5, 0],
        copyEvent: [5, 1],
        clearEvent: ["- VAR0", [6, 6, 1]],
        copyToLayer: [6, 49, 0],
        cutToLayer: [6, 49, 1],
        copyMerged: [5, 7],
        paste: [5, 2],
        close: [1, 12, 0],
        save: [1, 2],
        groupEvent: [6, 18],
        ungroup: [6, 19],
        duplicate: [6, 0],
        mergeLayersNew: [6, 12, 0],
        mergeVisible: "Merge Visible",
        flattenImage: [6, 12, 1],
        updatePlacedLayer: [6, 36, 1],
        fade: [2, 11],
        applyImageEvent: [2, 12],
        matchColor: [4, 18],
        fill: [2, 3],
        stroke: [14, 9],
        colorRange: [7, 8],
        desaturate: [19, 7, 0],
        Dstt: [19, 7, 0],
        delete: m
          ? G == "Lyr"
            ? [6, 31]
            : G == "ASet"
            ? "Delete Action Set"
            : "Delete Path"
          : [2, 2],
        align: [20, 4, 0],
        applyLocking: [6, 57, 1],
        crop: [11, 12, 1],
        placedLayerMakeCopy: "New Smart Obj. via Copy",
        placedLayerEditContents: "Edit Contents",
        placedLayerResetTransforms: "Reset Transform",
        placedLayerExportContents: "Export Contents",
        placedLayerReplaceContents: "Replace Contents",
        placedLayerConvertToLayers: "Convert To Layers",
        grow: "Grow Selection",
        similar: "Similar Selection",
        newPlacedLayer: [6, 7, 0],
        selectNoLayers: "Deselect Layers",
        selectAllLayers: "Select All Layers",
        canvasSize: [11, 3],
        imageSize: [11, 10],
        rasterizeLayer: [6, 8],
        revealAll: [11, 12, 2],
        divide: "Divide Current Slice",
        collapseAllGroupsEvent: "Collapse All Groups",
        assignProfile: "Assign Profile",
        convertToProfile: "Convert To Profile",
        conditional: "If",
      },
      H = $[q];
    if (H == null) H = jw.and[q];
    if (H) return H;
    return q;
  };
  jw.and = {
    border: [7, 9],
    smoothness: [19, 3, 0],
    expand: [7, 4],
    contract: [7, 5],
    feather: [7, 6],
    inverse: [7, 2],
  };
  jw.a2l = {
    set: "Set",
    add: "Add Transparency",
    addTo: "Add To",
    subtract: "Subtract Transparency",
    subtractFrom: "Subtract From",
    interfaceIconFrameDimmed: "Intersect Transparency",
    interfaceWhite: "Intersect With",
  };
  jw.a7E = function (j, q, m, n) {
    var G = j._D,
      W = j.SC,
      k = !1,
      T = new fd(_.E.w, !0),
      f,
      U,
      Z,
      h;
    T.l = L.W1;
    var b = new fd(_.E.c, !0),
      c = ["purge", "updatePlacedLayer"];
    if (c.indexOf(G) != -1) return;
    var a = G;
    while (a.length < 4) a += " ";
    h = eV.Rt;
    for (f in h) if (h[f] == a) U = f;
    h = k0.Rt;
    for (f in h) if (h[f] == a) Z = f;
    h = k0.Rt;
    for (f in h) if (f == a) Z = f;
    if (G == "fade") U = G;
    if (G == "matchColor") U = "matc";
    if (G == "applyImageEvent") U = "aply";
    if (U) {
      T.l = L.vP;
      T.data = { R: "start", QF: U, YF: W };
    } else if (Z) {
      T.l = L.b_;
      T.data = { R: "start", aA: Z, YF: W };
    } else if (G == "GEfc" || G == "paintDaubs") {
      T.l = L.b_;
      T.data = { R: "start", aA: "GEfc", YF: W };
    } else if (G == "convertMode") {
      var u = W.Dpth;
      if (u == null) return;
      T.l = L.Fg;
      T.data = { R: "cmode", K: u.v };
    } else if (G == "assignProfile" || G == "convertToProfile") {
      var i = W.profile;
      if (i == null) i = W.T;
      T.l = L.Fg;
      T.data = { R: "cprof", K: i ? i.v : null, af5: G[0] == "c" };
    } else if (
      G == "imageSize" ||
      G == "canvasSize" ||
      G == "revealAll" ||
      G == "trim" ||
      G == "crop"
    ) {
      T.l = L.aC;
      T.data = { R: "fromAction", tp: j };
    } else if (G == "fill" || G == "stroke" || (G == "delete" && W == null)) {
      var x = null;
      if (n.J.length != 0) x = n.U[n.J[0]];
      if (W && JSON.stringify(W).indexOf("aiHeal") != -1) x = null;
      var X = B.b4(m.UP);
      if (x != null && G == "fill" && x.add.TySh) {
        var $ =
          "var c = new SolidColor();  c.rgb.red=" +
          X.o +
          ";  c.rgb.green=" +
          X.i +
          ";  c.rgb.blue=" +
          X.X +
          ";  app.activeDocument.activeLayer.textItem.color = c;";
        b.data = { R: _.Y.D4, dR: $ };
      } else if (x != null && G == "delete" && x.add.TySh) {
        T.l = L.G_;
        T.data = { R: "insertText", K: "" };
      } else if (x != null && G == "fill" && x.ql() && x.NM <= 0) {
        var T = new fd(_.E.NI, !0),
          W = {
            classID: "setd",
            null: jw.$W("contentLayer", !0),
            T: { t: "Objc", v: {} },
          };
        L.zl.C5({ Clr: { t: "Objc", v: B.MV.Ia(B.b4(m.UP)) } }, W.T.v, 0);
        T.data = { _D: "set", SC: W };
        q.k(T);
        return;
      } else if (G == "stroke" && W && W.null == null) {
        T.l = L.Ij;
        T.data = { R: "stroke", aqh: W };
      } else {
        if (G == "stroke" && W && W.Usng) T.l = L.Rt[W.Usng.v.classID];
        else T.l = m.RW == L.$o ? L.$o : L.cS;
        T.data = { R: "fromAction", tp: j };
      }
    } else if (G == "colorRange" || G == "grow" || G == "similar") {
      T.l = L.Ct;
      T.data = { R: "fromAction", tp: j };
    } else if (
      G == "set" &&
      W &&
      W.T &&
      W.T.v.Ordn == "Al" &&
      m.RW == L.G_ &&
      q.kG().bx()
    ) {
      T.l = L.G_;
      T.data = { R: "selectAll" };
    } else if (G == "clearEvent") {
      T.l = L.ag;
      T.data = { R: "qmask" };
    } else if (
      G == "set" &&
      W &&
      W.null &&
      W.null.v[0] &&
      W.null.v[0].v.keyID == "QucM"
    ) {
      T.l = L.ag;
      T.data = { R: "qmask" };
    } else if (ei == 2 && G == "set" && W.T) {
      var x = n.U[n.J[0]];
      if (x) x.Y.J = [];
      if (W.T.v.Ordn == "Al" && x)
        for (var y = 0; y < x.Y.list.length; y++) x.Y.J.push(y);
      n._F = !0;
      return;
    } else if (
      jw.and[G] ||
      (jw.a2l[G] &&
        (!1 ||
          (W.With && W.With.v[0].v.keyID == "fsel") ||
          (W.From && W.From.v[0].v.keyID == "fsel") ||
          (W.null && W.null.v[0].v.keyID == "fsel") ||
          (W.T.v[0] && W.T.v[0].v.keyID == "fsel")))
    ) {
      T.l = L.ag;
      T.data = { R: "fromAction", tp: j };
    } else if (G == "rasterizeLayer") {
      T.data = {
        R: W.What
          ? W.What.v.rasterizeItem == "vectorMask"
            ? R.gt
            : R.aqQ
          : R.kd,
      };
    }
    var H = {
      copyToLayer: R.IW,
      cutToLayer: R.tD,
      mergeLayersNew: R._6,
      mergeVisible: R.wq,
      flattenImage: R.a1P,
      newPlacedLayer: R.k1,
      placedLayerMakeCopy: R.bF,
    };
    if (H[G]) T.data = { R: H[G], SC: W };
    if (T.data) {
      q.k(T);
      return;
    }
    if (G == "collapseAllGroupsEvent") {
      for (var y = 0; y < n.U.length; y++) {
        var x = n.U[y];
        if (x.D1()) x.add.lsct = hQ.z$;
      }
      n.Ls = !0;
      return;
    }
    if (G == "desaturate" || G == "Dstt") {
      T.l = L.vP;
      T.data = { R: "auto", auF: 3 };
      if (n && n.U[n.J[0]].add.SoLd == null) q.k(T);
      return;
    }
    if (G == "close") {
      if (W && W.Svng.v.YsN == "Ys") {
        b.data = { R: _.Y.ON };
        q.k(b);
      }
      b.data = { R: _.Y.BV, an: n };
      q.k(b);
      return;
    }
    if (G == "save") {
      b.data = { R: _.Y.ON };
      q.k(b);
      return;
    }
    if (G == "copyMerged") {
      b.data = { R: _.Y.sp, eN: !0, Xc: !0 };
      q.k(b);
      return;
    }
    if (G == "placedLayerReplaceContents") b.data = { R: _.Y.z1, OD: !0 };
    if (G == "placedLayerConvertToLayers") {
      b.data = { R: _.Y.Ys };
      q.k(b);
      var C = q.mS[q.mS.length - 1];
      C.J = [];
      for (var y = 0; y < C.U.length; y++) C.J.push(y);
      T.l = L.W1;
      T.data = { R: R._k };
      q.k(T);
      var l = n.U[n.J[0]];
      T.l = L.W1;
      T.data = { R: R.Cd, U: C.iG(), xw: C, bC: n, aBa: [l] };
      q.k(T);
      b.data = { R: _.Y.BV };
      q.k(b);
      var v = n.history[n.history.length - 1];
      v.name = "Convert to Layers";
      var K = n.U[n.J[0]];
      K.tV(l.getName());
      L.YE.kW(n, n.LP(), null, l.H.x, l.H.y);
      return;
    }
    if (G == "placedLayerResetTransforms") {
      T.l = L.Fg;
      T.data = { R: "reset", ER: "Reset Transform" };
      q.k(T);
      return;
    }
    var H = {
      placedLayerEditContents: _.Y.Ys,
      placedLayerExportContents: _.Y.axr,
      copyEvent: _.Y.sp,
      paste: _.Y.YV,
    };
    if (H[G]) b.data = { R: H[G], Xc: !0 };
    if (b.data) {
      q.k(b);
      return;
    }
    var S = W.null ? W.null.v : null,
      o = S ? S[0].v.classID : "";
    if (G == "make") {
      if (W.null == null && W.Nw) o = W.Nw.v.classID;
      if (o == "AdjL") {
        T.data = { R: R.Vh, SC: W };
      } else if (o == "layerSection") {
        T.data = W.From ? { R: R._k } : { R: R._u };
        if (W.Usng) {
          var V = W.Usng.v;
          if (V.Nm) T.data.p6 = V.Nm.v;
          if (V.Clr) T.data.YS = jw.ke(V);
        }
      } else if (o == "Lyr") {
        if (W.Usng && W.Usng.v.length == 2) T.data = { R: R.ad4 };
        else {
          T.data = { R: R.YJ };
          if (W.Usng) T.data.p6 = W.Usng.v.Nm.v;
          if (W.below && W.below.v) T.data.alu = !0;
        }
      } else if (o == "Chnl" && W.At && W.At.v[0].v.enum == "Msk") {
        T.data = { R: R.c5, io: W.Usng.v.UsrM };
      } else if (o == "Chnl" || o == "SCch") {
        T.data = { R: R.z3, _G: "fromAction", K: j };
      } else if (o == "contentLayer") {
        T.data = { R: R.gy, SC: W };
      } else if (o == "BckL") {
        n.U[n.J[0]].afS();
        return;
      } else if (o == "Dcmn") {
        if (W.Nw == null) return;
        var P = W.Nw.v;
        b.data = { R: _.Y.ED, fg: fb.ah3(P, m) };
      } else if (o == "Ptrn") b.data = { R: _.Y.Gg, rw: 0 };
      else if (o == "Brsh") b.data = { R: _.Y.Gg, rw: 1 };
      else if (o == "Path") {
        var z = W.At;
        if (z && z.v && z.v[0] && z.v[0].v && z.v[0].v.enum == "vectorMask") {
          T.l = L.W1;
          var A = !1,
            N = !1;
          if (W && W.Usng) {
            var V = W.Usng.v;
            A = V.vectorMaskEnabled == "RvlA";
            N = V[0] && V[0].v.classID == "Path";
          }
          T.data = { R: R.n2, aKC: !A, aw_: N };
        } else {
          T.l = L.Nj;
          T.data = { R: "pathedit", _G: "fromsel" };
        }
      } else if (o == "TxLr") {
        T.l = L.G_;
        T.data = { R: "fromAction", tp: j };
      } else if (o == "slice") {
        T.l = L.Y8;
        T.data = { R: "fromAction", tp: j };
      } else if (o == "Gd") {
        var Q = [[], []],
          P = W.Nw.v;
        Q[P.Ornt.v.Ornt == "Vrtc" ? 0 : 1].push(P.Pstn.v.val);
        var Y = jq.Jv(Q);
        L.YE.cW(Y, n.f8());
        T.l = L.Lx;
        T.data = { R: "gids", MK: Y };
      } else {
        console.log(G, o, W);
        throw "e";
      }
    } else if (G == "divide") {
      T.l = L.Y8;
      T.data = { R: "fromAction", tp: j };
    } else if (G == "deselect") {
      if (o == "Path") {
        n.bR = [];
        n.H7 = [];
        n.Ls = n._F = !0;
        return;
      } else throw o;
    } else if (G == "selectNoLayers") {
      n.J = [];
      n.qB = !0;
    } else if (G == "selectAllLayers") {
      n.J = [];
      for (var y = 0; y < n.U.length; y++) n.J.push(y);
      n.qB = !0;
      return;
    } else if (G == "select") {
      var d = L.Rt;
      if (o == "Lyr") {
        var I = W.selectionModifier,
          O = I ? I.v.selectionModifierType : null,
          s = jw.jq(n, S[0]),
          p = 0;
        if (s == -1) {
          alert("Layer " + S[0].v.val + " does not exist.");
          return;
        }
        var x = n.U[s];
        if (x.D1() && x.ex() && I == null) p = 1;
        T.data = {
          R: R.nu,
          v: s,
          aLC: O
            ? ["addToSelection", "addToSelectionContinuous"].indexOf(O)
            : null,
          NM: p,
        };
      } else if (o == "Path") {
        if (S[0].v.keyID == "WrPt") {
          n.bR = [0];
          n.Ls = n._F = !0;
          return;
        } else if (S[0].t == "name") {
          for (var y = 0; y < n.GA.length; y++)
            if (n.GA[y].name == S[0].v.val) {
              n.bR = [y];
              n.Ls = n._F = !0;
              return;
            }
        } else throw S[0];
      } else if (o == "Chnl") {
        var F = S ? S[0].v.enum : "",
          g = ["Rd", "Grn", "Bl"].indexOf(F);
        if (g != -1) {
          var w = W.Extd && W.Extd.v ? n.I.rO.slice(0) : [0, 0, 0];
          w[g] = 1;
          T.l = L.C9;
          T.data = { R: "setcls", rO: w };
        } else T.data = { R: R.nu, v: s, NM: F == "RGB" ? 0 : 1 };
      } else if (o == "Dcmn") {
        if (q.mS.length < 2) return;
        b.data = { R: _.Y.aCh, dir: W.null.v[0].v.val };
      } else if (o == "Brsh") {
        var r = m.AU.list,
          eQ;
        for (var y = 0; y < r.length; y++) {
          if (r[y].v.Nm.v.split("/").pop() == S[0].v.val) eQ = r[y].v;
        }
        if (m.RW == L.Lx) {
          b.data = { R: _.Y.UK, l: L.cS };
          q.k(b);
        }
        b.data = { R: _.Y.fh, rw: fG.ww, YP: eQ };
      } else if (o == "Mn") {
        if (S[0].v.enum == "FrTr") b.data = { R: _.Y.UK, l: L.Fg };
        if (S[0].v.enum == "Scl")
          b.data = { R: _.Y.UK, l: L.Fg, xB: { io: 3 } };
        if (S[0].v.enum == "Plce") b.data = { R: _.Y.z1, aLy: !0 };
        if (S[0].v.enum == "ZmIn") {
          T.l = L.R2;
          T.data = { R: "zoom", Ow: !0 };
        }
        if (S[0].v.enum == "ZmOt") {
          T.l = L.R2;
          T.data = { R: "zoom", Ow: !1 };
        }
        if (S[0].v.enum == "FtOn") {
          T.l = L.R2;
          T.data = { R: "adapt", K: "fitscr" };
        }
      } else if (d[o]) {
        b.data = { R: _.Y.UK, l: d[o] };
      } else throw o;
    } else if (G == "draw") {
      T.l = L.Nj;
      T.data = { R: "fromAction", tp: j };
    } else if (G == "gradientClassEvent") {
      T.l = L.Dz;
      T.data = { R: "fromAction", tp: j };
    } else if ((G == "set" || G == "reset" || G == "exchange") && o == "Clr") {
      b.data = { R: _.Y.fh, rw: fG.Ru, _G: G == "reset" ? 3 : 2 };
      if (G == "set") {
        b.data._G = S[0].v.keyID == "FrgC" ? 0 : 1;
        var t = B.MV.xH(W.T.v);
        b.data.K = (t.o << 16) | (t.i << 8) | t.X;
      }
    } else if (G == "set") {
      if (o == "AdjL") {
        var dq = W.T.v.classID;
        dq = eV.cl[dq];
        T.l = L.vP;
        if (dq) T.data = { R: "edit_layer", K: W.T.v };
      } else if (o == "Lyr") {
        var D = W.T.v,
          s = jw.jq(n, S[0]);
        for (var ha in D) {
          if (ha == "classID") continue;
          T.l = L.W1;
          if (ha == "Nm") T.data = { R: R.dy, name: D.Nm.v };
          else if (ha == "Opct")
            T.data = { R: R.G4, jt: Math.round((D.Opct.v.val * 255) / 100) };
          else if (ha == "fillOpacity")
            T.data = {
              R: R.yX,
              jt: Math.round((D.fillOpacity.v.val * 255) / 100),
            };
          else if (ha == "Md")
            T.data = {
              R: R.Jf,
              jt: kJ.Tg.indexOf(D.Md.v.BlnM) + (n.U[s].D1() ? 1 : 0),
            };
          else if (ha == "Usrs") T.data = { R: R.c8, v: s };
          else if (ha == "Blnd") {
            T.l = L.EJ;
            T.data = {
              R: "setstl",
              v: s,
              K: { blendOptions: { t: "objc", v: D } },
            };
            q.k(T);
            T.data = { R: "confirm", v: s };
          } else if (ha == "userMaskFeather" || ha == "userMaskDensity") {
            var am = D.userMaskFeather,
              u = D.userMaskDensity,
              s = n.J[0],
              k4 = n.U[s].K$(0);
            if (am) k4.qk = am.v.val;
            if (u) k4.fe = u.v.val;
            T.data = { R: R.Z0, oq: s, i1: k4 };
          } else if (ha == "Clr") {
            var X = jw.ke(D);
            T.data = { R: R.LV, aGE: X };
          } else if (ha == "Lefx") jw.a9C(q, s, D.Lefx.v, m);
          else if (ha == "UsrM") {
            if (D[ha].v == n.U[s].ex().isEnabled) return;
            T.data = { R: R.bQ, v: s };
          } else {
            console.log(W);
            throw ha;
          }
          if (T.data) {
            q.k(T);
            delete T.data;
          }
        }
        T.data = {};
        var x = n.U[s];
        x.asr();
      } else if (o == "Prpr") {
        var D = B.S(W.T.v),
          s = jw.jq(n, W.null.v[1]),
          x = n.U[s],
          aA = S[0].v.keyID;
        if (aA == "TxtS" || aA == "paragraphStyle") {
          var ex = x.add.TySh,
            ac = B.S(ex.s3),
            eJ = al.WT(ac),
            h$ = al.vJ(ac, 0, eJ.length - 2);
          if (aA == "TxtS") al.gh(D, h$.K2);
          else al.gh(D, h$.Th);
          al.jD(ac, 0, eJ.length - 1, h$);
          T.l = L.G_;
          T.data = { R: "newED", jR: s, aCn: ac };
        } else if (aA == "Lefx") {
          for (var da in D)
            if (D[da].v) {
              if (da == "Scl") D[da].v.val = 100;
            }
          jw.a9C(q, s, D, m);
          T.data = {};
        } else if (aA == "FlIn" || aA == "GnrP") return;
        else throw aA;
      } else if (o == "contentLayer") {
        var s = jw.jq(n, S[0]),
          D = W.T.v,
          bb = !0;
        if (D.classID == "shapeStyle") {
          if (D.strokeStyle) {
            D = D.strokeStyle.v;
            bb = !1;
          } else D = D.FlCn.v;
        }
        if (bb) {
          var gb = { solidColorLayer: 0, gradientLayer: 1, patternLayer: 2 }[
              D.classID
            ],
            fM = eu.H4(n.U[s].add),
            Z = fM.pb == gb + 1 ? fM.pH : eu.zf[gb];
          Z = B.S(Z);
          L.zl.C5(D, Z, gb);
          T.data = { R: R.o_, Gj: [s], nt: !0, K: { pb: gb + 1, pH: Z } };
        } else {
          var kS = B.S(n.U[s].add.vstk);
          for (var da in D) kS[da] = D[da];
          T.data = { R: R.o_, Gj: [s], nt: !1, K: kS };
        }
      } else if (o == "Brsh") {
        var eQ = B.S(m.AU.Kw),
          cY = W.T.v;
        if (cY.masterDiameter) eQ.Brsh.v.Dmtr.v.val = cY.masterDiameter.v.val;
        else console.log("unknown brush parameters");
        b.data = { R: _.Y.fh, rw: fG.ww, YP: eQ };
      } else if (o == "Path") {
        T.l = L.Nj;
        T.data = { R: "fromAction", tp: j };
      } else if (o == "TxLr") {
        T.l = L.G_;
        T.data = { R: "fromAction", tp: j };
      } else {
        console.log(S[0], W);
        throw o;
      }
    } else if (G == "move") {
      if (o == "Lyr") {
        var D = W.T.v;
        if (D.classID == "Ofst") {
          T.data = { R: "trsl", p2: D.Hrzn.v.val, DK: D.Vrtc.v.val };
          T.l = L.Lx;
        } else {
          var cS, k3;
          if (D[0].t == "Enmr") {
            if (D[0].v.enum == "Frnt") k3 = 0;
            else if (D[0].v.enum == "Nxt") k3 = 1;
            else if (D[0].v.enum == "Prvs") k3 = 2;
            else if (D[0].v.enum == "Back") k3 = 3;
            else throw "e";
          } else cS = D[0].v.val;
          T.data = { R: R.Wh, target: cS, _G: k3, a4e: W.Dplc ? W.Dplc.v : !1 };
        }
      } else if (o == "Chnl" && S[0].v.keyID == "fsel") {
        T.l = L.ag;
        T.data = { R: "fromAction", tp: j };
      }
    } else if (G == "cut") {
      var D = W.T.v,
        di = D.Hrzn.v.val,
        a7 = D.Vrtc.v.val;
      T.data = { R: "trsl", p2: di, DK: a7 };
      T.l = L.Lx;
    } else if (G == "groupEvent" || G == "ungroup") T.data = { R: R.vu };
    else if (G == "show" || G == "hide") {
      var b0 = W.null.t;
      if (b0 == "obj ") {
        if (S[0].v.val != null) T.data = { R: R.AR, index: S[0].v.val - 1 };
        else T.data = { R: R.Re };
      } else if (b0 == "VlLs") {
        var o = S[0].v[0].v.classID;
        if (o == "Chnl") T.data = { R: R.z3, _G: "fromAction", K: j };
        else {
          var e1 = o == "filterFX" ? S : S[0].v;
          for (var y = 0; y < e1.length; y++) {
            if (o == "filterFX")
              T.data = { R: R.AR, index: e1[y].v[0].v.val - 1 };
            else if (e1[y].v.enum == "Trgt") {
              var l2 = [];
              for (var kL = 0; kL < n.J.length; kL++) {
                var s = n.J[kL],
                  es = n.U[s].Iw();
                if ((G == "show" && es) || (G == "hide" && !es)) continue;
                l2.push(s);
              }
              T.data = { R: R.Ov, Gj: l2 };
            } else {
              var s = jw.jq(n, e1[y]),
                es = n.U[s].Iw();
              if ((G == "show" && es) || (G == "hide" && !es)) continue;
              T.data = { R: R.Ov, Gj: [s] };
            }
            q.k(T);
          }
          return;
        }
      } else throw b0;
    } else if (G == "rotateEventEnum") {
      T.l = o == "Lyr" ? L.Fg : L.aC;
      var kR = W.Angl.v.val;
      T.data = { R: "rot", ER: [2, 5], K: (-kR * Math.PI) / 180 };
    } else if (G == "flip") {
      T.l = o == "Lyr" ? L.Fg : L.aC;
      var eH = W.Axis.v.Ornt == "Hrzn",
        cZ = eH ? new ea(-1, 1) : new ea(1, -1);
      T.data = {
        R: "scl",
        ER: [
          [2, 6],
          [22, 4, eH ? 2 : 3],
        ],
        K: cZ,
      };
    } else if (G == "transform") {
      var S = W.null;
      if (S && S.v instanceof Array) S = S.v[0];
      T.l = S && S.v.keyID == "fsel" ? L.IX : L.Fg;
      T.data = L.Dq.a5p(W);
    } else if (G == "duplicate") {
      if (o == "Chnl") T.data = { R: R.z3, _G: "fromAction", K: j };
      else if (o == "Dcmn") {
        var ga = gh.lj("PSD").Ev(n);
        jc.bZ({ url: n.name }, ga, q);
        return;
      } else if (o == "Actn") {
        var fi = m.rq,
          go = S[1].v.val,
          iz = null;
        for (var y = 0; y < fi.length; y++) if (fi[y].ER == go) iz = fi[y];
        var i5 = jw.zA(fi, S[0].v.val, go);
        i5 = B.S(i5);
        i5.ER += " copy";
        iz.yJ.push(i5);
        return;
      } else T.data = { R: R.iq, p6: W.Nm ? W.Nm.v : null };
    } else if (G == "delete") {
      if (o == "filterFX") {
        if (S[0].v.val != null) T.data = { R: R.Zq, UX: S[0].v.val - 1 };
        else T.data = { R: R.rJ };
      } else if (o == "Path") {
        if (
          S &&
          S.length == 2 &&
          S[0].v.enum == "vectorMask" &&
          S[1].v.classID == "Lyr"
        ) {
          T.l = L.W1;
          T.data = { R: R.aX };
        } else {
          T.l = L.Nj;
          T.data = { R: "pathedit", _G: "del" };
        }
      } else if (o == "Lyr") T.data = { R: R.dh };
      else if (o == "Chnl" && S[0].v.enum == "Msk") T.data = { R: R.zQ };
      else if (o == "Chnl") T.data = { R: R.z3, _G: "fromAction", K: j };
      else if (o == "Cmnd") {
        var fi = m.rq,
          go = S[2].v.val,
          i5 = jw.zA(fi, S[1].v.val, go);
        i5.yJ.splice(S[0].v.val - 1, 1);
        return;
      } else if (o == "Actn") {
        var fi = m.rq,
          go = S[1].v.val,
          iz = null;
        for (var y = 0; y < fi.length; y++) if (fi[y].ER == go) iz = fi[y];
        var i5 = jw.zA(fi, S[0].v.val, go);
        iz.yJ.splice(iz.yJ.indexOf(i5), 1);
        return;
      } else if (o == "ASet") {
        var fi = m.rq,
          go = S[0].v.val,
          iz = null;
        for (var y = 0; y < fi.length; y++) if (fi[y].ER == go) iz = fi[y];
        if (iz == null) return;
        fi.splice(fi.indexOf(iz), 1);
        n.qB = !0;
        return;
      } else throw o;
    } else if (G == "align") {
      if (W.Aply && W.Aply.v.projection == "Auto") {
        T.l = L.aC;
        T.data = { R: "auto-align" };
      } else {
        T.l = L.Lx;
        var aI = W.Usng.v.ADSt,
          U = { AdLf: 0, AdCH: 1, AdRg: 2, AdTp: 4, AdCV: 5, AdBt: 6 }[aI];
        if (U == null) throw aI;
        T.data = { R: "algn", K: U };
      }
    } else if (G == "applyLocking") {
      var bs = W.layerLocking.v,
        k2;
      if (bs.protectTransparency) k2 = [[bs.protectTransparency.v], [0]];
      else if (bs.protectNone)
        k2 = [
          [!1, !1, !1, !1],
          [0, 1, 2, 31],
        ];
      else {
        console.log(bs);
        throw "e";
      }
      T.data = { R: R.p4, jt: k2 };
    } else if (G == "play") {
      var S = W.target.v;
      b.data = { R: _.Y.k0, eQ: [S[0].v.val, S[1].v.val] };
    }
    if (T.data) q.k(T);
    else if (b.data) q.k(b);
    else {
      console.log(j);
      alert('Unknown action "' + G + '"');
      throw "e";
    }
  };
  jw.a9C = function (j, q, m, n) {
    m = B.S(m);
    gM.KI(m);
    if (m.masterFXSwitch == null) m.masterFXSwitch = { t: "bool", v: !0 };
    console.log(m);
    var G = eu.C$;
    for (var W = 0; W < G.length; W++)
      if (m[G[W]]) {
        for (var y = 0; y < m[G[W]].v.length; y++) {
          var k = m[G[W]].v[y].v;
          for (var T = 0; T < 2; T++) {
            var b = k[T == 0 ? "TrnS" : "MpgS"];
            if (b && b.v.Crv == null) {
              var c = b.v,
                a = c.Nm.v.split("=").pop(),
                f = n.QN,
                U = 0;
              for (var Z = 0; Z < f.length; Z++) {
                var h = f[Z].Nm.v.split("=").pop();
                if (h == a) U = Z;
              }
              c.Crv = B.S(f[U].Crv);
            }
          }
        }
      }
    var u = new fd(_.E.w, !0);
    u.l = L.EJ;
    u.data = { R: "setstl", v: q, K: { Lefx: { t: "objc", v: m } } };
    j.k(u);
    u.data = { R: "confirm", v: q };
    j.k(u);
  };
  jw.ke = function (j) {
    var q = { None: 0, Rd: 1, Orng: 2, Ylw: 3, Grn: 4, Bl: 5, Vlt: 6, Gry: 7 }[
      j.Clr.v.Clr
    ];
    if (q == null) throw j.Clr.v.Clr;
    return q;
  };
  jw.jq = function (j, q) {
    var m = 1e6,
      n = 0,
      G = j.U.length;
    for (var y = 0; y < j.J.length; y++) {
      m = Math.min(m, j.J[y]);
      n = Math.max(n, j.J[y]);
    }
    var W = q.t,
      k = -1;
    if (W == "name") {
      var T = q.v.val,
        k = -1;
      for (var y = 0; y < G; y++)
        if (j.U[y].getName() == T) {
          k = y;
          break;
        }
    } else if (W == "Enmr") {
      if (j.J.length != 0) k = j.J[0];
      if (q.v.enum == "Frwr") k = n + 1;
      if (q.v.enum == "Bckw") k = m - 1;
      if (q.v.enum == "Back") k = 0;
      if (q.v.enum == "Frnt") k = G - 1;
      k = (k + G) % G;
    } else if (W == "prop") {
      if (q.v.keyID == "Bckg") k = 0;
    } else if (W == "indx") k = q.v.val - 1;
    return k;
  };
  var eV = {};
  eV.names = {
    brit: [4, 0],
    levl: [4, 1],
    curv: [4, 2],
    expA: [4, 3],
    vibA: [4, 4],
    hue2: [4, 5],
    blnc: [4, 6],
    blwh: [4, 7],
    phfl: [4, 8],
    mixr: [4, 9],
    clrL: [4, 10],
    nvrt: [4, 11],
    post: [4, 12],
    thrs: [4, 13],
    grdm: [4, 14],
    selc: [4, 15],
    rplc: [4, 17],
  };
  eV.aa_ = ["expA", "clrL", "selc"];
  eV.Tr = [
    [13, 1, 1],
    [13, 1, 3],
    [13, 1, 4],
    [13, 1, 11],
    [13, 1, 5],
    [13, 1, 12],
  ];
  eV.aCy = [
    [13, 1, 11],
    [13, 1, 12],
    [13, 1, 3],
    [13, 1, 10],
  ];
  eV.wc = [
    [13, 1, 1],
    [13, 1, 4],
    [13, 1, 5],
  ];
  eV.GF = {
    BrgC: "brit",
    Lvls: "levl",
    Crvs: "curv",
    Exps: "expA",
    vibrance: "vibA",
    HStr: "hue2",
    ClrB: "blnc",
    BanW: "blwh",
    photoFilter: "phfl",
    Invr: "nvrt",
    Pstr: "post",
    Thrs: "thrs",
    GrMp: "grdm",
    SlcC: "selc",
    ChnM: "mixr",
    colorLookup: "clrL",
    rplc: "rplc",
  };
  eV.cl = (function () {
    var j = B.S(eV.GF);
    delete j.GrMp;
    j.GdMp = "grdm";
    return j;
  })();
  eV.Rt = {
    brit: "brightnessEvent",
    levl: "levels",
    curv: "curves",
    expA: "exposure",
    vibA: "vibrance",
    hue2: "hueSaturation",
    blnc: "colorBalance",
    blwh: "blackAndWhite",
    phfl: "photoFilter",
    mixr: "channelMixer",
    clrL: "colorLookup",
    nvrt: "invert",
    post: "posterization",
    thrs: "thresholdClassEvent",
    grdm: "gradientMapEvent",
    selc: "selectiveColor",
    rplc: "replaceColor",
  };
  eV.keys = {
    levl: [gn.A8, gn.ji],
    curv: [gn.A8, gn.Sx],
    hue2: [gn.A8, gn.Si],
    nvrt: [gn.A8, gn.JC],
    blnc: [gn.A8, gn.xa],
  };
  eV.CI = function (j) {
    var q = k0.i4("mixr");
    q.Mnch = { t: "bool", v: j.f0 };
    function m(n, y) {
      var G = { classID: "ChMx" },
        W = { Rd: 0, Grn: 1, Bl: 2, Cnst: 4 };
      for (var k in W)
        G[k] = { t: "UntF", v: { type: "#Prc", val: n[y + W[k]] } };
      return { t: "Objc", v: G };
    }
    if (j.f0) q.Gry = m(j.K, 0);
    else {
      q.Rd = m(j.K, 0);
      q.Grn = m(j.K, 5);
      q.Bl = m(j.K, 10);
    }
    return q;
  };
  eV.Vm = function (j) {
    function q(n, G, y) {
      var W = { Rd: 0, Grn: 1, Bl: 2, Cnst: 4 };
      for (var k in W) if (n[k]) G[y + W[k]] = n[k].v.val;
    }
    var m = {
      f0: !1,
      K: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    };
    if (j.Mnch && j.Mnch.v) m.f0 = !0;
    if (m.f0) q(j.Gry.v, m.K, 0);
    else {
      q(j.Rd.v, m.K, 0);
      q(j.Grn.v, m.K, 5);
      q(j.Bl.v, m.K, 10);
    }
    return m;
  };
  eV.get = function (j) {
    for (var q in eV.names) if (j[q] != null) return q;
    return null;
  };
  eV.R7 = function (j, q) {
    var m = eV.D8,
      n;
    if (j == "brit") {
      var G = q.Brgh ? q.Brgh.v : 0,
        W = q.Cntr ? q.Cntr.v : 0,
        k = q.useLegacy ? q.useLegacy.v : !1;
      if (k) {
        var T = G / 255,
          b = 1 + W / 100;
        if (b > 1) b = 1 + Math.tan(((Math.PI / 2) * W) / 101);
        var c = (1 - b) / 2,
          a = B.kz.vT(T, T, T),
          f = [b, 0, 0, c, 0, b, 0, c, 0, 0, b, c, 0, 0, 0, 1],
          U = B.kz.multiply(f, a),
          Z = {
            o: new Float32Array(256),
            i: new Float32Array(256),
            X: new Float32Array(256),
          };
        for (var y = 0; y < 256; y++) Z.o[y] = y / 255;
        B.kz.oF(Z, Z, U);
        n = { e: m.rr, NH: Z.o, lW: Z.o, aM: Z.o, JU: !1, W_: !1 };
      } else {
        var h = 1024,
          u = -30 + (60 * (W + 100)) / 200,
          i = [];
        for (var y = 0; y < 4; y++)
          i.push(B.SD.Fn((y / 3) * 255, (y / 3) * 255, !0));
        i[1].v.Hrzn.v = 64;
        i[1].v.Vrtc.v = 64 - u;
        i[2].v.Hrzn.v = 128 + 64;
        i[2].v.Vrtc.v = 128 + 64 + u;
        i.sort(function (br, eb) {
          return br.v.Hrzn.v - eb.v.Hrzn.v;
        });
        var x = B.SD.Bh(i, h);
        function X(br, h) {
          var i = [],
            aF = 3;
          for (var y = 0; y < aF + 1; y++)
            i.push(B.SD.Fn((y / aF) * 255, (y / aF) * 255, !0));
          i[1].v.Hrzn.v = 130 - br * 26;
          i[1].v.Vrtc.v = 130 + br * 51;
          i[2].v.Hrzn.v = 233 - br * 48;
          i[2].v.Vrtc.v = 233 + br * 10;
          return B.SD.Bh(i, h);
        }
        var $ = X(Math.abs(G) / 100, h);
        if (G < 0) {
          var H = [],
            C = 1 / h;
          for (var y = 0; y < h; y++) {
            var l = y * C,
              v = y;
            while ($[v] > l && v > 1) v--;
            H[y] = v * C;
          }
          $ = H;
        }
        var K = new Float32Array(h);
        for (var y = 0; y < h; y++) {
          var S = Math.round((h - 1) * $[y]);
          K[y] = x[S];
        }
        n = { e: m.rr, NH: K, lW: K, aM: K, JU: !1, W_: !1 };
      }
    }
    if (j == "levl") {
      var o = [],
        V,
        P,
        a,
        z,
        E,
        A,
        N = 256;
      for (var y = 0; y < 4; y++) o.push(im.Lq(q, y));
      var Q = N - 1;
      V = -o[0][0] / 255;
      P = 1 / (o[0][1] / 255 - o[0][0] / 255);
      a = B.kz.multiply(B.kz.Hq(P, P, P), B.kz.vT(V, V, V));
      z = B.kz.Hq(
        1 / (o[1][1] / 255 - o[1][0] / 255),
        1 / (o[2][1] / 255 - o[2][0] / 255),
        1 / (o[3][1] / 255 - o[3][0] / 255)
      );
      E = B.kz.vT(-o[1][0] / 255, -o[2][0] / 255, -o[3][0] / 255);
      A = B.kz.multiply(z, E);
      var K = {
        o: new Float32Array(N),
        i: new Float32Array(N),
        X: new Float32Array(N),
      };
      for (var y = 0; y < N; y++) K.o[y] = K.i[y] = K.X[y] = y / Q;
      var e = 1 / (o[0][4] / 100),
        Y = 1 / (o[1][4] / 100),
        d = 1 / (o[2][4] / 100),
        I = 1 / (o[3][4] / 100);
      B.kz.oF(K, K, A);
      for (var y = 0; y < N; y++) {
        K.o[y] = Math.max(0, Math.min(1, Math.pow(K.o[y], Y)));
        K.i[y] = Math.max(0, Math.min(1, Math.pow(K.i[y], d)));
        K.X[y] = Math.max(0, Math.min(1, Math.pow(K.X[y], I)));
      }
      B.kz.oF(K, K, a);
      for (var y = 0; y < N; y++) {
        K.o[y] = Math.max(0, Math.min(1, Math.pow(K.o[y], e)));
        K.i[y] = Math.max(0, Math.min(1, Math.pow(K.i[y], e)));
        K.X[y] = Math.max(0, Math.min(1, Math.pow(K.X[y], e)));
      }
      V = o[0][2] / 255;
      P = o[0][3] / 255 - o[0][2] / 255;
      a = B.kz.multiply(B.kz.vT(V, V, V), B.kz.Hq(P, P, P));
      z = B.kz.Hq(
        o[1][3] / 255 - o[1][2] / 255,
        o[2][3] / 255 - o[2][2] / 255,
        o[3][3] / 255 - o[3][2] / 255
      );
      E = B.kz.vT(o[1][2] / 255, o[2][2] / 255, o[3][2] / 255);
      A = B.kz.multiply(E, z);
      B.kz.oF(K, K, B.kz.multiply(a, A));
      n = { e: m.rr, NH: K.o, lW: K.i, aM: K.X, JU: !1, W_: !1 };
    }
    if (j == "curv") {
      var O = fY.Lq(q, 0).length == 256 ? 1 : 0,
        s = [];
      if (O == 0) {
        var p = B.SD.Bh(fY.Lq(q, 0), 256);
        for (var y = 1; y < 4; y++) {
          var F = B.SD.Bh(fY.Lq(q, y), 256);
          s.push(B.SD.a95(F, p));
        }
      } else {
        var g = [];
        for (var y = 0; y < 4; y++) {
          var w = new Float32Array(256);
          g.push(w);
          var r = fY.Lq(q, y);
          for (var v = 0; v < 256; v++) w[v] = r[v] / 255;
        }
        for (var y = 1; y < 4; y++) s.push(B.SD.a95(g[y], g[0]));
      }
      n = { e: m.rr, NH: s[0], lW: s[1], aM: s[2], JU: !1, W_: !1 };
    }
    if (j == "expA") {
      var eQ = q.Exps,
        t = q.Ofst,
        dq = q.gammaCorrection,
        D = eQ ? eQ.v : 0,
        ha = t ? t.v : 0,
        am = dq ? dq.v : 1,
        K = new Float32Array(256);
      for (var y = 0; y < 256; y++) {
        var q = y / 255,
          k4 = Math.pow(Math.abs(ha), 1 / (Math.PI / 2));
        if (ha > 0) {
          q = Math.max(ha / Math.E, q);
          q = q * Math.exp(ha / 1.75 + D / Math.PI);
          q = (1 - k4) * q + k4 * 1;
        } else {
          q = q * Math.exp(-ha * 1.75 + D / Math.PI);
          q = q + -k4 * 1.14;
        }
        q = Math.pow(q, 1 / am);
        K[y] = Math.max(0, Math.min(1, q));
      }
      n = { e: m.rr, NH: K, lW: K, aM: K, JU: !1, W_: !1 };
    }
    if (j == "vibA") {
      var aA = (q.vibrance ? q.vibrance.v : 0) / 100,
        ex = (q.Strt ? q.Strt.v : 0) / 100,
        k4 = 1 + aA * (aA > 0 ? 0.25 : 0.5),
        ac = 0.8 + 0.2 / k4;
      n = { e: m.Kx, rw: [aA, ex, ac, k4] };
    }
    if (j == "hue2") {
      var eJ = [],
        h$ = [],
        da = [],
        bb = q.Clrz ? q.Clrz.v : !1,
        N = 256,
        Q = N - 1;
      for (var y = 0; y < N; y++) {
        eJ[y] = y / Q;
        h$[y] = 0;
        da[y] = 0;
      }
      var gb = b$.Lq(q, 0),
        fM = eV._o(gb[1] / 100);
      if (bb) {
        var kS = gb[0] / 360;
        for (var y = 0; y < N; y++) {
          eJ[y] = kS;
          h$[y] = fM;
        }
      } else {
        for (var y = 0; y < N; y++) {
          var cY = eJ[y],
            cS = h$[y];
          eJ[y] += gb[0] / 360;
          for (var v = 0; v < 6; v++) {
            var k3 = b$.Lq(q, v + 1),
              di = k3.ZE,
              a7 = k3.AK,
              k4 = 0;
            for (var b0 = 1; b0 < 4; b0++) if (a7[b0] < a7[0]) a7[b0] += 360;
            var e1 = a7[0],
              l2 = a7[1],
              kL = a7[2],
              es = a7[3],
              kR = cY * 360;
            if (kR < a7[0]) kR += 360;
            var eH = (kR - e1) / (l2 - e1),
              cZ = (kR - kL) / (es - kL);
            if (eH < 0) k4 = 0;
            else if (eH < 1) k4 = eH;
            else if (cZ < 0) k4 = 1;
            else if (cZ < 1) k4 = 1 - cZ;
            else k4 = 0;
            var b = eV._o(di[1] / 100);
            eJ[y] += (k4 * di[0]) / 360;
            h$[y] += k4 * b;
            da[y] += (k4 * di[2]) / 100;
          }
        }
        for (var y = 0; y < N; y++) {
          h$[y] = (1 + h$[y]) * (1 + fM) - 1;
          da[y] = Math.max(-1, Math.min(1, da[y]));
        }
      }
      var K = B.j(N * 4 * 1, 32);
      for (var y = 0; y < N; y++) {
        K[4 * y] = eJ[y];
        K[4 * y + 1] = eV.aD4(h$[y]);
        K[4 * y + 2] = da[y];
      }
      var ga = gb[2] / 100,
        fi = ga < 0 ? -ga : ga,
        go = ga < 0 ? 0 : 1;
      n = {
        e: m.JZ,
        map: K,
        acO: fi * go,
        Ek: 1 - fi,
        aEo: gb[2] / 100,
        amG: bb ? 1 : 0,
      };
    }
    if (j == "nvrt") {
      var K = new Float32Array(256);
      for (var y = 0; y < 256; y++) K[y] = 1 - y / 255;
      n = { e: m.rr, NH: K, lW: K, aM: K, JU: !1, W_: !1 };
    }
    if (j == "post") {
      var iz = q.Lvls.v,
        K = new Float32Array(256),
        k4 = iz / 255.001,
        i5 = 1 / (iz - 1);
      for (var y = 0; y < 256; y++) K[y] = Math.floor(y * k4) * i5;
      n = { e: m.rr, NH: K, lW: K, aM: K, JU: !1, W_: !1 };
    }
    if (j == "grdm") {
      var aI = q.Grad.v,
        bs = q.Rvrs,
        k2 = q.gs99,
        h = 1024,
        jG = B.MV.apj(
          aI,
          h,
          bs ? bs.v : !1,
          0,
          0,
          k2 ? k2.v.gradientInterpolationMethodType : "Gcls"
        ),
        eW = new Float32Array(h),
        k1 = new Float32Array(h),
        ke = new Float32Array(h);
      B.Ih(jG, eW, 0);
      B.Ih(jG, k1, 1);
      B.Ih(jG, ke, 2);
      n = { e: m.rr, NH: eW, lW: k1, aM: ke, JU: !0, W_: !1 };
    }
    if (j == "selc") {
      var jh = new Float32Array(9 * 3 * 2),
        cE = q.g7,
        cy = q.Mthd ? q.Mthd.v.CrcM == "Absl" : !1;
      for (var v = 0; v < 9; v++) {
        var hl = v * 6,
          c2 = bh.Lq(q, v),
          f9 = c2[0] / 100,
          hu = c2[1] / 100,
          iJ = c2[2] / 100,
          dZ = c2[3] / 100;
        if (cy) {
          jh[hl] = jh[hl + 1] = jh[hl + 2] = 1;
          jh[hl + 3] = f9 * (1 + dZ) + dZ;
          jh[hl + 4] = hu * (1 + dZ) + dZ;
          jh[hl + 5] = iJ * (1 + dZ) + dZ;
        } else {
          jh[hl + 0] = (1 + f9) * (1 + dZ);
          jh[hl + 1] = (1 + hu) * (1 + dZ);
          jh[hl + 2] = (1 + iJ) * (1 + dZ);
        }
      }
      n = { e: m.te, a3W: jh };
    }
    if (j == "blwh") {
      var kd = "Rd Yllw Grn Cyn Bl Mgnt".split(" "),
        n = [],
        kX = 0,
        kc = 0;
      for (var y = 0; y < 6; y++) n.push(q[kd[y]] ? q[kd[y]].v : 50);
      n.push(q.useTint.v, q.tintColor.v);
      var bC = [];
      for (var y = 0; y < 6; y++) bC.push((n[y] - 50) / 50);
      var ak = B.MV.xH(n[7]);
      ak.o /= 255;
      ak.i /= 255;
      ak.X /= 255;
      var gD = B.vE(ak.o, ak.i, ak.X),
        a9 = B.Sn(B.wL(gD.uu, 1, 0.5)),
        kk = gD.fO * gD.YF;
      if (a9 == 0.5) kX = kc = 0.5;
      else {
        kX = (kk * (0.5 - a9)) / (0.5 / a9 - 1);
        kc = 1 - kk * (0.5 - a9) - 1 / (2 * (1 - a9));
        kc /= 1 - 1 / (2 * (1 - a9));
      }
      n = {
        e: m.LT,
        a4h: bC,
        Ao: n[6] ? 1 : 0,
        aMe: gD.uu,
        Sn: a9,
        aky: kk,
        oV: kX,
        ab7: kc,
      };
    }
    if (j == "blnc") {
      var o = [],
        ew = ["ShdL", "MdtL", "HghL"];
      for (var y = 0; y < 3; y++) {
        if (q[ew[y]] == null) {
          o[y] = [0, 0, 0];
          continue;
        }
        var iz = q[ew[y]].v,
          gS = iz[0].v / 100,
          hp = iz[1].v / 100,
          g2 = iz[2].v / 100,
          jY =
            q.PrsL == null || q.PrsL.v
              ? (Math.min(gS, hp, g2) + Math.max(gS, hp, g2)) / 2
              : 0;
        o[y] = [gS - jY, hp - jY, g2 - jY];
      }
      var s = [
        new Float32Array(256),
        new Float32Array(256),
        new Float32Array(256),
      ];
      for (var v = 0; v < 3; v++)
        for (var y = 0; y < 256; y++) {
          var l = y * (1 / 255),
            he = 0,
            u = 0,
            a5 = 0;
          u = o[2][v];
          a5 = Math.abs(u);
          if (u < 0) he = Math.pow(l, Math.SQRT2);
          else he = 1.63 * (Math.pow(l + 0.04, 0.5) - 0.2);
          l = a5 * he + (1 - a5) * l;
          u = o[1][v];
          a5 = Math.abs(u);
          if (u < 0) he = Math.pow(l, 2);
          else
            he = Math.min(
              2.35 * (Math.pow(l + 0.09, 0.5) - 0.3),
              Math.pow(l, 1 / 2)
            );
          l = a5 * he + (1 - a5) * l;
          u = o[0][v];
          a5 = Math.abs(u);
          if (u < 0) he = l < 0.4 ? 0 : Math.pow((l - 0.4) / 0.6, Math.SQRT2);
          else he = Math.pow(l, Math.SQRT2 / 2);
          l = a5 * he + (1 - a5) * l;
          l = Math.max(0, Math.min(1, l));
          s[v][y] = l;
        }
      n = { e: m.rr, NH: s[0], lW: s[1], aM: s[2], JU: !1, W_: !1 };
    }
    if (j == "phfl") {
      var gq = B.MV.xH(q.Clr.v),
        fA = [gq.o / 255, gq.i / 255, gq.X / 255],
        c3 = q.Dnst.v / 100,
        s = [
          new Float32Array(256),
          new Float32Array(256),
          new Float32Array(256),
        ];
      for (var v = 0; v < 3; v++)
        for (var y = 0; y < 256; y++) {
          var l = y * (1 / 255),
            fa = l * fA[v];
          fa = Math.max(0, Math.min(1, fa));
          l = c3 * fa + (1 - c3) * l;
          s[v][y] = l;
        }
      n = { e: m.rr, NH: s[0], lW: s[1], aM: s[2], JU: !1, W_: q.PrsL.v };
    }
    if (j == "thrs") {
      var K = new Float32Array(256);
      for (var y = q.Lvl.v; y < 256; y++) K[y] = 1;
      n = { e: m.rr, NH: K, lW: K, aM: K, JU: !0, W_: !1 };
    }
    if (j == "mixr") {
      var jA = eV.Vm(q),
        U = [];
      for (var y = 0; y < jA.K.length; y++)
        if (y % 5 != 3) U.push(jA.K[y] / 100);
      if (jA.f0) {
        for (var kF = 1; kF < 3; kF++)
          for (var l = 0; l < 4; l++) U[kF * 4 + l] = U[l];
      }
      n = { e: m.Mb, OC: U };
    }
    if (j == "rplc") {
      var dn = q.Mnm.v,
        de = q.Mxm.v;
      n = {
        e: m.oX,
        IG: [dn.Lmnc.v, dn.A.v, dn.B.v],
        Lc: [de.Lmnc.v, de.A.v, de.B.v],
        shift: [q.H.v / 360, q.Strt.v / 100, q.Lght.v / 100],
        qY: q.Fzns.v / 150,
      };
    }
    if (j == "clrL" && q.profile) {
      var ks = new Uint8Array(q.profile.v),
        fx = ICC.R(ks.buffer),
        hT = [],
        i7 = 17,
        hT = ICC.U.sampleLUT(fx, i7);
      n = { e: m.qM, py: ICC.U.lutToRGBA32(hT, i7), aJH: hT, Jd: i7 };
    }
    var b = q ? q.showClipping : null;
    if (b) {
      var gT = [n.NH, n.lW, n.aM],
        iC = b.v == 1 ? 1 / 255 : 253 / 255;
      for (var w = 0; w < 3; w++)
        for (var y = 0; y < gT[w].length; y++) gT[w][y] = gT[w][y] < iC ? 0 : 1;
    }
    return n;
  };
  eV.rV = function (j, q) {
    var m = -1;
    if (j != "levl" || q == null) m = -1;
    else if (q.Auto) m = 0;
    else if (q.AuCo) m = 1;
    else if (q.autoBlackWhite) m = 2;
    return m;
  };
  eV.D8 = { rr: 0, JZ: 1, Kx: 2, te: 3, LT: 4, Mb: 5, oX: 6, qM: 7 };
  eV._o = function (j) {
    if (j < 0) return j;
    return Math.pow(Math.tan((Math.PI / 2) * j), 1.3);
  };
  eV.aD4 = function (j) {
    if (j < 0) return j;
    j = Math.pow(j, 1 / 1.3);
    return Math.atan2(j, 1) / (Math.PI / 2);
  };
  eV.Gi = function (j, q, m, n) {
    var G = eV.D8,
      W = Date.now();
    if (fS.tx && n.C() > 300 * 300 && j.e != G.rr && j.e != G.qM) {
      n = n.P();
      n.x = n.y = 0;
      var k = fS.vK(0, n.r, n.$, B.oM(q));
      k.set(q);
      fS.VF(k, n);
      k.w3(n);
      eV.dH(j, k.sR, n);
      k.get(m);
      return;
    }
    var T = q.length,
      b = B.oM(q),
      c = b == 8 ? 255 : b == 16 ? 65535 : 1,
      a = 1 / c;
    for (var y = 0; y < T; y += 4) m[y + 3] = q[y + 3];
    if (j.e == G.qM) {
      var f = j.aJH,
        U = j.Jd;
      ICC.U.applyLUT(f, U, q, m);
      var T = q.length;
    }
    if (j.e == G.Mb) B.kz.apb(q, m, j.OC);
    if (j.e == G.LT) {
      var Z = j.aky,
        h = j.Sn,
        u = j.oV,
        i = j.ab7,
        T = q.length;
      for (var y = 0; y < T; y += 4) {
        var n = q[y] * a,
          x = q[y + 1] * a,
          X = q[y + 2] * a,
          $ = B.r0(n, x, X),
          H = 0;
        for (var C = 0; C < 6; C++)
          H +=
            Math.min(1, 1.7 * (1 - $.I0)) *
            $.fO *
            j.a4h[C] *
            eV.ao2($.uu, C * (1 / 6));
        var l = Math.max(0, Math.min(1, $.I0 * (1 + H)));
        if (j.Ao == 1) {
          var v = 0;
          if (l < u) v = l * (0.5 / h);
          else if (l < i) v = l + Z * (0.5 - h);
          else v = 1 - ((1 - l) * 0.5) / (1 - h);
          $.uu = j.aMe;
          $.fO = Math.min(1, Z + 3 * Z * Math.abs(l - 0.5 * (u + i)));
          $.I0 = v;
        } else {
          $.uu = 0;
          $.fO = 0;
          $.I0 = l;
        }
        var K = B.wL($.uu, $.fO, $.I0);
        m[y] = K.o * c;
        m[y + 1] = K.i * c;
        m[y + 2] = K.X * c;
      }
    }
    if (j.e == G.te) {
      var S = j.a3W,
        T = q.length,
        o = 1 / 255;
      for (var y = 0; y < T; y += 4) {
        var n = q[y] * o,
          x = q[y + 1] * o,
          X = q[y + 2] * o,
          $ = B.r0(n, x, X),
          V = Math.max(n, Math.max(x, X)),
          P = Math.min(n, Math.min(x, X)),
          z = 1 - n,
          E = 1 - x,
          A = 1 - X,
          N = 0,
          Q = 0,
          e = 0;
        for (var C = 0; C < 9; C++) {
          var Y = C * 6,
            s = 0;
          if (
            S[Y] == 1 &&
            S[Y + 1] == 1 &&
            S[Y + 2] == 1 &&
            S[Y + 3] == 0 &&
            S[Y + 4] == 0 &&
            S[Y + 5] == 0
          )
            continue;
          var d = z * S[Y] + S[Y + 3],
            I = E * S[Y + 1] + S[Y + 4],
            O = A * S[Y + 2] + S[Y + 5];
          if (C < 6)
            s = eV.ao2($.uu, C * (1 / 6)) * $.fO * 2 * Math.min($.I0, 1 - $.I0);
          else if (C == 6) s = Math.max(0, P - 0.5) * 2;
          else if (C == 7) s = 1 - (Math.abs(V - 0.5) + Math.abs(P - 0.5));
          else s = Math.max(0, 0.5 - V) * 2;
          N += (Math.max(0, Math.min(1, d)) - z) * s;
          Q += (Math.max(0, Math.min(1, I)) - E) * s;
          e += (Math.max(0, Math.min(1, O)) - A) * s;
        }
        z = Math.max(0, Math.min(1, z + N));
        E = Math.max(0, Math.min(1, E + Q));
        A = Math.max(0, Math.min(1, A + e));
        n = 1 - z;
        x = 1 - E;
        X = 1 - A;
        m[y] = Math.round(n * 255);
        m[y + 1] = Math.round(x * 255);
        m[y + 2] = Math.round(X * 255);
      }
    }
    if (j.e == G.rr) {
      B.arS(q, m, j.NH, j.lW, j.aM, j.JU, j.W_);
    }
    if (j.e == G.JZ) {
      if (eV.aDZ == null) {
        eV.aDZ = new Float64Array(1024);
        for (var y = 0; y < 1024; y++) eV.aDZ[y] = eV._o(-1 + (2 * y) / 1023);
      }
      var p = eV.aDZ,
        F = (j.map.length >>> 2) - 1,
        g = j.map;
      for (var y = 0; y < T; y += 4) {
        var n = q[y] * a,
          x = q[y + 1] * a,
          X = q[y + 2] * a,
          w = Math.min(n, x, X),
          r = Math.max(n, x, X),
          eQ = (B.r0(n, x, X).uu + 5e-4) * F,
          t = 0,
          dq = 0,
          D = eQ - Math.floor(eQ),
          ha = Math.floor(eQ) * 4,
          am = Math.min(F * 4, ha + 4),
          k4 = (1 - D) * g[ha] + D * g[am + 0],
          aA = (1 - D) * g[ha + 1] + D * g[am + 1],
          ex = (1 - D) * g[ha + 2] + D * g[am + 2],
          H = -ex,
          ac = w;
        if (0 < ex) {
          H = ex;
          ac = r;
        }
        var eJ = j.acO + j.Ek * H * ac,
          h$ = j.Ek * (1 - H);
        n = eJ + h$ * n;
        x = eJ + h$ * x;
        X = eJ + h$ * X;
        r = Math.max(n, x, X);
        w = Math.min(n, x, X);
        dq = (r + w) * 0.5;
        if (r != w) {
          var da = r - w;
          t = dq > 0.5 ? da / (2 - (r + w)) : da / (r + w);
        }
        var bb = aA;
        if (j.amG == 0) {
          aA = p[Math.floor((1 + aA) * 511.5)];
          bb = Math.min(t * (1 + aA), 1);
        }
        var K = B.wL(k4, bb, dq);
        n = K.o;
        x = K.i;
        X = K.X;
        m[y] = n * c;
        m[y + 1] = x * c;
        m[y + 2] = X * c;
      }
    }
    if (j.e == G.oX) {
      B.wV(q, m);
      var gb = new Uint32Array(q.buffer),
        fM = new Uint32Array(m.buffer),
        T = gb.length,
        kS = j.qY,
        cY = 1 / kS,
        cS = { ji: j.IG[0], Sd: j.IG[1], X: j.IG[2] },
        k3 = { ji: j.Lc[0], Sd: j.Lc[1], X: j.Lc[2] };
      for (var y = 0; y < T; y++) {
        var di = gb[y],
          a7 = di & 255,
          b0 = (di >>> 8) & 255,
          e1 = (di >>> 16) & 255,
          n = a7 * (1 / 255),
          x = b0 * (1 / 255),
          X = e1 * (1 / 255),
          l2 = di >>> 24,
          kL = B.fa(a7, b0, e1),
          es = B.aDX(kL, cS, k3, kS, cY);
        if (es == 0) continue;
        var $ = B.r0(n, x, X),
          k4 = 2 + $.uu + j.shift[0];
        $.uu = k4 - ~~k4;
        $.fO = Math.max(0, Math.min(1, $.fO + j.shift[1]));
        $.I0 = Math.max(0, Math.min(1, $.I0 + j.shift[2]));
        var K = B.wL($.uu, $.fO, $.I0);
        n = (1 - es) * n + es * K.o;
        x = (1 - es) * x + es * K.i;
        X = (1 - es) * X + es * K.X;
        fM[y] = (l2 << 24) | ((X * 255) << 16) | ((x * 255) << 8) | (n * 255);
      }
    }
    if (j.e == G.Kx) {
      var kR = j.rw[0],
        eH = j.rw[1],
        cZ = j.rw[2],
        H = j.rw[3],
        ga = B.kz.PA([
          0.299, 0.587, 0.114, -0.147, -0.289, 0.436, 0.615, -0.515, -0.1,
        ]),
        fi = B.kz.BR(ga),
        go = 2.4;
      function U(k2) {
        return Math.max(0, Math.min(1, k2));
      }
      function iz(k2) {
        return Math.pow(k2, go);
      }
      function i5(k2) {
        return Math.pow(k2, 1 / go);
      }
      function aI(n, x, X, k2) {
        n = iz(n);
        x = iz(x);
        X = iz(X);
        var jG = B.kz.$j(ga, [n, x, X, 1]);
        jG[0] *= cZ;
        jG[1] *= H;
        jG[2] *= H;
        var K = B.kz.$j(fi, jG);
        K[0] = i5(U(K[0]));
        K[1] = i5(U(K[1]));
        K[2] = i5(U(K[2]));
        return K;
      }
      for (var y = 0; y < T; y += 4) {
        var n = q[y] * a,
          x = q[y + 1] * a,
          X = q[y + 2] * a,
          K = aI(n, x, X, kR);
        n = K[0];
        x = K[1];
        X = K[2];
        var bs = B.r0(n, x, X);
        bs.fO = Math.max(0, Math.min(1, bs.fO * (1 + eH)));
        K = B.wL(bs.uu, bs.fO, bs.I0);
        n = K.o;
        x = K.i;
        X = K.X;
        m[y] = n * c;
        m[y + 1] = x * c;
        m[y + 2] = X * c;
      }
    }
  };
  eV.dH = function (j, q, m) {
    fS.QF.dH(j, q);
  };
  eV.ao2 = function (j, q) {
    var m = B.nd(q, j) * 6;
    return Math.max(0, Math.min(1, m < 0 ? 1 + m : 1 - m));
  };
  var k0 = {};
  k0.mK = function (j) {
    var q = j.filterID.v;
    return q > 16777215 ? M.aqr(q) : j.Fltr.v.classID;
  };
  k0.YW = [
    { pH: "GEfc" },
    { pH: "LnCr" },
    { pH: "Adobe Camera Raw Filter" },
    { pH: "LqFy" },
    { pH: "VaPo", q7: !0 },
    { NC: "3D", nw: ["lightFilterGradient", "Dila"] },
    {
      NC: [24, 2],
      nw: "Avrg,Blr ,BlrM,boxblur,GsnB,Bokh,MtnB,RdlB,surfaceBlur".split(","),
    },
    {
      NC: [24, 3, 11],
      nw: [
        "blurbTransform",
        "blurbTransform",
        "blurbTransform",
        "blurbTransform",
        "blurbTransform",
      ],
    },
    {
      NC: [24, 4],
      nw: "Dspl,Kale,Pnch,Plr ,Rple,Shr ,Sphr,Twrl,Wave,ZgZg".split(","),
    },
    { NC: [24, 6], nw: ["AdNs", "Dspc", "DstS", "Mdn ", "denoise"] },
    { NC: [24, 8], nw: "ClrH,Crst,Frgm,Mztn,Msc ,Pntl,ShMs".split(",") },
    { NC: [24, 10], nw: ["Flam", "Clds", "DfrC", "Fbrs", "LnsF"] },
    { NC: [24, 12], nw: ["Shrp", "ShrE", "ShrM", "smartSharpen", "UnsM"] },
    { NC: [24, 14], nw: "Dfs ,Embs,FndE,oilPaint,Slrz,TrcC,Wnd ".split(",") },
    {
      NC: [24, 16],
      nw: "HghP,HsbP,Mxm ,Mnm ,Ofst,Rept,Ctoa,Dthr,Part".split(","),
    },
    { NC: "Fourier", nw: ["dDFT", "iDFT"] },
  ];
  k0.Rt = {
    LqFy: "LqFy",
    LnCr: "LnCr",
    GEfc: "GEfc",
    "Adobe Camera Raw Filter": "Adobe Camera Raw Filter",
    Avrg: "Avrg",
    "Blr ": "blurEvent",
    BlrM: "blurMethod",
    boxblur: "boxblur",
    GsnB: "gaussianBlur",
    Bokh: "Bokh",
    MtnB: "motionBlur",
    RdlB: "radialBlur",
    surfaceBlur: "surfaceBlur",
    lightFilterGradient: "lightFilterGradient",
    adaptCorrect: "adaptCorrect",
    Dspl: "displace",
    Kale: "Kale",
    Pnch: "pinch",
    "Plr ": "polar",
    Rple: "ripple",
    "Shr ": "shear",
    Sphr: "spherize",
    Twrl: "twirl",
    Wave: "wave",
    ZgZg: "zigZag",
    AdNs: "addNoise",
    Dspc: "despeckle",
    DstS: "dustAndScratches",
    "Mdn ": "median",
    denoise: "denoise",
    ClrH: "colorHalftone",
    Crst: "crystallize",
    Frgm: "fragment",
    Mztn: "mezzotint",
    "Msc ": "mosaic",
    Pntl: "pointillize",
    Flam: "",
    Clds: "clouds",
    DfrC: "differenceClouds",
    Fbrs: "Fbrs",
    LnsF: "LnsF",
    Shrp: "sharpen",
    ShrE: "sharpenEdges",
    ShrM: "sharpenMore",
    smartSharpen: "smartSharpen",
    UnsM: "unsharpMask",
    "Dfs ": "diffuse",
    Embs: "emboss",
    FndE: "findEdges",
    oilPaint: "oilPaint",
    Slrz: "solarize",
    TrcC: "traceContour",
    "Wnd ": "wind",
    HghP: "highPass",
    HsbP: "HsbP",
    "Mxm ": "maximum",
    "Mnm ": "minimum",
    Ofst: "offset",
    Rept: "Rept",
    Ctoa: "Ctoa",
    Dthr: "Dthr",
    Part: "Part",
    dDFT: "dDFT",
    iDFT: "iDFT",
  };
  k0.eM = {
    AddNoise: "AdNs",
    Average: "Avrg",
    Blur: "Blr ",
    BlurMore: "BlrM",
    Clouds: "Clds",
    DifferenceClouds: "DfrC",
    DustAndScratches: "DstS",
    GaussianBlur: "GsnB",
    HighPass: "HghP",
    Maximum: "Mxm ",
    Minimum: "Mnm ",
    MotionBlur: "MtnB",
    Offset: "Ofst",
    Pinch: "Pnch",
    PolarCoordinates: "Plr ",
    Ripple: "Rple",
    Sharpen: "Shrp",
    SharpenMore: "ShrM",
    Twirl: "Twrl",
    UnsharpMask: "UnsM",
    Wave: "Wave",
    Displace: "Dspl",
    BrightnessContrast: "brit",
  };
  k0.Z = {
    rigidTransform: L.Bb,
    perspectiveWarpTransform: L.v7,
    blurbTransform: L.Oi,
  };
  k0.names = {
    lightFilterGradient: [24, 17, 8],
    rigidTransform: [10, 46],
    perspectiveWarpTransform: "Perspective Warp",
    blurbTransform: [24, 3, 11],
    LnCr: [24, 1, 1, 0],
    LqFy: [24, 1, 0, 0],
    GEfc: [24, 0],
    Avrg: [24, 3, 0],
    "Blr ": [24, 3, 1],
    BlrM: [24, 3, 2],
    boxblur: [24, 3, 3],
    GsnB: [24, 3, 4],
    Bokh: [24, 3, 5],
    MtnB: [24, 3, 6],
    RdlB: [24, 3, 7],
    surfaceBlur: [24, 3, 10],
    Dspl: [24, 5, 0],
    Pnch: [24, 5, 1],
    "Plr ": [24, 5, 2],
    Rple: [24, 5, 3],
    "Shr ": [24, 5, 4],
    Sphr: [24, 5, 5],
    Twrl: [24, 1, 0, 1, 3],
    Wave: [24, 5, 6],
    ZgZg: [24, 5, 7],
    Kale: [24, 5, 8],
    AdNs: [24, 7, 0],
    Dspc: [24, 7, 1],
    DstS: [24, 7, 2],
    "Mdn ": [24, 7, 3],
    denoise: [24, 7, 4],
    ClrH: [24, 9, 0],
    Crst: [24, 9, 1],
    Frgm: [24, 9, 3],
    Mztn: [24, 9, 4],
    "Msc ": [24, 9, 5],
    ShMs: "Shape Mosaic",
    Pntl: [24, 9, 6],
    Clds: [24, 11, 0],
    DfrC: [24, 11, 1],
    LnsF: [24, 11, 2],
    Flam: [24, 11, 3],
    Fbrs: [24, 11, 4],
    Shrp: [24, 13, 0],
    ShrE: [24, 13, 1],
    ShrM: [24, 13, 2],
    smartSharpen: [24, 13, 3],
    UnsM: [24, 13, 4],
    "Dfs ": [24, 15, 0],
    Embs: [24, 15, 1],
    FndE: [24, 15, 3],
    oilPaint: [24, 15, 4],
    Slrz: [24, 15, 5],
    TrcC: [24, 15, 6],
    "Wnd ": [24, 15, 7],
    HghP: [24, 17, 1],
    HsbP: "HSB/HSL",
    "Mxm ": [24, 17, 2],
    "Mnm ": [24, 17, 3],
    Ofst: [24, 17, 4],
    Rept: [24, 17, 5],
    Ctoa: [24, 17, 6],
    Dthr: [12, 23, 3],
    Part: [24, 17, 7],
    dDFT: "Fourier Transform",
    iDFT: "Inverse Fourier Transform",
    defr: [2, 13],
    Dila: "Texture Dilation",
    VaPo: "Vanishing Point",
    adaptCorrect: ["VAR0/VAR1", [19, 6, 0], [19, 6, 2]],
    "Adobe Camera Raw Filter": "Camera Raw",
  };
  k0.i4 = function (j) {
    var q = null;
    if (j == "GEfc")
      q = {
        __name: "Filter Gallery",
        classID: "GEfc",
        GEfs: { t: "VlLs", v: [{ t: "Objc", v: i9.i4("GlwE") }] },
      };
    if (j == "LqFy") {
      var m = { GM: 5, uu: 5, map: new Float32Array(5 * 5 * 2) },
        n = new Uint8Array(iA.RS(m)),
        G = [];
      for (var y = 0; y < n.length; y++) G.push(n[y]);
      q = { __name: "Liquify", classID: "LqFy", LqMe: { t: "tdta", v: G } };
    }
    if (j == "rigidTransform") {
      q = {
        __name: "Puppet Warp",
        classID: "rigidTransform",
        null: {
          t: "obj ",
          v: [
            { t: "Enmr", v: { classID: "Lyr", typeID: "Ordn", enum: "Trgt" } },
          ],
        },
        rigidType: { t: "bool", v: !0 },
        puppetShapeList: { t: "VlLs", v: [] },
        PuX0: { t: "doub", v: 0 },
        PuX1: { t: "doub", v: 1e3 },
        PuX2: { t: "doub", v: 1e3 },
        PuX3: { t: "doub", v: 0 },
        PuY0: { t: "doub", v: 0 },
        PuY1: { t: "doub", v: 0 },
        PuY2: { t: "doub", v: 1e3 },
        PuY3: { t: "doub", v: 1e3 },
      };
    }
    if (j == "perspectiveWarpTransform") {
      q = {
        __name: "Perspective Warp",
        classID: "perspectiveWarpTransform",
        null: {
          t: "obj ",
          v: [
            { t: "Enmr", v: { classID: "Lyr", typeID: "Ordn", enum: "Trgt" } },
          ],
        },
        Md: { t: "enum", v: { perspectiveWarpMode: "layout" } },
        referenceRect: {
          t: "Objc",
          v: {
            classID: "Rctn",
            Top: { t: "UntF", v: { type: "#Pxl", val: -1014 } },
            Left: { t: "UntF", v: { type: "#Pxl", val: 0 } },
            Btom: { t: "UntF", v: { type: "#Pxl", val: 3098 } },
            Rght: { t: "UntF", v: { type: "#Pxl", val: 3320 } },
          },
        },
        vertices: { t: "VlLs", v: [] },
        warpedVertices: { t: "VlLs", v: [] },
        quads: { t: "VlLs", v: [] },
        PuX0: { t: "doub", v: 0 },
        PuX1: { t: "doub", v: 1e3 },
        PuX2: { t: "doub", v: 1e3 },
        PuX3: { t: "doub", v: 0 },
        PuY0: { t: "doub", v: 0 },
        PuY1: { t: "doub", v: 0 },
        PuY2: { t: "doub", v: 1e3 },
        PuY3: { t: "doub", v: 1e3 },
      };
    }
    if (j == "blurbTransform") {
      q = {
        __name: "Blur Gallery",
        classID: "blurbTransform",
        blurbType: { t: "bool", v: !0 },
        VrsM: { t: "long", v: 1 },
        VrsN: { t: "long", v: 0 },
        referenceRect: {
          t: "Objc",
          v: {
            classID: "Rctn",
            Top: { t: "long", v: 0 },
            Left: { t: "long", v: 0 },
            Btom: { t: "long", v: 1e3 },
            Rght: { t: "long", v: 1e3 },
          },
        },
        blurbOpenPanel: { t: "long", v: 3 },
        blurbSaveMaskChannel: { t: "bool", v: !1 },
        blurbHighQuality: { t: "bool", v: !1 },
        blurbPathBlurSpeed: { t: "UntF", v: { type: "#Prc", val: 50 } },
        blurbPathBlurTaper: { t: "UntF", v: { type: "#Prc", val: 0 } },
        blurbCenteredPathBlur: { t: "bool", v: !0 },
        blurbWidgetList2: { t: "VlLs", v: [] },
        PuX0: { t: "doub", v: 0 },
        PuX1: { t: "doub", v: 1e3 },
        PuX2: { t: "doub", v: 1e3 },
        PuX3: { t: "doub", v: 0 },
        PuY0: { t: "doub", v: 0 },
        PuY1: { t: "doub", v: 0 },
        PuY2: { t: "doub", v: 1e3 },
        PuY3: { t: "doub", v: 1e3 },
      };
    }
    if (j == "LnCr")
      q = {
        __name: "Lens Correction",
        classID: "LnCr",
        LnAg: { t: "bool", v: !0 },
        LnAc: { t: "bool", v: !1 },
        LnAv: { t: "bool", v: !1 },
        LnAs: { t: "bool", v: !1 },
        LnIp: { t: "bool", v: !1 },
        LnFo: { t: "doub", v: 0 },
        LnPr: { t: "TEXT", v: "" },
        LnIa: { t: "doub", v: 0 },
        LnI0: { t: "doub", v: 0 },
        LnI1: { t: "doub", v: 0 },
        LnI2: { t: "doub", v: 0 },
        LnI3: { t: "doub", v: 1 },
        LnRa: { t: "doub", v: 0 },
        LnVp: { t: "doub", v: 0 },
        LnHp: { t: "doub", v: 0 },
        LnSi: { t: "doub", v: 100 },
        LnFt: { t: "long", v: 2 },
        LnSb: { t: "doub", v: 0 },
        LnSt: { t: "long", v: 50 },
        LnRc: { t: "doub", v: 0 },
        LnGm: { t: "doub", v: 0 },
        LnBy: { t: "doub", v: 0 },
        LnNa: { t: "long", v: 64 },
        LnIh: { t: "long", v: 0 },
        LnIv: { t: "long", v: 0 },
        LnIs: {
          t: "Objc",
          v: {
            classID: "RGBC",
            Rd: { t: "doub", v: 127 },
            Grn: { t: "doub", v: 127 },
            Bl: { t: "doub", v: 127 },
          },
        },
        LnNm: { t: "bool", v: !1 },
      };
    if (j == "adaptCorrect")
      q = {
        __name: "Shadow/Highlight",
        classID: "adaptCorrect",
        sdwM: {
          t: "Objc",
          v: {
            __name: "Parameters",
            classID: "adaptCorrectTones",
            Amnt: { t: "UntF", v: { type: "#Prc", val: 50 } },
            Wdth: { t: "UntF", v: { type: "#Prc", val: 25 } },
            Rds: { t: "long", v: 12 },
          },
        },
        hglM: {
          t: "Objc",
          v: {
            __name: "Parameters",
            classID: "adaptCorrectTones",
            Amnt: { t: "UntF", v: { type: "#Prc", val: 0 } },
            Wdth: { t: "UntF", v: { type: "#Prc", val: 0 } },
            Rds: { t: "long", v: 0 },
          },
        },
        BlcC: { t: "doub", v: 0 },
        WhtC: { t: "doub", v: 0 },
        Cntr: { t: "long", v: 0 },
        ClrC: { t: "long", v: 0 },
      };
    if (j == "Dfs ")
      q = {
        __name: "Diffuse",
        classID: "Dfs",
        Md: { t: "enum", v: { DfsM: "Nrml" } },
        FlRs: { t: "long", v: 14061024 },
      };
    if (j == "Fbrs")
      q = {
        __name: "Fibers",
        classID: "Fbrs",
        Vrnc: { t: "long", v: 10 },
        Strg: { t: "long", v: 1 },
        RndS: { t: "long", v: 8438429 },
      };
    if (j == "Embs")
      q = {
        __name: "Emboss",
        classID: "Embs",
        Angl: { t: "long", v: 45 },
        Hght: { t: "long", v: 5 },
        Amnt: { t: "long", v: 100 },
      };
    if (j == "oilPaint")
      q = {
        __name: "Oil Paint",
        classID: "oilPaint",
        lightingOn: { t: "bool", v: !0 },
        stylization: { t: "doub", v: 3 },
        brushScale: { t: "doub", v: 1 },
        microBrush: { t: "doub", v: 0 },
        LghD: { t: "long", v: 45 },
        specularity: { t: "doub", v: 1 },
        cleanliness: { t: "doub", v: 2 },
      };
    if (j == "TrcC")
      q = {
        __name: "Trace Contour",
        classID: "TrcC",
        Lvl: { t: "long", v: 128 },
        Edg: { t: "enum", v: { CntE: "Lwr" } },
      };
    if (j == "Wnd ")
      q = {
        __name: "Wind",
        classID: "Wnd",
        WndM: { t: "enum", v: { WndM: "Wnd" } },
        Drct: { t: "enum", v: { Drct: "Rght" } },
      };
    if (j == "lightFilterGradient")
      q = {
        __name: "Generate Normals",
        classID: "lightFilterGradient",
        blur: { t: "doub", v: 0 },
        textureScale: { t: "doub", v: 1 },
        Scl: { t: "doub", v: 1 },
        Dtl: {
          t: "VlLs",
          v: [
            { t: "doub", v: 1 },
            { t: "doub", v: 1 },
            { t: "doub", v: 1 },
          ],
        },
      };
    if (j == "boxblur")
      q = {
        __name: "Box Blur",
        classID: "boxblur",
        Rds: { t: "UntF", v: { type: "#Pxl", val: 15 } },
      };
    if (j == "GsnB")
      q = {
        __name: "Gaussian Blur",
        classID: "GsnB",
        Rds: { t: "UntF", v: { type: "#Pxl", val: 7.2 } },
      };
    if (j == "Bokh")
      q = {
        __name: "Lens Blur",
        classID: "Bokh",
        BkDi: { t: "enum", v: { BtDi: "BeIn" } },
        BkDp: { t: "long", v: 0 },
        BkDs: { t: "bool", v: !1 },
        BkIs: { t: "enum", v: { BtIs: "BeS6" } },
        BkIb: { t: "doub", v: 30 },
        BkIc: { t: "long", v: 0 },
        BkIr: { t: "long", v: 0 },
        BkSb: { t: "doub", v: 0 },
        BkSt: { t: "long", v: 255 },
        BkNa: { t: "long", v: 0 },
        BkNt: { t: "enum", v: { BtNt: "BeNu" } },
        BkNm: { t: "bool", v: !1 },
      };
    if (j == "MtnB")
      q = {
        __name: "Motion Blur",
        classID: "MtnB",
        Angl: { t: "long", v: 0 },
        Dstn: { t: "UntF", v: { type: "#Pxl", val: 4 } },
      };
    if (j == "RdlB")
      q = {
        __name: "Radial Blur",
        classID: "RdlB",
        Amnt: { t: "long", v: 10 },
        BlrM: { t: "enum", v: { BlrM: "Spn" } },
        BlrQ: { t: "enum", v: { BlrQ: "Gd" } },
        Cntr: {
          t: "Objc",
          v: {
            classID: "Pnt",
            Hrzn: { t: "doub", v: 0.5 },
            Vrtc: { t: "doub", v: 0.5 },
          },
        },
      };
    if (j == "surfaceBlur")
      q = {
        __name: "Surface Blur",
        classID: "surfaceBlur",
        Rds: { t: "UntF", v: { type: "#Pxl", val: 15 } },
        Thsh: { t: "long", v: 15 },
      };
    if (j == "denoise")
      q = {
        __name: "Reduce Noise",
        classID: "denoise",
        ClNs: { t: "UntF", v: { type: "#Prc", val: 29 } },
        Shrp: { t: "UntF", v: { type: "#Prc", val: 0 } },
        removeJPEGArtifact: { t: "bool", v: !1 },
        channelDenoise: {
          t: "VlLs",
          v: [
            {
              t: "Objc",
              v: {
                classID: "channelDenoiseParams",
                Chnl: {
                  t: "obj ",
                  v: [
                    {
                      t: "Enmr",
                      v: { classID: "Chnl", typeID: "Chnl", enum: "Cmps" },
                    },
                  ],
                },
                Amnt: { t: "long", v: 5 },
                EdgF: { t: "long", v: 0 },
              },
            },
            {
              t: "Objc",
              v: {
                classID: "channelDenoiseParams",
                Chnl: {
                  t: "obj ",
                  v: [
                    {
                      t: "Enmr",
                      v: { classID: "Chnl", typeID: "Chnl", enum: "Rd" },
                    },
                  ],
                },
                Amnt: { t: "long", v: 0 },
              },
            },
            {
              t: "Objc",
              v: {
                classID: "channelDenoiseParams",
                Chnl: {
                  t: "obj ",
                  v: [
                    {
                      t: "Enmr",
                      v: { classID: "Chnl", typeID: "Chnl", enum: "Grn" },
                    },
                  ],
                },
                Amnt: { t: "long", v: 0 },
              },
            },
            {
              t: "Objc",
              v: {
                classID: "channelDenoiseParams",
                Chnl: {
                  t: "obj ",
                  v: [
                    {
                      t: "Enmr",
                      v: { classID: "Chnl", typeID: "Chnl", enum: "Bl" },
                    },
                  ],
                },
                Amnt: { t: "long", v: 0 },
              },
            },
          ],
        },
        preset: { t: "TEXT", v: "Default" },
      };
    if (j == "Dspl")
      q = {
        __name: "Displace",
        classID: "Dspl",
        HrzS: { t: "long", v: 10 },
        VrtS: { t: "long", v: 10 },
        DspM: { t: "enum", v: { DspM: "StrF" } },
        UndA: { t: "enum", v: { UndA: "RptE" } },
        DspF: { t: "Pth ", v: { sig: "txtu", pth: "file.psd\0" } },
      };
    if (j == "Pnch")
      q = { __name: "Pinch", classID: "Pnch", Amnt: { t: "long", v: -100 } };
    if (j == "Plr ")
      q = {
        __name: "Polar Coordinates",
        classID: "Plr",
        Cnvr: { t: "enum", v: { Cnvr: "RctP" } },
      };
    if (j == "Rple")
      q = {
        __name: "Ripple",
        classID: "Rple",
        Amnt: { t: "long", v: 999 },
        RplS: { t: "enum", v: { RplS: "Mdm" } },
      };
    if (j == "Shr ")
      q = {
        __name: "Shear",
        classID: "Shr",
        ShrP: {
          t: "VlLs",
          v: [
            {
              t: "Objc",
              v: {
                classID: "Pnt",
                Hrzn: { t: "doub", v: 0 },
                Vrtc: { t: "doub", v: 1 },
              },
            },
            {
              t: "Objc",
              v: {
                classID: "Pnt",
                Hrzn: { t: "doub", v: 0 },
                Vrtc: { t: "doub", v: 128 },
              },
            },
          ],
        },
        UndA: { t: "enum", v: { UndA: "WrpA" } },
        ShrS: { t: "long", v: 0 },
        ShrE: { t: "long", v: 1 },
      };
    if (j == "Sphr")
      q = {
        __name: "Spherize",
        classID: "Sphr",
        Amnt: { t: "long", v: 100 },
        SphM: { t: "enum", v: { SphM: "Nrml" } },
      };
    if (j == "Twrl")
      q = { __name: "Twirl", classID: "Twrl", Angl: { t: "long", v: 90 } };
    if (j == "Wave")
      q = {
        __name: "Wave",
        classID: "Wave",
        Wvtp: { t: "enum", v: { Wvtp: "WvSn" } },
        NmbG: { t: "long", v: 1 },
        WLMn: { t: "long", v: 101 },
        WLMx: { t: "long", v: 102 },
        AmMn: { t: "long", v: 36 },
        AmMx: { t: "long", v: 37 },
        SclH: { t: "long", v: 100 },
        SclV: { t: "long", v: 100 },
        UndA: { t: "enum", v: { UndA: "WrpA" } },
        RndS: { t: "long", v: 743887 },
      };
    if (j == "ZgZg")
      q = {
        __name: "ZigZag",
        classID: "ZgZg",
        Amnt: { t: "long", v: 50 },
        NmbR: { t: "long", v: 10 },
        ZZTy: { t: "enum", v: { ZZTy: "ArnC" } },
      };
    if (j == "AdNs")
      q = {
        __name: "Add Noise",
        classID: "AdNs",
        Dstr: { t: "enum", v: { Dstr: "Unfr" } },
        Nose: { t: "UntF", v: { type: "#Prc", val: 20 } },
        Mnch: { t: "bool", v: !1 },
        FlRs: { t: "long", v: 100691320 },
      };
    if (j == "DstS")
      q = {
        __name: "Dust & Scratches",
        classID: "DstS",
        Rds: { t: "long", v: 2 },
        Thsh: { t: "long", v: 26 },
      };
    if (j == "Mdn ")
      q = {
        __name: "Median",
        classID: "Mdn",
        Rds: { t: "UntF", v: { type: "#Pxl", val: 7 } },
      };
    if (j == "ClrH")
      q = {
        __name: "Color Halftone",
        classID: "ClrH",
        Rds: { t: "long", v: 8 },
        Ang1: { t: "long", v: 10 },
        Ang2: { t: "long", v: 40 },
        Ang3: { t: "long", v: 70 },
        Ang4: { t: "long", v: 80 },
      };
    if (j == "Crst")
      q = {
        __name: "Crystallize",
        classID: "Crst",
        ClSz: { t: "long", v: 10 },
        FlRs: { t: "long", v: 1554929224 },
      };
    if (j == "Mztn")
      q = {
        __name: "Mezzotint",
        classID: "Mztn",
        MztT: { t: "enum", v: { MztT: "FnDt" } },
        FlRs: { t: "long", v: 204994187 },
      };
    if (j == "Msc ")
      q = {
        __name: "Mosaic",
        classID: "Msc",
        ClSz: { t: "UntF", v: { type: "#Pxl", val: 12 } },
      };
    if (j == "Pntl")
      q = {
        __name: "Pointillize",
        classID: "Pntl",
        ClSz: { t: "long", v: 10 },
        FlRs: { t: "long", v: 1554929236 },
      };
    if (j == "LnsF")
      q = {
        __name: "Lens Flare",
        classID: "LnsF",
        Brgh: { t: "long", v: 100 },
        FlrC: {
          t: "Objc",
          v: {
            classID: "Pnt",
            Hrzn: { t: "doub", v: 0.19140625 },
            Vrtc: { t: "doub", v: 0.185628741979599 },
          },
        },
        Lns: { t: "enum", v: { Lns: "Zm" } },
      };
    if (j == "Dthr")
      q = {
        __name: "Dither",
        classID: "Dthr",
        Plte: { t: "long", v: 0 },
        Mthd: { t: "long", v: 1 },
      };
    if (j == "Part")
      q = {
        __name: "Dither",
        classID: "Part",
        Cont: { t: "long", v: 10 },
        Size: { t: "long", v: 8 },
        Dpth: { t: "long", v: 100 },
        Brgh: { t: "long", v: 800 },
        Clr: {
          t: "Objc",
          v: {
            classID: "RGBC",
            Rd: { v: 255, t: "doub" },
            Grn: { v: 255, t: "doub" },
            Bl: { v: 255, t: "doub" },
          },
        },
        Time: { t: "doub", v: 0 },
        Turb: { t: "long", v: 0 },
        Blnk: { t: "bool", v: !0 },
        Fall: { t: "bool", v: !1 },
        RndS: { t: "long", v: 8438429 },
      };
    if (j == "Adobe Camera Raw Filter")
      q = {
        __name: "Camera Raw Filter",
        classID: "Adobe Camera Raw Filter",
        CMod: { t: "TEXT", v: "Filter" },
        Sett: { t: "enum", v: { Sett: "Cst" } },
        WBal: { t: "enum", v: { WBal: "AsSh" } },
        Temp: { t: "long", v: 0 },
        Tint: { t: "long", v: 0 },
        CtoG: { t: "bool", v: !1 },
        Strt: { t: "long", v: 0 },
        Shrp: { t: "long", v: 0 },
        LNR: { t: "long", v: 0 },
        CNR: { t: "long", v: 0 },
        VigA: { t: "long", v: 0 },
        BlkB: { t: "long", v: 0 },
        RHue: { t: "long", v: 0 },
        RSat: { t: "long", v: 0 },
        GHue: { t: "long", v: 0 },
        GSat: { t: "long", v: 0 },
        BHue: { t: "long", v: 0 },
        BSat: { t: "long", v: 0 },
        Vibr: { t: "long", v: 0 },
        HA_R: { t: "long", v: 0 },
        HA_O: { t: "long", v: 0 },
        HA_Y: { t: "long", v: 0 },
        HA_G: { t: "long", v: 0 },
        HA_A: { t: "long", v: 0 },
        HA_B: { t: "long", v: 0 },
        HA_P: { t: "long", v: 0 },
        HA_M: { t: "long", v: 0 },
        SA_R: { t: "long", v: 0 },
        SA_O: { t: "long", v: 0 },
        SA_Y: { t: "long", v: 0 },
        SA_G: { t: "long", v: 0 },
        SA_A: { t: "long", v: 0 },
        SA_B: { t: "long", v: 0 },
        SA_P: { t: "long", v: 0 },
        SA_M: { t: "long", v: 0 },
        LA_R: { t: "long", v: 0 },
        LA_O: { t: "long", v: 0 },
        LA_Y: { t: "long", v: 0 },
        LA_G: { t: "long", v: 0 },
        LA_A: { t: "long", v: 0 },
        LA_B: { t: "long", v: 0 },
        LA_P: { t: "long", v: 0 },
        LA_M: { t: "long", v: 0 },
        STSH: { t: "long", v: 0 },
        STSS: { t: "long", v: 0 },
        STHH: { t: "long", v: 0 },
        STHS: { t: "long", v: 0 },
        STB: { t: "long", v: 0 },
        PC_S: { t: "long", v: 0 },
        PC_D: { t: "long", v: 0 },
        PC_L: { t: "long", v: 0 },
        PC_H: { t: "long", v: 0 },
        PC_1: { t: "long", v: 25 },
        PC_2: { t: "long", v: 50 },
        PC_3: { t: "long", v: 75 },
        ShpR: { t: "doub", v: 1 },
        ShpD: { t: "long", v: 25 },
        ShpM: { t: "long", v: 0 },
        PCVA: { t: "long", v: 0 },
        GRNA: { t: "long", v: 0 },
        LPEn: { t: "long", v: 0 },
        MDis: { t: "long", v: 0 },
        PerV: { t: "long", v: 0 },
        PerH: { t: "long", v: 0 },
        PerR: { t: "doub", v: 0 },
        PerS: { t: "long", v: 100 },
        PerA: { t: "long", v: 0 },
        PerU: { t: "long", v: 0 },
        PerX: { t: "doub", v: 0 },
        PerY: { t: "doub", v: 0 },
        AuCA: { t: "long", v: 0 },
        Ex12: { t: "doub", v: 0 },
        Cr12: { t: "long", v: 0 },
        Hi12: { t: "long", v: 0 },
        Sh12: { t: "long", v: 0 },
        Wh12: { t: "long", v: 0 },
        Bk12: { t: "long", v: 0 },
        Cl12: { t: "long", v: 0 },
        DfPA: { t: "long", v: 0 },
        DPHL: { t: "long", v: 30 },
        DPHH: { t: "long", v: 70 },
        DfGA: { t: "long", v: 0 },
        DPGL: { t: "long", v: 40 },
        DPGH: { t: "long", v: 60 },
        Dhze: { t: "long", v: 0 },
        TMMs: { t: "long", v: 0 },
        Crv: {
          t: "VlLs",
          v: [
            { t: "long", v: 0 },
            { t: "long", v: 0 },
            { t: "long", v: 255 },
            { t: "long", v: 255 },
          ],
        },
        CrvR: {
          t: "VlLs",
          v: [
            { t: "long", v: 0 },
            { t: "long", v: 0 },
            { t: "long", v: 255 },
            { t: "long", v: 255 },
          ],
        },
        CrvG: {
          t: "VlLs",
          v: [
            { t: "long", v: 0 },
            { t: "long", v: 0 },
            { t: "long", v: 255 },
            { t: "long", v: 255 },
          ],
        },
        CrvB: {
          t: "VlLs",
          v: [
            { t: "long", v: 0 },
            { t: "long", v: 0 },
            { t: "long", v: 255 },
            { t: "long", v: 255 },
          ],
        },
        CamP: { t: "TEXT", v: "Embedded" },
        CP_D: { t: "TEXT", v: "54650A341B5B5CCAE8442D0B43A92BCE" },
        PrVe: { t: "long", v: 184549376 },
        Rtch: { t: "TEXT", v: "" },
        REye: { t: "TEXT", v: "" },
        LCs: { t: "TEXT", v: "" },
        Look: { t: "TEXT", v: "" },
        Pset: { t: "TEXT", v: "" },
      };
    if (j == "smartSharpen")
      q = {
        __name: "Smart Sharpen",
        classID: "smartSharpen",
        presetKind: { t: "enum", v: { presetKindType: "presetKindCustom" } },
        useLegacy: { t: "bool", v: !1 },
        Amnt: { t: "UntF", v: { type: "#Prc", val: 150 } },
        Rds: { t: "UntF", v: { type: "#Pxl", val: 1 } },
        noiseReduction: { t: "UntF", v: { type: "#Prc", val: 0 } },
        blur: { t: "enum", v: { blurType: "GsnB" } },
      };
    if (j == "UnsM")
      q = {
        __name: "Unsharp Mask",
        classID: "UnsM",
        Amnt: { t: "UntF", v: { type: "#Prc", val: 142 } },
        Rds: { t: "UntF", v: { type: "#Pxl", val: 4.5 } },
        Thsh: { t: "long", v: 0 },
      };
    if (j == "HghP")
      q = {
        __name: "High Pass",
        classID: "HghP",
        Rds: { t: "UntF", v: { type: "#Pxl", val: 3 } },
      };
    if (j == "HsbP")
      q = {
        __name: "HSB/HSL",
        classID: "HsbP",
        Inpt: { t: "enum", v: { ClrS: "RGBC" } },
        Otpt: { t: "enum", v: { ClrS: "HSBl" } },
      };
    if (j == "Mxm ")
      q = {
        __name: "Maximum",
        classID: "Mxm",
        Rds: { t: "UntF", v: { type: "#Pxl", val: 8 } },
        preserveShape: { t: "enum", v: { preserveShape: "squareness" } },
      };
    if (j == "Mnm ")
      q = {
        __name: "Minimum",
        classID: "Mnm",
        Rds: { t: "UntF", v: { type: "#Pxl", val: 8 } },
        preserveShape: { t: "enum", v: { preserveShape: "squareness" } },
      };
    if (j == "Ofst")
      q = {
        __name: "Offset",
        classID: "Ofst",
        Hrzn: { t: "long", v: 144 },
        Vrtc: { t: "long", v: 278 },
        Fl: { t: "enum", v: { FlMd: "Wrp" } },
      };
    if (j == "ShMs")
      q = {
        __name: "Shape Mosaic",
        classID: "ShMs",
        ClSz: { t: "UntF", v: { type: "#Pxl", val: 12 } },
        Shap: { t: "long", v: 0 },
        Sprd: { t: "long", v: 0 },
        Mono: { t: "bool", v: !1 },
        Invr: { t: "bool", v: !1 },
      };
    if (j == "Kale")
      q = {
        __name: "Kaleidoscope",
        classID: "Kale",
        Mirr: { t: "long", v: 6 },
        MRot: { t: "long", v: 0 },
      };
    if (j == "Rept")
      q = {
        __name: "Repeat",
        classID: "Rept",
        Scl: { v: { type: "#Prc", val: 100 }, t: "UntF" },
        Rsft: { v: { type: "#Prc", val: 0 }, t: "UntF" },
        SpcX: { v: { type: "#Prc", val: 0 }, t: "UntF" },
        SpcY: { v: { type: "#Prc", val: 0 }, t: "UntF" },
        SpcC: { t: "bool", v: !1 },
        Angl: { t: "long", v: 0 },
      };
    if (j == "Flam")
      q = {
        __name: "Repeat",
        classID: "Flam",
        Type: { t: "long", v: 0 },
        Leng: { t: "long", v: 140 },
        RndL: { t: "bool", v: !1 },
        Widt: { t: "long", v: 100 },
        Angl: { t: "long", v: 0 },
        Intr: { t: "long", v: 100 },
        Adpt: { t: "bool", v: !1 },
        Qual: { t: "long", v: 1 },
        Clr: {
          v: {
            classID: "RGBC",
            Rd: { v: 255, t: "doub" },
            Grn: { v: 110, t: "doub" },
            Bl: { v: 28, t: "doub" },
          },
          t: "Objc",
        },
        Turb: { t: "long", v: 50 },
        Jag: { t: "long", v: 0 },
        Opct: { v: { type: "#Prc", val: 25 }, t: "UntF" },
        Lins: { t: "long", v: 10 },
        Botm: { t: "long", v: 30 },
        Styl: { t: "long", v: 0 },
        Shap: { t: "long", v: 0 },
        RnSh: { t: "bool", v: !1 },
        Arng: { t: "long", v: 18 },
      };
    if (j == "Ctoa")
      q = {
        __name: "Color to Alpha",
        classID: "Ctoa",
        Trsp: { v: { type: "#Prc", val: 0 }, t: "UntF" },
        Opct: { v: { type: "#Prc", val: 100 }, t: "UntF" },
        Clr: {
          v: {
            classID: "RGBC",
            Rd: { v: 0, t: "doub" },
            Grn: { v: 0, t: "doub" },
            Bl: { v: 0, t: "doub" },
          },
          t: "Objc",
        },
      };
    if (j == "brit")
      q = {
        __name: "Brightness/Contrast",
        classID: "BrgC",
        Brgh: { t: "long", v: 0 },
        Cntr: { t: "long", v: 0 },
        useLegacy: { t: "bool", v: !1 },
      };
    if (j == "levl")
      q = {
        __name: "Levels",
        classID: "Lvls",
        presetKind: { t: "enum", v: { presetKindType: "presetKindCustom" } },
        Adjs: { t: "VlLs", v: [] },
      };
    if (j == "curv")
      q = {
        __name: "Curves",
        classID: "Crvs",
        presetKind: { t: "enum", v: { presetKindType: "presetKindCustom" } },
        Adjs: { t: "VlLs", v: [] },
      };
    if (j == "expA")
      q = {
        __name: "Exposure",
        classID: "Exps",
        presetKind: { t: "enum", v: { presetKindType: "presetKindCustom" } },
        Exps: { t: "doub", v: 0 },
        Ofst: { t: "doub", v: 0 },
        gammaCorrection: { t: "doub", v: 1 },
      };
    if (j == "vibA")
      q = {
        __name: "Vibrance",
        classID: "vibrance",
        vibrance: { t: "long", v: 0 },
        Strt: { t: "long", v: 0 },
      };
    if (j == "hue2")
      q = {
        __name: "Hue/Saturation",
        classID: "HStr",
        presetKind: { t: "enum", v: { presetKindType: "presetKindCustom" } },
        Clrz: { t: "bool", v: !1 },
        Adjs: { t: "VlLs", v: [] },
      };
    if (j == "blnc")
      q = {
        __name: "Color Balance",
        classID: "ClrB",
        ShdL: {
          t: "VlLs",
          v: [
            { t: "long", v: 0 },
            { t: "long", v: 0 },
            { t: "long", v: 0 },
          ],
        },
        MdtL: {
          t: "VlLs",
          v: [
            { t: "long", v: 0 },
            { t: "long", v: 0 },
            { t: "long", v: 0 },
          ],
        },
        HghL: {
          t: "VlLs",
          v: [
            { t: "long", v: 0 },
            { t: "long", v: 0 },
            { t: "long", v: 0 },
          ],
        },
        PrsL: { t: "bool", v: !0 },
      };
    if (j == "blwh")
      q = {
        __name: "Black & White",
        classID: "BanW",
        presetKind: { t: "enum", v: { presetKindType: "presetKindCustom" } },
        Rd: { t: "long", v: 40 },
        Yllw: { t: "long", v: 85 },
        Grn: { t: "long", v: 204 },
        Cyn: { t: "long", v: 60 },
        Bl: { t: "long", v: 20 },
        Mgnt: { t: "long", v: 80 },
        useTint: { t: "bool", v: !0 },
        tintColor: {
          t: "Objc",
          v: {
            classID: "RGBC",
            Rd: { t: "doub", v: 0 },
            Grn: { t: "doub", v: 0 },
            Bl: { t: "doub", v: 0 },
          },
        },
      };
    if (j == "phfl")
      q = {
        __name: "Photo Filter",
        classID: "photoFilter",
        Clr: {
          t: "Objc",
          v: {
            classID: "LbCl",
            Lmnc: { t: "doub", v: 67.06 },
            A: { t: "doub", v: 32 },
            B: { t: "doub", v: 120 },
          },
        },
        Dnst: { t: "long", v: 80 },
        PrsL: { t: "bool", v: !0 },
      };
    if (j == "grdm")
      q = {
        __name: "Gradient Map",
        classID: "GrMp",
        gs99: { t: "enum", v: { gradientInterpolationMethodType: "Gcls" } },
        Dthr: { t: "bool", v: !1 },
        Rvrs: { t: "bool", v: !1 },
        Grad: JSON.parse(eu.oy[6]).Grad,
      };
    if (j == "selc")
      q = {
        __name: "Selective Color",
        classID: "SlcC",
        presetKind: { t: "enum", v: { presetKindType: "presetKindCustom" } },
        Mthd: { t: "enum", v: { CrcM: "Rltv" } },
        ClrC: { t: "VlLs", v: [] },
      };
    if (j == "thrs")
      q = { __name: "Threshold", classID: "Thrs", Lvl: { t: "long", v: 128 } };
    if (j == "mixr")
      q = {
        __name: "Channel Mixer",
        classID: "ChnM",
        presetKind: { t: "enum", v: { presetKindType: "presetKindDefault" } },
        Mnch: { t: "bool", v: !1 },
        Rd: {
          t: "Objc",
          v: {
            classID: "ChMx",
            Rd: { t: "UntF", v: { type: "#Prc", val: 100 } },
          },
        },
        Grn: {
          t: "Objc",
          v: {
            classID: "ChMx",
            Grn: { t: "UntF", v: { type: "#Prc", val: 100 } },
          },
        },
        Bl: {
          t: "Objc",
          v: {
            classID: "ChMx",
            Bl: { t: "UntF", v: { type: "#Prc", val: 100 } },
          },
        },
      };
    if (j == "clrL") q = { __name: "Color Lookup", classID: "colorLookup" };
    if (j == "post")
      q = { __name: "Posterize", classID: "Pstr", Lvls: { t: "long", v: 3 } };
    if (j == "rplc")
      q = {
        __name: "Replace Color",
        classID: "RplC",
        Fzns: { t: "long", v: 55 },
        Mnm: {
          t: "Objc",
          v: {
            classID: "LbCl",
            Lmnc: { t: "doub", v: 73.1 },
            A: { t: "doub", v: 23.95 },
            B: { t: "doub", v: 8.03 },
          },
        },
        Mxm: {
          t: "Objc",
          v: {
            classID: "LbCl",
            Lmnc: { t: "doub", v: 73 },
            A: { t: "doub", v: 23 },
            B: { t: "doub", v: 8 },
          },
        },
        H: { t: "long", v: -22 },
        Strt: { t: "long", v: 0 },
        Lght: { t: "long", v: 0 },
      };
    if (j == "fade")
      q = {
        __name: "Fade",
        classID: "fade",
        Opct: { t: "UntF", v: { type: "#Prc", val: 100 } },
        Md: { t: "enum", v: { BlnM: "Nrml" } },
      };
    if (j == "aply")
      q = {
        classID: "null",
        With: {
          t: "Objc",
          v: {
            classID: "Clcl",
            T: {
              t: "obj ",
              v: [
                {
                  t: "Enmr",
                  v: { classID: "Chnl", typeID: "Chnl", enum: "RGB" },
                },
                {
                  t: "Enmr",
                  v: { classID: "Lyr", typeID: "Ordn", enum: "Mrgd" },
                },
              ],
            },
            Invr: { t: "bool", v: !1 },
            Clcl: { t: "enum", v: { Clcn: "Nrml" } },
            Opct: { t: "UntF", v: { type: "#Prc", val: 100 } },
            Ofst: { t: "long", v: 128 },
            Scl: { t: "doub", v: 1 },
            PrsT: { t: "bool", v: !1 },
          },
        },
      };
    if (j == "matc") {
      q = {
        __name: "Match Color",
        classID: "matchColor",
        Lght: { t: "long", v: 100 },
        ClrR: { t: "long", v: 100 },
        Fade: { t: "long", v: 0 },
        fsel: { t: "bool", v: !0 },
        "neutralizeColor    ": { t: "bool", v: !1 },
        selectedSourceAreas: { t: "bool", v: !0 },
        SlcA: { t: "bool", v: !0 },
        noReference: { t: "bool", v: !0 },
      };
    }
    if (j == "Dila")
      q = {
        __name: "Texture Dilation",
        classID: "Dila",
        Crop: { t: "UntF", v: { type: "#Pxl", val: 0 } },
        Rds: { t: "UntF", v: { type: "#Pxl", val: 10 } },
      };
    if (j == "blendOptions")
      q = {
        classID: "blendOptions",
        Opct: { t: "UntF", v: { type: "#Prc", val: 100 } },
        Md: { t: "enum", v: { BlnM: "Nrml" } },
      };
    return q;
  };
  k0.Bf = {
    sFlam: function (j, q) {
      q[0] = j.Type.v;
      q[1] = j.Leng.v;
      q[2] = j.RndL.v;
      q[3] = j.Widt.v;
      q[4] = j.Angl.v;
      q[5] = j.Intr.v;
      q[6] = j.Adpt.v;
      q[7] = j.Clr.v;
      q[8] = j.Qual.v;
      q[9] = j.Turb.v;
      q[10] = j.Jag.v;
      q[11] = j.Opct.v.val;
      q[12] = j.Lins.v;
      q[13] = j.Botm.v;
      q[14] = j.Styl.v;
      q[15] = j.Shap.v;
      q[16] = j.RnSh.v;
      q[17] = j.Arng.v;
    },
    gFlam: function (j, q) {
      j.Type.v = q[0];
      j.Leng.v = q[1];
      j.RndL.v = q[2];
      j.Widt.v = q[3];
      j.Angl.v = q[4];
      j.Intr.v = q[5];
      j.Adpt.v = q[6];
      j.Clr.v = q[7];
      j.Qual.v = q[8];
      j.Turb.v = q[9];
      j.Jag.v = q[10];
      j.Opct.v.val = q[11];
      j.Lins.v = q[12];
      j.Botm.v = q[13];
      j.Styl.v = q[14];
      j.Shap.v = q[15];
      j.RnSh.v = q[16];
      j.Arng.v = q[17];
    },
    sAdNs: function (j, q) {
      q[0] = j.Nose.v.val;
      q[1] = ["Gsn", "Unfr"].indexOf(j.Dstr.v.Dstr);
      q[2] = j.Mnch.v;
    },
    gAdNs: function (j, q) {
      j.Nose.v.val = q[0];
      j.Dstr.v.Dstr = ["Gsn", "Unfr"][q[1]];
      j.Mnch.v = q[2];
    },
    sDstS: function (j, q) {
      q[0] = j.Rds.v;
      q[1] = j.Thsh.v;
    },
    gDstS: function (j, q) {
      j.Rds.v = q[0];
      j.Thsh.v = q[1];
    },
    sGsnB: function (j, q) {
      q[0] = j.Rds.v.val;
    },
    gGsnB: function (j, q) {
      j.Rds.v.val = q[0];
    },
    sDila: function (j, q) {
      q[0] = j.Crop.v.val;
      q[1] = j.Rds.v.val;
    },
    gDila: function (j, q) {
      j.Crop.v.val = q[0];
      j.Rds.v.val = q[1];
    },
    sHghP: function (j, q) {
      q[0] = j.Rds.v.val;
    },
    gHghP: function (j, q) {
      j.Rds.v.val = q[0];
    },
    sHsbP: function (j, q) {
      var m = ["RGBC", "HSBl", "HSLC"];
      q[0] = m.indexOf(j.Inpt.v.ClrS);
      q[1] = m.indexOf(j.Otpt.v.ClrS);
    },
    gHsbP: function (j, q) {
      var m = ["RGBC", "HSBl", "HSLC"];
      j.Inpt.v.ClrS = m[q[0]];
      j.Otpt.v.ClrS = m[q[1]];
    },
    "sMxm ": function (j, q) {
      var m = "preserveShape";
      q[0] = j.Rds.v.val;
      q[1] = j[m] ? ["squareness", "Rndn"].indexOf(j[m].v[m]) : 0;
    },
    "gMxm ": function (j, q) {
      var m = "preserveShape";
      j.Rds.v.val = q[0];
      j[m] = { t: "enum", v: { preserveShape: ["squareness", "Rndn"][q[1]] } };
    },
    "sMnm ": function (j, q) {
      var m = "preserveShape";
      q[0] = j.Rds.v.val;
      q[1] = j[m] ? ["squareness", "Rndn"].indexOf(j[m].v[m]) : 0;
    },
    "gMnm ": function (j, q) {
      var m = "preserveShape";
      j.Rds.v.val = q[0];
      j[m] = { t: "enum", v: { preserveShape: ["squareness", "Rndn"][q[1]] } };
    },
    sMtnB: function (j, q) {
      q[0] = [j.Angl.v];
      q[1] = j.Dstn.v.val;
      console.log(q);
    },
    gMtnB: function (j, q) {
      j.Angl.v = typeof q[0] == "number" ? q[0] : q[0][0];
      j.Dstn.v.val = q[1];
    },
    sOfst: function (j, q) {
      q[0] = j.Hrzn.v;
      q[1] = j.Vrtc.v;
      q[2] = ["Rpt", "Bckg", "Wrp"].indexOf(j.Fl.v.FlMd);
    },
    gOfst: function (j, q) {
      j.Hrzn.v = q[0];
      j.Vrtc.v = q[1];
      j.Fl.v.FlMd = ["Rpt", "Bckg", "Wrp"][q[2]];
    },
    sPnch: function (j, q) {
      q[0] = j.Amnt.v;
    },
    gPnch: function (j, q) {
      j.Amnt.v = q[0];
    },
    "sPlr ": function (j, q) {
      q[0] = ["RctP", "PlrR"].indexOf(j.Cnvr.v.Cnvr);
    },
    "gPlr ": function (j, q) {
      j.Cnvr.v.Cnvr = ["RctP", "PlrR"][q[0]];
    },
    sRple: function (j, q) {
      q[0] = j.Amnt.v;
      q[1] = ["Sml", "Mdm", "Lrg"].indexOf(j.RplS.v.RplS);
    },
    gRple: function (j, q) {
      j.Amnt.v = q[0];
      j.RplS.v.RplS = ["Sml", "Mdm", "Lrg"][q[1]];
    },
    sTwrl: function (j, q) {
      q[0] = j.Angl.v;
    },
    gTwrl: function (j, q) {
      j.Angl.v = q[0];
    },
    sZgZg: function (j, q) {
      q[0] = j.Amnt.v;
      q[1] = j.NmbR.v;
      q[2] = ["ArnC", "OtFr", "PndR"].indexOf(j.ZZTy.v.ZZTy);
    },
    gZgZg: function (j, q) {
      j.Amnt.v = q[0];
      j.NmbR.v = q[1];
      j.ZZTy.v.ZZTy = ["ArnC", "OtFr", "PndR"][q[2]];
    },
    sUnsM: function (j, q) {
      q[0] = j.Amnt.v.val;
      q[1] = j.Rds.v.val;
      q[2] = j.Thsh.v;
    },
    gUnsM: function (j, q) {
      j.Amnt.v.val = q[0];
      j.Rds.v.val = q[1];
      j.Thsh.v = q[2];
    },
    sWave: function (j, q) {
      q[0] = j.NmbG.v;
      q[1] = j.WLMn.v;
      q[2] = j.WLMx.v;
      q[3] = j.AmMn.v;
      q[4] = j.AmMx.v;
      q[5] = j.SclH.v;
      q[6] = j.SclV.v;
      q[7] = ["WvSn", "WvTr", "WvSq"].indexOf(j.Wvtp.v.Wvtp);
      q[8] = ["WrpA", "RptE"].indexOf(j.UndA.v.UndA);
      q[9] = j.RndS.v;
    },
    gWave: function (j, q) {
      j.NmbG.v = q[0];
      j.WLMn.v = q[1];
      j.WLMx.v = q[2];
      j.AmMn.v = q[3];
      j.AmMx.v = q[4];
      j.SclH.v = q[5];
      j.SclV.v = q[6];
      j.Wvtp.v.Wvtp = ["WvSn", "WvTr", "WvSq"][q[7]];
      j.UndA.v.UndA = ["WrpA", "RptE"][q[8]];
      if (q[9] != null) {
        var m = parseInt(q[9]);
        if (isNaN(m)) m = 248325464;
        m = Math.max(0, Math.min(268435455, m));
        j.RndS.v = m;
      }
    },
    sDspl: function (j, q) {
      q[0] = j.HrzS.v;
      q[1] = j.VrtS.v;
      q[2] = 0;
      q[3] = ["WrpA", "RptE"].indexOf(j.UndA.v.UndA);
    },
    gDspl: function (j, q) {
      j.HrzS.v = q[0];
      j.VrtS.v = q[1];
      j.UndA.v.UndA = ["WrpA", "RptE"][q[3]];
      j.DspF.v.pth = q[4];
    },
    sbrit: function (j, q) {
      q[0] = j.Brgh ? j.Brgh.v : 0;
      q[1] = j.Cntr ? j.Cntr.v : 0;
      q[2] = j.useLegacy ? j.useLegacy.v : !1;
    },
    gbrit: function (j, q) {
      j.Brgh.v = q[0];
      j.Cntr.v = q[1];
      if (q[2] != null) j.useLegacy.v = q[2];
    },
  };
  k0.ak9 = function (j) {
    var q = new ea(0, 0);
    if (j.enab.v == !1) return q;
    var m = j.filterFXList.v;
    for (var y = 0; y < m.length; y++) {
      var n = m[y].v;
      if (n.enab.v == !1) continue;
      var G = k0.mK(n),
        W = k0.$V(G, n.Fltr ? n.Fltr.v : null);
      if (W.x > q.x) q.x = W.x;
      if (W.y > q.y) q.y = W.y;
    }
    return q;
  };
  k0.$V = function (j, q) {
    var m = 0,
      n = 0;
    if (["GsnB", "boxblur", "smartSharpen", "UnsM", "HghP"].indexOf(j) != -1) {
      var G = q.Rds ? q.Rds.v.val : 1;
      m = n = G * 2.57;
    }
    if (j == "MtnB") m = n = q.Dstn.v.val;
    if (
      "Dila,Ofst,Rept,LqFy,Dspl,Pnch,Rple,Shr ,Sphr,Twrl,ZgZg,Wave,RdlB,Clds,DfrC,Plr ,LnCr,Wnd ,lightFilterGradient,rigidTransform,blurbTransform,perspectiveWarpTransform,Frgm,Flam"
        .split(",")
        .indexOf(j) != -1
    ) {
      m = n = 1e4;
    }
    if (j == "GEfc") return i9.$V(q);
    return new ea(Math.ceil(m), Math.ceil(n));
  };
  k0.X2 = function () {
    return {
      t: "Objc",
      v: {
        classID: "filterFXStyle",
        enab: { t: "bool", v: !0 },
        validAtPosition: { t: "bool", v: !0 },
        filterMaskEnable: { t: "bool", v: !0 },
        filterMaskLinked: { t: "bool", v: !0 },
        filterMaskExtendWithWhite: { t: "bool", v: !0 },
        filterFXList: { t: "VlLs", v: [] },
      },
    };
  };
  k0.ak = function (j, q) {
    var m = { o: q.UP >> 16, i: (q.UP >> 8) & 255, X: q.UP & 255 },
      n = { o: q.vH >> 16, i: (q.vH >> 8) & 255, X: q.vH & 255 },
      G = k0.names[j];
    if (G == null) G = eV.names[j];
    var W = j;
    for (var k in eV.GF) if (eV.GF[k] == j) W = k;
    var T = {
        t: "Objc",
        v: {
          classID: "filterFX",
          Nm: { t: "TEXT", v: g$.get(G) },
          blendOptions: {
            t: "Objc",
            v: {
              classID: "blendOptions",
              Opct: { t: "UntF", v: { type: "#Prc", val: 100 } },
              Md: { t: "enum", v: { BlnM: "Nrml" } },
            },
          },
          enab: { t: "bool", v: !0 },
          hasoptions: { t: "bool", v: !0 },
          FrgC: { t: "Objc", v: B.MV.Ia(m) },
          BckC: { t: "Objc", v: B.MV.Ia(n) },
          filterID: { t: "long", v: W.length == 4 ? M.a5D(W) : 777 },
        },
      },
      b = k0.i4(j);
    if (b) T.v.Fltr = { t: "Objc", v: b };
    return T;
  };
  k0.po = function (j, q, m, n) {
    var G = Date.now(),
      W =
        fS.tx &&
        Math.max(n.r, n.$) <= fS.lB.getParameter(fS.lB.MAX_TEXTURE_SIZE),
      k = B.oM(m);
    if (j < 1) {
      var T = Math.round(j * 5),
        b = [1, 2, 1, 2, [40, 26, 13, 6, 4, 2][T], 2, 1, 2, 1];
      b = B.Vl.__(b);
      if (!W) {
        B.nc(m);
        var c = m.slice(0);
        B.Vl.kT(c, m, n.r, n.$, b, !0);
        B.B6(m);
      } else {
        var a = n.r,
          f = n.$,
          U = fS.vK(0, a, f, k);
        U.set(m);
        var Z = fS.vK(1, a, f, k),
          h = new Float32Array([1 / a, 1 / f]);
        fS.VF(Z);
        fS.filter.dH(
          { e: fS.filter.a6y, Di: h, aqi: new Float32Array(b) },
          U.vD
        );
        Z.get(m);
      }
    } else {
      var u = [];
      while (q != 2 && j * [1, 2.4][q] > 20 && u.length < 4) {
        var i = B.IT(m, n);
        u.push(m, n);
        m = i.sE;
        n = i.H;
        j /= 2;
      }
      var a = n.r,
        f = n.$;
      if (!W || (q == 2 && j > 15)) {
        B.nc(m);
        if (q == 0) B.Zl.a5w(m, n, j);
        if (q == 1) B.Zl.a1e(m, n, j);
        if (q == 2) B.Zl.asR(m, n, j);
        B.B6(m);
      } else {
        var U = fS.vK(0, a, f, k);
        U.set(m);
        var Z = fS.vK(1, a, f, k),
          h = new Float32Array([1 / a, 1 / f]);
        if (q == 0) {
          var x = 1;
          while (x < j) x <<= 1;
          fS.VF(Z);
          fS.filter.dH({ e: fS.filter.Mx, Di: h, SG: j, xB: [0, 0, x] }, U.vD);
          fS.VF(U);
          fS.filter.dH({ e: fS.filter.Mx, Di: h, SG: j, xB: [0, 1, x] }, Z.vD);
          U.get(m);
        } else if (q == 1) {
          var X = 3,
            $ = B.Zl.a2U(j, X);
          for (var y = 0; y < X; y++) {
            var H = $[y] >>> 1,
              C = 1;
            while (C < H) C <<= 1;
            if (H == 0) continue;
            fS.VF(Z);
            fS.filter.dH(
              { e: fS.filter.Mx, Di: h, SG: H, xB: [0, 0, C] },
              U.vD
            );
            fS.VF(U);
            fS.filter.dH(
              { e: fS.filter.Mx, Di: h, SG: H, xB: [0, 1, C] },
              Z.vD
            );
          }
          U.get(m);
        } else {
          var x = 1;
          while (x < j) x <<= 1;
          fS.VF(Z);
          fS.filter.dH({ e: fS.filter.Mx, Di: h, SG: j, xB: [0, 0, x] }, U.vD);
          Z.get(m);
        }
      }
      var l = Date.now();
      while (u.length != 0) {
        var v = u.pop(),
          K = u.pop();
        B.scale.aM9(m, n.r, n.$, K, v.r, v.$);
        m = K;
        n = v;
      }
    }
  };
  k0.abC = function (j, q, m, n) {
    for (var y = 0; y < j.length; y++) {
      m[y] = j[y] * (1 / 255);
      n[y] = 0;
    }
    FFT.fft2d(m, n);
    var G = q >>> 1,
      W = 16384,
      k = 128,
      b = 100;
    while (k < q) {
      k <<= 1;
      W <<= 2;
    }
    var T = 255 / Math.log(W),
      c = -100;
    for (var a = 0; a < q; a++)
      for (var f = 0; f < G; f++) {
        var U = (q + G + a) & (q - 1),
          Z = m[U * q + f],
          h = n[U * q + f],
          u = Math.sqrt(Z * Z + h * h),
          i = Math.atan2(h, Z);
        j[a * q + f] = Math.round(T * Math.log(u + 1));
        j[a * q + G + f] = Math.round((Math.PI + i) * ((255 * 0.5) / Math.PI));
      }
  };
  k0.atC = function (j, q, m, n) {
    m.fill(0);
    n.fill(0);
    var G = q >>> 1,
      W = 16384,
      k = 128;
    while (k < q) {
      k <<= 1;
      W <<= 2;
    }
    var T = 255 / Math.log(W),
      b = [],
      c = [],
      a = [];
    for (var y = 0; y < 256; y++) {
      b[y] = Math.exp(y / T) - 1;
      var f = y * ((2 * Math.PI) / 255) - Math.PI;
      c[y] = Math.sin(f);
      a[y] = Math.cos(f);
    }
    for (var U = 0; U < q; U++)
      for (var Z = 0; Z < G; Z++) {
        var h = (q + G + U) & (q - 1),
          u = b[j[U * q + Z]],
          f = j[U * q + G + Z],
          i = u * a[f],
          x = u * c[f];
        m[h * q + Z] = i;
        n[h * q + Z] = x;
        if (Z != 0) {
          var X = h == 0 ? h * q + q - Z : (q - h) * q + (q - Z);
          m[X] = i;
          n[X] = -x;
        }
      }
    FFT.ifft2d(m, n);
    for (var y = 0; y < j.length; y++) {
      j[y] = Math.max(0, Math.min(255, ~~(0.5 + 255 * m[y])));
    }
  };
  k0.akI = new ArrayBuffer(512);
  k0.a6f = function (j) {
    var q = k0.akI,
      m = j.length;
    if (q.byteLength < m) k0.akI = q = new ArrayBuffer(m);
    var n = new Uint8Array(q);
    for (var y = 0; y < m; y += 4) {
      n[y] = j[y];
      n[y + 1] = j[y + 1];
      n[y + 2] = j[y + 2];
      n[y + 3] = j[y + 3];
    }
    return q;
  };
  k0.Gi = function (j, q, m, n, G, W, k) {
    var T,
      b,
      c = B.oM(q.buffer);
    if (W == null) W = { buffer: B.j(q.buffer.length, c), H: q.H.P() };
    W.buffer.set(q.buffer);
    var a = "Blr ,BlrM,Shrp,ShrM,GsnB,boxblur,smartSharpen,UnsM,HghP".split(
        ","
      ),
      f = c != 8 && a.indexOf(j) == -1;
    if (f) {
      T = q.buffer;
      b = W.buffer;
      q.buffer = B.sL(T, 8);
      W.buffer = B.sL(b, 8);
    }
    W = k0.akv(j, q, m, n, G, W, k);
    if (f) {
      q.buffer = T;
      B.sL(W.buffer, c, b);
      W.buffer = b;
    }
    return W;
  };
  k0.akv = function (j, q, m, n, G, W, k) {
    var T = m && m.RndS ? m.RndS.v >>> 1 : 0,
      b = B.oM(q.buffer),
      c = B.TN(b);
    if (j == "GEfc") {
      var a = [];
      if (m.GEfs) {
        var f = m.GEfs.v;
        for (var y = 0; y < f.length; y++) {
          var U = f[y].v;
          if (U.GELv && U.GELv.v == !1) continue;
          a.push(U);
        }
      } else a = [m];
      for (var y = 0; y < a.length; y++) {
        var Z;
        if (y == 0) i9.Gi(j, q, a[y], n, G, W, k);
        else {
          if (Z == null) Z = { buffer: B.j(q.buffer.length), H: q.H.P() };
          B.wV(W.buffer, Z.buffer);
          i9.Gi(j, Z, a[y], n, G, W, k);
        }
      }
    }
    if (j == "Dila") {
      var h = m.Crop.v.val,
        u = m.Rds.v.val + h;
      u = u * u;
      if (u == 0) return;
      var i = q.H,
        x = i.r,
        X = i.$,
        $ = x * X,
        H = q.buffer,
        Z = W.buffer,
        l = B.j($);
      B.Ih(H, l, 3);
      if (h != 0) {
        var v = i.P();
        v.Lh(1, 1);
        var K = B.j(v.C());
        B.sN(l, i, K, v);
        B.BR(K);
        B.style.stroke(K, K, v, h);
        B.BR(K);
        B.sN(K, v, l, i);
      }
      var S = B.style.uf(l, x, X);
      Z.fill(0);
      for (var o = 0; o < X; o++)
        for (var V = 0; V < x; V++) {
          var y = o * x + V,
            P = y << 1,
            z = y << 2,
            E = S[P],
            A = S[P + 1];
          if (E * E + A * A < u) {
            var N = ((o + A) * x + (V + E)) << 2;
            Z[z] = H[N];
            Z[z + 1] = H[N + 1];
            Z[z + 2] = H[N + 2];
            Z[z + 3] = 255;
          }
        }
    }
    if (j == "Adobe Camera Raw Filter") {
      var i = q.H,
        x = i.r,
        X = i.$,
        Q = B.sL(q.buffer, 32),
        e = B.S(m);
      delete e.Upri;
      delete e.GuUr;
      ch(Q, x, X, Q, e);
      B.sL(Q, 8, W.buffer);
    }
    if (j == "Fct ") {
      var i = q.H,
        x = i.r,
        X = i.$,
        $ = x * X,
        Y = $ * 4;
      function d(gs) {
        var e1 = gs.slice(0);
        for (var o = 0; o < 3; o++)
          for (var V = 0; V < 3; V++) e1[o * 3 + V] = gs[(2 - V) * 3 + o];
        return e1;
      }
      function I(h3, iF, dA, aJ) {
        var bB = 0;
        for (var o = 0; o < 3; o++)
          for (var V = 0; V < 3; V++)
            bB += iF[o * 3 + V] * h3[(aJ - 1 + o) * x + dA - 1 + V];
        return bB;
      }
      var O = [8, 5, 2, 5, 2, -1, 2, -1, -4],
        s = [5, 5, 5, 2, 2, 2, -1, -1, -1],
        p = [2, 2, 2, 2, 2, 2, 2, 2, 2],
        F = [];
      F.push(O);
      for (var y = 0; y < 3; y++) F.push(d(F[F.length - 1]));
      F.push(s);
      for (var y = 0; y < 3; y++) F.push(d(F[F.length - 1]));
      F.push(p);
      for (var y = 0; y < 9; y++) F[y] = B.Vl.__(F[y]);
      var g = [-x - 1, -x, -x + 1, -1, 0, 1, x - 1, x, x + 1],
        w = [-1, -1, 0, -1, 1, -1, -1, 0, 0, 0, 1, 0, -1, 1, 0, 1, 1, 1],
        r = B.j($),
        eQ = new Float32Array($),
        t = B.j($);
      for (var dq = 0; dq < 3; dq++) {
        B.Ih(q.buffer, r, dq);
        for (var D = 0; D < 1; D++) {
          for (var o = 1; o < X - 1; o++)
            for (var V = 1; V < x - 1; V++) {
              var ha = o * x + V,
                am = r[ha];
              eQ[ha] = 1e9;
              for (var y = 0; y < 9; y++) {
                var k4 = I(r, F[y], V, o),
                  aA = (k4 - am) * (k4 - am);
                if (aA < eQ[ha]) eQ[ha] = aA;
              }
            }
          for (var o = 1; o < X - 1; o++)
            for (var V = 1; V < x - 1; V++) {
              var ex = 0,
                ac = 1e9;
              for (var y = 0; y < 9; y++) {
                var eJ = o * x + V + g[y],
                  aA = eQ[eJ];
                if (aA < ac) {
                  ac = aA;
                  ex = r[eJ];
                }
              }
              t[o * x + V] = ex;
            }
          r.set(t);
        }
        B.ln(t, W.buffer, dq);
      }
    }
    if (j == "adaptCorrect") {
      var i = q.H,
        x = i.r,
        X = i.$,
        $ = x * X,
        Y = $ * 4,
        h$ = m.sdwM.v,
        da = h$.Amnt.v.val / 100,
        bb = h$.Wdth.v.val / 100,
        gb = h$.Rds.v,
        fM = m.hglM.v,
        kS = fM.Amnt.v.val / 100,
        cY = fM.Wdth.v.val / 100,
        cS = fM.Rds.v;
      B.aga.SU(
        q.buffer,
        W.buffer,
        x,
        X,
        da,
        bb,
        gb,
        kS,
        cY,
        cS,
        m.ClrC.v / 100,
        m.Cntr.v / 100
      );
    }
    if (j == "denoise") {
      var i = q.H,
        x = i.r,
        X = i.$,
        k3 = m.channelDenoise.v[0].v;
      B.ahU.aDM(q.buffer, x, X, W.buffer, k3.Amnt.v / 10, k3.EdgF.v / 100);
    }
    if (j == "HsbP") {
      var di = m.Inpt.v.ClrS,
        a7 = m.Otpt.v.ClrS,
        i = q.H,
        x = i.r,
        X = i.$,
        $ = x * X;
      for (var y = 0; y < $; y++) {
        var z = y * 4,
          D = q.buffer[z] * (1 / 255),
          b0 = q.buffer[z + 1] * (1 / 255),
          e1 = q.buffer[z + 2] * (1 / 255);
        if (di == "RGBC") {
        } else if (di == "HSLC") {
          var t = B.wL(D, b0, e1);
          D = t.o;
          b0 = t.i;
          e1 = t.X;
        } else if (di == "HSBl") {
          var t = B.auc(D, b0, e1);
          D = t.o;
          b0 = t.i;
          e1 = t.X;
        }
        var l2 = D,
          kL = b0,
          es = e1;
        if (a7 == "RGBC") {
        } else if (a7 == "HSLC") {
          var t = B.r0(D, b0, e1);
          l2 = t.uu;
          kL = t.fO;
          es = t.I0;
        } else if (a7 == "HSBl") {
          var t = B.a3q(D, b0, e1);
          l2 = t.uu;
          kL = t.fO;
          es = t.X;
        }
        W.buffer[z] = ~~(255 * l2);
        W.buffer[z + 1] = ~~(255 * kL);
        W.buffer[z + 2] = ~~(255 * es);
      }
    }
    if (j == "Fbrs") {
      var i = q.H,
        x = i.r,
        X = i.$;
      B.O.aux(q.buffer, x, X, W.buffer, [m.Vrnc.v, m.Strg.v, T]);
      var kR = B.j(x * X);
      B.Ih(W.buffer, kR, 0);
      B.BR(kR);
      i9.NY(kR, W.buffer, n, G);
    }
    if (j == "Frgm") {
      var i = q.H,
        x = i.r,
        X = i.$,
        eH = q.buffer.slice(0);
      B.nc(eH);
      B.O.abg(eH, x, X, W.buffer);
      B.B6(W.buffer);
    }
    if (j == "Flam") {
      var i = q.H,
        x = i.r,
        X = i.$,
        cZ = m.Clr.v,
        ga = {
          e: m.Type.v + 1,
          length: m.Leng.v,
          azZ: m.RndL.v,
          aL: m.Widt.v,
          app: m.Angl.v,
          ayR: m.Intr.v,
          acQ: m.Adpt.v,
          color: { o: cZ.Rd.v, i: cZ.Grn.v, X: cZ.Bl.v },
          S1: m.Qual.v + 1,
          Fl: m.Turb.v,
          Qe: m.Jag.v,
          yA: m.Opct.v.val,
          Mm: m.Lins.v,
          ags: m.Botm.v,
          style: m.Styl.v + 1,
          shape: m.Shap.v + 1,
          a5j: m.RnSh.v,
          a5$: m.Arng.v,
          aE9: !1,
        };
      if (k[3] == null) return;
      var fi = k[3],
        go = fi[0],
        iz = fi[1],
        i5 = go[iz.length != 0 ? iz[0] : 0];
      if (i5 == null) {
        alert("Make a path first");
        return;
      }
      var aI = i5.add.vmsk.D,
        bs = B.z.in(aI),
        k2 = [];
      for (var N = 0; N < bs; N++) {
        var jG = B.z.kH(aI, N),
          eW = aI[jG];
        if (eW.length < 2) continue;
        var gc = [];
        k2.push(gc);
        var k1 = eW.length - (eW.e == 3 ? 1 : 0);
        for (var ha = 0; ha < k1; ha++) {
          var ke = aI[jG + 1 + ha],
            jh = ha == eW.length - 1 ? aI[jG + 1] : aI[jG + 1 + ha + 1],
            cE = ke.Ii,
            cy = ke._$,
            O = jh.kt,
            hl = jh.Ii,
            c2 = Math.round(ea.gw(cE, hl) / 5);
          for (var f9 = 0; f9 < c2; f9++) {
            var hu = f9 / c2,
              le = 1 - hu,
              V =
                le * le * le * cE.x +
                3 * le * le * hu * cy.x +
                3 * le * hu * hu * O.x +
                hu * hu * hu * hl.x,
              o =
                le * le * le * cE.y +
                3 * le * le * hu * cy.y +
                3 * le * hu * hu * O.y +
                hu * hu * hu * hl.y;
            gc.push(V, o);
          }
        }
      }
      var iJ = [k2, ga],
        dZ = Date.now(),
        kd = bx(iJ);
      hg(q.buffer, x, X, W.buffer, kd, iJ);
    }
    if (j == "Dfs ") {
      var i = q.H,
        x = i.r,
        X = i.$,
        bC = ["Nrml", "DrkO", "LghO", "anisotropic"].indexOf(m.Md.v.DfsM);
      if (bC < 3) B.O.aFF(q.buffer, x, X, W.buffer, [bC]);
      else {
        var iJ = [1.4, 1.6, 1, 4, !1, 2, [0, 0, 0.001]],
          i = q.H.P();
        i.x = i.y = 0;
        B.G1.filter(q.buffer, i, W.buffer, iJ);
      }
    }
    if (j == "TrcC") {
      var i = q.H,
        x = i.r,
        ev = x << 2,
        X = i.$,
        ak = m.Lvl.v,
        gD = m.Edg.v.CntE == "Lwr",
        a9 = q.buffer,
        kk = W.buffer;
      B.nn(kk, 1, 1, 1);
      function kX(bN, b5) {
        ew(bN, b5);
        ew(bN + 1, b5 + 1);
        ew(bN + 2, b5 + 2);
      }
      function kc(bN, b5) {
        gS(bN, b5);
        gS(bN + 1, b5 + 1);
        gS(bN + 2, b5 + 2);
      }
      function ew(bN, b5) {
        var l2 = a9[bN],
          kL = a9[b5];
        if (l2 >= ak && kL < ak) kk[bN] = 0;
        if (l2 < ak && kL >= ak) kk[b5] = 0;
      }
      function gS(bN, b5) {
        var l2 = a9[bN],
          kL = a9[b5];
        if (l2 > ak && kL <= ak) kk[b5] = 0;
        if (l2 <= ak && kL > ak) kk[bN] = 0;
      }
      if (gD)
        for (var o = 1; o < X; o++)
          for (var V = 1; V < x; V++) {
            var z = (o * x + V) << 2;
            kX(z, z - 4);
            kX(z, z - ev);
          }
      else
        for (var o = 1; o < X; o++)
          for (var V = 1; V < x; V++) {
            var z = (o * x + V) << 2;
            kc(z, z - 4);
            kc(z, z - ev);
          }
    }
    if (j == "Embs") {
      var i = q.H,
        x = i.r,
        X = i.$,
        hp = (-m.Angl.v * Math.PI) / 180,
        g2 = m.Hght.v,
        jY = m.Amnt.v / 100;
      g2 /= 2;
      var E = Math.cos(hp) * g2,
        A = Math.sin(hp) * g2,
        a9 = q.buffer,
        kk = W.buffer;
      kk.fill(0);
      var he = new Uint32Array(a9.buffer),
        t = new Uint8Array(4),
        a5 = new Uint32Array(t.buffer);
      for (var o = 0; o < X; o++)
        for (var V = 0; V < x; V++) {
          var gq = 0,
            fA = 0,
            c3 = 0;
          if (0 <= V + E && V + E < x && 0 <= o + A && o + A < X) {
            B.B.G3(V + E + 0.5, o + A + 0.5, he, x, X, a5, 0, 0);
            gq += t[0] - 128;
            fA += t[1] - 128;
            c3 += t[2] - 128;
          }
          if (0 <= V - E && V - E < x && 0 <= o - A && o - A < X) {
            B.B.G3(V - E + 0.5, o - A + 0.5, he, x, X, a5, 0, 0);
            gq -= t[0] - 128;
            fA -= t[1] - 128;
            c3 -= t[2] - 128;
          }
          var z = (o * x + V) << 2;
          kk[z] = Math.max(0, Math.min(255, gq * jY + 128));
          kk[z + 1] = Math.max(0, Math.min(255, fA * jY + 128));
          kk[z + 2] = Math.max(0, Math.min(255, c3 * jY + 128));
          kk[z + 3] = a9[z + 3];
        }
    }
    if (j == "ShrE") {
      var i = q.H,
        x = i.r,
        X = i.$;
      B.O.aLE(q.buffer, x, X, W.buffer);
    }
    if (j == "Dspc") {
      var i = q.H,
        x = i.r,
        X = i.$;
      B.O.a5a(q.buffer, x, X, W.buffer);
    }
    if (j == "Slrz") {
      var fa = W.buffer,
        jA = 128;
      for (var y = 0; y < fa.length; y += 4) {
        if (fa[y] > jA) fa[y] = 255 - fa[y];
        if (fa[y + 1] > jA) fa[y + 1] = 255 - fa[y + 1];
        if (fa[y + 2] > jA) fa[y + 2] = 255 - fa[y + 2];
      }
    }
    if (j == "Wnd ") {
      var i = q.H,
        x = i.r,
        X = i.$,
        kF = ["Wnd", "Blst", "Stgr"],
        dn = m.WndM.v.WndM;
      B.O.kO(q.buffer, x, X, W.buffer, [
        kF.indexOf(dn),
        m.Drct.v.Drct != "Left",
      ]);
    }
    if (j == "Bokh") {
      var i = q.H,
        x = i.r,
        X = i.$,
        $ = x * X,
        Y = $ * 4,
        de = q.buffer.slice(0),
        ks = m.BkDi.v.BtDi,
        fx = m.BkDc,
        hT = m.BkDs.v,
        i7 = m.BkDp.v / 255;
      if (ks == "BeIn") i7 = 0;
      var gT =
          57 *
          (0.3 + (0.7 * ((x + X) / 2)) / 1750) *
          (m.BkIb.v / 100) *
          (1 + 0.2 * Math.pow(i7, 0.1)),
        aF = parseInt(m.BkIs.v.BtIs.slice(3)),
        iC = (-m.BkIr.v * Math.PI) / 180,
        br = [];
      for (var y = 0; y < 8; y++) {
        var eb = iC + y * ((Math.PI * 2) / aF),
          kp = iC + (y + 1) * ((Math.PI * 2) / aF),
          bd = Math.cos(eb),
          js = Math.sin(eb),
          dL = Math.cos(kp),
          hZ = Math.sin(kp),
          fz = [0, 0, 0];
        B.OC.dl(
          [
            [bd, js, 1, 0],
            [dL, hZ, 1, 0],
            [1, 1, 1, 1],
          ],
          fz
        );
        if (fz[2] > 0) {
          fz[0] *= -1;
          fz[1] *= -1;
          fz[2] *= -1;
        }
        br.push(fz[0], fz[1], fz[2], 0);
      }
      if (ks == "BeIn") {
        B.EA(de, 0);
        i7 = 1;
      } else if (ks == "BeIt" && fx.v.BtDc == "BeCt") {
      } else {
        var c0;
        if (ks == "BeIt" && fx.v.BtDc == "BeCm") c0 = k[1];
        else if (ks == "BeIa") c0 = k[2][fx.v];
        if (c0 == null) {
          B.EA(de, 0);
        } else {
          var r;
          if (c0.H.Lg(i)) r = c0.N;
          else r = c0.fy(i);
          B.ln(r, de, 3);
        }
      }
      if (hT) for (var y = 0; y < Y; y += 4) de[y + 3] = 255 - de[y + 3];
      if (fS.tx) {
        var jl = de,
          h4 = x,
          kP = X,
          gx = 1,
          gK = (m.BkSb.v == 0 || m.BkSt.v == 255) && ks == "BeIn";
        if (!gK) {
          var bL = 0;
          for (var y = 0; y < Y; y += 4)
            bL += Math.abs(i7 - de[y + 3] * (1 / 255));
          bL = (bL / $) * gT;
          var cA = (3.14 * bL * bL * x * X) / 3e6;
          if (cA > 2e3) {
            alert("too large radius");
            return;
          }
        }
        while (gK && 3 * (gT / gx) * (gT / gx) * x * X > 500 * 2e3 * 2e3) {
          var kK = B.arp(de, new hk(0, 0, h4, kP));
          de = kK.sE;
          h4 = kK.H.r;
          kP = kK.H.$;
          gx *= 2;
        }
        var dZ = Date.now(),
          H = fS.vK(0, h4, kP);
        H.set(de);
        var ce = fS.vK(1, x, X);
        fS.VF(ce);
        fS.filter.dH(
          {
            e: fS.filter.aG4,
            Di: new Float32Array([1 / h4, 1 / kP]),
            aKR: i7,
            XT: gT / gx,
            aLz: new Float32Array([m.BkSb.v / 100, m.BkSt.v / 255]),
            afe: new Float32Array([
              m.BkNa.v / 100,
              m.BkNt.v.BtNt == "BeNu" ? 0 : 1,
              m.BkNm.v ? 1 : 0,
            ]),
            aDm: new Float32Array(br.slice(0, 16)),
            ajT: new Float32Array(br.slice(16)),
          },
          H.vD
        );
        ce.get(W.buffer);
        var iQ = W.buffer;
        for (var y = 0; y < Y; y += 4) iQ[y + 3] = q.buffer[y + 3];
      }
    }
    if (j == "blurbTransform") {
      B.iA.apply(m, q, W);
    }
    if (j == "rigidTransform") {
      var dZ = Date.now(),
        j0 = k0.a6f,
        H = q.buffer.slice(0),
        eK = 0,
        kh = 0;
      B.nc(H);
      var x = q.H.r,
        X = q.H.$,
        dP = m.puppetShapeList.v,
        jX = [],
        lc = [],
        cC = [],
        j8 = [];
      for (var ha = 0; ha < dP.length; ha++) {
        var gI = dP[ha].v,
          P = eK * 2,
          h7 = kh * 3,
          kr = gI.originalVertexArray.v.length >>> 2,
          cJ = gI.indexArray.v.length >>> 2,
          dF = new Float32Array(j0(gI.originalVertexArray.v));
        for (var y = 0; y < kr; y++) jX[P + y] = dF[y];
        var iY = new Float32Array(j0(gI.deformedVertexArray.v));
        for (var y = 0; y < kr; y++) lc[P + y] = iY[y];
        var f7 = new Uint32Array(j0(gI.indexArray.v));
        for (var y = 0; y < cJ; y++) cC[h7 + y] = eK + f7[y];
        var j$ = [],
          dt = [],
          bQ = gI.PnDp.v;
        for (var y = 0; y < bQ.length; y++) {
          j$.push(gI.pinVertexIndices.v[y].v);
          dt.push(bQ[y].v);
        }
        var fB = B.Hz.aEG(dF, f7, j$, dt);
        for (var y = 0; y < fB.length; y++) j8[eK + y] = fB[y];
        eK += kr >>> 1;
        kh += ~~(cJ / 3);
      }
      var eP = new k$(1, 0, 0, 1, -q.H.x, -q.H.y);
      B.b.u(jX, eP, jX);
      B.b.u(lc, eP, lc);
      W.buffer.fill(0);
      B.Hz.pe(H, x, X, W.buffer, x, X, jX, lc, j8, cC);
      B.B6(W.buffer);
    }
    if (j == "perspectiveWarpTransform") {
      var jj = B.m8.N2(m);
      if (jj.io == 0) {
        W.buffer.set(q.buffer);
        return;
      }
      var hU = jj.Os,
        bi = jj.EO,
        kw = jj.D_,
        gq = q.H,
        dY = W.H;
      W.buffer.fill(0);
      var g5 = new k$();
      g5.translate(-dY.x, -dY.y);
      function ge(iF, eS, y, D) {
        var bN = eS[y] * 2,
          b5 = eS[y + 1] * 2,
          aw = eS[y + 2] * 2,
          c4 = eS[y + 3] * 2;
        return B.B.Ht(
          [
            iF[bN],
            iF[bN + 1],
            iF[b5],
            iF[b5 + 1],
            iF[aw],
            iF[aw + 1],
            iF[c4],
            iF[c4 + 1],
          ],
          D
        );
      }
      if (hU.length == 4) {
        var ez = ge(bi, hU, 0),
          lu = ge(kw, hU, 0),
          h3 = B.B.J5(lu, B.B.BR(ez)),
          fm = L.Dq.hG([q.buffer, gq], 1, h3, null, null, W.H, !1);
        if (fm) B.M4(fm.buffer, fm.H, W.buffer, W.H);
      } else {
        var lg = [],
          dd = [],
          j4 = [];
        for (var y = 0; y < hU.length; y += 4) {
          var ez = ge(bi, hU, y),
            lu = ge(kw, hU, y),
            fP = [],
            iV = 24,
            aN = 1 / (iV - 1),
            e0 = dd.length >>> 1;
          for (var o = 0; o < iV; o++)
            for (var V = 0; V < iV; V++) {
              fP.push(V * aN, o * aN);
              if (V < iV - 1 && o < iV - 1)
                lg.push(
                  e0 + o * iV + V,
                  e0 + o * iV + V + 1,
                  e0 + (o + 1) * iV + V + 1,
                  e0 + o * iV + V,
                  e0 + (o + 1) * iV + V + 1,
                  e0 + (o + 1) * iV + V
                );
            }
          var cE = fP.slice(0);
          B.B.u(ez, cE);
          dd = dd.concat(cE);
          var cy = fP.slice(0);
          B.B.u(lu, cy);
          j4 = j4.concat(cy);
        }
        B.b.u(dd, g5, dd);
        B.b.u(j4, g5, j4);
        var dZ = Date.now();
        B.Hz.pe(q.buffer, gq.r, gq.$, W.buffer, dY.r, dY.$, dd, j4, null, lg);
      }
    }
    if (j == "lightFilterGradient") {
      function h_(cE) {
        var e0 = 1 / Math.sqrt(cE[0] * cE[0] + cE[1] * cE[1] + cE[2] * cE[2]);
        cE[0] *= e0;
        cE[1] *= e0;
        cE[2] *= e0;
      }
      var x = q.H.r,
        X = q.H.$,
        $ = x * X,
        dZ = Date.now(),
        gB = B.j($),
        kL = 0.3,
        es = 0.7;
      B.P2(W.buffer, gB);
      var l5 = gB.slice(0);
      B.Zl.oY(l5, W.H, 16);
      var ih = gB.slice(0);
      B.Zl.oY(ih, W.H, 8);
      var kg = gB,
        e6 = new Float32Array($),
        eF = m.Dtl.v,
        aq = eF[2].v,
        jW = eF[1].v,
        eU = eF[0].v,
        bB = (m.Scl.v * 40 * m.textureScale.v) / (aq + jW + eU);
      aq *= bB;
      jW *= bB;
      eU *= bB;
      for (var y = 0; y < $; y++) {
        var j_ = l5[y] * (1 / 255),
          cH = ih[y] * (1 / 255),
          bP = kg[y] * (1 / 255);
        bP = bP * bP;
        e6[y] = aq * j_ + jW * cH + eU * bP;
      }
      var bK = m.blur.v;
      if (bK != 0) {
        B.Zl.oY(e6, W.H, bK);
      }
      var ab = x - 1,
        ed = X - 1;
      for (var o = 0; o < X; o++)
        for (var V = 0; V < x; V++) {
          var y = o * x + V,
            z = y * 4,
            i2 = e6[y],
            E =
              kL * (e6[y + (V == ab ? 0 : 1)] - i2) +
              es * (i2 - e6[y - (V == 0 ? 0 : 1)]),
            A =
              kL * (e6[y + (o == ed ? 0 : x)] - i2) +
              es * (i2 - e6[y - (o == 0 ? 0 : x)]),
            cE = [1, 0, E],
            cy = [0, 1, A];
          h_(cE);
          h_(cy);
          var kp = cE[0],
            cX = cE[2],
            kE = cy[1],
            iM = cy[2],
            hA = -cX * kE,
            hf = -kp * iM,
            hi = kp * kE;
          W.buffer[z] = ~~(127.5 + hA * 127.5);
          W.buffer[z + 1] = ~~(127.5 + hf * 127.5);
          W.buffer[z + 2] = ~~(127.5 + hi * 127.5);
        }
    }
    if (j == "defr") {
      var x = q.H.r,
        X = q.H.$;
      h0(q.buffer, x, X, W.buffer);
    }
    if (j == "dDFT" || j == "iDFT") {
      function jQ(aF) {
        if (aF == 0) return 1;
        aF--;
        aF |= aF >> 1;
        aF |= aF >> 2;
        aF |= aF >> 4;
        aF |= aF >> 8;
        aF |= aF >> 16;
        return aF + 1;
      }
      var x = q.H.r,
        X = q.H.$,
        dC = jQ(Math.max(x, X)),
        ae = dC >>> 1,
        jR = new hk(0, 0, dC, dC),
        k5 = new hk(0, 0, x, X);
      k5.y = (dC - X) >>> 1;
      var jf = x >>> 1,
        ig = new hk(0, k5.y, jf, X),
        kH = new B.Rx(x * X);
      B.fV(q.buffer, kH);
      var d3 = new Float64Array(dC * dC),
        g4 = new Float64Array(dC * dC),
        r = B.j(dC * dC);
      FFT.init(dC);
      var fH = [kH.o, kH.i, kH.X];
      for (var y = 0; y < 3; y++) {
        var kM = fH[y];
        r.fill(0);
        if (j == "dDFT") {
          B.sN(kM, k5, r, jR);
          k0.abC(r, dC, d3, g4);
          B.sN(r, jR, kM, k5, ig);
          ig.x += jf;
          jR.x -= ae - jf;
          B.sN(r, jR, kM, k5, ig);
          ig.x -= jf;
          jR.x += ae - jf;
        } else {
          B.sN(kM, k5, r, jR, ig);
          ig.x += ae;
          k5.x += ae - jf;
          B.sN(kM, k5, r, jR, ig);
          ig.x -= ae;
          k5.x -= ae - jf;
          k0.atC(r, dC, d3, g4);
          B.sN(r, jR, kM, k5);
        }
      }
      B.Nr(kH, W.buffer);
    }
    if (j == "Avrg") {
      var jC = 0,
        b9 = 0,
        cM = 0,
        hq = 0,
        fX = 1;
      for (var y = 0; y < q.buffer.length; y += 4) {
        var l = q.buffer[y + 3];
        jC += q.buffer[y] * l;
        b9 += q.buffer[y + 1] * l;
        cM += q.buffer[y + 2] * l;
        hq += l;
      }
      var hV = 1 / hq;
      jC = Math.round(fX * (jC * hV) + (1 - fX) * 255);
      b9 = Math.round(fX * (b9 * hV) + (1 - fX) * 255);
      cM = Math.round(fX * (cM * hV) + (1 - fX) * 255);
      B.nn(W.buffer, jC / 255, b9 / 255, cM / 255);
    }
    if (["GsnB", "boxblur", "smartSharpen", "UnsM", "HghP"].indexOf(j) != -1) {
      var bO = m.Rds ? m.Rds.v.val : 1;
      k0.po(bO, j == "boxblur" ? 0 : 1, W.buffer, W.H);
      if (j == "UnsM" || j == "smartSharpen") {
        var jY = (m.Amnt ? m.Amnt.v.val : 200) / 100,
          d_ = 0;
        if (j == "UnsM") d_ = (m.Thsh.v * c) / 255;
        else jY *= 0.75;
        for (var y = 0; y < q.buffer.length; y++) {
          if ((y & 3) == 3) {
            W.buffer[y] = q.buffer[y];
            continue;
          }
          var am = q.buffer[y],
            k4 = W.buffer[y],
            aK = jY * (am - k4);
          if (aK > 0) aK = Math.max(0, aK - d_);
          else aK = Math.min(0, aK + d_);
          W.buffer[y] = Math.max(0, Math.min(c, am + aK));
        }
      }
      if (j == "HghP")
        for (var y = 0; y < q.buffer.length; y++) {
          if ((y & 3) == 3) {
            W.buffer[y] = q.buffer[y];
            continue;
          }
          var am = q.buffer[y],
            k4 = W.buffer[y];
          W.buffer[y] = Math.max(0, Math.min(c, 0.5 * c + am - k4));
        }
    }
    if (j == "AdNs") {
      var jD = new Uint8ClampedArray(W.buffer.buffer),
        gF = (255 * m.Nose.v.val) / 100,
        b1;
      if (m.Dstr.v.Dstr == "Gsn")
        b1 = function () {
          return (
            (Math.random() +
              Math.random() +
              Math.random() +
              Math.random() -
              2) *
            2
          );
        };
      else
        b1 = function () {
          return Math.random() * 2 - 1;
        };
      for (var y = 0; y < jD.length; y += 4) {
        var D = jD[y],
          b0 = jD[y + 1],
          e1 = jD[y + 2],
          g6,
          km,
          la;
        if (m.Mnch.v) {
          g6 = km = la = b1();
        } else {
          g6 = b1();
          km = b1();
          la = b1();
        }
        D += gF * g6;
        b0 += gF * km;
        e1 += gF * la;
        jD[y] = D;
        jD[y + 1] = b0;
        jD[y + 2] = e1;
      }
    }
    var dZ = Date.now();
    if (
      j == "Mdn " ||
      j == "DstS" ||
      j == "Mxm " ||
      j == "Mnm " ||
      j == "surfaceBlur"
    ) {
      var D = 0,
        dY = m.Thsh,
        gI = 0;
      if (dY) dY = dY.v;
      else dY = 0;
      if (j == "Mdn " || j == "Mxm " || j == "Mnm " || j == "surfaceBlur")
        D = m.Rds.v.val;
      else D = m.Rds.v;
      var hr = 10 * Math.ceil(D / 10),
        x = q.H.r,
        X = q.H.$,
        cc = ["Mnm ", "Mxm ", "surfaceBlur"].indexOf(j),
        gW = m.preserveShape;
      if (gW && gW.v.preserveShape == "Rndn") gI = 1;
      var cz =
          ((gI == 0 ? 1 : 0.75) *
            [0.73, 0.73, 1.2][cc] *
            (x * X * Math.pow(hr * hr, 1.05))) /
          6022387,
        e7 = (0.6 * (x * X * Math.pow(D, 1 / 2.6))) / 6500;
      if (j == "Mxm " || j == "Mnm ") e7 = (x * X) / 13e3;
      if (fS.tx && cc != -1 && (cz < e7 || gI == 1) && cz < 1e3) {
        var H = fS.vK(0, x, X);
        H.set(q.buffer);
        var Z = fS.vK(1, x, X);
        fS.VF(Z);
        fS.filter.dH(
          {
            e: fS.filter.abR,
            Di: new Float32Array([1 / x, 1 / X]),
            XT: D,
            ajy: dY / 255,
            xB: [gI, cc, hr],
          },
          H.vD
        );
        Z.get(W.buffer);
      } else if (j == "Mxm " || j == "Mnm ") {
        var x = q.H.r,
          X = q.H.$;
        B.FN.ahT(
          q.buffer,
          W.buffer,
          x,
          X,
          1 + Math.floor(m.Rds.v.val) * 2,
          j == "Mxm "
        );
      } else {
        D = Math.round(D);
        B.Zv.mj = 0.5;
        B.Zv.u4 = dY;
        var d$ = j == "surfaceBlur" ? 1 : 0;
        B.Zv.Zf(q.buffer, W.buffer, x, X, D, d$);
        if (j == "DstS")
          for (var y = 0; y < x * X * 4; y++) {
            var h2 = Math.abs(q.buffer[y] - W.buffer[y]);
            if (h2 <= dY) W.buffer[y] = q.buffer[y];
          }
      }
    }
    if (j == "ClrH") {
      var ig = q.H.P(),
        aH = 0;
      ig.x = ig.y = 0;
      var D = m.Rds.v;
      D = D * Math.sqrt(2);
      var x = ig.r,
        X = ig.$,
        dU = B.l4(x, X),
        jS = new Float32Array(256);
      for (var y = 0; y < 256; y++) {
        var cZ = y / 255,
          bO = Math.sqrt(cZ * (1 / Math.PI));
        if (bO > 0.5)
          bO = 0.5 + Math.pow((bO - 0.5) / (0.564 - 0.5), 1.35) * 0.2;
        jS[y] = D * bO;
      }
      var kt = Math.floor((2 * x) / D),
        dT = Math.floor((2 * X) / D),
        iG = 10 - (D - 54 * Math.sqrt(2)) * 1.5,
        aZ = [q.buffer, ig];
      B.HZ(aZ);
      while (aZ[aH * 2 + 1].r > (1.5 * x) / D) aH++;
      var gq = aZ[aH * 2 + 1],
        c3 = aZ[aH * 2],
        kG = B.j(gq.C()),
        gx = 1 / (1 << aH),
        h4 = gq.r,
        kP = gq.$,
        r = B.j(x * X);
      for (var h3 = 0; h3 < 3; h3++) {
        B.Ih(c3, kG, h3);
        B.BR(kG);
        var hp = (Math.PI * m["Ang" + (h3 + 1)].v) / 180,
          g5 = new k$();
        g5.translate(-x / 2, -X / 2);
        g5.rotate(-hp);
        g5.translate(x / 2, X / 2);
        dU.clearRect(0, 0, x, X);
        for (var o = -(dT >>> 2); o < dT; o++)
          for (var V = -(kt >>> 2); V < kt; V++) {
            var db = g5.uL(new ea((V + 0.5) * D - iG, (o + 0.5) * D - iG)),
              b3 = Math.max(0, Math.min(db.x * gx, h4 - 0.51)),
              fN = Math.max(0, Math.min(db.y * gx, kP - 0.51)),
              $ = ~~B.B.Xw(b3, fN, kG, h4, kP);
            dU.beginPath();
            dU.arc(db.x, db.y, jS[$], 0, 2 * Math.PI);
            dU.fill();
          }
        var gQ = dU.getImageData(0, 0, x, X);
        B.Ih(gQ.data, r, 3);
        B.BR(r);
        B.ln(r, W.buffer, h3);
      }
    }
    if (j == "ShMs") {
      var dZ = Date.now(),
        bs = m.ClSz.v.val,
        iW = m.Shap.v,
        bw = m.Sprd.v,
        cF = m.Invr.v,
        x = q.H.r,
        X = q.H.$,
        fe = Math.ceil(x / bs),
        cv = Math.ceil(X / bs),
        fa = q.buffer.slice(0),
        jN = B.j(x * X),
        kt = 1,
        dT = 1;
      B.P2(fa, jN);
      if (m.Mono.v) B.QZ(jN, fa);
      var dU = B.l4(x, X);
      dU.fillStyle = cF ? "white" : "black";
      dU.fillRect(0, 0, x, X);
      dU.globalCompositeOperation = cF ? "multiply" : "lighter";
      var aV = cF
          ? ["#00ffff", "#ff00ff", "#ffff00"]
          : ["#ff0000", "#00ff00", "#0000ff"],
        cR = [
          27.865, 31.83, 17.615, 26.209, 7.462, 32.009, 9.553, 20.362, 0.99,
          12.335, 12.532, 10.758, 17.394, 0, 22.436, 10.672, 34, 12.047, 25.574,
          20.22,
        ],
        gq = new hk(0, 0, bs, bs),
        c3 = B.j(gq.C() * 4);
      for (var o = 0; o < cv; o++)
        for (var V = 0; V < fe; V++) {
          for (var h3 = 0; h3 < 3; h3++) {
            var bB = 0,
              bd = V * bs,
              dL = Math.min(bd + bs, x),
              js = o * bs,
              hZ = Math.min(js + bs, X);
            for (var fN = js; fN < hZ; fN++)
              for (var b3 = bd; b3 < dL; b3++) {
                var y = fN * x + b3;
                bB += fa[4 * y + h3];
              }
            var gx = bB / ((dL - bd) * (hZ - js) * 255);
            gx = B.qd(gx);
            if (cF) gx = 1 - gx;
            dU.fillStyle = aV[h3];
            dU.translate(bd + bs / 2 + 0.5, js + bs / 2 + 0.5);
            var kO = (bw == 0 ? Math.sqrt(gx) : gx) * bs,
              gm = kO,
              is = kO;
            if (bw == 1) is = bs - 1;
            if (bw == 2) gm = bs - 1;
            dU.scale(gm, is);
            if (iW == 0) dU.fillRect(-0.5, -0.5, 1, 1);
            if (iW == 1) {
              dU.beginPath();
              dU.arc(0, 0, 0.6, 0, Math.PI * 2, !0);
              dU.fill();
            }
            if (iW == 2) {
              dU.beginPath();
              for (var y = 0; y < cR.length; y += 2) {
                var f4 = -0.65 + cR[y] * (1.3 / 32),
                  l0 = -0.65 + cR[y + 1] * (1.3 / 32);
                if (y == 0) dU.moveTo(f4, l0);
                else dU.lineTo(f4, l0);
              }
              dU.fill();
            }
            dU.resetTransform();
          }
        }
      dU.globalCompositeOperation = "source-over";
      var gQ = dU.getImageData(0, 0, x, X);
      W.buffer.set(gQ.data);
    }
    if (j == "Crst" || j == "Pntl") {
      var x = q.H.r,
        X = q.H.$,
        d$ = j == "Crst" ? B.lb.aeW : B.lb.ay2;
      d$(q.buffer, x, X, W.buffer, m.ClSz.v, [
        Math.round(G.o),
        Math.round(G.i),
        Math.round(G.X),
      ]);
    }
    if (j == "Mztn") {
      var x = q.H.r,
        X = q.H.$,
        $ = x * X,
        kH = new B.Rx($),
        jO = [kH.o, kH.i, kH.X];
      B.fV(q.buffer, kH);
      var dn = m.MztT.v.MztT,
        d6 = {
          FnDt: [0.1, 0, 0.3, 1.4],
          MdmD: [0.9, 0, 0.1, 1.4],
          GrnD: [3, 0, 0.2, 1.4],
          CrsD: [7, 0, 0.1, 1.4],
          ShrL: [0, 10, 0.16, 3],
          MdmL: [0, 22, 0.06, 3],
          LngL: [0, 25, 0.01, 4.5],
          ShSt: [3, 10, 0.05, 4.4],
          MdmS: [4, 25, 0.15, 4],
          LngS: [4, 30, 0.05, 4],
        }[dn],
        dZ = Date.now(),
        jk = [];
      for (var y = 0; y < $; y++) {
        jk[y] = Math.random();
      }
      var $ = x * X,
        dB = Math.round($ * d6[0]),
        jZ = $ - x - 1;
      for (var y = 0; y < dB; y++) {
        var ix = Math.random(),
          ie = 1;
        if (ix < 0.5) {
          ie = x;
          ix *= 2;
        } else ix = 2 * (ix - 0.5);
        var bN = Math.floor(ix * jZ),
          b5 = bN + ie;
        jk[bN] = jk[b5];
      }
      var lp = Math.round(x * d6[1]);
      for (var o = 0; o < X; o++)
        for (var y = 0; y < lp; y++) {
          var ix = B.G.Ez(o * $ + y),
            bN = o * x + Math.floor(ix * (x - 1));
          jk[bN] = jk[bN + 1];
        }
      var bF = new Float64Array(256);
      for (var y = 0; y < 256; y++) {
        var jr = y / 255,
          fw = 2 * (jr < 0.5 ? jr : 1 - jr);
        fw = d6[2] + Math.pow(fw, d6[3]) * (1 - d6[2]);
        jr = jr < 0.5 ? fw * 0.5 : 1 - fw * 0.5;
        bF[y] = jr;
      }
      for (var dq = 0; dq < 3; dq++) {
        var r = jO[dq];
        for (var o = 0; o < X; o++) {
          for (var V = 0; V < x; V++) {
            var y = o * x + V,
              eI = r[y],
              jr = bF[eI],
              ix = jk[y];
            r[y] = ix > jr ? 0 : 255;
          }
        }
      }
      B.Nr(kH, W.buffer);
    }
    if (j == "Msc ") {
      var bs = m.ClSz.v.val,
        x = q.H.r,
        X = q.H.$,
        fe = Math.ceil(x / bs),
        cv = Math.ceil(X / bs),
        hE = B.j(fe * cv * 4);
      B.scale.ce(q.buffer, x, X, hE, fe, cv, 1 / bs);
      B.scale.ce(hE, fe, cv, W.buffer, x, X, bs);
    }
    if (j == "Clds" || j == "DfrC") {
      var x = W.H.r,
        X = W.H.$,
        $ = x * X,
        jx = B.j($);
      if (j == "Clds") B.bs(W.buffer, 4278190080);
      var fV = B.j(256 * 4);
      for (var y = 0; y < 256; y++) {
        var z = y << 2,
          gs = y / 255,
          f7 = 1 - gs;
        fV[z] = Math.round(gs * n.o + f7 * G.o);
        fV[z + 1] = Math.round(gs * n.i + f7 * G.i);
        fV[z + 2] = Math.round(gs * n.X + f7 * G.X);
      }
      B.O.aKw(q.buffer, x, X, jx);
      var il = W.buffer;
      for (var y = 0; y < $; y++) {
        var z = y << 2,
          dq = jx[y] << 2,
          D = fV[dq],
          b0 = fV[dq + 1],
          e1 = fV[dq + 2];
        if (j == "Clds") {
          il[z] = D;
          il[z + 1] = b0;
          il[z + 2] = e1;
        } else {
          il[z] = Math.abs(il[4 * y] - D);
          il[z + 1] = Math.abs(il[4 * y + 1] - b0);
          il[z + 2] = Math.abs(il[4 * y + 2] - e1);
        }
      }
    }
    if (j == "LnsF") {
      var x = q.H.r,
        X = q.H.$,
        dn = ["Zm", "Nkn", "Nkn1", "PnVs"].indexOf(m.Lns.v.Lns),
        j1 = m.FlrC.v,
        h1 = [Math.min(dn, 2), m.Brgh.v / 100, j1.Hrzn.v, j1.Vrtc.v],
        dZ = Date.now();
      B.aE3(q.buffer, x, X, W.buffer, h1);
    }
    var d4 = ["Blr ", "BlrM", "Shrp", "ShrM"].indexOf(j);
    if (d4 != -1) {
      var iT = d4 > 1,
        x = q.H.r,
        X = q.H.$,
        em = B.Vl.B1[d4],
        ib = q.buffer.slice(0);
      if (!iT) B.nc(ib);
      B.Vl.kT(ib, W.buffer, x, X, em, !0, !1);
      if (!iT) B.B6(W.buffer);
    }
    if (j == "MtnB") {
      var au = (-m.Angl.v * Math.PI) / 180,
        fR = m.Dstn.v.val / 2,
        dZ = Date.now(),
        x = q.H.r,
        X = q.H.$,
        i = q.H.P();
      i.x = i.y = 0;
      if (fS.tx) {
        var dZ = Date.now(),
          aT = W.buffer;
        aT.set(q.buffer);
        B.nc(aT);
        var jy = fS.vK(0, x, X);
        jy.set(aT);
        var a9 = B.j(4);
        a9[0] = Math.round(128 + 127 * Math.cos(au));
        a9[1] = Math.round(128 + 127 * Math.sin(au));
        B.bs(aT, new Uint32Array(a9.buffer)[0]);
        var ao = fS.vK(1, x, X);
        ao.set(aT);
        fS.VF(jy, i);
        jy.w3(i);
        fS.filter.dH(
          {
            e: fS.filter.at,
            ZG: ao.vD,
            Di: new Float32Array([1 / x, 1 / X]),
            Gv: fR / 2,
            Rj: 1,
          },
          jy.sR
        );
        jy.get(aT);
        B.B6(aT);
      } else {
        var ia = W.buffer,
          eP = new k$();
        eP.rotate(au);
        var t = L.Dq.Ve([q.buffer, q.H], eP);
        k0.po(fR, 2, t.buffer, t.H);
        eP.BR();
        t = L.Dq.Ve([t.buffer, t.H], eP, !1, ia.buffer, W.H);
        if (!B.kP(q.buffer))
          for (var y = 0; y < ia.length; y += 4) ia[y + 3] = 255;
      }
      console.log(Date.now() - dZ);
    }
    if (j == "RdlB") {
      var x = q.H.r,
        X = q.H.$,
        jY = m.Amnt.v,
        ai = m.BlrM.v.BlrM == "Zm",
        h3 = m.Cntr.v,
        dA = h3.Hrzn.v,
        aJ = h3.Vrtc.v,
        E = Math.max(dA, 1 - dA) * x,
        A = Math.max(aJ, 1 - aJ) * X,
        bO = Math.sqrt(E * E + A * A),
        gJ = 2 * Math.PI * bO * 1.5,
        gm = Math.round(gJ),
        is = Math.round(bO),
        ig = new hk(0, 0, gm, is),
        dp = B.j(gm * is * 4),
        f0 = ai ? 4 : 1,
        ip = ai ? 0.6 : (8 * ((x + X) / 2)) / 1400,
        aC = 0.1,
        gx = 1,
        kt = 1;
      B.B.aw3(q.buffer, x, X, dp, gm, is, dA, aJ, f0, aC, gx, kt);
      var kA = ai ? B.j(gm * is * 4) : null;
      if (ai) {
        B.B.up(dp, kA, gm, is);
        var hu = kA;
        kA = dp;
        dp = hu;
        ig.r = is;
        ig.$ = gm;
      }
      k0.po(ip * jY, 2, dp, ig);
      if (ai) {
        B.B.up(dp, kA, is, gm);
        var hu = kA;
        kA = dp;
        dp = hu;
        ig.r = gm;
        ig.$ = is;
      }
      B.B.aFe(dp, gm, is, W.buffer, x, X, dA, aJ, f0, aC, gx, kt);
    }
    if (j == "Plr ") {
      var x = q.H.r,
        X = q.H.$;
      if (m.Cnvr.v.Cnvr == "RctP")
        B.B.aFe(q.buffer, x, X, W.buffer, x, X, 0.5, 0.5, 1, 0, 2, x / X);
      else B.B.aw3(q.buffer, x, X, W.buffer, x, X, 0.5, 0.5, 1, 0, 2, x / X);
    }
    if (j == "FndE") {
      var x = q.H.r,
        X = q.H.$;
      B.Vl.apt(q.buffer, W.buffer, x, X);
    }
    if (j == "oilPaint") {
      var hp = (m.LghD.v * Math.PI) / 180,
        dI = [Math.cos(hp), Math.sin(hp), 0.001],
        iJ = [
          m.stylization.v,
          m.cleanliness.v,
          m.brushScale.v,
          m.microBrush.v,
          m.lightingOn.v,
          m.specularity.v,
          dI,
        ],
        i = q.H.P();
      i.x = i.y = 0;
      B.G1.filter(q.buffer, i, W.buffer, iJ);
    }
    if (j == "Ofst") {
      var x = q.H.r,
        X = q.H.$,
        f3 = new Uint32Array(q.buffer.buffer),
        k9 = new Uint32Array(W.buffer.buffer);
      k9.fill(0);
      var eC = m.Hrzn.v,
        ay = m.Vrtc.v,
        fk = m.Fl.v.FlMd;
      if (fk == "Bckg" || fk == "Rpt") {
        var ig = q.H.P();
        ig.offset(eC, ay);
        B.M4(f3, ig, k9, W.H);
      }
      if (fk == "Rpt") {
        var bd, js, dL, hZ, ky;
        eC = Math.max(-x, Math.min(x, eC));
        ay = Math.max(-X, Math.min(X, ay));
        bd = eC > 0 ? eC : 0;
        dL = eC > 0 ? x : x + eC;
        js = ay > 0 ? 0 : ay + X;
        hZ = ay > 0 ? ay : X;
        ky = ay > 0 ? 0 : x * (X - 1);
        for (var o = js; o < hZ; o++)
          for (var V = bd; V < dL; V++) k9[o * x + V] = f3[ky + V - eC];
        bd = eC > 0 ? 0 : x + eC;
        dL = eC > 0 ? eC : x;
        js = ay > 0 ? ay : 0;
        hZ = ay > 0 ? X : X + ay;
        ky = eC > 0 ? 0 : x - 1;
        for (var o = js; o < hZ; o++)
          for (var V = bd; V < dL; V++) k9[o * x + V] = f3[ky + x * (o - ay)];
        if (eC >= 0 && ay >= 0) {
          bd = 0;
          dL = eC;
          js = 0;
          hZ = ay;
          ky = 0;
        }
        if (eC >= 0 && ay < 0) {
          bd = 0;
          dL = eC;
          js = X + ay;
          hZ = X;
          ky = x * (X - 1);
        }
        if (eC < 0 && ay >= 0) {
          bd = x + eC;
          dL = x;
          js = 0;
          hZ = ay;
          ky = x - 1;
        }
        if (eC < 0 && ay < 0) {
          bd = x + eC;
          dL = x;
          js = X + ay;
          hZ = X;
          ky = x * X - 1;
        }
        for (var o = js; o < hZ; o++)
          for (var V = bd; V < dL; V++) k9[o * x + V] = f3[ky];
      }
      if (fk == "Wrp") {
        eC = (eC + 100 * x) % x;
        ay = (ay + 100 * X) % X;
        var ig = new hk(eC - x, ay - X, x, X);
        B.M4(f3, ig, k9, W.H);
        ig.offset(x, 0);
        B.M4(f3, ig, k9, W.H);
        ig.offset(0, X);
        B.M4(f3, ig, k9, W.H);
        ig.offset(-x, 0);
        B.M4(f3, ig, k9, W.H);
      }
    }
    if (j == "Rept") {
      var aS = m.Rsft.v.val / 100,
        an = m.SpcX.v.val / 100;
      an = Math.max(an, -0.99);
      var bH = m.SpcY.v.val / 100;
      bH = Math.max(bH, -0.99);
      var gx = m.Scl.v.val / 100,
        eP = new k$();
      eP.rotate((m.Angl.v * Math.PI) / 180);
      eP.scale(gx, gx);
      var cn = { buffer: q.buffer, H: q.H };
      B.TE(cn);
      if (cn.H.jG()) {
        cn.buffer = q.buffer;
        cn.H = q.H;
      }
      var il = cn.buffer,
        ig = cn.H,
        lj = B.Xh(il, ig, 0),
        jt = new Uint32Array(il.buffer)[0];
      if (!lj.jG() && !lj.Lg(ig)) {
        var bR = B.j(lj.C() * 4);
        B.M4(il, ig, bR, lj);
        il = bR;
        ig = lj;
      }
      ig.x = ig.y = 0;
      jt = (an == 0 && bH == 0 && !B.kP(q.buffer)) || m.SpcC.v ? jt : 0;
      function bZ(V) {
        return V < 0 ? Math.ceil(V) : Math.floor(V);
      }
      var gr = eP.uL(new ea(ig.r, 0));
      gr.x = bZ(gr.x);
      gr.y = bZ(gr.y);
      var gv = eP.uL(new ea(0, ig.$));
      gv.x = bZ(gv.x);
      gv.y = bZ(gv.y);
      var t = L.Dq.Ve([il, ig], eP, !1),
        k5 = t.H,
        kk = t.buffer,
        ik = Math.round(k5.x),
        cx = Math.round(k5.y),
        ku =
          Math.max(W.H.r, W.H.$) /
          Math.min(ig.r * gx * (1 + an), ig.$ * gx * (1 + bH));
      ku = Math.ceil(ku * 1.7);
      B.bs(W.buffer, jt);
      for (var o = -ku; o < ku; o++) {
        for (var V = -ku; V < ku; V++) {
          var hP = (V + o * aS) * (1 + an),
            hv = o * (1 + bH);
          k5.x = ik + Math.round(hP * gr.x + hv * gv.x);
          k5.y = cx + Math.round(hP * gr.y + hv * gv.y);
          if (k5.C2(W.H)) B.G.Jg("norm", kk, k5, W.buffer, W.H, k5, 1);
        }
      }
    }
    if (j == "Ctoa") {
      var G = B.MV.xH(m.Clr.v),
        dY = m.Trsp.v.val / 100,
        cs = m.Opct.v.val / 100;
      dY = cs == 0 ? 0 : dY / cs;
      var x = q.H.r,
        X = q.H.$,
        dc = ~~G.o,
        e5 = ~~G.i,
        eO = ~~G.X,
        ky = q.buffer,
        eJ = W.buffer;
      for (var o = 0; o < X; o++)
        for (var V = 0; V < x; V++) {
          var y = o * x + V,
            z = y << 2,
            ig = ky[z],
            g_ = ky[z + 1],
            il = ky[z + 2],
            fu = Math.abs(dc - ig),
            fC = Math.abs(e5 - g_),
            hM = Math.abs(eO - il),
            aQ = Math.max(fu, fC, hM) * (1 / 255);
          aQ = Math.max(0, Math.min(1, aQ / cs));
          var d0 = aQ == 0 ? 0 : 1 / aQ,
            aa = dY == 1 ? 1 : Math.max(0, Math.min(1, (aQ - dY) / (1 - dY)));
          eJ[z] = Math.max(0, Math.min(255, (ig - dc * (1 - aQ)) * d0));
          eJ[z + 1] = Math.max(0, Math.min(255, (g_ - e5 * (1 - aQ)) * d0));
          eJ[z + 2] = Math.max(0, Math.min(255, (il - eO * (1 - aQ)) * d0));
          eJ[z + 3] = Math.min(eJ[z + 3], ~~(0.5 + aa * 255));
        }
    }
    if (j == "Dthr") {
      var ag = i9.axl(m.Plte.v),
        gt = new Uint32Array(i9.st(ag));
      B.PC(new Uint8Array(gt.buffer));
      var x = q.H.r,
        X = q.H.$,
        $ = x * X,
        jm = $ * 4,
        c3 = q.buffer.slice(0),
        fE = W.buffer;
      B.PC(c3);
      var lg = B.j(x * X);
      UPNG.encode.dither(c3, x, X, gt, fE, lg, m.Mthd ? m.Mthd.v : 1);
      B.aAo(fE);
    }
    if (j == "Part") {
      var jP = [
        m.RndS.v,
        m.Cont.v / 100,
        m.Size.v,
        m.Dpth.v / 100,
        m.Brgh.v / 100,
        B.MV.xH(m.Clr.v),
        m.Time.v,
        m.Blnk.v,
        m.Fall.v,
        m.Turb.v / 100,
      ];
      B.Fy.nQ(W.buffer, q.H.r, q.H.$, jP);
    }
    if (
      "LqFy,Dspl,Pnch,Sphr,Twrl,Rple,Shr ,Wave,LnCr,ZgZg,Kale"
        .split(",")
        .indexOf(j) != -1
    ) {
      var ee = k[0],
        x = q.H.r,
        X = q.H.$,
        bF,
        l7 = 0;
      if (j == "LqFy") bF = iA.VB(new Uint8Array(m.LqMe.v).buffer);
      else {
        var cO = 3;
        if (j == "Wave") cO = Math.min(3, m.WLMn.v);
        bF = { GM: Math.floor(x / cO), uu: Math.floor(X / cO) };
        bF.map = new Float32Array(bF.GM * bF.uu * 2);
        if (j == "LnCr") {
          var dA = 0.5 * (bF.GM - 1),
            aJ = 0.5 * (bF.uu - 1),
            e3 = Math.max(Math.abs(0 - dA), Math.abs(1 - dA)),
            dM = Math.max(Math.abs(0 - aJ), Math.abs(1 - aJ)),
            g5 = Math.sqrt(e3 * e3 + dM * dM),
            hj = 0,
            iE = 0,
            hH = -1,
            k8 = 2,
            gx = m.LnSi.v / 100,
            ai = 1 / gx,
            dK = m.LnIa.v / 100,
            gN = dK == 0 ? 1e-6 : dK * 4.6,
            d5 = ai / g5;
          for (var o = 0; o < bF.uu; o++) {
            for (var V = 0; V < bF.GM; V++) {
              var E = (V - dA) * d5,
                A = (o - aJ) * d5,
                D = Math.sqrt(E * E + A * A) * gN,
                kx = Math.atan(D),
                ko = dK > 0 ? kx / D : D / kx,
                kt = dA + g5 * ko * E,
                dT = aJ + g5 * ko * A,
                y = (o * bF.GM + V) << 1;
              bF.map[y] = kt - V;
              bF.map[y + 1] = dT - o;
            }
          }
        } else if (j == "Kale") {
          var fe = bF.GM,
            cv = bF.uu,
            dz = (fe - 1) * 0.5,
            ed = (cv - 1) * 0.5,
            id = (m.MRot.v * Math.PI) / 180 + Math.PI / 2 + 4 * Math.PI,
            cV = m.Mirr.v,
            eD = (Math.PI * 2) / cV,
            ji = 0.5 * eD;
          for (var o = 0; o < cv; o++)
            for (var V = 0; V < fe; V++) {
              var E = V - dz,
                A = o - ed,
                a3 = Math.sqrt(E * E + A * A),
                hp = Math.atan2(A, E) + id;
              hp = hp % eD;
              if (hp > ji) hp = eD - hp;
              var kt = dz + Math.cos(hp - id) * a3,
                dT = ed + Math.sin(hp - id) * a3,
                y = (o * fe + V) * 2;
              bF.map[y] = kt - V;
              bF.map[y + 1] = dT - o;
            }
        } else if (j == "Dspl" && ee.length != 0) {
          l7 = m.UndA.v.UndA == "WrpA" ? 2 : 1;
          var dy = m.DspF.v.pth,
            iO,
            fQ = m.DspD,
            cL,
            dh,
            gw;
          if (fQ) {
            var jC = fQ.v;
            dh = jC[1] * 256 + jC[0];
            cL = jC[5] * 256 + jC[4];
            gw = new Uint8Array(jC.slice(10, 10 + cL * dh));
          } else {
            for (var y = 0; y < ee.length; y++) if (ee[y].ys == dy) iO = ee[y];
            if (iO == null) iO = ee[0];
            iO.ht();
            var fu = iO.Zj[1],
              gw = B.j(fu.C());
            B.P2(iO.Zj[0], gw);
            cL = fu.r;
            dh = fu.$;
          }
          bF = { GM: cL, uu: dh };
          bF.map = new Float32Array(bF.GM * bF.uu * 2);
          var gC = (2.54 * m.HrzS.v * cL) / x,
            fW = (2.54 * m.VrtS.v * dh) / X;
          for (var o = 0; o < bF.uu; o++) {
            for (var V = 0; V < bF.GM; V++) {
              var h2 = -0.5 + gw[o * cL + V] * (1 / 255),
                y = (o * bF.GM + V) << 1;
              bF.map[y] = h2 * gC;
              bF.map[y + 1] = h2 * fW;
            }
          }
        } else if (j == "Pnch" || j == "Twrl" || j == "Sphr" || j == "ZgZg") {
          var jY = 1,
            au = Math.PI,
            gE = 0,
            kB = 1,
            en = 0,
            h3 = 3,
            bs = 1.53,
            ko = 1;
          if (j == "Pnch" || j == "Sphr" || j == "ZgZg") jY = m.Amnt.v / 100;
          if (j == "ZgZg") {
            kB = m.NmbR.v;
            en = ["ArnC", "OtFr", "PndR"].indexOf(m.ZZTy.v.ZZTy);
          }
          if (j == "Twrl") au = (m.Angl.v * Math.PI) / 180;
          if (j == "Sphr") gE = ["Nrml", "HrzO", "VrtO"].indexOf(m.SphM.v.SphM);
          function d$(V) {
            V = Math.pow(V, 1 - V * 0.3 - V * V * (V * V) * 0.5);
            return -0.225 * Math.sin(V * Math.PI);
          }
          function aU(X, iF, D, bd, js, dL, hZ, ko) {
            var E = dL - bd,
              A = hZ - js,
              hI = bd - X,
              eS = js - iF,
              gs = E * E + A * A,
              e1 = 2 * (E * hI + A * eS),
              h3 = hI * hI + eS * eS - D * D,
              aw = Math.sqrt(e1 * e1 - 4 * gs * h3),
              c4 = ko / (2 * gs),
              jp = (-e1 + aw) * c4,
              hL = (-e1 - aw) * c4;
            return ko * Math.min(jp, hL);
          }
          var fe = bF.GM,
            cv = bF.uu,
            dz = bF.GM / 2,
            ed = bF.uu / 2,
            df = 1 / dz,
            D = Math.sqrt(h3 * h3 + 1) / h3,
            kM = h3 + Math.sqrt(1 / (h3 * h3));
          if (jY < 0) {
            h3 = 1.72;
            D = 1;
            kM = h3;
            bs = -1;
            ko = -1;
          }
          for (var o = 0; o < cv; o++) {
            var A = (o - ed) / ed;
            for (var V = 0; V < fe; V++) {
              var E = (V - dz) * df;
              if (gE == 1) A = 0;
              else if (gE == 2) E = 0;
              var it = Math.sqrt(E * E + A * A);
              if (it < 1 && it != 0) {
                var y = (o * bF.GM + V) << 1;
                if (j == "Pnch") {
                  var fl = (-jY * d$(it)) / it;
                  bF.map[y] = E * fl * dz;
                  bF.map[y + 1] = A * fl * ed;
                } else if (j == "Sphr") {
                  var hu = aU(0, kM, D, 0, 0, it, h3, ko),
                    iG = bs * jY * (hu - 1);
                  bF.map[y] = E * iG * dz;
                  bF.map[y + 1] = A * iG * ed;
                } else if (j == "Twrl") {
                  var hp = Math.atan2(A, E) - au * (1 - it) * (1 - it),
                    hX = Math.cos(hp),
                    gV = Math.sin(hp);
                  bF.map[y] = (it * hX - E) * dz;
                  bF.map[y + 1] = (it * gV - A) * ed;
                } else if (j == "ZgZg") {
                  var hX = 0,
                    gV = 0,
                    hw =
                      jY *
                      (0.5 - 0.5 * Math.cos(it * kB * 2 * Math.PI)) *
                      (1 - it);
                  if (en == 0) {
                    var hp = Math.atan2(A, E) - 3.5 * hw;
                    hX = it * Math.cos(hp);
                    gV = it * Math.sin(hp);
                  }
                  if (en == 1) {
                    hw = ((100 / x) * hw) / it;
                    hX = (1 - hw) * E;
                    gV = (1 - hw) * A;
                  }
                  if (en == 2) {
                    var p = ((512 / x) * hw * Math.PI) / 4;
                    hX = p + E;
                    gV = p + A;
                  }
                  bF.map[y] = (hX - E) * dz;
                  bF.map[y + 1] = (gV - A) * ed;
                }
              }
            }
          }
        } else if (j == "Shr ") {
          var aI = B.S(m.ShrP.v);
          B.SD.u(aI, new k$(0, 255 / 127, 255 / 127, 0, -2, 0));
          var cf = B.SD.Bh(aI, bF.uu, !0);
          l7 = m.UndA.v.UndA == "WrpA" ? 2 : 1;
          for (var o = 0; o < bF.uu; o++) {
            var E = -cf[o] * bF.GM;
            for (var V = 0; V < bF.GM; V++) {
              var y = (o * bF.GM + V) << 1;
              bF.map[y] = E;
            }
          }
        } else if (j == "Wave") {
          var as = m.NmbG.v,
            iP = m.WLMn.v,
            ep = m.WLMx.v,
            d2 = m.AmMn.v * (Math.PI / 4),
            f_ = m.AmMx.v * (Math.PI / 4),
            lq = m.SclH.v / 100,
            gY = m.SclV.v / 100,
            dn = m.Wvtp.v.Wvtp,
            hw = Math.sin;
          if (dn == "WvTr")
            hw = function (V) {
              V *= 2 / Math.PI;
              return -0.5 + Math.abs((V % 2) - 1);
            };
          if (dn == "WvSq")
            hw = function (V) {
              V *= 2 / Math.PI;
              return 1 + 2 * Math.floor((V % 2) - 1);
            };
          var lx = [],
            gH = new B.G.Oy(m.RndS.v);
          for (var y = 0; y < as; y++) {
            lx.push(gH.get() * 10);
            lx.push((Math.PI * cO) / (iP + gH.get() * (ep - iP)));
            lx.push((lq * (d2 + gH.get() * (f_ - d2))) / cO);
            lx.push(gH.get() * 10);
            lx.push((Math.PI * cO) / (iP + gH.get() * (ep - iP)));
            lx.push((gY * (d2 + gH.get() * (f_ - d2))) / cO);
          }
          var gZ = [],
            ct = [],
            ca = Math.max(bF.GM, bF.uu);
          for (var y = 0; y < ca; y++) {
            var E = 0,
              A = 0;
            for (var f9 = 0; f9 < as; f9++) {
              var gz = f9 * 6;
              E += lx[gz + 2] * hw(lx[gz] + y * lx[gz + 1]);
              A += lx[gz + 5] * hw(lx[gz + 3] + y * lx[gz + 4]);
            }
            gZ[y] = A;
            ct[y] = E;
          }
          for (var o = 0; o < bF.uu; o++) {
            for (var V = 0; V < bF.GM; V++) {
              var y = (o * bF.GM + V) << 1;
              bF.map[y] = ct[o];
              bF.map[y + 1] = gZ[V];
            }
          }
          l7 = m.UndA.v.UndA == "WrpA" ? 2 : 1;
        } else if (j == "Rple") {
          l7 = 1;
          var jY = m.Amnt.v / 100,
            hB = 4,
            eZ = [
              0, -0.19, -0.29, -0.32, 0.92, 0.37, 0.93, 0.54, -0.54, 0.42,
              -0.29, -0.58, -0.67, 0.85, 0, 0.64,
            ],
            c$ = 1,
            gG = 1,
            hI = 0,
            l6 = ["Sml", "Mdm", "Lrg"].indexOf(m.RplS.v.RplS);
          if (l6 == 0) {
            c$ = 1;
            gG = 0.2;
            hI = 3;
          }
          if (l6 == 2) {
            c$ = 1;
            gG = 2;
            hI = -1;
            eZ = eZ.reverse();
          }
          var gP = function (V, o) {
              var h3 = Math.cos,
                bB = 0;
              for (var y = 0; y < hB; y++)
                for (var f9 = 0; f9 < hB; f9++)
                  bB += eZ[y * hB + f9] * h3(V * (y + hI) - o * (f9 + hI));
              return bB;
            },
            cQ = Math.floor(50 / cO),
            ff = new Float32Array(cQ * cQ * 2),
            hN = (gG * jY * 0.5) / cO;
          for (var o = 0; o < cQ; o++)
            for (var V = 0; V < cQ; V++) {
              var dA = (c$ * V * 2 * Math.PI) / cQ,
                aJ = (c$ * o * 2 * Math.PI) / cQ,
                ah = gP(dA, aJ),
                E = (gP(dA + 0.01, aJ) - ah) * 100,
                A = (gP(dA, aJ + 0.01) - ah) * 100,
                y = (o * cQ + V) * 2;
              ff[y] = E * hN;
              ff[y + 1] = A * hN;
            }
          for (var o = 0; o < bF.uu; o++)
            for (var V = 0; V < bF.GM; V++) {
              var gV = o % cQ,
                hX = V % cQ,
                y = (o * bF.GM + V) << 1,
                fJ = (gV * cQ + hX) << 1;
              bF.map[y] = ff[fJ];
              bF.map[y + 1] = ff[fJ + 1];
            }
        }
      }
      B.Vw.c1(q.buffer, W.buffer, x, X, null, bF.map, bF.GM, bF.uu, l7);
    }
    return W;
  };
  var i9 = {};
  i9.aoi = "BrSm BrsL BrDR BrsW BrbW BrSp".split(" ");
  i9.ka = "LDBt LDBL LDLf LDTL LDTp LDTR LDRg LDBR".split(" ");
  i9.OT = ["ScrC", "ScrD", "ScrL"];
  i9.KS = ["SDRD", "SDHz", "SDLD", "SDVt"];
  i9.sj = "TxBl TxCa TxFr TxTL TxBr TxBu TxSt".split(" ");
  i9.Ff = "LPBt LPBL LPLf LPTL LPTp LPTR LPRg LPBR".split(" ");
  i9.j4 = "GrnR GrSf GrSr GrnC GrCn GrnE GrSt GrnH GrnV GrSp".split(" ");
  i9.YW = [
    [24, 19, 0],
    [24, 19, 1],
    [24, 4],
    [24, 19, 2],
    [24, 14],
    [12, 67],
  ];
  i9.names = {
    ClrP: [0, [24, 20, 0]],
    Ct: [0, [24, 20, 1]],
    DryB: [0, [24, 20, 2]],
    FlmG: [0, [24, 20, 3]],
    Frsc: [0, [24, 20, 4]],
    NGlw: [0, [24, 20, 5]],
    PntD: [0, [24, 20, 6]],
    PltK: [0, [24, 20, 7]],
    PlsW: [0, [24, 20, 8]],
    PstE: [0, [24, 20, 9]],
    RghP: [0, [24, 20, 10]],
    SmdS: [0, [24, 20, 11]],
    Spng: [0, [24, 20, 12]],
    Undr: [0, [24, 20, 13]],
    Wtrc: [0, [24, 20, 14]],
    AccE: [1, [24, 20, 15]],
    AngS: [1, [24, 20, 16]],
    Crsh: [1, [24, 20, 17]],
    DrkS: [1, [24, 20, 18]],
    InkO: [1, [24, 20, 19]],
    Spt: [1, [24, 20, 20]],
    SprS: [1, [24, 20, 21]],
    Smie: [1, [24, 20, 22]],
    DfsG: [2, [24, 20, 23]],
    Gls: [2, [24, 20, 24]],
    OcnR: [2, [24, 20, 25]],
    BsRl: [3, [24, 20, 26]],
    ChlC: [3, [24, 20, 27]],
    Chrc: [3, [24, 20, 28]],
    Chrm: [3, [24, 20, 29]],
    CntC: [3, [24, 20, 30]],
    GraP: [3, [24, 20, 31]],
    HlfS: [3, [24, 20, 32]],
    NtPr: [3, [24, 20, 33]],
    Phtc: [3, [24, 20, 34]],
    Plst: [3, [24, 20, 35]],
    Rtcl: [3, [24, 20, 36]],
    Stmp: [3, [24, 20, 37]],
    TrnE: [3, [24, 20, 38]],
    WtrP: [3, [24, 20, 39]],
    GlwE: [4, [24, 20, 40]],
    Crql: [5, [24, 20, 41]],
    Grn: [5, [24, 20, 42]],
    MscT: [5, [24, 20, 43]],
    Ptch: [5, [24, 20, 44]],
    StnG: [5, [24, 20, 45]],
    Txtz: [5, [24, 20, 46]],
  };
  i9.i4 = function (j) {
    var q;
    if (j == "ClrP")
      q = {
        Pncl: { t: "long", v: 4 },
        StrP: { t: "long", v: 8 },
        PprB: { t: "long", v: 25 },
      };
    if (j == "Ct")
      q = {
        NmbL: { t: "long", v: 4 },
        EdgS: { t: "long", v: 3 },
        EdgF: { t: "long", v: 1 },
      };
    if (j == "DryB")
      q = {
        BrsS: { t: "long", v: 4 },
        BrsD: { t: "long", v: 4 },
        Txtr: { t: "long", v: 2 },
      };
    if (j == "FlmG")
      q = {
        Grn: { t: "long", v: 4 },
        HghA: { t: "long", v: 0 },
        Intn: { t: "long", v: 10 },
        FlRs: { t: "long", v: 23068185 },
      };
    if (j == "Frsc")
      q = {
        BrsS: { t: "long", v: 2 },
        BrsD: { t: "long", v: 8 },
        Txtr: { t: "long", v: 1 },
      };
    if (j == "NGlw")
      q = {
        Sz: { t: "long", v: 5 },
        Brgh: { t: "long", v: 15 },
        Clr: {
          t: "Objc",
          v: {
            classID: "RGBC",
            Rd: { t: "doub", v: 0 },
            Grn: { t: "doub", v: 0 },
            Bl: { t: "doub", v: 255 },
          },
        },
      };
    if (j == "PntD")
      q = {
        Sz: { t: "long", v: 10 },
        Shrp: { t: "long", v: 10 },
        BrsT: { t: "enum", v: { BrsT: "BrSm" } },
      };
    if (j == "PltK")
      q = {
        StrS: { t: "long", v: 25 },
        StDt: { t: "long", v: 3 },
        Sftn: { t: "long", v: 2 },
      };
    if (j == "PlsW")
      q = {
        HghS: { t: "long", v: 20 },
        Dtl: { t: "long", v: 4 },
        Smth: { t: "long", v: 5 },
      };
    if (j == "PstE")
      q = {
        EdgT: { t: "long", v: 2 },
        EdgI: { t: "long", v: 1 },
        Pstr: { t: "long", v: 2 },
      };
    if (j == "RghP")
      q = {
        StrL: { t: "long", v: 6 },
        StDt: { t: "long", v: 4 },
        TxtT: { t: "enum", v: { TxtT: "TxCa" } },
        Scln: { t: "long", v: 100 },
        Rlf: { t: "long", v: 20 },
        LghD: { t: "enum", v: { LghD: "LDBt" } },
        InvT: { t: "bool", v: !1 },
      };
    if (j == "SmdS")
      q = {
        StrL: { t: "long", v: 2 },
        HghA: { t: "long", v: 0 },
        Intn: { t: "long", v: 10 },
        FlRs: { t: "long", v: 6399750 },
      };
    if (j == "Spng")
      q = {
        BrsS: { t: "long", v: 2 },
        Dfnt: { t: "long", v: 12 },
        Smth: { t: "long", v: 5 },
        FlRs: { t: "long", v: 218877241 },
      };
    if (j == "Undr")
      q = {
        BrsS: { t: "long", v: 6 },
        TxtC: { t: "long", v: 16 },
        TxtT: { t: "enum", v: { TxtT: "TxCa" } },
        Scln: { t: "long", v: 100 },
        Rlf: { t: "long", v: 4 },
        LghD: { t: "enum", v: { LghD: "LDTp" } },
        InvT: { t: "bool", v: !1 },
      };
    if (j == "Wtrc")
      q = {
        BrsD: { t: "long", v: 9 },
        ShdI: { t: "long", v: 1 },
        Txtr: { t: "long", v: 3 },
      };
    if (j == "AccE")
      q = {
        EdgW: { t: "long", v: 2 },
        EdgB: { t: "long", v: 38 },
        Smth: { t: "long", v: 5 },
      };
    if (j == "AngS")
      q = {
        DrcB: { t: "long", v: 50 },
        StrL: { t: "long", v: 15 },
        Shrp: { t: "long", v: 3 },
      };
    if (j == "Crsh")
      q = {
        StrL: { t: "long", v: 9 },
        Shrp: { t: "long", v: 6 },
        Strg: { t: "long", v: 1 },
      };
    if (j == "DrkS")
      q = {
        Blnc: { t: "long", v: 5 },
        BlcI: { t: "long", v: 6 },
        WhtI: { t: "long", v: 2 },
      };
    if (j == "InkO")
      q = {
        StrL: { t: "long", v: 4 },
        DrkI: { t: "long", v: 20 },
        LghI: { t: "long", v: 10 },
      };
    if (j == "Smie")
      q = {
        StrW: { t: "long", v: 10 },
        StrP: { t: "long", v: 5 },
        Cntr: { t: "long", v: 16 },
      };
    if (j == "Spt")
      q = {
        SprR: { t: "long", v: 10 },
        Smth: { t: "long", v: 5 },
        FlRs: { t: "long", v: 10738420 },
      };
    if (j == "SprS")
      q = {
        StrL: { t: "long", v: 12 },
        SprR: { t: "long", v: 7 },
        SDir: { t: "enum", v: { StrD: "SDRD" } },
        FlRs: { t: "long", v: 893120664 },
      };
    if (j == "DfsG")
      q = {
        Grns: { t: "long", v: 6 },
        GlwA: { t: "long", v: 10 },
        ClrA: { t: "long", v: 15 },
        FlRs: { t: "long", v: 325892160 },
      };
    if (j == "Gls")
      q = {
        Dstr: { t: "long", v: 3 },
        Smth: { t: "long", v: 1 },
        TxtT: { t: "enum", v: { TxtT: "TxTL" } },
        Scln: { t: "long", v: 100 },
        InvT: { t: "bool", v: !1 },
      };
    if (j == "OcnR")
      q = {
        RplS: { t: "long", v: 5 },
        RplM: { t: "long", v: 15 },
        FlRs: { t: "long", v: 64008840 },
      };
    if (j == "BsRl")
      q = {
        Dtl: { t: "long", v: 11 },
        Smth: { t: "long", v: 7 },
        LghD: { t: "enum", v: { LghD: "LDBt" } },
      };
    if (j == "ChlC")
      q = {
        ChrA: { t: "long", v: 6 },
        ChlA: { t: "long", v: 6 },
        StrP: { t: "long", v: 1 },
        FlRs: { t: "long", v: 314004633 },
      };
    if (j == "Chrc")
      q = {
        ChAm: { t: "long", v: 1 },
        Dtl: { t: "long", v: 5 },
        LgDr: { t: "long", v: 50 },
        GELv: { t: "bool", v: !0 },
      };
    if (j == "Chrm")
      q = { Dtl: { t: "long", v: 4 }, Smth: { t: "long", v: 4 } };
    if (j == "CntC")
      q = {
        FrgL: { t: "long", v: 11 },
        BckL: { t: "long", v: 7 },
        TxtT: { t: "enum", v: { TxtT: "TxCa" } },
        Scln: { t: "long", v: 100 },
        Rlf: { t: "long", v: 4 },
        LghD: { t: "enum", v: { LghD: "LDTp" } },
        InvT: { t: "bool", v: !1 },
      };
    if (j == "GraP")
      q = {
        StrL: { t: "long", v: 7 },
        LgDr: { t: "long", v: 50 },
        SDir: { t: "enum", v: { StrD: "SDRD" } },
        FlRs: { t: "long", v: 55993248 },
      };
    if (j == "HlfS")
      q = {
        HlSz: { t: "long", v: 1 },
        Cntr: { t: "long", v: 5 },
        ScrT: { t: "enum", v: { ScrT: "ScrD" } },
      };
    if (j == "NtPr")
      q = {
        ImgB: { t: "long", v: 25 },
        Grns: { t: "long", v: 10 },
        Rlf: { t: "long", v: 11 },
        FlRs: { t: "long", v: 52642770 },
      };
    if (j == "Phtc")
      q = { Dtl: { t: "long", v: 10 }, Drkn: { t: "long", v: 4 } };
    if (j == "Plst")
      q = {
        ImgB: { t: "long", v: 20 },
        Smth: { t: "long", v: 2 },
        LghP: { t: "enum", v: { LghP: "LPTp" } },
      };
    if (j == "Rtcl")
      q = {
        Dnst: { t: "long", v: 12 },
        BlcL: { t: "long", v: 40 },
        WhtL: { t: "long", v: 5 },
        FlRs: { t: "long", v: 301835400 },
      };
    if (j == "Stmp")
      q = { LgDr: { t: "long", v: 25 }, Smth: { t: "long", v: 4 } };
    if (j == "TrnE")
      q = {
        ImgB: { t: "long", v: 25 },
        Smth: { t: "long", v: 11 },
        Cntr: { t: "long", v: 17 },
        FlRs: { t: "long", v: 461109340 },
      };
    if (j == "WtrP")
      q = {
        FbrL: { t: "long", v: 15 },
        Brgh: { t: "long", v: 60 },
        Cntr: { t: "long", v: 80 },
        FlRs: { t: "long", v: 83852682 },
      };
    if (j == "GlwE")
      q = {
        EdgW: { t: "long", v: 1 },
        EdgB: { t: "long", v: 10 },
        Smth: { t: "long", v: 1 },
      };
    if (j == "Crql")
      q = {
        CrcS: { t: "long", v: 15 },
        CrcD: { t: "long", v: 6 },
        CrcB: { t: "long", v: 9 },
        FlRs: { t: "long", v: 495615720 },
      };
    if (j == "Grn")
      q = {
        Intn: { t: "long", v: 40 },
        Cntr: { t: "long", v: 50 },
        Grnt: { t: "enum", v: { Grnt: "GrnR" } },
        FlRs: { t: "long", v: 217582197 },
      };
    if (j == "MscT")
      q = {
        TlSz: { t: "long", v: 12 },
        GrtW: { t: "long", v: 3 },
        LghG: { t: "long", v: 9 },
        FlRs: { t: "long", v: 25445584 },
      };
    if (j == "Ptch")
      q = {
        SqrS: { t: "long", v: 4 },
        Rlf: { t: "long", v: 8 },
        FlRs: { t: "long", v: 383529723 },
      };
    if (j == "StnG")
      q = {
        ClSz: { t: "long", v: 10 },
        BrdT: { t: "long", v: 4 },
        LghI: { t: "long", v: 0 },
        FlRs: { t: "long", v: 319935998 },
      };
    if (j == "Txtz")
      q = {
        TxtT: { t: "enum", v: { TxtT: "TxBr" } },
        Scln: { t: "long", v: 100 },
        Rlf: { t: "long", v: 10 },
        LghD: { t: "enum", v: { LghD: "LDBL" } },
        InvT: { t: "bool", v: !1 },
      };
    q.__name = "Filter Gallery";
    q.classID = "GEfc";
    q.GEfk = { t: "enum", v: { GEft: j } };
    q.GELv = { t: "bool", v: !0 };
    return q;
  };
  i9.JU = function (j, q) {
    for (var y = 0; y < q.length; y++)
      ~~(q[y] = (j[4 * y] + j[4 * y + 1] + j[4 * y + 2]) * (1 / 3));
  };
  i9.aBU = function (j, q, m, n) {
    var G = UPNG.quantize(j, q);
    G = { Lv: G.inds, JR: i9.ag2(G.plte) };
    return G;
  };
  i9.ag2 = function (j) {
    var q = [];
    for (var y = 0; y < j.length; y++) {
      var m = j[y].est.q;
      q.push([
        "",
        { o: m[0] * 255, i: m[1] * 255, X: m[2] * 255, Sd: m[3] * 255 },
      ]);
    }
    return q;
  };
  i9.st = function (j) {
    var q = [];
    for (var y = 0; y < j.length; y++) {
      var m = j[y][1];
      q.push((m.Sd << 24) | (m.X << 16) | (m.i << 8) | m.o);
    }
    return q;
  };
  i9.a5m = [[4, 7], "RGB 2x2x2", "RGB 4x4x4", "RGB 8x8x4"];
  i9.axl = function (j) {
    var q = [];
    if (j == 0)
      q = [
        ["", { o: 0, i: 0, X: 0, Sd: 255 }],
        ["", { o: 255, i: 255, X: 255, Sd: 255 }],
      ];
    else {
      var m = [
          [1, 1, 1],
          [2, 2, 2],
          [3, 3, 2],
        ][j - 1],
        n = [1 << m[0], 1 << m[1], 1 << m[2]],
        G = [~~(255 / (n[0] - 1)), ~~(255 / (n[1] - 1)), ~~(255 / (n[2] - 1))];
      q = [];
      for (var W = 0; W < n[0]; W++)
        for (var k = 0; k < n[1]; k++)
          for (var T = 0; T < n[2]; T++)
            q.push(["", { o: W * G[0], i: k * G[1], X: T * G[2], Sd: 255 }]);
    }
    return q;
  };
  i9.Gi = function (j, q, m, n, G, W, k) {
    j = m.GEfk.v.GEft;
    var T = q.H,
      b = T.r,
      c = T.$,
      a = b * c,
      f = m.FlRs ? m.FlRs.v >>> 1 : 0;
    function U(v) {
      return (v.o << 24) | (v.i << 16) | (v.X << 8) | 255;
    }
    if (j == "ClrP")
      B.O.ak1(q.buffer, b, c, W.buffer, [m.Pncl.v, m.StrP.v, m.PprB.v]);
    if (j == "Ct") {
      var Z = m.NmbL.v,
        h = m.EdgS.v,
        u = i9.aBU(q.buffer.buffer, Z * 2, b, c);
      B.DV.aJG(u.Lv, b, c, Math.floor((b + c) * 0.015));
      for (var y = 0; y < u.Lv.length; y++) u.Lv[y]++;
      var i = new Uint8Array((b + 2) * (c + 2));
      B.sN(u.Lv, new hk(1, 1, b, c), i, new hk(0, 0, b + 2, c + 2));
      var x = B.b.$r(i, b + 2, c + 2, h, !1),
        X = new k$(1, 0, 0, 1, -1, -1);
      for (var y = 0; y < x.length; y++) B.b.u(x[y].path.L, X, x[y].path.L);
      var $ = u.JR,
        H = B.l4(b, c);
      for (var y = 0; y < x.length; y++) {
        var l = x[y],
          v = $[l.color - 1][1];
        if (v.Sd == 0) continue;
        H.fillStyle =
          "rgba(" + v.o + "," + v.i + "," + v.X + "," + v.Sd / 255 + ")";
        H.beginPath();
        Typr.U.pathToContext({ crds: l.path.L, cmds: l.path.RC }, H);
        H.fill();
      }
      if (!T.jG()) {
        var K = H.getImageData(0, 0, b, c);
        B.wV(K.data, W.buffer);
      }
    }
    if (j == "DryB")
      B.O.aqC(q.buffer, b, c, W.buffer, [m.BrsS.v, m.BrsD.v, m.Txtr.v]);
    if (j == "FlmG")
      B.O.aDR(q.buffer, b, c, W.buffer, [m.Grn.v, m.HghA.v, m.Intn.v, f]);
    if (j == "Frsc")
      B.O.axy(q.buffer, b, c, W.buffer, [m.BrsS.v, m.BrsD.v, m.Txtr.v]);
    if (j == "NGlw")
      B.O.awL(q.buffer, b, c, W.buffer, [
        m.Sz.v,
        m.Brgh.v,
        U(B.MV.xH(m.Clr.v)),
        U(n),
        U(G),
      ]);
    if (j == "PltK")
      B.O.ajn(q.buffer, b, c, W.buffer, [m.StrS.v, m.StDt.v, m.Sftn.v]);
    if (j == "PstE")
      B.O.azu(q.buffer, b, c, W.buffer, [m.EdgT.v, m.EdgI.v, m.Pstr.v]);
    if (j == "RghP")
      B.O.aJy(q.buffer, b, c, W.buffer, [
        m.StrL.v,
        m.StDt.v,
        i9.sj.indexOf(m.TxtT.v.TxtT),
        m.Scln.v,
        m.Rlf.v,
        i9.ka.indexOf(m.LghD.v.LghD),
        m.InvT.v,
      ]);
    if (j == "SmdS")
      B.O.aIR(q.buffer, b, c, W.buffer, [
        m.StrL.v,
        m.HghA.v,
        m.Intn.v,
        m.FlRs ? m.FlRs.v : 0,
        f,
      ]);
    if (j == "Spng")
      B.O.aol(q.buffer, b, c, W.buffer, [
        m.BrsS.v,
        m.Dfnt.v,
        m.Smth.v,
        m.FlRs ? m.FlRs.v : 0,
        f,
      ]);
    if (j == "Undr")
      B.O.amu(q.buffer, b, c, W.buffer, [
        m.BrsS.v,
        m.TxtC.v,
        i9.sj.indexOf(m.TxtT.v.TxtT),
        m.Scln.v,
        m.Rlf.v,
        i9.ka.indexOf(m.LghD.v.LghD),
        m.InvT.v,
      ]);
    if (j == "Wtrc")
      B.O.aC7(q.buffer, b, c, W.buffer, [m.BrsD.v, m.ShdI.v, m.Txtr.v]);
    if (j == "AccE")
      B.O.aHQ(q.buffer, b, c, W.buffer, [m.EdgW.v, m.EdgB.v, m.Smth.v]);
    if (j == "AngS")
      B.O.ab$(q.buffer, b, c, W.buffer, [m.DrcB.v, m.StrL.v, m.Shrp.v]);
    if (j == "Crsh")
      B.O.axi(q.buffer, b, c, W.buffer, [m.StrL.v, m.Shrp.v, m.Strg.v]);
    if (j == "DrkS")
      B.O.ajf(q.buffer, b, c, W.buffer, [m.Blnc.v, m.BlcI.v, m.WhtI.v]);
    if (j == "InkO")
      B.O.ayn(q.buffer, b, c, W.buffer, [m.StrL.v, m.DrkI.v, m.LghI.v]);
    if (j == "Smie")
      B.O.aDo(q.buffer, b, c, W.buffer, [m.StrW.v, m.StrP.v, m.Cntr.v]);
    if (j == "DfsG")
      B.O.adR(q.buffer, b, c, W.buffer, [
        m.Grns.v,
        m.GlwA.v,
        m.ClrA.v,
        U(G),
        f,
      ]);
    if (j == "CntC")
      B.O.agy(q.buffer, b, c, W.buffer, [
        m.FrgL.v,
        m.BckL.v,
        i9.sj.indexOf(m.TxtT.v.TxtT),
        m.Scln.v,
        m.Rlf.v,
        i9.ka.indexOf(m.LghD.v.LghD),
        m.InvT.v,
        U(G),
        U(n),
      ]);
    if (j == "ChlC")
      B.O.adp(q.buffer, b, c, W.buffer, [
        m.ChrA.v,
        m.ChlA.v,
        m.StrP.v,
        f,
        U(G),
        U(n),
      ]);
    var S =
      j == "GraP" ||
      j == "Chrc" ||
      j == "Plst" ||
      j == "Rtcl" ||
      j == "Stmp" ||
      j == "TrnE";
    if (S) {
      var o = B.j(b * c);
      if (j == "GraP")
        B.O.axN(q.buffer, b, c, W.buffer, [
          m.StrL.v,
          m.LgDr.v,
          i9.KS.indexOf(m.SDir.v.StrD),
          f,
        ]);
      if (j == "Chrc")
        B.O.aqu(q.buffer, b, c, W.buffer, [m.ChAm.v, m.Dtl.v, m.LgDr.v]);
      if (j == "Plst")
        B.O.alP(q.buffer, b, c, W.buffer, [
          m.ImgB.v,
          i9.Ff.indexOf(m.LghP.v.LghP),
          m.Smth.v,
        ]);
      if (j == "Rtcl")
        B.O.aLd(q.buffer, b, c, W.buffer, [m.Dnst.v, m.BlcL.v, m.WhtL.v, f]);
      if (j == "Stmp") B.O.ao9(q.buffer, b, c, W.buffer, [m.LgDr.v, m.Smth.v]);
      if (j == "TrnE")
        B.O.akO(q.buffer, b, c, W.buffer, [m.ImgB.v, m.Smth.v, m.Cntr.v, f]);
      B.Ih(W.buffer, o, 0);
      i9.NY(o, W.buffer, n, G);
    }
    if (j == "NtPr")
      B.O.a92(q.buffer, b, c, W.buffer, [
        m.ImgB.v,
        m.Grns.v,
        m.Rlf.v,
        U(n),
        U(G),
        f,
      ]);
    if (j == "WtrP")
      B.O.a1C(q.buffer, b, c, W.buffer, [
        m.FbrL.v,
        m.Brgh.v,
        m.Cntr.v,
        f >>> 1,
      ]);
    if (j == "Crql")
      B.O.acT(q.buffer, b, c, W.buffer, [m.CrcS.v, m.CrcD.v, m.CrcB.v, f]);
    if (j == "Grn")
      B.O.axV(q.buffer, b, c, W.buffer, [
        m.Intn.v,
        i9.j4.indexOf(m.Grnt.v.Grnt),
        m.Cntr.v,
        U(n),
        U(G),
        f,
      ]);
    if (j == "MscT")
      B.O.aJc(q.buffer, b, c, W.buffer, [m.TlSz.v, m.GrtW.v, m.LghG.v, f]);
    if (j == "Ptch") B.O.ai_(q.buffer, b, c, W.buffer, [m.SqrS.v, m.Rlf.v, f]);
    if (j == "Phtc") {
      function V(aI, bs, T, hp) {
        B.Zl.oY(bs, T, hp, 2);
        for (var y = 0; y < a; y++)
          bs[y] = Math.max(0, Math.min(255, 128 + aI[y] - bs[y]));
      }
      var P = m.Dtl.v,
        z = m.Drkn.v,
        E = B.j(a);
      B.P2(q.buffer, E);
      var A = E.slice(0);
      V(E, A, T, 1);
      if (P == 1) {
        P = 2;
        z = Math.round(z / 4);
      }
      var N = E.slice(0);
      V(E, N, T, P);
      for (var y = 0; y < a; y++)
        E[y] = Math.max(0, Math.min(255, 255 - (A[y] - N[y]) * z));
      i9.NY(E, W.buffer, n, G);
    }
    if (j == "Spt" || j == "SprS") {
      var Q,
        e = 1,
        Y = 1;
      Q = { GM: Math.floor(b / Y), uu: Math.floor(c / Y) };
      Q.map = new Float32Array(Q.GM * Q.uu * 2);
      var d = new B.G.Oy(f),
        I = new Float32Array(8192),
        O = m.SprR.v,
        s = O < 20 ? 0.018 * O : 0.36 + (O - 20) * 0.128;
      if (j == "SprS") {
        s =
          0.07 +
          [
            0, 0.02, 0.04, 0.06, 0.08, 0.1, 0.12, 0.14, 0.16, 0.18, 0.2, 0.22,
            0.24, 0.26, 0.28, 0.3, 0.34, 0.38, 0.5, 0.65, 0.75, 0.85, 1, 1.5,
            2.2, 3,
          ][O];
      }
      for (var y = 0; y < 8192; y++) I[y] = (-1 + 2 * d.get()) * s * 70;
      for (var p = 0; p < c; p++)
        for (var F = 0; F < b; F++) {
          var g = (p * b + F) << 1;
          Q.map[g] = I[g % 7919];
          Q.map[g + 1] = I[(g + 1) % 7919];
        }
      var w = Q.map.slice(0),
        r = j == "Spt" ? m.Smth.v - 1 : 1;
      if (j == "Spt" && r != 0) {
        i9.amh(Q.map, w, b, c, r);
        i9.aIg(w, Q.map, b, c, r);
      }
      if (j == "SprS") {
        var eQ = m.StrL.v >>> 1,
          t = eQ == 0 ? 2 : 1;
        i9.amh(Q.map, w, b, c, t);
        i9.aIg(w, Q.map, b, c, t);
        if (eQ != 0) {
          var dq = i9.KS.indexOf(m.SDir.v.StrD),
            D = [1, 1, 1, 0][dq],
            ha = [-1, 0, 1, 1][dq],
            am = 2 * eQ + 1,
            k4 = 1 / am;
          for (var p = 0; p < c; p++)
            for (var F = 0; F < b; F++) {
              var g = (p * b + F) << 1,
                aA = 0,
                ex = 0;
              for (var y = 0; y < am; y++) {
                var ac = Math.max(0, Math.min(b - 1, F - (eQ + y) * D)),
                  eJ = Math.max(0, Math.min(c - 1, p - (eQ + y) * ha)),
                  h$ = (eJ * b + ac) << 1;
                aA += Q.map[h$];
                ex += Q.map[h$ + 1];
              }
              w[g] = aA * k4;
              w[g + 1] = ex * k4;
            }
          Q.map = w;
        }
      }
      B.Vw.c1(q.buffer, W.buffer, b, c, null, Q.map, Q.GM, Q.uu, e);
    }
    if (j == "BsRl" || j == "PlsW" || j == "Chrm") {
      var da = Date.now(),
        bb = B.j(a);
      B.P2(q.buffer, bb);
      var P = m.Dtl.v,
        gb = m.Smth.v;
      if (P != 15) {
        B.Zl.oY(bb, T, Math.round((15 - P) * 0.5));
      }
      var fM = 1.4 / b,
        kS = 1.4 / c,
        cY = new Float32Array(a),
        cS = new Float32Array(a),
        k3 = new Float32Array(W.buffer.buffer);
      for (var p = 0; p < c; p++)
        for (var F = 0; F < b; F++) {
          var y = p * b + F,
            D = F == b - 1 ? bb[y] - bb[y - 1] : bb[y + 1] - bb[y],
            ha = p == c - 1 ? bb[y] - bb[y - b] : bb[y + b] - bb[y],
            di = F * fM - 0.7,
            a7 = p * kS - 0.7;
          cY[y] = D == 0 ? di : D * 0.4;
          cS[y] = ha == 0 ? a7 : ha * 0.4;
        }
      if (j == "BsRl") {
        var b0 = (2 + i9.ka.indexOf(m.LghD.v.LghD)) * Math.PI * 0.25,
          aA = Math.cos(b0);
        if (Math.abs(aA) < 0.1) aA = 0;
        aA = Math.sign(aA);
        var ex = Math.sin(b0);
        if (Math.abs(ex) < 0.1) ex = 0;
        ex = Math.sign(ex);
        var e1 = 1 / (aA * aA + ex * ex),
          l2 = bb.slice(0);
        for (var p = 0; p < c; p++)
          for (var F = 0; F < b; F++) {
            var y = p * b + F,
              kL = Math.max(-1, Math.min(1, aA * cY[y])),
              es = Math.max(-1, Math.min(1, ex * cS[y]));
            l2[y] = 128 + 127 * (kL + es) * e1;
          }
        if (gb != 1) {
          B.Zl.oY(l2, T, Math.round((gb - 1) * 0.5));
        }
        i9.NY(l2, W.buffer, n, G);
      } else {
        if (j == "Chrm") gb = 5 + gb;
        if (gb > 1) i9.po(cY, cS, k3, T, gb - 1);
        if (j == "PlsW") {
          var kR = new Uint8Array(cY.buffer);
          for (var y = 0; y < a; y++) {
            var eH = y << 2,
              D = cY[y],
              ha = cS[y],
              cZ = 1 / (Math.sqrt(1 + D * D) * Math.sqrt(1 + ha * ha)),
              ga = cZ * cZ,
              fi = ga * ga,
              v = ~~(255 * (fi * fi * ga));
            kR[eH + 0] = v;
            kR[eH + 1] = v;
            kR[eH + 2] = v;
            kR[eH + 3] = v;
          }
          W.buffer.set(q.buffer);
          B.G.Jg("norm", kR, T, W.buffer, T, T, m.HghS.v / 20);
        } else if (j == "Chrm") {
          var go = W.buffer,
            iz = b >>> 1,
            i5 = c >>> 1;
          for (var y = 0; y < a; y++) {
            var eH = y << 2,
              D = cY[y],
              ha = cS[y],
              aI = { x: 1, y: 0, VP: D };
            dS.nD(aI);
            var bs = { x: 0, y: 1, VP: ha };
            dS.nD(bs);
            var k2 = dS.a5P(aI, bs),
              jG = 1 / k2.VP,
              eW = ~~Math.max(0, Math.min(b - 1, iz - k2.x * jG * iz)),
              gc = ~~Math.max(0, Math.min(c - 1, i5 - k2.y * jG * i5)),
              v = bb[gc * b + eW];
            go[eH + 0] = v;
            go[eH + 1] = v;
            go[eH + 2] = v;
          }
        }
      }
    }
    if (j == "Gls" || j == "OcnR" || j == "Txtz") {
      var k1 = j == "OcnR" ? 2 : i9.sj.indexOf(m.TxtT.v.TxtT),
        ke = i9.se(k1),
        jh = ke[0],
        bb = ke[1],
        cE = jh.r,
        cy = jh.$,
        am = 24,
        bC = 0,
        ev,
        ak;
      function hl(hZ, fz, c0) {
        return ~~(c2 * (hZ + fz) + 8192) & 127;
      }
      var cY = new Float32Array(a),
        cS = new Float32Array(a),
        k3 = new Float32Array(W.buffer.buffer),
        c2 = j == "OcnR" ? 1 / (1 + (m.RplS.v - 1) * 0.1) : 100 / m.Scln.v;
      if (k1 == 3) c2 *= 32 / 22.2;
      var da = Date.now(),
        f9 = c2,
        fM = 1.4 / b,
        kS = 1.4 / c;
      if (j == "Txtz") {
        f9 *= 1 / 255;
        am = 256;
      }
      for (var p = 0; p < c; p++) {
        var hu = hl(p, T.y, cy),
          eJ = (hu + 1) & 127;
        for (var F = 0; F < b; F++) {
          var y = p * b + F,
            le = hl(F, T.x, cE),
            ac = (le + 1) & 127,
            iJ = 0,
            dZ = 0,
            kd = 0;
          if (j == "Txtz") {
            iJ = B.B.Xw(c2 * F, c2 * p, bb, 128, 128);
            dZ = B.B.Xw(c2 * F, c2 * p + 1, bb, 128, 128);
            kd = B.B.Xw(c2 * F + 1, c2 * p, bb, 128, 128);
          } else {
            iJ = bb[hu * cE + le];
            dZ = bb[eJ * cE + le];
            kd = bb[hu * cE + ac];
          }
          cY[y] = Math.max(-am, Math.min((kd - iJ) * f9, am));
          cS[y] = Math.max(-am, Math.min((dZ - iJ) * f9, am));
        }
      }
      if (j == "Txtz") i9.a5u(cY, cS, k3, T, 6);
      else
        i9.po(
          cY,
          cS,
          k3,
          T,
          j == "Txtz" ? 1 : j == "OcnR" ? 3.5 / c2 : m.Smth.v
        );
      if (j == "Txtz") bC = m.InvT.v ? -1 : 1;
      else if (j == "Gls") {
        bC =
          [1, 0.4, 0.5, 0.5, 0.5, 0.5, 0.5][k1] *
          (Math.exp(m.Dstr.v * 0.155) - 1);
        if (m.InvT.v) bC = -bC;
      } else {
        bC = 0.5 * (Math.exp(m.RplM.v * 0.155) - 1);
      }
      var go = W.buffer;
      if (j == "Txtz") {
        var b0 = (2 + i9.ka.indexOf(m.LghD.v.LghD)) * Math.PI * 0.25,
          aA = Math.cos(b0),
          ex = Math.sin(b0);
        ev = { x: aA, y: ex, VP: 0 };
        dS.nD(ev);
        ak = m.Rlf.v;
        ak = ak / 4 + Math.max(0, (ak - 35) * 2);
      }
      function gD(aI, bs, kk) {
        var fA = B.G.overF(bs, aI, 1),
          hZ = (1 - kk) * aI + kk * (kk * bs + (1 - kk) * fA);
        return hZ * 255;
      }
      for (var p = 0; p < c; p++)
        for (var F = 0; F < b; F++) {
          var y = p * b + F,
            eH = y << 2,
            D = cY[y],
            ha = cS[y],
            aI = { x: 1, y: 0, VP: D };
          dS.nD(aI);
          var bs = { x: 0, y: 1, VP: ha };
          dS.nD(bs);
          var k2 = dS.a5P(aI, bs);
          if (j == "Txtz") {
            var a9 = dS.awg(k2, ev) * bC,
              kk = 1,
              v = 1;
            if (a9 < 0) {
              v = 0;
              a9 = -a9;
            }
            kk = Math.min(1, a9 * ak);
            go[eH + 0] = ~~gD(q.buffer[eH] * (1 / 255), v, kk);
            go[eH + 1] = ~~gD(q.buffer[eH + 1] * (1 / 255), v, kk);
            go[eH + 2] = ~~gD(q.buffer[eH + 2] * (1 / 255), v, kk);
          } else {
            var jG = bC / k2.VP,
              eW = ~~Math.max(0, Math.min(b - 1, F - k2.x * jG)),
              gc = ~~Math.max(0, Math.min(c - 1, p - k2.y * jG)),
              kX = (gc * b + eW) << 2;
            go[eH + 0] = q.buffer[kX];
            go[eH + 1] = q.buffer[kX + 1];
            go[eH + 2] = q.buffer[kX + 2];
          }
        }
    }
    if (j == "PntD") {
      var kc = m.Shrp.v * 0.4,
        ew = m.BrsT.v.BrsT,
        gS = {
          BrSm: [0.75],
          BrsL: [0.85],
          BrDR: [0.68],
          BrsW: [0.75],
          BrbW: [0.78],
          BrSp: [0.62],
        }[ew],
        hp = Math.round(m.Sz.v * 0.5);
      B.Zv.mj = gS[0];
      B.Zv.Zf(q.buffer, W.buffer, b, c, hp, 0, []);
      var g2 = [-0.7, -1, -0.7, -1, 10, -1, -0.7, -1, -0.7];
      g2 = B.Vl.__(g2);
      var jY = W.buffer.slice(0);
      B.Vl.kT(jY, W.buffer, b, c, g2);
      for (var y = 0; y < q.buffer.length; y++) {
        var he = W.buffer[y] - jY[y];
        W.buffer[y] = Math.max(0, Math.min(255, jY[y] + kc * he));
      }
    }
    if (j == "GlwE") {
      var a5 = W.buffer.slice(0);
      B.Zv.mj = 0.5;
      B.Zv.Zf(q.buffer, a5, b, c, m.Smth.v >>> 1, 0, []);
      B.Vl.apt(a5, W.buffer, b, c);
      B.wV(W.buffer, a5);
      B.BR(a5);
      B.EA(a5, 1);
      B.FN.ahT(a5, W.buffer, b, c, (m.EdgW.v >>> 1) * 2 + 1, !0);
      var gq = m.EdgB.v / 10;
      for (var y = 0; y < a5.length; y++) {
        if ((y & 3) == 3) continue;
        var fA = W.buffer[y];
        W.buffer[y] = Math.max(0, Math.min(255, fA * gq));
      }
    }
    if (j == "StnG") {
      B.lb.ayW(
        q.buffer,
        b,
        c,
        W.buffer,
        m.ClSz.v,
        [Math.round(n.o), Math.round(n.i), Math.round(n.X)],
        m.BrdT.v,
        f
      );
    }
    if (j == "HlfS") {
      var c3 = m.HlSz.v,
        fa = c3 * 2 + 1,
        jA = m.Cntr.v,
        kF = i9.OT.indexOf(m.ScrT.v.ScrT),
        a = b * c,
        dn = a * 4,
        de = B.j(a),
        ks = q.buffer,
        gT = 0,
        iC = 0;
      i9.JU(ks, de);
      B.Zl.kN(de, T, c3);
      var fx = Math.PI / fa,
        hT = new Float64Array(b),
        aA = new Float64Array(b),
        i7 = new Float64Array(2 * b);
      for (var F = 0; F < b; F++) {
        var le = (F - (b >>> 1)) * fx;
        hT[F] = le * le;
        aA[F] = Math.cos(le);
        var D = F << 1;
        i7[D] = Math.sin(D * (1 / 4.5));
        i7[D + 1] = Math.sin((D + 1) * (1 / 4.5));
      }
      for (var p = 0; p < c; p++) {
        var hu = (p - (c >>> 1)) * fx,
          ex = Math.cos(hu),
          br = hu * hu;
        for (var F = 0; F < b; F++) {
          var v = ex;
          if (kF == 0) {
            var eb = 0.5 + Math.sqrt(hT[F] + br) * 4.5;
            v = i7[~~eb];
          } else if (kF == 1) {
            v = aA[F] * ex;
          }
          var y = p * b + F,
            kp = de[y] * (0.75 + 0.25 * v),
            kk = ks[(y << 2) + 3] * (1 / 255),
            bd = Math.max(0, Math.min(255, ~~kp));
          (gT += bd * kk), (iC += kk);
          de[y] = bd;
        }
      }
      gT /= iC;
      var js = 128 + 1.26 * (gT - 128),
        gq = 0.08 + 0.25 * Math.abs((128 - gT) / 128),
        dL = 1 + gq * jA;
      for (var y = 0; y < a; y++) {
        var kp = js + (de[y] - js) * dL;
        de[y] = Math.max(0, Math.min(255, ~~kp));
      }
      if (jA > 46) B.round(de);
      i9.NY(de, W.buffer, n, G);
    }
    for (var y = 0; y < q.buffer.length; y += 4)
      W.buffer[y + 3] = q.buffer[y + 3];
  };
  i9.NY = function (j, q, m, n) {
    var G = j.length,
      W = m.o,
      k = m.i,
      T = m.X,
      b = n.o,
      c = n.i,
      a = n.X;
    for (var y = 0; y < G; y++) {
      var f = j[y] * (1 / 255),
        U = 1 - f,
        Z = y << 2;
      q[Z] = ~~(W * U + b * f);
      q[Z + 1] = ~~(k * U + c * f);
      q[Z + 2] = ~~(T * U + a * f);
    }
  };
  i9.se = function (j) {
    if (j == 6) j = 2;
    var q = "blocks canvas frosted tinylens brick burlap".split(" ")[j];
    if (i9.$w == null) i9.$w = [];
    if (i9.$w[j] == null) {
      var m, n;
      if (j == 2) {
        n = new hk(0, 0, 128, 128);
        var G = k0.i4("AdNs");
        G.Mnch.v = !0;
        G.Dstr.v.Dstr = "Gsn";
        G.Nose.v.val = 50;
        var m = B.j(n.C() * 4),
          W = m.slice(0);
        B.bs(W.buffer, 4286611584);
        k0.Gi("AdNs", { buffer: W, H: n }, G, 0, 0, { buffer: m, H: n });
      } else {
        var k = gh.$P.get("tex/" + q, !0)[0];
        n = k.Iu;
        m = new Uint8Array(k.data);
      }
      var T = B.j(n.C());
      B.Ih(m, T, 0);
      i9.$w[j] = [n, T];
    }
    return i9.$w[j];
  };
  i9.po = function (j, q, m, n, G) {
    if (G <= 1) {
      G = Math.round(G);
      i9.a5u(j, q, m, n, [1, 16, 4][G]);
      return;
    }
    var W = G * 0.42;
    if (j) {
      B.Zl.oY(j, n, W, 3);
    }
    if (q) {
      B.Zl.oY(q, n, W, 3);
    }
  };
  i9.a5u = function (j, q, m, n, G) {
    var W = B.Vl.__([1, 2, 1, 2, G, 2, 1, 2, 1]);
    if (j) {
      m.set(j);
      B.Vl.aKk(j, m, n.r, n.$, W);
      j.set(m);
    }
    if (q) {
      m.set(q);
      B.Vl.aKk(q, m, n.r, n.$, W);
      q.set(m);
    }
  };
  i9.$V = function (j) {
    if (j == null) return new ea(0, 0);
    var q = 0,
      m = j.GEfs ? j.GEfs.v : [{ v: j }];
    for (var y = 0; y < m.length; y++) {
      var n = m[y].v,
        W = 1e4;
      if (n.GELv && !n.GELv.v) continue;
      var G = n.GEfk.v.GEft;
      if (
        G == "GlwE" ||
        G == "Phtc" ||
        G == "BsRl" ||
        G == "PlsW" ||
        G == "Chrm" ||
        G == "Gls" ||
        G == "OcnR" ||
        G == "InkO"
      )
        W = 0;
      q = Math.max(q, W);
    }
    return new ea(q, q);
  };
  i9.atf = function (j) {
    var q = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      m = [0, 0.6, 0.7, 0.8, 1, 1.2, 1.4, 1.6, 1.8, 2, 2.2, 2.6, 3, 4, 5][j];
    for (var y = 0; y < 13; y++) {
      var n = y - 6;
      q[y] =
        (1 / (m * Math.sqrt(2 * Math.PI))) * Math.exp(-0.5 * (n / m) * (n / m));
    }
    return q;
  };
  i9.amh = function (j, q, m, n, G) {
    var W = i9.atf(G),
      k = 6,
      T = 13;
    for (var b = 0; b < n; b++)
      for (var c = 0; c < m; c++) {
        var a = (b * m + c) << 1,
          f = 0,
          U = 0;
        for (var y = 0; y < T; y++) {
          var Z = c + y - k,
            h = Z < 0 ? 0 : Z >= m ? m - 1 : Z,
            u = (b * m + h) * 2,
            i = W[y];
          f += i * j[u];
          U += i * j[u + 1];
        }
        q[a] = f;
        q[a + 1] = U;
      }
  };
  i9.aIg = function (j, q, m, n, G) {
    var W = i9.atf(G),
      k = 6,
      T = 13;
    for (var b = 0; b < n; b++)
      for (var c = 0; c < m; c++) {
        var a = (b * m + c) << 1,
          f = 0,
          U = 0;
        for (var y = 0; y < T; y++) {
          var Z = b + y - k,
            h = Z < 0 ? 0 : Z >= n ? n - 1 : Z,
            u = (h * m + c) * 2,
            i = W[y];
          f += i * j[u];
          U += i * j[u + 1];
        }
        q[a] = f;
        q[a + 1] = U;
      }
  };
  function kJ() {}
  kJ.hb = [2, 5, 5, 7, 4, 4];
  kJ.YH =
    "norm,diss,dark,mul ,idiv,lbrn,dkCl,lite,scrn,div ,lddg,lgCl,over,sLit,hLit,vLit,lLit,pLit,hMix,diff,smud,fsub,fdiv,hue ,sat ,colr,lum ".split(
      ","
    );
  kJ.Tg =
    "Nrml Dslv Drkn Mltp CBrn linearBurn darkerColor Lghn Scrn CDdg linearDodge lighterColor Ovrl SftL HrdL vividLight linearLight pinLight hardMix Dfrn Xclu blendSubtraction blendDivide H Strt Clr Lmns".split(
      " "
    );
  kJ.nb = [
    [15, 10, 0],
    [15, 10, 1],
    [15, 10, 2],
    [15, 10, 3],
    [15, 10, 4],
    [15, 10, 5],
    [15, 10, 6],
    [15, 10, 7],
    [15, 10, 8],
    [15, 10, 9],
    [15, 10, 10],
    [15, 10, 11],
    [15, 10, 12],
    [15, 10, 13],
    [15, 10, 14],
    [15, 10, 15],
    [15, 10, 16],
    [15, 10, 17],
    [15, 10, 18],
    [15, 10, 19],
    [15, 10, 20],
    [15, 10, 21],
    [15, 10, 22],
    [15, 10, 23],
    [15, 10, 24],
    [15, 10, 25],
    [15, 10, 26],
  ];
  kJ.Lt = [
    "normal",
    null,
    "darken",
    "multiply",
    "color-burn",
    null,
    null,
    "lighten",
    "screen",
    "color-dodge",
    null,
    null,
    "overlay",
    "soft-light",
    "hard-light",
    null,
    null,
    null,
    null,
    "difference",
    "exclusion",
    null,
    null,
    "hue",
    "saturation",
    "color",
    "luminosity",
  ];
  kJ.l7 = function (j) {
    if (j == "passThrough") return "pass";
    return kJ.YH[kJ.Tg.indexOf(j)];
  };
  kJ.il = function (j) {
    if (j == "pass") return "passThrough";
    return kJ.Tg[kJ.YH.indexOf(j)];
  };
  kJ.getName = function (j) {
    return kJ.nb[kJ.YH.indexOf(j)];
  };
  function R() {
    this.H = null;
    this.buffer = null;
    this.hz = "norm";
    this.yA = 255;
    this.Yx = !1;
    this.wp = !1;
    this.uZ = 0;
    this.bH = 0;
    this.wN = !0;
    this.EG = [];
    for (var y = 0; y < 10; y++) this.EG.push(0, 0, 255, 255);
    this.name = null;
    this.add = {};
    this.rl = null;
    this._P = null;
    this.Y = { list: [], J: [], yY: 0, volume: 1 };
    this.x7 = null;
    this.Zr = null;
    this.agb = 30;
    this.fX = null;
    this.a1n = null;
    this.azo = null;
    this.aoH = null;
    this.ma = 0;
    this.q_ = !1;
    this.k2 = null;
    this.a_ = new R.dF();
  }
  R.dF = function () {
    this.mf = !0;
    this.Zs = !0;
    this.yB = B.j(0);
    this.aAP = B.j(0);
    this.XU = null;
    this.RU = {};
    this.aiB = null;
    this.ah_ = null;
    this.Z6 = null;
    this.FJ = null;
    this.SF = null;
    this.pN = !1;
  };
  R.dF.prototype.apc = function () {
    this.mf = null;
    this.Zs = !1;
    this.XU = null;
    this.pN = fS.tx;
  };
  R.dF.prototype.a5J = function () {
    dS.a0J(this.RU);
    this.yB = B.j(0);
    this.aAP = B.j(0);
    if (this.FJ) this.FJ.delete();
    if (this.SF) this.SF.delete();
    this.FJ = null;
    this.SF = null;
  };
  R.prototype.gF = function (j) {
    if (j == null) j = this.H.P();
    if (this.a_.XU == null) this.a_.XU = j;
    else this.a_.XU = this.a_.XU.vd(j);
  };
  R.prototype.D1 = function () {
    return this.add.lsct == hQ.WR || this.add.lsct == hQ.z$;
  };
  R.prototype.ql = function () {
    var j = this.add;
    return j.SoCo != null || j.GdFl != null || j.PtFl != null || j.vstl != null;
  };
  R.prototype.aAZ = function () {
    var j = this.add.lmfx;
    if (j == null) return;
    var q = ["GrFl", "patternFill"];
    for (var y = 0; y < q.length; y++) {
      var m = eu.C$[eu.order.indexOf(q[y])],
        n = j[m].v;
      if (n.length == 0) continue;
      for (var G = 0; G < n.length; G++) {
        var W = n[G].v;
        if (W.enab.v && (W.Algn == null || !W.Algn.v)) this.a_.Zs = !0;
      }
    }
  };
  R.prototype.abP = function () {
    var j = this.x7,
      q = this.a_.mf;
    if (this.ql()) j = this.ex();
    if (!fS.tx) return j.XY();
    if (this.a_.SF == null || q || fS.tx != this.a_.pN) {
      var m = j.Fj(),
        n = j.XY(),
        G = this.a_.SF,
        W = B.oM(n),
        k = null;
      if (q != !0 && q != null) {
        k = q.P();
        k.offset(-m.x, -m.y);
      }
      if (G == null || G.r != m.r || G.$ != m.$ || G.depth != W) {
        G = this.a_.SF = new fS.Ag(m.r, m.$, W);
        k = null;
      }
      G.set(n, k);
    }
    return this.a_.SF;
  };
  R.prototype.ahn = function (j) {
    var q = this.H,
      m = this.buffer;
    if (!fS.tx) {
      var n = this.zj(j, m, q);
      if (n) {
        m = n.sE;
        q = n.H;
      }
      return m;
    }
    if (this.a_.XU != null || fS.tx != this.a_.pN) {
      var n = this.zj(j, m, q);
      if (n) {
        m = n.sE;
        q = n.H;
      }
      var G = q;
      if (
        fS.tx != this.a_.pN ||
        this.a_.FJ == null ||
        this.a_.FJ.r != G.r ||
        this.a_.FJ.$ != G.$ ||
        this.a_.FJ.depth != j.depth
      ) {
        if (this.a_.FJ) this.a_.FJ.delete();
        this.a_.FJ = new fS.Rx(G.r, G.$, j.depth);
        this.a_.FJ.set(m);
      } else {
        var W = this.a_.XU.P();
        W.offset(-q.x, -q.y);
        this.a_.FJ.set(m, W);
      }
    }
    return this.a_.FJ;
  };
  R.prototype.Uk = function () {
    var j = this.x7;
    if (this.ql()) j = this.ex();
    return j != null && j.isEnabled && (!j.H.jG() || j.xH() != 255);
  };
  R.prototype.zj = function (j, q, m) {
    if (this.r3()) {
      var n = this.xE(j);
      if (n.x7 && n.x7.isEnabled && (!n.x7.H.jG() || n.x7.color == 0)) {
        var G = this.add.SoLd.filterFX.v;
        n.x7.CA = G.filterMaskDensity ? G.filterMaskDensity.v : 255;
        n.x7.LH = G.filterMaskFeather ? G.filterMaskFeather.v : 0;
        var W = n.buffer,
          k = n.H;
        if (k.C() < m.C()) {
          k = m;
          W = B.j(k.C() * 4, j.depth);
          B.M4(n.buffer, n.H, W, k);
        }
        var T = n.x7.fy(m);
        B.BR(T);
        q = q.slice(0);
        B.G.xf(W, k, q, m, T, m, 0, m, 1);
        return { sE: q, H: m };
      }
    }
  };
  R.prototype.aiD = function () {
    var j = { Gp: !1, kl: !1, Xx: 0, auI: 0 };
    if (this.add.vmsk && this.add.vmsk.isEnabled) j.kl = !0;
    if (this.ex() && this.ex().isEnabled) j.Gp = !0;
    if (j.Gp && j.kl) {
      j.Xx = this.ex().H.x - this.add.vmsk.ex().H.x;
      j.auI = this.ex().H.y - this.add.vmsk.ex().H.y;
    }
    return j;
  };
  R.prototype.D5 = function (j, q) {
    if (ei != 0) return;
    if (q && this.ex().LH != 0) {
      q = q.P();
      var m = Math.round(this.ex().LH * 2.4);
      q.Lh(m, m);
    }
    var n = !1;
    if (this.add.lsct == hQ.$a) return;
    var G = this,
      W = this.ex() != null && this.ex().xo,
      k = this.add.vmsk != null && this.add.vmsk.xo,
      T = this.aiD(),
      b = JSON.stringify(T) != this.a_.aiB || (T.Gp && W) || (T.kl && k);
    if (b) {
      if (T.kl) {
        var c = this.add.vmsk.ex(
          null,
          j.depth,
          this.add.vstk && !this.add.vstk.fillEnabled.v
        );
        if (T.Gp) {
          this.x7 = this.ex().J5(c);
          this.a_.ah_ = new ea(
            this.x7.H.x - this.ex().H.x,
            this.x7.H.y - this.ex().H.y
          );
        } else this.x7 = c;
      }
      if (this.x7) n = !0;
      if (this.x7)
        this.a_.Z6 = new ea(this.H.x - this.x7.H.x, this.H.y - this.x7.H.y);
      if (T.Gp) this.ex().xo = !1;
      if (T.kl) this.add.vmsk.xo = !1;
      this.gF(q);
    } else {
      if (T.Gp && T.kl) {
        this.x7.H.x = this.ex().H.x + this.a_.ah_.x;
        this.x7.H.y = this.ex().H.y + this.a_.ah_.y;
      }
    }
    if (G.ql()) {
      this.tK(j);
    }
    if (G.bm()) {
      var a;
      if (this.x7) a = new ea(this.H.x - this.x7.H.x, this.H.y - this.x7.H.y);
      if (
        this.x7 &&
        this.x7.isEnabled &&
        (this.a_.Z6 == null || !a.Lg(this.a_.Z6))
      ) {
        this.a_.Z6 = a;
        this.gF(q);
        n = !0;
      }
    }
    if (eV.get(G.add) != null) n = !0;
    if (n) {
      var f = this.a_.mf;
      if (q && f && f != !0) f = f.vd(q);
      else f = q ? q : !0;
      this.a_.mf = f;
    }
    this.a_.aiB = JSON.stringify(T);
  };
  R.prototype.tK = function (j) {
    if (ei != 0) return;
    var q = this,
      m = q.add.vstk,
      n = new hk(0, 0, j.r, j.$),
      G,
      W = q.add.vmsk ? this.add.vmsk.ex(null, j.depth) : null,
      b = !0,
      f;
    if (W && W.isEnabled && W.xH() == 0) G = W.Fj().P();
    else G = n;
    var k = q.ex();
    if (k && k.isEnabled && k.xH() == 0) G = G.TM(q.x7.Fj());
    var T = W && m;
    if (m && (!m.strokeEnabled.v || m.strokeStyleLineWidth.v.val == 0)) T = !1;
    if (m && !m.fillEnabled.v && T) b = !1;
    var c = B.j(G.C() * 4, j.depth);
    if (b) {
      if (q.add.SoCo) dS.ul(c, q.add.SoCo.Clr.v);
      if (q.add.GdFl) {
        var a = W && W.color == 0 ? B.z.zZ(q.add.vmsk.D, null, !0) : null;
        dS.Mo(q.add.GdFl, c, G, j, null, a);
      }
      if (q.add.PtFl) dS.oO(q.add.PtFl, c, G, j.add.Patt, q.add.fxrp);
    }
    if (T)
      f = eu.rS.Jr.indexOf(
        m.strokeStyleLineAlignment.v.strokeStyleLineAlignment
      );
    if (W) {
      var U = W.CA;
      if (T) W.CA = 255;
      var Z = B.j(G.C(), j.depth);
      if (W.xH() != 0) Z.fill((B.TN(j.depth) * W.xH()) / 255);
      if (W && W.isEnabled) {
        var h = W.Fj(),
          u = W.XY();
        if (h.Lg(G)) B.wV(u, Z);
        else B.sN(u, h, Z, G);
      }
      if (T && f == 2) {
      } else {
        if (!b) {
        } else if (q.add.SoCo) {
          B.ln(Z, c, 3);
        } else B.zn(Z, G, c, G);
      }
      if (T) W.CA = U;
    }
    q.buffer = c;
    q.H = G;
    if (T) {
      var i = m.strokeStyleContent.v,
        x = eu.rS.HF.indexOf(i.classID),
        X = this.add.vmsk.ex(m, j.depth);
      if (f != 0 && !q.H.Lg(n)) q.extend(q.H.vd(X.Fj()));
      var U = X.CA;
      X.CA = 255;
      var $ = X.fy(q.H);
      X.CA = U;
      if (X.color == 255) B.BR($);
      var H = B.j(q.H.C() * 4, j.depth);
      if (x == 0) dS.ul(H, i.Clr.v);
      if (x == 1) dS.Mo(i, H, q.H, j, null, W.color == 0 ? W.H : null);
      if (x == 2) dS.oO(i, H, q.H, j.add.Patt, q.add.fxrp);
      var C = m.strokeStyleOpacity.v.val / 100;
      if (C != 1) B.q8($, C);
      if (X.color == 255) f = 2 - f;
      if (f < 2) {
        B.G.xf(H, q.H, q.buffer, q.H, $, q.H, 255, q.H, 1, !1);
        if (f == 0) B.w6(Z, q.buffer);
      }
      if (f == 2) {
        B.w6($, H);
        B.BR(Z);
        B.G.xf(H, q.H, q.buffer, q.H, Z, G, 255, q.H, 1, !1);
        B.BR(Z);
      }
      if (X.CA != 255) {
        var l = H.slice(0);
        B.EA(l, 1);
        B.G.Jg("norm", l, q.H, q.buffer, q.H, q.H, 1 - X.CA / 255);
      }
      U = W.CA;
      W.CA = 255;
      this.aAP = W.fy(q.H);
      W.CA = U;
    }
    this.gF();
  };
  R.prototype.yZ = function (j, q, m, n, G) {
    var W = this,
      k = W.add.SoLd.Idnt.v,
      T = W.add.SoLd,
      b = L.Dq.Kt(T.nonAffineTransform),
      c = B.b.RD(b),
      a = j.Kv(k, T.Crop ? T.Crop.v : null, [c.r, c.$], T.Impr.v.classID, m),
      K = null;
    if (a == null) return;
    var f = a.Zj;
    if (!a.a4i) {
      a.a4i = !0;
      B.adh(f, j.depth);
      var U = j.$T();
      if (U || a.Pt) {
        if (U && a.Pt && B.Lg(U[0], a.Pt)) {
        } else {
          var Z = 17;
          if (a.Pt) {
            var h = ICC.R(a.Pt.buffer),
              u = ICC.U.sampleLUT(h, Z);
            for (var y = 0; y < f.length; y += 2) {
              var i = f[y];
              ICC.U.applyLUT(u, Z, i, i);
            }
          }
          if (U) {
            var h = U[1],
              u = ICC.U.sampleLUT(h, Z, !0);
            for (var y = 0; y < f.length; y += 2) {
              var i = f[y];
              ICC.U.applyLUT(u, Z, i, i);
            }
          }
        }
      }
    }
    if (G && B.kp(f[0], 0)) return;
    if (T.Sz) {
      T.Sz.v.Wdth.v = a.fU.r;
      T.Sz.v.Hght.v = a.fU.$;
    }
    if (ei != 0) return;
    var x = a.zv == null ? T.Rslt.v.val : a.zv,
      X = T.quiltWarp.v;
    if (B.rc.TK(X)) X = null;
    var $ = B.B.Ht(b, a.fU);
    if (X) {
      var c = B.b.RD(B.rc._i(X)[3]),
        H = c.x,
        C = c.y,
        l = 1 / c.r,
        v = 1 / c.$;
      $ = B.B.Ht(b);
      $ = B.B.J5($, [l, 0, -H * l, 0, v, -C * v, 0, 0]);
    }
    if (!q && !W.r3() && X == null) {
      var S = j.U.indexOf(W),
        o = R.$d(W);
      for (var y = 0; y < S; y++) {
        var V = j.U[y];
        if (V.add.SoLd && !V.r3() && R.$d(V)[0] == o[0]) {
          var P = R.$d(V);
          K = { buffer: V.buffer.slice(0), H: V.H.P() };
          K.H.offset(Math.round(o[1] - P[1]), Math.round(o[2] - P[2]));
          break;
        }
      }
    }
    var z = window.locStor.getItem("__itp");
    z = z == null ? 1 : z;
    if (K == null) K = L.Dq.hG(f, q ? 0 : z, $, X, null, null, q);
    if (K == null) {
      W.buffer = B.j(0, j.depth);
      W.H = new hk();
    } else if (W.r3()) {
      var E = W.xE(j);
      if (n) {
        E.buffer = B.sL(E.buffer, j.depth);
        E.buffer.fill(0);
        B.M4(K.buffer, K.H, E.buffer, E.H);
      } else {
        E.buffer = K.buffer;
        E.H = K.H.P();
      }
      this.dm(j, q);
    } else {
      W.buffer = K.buffer;
      W.H = K.H;
    }
    W.D5(j);
    W.gF();
    j.gF();
  };
  R.$d = function (j) {
    var q = j.add.SoLd,
      m = q.Idnt.v,
      n = L.Dq.Kt(q.nonAffineTransform),
      G = B.B.Ht(n, new hk(0, 0, 1e3, 1e3)),
      W = q.quiltWarp.v;
    if (B.rc.TK(W)) W = null;
    return [
      [m, G[0], G[1], G[3], G[4], G[6], G[7], W == null].join(":"),
      G[2],
      G[5],
    ];
  };
  R.prototype.dm = function (j, q) {
    if (q == null) q = !1;
    var m = this.xE(j),
      n = this.add.SoLd.filterFX.v,
      G = k0.ak9(n),
      W = new hk(0, 0, j.r, j.$),
      k = m.H.vd(W),
      T = m.H.P();
    T.Lh(G.x, G.y);
    var b = { buffer: null, H: k.TM(T) };
    b.buffer = B.j(b.H.C() * 4, j.depth);
    B.M4(m.buffer, m.H, b.buffer, b.H);
    if (n.enab.v && q == !1) {
      var c = n.filterFXList.v;
      for (var y = 0; y < c.length; y++) {
        var a = c[y].v;
        if (a.enab.v == !1) continue;
        var f = a.blendOptions.v,
          U = kJ.l7(f.Md.v.BlnM),
          Z = f.Opct.v.val / 100,
          h = B.MV.xH(a.FrgC.v),
          u = B.MV.xH(a.BckC.v),
          i = k0.mK(a),
          x = { buffer: B.j(b.buffer.length, j.depth), H: b.H.P() },
          X = a.Fltr ? a.Fltr.v : null;
        if (eV.GF[i] != null) {
          var $ = eV.GF[i],
            H = eV.R7($, X);
          if (H) eV.Gi(H, b.buffer, x.buffer, b.H);
        } else
          k0.Gi(i, b, X, h, u, x, [
            j.add.lnk2 ? j.add.lnk2 : [],
            this.ex(),
            j._E,
          ]);
        if (U == "norm" && Z == 1) b = x;
        else if (U == "norm") {
          B.G.xf(x.buffer, x.H, b.buffer, b.H, null, null, null, b.H, Z);
        } else {
          B.G.Jg(U, x.buffer, x.H, b.buffer, b.H, b.H, Z);
        }
      }
    }
    this.H = b.H;
    this.buffer = b.buffer;
    this.yy();
    this.gF();
    j.gF();
  };
  R.prototype.YC = function (j, q, m) {
    this.k2 = this.abH(j, q, m);
  };
  R.prototype.mr = function (j, q) {
    var m = this.abH(j, q, !0);
    if (m == null) return null;
    var n = { NM: m.ma, py: m.DL, H: m.GG };
    if (n.NM == 1 || n.NM == 3) {
      var G = n.H,
        W = B.j(G.r * G.$ * 4, B.oM(j.h.N));
      B.ln(n.py, W, 0);
      B.ln(n.py, W, 1);
      B.ln(n.py, W, 2);
      B.awE(j.h.N, j.h.H, W, G);
      n.py = W;
    }
    return n;
  };
  R.prototype.abH = function (j, q, m) {
    var n, G, W, k, T, b, c;
    if (this.ma <= 0) {
      var a = B.j(this.H.C(), j.depth);
      B.Ih(this.buffer, a, 3);
      n = B.hV.ZQ(q, { N: a, H: this.H }, 3);
      if (n == null) return null;
      var f = B.El(n.N, n.H);
      k = n.H.P();
      T = this.H.P();
      G = B.j(k.C() * 4, j.depth);
      B.M4(this.buffer, T, G, k);
      B.ln(n.N, G, 3);
      W = this.buffer.slice(0);
      if (!m) {
        var U = q.N.slice(0);
        B.BR(U);
        B.zn(U, q.H, W, T);
      }
      b = this.buffer.slice(0);
      c = this.H.P();
    }
    if (this.ma == 1 || this.ma == 3) {
      var Z = this.ma == 1 ? this.ex() : this.xE(j).x7;
      k = q.H.P();
      T = Z.H.P();
      G = Z.pC(k);
      var W = Z.N.slice(0);
      if (!m) {
        var h = B.j(k.C(), j.depth);
        if (Z.color == 255) h.fill(B.TN(j.depth));
        B.G.SH(h, k, W, T, q.N, k, 1);
      }
      b = Z.N.slice(0);
      c = Z.H.P();
    }
    return { ma: this.ma, DL: G, GG: k, gX: W, M5: T, aQ: b, a4N: c };
  };
  R.prototype.lf = function (j, q) {
    var m = this.k2;
    if (m.ma == 0) {
      this.H = m.a4N;
      this.buffer = m.aQ;
      this.gF();
    }
    if (m.ma == 1 || m.ma == 3) {
      var n = m.ma == 1 ? this.ex() : this.xE(j).x7;
      n.N = m.aQ;
      n.H = m.a4N;
      if (this.ma == 1) {
        n.xo = !0;
        this.D5(j);
      }
      if (this.ma == 3) this.gF();
    }
    this.k2 = q;
  };
  R.prototype.i6 = function (j, q) {
    var m = j.depth;
    if (this.ma <= 0 && q.H.Lg(this.H)) {
      var n = B.j(this.H.C(), m);
      B.Ih(this.buffer, n, 3);
      if (B.Lg(j.h.N, n)) {
        var G = this.H,
          W = this.buffer;
        this.k2 = {
          ma: this.ma,
          DL: W.slice(0),
          GG: G.P(),
          gX: B.j(0),
          M5: new hk(),
          aQ: B.j(0),
          a4N: new hk(),
        };
        return !0;
      }
    }
    var k = this.k2;
    if (k == null) return !1;
    if (k.ma != this.ma) return !1;
    if (!q.H.Lg(k.GG)) return !1;
    var T = k.M5.vd(k.GG);
    if (k.ma <= 0) {
      if (!T.Lg(this.H)) return !1;
      var b = B.j(k.DL.length >> 2, m);
      B.Ih(k.DL, b, 3);
      if (!B.Lg(q.N, b)) return !1;
      var c = B.j(T.C() * 4, m);
      B.M4(k.gX, k.M5, c, T);
      B.G.Jg("norm", k.DL, k.GG, c, T, T, 1);
      return B.Lg(c, this.buffer);
    }
    if (k.ma == 1 || k.ma == 3) {
      var a = k.ma == 1 ? this.ex() : this.xE(j).x7;
      if (!T.Lg(a.H)) return !1;
      var f = B.j(T.C(), m);
      f.fill((a.color * B.TN(m)) / 255);
      B.sN(k.gX, k.M5, f, T);
      B.G.SH(k.DL, k.GG, f, T, q.N, T, 1);
      return B.Lg(f, a.N);
    }
  };
  R.prototype.zB = function (j, q, m, n) {
    var G = this.k2;
    G.GG.offset(q, m);
    var W = G.M5.vd(G.GG);
    if (G.ma <= 0) {
      var k = B.j(W.C() * 4, j.depth);
      B.M4(G.gX, G.M5, k, W);
      B.G.Jg("norm", G.DL, G.GG, k, W, W, 1);
      this.buffer = k;
      this.H = W;
      this.gF();
    } else {
      var T = this.ma == 1 ? this.ex() : this.xE(j).x7,
        b = B.j(W.C());
      b.fill(T.color);
      B.sN(G.gX, G.M5, b, W);
      B.G.SH(G.DL, G.GG, b, W, n.N, W, 1);
      T.N = b;
      T.H = W.P();
      if (this.ma == 1) {
        T.xo = !0;
        this.D5(j);
      }
      if (this.ma == 3) this.gF();
    }
  };
  R.prototype.aph = function (j) {
    var q = [-1, 0, 1, 2];
    if (j) q.push(3);
    if (this.x7) q.push(-2);
    if (this.Zr) q.push(-3);
    return q;
  };
  R.prototype.getName = function () {
    return this.add.luni ? this.add.luni : this.name;
  };
  R.prototype.tV = function (aF) {
    this.add.luni = this.name = aF;
  };
  R.prototype.Yc = function (j) {
    var q = this.add.lnsr,
      m = this.add.TySh;
    if (q == "rend" && m) {
      var n = al.WT(m.s3);
      this.tV(
        n
          .slice(0, n.length - 1)
          .replace(/(?:\r\n|\r|\n)/g, " ")
          .slice(0, 32)
      );
    }
  };
  R.prototype.Iw = function () {
    return (this.uZ & (1 << 1)) == 0;
  };
  R.prototype.bm = function () {
    return (this.uZ & (1 << 4)) == 0;
  };
  R.prototype.mG = function () {
    return (this.uZ & (1 << 5)) != 0;
  };
  R.prototype.afS = function () {
    var j = this;
    if (j.add.lnsr != "bgnd") {
      j.add.lnsr = "bgnd";
      j.tV("Background");
      j.add.lspf = 1 << 2;
    }
  };
  R.prototype.asr = function () {
    var j = this;
    if (j.add.lnsr == "bgnd") {
      delete j.add.lnsr;
      j.tV("Layer 0");
      j.add.lspf = 0;
    }
  };
  R.prototype.op = function (j) {
    var q = this.add.lspf;
    return q == null ? !1 : ((q >> j) & 1) != 0;
  };
  R.prototype.xg = function (j) {
    if (j && !this.Iw()) this.uZ -= 2;
    if (!j && this.Iw()) this.uZ += 2;
  };
  R.prototype.xN = function () {
    var j = this.add.lmfx;
    if (j == null) return !1;
    for (var q in j) {
      if (q == "masterFXSwitch") continue;
      if (q == "Scl") continue;
      if (q == "classID") continue;
      if (j[q].v.length > 0) return !0;
    }
    return !1;
  };
  R.prototype.r3 = function () {
    return this.add.SoLd != null && this.add.SoLd.filterFX != null;
  };
  R.prototype.EC = function () {
    var j = this.add.lmfx;
    if (j == null) return !1;
    if (!j.masterFXSwitch.v) return !1;
    for (var q in j) {
      if (q == "masterFXSwitch") continue;
      if (q == "Scl") continue;
      if (q == "classID") continue;
      var m = j[q].v;
      for (var y = 0; y < m.length; y++) if (m[y].v.enab.v) return !0;
    }
    return !1;
  };
  R.prototype.b8 = function () {
    var j = this,
      q = j.add.SoLd,
      m = j.add.TySh,
      n = j.add.vmsk,
      G = [];
    if (q) G = L.Dq.Kt(q.nonAffineTransform);
    if (m && this.a_.c7) {
      G = B.b._c(j.a_.c7).L;
      B.b.u(G, m.u, G);
    }
    if (n) G = B.b._c(n.a0f()).L;
    return G;
  };
  R.prototype.Fj = function (j, q, m, n) {
    if (ei == 1) return B.b.RD(this.b8());
    var G = new hk(),
      W = this.O8(j, m, n);
    if (W.indexOf(0) != -1) G = G.vd(this.H);
    if (W.indexOf(1) != -1) {
      var k = this.ex(),
        T = k.Fj();
      G = m && k.xH() == 0 ? (G.jG() ? T : G.TM(T)) : G.vd(T);
    }
    if (W.indexOf(2) != -1) {
      var b = this.add.vmsk,
        c = this.add.vstk,
        a;
      if (q) {
        if (b.U9.length > 1) {
          var f = B.z.WA(b.D, null, b.U9);
          a = B.b.RD(f);
          if (a.jG()) a = null;
        }
        if (a == null) a = B.z.zZ(b.D, b.J.length != 0 ? b.J : null);
      } else a = B.z.zZ(b.D);
      if (!n && c && c.strokeEnabled.v) {
        var U = c.strokeStyleLineAlignment.v.strokeStyleLineAlignment,
          Z = c.strokeStyleLineJoinType.v.strokeStyleLineJoinType;
        if (U != "strokeStyleAlignInside") {
          var h = c.strokeStyleLineWidth.v.val;
          if (Z == "strokeStyleMiterJoin") a = new hk(0, 0, j.r, j.$);
          else a.Lh(h, h);
        }
      }
      if (!n && b.LH != 0) a.Lh(b.LH * 2.2, b.LH * 2.2);
      G = G.vd(a);
    }
    if (W.indexOf(3) != -1) G = G.vd(this.xE(j).x7.Fj());
    if (W.length == 0 && this.ql())
      G = n ? new hk(0, 0, 0, 0) : new hk(0, 0, j.r, j.$);
    return G;
  };
  R.prototype.U3 = function () {
    var j = this.add.artb,
      q = j.artboardBackgroundType.v,
      m = 0;
    if (q == 1) m = 4294967295;
    else if (q == 2) m = 4278190080;
    else if (q == 3) m = 0;
    else if (q == 4) {
      m = j.Clr.v;
      m = (255 << 24) | (m.Bl.v << 16) | (m.Grn.v << 8) | m.Rd.v;
    } else throw q;
    return m;
  };
  R.prototype.Li = function () {
    var j = this.add.artb.artboardRect.v,
      q = j.Btom.v,
      m = j.Left.v,
      n = j.Rght.v,
      top = j.Top.v;
    return new hk(m, top, n - m, q - top);
  };
  R.prototype.KP = function (j) {
    var q = R.jo(j);
    if (this.add.artb == null)
      this.add.artb = {
        classID: "artboard",
        artboardRect: { t: "Objc", v: null },
        artboardBackgroundType: { t: "long", v: 1 },
      };
    this.add.artb.artboardRect.v = q;
  };
  R.jo = function (j) {
    var q = {
      classID: "classFloatRect",
      Top: { t: "doub", v: 0 },
      Left: { t: "doub", v: 0 },
      Btom: { t: "doub", v: 0 },
      Rght: { t: "doub", v: 0 },
    };
    q.Btom.v = j.y + j.$;
    q.Left.v = j.x;
    q.Rght.v = j.x + j.r;
    q.Top.v = j.y;
    return q;
  };
  R.prototype.O8 = function (j, q, m) {
    var n = [],
      G = this;
    if (!q && G.q_ && m) {
      n.push(2);
    } else if (G.ma <= 0 || q) {
      if (G.bm()) {
        if (ei == 1 && G.add.TySh) n.push(0);
        else if (ei == 1 && G.add.SoLd) n.push(0);
        else if (!this.H.jG() || G.add.SoLd || G.add.TySh) n.push(0);
      }
      if (G.ex() && !G.ex().H.jG()) if (G.ex().jS || q) n.push(1);
      if (G.add.vmsk) if (G.add.vmsk.jS || q) n.push(2);
      if (G.r3() && G.xE(j).x7 && !G.xE(j).x7.H.jG()) n.push(3);
    } else if (G.ma == 1) {
      n.push(1);
      if (G.ex().jS && !G.ex().H.jG()) {
        if (G.bm()) if (!this.H.jG()) n.push(0);
        if (G.add.vmsk) if (G.add.vmsk.jS) n.push(2);
      }
    } else if (G.ma == 3 && !G.xE(j).x7.H.jG()) n.push(3);
    if (G.add.artb && n.indexOf(0) == -1) n.push(0);
    n.sort();
    return n;
  };
  R.prototype.ex = function () {
    var j = this;
    return j.Zr ? j.Zr : j.add.vmsk && j.add.vmsk.isEnabled ? null : j.x7;
  };
  R.prototype.xE = function (j) {
    if (this.add.SoLd == null) return null;
    var q = this.add.SoLd.placed.v,
      m = j.add.FEid;
    if (m == null) return null;
    for (var y = 0; y < m.length; y++) if (m[y].id == q) return m[y];
    return null;
  };
  R.prototype.extend = function (j) {
    B.a0Y(this, j);
  };
  R.prototype.aIM = function (j, q, m) {
    var n = j.P();
    if (this.EC()) {
      var G = this.add.lmfx,
        W = q.root.Zg(q.U.indexOf(this)),
        k = G.gradientFillMulti.v,
        T = !1;
      for (var y = 0; y < k.length; y++)
        if (k[y].v.enab.v && k[y].v.Algn.v) T = !0;
      if (T) n = n.vd(W.Fj(q, !1));
      var b = dS.a4y(this.add.lmfx, q, m);
      n.offset(b.x, b.y);
      n.r += b.r;
      n.$ += b.$;
    }
    return n;
  };
  R.prototype.yy = function () {
    if (this.bm()) B.TE(this);
    var j = this.ex();
    if (j) j.yy();
  };
  R.prototype.P = function () {
    var j = new R();
    j.H = this.H.P();
    j.buffer = this.buffer.slice(0);
    j.hz = this.hz;
    j.yA = this.yA;
    j.Yx = this.Yx;
    j.uZ = this.uZ;
    j.name = this.name;
    j.EG = this.EG.slice(0);
    j.Y = B.S(this.Y);
    if (this.x7) j.x7 = this.x7.P();
    if (this.Zr) j.Zr = this.Zr.P();
    for (var q in this.add) j.add[q] = gM.P(q, this.add[q]);
    return j;
  };
  R.prototype.pt = function (j) {
    var q = this;
    if (q.add.TySh) delete q.add.TySh;
    if (q.add.SoLd) {
      var m = this.zj(j, this.buffer, this.H);
      if (m) {
        this.buffer = m.sE;
        this.H = m.H;
        this.gF();
      }
      delete q.add.SoLd;
    }
    if (q.add.SoCo || q.add.GdFl || q.add.PtFl) {
      if (q.add.vogk) delete q.add.vogk;
      if (q.add.SoCo) delete q.add.SoCo;
      if (q.add.GdFl) delete q.add.GdFl;
      if (q.add.PtFl) delete q.add.PtFl;
      if (q.add.vmsk) {
        console.log(q.Zr, q.x7);
        delete q.add.vmsk;
        if (q.Zr == null && q.x7) delete q.x7;
        else if (q.Zr != null && q.x7 != null) {
          q.x7 = q.Zr;
          delete q.Zr;
        }
      }
    }
    if (!q.D1() && eV.get(q.add) == null && !this.bm()) this.uZ -= 16;
  };
  R.prototype.K$ = function (j) {
    var q = 255,
      m = 0;
    if (j == 2) {
      var n = this.add.SoLd.filterFX.v;
      if (n.filterMaskDensity) q = n.filterMaskDensity.v;
      if (n.filterMaskFeather) m = n.filterMaskFeather.v;
    } else {
      var G = j == 0 ? this.ex() : this.add.vmsk;
      q = G.CA;
      m = G.LH;
    }
    return { jA: j, fe: q, qk: m };
  };
  R.prototype.a9y = function (j) {
    if (j.jA == 2) {
      var q = this.add.SoLd.filterFX.v;
      if (j.fe == 255) delete q.filterMaskDensity;
      else q.filterMaskDensity = { t: "long", v: j.fe };
      if (j.qk == 0) delete q.filterMaskFeather;
      else q.filterMaskFeather = { t: "doub", v: j.qk };
      this.gF();
    } else {
      var m = j.jA == 0 ? this.ex() : this.add.vmsk;
      m.CA = j.fe;
      m.LH = j.qk;
      m.xo = !0;
    }
  };
  R.prototype.Pp = function () {
    var j = this,
      q = j.add.vmsk;
    if (q == null) return;
    j.add.vogk = B.ih.acA(q.D);
  };
  R.Pp = function (j) {
    var q = [],
      m = B.z.in(j);
    for (var n = 0; n < m; n++) q.push(B.ih.B0());
    return q;
  };
  var hQ = { yi: 0, WR: 1, z$: 2, $a: 3 };
  R.T0 = function (j) {
    this.name = "Mask";
    this.Ea = !1;
    this.Fx = { o: 255, i: 0, X: 0 };
    this.YB = 50;
    this.Sg = 0;
    this.color = 255;
    this.jS = !0;
    this.isEnabled = !0;
    this.HU = !1;
    this.CA = 255;
    this.LH = 0;
    this.H = new hk();
    this.N = B.j(0, j);
    this.Ts = null;
    this.a2A = null;
    this.xo = !0;
  };
  R.T0.prototype.J5 = function (j) {
    if (!this.isEnabled) return j;
    var q = new R.T0();
    q.color = Math.round((this.xH() * j.xH()) / 255);
    if (this.xH() == 0 && j.xH() == 0) q.H = this.Fj().TM(j.Fj());
    else if (j.xH() == 0) q.H = j.Fj().P();
    else if (this.xH() == 0) q.H = this.Fj().P();
    else q.H = this.Fj().vd(j.Fj());
    q.N = this.fy(q.H);
    q.CA = 255;
    q.LH = 0;
    var m = j.fy(q.H);
    B.a11(m, q.H, q.N, q.H);
    return q;
  };
  R.T0.prototype.Fj = function () {
    if (this.LH == 0) return this.H;
    var j = Math.ceil(this.LH * 2.2),
      q = this.H.P();
    if (q.y == 0) {
      if (q.x == 0) q.r += j;
      else q.Lh(j, 0);
      q.$ += j;
    } else q.Lh(j, j);
    return q;
  };
  R.T0.prototype.XY = function () {
    if (this.LH == 0 && this.CA == 255) return this.N;
    if (this.LH == 0) {
      var j = this.N.slice(0);
      B.BR(j);
      B.q8(j, this.CA / 255);
      B.BR(j);
      return j;
    }
    var q = this.Fj(),
      j = this.pC(q);
    B.Zl.oY(j, q, this.LH);
    if (this.CA != 255) {
      B.BR(j);
      B.q8(j, this.CA / 255);
      B.BR(j);
    }
    return j;
  };
  R.T0.prototype.xH = function () {
    return Math.round(255 - (255 - this.color) * (this.CA / 255));
  };
  R.T0.prototype.extend = function (j) {
    B.extend(this, j, this.color / 255);
  };
  R.T0.prototype.yy = function () {
    if (this.color == 255) B.BR(this.N);
    B.yy(this);
    if (this.color == 255) B.BR(this.N);
  };
  R.T0.prototype.P = function () {
    var j = new R.T0();
    j.name = this.name;
    j.Ea = this.Ea;
    j.Fx = this.Fx;
    j.YB = this.YB;
    j.Sg = this.Sg;
    j.color = this.color;
    j.jS = this.jS;
    j.isEnabled = this.isEnabled;
    j.HU = this.HU;
    j.CA = this.CA;
    j.LH = this.LH;
    j.H = this.H.P();
    j.N = this.N.slice(0);
    return j;
  };
  R.T0.prototype.pC = function (j, q) {
    var m = B.oM(this.N);
    if (q == null) q = B.j(j.C(), m);
    q.fill((this.color * B.TN(m)) / 255);
    B.sN(this.N, this.H, q, j);
    return q;
  };
  R.T0.prototype.fy = function (j, q) {
    var m = this.Fj(),
      n = this.XY(),
      G = B.oM(n);
    if (q == null) q = B.j(j.C(), G);
    q.fill((this.xH() * B.TN(G)) / 255);
    B.sN(n, m, q, j);
    return q;
  };
  R.tm = function () {
    this.jS = !0;
    this.isEnabled = !0;
    this.CA = 255;
    this.LH = 0;
    this.kx = 0;
    this.uc = 1;
    this.D = [{ e: 6 }, { e: 8, all: 0 }];
    this.PG = [-3, -3];
    this.Rl = !1;
    this.Zr = null;
    this.xo = !0;
    this.J = [];
    this.U9 = [];
  };
  R.tm.prototype.a0f = function (j) {
    var q = R.tm.Fo(this.D),
      m = new k$();
    if (j) m.rotate(-this.kx);
    B.z.La(q, m);
    return B.z.zZ(q);
  };
  R.tm.prototype.HG = function () {
    var j = this.a0f(!0),
      q = B.b._c(j).L,
      m = new k$();
    m.rotate(this.kx);
    B.b.u(q, m, q);
    return q;
  };
  R.tm.prototype.offset = function (j, q) {
    this.Zr = this.ex();
    B.z.La(this.D, new k$(1, 0, 0, 1, j, q));
    this.Zr.H.offset(j, q);
  };
  R.tm.prototype.ex = function (j, q, m) {
    if (!this.xo && this.Zr && j == null) {
      this.Zr.isEnabled = this.isEnabled;
      return this.Zr;
    }
    var n = this.D,
      G = B.z.zZ(n),
      W = "strokeStyleLineAlignment",
      k = "strokeStyleLineJoinType";
    if (G.C() > 2e4 * 2e4) G = new hk(0, 0, 100, 100);
    if (j && j[W].v[W] != "strokeStyleAlignInside") {
      var T = 1;
      if (j[k].v[k] == "strokeStyleMiterJoin") {
        var b = B.z.awB(n),
          c = b / 2,
          a = Math.sin(c),
          f = Math.cos(c);
        f /= a;
        a = 1;
        var T = Math.sqrt(f * f + a * a);
        if (isNaN(T) || T < 1) T = 1;
      }
      T *= j[W].v[W] == "strokeStyleAlignOutside" ? 1 : 0.5;
      var U = j.strokeStyleLineWidth.v.val,
        Z = Math.ceil(U * T);
      Z = Math.min(Z, 600, U * 20);
      G.Lh(Z, Z);
    }
    G = B.b.mE(G);
    var h = new R.T0();
    h.color = B.z.cY(n) ? 0 : 255;
    h.jS = this.jS;
    h.isEnabled = this.isEnabled;
    h.HU = !0;
    h.H = G;
    h.CA = this.CA;
    h.LH = this.LH;
    h.N = B.j(h.H.C());
    if (!G.jG() && m != !0) {
      B.z.aII(n, h.N, h.H, j);
    }
    if (q != null && q != 8) h.N = B.sL(h.N, q);
    if (j == null) {
      this.Zr = h;
      this.xo = !1;
    }
    return h;
  };
  R.tm.prototype.P = function () {
    var j = new R.tm();
    j.jS = this.jS;
    j.isEnabled = this.isEnabled;
    j.CA = this.CA;
    j.LH = this.LH;
    j.kx = this.kx;
    j.uc = this.uc;
    j.D = R.tm.Fo(this.D);
    j.PG = this.PG.slice(0);
    j.Rl = this.Rl;
    j.J = this.J.slice(0);
    j.U9 = this.U9.slice(0);
    return j;
  };
  R.tm.prototype.concat = function (j) {
    var q = j.D.slice(2);
    if (q.length == 0) return;
    q[0].Np = 3;
    this.D = this.D.concat(q);
  };
  R.tm.Fo = function (j) {
    var q = [];
    for (var y = 0; y < j.length; y++) {
      var m = j[y];
      if (m.e > 5 || m.e == 0 || m.e == 3) q.push(B.S(m));
      else q.push({ e: m.e, kt: m.kt.P(), Ii: m.Ii.P(), _$: m._$.P() });
    }
    return q;
  };
  R.tm.avG = function (j, q, m) {
    if (j.length != q.length) return !1;
    for (var y = 2; y < j.length; y++) {
      var n = j[y],
        G = q[y];
      if (n.e != G.e) return !1;
      if (n.e == 0 || n.e == 3) {
        if (n.length != G.length || (!m && n.Np != G.Np)) return !1;
      } else if (!n.kt.Lg(G.kt) || !n.Ii.Lg(G.Ii) || !n._$.Lg(G._$)) return !1;
    }
    return !0;
  };
  R.tm.prototype.axz = function () {
    var j = this.D;
    for (var y = 3; y < j.length; y++)
      if (j[y].e == 0 || j[y].e == 3) j[y].Np = -1;
  };
  R.Q9 = function () {
    this.e = null;
    this.TJ = 2;
    this.ys = null;
    this.Sh = "";
    this.pb = "";
    this.V6 = "";
    this.open = 0;
    this.raw = null;
    this.Zj = null;
    this.aoE = "none";
    this.c4 = !1;
    this.zv = null;
    this.Pt = null;
    this.a4i = !1;
    this.fU = null;
  };
  R.Q9.prototype.P = function () {
    var j = new R.Q9();
    j.e = this.e;
    j.TJ = this.TJ;
    j.ys = this.ys;
    j.Sh = this.Sh;
    j.pb = this.pb;
    j.V6 = this.V6;
    j.open = this.open;
    j.raw = new Uint8Array(this.raw.buffer.slice(0));
    return j;
  };
  R.Q9.prototype.ht = function (j, q, m, n, G) {
    if (m == null) m = "none";
    var W = this,
      k = gh.Qa(W.raw.buffer),
      T = k == "svg" || k == "pdf" || k == "ai";
    if (W.Zj) {
      var b = q && T && Math.max(W.Zj[1].r, W.Zj[1].$) < Math.max(q[0], q[1]);
      if (!b && m == this.aoE && !W.c4) return;
    }
    this.aoE = m;
    if (!T) j = 0;
    if (k == null) {
      alert("Unsupported format: " + M.IH(W.raw, 0, 4));
      return null;
    }
    var c = gh.lj(k);
    if (k == "psd" && ei == 1) {
      var a = hx.a31(W.raw)[0],
        f = new Uint8Array(a.data);
      W.Zj = [f, a.Iu];
    } else if (c.k5) {
      var U = new fb(name + (k == "psd" ? "" : "-" + k) + ".psd"),
        f;
      c.LN(W.raw.buffer, U, q);
      var Z = new hk(0, 0, U.r, U.$);
      if (
        "avrg maxx medn minn rang stdv summ vari".split(" ").indexOf(m) != -1
      ) {
        var h = [];
        for (var y = 0; y < U.U.length; y++) {
          var u = U.U[y],
            i = u.buffer;
          if (!u.H.Lg(Z)) {
            i = B.j(Z.C() * 4);
            B.M4(u.buffer, u.H, i, Z);
            console.log("resizing");
          }
          h.push(i);
        }
        f = B.j(Z.C() * 4);
        B.stack.stack(h, f, m);
      } else {
        for (var y = 0; y < U.U.length; y++) if (U.U[y].ql()) U.U[y].D5(U);
        if (n && U.c4) {
          var x = bq.xL(U, n, G);
          W.c4 = !x;
          if (x) bq.lV(U, n, G);
        }
        U.DB();
        U.gF();
        U.iY();
        f = U.ht();
      }
      W.Zj = [f, Z];
      W.zv = U.zv != null && U.zv != 0 ? U.zv : 72;
      if (U.$T()) W.Pt = U.$T()[0];
    } else if (c) {
      var X = c.LN(W.raw.buffer)[0],
        $ = X.depth;
      W.Zj = [$ == 16 ? new Uint16Array(X.data) : new Uint8Array(X.data), X.Iu];
      W.zv = X.zv != null && X.zv != 0 ? X.zv : 72;
      W.Pt = X.Pt;
    }
    if (W.Zj) {
      W.fU = W.Zj[1].P();
      if (j == 1) {
        var i = W.Zj[0],
          H = W.Zj[1],
          C = B.j(H.C());
        B.Ih(i, C, 3);
        var l = B.El(C, H),
          v = B.j(l.C() * 4);
        B.M4(i, H, v, l);
        l.x = l.y = 0;
        W.Zj = [v, l];
      } else {
        var i = W.Zj[0],
          H = W.Zj[1],
          l = B.Xh(i, H, 2, null, 4278190080);
        if (l.jG()) l = new hk(0, 0, 1, 1);
        while ((l.x & 15) != 0) {
          l.x--;
          l.r++;
        }
        while ((l.y & 15) != 0) {
          l.y--;
          l.$++;
        }
        if (!l.Lg(H) && l.C() / H.C() < 0.7) {
          var v = B.j(l.C() * 4, B.oM(i));
          B.M4(i, H, v, l);
          W.Zj = [v, l];
        }
      }
      B.HZ(W.Zj);
    }
  };
  R.iq = "0";
  R.dh = "2";
  R.Y1 = "2.5";
  R.xp = "2.6";
  R.k1 = "3";
  R.wm = "4";
  R.hA = "4.4";
  R.b1 = "4.5";
  R.aGz = "4.6";
  R.YK = "5";
  R.bF = "5.5";
  R.kd = "6";
  R.aqQ = "7";
  R.ad4 = "8";
  R._6 = "9";
  R.agg = "9.2";
  R.wq = "9.3";
  R.T4 = "9.4";
  R.a1P = "9.5";
  R.Pk = "9.6";
  R.bQ = "10";
  R.d3 = "11";
  R.u8 = "12";
  R.c5 = "13";
  R.zQ = "13.1";
  R.abe = "13.2";
  R.yT = "13.3";
  R.MT = "13.4";
  R.n2 = "14";
  R.aX = "14.1";
  R.f4 = "14.2";
  R.gt = "14.3";
  R.c8 = "17";
  R.jx = "18";
  R.aDg = "19";
  R.$I = "19.5";
  R.z3 = "19.6";
  R.lN = "19.7";
  R.oS = "19.8";
  R.Jf = "20";
  R.G4 = "21";
  R.Rp = "21.2";
  R.VY = "21.3";
  R.p4 = "21.5";
  R.yX = "22";
  R.Ri = "22.5";
  R.Ov = "23";
  R.atM = "24";
  R.nu = "25";
  R.aum = "26";
  R.au3 = "27";
  R.yz = "28";
  R.Ug = "29";
  R.Cd = "30";
  R.vu = "31";
  R.YJ = "32";
  R.ahk = "32.5";
  R._u = "33";
  R.Vh = "34";
  R.bG = "35";
  R.Vy = "36";
  R.hY = "36.5";
  R._k = "37";
  R.Wh = "37.5";
  R.aob = "37.6";
  R.dy = "38";
  R.CG = "38.5";
  R.uM = "38.6";
  R.DH = "39";
  R.LV = "40";
  R.ei = "41";
  R.ax4 = "42";
  R.Re = "50";
  R.AR = "51";
  R.kc = "52";
  R.Ko = "53";
  R.rJ = "54";
  R.ao7 = "54.5";
  R.Zq = "54.6";
  R.azr = "54.7";
  R.vf = "54.8";
  R.o_ = "55";
  R.pl = "55.5";
  R.gy = "56";
  R.IW = "57";
  R.tD = "58";
  R.Z0 = "59";
  R.Ll = "60";
  function b8() {
    this.depth = 0;
    this.index = -1;
    this.v = null;
    this.aKx = null;
    this.dv = -1;
    this.children = null;
    this.parent = null;
    this.WN = null;
  }
  b8.prototype.ail = function (j, q) {
    if (this.depth != 0) j.push(this.v.getName());
    if (this.children)
      for (var y = 0; y < this.children.length; y++) this.children[y].ail(j, q);
    if (j.length > q.YF.length) q.YF = j.slice(0);
    if (this.depth != 0) j.pop();
  };
  b8.prototype.aki = function () {
    var j = 0;
    if (this.v.D1()) {
      for (var y = 0; y < this.children.length; y++)
        j += this.children[y].aki();
    } else if (this.v.buffer) j += this.v.buffer.length;
    return j;
  };
  b8.prototype.Zg = function (j) {
    var q = this.WN[j];
    return this.WN[j];
  };
  b8.prototype.fk = function (j, q) {
    var m = this.v;
    if (!m.Iw() || m.op(2) || m.op(31)) return null;
    if (m.Uk()) {
      var n = m.x7.H.C2(j);
      if (!n && m.x7.color == 0) return;
    }
    if (m.D1()) {
      for (var y = 0; y < this.children.length; y++) {
        var aF = this.children[y];
        aF.fk(j, q);
      }
    } else if (ei == 1) {
      var G = m.b8();
      if (j.C2(B.b.RD(G)) && q.indexOf(this.index) == -1) q.push(this.index);
    } else if (m.H.C2(j)) q.push(this.index);
  };
  b8.prototype.g0 = function (j, q) {
    var m = this.v;
    if (!m.Iw() || m.op(2) || m.op(31)) return null;
    if (m.Uk()) {
      if (m.x7.H.QL(j)) {
        if (!B.g0(j, m.x7.N, m.x7.H)) return null;
      } else if (m.x7.color == 0) return null;
    }
    if (m.D1()) {
      if (m.add.artb && !m.Li().QL(j)) return null;
      for (var y = this.children.length - 1; y >= 0; y--) {
        var aF = this.children[y],
          n = aF.g0(j, q);
        if (n && q == null) return n;
      }
      return null;
    } else if (ei == 1) {
      if (m.add.vmsk) {
        var G = m.add.vstk,
          W = !G.fillEnabled.v && !m.wp,
          k = G.strokeStyleLineWidth.v.val * 0.5,
          T = B.z.g0(m.add.vmsk.D, j, W, k);
        return T.Wy == -1 ? null : this;
      }
      var b = m.b8();
      if (lv.Lo(b, j.x, j.y)) return this;
    } else if ((m.add.TySh && m.H.QL(j)) || B.a61(j, m.buffer, m.H)) {
      if (q == null) return this;
      else q.push(this.index);
    }
    return null;
  };
  b8.prototype.a7x = function (j) {
    var q = this.v;
    if (!q.Iw() || q.op(2) || q.op(31)) return null;
    var m = q.add.vmsk;
    if (m && m.isEnabled) {
      var n = B.z.g0(m.D, j).Wy;
      if (n != -1) return { a87: this, au0: n };
    }
    if (q.D1()) {
      if (q.add.artb && !q.Li().QL(j)) return null;
      for (var y = this.children.length - 1; y >= 0; y--) {
        var aF = this.children[y],
          G = aF.a7x(j);
        if (G) return G;
      }
      return null;
    }
    return null;
  };
  b8.prototype.yn = function (j, q) {
    j.push(this.index);
    if (this.v.D1()) {
      j.push(this.dv);
      if (q) if (this.v.ma == 1 && this.v.ex().jS == !1) return;
      for (var y = 0; y < this.children.length; y++) this.children[y].yn(j);
    }
  };
  b8.kr = function () {
    var j = document.createElement("canvas");
    return j.getContext("2d");
  };
  b8.aG8 = function (j, q) {
    var m, n;
    if (j.r > j.$) {
      m = Math.floor(q);
      n = Math.floor(q * (j.$ / j.r));
    } else if (j.r == 0 && j.$ == 0) {
      m = n = q;
    } else {
      m = Math.floor(q * (j.r / j.$));
      n = Math.floor(q);
    }
    return new ea(m, n);
  };
  b8.QC = 32;
  b8.iT = 1;
  b8.L4 = function (j) {
    if (j == 200) return "#666666";
    if (j == 300) return "#ffffff";
    if (j == 500) return "#cccccc";
    if (j == 501) return "#999999";
    var q =
        "#0080ff #00ffff #4000ff #ff8000 #ffc000 #ffff00 #00dd00 #c000ff #ff4000 #ff0000 #0000ff #ff00ff #80ff00 #00ff80 #8000ff #ff0080".split(
          " "
        ),
      m = parseInt(q[j >>> 3].slice(1), 16),
      n = 0,
      G = j & 7;
    for (var y = 0; y < 3; y++) {
      var W = (m >>> (y * 8)) & 255;
      if (G < 4) W = Math.round((1 - (G - 0) / 6) * W + ((G - 0) / 6) * 255);
      else W = Math.round((1 - (G - 3) / 6) * W + ((G - 3) / 6) * 0);
      n |= W << (y * 8);
    }
    return "#" + n.toString(16).padStart(6, "0");
  };
  b8.prototype.hj = function (j, q, m) {
    var n = b8.iT,
      G = this.v;
    if (G.D1() && G.add.artb != null) q = G.Li();
    var W = n == 0 ? G.H : q;
    if (W.jG() || G.add.TySh) W = q;
    var k = b8.QC * L.IC(),
      T = b8.aG8(W, k),
      b = T.x,
      c = T.y,
      a = b8.aG8(q, k),
      f = eV.get(G.add) != null;
    if ((G.ql() && G.add.vmsk == null) || G.add.TySh || f)
      b = c = Math.max(c, 16);
    else if (G.D1()) {
      b = c = Math.round(18 * L.IC());
    } else {
      b = Math.max(b, 6);
      c = Math.max(c, 6);
    }
    if (m && G.fX == null) {
      G.fX = b8.kr();
      if (ei == 0) {
        G.a1n = b8.kr();
        G.azo = b8.kr();
        G.aoH = b8.kr();
      }
    }
    var U = G.ql() && G.add.vmsk;
    if (ei == 2 && !G.D1() && G.fX) {
      B._9.Fz(G.fX, b, c);
      G.fX.fillStyle = b8.L4(G.Y.yY);
      G.fX.fillRect(0, 0, 300, 300);
    } else if (ei == 1 && !G.D1()) {
      if (m) B._9.aeE(G.fX, b, c, j, this);
    } else if (U) {
      if (m && G.add.vstk)
        B._9.QW(
          G.fX,
          b,
          c,
          W,
          G.buffer,
          G.H,
          !1,
          null,
          !G.add.vstk.fillEnabled.v && !G.add.vstk.strokeEnabled.v
        );
      if (m) B._9.azb(G.fX, b, c);
    } else if (G.add.TySh) {
      if (m) B._9.ale(G.fX, c, c, G.add.TySh);
    } else if (G.add.SoCo) {
      if (m) B._9.aDi(G.fX, c, c, G.add.SoCo);
    } else if (G.add.GdFl) {
      if (m) B._9.aEE(G.fX, c, c, G.add.GdFl);
    } else if (G.add.PtFl) {
      if (m) B._9.asE(G.fX, c, c, G.add.PtFl, j);
    } else if (f) {
      if (m) B._9.asW(G.fX, c, c, G.add);
    } else if (G.add.SoLd) {
      if (m) B._9.QW(G.fX, b, c, W, G.buffer, G.H, !1);
      if (m) B._9.atx(G.fX, b, c, G.add.SoLd);
    } else if (G.D1()) {
    } else {
      if (m) {
        if (G.bm()) B._9.QW(G.fX, b, c, W, G.buffer, G.H, !1);
        else {
          B._9.avK(G.fX, c, c);
        }
      }
    }
    var Z = G.ex();
    if (m) {
      if (Z) B._9.Wa(G.a1n, a.x, a.y, q, Z);
      if (G.r3() && G.xE(j) && G.xE(j).x7) {
        var h = G.xE(j).x7;
        B._9.Wa(G.aoH, a.x, a.y, q, h);
      }
      if (!U && G.add.vmsk) {
        B._9.Wa(G.azo, a.x, a.y, q, G.add.vmsk.ex(), !0);
      }
    }
    if (Z || G.add.vmsk) c = Math.max(c, a.y);
    G.agb = Math.max(c, 16);
    if (m != !0 && G.D1() && (G.add.lsct == hQ.WR || j.U.length < 4e3))
      for (var y = 0; y < this.children.length; y++) this.children[y].hj(j, q);
  };
  b8.prototype.aBL = function (j, q, m, n) {
    this.depth = m;
    var G = j[q];
    if (n == null) n = [];
    this.WN = n;
    if (G.add.lsct == hQ.$a) {
      this.aKx = G;
      this.dv = q - 1;
      this.children = [];
      var y = q + 1;
      while (!0) {
        var W = j[y];
        if (W == null) console.log(y, j.length);
        if (W.add.lsct == hQ.WR || W.add.lsct == hQ.z$) {
          if (G.add.lyid == W.add.lyid) G.add.lyid += 16777215;
          this.v = W;
          this.index = y - 1;
          n[this.index] = this;
          n[q - 1] = this;
          break;
        }
        var k = new b8();
        k.parent = this;
        y = k.aBL(j, y, m + 1, n);
        this.children.push(k);
      }
      return y + 1;
    } else {
      this.v = G;
      this.index = q - 1;
      n[this.index] = this;
      return q + 1;
    }
  };
  b8.prototype.s2 = function (j, q, m, n) {
    var G = this.Zg(m),
      W = j;
    while (G.parent != null) {
      W = G.v.aIM(W, q, n);
      G = G.parent;
    }
    return W;
  };
  b8.prototype.Fj = function (j, q) {
    var m = this.v,
      n = new hk();
    if (!m.Iw()) return n;
    var G = m.ex();
    if (m.D1())
      for (var y = 0; y < this.children.length; y++) {
        var W = this.children[y].Fj(j, !0);
        n = n.vd(W);
      }
    else if (eV.get(m.add) != null)
      n = m.Uk() && m.x7.color == 0 ? m.x7.Fj().P() : new hk(0, 0, j.r, j.$);
    else if (m.ql() && m.add.vmsk && m.add.vmsk.isEnabled && m.add.vstk) {
      n = m.H.P();
    } else if (m.ql() && G && G.isEnabled && G.xH() != 0)
      n = new hk(0, 0, j.r, j.$);
    else {
      n = m.Fj(j, !1, !0);
      if (m.add.vmsk) n = B.b.mE(n);
    }
    return q ? m.aIM(n, j) : n;
  };
  b8.Si = {
    delete: function (j) {
      if (j && j.r) j.delete();
    },
    j: function (j, q) {
      return fS.tx ? new fS.Rx(j, q) : B.j(j * q * 4);
    },
    aiY: function (j, q, m) {
      var n = q.r,
        G = q.$;
      if (
        j == null ||
        (fS.tx && (j.r != n || j.$ != G || j.depth != m)) ||
        (!fS.tx && (j.length != n * G * 4 || B.oM(j) != m))
      ) {
        b8.Si.delete(j);
        return fS.tx ? new fS.Rx(n, G, m) : B.j(n * G * 4, m);
      } else return j;
    },
    sN: function (j, q, m, n, G) {
      (fS.tx ? fS.W4 : B.M4)(j, q, m, n, G);
    },
    xf: function (j, q, m, n, G, W, k, T, y, b, c) {
      (fS.tx ? fS.G.XK : B.G.xf)(j, q, m, n, G, W, k, T, y, b, c);
    },
    ayK: function (j, q, m, n, G, W, k, T) {
      var b = m.P(),
        c = G.r,
        a = G.$,
        f = b.x,
        U = b.y,
        Z = b.x + b.r > c ? -1 : 0,
        h = b.x < 0 ? 2 : 1,
        u = b.y + b.$ > a ? -1 : 0,
        i = b.y < 0 ? 2 : 1;
      for (var x = u; x < i; x++)
        for (var X = Z; X < h; X++) {
          b.x = f + X * c;
          b.y = U + x * a;
          b8.Si.Jg(j, q, b, n, G, W, k, T);
        }
    },
    Jg: function (j, q, m, n, G, W, k, T) {
      if (fS.tx) fS.G.aJw(j, q, m, n, G, W, k, T);
      else B.G.Jg(j, q, m, n, G, W, k, T);
    },
    $_: function (j, q) {
      if (fS.tx) {
        fS.VF(j);
        fS.Db(q);
      } else B.bs(j, q);
    },
    KA: function (j) {
      if (fS.tx) {
        fS.VF(j);
        fS.KA();
      } else {
        var q = B.oM(j),
          m = q == 8 ? 255 : q == 16 ? 65535 : 1;
        if (q == 8) B.EA(j, 1);
        else for (var y = 0; y < j.length; y += 4) j[y + 3] = m;
      }
    },
    a5x: function (j, q, m, n, G) {
      if (fS.tx) {
        fS.G.XK(null, null, n, G, j, q, m, G, 1, !1);
      } else {
        if (m == 255) B.zn(j, q, n, G);
        else {
          var W = B.j(q.C(), B.oM(j));
          B.em(n, G, W, q);
          B.WE(j, W);
          B.EA(n, 0);
          B.awE(W, q, n, G);
        }
      }
    },
    ar: function (j, q, m, n, G) {
      if (fS.tx) fS.G.XK(null, null, m, n, j, q, 0, G, 1, !1);
      else B.ar(j, q, m, n, G);
    },
  };
  b8.prototype.Uh = function (j, q, m, n, G, W, k) {
    var T = typeof W == "number";
    if (
      !this.v.D1() &&
      ((T && this.index > W) || (!T && W.indexOf(this.index) == -1))
    ) {
      return;
    }
    var b = this.v,
      c = dS.Hc(b),
      a = b8.Si,
      f = j.depth;
    if (f == null) f = B.oM(j);
    var U = b.ql() ? b.ex() : b.x7;
    if (!b.Iw()) return;
    if (b.Uk() && U.H.jG() && U.xH() == 0) {
      return;
    }
    if (b.add.vstk == null && this.Fj(n, !1).jG()) {
      return;
    }
    if (b.ql() && b.H.jG()) return;
    var Z = this.Fj(n, !0).TM(m);
    if (!q.Lg(m) && !m.C2(Z)) return;
    if (b.D1() && b.add.artb) {
      var h = b.Li();
      m = m.TM(h);
    }
    var u = b8.a1R(b, G, c);
    if (!u) {
      this.aEI(j, q, m, n, G, W, k);
      return;
    }
    var i = k.T5(Z, f),
      x = i[0],
      X = i[1];
    a.sN(j, q, x, X, m);
    this.aEI(x, X, m, n, G, W, k);
    a.xf(x, X, j, q, null, null, 0, m, b.yA / 255, b.hz == "diss", c.X8);
    k.gM(x);
  };
  b8.a1R = function (j, q, m) {
    if (m.X8[0] * m.X8[1] * m.X8[2] == 0) return !0;
    return j.yA != 255 && (q.length != 0 || j.D1() || j.EC());
  };
  b8.prototype.aEI = function (j, q, m, n, G, W, k) {
    var T = this.v,
      b = dS.Hc(T),
      c = eV.get(T.add) != null,
      a = b8.Si,
      f = j.depth,
      S = null,
      o = null;
    if (f == null) f = B.oM(j);
    var U = b8.a1R(T, G, b),
      Z = U ? 1 : T.yA / 255,
      h = T.ql() ? T.ex() : T.x7,
      u =
        T.D1() &&
        b.qL == null &&
        (T.hz == "pass" || T.add.artb != null) &&
        !(G.length > 0 || b.fill != 1 || T.EC()),
      i = !T.D1() && !c && !T.EC() && G.length == 0,
      x = c && !T.EC() && G.length == 0;
    if (u || i || x) {
      var X = j,
        $ = q;
      if (T.Uk()) {
        var H = k.T5(this.Fj(n, !1), f);
        X = H[0];
        $ = H[1];
        a.sN(j, q, X, $);
      }
      if (u) this.VC(X, $, m, n, W, k);
      if (i) a.Jg(T.hz, T.ahn(n), T.H, X, $, m, Z, b);
      if (x) {
        var C = T.Uk() && h.xH() == 0 ? h.Fj().P() : $.P(),
          H = k.T5(C, f),
          l = H[0],
          v = H[1];
        this.abv(X, $, l, v, T.add);
        b.TZ = !0;
        a.Jg(T.hz, l, v, X, $, m, Z, b);
        k.gM(l);
      }
      if (T.Uk()) {
        a.xf(X, $, j, q, T.abP(), h.Fj(), h.xH(), m, 1, T.hz == "diss");
        k.gM(X);
      }
      T.a_.apc();
      return;
    }
    var K = T.D1() && T.hz == "pass" && (G.length > 0 || b.fill != 1 || T.EC()),
      C = T.H;
    if (T.D1()) {
      C = this.Fj(n, !1);
      if (C.C() > m.C()) C = C.TM(new hk(0, 0, n.r, n.$));
      o = k.Vj(C, f);
      a.$_(o, 0);
      this.VC(o, C, T.EC() ? C : C.TM(m), n, W, k);
    } else if (c) {
      C = T.Uk() && h.xH() == 0 ? h.Fj().P() : q.P();
    } else {
      C = T.H;
      S = T.ahn(n);
    }
    var V = k.Vj(C, f);
    if (T.D1()) {
      a.sN(o, C, V, C, T.EC() ? C : C.TM(m));
      if (!K) k.gM(o);
    } else if (c) {
      a.$_(V, 4294967295);
    } else {
      a.sN(S, C, V, C);
    }
    if (T.Uk()) a.a5x(T.abP(), h.Fj(), h.xH(), V, C);
    if (T.EC())
      if (T.a_.XU || T.a_.Zs || T.a_.pN != fS.tx || T.a_.mf || T.D1()) {
        var P = T.add.vmsk,
          z = B.j(C.C(), f);
        if (dS.aLN(T.add.lmfx)) {
          if (fS.tx) {
            if (!T.D1() && T.ex() == null && T.H.Lg(C) && P == null)
              B.Ih(T.buffer, z, 3);
            else {
              var E = B.j(C.C() * 4, f);
              V.get(E);
              B.Ih(E, z, 3);
            }
          } else B.Ih(V, z, 3);
        }
        if (T.a_.Zs || T.a_.pN != fS.tx || !B.Lg(z, T.a_.yB)) {
          var A = null;
          if (T.ql() && P && P.isEnabled && P.ex().color == 0) A = P.ex().H;
          dS.a0J(T.a_.RU);
          T.a_.RU = dS.acv(z, C, T.add.lmfx, T.add.fxrp, n, A);
          T.a_.yB = z;
          T.a_.ahM = C;
        }
      }
    if (T.EC()) dS.ahB(T.add.lmfx, T.a_.RU, C, j, q, m);
    var H = k.T5(C, f),
      N = H[0],
      Q = H[1];
    if (T.D1()) {
      a.$_(N, 0);
      if (T.hz == "pass") a.sN(j, q, N, Q);
      if (K) {
        a.ar(o, C, N, Q, T.EC() ? C : C.TM(m));
        k.gM(o);
      }
      this.VC(N, Q, m, n, W, k);
    } else if (c) {
      this.abv(j, q, N, Q, T.add);
    } else {
      a.sN(S, C, N, Q, m);
    }
    a.KA(N);
    for (var y = 0; y < G.length; y++) G[y].Uh(N, Q, m, n, [], W, k);
    var H = k.T5(C, f),
      e = H[0],
      Y = H[1];
    a.sN(j, q, e, Y, m);
    if (c) b.TZ = !0;
    a.Jg(T.hz == "pass" ? "norm" : T.hz, N, Q, e, Y, m, 1, b);
    k.gM(N);
    if (T.EC()) {
      var I = T.a_.RU.e.FrFX,
        O = null,
        s = null,
        p = null,
        F = null,
        g = null;
      if (I.length != 0) {
        O = I[0];
        for (var y = 0; y < I.length; y++) if (I[y].Ak.r > O.Ak.r) O = I[y];
        var H = k.T5(O.Ak, f);
        s = H[0];
        p = H[1];
        var H = k.T5(O.Ak, f);
        F = H[0];
        g = H[1];
        a.sN(j, q, s, p, m);
      }
      dS.adH(T.add.lmfx, T.a_.RU, C, j, q, m, e, Y, s, p, F, g);
      k.gM(s);
      k.gM(F);
    }
    a.xf(e, Y, j, q, V, C, 0, m, 1, T.hz == "diss");
    T.a_.apc();
    k.gM(V);
    k.gM(e);
  };
  b8.prototype.abv = function (j, q, m, n, G) {
    var W = eV.get(G),
      k;
    if (W) k = eV.R7(W, G[W]);
    var T = B.oM(j),
      b = b8.Si;
    if (!(fS.tx && q.Lg(n))) b.sN(j, q, m, n);
    if (k) {
      if (fS.tx) {
        var c = n.P();
        c.x = c.y = 0;
        if (q.Lg(n)) {
          fS.VF(m, c);
          eV.dH(k, j.vD, c);
        } else {
          fS.VF(m, c);
          m.w3(c);
          eV.dH(k, m.sR, c);
        }
      } else eV.Gi(k, m, m, n);
    }
    return m;
  };
  b8.prototype.VC = function (j, q, m, n, G, W) {
    var k = q.r,
      T = q.$,
      b = q.x,
      c = q.y,
      aF = m,
      a = aF.x,
      f = aF.y,
      U = -1,
      Z = -1,
      h = 2,
      u = 2,
      x = !1;
    if (!n.EK) {
      U = Z = 0;
      h = u = 1;
    }
    var i = this.children;
    for (var y = 0; y < i.length; y++) {
      if (!i[y].v.Yx) x = !0;
      if (!x) continue;
      var X = eV.get(i[y].v.add) != null,
        $ = [];
      for (var H = y + 1; H < i.length; H++)
        if (i[H].v.Yx) $.push(i[H]);
        else break;
      for (var C = Z; C < u; C++)
        for (var l = U; l < h; l++) {
          q.x = b + l * k;
          q.y = c + C * T;
          aF.x = a + l * k;
          aF.y = f + C * T;
          if ((l != 0 || C != 0) && X) continue;
          i[y].Uh(j, q, aF, n, $, G, W);
        }
      y += $.length;
    }
    q.x = b;
    q.y = c;
    aF.x = a;
    aF.y = f;
  };
  (function () {
    b8.prototype.xv = function (G, W, k, T) {
      var b = this.v,
        c = b.add.lmfx,
        a = b.add.TySh,
        f = b.add.SoLd,
        Z = null;
      if (!b.Iw()) return;
      W.save();
      var U = (b.yA / 255) * (b.add.iOpa ? b.add.iOpa / 255 : 1);
      W.globalAlpha *= U;
      W.globalCompositeOperation = kJ.Lt[kJ.YH.indexOf(b.hz)];
      var h = G.add.prvw == 0;
      if (h) {
        W.lineWidth = 1 / G.I.k3;
        W.fillStyle = "black";
      }
      var u = dS.aDs(b, !1);
      if (u) {
        Z = W;
        var i = document.createElement("canvas");
        i.width = W.canvas.width;
        i.height = W.canvas.height;
        var x = W.getTransform();
        W = i.getContext("2d");
        W.setTransform(x.a, x.b, x.c, x.d, x.e, x.f);
      }
      if (b.D1()) {
        var X = this.children,
          $ = null;
        for (var y = 0; y < X.length; y++)
          if (X[y].v.wp && X[y].v.Iw()) $ = X[y].v;
        if ($ && !h) {
          W.beginPath();
          q($, W);
          W.clip();
        }
        for (var y = 0; y < X.length; y++) X[y].xv(G, W, k, T);
      } else if (a) {
        var H = !0;
        if (b.a_.path == null) {
          H = bq.wM(a, k.HS);
          if (H) bq.qS(b, k.HS, !1);
        }
        if (H) {
          {
            var C = a.u;
            W.save();
            j(W, C);
            var l = b.a_.path;
            if (h) {
              var v = l.RC.slice(0);
              for (var y = 0; y < v.length; y++)
                if (v[y][0] == "#") v[y] = "#000000";
              l = { RC: v, L: l.L };
            }
            bq.arb(l, W);
            W.restore();
          }
        }
      } else if (b.ql() && b.add.vmsk && (!b.wp || h)) {
        var K = b.add.vmsk;
        W.beginPath();
        q(b, W);
        if (h) {
          W.stroke();
        } else {
          var S = b.add.vstl;
          if (S.dZ.length != 0) {
            var o = m(S.dZ, K.D, G, W);
            if (o[1]) {
              W.save();
              j(W, o[1]);
            }
            W.fillStyle = o[0];
            W.fill(["nonzero", "evenodd"][K.uc]);
            if (o[1]) {
              W.restore();
            }
          }
          if (S.Nu.length != 0) {
            B.z.vi(S, W);
            W.strokeStyle = m(S.Nu, K.D, G, W, !0)[0];
            W.stroke();
          }
        }
      } else if (f) {
        var V = f.filterFX;
        if (V) {
          var o = V.v.filterFXList.v;
          for (var y = 0; y < o.length; y++) {
            var P = o[y].v;
            if (!P.enab.v) continue;
            var z = k0.mK(P);
            if (z == "GsnB") {
              W.filter = "blur(" + P.Fltr.v.Rds.v.val * G.I.k3 + "px)";
            }
          }
        }
        var A = f.Idnt.v,
          N = G.Kv(A, f.Crop ? f.Crop.v : null),
          C = B.B.Jl(f),
          Q = N.Zj;
        if (h) {
          var e = L.Dq.Kt(f.Trnf);
          W.moveTo(e[0], e[1]);
          for (var y = 2; y < 8; y += 2) W.lineTo(e[y], e[y + 1]);
          W.closePath();
          W.stroke();
        } else n(G, b, W, C, Q);
      }
      if (u) {
        Z.save();
        Z.setTransform(1, 0, 0, 1, 0, 0);
        Z.drawImage(W.canvas, 0, 0);
        Z.restore();
        W = Z;
      }
      W.globalAlpha /= U;
      W.globalCompositeOperation = "source-over";
      W.restore();
    };
    function j(G, W) {
      G.transform(W.Sd, W.X, W.ra, W.Jy, W.Tt, W.BL);
    }
    function q(G, W) {
      var k = G.add.vmsk.D;
      for (var y = 0; y < k.length; y++) {
        if (k[y].e > 5) continue;
        var T = k[y].length;
        if (T == 0) continue;
        var b = k[y].e == 3;
        B.z.abK(W, k, y + 1, T, 0, 0, b);
        if (!b) W.closePath();
        y += T;
      }
    }
    function m(G, W, k, T, b) {
      if (G.length == 3) return [CSS.axm(G), null];
      else if (G.length == 2) {
        var c = k.iE[G[0]],
          a = 1,
          f = c.a3v;
        if (f == null) {
          var U = document.createElement("canvas"),
            Z = U.getContext("2d");
          U.width = Math.round(c.r * a);
          U.height = Math.round(c.$ * a);
          Z.scale(a, a);
          c.root.xv(c, Z, {}, null);
          f = c.a3v = T.createPattern(U, "repeat");
        }
        var h = new k$(1 / a, 0, 0, 1 / a, 0, 0),
          u = k.zv / 72,
          i = new k$();
        i.concat(h);
        var x = G[1][1];
        i.concat(new k$(x[0], x[1], x[2], x[3], u * x[4], u * x[5]));
        i.scale(1, -1);
        return [f, i];
      } else {
        var X = G[0],
          $ = G[1],
          H = G[2],
          C = (-H[5] * Math.PI) / 180,
          l = gg.FC(G, W),
          v,
          h;
        if (X == 0) {
          var K = [0, 0, 1, 0];
          B.b.u(K, l, K);
          v = T.createLinearGradient(K[0], K[1], K[2], K[3]);
        } else {
          var K = [Math.cos(C) * H[6], Math.sin(C) * H[6], 0, 0, 1, 0],
            S = Math.abs(l.Sd * l.X + l.ra * l.Jy) < 1e-9,
            o =
              Math.abs(l.Sd * l.Sd + l.X * l.X - l.ra * l.ra - l.Jy * l.Jy) <
              1e-9,
            V = S && o;
          if (V || b) {
            B.b.u(K, l, K);
            var P = K[4] - K[2],
              z = K[5] - K[3];
            v = T.createRadialGradient(
              K[0],
              K[1],
              0,
              K[2],
              K[3],
              Math.sqrt(P * P + z * z)
            );
          } else {
            v = T.createRadialGradient(K[0], K[1], 0, 0, 0, 1);
            h = l;
          }
        }
        B.MV.Uz(v, $);
        return [v, h];
      }
    }
    function n(G, W, k, T, b) {
      if (T == null) T = new k$();
      var c = W.buffer,
        a = W.H;
      if (b) {
        var f = T.Dc() * G.I.k3,
          U = 0;
        while (1 << (U / 2) < 0.5 / f && U + 2 < b.length) U += 2;
        c = b[U];
        a = b[U + 1];
        a = a.P();
        a.x = a.y = 0;
        var f = 1 << (U / 2),
          Z = new k$();
        Z.scale(f, f);
        Z.concat(T);
        T = Z;
      }
      if (a.jG()) return;
      var h = document.createElement("canvas");
      h.width = a.r;
      h.height = a.$;
      var u = h.getContext("2d");
      u.putImageData(
        new ImageData(new Uint8ClampedArray(c.buffer), a.r, a.$),
        0,
        0
      );
      k.transform(T.Sd, T.X, T.ra, T.Jy, T.Tt, T.BL);
      k.drawImage(h, a.x, a.y);
      T.BR();
      k.transform(T.Sd, T.X, T.ra, T.Jy, T.Tt, T.BL);
    }
  })();
  function fb(j) {
    this.tg = "psd";
    this.uF = !1;
    this.name = j;
    this.G6 = 8;
    this.depth = 8;
    this.p7 = -1;
    this.EK = !1;
    this.vt = null;
    this.FG = null;
    this.ps = null;
    this.Co = null;
    this.r = 0;
    this.$ = 0;
    this.buffer = null;
    this.U = [];
    this.Gw = {};
    this.add = {};
    this.jE = [];
    this.iE = {};
    this.JR = [];
    this.a3v = null;
    this.SE = 4;
    this.KW = null;
    this.zv = 72;
    this.Un = {};
    this.J = [];
    this.M3 = [];
    this.zg = !1;
    this.gQ = [];
    this.Zy = [];
    this.GA = [fb.t8("Work Path")];
    this.PU = -1;
    this.bR = [];
    this.H7 = null;
    this.Qp = { classID: "CompList", list: { t: "VlLs", v: [] } };
    this.pj = null;
    this.H8 = [];
    this.Mr = [];
    this.$n = [];
    this.Y = { abB: 960, W0: 60, rN: !1, Ss: [4, 4] };
    this.root = null;
    this.br = null;
    this.c4 = !1;
    this.ayZ = !1;
    this.a5H = !1;
    this.aFG = !1;
    this.hM = !1;
    this._F = !1;
    this.Ls = !1;
    this.qB = !1;
    this.hS = !1;
    this.u9 = !1;
    this.XU = null;
    this.aLI = null;
    this.h = null;
    this._E = [];
    this.y2 = [];
    this.W = {
      rI: {},
      a0: [],
      ee: [],
      dY: [],
      Ye: [],
      q5: [],
      cT: null,
      w2: null,
      $p: null,
      v6: null,
      qb: null,
      x$: null,
      Sb: null,
      QV: null,
      eT: [],
      Z9: [],
      EF: null,
    };
    this.history = [new eN([1, 0], null)];
    this.d6 = 0;
    this.jn = 0;
    this.aAe = 0;
    this.aCt = 0;
    this.ayL = Date.now();
    this.ff = null;
    this.YR = !1;
    this.I = new jz(this);
    this.Pf = null;
    this.atq = null;
  }
  fb.prototype.A$ = function (j) {
    var q = this,
      m = q.aiG,
      n = null,
      G,
      k = !1;
    if (j && m == null) return;
    var W = new hk(0, 0, q.r, q.$);
    if (this.Ph(!1)) n = q.U[q.J[0]];
    if (j) n = null;
    if (j) console.log("clearing");
    if (m && m != n) {
      G = m.H;
      m.yy();
      if (!G.Lg(m.H)) {
        m.gF();
        if (k) console.log("compressing", m.getName());
      }
    }
    if (n) {
      G = n.H;
      n.extend(W);
      if (!G.Lg(n.H)) {
        n.gF();
        if (k) console.log("extending", n.getName());
      }
    }
    this.aiG = n;
  };
  fb.prototype.IZ = function (j) {
    var q = this;
    q.jn = q.d6;
    q.aAe = Date.now();
    q._F = !0;
    if (j) this.ayL = Date.now();
  };
  fb.prototype.a5K = function () {
    var j = this,
      q = j.add.artd;
    return (q != null && q.Cnt.v > 1) || (j.add.arts && j.add.arts.length > 1);
  };
  fb.prototype.uJ = function (j) {
    if (j) {
      if (j.length == 30240) {
        this.uJ(null);
        return;
      }
      this.Gw.r1039 = j;
      var q = ICC.R(j.buffer),
        G = null,
        W = 17,
        f,
        U;
      if (q == null || q.tags.desc == null) {
        this.uJ(null);
        return;
      }
      var m = q.header.spaceIn.toLowerCase(),
        n = JSON.stringify(q.tags.desc).toLowerCase();
      try {
        G = ICC.U.profileName(q);
      } catch (gn) {}
      if (
        m != "rgb " ||
        G == null ||
        (n.indexOf("srgb") != -1 &&
          n.indexOf("p3") == -1 &&
          this.depth != 32) ||
        n.indexOf("apple wide color sharing profile") != -1 ||
        n.indexOf("apple poppy output profile") != -1 ||
        (m == "rgb " && this.add.fcmy == 1)
      ) {
        this.uJ(null);
        return;
      }
      console.log("We got an ICC profile!", q, G);
      try {
        var k = ICC.U.sampleLUT(q, W);
      } catch (gn) {
        this.uJ(null);
        return;
      }
      var T = B.Ot("rgbToRgbC"),
        b = T[2],
        c = T[3],
        a = fb.a0b(k, c, b);
      if (fS.tx) {
        f = new fS.Rx(W, W * W, fS.NT());
        f.set(ICC.U.lutToRGBA32(k, W));
        U = new fS.Rx(W, W * W, fS.NT());
        U.set(ICC.U.lutToRGBA32(a, W));
      }
      this.Pf = [j, q, W, k, f, a, U];
    } else {
      delete this.Gw.r1039;
      this.Pf = null;
    }
  };
  fb.a0b = function (j, q, m) {
    var n = j.slice(0),
      G = B.j(4, 32);
    for (var y = 0; y < j.length; y += 3) {
      G[0] = j[y];
      G[1] = j[y + 1];
      G[2] = j[y + 2];
      ICC.U.applyLUT(q, m, G, G);
      n[y] = G[0];
      n[y + 1] = G[1];
      n[y + 2] = G[2];
    }
    return n;
  };
  fb.prototype.$T = function () {
    return this.Pf;
  };
  fb.prototype.Oq = function () {
    if (this.Pf) return this.Pf;
    if (this.add.fcmy == 1) {
      if (this.atq == null) {
        var j = B.Ot("rgbToRgbC"),
          q = j[2],
          m = j[3],
          n;
        if (fS.tx) {
          n = new fS.Rx(q, q * q, fS.NT());
          n.set(ICC.U.lutToRGBA32(m, q));
        }
        this.atq = [null, null, q, null, null, m, n];
      }
      return this.atq;
    }
  };
  fb.prototype.amk = function () {
    var j = this.$T();
    if (j == null) return 0;
    var q = ICC.U.profileName(j[1]);
    if (q == "Adobe RGB (1998)") return 1;
    if (q == "ProPhoto RGB") return 2;
    if (q == "Display P3") return 3;
    return -1;
  };
  fb.prototype.av7 = function () {
    var j = this;
    if (j.I.rO.join("") != "111") {
      j.I.rO = [1, 1, 1];
      j._F = !0;
    }
    for (var y = 0; y < j.U.length; y++) {
      var q = j.U[y],
        m = q.add.vmsk;
      if (q.r3()) {
        var n = q.xE(j);
        if (n && n.x7 && n.x7.Ea) {
          n.x7.Ea = !1;
          j._F = !0;
        }
      }
      var G = q.ex();
      if (G && G.Ea) {
        G.Ea = !1;
        j._F = !0;
      }
      if (m) {
        if (m.J.length != 0) m.J = [];
        if (m.U9.length != 0) m.U9 = [];
      }
    }
  };
  fb.prototype.aLJ = function () {
    var j = this;
    return j.h != null || j.ac()[1].length != 0 || j.J.length > 1;
  };
  fb.prototype.f8 = function () {
    var j = this.M3,
      q = [];
    for (var y = 0; y < j.length; y++) q[y] = -1;
    var m = this.root.children;
    for (var y = 0; y < m.length; y++) {
      var n = m[y],
        G = n.v.add.artb;
      if (G == null) continue;
      var W = G.guideIndeces;
      W = W ? W.v : [];
      for (var k = 0; k < W.length; k++) q[W[k].v] = n.index;
    }
    return [B.S(j), q];
  };
  fb.prototype.gE = function (j) {
    this.M3 = B.S(j[0]);
    var q = j[1],
      m = this.root.children;
    for (var y = 0; y < m.length; y++) {
      var n = m[y],
        G = n.v.add.artb;
      if (G == null) continue;
      G.guideIndeces = { t: "VlLs", v: [] };
    }
    for (var y = 0; y < q.length; y++)
      if (q[y] != -1)
        this.U[q[y]].add.artb.guideIndeces.v.push({ t: "long", v: y });
  };
  fb.prototype.ahd = function (j) {
    var q = this;
    if (j[0]) q.add.lnk2 = j[0];
    else delete q.add.lnk2;
    if (j[1]) q.add.FEid = j[1];
    else delete q.add.FEid;
    if (j[2]) q.add.Patt = j[2];
    else delete q.add.Patt;
  };
  fb.prototype.a3g = function (j) {
    var q = this,
      m = [],
      n = [],
      G = [],
      h = null,
      u = null,
      i = null;
    for (var y = 0; y < j.length; y++) {
      var W = j[y];
      if (W.add.SoLd) {
        m.push(W.add.SoLd.Idnt.v);
        n.push(W.add.SoLd.placed.v);
      }
      if (W.add.PtFl) G.push(W.add.PtFl.Ptrn.v.Idnt.v);
      if (W.add.lmfx) {
        for (var k = 0; k < eu.C$.length; k++) {
          var T = W.add.lmfx[eu.C$[k]].v;
          for (var b = 0; b < T.length; b++)
            if (T[b].v.Ptrn) {
              var c = T[b].v;
              if (c.classID == "FrFX" && c.PntT.v.FrFl != "Ptrn") continue;
              G.push(c.Ptrn.v.Idnt.v);
            }
        }
      }
      var a = W.add.vstk;
      if (a && a.strokeStyleContent.v.classID == "patternLayer") {
        G.push(a.strokeStyleContent.v.Ptrn.v.Idnt.v);
      }
    }
    var f = q.add.lnk2,
      U = q.add.FEid,
      Z = q.add.Patt;
    if (f) {
      h = [];
      for (var y = 0; y < f.length; y++)
        if (m.indexOf(f[y].ys) != -1) h.push(f[y]);
      if (h.length == 0) h = null;
    }
    if (U) {
      u = [];
      for (var y = 0; y < U.length; y++)
        if (n.indexOf(U[y].id) != -1) u.push(U[y]);
      if (u.length == 0) u = null;
    }
    if (Z) {
      i = [];
      for (var y = 0; y < Z.length; y++)
        if (G.indexOf(Z[y].id) != -1) i.push(Z[y]);
      if (i.length == 0) i = null;
    }
    return [h, u, i];
  };
  fb.prototype.$X = function (j) {
    var q = this,
      m = q.root.Zg(j == null ? q.J[0] : j),
      n = !1;
    while (m.parent != null) {
      n = n || m.v.op(31);
      m = m.parent;
    }
    return n;
  };
  fb.prototype._C = function () {
    var j = this._E,
      q = this._E.length;
    if (q != 0 && j[q - 1].name == "Quick Mask") return j[q - 1];
  };
  fb.prototype.J_ = function () {
    return this.tg == bA.v9("% |/!)") || this.tg == bA.Cs("gP");
  };
  fb.prototype.cw = function (j) {
    var q = this.add.artd;
    if (j != 0)
      this.add.artd = {
        classID: "null",
        Cnt: { t: "long", v: j },
        autoExpandOffset: {
          t: "Objc",
          v: {
            classID: "Pnt",
            Hrzn: { t: "doub", v: 0 },
            Vrtc: { t: "doub", v: 0 },
          },
        },
        origin: {
          t: "Objc",
          v: {
            classID: "Pnt",
            Hrzn: { t: "doub", v: 0 },
            Vrtc: { t: "doub", v: 0 },
          },
        },
        autoExpandEnabled: { t: "bool", v: !0 },
        autoNestEnabled: { t: "bool", v: !0 },
        autoPositionEnabled: { t: "bool", v: !0 },
      };
    else delete this.add.artd;
  };
  fb.prototype.N8 = function (j) {
    if (this.add.FEid == null) this.add.FEid = [];
    if (this.add.FEid.indexOf(j) == -1) this.add.FEid.push(j);
  };
  fb.prototype._e = function (j) {
    var q = this.add.FEid.indexOf(j);
    this.add.FEid.splice(q, 1);
    if (this.add.FEid.length == 0) delete this.add.FEid;
  };
  fb.prototype.gF = function (j) {
    if (j == null) j = new hk(0, 0, this.r, this.$);
    if (this.XU == null) this.XU = j;
    else this.XU = this.XU.vd(j);
  };
  fb.prototype.axI = function (j) {
    return this.XU != null;
  };
  fb.prototype.Lu = function (j) {
    var q = this.U[j],
      m = this.root.Zg(j);
    if (m == null) return !1;
    if (q.D1() || m.parent.children.indexOf(m) == 0) return !1;
    return !0;
  };
  fb.anu = function (j) {
    if (j.add.lnk2)
      for (var y = 0; y < j.add.lnk2.length; y++) {
        var q = j.add.lnk2[y].ys;
        j.add.lnk2[y].ys = fb.Rh() + q.slice(8);
        for (var m = 0; m < j.U.length; m++) {
          var n = j.U[m].add.SoLd;
          if (n && n.Idnt.v == q) n.Idnt.v = j.add.lnk2[y].ys;
        }
      }
  };
  fb.prototype.rY = function (j, q, m) {
    j.sort(function (f, U) {
      return f - U;
    });
    var top = j[j.length - 1],
      n = this.U.slice(0),
      G = this.J.slice(0),
      W = [],
      k = [];
    for (var y = 0; y < this.U.length; y++) {
      if (j.indexOf(y) != -1) k.push(this.U[y]);
      else W.push(this.U[y]);
    }
    this.e0(k);
    this.J = [];
    var T = this.root.Fj(this, !0);
    if (q) T = T.TM(q);
    if (m) T = T.vd(m);
    if (T.jG()) T = new hk(0, 0, 100, 100);
    var b = new hk(-T.x, -T.y, this.r, this.$),
      c = new Uint8Array(gh.lj("PSD").Ev(this, 0, 0, [!0, !1]));
    this.e0(n);
    this.J = G;
    var a = new fb(this.U[top].getName());
    gh.lj("PSD").LN(c.buffer, a);
    delete a.add.artd;
    a.gQ = [];
    a.e0(a.U);
    a.gE([[], []]);
    fb.anu(a);
    L.xC.J0(a, T);
    a.gF();
    a.iY();
    a.ht();
    return [a, T, W, top];
  };
  fb.prototype.apY = function (j, q, m) {
    var n = this.rY(j),
      G = n[0],
      W = n[1],
      k = n[2],
      top = n[3],
      T;
    if (m == "jpg")
      T = new Uint8Array(gh.lj("JPG").Ev([[G.ht().buffer]], G.r, G.$, [80]));
    else T = new Uint8Array(gh.lj("PSD").Ev(G, null, null, [!0, !1]));
    if (q) k = this.U.slice(0);
    var b = this.Pi(T, G.name, W.x, W.y);
    if (top == this.U.length - 1) k.push(b);
    else k.splice(q ? top + 1 : top - j.length + 1, 0, b);
    this.e0(k);
    this.J = [k.indexOf(b)];
  };
  fb.Rh = function (j) {
    if (j == null) j = "";
    var q = "";
    while (q == "" || q == j) {
      q = "";
      for (var y = 0; y < 8; y++)
        q += Math.floor(Math.random() * 16).toString(16);
    }
    return q;
  };
  fb.prototype.Vq = function (j) {
    if (j == null) return;
    if (this.add.Patt == null) this.add.Patt = [];
    var q = this.add.Patt;
    for (var y = 0; y < q.length; y++) if (q[y].id == j.id) return;
    q.push(j);
  };
  fb.prototype.aa1 = function (j) {
    for (var y = 0; y < this.U.length; y++) {
      var q = this.U[y],
        m = q.add.SoLd;
      if (m && m.Idnt.v == j) q.yZ(this);
    }
  };
  fb.prototype.Pi = function (j, q, m, n, G, W, k) {
    if (this.add.lnk2 == null) this.add.lnk2 = [];
    var T = null;
    for (var y = 0; y < this.add.lnk2.length; y++)
      if (B.Lg(j, this.add.lnk2[y].raw)) {
        T = this.add.lnk2[y].ys;
        break;
      }
    if (T == null) {
      var b = gh.Qa(j.buffer);
      T = fb.Rh() + "-d71c-11e5-b1ae-a548a96e5f9f";
      var c = new R.Q9();
      c.ys = T;
      c.V6 = b == "psd" ? "8BIM" : "    ";
      c.Sh = q + "." + b;
      c.pb = b == "psd" ? "8BPB" : "    ";
      c.open = 0;
      c.raw = j;
      c.e = "liFD";
      c.TJ = 2;
      this.add.lnk2.push(c);
    }
    var a = this.Kv(T, null, null, null, W, k),
      f = fb.Rh() + "-d71c-11e5-b1ae-a548a96e5f9f",
      U = this.dj(),
      Z = a ? a.fU : new hk();
    U.tV(q);
    U.add.SoLd = {
      classID: "null",
      Idnt: { t: "TEXT", v: T },
      Impr: { t: "Objc", v: { __name: "None", classID: "none" } },
      placed: { t: "TEXT", v: f },
      PgNm: { t: "long", v: 1 },
      totalPages: { t: "long", v: 1 },
      frameStep: {
        t: "Objc",
        v: {
          classID: "null",
          numerator: { t: "long", v: 0 },
          denominator: { t: "long", v: 600 },
        },
      },
      duration: {
        t: "Objc",
        v: {
          classID: "null",
          numerator: { t: "long", v: 0 },
          denominator: { t: "long", v: 600 },
        },
      },
      frameCount: { t: "long", v: 1 },
      Annt: { t: "long", v: 16 },
      Type: { t: "long", v: 2 },
      Trnf: null,
      nonAffineTransform: null,
      quiltWarp: { t: "Objc", v: B.rc.j(Z) },
      Sz: {
        t: "Objc",
        v: {
          classID: "Pnt",
          Wdth: { t: "doub", v: Z.r },
          Hght: { t: "doub", v: Z.$ },
        },
      },
      Rslt: { t: "UntF", v: { type: "#Rsl", val: a ? a.zv : 72 } },
    };
    var h = Z.P();
    if (m != null) h.offset(m, n);
    if (a != null && G) {
      var b = gh.Qa(j.buffer),
        u = this.I,
        i = G,
        x = u.gS(G.x + G.r / 2, G.y + G.$ / 2);
      if (!u.yJ.QL(x)) {
        var X = B.b._c(u.yJ).L;
        B.b.u(X, u.WQ(), X);
        G = G.TM(B.b.YU(X));
      }
      var $ = G.x,
        H = G.y,
        C = G.r,
        l = G.$;
      h = a.fU.P();
      h.offset($ + m, H + n);
      var v = (v = this.zv / (a.zv ? a.zv : b == "pdf" ? 144 : this.zv));
      h.r = h.r * v;
      h.$ = h.$ * v;
      var K = Math.max(h.r / i.r, h.$ / i.$);
      if (K > 1.0001) {
        h.r = h.r / K;
        h.$ = h.$ / K;
      }
      h.x = Math.round($ + (C - h.r) / 2);
      h.y = Math.round(H + (l - h.$) / 2);
    }
    var S = B.b._c(h).L;
    U.add.SoLd.Trnf = L.Dq.be(S);
    U.add.SoLd.nonAffineTransform = L.Dq.be(S);
    if (a) {
      if (G) U.yZ(this, !1);
      else if (ei == 0) {
        U.H = a.Zj[1].P();
        U.H.offset(h.x, h.y);
        U.buffer = a.Zj[0].slice(0);
      }
    }
    return U;
  };
  fb.prototype.u$ = function (j) {
    var q = this.add.arts,
      m = new hk();
    for (var y = 0; y < q.length; y++) m = m.vd(B.b.RD(q[y].gX));
    if (j != !0) m = B.b.mE(m);
    return m;
  };
  fb.prototype.fQ = function (j, q, m) {
    var n = this.u$();
    if (q == null) {
      q = n.r;
      m = n.$;
    }
    var G = B.l4(q, m);
    G.save();
    G.translate(-n.x, -n.y);
    G.scale(q / n.r, m / n.$);
    this.root.xv(this, G, j, new hk(0, 0, q, m));
    G.restore();
    return G.getImageData(0, 0, q, m).data.buffer;
  };
  fb.prototype.ht = function (j) {
    if (j != null) {
      this.gF();
      this.iY(j);
      var q = this.buffer;
      if (fS.tx) this.br.get(q);
      else q = q.slice(0);
      this.gF();
      this.iY();
      return q;
    }
    if (this.XU) {
      this.iY();
      this.XU = null;
    }
    if (fS.tx && this.aLI) {
      this.br.get(this.buffer);
      this.aLI = null;
      this.Ls = !0;
    }
    return this.buffer;
  };
  fb.prototype.a9p = function () {
    for (var y = 0; y < this.U.length; y++) this.U[y].aAZ();
    this.gF();
  };
  fb.prototype.aIz = function () {
    for (var y = 0; y < this.U.length; y++)
      if (this.U[y].add.lmfx) this.U[y].a_.Zs = !0;
  };
  fb.prototype.Na = function () {
    var j = this.Gw.r1044;
    if (j == null) {
      j = this.Gw.r1044 = new Uint8Array(4);
      var q = 0;
      for (var y = 0; y < this.U.length; y++)
        q = Math.max(q, this.U[y].add.lyid);
      M.ZN(j, 0, q);
    }
    var m = M.Z$(j, 0);
    M.ZN(j, 0, m + 1);
    return m + 1;
  };
  fb.prototype.Ph = function (j, q, m) {
    if (j == null) j = !0;
    var n = this;
    if (n.y2.length != 0) return !0;
    if (n.J.length != 1) {
      if (j)
        alert(
          n.J.length == 0
            ? "Select a layer first."
            : "More than one layer selected."
        );
      return !1;
    }
    return this.Pl(j, q, m);
  };
  fb.prototype.Pl = function (j, q, m) {
    if (j == null) j = !0;
    if (q == null) q = !1;
    var n = this;
    if (n.y2.length != 0) return !0;
    for (var y = 0; y < n.J.length; y++) {
      var G = n.U[n.J[y]],
        W = q || G.ma <= 0;
      if (G.add.lsct != null && G.add.lsct != hQ.yi && G.ma != 1) {
        if (j) alert(g$.get([15, 7, 2]));
        return !1;
      }
      if (W && !G.bm()) {
        if (j) alert(g$.get([15, 7, 2]));
        return !1;
      }
      if (W && G.add.TySh) {
        return this.aGl(j, [15, 7, 3], m);
      }
      if (W && G.add.SoLd) {
        return this.aGl(j, [15, 7, 4], m);
      }
      if (G.op(1) || n.$X(n.J[y])) {
        if (j) alert(g$.get([6, 57, 0]));
        return !1;
      }
    }
    return !0;
  };
  fb.prototype.aGl = function (j, q, m) {
    if (j && typeof j == "object") {
      var n = new fd(_.E.c);
      n.data = { R: _.Y.s0, kO: "confirm" };
      n.data.K = g$.get(q) + ". " + g$.get([6, 8]) + "?";
      var G = j;
      n.data.ml = function () {
        var W = new fd(_.E.NI, !0);
        W.data = {
          _D: "rasterizeLayer",
          SC: { classID: "rasterizeLayer", null: jw.$W("Lyr", !0) },
        };
        G.k(W);
      };
      j.k(n);
      return !1;
    }
    if (j) alert(g$.get(q));
    return !1;
  };
  fb.prototype.aea = function (j) {
    var q = this.root.Zg(j);
    if (q.parent) return q.v.Iw() && this.aea(q.parent.index);
    else return q.v.Iw();
  };
  fb.prototype.Tl = function (j) {
    var q = this;
    if (j) {
      var m = 0;
      for (var y = 0; y < q.J.length; y++) if (q.U[q.J[y]].add.artb) m++;
      if (m > 1) return -1;
    }
    if (q.add.artd && q.J.length != 0) {
      var n = q.root.Zg(q.J[0]);
      while (n.parent.parent) n = n.parent;
      if (n.v.add.artb) return n.index;
    }
    return -1;
  };
  fb.prototype.Hx = function () {
    var j = this.Tl();
    if (j != -1) {
      var q = this.U[j].Li();
      return new ea(q.x, q.y);
    }
    return new ea(0, 0);
  };
  fb.prototype.a9e = function () {
    var j = this.U[this.J[0]];
    if (j.ma <= 0 && !j.H.C2(this.h.H)) {
      alert("Selected area is empty.");
      return !1;
    }
    if (this.J.length == 1 && this.h) {
      var q = B.j(this.h.N.length);
      B.em(j.buffer, j.H, q, this.h.H);
      B.WE(this.h.N, q);
      if (B.kp(q, 0)) {
        alert("Selected area is empty.");
        return !1;
      }
    }
    return !0;
  };
  fb.prototype.KB = function () {
    if (this.Gw["r" + 1037] == null) this.CO(30);
    return M.dW(this.Gw["r" + 1037], 0);
  };
  fb.prototype.CO = function (j) {
    if (this.Gw["r" + 1037] == null) this.Gw["r" + 1037] = new Uint8Array(4);
    if (M.dW(this.Gw["r" + 1037], 0) == j) return;
    M.rd(this.Gw["r" + 1037], 0, j);
    this.aIz();
  };
  fb.prototype.AL = function () {
    if (this.Gw["r" + 1049] == null) this.tL(30);
    return M.dW(this.Gw["r" + 1049], 0);
  };
  fb.prototype.tL = function (j) {
    if (this.Gw["r" + 1049] == null) this.Gw["r" + 1049] = new Uint8Array(4);
    if (M.dW(this.Gw["r" + 1049], 0) == j) return;
    M.rd(this.Gw["r" + 1049], 0, j);
    this.aIz();
  };
  fb.prototype.dp = function (j) {
    if (this.add.lnk2 == null) return null;
    for (var y = 0; y < this.add.lnk2.length; y++)
      if (this.add.lnk2[y].ys == j) return this.add.lnk2[y];
    return null;
  };
  fb.prototype.aHR = function (j) {
    var q = this.dp(j);
    if (q == null) return !1;
    var m = gh.Qa(q.raw.buffer);
    if (m == null) return !1;
    if (gh.lj(m) != null || m == "psd") return !0;
    return !1;
  };
  fb.prototype.Kv = function (j, q, m, n, G, W) {
    var k = this.dp(j);
    if (k == null) return null;
    k.ht(q, m, n, G, W);
    if (k.Zj) return k;
  };
  fb.prototype.aHM = function () {
    var j = this.r,
      q = this.$,
      m = this.br,
      n = this.depth;
    if (fS.tx && m == null) m = this.br = new fS.Rx(j, q, n, !0);
    if (
      this.buffer == null ||
      this.buffer.length != j * q * 4 ||
      (fS.tx && (m.r != j || m.$ != q || m.depth != n))
    ) {
      this.buffer = B.j(j * q * 4, n);
      if (m) m.delete();
      if (fS.tx) m = this.br = new fS.Rx(j, q, n, !0);
    }
  };
  fb.prototype.aeK = function () {
    this.aHM();
    if (fS.tx) {
      this.br.set(this.buffer);
    }
  };
  fb.prototype.iY = function (j) {
    if (ei != 0) throw "redrawing in vector mode";
    var q = this.r,
      m = this.$,
      n = new hk(0, 0, q, m),
      G = this.EK ? n : n.TM(this.XU);
    this.aHM();
    if (G.jG()) return;
    if (!G.Lg(n)) {
      if (!fS.tx) {
        var W = B.j(G.C() * 4, this.depth);
        B.M4(W, G, this.buffer, n);
      }
      if (fS.tx) {
        fS.VF(this.br, G);
        fS.Db(0);
      }
    } else {
      if (fS.tx) {
        this.br.set(null);
      } else {
        this.buffer.fill(0);
      }
    }
    var k = Date.now(),
      T = fS.tx ? this.br : this.buffer;
    if (j == null) j = 1e9;
    var b = this.root.children;
    for (var y = 0; y < b.length; y++) {
      var c = b[y].v;
      if (c.Iw() && c.add.artb && this.add.artd) {
        var a = c.Li(),
          f = G.TM(a),
          U = c.U3();
        if (U != 0) {
          if (fS.tx) {
            fS.VF(T, f);
            fS.Db(U);
            fS.Db(U);
          } else B.aGM(T, n, f, U);
        }
      }
    }
    this.root.Uh(T, n, G, this, [], j, lm);
    lm.avU();
    this.aLI = this.XU.P();
  };
  fb.prototype.dj = function (j) {
    var q = new R();
    q.H = new hk(0, 0, 0, 0);
    q.buffer = B.j(0, this.depth);
    q.tV("Layer");
    if (j != !0) q.add.lyid = this.Na();
    q.add.lsct = hQ.yi;
    q.add.lclr = 0;
    q.add.fxrp = new ea(0, 0);
    return q;
  };
  fb.prototype.to = function (j) {
    var q = this.dj(j);
    q.tV("</Layer group>");
    q.add.lsct = hQ.$a;
    q.uZ = 24;
    return q;
  };
  fb.prototype.Dw = function () {
    return (
      this.d6 != this.jn ||
      (Date.now() - this.ayL > 5 * 60 * 1e3 && this.d6 > 0 && this.U.length > 1)
    );
  };
  fb.prototype.Du = function (j) {
    while (this.history.length > this.d6 + 1) this.history.pop();
    if (this.jn > this.d6) this.jn = -1;
    if (j.l.id != L.lt) {
      this.aFG = !0;
      if (this.Qp.lastAppliedComp) {
        delete this.Qp.lastAppliedComp;
        this.Ls = !0;
      }
    }
    this.history.push(j);
    this.d6++;
    this.Ls = !0;
    var q = lw.eo() ? 40 : 20,
      m = 0;
    for (var y = this.history.length - 1; y >= 0; y--) {
      var n = this.history[y];
      if (n.aoz) continue;
      m++;
      if (m == q) {
        this.d6 -= y;
        this.history = this.history.slice(y);
        break;
      }
    }
  };
  fb.prototype.iw = function () {
    if (this.d6 != this.history.length - 1) return null;
    return this.history[this.history.length - 1];
  };
  fb.prototype.LP = function (j, q, m, n) {
    if (j == null) j = !1;
    var G = q != null ? [q] : this.J.slice(0);
    if (n) {
      var W = [];
      for (var y = 0; y < G.length; y++) {
        var k = this.U[G[y]],
          T = k.bH;
        if (k.wN && T != 0 && W.indexOf(T) == -1) W.push(T);
      }
      if (W.length != 0)
        for (var y = 0; y < this.U.length; y++) {
          var k = this.U[y],
            T = k.bH;
          if (k.wN && T != 0 && W.indexOf(T) != -1 && G.indexOf(y) == -1)
            G.push(y);
        }
    }
    var b = [];
    for (var y = 0; y < G.length; y++) {
      var c = this.Hv(G[y], j);
      for (var a = 0; a < c.length; a++)
        if (b.indexOf(c[a]) == -1) b.push(c[a]);
      if (m) {
        var aF = this.root.Zg(G[y]);
        while (aF.parent != null && aF.parent.parent != null) {
          aF = aF.parent;
          if (b.indexOf(aF.index) == -1) {
            b.push(aF.index, aF.dv);
          }
        }
      }
    }
    return b;
  };
  fb.prototype.iG = function (j, q, m) {
    var n = this,
      G = n.LP(!1, j, null, m);
    G.sort(function ($, H) {
      return $ - H;
    });
    var W = {};
    for (var k = 0; k < n.U.length; k++) {
      var T = n.U[k].getName();
      W[T] = !0;
    }
    var b = [];
    for (var y = 0; y < G.length; y++) {
      var c = n.U[G[y]].P(),
        i,
        x;
      c.add.lyid = n.Na();
      c.add.lspf = 0;
      if (c.r3()) {
        var a = c.xE(n),
          f = fb.a9_(a);
        n.N8(f);
        c.add.SoLd.placed.v = f.id;
      } else if (c.add.SoLd) {
        var U = c.add.SoLd.placed.v;
        c.add.SoLd.placed.v = fb.Rh(U.slice(0, 8)) + U.slice(8);
      }
      c.D5(n);
      var Z = c.getName(),
        h = Z.length;
      while (48 <= Z.charCodeAt(h - 1) && Z.charCodeAt(h - 1) <= 57) h--;
      var u = parseInt(Z.slice(h));
      if (isNaN(u)) {
        if (Z.endsWith(" copy")) {
          u = 1;
          i = Z.slice(0, Z.length - 5);
        } else {
          u = 0;
          i = Z;
        }
      } else if (Z.slice(0, h).endsWith(" copy ")) {
        u = u;
        i = Z.slice(0, h - 6);
      } else {
        u = 0;
        i = Z;
      }
      u++;
      while (!0) {
        x = i + " copy" + (u == 1 ? "" : " " + u);
        if (W[x] == null) break;
        u++;
      }
      var X = G.indexOf(this.root.Zg(G[y]).parent.index) != -1;
      if (Z == "Background" && n.U.length == 1) x = "Layer 1";
      if (q != !0 && !X) c.tV(x);
      W[x] = !0;
      b.push(c);
    }
    return b;
  };
  fb.a9_ = function (j) {
    return {
      id: fb.Rh(j.id.slice(0, 8)) + j.id.slice(8),
      buffer: j.buffer.slice(0),
      H: j.H.P(),
      x7: j.x7 ? j.x7.P() : null,
    };
  };
  fb.aJK = function (j, q) {
    return { id: j, H: new hk(), buffer: B.j(1, q), x7: new R.T0(q) };
  };
  fb.t8 = function (j, q, m) {
    if (m == null) m = [0, 0];
    if (q == null) q = { vmsk: new R.tm() };
    if (q.vogk == null) {
      q.vogk = [];
      var n = B.z.in(q.vmsk.D);
      for (var G = 0; G < n; G++) q.vogk.push(B.ih.B0());
    }
    return { name: j, Wy: 0, oW: m, add: q };
  };
  fb.prototype.ac = function (j) {
    var q = [],
      m = [],
      n = this;
    for (var y = 1; y < n.GA.length; y++) {
      var G = n.GA[y];
      G.Wy = -1 - y;
      q.push(G);
      if (n.bR.indexOf(y) != -1) m.push(q.length - 1);
    }
    if (n.GA[0].add.vmsk.D.length > 2) {
      var G = n.GA[0];
      G.Wy = -1;
      q.push(G);
      if (n.bR.indexOf(0) != -1) m.push(q.length - 1);
    }
    var W = n.H7 == null;
    if (W) n.H7 = [];
    for (var y = n.J.length - 1; y >= 0; y--) {
      var k = n.J[y],
        T = n.U[k],
        b = T.add.TySh;
      if (T.add.vmsk != null) {
        var G = fb.t8('"' + T.getName() + '" Shape Path', T.add);
        G.Wy = k;
        q.push(G);
        if (W && (T.q_ || T.ql())) n.H7.push(k);
        if (n.H7.indexOf(k) != -1) m.push(q.length - 1);
      }
      if (b && b.add && B.rc.TK(b.Uu)) {
        var G = fb.t8('"' + T.getName().slice(0, 10) + '.." Text Path', b.add);
        G.Wy = 1e6 + n.J[y];
        q.push(G);
        m.push(q.length - 1);
      }
    }
    if (m.length == 0 && j) {
      n.GA[0].Wy = -1;
      n.bR = [0];
      m.push(q.length);
      q.push(n.GA[0]);
    }
    return [q, m];
  };
  fb.prototype.Hv = function (y, j) {
    var q = [],
      aF = this.root.Zg(y);
    if (aF) aF.yn(q, j);
    return q;
  };
  fb.prototype.l6 = function () {
    this.root.hj(this, new hk(0, 0, this.r, this.$));
  };
  fb.prototype.e0 = function (j) {
    for (var y = 0; y < this.U.length; y++) {
      var q = this.U[y];
      if (j.indexOf(q) == -1) {
        q.a_.a5J();
        q.gF();
      }
    }
    var m = 0;
    for (var y = 0; y < j.length; y++) if (j[y].add.artb) m++;
    this.cw(m);
    this.U = j.slice(0);
    this.DB();
  };
  fb.prototype.DB = function () {
    var j = this.U,
      q = j.length;
    this.root = new b8();
    var m = this.dj(!0);
    m.hz = "pass";
    m.add.lsct = hQ.WR;
    m.tV("");
    var n = this.to(!0),
      G = [n];
    for (var y = 0; y < q; y++) G.push(j[y]);
    G.push(m);
    this.root.aBL(G, 0, 0);
    if (this.J.length == 0) this.J = [q - 1];
  };
  fb.prototype.um = function () {
    if (this.J.length != 1) return;
    var j = this.root.Zg(this.J[0]);
    while (j.parent != null) {
      var q = j.parent.v;
      q.add.lsct = hQ.WR;
      j = j.parent;
    }
    this._F = this.avi = !0;
  };
  fb.prototype.ac4 = function () {
    this.DB();
    var j = [this.root],
      d8 = 0;
    while (j.length != 0) {
      var top = j.pop();
      d8++;
      if (top.v.add.lsct == hQ.WR)
        for (var y = 0; y < top.children.length; y++) j.push(top.children[y]);
    }
    if (d8 > 1e3) {
      var q = this.root.children;
      for (var y = 0; y < q.length; y++)
        if (q[y].v.add.lsct == hQ.WR) q[y].v.add.lsct = hQ.z$;
    }
  };
  fb.CM = function (j, q, m, n, G, W, k, T, b) {
    if (T == null) T = "sRGB IEC61966-2.1";
    if (b == null) b = 8;
    var c = {
      __name: "Make",
      classID: "Mk",
      Nw: {
        t: "Objc",
        v: {
          classID: "Dcmn",
          Nm: { t: "TEXT", v: n },
          artboard: { t: "bool", v: W },
          Md: { t: "type", v: { classID: "RGBM" } },
          Wdth: { t: "UntF", v: { type: "#Rlt", val: (j * 72) / m } },
          Hght: { t: "UntF", v: { type: "#Rlt", val: (q * 72) / m } },
          Rslt: { t: "UntF", v: { type: "#Rsl", val: m } },
          pixelScaleFactor: { t: "doub", v: 1 },
          Fl: { t: "enum", v: { Fl: G } },
          Dpth: { t: "long", v: b },
          profile: { t: "TEXT", v: T },
        },
      },
    };
    if (G == "Clr") c.Nw.v.FlCl = { t: "Objc", v: k };
    return { _D: "make", SC: c };
  };
  fb.HR = ["sRGB", "Adobe RGB", "ProPhoto RGB", "Display P3"];
  fb.H2 = ["sRGB IEC61966-2.1", "Adobe RGB (1998)", "ProPhoto RGB", "image P3"];
  fb.FF = [null, "icc/adobe", "icc/prophoto", "icc/displayp3"];
  fb.ah3 = function (j, q) {
    var m = 0,
      n = 0,
      G = 72,
      W = q.ap$,
      k = j.preset && j.preset.v == "Clipboard",
      T = j.Dpth ? j.Dpth.v : 8;
    if (k) {
      m = W.r;
      n = W.$;
    } else {
      m = j.Wdth.v.val;
      n = j.Hght.v.val;
      G = j.Rslt.v.val;
      m = Math.round((m * G) / 72);
      n = Math.round((n * G) / 72);
    }
    var b = new fb(
      (j.Nm ? j.Nm.v : g$.get([11, 7])) + "." + ["psd", "ai", "mid"][ei]
    );
    if (ei == 2) {
      m = n = 1;
      var c = b.dj();
      c.tV("Track 1");
      b.U.push(c);
    }
    b.r = m;
    b.$ = n;
    b.zv = G;
    b.depth = T;
    var a = j.Fl ? j.Fl.v.Fl : "Wht";
    if (j.artboard && j.artboard.v) {
      var f = b.dj();
      f.tV(g$.get([1, 16, 0]) + " 1");
      f.add.lsct = hQ.WR;
      f.KP(new hk(0, 0, m, n));
      f.add.artb.artboardBackgroundType = {
        t: "long",
        v: { Wht: 1, Blck: 2, Trns: 3, BckC: 1, Clr: 4 }[a],
      };
      if (a == "Clr")
        f.add.artb.Clr = { t: "Objc", v: B.MV.Ia(B.MV.xH(j.FlCl.v)) };
      f.hz = "pass";
      f.uZ = 24;
      var U = b.dj();
      U.tV("Layer 1");
      b.e0([b.to(), U, f]);
      b.cw(1);
      b.J = [1];
    } else if (ei == 0) {
      var c = b.dj(),
        Z = 0;
      c.tV("Background");
      b.e0([c]);
      c.add.lspf = 1 << 2;
      if (a == "Clr") Z = B.MV.xH(j.FlCl.v);
      else if (a != "Trns") {
        var h = q.vH;
        Z = {
          Wht: { o: 255, i: 255, X: 255 },
          Blck: { o: 0, i: 0, X: 0 },
          BckC: { o: h >>> 16, i: (h >>> 8) & 255, X: h & 255 },
        }[a];
      }
      if (Z) {
        c.H = new hk(0, 0, m, n);
        c.buffer = B.j(m * n * 4, T);
        dS.ul(c.buffer, B.MV.Ia(Z));
      }
    }
    if (ei == 0) b.buffer = B.j(m * n * 4, T);
    var u = j.profile;
    if (u) {
      var i = fb.FF[fb.H2.indexOf(u.v)];
      if (i) b.uJ(gh.$P.get(i));
    }
    if (ei == 1) b.zv = 72;
    return b;
  };
  fb.prototype.a1d = function () {
    var j = this,
      q,
      m;
    for (var y = 0; y < j.U.length; y++) {
      var n = j.U[y];
      n.Y.list.sort(function (U, Z) {
        return U[0] - Z[0];
      });
      if (n.Y.yY == 500) q = n;
      if (n.Y.yY == 501) m = n;
      if (n.Y.yY == 300) {
        var G = 0,
          W = 0;
        for (var k = 0; k < n.Y.list.length; k++) {
          var T = n.Y.list[k],
            b = T[0],
            c = Math.round(((2 + T[3].trim().length) * j.Y.abB) / 18),
            a = b < G ? W + 1 : 0;
          G = b + c;
          W = a;
          T[1] = c;
          T[2] = 9 - a;
        }
      }
      if (n.Y.yY == 500 || n.Y.yY == 501)
        for (var k = 0; k < n.Y.list.length; k++) {
          var T = n.Y.list[k];
          T[1] = j.Y.abB;
        }
      var f = [];
      for (var k = 0; k < n.Y.list.length; k++) {
        var T = n.Y.list[k],
          aF = T[2];
        if (f[aF]) f[aF][1] = Math.min(f[aF][1], T[0] - f[aF][0]);
        f[aF] = T;
      }
    }
    j.Y.ZY = 0;
    if (q) {
      j.Y.W0 = q.Y.list[0][3];
      if (q.Y.list.length == 1) j.U.splice(j.U.indexOf(q), 1);
    }
    if (m) {
      j.Y.Ss = m.Y.list[0][3];
      if (m.Y.list.length == 1) j.U.splice(j.U.indexOf(m), 1);
    }
    j.J = [j.U.length - 1];
  };
  fb.prototype.aKa = function () {
    var j = this,
      q = (j.add.arts = []),
      m = !0;
    j.add.prvw = 1;
    j.DB();
    var n = j.root.children;
    for (var y = 0; y < n.length; y++) if (!n[y].v.D1()) m = !1;
    if (!m || j.U.length == 0) {
      j.U.unshift(j.to());
      var G = j.dj();
      G.tV("Layer 1");
      G.add.lsct = hQ.WR;
      G.hz = "pass";
      G.uZ = 24;
      j.U.push(G);
      for (var y = 0; y < j.J.length; y++) j.J[y]++;
      j.qB = !0;
    }
    if (j.add.artd) {
      delete j.add.artd;
      var W = [];
      for (var y = 0; y < j.U.length; y++) {
        var G = j.U[y],
          k = G.add.artb;
        if (k == null) continue;
        var T = G.Li();
        delete G.add.artb;
        q.push({
          eA: G.getName(),
          gX: [T.x, T.y, T.x + T.r, T.y + T.$],
          J: !1,
        });
        var b = k.artboardBackgroundType.v;
        if (b != 1 && b != 3) {
          var c = j.root.Zg(y).aKx;
          W.push([c, b, T, B.MV.xH(k.Clr.v)]);
        }
      }
      for (var y = 0; y < W.length; y++) {
        var c = W[y][0],
          b = W[y][1],
          T = W[y][2],
          a = W[y][3],
          G = j.dj();
        G.tV("Background");
        G.add.vmsk = new R.tm();
        G.add.vmsk.D = B.z.cn.Rect(T.x, T.y, T.r, T.$);
        G.add.vstk = eu.rS.i4(!0);
        G.add.vstl = eu.TB.i4();
        G.add.vstl.dZ = [
          null,
          [1, 1, 1],
          [0, 0, 0],
          [],
          [a.o / 255, a.i / 255, a.X / 255],
          [1, 1, 1],
        ][b];
        G.Pp();
        j.U.splice(j.U.indexOf(c) + 1, 0, G);
        j.DB();
      }
      console.log(W);
    } else q.push({ eA: "Artboard", gX: [0, 0, j.r, j.$], J: !1 });
    if (j.name.endsWith(".psd")) j.name = j.name.slice(0, -4) + ".ai";
    if (j.buffer) j.buffer = null;
    for (var y = 0; y < j.U.length; y++) {
      var G = j.U[y],
        T = G.H;
      if (G.D1() && G.add.vmsk == null && G.ex()) {
        var f = G.ex();
        L.zl.JQ(j, G, null);
        G.add.vmsk = new R.tm();
        L.Qc.aCv(f, G);
      }
      if (G.ex()) L.zl.JQ(j, G, null);
      if (G.D1() && G.add.vmsk) {
        var U = j.dj();
        j.U.splice(y, 0, U);
        U.tV("<Clipping Path>");
        U.wp = !0;
        U.add.vogk = G.add.vogk;
        delete G.add.vogk;
        U.add.vmsk = G.add.vmsk;
        delete G.add.vmsk;
        U.add.vstk = eu.rS.i4();
        U.add.SoCo = JSON.parse(eu.oy[eu.order.indexOf("SoFi")]);
        console.log("mask here!");
      } else if (G.add.SoLd && G.add.vmsk) {
        delete G.add.vmsk;
      } else if (G.ql() && G.add.vstl == null) {
        if (G.add.vmsk == null) {
          G.add.vmsk = new R.tm();
          G.add.vmsk.D = B.z.cn.Rect(0, 0, j.r, j.$);
          G.add.vstk = eu.rS.i4(!0);
          G.Pp();
        }
        var Z = (G.add.vstl = fb.CS(G.add));
      }
      delete G.add.lmfx;
      if (G.add.SoLd || G.add.TySh || G.add.vmsk || T.jG()) continue;
      var h = T.r,
        u = T.$,
        i = B.QM(G.buffer, h, u) ? "JPG" : "PNG";
      if (h * u < 700 * 700) i = "PNG";
      var x = gh.lj(i).Ev([[G.buffer.buffer]], h, u),
        X = (j.U[y] = j.Pi(new Uint8Array(x), G.getName(), T.x, T.y));
      X.xg(G.Iw());
      X.hz = G.hz;
      X.yA = G.yA;
    }
  };
  fb.CS = function (j, q) {
    var m = j.vstk,
      b = null,
      c = null;
    if (m == null) m = eu.rS.i4(!0);
    var n = eu.rS.Nx(m),
      G = eu.H4(j),
      W = eu.sf(m);
    function k(b) {
      var u = B.MV.xH(b.Clr.v);
      return [u.o / 255, u.i / 255, u.X / 255];
    }
    var T = j.lmfx;
    if (T) b = T.solidFillMulti.v[0];
    if (b) b = b.v;
    if (b && (!b.enab.v || b.Opct.v.val < 50)) b = null;
    if (T) c = T.frameFXMulti.v[0];
    if (c) c = c.v;
    if (c && (!c.enab.v || c.Opct.v.val < 50)) c = null;
    var a = j.vmsk,
      f = a ? a.D : B.z.cn.Rect(0, 0, q.r, q.$);
    for (var U = 0; U < 2; U++) {
      var Z = U == 0 ? G : W,
        h = [];
      if (Z.pb == 1) h = gp.oB(Z.pH.Clr.v);
      if (Z.pb == 2) {
        h = j[U == 0 ? "_fstl" : "_sstl"];
        if (h == null || ei == 0) h = gg.BZ(Z.pH, f, q);
      }
      if (U == 0 && b) h = k(b);
      if (U == 1 && c) {
        h = k(c);
        n.mm = c.Sz.v.val;
        n.x2 = eu.stroke.types.indexOf(c.Styl.v.FStl);
        n.h0 = 1;
      }
      if (U == 0) n.dZ = h;
      else n.Nu = h;
    }
    return n;
  };
  function jz(j) {
    this.fg = j;
    this.k3 = 0;
    this.aL4 = 1;
    this.QI = 1;
    this.g = new ea(0, 0);
    this.l0 = new ea(0, 0);
    this.ny = 0;
    this.rO = [1, 1, 1];
    this.er = 0;
    this.yJ = new hk(0, 0, 1, 1);
    this.afm = new hk(0, 0, j.r, j.$);
    this.qN = null;
    this.CD = null;
    this.na = null;
    this.JM = null;
  }
  jz.UT = null;
  jz.LL = null;
  jz.Ip = function (j) {
    var q = jz,
      m = j.C();
    if (q.UT == null || q.UT.length != m * 4) {
      q.LL = B.j(m);
      q.UT = B.j(m * 4);
    }
  };
  jz.prototype.WQ = function (j) {
    var q = new k$(),
      m = this.yJ,
      n = this.fg,
      G = j ? this.QI : this.k3,
      W = j ? this.l0 : this.g,
      k = Math.round((m.r - n.r * G) / 2 + W.x),
      T = Math.round((m.$ - n.$ * G) / 2 + W.y);
    q.translate(-k, -T);
    q.scale(1 / G, 1 / G);
    var b = n.r / 2,
      c = n.$ / 2;
    q.translate(-b, -c);
    q.rotate(this.ny);
    q.translate(b, c);
    return q;
  };
  jz.prototype.azH = function (j) {
    var q = this.yJ,
      m = this.fg,
      n = Math.atan2(-j.X, j.Sd),
      G = m.r / 2,
      W = m.$ / 2;
    j.translate(-G, -W);
    j.rotate(-n);
    j.translate(G, W);
    var k = 1 / j.Dc();
    j.scale(k, k);
    var T = -j.Tt,
      b = -j.BL,
      c = Math.round(T - (q.r - m.r * k) / 2),
      a = Math.round(b - (q.$ - m.$ * k) / 2);
    if (Math.abs(k - Math.round(k)) < 1e-6) k = Math.round(k);
    this.ny = n;
    this.k3 = k;
    this.g = new ea(c, a);
  };
  jz.prototype.RI = function () {
    var j = this.WQ(),
      q = 200,
      m = 100,
      n = Math.round((L.IC() * q) / 12) * this.aL4;
    j.scale(this.fg.Y.abB / (m * J.IC()), -1 / n);
    j.translate(0, 5 * 12);
    return j;
  };
  jz.prototype.aaT = function (j, q, m) {
    return this.RI().uL(new ea(j, q));
  };
  jz.prototype.sb = function (j, q, m) {
    var n = this.WQ(),
      G = n.uL(new ea(j, q));
    if (m) {
      G.x = Math.round(G.x);
      G.y = Math.round(G.y);
    }
    return G;
  };
  jz.prototype.gS = function (j, q) {
    var m = this.WQ();
    m.BR();
    return m.uL(new ea(j, q));
  };
  var iL = (function () {
      function j() {
        this.li = 0;
        this.UL = {};
      }
      j.prototype.Vj = function (q, m) {
        var n = q.r + "x" + q.$,
          G = this.UL[n],
          W = 0;
        if (G == null) G = this.UL[n] = [];
        while (G[W] && G[W][2]) W++;
        if (G[W] == null) G[W] = [null, 0, !1, 0];
        G[W][0] = b8.Si.aiY(G[W][0], q, m);
        G[W][1] = this.li;
        G[W][2] = !0;
        G[W][3] = m;
        return G[W][0];
      };
      j.prototype.T5 = function (q, m) {
        var n = [];
        for (var G in this.UL) {
          var W = G.split("x"),
            k = parseInt(W[0]),
            T = parseInt(W[1]);
          if (q.r > k || q.$ > T || q.C() * 10 < k * T) continue;
          var b = this.UL[G];
          for (var y = 0; y < b.length; y++)
            if (!b[y][2]) n.push([k * T, b[y], k, T]);
        }
        n.sort(function (f, U) {
          return f[0] - U[0];
        });
        if (n.length == 0) return [this.Vj(q, m), q];
        var c = n[0],
          a = q.P();
        a.r = c[2];
        a.$ = c[3];
        c[1][1] = this.li;
        c[1][2] = !0;
        c[1][0] = b8.Si.aiY(c[1][0], a, m);
        return [c[1][0], a];
      };
      j.prototype.gM = function (q) {
        for (var m in this.UL) {
          var n = this.UL[m];
          for (var y = 0; y < n.length; y++) if (n[y][0] == q) n[y][2] = !1;
        }
      };
      j.prototype.avU = function () {
        for (var q in this.UL) {
          var m = this.UL[q];
          for (var y = 0; y < m.length; y++)
            if (m[y][1] != this.li) {
              b8.Si.delete(m[y][0]);
              m.splice(y, 1);
              y--;
            }
          if (m.length == 0) delete this.UL[q];
        }
        this.li++;
      };
      return j;
    })(),
    lm = new iL();
  function eu() {}
  eu.order =
    "ebbl FrFX IrSh IrGl ChFX SoFi GrFl patternFill OrGl DrSh St3D".split(" ");
  eu.C$ =
    "ebblMulti frameFXMulti innerShadowMulti IrGlMulti ChFXMulti solidFillMulti gradientFillMulti patternFillMulti OrGlMulti dropShadowMulti St3DMulti".split(
      " "
    );
  eu.names = [
    [14, 4],
    [14, 9],
    [14, 1],
    [14, 3],
    [14, 8],
    [14, 5],
    [14, 6],
    [14, 7],
    [14, 2],
    [14, 0],
    "3D",
  ];
  eu.acY = ["DrSh", "IrSh", "SoFi", "GrFl", "FrFX"];
  eu.dS = ["Clr"];
  eu.GB = "Grad Rvrs Type Algn Angl Dthr Scl gs99 Ofst".split(" ");
  eu.Pa = ["Ptrn", "Angl", "Scl", "Algn", "phase"];
  eu.PV = {
    ek: '{"t":"Objc","v":{"classID":"RGBC","Rd":{"v":0,"t":"doub"},"Grn":{"v":0,"t":"doub"},"Bl":{"v":0,"t":"doub"}}}',
    aKJ: '{"t":"Objc","v":{"classID":"Grdn","Nm":{"t":"TEXT","v":"Default/Two Color"               },"GrdF":{"t":"enum","v":{"GrdF":"CstS"}},"Intr":{"t":"doub","v":4096},"Clrs":{"t":"VlLs","v":[{"t":"Objc","v":{"classID":"Clrt","Type":{"t":"enum","v":{"Clry":"UsrS"}},"Lctn":{"t":"long","v":0},"Mdpn":{"t":"long","v":50},"Clr":{"t":"Objc","v":{"classID":"RGBC","Rd":{"t":"doub","v":0},"Grn":{"t":"doub","v":0},"Bl":{"t":"doub","v":0}}}},"t":"Objc"},{"v":{"classID":"Clrt","Clr":{"v":{"classID":"RGBC","Rd":{"v":255,"t":"doub"},"Grn":{"v":255,"t":"doub"},"Bl":{"v":255,"t":"doub"}},"t":"Objc"},"Type":{"v":{"Clry":"UsrS"},"t":"enum"},"Lctn":{"v":4096,"t":"long"},"Mdpn":{"v":50,"t":"long"}},"t":"Objc"}]},"Trns":{"v":[{"v":{"classID":"TrnS","Opct":{"v":{"type":"#Prc","val":100},"t":"UntF"},"Lctn":{"v":0,"t":"long"},"Mdpn":{"v":50,"t":"long"}},"t":"Objc"},{"v":{"classID":"TrnS","Opct":{"v":{"type":"#Prc","val":100},"t":"UntF"},"Lctn":{"v":4096,"t":"long"},"Mdpn":{"v":50,"t":"long"}},"t":"Objc"}],"t":"VlLs"}}}',
    aiw: '{"t":"Objc","v":{"classID":"Grdn","Nm":{"t":"TEXT","v":"Default/Foreground to Background"},"GrdF":{"t":"enum","v":{"GrdF":"CstS"}},"Intr":{"t":"doub","v":4096},"Clrs":{"t":"VlLs","v":[{"t":"Objc","v":{"classID":"Clrt","Type":{"t":"enum","v":{"Clry":"FrgC"}},"Lctn":{"t":"long","v":0},"Mdpn":{"t":"long","v":50}}},{"t":"Objc","v":{"classID":"Clrt","Type":{"t":"enum","v":{"Clry":"BckC"}},"Lctn":{"t":"long","v":4096},"Mdpn":{"t":"long","v":50}}}]},"Trns":{"t":"VlLs","v":[{"t":"Objc","v":{"classID":"TrnS","Opct":{"t":"UntF","v":{"type":"#Prc","val":100}},"Lctn":{"t":"long","v":0},"Mdpn":{"t":"long","v":50}}},{"t":"Objc","v":{"classID":"TrnS","Opct":{"t":"UntF","v":{"type":"#Prc","val":100}},"Lctn":{"t":"long","v":4096},"Mdpn":{"t":"long","v":50}}}]}}}',
    aFu: '{"t":"Objc","v":{"classID":"Grdn","Nm":{"t":"TEXT","v":"Default/Custom"                  },"GrdF":{"t":"enum","v":{"GrdF":"ClNs"}},"ShTr":{"t":"bool","v":false},"VctC":{"t":"bool","v":false},"ClrS":{"t":"enum","v":{"ClrS":"RGBC"}},"RndS":{"t":"long","v":1466092501},"Smth":{"t":"long","v":2048},"Mnm":{"t":"VlLs","v":[{"t":"long","v":0},{"t":"long","v":0},{"t":"long","v":0},{"t":"long","v":0}]},"Mxm":{"t":"VlLs","v":[{"t":"long","v":100},{"t":"long","v":100},{"t":"long","v":100},{"t":"long","v":100}]}}}',
    j_: '{"t":"Objc","v":{"classID":"Ptrn","Nm":{"v":"Default/orangeslices","t":"TEXT"},"Idnt":{"v":"b4d43394-d71c-11e5-b1ae-a548a96e5f9f","t":"TEXT"}}}',
  };
  eu.PV.ek = '"Clr": ' + eu.PV.ek;
  eu.PV.MV =
    '"Grad":' +
    eu.PV.aKJ +
    ',"Scl":{"v":{"type":"#Prc","val":100},"t":"UntF"},"Algn":{"v":true,"t":"bool"},"Angl":{"v":{"type":"#Ang","val":90},"t":"UntF"},"Rvrs":{"v":false,"t":"bool"},"Type":{"v":{"GrdT":"Lnr"},"t":"enum"},"Ofst":{"v":{"classID":"Pnt","Hrzn":{"v":{"type":"#Prc","val":0},"t":"UntF"},"Vrtc":{"v":{"type":"#Prc","val":0},"t":"UntF"}},"t":"Objc"},"Dthr":{"v":false,"t":"bool"},"gs99":{"t":"enum","v":{"gradientInterpolationMethodType":"Gcls"}}';
  eu.PV.j_ =
    '"Ptrn":' +
    eu.PV.j_ +
    ',"Scl":{"v":{"type":"#Prc","val":100},"t":"UntF"},"Algn":{"v":true,"t":"bool"},"Angl":{"v":{"type":"#Ang","val": 0},"t":"UntF"},"phase":{"v":{"classID":"Pnt","Hrzn":{"v":0,"t":"doub"},"Vrtc":{"v":0,"t":"doub"}},"t":"Objc"}';
  eu.default =
    '{ "classID": "null", "Scl": {"t": "UntF", "v": { "type": "#Prc","val": 100} }, "masterFXSwitch": {"t": "bool","v": true} }';
  eu.oy = [
    '{"classID":"ebbl",       "enab":{"v":true,"t":"bool"},  "hglM":{"t":"enum","v":{"BlnM":"Scrn"}},"hglC":{"t":"Objc","v":{"classID":"RGBC","Rd":{"t":"doub","v":255},"Grn":{"t":"doub","v":255},"Bl":{"t":"doub","v":255}}},"hglO":{"t":"UntF","v":{"type":"#Prc","val":75}},"sdwM":{"t":"enum","v":{"BlnM":"Mltp"}},"sdwC":{"t":"Objc","v":{"classID":"RGBC","Rd":{"t":"doub","v":0},"Grn":{"t":"doub","v":0},"Bl":{"t":"doub","v":0}}},"sdwO":{"t":"UntF","v":{"type":"#Prc","val":75}},"bvlT":{"t":"enum","v":{"bvlT":"SfBL"}},"bvlS":{"t":"enum","v":{"BESl":"InrB"}},"uglg":{"t":"bool","v":true},"lagl":{"t":"UntF","v":{"type":"#Ang","val":120}},"Lald":{"t":"UntF","v":{"type":"#Ang","val":30}},"srgR":{"t":"UntF","v":{"type":"#Prc","val":100}},"blur":{"t":"UntF","v":{"type":"#Pxl","val":5}},"bvlD":{"t":"enum","v":{"BESs":"In"}},"TrnS":{"t":"Objc","v":{"classID":"ShpC","Nm":{"t":"TEXT","v":"Linear"},"Crv":{"t":"VlLs","v":[{"t":"Objc","v":{"classID":"CrPt","Hrzn":{"t":"doub","v":0},"Vrtc":{"t":"doub","v":0}}},{"t":"Objc","v":{"classID":"CrPt","Hrzn":{"t":"doub","v":255},"Vrtc":{"t":"doub","v":255}}}]}}},"antialiasGloss":{"t":"bool","v":false},"Sftn":{"t":"UntF","v":{"type":"#Pxl","val":0}},"useShape":{"t":"bool","v":false},"MpgS":{"t":"Objc","v":{"classID":"ShpC","Nm":{"t":"TEXT","v":"Linear"},"Crv":{"t":"VlLs","v":[{"t":"Objc","v":{"classID":"CrPt","Hrzn":{"t":"doub","v":0},"Vrtc":{"t":"doub","v":0}}},{"t":"Objc","v":{"classID":"CrPt","Hrzn":{"t":"doub","v":255},"Vrtc":{"t":"doub","v":255}}}]}}},"AntA":{"t":"bool","v":false},"Inpr":{"t":"UntF","v":{"type":"#Prc","val":28}},"useTexture":{"t":"bool","v":false},"InvT":{"t":"bool","v":false},"Algn":{"t":"bool","v":true},"Scl":{"t":"UntF","v":{"type":"#Prc","val":100}},"textureDepth":{"t":"UntF","v":{"type":"#Prc","val":100}},"Ptrn":{"t":"Objc","v":{"classID":"Ptrn","Nm":{"t":"TEXT","v":"Default/orangeslices"},"Idnt":{"t":"TEXT","v":"b4d43394-d71c-11e5-b1ae-a548a96e5f9f"}}},"phase":{"t":"Objc","v":{"classID":"Pnt","Hrzn":{"t":"doub","v":0},"Vrtc":{"t":"doub","v":0}}}}',
    '{"classID":"FrFX",       "enab":{"v":true,"t":"bool"},  "Md":{"v":{"BlnM":"Nrml"},"t":"enum"},"Opct":{"v":{"type":"#Prc","val":100},"t":"UntF"},"overprint":{"t":"bool","v":false},"Styl":{"v":{"FStl":"OutF"},"t":"enum"},"PntT":{"v":{"FrFl":"SClr"},"t":"enum"},"Sz":{"v":{"type":"#Pxl","val":3},"t":"UntF"},' +
      eu.PV.ek +
      "," +
      eu.PV.MV +
      "," +
      eu.PV.j_ +
      "}",
    '{"classID":"IrSh",       "enab":{"v":true,"t":"bool"},  "Md":{"v":{"BlnM":"Mltp"},"t":"enum"},"Opct":{"v":{"type":"#Prc","val": 75},"t":"UntF"},"Clr":{"v":{"classID":"RGBC","Rd":{"v":  0,"t":"doub"},"Grn":{"v":0,"t":"doub"},"Bl":{"v":0,"t":"doub"}},"t":"Objc"},"uglg":{"v":true,"t":"bool"},"lagl":{"v":{"type":"#Ang","val":120},"t":"UntF"},"Dstn":{"v":{"type":"#Pxl","val":5},"t":"UntF"},"Ckmt":{"v":{"type":"#Pxl","val":0},"t":"UntF"},"blur":{"v":{"type":"#Pxl","val":5},"t":"UntF"},"Nose":{"v":{"type":"#Prc","val":0},"t":"UntF"},"AntA":{"v":false,"t":"bool"},"TrnS":{"v":{"classID":"ShpC","Nm":{"v":"Linear","t":"TEXT"},"Crv":{"v":[{"v":{"classID":"CrPt","Hrzn":{"v":0,"t":"doub"},"Vrtc":{"v":0,"t":"doub"}},"t":"Objc"},{"v":{"classID":"CrPt","Hrzn":{"v":255,"t":"doub"},"Vrtc":{"v":255,"t":"doub"}},"t":"Objc"}],"t":"VlLs"}},"t":"Objc"}}',
    '{"classID":"IrGl",       "enab":{"v":true,"t":"bool"},  "Md":{"v":{"BlnM":"Scrn"},"t":"enum"},"Opct":{"v":{"type":"#Prc","val": 75},"t":"UntF"},"Clr":{"v":{"classID":"RGBC","Rd":{"v":255,"t":"doub"},"Grn":{"v":255,"t":"doub"},"Bl":{"v":189.99710083007812,"t":"doub"}},"t":"Objc"},"GlwT":{"v":{"BETE":"SfBL"},"t":"enum"},"Ckmt":{"v":{"type":"#Pxl","val":0},"t":"UntF"},"blur":{"v":{"type":"#Pxl","val":5},"t":"UntF"},"ShdN":{"v":{"type":"#Prc","val":0},"t":"UntF"},"Nose":{"v":{"type":"#Prc","val":0},"t":"UntF"},"AntA":{"v":false,"t":"bool"},"glwS":{"v":{"IGSr":"SrcE"},"t":"enum"},"TrnS":{"v":{"classID":"ShpC","Nm":{"v":"Linear","t":"TEXT"},"Crv":{"v":[{"v":{"classID":"CrPt","Hrzn":{"v":0,"t":"doub"},"Vrtc":{"v":0,"t":"doub"}},"t":"Objc"},{"v":{"classID":"CrPt","Hrzn":{"v":255,"t":"doub"},"Vrtc":{"v":255,"t":"doub"}},"t":"Objc"}],"t":"VlLs"}},"t":"Objc"},"Inpr":{"v":{"type":"#Prc","val":50},"t":"UntF"}}',
    '{"classID":"ChFX",       "enab":{"v":true,"t":"bool"},  "Md":{"v":{"BlnM":"Mltp"},"t":"enum"},"Opct":{"v":{"type":"#Prc","val": 50},"t":"UntF"},"Clr":{"v":{"classID":"RGBC","Rd":{"v":  0,"t":"doub"},"Grn":{"v":0,"t":"doub"},"Bl":{"v":0,"t":"doub"}},"t":"Objc"},"AntA":{"v":false,"t":"bool"},"Invr":{"v":true,"t":"bool"},"lagl":{"v":{"type":"#Ang","val":19},"t":"UntF"},"Dstn":{"v":{"type":"#Pxl","val":11},"t":"UntF"},"blur":{"v":{"type":"#Pxl","val":14},"t":"UntF"},"MpgS":{"v":{"classID":"ShpC","Nm":{"v":"Gaussian","t":"TEXT"},"Crv":{"v":[{"v":{"classID":"CrPt","Hrzn":{"v":0,"t":"doub"},"Vrtc":{"v":0,"t":"doub"}},"t":"Objc"},{"v":{"classID":"CrPt","Hrzn":{"v":32,"t":"doub"},"Vrtc":{"v":7,"t":"doub"}},"t":"Objc"},{"v":{"classID":"CrPt","Hrzn":{"v":64,"t":"doub"},"Vrtc":{"v":38,"t":"doub"}},"t":"Objc"},{"v":{"classID":"CrPt","Hrzn":{"v":96,"t":"doub"},"Vrtc":{"v":101,"t":"doub"}},"t":"Objc"},{"v":{"classID":"CrPt","Hrzn":{"v":128,"t":"doub"},"Vrtc":{"v":166,"t":"doub"}},"t":"Objc"},{"v":{"classID":"CrPt","Hrzn":{"v":159,"t":"doub"},"Vrtc":{"v":209,"t":"doub"}},"t":"Objc"},{"v":{"classID":"CrPt","Hrzn":{"v":191,"t":"doub"},"Vrtc":{"v":235,"t":"doub"}},"t":"Objc"},{"v":{"classID":"CrPt","Hrzn":{"v":223,"t":"doub"},"Vrtc":{"v":248,"t":"doub"}},"t":"Objc"},{"v":{"classID":"CrPt","Hrzn":{"v":255,"t":"doub"},"Vrtc":{"v":255,"t":"doub"}},"t":"Objc"}],"t":"VlLs"}},"t":"Objc"}}',
    '{"classID":"SoFi",       "enab":{"v":true,"t":"bool"},  "Md":{"v":{"BlnM":"Nrml"},"t":"enum"},"Opct":{"v":{"type":"#Prc","val":100},"t":"UntF"},' +
      eu.PV.ek +
      "}",
    '{"classID":"GrFl",       "enab":{"v":true,"t":"bool"},  "Md":{"v":{"BlnM":"Nrml"},"t":"enum"},"Opct":{"v":{"type":"#Prc","val":100},"t":"UntF"},' +
      eu.PV.MV +
      "}",
    '{"classID":"patternFill","enab":{"v":true,"t":"bool"},  "Md":{"v":{"BlnM":"Nrml"},"t":"enum"},"Opct":{"v":{"type":"#Prc","val":100},"t":"UntF"},' +
      eu.PV.j_ +
      "}",
    '{"classID":"OrGl",       "enab":{"v":true,"t":"bool"},  "Md":{"v":{"BlnM":"Scrn"},"t":"enum"},"Opct":{"v":{"type":"#Prc","val": 75},"t":"UntF"},"Clr":{"v":{"classID":"RGBC","Rd":{"v":255,"t":"doub"},"Grn":{"v":255,"t":"doub"},"Bl":{"v":189,"t":"doub"}},"t":"Objc"},"GlwT":{"v":{"BETE":"SfBL"},"t":"enum"},"Ckmt":{"v":{"type":"#Pxl","val":0},"t":"UntF"},"blur":{"v":{"type":"#Pxl","val":5},"t":"UntF"},"Nose":{"v":{"type":"#Prc","val":0},"t":"UntF"},"ShdN":{"v":{"type":"#Prc","val":0},"t":"UntF"},"AntA":{"v":false,"t":"bool"},"TrnS":{"v":{"classID":"ShpC","Nm":{"v":"Linear","t":"TEXT"},"Crv":{"v":[{"v":{"classID":"CrPt","Hrzn":{"v":0,"t":"doub"},"Vrtc":{"v":0,"t":"doub"}},"t":"Objc"},{"v":{"classID":"CrPt","Hrzn":{"v":255,"t":"doub"},"Vrtc":{"v":255,"t":"doub"}},"t":"Objc"}],"t":"VlLs"}},"t":"Objc"},"Inpr":{"v":{"type":"#Prc","val":50},"t":"UntF"}}',
    '{"classID":"DrSh",       "enab":{"v":true,"t":"bool"},  "Md":{"v":{"BlnM":"Mltp"},"t":"enum"},"Opct":{"v":{"type":"#Prc","val": 57},"t":"UntF"},"Clr":{"v":{"classID":"RGBC","Rd":{"v":  0,"t":"doub"},"Grn":{"v":  0,"t":"doub"},"Bl":{"v":  0,"t":"doub"}},"t":"Objc"},"uglg":{"v":true ,"t":"bool"},"lagl":{"v":{"type":"#Ang","val":120},"t":"UntF"},"Dstn":{"v":{"type":"#Pxl","val":27},"t":"UntF"},"Ckmt":{"v":{"type":"#Pxl","val":0},"t":"UntF"},"blur":{"v":{"type":"#Pxl","val":13},"t":"UntF"},"Nose":{"v":{"type":"#Prc","val":0},"t":"UntF"},"AntA":{"v":false,"t":"bool"},"TrnS":{"v":{"classID":"ShpC","Nm":{"v":"Lineární","t":"TEXT"},"Crv":{"v":[{"v":{"classID":"CrPt","Hrzn":{"v":0,"t":"doub"},"Vrtc":{"v":0,"t":"doub"}},"t":"Objc"},{"v":{"classID":"CrPt","Hrzn":{"v":255,"t":"doub"},"Vrtc":{"v":255,"t":"doub"}},"t":"Objc"}],"t":"VlLs"}},"t":"Objc"},"layerConceals":{"v":true,"t":"bool"},"Cntn":{"v":false,"t":"bool"}}',
    '{"classID":"St3D",       "enab":{"v":true,"t":"bool"},  "Md":{"v":{"BlnM":"Nrml"},"t":"enum"},"Opct":{"v":{"type":"#Prc","val":100},"t":"UntF"},"Clr":{"v":{"classID":"RGBC","Rd":{"v":255,"t":"doub"},"Grn":{"v":  0,"t":"doub"},"Bl":{"v":  0,"t":"doub"}},"t":"Objc"},"uglg":{"v":false,"t":"bool"},"Angl":{"v":{"type":"#Ang","val": 90},"t":"UntF"},"Dstn":{"v":{"type":"#Pxl","val":27},"t":"UntF"},"Srnk":{"v":{"type":"#Prc","val":0},"t":"UntF"},  "lagl":{"t":"UntF","v":{"type":"#Ang","val":90}},"Lald":{"t":"UntF","v":{"type":"#Ang","val":90}},"Drkn":{"v":{"type":"#Prc","val":25},"t":"UntF"} }',
  ];
  eu.MV = {
    types: "Lnr Rdl Angl Rflc Dmnd shapeburst".split(" "),
    SS: ["Perc", "Lnr", "Gcls", "Smoo", "stripes"],
    names: [
      [19, 0, 0],
      [19, 0, 1],
      [19, 0, 2],
      [19, 0, 3],
      [19, 0, 4],
      [19, 0, 5],
    ],
  };
  eu.stroke = {
    types: ["InsF", "CtrF", "OutF"],
    names: [
      [19, 5, 2],
      [19, 5, 1],
      [19, 5, 0],
    ],
    CE: ["SClr", "GrFl", "Ptrn"],
    azy: [
      [13, 0],
      [12, 37],
      [12, 62],
    ],
  };
  eu.sD = {
    types: ["SfBL", "PrBL"],
    names: [
      [19, 1, 0],
      [19, 1, 1],
    ],
    a3J: ["SrcC", "SrcE"],
    anq: [
      [19, 5, 1],
      [12, 69],
    ],
  };
  eu.pO = {
    types: ["OtrB", "InrB", "Embs", "PlEb", "strokeEmboss"],
    style: [
      [19, 2, 0],
      [19, 2, 1],
      [19, 2, 2],
      [19, 2, 3],
      [19, 2, 4],
    ],
    aLK: ["SfBL", "PrBL", "Slmt"],
    auv: [
      [19, 3, 0],
      [19, 3, 1],
      [19, 3, 2],
    ],
    dir: [
      [19, 4, 0],
      [19, 4, 1],
    ],
  };
  eu.rS = {
    u7: ["strokeStyleButtCap", "strokeStyleRoundCap", "strokeStyleSquareCap"],
    Jr: [
      "strokeStyleAlignInside",
      "strokeStyleAlignCenter",
      "strokeStyleAlignOutside",
    ],
    join: [
      "strokeStyleMiterJoin",
      "strokeStyleRoundJoin",
      "strokeStyleBevelJoin",
    ],
    HF: ["solidColorLayer", "gradientLayer", "patternLayer"],
    default: {
      classID: "strokeStyle",
      strokeStyleVersion: { t: "long", v: 2 },
      strokeEnabled: { t: "bool", v: !1 },
      fillEnabled: { t: "bool", v: !1 },
      strokeStyleLineWidth: { t: "UntF", v: { type: "#Pxl", val: 1 } },
      strokeStyleLineDashOffset: { t: "UntF", v: { type: "#Pnt", val: 0 } },
      strokeStyleMiterLimit: { t: "doub", v: 100 },
      strokeStyleLineCapType: {
        t: "enum",
        v: { strokeStyleLineCapType: "strokeStyleButtCap" },
      },
      strokeStyleLineJoinType: {
        t: "enum",
        v: { strokeStyleLineJoinType: "strokeStyleMiterJoin" },
      },
      strokeStyleLineAlignment: {
        t: "enum",
        v: { strokeStyleLineAlignment: "strokeStyleAlignCenter" },
      },
      strokeStyleScaleLock: { t: "bool", v: !1 },
      strokeStyleStrokeAdjust: { t: "bool", v: !1 },
      strokeStyleLineDashSet: { t: "VlLs", v: [] },
      strokeStyleBlendMode: { t: "enum", v: { BlnM: "Nrml" } },
      strokeStyleOpacity: { t: "UntF", v: { type: "#Prc", val: 100 } },
      strokeStyleContent: {
        t: "Objc",
        v: JSON.parse('{"classID":"solidColorLayer",' + eu.PV.ek + "}"),
      },
      strokeStyleResolution: { t: "doub", v: 72 },
    },
    i4: function (j, q) {
      var m = JSON.parse(eu.rS.a2j);
      if (j) m.fillEnabled.v = !0;
      if (q) m.strokeEnabled.v = !0;
      return m;
    },
    Nx: function (j, q, m) {
      if (q == null) q = {};
      if (m == null) m = 1;
      var n = j.strokeStyleLineDashSet.v,
        G = (q.mm = j.strokeStyleLineWidth.v.val * m);
      q.NV = j.strokeStyleMiterLimit.v;
      q.vx = j.strokeStyleLineDashOffset.v.val;
      q.h0 = eu.rS.join.indexOf(
        j.strokeStyleLineJoinType.v.strokeStyleLineJoinType
      );
      q.kv = eu.rS.u7.indexOf(
        j.strokeStyleLineCapType.v.strokeStyleLineCapType
      );
      q.x2 = eu.rS.Jr.indexOf(
        j.strokeStyleLineAlignment.v.strokeStyleLineAlignment
      );
      q.QJ = [];
      for (var y = 0; y < n.length; y++) q.QJ.push(n[y].v.val * G);
      if (q.QJ.length == 1 && q.QJ[0] == 0) q.QJ = [];
      return q;
    },
    write: function (j, q, m) {
      if (m == null) m = 1;
      var n = q.mm,
        G = q.NV,
        W = q.QJ,
        k = q.vx,
        T = q.h0,
        b = q.kv,
        c = q.x2;
      if (n != null) n = j.strokeStyleLineWidth.v.val = Math.max(0.4, n * m);
      else n = j.strokeStyleLineWidth.v.val;
      if (c != null)
        j.strokeStyleLineAlignment.v.strokeStyleLineAlignment = eu.rS.Jr[c];
      if (G != null) j.strokeStyleMiterLimit.v = G;
      if (W != null) j.strokeStyleLineDashSet.v = dS.Uy(W, m / n);
      if (k != null) j.strokeStyleLineDashOffset.v.val = k;
      if (T != null)
        j.strokeStyleLineJoinType.v.strokeStyleLineJoinType = eu.rS.join[T];
      if (b != null)
        j.strokeStyleLineCapType.v.strokeStyleLineCapType = eu.rS.u7[b];
    },
  };
  eu.rS.a2j = JSON.stringify(eu.rS.default);
  eu.TB = {
    i4: function () {
      return {
        dZ: [1, 1, 1],
        Nu: [0, 0, 0],
        mm: 1,
        NV: 10,
        QJ: [],
        vx: 0,
        h0: 0,
        kv: 0,
        x2: 1,
      };
    },
    anS: function (j) {
      var q = al.xH(j.StrokeColor),
        m = eu.TB.i4();
      m.x2 = j.FillFirst ? 1 : 2;
      var n = j._LineCap,
        G = j._LineJoin,
        W = j._MiterLimit,
        k = j._LineDashOffset,
        T = j._LineDashArray,
        b = j.OutlineWidth;
      if (n) m.kv = n;
      if (G) m.h0 = G;
      if (W) m.NV = W;
      if (T) m.QJ = T;
      if (b != null) m.mm = b;
      m.Nu = [q.o / 255, q.i / 255, q.X / 255];
      return m;
    },
    aEO: function (j, q) {
      q.FillFirst = j.x2 == 1;
      q._LineCap = j.kv;
      q._LineJoin = j.h0;
      q._MiterLimit = j.NV;
      q._LineDashArray = j.QJ;
    },
  };
  eu.sf = function (j) {
    var q = j.strokeEnabled.v,
      m = j.strokeStyleContent.v;
    return q ? { pb: 1 + eu.rS.HF.indexOf(m.classID), pH: m } : { pb: 0 };
  };
  eu.vi = function (j, q) {
    var m = q.pb;
    j.strokeEnabled.v = m != 0;
    if (m != 0) {
      j.strokeStyleContent.v = q.pH;
      q.pH.classID = eu.rS.HF[m - 1];
    }
  };
  eu.H4 = function (j) {
    var q = j.vstk,
      m = null;
    if (q && !q.fillEnabled.v) m = { pb: 0 };
    else if (j.SoCo) m = { pb: 1, pH: j.SoCo };
    else if (j.GdFl) m = { pb: 2, pH: j.GdFl };
    else if (j.PtFl) m = { pb: 3, pH: j.PtFl };
    return m;
  };
  eu.Qw = function (j, q) {
    var m = j.vmsk,
      n = j.vstk,
      G = q.pb;
    if (n) n.fillEnabled.v = G != 0;
    if (G > 0) {
      var W = ["SoCo", "GdFl", "PtFl"][G - 1];
      for (var y = 0; y < 3; y++) delete j[["SoCo", "GdFl", "PtFl"][y]];
      j[W] = q.pH;
    }
  };
  eu.zf = [
    { classID: "null", Clr: JSON.parse(eu.oy[5]).Clr },
    {
      classID: "null",
      Grad: JSON.parse(eu.oy[6]).Grad,
      Dthr: { t: "bool", v: !1 },
      Rvrs: { t: "bool", v: !1 },
      Angl: { t: "UntF", v: { type: "#Ang", val: 0 } },
      Type: { t: "enum", v: { GrdT: "Lnr" } },
      Algn: { t: "bool", v: !0 },
      Scl: { t: "UntF", v: { type: "#Prc", val: 100 } },
      Ofst: {
        t: "Objc",
        v: {
          classID: "Pnt",
          Hrzn: { t: "UntF", v: { type: "#Prc", val: 0 } },
          Vrtc: { t: "UntF", v: { type: "#Prc", val: 0 } },
        },
      },
    },
    {
      classID: "null",
      Ptrn: JSON.parse(eu.oy[7]).Ptrn,
      Algn: { v: !0, t: "bool" },
      Scl: { v: { type: "#Prc", val: 100 }, t: "UntF" },
      Angl: { v: { type: "#Ang", val: 0 }, t: "UntF" },
      phase: {
        v: {
          classID: "Pnt",
          Hrzn: { v: 0, t: "doub" },
          Vrtc: { v: 0, t: "doub" },
        },
        t: "Objc",
      },
    },
  ];
  var dS = {};
  dS.a0L = function (j, q) {
    function m(j, U) {
      if (j == null || !j.masterFXSwitch.v) return null;
      var Z = j[U].v,
        h;
      if (Z.length != 0) {
        h = Z[0].v;
        if (!h.enab.v) h = null;
      }
      return h;
    }
    var n = q.SoCo,
      G = q.GdFl,
      W = m(j, "solidFillMulti"),
      k = m(j, "gradientFillMulti");
    if (W == null && k == null) return [n, G];
    var T = dS.a8T;
    if (n && W && k == null) {
      var b = B.S(n);
      b.Clr.v = T(W.Clr.v, n.Clr.v, W);
      return [b, null];
    }
    if (G && W && k == null) {
      var c = B.S(G),
        a = c.Grad.v.Clrs.v;
      for (var y = 0; y < a.length; y++) {
        var f = a[y].v.Clr;
        f.v = T(W.Clr.v, f.v, W);
      }
      return [null, c];
    }
    if (n && k) {
      var c = B.S(k),
        a = c.Grad.v.Clrs.v;
      for (var y = 0; y < a.length; y++) {
        var f = a[y].v.Clr;
        f.v = T(f.v, n.Clr.v, k);
      }
      return [null, c];
    }
    return [W, k];
  };
  dS.$G = { ph: B.j(4), Hf: B.j(4), o: new hk(0, 0, 1, 1) };
  dS.a8T = function (j, q, m) {
    var n = kJ.l7(m.Md.v.BlnM),
      G = m.Opct.v.val / 100,
      W = dS.$G;
    j = B.MV.xH(j);
    q = B.MV.xH(q);
    W.ph[0] = j.o;
    W.ph[1] = j.i;
    W.ph[2] = j.X;
    W.ph[3] = 255;
    W.Hf[0] = q.o;
    W.Hf[1] = q.i;
    W.Hf[2] = q.X;
    W.Hf[3] = 255;
    B.G.Jg(n, W.ph, W.o, W.Hf, W.o, W.o, G);
    return {
      classID: "RGBC",
      Rd: { t: "doub", v: W.Hf[0] },
      Grn: { t: "doub", v: W.Hf[1] },
      Bl: { t: "doub", v: W.Hf[2] },
    };
  };
  dS.aGf = function (j, q, m) {
    var n = j;
    j = j.slice(0);
    var G = kJ.YH[kJ.Tg.indexOf(q.Md.v.BlnM)],
      W = B.MV.xH(q.Clr.v),
      k =
        4278190080 |
        (Math.round(W.X) << 16) |
        (Math.round(W.i) << 8) |
        Math.round(W.o),
      T = B.j(m.C() * 4);
    B.bs(T, k);
    B.G.Jg(G, T, m, j, m, m, q.Opct.v.val / 100);
    for (var y = 0; y < j.length; y += 4) j[y + 3] = n[y + 3];
    return j;
  };
  dS.yI = function (j, q) {
    var m = ["Sz", "blur", "Sftn", "Dstn"];
    for (var y = 0; y < eu.order.length; y++) {
      var n = eu.order[y],
        G = j[eu.C$[y]].v;
      for (var W = 0; W < G.length; W++) {
        var k = G[W].v;
        for (var T = 0; T < m.length; T++) {
          var b = k[m[T]];
          if (b) {
            var c = b.v.val,
              a = c;
            a = Math.max(c == 0 ? 0 : 1, a * q);
            if (n == "ChFX") a = Math.min(a, 250);
            if (n == "ebbl") {
              if (m[T] == "blur") a = Math.min(a, 250);
              if (m[T] == "Sftn") a = Math.min(a, 16);
            }
            b.v.val = Math.round(a);
          }
        }
        if (n == "ebbl" || n == "patternFill" || n == "FrFX")
          if (k.Ptrn && k.Scl)
            k.Scl.v.val = Math.max(1, Math.min(1e3, k.Scl.v.val * q));
      }
    }
  };
  dS.a4y = function (j, q, m) {
    var n = new hk(-0.5, -0.5, 1, 1);
    for (var y = 0; y < eu.order.length; y++) {
      var G = eu.order[y],
        W = j[eu.C$[y]].v;
      for (var k = 0; k < W.length; k++) {
        var T = W[k].v,
          f;
        if (!T.enab.v) continue;
        var b = T.blur ? T.blur.v.val + 1 : 0,
          c = T.Ckmt ? T.Ckmt.v.val / 100 : 0,
          a = Math.round(b * c);
        if (G == "DrSh" || (G == "IrSh" && m)) {
          f = new hk(-0.5, -0.5, 1, 1);
          f.Lh(b, b);
          dS.B9(f, T, q, 0);
        }
        if (G == "St3D") {
          f = new hk(-0.5, -0.5, 1, 1);
          dS.B9(f, T, q, Math.PI, "Angl");
        }
        if (G == "OrGl" || (G == "IrGl" && m)) {
          f = new hk(-0.5, -0.5, 1, 1);
          f.Lh(b, b);
        }
        if (G == "FrFX") {
          var U = dS.J8(T),
            Z = U[1];
          if (m) Z = Math.max(U[0], Z);
          f = new hk(-0.5, -0.5, 1, 1);
          f.Lh(Math.ceil(Z), Math.ceil(Z));
        }
        if (G == "ebbl") {
          var b = T.blur.v.val,
            h = T.bvlS.v.BESl;
          if (h == "Embs" || h == "PlEb") b /= 2;
          var u = ["OtrB", "InrB", "Embs", "PlEb", "strokeEmboss"],
            i = ["SfBL", "PrBL", "Slmt"],
            x = ["In", "Out"],
            X = T.bvlT.v.bvlT != "SfBL" ? b : b * 0.43,
            $ = Math.round(b);
          f = new hk(-$ - 1, -$ - 1, 2 * $ + 2, 2 * $ + 2);
        }
        if (m && G == "ChFX") {
          f = new hk(-0.5, -0.5, 1, 1);
          f.Lh(b, b);
          var H = f.P();
          dS.B9(f, T, q, 0);
          dS.B9(H, T, q, Math.PI);
          f = f.vd(H);
        }
        if (f) n = n.vd(f);
      }
    }
    if (n.x != Math.ceil(n.x)) {
      n.x = Math.ceil(n.x);
      n.r -= 1;
    }
    if (n.y != Math.ceil(n.y)) {
      n.y = Math.ceil(n.y);
      n.$ -= 1;
    }
    n.r = Math.floor(n.r);
    n.$ = Math.floor(n.$);
    return n;
  };
  dS.J8 = function (j) {
    var q,
      m,
      n = 0,
      G = 0;
    if (j.Sz) {
      q = j.Sz.v.val;
      m = eu.stroke.types.indexOf(j.Styl.v.FStl);
    } else {
      q = j.Wdth.v;
      m = ["Insd", "Cntr", "Otsd"].indexOf(j.Lctn.v.StrL);
    }
    if (m == 0) n = q;
    if (m == 1) n = G = q / 2;
    if (m == 2) G = q;
    return [n, G];
  };
  dS.a2X = function (j, q) {
    if (fS.tx && j.vF == null) {
      var m = j.sE,
        n = m instanceof Array;
      if (n) {
        j.vF = [j.sE[0], new fS.Ag(j.PK.r, j.PK.$, q)];
        j.vF[1].set(j.sE[1]);
        delete j.sE;
      } else {
        j.vF = new fS.Rx(j.PK.r, j.PK.$, q);
        j.vF.set(j.sE);
        delete j.sE;
      }
      if (j.fd) {
        j.fC = new fS.Ag(j.PK.r, j.PK.$, q);
        j.fC.set(j.fd);
        delete j.fd;
      }
      if (j.Wb) {
        j.G5 = new fS.Ag(j.PK.r, j.PK.$, q);
        j.G5.set(j.Wb);
        delete j.Wb;
      }
    }
  };
  dS.avs = function (j) {
    if (j.vF) j.vF instanceof Array ? j.vF[1].delete() : j.vF.delete();
    if (j.fC) j.fC.delete();
    if (j.G5) j.G5.delete();
  };
  dS.a0J = function (j) {
    if (j.all == null) return;
    for (var y = 0; y < j.all.length; y++) {
      dS.avs(j.all[y]);
    }
  };
  dS.ag8 = function (j) {
    var q = j.all;
    for (var y = 0; y < q.length; y++) {
      var m = q[y];
      if (m.sE instanceof Array) {
        var n = m.sE[1],
          G = m.sE[0],
          W = B.oM(n),
          k = B.j(m.PK.C() * 4, W);
        if (W == 8)
          new Uint32Array(k.buffer).fill(new Uint32Array(G.buffer)[0]);
        else
          for (var y = 0; y < k.length; y += 4) {
            k[y] = G[0];
            k[y + 1] = G[1];
            k[y + 2] = G[2];
          }
        B.ln(n, k, 3);
        m.sE = k;
      }
    }
  };
  dS.acv = function (j, q, m, n, G, W) {
    var k = dS.XW(m, n, j, q, G, W),
      T = G.depth;
    for (var y = 0; y < k.all.length; y++) {
      var b = k.all[y];
      if (b.sE instanceof Array) b.sE = [B.sL(b.sE[0], T), B.sL(b.sE[1], T)];
      else b.sE = B.sL(b.sE, T);
      if (b.fd) b.fd = B.sL(b.fd, T);
      if (b.Wb) b.Wb = B.sL(b.Wb, T);
      dS.a2X(b, T);
    }
    return k;
  };
  dS.aLN = function (j) {
    for (var y = 0; y < eu.order.length; y++) {
      var q = eu.order[y],
        m = eu.C$[y],
        n = j[m].v;
      for (var G = 0; G < n.length; G++) {
        var W = n[G].v;
        if (W.enab.v && ["patternFill", "GrFl", "SoFi"].indexOf(q) == -1)
          return !0;
      }
    }
    return !1;
  };
  dS.XW = function (j, q, m, n, G, W) {
    var k = B.oM(m),
      T = 16,
      b = 0,
      c = 0;
    m = B.sL(m, T);
    if (W == null) W = n;
    for (var y = 0; y < eu.order.length; y++) {
      var a = eu.order[y],
        f = eu.C$[y],
        U = j[f].v;
      for (var Z = 0; Z < U.length; Z++) {
        var h = U[Z].v;
        if (a == "DrSh" && h.enab.v && h.Ckmt.v.val > 0 && h.blur.v.val > 0)
          b = Math.max(b, Math.ceil((h.Ckmt.v.val * h.blur.v.val) / 100));
        if (
          a == "OrGl" &&
          h.enab.v &&
          h.Ckmt.v.val > 0 &&
          h.blur.v.val > 0 &&
          h.GlwT.v.BETE == "SfBL"
        )
          b = Math.max(b, Math.ceil((h.Ckmt.v.val * h.blur.v.val) / 100));
        if (
          a == "OrGl" &&
          h.enab.v &&
          h.blur.v.val > 0 &&
          h.GlwT.v.BETE == "PrBL"
        )
          b = Math.max(b, h.blur.v.val);
        if (a == "FrFX" && h.enab.v && h.Sz.v.val > 0) {
          if (h.Styl.v.FStl == "OutF") b = Math.max(b, h.Sz.v.val);
          if (h.Styl.v.FStl == "CtrF")
            b = Math.max(b, Math.ceil(h.Sz.v.val / 2));
          c = Math.max(c, dS.J8(h)[1]);
        }
      }
    }
    var u = new dS.LK(m, n, b, dS.aLN(j)),
      i = -n.x,
      x = -n.y,
      X = { e: {}, all: [] };
    for (var $ = 0; $ < eu.order.length; $++) {
      var a = eu.order[$],
        f = eu.C$[$];
      X.e[a] = [];
      for (var H = j[f].v.length - 1; H >= 0; H--) {
        var C = j[f].v[H].v,
          S;
        if (!C.enab.v) continue;
        var l = C.blur ? C.blur.v.val : 0,
          v = C.Ckmt ? C.Ckmt.v.val / 100 : 0,
          K = l * v;
        if (a == "St3D") {
          var o = Math.max(1e-4, 1 - C.Srnk.v.val / 100),
            N = 2,
            kL = 0;
          function V(P, i5, C) {
            var h3 = C.Angl.v.val;
            h3 *= Math.PI / 180;
            var dq = C.Dstn.v.val,
              fm = Math.cos(h3) * dq,
              lg = -Math.sin(h3) * dq,
              dd = o + i5 * (1 - o),
              bs = new k$();
            bs.translate(-P.r / 2, -P.$ / 2);
            bs.scale(dd, dd);
            bs.translate(P.r / 2, P.$ / 2);
            bs.translate((1 - i5) * fm, (1 - i5) * lg);
            return bs;
          }
          var P = n.P(),
            z = B.sL(m, 8);
          P.x = P.y = 0;
          var E = Date.now(),
            A = P.P();
          A.Lh(N, N);
          var Q = B.j(A.C(), 8);
          B.sN(z, P, Q, A);
          B.Zl.oY(Q, A, 2);
          var e = B.TN(8),
            Y = B.MV.xH(C.Clr.v),
            d = Y.o / 255,
            I = Y.i / 255,
            O = Y.X / 255,
            s = B.j(P.C()),
            p = P.r,
            F = P.$,
            g = A.r,
            w = A.$,
            r = B.j(256 * 4),
            eQ = new Uint32Array(r.buffer),
            t = dS.anU(C, G),
            dq = Math.cos(t[1]),
            D = -Math.cos(t[0]) * dq,
            ha = Math.sin(t[0]) * dq;
          if (Math.abs(D) < 0.001 && Math.abs(ha) < 0.001) D = ha = 0;
          for (var am = 0; am < F; am++)
            for (var k4 = 0; k4 < p; k4++) {
              var y = (am + N) * g + k4 + N,
                Z = am * p + k4,
                aA = Z * 4,
                ex = Q[y + 1] - Q[y - 1],
                ac = Q[y + g] - Q[y - g],
                eJ = ex * ex + ac * ac;
              if (eJ > 10) {
                var h$ = 1 / Math.sqrt(eJ),
                  da = D * h$ * ex + ha * h$ * ac;
                s[Z] = Math.max(1, Math.min(e, e * 0.5 + e * 0.5 * da));
                var bb = s[Z] * 4;
                if (r[bb + 3] == 0) {
                  var gb = -da,
                    fM = 0;
                  if (da > 0) {
                    gb = 0;
                    fM = da;
                  }
                  r[bb] = 255 * (1 - gb) * (fM + (1 - fM) * d);
                  r[bb + 1] = 255 * (1 - gb) * (fM + (1 - fM) * I);
                  r[bb + 2] = 255 * (1 - gb) * (fM + (1 - fM) * O);
                  r[bb + 3] = 255;
                }
              } else s[Z] = 0;
            }
          var kS = Q;
          kS.fill(0);
          B.sN(z, P, kS, A);
          var cY = [z, P],
            cS = V(P, 0, C),
            k3 = B.b._c(P).L,
            di = k3.slice(0);
          B.b.u(k3, cS, di);
          var a7 = P.vd(B.b.YU(di)),
            b0 = B.j(a7.C() * 4, 8),
            e1 = a7.r,
            l2 = a7.$;
          for (var y = 0; y < 8; y += 2) {
            var ex = k3[y] - di[y],
              ac = k3[y + 1] - di[y + 1];
            kL = Math.max(kL, Math.sqrt(ex * ex + ac * ac));
          }
          var es = Math.round(kL / 2),
            kR = new Uint16Array(s.length),
            eH = new Uint16Array(F);
          for (var am = 0; am < F; am++)
            for (var k4 = p - 1; k4 >= 0; k4--) {
              var y = am * p + k4,
                cZ = 0;
              if (s[y] != 0) {
                cZ = 0;
                if (eH[am] == 0) eH[am] = k4 + 1;
              } else if (k4 == p - 1) cZ = 50;
              else cZ = kR[y + 1] + 1;
              kR[y] = cZ;
            }
          var ga = C.Drkn.v.val / 100,
            fi = new Uint32Array(b0.buffer),
            go = new Uint8ClampedArray(b0.buffer);
          for (var iz = es - 1; iz >= 0; iz--) {
            var i5 = iz / es,
              aI = 1 - ga + i5 * ga,
              bs = V(P, i5, C),
              k2 = bs.P();
            k2.BR();
            var jG = 1 / k2.Sd;
            for (var am = 0; am < l2; am++) {
              var eW = (am + a7.y + 0.5) * k2.Jy + k2.BL;
              if (!(0 <= eW && eW < F)) continue;
              var gc = Math.floor(eW),
                k1 = gc * p,
                ke = Math.max(
                  0,
                  Math.floor((kR[k1] - k2.Tt) * jG - a7.x - 0.5)
                ),
                jh = Math.min(
                  e1,
                  Math.ceil((eH[gc] - k2.Tt) * jG - a7.x - 0.5)
                ),
                cE = (ke - 1 + a7.x + 0.5) * k2.Sd + k2.Tt;
              for (var k4 = ke; k4 < jh; k4++) {
                var cy = (am * e1 + k4) << 2;
                cE += k2.Sd;
                if (b0[cy + 3] == 255) {
                } else if (0 <= cE && cE < p) {
                  var hl = k1 + Math.floor(cE),
                    c2 = kR[hl];
                  if (c2 != 0) {
                    var cZ = Math.floor((c2 - 1) * jG);
                    k4 += cZ;
                    cE += cZ * k2.Sd;
                  } else {
                    var f9 = B.B.a9z(cE + N, eW + N, kS, g, w) * (1 / 255),
                      hu = 255 - b0[cy + 3],
                      le = (1 / 255) * f9 * aI * hu,
                      iJ = eQ[s[hl]];
                    go[cy] += (iJ & 255) * le;
                    go[cy + 1] += ((iJ >>> 8) & 255) * le;
                    go[cy + 2] += ((iJ >>> 16) & 255) * le;
                    go[cy + 3] += f9 * hu;
                  }
                }
              }
            }
          }
          B.B6(b0);
          S = { sE: b0, PK: a7 };
        } else if (a == "DrSh") {
          var dZ = u.fF(K, l - K, !0),
            kd = dZ.ef,
            bC = dZ.HA.P();
          dS.hp(kd, C, !1);
          if (C.Cntn && C.Cntn.v) {
            var ev = new hk();
            dS.B9(ev, C, G, 0);
            var ak = bC.P();
            ak.offset(-ev.x, -ev.y);
            ak = ak.vd(bC);
            var gD = B.j(ak.C(), T);
            B.sN(kd, bC, gD, ak);
            var a9 = Math.sqrt(ev.x * ev.x + ev.y * ev.y),
              kk = kd.slice(0);
            for (var y = 0; y < a9 - 1; y++) {
              var ex = Math.round((-ev.x * y) / a9),
                ac = Math.round((-ev.y * y) / a9),
                kX = dZ.HA.P();
              kX.offset(ex, ac);
              B.aBA(kk, kX, gD, ak);
            }
            kd = gD;
            bC = ak;
          }
          bC.offset(i, x);
          dS.B9(bC, C, G, 0);
          var b0 = B.j(4, T);
          dS.ul(b0, C.Clr.v);
          S = { sE: [b0, kd], PK: bC, aDH: C.layerConceals.v };
        } else if (a == "IrSh") {
          var dZ = u.fF(K, l - K, !1);
          dS.B9(dZ.HA, C, G, 0);
          var bC = u.H().P(),
            kd = B.j(bC.C(), T);
          kd.fill(B.TN(T));
          B.sN(dZ.ef, dZ.HA, kd, bC);
          dS.hp(kd, C, !0, !0);
          var b0 = B.j(4, T);
          dS.ul(b0, C.Clr.v);
          bC.offset(i, x);
          S = { sE: [b0, kd], PK: bC };
        } else if (a == "GrFl") {
          var b0 = B.j(u.H().C() * 4, k);
          dS.Mo(C, b0, u.H(), G, null, W);
          var bC = u.H().P();
          bC.offset(i, x);
          S = { sE: b0, PK: bC };
        } else if (a == "SoFi") {
          var b0 = B.j(4, T);
          dS.ul(b0, C.Clr.v);
          var kc = B.j(u.ef().length, k);
          kc.fill(B.TN(k));
          var bC = u.H().P();
          bC.offset(i, x);
          S = { sE: [b0, kc], PK: bC };
        } else if (a == "ebbl") {
          var ew = !1;
          if (ew) console.log(C);
          var E = Date.now(),
            gS = E,
            hp = C.bvlS.v.BESl,
            g2 = C.bvlT.v.bvlT;
          if (hp == "strokeEmboss") {
            var jY = j.frameFXMulti.v;
            if (jY.length == 0) continue;
            jY = jY[0].v;
            if (!jY.enab.v) continue;
            var he = jY.Styl.v.FStl;
            if (he == "OutF") hp = "OtrB";
            if (he == "CtrF") hp = "Embs";
            if (he == "InsF") hp = "InrB";
          }
          var l = C.blur.v.val;
          if (l == 0) l = 0.7;
          if (hp == "Embs" || hp == "PlEb") l /= 2;
          var a5 = ["OtrB", "InrB", "Embs", "PlEb", "strokeEmboss"],
            gq = ["SfBL", "PrBL", "Slmt"],
            fA = ["In", "Out"],
            c3 = g2 != "SfBL" ? l : l * 0.45,
            fa = Math.round(l),
            jA = u.H().P(),
            kF = jA.P();
          kF.Lh(fa, fa);
          var p = kF.r,
            F = kF.$,
            dn = p * F,
            de = B.j(dn, T);
          B.sN(u.ef(), jA, de, kF);
          var ks = B.style.Af(de, p, F);
          B.BR(de);
          var fx = B.style.Af(de, p, F);
          if (ew) console.log("distTransform computed", Date.now() - E);
          E = Date.now();
          dS.a3O(c3, ks, fx);
          if (ew) console.log("summing + cropping", Date.now() - E);
          E = Date.now();
          if (g2 == "SfBL") {
            var hT = Math.pow(l * 0.21, 1.22);
            if (!0) hT = Math.max(hT, 2);
            B.Zl.oY(fx, kF, hT, 2);
          }
          if (ew) console.log("blurring", Date.now() - E);
          E = Date.now();
          var i7 = fx,
            gT = ks;
          gT.set(i7);
          if (C.useShape.v) {
            var iC = Math.min(100, C.Inpr.v.val + 1) / 100;
            if (hp != "OtrB" && hp != "InrB") iC = 1;
            var br = B.SD.Bh(C.MpgS.v.Crv.v, 2e3),
              eb = Math.round(2e3 / iC);
            br = B.SD.aLj(br, eb, hp == "InrB");
            var kp = 0.5 / c3;
            for (var y = 0; y < dn; y++) {
              var bd = i7[y],
                js = 0.99999 * (bd + c3) * kp;
              i7[y] = -c3 + 2 * c3 * br[~~(js * (eb - 1))];
            }
            if (ew) console.log("applying shape", Date.now() - E);
            E = Date.now();
          }
          if (C.useTexture.v) {
            var dL = B.j(p * F * 4);
            dS.oO(C, dL, kF, G.add.Patt, q);
            var hZ = B.j(p * F);
            B.P2(dL, hZ);
            B.Zl.kN(hZ, kF, 1);
            var fz = l * C.textureDepth.v.val * (1 / 100) * (1 / 255);
            if (C.InvT.v) fz = -fz;
            for (var y = 0; y < dn; y++) i7[y] += -fz * hZ[y];
            if (ew) console.log("applying texture", Date.now() - E);
            E = Date.now();
          }
          var c0 = hp == "PlEb",
            jl = new Float32Array(dn),
            h4 = jl;
          if (c0) {
            h4 = new Float32Array(dn);
          }
          var kP = dS.aHe(p, F, C, G, i7, jl, h4, c0);
          if (ew) console.log("raycasting", Date.now() - E);
          E = Date.now();
          if (C.Sftn.v.val != 0) {
            B.Zl.oY(jl, kF, C.Sftn.v.val * 0.43, 2);
            if (c0) B.Zl.oY(h4, kF, C.Sftn.v.val * 0.43, 2);
          }
          if (ew) console.log("softening", Date.now() - E);
          E = Date.now();
          var gx = B.j(p * F, T),
            gK = B.j(p * F, T),
            bL = gx,
            cA = gK;
          if (c0) {
            bL = B.j(p * F, T);
            cA = B.j(p * F, T);
          }
          dS.aBy(C, p, F, kP, c3, c0, gT, gx, gK, bL, cA, jl, h4);
          if (ew) console.log("baking textures", Date.now() - E);
          E = Date.now();
          kF = u.H().P();
          kF.Lh(fa, fa);
          kF.offset(i, x);
          S = { ai1: C.bvlS.v.BESl == "strokeEmboss" };
          var kK = kJ.l7(C.hglM.v.BlnM),
            ce = C.hglO.v.val / 100,
            iQ = kJ.l7(C.sdwM.v.BlnM),
            j0 = C.sdwO.v.val / 100,
            dP = B.j(4, T);
          dS.ul(dP, C.hglC.v);
          var jX = B.j(4, T);
          dS.ul(jX, C.sdwC.v);
          if (["InrB", "Embs", "PlEb"].indexOf(hp) != -1) {
            S.D9 = { sE: [dP, gx], PK: kF, aM: kK, uH: ce };
            S.NK = { sE: [jX, gK], PK: kF, aM: iQ, uH: j0 };
          }
          if (["OtrB", "Embs", "PlEb"].indexOf(hp) != -1) {
            S.oL = { sE: [dP, bL], PK: kF, aM: kK, uH: ce };
            S.y6 = { sE: [jX, cA], PK: kF, aM: iQ, uH: j0 };
          }
          if (ew) console.log(Date.now() - gS);
        } else if (a == "patternFill") {
          var lc = u.H(),
            b0 = B.j(lc.C() * 4, k);
          dS.oO(C, b0, lc, G.add.Patt, q);
          var bC = lc.P();
          bC.offset(i, x);
          S = { sE: b0, PK: bC };
        } else if (a == "ChFX") {
          var E = Date.now(),
            l = C.blur.v.val,
            cC = u.H().P();
          cC.Lh(l, l);
          var j8 = B.j(cC.C(), T);
          B.sN(u.ef(), u.H(), j8, cC);
          B.Zl.oY(j8, cC, l * 0.43);
          dS.aH2(j8, C.MpgS.v.Crv.v);
          var d = u.H(),
            eK = cC.P(),
            kh = cC.P();
          dS.B9(eK, C, G, 0);
          dS.B9(kh, C, G, Math.PI);
          var Y = B.j(d.C(), T);
          B.sN(j8, kh, Y, d);
          var gI = d.TM(eK),
            p = gI.r;
          for (var am = 0; am < gI.$; am++) {
            var h7 = (am + gI.y - d.y) * d.r + gI.x - d.x,
              kr = (am + gI.y - eK.y) * eK.r + gI.x - eK.x;
            for (var k4 = 0; k4 < p; k4++)
              Y[h7 + k4] = Math.abs(Y[h7 + k4] - j8[kr + k4]);
          }
          if (C.Invr.v) B.BR(Y);
          var b0 = B.j(4, T);
          dS.ul(b0, C.Clr.v);
          var bC = u.H().P();
          bC.offset(i, x);
          S = { sE: [b0, Y], PK: bC };
        } else if (a == "OrGl") {
          var dZ,
            cJ = dS.a3T(C),
            b0 = null;
          if (C.GlwT.v.BETE == "SfBL") {
            dZ = u.fF(K, l - K, !0);
            dS.abt(dZ.ef, cJ);
          } else dZ = u.a9P(l, v, !0, cJ);
          var kd = dZ.ef,
            bC = dZ.HA,
            dF = kd.slice(0);
          if (C.Grad == null) {
            dS.hp(kd, C, !1);
            var dL = B.j(4, T);
            dS.ul(dL, C.Clr.v);
            b0 = [dL, kd];
          } else {
            dS.Y9(kd, C);
            var iY = { M2: kd, C7: B.TN(T), VX: 0, Eu: bC };
            b0 = B.j(bC.C() * 4, T);
            dS.Mo(C, b0, bC, G, iY);
            var f7 = bC.r,
              j$ = B.TN(T),
              dt = j$ * (32 / 255);
            for (var y = 0; y < dF.length; y++) {
              var bQ = j$,
                fB = dF[y];
              if (fB < j$) {
                var eP =
                  (fB + dF[y - 1] + dF[y + 1] + dF[y - f7] + dF[y + f7]) * 0.2 -
                  1;
                bQ = Math.min(j$, Math.round(Math.max(0, eP) * 8));
              }
              kd[y] = bQ;
            }
            dS.g2(kd, C, !1);
            B.w6(kd, b0);
          }
          bC.offset(i, x);
          S = { sE: b0, PK: bC };
        } else if (a == "IrGl") {
          var dZ,
            cJ = dS.a3T(C),
            b0 = null;
          if (C.GlwT.v.BETE == "SfBL") {
            dZ = u.fF(K, l - K, !1);
            dS.abt(dZ.ef, cJ);
          } else dZ = u.a9P(l, v, !1, cJ);
          var kd = dZ.ef,
            bC = dZ.HA;
          if (C.glwS.v.IGSr == "SrcC") B.BR(kd);
          if (C.Grad == null) {
            dS.hp(kd, C, !0);
            var dL = B.j(4, T);
            dS.ul(dL, C.Clr.v);
            b0 = [dL, kd];
          } else {
            dS.Y9(kd, C);
            var iY = { M2: kd, C7: B.TN(T), VX: 0, Eu: bC };
            b0 = B.j(bC.C() * 4, T);
            dS.Mo(C, b0, bC, G, iY);
            kd.fill(B.TN(T));
            dS.g2(kd, C, !1);
            B.w6(kd, b0);
          }
          bC.offset(i, x);
          S = { sE: b0, PK: bC };
        } else if (a == "FrFX") {
          var jj = dS.J8(C),
            hU = jj[0],
            bi = jj[1],
            bC = u.H().P(),
            kw = null,
            dY = null,
            b0 = null;
          bC.Lh(Math.ceil(c), Math.ceil(c));
          if (bi > 0) {
            var dZ = u.fF(bi, 0, !0);
            dY = dZ.ef;
            if (dY.length < bC.C()) {
              dY = B.j(bC.C(), T);
              B.sN(dZ.ef, dZ.HA, dY, bC);
            }
          }
          if (hU > 0) {
            var dZ = u.fF(hU, 0, !1);
            kw = B.j(bC.C(), T);
            kw.fill(B.TN(T));
            B.sN(dZ.ef, dZ.HA, kw, bC);
          }
          bC.offset(i, x);
          var g5 = C.PntT.v.FrFl;
          if (g5 == "SClr") {
            var dL = B.j(4, k),
              ge = B.j(bC.C(), k);
            dS.ul(dL, C.Clr.v);
            ge.fill(B.TN(k));
            b0 = [dL, ge];
          } else {
            b0 = B.j(bC.C() * 4, k);
            if (g5 == "GrFl") dS.Mo(C, b0, bC, G, u.azn(hU, bi));
            if (g5 == "Ptrn") dS.oO(C, b0, bC, G.add.Patt, q);
          }
          var ez = C.overprint,
            lu = ez ? ez.v : !1;
          if (lu) {
            var kc = kw ? kw : dY;
            if (kw && dY) B.hV.TM(kw, dY, kc);
            kc = B.sL(kc, k);
            if (b0 instanceof Array) b0[1].set(kc);
            else B.ln(kc, b0, 3);
          }
          S = { sE: b0, PK: bC, Wb: dY, fd: kw, azj: lu };
        }
        X.e[a].push(S);
        if (a == "ebbl") {
          if (S.D9) X.all.push(S.D9, S.NK);
          if (S.oL) X.all.push(S.oL, S.y6);
        } else {
          S.aM = kJ.l7(C.Md.v.BlnM);
          (S.uH = C.Opct.v.val / 100), X.all.push(S);
        }
      }
    }
    return X;
  };
  dS.nD = function (j) {
    var q = 1 / Math.sqrt(j.x * j.x + j.y * j.y + j.VP * j.VP);
    j.x *= q;
    j.y *= q;
    j.VP *= q;
  };
  dS.a5P = function (j, q) {
    return {
      x: j.y * q.VP - j.VP * q.y,
      y: j.VP * q.x - j.x * q.VP,
      VP: j.x * q.y - j.y * q.x,
    };
  };
  dS.awg = function (j, q) {
    return j.x * q.x + j.y * q.y + j.VP * q.VP;
  };
  dS.a3O = function (j, q, m) {
    var n = q.length;
    for (var y = 0; y < n; y++) {
      var G = m[y] - q[y];
      m[y] = G;
    }
    for (var y = 0; y < n; y++) {
      var G = m[y];
      if (G < -j) m[y] = -j;
      else if (G > j) m[y] = j;
    }
  };
  dS.aHe = function (j, q, m, n, G, W, k, T) {
    var b = dS.anU(m, n),
      c = b[0],
      a = b[1],
      f = Math.cos(c) * Math.cos(a),
      U = -Math.sin(c) * Math.cos(a),
      Z = Math.sin(a);
    W.fill(Z);
    if (T) k.fill(Z);
    var h =
        ((m.bvlT.v.bvlT == "SfBL" ? 1 : 0.5) *
          (m.bvlD.v.BESs == "In" ? 1 : -1) *
          m.srgR.v.val) /
        100,
      u = -0.125 * h;
    for (var i = 0; i < q; i++) {
      var x = i == 0 ? 0 : -j,
        X = i == q - 1 ? 0 : j,
        y = i * j;
      for (var $ = 0; $ < j; $++, y++) {
        var H = $ == 0 ? y : y - 1,
          C = $ == j - 1 ? y : y + 1,
          l = G[C] - G[H],
          v = G[y + X] - G[y + x];
        if (l * l + v * v < 0.005) continue;
        var K = G[H + x],
          S = G[C + x],
          o = G[H + X],
          V = G[C + X],
          P = u * (S + 2 * l + V - K - o),
          z = u * (o + 2 * v + V - K - S),
          E = 1 / Math.sqrt(P * P + z * z + 1);
        P *= E;
        z *= E;
        W[y] = Math.max(0, P * f + z * U + E * Z);
        if (T) k[y] = Math.max(0, -P * f - z * U + E * Z);
      }
    }
    return Z;
  };
  dS.aBy = function (j, q, m, n, G, W, k, T, b, c, a, f, U) {
    var Z = 1 / n,
      h = 1 / (1 - n),
      u = 1 / G,
      i = B.oM(T),
      x = B.TN(i),
      X = B.SD.Bh(j.TrnS.v.Crv.v, 1024),
      $ = new Float32Array(2500);
    for (var y = 0; y < 2500; y++) {
      var H = Math.max(0, Math.min(1, (y - 500) * 0.001));
      $[y] = Math.pow(H, 0.2);
    }
    var C = new Float32Array(1024),
      l = new Float32Array(1024);
    for (var y = 0; y < 1024; y++) {
      var v = X[y];
      C[y] = x * (1 - Math.min(1, v * Z));
      l[y] = x * (1 - Math.min(1, (1 - v) * h));
    }
    for (var K = 0; K < m; K++)
      for (var H = 0; H < q; H++) {
        var y = K * q + H,
          S = (k[y] + G * 0.993) * u,
          o = $[~~(500 + S * 1e3)],
          V = ~~(f[y] * 1023);
        b[y] = o * C[V];
        T[y] = o * l[V];
        if (W) {
          V = ~~(U[y] * 1023);
          a[y] = o * C[V];
          c[y] = o * l[V];
        }
      }
  };
  dS.Hc = function (j) {
    var q = dS.ZA(),
      m = j.EG,
      n = !1;
    for (var y = 0; y < 32; y += 8)
      if (
        m[y] + m[y + 1] + m[y + 4] + m[y + 5] != 0 ||
        m[y + 2] + m[y + 3] + m[y + 6] + m[y + 7] != 1020
      )
        n = !0;
    if (n) {
      m = m.slice(0);
      for (var y = 0; y < 40; y += 4) {
        var G = m[y] / 255,
          W = m[y + 1] / 255,
          k = m[y + 2] / 255,
          T = m[y + 3] / 255;
        m[y] = G - 0.001;
        m[y + 1] = G == W ? 1e6 : 1 / (W - G);
        m[y + 2] = k == T ? -1e6 : 1 / (k - T);
        m[y + 3] = T + 0.001;
      }
    }
    var b = j.add.iOpa != null ? j.add.iOpa / 255 : q.fill,
      c = j.add.vstk;
    if (
      c &&
      !c.fillEnabled.v &&
      (!c.strokeEnabled.v || c.strokeStyleLineWidth.v.val == 0)
    )
      b = 0;
    return {
      fill: b,
      qL: n ? m : null,
      X8: j.add.brst != null ? j.add.brst : q.X8,
      a04: j.add.knko != null ? j.add.knko : q.a04,
      style: !1,
      TZ: !1,
    };
  };
  dS.ZA = function () {
    return { fill: 1, qL: null, X8: [1, 1, 1], a04: 0, style: !1, TZ: !1 };
  };
  dS.ao0 = function (j, q, m, n, G, W, k, T) {
    if (T == null) T = 1;
    if (k == null) k = new k$();
    var b = j.Og[1].r,
      c = j.Og[1].$,
      a = new k$(),
      f = G < 2;
    if (f) a.translate(-b / 2, -c / 2);
    if (G == 0) {
      T *= Math.max(m / b, n / c);
    } else if (G == 1) {
      T *= Math.min(m / b, n / c);
    } else if (G == 2) {
      a.scale(1 / b, 1 / c);
      a.concat(k);
      a.scale(m, n);
    } else if (G == 3) {
      T = T;
    }
    a.scale(T, T);
    if (f) a.translate(m / 2, n / 2);
    a.concat(W);
    q.Ptrn.v.Idnt.v = j.id;
    q.Scl.v.val = Math.round(100 * a.Dc());
    q.Angl.v.val = Math.round((180 * Math.atan2(-a.X, a.Sd)) / Math.PI);
    q.Algn.v = !0;
    var U = q.phase.v;
    U.Hrzn.v = Math.round(a.Tt);
    U.Vrtc.v = Math.round(a.BL);
  };
  dS.SP = function (j, q) {
    if (q == null) return null;
    var m = j.Idnt.v,
      n = j.Nm.v;
    for (var y = 0; y < q.length; y++) if (q[y].id == m) return q[y];
    for (var y = 0; y < q.length; y++) if (q[y].name == n) return q[y];
    return null;
  };
  dS.aui = function (j, q, m) {
    var n = ["patternFillMulti", "ebblMulti", "frameFXMulti"];
    for (var y = 0; y < n.length; y++) {
      var G = j.v[n[y]].v;
      for (var W = 0; W < G.length; W++)
        if (G[W].v.Ptrn) q.Vq(dS.SP(G[W].v.Ptrn.v, m));
    }
  };
  dS.axW = function (j, q, m) {
    var n = ["patternFillMulti", "ebblMulti", "frameFXMulti"];
    for (var y = 0; y < n.length; y++) {
      var G = j.v[n[y]].v;
      for (var W = 0; W < G.length; W++)
        if (G[W].v.Ptrn) {
          var k = G[W].v.Ptrn.v,
            T = dS.SP(k, m),
            b = dS.SP(k, q.add.Patt);
          if (T == null && b) m.push(b);
        }
    }
  };
  dS.oO = function (j, q, m, n, G) {
    if (j.Ptrn == null) return;
    var W = dS.SP(j.Ptrn.v, n);
    if (W != null && !m.jG()) {
      var k = W.Og,
        T = k[0],
        b = k[1],
        c = 0;
      B.HZ(k);
      var a = (j.Scl ? j.Scl.v.val : 100) / 100;
      while ((a < 0.3 || a == 0.5) && k[c + 2]) {
        a *= b.r / k[c + 3].r;
        c += 2;
        T = k[c];
        b = k[c + 1];
      }
      var f = B.scale.oO(T, b.r, b.$),
        U = j.phase ? j.phase.v : { Hrzn: { v: 0 }, Vrtc: { v: 0 } },
        Z = j.Angl ? j.Angl.v.val : 0,
        h = -m.x + U.Hrzn.v - 1,
        u = -m.y + U.Vrtc.v - 1;
      if (j.Algn != null && !j.Algn.v) {
      } else if (G) {
        h += G.x;
        u += G.y;
      }
      if (q)
        B.scale.af0(f, q, m.r, m.$, a, a, h + 1, u + 1, (Z * Math.PI) / 180);
      else return [f, a, h + 1, u + 1, (Z * Math.PI) / 180];
    }
  };
  dS.Mo = function (j, q, m, n, G, W, k, T) {
    if (W == null) W = m;
    var b = j.Type ? j.Type.v.GrdT : "shapeburst",
      c = j.Algn && j.Algn.v ? W : new hk(0, 0, n.r, n.$),
      a = j.Angl ? B.MV.aLx(j, c) : [new ea(0, 0), new ea(100, 0)],
      f = a[0].x,
      U = a[0].y,
      Z = a[1].x - f,
      h = a[1].y - U,
      u = Math.sqrt(Z * Z + h * h);
    u = 1 / (2 * u * u);
    var i = [Z * u, h * u, -h * u, Z * u],
      x = j.Rvrs ? j.Rvrs.v : !1,
      X = j.Dthr ? j.Dthr.v : !1,
      $ = j.gradientsInterpolationMethod;
    if ($ == null) $ = j.gs99;
    var H = $ ? $.v.gradientInterpolationMethodType : "Gcls";
    B.MV.S$(
      j.Grad.v,
      q,
      m,
      i,
      f,
      U,
      x,
      eu.MV.types.indexOf(b),
      k == null ? 0 : k,
      T == null ? 0 : T,
      G,
      X,
      H
    );
  };
  dS.an4 = function (j, q, m) {
    for (var y = 0; y < j.all.length; y++) {
      var n = j.all[y];
      n.Ak = n.PK.P();
      n.Ak.offset(q, m);
    }
  };
  dS.ahB = function (j, q, m, n, G, W) {
    var k = fS.tx ? dS.anO : dS.aHI;
    dS.an4(q, m.x, m.y);
    var T = q.e.DrSh;
    for (var y = 0; y < T.length; y++) if (!T[y].aDH) k(T[y], n, G, W);
  };
  dS.adH = function (j, q, m, n, G, W, k, T, b, c, a, f) {
    var U = fS.tx ? dS.anO : dS.aHI,
      Z = fS.tx ? fS.G.XK : B.G.xf,
      h;
    h = q.e.DrSh;
    for (var y = 0; y < h.length; y++) if (h[y].aDH) U(h[y], n, G, W);
    h = q.e.St3D;
    for (var y = 0; y < h.length; y++) U(h[y], n, G, W);
    h = q.e.OrGl;
    for (var y = 0; y < h.length; y++) U(h[y], n, G, W);
    var u = "patternFill GrFl SoFi ChFX IrGl IrSh".split(" ");
    for (var i = 0; i < u.length; i++) {
      var h = q.e[u[i]];
      for (var y = 0; y < h.length; y++) U(h[y], k, T, W);
    }
    var x = q.e.ebbl[0],
      X = x != null && x.ai1;
    h = q.e.FrFX;
    for (var y = 0; y < h.length; y++) {
      var $ = h[y];
      b8.Si.sN(b, c, a, f, W);
      U($, a, f, W);
      if (X && y == h.length - 1) {
        if (x.y6) U(x.y6, a, f, W);
        if (x.oL) U(x.oL, a, f, W);
        if (x.NK) U(x.NK, a, f, W);
        if (x.D9) U(x.D9, a, f, W);
      }
      if ($.azj) {
        if ($.fd || $.fC) {
          U($, k, T, W);
        }
        if ($.Wb || $.G5) {
          U($, n, G, W);
        }
      } else {
        if ($.fd || $.fC) Z(a, f, k, T, fS.tx ? $.fC : $.fd, $.Ak, 0, W, 1);
        if ($.Wb || $.G5) Z(a, f, n, G, fS.tx ? $.G5 : $.Wb, $.Ak, 0, W, 1);
      }
    }
    if (!X && x != null) {
      if (x.y6) U(x.y6, n, G, W);
      if (x.oL) U(x.oL, n, G, W);
      if (x.NK) U(x.NK, k, T, W);
      if (x.D9) U(x.D9, k, T, W);
    }
  };
  dS.aHI = function (j, q, m, n) {
    var G = dS.ZA();
    G.fill = j.uH;
    G.style = !0;
    B.G.Jg(j.aM, j.sE, j.Ak, q, m, n, 1, G);
  };
  dS.anO = function (j, q, m, n) {
    var G = dS.ZA();
    G.fill = j.uH;
    G.style = !0;
    fS.G.aJw(j.aM, j.vF, j.Ak, q, m, n, 1, G);
  };
  dS.a3T = function (j) {
    var q = 1 - j.Inpr.v.val / 100;
    return 1 + Math.tan(q * (Math.PI / 2));
  };
  dS.abt = function (j, q) {
    var m = B.TN(B.oM(j));
    for (var y = 0; y < j.length; y++) j[y] = Math.min(m, j[y] * q);
  };
  dS.Y9 = function (j, q, m) {
    var n = q.blur.v.val,
      G = Math.round(n * (q.Ckmt.v.val / 100));
    if (n > G) dS.aH2(j, q.TrnS.v.Crv.v, m != !0);
  };
  dS.aH2 = function (j, q, m) {
    if (q.length == 2) {
      function n(f) {
        return new ea(f.Hrzn.v, f.Vrtc.v);
      }
      var G = n(q[0].v),
        W = n(q[1].v);
      if (G.x == 0 && G.y == 0 && W.x == 255 && W.y == 255) return;
    }
    var k = 2048,
      T = B.oM(j),
      b = B.TN(T),
      c = (k - 1) / b,
      a = B.SD.aBv(q, k, m, T);
    for (var y = 0; y < j.length; y++) j[y] = a[~~(c * j[y])];
  };
  dS.g2 = function (j, q, m) {
    var n = q.Nose.v.val / 100,
      G = j,
      W = B.oM(j),
      k = B.TN(W),
      T = W == 32 ? k / 2 : k >>> 1,
      b = W == 32 ? 1 / 65535 : W == 16 ? 1 : 1 / 255;
    if (n > 0) {
      if (m)
        for (var y = 0; y < G.length; y++) {
          var c = G[y];
          if (c > 0)
            G[y] = Math.max(0, Math.min(k, c + n * 2 * (b * dS.Ez(y * 3) - T)));
        }
      else
        for (var y = 0; y < G.length; y++) {
          var c = G[y];
          if (c > 0)
            G[y] = Math.max(
              0,
              Math.min(k, c + Math.min(c * 3, n * 2 * (b * dS.Ez(y * 3) - T)))
            );
        }
    }
  };
  dS.hp = function (j, q, m, n) {
    dS.Y9(j, q, n);
    dS.g2(j, q, m);
  };
  dS.ava = function (j, q) {
    var m = q.ShdN.v.val / 100;
    if (m > 0)
      for (var y = 0; y < j.length; y++) {
        var n = j[y];
        n = Math.min(510 - (1 + m) * dS.Ez(y), n);
        j[y] = n;
      }
  };
  dS.Ez = function (j) {
    j = j ^ 61 ^ (j >> 16);
    j = j + (j << 3);
    j = j ^ (j >> 4);
    j = j * 668265261;
    j = j ^ (j >> 15);
    return j & 65535;
  };
  dS.apv = function (j, q, m) {
    var n = B.MV.xH(j);
    if (m != null) {
      n.o = Math.round(n.o * m);
      n.i = Math.round(n.i * m);
      n.X = Math.round(n.X * m);
    }
    return (q << 24) | (n.X << 16) | (n.i << 8) | n.o;
  };
  dS.ul = function (j, q, m) {
    var n = B.oM(j);
    if (n == 8) new Uint32Array(j.buffer).fill(dS.apv(q, 255, m));
    else {
      var G = B.MV.xH(q),
        W = (m == null ? 1 : m) / 255;
      B.nn(j, G.o * W, G.i * W, G.X * W);
      B.EA(j, 1);
    }
  };
  dS.B9 = function (j, q, m, n, G) {
    var W = q.uglg && q.uglg.v ? m.KB() : q[G ? G : "lagl"].v.val;
    W = (W * Math.PI) / 180 + n;
    var k = Math.cos(W) * q.Dstn.v.val,
      T = Math.sin(W) * q.Dstn.v.val;
    j.x -= Math.round(k);
    j.y += Math.round(T);
  };
  dS.anU = function (j, q) {
    var m = j.uglg && j.uglg.v ? q.KB() : j.lagl.v.val;
    m = m * (Math.PI / 180);
    var n = j.uglg && j.uglg.v ? q.AL() : j.Lald.v.val;
    n = n * (Math.PI / 180);
    return [m, n];
  };
  dS.aj9 = function (j) {
    if (j == null || !j.masterFXSwitch.v) return null;
    var q = j.frameFXMulti.v,
      m = null;
    for (var y = 0; y < q.length; y++) if (q[y].v.enab.v) m = q[y].v;
    if (m == null) return null;
    var n = eu.rS.i4();
    dS.a3n(m, n);
    return n;
  };
  dS.a3n = function (j, q) {
    var m = eu.stroke.CE.indexOf(j.PntT.v.FrFl),
      n = [eu.dS, eu.GB, eu.Pa][m],
      G = (q.strokeStyleContent.v = { classID: eu.rS.HF[m] });
    for (var y = 0; y < n.length; y++) G[n[y]] = j[n[y]];
    q.strokeEnabled = j.enab;
    q.strokeStyleLineWidth = j.Sz;
    q.strokeStyleLineAlignment.v.strokeStyleLineAlignment =
      eu.rS.Jr[eu.stroke.types.indexOf(j.Styl.v.FStl)];
    q.strokeStyleOpacity = j.Opct;
    q.strokeStyleBlendMode = j.Md;
    q.strokeStyleLineJoinType.v.strokeStyleLineJoinType =
      "strokeStyleRoundJoin";
  };
  dS.Uy = function (j, q) {
    var m = [];
    for (var y = 0; y < j.length; y++)
      m.push({ t: "UntF", v: { type: "#Nne", val: j[y] * q } });
    return m;
  };
  dS.aDs = function (j, q) {
    var m = (j.yA / 255) * (j.add.iOpa ? j.add.iOpa / 255 : 1),
      n = j.add.TySh,
      G =
        j.D1() ||
        (j.ql() &&
          j.add.vmsk &&
          j.add.vstk.fillEnabled.v &&
          j.add.vstk.strokeEnabled.v);
    if (n) {
      var W = n.s3.EngineDict.StyleRun.RunArray,
        k = W[0].StyleSheet.StyleSheetData,
        T = 0;
      if (k.FillFlag) T++;
      if (k.StrokeFlag) T++;
      if (k._FillBackgroundFlag) T++;
      if (T > 1) G = !0;
    }
    return G && (q || m != 1 || (j.hz != "pass" && j.hz != "norm"));
  };
  dS.LK = function (j, q, m, n) {
    this.Fh = q.P();
    this.a8n = q.P();
    this.a8n.Lh(m, m);
    if (n) {
      this.Fh.Lh(1, 1);
      this.Fw = B.j(this.Fh.C(), B.oM(j));
      B.sN(j, q, this.Fw, this.Fh);
    } else this.Fw = j;
    this.hO = null;
    this.ed = null;
    this.Yl = null;
  };
  dS.LK.prototype.ef = function () {
    return this.Fw;
  };
  dS.LK.prototype.H = function () {
    return this.Fh;
  };
  dS.LK.prototype.r7 = function () {
    return this.a8n;
  };
  dS.LK.prototype.V_ = function () {
    if (this.hO) return this.hO;
    this.hO = this.ef().slice(0);
    B.BR(this.hO);
    return this.hO;
  };
  dS.LK.prototype.ow = function () {
    if (this.ed) return this.ed;
    this.ed = B.style.Af(this.V_(), this.H().r, this.H().$);
    return this.ed;
  };
  dS.LK.prototype.zM = function () {
    if (this.Yl) return this.Yl;
    var j = this.r7(),
      q = B.j(j.C(), B.oM(this.ef()));
    B.sN(this.ef(), this.H(), q, j);
    var m = Date.now();
    this.Yl = B.style.Af(q, j.r, j.$);
    return this.Yl;
  };
  dS.LK.prototype.azn = function (j, q) {
    var m = { C7: -q, VX: j, Eu: null, M2: null };
    if (q == 0) {
      m.Eu = this.H();
      m.M2 = this.ow();
      return m;
    }
    var n = this.zM().slice(0),
      G = this.r7();
    m.Eu = G;
    m.M2 = n;
    for (var y = 0; y < n.length; y++) n[y] = -n[y];
    if (j == 0) return m;
    var W = this.ow(),
      k = this.H();
    for (var T = 0; T < k.$; T++)
      for (var b = 0; b < k.r; b++) {
        var c = T * k.r + b,
          a = (T + k.y - G.y) * G.r + b + k.x - G.x;
        n[a] += W[c];
      }
    return m;
  };
  dS.LK.prototype.fF = function (j, q, m) {
    var n = Math.ceil(j + q),
      G = { HA: this.H().P(), ef: null };
    G.HA.Lh(n, n);
    G.ef = B.j(G.HA.C(), B.oM(this.ef()));
    if (j == 0 && q == 0) B.wV(m ? this.ef() : this.V_(), G.ef);
    else {
      var W = G.ef;
      B.sN(this.ef(), this.H(), W, G.HA);
      if (!m) B.BR(W);
      if (j != 0) {
        if (m) B.style.jd(W, G.HA, this.zM(), this.r7(), j);
        else B.style.jd(W, G.HA, this.ow(), this.H(), j);
      }
      if (q != 0) B.Zl.oY(W, G.HA, Math.max(1, q * 0.43));
    }
    return G;
  };
  dS.LK.prototype.a9P = function (j, q, m, n) {
    var G = j * (q - 0.5),
      W = 1 / j,
      k = { HA: this.H().P(), ef: null };
    if (m) k.HA.Lh(j, j);
    var T = B.oM(this.ef()),
      b = B.TN(T);
    k.ef = B.j(k.HA.C(), T);
    var c = m ? this.zM() : this.ow(),
      a = m ? this.r7() : this.H(),
      f = k.HA,
      U = f.TM(a),
      Z = U.r,
      h = U.$,
      u = U.x - f.x,
      i = U.y - f.y,
      x = U.x - a.x,
      X = U.y - a.y,
      $ = 1 - q * 2;
    for (var H = 0; H < h; H++)
      for (var C = 0; C < Z; C++) {
        var l = c[(H + X) * a.r + C + x],
          v = l * W;
        k.ef[(H + i) * f.r + C + u] =
          b * Math.max(0, Math.min(1, n * (1 - (v + $) / (1 + $))));
      }
    return k;
  };
  dS.aD2 = function (j, q, m, n) {
    var G = j.Lefx,
      W = j.blendOptions;
    if (G) {
      var k = q.add.lmfx;
      if (m == null) m = k ? k.Scl.v.val : 100;
      q.add.lmfx = B.S(G.v);
      if (q.add.lmfx.Scl == null)
        q.add.lmfx.Scl = { t: "UntF", v: { type: "#Prc", val: 100 } };
      dS.yI(q.add.lmfx, m / q.add.lmfx.Scl.v.val);
      if (k) q.add.lmfx.Scl.v.val = k.Scl.v.val;
      var T = G.v.gagl;
      if (T && n) n.CO(T.v.val);
    } else delete q.add.lmfx;
    if (W) {
      W = W.v;
      if (W.Md) q.hz = kJ.l7(W.Md.v.BlnM);
      if (W.Opct) q.yA = Math.round((W.Opct.v.val * 255) / 100);
      if (W.fillOpacity)
        q.add.iOpa = Math.round((W.fillOpacity.v.val * 255) / 100);
      if (W.Blnd) {
        var b = [];
        for (var y = 0; y < 10; y++) b.push(0, 0, 255, 255);
        var c = W.Blnd.v,
          a = "SrcB Srcl SrcW Srcm DstB Dstl DstW Dstt".split(" ");
        for (var y = 0; y < c.length; y++) {
          var f = c[y].v,
            U = 8 * ["Gry", "Rd", "Grn", "Bl"].indexOf(f.Chnl.v[0].v.enum);
          for (var Z = 0; Z < 8; Z++) {
            b[U + Z] = f[a[Z]].v;
          }
        }
        q.EG = b;
      }
    }
  };
  dS.aCi = function (j) {
    var q = "SrcB Srcl SrcW Srcm DstB Dstl DstW Dstt".split(" "),
      m = [],
      n = j.EG;
    for (var y = 0; y < 4; y++) {
      var G = y * 8;
      if (
        n[G] + n[G + 1] + n[G + 4] + n[G + 5] == 0 &&
        n[G + 2] + n[G + 3] + n[G + 6] + n[G + 7] == 4 * 255
      )
        continue;
      var W = {
        t: "Objc",
        v: {
          classID: "Blnd",
          Chnl: {
            t: "obj ",
            v: [
              {
                t: "Enmr",
                v: {
                  classID: "Chnl",
                  typeID: "Chnl",
                  enum: ["Gry", "Rd", "Grn", "Bl"][y],
                },
              },
            ],
          },
        },
      };
      m.push(W);
      for (var k = 0; k < 8; k++) W.v[q[k]] = { t: "long", v: n[y * 8 + k] };
    }
    var T = { classID: "blendOptions" };
    if (j.hz != "norm") T.Md = { t: "enum", v: { BlnM: kJ.il(j.hz) } };
    if (j.yA != 255)
      T.Opct = {
        t: "UntF",
        v: { type: "#Prc", val: Math.round((j.yA * 100) / 255) },
      };
    if (j.add.iOpa != null)
      T.fillOpacity = {
        t: "UntF",
        v: { type: "#Prc", val: Math.round((j.add.iOpa * 100) / 255) },
      };
    if (m.length != 0) T.Blnd = { t: "VlLs", v: m };
    var b = {
        So: {
          classID: "null",
          Idnt: { t: "TEXT", v: fb.Rh() + "-bd9f-11d5-b8ba-b73f8571793d" },
          Nm: { t: "TEXT", v: "Default/Custom Style" },
        },
        yL: { classID: "Styl", blendOptions: { t: "Objc", v: T } },
      },
      c = j.add.lmfx;
    if (c) b.yL.Lefx = { t: "Objc", v: c };
    return b;
  };
  function fc() {}
  fc.vM = function (j) {
    var q = B.S(fc.a3C),
      m = q.Brsh.v;
    if (j != null) {
      delete m.Hrdn;
      m.classID = "sampledBrush";
      m.sampledData = { t: "TEXT", v: j };
    }
    return q;
  };
  fc.a3C = {
    classID: "brushPreset",
    Nm: { t: "TEXT", v: "Default/My Custom Brush" },
    Brsh: {
      t: "Objc",
      v: {
        classID: "computedBrush",
        Dmtr: { t: "UntF", v: { type: "#Pxl", val: 15 } },
        Hrdn: { t: "UntF", v: { type: "#Prc", val: 100 } },
        Angl: { t: "UntF", v: { type: "#Ang", val: 0 } },
        Rndn: { t: "UntF", v: { type: "#Prc", val: 100 } },
        Spcn: { t: "UntF", v: { type: "#Prc", val: 25 } },
        Intr: { t: "bool", v: !0 },
        flipX: { t: "bool", v: !1 },
        flipY: { t: "bool", v: !1 },
      },
    },
    useTipDynamics: { t: "bool", v: !1 },
    useScatter: { t: "bool", v: !1 },
    dualBrush: {
      t: "Objc",
      v: { classID: "dualBrush", useDualBrush: { t: "bool", v: !1 } },
    },
    brushGroup: {
      t: "Objc",
      v: { classID: "brushGroup", useBrushGroup: { t: "bool", v: !1 } },
    },
    useTexture: { t: "bool", v: !1 },
    usePaintDynamics: { t: "bool", v: !1 },
    useColorDynamics: { t: "bool", v: !1 },
    Wtdg: { t: "bool", v: !1 },
    Nose: { t: "bool", v: !1 },
    Rpt: { t: "bool", v: !1 },
  };
  fc.aeR = function (j, q) {
    var m = ["opVr", "szVr"],
      n = ["usePaintDynamics", "useTipDynamics"];
    for (var y = 0; y < 2; y++) {
      var G = m[y];
      if (j[G] == null) j[G] = JSON.parse(fc.nD.IV[G]);
      j[G].v.bVTy.v = q[y] ? 2 : 0;
      if (q[y]) j[n[y]].v = !0;
    }
    fc.nD.a2k(j);
  };
  fc.nD = {};
  fc.nD.check = function (j) {
    var q = fc.nD.W2;
    for (var y = 0; y < q.length; y++)
      if (j[q[y]] == null) j[q[y]] = JSON.parse(fc.nD.IV[q[y]]);
    var m = [];
    for (var y = 0; y < q.length; y++) m.push(q[y]);
    var n = fc.nD.aGh;
    for (var y = 0; y < n.length; y++) {
      var G = n[y][0],
        W = n[y][1],
        k = !0;
      for (var T = 0; T < G.length; T++) k = k && j[G[T]].v == !0;
      if (k)
        for (var T = 0; T < W.length; T++) {
          if (j[W[T]] == null)
            console.log("Missing conditional parameter " + W[T]);
          else m.push(W[T]);
        }
    }
    for (var b in j)
      if (m.indexOf(b) == -1 && b != "toolOptions")
        console.log("Extra parameter " + b);
    j = j.Brsh.v;
    q = fc.nD.YP.W2;
    for (var y = 0; y < q.length; y++)
      if (j[q[y]] == null) j[q[y]] = JSON.parse(fc.nD.YP.IV[q[y]]);
    m = [];
    for (var y = 0; y < q.length; y++)
      if (j[q[y]]) m.push(q[y]);
      else console.log("Missing default parameter " + q[y]);
    n = fc.nD.YP.ap6[j.classID];
    for (var y = 0; y < n.length; y++)
      if (
        j[n[y]] == null &&
        n[y] != "dtipsGridSize" &&
        n[y] != "dtipsErodibleTipHeightMap" &&
        j.agK != 1
      )
        console.log("Missing conditional parameter " + n[y]);
      else m.push(n[y]);
    for (var b in j)
      if (m.indexOf(b) == -1) console.log("Extra parameter " + b);
  };
  fc.nD.a2k = function (j) {
    var q = fc.nD.aGh;
    for (var y = 0; y < q.length; y++) {
      var m = q[y][0],
        n = q[y][1],
        G = !0;
      for (var W = 0; W < m.length; W++) G = G && j[m[W]] && j[m[W]].v == !0;
      if (G) {
        for (var W = 0; W < n.length; W++)
          if (j[n[W]] == null) {
            j[n[W]] = JSON.parse(fc.nD.IV[n[W]]);
          }
      } else
        for (var W = 0; W < n.length; W++)
          if (j[n[W]] != null) {
            delete j[n[W]];
          }
    }
  };
  fc.nD.YP = {};
  fc.nD.YP.W2 = "classID Dmtr Angl Spcn Intr flipX flipY".split(" ");
  fc.nD.YP.IV = {
    flipX: '{"t":"bool","v":false}',
    flipY: '{"t":"bool","v":false}',
  };
  fc.nD.YP.ap6 = {
    computedBrush: ["Hrdn", "Rndn"],
    sampledBrush: ["Nm", "Rndn", "sampledData"],
    dBrush: "Shp Dnst Lngt clumping thickness stiffness physics".split(" "),
    dTips:
      "dtipsType Shp dtipsLengthRatio dtipsHardness dtipsGridSize dtipsErodibleTipHeightMap physics dtipsAirbrushCutoffAngle dtipsAirbrushGranularity dtipsAirbrushStreakiness dtipsAirbrushSplatSize dtipsAirbrushSplatCount".split(
        " "
      ),
  };
  fc.nD.aGh = [
    [
      ["useTipDynamics"],
      "flipX flipY brushProjection minimumDiameter minimumRoundness tiltScale szVr angleDynamics roundnessDynamics".split(
        " "
      ),
    ],
    [["usePaintDynamics"], ["prVr", "opVr", "wtVr", "mxVr"]],
    [
      ["useBrushPose"],
      "overridePoseAngle overridePoseTiltX overridePoseTiltY overridePosePressure brushPosePressure brushPoseTiltX brushPoseTiltY brushPoseAngle".split(
        " "
      ),
    ],
    [
      ["useTexture"],
      "TxtC interpretation textureBlendMode textureDepth minimumDepth textureDepthDynamics Txtr textureScale InvT textureBrightness textureContrast".split(
        " "
      ),
    ],
    [
      ["useColorDynamics"],
      "clVr H Strt Brgh purity colorDynamicsPerTip".split(" "),
    ],
    [["useScatter"], ["Cnt", "countDynamics", "bothAxes", "scatterDynamics"]],
    [["useScatter", "bothAxes"], ["Spcn"]],
  ];
  fc.nD.W2 =
    "classID Nm Brsh useTipDynamics usePaintDynamics useColorDynamics useScatter useTexture useBrushSize useBrushPose Wtdg Nose Rpt dualBrush brushGroup".split(
      " "
    );
  fc.nD.IV = {
    useBrushSize: '{"t":"bool","v":false}',
    useBrushPose: '{"t":"bool","v":false}',
    brushGroup:
      '{"t":"Objc","v":{"classID":"brushGroup","useBrushGroup":{"t":"bool","v":false}}}',
    flipX: '{"t":"bool","v":false}',
    flipY: '{"t":"bool","v":false}',
    brushProjection: '{"t":"bool","v":false}',
    minimumDiameter: '{"t":"UntF","v":{"type":"#Prc","val":0}}',
    minimumRoundness: '{"t":"UntF","v":{"type":"#Prc","val":25}}',
    tiltScale: '{"t":"UntF","v":{"type":"#Prc","val":200}}',
    szVr: '{"t":"Objc","v":{"classID":"brVr","bVTy":{"t":"long","v":0},"fStp":{"t":"long","v":100},"jitter":{"t":"UntF","v":{"type":"#Prc","val":0}},"Mnm":{"t":"UntF","v":{"type":"#Prc","val":0}}}}',
    angleDynamics:
      '{"t":"Objc","v":{"classID":"brVr","bVTy":{"t":"long","v":0},"fStp":{"t":"long","v":100},"jitter":{"t":"UntF","v":{"type":"#Prc","val":0}},"Mnm":{"t":"UntF","v":{"type":"#Prc","val":0}}}}',
    roundnessDynamics:
      '{"t":"Objc","v":{"classID":"brVr","bVTy":{"t":"long","v":0},"fStp":{"t":"long","v":100},"jitter":{"t":"UntF","v":{"type":"#Prc","val":0}},"Mnm":{"t":"UntF","v":{"type":"#Prc","val":0}}}}',
    prVr: '{"t":"Objc","v":{"classID":"brVr","bVTy":{"t":"long","v":0},"fStp":{"t":"long","v":100},"jitter":{"t":"UntF","v":{"type":"#Prc","val":0}},"Mnm":{"t":"UntF","v":{"type":"#Prc","val":0}}}}',
    opVr: '{"t":"Objc","v":{"classID":"brVr","bVTy":{"t":"long","v":0},"fStp":{"t":"long","v":100},"jitter":{"t":"UntF","v":{"type":"#Prc","val":0}},"Mnm":{"t":"UntF","v":{"type":"#Prc","val":0}}}}',
    wtVr: '{"t":"Objc","v":{"classID":"brVr","bVTy":{"t":"long","v":0},"fStp":{"t":"long","v":100},"jitter":{"t":"UntF","v":{"type":"#Prc","val":0}},"Mnm":{"t":"UntF","v":{"type":"#Prc","val":0}}}}',
    mxVr: '{"t":"Objc","v":{"classID":"brVr","bVTy":{"t":"long","v":0},"fStp":{"t":"long","v":100},"jitter":{"t":"UntF","v":{"type":"#Prc","val":0}},"Mnm":{"t":"UntF","v":{"type":"#Prc","val":0}}}}',
    overridePoseAngle: '{"t":"bool","v":false}',
    overridePoseTiltX: '{"t":"bool","v":true}',
    overridePoseTiltY: '{"t":"bool","v":true}',
    overridePosePressure: '{"t":"bool","v":true}',
    brushPosePressure: '{"t":"UntF","v":{"type":"#Prc","val":9}}',
    brushPoseTiltX: '{"t":"long","v":0}',
    brushPoseTiltY: '{"t":"long","v":0}',
    brushPoseAngle: '{"t":"long","v":0}',
    TxtC: '{"t":"bool","v":false}',
    interpretation: '{"t":"bool","v":true}',
    textureBlendMode: '{"t":"enum","v":{"BlnM":"CBrn"}}',
    textureDepth: '{"t":"UntF","v":{"type":"#Prc","val":37}}',
    minimumDepth: '{"t":"UntF","v":{"type":"#Prc","val":97}}',
    textureDepthDynamics:
      '{"t":"Objc","v":{"classID":"brVr","bVTy":{"t":"long","v":0},"fStp":{"t":"long","v":100},"jitter":{"t":"UntF","v":{"type":"#Prc","val":0}},"Mnm":{"t":"UntF","v":{"type":"#Prc","val":0}}}}',
    Txtr: '{"t":"Objc","v":{"classID":"Ptrn","Nm":{"t":"TEXT","v":"$$$/Presets/Patterns/Patterns_pat/Laidhorizontal=Laid-horizontal"},"Idnt":{"t":"TEXT","v":"52a93427-f5d6-1172-a989-8dc82a43aa51"}}}',
    textureScale: '{"t":"UntF","v":{"type":"#Prc","val":99}}',
    InvT: '{"t":"bool","v":false}',
    textureBrightness: '{"t":"long","v":14}',
    textureContrast: '{"t":"long","v":100}',
    Cnt: '{"t":"doub","v":4}',
    countDynamics:
      '{"t":"Objc","v":{"classID":"brVr","bVTy":{"t":"long","v":0},"fStp":{"t":"long","v":100},"jitter":{"t":"UntF","v":{"type":"#Prc","val":98}},"Mnm":{"t":"UntF","v":{"type":"#Prc","val":0}}}}',
    bothAxes: '{"t":"bool","v":false}',
    scatterDynamics:
      '{"t":"Objc","v":{"classID":"brVr","bVTy":{"t":"long","v":0},"fStp":{"t":"long","v":100},"jitter":{"t":"UntF","v":{"type":"#Prc","val":56}},"Mnm":{"t":"UntF","v":{"type":"#Prc","val":0}}}}',
    clVr: '{"t":"Objc","v":{"classID":"brVr","bVTy":{"t":"long","v":0},"fStp":{"t":"long","v":100},"jitter":{"t":"UntF","v":{"type":"#Prc","val":0}},"Mnm":{"t":"UntF","v":{"type":"#Prc","val":0}}}}',
    H: '{"t":"UntF","v":{"type":"#Prc","val":0}}',
    Strt: '{"t":"UntF","v":{"type":"#Prc","val":0}}',
    Brgh: '{"t":"UntF","v":{"type":"#Prc","val":36}}',
    purity: '{"t":"UntF","v":{"type":"#Prc","val":0}}',
    colorDynamicsPerTip: '{"t":"bool","v":false}',
  };
  function k_(j, q) {
    this.agP = j;
    this.ny = q == null ? 0 : q;
    this.dir = 0;
  }
  k_.prototype.e_ = function (j, q) {
    var m = this.agP,
      n = new ea(j.x - m.x, j.y - m.y),
      G = new k$();
    G.rotate(-this.ny);
    n = G.uL(n);
    if (this.dir == 0 && !m.Lg(j))
      this.dir = Math.abs(n.x) < Math.abs(n.y) ? 1 : 2;
    if (q.M(gn.X6)) {
      if (this.dir == 1) n.x = 0;
      if (this.dir == 2) n.y = 0;
    }
    G.BR();
    n = G.uL(n);
    var W = new ea(m.x + n.x, m.y + n.y);
    return W;
  };
  k_.prototype.aox = function (j) {
    if (j.M(gn.X6)) return this.dir;
    return 0;
  };
  var eg = (function () {
    function j() {
      this.a7l = {};
    }
    j.afB = function (q, m) {
      var n = q.P();
      n.Tt -= Math.floor(n.Tt);
      n.BL -= Math.floor(n.BL);
      var G = new ea(m, 0),
        W = new ea(0, m),
        k = n.uL(G),
        T = n.uL(W),
        b = new ea(n.Tt, n.BL);
      return [k, T, b];
    };
    j.azA = function (q, m) {
      var n = ea.gw;
      return n(q[0], m[0]) + n(q[1], m[1]) + n(q[2], m[2]);
      return dsum;
    };
    j.prototype.a1F = function (q) {
      var m = this.a7l,
        n = m[q];
      if (n == null) n = m[q] = { h3: [], YY: 0, C: 0, axS: 0, awt: 0 };
      n.YY = Date.now();
      while (Object.keys(m).length > 3) {
        var G = "",
          W = Date.now();
        for (var k in m) {
          var T = m[k].YY;
          if (T < W) {
            W = T;
            G = k;
          }
        }
        delete m[G];
      }
      return n;
    };
    j.prototype.a6L = function (q, m) {
      var n = q.h3,
        G,
        W = 1e6;
      for (var y = 0; y < n.length; y++) {
        var k = n[y],
          T = j.azA(k.LH, m);
        if (T < W) {
          G = k;
          W = T;
        }
      }
      return G;
    };
    j.prototype.agt = function (q, m) {
      var n = q.h3;
      n.push(m);
      q.C += m.H.C();
      if (n.length > 1e3 || q.C > 100 * 100 * 1600) {
        n.sort(function (W, k) {
          return k.YY - W.YY;
        });
        while (n.length > 500 || q.C > 100 * 100 * 800) {
          var G = n.pop();
          q.C -= G.H.C();
        }
      }
    };
    return j;
  })();
  function e4(j, q, m, n, G, W, k, T, b) {
    this.cd = q;
    this.cs = m;
    this.vH = W;
    this.eQ = n;
    this.gn = null;
    this.Et = null;
    this.h9 = 0;
    this.a9W = 0;
    this.ajA = 0;
    this.By = 0;
    this.Jt = 0;
    this.ZW = b == null ? Math.floor(Math.random() * 16777215) : b;
    this.nX = b == null ? Math.floor(Math.random() * 16777215) : b;
    this.Iu = new hk();
    this.PJ = new hk();
    this.FZ = n.depth ? n.depth : 8;
    if (T != null) {
      this.sE = T;
    } else {
      var c = e4.aEl;
      if (c.length != k.C() * 4) c = B.j(k.C() * 4, this.FZ);
      else c.fill(0);
      this.sE = e4.aEl = c;
    }
    this.H = k.P();
    this.DS = [];
    this.Tn = [];
    this.BE = null;
    this.UP = 0;
    this.X = null;
    this.axF = "";
    this._I = null;
    this.adV = null;
    this.al6(j, G);
  }
  e4.aEl = B.j(0);
  e4.prototype.al6 = function (j, q) {
    this.UP = q;
    this.X = j;
    this.axF = JSON.stringify(j) + JSON.stringify(this.eQ.mv);
    this._I = e4.aqO(this.X, this.cd, this.cs);
    this._I.Og[0] = B.sL(this._I.Og[0], this.FZ);
    this.adV = B.j(this._I.Og[1].C() * 4, this.FZ);
    B.ln(this._I.Og[0], this.adV, 3);
  };
  e4.prototype.moveTo = function (j, q, m) {
    m = this.a3s(m);
    this.h9 = m;
    var n = new ea(j, q),
      G = this.X.Brsh.v.Dmtr.v.val;
    this.gn = n.P();
    this.Et = n.P();
    this.BE = n.P();
    this.DS = [j, q];
    this.Tn = [m];
    if (this.eQ.ahz != e4.Ro) {
      var W = this.X.angleDynamics,
        k = W ? W.v.bVTy.v == 6 : !1;
      this.Wu(k ? new hk() : this.a5r(n, this.awG(m), m, new ea(0, 0)));
    }
    this.By = n.P();
  };
  e4.prototype.lineTo = function (j, q, m) {
    m = this.a3s(m);
    var n = this.DS,
      G = n.length,
      W = n[G - 2],
      k = n[G - 1];
    if (j == W && q == k) return;
    var T = this.X.Brsh.v.Dmtr.v.val,
      b = Math.ceil(T) + 1,
      c = new hk(Math.round(W), Math.round(k), 0, 0);
    c.Lh(b, b);
    var a = new hk(Math.round(j), Math.round(q), 0, 0);
    a.Lh(b, b);
    this.DS.push(j, q);
    this.Tn.push(m);
    G += 2;
    if (G >= 6) this.Wu(this.aDC(G));
  };
  e4.prototype.a3s = function (j) {
    if (j == null) j = 1;
    j = Math.max(0.05, Math.min(5, j));
    if (isNaN(j)) {
      alert("Pressure is not a number");
      throw "e";
    }
    return j;
  };
  e4.prototype.Wu = function (j) {
    this.Iu = j;
    this.PJ = this.PJ.vd(j);
  };
  e4.prototype.finish = function () {
    var j = this.DS,
      q = j.length,
      m;
    if (q == 4) m = this.jK(j[q - 2], j[q - 1], this.Tn[(q >> 1) - 1], !0);
    if (q > 4) m = this.aDC(q + 2);
    if (m) this.Wu(m);
  };
  e4.prototype.Fj = function () {
    return this.H.P();
  };
  e4.prototype.WF = function () {
    return this.Iu.TM(this.H);
  };
  e4.prototype.XQ = function () {
    return this.PJ.TM(this.H);
  };
  e4.prototype.qX = function () {
    return this.sE;
  };
  e4.prototype.aDC = function (j) {
    var q = this.DS,
      m = this.Tn,
      n = q[j - 6],
      G = q[j - 5],
      W = q[j - 4],
      k = q[j - 3],
      T = m[(j >> 1) - 3],
      b = m[(j >> 1) - 2],
      c = new ea(0, 0),
      a = new ea(0, 0);
    if (8 <= j) c = e4.a59(q[j - 8], q[j - 7], n, G, W, k);
    if (j <= q.length) a = e4.a59(q[j - 2], q[j - 1], W, k, n, G);
    var f = n + c.x,
      U = G + c.y,
      Z = W + a.x,
      h = k + a.y,
      u = new hk(),
      i = this.aFC() ? 1 : 10;
    for (var y = 0; y < i; y++) {
      var x = (y + 1) / i,
        X = 1 - x,
        $ =
          X * X * X * n + 3 * x * X * X * f + 3 * x * x * X * Z + x * x * x * W,
        H =
          X * X * X * G + 3 * x * X * X * U + 3 * x * x * X * h + x * x * x * k,
        C = this.jK($, H, T + x * (b - T));
      u = u.vd(C);
    }
    return u;
  };
  e4.a59 = function (j, q, m, n, G, W) {
    var k = j - m,
      T = q - n,
      b = G - m,
      c = W - n,
      a = Math.sqrt(k * k + T * T),
      f = Math.sqrt(b * b + c * c),
      U = Math.acos((k * b + T * c) / (a * f)) / Math.PI,
      Z = 0.35,
      h = 0.1;
    U = h + U * (Z - h);
    var u = G - j,
      i = W - q,
      x = Math.sqrt(u * u + i * i),
      X = (U * f) / x;
    return new ea(u * X, i * X);
  };
  e4.prototype.jK = function (j, q, m, n) {
    var G = new hk(),
      W = this.eQ.aLY;
    if (W == null) W = 0;
    if (W == 0 || n) {
      G = this.av2(j, q, m);
      return G;
    }
    var k = this.BE,
      T = j - k.x,
      b = q - k.y,
      c = Math.sqrt(T * T + b * b);
    T /= c;
    b /= c;
    if (c > W) {
      var a = k.x + T * (c - W),
        f = k.y + b * (c - W);
      G = this.av2(a, f, m);
      this.BE.Tu(a, f);
    }
    return G;
  };
  e4.prototype.aFC = function () {
    var j = this.X,
      q = j.Brsh.v.Dmtr.v.val;
    return this.eQ.mv && q == 1;
  };
  e4.prototype.av2 = function (j, q, m) {
    var n = new hk(),
      G = new ea(j, q),
      W = this.eQ.ahz,
      k = G.mN(this.Et);
    k.normalize(1);
    var T = ea.gw(this.Et, G),
      b = -this.a9W,
      c = this.Et.P();
    if (this.aFC()) {
      if (T > 0.99) {
        var a = this.Et,
          f = B.vW.ax7(G, this.H, this.eQ.oW);
        for (var y = 0; y < f.length; y++) {
          var U = f[y],
            Z = U.uL(a),
            h = U.uL(G);
          e4.aoJ(Z, h, this.sE, this.H, this.ke(this.X));
          n = n.vd(B.b.YU([Z.x, Z.y, h.x, h.y]));
        }
        b = T;
      } else G = this.Et;
    } else
      while (!0) {
        var u = this.h9 + (m - this.h9) * (Math.max(0, b) / T),
          i = this.awG(u),
          x = ((this.adB() * (i + this.ajA)) / 2) * this._I.ar7;
        if (W == e4.Ro) x = 1;
        x = Math.max(x, 0.5);
        if (b + x < T) {
          b += x;
          this.Jt += x;
          var X = new ea(this.Et.x + k.x * b, this.Et.y + k.y * b),
            H = 1;
          if (W == e4.Ro) {
            var h = c.P();
            h.x += k.x > 0 ? 1 : -1;
            var $ = c.P();
            $.y += k.y > 0 ? 1 : -1;
            if (ea.gw(h, X) < ea.gw($, X)) X = h;
            else X = $;
            b = ea.gw(X, this.Et);
          }
          if (this.X.useScatter.v == !0) {
            H = this.X.Cnt.v;
            var C = this.X.countDynamics.v.jitter.v.val / 100,
              l = C * (-1 + 2 * this.ET());
            H += Math.round(H * l);
          }
          for (var y = 0; y < H; y++) {
            var v = this.a5r(X, i, m, k);
            n = n.vd(v);
          }
          c = X;
        } else break;
      }
    this.a9W = T - b;
    this.Et = G;
    this.h9 = m;
    return n;
  };
  e4.prototype.adB = function () {
    var j = this.X.Brsh.v,
      q = j.Spcn.v.val,
      m = Math.max(5, j.Rndn.v.val);
    return (m / 100) * (q / 100);
  };
  e4.prototype.awG = function (j) {
    var q = this.X,
      m = q.Brsh.v.Dmtr.v.val;
    if (q.useTipDynamics.v) {
      var n = m * (q.minimumDiameter.v.val / 100);
      m = n + (m - n) * (1 - this.ET(this.nX) * (q.szVr.v.jitter.v.val / 100));
      m *= e4.ot(q, "szVr", j, this.Jt);
    }
    return m;
  };
  e4.ot = function (j, q, m, n) {
    var G = 1,
      W = j[q].v,
      k = W.bVTy.v,
      T = W.fStp.v;
    if (k == 1) G *= Math.max(0, (T - n) / T);
    if (k == 2) G *= m;
    return G;
  };
  e4.prototype.a5r = function (j, q, m, n) {
    var G = this.eQ.rv,
      u = 0;
    G = Math.min(1, G);
    var W = this.X,
      k = this.X.Brsh.v,
      T = k.Dmtr.v.val,
      b = this.eQ,
      c = b.ahz,
      a = b.aae,
      f = this._I.Og[1],
      U = new k$();
    U.translate(-f.r / 2, -f.$ / 2);
    U.scale(1 / this._I.avL, 1 / this._I.avL);
    U.scale(q / T, q / T);
    U.scale(1, Math.max(5, k.Rndn.v.val) / 100);
    if (W.usePaintDynamics && W.usePaintDynamics.v) {
      var Z = W.opVr.v.jitter.v.val / 100,
        h = W.prVr.v.jitter.v.val / 100;
      G *= 1 - this.ET() * Z;
      G *= 1 - this.ET() * h;
      G *= e4.ot(W, "opVr", m, this.Jt) * e4.ot(W, "prVr", m, this.Jt);
    }
    if (W.useTipDynamics.v) {
      var i = W.angleDynamics.v,
        x = W.minimumRoundness.v.val / 100;
      U.scale(
        1,
        x +
          ((1 - x) *
            Math.round(100 - this.ET() * W.roundnessDynamics.v.jitter.v.val)) /
            100
      );
      u += (-0.5 + this.ET()) * 4 * Math.PI * (i.jitter.v.val / 100);
      u += e4.ot(W, "angleDynamics", m, this.Jt) * 2 * Math.PI;
      if (i.bVTy.v == 6) u += Math.atan2(-n.y, n.x);
    }
    u += k.Angl.v.val * (Math.PI / 180);
    U.rotate(u);
    if (W.useScatter.v) {
      var X = ((-1 + 2 * this.ET()) * W.scatterDynamics.v.jitter.v.val) / 100;
      U.translate(-X * q * n.y, X * q * n.x);
    }
    U.translate(j.x, j.y);
    var $ = this.a4A(U, j, q),
      H = $.H.P();
    if (c == null) {
      var C = this.ke(W);
      B.nn($.W$, C.o, C.i, C.X);
      if (this.PJ.jG() && this.H.Lg($.H) && G == 1) this.sE = $.W$.slice(0);
      else {
        var l = B.vW.ax7(j, this.H, b.oW);
        for (var y = 0; y < l.length; y++) {
          var v = l[y],
            K,
            S;
          if (v.Sd == 1 && v.X == 0 && (v.ra == 0) & (v.Jy == 1)) {
            K = $.W$;
            S = $.H.P();
            S.x += v.Tt;
            S.y += v.BL;
          } else {
            var o = U.P();
            o.concat(v);
            var V = this.a4A(o, v.uL(j), q);
            K = V.W$;
            S = V.H;
            B.nn(K, C.o, C.i, C.X);
          }
          if (S.C2(this.H)) {
            H = H.vd(S);
            if (this.FZ == 8) B.G.ajK(K, S, this.sE, this.H, S, G);
            else B.G.Jg("norm", K, S, this.sE, this.H, S, G);
          }
        }
      }
    }
    if (c == e4.Ro) {
      var z = new ea($.H.x + $.H.r / 2, $.H.y + $.H.$ / 2),
        E = Math.round(z.x - this.By.x),
        A = Math.round(z.y - this.By.y),
        N = $.H.P();
      N.offset(-E, -A);
      var Q = N.TM(this.H);
      Q.offset(E, A);
      B.M4(this.sE, this.H, $.W$, N);
      if (this.FZ == 8) B.G.a69($.W$, $.H, this.sE, this.H, $.QY, $.H, G);
      else B.G.xf($.W$, $.H, this.sE, this.H, $.QY, $.H, 0, Q, G, !1);
    }
    if (c == e4.Mx || c == e4.Bd || c == e4.Xu) {
      var e = $.H.TM(this.H),
        Y;
      if (e.Lg($.H)) Y = $.QY;
      else {
        Y = B.j(e.C(), this.FZ);
        B.sN($.QY, $.H, Y, e);
      }
      var d = B.j(e.C() * 4, this.FZ);
      B.M4(this.sE, this.H, d, e);
      if (c == e4.Bd) {
        var I = d.slice(0),
          O = B.Vl.__([-1, -1, -1, -1, 25, -1, -1, -1, -1]);
        B.Vl.kT(d, I, e.r, e.$, O);
        B.wV(I, d);
      } else if (c == e4.Xu) {
        var s = k0.i4("UnsM");
        s.Amnt.v.val = 15;
        s.Thsh.v = 0;
        s.Rds.v.val = 5;
        var I = B.j(d.length, this.FZ);
        k0.Gi("UnsM", { buffer: d, H: e }, s, 0, 0, { buffer: I, H: e });
        B.wV(I, d);
      } else {
        k0.po(1, 0, d, e);
      }
      if (this.FZ == 8) B.G.a69(d, e, this.sE, this.H, Y, e, G);
      else B.G.xf(d, e, this.sE, this.H, Y, e, 0, e, G, !1);
    }
    this.ajA = q;
    this.By = z;
    this.nX++;
    return H;
  };
  e4.prototype.ke = function (j) {
    var q = B.b4(this.UP, 1),
      m = j.colorDynamicsPerTip,
      n = null;
    m = m ? m.v : !1;
    if (this.ape == null) this.ape = this.ZW;
    if (!m) {
      n = this.ZW;
      this.ZW = this.ape;
    }
    if (j.useColorDynamics && j.useColorDynamics.v) {
      var G = 1 - (this.ET() * j.clVr.v.jitter.v.val) / 100,
        W = B.b4(this.vH, 1);
      q.o = G * q.o + (1 - G) * W.o;
      q.i = G * q.i + (1 - G) * W.i;
      q.X = G * q.X + (1 - G) * W.X;
      var k = ((-0.5 + this.ET()) * j.H.v.val) / 100,
        T = ((-1 + 2 * this.ET()) * j.Strt.v.val) / 100,
        b = ((-1 + 2 * this.ET()) * j.Brgh.v.val) / 100,
        c = B.vE(q.o, q.i, q.X);
      c.uu = (c.uu + k + 1) % 1;
      c.fO = c.fO + T;
      if (c.fO < 0) c.fO = -c.fO;
      if (c.fO > 1) c.fO = 1 - (c.fO - 1);
      c.YF = c.YF + b;
      if (c.YF < 0) c.YF = -c.YF;
      if (c.YF > 1) c.YF = 1 - (c.YF - 1);
      q = B.ld(c.uu, c.fO, c.YF);
    }
    if (!m) this.ZW = n;
    return q;
  };
  e4.prototype.nD = function (j) {
    return Math.max(0, Math.min(1, j));
  };
  e4.prototype.ET = function (j) {
    if (j == null) {
      j = this.ZW++;
    }
    return e4.hash(j);
  };
  e4.hash = function (j) {
    j = j ^ 61 ^ (j >> 16);
    j = j + (j << 3);
    j = j ^ (j >> 4);
    j = j * 668265261;
    j = j ^ (j >> 15);
    return (j & 16777215) / 16777215;
  };
  e4.aye = new eg();
  e4.a7$ = function (j, y, q) {
    var m = j[y],
      n = j[q];
    j[y] = (4 + 7 * m + n) >>> 3;
    j[q] = (4 + 7 * n + m) >>> 3;
  };
  e4.prototype.a4A = function (j, q, m) {
    var n = this.eQ.mv,
      G = this.X.Brsh.v,
      W = Math.round(G.Dmtr.v.val),
      k;
    if (n && W <= 3) {
      k = {
        N: B.j(W * W, this.FZ),
        H: new hk(Math.round(q.x - W / 2), Math.round(q.y - W / 2), W, W),
      };
      k.N.fill(B.TN(this.FZ));
    } else if (j.Sd == 1 && j.X == 0 && j.ra == 0 && j.Jy == 1) {
      k = { N: this._I.Og[0], H: this._I.Og[1].P(), W$: this.adV };
      k.H.x = Math.round(j.Tt);
      k.H.y = Math.round(j.BL);
    } else {
      if (j.Dc() > 1e-4) {
        k = L.Dq.ac1(this._I.Og, j);
        var T = k.H.r,
          b = k.H.$,
          c = k.N;
        if (G.classID == "sampledBrush" && B.oM(c) == 8 && T * b > 25)
          for (var a = 1; a < b; a++)
            for (var f = 1; f < T; f++) {
              var y = a * T + f;
              e4.a7$(c, y, y - 1);
              e4.a7$(c, y, y - T);
            }
      }
    }
    if (k) k.N = B.sL(k.N, this.FZ);
    if (k == null) k = { N: B.j(0, this.FZ), H: new hk() };
    var U = { QY: k.N, H: k.H, W$: k.W$ };
    if (U.W$ == null || n) {
      if (n) B.round(k.N);
      U.W$ = B.j(k.H.C() * 4, this.FZ);
      B.ln(U.QY, U.W$, 3);
    }
    return U;
  };
  e4.aqO = function (j, q, m) {
    var n,
      G,
      W,
      k = j.Brsh.v.Dmtr.v.val,
      T = j.Brsh.v.classID;
    if (T == "computedBrush") {
      var b = j.Brsh.v.Hrdn.v.val / 100;
      G = k < 100 ? 1.4 : 1;
      W = 1;
      n = B.azX.a2W(k, b, G);
    }
    if (T == "sampledBrush") {
      var c;
      for (var y = 0; y < q.length; y++)
        if (q[y].id == j.Brsh.v.sampledData.v) c = q[y];
      n = c.Og;
      var a = n[1];
      G = Math.max(a.r, a.$) / k;
      W = Math.min(a.r, a.$) / Math.max(a.r, a.$);
    }
    return { avL: G, ar7: W, Og: n };
  };
  e4.Bl = null;
  e4.lB = null;
  e4.hj = function (j, q, m, n, G, W) {
    var k = e4.Bl,
      T = e4.lB;
    if (k == null) {
      e4.Bl = k = document.createElement("canvas");
      e4.lB = T = k.getContext("2d");
    }
    if (W == null) W = n;
    if (k.width != W || k.height != G) {
      k.width = W;
      k.height = G;
    } else T.clearRect(0, 0, W, G);
    T.fillStyle = "#000000";
    T.font = Math.floor(10 * L.IC()) + "px sans-serif";
    var b = j.Brsh.v.Dmtr.v.val,
      c = "" + b,
      a = j.useBrushSize;
    if (a && a.v) c = "---";
    var f = T.measureText(c);
    T.fillText(c, (n - f.width) / 2, G - 2);
    var U = n,
      Z = G - 10 * L.IC(),
      h = Math.min(U, Z),
      u = j.Brsh.v.classID;
    if (u == "computedBrush") {
      T.translate(U / 2, Z / 2);
      T.rotate((-j.Brsh.v.Angl.v.val * Math.PI) / 180);
      T.scale(1, 0.1 + (0.9 * j.Brsh.v.Rndn.v.val) / 100);
      var i = Math.min((0.95 * h) / 2, b / 2) + 0.5,
        x = (0.9 * j.Brsh.v.Hrdn.v.val) / 100,
        X = T.createRadialGradient(0, 0, 0, 0, 0, i);
      X.addColorStop(x, "rgba(0,0,0,1)");
      X.addColorStop((0.5 + x) / 1.5, "rgba(0,0,0,.5)");
      X.addColorStop(1, "rgba(0,0,0,0)");
      T.fillStyle = X;
      T.fillRect(-i, -i, 2 * i, 2 * i);
      T.setTransform(1, 0, 0, 1, 0, 0);
    } else if (u == "sampledBrush") {
      var $,
        K = 0;
      for (var y = 0; y < q.length; y++)
        if (q[y].id == j.Brsh.v.sampledData.v) $ = q[y];
      var H = $.Og;
      B.Hn(H);
      var C = H[0],
        l = H[1].r,
        v = H[1].$;
      while ((l > U || v > Z) && H[K + 2]) {
        K += 2;
        C = H[K];
        l = H[K + 1].r;
        v = H[K + 1].$;
      }
      if (l * v != 0) {
        var S = B.j(l * v * 4);
        B.ln(C, S, 3);
        var o = new ImageData(new Uint8ClampedArray(S.buffer), l, v);
        T.putImageData(o, Math.round((U - l) / 2), Math.round((Z - v) / 2));
      }
    } else {
    }
    return k.toDataURL();
  };
  e4.Ei = function (j, q, m, n) {
    if (m == 0) m = 1;
    var G = j.Brsh.v,
      W = G.Dmtr.v.val,
      k = G.Angl.v.val,
      T = (G.Dmtr.v.val = Math.min(
        n != null ? Math.round(n * 2.6) : 3e3,
        W * m
      )),
      b = G.Hrdn ? G.Hrdn.v.val / 100 : 1,
      c =
        n != null
          ? n
          : Math.round((k == 0 ? 1 : 1.42) * T * (1 + 0.55 * (1 - b))) + 4,
      U;
    c = Math.max(25, Math.min(c, 3e3));
    var a = new hk(0, 0, c, c),
      f = new e4(j, q, null, { rv: 1 }, 16711712, 0, a);
    G.Dmtr.v.val = W;
    f.moveTo(a.r / 2, a.$ / 2);
    var Z = B.sL(f.qX(), 8),
      h = f.Fj();
    if (a.Lg(h)) U = Z;
    else {
      U = B.j(a.C() * 4);
      B.M4(Z, h, U, a);
    }
    return [U, a, T];
  };
  e4.lO = function (j, q, m, n) {
    var G = q.r,
      W = G >>> 1;
    for (var y = 2; y < 7; y++) {
      j[G * (W - y) + W - 1] = n;
      j[G * (W - y) + W] = m;
      j[G * (W - y) + W + 1] = n;
      j[G * (W + y) + W - 1] = n;
      j[G * (W + y) + W] = m;
      j[G * (W + y) + W + 1] = n;
      j[G * (W - 1) + W - y] = n;
      j[G * W + W - y] = m;
      j[G * (W + 1) + W - y] = n;
      j[G * (W - 1) + W + y] = n;
      j[G * W + W + y] = m;
      j[G * (W + 1) + W + y] = n;
    }
    n = m;
    if (L.IC() >= 1.5)
      for (var y = 5; y < 11; y++) {
        j[G * (W - y) + W - 1] = n;
        j[G * (W - y) + W] = m;
        j[G * (W - y) + W + 1] = n;
        j[G * (W + y) + W - 1] = n;
        j[G * (W + y) + W] = m;
        j[G * (W + y) + W + 1] = n;
        j[G * (W - 1) + W - y] = n;
        j[G * W + W - y] = m;
        j[G * (W + 1) + W - y] = n;
        j[G * (W - 1) + W + y] = n;
        j[G * W + W + y] = m;
        j[G * (W + 1) + W + y] = n;
      }
  };
  e4.EN = function (j, q, m, n) {
    var G = e4.Ei(j, q, m),
      W = G[0].slice(0),
      k = G[1],
      T = G[2],
      b = k.C(),
      c = B.j(b);
    B.Ih(W, c, 3);
    var a = B.j(b);
    B.h.azz(c, a, k, L.IC() > 1.9);
    if (T < 3 || B.kp(a, 0) || (n && T > 12)) {
      e4.lO(a, k, 255, 0);
    }
    var f = [3, 5, 3, 4, 8, 4, 3, 5, 3];
    f = B.Vl.__(f);
    B.Vl.wo(a, c, k.r, k.$, f);
    W.fill(255);
    B.ln(c, W, 3);
    for (var y = 0; y < b; y++)
      if (a[y] == 255) {
        W[y << 2] = W[(y << 2) + 1] = W[(y << 2) + 2] = 0;
        W[(y << 2) + 3] = 255;
      }
    return { NP: W, HA: k, Ly: new ea(k.r / 2, k.$ / 2) };
  };
  e4.aoJ = function (j, q, m, n, G) {
    var W =
      4278190080 |
      (Math.round(G.X * 255) << 16) |
      (Math.round(G.i * 255) << 8) |
      (Math.round(G.o * 255) << 0);
    m = new Uint32Array(m.buffer);
    var k = Math.floor(j.x),
      T = Math.floor(j.y),
      b = Math.floor(q.x),
      c = Math.floor(q.y),
      a = Math.abs(b - k),
      f = Math.abs(c - T),
      U = k < b ? 1 : -1,
      Z = T < c ? 1 : -1,
      h = a - f;
    while (!0) {
      if (0 <= k && k < n.r && 0 <= T && T <= n.$) m[T * n.r + k] = W;
      if (k == b && T == c) break;
      var u = 2 * h;
      if (u > -f) {
        h -= f;
        k += U;
      }
      if (u < a) {
        h += a;
        T += Z;
      }
    }
  };
  e4.Ro = "0";
  e4.Mx = "1";
  e4.Bd = "2";
  e4.Xu = "3";
  var bq = {};
  bq.qS = function (j, q, m) {
    if (m == null) m = !0;
    var n = j.add.TySh,
      G = n.s3,
      W = new gu(G, q, n.Ix);
    j.a_.c7 = W.mL();
    var k = (j.a_.path = bq.Yi(W, n));
    if (ei != 0) return [k, W, null];
    var T = bq.pe(k, n.u, al.OK(n));
    if (m) {
      j.H = T.HA;
      var b = B.oM(j.buffer);
      j.buffer = B.sL(T.sE, b);
      j.gF();
    }
    return [k, W, T];
  };
  bq.pe = function (j, q, m) {
    j = { RC: j.RC, L: j.L.slice(0) };
    B.b.u(j.L, q, j.L);
    var n = B.b.YU(j.L),
      G = 0,
      W = !1;
    if (n.jG()) return { sE: B.j(0), HA: new hk() };
    for (var y = 0; y < j.RC.length; y++) {
      var k = j.RC[y];
      if (k[0] == "O" && k[1] == "-") {
        var T = k.split("-");
        G = Math.max(G, parseFloat(T[2]));
        if (T[4] == "0") W = !0;
      }
    }
    G = Math.ceil(((W ? 2 : 1) * G * q.Dc()) / 2);
    n.Lh(G, G);
    var b = B.l4(n.r, n.$);
    b.translate(-n.x, -n.y);
    bq.arb(j, b);
    var c = b.getImageData(0, 0, n.r, n.$),
      a = new Uint8Array(c.data.buffer);
    if (m == 0)
      for (var y = 0; y < a.length; y += 4) a[y + 3] = a[y + 3] > 80 ? 255 : 0;
    if (m == 3)
      for (var y = 0; y < a.length; y += 4)
        a[y + 3] = Math.min(255, a[y + 3] * 1.5);
    b.resetTransform();
    b.beginPath();
    return { sE: a, HA: n };
  };
  bq.Yi = function (j, q, m) {
    var n = q.u,
      G = q.s3;
    bq.w8 = n.Dc();
    var W = al.OK(q),
      k = Math.max(n.X * n.X, n.ra * n.ra) < 1e-9 ? n : null;
    if (W == 3 || W == 4) k = null;
    var T = { RC: [], L: [] };
    bq.aDU(j, T, k, !0);
    bq.aDU(j, T, k, !1);
    T = bq.VD(T, q, j, m);
    return T;
  };
  bq.w8 = 1;
  bq.VD = function (j, q, m, n) {
    if (j == null) return j;
    if (m && m.NH) B.b.u(j.L, m.NH, j.L);
    if (m && !B.rc.TK(q.Uu)) {
      var G = al.Fj(q, m);
      if (!G.jG()) {
        if (j.RC) {
          j = B.b.ni(j);
          var W = Math.min(G.r, G.$) / 8;
          if (W < 1) W = 1;
          j = B.b.Mz(j, W);
        }
        var k = B.rc._i(q.Uu, G);
        B.Ol.u(k, j.L, G);
      }
    }
    var T = q.u;
    if (n) B.b.u(j.L, T, j.L);
    return j;
  };
  bq.arb = function (j, q) {
    q.save();
    q.miterLimit = 2;
    Typr.U.pathToContext({ crds: j.L, cmds: j.RC }, q);
    q.restore();
  };
  bq.wM = function (j, q, m) {
    var n = gu.agm(m),
      G = j.s3,
      W = G.ResourceDict.FontSet,
      k = G.ResourceDict.StyleSheetSet[0].StyleSheetData,
      T = G.EngineDict.StyleRun.RunLengthArray,
      b = G.EngineDict.StyleRun.RunArray,
      c = al.WT(G),
      a = !0,
      f = {},
      U = 0;
    for (var y = 0; y < b.length; y++) {
      var Z = b[y].StyleSheet.StyleSheetData.Font;
      if (Z == null) Z = k.Font;
      for (var h = 0; h < T[y]; h++) {
        var u = c.charCodeAt(U + h),
          i = Z + "," + (u > 128 ? u : -1),
          x = al.Sh(W[Z]);
        if (f[i] == null) {
          f[i] = 1;
          if (q.yM(x, u) == null) a = !1;
        }
      }
      U += T[y];
    }
    return a && n;
  };
  bq.xL = function (j, q, m) {
    var n = !0;
    for (var G = 0; G < j.U.length; G++) {
      var W = j.U[G],
        k = W.add.TySh;
      if (k != null && !bq.wM(k, q, m)) n = !1;
    }
    return n;
  };
  bq.lV = function (j, q, m) {
    for (var n = 0; n < j.U.length; n++) {
      var G = j.U[n],
        W = G.add.TySh;
      if (W != null && bq.wM(W, q, m)) {
        bq.qS(G, q);
        j.gF();
      }
    }
  };
  bq.aDU = function (j, q, m, n) {
    var G = new k$();
    for (var y = 0; y < j.Th.length; y++) bq.aIF(j.K2, j.Th[y], q, G, m, n);
  };
  bq.aIF = function (j, q, m, n, G, W) {
    n.translate(q.Qi.x, q.Qi.y);
    for (var y = 0; y < q.EX.length; y++) {
      var k = {},
        T = q.EX[y],
        a = 0;
      if (!T.Yd) break;
      var b = n.P();
      b.translate(T.Qi.x, T.Qi.y);
      if (G) {
        var c = G.BL + b.BL * G.Jy;
        b.BL = (Math.round(c) - G.BL) / G.Jy;
      }
      for (var f = T.start; f < T.end; f++) a = Math.max(a, q.IF[f].OH);
      for (var f = T.start; f < T.end; f++) {
        bq.aL9(j, q.IF[f], q, k, m, b, G, W, a);
      }
    }
    n.translate(-q.Qi.x, -q.Qi.y);
  };
  bq.aL9 = function (j, q, m, n, G, W, k, T, b) {
    W.translate(q.Qi.x, q.Qi.y);
    for (var c = q.nG; c <= q.xc; c++) {
      var a = m.sx[c],
        f = a.HA.r,
        U = j[m.a5C + a.fZ],
        Z = U.vb._FillBackgroundFlag;
      if (U.ya == "\n" || (T && !Z)) continue;
      var h = U.vb.FontSize / U.fz.head.unitsPerEm,
        u = W.P();
      u.translate(a.Qi.x + a.Xx * h, a.Qi.y - a.auI * h);
      var i = new k$();
      i.scale(h, -h);
      if (U.vb.FauxItalic) i.concat(new k$(1, 0, -Math.tan(0.18), 1, 0, 0));
      i.translate(0, U.aev);
      i.scale(U.scale.x, U.scale.y);
      if (U.vb.BaselineShift != null) i.translate(0, -U.vb.BaselineShift);
      if (a.ny != 0) {
        i.rotate(-a.ny);
      }
      i.concat(u);
      var x = (U.vb.OutlineWidth ? U.vb.OutlineWidth : 1) * bq.w8;
      if (T) {
        G.RC.push(bq.ke(U.vb._FillBackgroundColor));
        var X = (1.005 * a.HA.$) / h,
          $ = new hk(-a.Xx, -X * 0.27, (1.03 * a.HA.r) / (h * U.scale.x), X);
        if (U.vb.StrokeFlag) $.Lh(x / h, x / h);
        B.b.concat(G, B.b._c($), i);
        G.RC.push("X");
        continue;
      }
      if (U.vb.FillFlag) G.RC.push(bq.ke(U.vb.FillColor));
      if (U.vb.StrokeFlag) {
        var H = eu.TB.anS(U.vb);
        G.RC.push(bq.aaC(H));
      }
      if (a.path.RC.length != 0 && U.ya != "\t") {
        if (k) {
          var C = k.Tt + i.Tt * k.Sd;
          i.Tt = (Math.round(C) - k.Tt) / k.Sd;
        }
        if (U.vb.FauxBold) {
          var l = (U.vb.FontSize / 2048) * 27 * U.scale.x,
            v = Math.cos(a.ny) * l,
            K = Math.sin(a.ny) * l;
          i.Tt += v;
          i.BL += K;
          B.b.concat(G, a.path, i);
          i.Tt -= v + v;
          i.BL -= K + K;
          B.b.concat(G, a.path, i);
        } else B.b.concat(G, a.path, i);
      }
      if (U.ya != "\n") {
        var S = a.HA.r / h;
        if (U.vb.Underline) {
          if (n.arm == null)
            n.arm = U.fz.post.underlineThickness / U.fz.head.unitsPerEm;
          if (n.aBq == null) n.aBq = U.fz.post.underlinePosition;
          console.log(
            U.fz.name.ai3,
            U.fz.post.underlineThickness / U.fz.head.unitsPerEm
          );
          var o = 0,
            V = 0,
            P = 0,
            z = 1 / (h * U.scale.y),
            E = -b * z;
          P = -E * n.arm * 1.6;
          V = E * 0.3;
          B.b.concat(
            G,
            {
              RC: ["M", "L", "L", "L", "Z"],
              L: [o, V, o + S, V, o + S, V + P, o, V + P],
            },
            i
          );
        }
        if (U.vb.Strikethrough) {
          var A = U.fz["OS/2"].yStrikeoutSize,
            N = U.fz["OS/2"].yStrikeoutPosition,
            o = 0,
            V = N + A / 2,
            P = -A;
          B.b.concat(
            G,
            {
              RC: ["M", "L", "L", "L", "Z"],
              L: [o, V, o + S, V, o + S, V + P, o, V + P],
            },
            i
          );
        }
      }
      var Q = U.vb.FillFlag,
        e = U.vb.FillFirst;
      if (e == null) e = !0;
      if (Q && e) G.RC.push("X");
      if (U.vb.StrokeFlag) G.RC.push("OX");
      if (Q && !e) G.RC.push("X");
    }
    W.translate(-q.Qi.x, -q.Qi.y);
  };
  bq.aaC = function (j) {
    var q = j.Nu,
      m = ["O", "#" + B.bw(B.yH({ o: q[0], i: q[1], X: q[2] }, 1)), j.mm];
    m.push(j.kv, j.h0, j.NV, j.vx, j.QJ.join(","));
    return m.join("-");
  };
  bq.av_ = function (j) {
    var q = parseFloat,
      m = j.split("-"),
      n = B.b4(parseInt(m[1].slice(1), 16)),
      G = m[8] == "1" ? 2 : 0;
    return {
      Nu: [n.o / 255, n.i / 255, n.X / 255],
      mm: q(m[2] * (G == 2 ? 0.5 : 1)),
      kv: q(m[3]),
      h0: q(m[4]),
      NV: q(m[5]),
      vx: q(m[6]),
      QJ: m[7] == "" ? [] : m[7].split(",").map(q),
      x2: G,
    };
  };
  bq.ke = function (j) {
    return "#" + B.bw(B.yH(al.xH(j)));
  };
  function gu(j, q, m) {
    var n = al.Po(j),
      G,
      W,
      k = al.fu(j),
      T = j._LineOrientation == 2 ? new k$() : null,
      f,
      Z;
    if (j.Curve) W = gu.gg(j.Curve);
    if (n != 0) {
      G = new hk(k[0], k[1], k[2], k[3]);
      if (T) {
        var b = G.r;
        G.r = G.$;
        G.$ = b;
        T.translate(0, -k[2]);
      }
      if (n == 2) {
        G.r = W[5] - W[4];
        G.$ = 9999;
      }
    }
    this.Th = [];
    this.K2 = [];
    this.Sg = n;
    this.NH = T;
    var c = (this.axo = al.WT(j)),
      a = -1,
      U = -1;
    for (var y = 0; y < c.length; y++) {
      var h = f,
        u = al.a0w(j, y);
      if (u != a) {
        a = u;
        h = f = al.a1a(j, u);
      }
      var i = Z,
        u = al.a89(j, y);
      if (u != U) {
        U = u;
        i = Z = al.aLA(j, u);
      }
      var x = {
          ya: c.charAt(y),
          vb: h,
          fz: null,
          zG: null,
          a8r: !1,
          l1: -1,
          nH: al.a8g(j, y),
          aev: 0,
          scale: new ea(0, 0),
          OH: 0,
          lineHeight: 0,
          Se: 0,
        },
        X = j.ResourceDict.FontSet[h.Font],
        $ = al.Sh(X),
        H = (x.fz = q.yM($, c.charCodeAt(y)));
      if (X.Axis) {
        var C = (x.zG = X.Axis.slice(0)),
          l = H.fvar;
        for (var v = 0; v < C.length; v++) C[v] /= 65536;
        if (l && l[0].length < C.length) x.zG = x.zG.slice(0, l[0].length);
      }
      if (h.FontCaps == 1) x.a8r = H && H.GSUB && H.GSUB.smcp ? !1 : !0;
      x.scale.x = h.HorizontalScale == null ? 1 : h.HorizontalScale;
      x.scale.y = h.VerticalScale == null ? 1 : h.VerticalScale;
      var K = H["OS/2"],
        S = H.hhea;
      if (x.a8r && x.ya != x.ya.toUpperCase()) {
        var o = 0.7;
        x.scale.x *= o;
        x.scale.y *= o;
      }
      var V = (1 / H.head.unitsPerEm) * h.FontSize;
      if (h.FontBaseline == 1) {
        var o = j.ResourceDict.SuperscriptSize;
        x.scale.x *= o;
        x.scale.y *= o;
        x.aev -= j.ResourceDict.SuperscriptPosition * h.FontSize;
      }
      if (h.FontBaseline == 2) {
        var o = j.ResourceDict.SubscriptSize;
        x.scale.x *= o;
        x.scale.y *= o;
        x.aev += j.ResourceDict.SubscriptPosition * h.FontSize;
      }
      x.OH = gu.OH(H) * h.FontSize;
      var P = i.AutoLeading;
      x.lineHeight = h.FontSize * (P == null ? 1.2 : P);
      if (h.AutoLeading == !1) x.lineHeight = h.Leading;
      if (x.ya == "\n" && c[y - 1] != "\n") x.lineHeight = 0;
      if (x.lineHeight == 0) x.lineHeight = 0.01;
      this.K2.push(x);
    }
    var z = this.Th,
      E = [0];
    for (var y = 0; y < j.EngineDict.ParagraphRun.RunLengthArray.length; y++) {
      var A = new gu.Yb(j, q, this.K2, y, G, E, n == 1 ? W : null);
      z.push(A);
    }
    if (T) {
      if (n == 0) T.translate(0, z[0].IF[0].OH / 2);
      T.rotate(-Math.PI / 2);
    }
    if (n == 2) {
      var N = j.Curve.Points,
        Q = W[0],
        e = W[1],
        Y = W[2],
        d = W[3],
        I = W[4],
        O = W[5];
      for (var y = 0; y < z.length; y++)
        for (var v = 0; v < z[y].EX.length; v++)
          if (!(y == 0 && v == 0)) z[y].EX[v].Yd = !1;
      var A = z[0],
        s = A.EX[0];
      A.Qi.Tu(0, 0);
      s.Qi.Tu(0, 0);
      for (var v = s.start; v < s.end; v++) {
        var p = A.IF[v],
          F = p.Qi.x;
        p.Qi.x = 0;
        for (var g = p.nG; g <= p.xc; g++) {
          var w = A.sx[g],
            r = w.HA.r / 2;
          w.Qi.x += F;
          var eQ = gu.aiO(Q, (I + w.Qi.x + r) % d);
          w.Qi.x = eQ[0] - r * eQ[2];
          w.Qi.y = eQ[1] - r * eQ[3];
          w.ny = Math.atan2(eQ[3], eQ[2]);
        }
      }
    }
    if (m) {
      var t = m.VAlign.v;
      if (t != 0 && al.Po(j) == 1) {
        var dq = al.fu(j)[3],
          D = this.mL().$,
          ha = 0;
        if (t == 1) ha = dq - D;
        if (t == 2) ha = (dq - D) / 2;
        for (var y = 0; y < this.Th.length; y++) this.Th[y].Qi.y += ha;
      }
    }
  }
  gu.OH = function (j) {
    var q = j._hhhh;
    if (q == null) {
      var m = Typr.U,
        n = m.codeToGlyph(j, 104),
        G = B.b.RD(Typr.U.glyphToPath(j, n).crds).$;
      q = j._hhhh = G * (1 / j.head.unitsPerEm);
    }
    return q;
  };
  gu.prototype.afc = function () {
    return !this.ahI(0);
  };
  gu.prototype.aaG = function () {
    return this.ahI(1);
  };
  gu.prototype.ahI = function (j) {
    var q = this.Th,
      m = !0,
      n = 0;
    for (var y = 0; y < q.length; y++) {
      var G = q[y].EX,
        W = G.length;
      n += W;
      for (var k = 0; k < W; k++) m &= G[k].Yd;
    }
    return [m, n][j];
  };
  gu.gg = function (j, q, m) {
    if (q == null) q = 0.25;
    var n = j.Points,
      G = n.length,
      W = G >>> 3,
      k = j.TextOnPathTRange,
      T = j.Reversed,
      U = 0,
      Z = 0;
    if (T) {
      var b = n.slice(0);
      for (var y = 0; y < G; y += 2) {
        b[y] = n[G - 2 - y];
        b[y + 1] = n[G - 1 - y];
      }
      n = b;
      k = [W - (k[1] % W), W - (k[0] % W)];
    }
    var c = [],
      a = [0],
      f = [0];
    for (var y = 0; y < G; y += 8) {
      var h = n[y + 6] - n[y + 0],
        u = n[y + 7] - n[y + 1],
        i = Math.round(Math.sqrt(h * h + u * u) / q),
        x = m && y == G - 8 ? i + 1 : i;
      for (var X = 0; X < x; X++) {
        var $ = X / i,
          H = 1 - $,
          C =
            H * H * H * n[y + 0] +
            3 * H * H * $ * n[y + 2] +
            3 * H * $ * $ * n[y + 4] +
            $ * $ * $ * n[y + 6],
          l =
            H * H * H * n[y + 1] +
            3 * H * H * $ * n[y + 3] +
            3 * H * $ * $ * n[y + 5] +
            $ * $ * $ * n[y + 7];
        c.push(C, l);
        if (y + X != 0) {
          var h = C - U,
            u = l - Z;
          f.push(f[f.length - 1] + Math.sqrt(h * h + u * u));
          a.push((y >>> 3) + $);
        }
        U = C;
        Z = l;
      }
    }
    var q = f.length,
      v = f[q - 1],
      K = gu.E0(k[0] % W, a),
      S = gu.E0(k[1] % W, a),
      o = f[K % q],
      V = f[S % q];
    if (o >= V) V += v;
    return [c, a, f, v, o, V];
  };
  gu.E0 = function (j, q) {
    var y = 0;
    while (q[y] < j) y++;
    return y;
  };
  gu.aiO = function (j, q) {
    var m = 0,
      y = 0,
      n,
      G,
      W;
    while (m < q) {
      n = j[y + 2] - j[y];
      G = j[y + 3] - j[y + 1];
      W = Math.sqrt(n * n + G * G);
      m += W;
      y += 2;
    }
    return [j[y], j[y + 1], n / W, G / W];
  };
  gu.prototype.aEf = function (j) {
    return this.K2[j];
  };
  gu.prototype.aBl = function (j) {
    for (var q = 0; q < this.Th.length; q++) {
      var m = this.Th[q];
      for (var n = 0; n < m.EX.length; n++) {
        var G = m.EX[n],
          W = m.IF[G.start].start,
          k = m.IF[G.end - 1].end;
        if (W < j && j < k) return [W, k - 1];
      }
    }
    return [0, 1];
  };
  gu.prototype.ann = function (j, q) {
    var m = -1,
      n = this.Th;
    if (this.Sg == 2) {
      var G = 1e9,
        W = 0,
        k = n[0],
        T = k.EX[0];
      for (var b = T.start; b < T.end; b++) {
        var c = k.IF[b];
        for (var a = c.nG; a <= c.xc; a++) {
          var f = k.sx[a],
            U = f.HA.r,
            Z = j.x - f.Qi.x,
            h = j.y - f.Qi.y,
            u = Z * Z + h * h;
          if (u < G) {
            G = u;
            W = f.fZ;
          }
        }
      }
      if (W != 0 && this.axo.codePointAt(W - 1) > 65535) W--;
      return W;
    }
    for (var i = 0; i < n.length; i++) {
      var k = n[i];
      for (var x = 0; x < k.EX.length; x++) {
        m++;
        var T = k.EX[x],
          X = k.EX[x + 1];
        if (X == null && i < n.length - 1) X = n[i + 1].EX[0];
        if (q != null) {
          if (m != q) continue;
        } else {
          if (X != null && k.Qi.y + T.Qi.y < j.y) continue;
        }
        for (var b = T.start; b < T.end; b++) {
          var c = k.IF[b];
          for (var a = c.nG; a <= c.xc; a++) {
            var f = k.sx[a],
              U = f.HA.r,
              $ = k.Qi.x + T.Qi.x + c.Qi.x,
              H = $ + f.Qi.x,
              C = $ + (a < c.xc ? k.sx[a + 1].Qi.x : f.Qi.x + U);
            if (j.x <= C || (b + 1 == T.end && a == c.xc)) {
              var l = k.a5C + f.fZ,
                v = this.K2[l],
                K = v.Se & 1;
              if (
                v.ya != "\n" &&
                ((K == 0 && j.x > H + U / 2) || (K == 1 && j.x < H + U / 2))
              )
                l += this.axo.codePointAt(l) > 65535 ? 2 : 1;
              return l;
            }
          }
        }
      }
    }
  };
  gu.prototype.q9 = function (j) {
    var q = { HA: new hk(), Ma: 0 },
      m = 0;
    for (var n = 0; n < this.Th.length; n++) {
      var G = this.Th[n];
      for (var W = 0; W < G.EX.length; W++) {
        var k = G.EX[W];
        q.Ma = m;
        m++;
        for (var T = k.start; T < k.end; T++) {
          var b = G.IF[T];
          for (var c = b.start; c < b.end; c++) {
            if (c == j) {
              var a = this.K2[c],
                f = a.l1,
                U = G.sx[f].fZ,
                Z = 1;
              while (G.sx[f] != null && G.sx[f].fZ == U) {
                var h = G.sx[f],
                  u = G.Qi.x + k.Qi.x + b.Qi.x + h.Qi.x,
                  i = G.Qi.y + k.Qi.y + b.Qi.y + h.Qi.y;
                q.HA = q.HA.vd(
                  new hk(u, i - a.lineHeight, h.HA.r, a.lineHeight)
                );
                q.ny = h.ny;
                f += Z;
              }
              return q;
            }
          }
        }
      }
    }
  };
  gu.prototype.mL = function () {
    var j = Infinity,
      q = Infinity,
      m = -Infinity,
      n = -Infinity;
    for (var y = 0; y < this.Th.length; y++) {
      var G = this.Th[y];
      for (var W = 0; W < G.EX.length; W++) {
        var k = G.EX[W];
        if (!k.Yd) break;
        for (var T = k.start; T < k.end; T++) {
          var b = G.IF[T];
          for (var c = b.nG; c <= b.xc; c++) {
            var a = G.sx[c],
              f = a.HA,
              U = G.Qi.x + k.Qi.x + b.Qi.x + a.Qi.x,
              Z = G.Qi.y + k.Qi.y + b.Qi.y + a.Qi.y;
            j = Math.min(j, U + f.x);
            q = Math.min(q, Z + f.y);
            m = Math.max(m, U + f.x + f.r);
            n = Math.max(n, Z + f.y + f.$);
          }
        }
      }
    }
    return new hk(j, q, m - j, n - q);
  };
  gu.DU = function (j) {
    return (19968 <= j && j <= 40959) || (12288 <= j && j <= 12543);
  };
  gu.Da = function (j, q, m, n, G, W, k) {
    var T = [W],
      b = 0;
    for (var y = W; y < k; y++) {
      if (m[y] == null) console.log(y, W, k, m);
      var c = m[y].ya,
        a = c.charCodeAt(0);
      if (a == 32 || a == 9) {
        T.push(b, y, 1, y + 1);
        b = 0;
      } else if (a == 3851) {
        T.push(b + 1, y + 1);
        b = 0;
      } else if (gu.DU(a)) {
        T.push(b, y);
        b = 1;
      } else if (y != W && m[y].Se != m[y - 1].Se) {
        T.push(b, y);
        b = 1;
      } else b++;
    }
    T.push(b);
    var f = [];
    for (var y = 0; y < T.length; y += 2) {
      var U = T[y],
        Z = T[y + 1];
      if (Z == 0) continue;
      f.push(new gu.a9G(j, q, m, n, G, U, Z));
    }
    return f;
  };
  gu.aoA = function (j, q, m, n, G, W, k) {
    var T = [0, q ? q.r : 1e9],
      b = [];
    if (n) {
      var c = j[W].OH,
        a = G + (G == 0 ? c : j[W].lineHeight),
        f = a - c * 0.9,
        U = B.b.a3z(n[0], f),
        Z = U.length,
        h = B.b.a3z(n[0], a),
        u = h.length;
      if (Z != 0 && u != 0) {
        var i = 0,
          x = 0,
          X = [];
        while (i < Z && x < u) {
          var $ = Math.max(U[i], h[x]),
            H = U[i + 1],
            C = h[x + 1],
            l = Math.min(H, C);
          if ($ < l) X.push($, l);
          if (H < C) i += 2;
          else x += 2;
        }
        if (X.length != 0) T = X;
      }
    }
    for (var v = 0; v < T.length; v += 2) {
      var K = 0,
        S = W,
        o = q
          ? T[v + 1] -
            T[v] -
            m.StartIndent -
            m.EndIndent -
            (W == 0 ? m.FirstLineIndent : 0)
          : Infinity;
      while (W != j.length) {
        var V = j[W],
          P = K == 0 || V.gm || V.o3 || K + V.HA.r < o;
        if (!P) break;
        K += V.HA.r;
        W++;
      }
      b.push(W - S);
    }
    k[0] = b;
    k[1] = T;
    k[2] = W;
  };
  gu.aGK = function (j, q) {
    var m = j.length,
      n = new Uint32Array(m),
      G = new Uint8Array(m),
      W = 0;
    for (var y = 0; y < m; y++) {
      G[y] = 0;
      var k = j.charCodeAt(y);
      n[y] = k;
      if (k > W) W = k;
    }
    if (W > 1424) G = gu.a0m(n, q);
    return G;
  };
  gu.ajO = function (j) {
    return j == "ß" ? j : j.toUpperCase();
  };
  gu.Yb = function (j, q, m, n, G, W, k) {
    this.IF = [];
    this.EX = [];
    this.Qi = new ea(0, 0);
    this.sx = null;
    this.IF = null;
    this.vb = al.aLA(j, n);
    var T = this.vb,
      f = 0,
      h = "",
      l = 0,
      v = 1,
      am = 0;
    if (n != 0) {
      var b = T.SpaceBefore;
      if (b != null) W[0] += b;
    }
    var c = j.EngineDict.ParagraphRun.RunLengthArray,
      a = c[n];
    for (var y = 0; y < n; y++) f += c[y];
    var U = T._Direction ? T._Direction : 0;
    this.a5C = f;
    var Z = al.WT(j).slice(f, f + a);
    for (var u = 0; u < Z.length; u++) {
      var i = m[f + u],
        x = i.vb.FontCaps,
        X = Z.charAt(u);
      if (x == 0) h += X;
      if (x == 1) h += i.a8r ? gu.ajO(X) : X;
      if (x == 2) h += gu.ajO(X);
    }
    Z = h;
    var $ = gu.aGK(Z, U),
      H = [],
      K = $[0] & 1,
      S = m[f].fz;
    m[f].Se = $[0];
    for (var y = 1; y < Z.length; y++) {
      var X = m[f + y],
        o = $[y];
      X.Se = o;
      if (o != K || X.fz != S) {
        H.push(l, v);
        l = y;
        v = 1;
        K = o;
        S = X.fz;
      } else v++;
    }
    H.push(l, v);
    var V = (this.sx = []);
    for (var y = 0; y < H.length; y += 2) {
      var P = H[y],
        z = H[y + 1],
        E = (m[f + P].Se & 1) == 0,
        A = Z.slice(P, P + z),
        N = [];
      for (var u = 0; u < z; u++) {
        var Q = m[f + P + u].vb,
          e = [];
        N.push(e);
        for (var Y = 0; Y < 8; Y++) e.push(Q[al.ls[Y]] ? 1 : 0);
        e.push(Q.FontCaps == 1 ? 1 : 0);
        var d = A.charCodeAt(u),
          I = Q._DigitSet;
        if (I == null) I = 0;
        if (I > 1 && 48 <= d && d <= 57) {
          d = d - 48 + 1632 + (I - 2) * 144;
          A = A.slice(0, u) + String.fromCharCode(d) + A.slice(u + 1);
        }
      }
      N = gu.atP(N);
      var O = Typr.U.shapeHB(m[f + P].fz, A, {
          ltr: E,
          fts: N,
          axs: m[f + P].zG,
        }),
        s = [];
      for (var u = 0; u < O.length; u++) {
        var F = O[u];
        s.push({ i: F.g, fZ: F.cl, uA: F.ax, Ql: F.ay, Xx: F.dx, auI: F.dy });
      }
      O = s;
      for (var u = 0; u < z; u++) {
        var g = 0,
          w = -1;
        for (var r = 0; r < O.length; r++) {
          var v = O[r].fZ;
          if (v <= u && v > w) {
            w = v;
            g = r;
          }
        }
        m[f + P + u].l1 = V.length + g;
      }
      for (var u = 0; u < O.length; u++) {
        V.push(O[u]);
        O[u].fZ += P;
        var X = m[f + O[u].fZ];
        if (X.nH != -1 && X.nH < X.fz.maxp.numGlyphs) {
          O[u].i = X.nH;
          var eQ = X.fz.hmtx;
          if (eQ) {
            var t = Object.keys(eQ)[0];
            O[u].uA = eQ[t][X.nH];
          }
        }
        if (X.ya == "\n") O[u].uA = 0;
        if (X.ya == "\t") O[u].uA = (X.fz.head.unitsPerEm * 36) / X.vb.FontSize;
      }
    }
    var dq = al.xT(T),
      D = (this.IF = gu.Da(j, q, m, f, V, f, f + a)),
      ha = this.EX,
      k4 = -1,
      h = [null, null, 0];
    while (am < D.length) {
      gu.aoA(D, G, T, k, W[0], am, h);
      k4++;
      var aA = { start: am, end: 0, HA: new hk(), Qi: new ea(0, 0), Yd: !0 },
        e1 = 0,
        l2 = 0;
      ha.push(aA);
      aA.end = h[2];
      if (aA.start == aA.end) throw "e";
      var ex = aA.end == D.length;
      function ac(kR, P, eH) {
        var cZ = (eH - P) >>> 1;
        for (var y = 0; y < cZ; y++) {
          var ga = kR[P + y];
          kR[P + y] = kR[eH - 1 - y];
          kR[eH - 1 - y] = ga;
        }
      }
      for (var eJ = 1; eJ < 5; eJ++) {
        var h$ = -1;
        for (var y = aA.start; y < aA.end; y++) {
          var o = m[D[y].start].Se;
          if (h$ == -1 && o >= eJ) h$ = y;
          else if (h$ != -1 && o < eJ) {
            ac(D, h$, y);
            h$ = -1;
          }
        }
        var da = aA.end;
        if (U == 0 && D[da - 1].gm) da--;
        if (h$ != -1) ac(D, h$, da);
      }
      var bb = h[0],
        gb = h[1],
        h$ = am,
        fM = am;
      for (var kS = 0; kS < gb.length; kS += 2) {
        var cY = G
            ? gb[kS + 1] -
              gb[kS] -
              T.StartIndent -
              T.EndIndent -
              (am == 0 ? T.FirstLineIndent : 0)
            : Infinity,
          cS = 0;
        h$ = fM;
        fM += bb[kS >>> 1];
        var k3 = this.alE(h$, fM, D, U, G != null);
        if (G) {
          if (dq == 1 || (ex && dq == 4)) cS = k3[1] + (cY - k3[0]);
          if (dq == 2 || (ex && dq == 5)) cS = k3[1] + (cY - k3[0]) / 2;
          if (fM - h$ == 1 && D[h$].HA.r > cY) cS = 0;
          if (k4 == 0) cS += T.FirstLineIndent;
          cS += T.StartIndent;
        } else {
          if (dq == 0) cS = T.StartIndent + T.FirstLineIndent;
          if (dq == 1) cS = -k3[0] - T.EndIndent;
          if (dq == 2) cS = -k3[0] / 2;
        }
        cS += gb[kS];
        if (G && dq > 2 && (dq == 6 || !ex)) this.aiu(h$, fM, D, cY, U, cS);
        else {
          var di = cS;
          for (var y = h$; y < fM; y++) {
            var a7 = D[y],
              b0 = a7.HA.r;
            a7.Qi.x = di;
            if (a7.ob == "\t") b0 = Math.ceil((di + 4) / 36) * 36 - di;
            di += b0;
          }
        }
      }
      am = aA.end;
      for (var y = aA.start; y < aA.end; y++) {
        var kL = D[y].HA.P();
        kL.aiM(D[y].Qi);
        aA.HA = aA.HA.vd(kL);
        e1 = Math.max(e1, D[y].OH);
        l2 = Math.max(l2, D[y].lineHeight);
      }
      aA.Qi.y = k4 == 0 ? 0 : ha[k4 - 1].Qi.y + l2;
      if (k4 == 0) {
        if (n == 0 && G) W[0] += e1;
        if (n != 0) W[0] += l2;
        this.Qi.y = W[0];
      } else W[0] += l2;
      if (G) aA.Yd = this.Qi.y + aA.Qi.y < G.y + G.$ || (n == 0 && k4 == 0);
    }
    var es = T.SpaceAfter;
    if (es != null) W[0] += es;
  };
  gu.Yb.prototype.alE = function (j, q, m, n, G) {
    var W = 0,
      k = 0;
    for (var y = j; y < q; y++) W += m[y].HA.r;
    if (G) {
      if (n == 0)
        for (var y = q - 1; y >= j; y--)
          if (m[y].gm || m[y].o3) W -= m[y].HA.r;
          else break;
      if (n == 1)
        for (var y = j; y < q; y++)
          if (m[y].gm || m[y].o3) {
            var T = m[y].HA.r;
            W -= T;
            k -= T;
          } else break;
    }
    return [W, k];
  };
  gu.Yb.prototype.aiu = function (j, q, m, n, G, W) {
    var k = 0,
      T = 0,
      b = 0,
      c = 0;
    for (var y = j; y < q; y++)
      if (m[y].gm) b++;
      else {
        k += m[y].HA.r;
        T++;
      }
    if (G == 0)
      for (var y = q - 1; y >= j; y--)
        if (m[y].gm || m[y].o3) {
          if (m[y].gm) {
            b--;
          }
        } else break;
    if (G == 1)
      for (var y = j; y < q; y++)
        if (m[y].gm || m[y].o3) {
          if (m[y].gm) {
            b--;
            c++;
          }
        } else break;
    if (T <= 1) {
      if (T == 1) m[j].Qi.x = W;
      return;
    }
    if (b == 0) {
      var a = (n - k) / (T - 1),
        f = -c * a;
      for (var y = j; y < q; y++) {
        this.sx[m[y].nG].HA.r += a;
        m[y].HA.r += a;
        m[y].Qi.x = W + f;
        f += m[y].HA.r;
      }
    } else {
      var a = (n - k) / b,
        f = -c * a;
      for (var y = j; y < q; y++) {
        if (m[y].gm) this.sx[m[y].nG].HA.r = m[y].HA.r = a;
        m[y].Qi.x = W + f;
        f += m[y].HA.r;
      }
    }
  };
  gu.a9G = function (j, q, m, n, G, W, k) {
    this.ob = "";
    for (var y = 0; y < k; y++) this.ob += m[W + y].ya;
    this.gm = k == 1 && (m[W].ya == " " || m[W].ya == "\t");
    this.o3 = k == 1 && m[W].ya == "\n";
    this.start = W;
    this.end = W + k;
    this.HA = new hk();
    this.Qi = new ea(0, 0);
    this.OH = 0;
    this.lineHeight = 0;
    var T = 0,
      b = 0;
    if (k == 0) {
      this.lineHeight = m[W].lineHeight;
      this.OH = m[W].OH;
      this.HA = new hk(0, -m[W].lineHeight, 0, m[W].lineHeight);
    }
    var c = m[W].l1,
      a = m[W + k - 1].l1;
    if (c == -1) return;
    if (a < c) {
      var f = c;
      c = a;
      a = f;
    }
    while (a + 1 < G.length && G[a].fZ == G[a + 1].fZ) {
      a++;
    }
    this.nG = c;
    this.xc = a;
    for (var U = c; U <= a; U++) {
      var Z = G[U],
        h = m[n + Z.fZ],
        u =
          j._LineOrientation == 2 &&
          (h.vb.BaselineDirection != 2 || gu.DU(h.ya.charCodeAt(0))),
        i = Typr.U.glyphToPath(h.fz, Z.i, null, h.zG),
        C = 0;
      Z.path = { RC: i.cmds, L: i.crds };
      var x = h.vb.FontSize,
        X = (1 / h.fz.head.unitsPerEm) * x;
      if (!h.vb.AutoKerning) T += h.vb.Kerning * 2 * X * h.scale.x;
      Z.Qi = new ea(T, 0);
      Z.ny = 0;
      if (u && Z.path.L.length > 0) {
        Z.ny = -Math.PI / 2;
        Z.Qi.x += x * 0.83;
        Z.Qi.y = -x * 0.3 + (Z.uA * X) / 2;
        Z.uA = x / X;
      }
      var $ = Z.uA * X * h.scale.x;
      Z.HA = new hk(0, -h.lineHeight, $, h.lineHeight);
      var H = Z.HA.P();
      H.aiM(Z.Qi);
      if (h.vb.Tracking != null) C = h.vb.Tracking * 0.001 * x;
      if (h.vb.FauxBold == !0) C += 0.027 * x;
      T += $ + C;
      if (U < G.length - 2) Z.HA.r += C;
      if (k == 1 && h.ya == " ") {
        H.r += 2 * C;
        Z.Qi.x += C;
      } else if (k == 1 && h.ya != null && gu.DU(h.ya.charCodeAt(0))) H.r += C;
      this.HA = this.HA.vd(H);
      this.OH = Math.max(this.OH, h.OH);
      this.lineHeight = Math.max(this.lineHeight, h.lineHeight);
    }
  };
  gu.ur = 0;
  gu.agm = function (j) {
    if (gu.ur == 2) return !0;
    if (gu.ur == 1) return !1;
    gu.ur = 1;
    function q() {
      fetch(lw.sX("code/ext/fribidi.wasm"))
        .then(function (m) {
          return m.arrayBuffer();
        })
        .then(function (m) {
          return WebAssembly.instantiate(m);
        })
        .then(function (m) {
          var n = m.instance.exports,
            G = n.memory,
            W = 16,
            k = 256,
            T = 1,
            b = W | k,
            c = W | k | T;
          gu.a0m = function (f, U) {
            var Z = f.length,
              h = Z * 4 + 4 + Z * 4 + Z * 4 + Z;
            gh.I8(n, h + Z + 1e7);
            var u = new Uint8Array(G.buffer),
              i = new Uint32Array(G.buffer),
              x = n.calloc(h, 1),
              X = x + Z * 4,
              $ = X + 4,
              H = $ + Z * 4,
              C = H + Z * 4;
            i.set(f, x >>> 2);
            i[X >>> 2] = U == 0 ? b : c;
            n.fribidi_get_bidi_types(x, Z, $);
            n.fribidi_get_bracket_types(x, Z, $, H);
            n.fribidi_get_par_embedding_levels_ex($, H, Z, X, C);
            var l = u.slice(C, C + Z);
            n.free(x);
            return l;
          };
          gu.ur = 2;
          var a = new fd(_.E.c, !0);
          a.data = { R: _.Y.fh, vt: "add", rw: fG.uk, Jb: null };
          if (j) j.k(a);
        });
    }
    Typr.U.initHB(lw.sX("code/ext/hb.wasm"), q);
    return !1;
  };
  gu.atP = function (j) {
    var q = [],
      m = j.length,
      n = al.ad8;
    for (var G = 0; G < 9; G++) {
      var W = n[G],
        T = null;
      if (W == null) continue;
      var k = -1;
      for (var y = 0; y < m; y++) {
        var b = j[y][G];
        if (b != k) {
          if (T) T[3] = y;
          T = [W, b, y, y + 1];
          q.push(T);
          k = b;
        }
      }
      T[3] = m;
    }
    return q;
  };
  function al() {}
  al.ts = function (j, q) {
    for (var m in q) j[m] = q[m];
  };
  al.ls =
    "_Ligatures _ContextualLigatures _DiscretionaryLigatures _Swash _StylisticAlternates _Titling _Ordinals _Fractions".split(
      " "
    );
  al.O$ = [18, 20, 19, 25, 28, 26, 24, 23];
  al.ap_ =
    "Standard Ligatures,Contextual Ligatures,Discretionary Ligatures,Swash,Stylistic Alternates,Titling Alternates,Ordinals,Fractions".split(
      ","
    );
  al.ad8 = "liga calt dlig swsh salt titl ordn frac smcp".split(" ");
  al.Sh = function (j) {
    return j.Axis ? j.Name.split("_")[0] : j.Name;
  };
  al.wD = function (j, q, m, n) {
    var G = al.aeO();
    if (m) al.jD(G, 0, 0, m);
    var W = new k$();
    if (n != null) W.rotate(n);
    W.translate(Math.round(j), Math.round(q));
    var k = { u: W, s3: G };
    k.Ix = al.aem();
    k.Uu = B.rc.j();
    k.AF = new hk();
    return k;
  };
  al.at_ = function (j) {
    var q = ["CharacterDirection", 0];
    for (var y = 0; y < q.length; y += 2) {
      if (j[q[y]] != null && j[q[y]] != q[y + 1]) {
        throw "e";
        console.log(q[y], j[q[y]]);
      }
    }
    if (j instanceof Array) for (var y = 0; y < j.length; y++) al.at_(j[y]);
    else if (j instanceof Object) for (var m in j) al.at_(j[m]);
  };
  al.xT = function (j, q) {
    if (q == null) q = j.Justification;
    var m = j._Direction ? j._Direction : 0;
    if (m == 1) {
      if (q == 0 || q == 3) q++;
      else if (q == 1 || q == 4) q--;
    }
    return q;
  };
  al.NX = function (j) {
    if (j.add == null) return;
    var q = j.s3,
      m = q.Curve,
      n = j.add.vmsk,
      G = n.D,
      W = B.b.bh(G, 2).L,
      k = j.u.P();
    k.BR();
    B.b.u(W, k, W);
    var T = W.slice(0, 8);
    for (var b = 8; b < W.length; b += 6)
      T.push(
        W[b - 2],
        W[b - 1],
        W[b],
        W[b + 1],
        W[b + 2],
        W[b + 3],
        W[b + 4],
        W[b + 5]
      );
    m.Points = T;
    m.TextOnPathTRange = n.PG.slice(0);
    m.Reversed = n.Rl;
    if (al.Po(q) == 1) {
      var m = gu.gg(q.Curve),
        c = B.b.RD(m[0]);
      al.ms(q, [0, 0, c.r, c.$].map(Math.round));
      for (var y = 0; y < T.length; y += 2) {
        T[y] -= c.x;
        T[y + 1] -= c.y;
      }
      var a = new k$(1, 0, 0, 1, c.x, c.y);
      a.concat(j.u);
      j.u = a;
    }
  };
  al.nk = function (j) {
    if (j.add == null) return;
    var q = j.add.vmsk,
      m = j.s3.Curve,
      n = m.Points,
      G = { RC: ["M"], L: [n[0], n[1]] };
    for (var y = 0; y < n.length; y += 8) {
      G.RC.push("C");
      G.L.push(n[y + 2], n[y + 3], n[y + 4], n[y + 5], n[y + 6], n[y + 7]);
    }
    B.b.u(G.L, j.u, G.L);
    var W = B.b.LZ(G, !0);
    q.D = W;
    q.Rl = m.Reversed;
    q.PG = m.TextOnPathTRange.slice(0);
    j.add.vogk = R.Pp(W);
  };
  al.xH = function (j) {
    var q = { o: 0, i: 0, X: 0 };
    if (j) {
      var m = j.Values;
      if (j.Type == 1) q = { o: m[1] * 255, i: m[2] * 255, X: m[3] * 255 };
      else if (j.Type == 2) {
        var n = {
          classID: "CMYC",
          Cyn: { t: "doub", v: m[1] * 100 },
          Mgnt: { t: "doub", v: m[2] * 100 },
          Ylw: { t: "doub", v: m[3] * 100 },
          Blck: { t: "doub", v: m[4] * 100 },
        };
        q = B.MV.xH(n);
      } else console.log("Unknown color type");
    }
    return q;
  };
  al.aet = function (j) {
    for (var y = 0; y < j.length; y++) {
      var q = j[y].StyleSheet.StyleSheetData,
        m = q.FillColor;
      if (m && m.Type == 2) {
        var n = al.xH(m);
        m.Type = 1;
        m.Values = [1, n.o / 255, n.i / 255, n.X / 255];
      }
    }
  };
  al.Fj = function (j, q) {
    var m;
    if (al.Po(j.s3) == 1) {
      var n = al.fu(j.s3);
      m = new hk(0, 0, n[2] - n[0], n[3] - n[1]);
    } else {
      m = q.mL();
      if (q.NH) {
        var G = q.NH.P(),
          W = B.b._c(m);
        B.b.u(W.L, G, W.L);
        m = B.b.RD(W.L);
      }
    }
    return m;
  };
  al.J5 = function (j) {
    var q = j[0];
    for (var y = 0; y < j.length; y++) q = al.agS(q, j[y]);
    return q;
  };
  al.agS = function (j, q) {
    var m = {};
    for (var n in j)
      if (JSON.stringify(j[n]) == JSON.stringify(q[n])) m[n] = j[n];
    return m;
  };
  al.gk = function (j, q) {
    var m = j.NJ,
      n = -1;
    for (var y = 0; y < m.length; y++) if (m[y].Name == q) n = y;
    if (n == -1) {
      n = m.length;
      m.push({ FontType: 1, Name: q, Script: 0, Synthetic: 0 });
    }
    j.K2.Font = n;
  };
  al.WT = function (j) {
    return j.EngineDict.Editor.Text.replace(/\r/g, "\n").replace(
      /\u0003/g,
      "\n"
    );
  };
  al.aT = function (j, q) {
    j.EngineDict.Editor.Text = q.replace(/\n/g, "\r");
  };
  al.Po = function (j) {
    return j.Curve && j.Curve.TextOnPathTRange[0] >= 0
      ? 2
      : j.EngineDict.Rendered.Shapes.Children[0].ShapeType;
  };
  al.cj = function (j, q) {
    var m = j.EngineDict.Rendered.Shapes.Children[0];
    m.ShapeType = q;
    var n = m.Cookie.Photoshop;
    n.ShapeType = q;
    n.Base.ShapeType = q;
    if (q == 0) {
      delete n.BoxBounds;
      n.PointBase = [0, 0];
    }
    if (q == 1) {
      delete n.PointBase;
      n.BoxBounds = [0, 0, 1, 1];
    }
  };
  al.fu = function (j) {
    return j.EngineDict.Rendered.Shapes.Children[0].Cookie.Photoshop.BoxBounds;
  };
  al.ms = function (j, q) {
    j.EngineDict.Rendered.Shapes.Children[0].Cookie.Photoshop.BoxBounds = q;
  };
  al.a8g = function (j, q) {
    var m = j.EngineDict.AlternateGlyphRun;
    if (m == null) return -1;
    var n = al.u3(m.RunLengthArray, q).nS;
    if (m.RunArray[n] == null) return -1;
    var G = m.RunArray[n].Glyph;
    return G == null ? -1 : G;
  };
  al.a3j = function (j, q, m) {
    var n = j.EngineDict.AlternateGlyphRun;
    if (n == null) {
      n = j.EngineDict.AlternateGlyphRun = al.asm();
      n.RunArray.push({});
      n.RunLengthArray.push(al.WT(j).length);
    }
    var G = al.u3(n.RunLengthArray, q),
      W = G.nS,
      k = q - G.dw,
      T = n.RunArray[W],
      b = JSON.stringify(T),
      c = n.RunLengthArray[W];
    if (k != 0) {
      n.RunArray.splice(W, 0, JSON.parse(b));
      n.RunLengthArray.splice(W, 0, k);
      n.RunLengthArray[W + 1] -= k;
      W++;
      c -= k;
      k = 0;
    }
    if (c != 1) {
      n.RunArray.splice(W + 1, 0, JSON.parse(b));
      n.RunLengthArray.splice(W + 1, 0, c - 1);
      n.RunLengthArray[W] = 1;
      c = 1;
    }
    T.Glyph = m;
  };
  al.a0w = function (j, q) {
    var m = j.EngineDict.StyleRun.RunLengthArray;
    return al.u3(m, q).nS;
  };
  al.a1a = function (j, q) {
    var m = j.ResourceDict.StyleSheetSet[0].StyleSheetData,
      n = {};
    for (var G in m) n[G] = m[G];
    var W = j.EngineDict.StyleRun.RunArray[q].StyleSheet.StyleSheetData;
    al.ts(n, W);
    return n;
  };
  al.a89 = function (j, q) {
    var m = j.EngineDict.ParagraphRun.RunLengthArray;
    return al.u3(m, q).nS;
  };
  al.aLA = function (j, q) {
    var m = j.ResourceDict.ParagraphSheetSet[0].Properties,
      n = {};
    for (var G in m) n[G] = m[G];
    var W = j.EngineDict.ParagraphRun.RunArray[q].ParagraphSheet.Properties;
    al.ts(n, W);
    var k = ["StartIndent", "EndIndent", "FirstLineIndent"];
    for (var y = 0; y < 3; y++) if (n[k[y]] == null) n[k[y]] = 0;
    return n;
  };
  al.aip = function (j, q, m) {
    var n = al.WT(q);
    for (var G = 0; G < 2; G++) {
      var W = j[G == 0 ? "Txtt" : "paragraphStyleRange"];
      if (W == null) continue;
      W = W.v;
      console.log(W);
      for (var y = 0; y < W.length; y++) {
        var k = W[y].v,
          T = k.From.v,
          b = Math.min(k.T.v - 1, n.length - 1);
        k = k[G == 0 ? "TxtS" : "paragraphStyle"].v;
        var c = al.vJ(q, T, b);
        al.gh(k, G == 0 ? c.K2 : c.Th, c, m.zv);
        al.jD(q, T, b, c);
      }
    }
  };
  al.aBf = function (j, q, m) {
    var n = al.WT(q).slice(0, -1);
    for (var G = 0; G < 2; G++) {
      var W = G == 0 ? "Txtt" : "paragraphStyleRange",
        k = G == 0 ? "TxtS" : "paragraphStyle",
        T = (j[W] = { t: "VlLs", v: [] }),
        a = 0;
      T = T.v;
      var b = q.EngineDict[G == 0 ? "StyleRun" : "ParagraphRun"],
        c = b.RunLengthArray;
      for (var y = 0; y < c.length; y++) {
        var f = a + c[y],
          U = al.vJ(q, a, f - 1),
          Z = G == 0 ? U.K2 : U.Th,
          h = {
            t: "Objc",
            v: {
              classID: W,
              From: { t: "long", v: a },
              T: { t: "long", v: f },
            },
          };
        T.push(h);
        h.v[k] = { t: "Objc", v: { classID: k } };
        h = h.v[k].v;
        al.GE(Z, h, U, m.zv);
        a = f;
      }
    }
  };
  al.gh = function (j, q, m, n) {
    for (var G in j) {
      var W = j[G].v;
      if (G == "Sz")
        q.FontSize = Math.round(W.val * (W.type == "#Pnt" ? n / 72 : 1));
      if (G == "fontPostScriptName") al.gk(m, W);
      if (G == "Algn")
        q.Justification = ["Left", "Rght", "Cntr"].indexOf(W.Alg);
      if (G == "leading") q.Leading = j[G].v.val;
      if (G == "baselineShift" || G == "Bsln") q.BaselineShift = j[G].v.val;
      if (G == "autoLeading") q.AutoLeading = j[G].v;
      if (G == "syntheticBold") q.FauxBold = j[G].v;
      if (G == "syntheticItalic") q.FauxItalic = j[G].v;
      if (G == "Trck") q.Tracking = j[G].v;
      if (G == "verticalScale" || G == "VrtS") q.VerticalScale = j[G].v / 100;
      if (G == "horizontalScale" || G == "HrzS")
        q.HorizontalScale = j[G].v / 100;
      if (G == "Clr")
        q.FillColor = {
          Type: 1,
          Values: [1, W.Rd.v / 255, W.Grn.v / 255, W.Bl.v / 255],
        };
    }
  };
  al.GE = function (j, q, m, n) {
    for (var G in j) {
      var W = j[G];
      if (G == "FontSize")
        q.Sz = { t: "UntF", v: { type: "#Pnt", val: (W * 72) / n } };
      if (G == "Font") q.fontPostScriptName = { t: "TEXT", v: m.NJ[W].Name };
      if (G == "Justification")
        q.Algn = { t: "enum", v: { Alg: ["Left", "Rght", "Cntr"][W] } };
      if (G == "Leading") q.leading = { t: "long", v: W };
      if (G == "BaselineShift")
        q.Bsln = { t: "UntF", v: { type: "#Pnt", val: W } };
      if (G == "AutoLeading") q.autoLeading = { t: "bool", v: W };
      if (G == "FauxBold") q.syntheticBold = { t: "bool", v: W };
      if (G == "FauxItalic") q.syntheticItalic = { t: "bool", v: W };
      if (G == "Tracking") q.Trck = { t: "long", v: W };
      if (G == "VerticalScale") q.VrtS = { t: "doub", v: W * 100 };
      if (G == "HorizontalScale") q.HrzS = { t: "doub", v: W * 100 };
      if (G == "FillColor")
        q.Clr = {
          t: "Objc",
          v: B.MV.Ia({
            o: 255 * W.Values[1],
            i: 255 * W.Values[2],
            X: 255 * W.Values[3],
          }),
        };
    }
  };
  al.Fk = function (j, q, m) {
    if (m == "") return;
    var n = al.WT(j);
    al.aT(j, n.substring(0, q) + m + n.substring(q, n.length));
    var G = j.EngineDict.StyleRun,
      W = G.RunLengthArray,
      k = al.u3(W, q - 1);
    W[k.nS] += m.length;
    var T = j.EngineDict.AlternateGlyphRun;
    if (T) {
      var W = T.RunLengthArray,
        k = al.u3(W, q - 1);
      W[k.nS] += m.length;
    }
    var b = j.EngineDict.ParagraphRun,
      W = b.RunLengthArray,
      c = al.u3(W, q),
      a = m.split("\n");
    if (a.length == 1) {
      W[c.nS] += m.length;
      return;
    }
    W.splice(c.nS + 1, 0, W[c.nS] - (q - c.dw));
    b.RunArray.splice(c.nS + 1, 0, B.S(b.RunArray[c.nS]));
    W[c.nS] -= W[c.nS + 1];
    W[c.nS] += a[0].length + 1;
    for (var y = 1; y < a.length - 1; y++) {
      b.RunArray.splice(c.nS + y, 0, B.S(b.RunArray[c.nS + y - 1]));
      b.RunLengthArray.splice(c.nS + y, 0, a[y].length + 1);
    }
    W[c.nS + a.length - 1] += a[a.length - 1].length;
  };
  al.Sp = function (j, q, m) {
    var n = al.WT(j);
    al.aT(j, n.substring(0, q) + n.substring(m, n.length));
    al.wW(j.EngineDict.ParagraphRun, q, m, !0);
    al.wW(j.EngineDict.StyleRun, q, m, !1);
    var G = j.EngineDict.AlternateGlyphRun;
    if (G) al.wW(G, q, m, !1);
  };
  al.wW = function (j, q, m, n) {
    var G = j.RunLengthArray,
      W = al.u3(G, q),
      k = al.u3(G, m),
      T = [];
    for (var y = 0; y < G.length; y++) for (var b = 0; b < G[y]; b++) T.push(y);
    T.splice(q, m - q);
    var c = [];
    for (var y = 0; y < G.length; y++) c.push(0);
    for (var y = 0; y < T.length; y++) c[T[y]]++;
    for (var y = 0; y < G.length; y++) {
      if (c[y] == 0) {
        c.splice(y, 1);
        G.splice(y, 1);
        j.RunArray.splice(y, 1);
        y--;
      } else if (c[y] < G[y]) G[y] = c[y];
    }
    if (n && W.nS != k.nS && W.dw != q) {
      G[W.nS] += G[W.nS + 1];
      G.splice(W.nS + 1, 1);
      j.RunArray.splice(W.nS + 1, 1);
    }
  };
  al.jD = function (j, q, m, n) {
    var G = n.K2.Font,
      W = j.ResourceDict.FontSet,
      k = j.EngineDict.Editor.Text.length;
    if (m == k - 2) m++;
    if (G != null) {
      var T = n.NJ[G],
        b = -1;
      for (var y = 0; y < W.length; y++) if (W[y].Name == T.Name) b = y;
      if (b == -1) {
        b = W.length;
        W.push(B.S(T));
      }
      n.K2.Font = b;
    }
    if (q <= m) al.al8(j.EngineDict.StyleRun, n.K2, q, m, !0);
    al.al8(j.EngineDict.ParagraphRun, n.Th, q, m, !1);
    n.K2.Font = G;
    if (W.length > 20) {
      var c = (j.ResourceDict.FontSet = []),
        a = j.EngineDict.StyleRun.RunArray,
        f = {};
      for (var y = 0; y < a.length; y++) {
        var U = a[y].StyleSheet.StyleSheetData,
          Z = U.Font;
        if (Z != null) {
          if (f[Z] == null) {
            f[Z] = c.length;
            c.push(W[Z]);
          }
          U.Font = f[Z];
        }
      }
    }
  };
  al.vJ = function (j, q, m) {
    var n = { NJ: j.ResourceDict.FontSet.slice(0), K2: [], Th: [] },
      G = j.EngineDict.StyleRun.RunLengthArray,
      W = al.u3(G, q).nS,
      k = al.u3(G, m).nS;
    for (var y = W; y <= k; y++) {
      var T = B.S(j.ResourceDict.StyleSheetSet[0].StyleSheetData),
        b = j.EngineDict.StyleRun.RunArray;
      if (b.length == 0) continue;
      var c = b[y].StyleSheet.StyleSheetData;
      al.ts(T, c);
      n.K2.push(T);
    }
    var a = j.EngineDict.ParagraphRun.RunLengthArray,
      f = al.u3(a, q).nS,
      U = al.u3(a, m).nS;
    for (var y = f; y <= U; y++) {
      var Z = j.EngineDict.ParagraphRun.RunArray;
      if (Z.length == 0) continue;
      n.Th.push(B.S(Z[y].ParagraphSheet.Properties));
    }
    n.K2 = n.K2.length == 0 ? {} : al.J5(n.K2);
    n.Th = n.Th.length == 0 ? {} : al.J5(n.Th);
    return n;
  };
  al.al8 = function (j, q, m, n, G) {
    var W = j.RunLengthArray;
    if (G) {
      var k = al.u3(W, m);
      if (k.dw != m) {
        var T = W[k.nS];
        W.splice(k.nS, 0, m - k.dw);
        W[k.nS + 1] = T - W[k.nS];
        j.RunArray.splice(k.nS + 1, 0, B.S(j.RunArray[k.nS]));
      }
      var b = al.u3(W, n);
      if (b.dw + W[b.nS] - 1 != n) {
        var T = W[b.nS];
        W.splice(b.nS, 0, n - b.dw + 1);
        W[b.nS + 1] = T - W[b.nS];
        j.RunArray.splice(b.nS + 1, 0, B.S(j.RunArray[b.nS]));
      }
    }
    var k = al.u3(W, m),
      b = al.u3(W, n);
    if (G)
      for (var y = k.nS; y <= b.nS; y++)
        al.ts(j.RunArray[y].StyleSheet.StyleSheetData, q);
    else
      for (var y = k.nS; y <= b.nS; y++)
        al.ts(j.RunArray[y].ParagraphSheet.Properties, q);
  };
  al.am8 = function (j, q, m) {
    var n = j.EngineDict.StyleRun.RunLengthArray,
      G = [],
      W = 0;
    for (var y = 0; y < n.length; y++) {
      var k = n[y];
      for (var T = 0; T < k; T++) if (q <= W + T && W + T < m) G.push(y);
      W += k;
    }
    var b = G[0],
      c = [];
    for (var y = 0; y < G.length; y++) {
      var a = G[y] - b;
      if (a == c.length) c.push(0);
      c[a]++;
    }
    return c;
  };
  al.aC3 = function (j) {
    var q = j.EngineDict.StyleRun,
      m = q.RunArray,
      n = q.RunLengthArray;
    for (var y = 0; y < n.length - 1; y++) {
      var G = m[y].StyleSheet.StyleSheetData,
        W = m[y + 1].StyleSheet.StyleSheetData;
      if (JSON.stringify(G) == JSON.stringify(W)) {
        m.splice(y + 1, 1);
        n[y] += n[y + 1];
        n.splice(y + 1, 1);
        y--;
      }
    }
  };
  al.OK = function (j) {
    var q = j.Ix.AntA.v.Annt;
    q = ["Anno", "antiAliasSharp", "AnCr", "AnSt", "AnSm"].indexOf(q);
    if (q == -1) q = 1;
    return q;
  };
  al.m7 = function (j, q) {
    j.Ix.AntA.v.Annt = ["Anno", "antiAliasSharp", "AnCr", "AnSt", "AnSm"][q];
  };
  al.Gt = function (j, q) {
    var m, n;
    m = ["FontSize", "Leading", "BaselineShift", "OutlineWidth"];
    n = j.K2;
    for (var y = 0; y < m.length; y++) if (n[m[y]] != null) n[m[y]] *= q;
    m = [
      "StartIndent",
      "EndIndent",
      "FirstLineIndent",
      "SpaceBefore",
      "SpaceAfter",
    ];
    n = j.Th;
    for (var y = 0; y < m.length; y++) if (n[m[y]] != null) n[m[y]] *= q;
  };
  al.aua = function () {
    return al.vJ(B.S(al.aE_), 0, 0);
  };
  al.aem = function () {
    return {
      classID: "TxLr",
      Txt: { t: "TEXT", v: "\0" },
      textGridding: { t: "enum", v: { textGridding: "None" } },
      Ornt: { t: "enum", v: { Ornt: "Hrzn" } },
      AntA: { t: "enum", v: { Annt: "antiAliasSharp" } },
      TextIndex: { t: "long", v: 0 },
      VAlign: { t: "long", v: 0 },
    };
  };
  al.u3 = function (j, q) {
    var m = 0,
      y = 0;
    while (m + j[y] <= q) {
      m += j[y];
      y++;
    }
    return { nS: y, dw: m };
  };
  al.aeO = function () {
    var j = B.S(this.aE_);
    return j;
  };
  al.aD8 = {
    Justification: 0,
    FirstLineIndent: 0,
    StartIndent: 0,
    EndIndent: 0,
    SpaceBefore: 0,
    SpaceAfter: 0,
    AutoHyphenate: !1,
    HyphenatedWordSize: 6,
    PreHyphen: 2,
    PostHyphen: 2,
    ConsecutiveHyphens: 8,
    Zone: 36,
    WordSpacing: [0.8, 1, 1.33],
    LetterSpacing: [0, 0, 0],
    GlyphSpacing: [1, 1, 1],
    AutoLeading: 1.2,
    LeadingType: 0,
    Hanging: !1,
    Burasagari: !1,
    KinsokuOrder: 0,
    EveryLineComposer: !1,
    _Direction: 0,
    _ComposerEngine: 1,
  };
  al.aA8 = {
    Font: 0,
    FontSize: 12,
    FauxBold: !1,
    FauxItalic: !1,
    AutoLeading: !0,
    Leading: 0,
    HorizontalScale: 1,
    VerticalScale: 1,
    Tracking: 0,
    AutoKerning: !0,
    Kerning: 0,
    BaselineShift: 0,
    FontCaps: 0,
    FontBaseline: 0,
    Underline: !1,
    Strikethrough: !1,
    Ligatures: !0,
    DLigatures: !1,
    BaselineDirection: 2,
    Tsume: 0,
    StyleRunAlignment: 2,
    Language: 0,
    NoBreak: !1,
    FillColor: { Type: 1, Values: [1, 0, 0, 0] },
    StrokeColor: { Type: 1, Values: [1, 0, 0, 0] },
    _FillBackgroundFlag: !1,
    _FillBackgroundColor: { Type: 1, Values: [1, 0, 0, 0] },
    FillFlag: !0,
    StrokeFlag: !1,
    FillFirst: !0,
    _MiterLimit: 4,
    YUnderline: 1,
    OutlineWidth: 1,
    CharacterDirection: 0,
    HindiNumbers: !1,
    Kashida: 1,
    DiacriticPos: 2,
  };
  al.asm = function () {
    return { RunArray: [], RunLengthArray: [], IsJoinable: 2 };
  };
  al.aE_ = {
    EngineDict: {
      Editor: { Text: "\n" },
      ParagraphRun: {
        DefaultRunData: {
          ParagraphSheet: { DefaultStyleSheet: 0, Properties: {} },
          Adjustments: { Axis: [1, 0, 1], XY: [0, 0] },
        },
        RunArray: [
          {
            ParagraphSheet: { DefaultStyleSheet: 0, Properties: B.S(al.aD8) },
            Adjustments: { Axis: [1, 0, 1], XY: [0, 0] },
          },
        ],
        RunLengthArray: [1],
        IsJoinable: 1,
      },
      StyleRun: {
        DefaultRunData: { StyleSheet: { StyleSheetData: {} } },
        RunArray: [
          {
            StyleSheet: {
              StyleSheetData: {
                Font: 0,
                FontSize: 24,
                AutoKerning: !0,
                Kerning: 0,
              },
            },
          },
        ],
        RunLengthArray: [1],
        IsJoinable: 2,
      },
      GridInfo: {
        GridIsOn: !1,
        ShowGrid: !1,
        GridSize: 18,
        GridLeading: 22,
        GridColor: { Type: 1, Values: [0, 0, 0, 1] },
        GridLeadingFillColor: { Type: 1, Values: [0, 0, 0, 1] },
        AlignLineHeightToGridFlags: !1,
      },
      AntiAlias: 4,
      UseFractionalGlyphWidths: !0,
      Rendered: {
        Version: 1,
        Shapes: {
          WritingDirection: 0,
          Children: [
            {
              ShapeType: 0,
              Procession: 0,
              Lines: { WritingDirection: 0, Children: [] },
              Cookie: {
                Photoshop: {
                  ShapeType: 0,
                  PointBase: [0, 0],
                  Base: {
                    ShapeType: 0,
                    TransformPoint0: [1, 0],
                    TransformPoint1: [0, 1],
                    TransformPoint2: [0, 0],
                  },
                },
              },
            },
          ],
        },
      },
    },
    ResourceDict: {
      KinsokuSet: [
        {
          Name: "PhotoshopKinsokuHard",
          NoStart:
            "\u3001\u3002\uFF0C\uFF0E\u30FB\uFF1A\uFF1B\uFF1F\uFF01ー\u2015\u2019\u201D\uFF09\u3015\uFF3D\uFF5D\u3009\u300B\u300D\u300F\u3011ヽヾゝゞ々ぁぃぅぇぉっゃゅょゎァィゥェォッャュョヮヵヶ\u309B\u309C?!)]},.:;\u2103\u2109\xA2\uFF05\u2030",
          NoEnd:
            "\u2018\u201C\uFF08\u3014\uFF3B\uFF5B\u3008\u300A\u300C\u300E\u3010([{\uFFE5\uFF04\xA3\uFF20\xA7\u3012\uFF03",
          Keep: "\u2015\u2025",
          Hanging: "\u3001\u3002.,",
        },
        {
          Name: "PhotoshopKinsokuSoft",
          NoStart:
            "\u3001\u3002\uFF0C\uFF0E\u30FB\uFF1A\uFF1B\uFF1F\uFF01\u2019\u201D\uFF09\u3015\uFF3D\uFF5D\u3009\u300B\u300D\u300F\u3011ヽヾゝゞ々",
          NoEnd:
            "\u2018\u201C\uFF08\u3014\uFF3B\uFF5B\u3008\u300A\u300C\u300E\u3010",
          Keep: "\u2015\u2025",
          Hanging: "\u3001\u3002.,",
        },
      ],
      MojiKumiSet: [
        { InternalName: "Photoshop6MojiKumiSet1" },
        { InternalName: "Photoshop6MojiKumiSet2" },
        { InternalName: "Photoshop6MojiKumiSet3" },
        { InternalName: "Photoshop6MojiKumiSet4" },
      ],
      TheNormalStyleSheet: 0,
      TheNormalParagraphSheet: 0,
      ParagraphSheetSet: [
        { Name: "Normal RGB", DefaultStyleSheet: 0, Properties: B.S(al.aD8) },
      ],
      StyleSheetSet: [{ Name: "Normal RGB", StyleSheetData: B.S(al.aA8) }],
      FontSet: [
        { Name: "DejaVuSans", Script: 0, FontType: 1, Synthetic: 0 },
        { Name: "AdobeInvisFont", Script: 0, FontType: 0, Synthetic: 0 },
        { Name: "MyriadHebrew-Regular", Script: 6, FontType: 0, Synthetic: 0 },
      ],
      SuperscriptSize: 0.583,
      SuperscriptPosition: 0.333,
      SubscriptSize: 0.583,
      SubscriptPosition: 0.333,
      SmallCapSize: 0.7,
    },
  };
  var h6 = {};
  h6.a2O = function (j) {
    var q = h6.a3b(j._0, j._1);
    h6.ag5(q, j._0);
    return q;
  };
  h6.aor = function (j, q, m) {
    var n = {};
    n._98 = { _0: "i7" };
    n._0 = h6.awd(j, q, m ? m._0 : null);
    n._1 = h6.aLQ(j, q, n._0, m ? m._1 : null);
    return n;
  };
  h6.awd = function (j, q, m) {
    var n = {};
    n._1 = h6.ach(j, m ? m._1 : null);
    n._2 = { _0: [{ _0: { _0: "s" } }], _1: [{ _0: "i0" }] };
    n._3 = B.S(h6.aKI);
    n._4 = B.S(h6.akJ);
    n._5 = h6.a0U(j, n._1._0, m ? m._5 : null);
    n._6 = h6.a5W(j, m ? m._6 : null);
    n._8 = h6.amH(j, q, m ? m._8 : null);
    n._9 = h6.aIt;
    return n;
  };
  h6.ag5 = function (j, q) {
    h6.a0n(j, q._5, q._1._0);
  };
  h6.ach = function (j, q) {
    var m = [],
      n = [];
    for (var y = 0; y < j.length; y++) {
      var G = j[y].ResourceDict.FontSet;
      for (var W = 0; W < G.length; W++) {
        var k = G[W];
        if (n.indexOf(k.Name) != -1) continue;
        m.push(k);
        n.push(k.Name);
      }
    }
    var T = { _0: [] };
    for (var y = 0; y < m.length; y++) {
      var b = m[y],
        c = b.Axis,
        a = { _0: "s" + b.Name, _1: "i" + b.Script, _2: "i" + b.FontType };
      if (c) {
        var f = (a._4 = []);
        for (var W = 0; W < c.length; W++) f.push("i" + c[W]);
      }
      if (b.Script == 0) delete a._1;
      T._0.push({ _0: { _99: "/CoolTypeFont", _0: a } });
    }
    return T;
  };
  h6.a0U = function (j, q, m) {
    var n = { _0: [], _1: [] },
      G = { _0: B.S(h6.a2S) };
    h6.aI$(
      G._0,
      j[0].ResourceDict.StyleSheetSet[0],
      q,
      j[0].ResourceDict.FontSet
    );
    n._0.push(G);
    n._1.push({ _0: "i0" });
    n._0.push({ _0: { _0: "sNone", _5: "i0", _6: {} } });
    n._1.push({ _0: "i1" });
    return n;
  };
  h6.a0n = function (j, q, m) {
    var n = q._0[0];
    for (var y = 0; y < j.length; y++)
      h6.alq(
        n._0,
        j[y].ResourceDict.StyleSheetSet[0],
        m,
        j[y].ResourceDict.FontSet
      );
  };
  h6.a5W = function (j, q) {
    var m = { _0: [], _1: [] },
      n = { _0: B.S(h6.FS) };
    h6.Kr(n._0, j[0].ResourceDict.ParagraphSheetSet[0]);
    m._0.push(n);
    m._1.push({ _0: "i0" });
    n = { _0: B.S(h6.FS) };
    h6.Kr(n._0, j[0].ResourceDict.ParagraphSheetSet[0]);
    n._0._0 = "sBasic Paragraph";
    n._0._6 = "i0";
    m._0.push(n);
    m._1.push({ _0: "i1" });
    return m;
  };
  h6.amH = function (j, q, m) {
    var n = { _0: [] };
    for (var y = 0; y < j.length; y++) {
      var G = j[y].Curve,
        W = {};
      n._0.push({ _0: W });
      var k = al.Po(j[y]);
      W._1 = {};
      W._2 = {};
      W._2._0 = "i" + k;
      if (j[y]._LineOrientation == 2) W._2._1 = "i2";
      if (k == 0) {
        delete W._1;
        W._2._6 = ["f-1", "f-1"];
        W._2._11 = { _4: "i-1", _7: !1 };
      } else if (k == 1 && G == null) {
        var T = al.fu(j[y]),
          b = T[2],
          c = T[3];
        W._1._0 = h6.bE("f", [
          0,
          0,
          0,
          0,
          b,
          0,
          b,
          0,
          b,
          0,
          b,
          0,
          b,
          c,
          b,
          c,
          b,
          c,
          b,
          c,
          0,
          c,
          0,
          c,
          0,
          c,
          0,
          c,
          0,
          0,
          0,
          0,
        ]);
        W._2._6 = ["f-2", "f-2"];
        W._2._11 = { _4: "i-2", _7: !1 };
      } else if (k == 1) {
        var T = al.fu(j[y]),
          b = T[2],
          c = T[3];
        W._1._0 = h6.bE("f", G.Points);
        W._2._6 = ["f-3", "f-3"];
        W._2._11 = { _4: "i-3", _7: !1 };
      } else if (k == 2) {
        W._1._0 = h6.bE("f", G.Points);
        W._2._6 = h6.bE("f", G.TextOnPathTRange);
        W._2._11 = { _0: G.Reversed, _3: "i0", _5: "f0", _7: !1 };
      }
    }
    return n;
  };
  h6.aLQ = function (j, q, m, n) {
    var G = {};
    G._0 = B.S(h6.aFx);
    G._1 = h6.a5X(j, q, m, n ? n._1 : null);
    G._2 = B.S(h6.a2S._6);
    G._3 = B.S(h6.FS._5);
    return G;
  };
  h6.a3b = function (j, q) {
    return h6.a9X(j, q._1);
  };
  h6.a5X = function (j, q, m, n) {
    var G = [],
      W = m._1._0;
    for (var y = 0; y < j.length; y++) {
      var k = j[y],
        T = { _0: {} };
      G.push(T);
      T._0._0 = "s" + k.EngineDict.Editor.Text;
      T._0._0 = T._0._0;
      var b = (T._0._5 = { _0: [] }),
        c = k.EngineDict.ParagraphRun;
      for (var a = 0; a < c.RunArray.length; a++) {
        var f = { _0: {} };
        b._0.push(f);
        f._0._0 = { _0: "s", _5: {}, _6: "i1" };
        h6.Kr(f._0._0, c.RunArray[a].ParagraphSheet);
        f._1 = "i" + c.RunLengthArray[a];
      }
      var U = (T._0._6 = { _0: [] });
      c = k.EngineDict.StyleRun;
      for (var a = 0; a < c.RunArray.length; a++) {
        var Z = { _0: {} };
        U._0.push(Z);
        Z._0._0 = { _0: "s", _5: "i1", _6: {} };
        h6.aI$(Z._0._0, c.RunArray[a].StyleSheet, W, k.ResourceDict.FontSet);
        Z._1 = "i" + c.RunLengthArray[a];
      }
      c = k.EngineDict.AlternateGlyphRun;
      if (c) {
        var h = (T._0._9 = { _0: [] });
        for (var a = 0; a < c.RunArray.length; a++) {
          var u = { _0: {} };
          h._0.push(u);
          var i = c.RunArray[a];
          if (i.Glyph != null) {
            u._0._0 = { _0: "i" + i.Glyph, _1: "e" };
          }
          u._1 = "i" + c.RunLengthArray[a];
        }
      }
      T._0._10 = { _0: "i4", _2: !0 };
      T._1 = h6.view.ayx(k, null, y, null);
    }
    return G;
  };
  h6.a9X = function (j, q) {
    var m = [],
      n = j._1._0;
    if (q)
      for (var y = 0; y < q.length; y++) {
        var G = al.aeO();
        m.push(G);
        var W = q[y];
        G.EngineDict.Editor.Text = W._0._0.slice(1);
        var k = G.EngineDict.ParagraphRun.RunArray[0],
          T = G.EngineDict.ParagraphRun,
          b = W._0._5;
        if (b)
          for (var c = 0; c < b._0.length; c++) {
            var a = b._0[c];
            T.RunLengthArray[c] = parseInt(a._1.slice(1));
            T.RunArray[c] = B.S(k);
            h6.aqg(a._0._0, T.RunArray[c].ParagraphSheet);
          }
        else {
          T.RunLengthArray[0] = al.WT(G).length;
        }
        var f = W._0._6;
        T = G.EngineDict.StyleRun;
        if (f)
          for (var c = 0; c < f._0.length; c++) {
            var U = f._0[c];
            T.RunLengthArray[c] = parseInt(U._1.slice(1));
            T.RunArray[c] = { StyleSheet: { StyleSheetData: {} } };
            h6.alq(
              U._0._0,
              T.RunArray[c].StyleSheet,
              n,
              G.ResourceDict.FontSet
            );
          }
        else {
          T.RunLengthArray[0] = al.WT(G).length;
          T.RunArray[0] = { StyleSheet: { StyleSheetData: {} } };
        }
      }
    return m;
  };
  h6.aI$ = function (j, q, m, n, G) {
    j._0 = "s" + (q.Name ? q.Name : "");
    var W = j._6,
      k = G ? G._6 : null,
      T = q.StyleSheetData;
    if (T.Font != null) {
      var b = n[T.Font].Name,
        c = -1;
      for (var y = 0; y < m.length; y++)
        if ("s" + b == m[y]._0._0._0) {
          c = y;
          break;
        }
      W._0 = "i" + c;
    }
    if (T.FontSize != null) W._1 = "f" + T.FontSize;
    if (T.FauxBold != null) W._2 = T.FauxBold;
    if (T.FauxItalic != null) W._3 = T.FauxItalic;
    if (T.AutoLeading != null) W._4 = T.AutoLeading;
    if (T.Leading != null) W._5 = "f" + T.Leading;
    if (T.HorizontalScale != null) W._6 = "f" + T.HorizontalScale;
    if (T.VerticalScale != null) W._7 = "f" + T.VerticalScale;
    if (T.Tracking != null) W._8 = "i" + T.Tracking;
    if (T.BaselineShift != null) W._9 = "f" + T.BaselineShift;
    if (T.AutoKerning != null) W._11 = "i" + (T.AutoKerning ? 1 : 0);
    if (T.FontCaps != null) W._12 = "i" + T.FontCaps;
    if (T.FontBaseline != null) W._13 = "i" + T.FontBaseline;
    if (T.Strikethrough != null) W._15 = "i" + (T.Strikethrough ? 1 : 0);
    if (T.Underline != null) W._16 = "i" + (T.Underline ? 2 : 0);
    if (T.Ligatures != null) W._18 = T.Ligatures;
    if (T.DLigatures != null) W._19 = T.DLigatures;
    if (T.BaselineDirection != null) W._35 = "i" + T.BaselineDirection;
    if (T.Language != null) W._38 = "i" + T.Language;
    if (T.FillColor != null) W._53 = h6.ke(T.FillColor);
    if (T.StrokeColor != null) W._54 = h6.ke(T.StrokeColor);
    if (T.FillFlag != null) W._56 = T.FillFlag;
    if (T.StrokeFlag != null) W._57 = T.StrokeFlag;
    if (T.FillFirst != null) W._58 = T.FillFirst;
    if (T.OutlineWidth != null) W._63 = "f" + T.OutlineWidth;
    if (T._FillBackgroundColor != null) W._79 = h6.ke(T._FillBackgroundColor);
    if (T._FillBackgroundFlag != null) W._80 = T._FillBackgroundFlag;
    if (T._LineCap != null) W._61 = "i" + T._LineCap;
    if (T._LineJoin != null) W._62 = "i" + T._LineJoin;
    if (T._MiterLimit != null) W._64 = "f" + T._MiterLimit;
    if (T._LineDashOffset != null) W._65 = "f" + T._LineDashOffset;
    if (T._LineDashArray != null) W._66 = h6.bE("f", T._LineDashArray);
    if (T._DigitSet != null) W._70 = "i" + T._DigitSet;
    for (var y = 0; y < 8; y++)
      if (T[al.ls[y]] != null) W["_" + al.O$[y]] = T[al.ls[y]];
  };
  h6.ke = function (j) {
    return { _99: "/SimplePaint", _0: { _0: "i1", _1: h6.bE("f", j.Values) } };
  };
  h6.alq = function (j, q, m, n) {
    var G = j._6;
    if (G == null) return;
    var W = q.StyleSheetData;
    if (G._0) {
      var k = parseInt(G._0.slice(1)),
        T = m[k]._0._0._0.slice(1);
      al.gk({ K2: W, NJ: n }, T);
    }
    if (G._1 != null) W.FontSize = parseFloat(G._1.slice(1));
    if (G._2 != null) W.FauxBold = G._2;
    if (G._3 != null) W.FauxItalic = G._3;
    if (G._4 != null) W.AutoLeading = G._4;
    if (G._5 != null) W.Leading = parseFloat(G._5.slice(1));
    if (G._6 != null) W.HorizontalScale = parseFloat(G._6.slice(1));
    if (G._7 != null) W.VerticalScale = parseFloat(G._7.slice(1));
    if (G._8 != null) W.Tracking = parseFloat(G._8.slice(1));
    if (G._9 != null) W.BaselineShift = parseFloat(G._9.slice(1));
    if (G._11 != null) W.AutoKerning = parseFloat(G._11.slice(1)) == 1;
    if (G._12 != null) W.FontCaps = parseFloat(G._12.slice(1));
    if (G._13 != null) W.FontBaseline = parseFloat(G._13.slice(1));
    if (G._15 != null) W.Strikethrough = parseFloat(G._15.slice(1)) == 1;
    if (G._16 != null) W.Underline = parseFloat(G._16.slice(1)) == 1;
    if (G._18 != null) W.Ligatures = G._18;
    if (G._19 != null) W.DLigatures = G._19;
    if (G._35 != null) W.BaselineDirection = parseFloat(G._35.slice(1));
    if (G._38 != null) W.Language = parseFloat(G._38.slice(1));
    if (G._53 != null) W.FillColor = h6._n(G._53);
    if (G._54 != null) W.StrokeColor = h6._n(G._54);
    if (G._56 != null) W.FillFlag = G._56;
    if (G._57 != null) W.StrokeFlag = G._57;
    if (G._63 != null) W.OutlineWidth = parseFloat(G._63.slice(1));
    if (G._79 != null) W._FillBackgroundColor = h6._n(G._79);
    if (G._80 != null) W._FillBackgroundFlag = G._80;
    if (G._61 != null) W._LineCap = parseFloat(G._61.slice(1));
    if (G._62 != null) W._LineJoin = parseFloat(G._62.slice(1));
    if (G._64 != null) W._MiterLimit = parseFloat(G._64.slice(1));
    if (G._65 != null) W._LineDashOffset = parseFloat(G._65.slice(1));
    if (G._66 != null) W._LineDashArray = h6.Hh(G._66);
    if (G._70 != null) W._DigitSet = parseFloat(G._70.slice(1));
    for (var y = 0; y < 8; y++)
      if (G["_" + al.O$[y]] != null) W[al.ls[y]] = G["_" + al.O$[y]];
  };
  h6._n = function (j) {
    var q = j._0._0,
      m = [1, 0, 0, 0],
      n = h6.Hh(j._0._1);
    if (q == "i0") m[1] = m[2] = m[3] = n[1];
    else if (q == "i1") m = n;
    else if (q == "i2") m = [1].concat(UDOC.C.cmykToRgb(n.slice(1)));
    else console.log("unknown color type", q, n);
    return { Type: 1, Values: m };
  };
  h6.Kr = function (j, q) {
    j._0 = "s" + (q.Name ? q.Name : "");
    var m = j._5,
      n = q.Properties;
    if (n.Justification != null) m._0 = "i" + n.Justification;
    if (n.FirstLineIndent != null) m._1 = "f" + n.FirstLineIndent;
    if (n.StartIndent != null) m._2 = "f" + n.StartIndent;
    if (n.EndIndent != null) m._3 = "f" + n.EndIndent;
    if (n.SpaceBefore != null) m._4 = "f" + n.SpaceBefore;
    if (n.SpaceAfter != null) m._5 = "f" + n.SpaceAfter;
    if (n.AutoLeading != null) m._7 = "f" + n.AutoLeading;
    if (n.AutoHyphenate != null) m._9 = n.AutoHyphenate;
    if (n._Direction != null) m._33 = "i" + n._Direction;
    if (n._ComposerEngine != null) m._35 = "i" + n._ComposerEngine;
  };
  h6.aqg = function (j, q) {
    var m = j._5;
    if (m == null) return;
    var n = q.Properties;
    if (m._0) n.Justification = parseInt(m._0.slice(1));
  };
  h6.bE = function (j, q) {
    var m = [];
    for (var y = 0; y < q.length; y++) m.push(j + q[y]);
    return m;
  };
  h6.Hh = function (j) {
    var q = [];
    for (var y = 0; y < j.length; y++) q.push(parseFloat(j[y].slice(1)));
    return q;
  };
  h6.aKI = {
    _0: [
      { _0: { _0: "sPhotoshop6MojiKumiSet4", _5: { _0: "i0", _3: "i2" } } },
      { _0: { _0: "sPhotoshop6MojiKumiSet3", _5: { _0: "i0", _3: "i4" } } },
      { _0: { _0: "sPhotoshop6MojiKumiSet2", _5: { _0: "i0", _3: "i3" } } },
      { _0: { _0: "sPhotoshop6MojiKumiSet1", _5: { _0: "i0", _3: "i1" } } },
      { _0: { _0: "sYakumonoHankaku", _5: { _0: "i0", _3: "i1" } } },
      { _0: { _0: "sGyomatsuYakumonoHankaku", _5: { _0: "i0", _3: "i3" } } },
      { _0: { _0: "sGyomatsuYakumonoZenkaku", _5: { _0: "i0", _3: "i4" } } },
      { _0: { _0: "sYakumonoZenkaku", _5: { _0: "i0", _3: "i2" } } },
    ],
    _1: [
      { _0: "i0" },
      { _0: "i1" },
      { _0: "i2" },
      { _0: "i3" },
      { _0: "i4" },
      { _0: "i5" },
      { _0: "i6" },
      { _0: "i7" },
    ],
  };
  h6.akJ = {
    _0: [
      {
        _0: {
          _0: "sNone",
          _5: { _0: "s", _1: "s", _2: "s", _3: "s", _4: "i0" },
        },
      },
      {
        _0: {
          _0: "sPhotoshopKinsokuHard",
          _5: {
            _0: "s!),.:;?]}\xA2\u2014\u2019\u201D\u2030\u2103\u2109\u3001\u3002々\u3009\u300B\u300A\u300F\u3011\u3015ぁぃぅぇぉっゃゅょゎ\u309B\u309Cゝゞァィゥェォッャュョヮヵヶ\u30FBーヽヾ\uFF01\uFF05\uFF09\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF3D\uFF5D",
            _1: "s([{\xA3\xA7\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3012\u3014\uFF03\uFF04\uFF08\uFF20\uFF3B\uFF5B\uFFE5",
            _2: "s\u2014\u2025\u2026",
            _3: "s\u3001\u3002\uFF0C\uFF0E",
            _4: "i1",
          },
        },
      },
      {
        _0: {
          _0: "sPhotoshopKinsokuSoft",
          _5: {
            _0: "s\u2019\u201D\u3001\u3002々\u3009\u300B\u300A\u300F\u3011\u3015ゝゞ\u30FBヽヾ\uFF01\uFF09\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF3D\uFF5D",
            _1: "s\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B",
            _2: "s\u2014\u2025\u2026",
            _3: "s\u3001\u3002\uFF0C\uFF0E",
            _4: "i2",
          },
        },
      },
      {
        _0: {
          _0: "sHard",
          _5: {
            _0: "s!),.:;?]}\xA2\u2014\u2019\u201D\u2030\u2103\u2109\u3001\u3002々\u3009\u300B\u300A\u300F\u3011\u3015ぁぃぅぇぉっゃゅょゎ\u309B\u309Cゝゞァィゥェォッャュョヮヵヶ\u30FBーヽヾ\uFF01\uFF05\uFF09\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF3D\uFF5D",
            _1: "s([{\xA3\xA7\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3012\u3014\uFF03\uFF04\uFF08\uFF20\uFF3B\uFF5B\uFFE5",
            _2: "s\u2014\u2025\u2026",
            _3: "s\u3001\u3002\uFF0C\uFF0E",
            _4: "i1",
          },
        },
      },
      {
        _0: {
          _0: "sSoft",
          _5: {
            _0: "s\u2019\u201D\u3001\u3002々\u3009\u300B\u300A\u300F\u3011\u3015ゝゞ\u30FBヽヾ\uFF01\uFF09\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF3D\uFF5D",
            _1: "s\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B",
            _2: "s\u2014\u2025\u2026",
            _3: "s\u3001\u3002\uFF0C\uFF0E",
            _4: "i2",
          },
        },
      },
    ],
    _1: [{ _0: "i0" }, { _0: "i1" }, { _0: "i2" }, { _0: "i3" }, { _0: "i4" }],
  };
  h6.a2S = {
    _0: "sNormal RGB",
    _6: {
      _0: "i0",
      _1: "f12",
      _2: !1,
      _3: !1,
      _4: !0,
      _5: "f0",
      _6: "f1",
      _7: "f1",
      _8: "i0",
      _9: "f0",
      _10: "f0",
      _11: "i1",
      _12: "i0",
      _13: "i0",
      _14: "i0",
      _15: "i0",
      _16: "i0",
      _17: "f0",
      _18: !0,
      _19: !1,
      _20: !1,
      _21: !1,
      _22: !1,
      _23: !1,
      _24: !1,
      _25: !1,
      _26: !1,
      _27: !1,
      _28: !1,
      _29: !1,
      _30: "i0",
      _31: !1,
      _32: !1,
      _33: !1,
      _34: !1,
      _35: "i2",
      _36: "f0",
      _37: "i2",
      _38: "i0",
      _39: "i0",
      _40: !1,
      _41: "i2",
      _42: "i0",
      _43: { _0: "f.5" },
      _44: "i2",
      _45: "i2",
      _46: "i7",
      _47: "i0",
      _48: "i0",
      _49: "f-1",
      _50: "f-1",
      _51: "i0",
      _52: !1,
      _53: {
        _99: "/SimplePaint",
        _0: { _0: "i1", _1: ["f1", "f0", "f0", "f0"] },
      },
      _54: {
        _99: "/SimplePaint",
        _0: { _0: "i1", _1: ["f1", "f0", "f0", "f0"] },
      },
      _55: { _99: "/SimpleBlender" },
      _56: !0,
      _57: !1,
      _58: !0,
      _59: !1,
      _60: !1,
      _61: "i0",
      _62: "i0",
      _63: "f1",
      _64: "f4",
      _65: "f0",
      _66: [],
      _67: [],
      _68: "i0",
      _69: "i0",
      _70: "i0",
      _71: "i4",
      _72: "f0",
      _73: "f0",
      _74: !1,
      _75: !1,
      _76: !1,
      _77: !0,
      _78: !0,
      _79: {
        _99: "/SimplePaint",
        _0: { _0: "i1", _1: ["f1", "f1", "f1", "f0"] },
      },
      _80: !1,
      _81: "i0",
      _82: "f3",
      _83: "f3",
      _84: !1,
      _85: "i0",
      _86: { _99: "/SimpleCustomFeature" },
      _87: "f100",
      _88: !0,
    },
  };
  h6.FS = {
    _0: "sNormal RGB",
    _5: {
      _0: "i0",
      _1: "f0",
      _2: "f0",
      _3: "f0",
      _4: "f0",
      _5: "f0",
      _6: "i1",
      _7: "f1.2",
      _8: "i0",
      _9: !0,
      _10: "i6",
      _11: "i2",
      _12: "i2",
      _13: "i0",
      _14: "f36",
      _15: !0,
      _16: "f.5",
      _17: ["f.8", "f1", "f1.33"],
      _18: ["f0", "f0", "f0"],
      _19: ["f1", "f1", "f1"],
      _20: "i6",
      _21: !1,
      _22: "i0",
      _23: !0,
      _24: "i0",
      _25: "i0",
      _27: "/nil",
      _26: !1,
      _28: "/nil",
      _29: !1,
      _30: {},
      _31: "f36",
      _32: {},
      _33: "i0",
      _34: "i7",
      _35: "i1",
      _36: "/nil",
      _37: "i0",
      _38: !1,
      _39: "i0",
      _40: "i2",
    },
  };
  h6.aIt = {
    _0: [
      { _0: { _0: "skPredefinedNumericListStyleTag", _6: "i1" } },
      { _0: { _0: "skPredefinedUppercaseAlphaListStyleTag", _6: "i2" } },
      { _0: { _0: "skPredefinedLowercaseAlphaListStyleTag", _6: "i3" } },
      { _0: { _0: "skPredefinedUppercaseRomanNumListStyleTag", _6: "i4" } },
      { _0: { _0: "skPredefinedLowercaseRomanNumListStyleTag", _6: "i5" } },
      { _0: { _0: "skPredefinedBulletListStyleTag", _6: "i6" } },
    ],
    _1: [
      { _0: "i0" },
      { _0: "i1" },
      { _0: "i2" },
      { _0: "i3" },
      { _0: "i4" },
      { _0: "i5" },
    ],
  };
  h6.aFx = {
    _0: {
      _0: "i1",
      _1: [
        { _0: "s ", _1: "s1" },
        { _0: "s\r", _1: "s6" },
        { _0: "s\t", _1: "s0" },
        { _0: "s\u2029", _1: "s5" },
        { _0: "s\x03", _1: "s5" },
        { _0: "s\u3000", _1: "s1" },
        { _0: "s\xAD", _1: "s3" },
      ],
    },
    _1: "i0",
    _2: "i0",
    _3: "f.583",
    _4: "f.333",
    _5: "f.583",
    _6: "f.333",
    _7: "f.7",
    _8: !0,
    _9: [
      { _0: "i0", _1: "s\u201C", _2: "s\u201D", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i1", _1: "s\u201D", _2: "s\u201D", _3: "s\u2019", _4: "s\u2019" },
      { _0: "i2", _1: "s\xAB", _2: "s\xBB", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i3", _1: "s\xAB", _2: "s\xBB", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i4", _1: "s\u201E", _2: "s\u201C", _3: "s\u201A", _4: "s\u2018" },
      { _0: "i5", _1: "s\u201E", _2: "s\u201C", _3: "s\u201A", _4: "s\u2018" },
      { _0: "i6", _1: "s\xAB", _2: "s\xBB", _3: "s\u2039", _4: "s\u203A" },
      { _0: "i7", _1: "s\u201C", _2: "s\u201D", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i8", _1: "s\xAB", _2: "s\xBB", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i9", _1: "s\xAB", _2: "s\xBB", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i10", _1: "s\u201C", _2: "s\u201D", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i11", _1: "s\u201C", _2: "s\u201D", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i12", _1: "s\u201C", _2: "s\u201D", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i13", _1: "s\u201D", _2: "s\u201D", _3: "s\u2019", _4: "s\u2019" },
      { _0: "i14", _1: "s\u201C", _2: "s\u201D", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i15", _1: "s\u201C", _2: "s\u201D", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i16", _1: "s\u201D", _2: "s\u201D", _3: "s\u2019", _4: "s\u2019" },
      { _0: "i17", _1: "s\u201C", _2: "s\u201D", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i18", _1: "s\xAB", _2: "s\xBB", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i19", _1: "s\xAB", _2: "s\xBB", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i20", _1: "s\u201E", _2: "s\u201C", _3: "s\u201A", _4: "s\u2018" },
      { _0: "i21", _1: "s\u201E", _2: "s\u201C", _3: "s\u201A", _4: "s\u2018" },
      { _0: "i22", _1: "s\u201E", _2: "s\u201C", _3: "s\u201A", _4: "s\u2018" },
      { _0: "i23", _1: "s\u201E", _2: "s\u201D", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i24", _1: "s\u201E", _2: "s\u201D", _3: "s\u201A", _4: "s\u2019" },
      { _0: "i25", _1: "s\xAB", _2: "s\xBB", _3: "s\u2039", _4: "s\u203A" },
      { _0: "i26", _1: "s\u201C", _2: "s\u201D", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i27", _1: "s\u201C", _2: "s\u201D", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i28", _1: "s\u201E", _2: "s\u201D", _3: "s\u2019", _4: "s\u2019" },
      { _0: "i29", _1: "s\u301D", _2: "s\u301E" },
      { _0: "i30", _1: "s\u300C", _2: "s\u300D" },
      { _0: "i31", _1: "s\u201E", _2: "s\u201C", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i32", _1: "s\u201C", _2: "s\u201D", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i33", _1: "s\u201E", _2: "s\u201C", _3: "s\u201A", _4: "s\u2018" },
      { _0: "i34", _1: "s\xAB", _2: "s\xBB", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i35", _1: "s\u201C", _2: "s\u201D", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i36", _1: "s\u201E", _2: "s\u201C", _3: "s\u201A", _4: "s\u2018" },
      { _0: "i37", _1: "s\xAB", _2: "s\xBB", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i38", _1: "s\u201E", _2: "s\u201C", _3: "s\u201A", _4: "s\u2018" },
      { _0: "i39", _1: "s\xAB", _2: "s\xBB", _3: "s<", _4: "s>" },
      { _0: "i40", _1: "s\u201E", _2: "s\u201C", _3: "s\u201A", _4: "s\u2018" },
      { _0: "i41", _1: "s\xAB", _2: "s\xBB", _3: "s<", _4: "s>" },
      { _0: "i42", _1: "s\u201E", _2: "s\u201C", _3: "s\u201A", _4: "s\u2018" },
      { _0: "i43", _1: "s\u201C", _2: "s\u201D", _3: "s\u2018", _4: "s\u2019" },
      { _0: "i44", _1: "s\xAB", _2: "s\xBB", _3: "s\u2039", _4: "s\u203A" },
      { _0: "i45", _1: "s\u201C", _2: "s\u201D", _3: "s\u2018", _4: "s\u2019" },
    ],
    _15: { _0: "sWinSoft" },
    _16: !1,
  };
  var eY = {};
  eY.avH = function (j) {
    return eY.oe(j, eY.UL, 0);
  };
  eY.aix = function (j) {
    return eY.n7(j, eY.UL);
  };
  eY.oe = function (j, q, m) {
    var n;
    if (typeof j == "string") return j;
    if (j instanceof Array) {
      n = [];
      for (var y = 0; y < j.length; y++) n[y] = eY.oe(j[y], q, m + 1);
    } else {
      n = {};
      var G = {};
      for (var W in q) {
        var k = q[W],
          T = "_" + k[0];
        if (j[T] != null) {
          n[W] = k[1] ? eY.oe(j[T], k[1], m + 1) : j[T];
          G[T] = !0;
        }
      }
      for (var W in j) {
        if (G[W] == null) {
          if (W.length > 3) continue;
          console.log(q, G);
          console.log(W, j);
          throw "e";
        }
      }
    }
    return n;
  };
  eY.n7 = function (j, q) {
    var m;
    if (typeof j == "string") return j;
    else if (j instanceof Array) {
      m = [];
      for (var y = 0; y < j.length; y++) m[y] = eY.n7(j[y], q);
    } else {
      m = {};
      var n = {};
      for (var G in q) {
        var W = q[G],
          k = "_" + W[0];
        if (j[G] != null) {
          m[k] = W[1] ? eY.n7(j[G], W[1]) : j[G];
          n[G] = !0;
        }
      }
      for (var G in j) {
        if (n[G] == null) {
          console.log(q, n);
          console.log(G, j);
          throw "e";
        }
      }
    }
    return m;
  };
  eY.eB = {
    _Color: [0, { _Type: [0], _Values: [1] }],
    _CAIKnownStyleID: [5],
    _StreamTag: [99],
  };
  eY.Tg = {
    _Font: [0],
    _FontSize: [1],
    _FauxBold: [2],
    _FauxItalic: [3],
    _AutoLeading: [4],
    _Leading: [5],
    _HorizontalScale: [6],
    _VerticalScale: [7],
    _Tracking: [8],
    _BaselineShift: [9],
    _CharacterRotation: [10],
    _AutoKern: [11],
    _FontCaps: [12],
    _FontBaseline: [13],
    _FontOTPosition: [14],
    _StrikethroughPosition: [15],
    _UnderlinePosition: [16],
    _UnderlineOffset: [17],
    _Ligatures: [18],
    _DiscretionaryLigatures: [19],
    _ContextualLigatures: [20],
    _AlternateLigatures: [21],
    _OldStyle: [22],
    _Fractions: [23],
    _Ordinals: [24],
    _Swash: [25],
    _Titling: [26],
    _ConnectionForms: [27],
    _StylisticAlternates: [28],
    _Ornaments: [29],
    _FigureStyle: [30],
    _ProportionalMetrics: [31],
    _Kana: [32],
    _Italics: [33],
    _Ruby: [34],
    _BaselineDirection: [35],
    _Tsume: [36],
    _StyleRunAlignment: [37],
    _Language: [38],
    _JapaneseAlternateFeature: [39],
    _EnableWariChu: [40],
    _WariChuLineCount: [41],
    _WariChuLineGap: [42],
    _WariChuSubLineAmount: [43, { _WariChuSubLineScale: [0] }],
    _WariChuWidowAmount: [44],
    _WariChuOrphanAmount: [45],
    _WariChuJustification: [46],
    _TCYUpDownAdjustment: [47],
    _TCYLeftRightAdjustment: [48],
    _LeftAki: [49],
    _RightAki: [50],
    _JiDori: [51],
    _NoBreak: [52],
    _FillColor: [53, eY.eB],
    _StrokeColor: [54, eY.eB],
    _Blend: [
      55,
      { _0: [0], _1: [1], _2: [2], _3: [3], _Knockout: [4], _StreamTag: [99] },
    ],
    _FillFlag: [56],
    _StrokeFlag: [57],
    _FillFirst: [58],
    _FillOverPrint: [59],
    _StrokeOverPrint: [60],
    _LineCap: [61],
    _LineJoin: [62],
    _LineWidth: [63],
    _MiterLimit: [64],
    _LineDashOffset: [65],
    _LineDashArray: [66],
    _Type1EncodingNames: [67],
    _Kashidas: [68],
    _DirOverride: [69],
    _DigitSet: [70],
    _DiacVPos: [71],
    _DiacXOffset: [72],
    _DiacYOffset: [73],
    _OverlapSwash: [74],
    _JustificationAlternates: [75],
    _StretchedAlternates: [76],
    _FillVisibleFlag: [77],
    _StrokeVisibleFlag: [78],
    _FillBackgroundColor: [79, eY.eB],
    _FillBackgroundFlag: [80],
    _UnderlineStyle: [81],
    _DashedUnderlineGapLength: [82],
    _DashedUnderlineDashLength: [83],
    _SlashedZero: [84],
    _StylisticSets: [85],
    _CustomFeature: [86, { _StreamTag: [99] }],
    _MarkYDistFromBaseline: [87],
    _AutoMydfb: [88],
    _RefFontSize: [89],
    _FontSizeRefType: [90],
    _91: [91],
    _92: [92],
    _TrackingAdjustment: [93],
    _94: [94],
    _95: [95],
    _96: [96],
  };
  eY.aeH = {
    _Justification: [0],
    _FirstLineIndent: [1],
    _StartIndent: [2],
    _EndIndent: [3],
    _SpaceBefore: [4],
    _SpaceAfter: [5],
    _DropCaps: [6],
    _AutoLeading: [7],
    _LeadingType: [8],
    _AutoHyphenate: [9],
    _HyphenatedWordSize: [10],
    _PreHyphen: [11],
    _PostHyphen: [12],
    _ConsecutiveHyphens: [13],
    _Zone: [14],
    _HyphenateCapitalized: [15],
    _HyphenationPreference: [16],
    _WordSpacing: [17],
    _LetterSpacing: [18],
    _GlyphSpacing: [19],
    _SingleWordJustification: [20],
    _Hanging: [21],
    _AutoTCY: [22],
    _KeepTogether: [23],
    _BurasagariType: [24],
    _KinsokuOrder: [25],
    _Kinsoku: [27],
    _KurikaeshiMojiShori: [26],
    _MojiKumiTable: [28],
    _EveryLineComposer: [29],
    _TabStops: [30],
    _DefaultTabWidth: [31],
    _DefaultStyle: [32, eY.Tg],
    _ParagraphDirection: [33],
    _JustificationMethod: [34],
    _ComposerEngine: [35],
    _ListStyle: [36],
    _ListTier: [37],
    _ListSkip: [38],
    _ListOffset: [39],
    _KashidaWidth: [40],
    _41: [41],
  };
  eY.aaY = { _Name: [0], _Features: [5, eY.aeH], _Parent: [6], _UUID: [97] };
  eY.aGI = { _Name: [0], _Parent: [5], _Features: [6, eY.Tg], _UUID: [97] };
  eY.UL = {
    _98: [98, { _0: [0] }],
    _DocumentResources: [
      0,
      {
        _0: [0],
        _FontSet: [
          1,
          {
            _Resources: [
              0,
              {
                _Resource: [
                  0,
                  {
                    _StreamTag: [99],
                    _Identifier: [
                      0,
                      {
                        _Name: [0],
                        _ScriptType: [1],
                        _Type: [2],
                        _Synthetic: [3],
                        _MMAxis: [4],
                        _VersionString: [5],
                      },
                    ],
                    _UUID: [97],
                  },
                ],
              },
            ],
            _DisplayList: [1, { _Resource: [0] }],
          },
        ],
        _MojiKumiCodeToClassSet: [
          2,
          {
            _Resources: [
              0,
              { _Resource: [0, { _Name: [0], _Members: [5], _UUID: [97] }] },
            ],
            _DisplayList: [1, { _Resource: [0] }],
          },
        ],
        _MojiKumiTableSet: [
          3,
          {
            _Resources: [
              0,
              {
                _Resource: [
                  0,
                  {
                    _Name: [0],
                    _Members: [
                      5,
                      {
                        _CodeToClass: [0],
                        _AutoTsume: [
                          1,
                          {
                            _TsumeMappings: [
                              0,
                              { _Before: [0], _After: [1], _Code: [2] },
                            ],
                          },
                        ],
                        _Table: [
                          2,
                          {
                            _DataArray: [
                              0,
                              {
                                _SparseArray: [
                                  0,
                                  {
                                    _Index: [0],
                                    _Elements: [
                                      1,
                                      {
                                        _P: [0],
                                        _Data: [
                                          1,
                                          {
                                            _A: [
                                              0,
                                              { _R: [0], _P: [1], _2: [2] },
                                            ],
                                            _B: [1, { _R: [0], _P: [1] }],
                                          },
                                        ],
                                      },
                                    ],
                                  },
                                ],
                              },
                            ],
                          },
                        ],
                        _PredefinedTag: [3],
                      },
                    ],
                    _UUID: [97],
                  },
                ],
              },
            ],
            _DisplayList: [1, { _Resource: [0] }],
          },
        ],
        _KinsokuSet: [
          4,
          {
            _Resources: [
              0,
              {
                _Resource: [
                  0,
                  {
                    _Name: [0],
                    _Data: [
                      5,
                      {
                        _NoStart: [0],
                        _NoEnd: [1],
                        _Keep: [2],
                        _Hanging: [3],
                        _PredefinedTag: [4],
                      },
                    ],
                    _UUID: [97],
                  },
                ],
              },
            ],
            _DisplayList: [1, { _Resource: [0] }],
          },
        ],
        _StyleSheetSet: [
          5,
          {
            _Resources: [0, { _Resource: [0, eY.aGI] }],
            _DisplayList: [1, { _Resource: [0] }],
          },
        ],
        _ParagraphSheetSet: [
          6,
          {
            _Resources: [0, { _Resource: [0, eY.aaY] }],
            _DisplayList: [1, { _Resource: [0] }],
          },
        ],
        _7: [
          7,
          {
            _Resources: [
              0,
              {
                _Resource: [
                  0,
                  {
                    _0: [0, { _0: [0], _1: [1, { _0: [0] }] }],
                    _1: [1],
                    _UUID: [97],
                  },
                ],
              },
            ],
          },
        ],
        _TextFrameSet: [
          8,
          {
            _Resources: [
              0,
              {
                _Resource: [
                  0,
                  {
                    _0: [0],
                    _Bezier: [1, { _Points: [0] }],
                    _Data: [
                      2,
                      {
                        _Type: [0],
                        _LineOrientation: [1],
                        _FrameMatrix: [2],
                        _3: [3],
                        _4: [4],
                        _5: [5],
                        _TextOnPathTRange: [6],
                        _RowGutter: [7],
                        _ColumnGutter: [8],
                        _9: [9],
                        _FirstBaselineAlignment: [
                          10,
                          { _Flag: [0], _Min: [1] },
                        ],
                        _PathData: [
                          11,
                          {
                            _1: [1],
                            _Reversed: [0],
                            _2: [2],
                            _3: [3],
                            _Spacing: [4],
                            _5: [5],
                            _6: [6],
                            _7: [7],
                            _18: [18],
                            _22: [22],
                          },
                        ],
                        _RowCount: [12],
                        _ColumnCount: [13],
                        _15: [15],
                        _16: [16],
                        _17: [17],
                      },
                    ],
                    _3: [3, { _0: [0] }],
                    _UUID: [97],
                  },
                ],
              },
            ],
          },
        ],
        _ListStyleSet: [
          9,
          {
            _Resources: [
              0,
              {
                _Resource: [
                  0,
                  {
                    _Name: [0],
                    _LevelStyle: [
                      5,
                      {
                        _IndentUnits: [0],
                        _TextIndent: [1],
                        _LabelIndent: [2],
                        _LabelAlignment: [3],
                        _SequenceGenerator: [
                          5,
                          {
                            _Prefix: [0],
                            _Postfix: [1],
                            _MinDigits: [2],
                            _CaseType: [3],
                            _Bullet: [9],
                            _StreamTag: [99],
                          },
                        ],
                        _Font: [6],
                        _UseOriginalFont: [7],
                      },
                    ],
                    _PredefinedTag: [6],
                    _UUID: [97],
                  },
                ],
              },
            ],
            _DisplayList: [1, { _Resource: [0] }],
          },
        ],
      },
    ],
    _DocumentObjects: [
      1,
      {
        _DocumentSettings: [
          0,
          {
            _HiddenGlyphFont: [
              0,
              {
                _AlternateGlyphFont: [0],
                _WhitespaceCharacterMapping: [
                  1,
                  { _WhitespaceCharacter: [0], _AlternateCharacter: [1] },
                ],
              },
            ],
            _NormalStyleSheet: [1],
            _NormalParagraphSheet: [2],
            _SuperscriptSize: [3],
            _SuperscriptPosition: [4],
            _SubscriptSize: [5],
            _SubscriptPosition: [6],
            _SmallCapSize: [7],
            _UseSmartQuotes: [8],
            _SmartQuoteSets: [
              9,
              {
                _Language: [0],
                _OpenDoubleQuote: [1],
                _CloseDoubleQuote: [2],
                _OpenSingleQuote: [3],
                _CloseSingleQuote: [4],
              },
            ],
            _10: [10],
            _11: [11],
            _LinguisticSettings: [
              15,
              { _PreferredProvider: [0], _LinguisticProviderInfo: [1] },
            ],
            _12: [12],
            _13: [13],
            _UseSmartLists: [16],
            _DefaultStoryDir: [17],
            _18: [18],
            _GreekingSize: [20],
          },
        ],
        _TextObjects: [
          1,
          {
            _Model: [
              0,
              {
                _Text: [0],
                _ParagraphRun: [
                  5,
                  {
                    _RunArray: [
                      0,
                      {
                        _RunData: [0, { _ParagraphSheet: [0, eY.aaY] }],
                        _Length: [1],
                      },
                    ],
                  },
                ],
                _StyleRun: [
                  6,
                  {
                    _RunArray: [
                      0,
                      {
                        _RunData: [0, { _StyleSheet: [0, eY.aGI] }],
                        _Length: [1],
                      },
                    ],
                  },
                ],
                _FirstKern: [7],
                _8: [8],
                _AlternateGlyphRun: [
                  9,
                  {
                    _RunArray: [
                      0,
                      {
                        _RunData: [
                          0,
                          {
                            _AlternateGlyphSheet: [
                              0,
                              { _Glyph: [0], _Name: [1], _2: [2] },
                            ],
                            _AlternateGlyph: [1],
                          },
                        ],
                        _Length: [1],
                      },
                    ],
                  },
                ],
                _StorySheet: [
                  10,
                  {
                    _AntiAlias: [0],
                    _1: [1],
                    _UseFractionalGlyphWidths: [2],
                    _3: [3],
                    _4: [4],
                  },
                ],
                _KernRun: [15],
                _HyperlinkRun: [16],
              },
            ],
            _View: [
              1,
              {
                _Frames: [0, { _Resource: [0] }],
                _RenderedData: [
                  1,
                  {
                    _RunArray: [
                      0,
                      {
                        _RunData: [0, { _0: [0], _LineCount: [1] }],
                        _Length: [1],
                      },
                    ],
                  },
                ],
                _Strikes: [2],
                _4: [4],
                _5: [5],
              },
            ],
            _OpticalAlignment: [2],
          },
        ],
        _OriginalNormalStyleFeatures: [2, eY.Tg],
        _OriginalNormalParagraphFeatures: [3, eY.aeH],
        _4: [4],
        _5: [5],
      },
    ],
  };
  h6.view = {};
  h6.view.ayx = function (j, q, m, n) {
    var G = {},
      W = al.Po(j);
    G._0 = [{ _0: "i" + m }];
    return G;
  };
  function CSS() {}
  CSS.aaU = function (j, q) {
    var m = j.add,
      n = m.vmsk,
      G = m.vstk,
      W = m.lmfx,
      k = m.TySh,
      T = [],
      b = CSS.H4(W, m),
      c = (j.yA / 255) * (j.add.iOpa != null ? j.add.iOpa / 255 : 1);
    if (c != 1) T.push("opacity: " + c.toFixed(3));
    if (j.ql() && n) {
      var a = B.z.zZ(n.D);
      if (!a.jG()) {
        T.push("width: " + Math.round(a.r) + "px");
        T.push("height: " + Math.round(a.$) + "px");
      }
      var f = B.z.a1N(n.D);
      if (f > 0) T.push("border-radius: " + Math.round(f) + "px");
    } else if (k) {
      var U = k.s3;
      if (al.Po(U) == 1) {
        var a = al.fu(U);
        T.push("width: " + Math.round(a[2]) + "px");
        T.push("height: " + Math.round(a[3]) + "px");
      }
      CSS.a6R(T, al.vJ(U, 0, 0), k.u, !1, !1, b[0]);
    }
    CSS.a5O(q, W, T);
    if (k == null) CSS.aCs(b, T);
    if (G == null || !G.strokeEnabled.v) G = dS.aj9(W);
    if (G && G.strokeEnabled.v) {
      var Z = G.strokeStyleContent.v,
        h = Z.classID,
        u = G.strokeStyleOpacity.v.val / 100,
        i = G.strokeStyleLineWidth.v.val,
        x = "";
      if (h == "solidColorLayer") x = CSS.mP(Z.Clr.v, u);
      T.push("border: " + i + "px solid " + x);
    }
    return T;
  };
  CSS.a5O = function (j, q, m) {
    if (q == null || !q.masterFXSwitch.v) return;
    var n = q.dropShadowMulti.v.concat(q.innerShadowMulti.v);
    for (var y = 0; y < n.length; y++) {
      var G = n[y].v;
      if (G.enab.v) {
        var W = G.classID == "IrSh",
          k = G.Dstn.v.val,
          T = (G.lagl.v.val * Math.PI) / 180;
        if (G.uglg && G.uglg.v) T = (j.KB() * Math.PI) / 180;
        var b = k * Math.cos(T),
          c = k * Math.sin(T),
          a =
            (b == 0 ? "0 " : CSS.a8H(-b) + "px ") +
            (c == 0 ? "0 " : CSS.a8H(c) + "px ") +
            G.blur.v.val / 2 +
            "px " +
            CSS.mP(G.Clr.v, G.Opct.v.val / 100);
        if (W) m.push("box-shadow: inset " + a);
        else m.push("filter: drop-shadow(" + a + ")");
      }
    }
  };
  CSS.H4 = function (j, q) {
    var m = dS.a0L(j, q),
      n = m[0],
      G = m[1],
      W,
      k;
    if (n) {
      W = CSS.mP(n.Clr.v, q.iOpa != null ? q.iOpa / 255 : 1);
    } else if (G) {
      k = CSS.BZ(G);
    }
    return [W, k];
  };
  CSS.aCs = function (j, q) {
    if (j[0]) q.push("background-color: " + j[0]);
    if (j[1]) q.push("background-image: " + j[1]);
  };
  CSS.Aj = {
    aliceblue: "#f0f8ff",
    antiquewhite: "#faebd7",
    aqua: "#00ffff",
    aquamarine: "#7fffd4",
    azure: "#f0ffff",
    beige: "#f5f5dc",
    bisque: "#ffe4c4",
    black: "#000000",
    blanchedalmond: "#ffebcd",
    blue: "#0000ff",
    blueviolet: "#8a2be2",
    brown: "#a52a2a",
    burlywood: "#deb887",
    cadetblue: "#5f9ea0",
    chartreuse: "#7fff00",
    chocolate: "#d2691e",
    coral: "#ff7f50",
    cornflowerblue: "#6495ed",
    cornsilk: "#fff8dc",
    crimson: "#dc143c",
    cyan: "#00ffff",
    darkblue: "#00008b",
    darkcyan: "#008b8b",
    darkgoldenrod: "#b8860b",
    darkgray: "#a9a9a9",
    darkgreen: "#006400",
    darkgrey: "#a9a9a9",
    darkkhaki: "#bdb76b",
    darkmagenta: "#8b008b",
    darkolivegreen: "#556b2f",
    darkorange: "#ff8c00",
    darkorchid: "#9932cc",
    darkred: "#8b0000",
    darksalmon: "#e9967a",
    darkseagreen: "#8fbc8f",
    darkslateblue: "#483d8b",
    darkslategray: "#2f4f4f",
    darkslategrey: "#2f4f4f",
    darkturquoise: "#00ced1",
    darkviolet: "#9400d3",
    deeppink: "#ff1493",
    deepskyblue: "#00bfff",
    dimgray: "#696969",
    dimgrey: "#696969",
    dodgerblue: "#1e90ff",
    firebrick: "#b22222",
    floralwhite: "#fffaf0",
    forestgreen: "#228b22",
    fuchsia: "#ff00ff",
    gainsboro: "#dcdcdc",
    ghostwhite: "#f8f8ff",
    gold: "#ffd700",
    goldenrod: "#daa520",
    gray: "#808080",
    green: "#008000",
    greenyellow: "#adff2f",
    grey: "#808080",
    honeydew: "#f0fff0",
    hotpink: "#ff69b4",
    indianred: "#cd5c5c",
    indigo: "#4b0082",
    ivory: "#fffff0",
    khaki: "#f0e68c",
    lavender: "#e6e6fa",
    lavenderblush: "#fff0f5",
    lawngreen: "#7cfc00",
    lemonchiffon: "#fffacd",
    lightblue: "#add8e6",
    lightcoral: "#f08080",
    lightcyan: "#e0ffff",
    lightgoldenrodyellow: "#fafad2",
    lightgray: "#d3d3d3",
    lightgreen: "#90ee90",
    lightgrey: "#d3d3d3",
    lightpink: "#ffb6c1",
    lightsalmon: "#ffa07a",
    lightseagreen: "#20b2aa",
    lightskyblue: "#87cefa",
    lightslategray: "#778899",
    lightslategrey: "#778899",
    lightsteelblue: "#b0c4de",
    lightyellow: "#ffffe0",
    lime: "#00ff00",
    limegreen: "#32cd32",
    linen: "#faf0e6",
    magenta: "#ff00ff",
    maroon: "#800000",
    mediumaquamarine: "#66cdaa",
    mediumblue: "#0000cd",
    mediumorchid: "#ba55d3",
    mediumpurple: "#9370db",
    mediumseagreen: "#3cb371",
    mediumslateblue: "#7b68ee",
    mediumspringgreen: "#00fa9a",
    mediumturquoise: "#48d1cc",
    mediumvioletred: "#c71585",
    midnightblue: "#191970",
    mintcream: "#f5fffa",
    mistyrose: "#ffe4e1",
    moccasin: "#ffe4b5",
    navajowhite: "#ffdead",
    navy: "#000080",
    oldlace: "#fdf5e6",
    olive: "#808000",
    olivedrab: "#6b8e23",
    orange: "#ffa500",
    orangered: "#ff4500",
    orchid: "#da70d6",
    palegoldenrod: "#eee8aa",
    palegreen: "#98fb98",
    paleturquoise: "#afeeee",
    palevioletred: "#db7093",
    papayawhip: "#ffefd5",
    peachpuff: "#ffdab9",
    peru: "#cd853f",
    pink: "#ffc0cb",
    plum: "#dda0dd",
    powderblue: "#b0e0e6",
    purple: "#800080",
    rebeccapurple: "#663399",
    red: "#ff0000",
    rosybrown: "#bc8f8f",
    royalblue: "#4169e1",
    saddlebrown: "#8b4513",
    salmon: "#fa8072",
    sandybrown: "#f4a460",
    seagreen: "#2e8b57",
    seashell: "#fff5ee",
    sienna: "#a0522d",
    silver: "#c0c0c0",
    skyblue: "#87ceeb",
    slateblue: "#6a5acd",
    slategray: "#708090",
    slategrey: "#708090",
    snow: "#fffafa",
    springgreen: "#00ff7f",
    steelblue: "#4682b4",
    tan: "#d2b48c",
    teal: "#008080",
    thistle: "#d8bfd8",
    tomato: "#ff6347",
    turquoise: "#40e0d0",
    violet: "#ee82ee",
    wheat: "#f5deb3",
    white: "#ffffff",
    whitesmoke: "#f5f5f5",
    yellow: "#ffff00",
    yellowgreen: "#9acd32",
  };
  CSS.a8H = function (aF) {
    return "" + parseFloat(aF.toFixed(3));
  };
  CSS.uQ = function (j) {
    if (j == null) return { o: 0, i: 0, X: 0 };
    var q = j.indexOf("(");
    if (q != -1) {
      var m = j.slice(q + 1, j.length - 1).split(",");
      for (var y = 0; y < m.length; y++) {
        var n = m[y].trim();
        m[y] = parseFloat(n) * (n.endsWith("%") ? 255 / 100 : 1);
      }
      if (j.startsWith("hsl")) {
        var G = B.wL(m[0] / 360, m[1] / 255, m[2] / 255);
        G.o *= 255;
        G.i *= 255;
        G.X *= 255;
        return G;
      }
      return { o: m[0], i: m[1], X: m[2] };
    }
    if (j.charAt(0) != "#") {
      var W = CSS.Aj;
      if (W[j]) j = W[j];
      else if (j == "currentColor") j = "#000000";
      else console.log("unknown color " + j);
    }
    j = j.slice(1);
    if (j.length == 4)
      j = j[0] + j[0] + j[1] + j[1] + j[2] + j[2] + j[3] + j[3];
    if (j.length == 3) j = j[0] + j[0] + j[1] + j[1] + j[2] + j[2];
    var k = -1;
    if (j.length == 8) {
      k = parseInt(j.slice(6), 16);
      j = j.slice(0, 6);
    }
    j = parseInt(j, 16);
    var T = { o: (j >> 16) & 255, i: (j >> 8) & 255, X: j & 255 };
    if (k != -1) T.Sd = k;
    return T;
  };
  CSS.mP = function (j, q) {
    return CSS.WG(B.MV.xH(j), q);
  };
  CSS.WG = function (j, q) {
    if (q == null) q = 1;
    var m = Math.round(j.o),
      n = Math.round(j.i),
      G = Math.round(j.X),
      W = (m << 16) | (n << 8) | G;
    return q == 1
      ? "#" + B.bw(W)
      : "rgba(" + m + "," + n + "," + G + "," + q + ")";
  };
  CSS.axm = function (j, q) {
    return CSS.WG({ o: j[0] * 255, i: j[1] * 255, X: j[2] * 255 }, q);
  };
  CSS.BZ = function (j) {
    var q = j.Grad.v;
    if (q.Clrs == null) return "";
    var m = q.Clrs.v.slice(0),
      n = q.Trns.v.slice(0),
      G = j.Ofst.v,
      W = j.Type.v.GrdT == "Rdl" ? 1 : 0,
      k = (W == 1 ? "radial" : "linear") + "-gradient",
      T = W == 0 ? Math.round(-j.Angl.v.val + 90) + "deg" : "circle at center",
      b = j.Rvrs.v,
      c = B.MV.a4C(q, b);
    for (var y = 0; y < c.length; y++) {
      var a = c[y],
        f = a[1];
      T +=
        ", " +
        CSS.WG({ o: f[0] * 255, i: f[1] * 255, X: f[2] * 255 }, a[2]) +
        " " +
        Math.round(a[0] * 100) +
        "%";
    }
    return k + "(" + T + ")";
  };
  CSS.a6R = function (j, q, m, n, G, W) {
    var k = q.K2,
      T = n ? 1 : m.Dc(),
      b = Math.round(k.FontSize * T);
    j.push("font-size: " + b + "px");
    var c = k.Tracking;
    if (!n && c != null && c != 0)
      j.push("letter-spacing: " + Math.round((c * b) / 1e3) + "px");
    if (!k.AutoLeading)
      j.push("line-height: " + Math.round(k.Leading * T) + "px");
    if (k.Strikethrough) j.push("text-decoration: line-through");
    if (k.Underline) j.push("text-decoration: underline");
    if (k.FontCaps == 2) j.push("text-transform: uppercase");
    var a = al.xH(k.FillColor);
    a = [a.o, a.i, a.X].map(Math.round);
    j.push(
      (n ? "fill: " : "color: ") +
        (W ? W : "#" + B.bw((a[0] << 16) | (a[1] << 8) | a[2]))
    );
    var f = q.NJ[k.Font].Name;
    if (f) {
      var U = jK.tT.yM(f),
        Z = "",
        h = null,
        u = null;
      if (U != null && f != jK.$v(U)) U = null;
      if (G && U) Z += '"' + f + '", ';
      var i = f.toLowerCase();
      if (U) {
        h = jK.ag3(U)[0];
        if (U["OS/2"]) u = U["OS/2"].usWeightClass;
      } else {
        h = CSS.aKi(f);
        if (i.indexOf("light") != -1) u = 300;
        else if (i.indexOf("medium") != -1) u = 500;
        else if (i.indexOf("black") != -1 || i.indexOf("extrabold") != -1)
          u = 800;
        else if (i.indexOf("bold") != -1) u = "bold";
      }
      if (h != null) Z += '"' + h + '"';
      if (u != null) j.push("font-weight: " + u);
      if (i.indexOf("italic") != -1 || i.indexOf("oblique") != -1)
        j.push("font-style: italic");
      if (Z) j.push("font-family: " + Z);
    }
    var x = q.Th.Justification;
    if (x != null && x != 0)
      if (n) {
      } else j.push("text-align: " + ["left", "right", "center"][x % 3]);
  };
  CSS.aKi = function (j) {
    j = j.split("-")[0];
    while (j.endsWith("MT") || j.endsWith("PS")) j = j.slice(0, j.length - 2);
    var q = !0;
    for (var y = 0; y < j.length; y++) {
      var m = j.charAt(y);
      if (!q && m.toLowerCase() != m) {
        j = j.slice(0, y) + " " + j.slice(y);
        y++;
        q = !0;
      } else q = !1;
    }
    return j;
  };
  function iv() {}
  iv.GC = {
    document: !0,
    parent: !0,
    top: !0,
    eval: !0,
    postMessage: !0,
    UTIF: !0,
    PIMG: !0,
    LNG: !0,
    FNTS: !0,
    setTimeout: !0,
    setInterval: !0,
    fetch: !0,
  };
  iv.i2 = function (j, q) {
    var m = Date.now(),
      n = j.split("\n"),
      G;
    if (n.length == 1) n = j.split("\r");
    for (var y = 0; y < n.length; y++)
      if (n[y].trim()[0] == "#") {
        n[y] = "";
      }
    j = n.join("\n");
    try {
      G = acorn.parse(j);
    } catch (gn) {
      console.log(gn);
      return;
    }
    var W = B.S(iv.Ms.oK);
    W.__return = !1;
    W.__continue = !1;
    W.__break = !1;
    W.__throw = !1;
    W.__fs = {};
    W.__window = {};
    iv.eval(G, q, W);
    var k = W.__fs;
    if (Object.keys(k).length != 0) {
      var T = UZIP.encode(k);
      jc.save(T, "output.zip");
    }
  };
  iv.eval = function (j, q, m) {
    var n = j.type;
    if (!1) {
    } else if (n == "Program" || n == "BlockStatement") {
      var G = j.body;
      for (var y = 0; y < G.length; y++) {
        var W = G[y].type;
        if (W == "FunctionDeclaration") m[G[y].id.name] = G[y];
      }
      for (var y = 0; y < G.length; y++) {
        var W = G[y].type,
          k = iv.eval(G[y], q, m);
        if (m.__continue && m.__pif == null) {
          m.__continue = !1;
          return k;
        }
        if (m.__return || m.__break || m.__throw) return k;
      }
    } else if (n == "ReturnStatement") {
      m.__return = !0;
      return j.argument ? iv.UM(j.argument, q, m) : null;
    } else if (n == "BreakStatement") {
      m.__break = !0;
    } else if (n == "ContinueStatement") {
      m.__continue = !0;
    } else if (n == "VariableDeclaration") {
      var T = j.declarations;
      for (var y = 0; y < T.length; y++) iv.eval(T[y], q, m);
    } else if (n == "VariableDeclarator") {
      m[j.id.name] = j.init ? iv.UM(j.init, q, m) : null;
    } else if (n == "FunctionDeclaration") {
      m[j.id.name] = j;
    } else if (n == "MemberExpression") {
      var b = iv.UM(j.object, q, m),
        k;
      if (m.__throw) return;
      var c = j.computed ? iv.UM(j.property, q, m) : iv.eval(j.property, q, m);
      if (b.rO != null) k = iv.Ms.Fr(b, c, q, m);
      else if (b == window && iv.GC[c]) {
      } else k = b[c];
      return k;
    } else if (n == "ArrayExpression") {
      var a = [],
        f = j.elements;
      for (var y = 0; y < f.length; y++) a.push(iv.UM(f[y], q, m));
      return a;
    } else if (n == "ObjectExpression") {
      var a = {},
        f = j.properties;
      for (var y = 0; y < f.length; y++) {
        var U = f[y],
          Z = f[y].key.name ? f[y].key.name : f[y].key.value;
        a[Z] = iv.UM(f[y].value, q, m);
      }
      return a;
    } else if (n == "ExpressionStatement") {
      return iv.eval(j.expression, q, m);
    } else if (n == "NewExpression") {
      var h = j.arguments,
        u = j.callee,
        i = u.type,
        x = u.name,
        X = [],
        a = null;
      for (var y = 0; y < h.length; y++) X.push(iv.UM(h[y], q, m));
      if (x == "Array") a = new window[x]();
      else if (i == "Identifier") a = iv.Ms.adQ(x, X, q, m);
      else throw "e";
      if (a == null) throw "new " + x;
      return a;
    } else if (n == "CallExpression") {
      var h = j.arguments,
        u = j.callee,
        i = u.type,
        $ = {};
      for (var H in m) $[H] = m[H];
      var X = [];
      for (var y = 0; y < h.length; y++) X.push(iv.UM(h[y], q, m));
      if (i == "Identifier") {
        var C = u.name,
          l = m[C];
        if (l && l.rO == "AppFunc") {
          C = l.eA;
          l = null;
        }
        if (l) {
          if (l.params) {
            var v = l.params;
            for (var y = 0; y < v.length; y++) $[v[y].name] = X[y];
            return iv.eval(l.body, q, $);
          } else {
            return l.apply(null, X);
          }
        } else if (iv.Ms.amJ.indexOf(C) != -1)
          return iv.Ms.rK({ rO: "Application" }, C, X, q, m);
        else if (window[C] == null) console.log("Unknown function " + C);
        else if (iv.GC[C]) alert(C + "() not available");
        else {
          var K = window[C].apply(window, X);
          return K;
        }
      } else if (i == "MemberExpression") {
        var b = iv.UM(u.object, q, m),
          c = u.computed ? iv.UM(u.property, q, m) : iv.eval(u.property, q, m);
        if (b == window && iv.GC[c]) return;
        if (b.rO != null) return iv.Ms.rK(b, c, X, q, m);
        else if (c == "sort" && b[0] && b[0].rO == "Layer") {
          return b.sort(function (w, r) {
            return w.K.getName() > r.K.getName() ? 1 : -1;
          });
        } else if (c == "toSource") return JSON.stringify(b);
        else return b[c].apply(b, X);
      } else if (i == "FunctionExpression") {
        var S = iv.eval(u.body, q, m);
        m.__return = !1;
        return S;
      } else console.log(j);
    } else if (n == "AssignmentExpression") {
      var o = j.operator,
        V = j.left,
        P = V.type,
        z = iv.UM(V, q, m),
        E = iv.UM(j.right, q, m),
        k = null;
      if (!1) {
      } else if (o == "=") k = E;
      else if (o == "+=") k = z + E;
      else if (o == "-=") k = z - E;
      else if (o == "*=") k = z * E;
      else if (o == "/=") k = z / E;
      else if (o == "%=") k = z % E;
      else if (o == "&=") k = z & E;
      else if (o == "|=") k = z | E;
      else if (o == "&&=") k = z && E;
      else if (o == "||=") k = z || E;
      else console.log(j);
      if (P == "Identifier") {
        var A = V.name;
        if (m.hasOwnProperty(A)) m[A] = k;
        else m.__window[A] = k;
      } else if (P == "MemberExpression") {
        var N = iv.eval(V.property, q, m),
          Q = iv.UM(V.object, q, m);
        if (Q.rO != null) iv.Ms.a4d(Q, N, k, q, m);
        else Q[N] = k;
      } else console.log(j);
      return k;
    } else if (n == "Identifier") return j.name;
    else if (n == "Literal") return j.value;
    else if (n == "UpdateExpression") {
      var o = j.operator,
        e = j.argument.name,
        a = iv.UM(j.argument, q, m),
        Y = m;
      if (Y[e] == null) Y = m.__window;
      if (!1) {
      } else if (o == "++") {
        Y[e]++;
        return j.prefix ? Y[e] : Y[e] - 1;
      } else if (o == "--") {
        Y[e]--;
        return j.prefix ? Y[e] : Y[e] + 1;
      } else console.log(j);
    } else if (n == "UnaryExpression") {
      var o = j.operator,
        d = iv.UM(j.argument, q, m);
      if (d && d.rO == "UnitValue") {
        if (o == "-") return -d.K;
        else return iv.a6n(d.K, o);
      } else return iv.a6n(d, o);
    } else if (n == "BinaryExpression" || n == "LogicalExpression") {
      var o = j.operator,
        V = iv.UM(j.left, q, m);
      if (n == "LogicalExpression" && o == "&&" && !V) return V;
      var d = iv.UM(j.right, q, m);
      if (V == null || d == null) return iv.Dr(V, d, o);
      else if (V.rO == "UnitValue" && d.rO == "UnitValue")
        return iv.Dr(V.K, d.K, o);
      else if (V.rO == "UnitValue") return iv.Dr(V.K, d, o);
      else if (d.rO == "UnitValue") {
        if (o == "-") return -(V - d.K);
        else return iv.Dr(V, d.K, o);
      } else return iv.Dr(V, d, o);
    } else if (n == "IfStatement") {
      var I = iv.UM(j.test, q, m),
        O = m.__pif,
        k = null;
      m.__pif = !0;
      if (I) k = iv.eval(j.consequent, q, m);
      else if (j.alternate) k = iv.eval(j.alternate, q, m);
      m.__pif = O;
      return k;
    } else if (n == "ConditionalExpression") {
      var I = iv.UM(j.test, q, m);
      if (I) return iv.UM(j.consequent, q, m);
      else if (j.alternate) return iv.UM(j.alternate, q, m);
    } else if (n == "ForInStatement") {
      iv.eval(j.left, q, m);
      var s = j.left.declarations[0].id.name,
        p = iv.UM(j.right, q, m);
      for (var H in p) {
        m[s] = H;
        var F = iv.eval(j.body, q, m);
        if (m.__break) break;
        if (m.__return) return F;
      }
      m.__break = !1;
    } else if (n == "ForStatement") {
      iv.eval(j.init, q, m);
      while (iv.eval(j.test, q, m)) {
        var F = iv.eval(j.body, q, m);
        if (m.__break) break;
        if (m.__return) return F;
        iv.eval(j.update, q, m);
      }
      m.__break = !1;
    } else if (n == "WhileStatement") {
      while (iv.eval(j.test, q, m)) {
        var F = iv.eval(j.body, q, m);
        if (m.__break) break;
        if (m.__return) return F;
      }
      m.__break = !1;
    } else if (n == "DoWhileStatement") {
      do {
        var F = iv.eval(j.body, q, m);
        if (m.__break) break;
        if (m.__return) return F;
      } while (iv.eval(j.test, q, m));
      m.__break = !1;
    } else if (n == "TryStatement") {
      iv.eval(j.block, q, m);
      if (m.__throw) {
        var g = j.handler;
        m[g.param.name] = m.__throw;
        m.__throw = !1;
        iv.eval(g.body, q, m);
        delete m[g.param.name];
      }
    } else if (n == "FunctionExpression") {
      return j;
    } else if (n == "EmptyStatement") {
    } else console.log(j);
  };
  iv.Dr = function (j, q, m) {
    if (m == "+") return j + q;
    else if (m == "-") return j - q;
    else if (m == "*") return j * q;
    else if (m == "/") return j / q;
    else if (m == "%") return j % q;
    else if (m == "^") return j ^ q;
    else if (m == "&") return j & q;
    else if (m == "&&") return j && q;
    else if (m == "|") return j | q;
    else if (m == "||") return j || q;
    else if (m == "<") return j < q;
    else if (m == ">") return j > q;
    else if (m == "==") {
      if (j != null && q != null && j.rO && q.rO) return j.K == q.K;
      return j == q;
    } else if (m == "===") return j === q;
    else if (m == "<=") return j <= q;
    else if (m == ">=") return j >= q;
    else if (m == "!=") return j != q;
    else if (m == "!==") return j !== q;
    else if (m == "<<") return j << q;
    else if (m == ">>") return j >> q;
    else console.log(m);
  };
  iv.a6n = function (j, q) {
    if (q == "-") return -j;
    else if (q == "!") return !j;
    else if (q == "~") return ~j;
    else if (q == "+") return j;
    else if (q == "typeof") return typeof j;
    else console.log(q, j);
  };
  iv.UM = function (j, q, m) {
    var n = j.type;
    if (n == "Identifier") return iv.ajG(j.name, q, m);
    else return iv.eval(j, q, m);
  };
  iv.ajG = function (j, q, m) {
    if (j == "undefined") return undefined;
    else if (m.hasOwnProperty(j)) return m[j];
    else if (j == "app") return { rO: "Application" };
    else if (j == "Folder") return { rO: "Folder" };
    else if (j == "File") return { rO: "File" };
    else if (j == "$") return { rO: "$" };
    else if (iv.Ms.auY.indexOf(j) != -1)
      return iv.Ms.Fr({ rO: "Application" }, j, q, m);
    else if (iv.Ms.amJ.indexOf(j) != -1) return { rO: "AppFunc", eA: j };
    else if (m.__window.hasOwnProperty(j)) return m.__window[j];
    else if (window[j] && !iv.GC[j]) return window[j];
    else {
      m[j] = null;
      return null;
    }
  };
  iv.Ms = {};
  iv.Ms.adQ = function (j, q, m, n) {
    var G;
    if (j == "PathPointInfo") G = { rO: j, kind: 0, Ii: [], kt: [], _$: [] };
    if (j == "SubPathInfo") G = { rO: j, a1: 0, N4: !1, K: [] };
    if (j == "SolidColor") G = { rO: j, K: [1, 0, 0, 0] };
    if (j == "RGBColor") G = { rO: j, K: [1, 0, 0, 0] };
    if (j == "Window") G = { rO: j, K: new hz(q[0], q[1], q[2]) };
    if (j == "ExportOptionsSaveForWeb")
      G = { rO: j, K: { hr: "png", Ae: 100 } };
    if (j == "PhotoshopSaveOptions") G = { rO: j, K: { hr: "psd" } };
    if (j == "PNGSaveOptions") G = { rO: j, K: { hr: "png", Ae: 100 } };
    if (j == "JPEGSaveOptions") G = { rO: j, K: { hr: "jpg", Ae: 100 } };
    if (j == "PDFSaveOptions") G = { rO: j, K: { hr: "pdf", agZ: "" } };
    if (j == "File") G = { rO: j, K: q[0] };
    if (j == "ActionReference") G = { rO: j, K: { t: "obj ", v: [] } };
    if (j == "ActionDescriptor")
      G = { rO: j, K: { t: "Objc", v: { classID: "null" } } };
    if (j == "ActionList") G = { rO: j, K: { t: "VlLs", v: [] } };
    if (j == "UnitValue") {
      var W = 0,
        k = "px",
        T = q[0],
        b = q[1];
      if (T) {
        W = parseFloat(T);
        if (typeof T == "string" && T.indexOf(" ") != -1)
          k = T.split(" ").pop();
      }
      G = { rO: j, K: W, adc: b ? b : k };
    }
    return G;
  };
  iv.Ms.auY =
    "activeDocument documents fonts preferences displayDialogs foregroundColor backgroundColor version".split(
      " "
    );
  iv.Ms.amJ =
    "charIDToTypeID stringIDToTypeID typeIDToStringID executeAction executeActionGet doAction showWindow UnitValue echoToOE".split(
      " "
    );
  iv.Ms.Fr = function (j, q, m, n) {
    var G = m.a,
      W = m.WM();
    if (!1) {
    } else if (q == "typename") {
      if (j.rO == "Layer") return j.K.D1() ? "LayerSet" : "ArtLayer";
      else return j.rO;
    } else if (
      ["Document", "Layer"].indexOf(j.rO) != -1 &&
      ["layers", "artLayers", "layerSets"].indexOf(q) != -1
    ) {
      var k = W;
      if (j.rO == "Document") k = j.K;
      else k = j.wx;
      var T = k.root,
        b = { rO: "Layers", aHA: q, K: [], wx: k };
      if (j.rO == "Layer") T = k.root.Zg(k.U.indexOf(j.K));
      if (T.children == null) return null;
      for (var y = 0; y < T.children.length; y++) {
        var c = T.children[y].v,
          a = c.D1();
        if ((a && q == "artLayers") || (!a && q == "layerSets")) continue;
        b.K.push({ rO: "Layer", K: c, wx: k });
      }
      b.K.reverse();
      return b;
    } else if (
      j.rO == "Documents" ||
      j.rO == "Layers" ||
      j.rO == "HistoryStates" ||
      j.rO == "LayerComps" ||
      j.rO == "PathItems" ||
      j.rO == "SubPathItems" ||
      j.rO == "PathPoints"
    ) {
      if (!1) {
      } else if (q == "length") return j.K.length;
      else if (Number.isInteger(q)) return j.K[q];
      else console.log(j.rO + ": unknown property ", q);
    } else if (j.rO == "Application") {
      if (!1) {
      } else if (q == "activeDocument") return { rO: "Document", K: m.WM() };
      else if (q == "documents") {
        var b = { rO: "Documents", K: [] };
        for (var y = 0; y < m.mS.length; y++)
          b.K.push({ rO: "Document", K: m.mS[y] });
        return b;
      } else if (q == "fonts") return { rO: "TextFonts" };
      else if (q == "preferences") return { rO: "Preferences" };
      else if (q == "displayDialogs") return { rO: "DialogModes" };
      else if (q == "foregroundColor" || q == "backgroundColor") {
        var f = q[0] == "f" ? G.UP : G.vH;
        return {
          rO: "SolidColor",
          K: [
            1,
            ((f >>> 16) & 255) / 255,
            ((f >>> 8) & 255) / 255,
            ((f >>> 0) & 255) / 255,
          ],
        };
      } else if (q == "UI") return { rO: "UI" };
      else if (q == "version") return 30;
      else console.log(j, q);
    } else if (j.rO == "Document") {
      var W = j.K;
      if (!1) {
      } else if (q == "activeLayer") {
        var c = W.U[W.J[0]];
        return { rO: "Layer", K: c, wx: W };
      } else if (q == "pixelAspectRatio") return 1;
      else if (q == "resolution") return W.zv;
      else if (q == "width") return W.r;
      else if (q == "height") return W.$;
      else if (q == "name") return W.name.split(".")[0];
      else if (q == "saved") return !W.Dw();
      else if (q == "selection") return { rO: "Selection" };
      else if (q == "activeHistoryState")
        return { rO: "HistoryState", Wy: W.d6 };
      else if (q == "source") return W.FG;
      else if (q == "layerComps") {
        var U = W.Qp.list.v,
          Z = [];
        for (var y = 0; y < U.length; y++) Z.push({ rO: "LayerComp", K: y });
        return { rO: "LayerComps", K: Z };
      } else if (q == "historyStates") {
        var h = [];
        for (var y = 0; y < W.history.length; y++)
          h.push({ rO: "HistoryState", Wy: y });
        return { rO: "HistoryStates", K: h };
      } else if (q == "mode") return W.add.fcmy ? 1 : 7;
      else if (q == "colorSamplers") {
        var b = { rO: "ColorSamplers", aHA: q, K: W.jE.slice(0), wx: W };
        return b;
      } else if (q == "pathItems") {
        var u = [],
          W = j.K,
          i = W.ac(),
          x = i[0],
          X = i[1];
        for (var y = 0; y < x.length; y++) u.push({ rO: "PathItem", K: x[y] });
        return { rO: "PathItems", K: u };
      } else console.log(j, q);
    } else if (j.rO == "PathItem") {
      if (q == "subPathItems") {
        var $ = j.K,
          H = $.add.vmsk.D,
          u = [];
        for (var y = 0; y < B.z.in(H); y++) {
          var C = B.z.kH(H, y),
            l = H[C],
            v = H.slice(C + 1, C + 1 + l.length);
          u.push({ rO: "SubPathItem", a1: l.Np, N4: l.e == 0, K: R.tm.Fo(v) });
        }
        return { rO: "SubPathItems", K: u };
      } else alert(q);
    } else if (j.rO == "SubPathItem" || j.rO == "SubPathInfo") {
      if (q == "pathPoints" || q == "entireSubPath") {
        var u = [];
        for (var y = 0; y < j.K.length; y++) {
          var K = j.K[y];
          u.push({
            rO: "PathPointInfo",
            kind: K.e == 1 || K.e == 4 ? 1 : 0,
            Ii: [K.Ii.x, K.Ii.y],
            kt: [K.kt.x, K.kt.y],
            _$: [K._$.x, K._$.y],
          });
        }
        return { rO: "PathPoints", K: u };
      } else if (q == "operation") return j.a1;
      else if (q == "closed") return j.N4;
      else throw q;
    } else if (j.rO == "PathPointInfo") {
      if (q == "kind") return j.kind;
      else if (q == "anchor") return j.Ii;
      else if (q == "leftDirection") return j.kt;
      else if (q == "rightDirection") return j._$;
      else throw q;
    } else if (j.rO == "LayerComp") {
      if (q == "name") return W.Qp.list.v[j.K].v.Nm.v;
      else throw q;
    } else if (j.rO == "ColorSamplers") {
      if (Number.isInteger(q)) return { rO: "ColorSampler", K: j.K[q] };
      else if (q == "length") return W.jE.length;
    } else if (j.rO == "ColorSampler") {
      if (q == "color") {
        var f = L.KH.th(W, W.I.gS(j.K.x, j.K.y), 1, 2);
        return {
          rO: "SolidColor",
          K: [
            1,
            ((f >>> 16) & 255) / 255,
            ((f >>> 8) & 255) / 255,
            ((f >>> 0) & 255) / 255,
          ],
        };
      } else if (q == "position") return [j.K.x, j.K.y];
    } else if (j.rO == "Layer") {
      var S = {
          transparentPixelsLocked: 0,
          pixelsLocked: 1,
          positionLocked: 2,
          allLocked: 31,
        },
        c = j.K;
      if (!1) {
      } else if (q == "visible") return c.Iw();
      else if (q == "selected") return W.J.indexOf(W.U.indexOf(c)) != -1;
      else if (q == "grouped") return c.Yx;
      else if (S[q] != null) return c.op(S[q]);
      else if (q == "opacity") return (c.yA * 100) / 255;
      else if (q == "fillOpacity")
        return ((c.add.iOpa == null ? 255 : c.add.iOpa) * 100) / 255;
      else if (q == "blendMode") return c.hz;
      else if (q == "name") return c.getName();
      else if (q == "id") return c.add.lyid;
      else if (q == "textItem") return { rO: "TextItem", K: c };
      else if (q == "bounds") {
        var o = L.Dq.Fj(W, [W.U.indexOf(c)]);
        return iv.Ms.alb(o, W);
      } else if (q == "parent") {
        var V = m.mS,
          k;
        for (var y = 0; y < V.length; y++)
          if (V[y].U.indexOf(c) != -1) k = V[y];
        var P = k.root.Zg(k.U.indexOf(c)).parent;
        return P.depth == 0
          ? { rO: "Document", K: k }
          : { rO: "Layer", K: P.v, wx: k };
      } else if (q == "kind") {
        var z = iv.Ms.WI;
        for (var y = 0; y < z.length; y++) if (c.add[z[y]] != null) return y;
        return 0;
      } else if (q == "isBackgroundLayer") return c.add.lnsr == "bgnd";
      else if (q == "itemIndex") return W.U.indexOf(c) + 1;
      else if (q.startsWith("layerMask") || q.startsWith("filterMask")) {
        var E = q.startsWith("layerMask") ? c.ex() : c.xE(W).x7;
        return q.endsWith("Density") ? (E.CA * 100) / 255 : E.LH;
      } else console.log(j, q);
    } else if (j.rO == "Selection") {
      if (!1) {
      } else if (q == "bounds") {
        if (W.h == null) n.__throw = { message: "no selection" };
        else return iv.Ms.alb(W.h.H, W);
      } else console.log(j, q);
    } else if (j.rO == "TextItem") {
      var A = j.K.add.TySh,
        N = A.s3,
        Q = al.WT(N),
        e = A.u.Dc(),
        Y = al.vJ(N, 0, 0);
      if (q == "contents") return Q.slice(0, Q.length - 1).replace(/\n/g, "\r");
      else if (q == "font")
        return Y.K2.Font != null ? Y.NJ[Y.K2.Font].Name : null;
      else if (q == "size") return iv.Ms.Za(Y.K2.FontSize * e, W);
      else if (q == "leading") return iv.Ms.Za(Y.K2.Leading * e, W);
      else if (q == "tracking") return iv.Ms.Za(Y.K2.Tracking);
      else if (q == "baselineShift") return iv.Ms.Za(Y.K2.BaselineShift);
      else if (q == "kind") return 1 - al.Po(N);
      else if (iv.Ms.C0[q]) return Y.K2[iv.Ms.C0[q]];
      else if (q == "justification") return iv.Ms.Za(Y.Th.Justification);
      else if (q == "color")
        return { rO: "SolidColor", K: Y.K2.FillColor.Values.slice(0) };
      else if (q == "width" || q == "height") {
        var d = al.fu(N),
          I = (d[2] - d[0]) * e,
          O = (d[3] - d[1]) * e;
        return iv.Ms.Za(q == "width" ? I : O, W);
      } else if (q == "position") {
        var E = A.u;
        return iv.Ms.aH7([E.Tt, E.BL], W);
      } else if (q == "horizontalScale" || q == "verticalScale") {
        var s = q[0].toUpperCase() + q.slice(1);
        return Math.round(Y.K2[s] * 100);
      } else if (q == "antiAliasMethod") al.OK(A);
      else if (q == "totalTextStyle") {
        var b = {};
        for (var p = 0; p < 2; p++) {
          var F = ["Style", "Paragraph"][p],
            g = N.EngineDict[F + "Run"].RunLengthArray,
            w = [],
            r = 0;
          for (var y = 0; y < g.length; y++) {
            var eQ = al.vJ(N, r, Math.min(r + g[y], Q.length - 2));
            r += g[y];
            w.push(p == 0 ? eQ.K2 : eQ.Th);
            b.fontSet = eQ.NJ;
          }
          b[F] = { runs: g, styles: w };
        }
        return JSON.stringify(b);
      } else if (q == "transform") {
        var E = A.u;
        return JSON.stringify([E.Sd, E.X, E.ra, E.Jy, E.Tt, E.BL]);
      } else console.log(j, q);
    } else if (j.rO == "Preferences") {
      if (q == "rulerUnits") return G.q1.WH;
      else console.log(j, q);
    } else if (j.rO == "SolidColor") {
      if (q == "rgb") return { rO: "RGBColor", K: j.K };
      if (q == "cmyk") return { rO: "CMYKColor", K: B.fE(j.K.slice(1)) };
      else console.log(j, q);
    } else if (j.rO == "RGBColor") {
      var o = Math.round(255 * j.K[1]),
        t = Math.round(255 * j.K[2]),
        dq = Math.round(255 * j.K[3]);
      if (!1) {
      } else if (q == "red") return o;
      else if (q == "green") return t;
      else if (q == "blue") return dq;
      else if (q == "hexValue")
        return B.bw((o << 16) | (t << 8) | dq).toUpperCase();
      else console.log(j, q);
    } else if (j.rO == "CMYKColor") {
      var D = [];
      for (var y = 0; y < 4; y++) D.push(Math.round(j.K[y] * 100));
      var ha = ["cyan", "magenta", "yellow", "black"].indexOf(q);
      if (ha != -1) return D[ha];
      else console.log(j, q);
    } else if (j.rO == "UnitValue") {
      if (q == "value") return j.K;
      else throw "e";
    } else if (j.rO == "ExportOptionsSaveForWeb") {
      if (q == "format") return j.K.hr;
      else if (q == "PNG8" || q == "interlaced") return !1;
      else if (q == "quality") return j.K.Ae;
      else if (q == "transparency") return !0;
      else throw q;
    } else if (
      j.rO == "PNGSaveOptions" ||
      j.rO == "JPEGSaveOptions" ||
      j.rO == "PDFSaveOptions"
    ) {
      return 0;
    } else if (j.rO == "$") {
      if (q == "localize") return !1;
      else if (q == "os") return "Windows";
      else throw q;
    } else if (j.rO == "ActionList") {
      if (q == "count") return j.K.v.length;
      else throw q;
    } else if (j.rO == "TextFonts") {
      var am = jK.tT.a2(),
        k4 = Object.keys(am);
      if (q == "length") return k4.length;
      else if (typeof q == "number") return { rO: "TextFont", K: k4[q] };
      else throw q;
    } else if (j.rO == "TextFont") {
      var am = jK.tT.a2();
      if (q == "family") return am[j.K][0];
      else if (q == "name") return am[j.K][1];
      else if (q == "postScriptName") return am[j.K][2];
      else throw q;
    } else console.log(j, q);
  };
  iv.Ms.alb = function (j, q) {
    return iv.Ms.aH7([j.x, j.y, j.x + j.r, j.y + j.$], q);
  };
  iv.Ms.aH7 = function (j, q) {
    var m = [];
    for (var y = 0; y < j.length; y++) m.push(iv.Ms.Za(j[y], q));
    return m;
  };
  iv.Ms.oA = function (j) {
    var q = [];
    for (var y = 0; y < j.length; y++) q.push(j[y].rO ? j[y].K : j[y]);
    return q;
  };
  iv.Ms.Za = function (j, q) {
    return { rO: "UnitValue", K: j, adc: "px" };
  };
  iv.Ms.YT = function (j, q) {
    if (j.rO == "UnitValue")
      return B.uO.Fs(j.K, q.zv, q.r, B.uO._t.indexOf(j.adc));
    return j;
  };
  iv.Ms.C0 = {
    fauxBold: "FauxBold",
    fauxItalic: "FauxItalic",
    useAutoLeading: "AutoLeading",
    hyphenation: "AutoHyphenate",
    ligatures: "_Ligatures",
  };
  iv.Ms.a4d = function (j, q, m, n, G) {
    var W = new fd(_.E.w, !0),
      k = new fd(_.E.c, !0),
      T = n.WM(),
      b = n.a;
    if (!1) {
    } else if (j.rO == "Application") {
      if (!1) {
      } else if (q == "activeDocument") {
        k.data = { R: _.Y.ED, fg: m.K };
        n.k(k);
      } else if (q == "displayDialogs") {
      } else if (q == "foregroundColor" || q == "backgroundColor") {
        var c = m.K,
          a = ((c[1] * 255) << 16) | ((c[2] * 255) << 8) | ((c[3] * 255) << 0);
        k.data = {
          R: _.Y.fh,
          rw: fG.Ru,
          _G: q == "foregroundColor" ? 0 : 1,
          K: a,
        };
        n.k(k);
      } else console.log(j, q, m);
    } else if (j.rO == "Document") {
      var f = j.K;
      if (!1) {
      } else if (q == "name") {
        W.l = L.W1;
        W.data = { R: R.CG, K: m, aGT: !0, Xf: f };
        T.Ls = !0;
      } else if (q == "source") f.FG = m;
      else if (q == "activeLayer") {
        f.J = [f.U.indexOf(m.K)];
      } else if (q == "activeHistoryState") {
        W.l = L.cJ;
        W.data = { R: "h_itemchange", index: m.Wy };
      } else console.log(j, q);
    } else if (j.rO == "Layer") {
      W.l = L.W1;
      var U = {
          transparentPixelsLocked: 0,
          pixelsLocked: 1,
          positionLocked: 2,
          allLocked: 31,
        },
        Z = j.K,
        h = T.U.indexOf(Z);
      if (!1) {
      } else if (q == "visible") {
        if (Z.Iw() != m) W.data = { R: R.Ov, v: h };
      } else if (q == "opacity") {
        W.data = { R: R.G4, v: h, jt: Math.round((255 * m) / 100) };
      } else if (q == "fillOpacity") {
        W.data = { R: R.yX, v: h, jt: Math.round((255 * m) / 100) };
      } else if (q == "blendMode") {
        W.data = { R: R.Jf, v: h, jt: kJ.YH.indexOf(m) };
      } else if (q == "name") {
        W.data = { R: R.dy, v: h, name: m };
      } else if (U[q] != null) {
        W.data = { R: R.p4, v: h, jt: [[m], [U[q]]] };
      } else if (q == "kind") {
        W.data = { R: R.Ri, v: h, ZI: iv.Ms.WI[m] };
      } else if (q == "grouped") {
        W.data = { R: R.vu, v: h, jt: m };
      } else if (q.startsWith("layerMask") || q.startsWith("filterMask")) {
        var u = Z.K$(q.startsWith("layerMask") ? 0 : 2);
        if (q.endsWith("Density")) u.fe = Math.round((m * 255) / 100);
        else u.qk = m;
        W.data = { R: R.Z0, oq: h, i1: u };
      } else console.log(j, q, m);
    } else if (j.rO == "TextItem") {
      W.l = L.G_;
      var Z = j.K,
        i = Z.add.TySh,
        x = B.S(i.s3),
        X = i.u.P(),
        $ = i.u.Dc(),
        H = al.WT(x),
        C = al.vJ(x, 0, H.length - 2),
        l = !1;
      if (!1) {
      } else if (q == "contents") {
        al.Sp(x, 0, H.length - 1);
        al.Fk(x, 0, (m + "").replace(/\r/g, "\n"));
      } else if (q == "size") {
        C.K2.FontSize = (m.K != null ? m.K : m) / $;
        l = !0;
      } else if (q == "leading") {
        C.K2.Leading = (m.K != null ? m.K : m) / $;
        l = !0;
      } else if (q == "tracking") {
        C.K2.Tracking = m.K != null ? m.K : m;
        l = !0;
      } else if (q == "baselineShift") {
        C.K2.BaselineShift = m.K != null ? m.K : m;
        l = !0;
      } else if (q == "kind") {
        var v = al.Po(x);
        if (v == 1 && m == 1) {
          var K = new gu(x, n.a.HS, i.Ix).Th[0],
            S = K.EX[0].end,
            o = K.IF[S - 1].end;
          al.Sp(x, 0, H.length - 1);
          al.Fk(x, 0, H.slice(0, o - 1));
        }
        if (v == m) al.cj(x, 1 - m);
      } else if (iv.Ms.C0[q]) {
        C.K2[iv.Ms.C0[q]] = m;
        l = !0;
      } else if (q == "justification") {
        C.Th.Justification = m;
        l = !0;
      } else if (q == "font") {
        al.gk(C, m);
        l = !0;
      } else if (q == "color") {
        C.K2.FillColor.Values = m.K.slice(0);
        l = !0;
      } else if (q == "width" || q == "height") {
        var V = al.fu(x).slice(0),
          P = iv.Ms.YT(m, T);
        if (q == "width") V[2] = Math.round(V[0] + P / $);
        else V[3] = Math.round(V[1] + P / $);
        al.ms(x, V);
      } else if (q == "position") {
        X.Tt = m[0];
        X.BL = m[1];
      } else if (q == "horizontalScale" || q == "verticalScale") {
        var z = q[0].toUpperCase() + q.slice(1);
        C.K2[z] = m / 100;
        l = !0;
      } else if (q == "antiAliasMethod") al.m7(i, m);
      else console.log(j, q, m);
      if (l) al.jD(x, 0, H.length - 1, C);
      W.data = { R: "newED", jR: T.U.indexOf(Z), aCn: x, u: X };
    } else if (j.rO == "Preferences") {
      if (!1) {
      } else if (q == "rulerUnits") {
        var E = B.S(b.q1);
        E.WH = m;
        k.data = { R: _.Y.fh, rw: fG.Tz, jt: E };
        n.k(k);
      } else console.log(j, q, m);
    } else if (j.rO == "SolidColor") {
      if (q == "rgb") j.K = m.K;
      else throw q;
    } else if (j.rO == "RGBColor") {
      if (!1) {
      } else if (q == "red") j.K[1] = m / 255;
      else if (q == "green") j.K[2] = m / 255;
      else if (q == "blue") j.K[3] = m / 255;
      else if (q == "hexValue") {
        var A = B.aw0(m.slice(m.charAt(0) == "#" ? 1 : 0));
        j.K[1] = ((A >>> 16) & 255) / 255;
        j.K[2] = ((A >>> 8) & 255) / 255;
        j.K[3] = ((A >>> 0) & 255) / 255;
      } else console.log(j, q);
    } else if (j.rO == "ExportOptionsSaveForWeb") {
      if (q == "format") j.K.hr = m;
      else if (q == "PNG8" || q == "transparency" || q == "interlaced") {
      } else if (q == "quality") j.K.Ae = m;
      else throw q;
    } else if (j.rO == "PNGSaveOptions" || j.rO == "JPEGSaveOptions") {
      if (q == "quality") j.K.Ae = Math.round((100 * m) / 12);
    } else if (j.rO == "PDFSaveOptions") {
      if (q == "preset") j.K.agZ = m;
    } else if (j.rO == "PathPointInfo") {
      if (q == "kind") j.kind = m;
      else if (q == "anchor") j.Ii = m;
      else if (q == "leftDirection") j.kt = m;
      else if (q == "rightDirection") j._$ = m;
      else throw q;
    } else if (j.rO == "SubPathInfo") {
      if (q == "operation") j.a1 = m;
      else if (q == "closed") j.N4 = m;
      else if (q == "entireSubPath") {
        j.K = [];
        for (var y = 0; y < m.length; y++) {
          var N = m[y];
          j.K.push({
            e: N.kind == 1 ? 1 : 2,
            kt: new ea(N.kt[0], N.kt[1]),
            Ii: new ea(N.Ii[0], N.Ii[1]),
            _$: new ea(N._$[0], N._$[1]),
          });
        }
      } else throw q;
    } else if (j.rO == "$") {
      if (q == "localize") {
      }
    } else console.log(j, q, m);
    if (W.data != null) n.k(W);
  };
  iv.Ms.aaR = function (j, q, m) {
    if (q == null) return;
    var n = q.s3.EngineDict.StyleRun.RunArray,
      G = q.s3.ResourceDict.FontSet,
      W = [];
    for (var y = 0; y < n.length; y++) {
      var k = n[y].StyleSheet.StyleSheetData,
        T = G[k.Font].Name,
        b = m.a.HS.yM(T);
      if (b && b.name.postScriptName != T) b = null;
      W.push({
        t: "null",
        v: {
          TxtS: {
            t: "null",
            v: {
              fontAvailable: { t: "bool", v: b != null },
              fontPostScriptName: { t: "TEXT", v: T },
            },
          },
        },
      });
    }
    j.textKey = {
      t: "textKey",
      v: {
        textStyleRange: { t: "obj ", v: W },
        textKey: { t: "TEXT", v: al.WT(q.s3) },
      },
    };
  };
  iv.Ms.rK = function (j, q, m, n, G) {
    var W = j.rO,
      k = null,
      T = new fd(_.E.w, !0),
      b = new fd(_.E.NI, !0),
      c = new fd(_.E.c, !0),
      a = n.WM(),
      f = n.mS;
    if (!1) {
    } else if (W == "Application") {
      if (!1) {
      } else if (q == "charIDToTypeID") {
        var U = m[0].trim(),
          Z = {
            slct: "select",
            Dlt: "delete",
            Mk: "make",
            Hd: "hide",
            Shw: "show",
            Dplc: "duplicate",
            GrpL: "groupEvent",
          };
        return Z[U] ? Z[U] : U;
      } else if (q == "stringIDToTypeID") {
        var h = m[0].trim(),
          Z = {
            red: "Rd",
            blue: "Bl",
            color: "Clr",
            RGBColor: "RGBC",
            document: "Dcmn",
            layer: "Lyr",
            actionSet: "ASet",
            type: "Type",
            using: "Usng",
            targetEnum: "Trgt",
            to: "T",
            ordinal: "Ordn",
            property: "Prpr",
            numberOfChildren: "NmbC",
            userMaskEnabled: "UsrM",
            colorize: "Clrz",
            hue: "H",
            saturation: "Strt",
            lightness: "Lght",
            hueSaturation: "HStr",
            adjustment: "Adjs",
            textStyle: "TxtS",
          },
          u = Z[h];
        return u == null ? h : u;
      } else if (q == "typeIDToStringID") {
        return m[0].trim();
      } else if (q == "executeAction") {
        var i;
        if (m[1]) {
          i = m[1].K.v;
          i.classID = m[0];
        }
        var x = { setd: "set" },
          X = x[m[0]];
        if (X == null) X = m[0];
        var $ = eV.GF[m[0]];
        if ($ && eV.Rt[$]) X = eV.Rt[$];
        b.data = { _D: X, SC: i };
      } else if (q == "executeActionGet") {
        var H = m[0].K.v,
          k = {};
        if (H.length == 1) {
          var C = (k.classID = H[0].v.classID);
          if (C == "Lyr") {
            var l = jw.jq(a, H[0]),
              v = a.U[l],
              K = v.add.SoLd,
              S = v.add.SoCo,
              o = v.add.TySh,
              V = v.ex();
            if (K)
              k.smartObjectMore = {
                t: "Objc",
                v: { transform: K.nonAffineTransform },
              };
            if (S) k.adjustment = { t: "VlLs", v: [{ t: "Objc", v: B.S(S) }] };
            if (o) iv.Ms.aaR(k, o, n);
            if (V) k.UsrM = { t: "Objc", v: {} };
          } else if (C == "AdjL") {
            var l = jw.jq(a, H[0]),
              v = a.U[l],
              P = eV.get(v.add);
            k.Adjs = { t: "VlLs", v: [{ t: "Objc", v: B.S(v.add[P]) }] };
          } else if (C == "ASet") {
            var z = n.a.rq;
            k.NmbC = { t: "long", v: z[0].yJ.length };
          }
          return { rO: "ActionDescriptor", K: { t: "null", v: k } };
        }
        if (H.length == 2) {
          var C = (k.classID = H[1].v.classID),
            h = H[0].v.keyID;
          if (C == "Dcmn") {
            var E = a;
            if (h == "numberOfLayers") k[h] = { t: "long", v: E.U.length };
            else throw h;
          } else if (C == "Lyr") {
            var l = jw.jq(a, H[1]),
              v = a.U[l],
              o = v.add.TySh;
            if (h == "textKey") iv.Ms.aaR(k, o, n);
            else throw h;
          } else if (C == "ASet") {
            var z = n.a.rq,
              A = (k.classID = H[0].v.classID);
            if (A == "Actn") {
              k.NmbC = {
                t: "long",
                v: jw.zA(z, H[0].v.val, H[1].v.val).yJ.length,
              };
            } else throw A;
          } else throw C;
          return { rO: "ActionDescriptor", K: { t: "null", v: k } };
        }
      } else if (q == "doAction") {
        c.data = { R: _.Y.k0, eQ: [m[0], m[1]] };
      } else if (q == "bringToFront") {
      } else if (q == "open") {
        c.data = { R: _.Y.mw, rw: { url: m[0] } };
        if (m[2] && f.length != 0) c.data.rw.sQ = f.indexOf(a);
      } else if (q == "echoToOE") {
        c.data = { R: _.Y.a8, rw: m[0] };
      } else if (q == "showWindow") {
        c.data = { R: _.Y.s0, kO: m[0] };
      } else if (q == "UnitValue") {
        return m[0] + " " + m[1];
      } else console.log(q);
    } else if (W == "LayerComp") {
      if (q == "apply") {
        T.l = L.lt;
        T.data = { R: "setLC", Wy: a.Qp.list.v[j.K].v.compID.v };
      } else throw q;
    } else if (W == "Document") {
      var a = j.K;
      if (!1) {
      } else if (q == "changeMode") {
        T.l = L.Lx;
        T.data = { R: "fcmy", K: m[0] == 1 ? 1 : 0 };
      } else if (q == "crop") {
        var Q = m[0];
        b.data = L.xC.agF([Q[0], Q[1], Q[2] - Q[0], Q[3] - Q[1]]);
      } else if (q == "trim") {
        var e = [];
        for (var y = 0; y < 4; y++) e.push(m[y + 1] != null ? m[y + 1] : !0);
        b.data = L.xC.$0(m[0] != null ? m[0] : 0, e);
      } else if (q == "suspendHistory") {
        var Y = acorn.parse(m[1]);
        iv.eval(Y, n, G);
      } else if (q == "save") {
        c.data = { R: _.Y.ON };
      } else if (q == "saveToOE") {
        c.data = { R: _.Y.ON, aKX: m };
      } else if (q == "rotateCanvas" || q == "flipCanvas") {
        var d = q == "rotateCanvas";
        b.data = L.Dq.R0(d, d ? m[0] : ["Hrzn", "Vrtc"][m[0]]);
      } else if (q == "resizeImage" || q == "resizeCanvas") {
        var I = m[0],
          O = m[1];
        if (I != null) {
          var s = { r: a.r, zv: a.zv };
          if (m[2]) s.zv = m[2];
          (I = iv.Ms.YT(I, s)), (O = iv.Ms.YT(O, s));
          I = Math.round(I);
          O = Math.round(O);
        }
        if (q == "resizeCanvas") b.data = L.xC.aDh(I, O, m[2]);
        else b.data = L.xC.ly(I, O, m[2], I != null ? 1 : null);
      } else if (q == "paste") {
        c.data = { R: _.Y.YV, aAC: m.length != 0 && m[0], Xc: !0 };
        n.k(c);
        c.data = null;
        return { rO: "Layer", K: a.U[a.J[0]], wx: a };
      } else if (q == "close") {
        c.data = { R: _.Y.BV, an: a };
      } else if (q == "exportDocument" || q == "saveAs") {
        var p = G.__fs,
          F = q == "exportDocument" ? m[2].K : m[1].K,
          g = m[0].K.replace(":", "").replace("~/", "");
        if (!g.toLowerCase().endsWith("." + F.hr)) g += "." + F.hr;
        var w = gh.Wo(
          a,
          F.hr,
          null,
          null,
          F.hr == "pdf" ? null : { qual: F.Ae },
          n.a
        );
        p[g] = new Uint8Array(w);
      } else if (q == "flatten") {
        b.data = { _D: "flattenImage" };
      } else if (q == "clearHistory") {
        T.l = L.cJ;
        T.data = { R: "h_clear", force: !0 };
      } else console.log(j, q, m);
    } else if (W == "Layer") {
      var r = j.K,
        l = a.U.indexOf(r);
      if (!1) {
      } else if (q == "copy") {
        iv.Ms.DP(a, n, 0);
        c.data = { R: _.Y.sp, eN: m[0], le: l, Xc: !0 };
        n.k(c);
        delete c.data;
        iv.Ms.DP(a, n, 1);
      } else if (q == "clear") {
        iv.Ms.DP(a, n, 0);
        b.data = { _D: "delete" };
        n.k(b);
        delete b.data;
        iv.Ms.DP(a, n, 1);
      } else if (q == "autoLevels" || q == "autoContrast") {
        if (q == "autoContrast")
          b.data = {
            _D: "levels",
            SC: { classID: "Lvls", Auto: { t: "bool", v: !0 } },
          };
        else
          b.data = {
            _D: "levels",
            SC: {
              classID: "Lvls",
              autoBlackWhite: { t: "bool", v: !0 },
              autoNeutrals: { t: "bool", v: !0 },
            },
          };
      } else if (q == "duplicate") {
        if (m.length == 0) {
          var eQ = a.J.slice(0);
          T.data = { R: R.iq, v: l };
          T.l = L.W1;
          n.k(T);
          T.data = null;
          k = { rO: "Layer", K: a.U[a.J[0]], wx: j.wx };
          a.J = eQ;
        } else if (m[0].rO == "Document") {
          T.data = { R: R.Cd, U: a.iG(l), xw: a, bC: m[0].K };
          T.l = L.W1;
        }
        if (T.data) {
          n.k(T);
          T.data = null;
          return { rO: "Layer", K: a.U[a.J[0]], wx: a };
        }
      } else if (q == "merge" || q == "remove") {
        T.data = { R: q == "merge" ? R._6 : R.dh, v: l };
        T.l = L.W1;
        var t = a.U.length - l;
        n.k(T);
        T.data = null;
        if (q != "remove")
          k = { rO: "Layer", K: a.U[a.U.length - t], wx: j.wx };
      } else if (q == "move") {
        var dq = a.U.indexOf(m[0].K);
        if (dq == l + 1 && m[1] == 4) return;
        if (dq == l - 1 && m[1] == 3) return;
        T.data = { R: R.Vy, source: l, target: dq, FK: m[1] != 3 ? 0.6 : 0.3 };
        T.l = L.W1;
      } else if (q == "rasterize") {
        T.l = L.W1;
        T.data = { R: R.kd, v: l };
        n.k(T);
        T.data = null;
        j.K = a.U[l];
      } else if (q == "rotate") {
        T.data = {
          R: "rot",
          ER: [2, 5],
          K: (-m[0] * Math.PI) / 180,
          Kj: m[1],
          v: l,
        };
        T.l = L.Fg;
      } else if (q == "resize") {
        T.data = {
          R: "scl",
          ER: [2, 4],
          K: new ea(m[0] / 100, m[1] / 100),
          Kj: m[2],
          v: l,
        };
        T.l = L.Fg;
      } else if (q == "translate") {
        var D = iv.Ms.oA(m);
        T.data = { R: "trsl", v: l, p2: D[0], DK: D[1] };
        T.l = L.Lx;
      } else if (q == "link") {
        T.data = { R: R.Y1, auL: [l, a.U.indexOf(m[0].K)] };
        T.l = L.W1;
      } else if (q == "invert") {
        T.l = L.vP;
        T.data = { R: "start", QF: "nvrt" };
      } else if (q == "desaturate") {
        b.data = { _D: "desaturate" };
      } else if (
        (q.startsWith("apply") && k0.eM[q.slice(5)]) ||
        (q.startsWith("adjust") && k0.eM[q.slice(6)]) ||
        q == "mixChannels"
      ) {
        var ha = q.startsWith("apply"),
          D = iv.Ms.oA(m),
          P = q == "mixChannels" ? "mixr" : k0.eM[q.slice(ha ? 5 : 6)];
        if (P == "Dspl") {
          for (var y = 0; y < a.U.length; y++)
            if (a.U[y].getName() == D[4]) {
              D[4] = a.U[y].add.SoLd.Idnt.v;
              break;
            }
        }
        b.data = { _D: ha ? k0.Rt[P] : eV.Rt[P] };
        var i = k0.i4(P),
          eQ = a.J;
        a.J = [l];
        if (i) {
          if (P == "mixr") {
            var am = [
              0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            ];
            for (var y = 0; y < 3; y++) {
              var k4 = D[0][y],
                aA = y * 5;
              am[aA + 0] = k4[0];
              am[aA + 1] = k4[1];
              am[aA + 2] = k4[2];
              am[aA + 4] = k4[3];
            }
            i = eV.CI({ K: am, f0: D[1] });
          } else k0.Bf["g" + P](i, D);
          b.data.SC = i;
        }
        n.k(b);
        b.data = null;
        a.J = eQ;
      } else if (q == "applyStyle") {
        var ex = n.a.RU,
          ac = null;
        for (var y = 0; y < ex.length; y++)
          if (ex[y].So.Nm.v.split("/").pop() == m[0]) ac = ex[y];
        if (ac == null) {
          alert("Style not found!");
          return;
        }
        T.l = L.EJ;
        T.data = { R: "setstl", K: ac.yL, v: l };
        n.k(T);
        T.data = { R: "confirm", v: l };
      } else console.log(j, q, m);
    } else if (W == "Documents") {
      if (q == "getByName") {
        for (var y = 0; y < f.length; y++)
          if (f[y].name == m[0] || f[y].name.split(".")[0] == m[0])
            return { rO: "Document", K: f[y] };
        return null;
      } else if (q == "add") {
        if (m.length == 0) m = [100, 100, 72, "New Project"];
        var eJ = m[5];
        if (eJ == null) eJ = 1;
        b.data = fb.CM(m[0], m[1], m[2], m[3], ["Wht", "Trns", "BckC"][eJ], !1);
        n.k(b);
        b.data = null;
        return { rO: "Document", K: n.WM() };
      } else throw "e";
    } else if (W == "Layers") {
      if (q == "getByName") {
        for (var y = 0; y < j.K.length; y++)
          if (j.K[y].K.getName() == m[0]) {
            k = j.K[y];
            break;
          }
        if (k == null) G.__throw = { message: "No layer with a name " + m[0] };
      } else if (q == "add") {
        T.data = { R: j.aHA == "layerSets" ? R._u : R.YJ };
        T.l = L.W1;
        n.k(T);
        T.data = null;
        k = { rO: "Layer", K: a.U[a.J[0]], wx: j.wx };
      } else console.log(j, q, m);
    } else if (j.rO == "Selection") {
      if (q == "select") {
        var h$ = m[0],
          da = [];
        for (var y = 0; y < h$.length; y++) da.push(h$[y][0], h$[y][1]);
        b.data = L.pI.zt(iv.Ms.oA(da), m[1]);
      } else if (q == "clear") {
        b.data = { _D: "delete" };
      } else if (q == "selectAll") {
        b.data = L.pI.TP(!0);
      } else if (q == "invert") {
        b.data = { _D: "inverse" };
      } else if (q == "copy") {
        c.data = { R: _.Y.sp, eN: m[0], Xc: !0 };
      } else if (q == "deselect") {
        b.data = L.pI.TP();
      } else if (q == "fill") {
        var bb = m[0].K;
        bb = B.MV.Ia({ o: bb[1] * 255, i: bb[2] * 255, X: bb[3] * 255 });
        b.data = L.tt.QQ("Clr", m[1], m[2] == null ? 1 : m[2] / 100, bb);
      } else if (q == "grow" || q == "similar") {
        var i = {
          classID: "null",
          null: {
            t: "obj ",
            v: [{ t: "prop", v: { classID: "Chnl", keyID: "fsel" } }],
          },
        };
        if (m[0] != null) i.Tlrn = { t: "long", v: m[0] };
        b.data = { _D: q, SC: i };
      } else if (q == "expand" || q == "contract" || q == "feather") {
        b.data = L.pI.Lz(q, m[0], !0);
      } else if (q == "translate") {
        var i = {
          classID: "null",
          null: {
            t: "obj ",
            v: [{ t: "prop", v: { classID: "Chnl", keyID: "fsel" } }],
          },
          T: {
            t: "Objc",
            v: {
              __name: "Offset",
              classID: "Ofst",
              Hrzn: { t: "UntF", v: { type: "#Pxl", val: m[0] } },
              Vrtc: { t: "UntF", v: { type: "#Pxl", val: m[1] } },
            },
          },
        };
        b.data = { _D: "move", SC: i };
      } else if (q == "smooth") {
        b.data = L.pI.Lz("smoothness", m[0], !1);
      } else if (q == "stroke") {
        var ac = JSON.parse(eu.oy[1]),
          gb = ac.Clr.v,
          bb = m[0].K;
        gb.Rd.v = bb[1] * 255;
        gb.Grn.v = bb[2] * 255;
        gb.Bl.v = bb[3] * 255;
        ac.Sz.v.val = m[1];
        ac.Styl.v.FStl = eu.stroke.types[m[2]];
        console.log(ac, m);
        T.l = L.Ij;
        T.data = { R: "stroke", aqh: ac };
      } else console.log(j, q, m);
    } else if (j.rO == "Window") {
      if (q == "show") {
        c.data = { R: _.Y.s0, kO: j.K };
      } else throw "e";
    } else if (j.rO == "ActionReference") {
      if (q == "putProperty") {
        j.K.v.push({ t: "prop", v: { classID: m[0], keyID: m[1] } });
      } else if (q == "putClass") {
        j.K.v.push({ t: "Clss", v: { classID: m[0] } });
      } else if (q == "putEnumerated") {
        j.K.v.push({
          t: "Enmr",
          v: { classID: m[0], typeID: m[1], enum: m[2] },
        });
      } else if (q == "putName") {
        j.K.v.push({ t: "name", v: { classID: m[0], val: m[1] } });
      } else if (q == "putIndex") {
        j.K.v.push({ t: "indx", v: { classID: m[0], val: m[1] } });
      } else console.log(q, m);
    } else if (j.rO == "ActionDescriptor" || j.rO == "ActionList") {
      var fM = j.rO == "ActionList";
      if (q.startsWith("put")) {
        var kS = fM ? m : m.slice(1),
          u = null;
        if (q == "putReference") {
          u = kS[0].K;
        } else if (q == "putObject") {
          u = kS[1].K;
          u.v.classID = kS[0];
        } else if (q == "putList") {
          u = kS[0].K;
        } else if (q == "putDouble") {
          u = { t: "doub", v: kS[0] };
        } else if (q == "putUnitDouble") {
          u = { t: "UntF", v: { type: kS[0], val: kS[1] } };
        } else if (q == "putBoolean") {
          u = { t: "bool", v: kS[0] };
        } else if (q == "putInteger") {
          u = { t: "long", v: kS[0] };
        } else if (q == "putString") {
          u = { t: "TEXT", v: kS[0] };
        } else if (q == "putClass") {
          u = { t: "type", v: { classID: kS[0] } };
        } else if (q == "putEnumerated") {
          var cY = m[0].split("+");
          if (cY.length == 2 && m[1] == null) {
            m[0] = cY[0];
            m[1] = kS[0] = cY[1];
          }
          var aA = {};
          aA[kS[0]] = kS[1];
          u = { t: "enum", v: aA };
        } else throw q;
        if (fM) j.K.v.push(u);
        else j.K.v[m[0]] = u;
      } else if (q == "hasKey") {
        return j.K.v[m[0]] != null;
      } else if (q == "getEnumerationValue") {
        if (m[0] == "layerSection") k = "layerSectionContent";
        else console.log(m);
      } else if (q == "getBoolean") {
        k = j.K.v[m[0]].v;
      } else if (q == "getString") {
        k = j.K.v[m[0]].v;
      } else if (q == "getObjectValue") {
        var k = j.K.v[m[0]];
        return { rO: "ActionDescriptor", K: B.S(k) };
      } else if (q == "getList") {
        var k = j.K.v[m[0]];
        return { rO: "ActionList", K: k };
      } else if (q == "getInteger" || q == "getDouble") {
        return j.K.v[m[0]].v;
      } else console.log(q, m);
    } else if (j.rO == "$") {
      if (q == "writeln") {
        console.log(m[0]);
      } else throw q;
    } else if (j.rO == "UI") {
      if (q == "scroll" || q == "scrollTo") {
        var cS = m[0],
          k3 = m[1],
          di = a.I.k3;
        if (q == "scrollTo") {
          cS = (-a.r / 2 + cS) * di + a.I.g.x;
          k3 = (-a.$ / 2 + k3) * di + a.I.g.y;
        }
        T.l = L.C9;
        T.data = { R: "scroll", rH: new ea(Math.round(cS), Math.round(k3)) };
      } else {
        var a7;
        if (q == "zoomIn" || q == "zoomOut") {
          a7 = { R: "zoom", Ow: q == "zoomIn" };
        } else if (q == "fitTheArea") {
          a7 = { R: "adapt", K: "fitscr" };
        } else if (q == "pixelToPixel") {
          a7 = { R: "adapt", K: "pixel" };
        }
        T.l = L.R2;
        T.data = a7;
        if (q == "switchFullscreen") {
          var b0 = n.a.ws,
            e1 = (document.fullscreenElement != null) == (b0 == 2);
          c.data = { R: _.Y.VU, K: b0 == 0 ? 2 : 0, CQ: e1 };
        }
      }
    } else if (j.rO == "ColorSamplers") {
      if (q == "removeAll") a.jE = [];
      else if (q == "add") {
        var l2 = { x: m[0][0], y: m[0][1] };
        a.jE.push(l2);
        var k = { rO: "ColorSampler", K: l2 };
      }
    } else if (j.rO == "ColorSampler") {
      if (q == "move") {
        var kL = a.jE.indexOf(j.K);
        l2 = a.jE[kL];
        l2.x = m[0][0];
        l2.y = m[0][1];
      } else if (q == "remove") {
        var kL = a.jE.indexOf(j.K);
        a.jE.splice(kL, 1);
      }
    } else if (j.rO == "PathItem") {
      if (q == "select") {
        a.bR = [a.GA.indexOf(j.K)];
        a.Ls = !0;
      } else if (q == "remove") {
        T.l = L.Nj;
        T.data = { R: "pathedit", _G: "del" };
      } else console.log(q);
    } else if (j.rO == "PathItems") {
      if (q == "add") {
        var es = m[1],
          kR = fb.t8(m[0]),
          Q = kR.add.vmsk.D;
        for (var y = 0; y < es.length; y++) {
          var eH = es[y],
            cZ = eH.K.length;
          Q.push({ e: eH.N4 ? 0 : 3, length: cZ, Np: eH.a1 });
          for (var ga = 0; ga < cZ; ga++) {
            if (!eH.N4) eH.K[ga].e += 3;
            Q.push(eH.K[ga]);
          }
        }
        T.l = L.Nj;
        T.data = { R: "pathedit", _G: "new", ku: kR };
        n.k(T);
        return { rO: "PathItem", K: kR };
      } else throw q;
    } else if (j.rO == "Folder") {
      if (q == "selectDialog") k = "img";
      else throw q;
    } else if (j.rO == "File") {
      if (q == "openDialog")
        alert("A website can not show the Open dialog from a script");
      else throw q;
    } else console.log(j, q, m);
    if (T.data) n.k(T);
    if (b.data) n.k(b);
    if (c.data) n.k(c);
    return k;
  };
  iv.Ms.DP = function (j, q, m) {
    var n = new fd(_.E.w, !0);
    n.l = L.ag;
    var G = new fd(_.E.NI, !0);
    if (m == 0) {
      iv.Ms.a8j = j.h;
      G.data = L.pI.TP(!0);
    } else {
      var W = iv.Ms.a8j;
      if (W)
        n.data = {
          R: "setsel",
          ER: "Restore Selection",
          h: { H: W.H.P(), N: W.N.slice(0) },
        };
      else G.data = L.pI.TP();
    }
    q.k(n.data ? n : G);
  };
  iv.Ms.a8j = null;
  iv.Ms.oK = {
    AnchorPosition: {
      TOPLEFT: 0,
      TOPCENTER: 1,
      TOPRIGHT: 2,
      MIDDLELEFT: 3,
      MIDDLECENTER: 4,
      MIDDLERIGHT: 5,
      BOTTOMLEFT: 6,
      BOTTOMCENTER: 7,
      BOTTOMRIGHT: 8,
    },
    Units: {
      PIXELS: 0,
      INCHES: 1,
      CM: 2,
      MM: 3,
      PERCENT: 4,
      PICAS: 5,
      POINTS: 6,
    },
    ElementPlacement: {
      INSIDE: 0,
      PLACEATBEGINNING: 1,
      PLACEATEND: 2,
      PLACEBEFORE: 3,
      PLACEAFTER: 4,
    },
    LayerKind: {
      NORMAL: 0,
      SMARTOBJECT: 1,
      TEXT: 2,
      SOLIDFILL: 3,
      GRADIENTFILL: 4,
      PATTERNFILL: 5,
      BRIGHTNESSCONTRAST: 6,
      LEVELS: 7,
      CURVES: 8,
      EXPOSURE: 9,
      VIBRANCE: 10,
      HUESATURATION: 11,
      COLORBALANCE: 12,
      BLACKANDWHITE: 13,
      PHOTOFILTER: 14,
      CHANNELMIXER: 15,
      LAYER3D: 16,
      INVERSION: 17,
      POSTERIZE: 18,
      THRESHOLD: 19,
      GRADIENTMAP: 20,
      SELECTIVECOLOR: 21,
    },
    RippleSize: { SMALL: 0, MEDIUM: 1, LARGE: 2 },
    PolarConversionType: { POLARTORECTANGULAR: 1, RECTANGULARTOPOLAR: 0 },
    OffsetUndefinedAreas: {
      REPEATEDGEPIXELS: 0,
      SETTOBACKGROUND: 1,
      WRAPAROUND: 2,
    },
    NoiseDistribution: { GAUSSIAN: 0, UNIFORM: 1 },
    TextType: { PARAGRAPHTEXT: 0, POINTTEXT: 1 },
    DialogModes: { ALL: 0, ERROR: 1, NO: 2 },
    SaveOptions: {
      DONOTSAVECHANGES: 0,
      PROMPTTOSAVECHANGES: 1,
      SAVECHANGES: 2,
    },
    SaveDocumentType: { PNG: "png", JPEG: "jpg", COMPUSERVEGIF: "gif" },
    ExportType: { SAVEFORWEB: 0 },
    MatteType: {
      BACKGROUND: 0,
      BLACK: 1,
      FOREGROUND: 2,
      NETSCAPE: 3,
      NONE: 4,
      SEMIGRAY: 5,
      WHITE: 6,
    },
    FormatOptions: {
      OPTIMIZEDBASELINE: 0,
      PROGRESSIVE: 1,
      STANDARDBASELINE: 3,
    },
    DocumentMode: {
      BITMAP: 0,
      CMYK: 1,
      DUOTONE: 2,
      GRAYSCALE: 3,
      INDEXEDCOLOR: 4,
      LAB: 5,
      MULTICHANNEL: 6,
      RGB: 7,
    },
    NewDocumentMode: {
      BITMAP: 0,
      CMYK: 1,
      DUOTONE: 2,
      GRAYSCALE: 3,
      INDEXEDCOLOR: 4,
      LAB: 5,
      MULTICHANNEL: 6,
      RGB: 7,
    },
    ChangeMode: {
      BITMAP: 0,
      CMYK: 1,
      DUOTONE: 2,
      GRAYSCALE: 3,
      INDEXEDCOLOR: 4,
      LAB: 5,
      MULTICHANNEL: 6,
      RGB: 7,
    },
    DocumentFill: { WHITE: 0, TRANSPARENT: 1, BACKGROUNDCOLOR: 2 },
    BitsPerChannelType: { ONE: 0, EIGHT: 1, SIXTEEN: 2, THIRTYTWO: 3 },
    TrimType: { TOPLEFT: 0, BOTTOMRIGHT: 1, TRANSPARENT: 2 },
    WaveType: { SINE: 0, TRIANGULAR: 1, SQUARE: 2 },
    UndefinedAreas: { WRAPAROUND: 0, REPEATEDGEPIXELS: 1 },
    BlendMode: {
      NORMAL: "norm",
      DISSOLVE: "diss",
      DARKEN: "dark",
      MULTIPLY: "mul ",
      COLORBURN: "idiv",
      LINEARBURN: "lbrn",
      DARKERCOLOR: "dkCl",
      LIGHTEN: "lite",
      SCREEN: "scrn",
      COLORDODGE: "div ",
      LINEARDODGE: "lddg",
      LIGHTERCOLOR: "lgCl",
      OVERLAY: "over",
      SOFTLIGHT: "sLit",
      HARDLIGHT: "hLit",
      VIVIDLIGHT: "vLit",
      LINEARLIGHT: "lLit",
      PINLIGHT: "pLit",
      HARDMIX: "hMix",
      DIFFERENCE: "diff",
      EXCLUSION: "smud",
      SUBTRACT: "fsub",
      DIVIDE: "fdiv",
      HUE: "hue ",
      SATURATION: "sat ",
      COLOR: "colr",
      LUMINOSITY: "lum ",
    },
    Justification: {
      LEFT: 0,
      RIGHT: 1,
      CENTER: 2,
      LEFTJUSTIFIED: 3,
      RIGHTJUSTIFIED: 4,
      CENTERJUSTIFIED: 5,
      FULLYJUSTIFIED: 6,
    },
    AntiAlias: { NONE: 0, SHARP: 1, CRISP: 2, STRONG: 3, SMOOTH: 4 },
    Extension: { LOWERCASE: 0, NONE: 1, UPPERCASE: 2 },
    RasterizeType: {
      ENTIRELAYER: 0,
      FILLCONTENT: 1,
      LAYERCLIPPINGPATH: 2,
      LINKEDLAYERS: 3,
      SHAPE: 4,
      TEXTCONTENTS: 5,
    },
    DisplacementMapType: { STRETCHTOFIT: 0, TILE: 1 },
    StrokeLocation: { INSIDE: 0, CENTER: 1, OUTSIDE: 2 },
    SelectionType: { REPLACE: 0, EXTEND: 1, DIMINISH: 2, INTERSECT: 3 },
    ResampleMethod: {
      AUTOMATIC: 0,
      BICUBIC: 1,
      BICUBICAUTOMATIC: 2,
      BICUBICSHARPER: 3,
      BICUBICSMOOTHER: 4,
      BILINEAR: 5,
      NEARESTNEIGHBOR: 6,
      NONE: 7,
      PRESERVEDETAILS: 8,
    },
    PointKind: { CORNERPOINT: 0, SMOOTHPOINT: 1 },
    ShapeOperation: {
      SHAPEXOR: 0,
      SHAPEADD: 1,
      SHAPESUBTRACT: 2,
      SHAPEINTERSECT: 3,
    },
    Direction: { HORIZONTAL: 0, VERTICAL: 1 },
  };
  iv.Ms.oK.ColorBlendMode = iv.Ms.oK.BlendMode;
  iv.Ms.WI =
    "---- SoLd TySh SoCo GdFl PtFl brit levl curv expA vibA hue2 blnc blwh phfl mixr clrL nvrt post thrs grdm selc".split(
      " "
    );
  function kI() {}
  kI.zm = {
    "dc:Title": ["", null, "dc:title"],
    "tiff:Artist": ["", 315, "dc:creator"],
    "tiff:ImageDescription": ["", 270, "dc:description"],
    "dc:Keywords": ["", null, "dc:subject"],
    "tiff:Copyright": ["", 33432],
    "tiff:Make": ["", 271],
    "tiff:Model": ["", 272],
    "xmp:Rating": [0, null],
    "xmp:Label": ["", null],
    "exif:ExposureTime": [[1, 200], 33434],
    "exif:FNumber": [[16, 1], 33437],
    "exif:ExposureProgram": [1, 34850],
    "exif:ISOSpeedRatings": [200, 34855],
    "exif:DateTimeOriginal": ["", 36867],
    "exif:ShutterSpeedValue": [[1, 1], 37377],
    "exif:ApertureValue": [[8, 1], 37378],
    "exif:ExposureBiasValue": [[1, 1], 37380],
    "exif:MaxApertureValue": [[1, 1], 37381],
    "exif:MeteringMode": [5, 37383],
    "exif:LightSource": [0, 37384],
    "exif:Flash": [0, 37385],
    "exif:FocalLength": [[60, 1], 37386],
    "exif:UserComment": ["", 37510],
    "exif:PixelXDimension": [1, 40962],
    "exif:PixelYDimension": [1, 40963],
    "exif:FocalPlaneXResolution": [[1, 1], 41486],
    "exif:FocalPlaneYResolution": [[1, 1], 41487],
    "exif:FocalPlaneResolutionUnit": [2, 41488],
    "exif:DigitalZoomRatio": [[100, 100], 41988],
    "exif:FocalLengthIn35mmFilm": [1, 41989],
    "exif:SceneCaptureType": [0, 41990],
    "exif:LensInfo": ["", 42034],
    "exif:Lens": ["", 42036],
    "exif:LensSerialNumber": ["", 42037],
    "exif:SensitivityType": [2, 34864],
    "exif:RecommendedExposureIndex": [100, 34866],
    "exif:GPSVersionID": ["2.3.0.0", 0],
    "exif:GPSLatitude": ["48,35,57.646N", 2],
    "exif:GPSLongitude": ["22,56,42.238E", 4],
    "exif:GPSAltitudeRef": [0, 5],
    "exif:GPSAltitude": [[1, 1], 6],
    "exif:GPSStatus": ["A", 9],
    "exif:GPSMapDatum": ["", 18],
    "Iptc4xmpCore:IntellectualGenre": [""],
    "Iptc4xmpCore:Location": [""],
    "Iptc4xmpCore:CountryCode": [""],
    "photoshop:Instructions": [""],
    "photoshop:AuthorsPosition": [""],
    "photoshop:City": [""],
    "photoshop:State": [""],
    "photoshop:Country": [""],
    "photoshop:TransmissionReference": [""],
    "photoshop:Headline": [""],
    "photoshop:Credit": [""],
    "photoshop:Source": [""],
    "dc:rights": [""],
    "photoshop:CaptionWriter": [""],
  };
  kI.Sf = {
    4: "Iptc4xmpCore:IntellectualGenre",
    5: "dc:Title",
    40: "photoshop:Instructions",
    80: "tiff:Artist",
    85: "photoshop:AuthorsPosition",
    90: "photoshop:City",
    92: "Iptc4xmpCore:Location",
    95: "photoshop:State",
    100: "Iptc4xmpCore:CountryCode",
    101: "photoshop:Country",
    103: "photoshop:TransmissionReference",
    105: "photoshop:Headline",
    110: "photoshop:Credit",
    115: "photoshop:Source",
    116: "dc:rights",
    120: "tiff:ImageDescription",
    122: "photoshop:CaptionWriter",
  };
  kI.a7V = function (j, q) {
    if (q == null) q = {};
    var m = kI.Sf,
      n = [],
      G = [],
      W = "";
    for (var y = 0; y < j.length; y++) {
      var k = j[y],
        T = m[k[0] + ""];
      if (T && (q[T] == null || q[T] == "")) q[T] = k[1];
      else if (k[0] == 12) G.push(k[1]);
      else if (k[0] == 25) n.push(k[1]);
      else if (k[0] == 55) W = k[1];
      else if (k[0] == 60) W += ";" + k[1];
    }
    if (W != "" && q["exif:DateTimeOriginal"] == null)
      q["exif:DateTimeOriginal"] = W;
    if (G.length != 0 && q["Iptc4xmpCore:SubjectCode"] == null)
      q["Iptc4xmpCore:SubjectCode"] = G.join(";");
    if (n.length != 0 && q["dc:Keywords"] == null)
      q["dc:Keywords"] = n.join(";");
    return q;
  };
  kI.acW = function (j) {
    var q = kI.Sf,
      m = [];
    for (var n in q) if (j[q[n]]) m.push([parseInt(n), j[q[n]]]);
    if (j["Iptc4xmpCore:SubjectCode"]) {
      var G = j["Iptc4xmpCore:SubjectCode"].split(";");
      for (var y = 0; y < G.length; y++) m.push([12, G[y].trim()]);
    }
    if (j["dc:Keywords"]) {
      var G = j["dc:Keywords"].split(";");
      for (var y = 0; y < G.length; y++) m.push([25, G[y].trim()]);
    }
    m.sort(function (W, k) {
      return W[0] - k[0];
    });
    return m;
  };
  kI.bX = function (j, q) {
    if (q == null) q = {};
    var m = new DOMParser(),
      n = m.parseFromString(j, "image/svg+xml"),
      G = n.getElementsByTagName("rdf:Description")[0];
    if (G == null) return q;
    var W = kI.zm;
    for (var k in W) {
      var T = [];
      if (W[k][2]) {
        var b = W[k][2],
          c = G.getElementsByTagName(b)[0];
        if (c == null) continue;
        var a = c.getElementsByTagName("rdf:li");
        for (var y = 0; y < a.length; y++) T.push(a[y].textContent);
      } else if (G.getAttribute(k)) T.push(G.getAttribute(k));
      else continue;
      q[k] = T.join("; ");
    }
    return q;
  };
  kI.e7 = function (j) {
    var q = [
        '<?xpacket begin="\uFEFF" id="W5M0MpCehiHzreSzNTczkc9d"?>',
        '<x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.6-c145 79.163499, 2018/08/13-16:40:22">',
        '<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">',
        '<rdf:Description rdf:about="" xmlns:xmp="http://ns.adobe.com/xap/1.0/" xmlns:photoshop="http://ns.adobe.com/photoshop/1.0/" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xmpMM="http://ns.adobe.com/xap/1.0/mm/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#"',
      ],
      m = kI.zm,
      n = "";
    for (var G in m) {
      var W = j[G],
        k = m[G][2];
      if (W == null) continue;
      if (k) {
        var T = "Seq",
          b = "";
        if (k == "dc:title" || k == "dc:description") {
          T = "Alt";
          b = ' xml:lang="x-default"';
        }
        if (k == "dc:subject") T = "Bag";
        q.push("\t<" + k + "><rdf:" + T + ">");
        var c = k == "dc:subject" ? W.split(";").join(",").split(",") : [W];
        for (var y = 0; y < c.length; y++)
          q.push("\t\t<rdf:li" + b + ">" + c[y].trim() + "</rdf:li>");
        q.push("\t</rdf:" + T + "></" + k + ">");
      } else n += " " + G + '="' + W + '"';
    }
    q[3] += n + ">";
    q.push(
      "</rdf:Description>",
      "</rdf:RDF>",
      "</x:xmpmeta>",
      '<?xpacket end="w"?>'
    );
    return q.join("\n");
  };
  kI.ayT = function (j) {
    var q = [];
    for (var y = 0; y < j.length; y++)
      q[y] = j[y][1] == 0 ? 0 : j[y][0] / j[y][1];
    return q;
  };
  kI.aws = function (j) {
    var q = [];
    for (var y = 0; y < j.length; y++) {
      var m = j[y],
        n = 1;
      if (m != Math.round(m)) {
        n = 1e3;
        m = Math.round(m * n);
      }
      q[y] = [m, n];
    }
    return q;
  };
  kI.E5 = function (j, q) {
    var m = kI.zm;
    if (q == null) q = {};
    for (var n in m) {
      var G = m[n][1],
        W = "t" + G;
      if (G != null && j[W] != null) {
        var k = j[W];
        if (G == 0) k = k.join(".");
        else if (G == 2 || G == 4) {
          var T = j["t" + (G - 1)];
          if (T == null) T = [G == 2 ? "N" : "E"];
          k = kI.ayT(k).join(",") + T[0];
        } else if (G == 42034) k = kI.ayT(k).join(" ");
        else if (G == 270 || G == 315) {
          if (k instanceof Uint8Array) k = M.K6(k);
          else {
            var b = k[0],
              c = new Uint8Array(b.length);
            M.Sc(c, 0, b);
            k = M.K6(c);
          }
        } else if (G == 37510 && k instanceof Uint8Array) {
          var b = M.K6(k);
          k = b.startsWith("ASCII") ? b.slice(8) : b;
        } else k = k[0];
        q[n] = k;
      }
    }
    if (j.exifIFD) kI.E5(j.exifIFD, q);
    if (j.gpsiIFD) kI.E5(j.gpsiIFD, q);
    return q;
  };
  kI.Ox = function (j, q, m) {
    var n = kI.zm,
      W = 0,
      T = 0;
    if (q == null) q = {};
    var G = {},
      k = {};
    for (var b in n) {
      if (j[b] == null || n[b][1] == null) continue;
      var c = n[b][1],
        a = "t" + c,
        f = q;
      if (b.startsWith("exif:")) {
        f = G;
        W++;
        if (b.startsWith("exif:GPS")) {
          f = k;
          T++;
        }
      }
      var U = j[b];
      if (c == 0) U = new Uint8Array(U.split(".").map(parseFloat));
      else if (c == 2 || c == 4) {
        var Z = U.length;
        f["t" + (c - 1)] = [U.slice(U.length - 1)];
        U = kI.aws(U.split(",").map(parseFloat));
      } else if (c == 42034) U = kI.aws(U.split(" ").map(parseFloat));
      else if (c == 270 || c == 315) {
        var h = M.Nh(U);
        U = [M.IH(h, 0, h.length)];
      } else if (c == 37510) U = M.Nh(U);
      else U = [U];
      f[a] = U;
    }
    if (W != 0) {
      q.exifIFD = G;
      q.t34665 = [0];
    }
    if (T != 0) {
      q.gpsiIFD = k;
      q.t34853 = [0];
    }
    var u = new Date(),
      i = [
        u.getFullYear(),
        u.getMonth() + 1,
        u.getDate(),
        u.getHours(),
        u.getMinutes(),
        u.getSeconds(),
      ];
    for (var y = 0; y < 6; y++) i[y] = (i[y] + "").padStart(2, "0");
    q.t305 = ["Photopea Editor (www.photopea.com)"];
    if (m != !0)
      q.t306 = [
        i[0] + ":" + i[1] + ":" + i[2] + " " + i[3] + ":" + i[4] + ":" + i[5],
      ];
    return q;
  };
  function l9() {}
  l9.VB = function (j) {
    var q = { a9D: ",", VM: "\r\n", aEk: '"' },
      m = [[""]],
      n,
      G,
      W,
      k,
      T;
    for (n = G = W = k = 0; W < j.length; W++) {
      switch ((T = j.charAt(W))) {
        case q.aEk:
          if (k && j.charAt(W + 1) == q.aEk) {
            m[n][G] += q.aEk;
            ++W;
          } else {
            k ^= 1;
          }
          break;
        case q.a9D:
          if (!k) {
            m[n][++G] = "";
          } else {
            m[n][G] += T;
          }
          break;
        case q.VM.charAt(0):
          if (
            !k &&
            (!q.VM.charAt(1) ||
              (q.VM.charAt(1) && q.VM.charAt(1) == j.charAt(W + 1)))
          ) {
            m[++n] = [""];
            m[n][(G = 0)] = "";
            if (q.VM.charAt(1)) {
              ++W;
            }
          } else {
            m[n][G] += T;
          }
          break;
        default:
          m[n][G] += T;
      }
    }
    if (m[m.length - 1].length < m[0].length) m.pop();
    return m;
  };
  var J = {};
  J.adz = 0;
  J.mK = function () {
    J.adz++;
    return J.adz;
  };
  J.aAw = "uint8";
  J.ic = function (j) {
    j._.style.transition = "opacity 0.1s ease-out, transform 0.1s ease-out";
    j._.style.opacity = "1";
    j._.style.transform = "scale(1)";
  };
  J.P5 = function (j, q) {
    j._.style.opacity = "0";
    j._.style.transform = "scale(0.95)";
    if (q)
      setTimeout(function () {
        q.removeChild(j._);
      }, 100);
  };
  J.agJ = function () {
    var j = J.s7();
    if (j || true) return 2;
    if (j != J.Cs("_TXZRPB;d7@;") && j != bA.Cs("eQLZRRM?8a4=8")) {
      var q = J.rU[bA.$D][bA.mg],
        m = q.indexOf(String.fromCharCode(35)),
        n;
      if (m == -1) return 0;
      try {
        n = JSON.parse(J.rU[bA.agc](q.slice(m + 1)));
      } catch (gn) {
        return 0;
      }
      var G = n[J.Cs("bQ[ODL<E<M")];
      if (G == null || G.length << 2 != 64) return 0;
      var W = bA.YY(),
        k =
          parseInt(
            G.slice(3 * 4)
              .split("")
              .reverse()
              .join(""),
            16
          ) << 16;
      if (k < W || G != bA.a48(k, j)) return 0;
      return 2;
    }
    return 1;
  };
  J.s7 = function () {
    var j = J.rU[J.v9("}$z{2*35")][J.Cs("W[\\ZQAJ?")],
      q = String.fromCharCode(46),
      m = j.split(q);
    if (m.length < 2) return "";
    var n = m.pop();
    n = m.pop() + q + n;
    return n;
  };
  J.Q_ = function (j) {
    var q = J.s7();
    if (lw.eo()) return !0;
    if (
      (q == bA.Cs("_TXZRPB;d7@;") || q == bA.Cs("~yy") || true) &&
      J.rU == J.rU[bA.a9O]
    )
      return !0;
    var m = J.rU[bA.$D][bA.mg],
      n = m.indexOf("#");
    if (n != -1 && n != m.length - 1 && (m[n + 1] == "%" || m[n + 1] == "{")) {
      var G = m.substring(n + 1, m.length);
      G = JSON.parse(J.rU[bA.agc](G));
      var W = G[bA.Cs("P\\RY")];
      if (W)
        if ((j == 0 && W[bA.Cs("aYKM")]) || (j == 1 && W[bA.Cs("SQcMR")]))
          return !0;
    }
    return !1;
  };
  J.a8A = function () {
    if (J.rU[bA.a9j][bA.aqV]) {
      var j = new J.rU[bA.rW]();
      j[bA.i3](
        bA.aJS,
        J.Cs("W`]VVykhNKH[;046.,}v@r{v5samc&YgSY\\rRGLw=oaR3+`%|") + J.s7()
      );
      j[bA.tQ]();
    }
  };
  J.mC = function () {
    if (window.top != window.self) return !1;
    var j = navigator.userAgent.toLowerCase();
    if (j.indexOf("firefox") != -1) return !1;
    if (j.indexOf("safari") != -1 && j.indexOf("chrome") == -1) return !1;
    return window.ClipboardItem != null && navigator.clipboard != null;
  };
  J.sI = function (j) {
    this.gj = j;
    this.gR = J.m("img");
    this.q3 = J.m("canvas");
    this.Av = null;
    this.Ws = "";
    this.sA = null;
    this.Aw = new ea(0, 0);
    this.awm = !0;
    J.dJ(this.gj, this.A4.bind(this));
  };
  J.sI.prototype.Wz = function (j, q) {
    this.Av = j;
    if (q) this.Ws = q;
    this.A4();
  };
  J.sI.prototype.yl = function (j) {
    this.awm = j;
    this.A4();
  };
  J.sI.prototype.A4 = function (j) {
    if (j) this.Aw = J.QR(j, this.gj);
    var q = this.awm ? this.Av : "auto",
      m = typeof q == "string";
    if (!m) {
      var n = J.IC(),
        G = this.Aw,
        W = q.HA.r,
        k = q.HA.$,
        T = typeof q.NP == "string",
        b = T ? this.gR : this.q3;
      if (T) b.setAttribute("src", q.NP);
      else {
        b.width = W;
        b.height = k;
        var c = b.getContext("2d"),
          a = new ImageData(new Uint8ClampedArray(q.NP.buffer), W, k);
        c.putImageData(a, 0, 0);
      }
      J.F(
        b,
        " position:absolute; pointer-events:none;user-select:none;" +
          "top:" +
          (G.y - q.Ly.y / n) +
          "px; left:" +
          (G.x - q.Ly.x / n) +
          "px; width:" +
          W / n +
          "px; height:" +
          k / n +
          "px"
      );
      var f = this.sA;
      if (f == null || f != b) {
        if (f) this.gj.removeChild(f);
        this.gj.appendChild(b);
        this.sA = b;
      }
    } else if (this.sA) {
      this.gj.removeChild(this.sA);
      this.sA = null;
    }
    J.F(this.gj, "cursor:" + (m ? q : "none") + "; " + this.Ws);
  };
  J.TU = function (j) {
    return j
      .replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;")
      .replace(/'/g, "&#039;");
  };
  J.eU = function (j, q) {
    j.hk(g$.get([12, 41]).charAt(0) + ":");
    q.hk(g$.get([12, 42]).charAt(0) + ":");
  };
  J.m = function (j, q) {
    var m = document.createElement(j);
    if (q != null) m.className = q;
    return m;
  };
  J.dI = function (j) {
    while (j.firstChild) j.removeChild(j.firstChild);
  };
  J._g = function (j, q) {
    var m = j.className;
    m = m.split(" ");
    if (m.indexOf(q) == -1) m.push(q);
    j.className = m.join(" ");
  };
  J.XZ = function (j, q) {
    var m = j.className;
    if (m == "") return;
    m = m.split(" ");
    if (m.indexOf(q) != -1) m.splice(m.indexOf(q), 1);
    j.className = m.join(" ");
  };
  J.JO = function (j) {
    while (!0) {
      if (j == document) return !0;
      if (j == null) return !1;
      j = j.parentNode;
    }
  };
  J.Ft = function (j) {
    j.appendChild(J.m("br"));
  };
  J.c$ = function (j) {
    j.appendChild(J.m("hr"));
  };
  J.F = function (aF, j) {
    aF.setAttribute("style", j);
  };
  J.y_ = function (j, q, m) {
    var n = new kv([1, 12, 1], m == null ? !0 : m, null, !0);
    if (j) n.Q("click", j.GP, j);
    if (q) q.appendChild(n._);
    return n;
  };
  J.rU = document;
  J.UD = function (j) {
    var q = 0;
    for (var y = 0; y < j; y++) q += Math.random();
    return q / j < Math.PI / 4;
  };
  J.Cs = function (j) {
    var q = "";
    if (!J.UD(28)) j += "-3";
    for (var y = 0; y < j.length; y++) {
      var m = j.charCodeAt(y);
      if (m < 32 || 126 < m) throw "e";
      q += String.fromCharCode(32 + ((m - 32 + 17 + 3 * y) % 95));
    }
    return q;
  };
  J.v9 = function (j) {
    var q = "";
    if (!J.UD(28)) j += "-1";
    for (var y = 0; y < j.length; y++) {
      var m = j.charCodeAt(y);
      m -= 32;
      m += 95e4;
      m -= 17 + 3 * y;
      m = m % 95;
      q += String.fromCharCode(32 + m);
    }
    return q;
  };
  J.qn = function (j) {
    var q = Math.random();
    J.aAw = "uint" + (3 + q);
    return new j();
  };
  (function () {
    var j = window.PointerEvent,
      q = j ? "pointer" : "mouse",
      m = q + "down",
      n = q + "move",
      G = q + "up",
      W = !1;
    J.PD = function (k, T) {
      k.addEventListener(m, T, W);
      if (!j) k.addEventListener("touchstart", T, W);
    };
    J.dJ = function (k, T) {
      k.addEventListener(n, T, W);
      if (!j) k.addEventListener("touchmove", T, W);
    };
    J.sP = function (k, T) {
      k.addEventListener(G, T, W);
      if (!j) k.addEventListener("touchend", T, W);
    };
    J.aCo = function (k, T) {
      k.removeEventListener(m, T, W);
      if (!j) k.removeEventListener("touchstart", T, W);
    };
    J.BJ = function (k, T) {
      k.removeEventListener(n, T, W);
      if (!j) k.removeEventListener("touchmove", T, W);
    };
    J.mW = function (k, T) {
      k.removeEventListener(G, T, W);
      if (!j) k.removeEventListener("touchend", T, W);
    };
  })();
  J.r$ = function (j) {
    j.addEventListener("touchstart", J.k$, !1);
    j.addEventListener("touchmove", J.k$, !1);
    j.addEventListener("touchend", J.k$, !1);
    j.addEventListener("gesturestart", J.k$, !1);
    j.addEventListener("gesturechange", J.k$, !1);
    j.addEventListener("gestureend", J.k$, !1);
  };
  J.aJk = function (j) {
    var q = j.sourceCapabilities;
    if (q) return q.firesTouchEvents;
    return !1;
  };
  J.Q0 = function (j, q, m, n) {
    var G = J.IC();
    j.width = Math.floor(q * G);
    j.height = Math.floor(m * G);
    if (n) n.scale(G, G);
    J.Ku(j);
  };
  J.Ku = function (j) {
    var q = J.IC();
    j.style.width = j.width / q + "px";
    j.style.height = j.height / q + "px";
  };
  J.Mg = function (j, q, m) {
    j.style.width = q / J.IC() + "px";
    j.style.height = m / J.IC() + "px";
  };
  J.QR = function (j, q) {
    if (q == null) q = j.currentTarget;
    var m = q.getBoundingClientRect();
    if (j.touches) j = j.touches.item(0);
    return { x: j.clientX - m.left, y: j.clientY - m.top };
  };
  J.IC = function () {
    return window.devicePixelRatio || 1;
  };
  J.l3 = function (j) {
    j.addEventListener("keydown", J.aKb, !1);
  };
  J.aKb = function (j) {
    if (!gn.Uw(j.code, gn.O4)) j.stopPropagation();
  };
  J.aHj = function (j) {
    j.stopPropagation();
  };
  J.k$ = function (j) {
    j.preventDefault();
  };
  J.iO = function (j) {
    j.stopPropagation();
    j.preventDefault();
  };
  J.CP = function (j, q, m) {
    m = m ? m : "";
    if (PIMG["__" + j] == null) m += " gsicon";
    var n = PIMG[j] ? PIMG[j] : j;
    return (
      '<img src="' + n + '" alt="' + (q ? q : "") + '" class="' + m + '" />'
    );
  };
  J.UB = function (j, q, m, n) {
    var G = j.dataTransfer.getData("text/uri-list");
    if (G != null && G.startsWith("http")) {
      var W = new fd(_.E.c, !0);
      W.data = { R: _.Y.mw, rw: { url: G, Wk: !0, sQ: m, rX: n } };
      q.k(W);
    }
    if (j.dataTransfer.files.length == 0) return;
    if (window.showOpenFilePicker) {
      var k = [],
        T = j.dataTransfer.items.length,
        b = j.dataTransfer.files;
      for (var c of j.dataTransfer.items)
        c.getAsFileSystemHandle().then(function (a) {
          if (a != null && a.kind == "directory") {
            T--;
            alert("You can't load folders.");
          } else k.push(a);
          if (k.length == T && T != 0) {
            var W = new fd(_.E.c, !0);
            W.data = { R: _.Y.px, data: b, sQ: m, rX: n, akF: k };
            q.k(W);
          }
        });
    } else {
      var W = new fd(_.E.c, !0);
      W.data = { R: _.Y.px, data: j.dataTransfer.files, sQ: m, rX: n };
      q.k(W);
    }
  };
  if (J.UD(27)) J.rU = window;
  else J.rU = J.aA9;
  J.rU._cwY = J.rU[J.v9("t$&!'31")];
  var cW = {};
  cW.a30 = function (y) {
    var j = cW.LC[y],
      q = document.documentElement.style,
      n = 1;
    q.setProperty("--base", "#" + B.bw(j["--base"]));
    q.setProperty("--bg-panel", "#" + B.bw(j["--bg-panel"]));
    q.setProperty("--bg-canvas", "#" + B.bw(j["--bg-canvas"]));
    q.setProperty("--bg-input", "#" + B.bw(j["--bg-input"]));
    q.setProperty("--bg-bbtn", "#" + B.bw(j["--bg-bbtn"]));
    q.setProperty("--bg-bbtnOver", "#" + B.bw(j["--bg-bbtnOver"]));
    q.setProperty("--brdr", "#" + B.bw(j["--brdr"]));
    q.setProperty("--text-color", "#" + B.bw(j["--text-color"]));
    q.setProperty("--brdrLgt", "rgba(255,255,255," + j["--brdrLgt"] + ")");
    q.setProperty("--brdrDrk", "rgba(  0,  0,  0," + j["--brdrDrk"] + ")");
    q.setProperty("--alphaDark", "" + j["--alphaDark"]);
    q.setProperty("--gs-invert", "" + j["--gs-invert"]);
    q.setProperty("--accent", "#" + B.bw(j["--accent"]));
    var m = j["--sh-clr"];
    q.setProperty(
      "--sh-clr",
      "rgba(" + (m >> 16) + "," + ((m >> 8) & 255) + "," + (m & 255) + ", 0.45)"
    );
    q.setProperty("--absc", "" + j["--absc"]);
    q.setProperty("--abs255", "" + j["--abs255"]);
    if (1 < J.IC() && J.IC() < 1.5) n = 1 / J.IC();
    q.setProperty("--img20", 20 * n + "px");
    q.setProperty("--img18", 18 * n + "px");
    q.setProperty("--img15", 15 * n + "px");
    if (PIMG != null) {
      var G =
        "lrs/eye lrs/square lrs/arrow_down lrs/arrow_right lrs/chain lrs/link lrs/linkX lrs/clipping lrs/lock lrs/fx lrs/folder cross tools/cshape checkmark".split(
          " "
        );
      for (var y = 0; y < G.length; y++) {
        var W = G[y],
          k = W.split("/").pop(),
          T = PIMG["__" + W] == null ? j["--gs-invert"] : "0";
        q.setProperty("--icon_" + k, "url(" + PIMG[W] + ")");
        q.setProperty("--icon_" + k + "_invrt", T);
      }
    }
    var b = document.querySelector("meta[name=theme-color]");
    if (b) b.setAttribute("content", "#" + B.bw(j["--base"]));
  };
  (function () {
    var j = 3441398,
      q = 3441398;
    cW.LC = [
      {
        name: "Light Grey",
        "--base": 14737632,
        "--bg-panel": 11579568,
        "--bg-canvas": 11579568,
        "--bg-input": 16777215,
        "--bg-bbtn": 15921906,
        "--bg-bbtnOver": 16777215,
        "--brdrLgt": 0.5,
        "--brdrDrk": 0.4,
        "--alphaDark": 0.12,
        "--text-color": 3749943,
        "--gs-invert": 0.22,
        "--brdr": 11579568,
        "--sh-clr": 16777215,
        "--absc": 1,
        "--abs255": 255,
        "--accent": q,
      },
      {
        name: "Dark Grey",
        "--base": 4671303,
        "--bg-panel": 2434341,
        "--bg-canvas": 2434341,
        "--bg-input": 2434341,
        "--bg-bbtn": 6118749,
        "--bg-bbtnOver": 6974058,
        "--brdrLgt": 0.15,
        "--brdrDrk": 0.6,
        "--alphaDark": 0.25,
        "--text-color": 14013909,
        "--gs-invert": 0.78,
        "--brdr": 2434341,
        "--sh-clr": 0,
        "--absc": 0,
        "--abs255": 0,
        "--accent": j,
      },
      {
        name: "Blue",
        "--base": 4212048,
        "--bg-panel": 2435637,
        "--bg-canvas": 2435637,
        "--bg-input": 2435637,
        "--bg-bbtn": 6316138,
        "--bg-bbtnOver": 6974074,
        "--brdrLgt": 0.15,
        "--brdrDrk": 0.6,
        "--alphaDark": 0.25,
        "--text-color": 15790330,
        "--gs-invert": 0.88,
        "--brdr": 2435637,
        "--sh-clr": 0,
        "--absc": 0,
        "--abs255": 0,
        "--accent": j,
      },
      {
        name: "Dark Blue",
        "--base": 2237745,
        "--bg-panel": 1513761,
        "--bg-canvas": 1513761,
        "--bg-input": 1513761,
        "--bg-bbtn": 3554128,
        "--bg-bbtnOver": 3158085,
        "--brdrLgt": 0.15,
        "--brdrDrk": 0.6,
        "--alphaDark": 0.25,
        "--text-color": 12303291,
        "--gs-invert": 0.8,
        "--brdr": 1513761,
        "--sh-clr": 0,
        "--absc": 0,
        "--abs255": 0,
        "--accent": j,
      },
      {
        name: "Purple",
        "--base": 4931153,
        "--bg-panel": 3287605,
        "--bg-canvas": 2434341,
        "--bg-input": 3287605,
        "--bg-bbtn": 6840430,
        "--bg-bbtnOver": 7694970,
        "--brdrLgt": 0.15,
        "--brdrDrk": 0.6,
        "--alphaDark": 0.25,
        "--text-color": 15790330,
        "--gs-invert": 0.88,
        "--brdr": 3287605,
        "--sh-clr": 0,
        "--absc": 0,
        "--abs255": 0,
        "--accent": j,
      },
      {
        name: "Black",
        "--base": 3487029,
        "--bg-panel": 1710618,
        "--bg-canvas": 1710618,
        "--bg-input": 1710618,
        "--bg-bbtn": 5263440,
        "--bg-bbtnOver": 5921370,
        "--brdrLgt": 0.15,
        "--brdrDrk": 0.6,
        "--alphaDark": 0.25,
        "--text-color": 13421772,
        "--gs-invert": 0.7,
        "--brdr": 1710618,
        "--sh-clr": 0,
        "--absc": 0,
        "--abs255": 0,
        "--accent": j,
      },
      {
        name: "White",
        "--base": 16250871,
        "--bg-panel": 14737632,
        "--bg-canvas": 14737632,
        "--bg-input": 16777215,
        "--bg-bbtn": 14737632,
        "--bg-bbtnOver": 14079702,
        "--brdrLgt": 0.2,
        "--brdrDrk": 0.2,
        "--alphaDark": 0.065,
        "--text-color": 3355443,
        "--gs-invert": 0.18,
        "--brdr": 14737632,
        "--sh-clr": 16777215,
        "--absc": 1,
        "--abs255": 255,
        "--accent": q,
      },
    ];
  })();
  function a$() {
    this.hB = {};
    this.CL = {};
  }
  a$.prototype.aCY = function (j) {
    var q = this.hB[j];
    if (q == null) return !1;
    return q.length > 0;
  };
  a$.prototype.addEventListener = function (j, q) {
    this.Q(j, q, null);
  };
  a$.prototype.Q = function (j, q, m) {
    if (this.hB[j] == null) {
      this.hB[j] = [];
      this.CL[j] = [];
    }
    this.hB[j].push(q);
    this.CL[j].push(m);
  };
  a$.prototype.removeEventListener = function (j, q) {
    var m = this.hB[j];
    if (m == null) return;
    var n = m.indexOf(q);
    if (n < 0) return;
    var G = this.CL[j];
    m.splice(n, 1);
    G.splice(n, 1);
  };
  a$.prototype.k = function (j) {
    j.currentTarget = this;
    if (j.target == null) j.target = this;
    var q = this.hB[j.e];
    if (q == null) return;
    var m = this.CL[j.e];
    for (var y = 0; y < q.length; y++) {
      if (m[y] == null) q[y](j);
      else q[y].call(m[y], j);
    }
  };
  var fd = function (j, q) {
      if (!q) q = !1;
      this.e = j;
      this.target = null;
      this.currentTarget = null;
      this.bubbles = q;
      this.l = null;
      this.XE = !1;
    },
    _ = {
      E: { w: "0", c: "1", NI: "1.5", n: "2", bg: "3", age: "4" },
      Y: {
        ja: "10",
        wQ: "11",
        q4: "12",
        zr: "13",
        t5: "14",
        aFL: "14.1",
        mw: "15",
        z1: "16",
        Ks: "17",
        KC: "18",
        ON: "19",
        ayA: "19.5",
        Ys: "20",
        axr: "20.1",
        aDA: "20.5",
        a1T: "20.6",
        rE: "21",
        sp: "22",
        YV: "23",
        UN: "24",
        s0: "25",
        xk: "26",
        ED: "27",
        S3: "28",
        aEw: "28.5",
        aJV: "29",
        px: "30",
        UK: "31",
        xQ: "32",
        Vt: "33",
        vv: "34",
        fh: "35",
        aIe: "35.5",
        p8: "37",
        aF6: "38",
        gu: "39",
        dO: "40",
        D4: "41",
        a8: "41.5",
        XJ: "42",
        Gg: "43",
        aCh: "43.5",
        BV: "44",
        aoP: "45",
        $e: "46",
        g3: "47",
        b9: "48",
        k0: "49",
        axH: "50",
        VU: "51",
        ND: "52",
        as5: "53",
      },
    };
  function kV() {
    a$.call(this);
    this.parent = null;
    this._ = null;
    this.GM = 0;
    this.uu = 0;
    this.aIq = !1;
  }
  kV.prototype = new a$();
  kV.prototype.ajP = function (j) {
    var aF = this;
    while (aF != null) {
      if (aF == j) return !0;
      aF = aF.parent;
    }
    return !1;
  };
  kV.prototype.yv = function () {
    var j = this._;
    return j.offsetWidth + j.clientLeft;
  };
  kV.prototype.aDa = function () {
    var j = this._;
    return j.offsetHeight + j.clientTop;
  };
  kV.prototype.update = function (j) {};
  kV.prototype.k = function (j) {
    a$.prototype.k.call(this, j);
    if (j.bubbles && this.parent != null) this.parent.k(j);
  };
  kV.prototype.T = function () {};
  kV.prototype.X3 = function (j, q) {};
  kV.prototype.Ub = function (j) {
    J._g(this._, "disabled");
  };
  kV.prototype.hC = function (j) {
    J.XZ(this._, "disabled");
  };
  kV.prototype.yl = function (j) {
    if (j) this.hC();
    else this.Ub();
  };
  kV.prototype.pM = function () {
    this.aIq = !0;
  };
  kV.prototype._r = function () {
    var j = this.xn,
      q = this.aIq,
      m = this._5;
    if (j) {
      j = g$.get(this.xn);
      if (!q) j += ":";
      m.textContent = j;
      if (q) {
        m.style.display = "block";
        m.style.lineHeight = "1.6em";
        m.style.marginLeft = "3px";
        J.XZ(m, "flabel");
      }
    }
    if (q) {
      if (this.BW) this.BW.style.fontSize = "1.15em";
    }
  };
  function ln(j) {
    kV.call(this);
    this.mZ = [];
    this.abl = !1;
    this.a7W = 0;
    this.JD = { x: 0, y: 0, qT: !1 };
    this.KR = j;
    this.arB = this.Q7.bind(this);
    this.Me = this.dU.bind(this);
    this.JV = this.IB.bind(this);
    J.PD(j, this.arB);
    J.dJ(j, this.Me);
    j.addEventListener("wheel", this.c6.bind(this), !1);
    j.addEventListener("contextmenu", this.ara.bind(this), !1);
    var q = this.aoQ.bind(this);
    j.addEventListener("gesturestart", q, !1);
    j.addEventListener("gesturechange", q, !1);
    j.addEventListener("gestureend", q, !1);
    J.r$(j);
  }
  ln.prototype = new kV();
  ln.prototype.aoQ = function (j) {
    if (j.type == "gesturestart") this.w8 = j.scale;
    if (j.type == "gesturechange") {
      var q = new fd("mouse", !0);
      q.action = "scroll";
      q.mI = !0;
      this.Wj(j, q);
      var m = (this.w8 - j.scale) / this.w8;
      q.rH = new ea(0, 100 * m);
      this.w8 = j.scale;
      this.k(q);
    }
  };
  ln.prototype.C4 = function (j) {
    var q = -1,
      m = this.mZ;
    for (var y = 0; y < m.length; y++) if (m[y].pointerId == j.pointerId) q = y;
    return q;
  };
  ln._q = function (j) {
    var q = j.pointerType,
      m = window.__kb;
    return q == "touch" && m.M(gn.auP);
  };
  ln.awn = function (j) {
    var q = j.button != null && j.button != 0 ? (j.which == 2 ? "i" : "r") : "";
    if (gn.u0() && j.ctrlKey) q = "r";
    return q;
  };
  ln.prototype.Q7 = function (j) {
    if (ln._q(j)) return;
    var q = this.C4(j);
    if (q != -1) this.mZ[q] = j;
    else this.mZ.push(j);
    if (this.mZ.length == 1) {
      this.a7W = Date.now();
      var m = ln.awn(j) + "down",
        n = new fd("mouse", !0);
      n.action = m;
      this.Wj(j, n);
      this.k(n);
      J.BJ(this.KR, this.Me);
      J.dJ(window, this.Me);
      J.sP(window, this.JV);
    }
    if (this.mZ.length == 2) {
      if (Date.now() - this.a7W < 100) {
        var n = new fd("mouse", !0);
        n.action = "cancellast";
        this.Wj(j, n);
        this.k(n);
      }
      this.abl = !0;
    }
    if (this.mZ.length == 2) this.aCH("multidown");
  };
  ln.prototype.dU = function (j) {
    if (ln._q(j)) return;
    var q = this.C4(j);
    if (q != -1) this.mZ[q] = j;
    if (this.mZ.length > 1) {
      this.aCH("multimove");
    }
    if (this.abl) return;
    if (this.mZ.length == 1 && q == -1) return;
    var m = new fd("mouse", !0);
    m.action = "move";
    this.Wj(j, m);
    this.k(m);
  };
  ln.prototype.IB = function (j) {
    if (ln._q(j)) return;
    var q = this.mZ;
    q = this.mZ = [];
    if (q.length == 0) {
      var m = ln.awn(j) + "up",
        n = new fd("mouse", !0);
      n.action = m;
      this.Wj(j, n);
      this.k(n);
      J.BJ(window, this.Me);
      J.mW(window, this.JV);
      J.dJ(this.KR, this.Me);
      this.abl = !1;
    }
  };
  ln.prototype.c6 = function (j) {
    j.preventDefault();
    if (j.deltaX == 0 && j.deltaY == 0) return;
    var q = new fd("mouse", !0);
    q.action = "scroll";
    q.mI = j.ctrlKey;
    this.Wj(j, q);
    this.k(q);
  };
  ln.prototype.ara = function (j) {
    J.iO(j);
    if (J.aJk(j)) {
      var q = new fd("mouse", !0);
      this.Wj(j, q);
      q.action = "rdown";
      this.k(q);
      q.action = "rup";
      this.k(q);
    }
  };
  ln.prototype.aCH = function (j) {
    var q = this.mZ,
      m = J.IC(),
      n = [];
    for (var y = 0; y < q.length; y++) {
      var G = (n[y] = J.QR(q[y], this.KR));
      G.x *= m;
      G.y *= m;
    }
    var W = new fd("mouse", !0);
    W.action = j;
    W.rC = n;
    if (q.length == 2) this.k(W);
  };
  ln.prototype.Wj = function (j, q, m) {
    var n = this.mZ.length != 0;
    if (q.action != "up") {
      var G = J.IC();
      if (m == null) m = J.QR(j, this.KR);
      this.JD = q.tZ = { x: G * m.x, y: G * m.y, qT: n };
      var W = J.QR(j, document.body);
      q.tZ.uA = W.x;
      q.tZ.Ql = W.y;
    } else this.JD = q.tZ = { x: this.JD.x, y: this.JD.y, qT: n };
    q.tZ.vV = 0.5;
    if (j.pressure != null) q.tZ.vV = j.pressure;
    if (j.pointerType == "mouse") q.tZ.vV *= 2;
    q.tZ.a2_ = j.pointerType;
    if (j.deltaX != null) {
      var k = j.deltaX;
      if (j.deltaMode == 0 && Math.abs(k % 100) < 1e-9) k /= 100;
      var T = j.deltaMode == 0 ? 1 : 40;
      q.rH = new ea(k * T, j.deltaY * T);
    }
  };
  function cG(j, q, m) {
    kV.call(this);
    this.AG = null;
    this.akY = this.IB.bind(this);
    this.aCD = this.kw.bind(this);
    this.ab9 = this.a2C.bind(this);
    this.aqD = this.aAz.bind(this);
    this.Sb = [];
    this.VW = [];
    this.Gm = [];
    this.anH = [];
    this.apm = m;
    this._ = J.m("div", "contextpanel " + (m ? "cp_dark" : "cp_light"));
    this._.addEventListener("contextmenu", J.k$, !1);
    this.H6 = null;
    this.a9x = 0;
    this.Wv = j;
    this.avO = q;
    this.vw = [];
    for (var y = 0; y < j.length; y++) {
      var n = J.m("div", "enab");
      this.VW.push(n);
      this._.appendChild(n);
      var G = j[y]._9;
      if (G) {
        if (G.startsWith("#")) {
          var W = J.m("span");
          J.F(
            W,
            "display:inline-block; width:16px; height:16px; vertical-align:middle; margin:0 5px 0 -3px; border-radius:4px; background-color:" +
              G
          );
          n.appendChild(W);
        } else n.innerHTML = J.CP(j[y]._9, null, "thumb");
      } else {
        var k = J.m("span", "check");
        this.anH.push(k);
        n.appendChild(k);
      }
      var T = J.m("span", "label");
      T.textContent = g$.get(j[y].name);
      n.appendChild(T);
      this.Gm.push(T);
      if (j[y].q7) this._.appendChild(J.m("hr"));
      if (j[y].RP || j[y].sub) {
        var b = (n.U2 = J.m("span", "right"));
        n.appendChild(b);
        if (j[y].RP) b.textContent = gn.uj(j[y].RP);
        else if (j[y].sub)
          b.innerHTML =
            "<svg height='10px' width='6px'  fill='none' stroke-width='1.35' stroke='currentColor'><path d='M 1 1 L 5 5 L 1 9'/></svg>";
      }
      n.addEventListener(m ? "mouseup" : "click", this.akY, !1);
      n.addEventListener("mouseover", this.aCD, !0);
      n.addEventListener("mouseout", this.ab9, !0);
      if (j[y].sub) {
        var c = new cG(j[y].sub, q ? q[y].sub : null);
        c.parent = this;
        this.vw.push(c);
        c.Q("select", this.a56, this);
      } else this.vw.push(null);
    }
  }
  cG.prototype = new kV();
  cG.prototype.avV = function (j) {
    J.dI(this._);
    for (var y = 0; y < j.length; y++)
      if (j[y] != 0 && j[y] != null) {
        this._.appendChild(this.VW[y]);
        if (j[y] != 1 && this.vw[y]) this.vw[y].avV(j[y]);
      }
  };
  cG.prototype.T = function () {
    var j = this.Wv;
    for (var y = 0; y < j.length; y++) {
      if (j[y].title) this.VW[y].title = g$.get(j[y].title);
      this.Gm[y].textContent = g$.get(j[y].name) + (j[y].QU ? "..." : "");
    }
    for (var y = 0; y < this.vw.length; y++) if (this.vw[y]) this.vw[y].T();
  };
  cG.prototype.update = function (j, q) {
    if (!this.apm) {
      this._.setAttribute(
        "class",
        "contextpanel cp_" +
          (window.locStor.getItem("__glm") == "1" ? "trsp" : "light")
      );
    }
    var m = this.Wv,
      n = window.innerWidth < 450 ? "none" : "inline";
    for (var y = 0; y < m.length; y++) {
      var G = this.VW[y];
      if (G.U2 && !this.vw[y]) G.U2.style.display = n;
      if (m[y].f) {
        var W = m[y].f(j, q, y);
        if (W.f != null) this.VW[y].className = W.f ? "enab" : "disab";
        if (W.sO != null) this.Gm[y].textContent = W.sO;
        if (W.Wr != null)
          this.anH[y].innerHTML = W.Wr
            ? "<svg height='10px' width='10px'  fill='none' stroke-width='1.35' stroke='currentColor'><path d='M 1 5 L 4 8 L 9 2'/></svg>"
            : "";
        if (W.d != null) this.avO[y] = W.d;
      }
    }
    for (var y = 0; y < this.vw.length; y++)
      if (this.vw[y]) this.vw[y].update(j, q);
  };
  cG.prototype.r9 = function () {
    return this.Sb;
  };
  cG.prototype.IB = function (j) {
    if (j.button != 0) return;
    var y = this.VW.indexOf(j.currentTarget);
    if (this.vw[y]) {
      this.a9x = y;
      this.aAz();
    } else {
      if (this.avO) {
        var q = this.avO[y],
          m = new fd(q.p, !0);
        m.l = q.l;
        m.data = q.d;
        this.k(m);
      }
      this.AG = null;
      this.Sb = [y];
      this.k(new fd("select", !1));
      var m = new fd(_.E.c, !0);
      m.data = { R: _.Y.zr };
      this.k(m);
    }
  };
  cG.prototype.kw = function (j) {
    var y = this.VW.indexOf(j.currentTarget);
    this.JT();
    this.a9x = y;
    this.H6 = setTimeout(this.aqD, 300);
  };
  cG.prototype.a2C = function (j) {
    this.JT();
  };
  cG.prototype.JT = function () {
    if (this.H6) {
      clearTimeout(this.H6);
      this.H6 = null;
    }
  };
  cG.prototype.aAz = function () {
    this.JT();
    var y = this.a9x;
    if (this.AG) this.AG.a1S();
    if (this.vw[y] == null) return;
    this.AG = this.vw[y];
    var j = this.VW[y].getBoundingClientRect(),
      q = new fd(_.E.c, !0);
    q.data = { R: _.Y.wQ, Tf: this.vw[y], x: j.left + j.width + 2, y: j.top };
    this.k(q);
  };
  cG.prototype.a1S = function () {
    for (var y = 0; y < this.vw.length; y++) if (this.vw[y]) this.vw[y].a1S();
    var j = new fd(_.E.c, !0);
    j.data = { R: _.Y.q4, Tf: this };
    this.k(j);
  };
  cG.prototype.a56 = function (j) {
    var y = this.vw.indexOf(j.target);
    this.Sb = [y].concat(j.target.r9());
    this.k(new fd("select", !1));
  };
  function av(j, q, m) {
    kV.call(this);
    this._ = J.m("span", "fitem cbox");
    if (q == null) q = !0;
    if (m == null) m = "flabel";
    var n = "cb" + J.mK();
    this.BW = J.m("input", "");
    this.BW.setAttribute("type", "checkbox");
    this.BW.setAttribute("id", n);
    this._.appendChild(this.BW);
    this.xn = j;
    this.hv = J.m("label", m);
    if (q) this.hv.setAttribute("for", n);
    this._.appendChild(this.hv);
    this.T();
    this.BW.addEventListener("change", this.FY.bind(this), !1);
  }
  av.prototype = new kV();
  av.prototype.a9d = function () {
    return this.xn;
  };
  av.prototype.hk = function (j) {
    this.hv.textContent = j;
  };
  av.prototype.T = function () {
    var j = this.xn;
    if (typeof j == "string" && j.startsWith("<")) this.hv.innerHTML = j;
    else this.hv.textContent = g$.get(j);
  };
  av.prototype.mb = function () {
    this.BW.checked = !0;
  };
  av.prototype.uy = function () {
    this.BW.checked = !1;
  };
  av.prototype.sM = function () {
    return this.BW.checked;
  };
  av.prototype.q = function (j) {
    this.BW.checked = j;
  };
  av.prototype.V = av.prototype.sM;
  av.prototype.FY = function (j) {
    this.k(new fd(_.E.n, !1));
  };
  function aD(j, q) {
    kV.call(this);
    this.xn = j;
    this._ = J.m("span", "labelitem fitem" + (q ? " spread" : ""));
    this.T();
  }
  aD.prototype = new kV();
  aD.prototype.q = function (j) {
    this._.textContent = j;
  };
  aD.prototype.V = function () {
    return this._.textContent;
  };
  aD.prototype.hC = function () {
    this._.removeAttribute("disabled");
  };
  aD.prototype.Ub = function () {
    this._.setAttribute("disabled", "");
  };
  aD.prototype.hk = function (j) {
    this._.textContent = j;
  };
  aD.prototype.T = function () {
    this._.textContent = g$.get(this.xn);
  };
  aD.prototype.a9d = function () {
    return this.xn;
  };
  function kv(j, q, m, n, G) {
    kV.call(this);
    this.No = !1;
    this._ = J.m("button", "fitem" + (q ? " spread" : "") + (n ? " bbtn" : ""));
    this.xn = j;
    this.mT = m;
    this.T();
    var W = G && window.PointerEvent ? "pointerup" : "click";
    this._.addEventListener(W, this.OV.bind(this), !1);
  }
  kv.prototype = new kV();
  kv.prototype.T = function () {
    var j = this._,
      q = this.xn,
      m = this.mT;
    if (
      typeof q == "string" &&
      (q.startsWith("<img") || q.startsWith("<svg") || q.startsWith("<span"))
    ) {
      if (!this.No) {
        j.innerHTML = q;
        J.F(j, "padding:2px");
        this.No = !0;
      }
    } else j.textContent = g$.get(q);
    if (m) {
      j.setAttribute("title", g$.get(m));
    }
  };
  kv.prototype.aBB = function (j) {
    this._.setAttribute("title", j);
  };
  kv.prototype.OV = function (j) {
    this.k(new fd("click", !1));
  };
  kv.prototype.mb = function () {
    J._g(this._, "bactive");
  };
  kv.prototype.uy = function () {
    J.XZ(this._, "bactive");
  };
  kv.prototype.hk = function (j, q) {
    if (j && j != this.xn) {
      this.xn = j;
      this.No = !1;
    }
    if (q) this.mT = q;
    this.T();
  };
  kv.prototype.q = function (j) {
    if (j) this.mb();
    else this.uy();
  };
  kv.prototype.sM = function () {
    return this._.getAttribute("class").indexOf("bactive") != -1;
  };
  kv.prototype.V = function () {
    return this.sM();
  };
  function bJ(j, q, m, n, G) {
    kV.call(this);
    var W = J.mK();
    this._ = J.m("span", "fitem tinput");
    if (m == -1) this._.style.width = "100%";
    if (j) {
      this.xn = j;
      this._5 = J.m("label", "flabel");
      this._.appendChild(this._5);
      this._5.setAttribute("for", W);
      this.T();
    }
    if (G) {
      this.BW = J.m("span");
    } else if (n == null) {
      this.BW = J.m("input");
      this.BW.setAttribute("type", "text");
    } else this.BW = J.m("textarea", "scrollable");
    this.BW.setAttribute("id", W);
    if (m)
      J.F(
        this.BW,
        "width:" +
          (m == -1 ? "100%;" : m + "em;") +
          (G ? " display:inline-block; margin-left:6px;" : "")
      );
    if (n) this.BW.setAttribute("rows", n);
    this._.appendChild(this.BW);
    if (q) {
      this.g1 = J.m("span");
      this.g1.textContent = q;
      this.g1.style.marginLeft = "2px";
      this._.appendChild(this.g1);
    }
    J.l3(this.BW);
    gn.dT(this.BW);
    this.BW.addEventListener("change", this.FY.bind(this), !1);
    this.BW.addEventListener("input", this.awh.bind(this), !1);
    if (n == null) this.BW.addEventListener("keyup", this.Cc.bind(this), !1);
  }
  bJ.prototype = new kV();
  bJ.prototype.T = function () {
    this._r();
  };
  bJ.prototype.Cc = function (j) {
    var q = gn.Uw(j.code, gn.k9),
      m = gn.Uw(j.code, gn.FP);
    if (m || q) this.BW.blur();
  };
  bJ.prototype.hk = function (j) {
    this._5.textContent = j;
  };
  bJ.prototype.q = function (j) {
    var q = this.BW,
      m = j == null ? "" : j,
      n = q.tagName == "SPAN";
    if (n) {
      q.textContent = " " + m;
      if (this.g1) q.appendChild(this.g1);
    } else q.value = m;
  };
  bJ.prototype.agX = function (j) {
    this.g1.textContent = j;
  };
  bJ.prototype.V = function () {
    return this.BW.value;
  };
  bJ.prototype.j$ = function () {
    this.BW.select();
    this.BW.focus();
  };
  bJ.prototype.FY = function (j) {
    this.k(new fd(_.E.n, !1));
  };
  bJ.prototype.awh = function (j) {
    this.k(new fd("input", !1));
  };
  function cd(j, q, m, n, G, W, k, T, b) {
    kV.call(this);
    if (G == null) G = 0;
    this._ = J.m("span", "fitem");
    var c = J.mK();
    this.xn = j;
    this.mT = T;
    this.Av = 0;
    this.aAm = b;
    this.C7 = q;
    this.VX = m;
    this.aIL = null;
    if (n instanceof Array) {
      this.aIL = n;
      n = n[0];
    }
    this.oC = n;
    this.ew = G;
    this.ajz = W;
    this.M_ = k;
    this.GJ = 0;
    this._5 = J.m("label", "flabel");
    this._5.setAttribute("for", c);
    J.F(this._5, "cursor:col-resize;");
    this.t9 = J.m("input", "slider");
    this.t9.setAttribute("type", "range");
    if (k) {
      this.t9.min = 0;
      this.t9.max = 400;
    } else {
      this.t9.min = q;
      this.t9.max = m;
      if (G != 0) this.t9.step = (m - q) / 200;
    }
    this.BW = J.m("input");
    this.BW.setAttribute("type", "text");
    this.BW.setAttribute("id", c);
    this.BW.setAttribute("inputmode", "numeric");
    this.g1 = J.m("span");
    this.g1.textContent = n;
    J.l3(this.BW);
    gn.dT(this.BW);
    this.aEU = !1;
    this.BW.addEventListener(
      "mousedown",
      function (a) {
        var y = a.target;
        this.aEU = y.selectionStart != y.selectionEnd;
      }.bind(this),
      !1
    );
    this.BW.addEventListener(
      "mouseup",
      function (a) {
        var y = a.target;
        if (!this.aEU) y.select();
      }.bind(this),
      !1
    );
    this.BW.addEventListener("change", this.FY.bind(this), !1);
    this.BW.addEventListener("keydown", this.Iz.bind(this), !1);
    this.BW.addEventListener("keyup", this.Cc.bind(this), !1);
    this.BW.addEventListener("wheel", this.c6.bind(this), !1);
    this.t9.addEventListener("input", this.FY.bind(this), !1);
    if (b) this.t9.addEventListener("change", this.FY.bind(this), !1);
    this.t9.addEventListener("click", this.a3k.bind(this), !1);
    this.aGJ = this.aG3.bind(this);
    this.adr = this.aso.bind(this);
    this.arT = this.a3m.bind(this);
    this.yC = 0;
    this.Ac = 0;
    this.aw$ = !1;
    J.PD(this._5, this.aGJ);
    J.r$(this._5);
  }
  cd.prototype = new kV();
  cd.prototype.nK = function (j) {
    this.ew = j;
  };
  cd.prototype.hk = function (j) {
    this._5.style.display = j ? "inherit" : "none";
    if (j) this._5.textContent = g$.get(j);
  };
  cd.prototype.T = function () {
    var aF = this.xn,
      j = this.mT;
    if (aF) {
      if (typeof aF == "string" && aF.startsWith("<")) this._5.innerHTML = aF;
      else this._r();
    }
    if (j) {
      j = g$.get(j);
      if (aF) this._5.setAttribute("title", j);
      this.BW.setAttribute("title", j);
    }
  };
  cd.prototype.q = function (j, q) {
    var m = this.C7 == this.VX,
      G;
    if (!m && this.C7 >= 0) j = Math.max(this.C7, j);
    if (this.ew == 0) j = Math.round(j);
    var n = this.oC;
    this.Av = j;
    this.BW.value =
      parseFloat(this.ew != 0 ? j.toFixed(this.ew) : j) +
      (this.ajz && n
        ? (n.toLowerCase() == n.toUpperCase() ? "" : " ") + n
        : "");
    if (-this.C7 == this.VX)
      G = 200 + Math.sign(j) * 200 * Math.pow(Math.abs(j) / this.VX, 1 / 2.7);
    else G = 400 * Math.pow((j - this.C7) / (this.VX - this.C7), 1 / 2.7);
    this.t9.value = this.M_ ? G : j;
    if (q) this.tS();
  };
  cd.prototype.V = function () {
    var j = this.Av;
    if (isNaN(j)) j = 0;
    return j;
  };
  cd.prototype.NS = function () {
    return this.oC;
  };
  cd.prototype.FY = function (j) {
    var q = 0;
    if (j.currentTarget == this.BW) {
      var m = j.target.value,
        n = 0;
      if (m == "") q = 0;
      else if (this.oC) {
        q = parseFloat(m);
      } else {
        try {
          q = eval(m);
        } catch (j) {
          q = 1;
        }
      }
      if (isNaN(q)) q = 0;
      while (
        n < m.length &&
        (m.charAt(n) == "." || (48 <= m.charCodeAt(n) && m.charCodeAt(n) <= 57))
      )
        n++;
      var G = m.slice(n).trim();
      if (this.aIL && this.aIL.indexOf(G) != -1) this.oC = G;
    } else {
      if (Date.now() - this.GJ < 10) return;
      q = parseFloat(j.target.value);
      if (this.M_) {
        if (-this.C7 == this.VX)
          q =
            Math.sign(q - 200) *
            Math.pow(Math.abs(q - 200) / 200, 2.7) *
            this.VX;
        else q = this.C7 + Math.pow(q / 400, 2.7) * (this.VX - this.C7);
        q = this.atk(q);
      }
    }
    this.q(q);
    if (j.type == "input" && this.aAm) return;
    this.tS();
  };
  cd.prototype.tS = function () {
    this.k(new fd(_.E.n));
  };
  cd.prototype.atk = function (j) {
    if (this.VX - this.C7 > 50 && j > 10) j = Math.round(j);
    return j;
  };
  cd.prototype.Iz = function (j) {
    var q = 0;
    if (gn.Uw(j.code, gn.w0)) q = 1;
    if (gn.Uw(j.code, gn.K3)) q = -1;
    if (q != 0) this.aoF(q, j.shiftKey);
  };
  cd.prototype.Cc = function (j) {
    var q = gn.Uw(j.code, gn.k9),
      m = gn.Uw(j.code, gn.FP);
    if (q) this.q(this.V());
    if (m || q) this.BW.blur();
  };
  cd.prototype.c6 = function (j) {
    this.aoF(j.deltaY > 0 ? -1 : 1, j.shiftKey);
  };
  cd.prototype.aoF = function (j, q) {
    var m = this.V(),
      n = this.ew,
      G = j * (n == null || n == 0 || m > 5 ? 1 : 0.1);
    if (q) G *= 10;
    var W = m + G;
    if (!this.M_ && this.VX != this.C7) W = Math.min(this.VX, W);
    this.q(W);
    this.tS();
  };
  cd.prototype.a3k = function (j) {
    var q = Date.now() - this.GJ;
    this.GJ = Date.now();
    if (q > 200) return;
    var m = this.C7,
      n = this.VX,
      G = (m + n) / 2;
    if (m < 1 && n > 1 && n < 10) G = 1;
    else if (-m == n) G = 0;
    else if (m < 90 && n > 110) G = 100;
    else if (m < 0 && n > 0) G = 0;
    this.q(G);
    this.tS();
  };
  cd.prototype.aG3 = function (j) {
    J.dJ(document, this.adr);
    J.sP(document, this.arT);
    this.yC = J.QR(j, document.body).x;
    this.Ac = this.V();
  };
  cd.prototype.aso = function (j) {
    J.iO(j);
    var q = this.C7 == this.VX,
      m = J.QR(j, document.body).x,
      n = (m - this.yC) * (q ? 1 : (1 / 120) * (this.VX - this.C7)),
      G = this.Ac + n;
    if (q) G = Math.round(G);
    if (!q) {
      if (!0) {
        G = Math.max(this.C7, G);
        if (G == this.C7) {
          this.yC = m;
          this.Ac = this.C7;
        }
      }
      if (!this.M_) {
        G = Math.min(this.VX, G);
        if (G == this.VX) {
          this.yC = m;
          this.Ac = this.VX;
        }
      }
      G = this.atk(G);
    }
    this.aw$ = !0;
    this.q(G);
    if (!this.aAm) this.tS();
  };
  cd.prototype.a3m = function (j) {
    if (!this.aw$) this.BW.focus();
    this.aw$ = !1;
    if (this.aAm) this.tS();
    J.BJ(document, this.adr);
    J.mW(document, this.arT);
  };
  cd.prototype.j$ = function () {
    this.BW.select();
    this.BW.focus();
  };
  function k7(j, q, m, n, G, W, k, T, b, c) {
    cd.call(this, j, q, m, n, G, !0, W, b, c);
    J._g(this._, "rangedropinput");
    this._.appendChild(this._5);
    J.F(this.BW, "width:" + (T ? T : 3.3) + "em");
    this._.appendChild(this.BW);
    this.aBS = J.m("span", "rangecontFloat");
    this.aBS.appendChild(this.t9);
    this.a0X = J.m("button");
    this.a0X.textContent = "\u25BC";
    J.PD(this.a0X, this.abE.bind(this));
    if (k != !0) this._.appendChild(this.a0X);
    this.Tp = new kV();
    this.Tp._ = this.aBS;
  }
  k7.prototype = new cd();
  k7.prototype.abE = function (j) {
    if (J.JO(this.Tp._)) return;
    j.stopPropagation();
    var q = this._.getBoundingClientRect();
    J.F(this.t9, "width:" + q.width + "px;");
    var m = new fd(_.E.c, !0);
    m.data = { R: _.Y.wQ, Tf: this.Tp, x: q.left - 10, y: q.top + q.height };
    this.k(m);
  };
  function dV(j, q, m, n, G, W) {
    cd.call(this, j, q, m, n, G, !1, W);
    this._.appendChild(this._5);
    var k = J.m("span");
    this._.appendChild(k);
    k.appendChild(this.t9);
    this._.appendChild(this.BW);
    J.F(this.BW, "width:3.3em");
    if (this.oC) this._.appendChild(this.g1);
  }
  dV.prototype = new cd();
  function ho(j, q, m, n, G, W, k, T) {
    cd.call(this, j, q, m, n, G, !0, W, null, k);
    J._g(this._, "trangeinput");
    this._.appendChild(this._5);
    this._.appendChild(this.BW);
    var b = J.m("span");
    if (T != !0) this._.appendChild(b);
    b.appendChild(this.t9);
  }
  ho.prototype = new cd();
  function f1(j, q, m, n) {
    kV.call(this);
    if (!q) return;
    this.z_ = 0;
    this.xn = j;
    this.avT = n;
    this.Sf = null;
    this.us = m;
    this.auB = [];
    var G = "dd" + J.mK();
    this._ = J.m("span", "fitem ddmenu");
    if (j) {
      this._5 = J.m("label", "flabel");
      this._.appendChild(this._5);
      this._5.setAttribute("for", G);
    }
    this.BW = J.m("select");
    gn.dT(this.BW);
    this.BW.setAttribute("id", G);
    this._.appendChild(this.BW);
    this.BW.addEventListener("change", this.FY.bind(this), !1);
    function W(k) {
      var T = 0;
      if (gn.Uw(k.code, gn.w0)) T = 1;
      if (gn.Uw(k.code, gn.K3)) T = -1;
      if (T != 0) k.stopPropagation();
    }
    this.BW.addEventListener("keydown", W, !1);
    this.BW.addEventListener("keyup", W, !1);
    this.uE = [];
    this.xJ = null;
    this.ti(q, m);
    this.T();
  }
  f1.prototype = new kV();
  f1.prototype.hk = function (j) {
    this.xn = j;
    this.T();
  };
  f1.prototype.T = function () {
    this._r();
    if (this.xJ) this.ti(this.xJ, this.us);
    if (this.avT) this.BW.setAttribute("title", g$.get(this.avT));
    this.q(this.z_);
  };
  f1.prototype.V = function () {
    return this.z_;
  };
  f1.prototype.ti = function (j, q) {
    J.dI(this.BW);
    var m = [],
      n = 0;
    if (q) {
      m.push(q[0]);
      for (var y = 1; y < q.length; y++) m.push(m[y - 1] + q[y]);
    }
    this.xJ = j;
    this.Sf = [];
    this.us = q;
    for (var y = 0; y < j.length; y++) {
      var G = J.m("option");
      if (this.auB.indexOf(y) != -1) G.setAttribute("disabled", "");
      G.textContent = g$.get(j[y]);
      G.setAttribute("value", y);
      this.BW.appendChild(G);
      this.uE.push(G);
      this.Sf.push(y + n);
      if (m.indexOf(y + 1) != -1 && y != j.length - 1) {
        var W = J.m("option");
        W.setAttribute("disabled", "");
        W.textContent = "";
        this.BW.appendChild(W);
        n++;
      }
    }
  };
  f1.prototype.aGg = function (y) {
    var j = this.auB,
      q = j.indexOf(y);
    if (q == -1) j.push(y);
    this.T();
  };
  f1.prototype.aqR = function (y) {
    var j = this.auB,
      q = j.indexOf(y);
    if (q != -1) j.splice(q, 1);
    this.T();
  };
  f1.prototype.q = function (j) {
    this.z_ = j;
    this.BW.selectedIndex = this.Sf[j];
  };
  f1.prototype.FY = function (j) {
    this.z_ = this.Sf.indexOf(this.BW.selectedIndex);
    this.k(new fd(_.E.n, !1));
  };
  f1.prototype.j$ = function () {
    this.BW.focus();
  };
  function gA(j, q, m, n, G) {
    kV.call(this);
    if (!q) return;
    this.z_ = 0;
    this.at0 = n;
    this.ai0 = G;
    this._ = J.m("span", "fitem bbmenu");
    this._5 = J.m("label", "flabel");
    if (j) {
      this.xn = j;
      this._5.textContent = j + ":";
      this._.appendChild(this._5);
    }
    this.uE = [];
    this.sS = J.m("span");
    this._.appendChild(this.sS);
    this.xJ = null;
    this.ti(q, m);
    this.q(0);
  }
  gA.prototype = new kV();
  gA.prototype.hk = function (j) {
    this.xn = j;
    this.T();
  };
  gA.prototype.T = function () {
    var j = this._5.parentNode != null,
      q = this._;
    if (this.xn != null) {
      if (!j) {
        q.appendChild(this._5);
        q.appendChild(this.sS);
      }
      this._r();
    } else if (j) q.removeChild(this._5);
    for (var y = 0; y < this.uE.length; y++) this.uE[y].T();
  };
  gA.prototype.V = function () {
    return this.z_;
  };
  gA.prototype.ti = function (j, q) {
    J.dI(this.sS);
    this.uE = [];
    var m = this.V();
    this.xJ = j;
    for (var y = 0; y < j.length; y++) {
      var n = new kv(j[y], !1, q ? q[y] : null, this.at0);
      n.Q("click", this.FY, this);
      this.sS.appendChild(n._);
      this.uE.push(n);
    }
    this.T();
    this.q(m);
  };
  gA.prototype.q = function (j) {
    this.z_ = j;
    for (var y = 0; y < this.uE.length; y++) this.uE[y].uy();
    if (j != -1) this.uE[j].mb();
  };
  gA.prototype.FY = function (j) {
    var y = this.uE.indexOf(j.target);
    this.q(this.ai0 && y == this.z_ ? -1 : y);
    this.k(new fd(_.E.n, !1));
  };
  gA.zs = function (j, q, m) {
    if (q == null) q = 16;
    var n = gA.q3,
      G = n.getContext("2d"),
      W = q >>> 1;
    n.width = n.height = q;
    var k = [];
    for (var y = 0; y < j.length; y++) {
      if (j[y][0] == "-") k.push(j[y].slice(1));
      else if (j[y] == "checker" || j[y].startsWith("#")) {
        if (j[y] == "checker") {
          G.fillStyle = "white";
          G.fillRect(0, 0, q, q);
          G.fillStyle = "#bbbbbb";
          G.fillRect(W, 0, W, W);
          G.fillRect(0, W, W, W);
        } else if (j[y].startsWith("#")) {
          G.fillStyle = j[y];
          G.fillRect(0, 0, q, q);
        }
        k.push('<img src="' + n.toDataURL() + '" />');
      } else k.push(J.CP(j[y], null, m ? m : "autoscale"));
    }
    return k;
  };
  gA.q3 = J.m("canvas");
  function bl(j, q, m, n, G, W) {
    kV.call(this);
    this._ = J.m("span", "fitem mbox");
    this.aJe = m;
    this.az0 = G;
    var k = J.mK();
    if (j) {
      this.xn = j;
      this._5 = J.m("label", "flabel");
      this._5.setAttribute("for", k);
      this._.appendChild(this._5);
    }
    this.RM = q;
    this.$B = [];
    for (var y = 0; y < q.length; y++) {
      var T = m
        ? new kv(q[y], !1, n ? n[y] : null, !1, W)
        : new av(q[y], !0, "");
      if (y == 0) T._.setAttribute("id", k);
      T.Q(m ? "click" : _.E.n, this.FY, this);
      this.$B.push(T);
      this._.appendChild(T._);
    }
    this.T();
  }
  bl.prototype = new kV();
  bl.prototype.q = function (j) {
    for (var q = 0; q < this.RM.length; q++) this.$B[q].q(j[q]);
  };
  bl.prototype.V = function () {
    var j = [];
    for (var q = 0; q < this.RM.length; q++) j[q] = this.$B[q].V();
    return j;
  };
  bl.prototype.T = function () {
    if (this.xn) this._5.innerHTML = g$.get(this.xn) + ": ";
    var j = this.$B;
    for (var q = 0; q < j.length; q++) {
      j[q].T();
      if (q == j.length - 1) j[q]._.style.marginRight = "0px";
    }
  };
  bl.prototype.FY = function (j) {
    var y = this.$B.indexOf(j.currentTarget),
      q = this.$B[y];
    if (this.aJe) q.q(!q.V());
    if (this.az0) {
      var m = q.V();
      for (var y = 0; y < this.$B.length; y++) this.$B[y].q(!1);
      q.q(m);
    }
    this.k(new fd(_.E.n, !1));
  };
  bl.prototype.ti = function (j) {
    for (var y = 0; y < j.length; y++) this.$B[y].hk(j[y]);
  };
  function ap(j, q) {
    kV.call(this);
    this.Ha = [];
    this.J = [];
    this.a5z = j;
    this.jh = q;
    this.g4 = 0;
    this.mM = null;
    this.Aw = new ea(0, 0);
    if (q != null) {
      this.ta = new cG([{ name: [6, 37] }, { name: [5, 4] }]);
      this.ta.parent = this;
      this.ta.Q("select", this.WS, this);
    }
    this._ = J.m("div", "imageset scrollable");
    this._.addEventListener("contextmenu", J.k$, !1);
  }
  ap.prototype = new kV();
  ap.prototype.T = function () {
    if (this.ta) this.ta.T();
  };
  ap.prototype.WS = function (j) {
    var y = this.ta.r9()[0],
      q = new fd(_.E.c, !0),
      m = { R: _.Y.fh, rw: this.jh, Lv: this.J.slice(0) };
    if (y == 0) {
      var n = this.mM[1][this.J[0]],
        G = n.split("/");
      if (G.length == 2) {
        m.ars = G[0] + "/";
        n = G[1];
      }
      m.vt = "rnm";
      q.data = { R: _.Y.s0, kO: "namewindow", pv: n, N0: { p: _.E.c, d: m } };
    } else {
      q.data = m;
      m.vt = "del";
    }
    this.k(q);
  };
  ap.prototype.axL = function () {
    return this.g4;
  };
  ap.prototype.MI = function (j) {
    this.g4 = j;
    if (this.mM) this.ip();
  };
  ap.prototype.GW = function (j, q, m, n) {
    this.mM = [j, q, m, n];
    this.ip();
  };
  ap.prototype.ip = function () {
    var j = this.mM,
      q = this._,
      m = j[0],
      n = j[1],
      G = j[2],
      W = j[3];
    this.Ha = [];
    J.dI(q);
    var k = this.OV.bind(this),
      T = this.g4;
    if (T == 0) J._g(q, "imageset");
    else J.XZ(q, "imageset");
    var b = {};
    for (var y = 0; y < m.length; y++) {
      var c = m[y],
        a = null,
        f = null;
      if (c == null) {
        this.Ha.push(null);
        continue;
      }
      if (typeof c == "string") {
        a = J.m("img", "image");
        a.setAttribute("src", c);
      } else a = c;
      if (G) J.Mg(a, G, W);
      if (this.a5z) J._g(a, "gsicon");
      if (n) {
        var f = n[y],
          U = f.split("/");
        if (U.length == 2) {
          var Z = b[U[0]];
          f = U[1];
          if (Z == null) Z = b[U[0]] = [];
          Z.push(y);
        }
      }
      if (T == 0) {
      } else {
        var h = J.m("div", "listitem");
        h.appendChild(a);
        var u = J.m("span");
        u.textContent = f ? f : "Item " + (y + 1);
        J.F(u, "margin-left:4px;");
        h.appendChild(u);
        a = h;
      }
      if (f) a.setAttribute("title", f);
      a.addEventListener("mousedown", k, !1);
      this.Ha.push(a);
      q.appendChild(a);
    }
    if (Object.keys(b).length != 0) {
      J.dI(q);
      for (var i in b) {
        var Z = b[i],
          x = J.m("div", "listitem head");
        J.F(
          x,
          "clear:both; padding:4px 4px; height:16px; background-color:rgba(0,0,0,0.1);"
        );
        var X = J.m("div", "headL");
        x.appendChild(X);
        X.appendChild(J.m("div", "folder"));
        var u = J.m("span");
        u.textContent = i;
        X.appendChild(u);
        q.appendChild(x);
        for (var y = 0; y < Z.length; y++) q.appendChild(this.Ha[Z[y]]);
      }
    }
  };
  ap.prototype.OV = function (j) {
    if (this.jh == null) j.preventDefault();
    var q = this.Ha.indexOf(j.currentTarget),
      m = window.__kb,
      n = this.J,
      G = n.length;
    if (m.M(gn.X6)) {
      var W = Math.min(n[0], n[n.length - 1], q),
        k = Math.max(n[0], n[n.length - 1], q);
      n = [];
      for (var y = W; y <= k; y++) n.push(y);
    } else if (m.M(gn.A8)) {
      var T = n.indexOf(q);
      if (T == -1) n.push(q);
      else n.splice(T, 1);
    } else n = [q];
    n.sort(function (f, U) {
      return f - U;
    });
    if (j.button == 0 || G == 1) this.q(n);
    this.Aw = J.QR(j, j.currentTarget);
    if (j.button == 0) this.k(new fd(_.E.n));
    if (j.button == 2 && this.ta) {
      var b = this.ta;
      b.update(null);
      var c = J.QR(j, document.body),
        a = new fd(_.E.c, !0);
      a.data = { R: _.Y.wQ, Tf: b, x: c.x, y: c.y + 2 };
      this.k(a);
    }
  };
  ap.prototype.V = function () {
    return this.J.slice(0);
  };
  ap.prototype.aDF = function () {
    var j = this.Aw;
    return new ea(j.x, j.y);
  };
  ap.prototype.q = function (j) {
    this.J = j.slice(0);
    for (var y = 0; y < this.Ha.length; y++) {
      var q = this.Ha[y];
      if (q == null) continue;
      if (j.indexOf(y) != -1) J._g(q, "selected");
      else J.XZ(q, "selected");
    }
  };
  function ar(j, q) {
    kV.call(this);
    this.a5z = j;
    this.jh = q;
    this.g4 = 0;
    this.vk = null;
    this.QD = [];
    this.Xn = [];
    this.J = [];
    var m = fG.Zu[q],
      n = m[0].toUpperCase();
    this.ta = new cG([
      { name: ["VAR0 ." + n, [1, 0]] },
      { name: ["VAR0 ." + n, [1, 8]] },
      { name: [6, 37] },
      { name: [5, 4], q7: !0 },
      { name: "Tiles/List" },
      { name: [12, 87] },
      { name: [6, 20] },
    ]);
    this.ta.parent = this;
    this.ta.Q("select", this.WS, this);
    this._ = J.m("div", "imageset scrollable");
    this._.addEventListener("contextmenu", J.k$, !1);
    this.ay7 = this.OV.bind(this);
    this.azE = function (G) {
      G.dataTransfer.setData("text", this.QD.indexOf(G.currentTarget));
    }.bind(this);
    this.a6_ = this.ar$.bind(this);
  }
  ar.prototype = new kV();
  ar.prototype.a4D = function () {
    return this.ta;
  };
  ar.prototype.T = function () {
    this.ta.T();
  };
  ar.prototype.ar$ = function (j) {
    var q = parseInt(j.dataTransfer.getData("text")),
      m = this.QD.indexOf(j.currentTarget),
      n = this.J,
      c = !1;
    if (n.indexOf(q) == -1) n = [q];
    var G = this.Xn[m],
      W = G.join(",") + ",",
      k = ar.XP(n, this.Xn),
      T = k[1];
    for (var b in T) if (W.startsWith(b)) return;
    var a = ar.Dy(this.vk, G)[2],
      f = ar.getItem(this.vk, G);
    if (f[1] == null) {
      a = f[2];
      f = a[0];
      c = !0;
    }
    var U = ar.O6(this.vk, k[0]),
      Z = a.indexOf(f);
    for (var y = 0; y < U.length; y++) a.splice(Z + (c ? 0 : 1) + y, 0, U[y]);
    this.J = [];
    var h = ar.ay6(this.vk);
    for (var y = 0; y < U.length; y++) this.J.push(h.indexOf(U[y]));
    this.ip();
    this.tS();
  };
  ar.prototype.WS = function (j, q) {
    if (q == null) q = this.ta.r9()[0];
    var m = this.J,
      n = new fd(_.E.c, !0);
    if (q == 0) {
      n.data = { R: _.Y.z1 };
      this.k(n);
    }
    if (q == 1) {
      var G = ar.XP(m, this.Xn)[0],
        W = ar.O6(this.vk, G, !0),
        k = fG.Zu[this.jh],
        T = be.WD(W, k[2]);
      jc.save(T, k[1] + "." + k[0]);
    }
    if (q == 2) {
      n.data = {
        R: _.Y.s0,
        kO: "namewindow",
        pv: ar.getItem(this.vk, this.Xn[m[0]])[0],
        ml: this.ahm.bind(this),
      };
      this.k(n);
    }
    if (q == 3) {
      var G = ar.XP(m, this.Xn)[0],
        W = ar.O6(this.vk, G);
      this.J = [];
      this.ip();
      this.tS();
    }
    if (q == 4) {
      this.g4 = 1 - this.g4;
      this.ip();
    }
    if (q == 5) {
      this.k(new fd("define_new"));
    }
    if (q == 6) {
      this.afs(["New folder", null, [], !0]);
    }
  };
  ar.prototype.afs = function (j) {
    var q = this.vk,
      m = this.J,
      n = q.length - 1;
    if (m.length != 0) {
      var G = m[0],
        W = this.Xn[G],
        q = ar.Dy(this.vk, W)[2],
        k = ar.getItem(this.vk, W);
      n = q.indexOf(k);
      if (k[1] == null) {
        q = k[2];
        n = q.length - 1;
      }
    }
    q.splice(n + 1, 0, j);
    this.J = [ar.ay6(this.vk).indexOf(j)];
    this.ip();
    this.WS(null, 2);
    this.tS();
  };
  ar.prototype.ahm = function (j) {
    var q = ar.getItem(this.vk, this.Xn[this.J[0]]);
    q[0] = j;
    this.ip();
    this.tS();
  };
  ar.prototype.ti = function (j) {
    this.vk = j;
    this.ip();
  };
  ar.prototype.tS = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = { R: _.Y.fh, rw: this.jh, vt: "mdf" };
    this.k(q);
  };
  ar.prototype.ass = function (j, q, m) {
    for (var y = 0; y < j.length; y++) {
      var n = j[y],
        G = n[0],
        W,
        k = n[1] == null;
      m.push(y);
      if (k) {
        W = J.m("div", "listitem head");
        J.F(
          W,
          "clear:both; padding:4px 4px; height:16px; background-color:rgba(0,0,0,0.1);  margin:1.5px;"
        );
        var T = J.m("div", "headL");
        W.appendChild(T);
        T.appendChild(J.m("div", n[3] ? "open" : "closed"));
        T.appendChild(J.m("div", "folder"));
        var b = J.m("span");
        b.textContent = G;
        T.appendChild(b);
      } else {
        var c = n[2],
          a = fG.Zu[this.jh],
          f = Math.floor(a[5] * J.IC()),
          U = Math.floor(J.IC() * a[6]);
        if (c == null) c = n[2] = a[2].hj(n, f, U);
        W = J.m("img", "image");
        W.setAttribute("src", c);
        J.Mg(W, f, U);
        if (this.g4 == 1) {
          var Z = J.m("div", "listitem");
          Z.appendChild(W);
          Z.style.height = a[6] + "px";
          var b = J.m("span");
          b.textContent = G;
          J.F(b, "margin-left:4px;");
          Z.appendChild(b);
          W = Z;
        }
        W.setAttribute("title", G);
      }
      q.appendChild(W);
      if (this.J.indexOf(this.QD.length) != -1) J._g(W, "selected");
      this.QD.push(W);
      this.Xn.push(m.slice(0));
      W.addEventListener("mouseup", this.ay7, !1);
      W.setAttribute("draggable", "true");
      W.addEventListener("dragover", J.iO, !1);
      W.addEventListener("dragstart", this.azE, !1);
      W.addEventListener("drop", this.a6_, !1);
      if (k) {
        var h = J.m("div");
        h.style.marginLeft = "14px";
        if (n[3]) q.appendChild(h);
        this.ass(n[2], h, m);
      }
      m.pop();
    }
  };
  ar.prototype.ip = function () {
    var j = this.vk,
      q = this._;
    J.dI(q);
    this.QD = [];
    this.Xn = [];
    this.ass(j, q, []);
  };
  ar.prototype.OV = function (j) {
    var q = this.QD.indexOf(j.currentTarget),
      m = ar.getItem(this.vk, this.Xn[q]),
      n = m[1] == null,
      G = j.target.getAttribute("class"),
      W = this.J,
      k = W.length,
      T = W.indexOf(q);
    if (G == "open" || G == "closed") m[3] = !m[3];
    else if (j.button == 0 || T == -1) {
      var b = window.__kb;
      if (b.M(gn.X6)) {
        var c = Math.min(W[0], W[W.length - 1], q),
          a = Math.max(W[0], W[W.length - 1], q);
        W = [];
        for (var y = c; y <= a; y++) W.push(y);
      } else if (b.M(gn.A8)) {
        if (T == -1) W.push(q);
        else W.splice(T, 1);
      } else W = [q];
      W.sort(function (h, u) {
        return h - u;
      });
      this.J = W;
    }
    this.ip();
    if (j.button == 0 && !n && W.length == 1) this.k(new fd(_.E.n));
    if (j.button == 2) {
      var f = this.ta;
      f.update(null);
      var U = J.QR(j, document.body),
        Z = new fd(_.E.c, !0);
      Z.data = { R: _.Y.wQ, Tf: f, x: U.x, y: U.y + 2 };
      this.k(Z);
    }
  };
  ar.prototype.V = function () {
    return ar.getItem(this.vk, this.Xn[this.J[0]])[1];
  };
  ar.prototype.q = function (j) {
    this.afs(["New item", j]);
  };
  ar.getItem = function (j, q) {
    var m = ["", null, j];
    for (var y = 0; y < q.length; y++) m = m[2][q[y]];
    return m;
  };
  ar.Dy = function (j, q) {
    var m = ["", null, j];
    for (var y = 0; y < q.length - 1; y++) m = m[2][q[y]];
    return m;
  };
  ar.ay6 = function (j) {
    function q(n, G) {
      for (var y = 0; y < n.length; y++) {
        var W = n[y];
        G.push(W);
        if (W[1] == null) q(W[2], G);
      }
    }
    var m = [];
    q(j, m);
    return m;
  };
  ar.O6 = function (j, q, m) {
    var n = [];
    for (var G = q.length - 1; G >= 0; G--) {
      var W = q[G],
        k = W[W.length - 1],
        T = ar.Dy(j, W);
      n.unshift(T[2][k]);
      if (!m) T[2].splice(k, 1);
    }
    return n;
  };
  ar.XP = function (j, q) {
    var m = [],
      n = {};
    for (var y = 0; y < j.length; y++) {
      var G = q[j[y]],
        W = G.join(",") + ",",
        k = !1;
      for (var T in n) if (W.startsWith(T)) k = !0;
      if (!k) {
        n[W] = !0;
        m.push(G);
      }
    }
    return [m, n];
  };
  function f$(j, q, m, n, G, W, k) {
    kV.call(this);
    this._ = J.m("span", "fitem " + m);
    this.jh = W;
    this.dd = null;
    this.Dd = !0;
    this.fB = null;
    this.cx = new kV();
    this.cx._ = J.m("div", "floatcont");
    this.A2 = n;
    this.cx.parent = this;
    this.aGc = J.m("div");
    this.cx._.appendChild(this.aGc);
    this.jY = J.m("div");
    this.cx._.appendChild(this.jY);
    if (j) {
      this.xn = j;
      this.hv = J.m("label", "flabel");
      this._.appendChild(this.hv);
    }
    this.R = J.m("button", k ? "nopadding" : "");
    J.F(this.R, "position:relative;");
    var T = this.ig.bind(this),
      b = this.O0.bind(this);
    J.PD(this.R, q ? b : T);
    this._.appendChild(this.R);
    this.S_ = J.m("img", k ? "gsicon" : "");
    this.R.appendChild(this.S_);
    if (q) {
      var c = J.m("button");
      c.textContent = "\u25BC";
      J.PD(c, T);
      this._.appendChild(c);
    } else {
      var a = J.m("span");
      a.textContent = "\u25BC";
      J.F(a, "position:absolute;  bottom:2px;  right:4px;");
      this.R.appendChild(a);
    }
    var f = (this.arD = J.m("span"));
    this.jY.appendChild(f);
    J.F(f, "display:inline-block;  vertical-align:top;");
    this.Op = this.awe() ? new ar(k, W) : new ap(k, W);
    f.appendChild(this.Op._);
    this.Op.parent = this.cx;
    this.Op.Q(_.E.n, this.Q1, this);
    this.Op.Q("define_new", this.a4M, this);
    this.Op._.style.height = G + "px";
    this.KU = J.m("button");
    this.KU.textContent = "\u25BC";
    J.F(this.KU, "padding:3px");
    J.PD(this.KU, this.aCk.bind(this));
    this.jY.appendChild(this.KU);
    var U = this.EM(),
      Z = (this.aBF = W != fG.S0 && W != fG.lG ? W : null),
      h = (this.acC = W == null ? !1 : fG.Zu[W][4] != 0),
      u = W == null ? "" : fG.Zu[W][0].toUpperCase(),
      i = [];
    if (Z) i.push({ name: [12, 87] });
    i.push({ name: ["VAR0 / VAR1", [25, 3, 0], [25, 3, 1]], q7: !0 });
    i.push(
      { name: [[23, 6], "." + (u == "ICC" ? "icc .cube .look .3dl" : u)] },
      { name: ["VAR0 ." + u, [1, 8]] },
      { name: [6, 37] },
      { name: [5, 4], q7: U.length != 0 }
    );
    for (var y = 0; y < U.length; y++) i.push({ name: U[y].split("/").pop() });
    this.ahf = i;
  }
  f$.prototype = new kV();
  f$.prototype.awe = function () {
    var j = this.jh;
    return j == fG.Ns || j == fG.WX;
  };
  f$.prototype.a4M = function () {
    this.Op.q(this.fB);
  };
  f$.prototype.Q1 = function (j) {
    this.q(j.target.V());
    this.k(new fd(_.E.n));
  };
  f$.prototype.c2 = function () {
    if (!this.Dd) return;
    this.Op.ti(this.dd, this);
    this.Dd = !1;
  };
  f$.prototype.q = function (j) {
    this.fB = B.S(j);
    this.Py();
  };
  f$.prototype.V = function () {
    return B.S(this.fB);
  };
  f$.prototype.Py = function () {};
  f$.prototype.EM = function () {
    return [];
  };
  f$.prototype.O0 = function () {};
  f$.prototype.T = function () {
    this.Op.T();
    var j = this.xn;
    if (j) this.hv.textContent = g$.get(j) + ":";
  };
  f$.prototype.hk = function (j) {
    this.hv.textContent = j;
  };
  f$.prototype.j3 = function (j) {
    var q = this.jh,
      m = 0;
    if (q == fG.Hd) {
      m = this.dd ? this.dd.length : 0;
      j = j.slice(0);
    }
    this.dd = j;
    this.Dd = !0;
    if (J.JO(this.Op._) || q == fG.Ns) this.c2();
    if (q == fG.Hd && j.length - m == 1 && J.JO(this._)) {
      this.q(j[m]);
      this.Dd = !0;
      this.c2();
      this.Op.q([m]);
      this.k(new fd(_.E.n));
    }
  };
  f$.prototype.WS = function (j) {
    var q = j.target.r9()[0];
    if (this.aBF == null) q++;
    var m = new fd(_.E.c, !0);
    if (q == 0) {
      var n = this.lm();
      if (this.jh == fG.Hd && n[0].profile == null) return;
      m.data = { R: _.Y.fh, vt: "add", rw: this.aBF, Jb: n };
    } else if (q == 1) this.Op.MI(1 - this.Op.axL());
    else if (q <= 5) this.BT(q - 2);
    else {
      var G = this.EM();
      m.data = { R: _.Y.mw, rw: { url: "rsrc/" + G[q - 6] } };
    }
    if (m.data) this.k(m);
  };
  f$.prototype.BT = function (j) {
    var q = new fd(_.E.c, !0),
      m = this.Op.V(),
      n = { R: _.Y.fh, rw: this.jh, Lv: m };
    if (j > 1 && m.length == 0) {
      alert("No items selected");
      return;
    }
    if (j == 0) q.data = { R: _.Y.z1 };
    else if (j == 1)
      q.data = { R: _.Y.$e, ap2: this.jh, Lv: m.length == 0 ? null : m };
    else if (j == 2) {
      var G = this.Op.mM[1][m[0]],
        W = G.split("/");
      if (W.length == 2) {
        n.ars = W[0] + "/";
        G = W[1];
      }
      n.vt = "rnm";
      q.data = { R: _.Y.s0, kO: "namewindow", pv: G, N0: { p: _.E.c, d: n } };
    } else if (j == 3) {
      q.data = n;
      n.vt = "del";
    }
    this.k(q);
  };
  f$.prototype.lm = function () {
    return [this.V()];
  };
  f$.prototype.aCk = function (j) {
    var q;
    j.stopPropagation();
    if (this.awe()) q = this.Op.a4D();
    else {
      if (this.ta == null) {
        this.ta = new cG(this.ahf);
        this.ta.parent = this.cx;
        this.ta.Q("select", this.WS, this);
      }
      q = this.ta;
    }
    if (J.JO(q._)) return;
    q.T();
    q.update(null);
    var m = j.currentTarget.getBoundingClientRect(),
      n = new fd(_.E.c, !0);
    n.data = { R: _.Y.wQ, Tf: q, x: m.left, y: m.top + m.height };
    this.k(n);
  };
  f$.prototype.ig = function (j, q, m) {
    if (J.JO(this.cx._)) return;
    if (j) j.stopPropagation();
    this.c2();
    if (q == null) {
      var n = this.R.getBoundingClientRect(),
        q = n.left,
        m = n.top + n.height;
    }
    this.X3();
    var G = new fd(_.E.c, !0);
    G.data = { R: _.Y.wQ, Tf: this.cx, x: q, y: m, LR: !0 };
    this.k(G);
  };
  f$.prototype.X3 = function (j, q) {
    var j = Math.min(this.A2, window.innerWidth - 40);
    this.arD.style.width = j + "px";
    this.cx._.style.width = j + 20 + "px";
  };
  f$.prototype.aK$ = function (j, q) {
    this.ig(null, j, q);
  };
  function bu() {
    kV.call(this);
    this._ = J.m("div");
    this.Av = !1;
    this.QD = [
      new f1([12, 19, 1], [[13, 1, 7]].concat(eV.wc)),
      new kN([17, 1]),
      new kN([12, 46]),
    ];
    for (var y = 0; y < 3; y++) {
      var j = this.QD[y];
      this._.appendChild(j._);
      j.Q(_.E.n, this.v2, this);
    }
    this.T();
  }
  bu.prototype = new kV();
  bu.prototype.T = function () {
    for (var y = 0; y < 3; y++) this.QD[y].T();
  };
  bu.prototype.V = function () {
    return this.Av.slice(0);
  };
  bu.prototype.q = function (j) {
    this.Av = j.slice(0);
    var q = this.QD,
      m = q[0].V();
    q[1].q(j.slice(m * 8, m * 8 + 4), m);
    q[2].q(j.slice(m * 8 + 4, m * 8 + 8), m);
  };
  bu.prototype.v2 = function (j) {
    var q = this.QD,
      m = q.indexOf(j.currentTarget);
    if (m == 0) this.q(this.Av);
    else {
      var n = q[0].V() * 8 + (m == 1 ? 0 : 4),
        G = q[m].V();
      for (var y = 0; y < 4; y++) this.Av[n + y] = G[y];
      this.k(new fd(_.E.n, !1));
    }
  };
  function kN(j) {
    kV.call(this);
    this._ = J.m("div");
    this.Bl = J.m("canvas");
    this.pa = j;
    this.Av = [0, 20, 200, 255];
    this.oB = 0;
    this.W3 = -1;
    this.akg = [];
    for (var y = 0; y < 5; y++) {
      var q = J.m("span");
      J.F(
        q,
        "display:inline-block;width:" + (y == 0 ? 8 : y == 2 ? 7 : 2) + "em"
      );
      this.akg.push(q);
      this._.appendChild(q);
    }
    this.hd = this.Q7.bind(this);
    this.dn = this.dU.bind(this);
    this.$g = this.IB.bind(this);
    J.r$(this.Bl);
    J.PD(this.Bl, this.hd);
    this._.appendChild(this.Bl);
    this.ip();
  }
  kN.prototype = new kV();
  kN.prototype.T = function () {
    this.ip();
  };
  kN.prototype.q = function (j, q) {
    this.Av = j;
    this.oB = q;
    this.ip();
  };
  kN.prototype.V = function () {
    return this.Av.slice(0);
  };
  kN.prototype.Q7 = function (j) {
    var q = this.Av,
      m = J.QR(j, this.Bl),
      n = m.x - 8,
      G = -1,
      W = 1e9;
    for (var y = 0; y < 4; y++) {
      var k = n - q[y],
        T = Math.abs(k);
      if (
        T < 8 &&
        T < W &&
        (((y & 1) == 0 && k < 0) || ((y & 1) == 1 && k > 0))
      ) {
        W = k;
        G = y;
      }
    }
    if (G == -1) return;
    this.W3 = G;
    this.alH = window.__kb.M(gn.O4) || q[(G >>> 1) * 2] != q[(G >>> 1) * 2 + 1];
    J.dJ(window, this.dn);
    J.sP(window, this.$g);
  };
  kN.prototype.dU = function (j) {
    var q = this.Av,
      m = this.W3,
      n = (m >>> 1) * 2,
      G = n + 1,
      W = J.QR(j, this.Bl),
      k = Math.round(Math.max(0, Math.min(255, W.x - 8)));
    q[m] = k;
    if (this.alH && q[n] >= q[G]) this.alH = !1;
    if (!this.alH) q[n] = q[G] = k;
    this.ip();
    this.k(new fd(_.E.n, !1));
  };
  kN.prototype.IB = function (j) {
    J.BJ(window, this.dn);
    J.mW(window, this.$g);
  };
  kN.prototype.ip = function () {
    var j = this.Bl;
    J.Q0(j, 255 + 16, 16);
    var q = j.getContext("2d"),
      m = j.width,
      n = j.height,
      G = Math.round(255 * J.IC()),
      W = Math.round(8 * J.IC());
    q.translate(W, 0);
    var k = q.createLinearGradient(0, 0, G, 0);
    k.addColorStop(0, "black");
    k.addColorStop(1, "#" + ["ffffff", "ff0000", "00ff00", "0000ff"][this.oB]);
    q.fillStyle = k;
    q.fillRect(0, 0, G, W);
    var T = this.akg,
      b = g$.get(this.pa) + ":";
    T[0].textContent = b;
    for (var y = 0; y < 4; y++) {
      var c = this.Av[y];
      T[1 + y].textContent = c;
      var a = Math.round(c * J.IC());
      q.beginPath();
      q.moveTo(a, W);
      q.lineTo(a, W + W);
      q.lineTo(a + ((y & 1) == 0 ? -1 : 1) * W, W + W);
      q.closePath();
      q.fillStyle = y < 2 ? "#666666" : "#cccccc";
      q.fill();
      q.strokeStyle = "black";
      q.stroke();
    }
  };
  function iI(j, q, m) {
    kV.call(this);
    if (m == null) m = !1;
    this.K = [0, 0, 1];
    this.az$ = q;
    this.ama = m;
    this.J1 = 0;
    var n = "ai" + J.mK();
    this._ = J.m("span", "fitem angleinput");
    if (j) {
      this.hv = J.m("label", "flabel");
      this.xn = j;
      this._.appendChild(this.hv);
      this.hv.setAttribute("for", n);
    }
    this.SG = m ? 44 : 20;
    this.Bl = J.m("canvas", "gsicon");
    this.lB = this.Bl.getContext("2d");
    J.r$(this.Bl);
    J.Q0(this.Bl, this.SG * 2 + 1, this.SG * 2 + 1);
    this.lB.scale(J.IC(), J.IC());
    this._.appendChild(this.Bl);
    J.PD(this.Bl, this.TG.bind(this));
    this.hW = this.pf.bind(this);
    this.aH = this.iu.bind(this);
    var G = this.FY.bind(this),
      W = J.m("div");
    J.F(W, "display:inline-block;  vertical-align:middle;");
    if (!m) this._.appendChild(W);
    this.aD = [];
    for (var y = 0; y < 2; y++) {
      var k = J.m("input");
      this.aD.push(k);
      k.setAttribute("type", "text");
      J.l3(k);
      if (y == 0) k.setAttribute("id", n);
      k.addEventListener("change", G, !1);
      var T = J.m("span");
      T.textContent = "\xB0";
      if (y == 0 || q) {
        W.appendChild(k);
        W.appendChild(T);
        J.Ft(W);
      }
    }
    this.q(this.K);
  }
  iI.prototype = new kV();
  iI.prototype.T = function () {
    if (this.xn) this.hv.textContent = g$.get(this.xn) + ":";
  };
  iI.prototype.hk = function (j) {
    this.hv.textContent = j;
  };
  iI.prototype.V = function () {
    return this.K.slice(0);
  };
  iI.prototype.q = function (j, q) {
    var m = this.K;
    j = j.slice(0);
    if (j[0] == null) j[0] = m[0];
    if (j[1] == null) j[1] = m[1];
    if (j[2] == null) j[2] = m[2];
    this.K = j;
    var n = j[0],
      G = j[1],
      W = j[2],
      k = this.az$,
      T = this.ama,
      b = this.SG * 0.85;
    if (!k) G = 0;
    this.aD[0].value = n;
    this.aD[1].value = G;
    var c = this.lB;
    c.clearRect(0, 0, 100, 100);
    n = (Math.PI * n) / 180;
    G = (b * (90 - G)) / 90;
    var a = this.SG + 0.5;
    c.save();
    c.translate(a, a);
    c.rotate(-n);
    c.strokeStyle = "rgba(0,0,0,0.5)";
    c.beginPath();
    c.ellipse(0, 0, b, b * W, 0, 0, 2 * Math.PI);
    if (T) {
      c.moveTo(0, -b * W);
      c.lineTo(0, b * W);
      c.moveTo(-G, 0);
    } else c.moveTo(0, 0);
    c.lineTo(G, 0);
    c.stroke();
    var f = this.SG * 0.15;
    c.fillStyle = "black";
    c.beginPath();
    if (T) {
      c.arc(0, -b * W, f * 0.66, 0, 2 * Math.PI);
      c.arc(0, b * W, f * 0.66, 0, 2 * Math.PI);
    }
    if (k) {
      c.arc(G, 0, f * 0.4, 0, 2 * Math.PI);
    } else {
      c.moveTo(a - f, -f * 0.66);
      c.lineTo(a, 0);
      c.lineTo(a - f, f * 0.66);
    }
    c.fill();
    c.restore();
    if (q) this.FY();
  };
  iI.prototype.FY = function (j) {
    var q = parseInt(this.aD[0].value);
    if (isNaN(q)) q = 0;
    var m = parseInt(this.aD[1].value);
    if (isNaN(m)) m = 0;
    q = q % 360;
    m = m % 360;
    this.q([q, m]);
    this.k(new fd(_.E.n, !1));
  };
  iI.prototype.TG = function (j) {
    J.dJ(window, this.hW);
    J.sP(window, this.aH);
    var q = J.QR(j, this.Bl),
      a = 0,
      f = 1e9;
    q.x -= this.SG;
    q.y -= this.SG;
    var m = this.K,
      n = (m[0] * Math.PI) / 180,
      G = (90 - m[1]) / 90,
      W = m[2],
      k = this.SG * 0.85,
      T = Math.sin(-n),
      b = Math.cos(-n),
      c = [new ea(b * k, T * k)];
    if (this.ama)
      c.push(new ea(-T * k * W, b * k * W), new ea(T * k * W, -b * k * W));
    for (var y = 0; y < c.length; y++) {
      var U = ea.gw(q, c[y]);
      if (U < f) {
        f = U;
        a = y;
      }
    }
    this.J1 = a;
    if (a == 0) this.pf(j);
  };
  iI.prototype.pf = function (j) {
    var q = J.QR(j, this.Bl),
      m = this.J1,
      n = [],
      G = q.x - this.SG,
      W = q.y - this.SG,
      k = this.SG * 0.85;
    if (m == 0) {
      var T = (180 * Math.atan2(-W, G)) / Math.PI,
        b = 90 - 90 * Math.min(1, Math.sqrt(G * G + W * W) / k);
      if (j.shiftKey) T = Math.round(T / 15) * 15;
      n = [Math.round(T), Math.round(b)];
    } else
      n = [
        null,
        null,
        Math.max(0.01, Math.min(1, Math.sqrt(G * G + W * W) / k)),
      ];
    this.q(n);
    this.k(new fd(_.E.n, !1));
  };
  iI.prototype.iu = function (j) {
    this.k(new fd(_.E.n, !1));
    J.BJ(window, this.hW);
    J.mW(window, this.aH);
  };
  function cg(j, q) {
    kV.call(this);
    this.Av = 0;
    this.Qu = q;
    this._ = J.m("span", "fitem angleinput");
    if (j) {
      this.hv = J.m("label", "flabel");
      this.xn = j;
      this._.appendChild(this.hv);
    }
    this.Bl = J.m("canvas", "gsicon");
    this.lB = this.Bl.getContext("2d");
    J.Q0(this.Bl, q, q);
    this._.appendChild(this.Bl);
    J.r$(this.Bl);
    J.PD(this.Bl, this.TG.bind(this));
    this.hW = this.pf.bind(this);
    this.aH = this.iu.bind(this);
    this.q(0);
  }
  cg.prototype = new kV();
  cg.prototype.T = function () {
    if (this.xn) this.hv.textContent = g$.get(this.xn) + ":";
  };
  cg.prototype.hk = function (j) {
    this.hv.textContent = j;
  };
  cg.prototype.V = function () {
    return this.Av;
  };
  cg.prototype.a75 = function (j) {
    var q = this.Av,
      m = Math.floor(q / 3),
      n = q - m * 3;
    n = Math.max(0, Math.min(2, n + j.x));
    m = Math.max(0, Math.min(2, m + j.y));
    this.q(m * 3 + n);
  };
  cg.prototype.q = function (j) {
    this.Av = j;
    var q = this.Bl.width,
      m = Math.floor(j / 3),
      n = j - 3 * m,
      G = ((n + 0.5) * q) / 3,
      W = ((m + 0.5) * q) / 3,
      k = this.lB,
      T = [
        0.5,
        Math.round(q / 3) + 0.5,
        Math.round((2 * q) / 3) + 0.5,
        q - 0.5,
      ];
    k.clearRect(0, 0, q, q);
    var b = this.Qu < 30;
    k.setLineDash([]);
    k.strokeStyle = b ? "rgba(0,0,0,0.5)" : "#000000";
    k.beginPath();
    for (var y = 0; y < 4; y++) {
      var c = T[y];
      k.moveTo(c, 0);
      k.lineTo(c, q);
      k.moveTo(0, c);
      k.lineTo(q, c);
    }
    k.stroke();
    if (j == 9) return;
    if (!b) {
      k.setLineDash([1, 2]);
      var a = q * 0.53,
        f = Math.max(0, Math.min(q - a, G - a / 2)),
        U = Math.max(0, Math.min(q - a, W - a / 2));
      k.strokeRect(
        Math.round(f) + 0.5,
        Math.round(U) + 0.5,
        Math.round(a),
        Math.round(a)
      );
    }
    k.fillStyle = "#000000";
    k.beginPath();
    k.arc(G, W, q / 8, 0, Math.PI * 2);
    k.fill();
  };
  cg.prototype.TG = function (j) {
    J.dJ(document.body, this.hW);
    J.sP(document.body, this.aH);
    this.pf(j);
  };
  cg.prototype.pf = function (j) {
    var q = J.QR(j, this.Bl),
      m = Math.max(0, Math.min(2, Math.floor(q.x / (this.Qu / 3)))),
      n = Math.max(0, Math.min(2, Math.floor(q.y / (this.Qu / 3))));
    this.q(n * 3 + m);
  };
  cg.prototype.iu = function (j) {
    this.k(new fd(_.E.n, !1));
    J.BJ(document.body, this.hW);
    J.mW(document.body, this.aH);
  };
  function j9(aF) {
    kV.call(this);
    this._ = J.m("span", "fitem cswatch");
    this.a3r = 0;
    this.e1 = [];
    this.JA = [];
    var j = this.aed.bind(this);
    for (var y = 0; y < aF; y++) {
      this.e1.push(0);
      var q = J.m("span", "colorsample");
      q.addEventListener("click", j, !1);
      this.JA.push(q);
      this._.appendChild(q);
    }
    var m = [
        16711680, 65280, 255, 65535, 16711935, 16776960, 0, 8421504, 16777215,
      ],
      n = Math.min(aF, m.length);
    for (var y = 0; y < n; y++) this.e1[y] = m[y];
    this.ll();
  }
  j9.prototype = new kV();
  j9.prototype.aed = function (j) {
    this.a3r = this.JA.indexOf(j.currentTarget);
    this.k(new fd(_.E.n));
  };
  j9.prototype.V = function () {
    return this.e1[this.a3r];
  };
  j9.prototype.q = function (j) {
    var q = this.e1,
      m = q.indexOf(j);
    if (m != -1) q.splice(m, 1);
    else q.pop();
    q.unshift(j);
    this.ll();
  };
  j9.prototype.ll = function () {
    for (var y = 0; y < this.e1.length; y++) {
      J.F(this.JA[y], "background-color:#" + B.bw(this.e1[y]));
    }
  };
  function g1(j) {
    kV.call(this);
    this.eB = { o: 0, i: 0, X: 0 };
    this.EU = j;
    this._ = J.m("span", "fitem colorsample bbtn");
    this._.addEventListener("click", this.Jc.bind(this), !1);
  }
  g1.prototype = new kV();
  g1.prototype.T = function () {};
  g1.prototype.Jc = function (j) {
    var q = this.eB;
    this.k(new fd("click"));
    var m = new fd(_.E.c, !0);
    m.data = {
      R: _.Y.s0,
      kO: "colorpicker",
      Fx: B.yH(q),
      cy: this.xW.bind(this),
      kX: this.EU,
    };
    this.k(m);
  };
  g1.prototype.xW = function (j) {
    this.kK(j);
    this.k(new fd(_.E.n));
  };
  g1.prototype.ej = function () {
    this.Jc(null);
  };
  g1.prototype.we = function () {
    var j = this.eB;
    return (j.o << 16) | (j.i << 8) | j.X;
  };
  g1.prototype.V = function () {
    return B.MV.Ia(this.eB);
  };
  g1.prototype.kK = function (j) {
    this.eB = B.b4(j);
    this.aq9();
  };
  g1.prototype.q = function (j) {
    this.eB = B.MV.xH(j);
    this.aq9();
  };
  g1.prototype.aq9 = function () {
    var j = this.eB,
      q = j.o,
      m = j.i,
      n = j.X,
      G = (q << 16) | (m << 8) | n;
    J.F(this._, "background-color:#" + B.bw(G));
  };
  function g8() {
    kV.call(this);
    this.wG = !1;
    this.TY = 20;
    this.aDd = 10;
    this.Ho = 0;
    this.wG = !1;
    this.afM = { o: 255, i: 0, X: 0 };
    this.a3i = { o: 0, i: 0, X: 0 };
    this.a = null;
    this.MH = null;
    this.$c = [
      [0, 0, 0],
      [
        0,
        [
          [0, [1, 1, 1], 1, 0.5],
          [1, [0, 0, 0], 1, 0.5],
        ],
        [0, 0, 0, 1, 1, 0, 0],
        [1, 0, 0, 1, 0, 0],
      ],
      [],
    ];
    this._ = J.m("canvas");
    this.ip();
    J.r$(this._);
    J.PD(this._, this.hd.bind(this));
  }
  g8.prototype = new kV();
  g8.prototype.anv = function (j) {
    if (this.wG == j) return;
    this.wG = j;
    this.ip();
  };
  g8.prototype.T = function () {};
  g8.prototype.aa8 = function (j, q) {
    function m(n) {
      return { o: (n >> 16) & 255, i: (n >> 8) & 255, X: n & 255 };
    }
    if (j != null) this.afM = m(j);
    if (q != null) this.a3i = m(q);
    this.ip();
  };
  g8.prototype.afK = function (j, q) {
    this.a = j;
    this.MH = q;
    this.ip();
  };
  g8.prototype.hd = function (j) {
    var q = J.QR(j, this._),
      m = q.x * J.IC(),
      n = q.y * J.IC(),
      G = this.TY,
      W = this.aDd,
      k = 0;
    if (n > G) {
      k = 4 + Math.floor((3 * m) / G);
    } else if (m < W && n < W) {
      k = 0;
    } else if (m > G - W && n > G - W) {
      k = 1;
    } else if (m < W) {
      k = 2;
    } else {
      k = 3;
    }
    this.ej(k);
  };
  g8.prototype.ej = function (j) {
    var q = this.a,
      m = new fd(_.E.c, !0);
    if (j > 1) {
      if (ei == 0) m.data = { R: _.Y.fh, rw: fG.Ru, _G: j };
      else {
        var n = B.S(q.TB);
        if (j == 2) {
          var G = n.Nu;
          n.Nu = n.dZ;
          n.dZ = G;
        }
        if (j == 3) {
          n.dZ = [1, 1, 1];
          n.Nu = [0, 0, 0];
        }
        if (j >= 4) {
          var W = this.$c[j - 4];
          if (this.Ho == 0) n.dZ = W;
          else n.Nu = W;
        }
        m.data = { R: _.Y.fh, rw: fG.f7, K: n };
      }
    } else {
      var k = this.xW.bind(this),
        T = this.Ho;
      this.Ho = j;
      if (ei == 0) {
        var b = j == 0 ? this.afM : this.a3i;
        m.data = { R: _.Y.s0, kO: "colorpicker", Fx: B.yH(b), cy: k };
      } else {
        if (T != j) {
          this.ip();
          return;
        }
        var c = j == 0 ? q.TB.dZ : q.TB.Nu;
        if (c == null || c.length == 0) c = [0, 0, 0];
        g8.at6(c, this, k);
        return;
      }
    }
    this.k(m);
  };
  g8.prototype.xW = function (j) {
    var q = new fd(_.E.c, !0),
      m = this.Ho,
      n = this.a;
    if (ei == 0) q.data = { R: _.Y.fh, rw: fG.Ru, _G: m, K: j };
    else {
      var G = j;
      if (typeof j == "number") {
        G = B.b4(j, 1);
        G = [G.o, G.i, G.X];
      }
      var W = B.S(n.TB);
      if (m == 0) W.dZ = G;
      else W.Nu = G;
      q.data = { R: _.Y.fh, rw: fG.f7, K: W };
    }
    this.k(q);
  };
  g8.prototype.ip = function () {
    var j = this._,
      q = j.getContext("2d"),
      m = J.IC(),
      m = J.IC(),
      n = (this.TY = Math.floor(34 * m)),
      G = Math.floor((n - 2) / 3),
      W = "#aaaaaa",
      k = 0.62;
    j.width = n;
    j.height = n + ei * (G + 9);
    J.Ku(j);
    j.style.cursor = "pointer";
    var n = (this.TY = j.width),
      T = (this.aDd = Math.round(n * k));
    function b($, H) {
      var C = $.o,
        l = $.i,
        v = $.X;
      if (H) C = l = v = Math.round(B.he(C, l, v));
      var K = (C << 16) | (l << 8) | v;
      return "#" + B.bw(K);
    }
    function c(q, U, $, H, C, l) {
      q.beginPath();
      if (H >= l * 2 && C >= l * 2) {
        q.moveTo(U + l, $);
        q.lineTo(U + H - l, $);
        q.quadraticCurveTo(U + H, $, U + H, $ + l);
        q.lineTo(U + H, $ + C - l);
        q.quadraticCurveTo(U + H, $ + C, U + H - l, $ + C);
        q.lineTo(U + l, $ + C);
        q.quadraticCurveTo(U, $ + C, U, $ + C - l);
        q.lineTo(U, $ + l);
        q.quadraticCurveTo(U, $, U + l, $);
      }
      q.closePath();
    }
    function a(U, $, T, H, C) {
      q.strokeStyle = C ? C : "black";
      q.fillStyle = H;
      c(q, U + 0.5, $ + 0.5, T - 1, T - 1, T * 0.2);
      q.fill();
      q.stroke();
    }
    var f = this.a;
    if (f) {
      q.beginPath();
      var U = n - T,
        Z = Math.floor(T * 0.28),
        h = T - 2 * Z;
      q.lineWidth = 1;
      q.strokeStyle = "white";
      if (this.Ho == 0) g8.HL(q, f.TB.Nu, this.MH, T, T, U, U, !0);
      g8.HL(q, f.TB.dZ, this.MH, T, T, 0, 0);
      if (this.Ho == 1) g8.HL(q, f.TB.Nu, this.MH, T, T, U, U, !0);
      for (var y = 0; y < 3; y++) {
        q.beginPath();
        g8.HL(q, this.$c[y], this.MH, G, G, y * (G + 1), n + 9, !1);
      }
    } else {
      a(n - T, n - T, T, b(this.a3i, this.wG));
      a(0, 0, T, b(this.afM, this.wG));
    }
    var u = n - T,
      i = Math.round(u * k);
    a(n - i, u - i, i, ei == 0 ? "white" : "black", W);
    a(n - u, 0, i, ei == 0 ? "black" : "white", W);
    q.save();
    q.fillStyle = W;
    q.translate(0, n);
    q.rotate(-Math.PI / 2);
    u = n - T;
    var x = Math.round(u * 0.28),
      X = Math.round(u * 0.25);
    for (var y = 0; y < 2; y++) {
      q.fillRect(x, x, u - x, 1);
      q.beginPath();
      q.moveTo(u - X, x + 0.5 - X);
      q.lineTo(u, x + 0.5);
      q.lineTo(u - X, x + 0.5 + X);
      q.closePath();
      q.fill();
      q.transform(0, 1, 1, 0, 0, 0);
    }
    q.restore();
  };
  g8.at6 = function (j, q, m) {
    var n = new fd(_.E.c, !0);
    if (j.length == 3)
      n.data = {
        R: _.Y.s0,
        kO: "colorpicker",
        Fx: B.yH({ o: j[0] * 255, i: j[1] * 255, X: j[2] * 255 }),
        cy: m,
      };
    else n.data = { R: _.Y.s0, kO: "vgradienteditor", K: j, cy: m };
    q.k(n);
  };
  g8.HL = function (j, q, m, n, G, W, k, T) {
    function b(u, i) {
      return CSS.WG({ o: u[0] * 255, i: u[1] * 255, X: u[2] * 255 }, i);
    }
    if (q == null) {
      j.fillStyle = "#888888";
      j.clearRect(W, k, n, G);
      j.font = Math.round(G * 0.6 * (T ? 0.5 : 1)) + "px sans-serif";
      j.fillStyle = "white";
      if (T) {
        j.fillText("?", W + n * 0.05, k + G * 0.3);
        j.fillText("?", W + n * 0.8, k + G * 0.3);
        j.fillText("?", W + n * 0.05, k + G * 0.9);
        j.fillText("?", W + n * 0.8, k + G * 0.9);
      } else j.fillText("?", n * 0.36, G * 0.7);
    } else if (q.length == 0) {
      j.fillStyle = "#ffffff";
      j.fillRect(W, k, n, G);
      j.strokeStyle = "#ff0000";
      j.lineWidth = 2;
      j.moveTo(W, k);
      j.lineTo(W + n, k + G);
      j.moveTo(W, k + G);
      j.lineTo(W + n, k);
      j.stroke();
    } else if (q.length == 3) {
      j.fillStyle = b(q);
      j.fillRect(W, k, n, G);
    } else if (q.length == 4) {
      var c = W + n / 2,
        a = k + G / 2,
        f =
          q[0] == 0
            ? j.createLinearGradient(W, k, W + n, k)
            : j.createRadialGradient(c, a, 0, c, a, n / 2);
      B.MV.Uz(f, q[1]);
      j.fillStyle = f;
      j.fillRect(W, k, n, G);
    } else if (q.length == 2 && m) {
      var U = m[q[0]];
      j.save();
      j.fillStyle = "white";
      j.fillRect(W, k, n, G);
      j.rect(W, k, n, G);
      j.scale(n / U.r, G / U.$);
      j.fillStyle = U.a3v;
      j.fill();
      j.restore();
    }
    j.lineWidth = 1;
    j.strokeStyle = "white";
    j.strokeRect(W + 0.5, k + 0.5, n - 1, G - 1);
    if (T) {
      var Z = Math.floor(n * 0.28),
        h = n - 2 * Z;
      j.clearRect(W + Z, W + Z, h, h);
      j.strokeRect(W + Z + 0.5, W + Z + 0.5, h - 1, h - 1);
    }
  };
  function lo() {
    kV.call(this);
    this._ = J.m("button", "fitem bbtn");
    this._.textContent = "\u25A6";
    this.i1 = [];
    this.ep = [];
    var j = J.m("span", "rangecontFloat padded");
    J.F(
      j,
      "position:absolute; width:205px; z-index:2;  padding-right:0px; padding-top:6px;  padding-right:6px;"
    );
    this.Hj = new f1("Palette", []);
    this.Zw = new ap();
    this.Zw.parent = this;
    this.Zw._.style.height = "100px";
    this.Nd = new bJ("RGBA", null, 9);
    this.aM3 = new g1();
    this.o5 = new kv([5, 3], null, null, !0);
    this.V9 = new kv([5, 4], null, null, !0);
    this.aib = new kv([1, 0], null, null, !0);
    this.uw = new kv([1, 2], null, null, !0);
    this.aCI = new kv([5, 8], !0, null, !0);
    var q = J.m("div", "form"),
      m = [
        this.Hj,
        this.Zw,
        this.Nd,
        this.o5,
        this.V9,
        this.aib,
        this.uw,
        this.aCI,
      ];
    for (var y = 0; y < m.length; y++) {
      var n = m[y];
      n.parent = this;
      n.Q(n instanceof kv ? "click" : _.E.n, this.tS, this);
      if (y <= 1) {
        j.appendChild(n._);
        j.appendChild(q);
      } else q.appendChild(n._);
    }
    var G = new kV();
    G._ = j;
    var W = this;
    this._.addEventListener("click", function (k) {
      var T = W._.getBoundingClientRect(),
        b = new fd(_.E.c, !0);
      b.data = { R: _.Y.wQ, Tf: G, x: T.left, y: T.top + 20 };
      W.k(b);
    });
    this.ll();
  }
  lo.prototype = new kV();
  lo.prototype.tS = function (j) {
    var q = j.target,
      m = this.Zw.V()[0];
    if (q == this.Hj) {
      var n = q.V();
      if (n == 0) return;
      else if (n < 5) this.i1 = i9.axl(n - 1);
      else this.i1 = B.S(this.ep[n - 5]);
    } else this.Hj.q(0);
    if (q == this.Zw) {
      var G = this.i1[m][1];
      this.Nd.q([G.o, G.i, G.X, G.Sd].map(Math.round).join(" "));
      this.aM3.kK(B.yH(G));
      return;
    }
    if (q == this.Nd) {
      var W = q.V().split(" ").map(parseFloat);
      this.i1[m][1] = { o: W[0], i: W[1], X: W[2], Sd: W[3] };
    }
    if (q == this.aM3) {
      var W = B.b4(q.we()),
        k = this.i1[m][1];
      k.o = W.o;
      k.i = W.i;
      k.X = W.X;
    }
    if (q == this.o5) this.i1.push(["", { o: 0, i: 0, X: 0, Sd: 255 }]);
    if (q == this.V9) {
      var T = this.Zw.V(),
        b = [];
      for (var y = 0; y < this.i1.length; y++)
        if (T.indexOf(y) == -1) b.push(this.i1[y]);
      this.i1 = b;
    }
    if (q == this.aib) {
      var c = new fd(_.E.c, !0);
      c.data = { R: _.Y.z1 };
      this.k(c);
    }
    if (q == this.uw) jc.save(l4.He([this.i1]), "table.act");
    if (q == this.aCI) {
      this.k(new fd(_.E.n, !1));
      return;
    }
    this.ll();
  };
  lo.prototype.V = function () {
    return B.S(this.i1);
  };
  lo.prototype.q = function (j) {
    j = this.i1 = B.S(j);
    this.ll();
  };
  lo.prototype.ll = function () {
    var j = [];
    for (var y = 0; y < this.ep.length; y++)
      j.push("Palette " + (y + 1) + " (" + this.ep[y].length + " colors)");
    var q = ["Custom"].concat(i9.a5m).concat(j),
      m = this.Hj.V();
    this.Hj.ti(q);
    this.Hj.q(Math.min(m, q.length - 1));
    var n = this.i1,
      G = [],
      W = Math.round(20 * J.IC()),
      k = W;
    n.sort(function (b, c) {
      b = b[1];
      c = c[1];
      if (b.Sd != c.Sd) return b.Sd - c.Sd;
      return B.Sn(b) - B.Sn(c);
    });
    for (var y = 0; y < n.length; y++) {
      var T = be.hj(n[y], W, k);
      G.push(T);
    }
    this.Zw.GW(G, null, W, k);
  };
  lo.prototype.yp = function (j, q) {
    this.ep = j.asB;
    if (q == fG.HN || q == fG.yr) this.ll();
  };
  function bo(j) {
    f$.call(this, j, !1, "brushbutton nopadding", 19 * 13, 10 * 13, fG.cS, !0);
    var q = this.aGc;
    J._g(q, "flexrow");
    var m = J.m("div");
    q.appendChild(m);
    var n = J.m("div");
    q.appendChild(n);
    J.F(n, "margin-left:8px");
    this.q$ = new iI(null, null, !0);
    this.q$.Q(_.E.n, this.RL, this);
    m.appendChild(this.q$._);
    this.An = new ho([12, 14, 0], 1, 1e3, " px", 0, !0);
    this.An.Q(_.E.n, this.RL, this);
    n.appendChild(this.An._);
    this.bK = new ho([12, 17], 0, 100, "%");
    this.bK.Q(_.E.n, this.RL, this);
    n.appendChild(this.bK._);
    this.mk = new bl(
      null,
      [
        '<img src="' + PIMG.prsO + '" class="autoscale gsicon" />',
        '<img src="' + PIMG.prsS + '" class="autoscale gsicon" />',
      ],
      !0,
      [
        [15, 9, 0],
        [15, 9, 1],
      ]
    );
    this.mk.Q(_.E.n, this.RL, this);
    n.appendChild(this.mk._);
  }
  bo.prototype = new f$();
  bo.prototype.EM = function () {
    var j = ["pencil", "trees"];
    for (var y = 0; y < j.length; y++) j[y] = "brushes/" + j[y] + ".abr";
    return j;
  };
  bo.prototype.q = function (j, q, m) {
    this.fB = B.S(j);
    var n = Math.floor(20 * J.IC()),
      G = Math.floor(36 * J.IC()),
      W = Math.floor(24 * J.IC()),
      k = e4.hj(j, q, m, n, W, G);
    this.S_.setAttribute("src", k);
    J.Mg(this.S_, G, W);
    var T = j.Brsh.v;
    this.An.q(T.Dmtr.v.val);
    if (T.Hrdn != null) {
      this.bK.hC();
      this.bK.q(T.Hrdn.v.val);
    } else this.bK.Ub();
    if (T.Angl != null) this.q$.q([T.Angl.v.val]);
    if (T.Rndn != null) this.q$.q([null, null, T.Rndn.v.val / 100]);
    var b = [!1, !1];
    if (j.opVr) b[0] = j.opVr.v.bVTy.v == 2;
    if (j.szVr) b[1] = j.szVr.v.bVTy.v == 2;
    this.mk.q(b);
  };
  bo.prototype.lm = function () {
    return { list: [{ t: "Objc", v: this.V() }], cd: [], cs: [] };
  };
  bo.prototype.V = function () {
    return this.fB;
  };
  bo.prototype.c2 = function () {
    if (!this.Dd) return;
    var j = [],
      q = [],
      m = this.dd,
      n = Math.floor(33 * J.IC()),
      G = Math.floor(40 * J.IC());
    for (var y = 0; y < m.list.length; y++) {
      var W = m.list[y].v,
        k = e4.hj(W, m.cd, m.cs, n, G);
      j.push(k);
      q.push(W.Nm.v);
    }
    this.Op.GW(j, q, n, G);
    this.Dd = !1;
  };
  bo.prototype.Q1 = function (j) {
    var q = this.dd;
    this.q(q.list[this.Op.V()[0]].v, q.cd, q.cs);
    this.k(new fd(_.E.n));
  };
  bo.prototype.T = function () {
    f$.prototype.T.call(this);
    this.q$.T();
    this.An.T();
    this.bK.T();
  };
  bo.prototype.RL = function (j) {
    var q = this.dd,
      m = this.fB,
      n = m.Brsh.v;
    n.Dmtr.v.val = this.An.V();
    if (n.Hrdn != null) n.Hrdn.v.val = this.bK.V();
    if (n.Angl != null) n.Angl.v.val = this.q$.V()[0];
    if (n.Rndn != null) n.Rndn.v.val = Math.round(this.q$.V()[2] * 100);
    if (j.target == this.mk) fc.aeR(m, this.mk.V());
    this.q(m, q.cd, q.cs);
    this.k(new fd(_.E.n));
  };
  function gR(j) {
    f$.call(this, j, !0, "contourbutton", 17 * 13, 10.5 * 13, fG.im);
  }
  gR.prototype = new f$();
  gR.prototype.Q1 = function (j) {
    this.q(this.dd[j.target.V()]);
    this.k(new fd(_.E.n));
  };
  gR.prototype.O0 = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = {
      R: _.Y.s0,
      kO: "contoureditor",
      yJ: this.fB,
      response: this.apV.bind(this),
    };
    this.k(q);
  };
  gR.prototype.apV = function (j) {
    this.q(j);
    this.k(new fd(_.E.n));
  };
  gR.prototype.c2 = function () {
    if (!this.Dd) return;
    var j = Math.floor(38 * J.IC()),
      q = Math.floor(38 * J.IC()),
      m = [],
      n = [],
      G = this.dd;
    for (var y = 0; y < G.length; y++) {
      n.push(G[y].Nm ? G[y].Nm.v : "");
      m.push(B.SD.hj(G[y].Crv.v, j, q));
    }
    this.Op.GW(m, n, j, q);
    this.Dd = !1;
  };
  gR.prototype.q = function (j) {
    this.fB = B.S(j);
    var q = this.fB.Crv.v;
    for (var y = 0; y < q.length; y++)
      if (q[y].v.Cnty == null) q[y].v.Cnty = { t: "bool", v: !0 };
    this.Py();
  };
  gR.prototype.Py = function () {
    var j = Math.floor(30 * J.IC()),
      q = Math.floor(30 * J.IC()),
      m = B.SD.hj(this.fB.Crv.v, j, q);
    this.S_.setAttribute("src", m);
    J.Mg(this.S_, j, q);
  };
  function i0(j) {
    kV.call(this);
    this.LQ = null;
    this.a = null;
    this.fg = null;
    this.zq = null;
    this.awO = [];
    this.aq4 = [];
    this._ = J.m("span", "fitem fillbutton");
    this.cx = new kV();
    this.cx._ = J.m("div", "floatcont form");
    J.F(this.cx._, "width: 21em;");
    this.cx.parent = this;
    this.k8 = j;
    this.hv = this.hv = J.m("label", "flabel");
    this._.appendChild(this.hv);
    this.Bl = J.m("canvas");
    this.lB = this.Bl.getContext("2d");
    this.a1I = null;
    this._.appendChild(this.Bl);
    J.PD(this.Bl, this.ig.bind(this));
    this.SR = new gA([12, 66], ["", "Color", "Grad", "Patt"]);
    this.cx._.appendChild(this.SR._);
    this.SR.Q(_.E.n, this.v2, this);
    this.cx._.appendChild(J.m("hr"));
    this.aFp = J.m("span");
    this.aoX = new aD(["VAR0:", [13, 0]]);
    this.d8 = new g1(!0);
    this.d8.parent = this.cx;
    this.d8.Q(_.E.n, this.v2, this);
    this.aAW = new j9(10);
    this.aAW.Q(_.E.n, this.v2, this);
    this.ri = J.m("div", "marged hiline");
    this.ri.appendChild(this.aoX._);
    this.ri.appendChild(this.d8._);
    J.Ft(this.ri);
    this.ri.appendChild(this.aAW._);
    this.qG = new a4("GrFl", !0);
    this.qG.parent = this.cx;
    this.qG.Q(_.E.n, this.v2, this);
    this.cc = J.m("div", "marged hiline");
    var q =
      "Grad Type Algn Angl Rvrs Scl gradientsInterpolationMethod Ofst".split(
        " "
      );
    for (var y = 0; y < q.length; y++) {
      var m = this.qG.Vc[q[y]]._;
      this.cc.appendChild(m);
    }
    this.pP = new a4("patternFill", !0);
    this.pP.parent = this.cx;
    this.pP.Q(_.E.n, this.v2, this);
    this.Eq = J.m("div", "marged hiline");
    var q = ["Ptrn", "Angl", "Scl", "Algn", "phase"];
    for (var y = 0; y < q.length; y++) {
      var m = this.pP.Vc[q[y]]._;
      this.Eq.appendChild(m);
    }
  }
  i0.prototype = new kV();
  i0.prototype.yp = function (j, q) {
    var m = dQ.n_(j, q);
    if (q == fG.OF) {
      this.awO = [];
      this.aq4 = [];
      if (this.LQ) this.q(this.fg, this.V(), this.LQ);
    }
    this.a = j;
    this.qG.yp(j, q);
    this.pP.yp(j, q);
  };
  i0.prototype.T = function () {
    this.hv.textContent = g$.get(this.k8) + ": ";
    this.SR.T();
    this.aoX.T();
    this.d8.T();
    this.qG.T();
    this.pP.T();
  };
  i0.prototype.v2 = function (j) {
    var q = j.currentTarget;
    if (q == this.SR) {
      var m = this.SR.V(),
        n = { pb: m, pH: this.LQ[m] };
      if (m > 0 && n.pH == null) n.pH = B.S(eu.zf[m - 1]);
      if (this.LQ) this.q(this.fg, n, this.LQ);
    }
    if (q == this.aAW) this.d8.kK(q.V());
    this.k(new fd(_.E.n, !1));
  };
  i0.prototype.ig = function (j) {
    if (J.JO(this.cx._)) return;
    j.stopPropagation();
    var q = [
        [13, 1, 0],
        [13, 0],
        [12, 37],
        [12, 62],
      ],
      m = this.LQ,
      n = this.awO,
      G = this.aq4,
      W = !1;
    for (var y = 0; y < 4; y++) {
      var k = { pb: y, pH: m[y] },
        T = i0.amI(k);
      if (G[y] == T) continue;
      W = !0;
      var b = i0.arJ(null, k, this.a, this.fg, 22, 22, !1);
      n[y] = '<img width="22" height="22" src="' + b + '" />';
      G[y] = T;
    }
    if (W) this.SR.ti(n, q);
    var c = this.Bl.getBoundingClientRect(),
      a = new fd(_.E.c, !0);
    a.data = { R: _.Y.wQ, Tf: this.cx, x: c.left, y: c.top + c.height + 4 };
    this.k(a);
  };
  i0.prototype.q = function (j, q, m) {
    this.LQ = m;
    this.fg = j;
    this.SR.q(q.pb);
    var n = i0.amI(q),
      G;
    if (n != this.a1I) i0.arJ(this.lB, q, this.a, this.fg, 30, 23, !0);
    this.a1I = n;
    var W = q.pb;
    if (W == 0) {
      G = this.aFp;
    }
    if (W == 1) {
      this.d8.q(q.pH.Clr.v);
      G = this.ri;
    }
    if (W == 2) {
      this.qG.update(j, q.pH);
      G = this.cc;
    }
    if (W == 3) {
      this.pP.update(j, q.pH);
      G = this.Eq;
    }
    if (G != this.zq) {
      if (this.zq != null) {
        this.cx._.removeChild(this.zq);
      }
      this.cx._.appendChild(G);
      this.zq = G;
    }
  };
  i0.prototype.V = function () {
    var j = { pb: this.SR.V() };
    if (j.pb == 1) {
      j.pH = B.S(eu.zf[0]);
      j.pH.Clr.v = this.d8.V();
    }
    if (j.pb == 2) {
      j.pH = this.qG.V();
    }
    if (j.pb == 3) {
      j.pH = this.pP.V();
    }
    return j;
  };
  i0.amI = function (j) {
    var q = j.pb,
      m = j.pH,
      n = "empty";
    if (q == 1) {
      n = B.MV.xH(m.Clr.v);
      n = n.o + "," + n.i + "," + n.X;
    }
    if (q == 2) n = JSON.stringify(m.Grad.v);
    if (q == 3) n = m.Ptrn.v.Idnt.v;
    return n;
  };
  i0.arJ = function (j, q, m, n, G, W, k) {
    if (j == null) j = i0.lB;
    var T = Math.floor(G * J.IC()),
      b = Math.floor(W * J.IC()),
      c = j.canvas;
    c.width = T;
    c.height = b;
    J.Mg(c, T, b);
    i0.arw(j, q, m, n, T, b);
    if (k) {
      j.beginPath();
      j.strokeStyle = "#000000";
      j.fillStyle = "#ffffff";
      j.lineWidth = 2;
      var a = T * 0.7,
        f = Math.floor(b * 0.7),
        U = 7 * J.IC();
      j.moveTo(a, f);
      j.lineTo(a + U, f);
      j.lineTo(a + U / 2, f + U / 2);
      j.closePath();
      j.stroke();
      j.fill();
    }
    if (j == i0.lB) return c.toDataURL();
  };
  i0.lB = J.m("canvas").getContext("2d");
  i0.arw = function (j, q, m, n, G, W, k, T) {
    if (k == null) k = 0;
    if (T == null) T = 0;
    var b = q.pb;
    if (b == 0) {
      j.fillStyle = "#ffffff";
      j.fillRect(k, T, G, W);
      j.strokeStyle = "#ff0000";
      j.lineWidth = 2;
      j.moveTo(k, T);
      j.lineTo(k + G, T + W);
      j.moveTo(k, T + W);
      j.lineTo(k + G, T);
      j.stroke();
    }
    if (b == 1) {
      var c = q.pH.Clr.v;
      c = B.MV.xH(c);
      j.fillStyle = "#" + B.bw((c.o << 16) | (c.i << 8) | c.X);
      j.fillRect(k, T, G, W);
    }
    if (b == 2) {
      var a = L.Pr.hj(q.pH.Grad.v, G, W, 0, m.UP, m.vH, !0);
      j.putImageData(a, k, T);
    }
    if (b == 3) {
      var f = q.pH.Ptrn.v,
        U;
      if (n != null) U = dS.SP(f, n.add.Patt);
      if (U == null) U = dS.SP(f, m.wP);
      bW.hj(U, G, W, j.canvas);
    }
  };
  function bW(j) {
    f$.call(this, j, !1, "patternbutton", 18 * 13, 10 * 13, fG.OF);
    this.af8 = null;
  }
  bW.prototype = new f$();
  bW.prototype.Q1 = function (j) {
    var q = this.dd[this.Op.V()];
    this.fB = {
      classID: "Ptrn",
      Nm: { t: "TEXT", v: q.name },
      Idnt: { t: "TEXT", v: q.id },
    };
    this.k(new fd(_.E.n));
    this.Py();
  };
  bW.prototype.c2 = function () {
    if (!this.Dd) return;
    var j = this.dd,
      q = Math.floor(34 * J.IC()),
      m = Math.floor(34 * J.IC()),
      n = [],
      G = [];
    for (var y = 0; y < j.length; y++) {
      n.push(bW.hj(j[y], q, m));
      G.push(j[y].name);
    }
    this.Op.GW(n, G, q, m);
    this.Dd = !1;
  };
  bW.prototype.q = function (j, q) {
    if (this.fB && j.Idnt.v == this.fB.Idnt.v) return;
    this.fB = B.S(j);
    this.Py(q);
  };
  bW.prototype.V = function () {
    return B.S(this.fB);
  };
  bW.prototype.lm = function () {
    return this.af8 ? [this.af8] : [];
  };
  bW.prototype.Py = function (j) {
    var q = Math.floor(50 * J.IC()),
      m = Math.floor(50 * J.IC()),
      n;
    if (j != null) n = dS.SP(this.fB, j.add.Patt);
    if (n == null) n = dS.SP(this.fB, this.dd);
    this.af8 = n;
    var G = bW.hj(n, q, m);
    this.S_.setAttribute("src", G);
    J.Mg(this.S_, q, m);
  };
  bW.Bl = J.m("canvas", "");
  bW.hj = function (j, q, m, n) {
    if (n == null) n = bW.Bl;
    var G = n.getContext("2d");
    n.width = q;
    n.height = m;
    if (j) {
      var W = j.Og[1],
        k = W.r,
        T = W.$,
        b = j.Og[0],
        c = Math.min(q / k, m / T),
        a = c;
      if (a * k < 2) a = 2 / k;
      var f = c;
      if (f * T < 2) f = 2 / T;
      var U = L.Dq.Ve([b, W], new k$(a, 0, 0, f, 0, 0), a > 2),
        Z = U.H.r,
        h = U.H.$,
        u = new ImageData(Z, h);
      B.wV(U.buffer, u.data);
      G.putImageData(u, Math.floor((q - Z) / 2), Math.floor((m - h) / 2));
    }
    return n.toDataURL();
  };
  function dm(j, q, m) {
    if (q == null) q = 24.2;
    if (m == null) m = 17;
    f$.call(this, j, !1, "patternbutton", q * 13, m * 13, fG.S0);
    this.On = "";
  }
  dm.prototype = new f$();
  dm.prototype.Q1 = function (j) {
    this.fB = B.S(this.dd[0][this.Op.V()[0]]);
    this.k(new fd(_.E.n));
  };
  dm.prototype.c2 = function () {
    var j = this.dd;
    if (j == null || !this.Dd) return;
    var q = Math.floor(50 * J.IC()),
      m = Math.floor(50 * J.IC()),
      n = [],
      G = [];
    for (var y = 0; y < j[0].length; y++) {
      n.push(dm.hj(this.dd[0][y].yL, q, m, this.dd[1]));
      G.push(j[0][y].So.Nm.v.split("=").pop());
    }
    this.Op.GW(n, G, q, m);
    this.Dd = !1;
  };
  dm.prototype.q = function (j, q, m, n) {
    var G = JSON.stringify(j.yL) + "," + m + "," + n;
    if (this.On != G) {
      this.On = G;
      this.fB = B.S(j);
      this.Py(q, m, n);
    }
  };
  dm.prototype.Py = function (j, q, m) {
    var n = Math.floor(68 * J.IC()),
      G = Math.floor(68 * J.IC()),
      W = dm.hj(this.fB.yL, n, G, j ? j : this.dd[1], q, m);
    this.S_.setAttribute("src", W);
    J.Mg(this.S_, n, G);
  };
  dm.hj = function (j, q, m, n, G, W) {
    var k = new fb();
    k.r = q;
    k.$ = m;
    k.buffer = B.j(q * m * 4);
    k.add.Patt = n;
    k.CO(G == null ? 90 : G);
    k.tL(W == null ? 30 : W);
    var T = new hk(0, 0, Math.round(q * 0.5), Math.round(m * 0.5));
    T.x = Math.round((q - T.r) / 2);
    T.y = Math.round((m - T.$) / 2);
    var b = k.dj();
    b.H = T;
    b.buffer = B.j(T.C() * 4);
    B.bs(b.buffer, 4284045657);
    dS.aD2(j, b, 0.5 * 100);
    k.U.push(b);
    k.DB();
    k.gF();
    var c = fS.tx;
    fS.tx = !1;
    k.iY();
    var a = k.ht();
    fS.tx = c;
    var f = gh.Rq(a.buffer, k.r, k.$);
    return f;
  };
  function cK(j) {
    f$.call(this, null, !1, "tpresetbutton", 18 * 13, 24 * 13, fG.D$, !0);
    J.XZ(this._, "fitem");
    this.Op.MI(1);
    this.id = j;
    this.Py();
    this.R.style.overflow = "hidden";
    this.Cn = new av([15, 7, 9]);
    this.Cn.q(!0);
    this.Cn.Q(_.E.n, this.a7j, this);
    this.jY.appendChild(this.Cn._);
  }
  cK.prototype = new f$();
  cK.prototype.a0$ = function (j) {
    if (this.id == j) return;
    this.id = j;
    this.j3(this.dd);
  };
  cK.prototype.Q1 = function (j) {
    var q = this.dd[this.Op.V()],
      m = new fd(_.E.c, !0);
    m.data = { R: _.Y.fh, vt: "set", rw: fG.D$, Jb: q };
    this.k(m);
  };
  cK.prototype.T = function () {
    f$.prototype.T.call(this);
    this.Cn.T();
  };
  cK.prototype.a7j = function () {
    this.Dd = !0;
    this.c2();
  };
  cK.prototype.c2 = function () {
    if (!this.Dd) return;
    var j = Math.floor(16 * J.IC()),
      q = Math.floor(16 * J.IC()),
      m = [],
      n = [],
      G = this.dd,
      W = this.Cn.V();
    for (var y = 0; y < G.length; y++) {
      var k = L.Rt[G[y][1].classID];
      if (!W || k == this.id) {
        n.push(G[y][0] ? G[y][0].split("=").pop() : "");
        m.push(k == -1 ? "" : PIMG[L.FW[k]]);
      } else {
        m.push(null);
        n.push(null);
      }
    }
    this.Op.GW(m, n, j, q);
    this.Dd = !1;
  };
  cK.prototype.Py = function () {
    var j = this.S_;
    j.setAttribute("src", PIMG[L.FW[this.id]]);
    J._g(j, "toolicon");
  };
  cK.prototype.lm = function () {
    return null;
  };
  cK.UL = {};
  cK.hj = function (j, q, m) {
    var n = cK.lB,
      G = cK.UL,
      W = B.bw((j.o << 16) | (j.i << 8) | j.X);
    if (G[W]) return G[W];
    if (n == null) {
      var k = J.m("canvas");
      n = cK.lB = k.getContext("2d");
    }
    var k = n.canvas;
    k.width = q;
    k.height = m;
    n.fillStyle = "#" + W;
    n.fillRect(0, 0, q, m);
    var T = (G[W] = k.toDataURL());
    return T;
  };
  function i3(j, q, m) {
    kV.call(this);
    this._ = J.m("span", "fitem curveeditor");
    this.UJ = null;
    this.a4V = 0;
    this.oB = "";
    this.mode = 0;
    this.a79 = null;
    this.a4H = null;
    this.jk = j;
    this.arH = q;
    this.aKp = m;
    this.vO = null;
    this.Gl = null;
    this.aJj = 0;
    this.afR = 0;
    this.Et = new ea();
    this.x4 = this.pf.bind(this);
    this.wZ = this.iu.bind(this);
    this.Qu = 256;
    this.Bl = J.m("canvas");
    this.lB = this.Bl.getContext("2d");
    J.r$(this.Bl);
    this._.appendChild(this.Bl);
    this.X3(256, 256);
    J.PD(this.Bl, this.TG.bind(this));
    this.coords = J.m("div");
    J.F(this.coords, "width:250px");
    this._.appendChild(this.coords);
    var n = (this.VX = m ? 100 : 255),
      G = null;
    this.lC = new k7("X (in)", 0, n, G, 0, !1, !0);
    this.Hk = new k7("Y (out)", 0, n, G, 0, !1, !0);
    this.sa = new av([19, 3, 0]);
    this.lC.Q(_.E.n, this.uV, this);
    this.Hk.Q(_.E.n, this.uV, this);
    this.sa.Q(_.E.n, this.uV, this);
    this.coords.appendChild(this.lC._);
    if (m) this.coords.appendChild(this.sa._);
    this.coords.appendChild(this.Hk._);
  }
  i3.prototype = new kV();
  i3.prototype.T = function () {
    this.sa.T();
    this.lC.T();
    this.Hk.T();
  };
  i3.prototype.X3 = function (j, q) {
    this.Qu = Math.round(j);
    this.lB.resetTransform();
    J.Q0(this.Bl, this.Qu, this.Qu, this.lB);
    this.lB.scale(this.Qu / 256, this.Qu / 256);
    if (this.vO) this.FE();
  };
  i3.prototype.uV = function (j) {
    var y = this.aGk(),
      q = this.vO[y],
      m = 255 / this.VX;
    q.v.Hrzn.v = this.lC.V() * m;
    q.v.Vrtc.v = this.Hk.V() * m;
    if (this.aKp) q.v.Cnty.v = this.sa.V();
    this.vO.sort(function (n, G) {
      return n.v.Hrzn.v - G.v.Hrzn.v;
    });
    this.FE();
    this.k(new fd(_.E.n));
  };
  i3.prototype.q = function (j, y, q) {
    var m = JSON.stringify(j),
      n = q ? JSON.stringify(q) : null;
    if (m == JSON.stringify(this.vO) && n == this.a4H) return;
    this.mode = j.length == 256 ? 1 : 0;
    this.vO = JSON.parse(m);
    this.a79 = q;
    this.a4H = n;
    if (y != null) this.Gl = this.vO[y];
    this.FE();
  };
  i3.prototype.OU = function (j, q, m) {
    this.UJ = j;
    this.a4V = q;
    this.oB = m;
    this.FE();
  };
  i3.prototype.V = function () {
    return B.S(this.vO);
  };
  i3.prototype.aGk = function () {
    return this.vO.indexOf(this.Gl);
  };
  i3.prototype.TG = function (j) {
    var q = 256 / this.Qu,
      m = J.QR(j, this.Bl);
    m.x *= q;
    m.y *= q;
    var n = m.x,
      G = 256 - m.y;
    if (this.jk) {
      var W = n;
      n = 256 - G;
      G = W;
    }
    this.Et.Tu(n, G);
    if (this.mode == 0) {
      var k = 0,
        T = 1e9,
        U;
      for (var y = 0; y < this.vO.length; y++) {
        var b = this.vO[y].v,
          c = b.Hrzn.v - n,
          a = b.Vrtc.v - G,
          f = Math.sqrt(c * c + a * a);
        if (f < T) {
          T = f;
          k = y;
        }
      }
      if (T < 15) U = this.vO[k];
      else {
        U = B.SD.Fn(n, G, !0);
        this.vO.push(U);
        this.vO.sort(function (Z, h) {
          return Z.v.Hrzn.v - h.v.Hrzn.v;
        });
      }
      this.Gl = U;
      this.afR = this.vO.slice(0);
    }
    J.dJ(document.body, this.x4);
    J.sP(document.body, this.wZ);
    this.pf(j);
  };
  i3.prototype.awF = function () {
    var j = this.Gl;
    return j ? j.v.Vrtc.v : 0;
  };
  i3.prototype.pf = function (j) {
    var q = 256 / this.Qu,
      m = J.QR(j, this.Bl);
    m.x *= q;
    m.y *= q;
    var n = m.x,
      G = 256 - m.y;
    if (this.jk) {
      var W = n;
      n = 256 - G;
      G = W;
    }
    if (this.mode == 0) {
      var k = this.vO,
        T = this.Gl,
        b = this.afR,
        c = b.indexOf(T),
        a = k.indexOf(T) != -1,
        f = b.length - 1,
        U = n;
      if (c == 0) {
        U = Math.max(0, Math.min(b[1].v.Hrzn.v - 1, n));
      } else if (c == f) {
        U = Math.min(255, Math.max(b[f - 1].v.Hrzn.v + 1, n));
      } else {
        var Z = n < 0 || n > 255 || G < 0 || G > 255;
        if (n <= b[c - 1].v.Hrzn.v || n >= b[c + 1].v.Hrzn.v) Z = !0;
        if (!Z && !a) k.splice(c, 0, T);
        if (Z && a) k.splice(c, 1);
      }
      if (this.arH && (c == 0 || c == b.length - 1)) {
      } else T.v.Hrzn.v = Math.round(U);
      T.v.Vrtc.v = Math.max(0, Math.min(255, Math.round(G)));
    } else {
      n = Math.round(n);
      G = Math.round(G);
      n = Math.max(0, Math.min(255, n));
      G = Math.max(0, Math.min(255, G));
      var h = this.Et.x,
        u = n,
        i = this.Et.y,
        x = G;
      if (n < this.Et.x) {
        u = h;
        h = n;
        x = i;
        i = G;
      }
      this.vO[n] = G;
      if (h != u)
        for (var X = h; X <= u; X++)
          this.vO[X] = Math.round(i + ((X - h) * (x - i)) / (u - h));
    }
    this.Et.Tu(n, G);
    this.FE();
    this.k(new fd(_.E.n));
  };
  i3.prototype.iu = function (j) {
    J.BJ(document.body, this.x4);
    J.mW(document.body, this.wZ);
    this.k(new fd(_.E.n));
  };
  i3.prototype.FE = function () {
    var j = this.lB,
      q = this.Bl;
    j.clearRect(0, 0, 512, 512);
    j.fillStyle = "rgba(0,0,0,0.12)";
    j.fillRect(0, 0, 256, 256);
    var m = 256 / q.width;
    if (this.UJ) {
      j.save();
      j.translate(0, 256);
      j.scale(1, -1);
      j3.aCp(j, this.UJ, 5700 / this.a4V, this.oB);
      j.restore();
    }
    j.strokeStyle = "rgba(0,0,0,0.3)";
    j.lineWidth = 1 * m;
    j.beginPath();
    for (var y = 0; y < 5; y++) {
      var n = Math.min((Math.floor((64 * y) / m) + 0.5) * m, 255.5);
      j.moveTo(0, n);
      j.lineTo(255, n);
      j.moveTo(n, 0);
      j.lineTo(n, 255);
    }
    j.stroke();
    function G(b) {
      var f = B.SD.Bh(b, 256);
      for (var y = 0; y < 256; y++) f[y] *= 255;
      return f;
    }
    if (this.jk) {
      j.save();
      j.transform(0, 1, -1, 0, 256, 0);
    }
    var W = i3.aug,
      k = this.a79,
      T = ["rgba(255,0,0,0.4)", "rgba(0,255,0,0.4)", "rgba(0,0,255,0.4)"];
    if (this.mode == 0) {
      var b = this.vO;
      if (k) for (var y = 0; y < k.length; y++) W(j, G(k[y]), T[y]);
      W(j, G(b), "white");
      j.lineWidth = 2 * m;
      for (var y = 0; y < b.length; y++) {
        var c = b[y].v;
        j.fillStyle = this.Gl == b[y] ? "white" : "#555";
        j.beginPath();
        j.moveTo(c.Hrzn.v, 255.5 - c.Vrtc.v);
        j.arc(c.Hrzn.v, 255.5 - c.Vrtc.v, 4, 0, 2 * Math.PI);
        j.stroke();
        j.fill();
      }
    } else {
      if (k) for (var y = 0; y < k.length; y++) W(j, k[y], T[y]);
      W(j, this.vO, "#000000");
    }
    if (this.jk) j.restore();
    var y = this.aGk();
    this.coords.className = y == -1 ? "disabled" : "";
    if (y == -1) return;
    var c = this.vO[y].v,
      a = 255 / this.VX;
    this.lC.q(Math.round(c.Hrzn.v / a));
    this.Hk.q(Math.round(c.Vrtc.v / a));
    if (c.Cnty) this.sa.q(c.Cnty.v);
  };
  i3.aug = function (j, q, m) {
    j.strokeStyle = m;
    j.beginPath();
    j.moveTo(0, 255.5 - q[0]);
    for (var y = 0; y < 256; y++) j.lineTo(y, 255.5 - q[y]);
    j.stroke();
  };
  function j3(j, q, m) {
    kV.call(this);
    this._ = J.m("span");
    this.QK = new f1(
      [12, 4],
      ["RGB", [13, 1, 1], [13, 1, 4], [13, 1, 5], [12, 82]]
    );
    this.QK.Q(_.E.n, this.ip, this);
    if (m == null) {
      this._.appendChild(this.QK._);
      J.Ft(this._);
    }
    var n = J.m("div");
    this._.appendChild(n);
    J.F(n, "background-color: var(--bg-canvas);");
    this.Bl = J.m("canvas");
    var G = this.Bl;
    n.appendChild(G);
    G.width = Math.round(j * J.IC());
    G.height = Math.round(100 * J.IC());
    J.Mg(G, G.width, G.height);
    G.style.display = "block";
    this.lB = G.getContext("2d");
    this.UJ = null;
    this.C_ = 0;
    this.aGa = null;
    this.aBT = [];
    this.j8 = [];
    var W = ["Mean:", "Pixels:"],
      k = this._;
    if (q)
      for (var y = 0; y < W.length; y++) {
        var T = new aD(W[y]);
        this.aBT.push(T);
        k.appendChild(T._);
        var b = new aD("hi");
        this.j8.push(b);
        k.appendChild(b._);
        J.Ft(k);
      }
    if (m != null) this.MI(m);
  }
  j3.prototype = new kV();
  j3.prototype.T = function () {
    this.QK.T();
  };
  j3.prototype.MI = function (j) {
    this.QK.q(j);
    this.ip();
  };
  j3.prototype.q = function (j, q) {
    this.UJ = j;
    this.aGa = q;
    this.ip();
  };
  j3.prototype.kK = function (j) {
    if (j == this.C_) return;
    this.C_ = j;
    this.ip();
  };
  j3.prototype.ip = function () {
    if (this.UJ == null) return;
    var j = this.Bl,
      q = this.lB,
      m = this.UJ,
      n = this.aGa,
      G = this.QK.V(),
      W = 6e3 / m[4],
      k = "#" + B.bw(this.C_),
      T = j3.aCp;
    j.width = j.width;
    q.setTransform(j.width / 256, 0, 0, -j.height / 100, 0, j.height);
    q.globalCompositeOperation = "lighter";
    if (G == 0) T(q, m[0], W / 3, k);
    else if (G < 4) T(q, m[G], W, k);
    else {
      T(q, m[1], W, "#ff4545", !0);
      T(q, m[2], W, "#40bb60", !0);
      T(q, m[3], W, "#2266bb", !0);
    }
    q.setTransform(1, 0, 0, 1, 0, 0);
    if (n != null) {
      if (G == 4) G = 0;
      var b = 0;
      for (var y = 0; y < 256; y++) b += y * m[G][y];
      if (G == 0) b /= 3;
      this.j8[0].q((b / n).toFixed(1) + "");
      this.j8[1].q(n + "");
    }
  };
  j3.aCp = function (j, q, m, n, G) {
    j.beginPath();
    j.moveTo(0, 0);
    for (var W = 0; W < 256; W++) j.lineTo(W, q[W] * m);
    j.lineTo(256, 0);
    j.fillStyle = n;
    j.strokeStyle = n;
    if (G) {
      j.globalAlpha = 0.2;
      j.fill();
      j.globalAlpha = 1;
      j.stroke();
    } else j.fill();
  };
  function gk(j, q) {
    kV.call(this);
    this.vL = { o: 0, i: 0, X: 0 };
    if (Math.abs(j - 256 / J.IC()) < 10) j = 256 / J.IC();
    var m = (this._ = J.m("div", "flexrow"));
    m.style.position = "relative";
    var n = (this.ano = J.m("div"));
    m.appendChild(n);
    this.FL = new ea();
    this.R4 = new ea();
    this.hW = this.KK.bind(this);
    this.aH = this.a16.bind(this);
    this.Bl = J.m("canvas", "");
    this.lB = this.Bl.getContext("2d");
    this.Bl.width = this.Bl.height = 256;
    this.a2s = this.lB.getImageData(0, 0, 256, 256);
    this.aq6 = -1;
    this.aLH = "";
    this.jA = null;
    J.r$(this.Bl);
    J.PD(this.Bl, this.aep.bind(this));
    n.appendChild(this.Bl);
    this.aHC = this.a5v.bind(this);
    this.a7L = this.at$.bind(this);
    this.bb = J.m("canvas", "");
    this.P3 = this.bb.getContext("2d");
    this.bb.width = 20;
    this.bb.height = 256;
    this.aBw = this.P3.getImageData(0, 0, 20, 256);
    gk.acj(this.aBw.data, 20, 256);
    J.r$(this.bb);
    J.PD(this.bb, this.adD.bind(this));
    m.appendChild(this.bb);
    J.F(this.Bl, "width:" + j + "px; height:" + j + "px");
    J.F(this.bb, "width:16px; height:" + j + "px");
    this.jH = new av("Web Colors\u2001");
    this.jH.Q(_.E.n, this.update, this);
    this.jV = new av("CMYK gamut");
    this.jV.Q(_.E.n, this.update, this);
    if (q) {
      J.Ft(n);
      n.appendChild(this.jH._);
      n.appendChild(this.jV._);
    }
    var G = (this.sn = document.createElementNS(
      "http://www.w3.org/2000/svg",
      "svg"
    ));
    m.appendChild(G);
  }
  gk.prototype = new kV();
  gk.prototype.X3 = function (j, q) {
    this.Bl.style.width = this.ano.style.width = j - 16 + "px";
  };
  gk.prototype.q = function (j) {
    if (this.jH.V()) {
      var q = B.S(j);
      gk.hq(q);
      var m = this.V();
      if (q.o == m.o && q.i == m.i && q.X == m.X) j = this.vL;
    }
    this.vL = j;
    this.update();
  };
  gk.prototype.V = function () {
    var j = B.S(this.vL);
    if (this.jH.V()) gk.hq(j);
    return j;
  };
  gk.prototype.update = function () {
    var j = this.vL,
      q = B.vE(j.o, j.i, j.X),
      T = 18;
    if (q.YF == 0) q.fO = this.FL.x / 255;
    if (q.fO == 0 || q.YF == 0) q.uu = (255 - this.nD(this.R4.y)) / 255;
    if (q.YF != 0) this.FL.x = q.fO * 255;
    this.FL.y = (1 - q.YF) * 255;
    this.R4.y = (1 - q.uu) * 255;
    var m = this.a2s,
      n = this.jH.V(),
      G = this.jV.V(),
      W = n + "," + G;
    if (Math.abs(q.uu - this.aq6) > 0.002 || this.aLH != W) {
      this.aaE(new Uint8Array(m.data.buffer), 256, 256, q.uu, n, G);
      this.awq();
      this.aq6 = q.uu;
      this.aLH = W;
    }
    var k = this.lB;
    k.putImageData(m, 0, 0);
    m = this.aBw;
    k = this.P3;
    k.putImageData(m, 0, 0);
    k.strokeStyle = "#ffffff";
    k.beginPath();
    k.moveTo(0, this.R4.y);
    k.lineTo(20, this.R4.y);
    k.lineWidth = 2;
    k.stroke();
    var b = this.FL.y / 255,
      c = parseFloat(this.Bl.style.width),
      a = parseFloat(this.Bl.style.height),
      f = this.sn;
    f.setAttribute("width", T);
    f.setAttribute("height", T);
    var U =
        (Math.round(j.o * 255) << 16) |
        (Math.round(j.i * 255) << 8) |
        Math.round(j.X * 255),
      Z =
        '<circle cx="' +
        T / 2 +
        '" cy="' +
        T / 2 +
        '" r="' +
        T / 2 +
        '" fill="#' +
        B.bw(U) +
        '"></circle>';
    Z +=
      '<circle cx="' +
      T / 2 +
      '" cy="' +
      T / 2 +
      '" r="' +
      (-0.5 + T / 2) +
      '" fill="none" stroke="rgba(255,255,255,' +
      (0.5 - 0.2 * b) +
      ')" stroke-width="1"></circle>';
    Z +=
      '<circle cx="' +
      T / 2 +
      '" cy="' +
      T / 2 +
      '" r="' +
      (-1.2 + T / 2) +
      '" fill="none" stroke="rgba(0,0,0,0.07)" stroke-width="0.4"></circle>';
    f.innerHTML = Z;
    f.style.pointerEvents = "none";
    f.style.filter = "drop-shadow(0px 3px 2px rgba(0,0,0,0.4)";
    f.style.position = "absolute";
    f.style.left = c * (this.FL.x / 255) - T / 2 + "px";
    f.style.top = a * (this.FL.y / 255) - T / 2 + "px";
  };
  gk.hq = function (j) {
    j.o = ~~(0.5 + j.o * 5) * 0.2;
    j.i = ~~(0.5 + j.i * 5) * 0.2;
    j.X = ~~(0.5 + j.X * 5) * 0.2;
  };
  gk.prototype.aaE = function (j, q, m, n, G, W) {
    var k = 1 / q,
      T = 1 / m;
    for (var b = 0; b < m; b++)
      for (var c = 0; c < q; c++) {
        var a = B.ld(n, c * k, (m - b - 1) * T);
        if (G) gk.hq(a);
        var y = (b * q + c) << 2;
        j[y + 0] = ~~(a.o * 255);
        j[y + 1] = ~~(a.i * 255);
        j[y + 2] = ~~(a.X * 255);
        j[y + 3] = 255;
      }
    if (W) {
      var f = j.slice(0),
        U = B.Ot("rgbToRgbC"),
        Z = U[2],
        h = U[3];
      ICC.U.applyLUT(h, Z, f, f);
      this.jA = B.j(q * m);
      for (var y = 0; y < j.length; y += 4) {
        var u = j[y] - f[y],
          i = j[y + 1] - f[y + 1],
          x = j[y + 2] - f[y + 2],
          X = u * u + i * i + x * x;
        if (X > 300) {
          j[y] = j[y + 1] = j[y + 2] = 200;
          this.jA[y >>> 2] = 255;
        }
      }
    }
  };
  gk.acj = function (j, q, m, n, G) {
    if (n == null) n = 1;
    if (G == null) G = 0;
    var W = new Uint32Array(j.buffer);
    for (var k = 0; k < m; k++) {
      var T = B.ld((1 + n * (1 - k / m) + G) % 1, 1, 1),
        b =
          (255 << 24) | ((T.X * 255) << 16) | ((T.i * 255) << 8) | (T.o * 255);
      for (var c = 0; c < q; c++) W[k * q + c] = b;
    }
  };
  gk.prototype.aep = function (j) {
    J.dJ(window, this.hW);
    J.sP(window, this.aH);
    this.KK(j);
    this.sn.style.transition = "transform 150ms cubic-bezier(.4,2.2,.6,.5)";
    this.sn.style.transform = "scale(2.4)";
  };
  gk.prototype.a16 = function (j) {
    J.BJ(window, this.hW);
    J.mW(window, this.aH);
    this.sn.style.transition = "transform 200ms cubic-bezier(.4,2.2,.6,.5)";
    this.sn.style.transform = "scale(1)";
  };
  gk.prototype.KK = function (j) {
    var q = J.QR(j, this.Bl);
    q.x = q.x * (256 / parseFloat(this.Bl.style.width));
    q.y = q.y * (256 / parseFloat(this.Bl.style.height));
    this.FL.Tu(this.nD(q.x), this.nD(q.y));
    this.awq();
    this.tS();
  };
  gk.prototype.awq = function () {
    if (!this.jV.V()) return;
    var j = this.FL,
      q = 0,
      m = 0,
      n = 1e9;
    for (var G = 0; G < 256; G++) {
      for (var W = 0; W < 256; W++) {
        if (this.jA[G * 256 + W] == 255) continue;
        var k = W - j.x,
          T = G - j.y,
          b = k * k + T * T;
        if (b < n) {
          q = W;
          m = G;
          n = b;
        }
      }
    }
    j.x = q;
    j.y = m;
  };
  gk.prototype.tS = function () {
    this.vL = this.ajw();
    this.k(new fd(_.E.n));
  };
  gk.prototype.ajw = function () {
    var j = B.ld(
      (255 - this.nD(this.R4.y)) / 255,
      this.Pq(this.FL.x / 255),
      this.Pq(1 - this.FL.y / 255)
    );
    return { o: j.o, i: j.i, X: j.X };
  };
  gk.prototype.adD = function (j) {
    J.dJ(window, this.aHC);
    J.sP(window, this.a7L);
    this.a5v(j);
  };
  gk.prototype.at$ = function (j) {
    J.BJ(window, this.aHC);
    J.mW(window, this.a7L);
  };
  gk.prototype.a5v = function (j) {
    var q = J.QR(j, this.bb);
    q.y = q.y * (256 / parseFloat(this.bb.style.height));
    this.R4.Tu(this.nD(q.x), this.nD(q.y));
    this.tS();
  };
  gk.prototype.nD = function (j) {
    return Math.max(0, Math.min(255, j));
  };
  gk.prototype.Pq = function (j) {
    return Math.max(0, Math.min(1, j));
  };
  function af(j, q, m, n) {
    var G = gA.zs(q, n);
    gA.call(this, j, G, m);
  }
  af.prototype = new gA();
  function k6() {
    kV.call(this);
    this.i1 = 0;
    this._ = J.m("button", "fitem bbtn");
    this._.style.width = "130px";
    var j = [];
    for (var y = 0; y < 16; y++) {
      var q = { name: MIDDB.grps[y], sub: [], _9: b8.L4(y * 8) };
      j.push(q);
      for (var m = 0; m < 8; m++)
        q.sub.push({ name: MIDDB.list[y * 8 + m], _9: b8.L4(y * 8 + m) });
    }
    j.push({ name: MIDDB.list[200], _9: b8.L4(200) });
    var n = [];
    n.push({ name: MIDDB.list[300], _9: b8.L4(300) });
    n.push({ name: MIDDB.list[500], _9: b8.L4(500) });
    n.push({ name: MIDDB.list[501], _9: b8.L4(501) });
    j.push({ name: "More", sub: n });
    this.sH = new cG(j);
    this.sH.Q("select", this.v2, this);
    this._.textContent = "Piano \u25BC";
    this._.addEventListener("click", this.qy.bind(this), !1);
  }
  k6.prototype = new kV();
  k6.prototype.qy = function (j) {
    var q = this._.getBoundingClientRect(),
      m = this.sH;
    m.T();
    m.parent = this;
    var n = new fd(_.E.c, !0);
    n.data = { R: _.Y.wQ, Tf: m, x: q.left, y: q.top + q.height + 4 };
    this.k(n);
  };
  k6.prototype.v2 = function (j) {
    var q = this.sH.r9(),
      m = q[0],
      n = 200;
    if (m <= 15) n = q[0] * 8 + q[1];
    if (m == 17) n = [300, 500, 501][q[1]];
    this.i1 = n;
    this.k(new fd(_.E.n, !1));
  };
  k6.prototype.go = function (j) {
    var q = this.JA.indexOf(j.currentTarget),
      m = this.nC[q],
      n = this.f$;
    if (m.kv != null) n.kv = m.kv;
    if (m.h0 != null) n.h0 = m.h0;
    n.QJ = m.QJ.slice(0);
    if (n.mm == null) n.mm = 3;
    for (var y = 0; y < n.QJ.length; y++) n.QJ[y] *= n.mm / m.mm;
    this.k(new fd(_.E.n, !1));
  };
  k6.prototype.T = function () {};
  k6.prototype.q = function (j) {
    this.i1 = j;
    this._.textContent = MIDDB.list[j] + " \u25BC";
  };
  k6.prototype.V = function () {
    return this.i1;
  };
  function ci() {
    kV.call(this);
    this.aE5 = null;
    this.Oz = new fZ();
    this.Oz.Q(_.E.n, this.aAs, this);
    this.Oz.parent = this;
    this.jc = new k7([12, 14, 0], 1, 150, "px", 2, !0);
    this.jc.Q(_.E.n, this.wu, this);
    this.jc.parent = this;
    this.Fm = new k7([16, 0], 0.01, 100, "px", 2, !0, null, 5);
    this.Fm.Q(_.E.n, this.wu, this);
    this.Fm.parent = this;
    this._B = new av("Auto");
    this._B.Q(_.E.n, this.wu, this);
    this.B$ = new k7([16, 1], -500, 5e3, "%", 0, !0);
    this.B$.Q(_.E.n, this.wu, this);
    this.B$.parent = this;
    this.X1 = new k7("\u2B0D", 1, 300, "%", null, null, null, null, [
      [2, 7],
      [22, 4, 3],
    ]);
    this.X1.Q(_.E.n, this.wu, this);
    this.X1.parent = this;
    this.n4 = new k7("\u2B0C", 1, 300, "%", null, null, null, null, [
      [2, 7],
      [22, 4, 2],
    ]);
    this.n4.Q(_.E.n, this.wu, this);
    this.n4.parent = this;
    this.wz = new k7([16, 2], -10, 10, "px");
    this.wz.Q(_.E.n, this.wu, this);
    this.wz.parent = this;
    this.Bw = new g1(!0);
    this.Bw.Q(_.E.n, this.pn, this);
    this.Bw.parent = this;
    this.PY = new g1(!0);
    this.PY.Q(_.E.n, this.pn, this);
    this.PY.parent = this;
    this.pp = new g1(!0);
    this.pp.Q(_.E.n, this.pn, this);
    this.pp.parent = this;
    this.wX = new g1(!0);
    this.wX.Q(_.E.n, this.pn, this);
    this.wX.parent = this;
    this.TO = new av([2, 3]);
    this.TO.Q(_.E.n, this.wu, this);
    this.Yw = new av([14, 9]);
    this.Yw.Q(_.E.n, this.wu, this);
    this.fq = new av([12, 46]);
    this.fq.Q(_.E.n, this.wu, this);
    this.Yp = new cr(!0, !0);
    this.Yp.Q(_.E.n, this.wu, this);
    this.M0 = new kv("...", null, null, !0);
    J.PD(this.M0._, this.anR.bind(this));
    this.cx = new kV();
    var j = (this.cx._ = J.m("div", "floatcont form")),
      k = 100;
    this.cx.parent = this;
    this.Yp.parent = this.cx;
    this.Rw = new k7([12, 41], 1, 20, "px", 0, !0, !0);
    this.Rw._.style.marginLeft = "16px";
    this.Rw.Q(_.E.n, this.wu, this);
    this.Rw.parent = this.cx;
    j.appendChild(this.PY._);
    j.appendChild(this.TO._);
    J.Ft(j);
    j.appendChild(this.pp._);
    j.appendChild(this.Yw._);
    J.Ft(j);
    j.appendChild(this.Rw._);
    j.appendChild(this.Yp._);
    J.Ft(j);
    j.appendChild(this.wX._);
    j.appendChild(this.fq._);
    this.Ay = new kv(
      '<img src="' + PIMG["type/bold"] + '" class="autoscale gsicon" />',
      !1,
      "Faux bold"
    );
    this.si = new kv(
      '<img src="' + PIMG["type/italic"] + '" class="autoscale gsicon" />',
      !1,
      "Faux italic"
    );
    this.CT = new kv(
      '<img src="' + PIMG["type/caps"] + '" class="autoscale gsicon" />',
      !1,
      "All caps"
    );
    this.gc = new kv(
      '<img src="' + PIMG["type/scaps"] + '" class="autoscale gsicon" />',
      !1,
      "Small caps"
    );
    this.lk = new kv(
      '<img src="' + PIMG["type/sup"] + '" class="autoscale gsicon" />',
      !1,
      "Superscript"
    );
    this.c0 = new kv(
      '<img src="' + PIMG["type/sub"] + '" class="autoscale gsicon" />',
      !1,
      "Subscript"
    );
    this.qr = new kv(
      '<img src="' + PIMG["type/under"] + '" class="autoscale gsicon" />',
      !1,
      "Underline"
    );
    this.MR = new kv(
      '<img src="' + PIMG["type/strike"] + '" class="autoscale gsicon" />',
      !1,
      "Strikethrough"
    );
    var q = [
      this.Ay,
      this.si,
      this.CT,
      this.gc,
      this.lk,
      this.c0,
      this.qr,
      this.MR,
    ];
    for (var y = 0; y < q.length; y++) q[y].Q("click", this.aLc, this);
    var m =
      "standard context discr swash styl_alt titling ordinals fractions".split(
        " "
      );
    this.ls = [];
    for (var y = 0; y < 8; y++) {
      var n = new kv(
        '<img src="' + PIMG["lig/" + m[y]] + '" class="autoscale gsicon" />',
        !1,
        al.ap_[y]
      );
      n.Q("click", this.aLc, this);
      this.ls.push(n);
    }
    this.asv = new kv(
      '<img src="' + PIMG["par/left"] + '" class="autoscale gsicon" />'
    );
    this.ai4 = new kv(
      '<img src="' + PIMG["par/right"] + '" class="autoscale gsicon" />'
    );
    this.aHX = new kv(
      '<img src="' + PIMG["par/center"] + '" class="autoscale gsicon" />'
    );
    this.aJW = new kv(
      '<img src="' + PIMG["par/jleft"] + '" class="autoscale gsicon" />'
    );
    this.aoh = new kv(
      '<img src="' + PIMG["par/jright"] + '" class="autoscale gsicon" />'
    );
    this.awa = new kv(
      '<img src="' + PIMG["par/jcenter"] + '" class="autoscale gsicon" />'
    );
    this.ab8 = new kv(
      '<img src="' + PIMG["par/jall"] + '" class="autoscale gsicon" />'
    );
    this.WB = [
      this.asv,
      this.ai4,
      this.aHX,
      this.aJW,
      this.aoh,
      this.awa,
      this.ab8,
    ];
    for (var y = 0; y < this.WB.length; y++)
      this.WB[y].Q("click", this.wu, this);
    var G = ["lind", "rind", "flind", "bind", "aind"],
      W = [];
    for (var y = 0; y < 5; y++)
      W.push(
        '<img src="' + PIMG["par/" + G[y]] + '" class="autoscale gsicon" /> '
      );
    this.LE = new k7(W[0], -k, k, "px");
    this.Ou = new k7(W[1], -k, k, "px");
    this.Aq = new k7(W[2], -k, k, "px");
    this.RA = new k7(W[3], -k, k, "px");
    this.a3 = new k7(W[4], -k, k, "px");
    this.bz = new gA([12, 33], ["Abc ...", "... أي بي"]);
    this.Q4 = new k7(["Auto VAR0", [16, 0]], 0, 500, "%");
    this.MS = [this.LE, this.Ou, this.Aq, this.RA, this.a3, this.bz, this.Q4];
    for (var y = 0; y < this.MS.length; y++) {
      var T = this.MS[y];
      T.Q(_.E.n, this.wu, this);
      T.parent = this;
    }
    this.zL = new f1("Digits", [
      "LTR Arabic - 123",
      "RTL Arabic- 123",
      "Hindi (١,٢,٣,٤,٥,٦...)",
      "Farsi (۱,۲,۳,۴,۵,۶...)",
    ]);
    this.zL.Q(_.E.n, this.wu, this);
    this.zP = [];
    this.aue = "";
    this.e3 = J.m("div", "labfxd");
  }
  ci.prototype = new kV();
  ci.prototype.anR = function (j) {
    if (J.JO(this.cx._)) return;
    j.stopPropagation();
    var q = this.M0._.getBoundingClientRect(),
      m = new fd(_.E.c, !0);
    m.data = { R: _.Y.wQ, Tf: this.cx, x: q.left, y: q.top + q.height + 4 };
    this.k(m);
  };
  ci.prototype.T = function () {
    this.Oz.T();
    this.jc.T();
    this.Fm.T();
    this.B$.T();
    this.wz.T();
    this.X1.T();
    this.n4.T();
    this.TO.T();
    this.Yw.T();
    this.fq.T();
    this.Rw.T();
    this.Yp.T();
    for (var y = 0; y < this.MS.length; y++) this.MS[y].T();
  };
  ci.prototype.q = function (j, q, m) {
    if (q) this.aE5 = q;
    this.Cw = B.S(j);
    var n = this.Cw,
      G = n.K2,
      W = n.Th;
    this.Ay.q(G.FauxBold != null ? G.FauxBold : !1);
    this.si.q(G.FauxItalic != null ? G.FauxItalic : !1);
    this.CT.q(G.FontCaps == 2);
    this.gc.q(G.FontCaps == 1);
    this.lk.q(G.FontBaseline == 1);
    this.c0.q(G.FontBaseline == 2);
    this.qr.q(G.Underline);
    this.MR.q(G.Strikethrough);
    if (G._DigitSet != null) this.zL.q(G._DigitSet);
    var k = {};
    if (G.Font != null) {
      var T = n.NJ[G.Font],
        b = q.yM(al.Sh(T));
      if (b) k = b.GSUB;
      if (k == null) k = {};
      if (b && b.fvar) {
        var c = b.fvar[0],
          a = b.fvar[1],
          f = JSON.stringify(c);
        if (f != this.ak2) {
          this.ak2 = f;
          this.zP = [];
          J.dI(this.e3);
          for (var y = 0; y < c.length; y++) {
            var U = c[y],
              Z = new dV(U[5], U[1], U[3]);
            Z.T();
            this.zP.push(Z);
            Z.Q(_.E.n, this.auy, this);
            this.e3.appendChild(Z._);
          }
        }
        var h = T.Axis;
        if (h)
          for (var y = 0; y < Math.min(h.length, this.zP.length); y++)
            this.zP[y].q(h[y] / 65536);
      } else if (this.zP.length != 0) {
        this.zP = [];
        J.dI(this.e3);
        this.ak2 = "";
      }
    }
    for (var y = 0; y < 8; y++) {
      this.ls[y].yl(k[al.ad8[y]]);
      this.ls[y].q(G[al.ls[y]]);
    }
    this.Oz.q(G.Font == null ? null : al.Sh(n.NJ[G.Font]), q, m);
    var u = G.FontSize == null ? 20 : G.FontSize;
    this.jc.q(u);
    var i = G.Tracking;
    this.B$.q(i == null ? 0 : i);
    this.Rw.q(G.OutlineWidth != null ? G.OutlineWidth : 1);
    this.Yp.q(eu.TB.anS(G));
    this.Fm.q(G.Leading != null && G.Leading != 0 ? G.Leading : u);
    this._B.q(G.AutoLeading);
    this.X1.q((G.VerticalScale != null ? G.VerticalScale : 0) * 100);
    this.n4.q((G.HorizontalScale != null ? G.HorizontalScale : 0) * 100);
    this.wz.q(G.BaselineShift != null ? G.BaselineShift : 0);
    this.TO.q(G.FillFlag != null ? G.FillFlag : !1);
    this.Yw.q(G.StrokeFlag != null ? G.StrokeFlag : !1);
    this.fq.q(G._FillBackgroundFlag != null ? G._FillBackgroundFlag : !1);
    this.kY(G.FillColor, this.Bw);
    this.kY(G.FillColor, this.PY);
    this.kY(G.StrokeColor, this.pp);
    this.kY(G._FillBackgroundColor, this.wX);
    var x = W._Direction != null ? W._Direction : 0,
      X = al.xT(W);
    for (var y = 0; y < this.WB.length; y++) this.WB[y].q(X == y);
    this.bz.q(x);
    this.Q4.q((W.AutoLeading != null ? W.AutoLeading : 1.2) * 100);
    this.LE.q(W.StartIndent != null ? W.StartIndent : 0);
    this.Ou.q(W.EndIndent != null ? W.EndIndent : 0);
    this.Aq.q(W.FirstLineIndent != null ? W.FirstLineIndent : 0);
    this.RA.q(W.SpaceBefore != null ? W.SpaceBefore : 0);
    this.a3.q(W.SpaceAfter != null ? W.SpaceAfter : 0);
  };
  ci.prototype.kY = function (j, q) {
    if (j) {
      var m = al.xH(j);
      q.kK((Math.round(m.o) << 16) | (Math.round(m.i) << 8) | Math.round(m.X));
    } else q.kK(0);
  };
  ci.prototype.L0 = function () {
    var j = new fd(_.E.c, !0);
    j.data = { R: _.Y.fh, rw: fG.R3, Cw: this.Cw };
    this.k(j);
    var j = new fd(_.E.w, !0);
    j.l = L.G_;
    j.data = { R: "updateStyles" };
    this.k(j);
  };
  ci.prototype.aLc = function (j) {
    var q = this.Cw.K2,
      m = j.target,
      n = !m.sM(),
      G = this.ls.indexOf(m);
    if (G != -1) {
      q[al.ls[G]] = n;
    } else {
      if (m == this.Ay) q.FauxBold = n;
      if (m == this.si) q.FauxItalic = n;
      if (m == this.CT) q.FontCaps = n ? 2 : 0;
      if (m == this.gc) q.FontCaps = n ? 1 : 0;
      if (m == this.lk) q.FontBaseline = n ? 1 : 0;
      if (m == this.c0) q.FontBaseline = n ? 2 : 0;
      if (m == this.qr) q.Underline = n;
      if (m == this.MR) q.Strikethrough = n;
    }
    this.L0();
  };
  ci.prototype.wu = function (j) {
    var q = this.Cw.K2,
      m = this.Cw.Th,
      n = j.target;
    if (n == this.Yp) {
      eu.TB.aEO(n.V(), q);
    }
    if (n == this.B$) {
      var G = n.V();
      q.Tracking = G;
    }
    if (n == this.Fm) {
      q.AutoLeading = !1;
      q.Leading = n.V();
    }
    if (n == this._B) {
      q.AutoLeading = n.V();
    }
    if (n == this.Rw) q.OutlineWidth = n.V();
    if (n == this.jc) q.FontSize = n.V();
    if (n == this.X1) q.VerticalScale = n.V() / 100;
    if (n == this.n4) q.HorizontalScale = n.V() / 100;
    if (n == this.wz) q.BaselineShift = n.V();
    if (n == this.TO) q.FillFlag = n.V();
    if (n == this.Yw) q.StrokeFlag = n.V();
    if (n == this.fq) q._FillBackgroundFlag = n.V();
    if (n == this.zL) q._DigitSet = n.V();
    if (this.WB.indexOf(n) != -1) {
      m.Justification = al.xT(m, this.WB.indexOf(n));
    }
    if (n == this.LE) m.StartIndent = n.V();
    if (n == this.Ou) m.EndIndent = n.V();
    if (n == this.Aq) m.FirstLineIndent = n.V();
    if (n == this.RA) m.SpaceBefore = n.V();
    if (n == this.a3) m.SpaceAfter = n.V();
    if (n == this.bz) m._Direction = n.V();
    if (n == this.Q4) m.AutoLeading = n.V() / 100;
    this.L0();
  };
  ci.prototype.auy = function (j) {
    var q = this.Cw,
      m = q.NJ[q.K2.Font],
      n = m.Axis,
      G = al.Sh(m),
      W = this.aE5.yM(G);
    if (n)
      for (var y = 0; y < Math.min(n.length, this.zP.length); y++) {
        var k = this.zP[y].V();
        n[y] = Math.round(k * 65536);
        G += "_" + k.toFixed(3) + W.fvar[0][y][0];
      }
    m.Name = G;
    this.L0();
  };
  ci.prototype.aAs = function (j) {
    var q = this.Cw;
    if (q.K2.Font == null) q.K2.Font = 0;
    var m = this.Oz.V(),
      n = q.NJ[q.K2.Font],
      G = this.aE5.yM(m);
    delete n.Axis;
    if (G && G.fvar) {
      var W = G.fvar,
        k = [];
      for (var y = 0; y < W[0].length; y++) k.push(W[0][y][2]);
      for (var y = 0; y < W[1].length; y++)
        if (W[1][y][3] == m) k = W[1][y][2].slice(0);
      for (var y = 0; y < k.length; y++) k[y] = Math.round(k[y] * 65536);
      n.Axis = k;
    }
    n.Name = m;
    this.L0();
  };
  ci.prototype.pn = function (j) {
    var q = j.target,
      m = q.we(),
      n = {
        Type: 1,
        Values: [
          1,
          ((m >> 16) & 255) / 255,
          ((m >> 8) & 255) / 255,
          ((m >> 0) & 255) / 255,
        ],
      };
    for (var y = 0; y < 4; y++)
      n.Values[y] = Math.round(n.Values[y] * 1e3) / 1e3;
    var G = q == this.Bw || q == this.PY ? 0 : q == this.pp ? 1 : 2;
    this.Cw.K2[["FillColor", "StrokeColor", "_FillBackgroundColor"][G]] = n;
    this.L0();
  };
  function fZ() {
    kV.call(this);
    this._ = J.m("span", "fontinput");
    this.ZX = null;
    this.C6 = null;
    this.v4 = null;
    this.Bs = "";
    this.Ha = {};
    this.aDW = [];
    this.amQ = {};
    this.ayV = {};
    this.aFd = !1;
    this.Rb = J.m("button", "fitem");
    J.F(this.Rb, "width:9em;");
    this.Rb.textContent = "Family Name \u25BC";
    this._.appendChild(this.Rb);
    J.PD(this.Rb, this.ak7.bind(this));
    this.z4 = new kV();
    this.z4.parent = this;
    var j = (this.z4._ = J.m("div", "floatcont"));
    j.style.padding = "7px 7px 3px 7px";
    var q = new aD("Recent");
    j.appendChild(q._);
    var m = (this.aBb = new kv(
      [
        [23, 6],
        [22, 6, 0],
      ],
      !1,
      "Load OTF / TTF file from your computer",
      !0
    ));
    m.Q("click", this.awp, this);
    m._.style.float = "right";
    j.appendChild(m._);
    var n = (this.aiV = new av("Local Fonts"));
    n.Q(_.E.n, this.a0c, this);
    n._.style.float = "right";
    n._.style.marginRight = "10px";
    n._.style.marginTop = "3px";
    j.appendChild(n._);
    J.Ft(j);
    this.x1 = J.m("span", "fitem imageset scrollable");
    this.x1.style.height = "5.5em";
    this.x1.style.width = "100%";
    j.appendChild(this.x1);
    var G = J.m("div", "form");
    this.z4._.appendChild(G);
    this.PT = new kv(
      J.CP("tools/cshape", null, "autoscale"),
      !1,
      "Show Favorites Only"
    );
    this.PT.Q("click", this.aE7, this);
    G.appendChild(this.PT._);
    this.tX = new bJ([12, 86], null, 7.5);
    this.tX.Q("input", this.yS, this);
    G.appendChild(this.tX._);
    this.$S = new bM(10, "\u2630");
    G.appendChild(this.$S._);
    this.$S.parent = this.z4;
    this.$S.Q(_.E.n, this.DW, this);
    this.$S._.style.float = "right";
    this.$S._.style.marginRight = "0";
    this.OR = J.m("span", "fitem imageset scrollable");
    this.OR.style.height = "30em";
    this.z4._.appendChild(this.OR);
    this.OR.addEventListener("scroll", this.aLb.bind(this), !1);
    this.F0 = J.m("button", "fitem");
    J.F(this.F0, "width:7em;");
    this.F0.textContent = "SubFamily Name \u25BC";
    this._.appendChild(this.F0);
    J.PD(this.F0, this.ak7.bind(this));
    this.cM = new kV();
    this.cM.parent = this;
    this.cM._ = J.m("div", "floatcont");
    this.arq = J.m("span", "fitem imageset scrollable");
    this.cM._.appendChild(this.arq);
    this.ayB = this.avm.bind(this);
    this.ap4 = this.akp.bind(this);
    this.qV = this.aoO.bind(this);
    this.ayI = this.a20.bind(this);
    this.aqX = this.afj.bind(this);
    this.axf = this.A9.bind(this);
  }
  fZ.prototype = new kV();
  fZ._f = [];
  fZ.prototype.a0c = function (j) {
    jK.J9.yl(
      j.target.V(),
      function () {
        this.q();
        this.DW();
      }.bind(this),
      function () {
        this.aiV.q(!1);
      }.bind(this)
    );
    this.DW();
  };
  fZ.prototype.aLb = function (j) {
    var q = this.OR.scrollTop,
      m = this.aDW,
      n = Math.floor(q / 27),
      G = Math.min(n + 20, m.length);
    for (var y = n; y < G; y++) this.asV(m[y]);
  };
  fZ.prototype.awp = function () {
    var j = new fd(_.E.c, !0);
    j.data = { R: _.Y.z1 };
    this.k(j);
  };
  fZ.prototype.T = function () {
    this.$S.T();
    this.aBb.T();
    this.aiV.q(jK.J9.sM());
    this.PT.hk(J.CP("tools/cshape", null, "autoscale"));
  };
  fZ.prototype.aE7 = function (j) {
    this.PT.q(!this.PT.sM());
    this.DW(null, null, !0);
  };
  fZ.prototype.yS = function (j) {
    this.Bs = this.tX.V().toLowerCase();
    this.DW();
  };
  fZ.prototype.ak7 = function (j) {
    J.iO(j);
    this.U0 = null;
    var q = j.currentTarget,
      m = q.getBoundingClientRect(),
      n = q == this.Rb,
      G = n ? this.z4 : this.cM;
    if (J.JO(G._)) {
      this.axC(G);
      return;
    }
    if (!n && this.Oe() == null) return;
    var W = new fd(_.E.c, !0);
    W.data = { R: _.Y.wQ, Tf: G, x: m.left, y: m.top + m.height };
    this.k(W);
    if (n) {
      this.DW(null, !0, !0);
    }
  };
  fZ.prototype.Oe = function (j) {
    if (j == null) j = this.v4;
    return j == null ? null : this.ZX.a2()[j];
  };
  fZ.prototype.aoO = function (j) {
    this.PL(this.hi, this.aIA, !0);
    this.aFd = !0;
  };
  fZ.prototype.a20 = function (j) {
    this.aIA = null;
    this.hi = j.currentTarget.firstChild.nextSibling.textContent;
    if (this.U0 == null) this.U0 = this.V();
    this.a9s = setTimeout(this.qV, 250);
  };
  fZ.prototype.afj = function (j) {
    this.aIA = j.currentTarget.firstChild.textContent;
    this.hi = null;
    if (this.U0 == null) this.U0 = this.V();
    this.a9s = setTimeout(this.qV, 250);
  };
  fZ.prototype.A9 = function (j) {
    this.a8M = null;
    this.aj7 = null;
    clearTimeout(this.a9s);
    if (this.aFd) {
      this.aFd = !1;
      this.q(this.U0, this.ZX);
      this.k(new fd(_.E.n, !1));
    }
  };
  fZ.prototype.avm = function (j) {
    var q = j.currentTarget.firstChild.nextSibling.textContent;
    if (j.target.tagName.toLowerCase() == "button") {
      var m = this.C6.slice(0),
        n = m.indexOf(q);
      if (n == -1) {
        m = m.slice(Math.max(0, m.length - 99));
        m.push(q);
      } else m.splice(n, 1);
      var G = new fd(_.E.c, !0);
      G.data = { R: _.Y.fh, rw: fG.Hp, jt: m };
      this.k(G);
      this.DW();
    } else {
      this.A9(j);
      this.PL(q, null);
    }
  };
  fZ.prototype.akp = function (j) {
    this.A9(j);
    this.PL(null, j.currentTarget.firstChild.textContent);
  };
  fZ.prototype.PL = function (j, q, m) {
    var n = j == null ? this.cM : this.z4,
      G = this.ZX;
    if (j == null) j = this.Oe()[0];
    else {
      var W = G.$Y(j),
        k = this.Oe();
      q = jK.Ed(W, k ? k[1] : "regular");
    }
    var T = G.L2(j, q)[2];
    if (T == this.v4) return;
    if (!m) {
      var b = fZ._f;
      for (var y = 0; y < b.length; y++) if (b[y][0][0] == j) b.splice(y, 1);
      b.push([this.Oe(T), Date.now()]);
      b.sort(function (c, a) {
        return a[1] - c[1];
      });
      b = b.slice(0, 10);
    }
    this.q(T, G);
    this.k(new fd(_.E.n, !1));
    if (m == null) this.axC(n);
    this.DW();
  };
  fZ.prototype.axC = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = { R: _.Y.q4, Tf: j };
    this.k(q);
  };
  fZ.prototype.V = function () {
    return this.v4;
  };
  fZ.prototype.q = function (j, q, m) {
    var n = this.ZX;
    if (j != null) this.v4 = j;
    else j = this.v4;
    if (q) this.ZX = q;
    else q = this.ZX;
    if (m) this.C6 = m;
    else m = this.C6;
    if (j != null) {
      var G = this.Oe(j),
        W,
        k;
      if (G == null) {
        W = "- " + j;
        k = "-------";
      } else {
        W = G[0];
        k = G[1];
        var T = q.$Y(W);
        T.sort(jK.aJA);
        this.arq.textContent = "";
        for (var y = 0; y < T.length; y++) {
          var G = q.L2(W, T[y]);
          if (!this.$S.p9(G)) continue;
          var b = this.my(G, !1);
          this.arq.appendChild(b);
        }
      }
      this.Rb.textContent = W.substring(0, 15) + " \u25BC";
      this.Rb.setAttribute("title", W + ', "' + j + '"');
      this.F0.textContent = k.substring(0, 10) + " \u25BC";
      this.F0.setAttribute("title", k);
    }
  };
  fZ.prototype.DW = function (j, q, m) {
    var n = this.Oe(),
      G = this.C6,
      W = this.ZX.QP();
    this.aDW = [];
    var k = this.aiV.V();
    for (var T in W) {
      var b = G.indexOf(T) != -1,
        c = this.ZX.$Y(T),
        a = !1;
      for (var y = 0; y < c.length; y++) {
        var f = this.ZX.L2(T, c[y]),
          U = !0;
        if (this.Bs.length > 0 && f[0].toLowerCase().indexOf(this.Bs) == -1)
          U = !1;
        else if (!this.$S.p9(f)) U = !1;
        else if (this.PT.sM() && !b) U = !1;
        else if (f[5] == "--loc" && !k) U = !1;
        if (U) a = !0;
      }
      var Z = this.Ha[T];
      if (Z == null) {
        var h = jK.Ed(W[T], "regular"),
          u = this.ZX.L2(T, h),
          Z = this.my(u, !0);
        this.Ha[T] = Z;
        this.OR.appendChild(Z);
        this.amQ[T] = "[true,false,false]";
      }
      if (a) this.aDW.push(T);
      var i = n != null && n[0] == T;
      this.ayV[T] = "[" + a + "," + i + "," + b + "]";
      if (!q) this.asV(T);
    }
    if (n && m) {
      var x = this.Ha[n[0]];
      this.OR.scrollTop = x.offsetTop - 210;
    }
    this.aLb();
    if (this.aD1 == null)
      this.aD1 = function () {
        J.dI(this.x1);
        for (var y = 1; y < fZ._f.length; y++) {
          var f = fZ._f[y][0],
            Z = this.my(f, !0);
          this.fS(Z, f, !0);
          this.x1.appendChild(Z);
        }
      }.bind(this);
    setTimeout(this.aD1, 200);
  };
  fZ.prototype.asV = function (j) {
    var q = this.Ha[j];
    if (q.firstChild == null) {
      var m = this.ZX.QP(),
        n = jK.Ed(m[j], "regular"),
        G = this.ZX.L2(j, n);
      this.fS(q, G, !0);
    }
    var W = this.amQ[j],
      k = this.ayV[j];
    if (W == k) return;
    var T = JSON.parse(W),
      b = JSON.parse(k);
    if (T[0] != b[0] || T[1] != b[1]) {
      var c = b[0] ? "" : "display:none; ";
      if (b[1]) c += "background-color:rgba(0,0,0,0.13);";
      J.F(q, c);
    }
    if (T[2] != b[2]) J.F(q.firstChild, "opacity: " + (b[2] ? "1" : "0.2"));
    this.amQ[j] = k;
  };
  fZ.prototype.my = function (j, q) {
    var m = J.m("div", "fontitem");
    if (!q) this.fS(m, j, q);
    return m;
  };
  fZ.prototype.fS = function (j, q, m) {
    var n = q[m ? 0 : 1],
      G = m ? this.ayB : this.ap4,
      W = m ? this.ayI : this.aqX,
      c = "";
    j.addEventListener("click", G, !1);
    j.addEventListener("mouseover", W);
    j.addEventListener("mouseout", this.axf);
    if (m) j.appendChild(J.m("button", "star"));
    var k = J.m("span", "label");
    k.setAttribute("title", n);
    k.textContent = n;
    j.appendChild(k);
    var T = J.IC(),
      b = 1 / T,
      a = jK.e$ * b,
      f = jK.FH * b;
    if (1 < T && T < 1.5) c = "width:" + a + "px; height:" + f + "px;";
    var U = J.m("span", "thumb gsicon");
    if (q.Ti) {
      c += "background: url(" + q.Ti + ");";
      if (1 < T && T < 1.5) c += "background-size: " + a + "px " + f + "px;";
    } else {
      var Z = Math.ceil(FNTS.list.length / jK.cols),
        h = Math.floor(q.Wy / jK.cols),
        u = q.Wy - h * jK.cols,
        i = u * jK.e$,
        x = h * jK.FH;
      if (1 < T && T < 1.5) {
        c += "background-size: " + jK.cols * a + "px " + Z * f + "px;";
        i *= b;
        x *= b;
      }
      c += "background-position:-" + i + "px -" + x + "px;";
    }
    J.F(U, c);
    j.appendChild(U);
  };
  function bM(j, q) {
    kV.call(this);
    this._ = J.m("button", "fitem bbtn");
    this._.addEventListener("click", this.qy.bind(this), !1);
    this.cx = new kV();
    this.cx._ = J.m("div", "floatcont");
    this.cx.parent = this;
    this.sH = J.m("div", "flexrow");
    this.cx._.appendChild(this.sH);
    this.pa = q;
    this.P$ = [];
    this.pS = [];
    var m = this.sH,
      n = J.m("div", ""),
      G = J.m("div", "");
    m.appendChild(n);
    m.appendChild(G);
    this.YW = [];
    for (var y = 0; y < FNTS.cats.length; y++)
      this.YW.push({ name: FNTS.cats[y], index: y, df: 0 });
    this.u6 = new av([7, 0]);
    this.u6.q(!0);
    this.u6.Q(_.E.n, this.a94, this);
    n.appendChild(this.u6._);
    this.a4z = J.m("div", "vlist marged scrollable");
    J.F(this.a4z, "width:10.3em; height:" + j + "em; ");
    n.appendChild(this.a4z);
    this.$N = [];
    for (var y = 0; y < this.YW.length; y++) {
      var W = this.YW[y],
        k = new av(W.name);
      this.$N.push(k);
      k.Q(_.E.n, this.ati, this);
      k.q(!0);
      this.a4z.appendChild(k._);
      this.P$.push(1);
    }
    this.aGd = new av([7, 0]);
    this.aGd.Q(_.E.n, this.at2, this);
    this.aKT = J.m("div", "vlist marged scrollable");
    J.F(this.aKT, "width:8.6em; height:" + (j + 1.5) + "em; ");
    G.appendChild(this.aKT);
    this.Z4 = [];
    for (var y = 0; y < FNTS.subsetNames.length; y++) {
      var k = new av(FNTS.subsetNames[y]);
      this.Z4.push(k);
      k.Q(_.E.n, this.abO, this);
      k.q(!1);
      this.aKT.appendChild(k._);
      this.pS.push(k.V() ? 1 : 0);
    }
  }
  bM.prototype = new kV();
  bM.prototype.an$ = function (j) {
    var q = this.Z4;
    for (var y = 0; y < q.length; y++) {
      var m = ((j >>> y) & 1) == 1;
      this.pS[y] = m;
      q[y].q(m);
    }
  };
  bM.prototype.a4D = function () {
    return this.sH;
  };
  bM.prototype.T = function () {
    this._.textContent = this.pa ? this.pa : g$.get([25, 1, 0]) + " \u25BC";
    this.u6.T();
    this.aGd.T();
  };
  bM.prototype.qy = function (j) {
    var q = this._.getBoundingClientRect(),
      m = new fd(_.E.c, !0);
    m.data = { R: _.Y.wQ, Tf: this.cx, x: q.left, y: q.top + q.height, LR: !0 };
    this.k(m);
  };
  bM.prototype.p9 = function (j) {
    if (this.P$[j[4]] == 0) return !1;
    else
      for (var q = 0; q < this.pS.length; q++)
        if (this.pS[q] == 1 && ((j[3] >>> q) & 1) == 0) return !1;
    return !0;
  };
  bM.prototype.a94 = function (j) {
    var q = j.target.V(),
      m = this.$N,
      n = this.P$;
    for (var y = 0; y < m.length; y++) {
      m[y].q(q);
      n[y] = q ? 1 : 0;
    }
    this.k(new fd(_.E.n, !1));
  };
  bM.prototype.at2 = function (j) {
    var q = j.target.V(),
      m = this.Z4,
      n = this.pS;
    for (var y = 0; y < m.length; y++) {
      m[y].q(q);
      n[y] = q ? 1 : 0;
    }
    this.k(new fd(_.E.n, !1));
  };
  bM.prototype.ati = function (j) {
    var y = this.$N.indexOf(j.target),
      q = this.YW[y].index;
    this.P$[q] = 1 - this.P$[q];
    this.k(new fd(_.E.n, !1));
    this.aK7(this.$N, this.u6);
  };
  bM.prototype.abO = function (j) {
    var y = this.Z4.indexOf(j.target);
    this.pS[y] = 1 - this.pS[y];
    this.k(new fd(_.E.n, !1));
  };
  bM.prototype.aK7 = function (j, q) {
    var m = !0;
    for (var y = 0; y < j.length; y++) m = m && j[y].V();
    q.q(m);
  };
  function iB(j, q, m) {
    f$.call(this, q, !0, "gradientbutton", 18 * 13, 10 * 13, fG.WX);
    this.UP = -1;
    this.vH = -1;
    this.a7G = null;
    this.afX = j;
    this.EU = m;
  }
  iB.prototype = new f$();
  iB.prototype.O0 = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = {
      R: _.Y.s0,
      kO: "gradienteditor",
      MV: this.fB,
      cy: this.acl.bind(this),
      kX: this.EU,
    };
    this.k(q);
  };
  iB.prototype.acl = function (j) {
    this.q(j);
    this.k(new fd(_.E.n));
  };
  iB.prototype.oz = function (j, q) {
    this.UP = j;
    this.vH = q;
    this.Py();
  };
  iB.prototype.Py = function () {
    if (this.fB == null) return;
    var j = JSON.stringify(this.fB) + "," + this.UP + "," + this.vH;
    if (j == this.a7G) return;
    this.a7G = j;
    var q = Math.floor(80 * J.IC()),
      m = Math.floor(16 * J.IC()),
      n = L.Pr.hj(this.fB, q, m, 0, this.UP, this.vH);
    this.S_.setAttribute("src", n);
    J.Mg(this.S_, q, m);
  };
  iB.prototype.V = function () {
    var j;
    if (this.afX) j = L.Pr.a72(this.fB, this.UP, this.vH);
    else j = B.S(this.fB);
    return j;
  };
  function iN(j) {
    f$.call(this, j, !1, "swatchbutton", 16 * 13, 9.5 * 13, fG.Ns);
  }
  iN.prototype = new f$();
  function hc(j) {
    f$.call(this, null, !0, "swatchbutton", 16 * 13, 8.75 * 13, fG.cS);
    this.O3 = j;
  }
  hc.prototype = new f$();
  hc.prototype.Q1 = function (j) {
    var q = this.dd,
      m = j.target.V();
    this.q(m == 0 ? [] : q.JR[m - 1][1], q);
    this.k(new fd(_.E.n));
  };
  hc.prototype.O0 = function (j) {
    var q = this.fB;
    if (q == null || q.length == 0) q = [0, 0, 0];
    g8.at6(q, this, this.tS.bind(this));
  };
  hc.prototype.tS = function (j) {
    var q = j;
    if (typeof j == "number") {
      q = B.b4(j, 1);
      q = [q.o, q.i, q.X];
    }
    this.q(q);
    this.k(new fd(_.E.n));
  };
  hc.prototype.q = function (j, q) {
    this.fB = j;
    this.Py(q);
  };
  hc.prototype.Py = function (j) {
    var q = Math.floor(20 * J.IC()),
      m = Math.floor(20 * J.IC()),
      n = J.m("canvas"),
      G = n.getContext("2d");
    n.width = q;
    n.height = m;
    g8.HL(G, this.fB, j, q, m, 0, 0, this.O3 == 1);
    var W = G.canvas.toDataURL("png");
    this.S_.setAttribute("src", W);
    J.Mg(this.S_, q, m);
  };
  hc.prototype.c2 = function () {
    if (!this.Dd) return;
    var j = Math.floor(20 * J.IC()),
      q = Math.floor(20 * J.IC()),
      m = [],
      n = [],
      G = this.dd,
      W = G.JR,
      k = J.m("canvas"),
      T = k.getContext("2d");
    k.width = j;
    k.height = q;
    W = [["None", []]].concat(W);
    for (var y = 0; y < W.length; y++) {
      n.push(W[y][0]);
      g8.HL(T, W[y][1], G, j, q, 0, 0);
      var b = T.canvas.toDataURL("png");
      m.push(b);
    }
    this.Op.GW(m, n, j, q);
    this.Dd = !1;
  };
  hc.prototype.V = function () {
    return B.S(this.fB);
  };
  function b6(j, q, m) {
    kV.call(this);
    this._ = J.m(m ? "div" : "span");
    var n = (this.ZU = J.m("input"));
    this.ZU.setAttribute("type", "file");
    if (q) n.setAttribute("multiple", "");
    this.ZU.addEventListener("change", this.al0.bind(this), !1);
    this.aDw = this.xA.bind(this);
    this.rb = {};
    this.awk = 0;
    this._5 = j;
    var G = (this.LO = new kv(g$.get(j) + " (0)", null, null, !0));
    this._.appendChild(G._);
    G.addEventListener("click", function (W) {
      n.click();
    });
    if (m) {
      this.ST = J.m("div", "scrollable");
      J.F(this.ST, "height:120px; width:100%; line-height:1.5em;");
      this._.appendChild(this.ST);
      this.ip();
    }
  }
  b6.prototype = new kV();
  b6.prototype.q = function (j) {
    this.rb = j;
    this.ip();
  };
  b6.prototype.V = function (j) {
    return this.rb;
  };
  b6.prototype.al0 = function (j) {
    var q = j.target.files;
    this.awk = q.length;
    this.rb = {};
    for (var y = 0; y < q.length; y++) {
      var m = q[y],
        n = new FileReader();
      n.onload = this.aDw;
      n.xn = m.name;
      n.readAsArrayBuffer(m);
    }
  };
  b6.prototype.xA = function (j) {
    var q = (this.rb[j.target.xn] = new Uint8Array(j.target.result));
    this.awk--;
    if (this.awk == 0) {
      this.ip();
      this.k(new fd(_.E.n));
      this.ZU.value = null;
    }
  };
  b6.prototype.ip = function () {
    var j = this.rb;
    this.LO.hk(g$.get(this._5) + " (" + Object.keys(j).length + ")");
    var q = this.ST;
    if (q == null) return;
    J.dI(q);
    var m = [];
    for (var n in j) m.push(n);
    m.sort();
    for (var y = 0; y < m.length; y++) {
      var G = J.m("div");
      G.textContent = m[y];
      q.appendChild(G);
    }
  };
  function aY(j, q, m, n, G) {
    if (j == null) j = !1;
    if (q == null) q = !1;
    if (m == null) m = !1;
    kV.call(this);
    this.Kk = new ea();
    this.i1 = new ea();
    this.a7k = 72;
    this.Ur = 72;
    this.aM5 = n;
    this.LU = !0;
    this.tn = !1;
    this._ = J.m("span");
    this.pB = new k7([12, 41], 0, 0, null, 0, !1, !0, 4);
    this._.appendChild(this.pB._);
    this.pB.Q(_.E.n, this.v2, this);
    var W = ["px", "%"];
    if (j) W = W.concat(["cm", "mm", "in"]);
    if (G) {
      W = [
        [12, 76, 2],
        [12, 76, 6],
      ];
      if (j)
        W = W.concat([
          [12, 76, 4],
          [12, 76, 5],
          [12, 76, 3],
        ]);
    }
    this.HE = new f1(null, W);
    this._.appendChild(this.HE._);
    J.Ft(this._);
    this.HE.Q(_.E.n, this.v2, this);
    this.Fq = new k7([12, 42], 0, 0, null, 0, !1, !0, 4);
    this._.appendChild(this.Fq._);
    this.Fq.Q(_.E.n, this.v2, this);
    this.AB = new kv(
      '<img src="' + PIMG["lrs/chain"] + '" class="autoscale gsicon" />',
      !1,
      [12, 51]
    );
    this.AB.Q("click", this.v2, this);
    this.sw = new aD("");
    this.sw._.style.margin = "0";
    this.sw._.style.padding = "0";
    if (q) {
      this._.appendChild(this.AB._);
      this._.appendChild(this.sw._);
      this.AB.mb();
    } else {
      var k = (this.aa3 = new kv("\u21C6", !1, null, !0));
      k.Q("click", this.Gh, this);
      this._.appendChild(k._);
    }
    this.nh = new k7("DPI", 0, 0, null, 3, !1, !0, 4);
    this.fL = new f1(null, [
      ["VAR0 / Inch", [12, 76, 2]],
      ["VAR0 / Cm", [12, 76, 2]],
    ]);
    if (j && !n) {
      J.Ft(this._);
      this._.appendChild(this.nh._);
      this._.appendChild(this.fL._);
    }
    this.fL.Q(_.E.n, this.v2, this);
    this.nh.Q(_.E.n, this.v2, this);
    this.Jw = new av([12, 23, 1]);
    this.Jw.Q(_.E.n, this.v2, this);
    if (m) {
      J.Ft(this._);
      this._.appendChild(this.Jw._);
    }
    J.Ft(this._);
  }
  aY.prototype = new kV();
  aY.prototype.X3 = function (j, q) {
    this.pB.BW.style.width = this.Fq.BW.style.width =
      (j - 78 - this.AB.yv()) / 2 + "px";
  };
  aY.prototype.pM = function () {
    var j = this.aM5;
    this.pB.pM();
    this.Fq.pM();
    this.HE.pM();
    var q = this._;
    J.dI(q);
    this.HE._.style.marginRight = "0";
    q.appendChild(this.pB._);
    if (this.aa3) q.appendChild(this.aa3._);
    else q.appendChild(this.AB._);
    q.appendChild(this.Fq._);
    q.appendChild(this.HE._);
    this.nh.pM();
    this.fL.pM();
    if (!j) {
      J.Ft(q);
      q.appendChild(this.nh._);
      q.appendChild(this.fL._);
    }
  };
  aY.prototype.j$ = function () {
    this.pB.j$();
  };
  aY.prototype.a0_ = function (j, q) {
    this.LU = j;
    if (q != null) this.tn = q;
    if (!this.LU && !this.tn && this.HE.V() == 0) {
      this.HE.q(4);
      this.mB();
    }
  };
  aY.prototype.aHw = function (j) {
    this.AB.q(j);
  };
  aY.prototype.T = function () {
    this.pB.T();
    this.Fq.T();
    this.nh.T();
    this.fL.T();
    this.AB.T();
    this.Jw.T();
    this.HE.T();
  };
  aY.prototype.Gh = function (j) {
    var q = this.i1.x;
    this.i1.x = this.i1.y;
    this.i1.y = q;
    this.mB();
    this.k(new fd(_.E.n, !1));
  };
  aY.prototype.v2 = function (j) {
    if (j.target == this.HE && !this.LU && !this.tn && this.HE.V() == 0)
      this.HE.q(4);
    if (j.target == this.HE || j.target == this.Jw) {
      this.mB();
      return;
    }
    if (j.target == this.AB) j.target.q(!j.target.V());
    if (j.target == this.fL) window.locStor.setItem("dpiUnit", this.fL.V());
    var q = this.Kk,
      m = parseFloat(this.pB.V());
    if (isNaN(m)) m = 1;
    var n = parseFloat(this.Fq.V());
    if (isNaN(n)) n = 1;
    var G = this.nh.V() * [1, 2.54][this.fL.V()],
      W = this.HE.V();
    if (this.LU) {
      var k = this.Ur;
      if (W == 1) {
        m = this.Kk.x * (m / 100);
        n = this.Kk.y * (n / 100);
      }
      var T = [1, 1, 2.54 / k, 25.4 / k, 1 / k][W];
      m /= T;
      n /= T;
      if (this.Jw.V()) {
        m += this.Kk.x;
        n += this.Kk.y;
      }
      if (j.target == this.nh) {
        var b = G;
        if (!this.tn) {
          var c = b / k;
          m *= c;
          n *= c;
        }
        k = b;
      }
      if (this.AB.V()) {
        if (j.target == this.pB) n = m * (q.y / q.x);
        else m = n * (q.x / q.y);
      }
      m = Math.max(Math.abs(m), 1);
      n = Math.max(Math.abs(n), 1);
    } else {
      var k = this.a7k;
      if (j.target == this.nh) k = G;
      else {
        if (this.AB.V()) {
          if (j.target == this.pB) n = m * (q.y / q.x);
          else m = n * (q.x / q.y);
        }
        var T = [1, 1, 2.54 / k, 25.4 / k, 1 / k][W],
          a = m / (W == 1 ? 100 : q.x * T);
        k = k / a;
      }
      m = q.x;
      n = q.y;
    }
    this.i1 = new ea(Math.round(m), Math.round(n));
    this.Ur = k;
    this.mB();
    this.k(new fd(_.E.n, !1));
  };
  aY.prototype.Nw = function (y) {
    this.HE.q(y);
    this.mB();
  };
  aY.prototype.alc = function () {
    return this.HE.V();
  };
  aY.prototype.q = function (j, q, m) {
    var n = window.locStor.getItem("dpiUnit");
    if (n != null) this.fL.q(n);
    if (m != !0) this.Kk = j.P();
    this.i1 = j.P();
    if (q != null) {
      this.a7k = q;
      this.Ur = q;
    }
    this.mB();
  };
  aY.prototype.mB = function () {
    var j = this.i1.x,
      q = this.i1.y,
      m = this.Ur,
      n = (j / q).toFixed(3);
    while (n.charAt(n.length - 1) == "0") n = n.substring(0, n.length - 1);
    if (n.charAt(n.length - 1) == ".") n = n.substring(0, n.length - 1);
    var G = "  " + n + " : 1",
      W = function (a, f) {
        while (f != 0) {
          var U = f;
          f = a % f;
          a = U;
        }
        return a;
      },
      k = W(j, q);
    if (Math.min(j, q) / k < 10)
      G = "  " + Math.round(j / k) + " : " + Math.round(q / k);
    this.sw.q(G);
    if (this.Jw.V()) {
      j -= this.Kk.x;
      q -= this.Kk.y;
    }
    var T = this.HE.V();
    if (T == 1) {
      if (this.LU) {
        j = (100 * j) / this.Kk.x;
        q = (100 * q) / this.Kk.y;
      } else {
        j = q = (100 * this.a7k) / this.Ur;
      }
    } else {
      j = Math.round(j);
      q = Math.round(q);
    }
    var b = [1, 1, 2.54 / m, 25.4 / m, 1 / m][T];
    j *= b;
    q *= b;
    var c = T == 1 || T == 2 || T == 4 ? 2 : 0;
    this.pB.nK(c);
    this.Fq.nK(c);
    this.pB.q(j);
    this.Fq.q(q);
    this.nh.q(m * [1, 1 / 2.54][this.fL.V()]);
  };
  aY.prototype.V = function () {
    return this.i1.P();
  };
  aY.prototype.HB = function () {
    return this.Ur;
  };
  function eh(j, q, m) {
    kV.call(this);
    var n =
      j == 0 ? ["W", "H", "X", "Y"] : ["\u250F", "\u2517", "\u2513", "\u251B"];
    this.Dm = j;
    this.aCC = q;
    this.afh = 1;
    this.abj = [1, 1, 0];
    var G = (this._ = J.m("div", "numlist")),
      W = J.m("div", "flexrow");
    G.appendChild(W);
    var k = J.m("div"),
      T = J.m("div");
    W.appendChild(k);
    W.appendChild(T);
    J.F(k, "width:100px");
    J.F(T, "width:100px");
    var b = (this.Fi = []);
    for (var y = 0; y < 4; y++) {
      var c = new k7(n[y], 0, 0, null, 2, !1, !0, 4, null, m && y < 2);
      c.Q(_.E.n, this.v2, this);
      (y < 2 ? k : T).appendChild(c._);
      b[y] = c;
    }
    b[4] = new av(j == 0 ? [12, 51] : [12, 91, 2]);
    b[4].q(!0);
    G.appendChild(b[4]._);
  }
  eh.prototype = new kV();
  eh.prototype.T = function () {
    var j = this.Fi;
    for (var y = 0; y < 5; y++) j[y].T();
    if (this.Dm == 0) J.eU(j[0], j[1]);
  };
  eh.prototype.q = function (j, q) {
    if (q) this.abj = q;
    q = this.abj;
    var m = this.Dm == 0 ? [j[2], j[3], j[0], j[1]] : [j[0], j[3], j[1], j[2]];
    this.afh = j[2] / j[3];
    for (var y = 0; y < 4; y++) {
      var n = this.Fi[y];
      n.nK(q[2] == 0 && this.aCC ? 0 : 2);
      n.q(B.uO.J2(m[y], q[0], q[1], q[2]));
    }
  };
  eh.prototype.V = function () {
    var j = [],
      q = this.abj;
    for (var y = 0; y < 4; y++) {
      var m = B.uO.Fs(this.Fi[y].V(), q[0], q[1], q[2]);
      j[y] = this.aCC ? Math.round(m) : m;
    }
    var n = this.Dm == 0 ? [j[2], j[3], j[0], j[1]] : [j[0], j[2], j[3], j[1]];
    return n;
  };
  eh.prototype.v2 = function (j) {
    var q = this.Dm,
      m = this.Fi.indexOf(j.currentTarget),
      n = this.V(),
      G = this.Fi[4].V();
    if (q == 0) {
      n[2] = Math.max(1, n[2]);
      n[3] = Math.max(1, n[3]);
      if (G && m == 0) n[3] = n[2] / this.afh;
      if (G && m == 1) n[2] = n[3] * this.afh;
    }
    if (q == 1) {
      n[m] = Math.max(0, n[m]);
      if (G) for (var y = 0; y < 4; y++) n[y] = n[m];
    }
    this.q(n, null);
    this.k(new fd(_.E.n, !1));
  };
  function du(j) {
    kV.call(this);
    this.anW = 0;
    this.j8 = [0, 0, 1, 1, 100, 100];
    this.kk = [10, 5, 1, 1, 4, 3, 3, 2, 16, 9];
    this.aeP = 0;
    this.afy = 72;
    this.a22 = j;
    this._ = J.m("span", "fitem");
    this.vn = new f1(
      null,
      [
        [12, 89, 0],
        [12, 89, 1],
        [12, 89, 2],
        "Original Ratio",
        "1 : 1",
        "4 : 3",
        "3 : 2",
        "16 : 9",
      ],
      [3, 5]
    );
    this._.appendChild(this.vn._);
    this.vn.Q(_.E.n, this.v2, this);
    this.pB = new k7("W", 0, 0, null, 2, !1, !0);
    this._.appendChild(this.pB._);
    this.pB.Q(_.E.n, this.v2, this);
    var q = (this.Yp = new kv("\u21C4", !1, null, !0));
    q.Q("click", this.Gh, this);
    this._.appendChild(q._);
    this.Fq = new k7("H", 0, 0, null, 2, !1, !0);
    this._.appendChild(this.Fq._);
    this.Fq.Q(_.E.n, this.v2, this);
    this.nh = new k7("New DPI", 0, 0, null, 3, !1, !0, 4);
    this.nh.Q(_.E.n, this.v2, this);
    this.q({ t: 0, x: 0, y: 0 });
  }
  du.prototype = new kV();
  du.prototype.FQ = function (j) {
    this.kk[0] = j[0];
    this.kk[1] = j[1];
    var q = this.V();
    this.afy = j[2];
    this.aeP = j[3];
    this.q(q);
  };
  du.prototype.T = function () {
    J.eU(this.pB, this.Fq);
    this.nh.T();
    this.vn.T();
  };
  du.prototype.Gh = function (j) {
    var q = this.Fq.V();
    this.Fq.q(this.pB.V());
    this.pB.q(q);
    this.v2(j);
  };
  du.prototype.v2 = function (j) {
    if (j.target == this.vn) {
      var y = this.vn.V(),
        q = this.j8,
        m = this.nh._;
      if (y == 2 && m.parentNode == null && this.a22) this._.appendChild(m);
      if (y != 2 && m.parentNode != null) this._.removeChild(m);
      if (y > 2) {
        y -= 3;
        var n = this.kk[2 * y],
          G = this.kk[2 * y + 1];
        q[2] = n;
        q[3] = G;
        this.pB.q(n);
        this.Fq.q(G);
        this.vn.q(1);
      }
      var W = this.V();
      q[this.anW * 2] = W.x;
      q[this.anW * 2 + 1] = W.y;
      this.anW = W.t;
      this.q({ t: W.t, x: q[W.t * 2], y: q[W.t * 2 + 1] });
    }
    if (this.pB.V() < 1) this.pB.q(1);
    if (this.Fq.V() < 1) this.Fq.q(1);
    this.k(new fd(_.E.n, !1));
  };
  du.prototype.q = function (j) {
    this.vn.q(j.t);
    var q = j.x,
      m = j.y;
    if (j.t == 2) {
      var n = this.aeP,
        G = this.afy,
        W = this.kk;
      q = B.uO.J2(j.x, G, W[0], n);
      m = B.uO.J2(j.y, G, W[1], n);
    }
    this.pB.q(q);
    this.Fq.q(m);
    if (j.t == 0) {
      this.pB.Ub();
      this.Fq.Ub();
      this.Yp.Ub();
    } else {
      this.pB.hC();
      this.Fq.hC();
      this.Yp.hC();
    }
  };
  du.prototype.V = function () {
    var j = this.pB.V(),
      q = this.Fq.V(),
      m = this.vn.V();
    if (m == 2) {
      var n = this.aeP,
        G = this.afy,
        W = this.kk;
      j = B.uO.Fs(j, G, W[0], n);
      q = B.uO.Fs(q, G, W[1], n);
      j = Math.round(j);
      q = Math.round(q);
    }
    var k = { t: m, x: j, y: q },
      T = this.nh.V();
    if (this.a22 && T != 0) k.zv = T;
    return k;
  };
  function f6(j) {
    kV.call(this);
    this._ = J.m("span", "");
    this.aCb = j;
    var q = j ? 100 : 300;
    this.tw = new dV("Off X", -q, q, j ? "%" : "px", 0, !j);
    this.og = new dV("Off Y", -q, q, j ? "%" : "px", 0, !j);
    this.tw.Q(_.E.n, this.v2, this);
    this.og.Q(_.E.n, this.v2, this);
    this._.appendChild(this.tw._);
    this._.appendChild(this.og._);
  }
  f6.prototype = new kV();
  f6.prototype.T = function () {
    this.tw.T();
    this.og.T();
  };
  f6.prototype.v2 = function (j) {
    this.k(new fd(_.E.n, !1));
  };
  f6.prototype.aKF = function (j) {
    this.tw.q(j.x);
    this.og.q(j.y);
  };
  f6.prototype.aCx = function () {
    return new ea(this.tw.V(), this.og.V());
  };
  f6.prototype.q = function (j, q) {
    var m = j.Hrzn.v,
      n = j.Vrtc.v;
    if (this.aCb) {
      m = m.val;
      n = n.val;
    }
    this.tw.q(m);
    this.og.q(n);
    if (q == !0) this.v2();
  };
  f6.prototype.V = function () {
    var j = this.tw.V(),
      q = this.og.V();
    if (this.aCb)
      return {
        classID: "Pnt",
        Hrzn: { t: "UntF", v: { type: "#Prc", val: j } },
        Vrtc: { t: "UntF", v: { type: "#Prc", val: q } },
      };
    else
      return {
        classID: "Pnt",
        Hrzn: { v: j, t: "doub" },
        Vrtc: { v: q, t: "doub" },
      };
  };
  function cr(j, q) {
    kV.call(this);
    this._ = J.m("button");
    this.nC = [
      { mm: 3, QJ: [] },
      { mm: 3, QJ: [12, 6], kv: 0 },
      { mm: 3, QJ: [0, 6], kv: 1, h0: 1 },
    ];
    this.f$ = eu.TB.i4();
    this.azp = j;
    this.$S = q;
    this._.addEventListener("click", this.qy.bind(this), !1);
    var m = J.m("canvas", "gsicon");
    this.lB = m.getContext("2d");
    this._.appendChild(m);
    var n = J.m("span");
    n.textContent = " \u25BC";
    this._.appendChild(n);
    this.cx = new kV();
    this.cx.parent = this;
    this.cx._ = J.m("div", "floatcont form label6");
    var G = this.cx._;
    J.F(G, "width: 15em;");
    this.Ha = [
      q
        ? new av("Fill First")
        : new f1(
            [12, 40],
            [
              [19, 5, 2],
              [19, 5, 1],
              [19, 5, 0],
            ]
          ),
      new gA(
        [19, 9, 0],
        [
          '<img src="' + PIMG["caps/butt"] + '" class="autoscale gsicon" />',
          '<img src="' + PIMG["caps/round"] + '" class="autoscale gsicon" />',
          '<img src="' + PIMG["caps/square"] + '" class="autoscale gsicon" />',
        ]
      ),
      new gA(
        [19, 9, 1],
        [
          '<img src="' + PIMG["joins/miter"] + '" class="autoscale gsicon" />',
          '<img src="' + PIMG["joins/round"] + '" class="autoscale gsicon" />',
          '<img src="' + PIMG["joins/bevel"] + '" class="autoscale gsicon" />',
        ]
      ),
      new k7("Limit", 1, 50, null, null, null, !0, 2.5),
      new bJ([19, 9, 2]),
    ];
    for (var y = 0; y < this.Ha.length; y++) {
      var W = this.Ha[y];
      if (ei == 0 || y != 0 || !q) G.appendChild(W._);
      W.Q(_.E.n, this.v2, this);
    }
    J.Ft(G);
    this.JA = [];
    var k = this.go.bind(this);
    for (var y = 0; y < this.nC.length; y++) {
      var T = J.m("button", "fitem");
      this.JA.push(T);
      G.appendChild(T);
      T.addEventListener("click", k, !1);
      var m = J.m("canvas", "gsicon"),
        b = m.getContext("2d");
      T.appendChild(m);
      this.a70(b, 40, 20, this.nC[y]);
    }
  }
  cr.prototype = new kV();
  cr.prototype.qy = function (j) {
    var q = this._.getBoundingClientRect(),
      m = new fd(_.E.c, !0);
    m.data = {
      R: _.Y.wQ,
      Tf: this.cx,
      x: q.left,
      y: q.top + q.height + 4,
      LR: !0,
    };
    this.k(m);
  };
  cr.prototype.v2 = function (j) {
    var q = this.Ha,
      m = q.indexOf(j.target),
      n = q[m].V(),
      G = this.f$;
    if (m == 0) G.x2 = this.$S ? (n ? 1 : 0) : n;
    if (m == 1) G.kv = n;
    if (m == 2) G.h0 = n;
    if (m == 3) G.NV = n;
    if (m == 4) {
      var W = (G.QJ = n == "" ? [] : n.split(" ").map(parseFloat));
      if (!this.azp) for (var y = 0; y < W.length; y++) W[y] *= G.mm;
    }
    this.k(new fd(_.E.n, !1));
  };
  cr.prototype.go = function (j) {
    var q = this.JA.indexOf(j.currentTarget),
      m = this.nC[q],
      n = this.f$;
    if (m.kv != null) n.kv = m.kv;
    if (m.h0 != null) n.h0 = m.h0;
    n.QJ = m.QJ.slice(0);
    if (n.mm == null) n.mm = 3;
    for (var y = 0; y < n.QJ.length; y++) n.QJ[y] *= n.mm / m.mm;
    this.k(new fd(_.E.n, !1));
  };
  cr.prototype.T = function () {
    for (var y = 0; y < this.Ha.length; y++) this.Ha[y].T();
  };
  cr.prototype.q = function (j) {
    this.f$ = B.S(j);
    var q = this.Ha;
    if (j.x2 != null) q[0].q(this.$S ? j.x2 == 1 : j.x2);
    if (j.kv != null) q[1].q(j.kv);
    if (j.h0 != null) q[2].q(j.h0);
    if (j.NV != null) q[3].q(j.NV);
    q[3].yl(j.h0 == 0);
    if (j.QJ != null) {
      var m = j.QJ.slice(0);
      if (!this.azp) for (var y = 0; y < m.length; y++) m[y] /= j.mm;
      q[4].q(m.join(" "));
    }
    this.a70(this.lB, 40, 16, j);
  };
  cr.prototype.V = function () {
    return B.S(this.f$);
  };
  cr.prototype.a70 = function (j, q, m, n) {
    J.Q0(j.canvas, q, m);
    var G = n.QJ ? n.QJ : [],
      W = n.mm;
    if (W == null) W = 3;
    else {
      W = Math.min(5, W);
      G = G.slice(0);
      for (var y = 0; y < G.length; y++) G[y] *= W / n.mm;
    }
    j.clearRect(0, 0, q, m);
    j.setLineDash(G);
    j.lineCap = ["butt", "round", "square"][n.kv];
    j.lineJoin = ["miter", "round", "bevel"][n.h0];
    j.lineWidth = W;
    j.beginPath();
    j.moveTo(0, m / 2);
    j.lineTo(q * 2, m / 2);
    j.stroke();
  };
  function bU(j) {
    f$.call(this, j, !1, "contourbutton", 34 * 13, 16 * 13, fG.lG, !0);
    this.tX = new bJ([12, 86], null, 16);
    this.tX.Q("input", this.yS, this);
    this.cx._.appendChild(this.tX._);
    this.aCe = null;
    this.Bs = "";
    this.Yt = null;
    this.q(hR.i4());
  }
  bU.prototype = new f$();
  bU.prototype.T = function () {
    f$.prototype.T.call(this);
    this.tX.T();
  };
  bU.prototype.Q1 = function (j) {
    this.q(this.aCe[j.target.V()[0]]);
    this.k(new fd(_.E.n));
  };
  bU.prototype.yS = function (j) {
    this.Bs = this.tX.V().toLowerCase();
    this.aGD();
  };
  bU.aDu = !1;
  bU.prototype.c2 = function () {
    if (!this.Dd) return;
    var j = this.dd;
    if (j == null || !bU.aDu) {
      var q = new fd(_.E.c, !0);
      q.data = { R: _.Y.mw, rw: { url: "rsrc/basic/fa.zip" } };
      this.k(q);
      bU.aDu = !0;
    } else {
      var m = Date.now(),
        n = Math.floor(38 * J.IC()),
        G = Math.floor(38 * J.IC());
      this.Yt = [];
      for (var y = 0; y < j.length; y++) {
        if (j[y].awR == null) j[y].awR = bU.aiX(j[y], n, G);
        this.Yt.push(j[y].awR);
      }
      this.aGD();
      this.Dd = !1;
    }
  };
  bU.prototype.aGD = function () {
    var j = Math.floor(38 * J.IC()),
      q = Math.floor(38 * J.IC());
    this.aCe = [];
    var m = [],
      n = [],
      G = this.dd;
    for (var y = 0; y < G.length; y++) {
      if (G[y].q6.toLowerCase().indexOf(this.Bs) == -1) continue;
      this.aCe.push(G[y]);
      m.push(this.Yt[y]);
      n.push(G[y].q6);
    }
    this.Op.GW(m, n, j, q);
  };
  bU.prototype.q = function (j) {
    this.fB = bU.P(j);
    this.Py();
  };
  bU.prototype.Py = function () {
    var j = Math.floor(23 * J.IC()),
      q = Math.floor(23 * J.IC()),
      m = bU.aiX(this.fB, j, q);
    this.S_.setAttribute("src", m);
    J.Mg(this.S_, j, q);
  };
  bU.prototype.V = function () {
    return bU.P(this.fB);
  };
  bU.P = function (j) {
    return { q6: j.q6, So: j.So, D: R.tm.Fo(j.D), gX: j.gX.P() };
  };
  bU.Bl = null;
  bU.lB = null;
  bU.aiX = function (j, q, m) {
    var n = j.gX,
      G = Math.min(q / n.r, m / n.$) * 0.9,
      W = new k$();
    W.translate(-0.5, -0.5);
    W.scale(0.95, 0.95);
    W.translate(0.5, 0.5);
    W.scale(G * n.r, G * n.$);
    W.translate((q - G * n.r) / 2, (m - G * n.$) / 2);
    var k = B.l4(q, m);
    k.save();
    k.fillStyle = "black";
    k.clearRect(0, 0, q, m);
    k.setTransform(W.Sd, W.X, W.ra, W.Jy, W.Tt, W.BL);
    B.z.V7(j.D, k, 0, 0);
    k.restore();
    var T = UPNG.encode([k.getImageData(0, 0, q, m).data.buffer], q, m, 0);
    return "data:image/png;base64," + gh.Sk(T);
  };
  function iZ(j) {
    f$.call(this, j, !1, "ICCButton", 16 * 13, 12 * 13, fG.Hd, !0);
    this.Op.MI(1);
  }
  iZ.prototype = new f$();
  iZ.prototype.EM = function () {
    var j =
      "Arabica 12,Ava 614,Azrael 93,Bourbon 64,Byers 11,Clayton 33,Clouseau 54,Cobi 3,Contrail 35,Cubicle 99,Django 25,Domingo 145,Faded 47,Folger 50,Fusion 88,Hyla 68,Chemical 168,Korben 214,Lenox 340,Lucky 64,McKinnon 75,Milo 5,Neon 770,Paladin 1875,Pasadena 21,Pitaya 15,Reeve 38,Remy 24,Sprocket 231,Teigen 28,Trent 18,Tweed 71,Vireo 37,Zed 32,Zeke 39".split(
        ","
      );
    for (var y = 0; y < j.length; y++) j[y] = "luts/" + j[y] + ".CUBE";
    return j;
  };
  iZ.prototype.Q1 = function (j) {
    this.q(this.dd[j.target.V()]);
    this.k(new fd(_.E.n));
  };
  iZ.prototype.c2 = function () {
    if (!this.Dd) return;
    var j = Math.floor(1 * J.IC()),
      q = Math.floor(1 * J.IC()),
      m = [],
      n = [],
      G = this.dd;
    for (var y = 0; y < G.length; y++) {
      var W = G[y].Nm.v.split("\\").pop().split("/").pop();
      n.push(W);
      m.push(iZ.hj(G[y], j, q));
    }
    this.Op.GW(m, n, j, q);
    this.Dd = !1;
  };
  iZ.hj = function (j, q, m) {
    var n = J.m("canvas"),
      k = "ICC / 3DL / look / cube";
    n.width = q;
    n.height = m;
    var G = n.getContext("2d"),
      W = Math.floor(14 * J.IC());
    G.font = W + "px sans-serif";
    if (j.Nm) k = j.Nm.v.split("\\").pop().split("/").pop();
    G.fillText(k, 10, W);
    return n.toDataURL();
  };
  iZ.prototype.Py = function () {
    var j = Math.floor(120 * J.IC()),
      q = Math.floor(20 * J.IC());
    this.S_.setAttribute("src", iZ.hj(this.fB, j, q));
    J.Mg(this.S_, j, q);
  };
  function e$() {
    kV.call(this);
    this.vL = null;
    this._ = J.m("span", "fitem");
    this.TI = new i0([14, 9]);
    this.aGO = new k7(null, 0, 150, "px", 1, !0, null, null, [19, 2, 5]);
    this.Hi = new cr();
    this.js = [this.TI, this.aGO, this.Hi];
    for (var y = 0; y < this.js.length; y++) {
      var j = this.js[y];
      this._.appendChild(j._);
      j.parent = this;
      j.Q(_.E.n, this.v2, this);
    }
  }
  e$.prototype = new kV();
  e$.prototype.T = function () {
    for (var y = 0; y < this.js.length; y++) this.js[y].T();
  };
  e$.prototype.yp = function (j, q) {
    this.TI.yp(j, q);
  };
  e$.prototype.v2 = function (j) {
    var q = this.vL,
      m = this.TI.V();
    eu.vi(q, m);
    q.strokeStyleLineWidth.v.val = this.aGO.V();
    if (j.target == this.Hi) eu.rS.write(q, this.Hi.V());
    this.vL = q;
    this.k(new fd(_.E.n, !1));
  };
  e$.prototype.q = function (j, q, m) {
    this.vL = B.S(q);
    var n = eu.sf(q);
    this.TI.q(j, n, m);
    this.aGO.q(q.strokeStyleLineWidth.v.val);
    this.Hi.q(eu.rS.Nx(q));
  };
  e$.prototype.V = function () {
    return B.S(this.vL);
  };
  function i4(j) {
    var q = [
        [18, 0],
        [18, 1],
        [18, 2],
        [18, 3],
      ],
      m = gA.zs([
        "set/front",
        "set/union",
        "set/difference",
        "set/intersection",
      ]);
    gA.call(this, j ? [12, 36] : null, m, q);
  }
  i4.prototype = new gA();
  function hn() {
    kV.call(this);
    this._ = J.m("button", "fitem bbtn");
    J.PD(this._, this.ig.bind(this));
    this.cx = new kV();
    this.cx._ = J.m("div", "floatcont form");
    J.F(this.cx._, "max-width: 200px;");
    this.cx.parent = this;
    var j = ho;
    this.l2 = [
      new av("Start"),
      new av("End"),
      new j([12, 41], 0, 100, "px", null, !0, null, !0),
      new j([12, 80, 0], 0, 100, "px", null, !0, null, !0),
      new j("Concavity", -50, 50, "%", null, null, null, !0),
    ];
    for (var y = 0; y < this.l2.length; y++) {
      var q = this.l2[y];
      q.parent = this;
      q.Q(_.E.n, this.tS, this);
      this.cx._.appendChild(q._);
    }
    this.aAb = J.m("div");
    this.cx._.appendChild(this.aAb);
  }
  hn.prototype = new kV();
  hn.prototype.q = function (j) {
    for (var y = 0; y < 5; y++) this.l2[y].q(j[y]);
    this.ip();
  };
  hn.prototype.V = function (j) {
    var q = [];
    for (var y = 0; y < 5; y++) q[y] = this.l2[y].V();
    return q;
  };
  hn.prototype.T = function () {
    this._.textContent = g$.get([12, 93, 4]);
    for (var y = 0; y < this.l2.length; y++) this.l2[y].T();
  };
  hn.prototype.tS = function (j) {
    this.k(new fd(_.E.n, !1));
    this.ip();
  };
  hn.prototype.ip = function (j) {
    var q = this.V(),
      m = 200,
      n = 60;
    q[2] /= J.IC();
    q[3] /= J.IC();
    var G = B.z.cn.Jo(0, n / 2, m, n / 2, 5, q),
      W = B.z.Q2(G);
    this.aAb.innerHTML =
      '<svg width="' +
      m +
      '" height="' +
      n +
      '" class="gsicon">\t\t\t<path d="' +
      W.ku +
      '" />\t\t\t</svg>';
  };
  hn.prototype.ig = function (j) {
    if (J.JO(this.cx._)) return;
    j.stopPropagation();
    var q = this._.getBoundingClientRect(),
      m = new fd(_.E.c, !0);
    m.data = { R: _.Y.wQ, Tf: this.cx, x: q.left, y: q.top + q.height, LR: !0 };
    this.k(m);
  };
  function ii() {
    kV.call(this);
    this._ = J.m("div");
    this.Fi = [];
    this.agA = [];
    var j = (this.tT = J.m("div")),
      q = J.m("h2");
    q.textContent = "Create Teams";
    j.appendChild(q);
    q.style.margin = "26px 0 16px 0";
    var m = new kv("More about Teams", !1, null, !0);
    q.appendChild(m._);
    m._.style.float = "right";
    m.Q("click", this.adP, this);
    this.jz = J.m("div");
    j.appendChild(this.jz);
    this.amp = new bJ("Team Name", null, 10);
    j.appendChild(this.amp._);
    var n = (this.ait = new kv("Create Team", null, null, !0));
    j.appendChild(n._);
    n.Q("click", this.a4_, this);
    var q = J.m("h2");
    q.textContent = "Join Teams";
    j.appendChild(q);
    q.style.margin = "26px 0 16px 0";
    this.jI = J.m("div");
    j.appendChild(this.jI);
    this.aGw = new bJ("Team ID", null, 10);
    j.appendChild(this.aGw._);
    var n = new kv("Join Team", null, null, !0);
    j.appendChild(n._);
    n.Q("click", this.a4_, this);
    this.aiR;
    this.aKr = this.Wz.bind(this);
    this.ady = this.ar6.bind(this);
    this.asa = !1;
    this.nv();
    this.jN = null;
    this.acw = "";
  }
  ii.prototype = new kV();
  ii.prototype.adP = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = { R: _.Y.p8, link: "https://www.photopea.com/api/accounts#teams" };
    this.k(q);
  };
  ii.prototype.nv = function () {
    clearTimeout(this.a6Y);
    this.a6Y = setTimeout(this.ady, this.jN ? 10 : 3e3);
  };
  ii.prototype.ar6 = function () {
    var j = lw.xq();
    if (document.hidden || !J.JO(this._) || j == null) {
      this.nv();
      return;
    }
    var q = lw.PZ();
    if (this.jN == null && q == null) return;
    lw.$R(this.jN ? this.jN : q, this.aKr);
    this.asa = !0;
    this.jN = null;
  };
  ii.prototype.axE = function (j) {
    j.acc.update = !0;
    this._.style.pointerEvents = "none";
    this._.style.opacity = "0.5";
    if (this.asa) this.jN = j;
    else {
      clearTimeout(this.a6Y);
      lw.$R(j, this.aKr);
    }
  };
  ii.prototype.lU = function (j) {
    var q = typeof j == "string" ? this.aiR : this.Fi.indexOf(j.target),
      m = this.agA[q],
      n = m[0],
      G = lw.PZ();
    if (G == null) G = {};
    var W = G.acc,
      k = W.tjoin,
      T = W.tstart;
    if (n == "leave") {
      k.splice(k.indexOf(m[1]), 1);
    }
    if (
      n == "add" ||
      n == "remove" ||
      n == "delTeam" ||
      n == "showRename" ||
      n == "rename"
    ) {
      var b = -1,
        c = 0;
      for (var y = 0; y < T.length; y++) {
        c += T[y][1].length;
        if (T[y][2] == m[1]) b = y;
      }
      var a = T[b];
      if (n == "add") {
        var f = lw.eo();
        if (f && f[0] == 0 && f[1][2] <= c) {
          alert(
            "You can have at most " + f[1][2] + " members in your Premium."
          );
          return;
        }
        a[1].push(m[2]);
      }
      if (n == "remove") a[1].splice(a[1].indexOf(m[2]), 1);
      if (n == "delTeam") {
        if (a[1].length != 0) {
          alert("Remove members first.");
          return;
        }
        T.splice(b, 1);
      }
      if (n == "showRename") {
        var U = new fd(_.E.c, !0);
        U.data = {
          R: _.Y.s0,
          kO: "namewindow",
          pv: a[0],
          ml: this.lU.bind(this),
        };
        this.k(U);
        this.aiR = q;
        m[0] = "rename";
        return;
      }
      if (n == "rename") a[0] = j;
    }
    this.axE(G);
  };
  ii.prototype.a4_ = function (j) {
    var q = this.ait == j.target,
      m = (q ? this.amp : this.aGw).V().trim();
    if (m == "") {
      alert("The Team " + (q ? "Name" : "ID") + " is empty.");
      return;
    }
    if (!q) {
      m = parseInt(m);
      if (isNaN(m)) {
        alert("The ID must be a number");
        return;
      }
    }
    var n = lw.PZ();
    if (n == null) n = {};
    var G = n.acc;
    if (G == null) G = n.acc = {};
    var W = G.tstart,
      k = G.tjoin;
    if (q) {
      if (W == null) W = G.tstart = [];
      if (W.length > 5) {
        alert("You can have at most 5 teams");
        return;
      }
      W.push([m, []]);
    } else {
      if (W)
        for (var y = 0; y < W.length; y++)
          if (W[y][2] == m) {
            alert("You are the owner of this team");
            return;
          }
      if (k == null) k = G.tjoin = [];
      if (k.indexOf(m) != -1) {
        alert("You already asked to join this team.");
        return;
      }
      G.tjoin.push(m);
    }
    G.update = !0;
    this.axE(n);
  };
  ii.prototype.Wz = function () {
    this.asa = !1;
    var j = lw.xq(),
      q = j != null,
      m = this.tT.parentNode != null;
    if (q != m) {
      J.dI(this._);
      if (q) this._.appendChild(this.tT);
      else this._.textContent = "Log In to access Team Settings.";
    }
    if (!q) return;
    var n = lw.PZ();
    if (n == null) n = {};
    var G = n.acc;
    if (G == null) G = {};
    var W = JSON.stringify(G) + "====" + JSON.stringify(j);
    if (W != this.acw) {
      this.acw = W;
      var k = this.jz,
        T = this.jI;
      J.dI(k);
      J.dI(T);
      var b = (this.Fi = []),
        c = (this.agA = []),
        a = this.lU.bind(this);
      function f(E, A) {
        E.addEventListener("click", a);
        b.push(E);
        c.push(A);
      }
      function U(H, E) {
        var v = J.m("div"),
          A = "rgba(255,255,255,0.15)";
        v.appendChild(h("ID: " + H[2], 54, A));
        v.appendChild(h(H[0], 160, null, !0));
        if (E) {
          v.appendChild(h(H[1].length + " members", 80, null, !0));
        } else {
          v.appendChild(
            h(H[1] == -1 ? "... not accepted yet" : "Accepted", 160)
          );
          if (Date.now() < H[1] * 1e3)
            v.appendChild(h("Premium", 80, "rgba(0,140,0,1)"));
        }
        var N = h("", 120);
        v.appendChild(N);
        J.F(N, "float:right;text-align:right");
        if (E) {
          var Q = new kv("Rename", null, null, !0);
          f(Q, ["showRename", H[2]]);
          N.appendChild(Q._);
        }
        var Q = new kv(E ? "Delete" : "Leave", null, null, !0);
        f(Q, [E ? "delTeam" : "leave", H[2]]);
        N.appendChild(Q._);
        return v;
      }
      function Z(E, A, z) {
        var v = J.m("div");
        v.style.paddingLeft = "46px";
        v.appendChild(h(A ? "\u2713" : "...", 8, A ? "#229922" : "#aa7700"));
        v.appendChild(h(E[1], 200));
        v.appendChild(h(E[2], 240));
        var N = h("", 120);
        v.appendChild(N);
        J.F(N, "float:right;text-align:right");
        var Q = new kv(A ? "Remove" : "Add", null, null, !0);
        f(Q, [A ? "remove" : "add", z, E[0]]);
        N.appendChild(Q._);
        return v;
      }
      function h(E, A, N, Q) {
        var e = J.m("span");
        e.textContent = E;
        J.F(
          e,
          "display:inline-block;  padding:0 10px;  border-radius:4px;  overflow:hidden;  width:" +
            A +
            "px;  " +
            (N != null ? "background-color:" + N + ";" : "") +
            (Q ? "font-weight:bold;" : "")
        );
        return e;
      }
      var u = G.tstart,
        i = G.tjoin,
        x = j.wantToJoin,
        X = j.inTeams;
      if (u)
        for (var $ = 0; $ < u.length; $++) {
          var H = u[$],
            C = x["t" + H[2]];
          if (C == null) C = [];
          var l = {};
          for (var y = 0; y < C.length; y++) l["u" + C[y][0]] = C[y];
          var v = U(H, !0);
          k.appendChild(v);
          v.style.marginTop = "10px";
          for (var y = 0; y < H[1].length; y++) {
            var K = H[1][y],
              S = l["u" + K];
            if (S == null) S = [K, "========", "... user has left your team"];
            delete l["u" + K];
            var o = Z(S, !0, H[2]);
            k.appendChild(o);
          }
          for (var V in l) {
            var S = l[V],
              o = Z(S, !1, H[2]);
            k.appendChild(o);
          }
        }
      if (i) {
        var P = {};
        for (var y = 0; y < X.length; y++) P["t" + X[y][2]] = X[y];
        for (var $ = 0; $ < i.length; $++) {
          var z = i[$],
            H = P["t" + z],
            v = U(H ? H : ["==========", -1, z], !1);
          T.appendChild(v);
        }
      }
      this.k(new fd(_.E.n));
    }
    if (this.jN == null) {
      this._.style.pointerEvents = "auto";
      this._.style.opacity = "1";
    }
    this.nv();
  };
  function hh() {
    kV.call(this);
    this._ = J.m("span", "fitem SymButton");
    var j = (this.LO = new kv(
      '<img src="' + PIMG.sym + '" class="autoscale gsicon" />'
    ));
    this._.appendChild(j._);
    J.sP(j._, this.cU.bind(this));
    this.oQ = null;
    this.T();
  }
  hh.prototype = new kV();
  hh.prototype.T = function () {
    if (this.oQ) this.oQ.T();
  };
  hh.prototype.cU = function (j) {
    var q = this.oQ;
    if (q == null) {
      var m = 40,
        n = 40,
        G = J.m("canvas"),
        W = G.getContext("2d");
      G.width = m;
      G.height = n;
      var k = new k$(m, 0, 0, n, 0, 0);
      W.lineWidth = 2;
      var T = [{ name: "No Symmetry", q7: !0 }],
        b = B.vW.list,
        c = [{ p: _.E.w, l: L.Nj, d: { R: "pathedit", _G: "sspath", K: -1 } }];
      for (var y = 0; y < b.length; y++) {
        W.clearRect(0, 0, m, n);
        var a = B.vW.m5(y, 5);
        B.b.u(a.L, k, a.L);
        for (var f = 0; f < a.L.length; f++) a.L[f] = Math.round(a.L[f]);
        W.beginPath();
        Typr.U.pathToContext({ cmds: a.RC, crds: a.L }, W);
        W.rect(0, 0, m, n);
        W.stroke();
        var U = { name: b[y][0], _9: W.canvas.toDataURL() };
        T.push(U);
        if (y < 8)
          c.push({
            p: _.E.w,
            l: L.Nj,
            d: { R: "pathedit", _G: "new", oW: [y, 0] },
          });
        else {
          U.sub = [];
          var Z = { sub: [] };
          c.push(Z);
          for (var f = 0; f < 12; f++) {
            U.sub.push({ name: "Rays: " + (2 + f) });
            Z.sub.push({
              p: _.E.w,
              l: L.Nj,
              d: { R: "pathedit", _G: "new", oW: [y, 2 + f] },
            });
          }
        }
      }
      T[T.length - 1].q7 = !0;
      T.push({ name: "Selected Path" }, { name: "Transform Symmetry" });
      c.push(
        { p: _.E.w, l: L.Nj, d: { R: "pathedit", _G: "sspath", K: 0 } },
        { p: _.E.w, l: L.Nj, d: { R: "pathedit", _G: "sspath", K: 1 } }
      );
      q = this.oQ = new cG(T, c);
    }
    var h = this.LO._.getBoundingClientRect();
    q.T();
    q.parent = this;
    var Z = new fd(_.E.c, !0);
    Z.data = { R: _.Y.wQ, Tf: q, x: h.x, y: h.y + h.height };
    this.k(Z);
  };
  function jd() {
    kV.call(this);
    this.mM = [16, !0, !0];
    this._ = J.m("span", "");
    this.QD = [
      new k7([12, 24], 0, 255),
      new av([12, 25, 1]),
      new av([12, 25, 0]),
    ];
    for (var y = 0; y < 3; y++) {
      var j = this.QD[y];
      j.parent = this;
      j.q(this.mM[y]);
      this._.appendChild(j._);
      j.Q(_.E.n, this.v2, this);
    }
  }
  jd.prototype = new kV();
  jd.prototype.v2 = function () {
    for (var y = 0; y < 3; y++) this.mM[y] = this.QD[y].V();
    this.k(new fd(_.E.n, !1));
  };
  jd.prototype.q = function (j) {
    this.mM = j.slice(0);
    for (var y = 0; y < 3; y++) this.QD[y].q(j[y]);
  };
  jd.prototype.V = function () {
    return this.mM.slice(0);
  };
  jd.prototype.T = function () {
    for (var y = 0; y < 3; y++) this.QD[y].T();
  };
  function jL(j, q) {
    kV.call(this);
    if (q == null) q = !1;
    this.Yt = [];
    this.asx = Math.floor(120 * J.IC());
    this.ack = Math.floor(23 * J.IC());
    this.dA = 0;
    this.jj = [];
    this.nb = [];
    for (var m in B.rc.e) {
      if ((m == "warpCustom" || m == "warpCylinder") && !q) continue;
      this.jj.push(m);
      this.nb.push(B.rc.e[m]);
    }
    this._ = J.m("span", "fitem warpbutton");
    this.cx = new kV();
    this.cx._ = J.m("div", "floatcont");
    if (j) {
      this._5 = j;
      this.hv = J.m("label", "flabel");
      this._.appendChild(this.hv);
    }
    this.R = J.m("button");
    this._.appendChild(this.R);
    J.PD(this.R, this.ig.bind(this));
    this.u_ = new ap(!0);
    this.cx._.appendChild(this.u_._);
    this.u_.Q(_.E.n, this.auR, this);
    J.F(this.cx._, "width:" + Math.floor(8 + this.asx / J.IC()) + "px;");
    this.T();
  }
  jL.prototype = new kV();
  jL.prototype.hk = function (j) {
    this.hv.textContent = j;
  };
  jL.prototype.T = function () {
    if (this._5) this.hv.innerHTML = g$.get(this._5) + ":";
    this.Py();
  };
  jL.aFo = {};
  jL.a8w = function (j, q, m) {
    var n = g$.get(B.rc.e[j]),
      G = n + "-" + j + "-" + q + "-" + m,
      W = jL.aFo[G];
    if (W) return W;
    var k = jL.lB;
    if (T == null) {
      var T = J.m("canvas");
      k = jL.lB = T.getContext("2d");
    }
    var T = k.canvas;
    if (T.width != q || T.height != m) {
      T.width = q;
      T.height = m;
    }
    k.font = Math.floor(13 * J.IC()) + "px sans-serif";
    k.lineWidth = 1;
    k.strokeStyle = "#000000";
    var b = Math.floor(16 * J.IC()),
      c = new hk(0, 0, b, b);
    k.clearRect(0, 0, T.width, T.height);
    var a = B.rc.rc(
      j,
      j == "warpCylinder" ? [0, 0, 1, 1, -0.2, -0.3, 1] : 0.3,
      !0,
      0,
      0,
      1
    );
    B.rc.a7m(a[3], c);
    var f = B.b._c(c);
    f.RC.push("M", "L", "M", "L");
    f.L.push(0, b / 2, b, b / 2);
    f.L.push(b / 2, 0, b / 2, b);
    f = B.b.ni(f);
    f = B.b.Mz(f, b / 5);
    B.Ol.u(a, f.L, c);
    B.b.u(
      f.L,
      new k$(
        1,
        0,
        0,
        1,
        Math.floor(8 * J.IC()) + 0.5,
        Math.floor(3 * J.IC()) + 0.5
      ),
      f.L
    );
    k.beginPath();
    Typr.U.pathToContext({ cmds: f.RC, crds: f.L }, k);
    k.stroke();
    k.fillText(n, Math.floor(40 * J.IC()), Math.floor(16 * J.IC()));
    W = jL.aFo[G] = T.toDataURL();
    return W;
  };
  jL.prototype.ig = function (j) {
    if (J.JO(this.cx._)) return;
    j.stopPropagation();
    var q = this.asx,
      m = this.ack;
    for (var y = 0; y < this.jj.length; y++)
      this.Yt[y] = jL.a8w(this.jj[y], q, m);
    this.u_.GW(this.Yt, null, q, m);
    var n = this.R.getBoundingClientRect(),
      G = new fd(_.E.c, !0);
    G.data = { R: _.Y.wQ, Tf: this.cx, x: n.left, y: n.top + n.height + 4 };
    this.k(G);
  };
  jL.prototype.auR = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = { R: _.Y.q4, Tf: this.cx };
    this.k(q);
    this.dA = j.target.V()[0];
    this.Py();
    this.k(new fd(_.E.n));
  };
  jL.prototype.Py = function () {
    var j = this.asx,
      q = this.ack;
    this.u_.q([this.dA]);
    this.R.innerHTML =
      '<img src="' + jL.a8w(this.jj[this.dA], j, q) + '" class="gsicon" />';
    J.Mg(this.R.firstChild, j, q);
  };
  jL.prototype.V = function () {
    return this.jj[this.dA];
  };
  jL.prototype.q = function (j) {
    this.dA = this.jj.indexOf(j);
    this.Py();
  };
  function lh(j, q, m) {
    kV.call(this);
    if (j == null) j = !1;
    if (q == null) q = !1;
    if (m == null) m = !1;
    this.awU = q;
    this.rc = null;
    this.jb = new jL([12, 22], m);
    this.jb.parent = this;
    this.jb.Q(_.E.n, this.L0, this);
    this.it = new f1(
      [22, 0],
      [
        [22, 4, 0],
        [22, 4, 1],
      ]
    );
    this.it.Q(_.E.n, this.L0, this);
    var n = j ? k7 : ho;
    this.DF = new n([22, 1], -100, 100, "%");
    this.H9 = new n("Horizontal Distortion:", -100, 100, "%");
    this.U8 = new n("Vertical Distortion:", -100, 100, "%");
    this.DF.parent = this.H9.parent = this.U8.parent = this;
    this.DF.Q(_.E.n, this.L0, this);
    this.H9.Q(_.E.n, this.L0, this);
    this.U8.Q(_.E.n, this.L0, this);
  }
  lh.prototype = new kV();
  lh.prototype.T = function () {
    this.jb.T();
    this.it.T();
    this.DF.T();
    var j = this.awU ? 1 : 100;
    this.H9.hk(g$.get([22, 2]).substring(0, j) + ":");
    this.U8.hk(g$.get([22, 3]).substring(0, j) + ":");
  };
  lh.prototype.L0 = function () {
    var j = this.rc,
      q = this.jb.V(),
      m = j.warpStyle.v.warpStyle;
    if (q == "warpCustom") B.rc.qW(j, B.rc._i(j));
    else delete j.customEnvelopeWarp;
    j.warpStyle.v.warpStyle = this.jb.V();
    j.warpRotate.v.Ornt = ["Hrzn", "Vrtc"][this.it.V()];
    var n = this.DF.V();
    j.warpPerspective.v = this.H9.V();
    j.warpPerspectiveOther.v = this.U8.V();
    if (q == "warpNone" || q == "warpCustom") {
      n = 0;
      j.warpPerspective.v = 0;
      j.warpPerspectiveOther.v = 0;
    } else if (m == "warpNone" || m == "warpCustom" || m == "warpCylinder")
      n = 50;
    if (q != "warpCylinder") {
      j.warpValue = { t: "doub", v: n };
      delete j.warpValues;
    } else {
      j.warpValues = L.Dq.be([0, 100, 100, 0, 0.15, 0.2, 1]);
      delete j.warpValue;
    }
    this.k(new fd(_.E.n, !1));
    this.q(j);
  };
  lh.prototype.V = function (j) {
    return B.S(this.rc);
  };
  lh.prototype.q = function (j) {
    this.rc = B.S(j);
    var q = j.warpStyle.v.warpStyle,
      m = q == "warpNone" || q == "warpCustom" || q == "warpCylinder";
    this.jb.q(q);
    if (!m) {
      this.it.q(j.warpRotate.v.Ornt == "Hrzn" ? 0 : 1);
      this.DF.q(j.warpValue.v);
      this.H9.q(j.warpPerspective.v);
      this.U8.q(j.warpPerspectiveOther.v);
    }
    var n = [this.it, this.DF, this.H9, this.U8];
    for (var y = 0; y < n.length; y++)
      if (m) n[y].Ub();
      else n[y].hC();
  };
  function j7(j, q, m) {
    kV.call(this);
    this.a7t = {};
    this._ = J.m("div");
    this.a1m = j;
    this.zJ = null;
    this.Aw = new ea(0, 0);
    this.Ws =
      "position:relative;overflow:hidden;background-color:var(--bg-canvas);";
    this.azl = q;
    this.aqo = m;
    this.Jq = null;
    this.Js = new J.sI(this._);
    this.eP("grab");
    this.Bl = J.m("canvas", "canv");
    this._.appendChild(this.Bl);
    this.lB = this.Bl.getContext("2d", { willReadFrequently: !0 });
    this.a6l = null;
    this.rA = null;
    this.m9 = 0;
    this.aC2 = 0;
    this.ab2 = 0;
    this.a7b = 0;
    this.ad3 = this.ab1.bind(this);
    this.aeJ = null;
    this.I = new jz({ r: 1, $: 1 });
    this.zW = null;
    this.Hl = null;
    this.mZ = [];
    this.aHb = 0;
    this.Oa = 0;
    this.aMh = this.Q7.bind(this);
    this.asz = this.dU.bind(this);
    this.aGi = this.IB.bind(this);
    this.a1W = this.c6.bind(this);
    this.aF8 = 0;
    this.pK = null;
    this.a2I(this.Bl);
    this.Ig(this);
  }
  j7.prototype = new kV();
  j7.prototype.atV = function (j) {
    this.a7t = j;
    this.FE();
  };
  j7.Ld = function (j) {
    var q = new gn(!0);
    if (j >= 0) q.B2("Space");
    if (j >= 1) {
      q.B2("ControlLeft");
      if (j == 2) q.B2("AltLeft");
    }
    return q;
  };
  j7.prototype.uY = function (j) {
    var q = this.Jq,
      m = null;
    if (j.M(gn.Xe)) {
      m = "grab";
      if (j.M(gn.A8)) {
        m = "zoom-in";
        if (j.M(gn.O4)) m = "zoom-out";
      }
    }
    this.zJ = m;
    if (m) q = m;
    this.Js.Wz(q, this.Ws);
    if (j.M(gn.A8)) {
      var n = 0;
      if (j.M(gn.h5)) n = 1;
      if (j.M(gn.Nc)) n = -1;
      if (n != 0) {
        this.fs(new ea(this.Bl.width / 2, this.Bl.height / 2), n == 1);
      }
    }
  };
  j7.prototype.eP = function (j) {
    this.Jq = j;
    if (this.zJ) return;
    this.Js.Wz(j, this.Ws);
  };
  j7.prototype.a2I = function (j) {
    J.PD(j, this.aMh);
    J.r$(j);
    j.addEventListener("wheel", this.a1W, !1);
  };
  j7.prototype.Ig = function (j) {
    j.Q("viewchange", this.aGv, this);
  };
  j7.prototype.aGv = function (j) {
    var q = this.I.k3,
      m = j.currentTarget.lx();
    this.I.k3 = m.k3;
    this.I.g = m.g.P();
    if (q != m.k3) this.Uc();
    this.FE();
  };
  j7.prototype.lx = function () {
    return { k3: this.I.k3, g: this.I.g };
  };
  j7.prototype.q = function (j, q, m, n) {
    if (j == null) {
      this.rA = null;
      return;
    }
    var G = j[0].Iu;
    if (this.rA != null && this.rA[0].Iu.Lg(G)) {
    } else {
      this.I.fg = { r: G.r, $: G.$ };
      this.I.k3 = 1;
      this.I.g = new ea(0, 0);
    }
    this.rA = j;
    this.Uc(n);
    this.wE();
    this.m9 = 0;
    this.aC2 = Date.now();
    this.ab2 = 0;
    this.a7b = q == null ? 0 : q;
    if (m) this.a7t = m;
    this.ab1(n);
  };
  j7.prototype.c6 = function (j) {
    j.preventDefault();
    if (j.deltaY == 0 || Date.now() - this.aF8 < 100) return;
    var q = J.QR(j);
    q.x = J.IC() * q.x;
    q.y = J.IC() * q.y;
    this.aF8 = Date.now();
    this.fs(q, j.deltaY < 0);
  };
  j7.prototype.fs = function (j, q) {
    L.Lr.b5(this.I, j, q);
    this.a9q();
  };
  j7.prototype.H5 = function (j) {
    var q = this.I,
      m = this.rA[0].Iu;
    this.I.k3 = L.Lr.gp(m.r, m.$, q.yJ.r, q.yJ.$);
    if (j) this.I.g = new ea(0, 0);
    this.a9q();
  };
  j7.prototype.a9q = function () {
    this.Uc();
    this.k(new fd("viewchange"));
    this.k(new fd("zoom"));
  };
  j7.prototype.Uc = function (j) {};
  j7.prototype.wE = function () {
    clearTimeout(this.aeJ);
  };
  j7.prototype.FE = function (j) {
    if (this.rA == null || !J.JO(this.Bl) || (j && j.jG())) return;
    var q = this.I,
      m = this.rA[0].Iu,
      n = q.yJ,
      G = n.r,
      W = n.$,
      k = this.a6l,
      H,
      C = null;
    if (k == null || k.length != n.C() * 4) {
      k = this.a6l = B.j(n.C() * 4);
      console.log("creating image data");
    } else k.fill(0);
    var T = this.rA[this.m9],
      b = this.lB,
      c = q.WQ(!1),
      a = c.P();
    a.BR();
    var f = Date.now(),
      U = j ? j : m,
      Z = B.b._c(U).L;
    B.b.u(Z, a, Z);
    var h = B.b.YU(Z),
      u = n.TM(h),
      i = new Uint8Array(k.buffer, 0, u.C() * 4);
    jz.Ip(q.yJ);
    var x = new Uint8Array(jz.UT.buffer, 0, u.C() * 4),
      X = new Uint8Array(T.data);
    if (q.k3 == 1) {
      var $ = m.P();
      $.offset(h.x - U.x, h.y - U.y);
      B.M4(X, $, x, u);
    } else B.scale.Vz(X, m, c, x, u, !1);
    if (this.azl) H = x;
    else {
      H = i;
      B.L_(i, u.r, u.$, 8, U.x, U.y);
      B.G.Jg("norm", x, u, i, u, u, 1);
    }
    if (j == null) b.clearRect(0, 0, G, W);
    if (u.C() != 0)
      b.putImageData(
        new ImageData(new Uint8ClampedArray(H.buffer, 0, u.C() * 4), u.r, u.$),
        u.x,
        u.y
      );
    if (this.aqo) {
      (G = m.r), (W = m.$);
      C = G + " \xD7 " + W + " (" + ((G * W) / 1e6).toFixed(1) + "MP)";
    }
    var l = j7.ako(q.k3, "#ffffff", C);
    b.putImageData(l, 0, q.yJ.$ - l.height);
    var v = this.a7t;
    if (v) {
      var K = hF.y9([0.1, 0.5, 1, 1]),
        S = hF.y9([1, 0, 0, 1]),
        o = hF.y9([1, 1, 1, 1]),
        V = hF.y9([0, 0, 0, 1]),
        a = q.WQ(!1);
      a.BR();
      b.save();
      b.setTransform(a.Sd, a.X, a.ra, a.Jy, a.Tt, a.BL);
      b.strokeStyle = S;
      if (v.akT) {
        hF.Z8(v.akT, null, b);
        b.lineWidth = 1 / q.k3;
        b.stroke();
      }
      b.strokeStyle = o;
      if (v.a3p) {
        hF.Z8(v.a3p, null, b);
        b.lineWidth = 1 / q.k3;
        b.stroke();
        b.strokeStyle = V;
        b.setLineDash([4 / q.k3, 4 / q.k3]);
        b.stroke();
        b.setLineDash([]);
      }
      b.strokeStyle = K;
      b.fillStyle = hF.y9([1, 1, 1, 1]);
      if (v.cT) {
        hF.Z8(v.cT, null, b);
        b.lineWidth = 1 / q.k3;
        b.stroke();
      }
      if (v.a0) {
        hF.r2(v.a0, b, q, 0.5);
        b.lineWidth = 2 / q.k3;
        b.stroke();
        b.fill();
      }
      if (v.Gm) {
        b.font = 16 / q.k3 + "px sans-serif";
        var P = 1 / q.k3;
        for (var y = 0; y < v.Gm.length; y++) {
          var z = v.Gm[y],
            E = z[0],
            A = z[1] + 6 / q.k3,
            N = z[2];
          b.fillStyle = "black";
          b.fillText(N, E - P, A);
          b.fillText(N, E + P, A);
          b.fillStyle = "white";
          b.fillText(N, E, A);
        }
      }
      b.restore();
    }
    b.getImageData(0, 0, 1, 1);
  };
  j7.akN = "";
  j7.a8o = null;
  j7.ako = function (j, q, m) {
    if (m == null) m = "";
    var n = "z" + j + "," + q + "," + m;
    if (n == j7.akN) return j7.a8o;
    var G = Math.round(50 * J.IC()),
      W = Math.round(18 * J.IC()),
      k = m == "" ? 0 : Math.round((m.length + 2) * W * 0.35),
      T = J.m("canvas"),
      b = T.getContext("2d");
    T.width = G + k;
    T.height = W;
    b.fillStyle = "rgba(1,1,1,1)";
    b.fillRect(0, 0, G, W);
    if (m != "") b.fillRect(G + 2, 0, k, W);
    b.font = Math.round(11 * J.IC()) + "px monospace";
    b.fillStyle = q;
    var c = j * 100;
    if (c < 100) c = c.toFixed(2);
    else c = Math.round(c);
    c = c + "%";
    var a = b.measureText(c).width;
    b.fillText(c, (G - a) / 2, Math.round(W * 0.7));
    if (m != "") {
      var f = b.measureText(m).width;
      b.fillText(m, G + (k - f) / 2 + 1, Math.round(W * 0.7));
    }
    var U = b.getImageData(0, 0, G + k, W);
    j7.akN = n;
    j7.a8o = U;
    return U;
  };
  j7.prototype.ab1 = function (j) {
    var q = this.rA,
      m = q.length,
      n = this.m9,
      G = this.rA[n],
      W = (n + 1) % m;
    this.FE(j);
    var k = Date.now();
    if (m != 1 && q[W].Iu.Lg(G.Iu)) {
      var T = G.Le ? parseInt(G.Le.split(",").pop()) : 30;
      if (T == 0) T = 16;
      if (W == 0) this.ab2++;
      if (this.a7b == 0 || this.ab2 < this.a7b)
        this.aeJ = setTimeout(this.ad3, T);
    }
    this.m9 = W;
    this.aC2 = k;
  };
  j7.prototype.X3 = function (j, q) {
    if (j <= 0 || q <= 0) return;
    var m = Math.floor(j * J.IC()),
      n = Math.floor(q * J.IC());
    this.I.yJ = new hk(0, 0, m, n);
    this.Bl.width = m;
    this.Bl.height = n;
    J.F(
      this.Bl,
      "width:" + m / J.IC() + "px; height:" + n / J.IC() + "px; display:block;"
    );
    this.FE();
  };
  j7.prototype.C4 = function (j) {
    var q = -1,
      m = this.mZ;
    for (var y = 0; y < m.length; y++) if (m[y].pointerId == j.pointerId) q = y;
    return q;
  };
  j7.prototype.Q7 = function (j) {
    var q = this.C4(j),
      m = this.mZ;
    if (q != -1) m[q] = j;
    else m.push(j);
    if (m.length == 1) {
      this.pK = j.target;
      J.dJ(window, this.asz);
      J.sP(window, this.aGi);
      this.zW = J.QR(j, this.Bl);
      this.zW.x *= J.IC();
      this.zW.y *= J.IC();
      this.Aw = this.zW;
      this.Hl = this.I.g.P();
      if (this.a1m && this.pK == this.Bl && !this.zJ)
        this.k(new fd("mousedown"));
    } else this.aHb = this.Oa = ea.gw(J.QR(m[0], this.Bl), J.QR(m[1], this.Bl));
  };
  j7.prototype.dU = function (j) {
    var q = this.C4(j),
      m = this.mZ;
    if (q != -1) m[q] = j;
    var n = this.I,
      G = this.zJ,
      W = this.rA[this.m9].Iu.P();
    W.r *= n.k3;
    W.$ *= n.k3;
    var k = J.QR(j, this.Bl);
    k.x *= J.IC();
    k.y *= J.IC();
    this.Aw = k;
    if (this.a1m && this.pK == this.Bl && !G) this.k(new fd("mousemove"));
    else if (G == "grab" || G == null) {
      if (m.length > 1) {
        var T = J.QR(m[0], this.Bl),
          b = J.QR(m[1], this.Bl),
          c = new ea((J.IC() * (T.x + b.x)) / 2, (J.IC() * (T.y + b.y)) / 2),
          a = ea.gw(T, b),
          f = null;
        if (a > this.Oa + 50) {
          this.Oa += 50;
          f = !0;
        }
        if (a < this.Oa - 50) {
          this.Oa -= 50;
          f = !1;
        }
        if (f != null) this.fs(c, f);
        return;
      } else {
        var U = k.x - this.zW.x,
          Z = k.y - this.zW.y;
        n.g.x = this.Hl.x + Math.round(U);
        n.g.y = this.Hl.y + Math.round(Z);
      }
      this.k(new fd("viewchange"));
    }
  };
  j7.prototype.IB = function (j) {
    var q = this.C4(j),
      m = this.mZ;
    m.splice(q, 1);
    if (m.length == 0) {
      J.BJ(window, this.asz);
      J.mW(window, this.aGi);
      var n = this.zJ;
      if (j.detail > 1) {
        this.I.k3 = 1;
        this.I.g.Tu(0, 0);
        this.FE();
      }
      if (this.a1m && this.pK == this.Bl && !this.zJ) this.k(new fd("mouseup"));
      else {
        if (n == "zoom-in" || n == "zoom-out") this.fs(this.Aw, n == "zoom-in");
      }
    } else {
      var G = (this.zW = J.QR(m[0], this.Bl));
      G.x *= J.IC();
      G.y *= J.IC();
    }
  };
  j7.prototype.VS = function (j) {
    var q = this.Aw;
    if (j) {
      q = J.QR(j, this.Bl);
      q.x *= J.IC();
      q.y *= J.IC();
    }
    return this.I.sb(q.x, q.y);
  };
  function co() {
    kV.call(this);
    this.dX = null;
    this.TY = null;
    this.E$ = null;
    this.HC = null;
    this.azD = "";
    this.uD = [];
    this.Nd = 0;
    this.DT = [];
    this.a = null;
    this.Ds = 0;
    var j = (this._ = J.m("div", "")),
      q = (this.ajx = J.m("div", "form"));
    j.appendChild(q);
    var m = (this._5 = J.m("span"));
    J.F(m, "font-size:1.3em; font-weight:bold; margin-right:2em;");
    var n = (this.aow = new av([25, 2, 0]));
    n.q(!0);
    q.appendChild(n._);
    n.Q(_.E.n, this.ll, this);
    var G = (this.aJm = new av([25, 2, 1]));
    G.q(!0);
    q.appendChild(G._);
    G.Q(_.E.n, this.ll, this);
    var W = new kv("?", null, null, !0);
    q.appendChild(W._);
    W.addEventListener("click", function () {
      alert(
        "All our images come from Pixabay.com and are free to use for commercial purposes."
      );
    });
    var k = new aD(" ");
    q.appendChild(k._);
    var T = (this.aGj = new bJ([25, 1, 1]));
    q.appendChild(T._);
    T.Q(_.E.n, this.ll, this);
    this.$S = new bM(14);
    this.$S.an$(3);
    this.$S.Q(_.E.n, this.aC_, this);
    var b = (this.aL3 = new kv(
      J.CP("reload", null, "autoscale"),
      null,
      [25, 1, 2]
    ));
    q.appendChild(b._);
    b.Q("click", this.MQ, this);
    this.ah9 = this.ayb.bind(this);
    this.nV = J.m("div", "svggallery scrollable");
    j.appendChild(this.nV);
    this.nV.addEventListener("scroll", this.aA_.bind(this));
  }
  co.prototype = new kV();
  co.prototype.yp = function (j) {
    this.a = j;
  };
  co.prototype.T = function () {
    this._5.textContent = g$.get([25, 0]);
    this.$S.T();
    this.aow.T();
    this.aJm.T();
    this.aGj.T();
  };
  co.prototype.X3 = function (j, q) {
    if (this.dX && this.dX.x == j && this.dX.y == q) return;
    this.dX = new ea(j, q);
    J.F(this.ajx, "width:" + j + "px; margin-bottom:12px;");
    var m = this.ajx.getBoundingClientRect();
    q -= (450 < j ? 30 : 60) + 12;
    J.F(this.nV, "width:" + j + "px; height:" + q + "px;  line-height:0;");
    if (J.JO(this._)) this.ll();
  };
  co.prototype.q = function (j) {
    this.TY = j;
    this.ll();
  };
  co.prototype.aA_ = function (j) {
    var q = this.nV;
    if (q.scrollTop + q.clientHeight + 10 >= q.scrollHeight) {
      this.ll(!0);
    }
  };
  co.prototype.aC_ = function (j) {
    this.E$ = null;
    this.ll();
  };
  co.prototype.ayb = function (j) {
    if (Date.now() - this.Ds < 2e3) return;
    this.Ds = Date.now();
    this.Nd = this.DT.indexOf(j.currentTarget);
    var q = this.sc(this.TY.x, this.TY.y);
    if (q[1]) {
      var m = q[1].largeImageURL,
        n = new XMLHttpRequest();
      n.responseType = "arraybuffer";
      n.open("GET", m, !0);
      n.onload = this.ag4.bind(this);
      n.send();
      return;
    }
    this.aEJ(q);
  };
  co.prototype.ag4 = function (j) {
    var q = j.target.response,
      m = gh.Qa(q),
      n = gh.lj(m),
      G = n.LN(q),
      W = this.sc(this.TY.x, this.TY.y, [q, G[0].Iu.r, G[0].Iu.$]);
    this.aEJ(W);
  };
  co.prototype.aEJ = function (j) {
    var q = j[0],
      m = gh.Qa(q),
      n = gh.lj(m),
      G = new fb("template.psd");
    n.LN(q, G);
    var W = new fd("tempready", !0);
    W.data = { fg: G };
    this.k(W);
  };
  co.prototype.MQ = function (j) {
    var q = j.target;
    this.uD = [];
    this.E$ = null;
    this.ll();
  };
  co.prototype.aLG = function (j) {
    var q = JSON.parse(j.target.response),
      m = (this.HC = q.hits);
    for (var y = 0; y < m.length; y++)
      if (m[y].user_id == 6314823) m.splice(y, 1);
    this.ll();
  };
  co.prototype.ll = function (j) {
    if (this.TY == null || this.dX == null || this.a == null) return;
    if (this.dX.x <= 0) return;
    var q = this.TY.x,
      m = this.TY.y;
    if (Math.min(q, m) < 50) return;
    if (j != !0) {
      this.DT = [];
      J.dI(this.nV);
      this.nV.scrollTop = 0;
    }
    if (this.DT.length > 300) return;
    var n = Math.min(1, 320 / Math.max(q, m)),
      G = this.dX.P();
    G.x -= 20;
    var W = Math.max(1, Math.floor(G.x / (q * n))),
      k = Math.max(1, Math.ceil(G.y / (m * n)));
    n = G.x / W / q;
    var T = W * k;
    if (this.E$ == null) {
      var b = this.a.HS.a2(),
        c = [];
      for (var a in b) {
        var f = b[a],
          U = f[3];
        if (!this.$S.p9(f)) continue;
        if (f[5] == null || f[5].slice(0, 2) == "gf") continue;
        c.push(f);
      }
      if (c.length == 0) c.push(b.DejaVuSans);
      var Z = c.length;
      for (var y = 0; y < Z * 10; y++) {
        var h = Math.floor(Math.random() * Z),
          u = Math.floor(Math.random() * Z),
          i = c[h];
        c[h] = c[u];
        c[u] = i;
      }
      c = c.slice(0, 10);
      this.E$ = c;
    }
    var x = this.aJm.V(),
      X = this.aGj.V().trim();
    this.aGj.yl(x);
    if (x && (this.HC == null || X != this.azD)) {
      var $ = new XMLHttpRequest(),
        H =
          "https://pixabay.com/api/?image_type=photo" +
          (X == "" ? "" : "&q=" + encodeURIComponent(X)) +
          "&per_page=200&page=1&key=10554583-a5eacb61c2e61105fdfb6eb88&safesearch=true";
      if (X == "") H = "//www.photopea.com/plugins/gallery.json";
      $.open("GET", H, !0);
      $.onload = this.aLG.bind(this);
      $.onerror = function (o) {
        console.log(o.target.response);
      };
      $.send();
      this.azD = X;
      return;
    }
    n *= (q * n - 24) / (q * n);
    var C = this.DT.length;
    for (var y = 0; y < T; y++) {
      var l = (this.Nd = C + y);
      if (this.uD[l] == null)
        this.uD[l] = Math.floor(Math.random() * 4294967295);
      var v = this.sc(Math.round(q * n), Math.round(m * n)),
        K = v[0];
      K = M.K6(new Uint8Array(K));
      var S = J.m("span");
      S.innerHTML = K;
      this.DT.push(S);
      J.F(
        S.firstChild,
        "margin: 0 24px 24px 0; cursor:pointer; border-radius:5px;"
      );
      this.nV.appendChild(S);
      S.addEventListener("click", this.ah9, !1);
    }
  };
  co.prototype.sc = function (j, q, m) {
    var n = this.aJm.V(),
      G = this.aow.V(),
      W = n && this.HC.length != 0 ? this.HC : null;
    if (G && !n) W = null;
    if (G && n && (this.Nd & 1) == 0) W = null;
    return hY.cn(j, q, this.uD[this.Nd], this.E$, m ? m : W);
  };
  function gf() {
    kV.call(this);
    this._ = J.m("div");
    this.tT = null;
    this.a8v = null;
    this.akS = -1;
    this.mX = {
      JPG: {
        qual: { Hw: new ho([12, 52, 0], 0, 100, "%", null, null, !0), r5: 70 },
        mtdt: { Hw: new av("attach metadata"), r5: !1 },
      },
      TIFF: { mtdt: { Hw: new av("attach metadata"), r5: !1 } },
      WEBP: {
        qual: { Hw: new ho([12, 52, 0], 0, 100, "%", null, null, !0), r5: 70 },
        mtdt: { Hw: new av("attach metadata"), r5: !1 },
      },
      GIF: {
        qual: { Hw: new ho([12, 52, 0], 0, 100, "%", null, null, !0), r5: 100 },
        dthr: { Hw: new av([12, 23, 3]), r5: !1 },
      },
      PNG: {
        qual: { Hw: new ho([12, 52, 0], 0, 100, "%", null, null, !0), r5: 100 },
        nplt: { Hw: new av("don't use palettes"), r5: !1 },
        mtdt: { Hw: new av("attach metadata"), r5: !1 },
      },
      BMP: { nplt: { Hw: new av("don't use palettes"), r5: !1 } },
      PDF: {
        pags: { Hw: new bJ([12, 52, 1]), r5: "" },
        qual: { Hw: new ho([12, 52, 0], 0, 100, "%", null, null, !0), r5: 100 },
        rvrs: { Hw: new av("reverse pages"), r5: !1 },
        rall: { Hw: new av("rasterize all"), r5: !1 },
        vtxt: { Hw: new av("vectorize text"), r5: !1 },
        mrgn: { Hw: new ho("Add Margin", 0, 5, "in", 2), r5: 0 },
        cmrk: { Hw: new av("add crop marks"), r5: !1 },
      },
      EMF: {
        pags: { Hw: new bJ([12, 52, 1]), r5: "" },
        qual: { Hw: new ho([12, 52, 0], 0, 100, "%", null, null, !0), r5: 100 },
        rvrs: { Hw: new av("reverse pages"), r5: !1 },
        rall: { Hw: new av("rasterize all"), r5: !1 },
        vtxt: { Hw: new av("vectorize text"), r5: !1 },
        mrgn: { Hw: new ho("Add Margin", 0, 5, "in", 2), r5: 0 },
      },
      SVG: {
        arst: { Hw: new av("add raster graphics"), r5: !0 },
        ahid: { Hw: new av("add hidden layers"), r5: !1 },
        vtxt: { Hw: new av("vectorize text"), r5: !1 },
        rtxt: { Hw: new av("rasterize text"), r5: !1 },
        mini: { Hw: new av("minify"), r5: !1 },
      },
      RAW: {
        cnum: { Hw: new gA([12, 72], ["1", "3", "4"]), r5: 2 },
        dpth: { Hw: new gA([12, 34], ["8 Bits", "16 Bits"]), r5: 0 },
        endi: { Hw: new gA("Byte Order", ["12-34", "34-12"]), r5: 0 },
      },
      DDS: {
        cmpr: {
          Hw: new f1("Compression", [
            "8x | BC1",
            "4x | BC3",
            "4x | BC7",
            "None",
          ]),
          r5: 0,
        },
        mpmp: { Hw: new av("Add Mipmaps"), r5: !0 },
        dxsr: { Hw: new av("DXGI_FORMAT: SRGB"), r5: !1 },
      },
      AVIF: {
        qual: { Hw: new ho([12, 52, 0], 0, 100, "%", null, null, !0), r5: 70 },
        smlr: { Hw: new av("Smaller files (5x slower)"), r5: !1 },
      },
      MP4: {
        qual: { Hw: new ho([12, 52, 0], 0, 100, "%", null, null, !0), r5: 50 },
      },
      anim: {
        sped: { Hw: new ho("Speed", 10, 1e3, "%", null, !0, !0), r5: 100 },
        rept: {
          Hw: new k7("Repeat (0 = Forever)", 0, 10, " \xD7", 0, !1, !0),
          r5: 0,
        },
        rvrs: { Hw: new av("reverse frames"), r5: !1 },
        bmrn: { Hw: new av("boomerang"), r5: !1 },
      },
      slcs: {
        slcs: {
          Hw: new f1([8, 11, 0], ["No Slices", "All Slices", "User Slices"]),
          r5: 1,
        },
      },
      artb: { artb: { Hw: new av([1, 16, 1]), r5: !0 } },
      srgb: { srgb: { Hw: new av("convert to sRGB"), r5: !0 } },
      ctoa: { ctoa: { Hw: new av("extra channel as opacity"), r5: !1 } },
      ke16: { ke16: { Hw: new av("as 16-bit"), r5: !1 } },
    };
    for (var j in this.mX) {
      var q = this.mX[j];
      for (var m in q) {
        q[m].Hw.q(q[m].r5);
        q[m].Hw.Q(_.E.n, this.OI, this);
      }
    }
  }
  gf.prototype = new kV();
  gf.prototype.apJ = function () {
    this.akS = -1;
  };
  gf.prototype.T = function () {
    for (var j in this.mX) for (var q in this.mX[j]) this.mX[j][q].Hw.T();
  };
  gf.prototype.OI = function () {
    this.ll();
    this.k(new fd(_.E.n, !1));
  };
  gf.prototype.tU = function (j, q) {
    var m = this.mX[q];
    if (m) for (var n in m) j[n] = m[n];
  };
  gf.prototype.ll = function () {
    var j = this.tT,
      q = j[0],
      m = j[1],
      n = j[2],
      G = j[3],
      W = j[4],
      k = j[5],
      T = j[6],
      b = {};
    this.tU(b, q);
    if (m) this.tU(b, "anim");
    if (["GIF", "PNG", "JPG", "WEBP"].indexOf(q) != -1 && n) this.tU(b, "slcs");
    else if (["GIF", "PNG", "JPG", "WEBP", "SVG"].indexOf(q) != -1 && G)
      this.tU(b, "artb");
    if (W) this.tU(b, "srgb");
    if (["PNG", "DDS", "TGA"].indexOf(q) != -1 && k) this.tU(b, "ctoa");
    if (["PNG", "TIFF"].indexOf(q) != -1 && T == 16) this.tU(b, "ke16");
    var c = j.join(",");
    if (c != this.akS) {
      this.akS = c;
      J.dI(this._);
      for (var a in b) {
        if (q == "PDF" && !G && (a == "pags" || a == "rvrs")) continue;
        this._.appendChild(b[a].Hw._);
        J.Ft(this._);
      }
    }
    var f = (this.a8v = {});
    for (var a in b) f[a] = b[a].Hw.V();
  };
  gf.prototype.HK = function (j, q, m, n, G, W, k) {
    this.tT = [j, q, m, n, G, W, k];
    this.ll();
  };
  gf.prototype.V = function () {
    return B.S(this.a8v);
  };
  gf.prototype.q = function (j) {
    if (j instanceof Array) return;
    var q = this.tT,
      m = q[0];
    for (var n in this.mX) {
      if (n != m && n.toLowerCase() != n) continue;
      var G = this.mX[n];
      if (G == null) return;
      for (var W in j) if (G[W]) G[W].Hw.q(j[W]);
    }
    this.ll();
  };
  function bj() {
    kV.call(this);
    this._ = J.m("span", "fitem yesno");
    this._.style.marginRight = "0";
    this.Av = !1;
    this.atO = new kv("No", !1, "Cancel");
    this.v0 = new kv("Yes", !1, "Confirm");
    this._.appendChild(this.atO._);
    this._.appendChild(this.v0._);
    this.atO.Q("click", this.av, this);
    this.v0.Q("click", this.av, this);
    this.T();
  }
  bj.prototype = new kV();
  bj.prototype.T = function () {
    this.atO.hk(J.CP("cross", null, "autoscale"));
    this.v0.hk(J.CP("checkmark", null, "autoscale"));
  };
  bj.prototype.av = function (j) {
    this.Av = j.target == this.v0;
    this.k(new fd("click", !1));
  };
  bj.prototype.V = function () {
    return this.Av;
  };
  function kZ(j) {
    kV.call(this);
    this._ = J.m("span", "fitem");
    this.amb = new kv("\u25BC", null, "Auto Options", !0);
    J.PD(this.amb._, this.a7h.bind(this));
    this._.appendChild(this.amb._);
    this.ky = new kv("Auto", null, null, !0);
    this.ky.Q("click", this.tS, this);
    this._.appendChild(this.ky._);
    this.rM = new bl(
      "Algorithms",
      [
        "Enhance Monochromatic Contrast",
        "Enhance Per Channel Contrast",
        "Find Dark & Light Colors",
        "Enhance Brightness And Contrast",
      ],
      null,
      null,
      !0
    );
    this.rM.Q(_.E.n, this.tS, this);
    this.rM.q([!1, !1, !1, !0]);
    this.cx = new kV();
    var q = (this.cx._ = J.m("div", "floatcont form"));
    J.F(q, "width: 250px;");
    this.cx.parent = this;
    q.appendChild(this.rM._);
    this.ao$ = [];
    for (var y = 0; y < 2; y++) {
      var m = new k7(
        (y == 0 ? "Shadows" : "Highlights") + " Clip",
        0,
        9.99,
        "%",
        2,
        !1,
        !0
      );
      m.q(0.1);
      m.Q(_.E.n, this.tS, this);
      this.ao$.push(m);
      q.appendChild(m._);
    }
  }
  kZ.prototype = new kV();
  kZ.prototype.tS = function (j) {
    this.k(new fd(_.E.n, !1));
  };
  kZ.prototype.T = function () {};
  kZ.prototype.V = function () {
    return [this.rM.V().indexOf(!0), this.ao$[0].V(), this.ao$[1].V()];
  };
  kZ.prototype.a7h = function (j) {
    if (J.JO(this.cx._)) return;
    j.stopPropagation();
    var q = this.amb._.getBoundingClientRect(),
      m = new fd(_.E.c, !0);
    m.data = { R: _.Y.wQ, Tf: this.cx, x: q.left, y: q.top + q.height + 4 };
    this.k(m);
  };
  function lf() {
    kV.call(this);
    var j = (this._ = J.m("div", "fitem"));
    this.o5 = new f1(
      [12, 46],
      [
        [13, 1, 8],
        [13, 1, 10],
        [13, 1, 9],
        [12, 47],
      ]
    );
    this.o5.Q(_.E.n, this.v2, this);
    j.appendChild(this.o5._);
    this.Hr = new g1(!1);
    this.Hr.parent = this;
    this.Hr.kK(16777215);
    this.Hr.Q(_.E.n, this.v2, this);
    j.appendChild(this.Hr._);
  }
  lf.prototype = new kV();
  lf.prototype.T = function () {
    this.o5.T();
    this.Hr.T();
  };
  lf.prototype.avx = function (j) {
    var q = [j.artboardBackgroundType.v - 1];
    if (j.Clr) q.push(j.Clr.v);
    this.q(q);
  };
  lf.prototype.ahQ = function () {
    var j = this.V();
    return {
      classID: "artboard",
      Clr: { t: "Objc", v: j[1] },
      artboardBackgroundType: { t: "long", v: j[0] + 1 },
    };
  };
  lf.prototype.q = function (j) {
    this.o5.q(j[0]);
    if (j[1]) this.Hr.q(j[1]);
  };
  lf.prototype.V = function () {
    return [this.o5.V(), this.Hr.V()];
  };
  lf.prototype.v2 = function (j) {
    if (j.target == this.Hr) this.o5.q(3);
    this.k(new fd(_.E.n, !1));
  };
  lf.prototype.pM = function () {
    this.o5.pM();
  };
  function fL() {
    kV.call(this);
    var j = (this._ = J.m("div"));
    J.c$(j);
    var q = J.m("span");
    q.textContent = "Prompt";
    j.appendChild(q);
    J.Ft(j);
    this.GV = new bJ(null, null, -1, 4);
    this.aV = new lk();
    this.aV.parent = this;
    this._0 = new kv("Generate", !1, null, !0);
    this._0.Q("click", this.IS, this);
    this.Nq = null;
    this.aiJ = 0;
    j.appendChild(this.GV._);
    J.Ft(j);
    j.appendChild(this.aV._);
    j.appendChild(this._0._);
    this.ajB = this.a1t.bind(this);
    this.aii = this.ay_.bind(this);
    this.UJ = J.m("div", "scrollable");
    j.appendChild(this.UJ);
  }
  fL.prototype = new kV();
  fL.prototype.q = function (j) {
    var q = new Uint8Array(j),
      m = Date.now(),
      n = UZIP.adler(q, 0, q.length);
    if (n == this.azN) return;
    this.azN = n;
    var G = new fb();
    hx.VB(j, G);
    J.dI(this.UJ);
    this.aiJ = G.U.length - 2;
    if (this.Nq == this.aiJ) this.Nq = null;
    var m = Date.now();
    for (var y = G.U.length - 2; y > 0; y--) {
      var W = G.U[y],
        q = W.buffer,
        k = W.H;
      while (k.C() > 500 * 500) {
        var T = B.IT(q, k);
        q = T.sE;
        k = T.H;
      }
      var b = gh.Rq(q.buffer, k.r, k.$, "png"),
        c = J.m("div");
      J.F(
        c,
        "width:75px; margin:4px; cursor:pointer; display:inline-block; text-align:center;" +
          (W.Iw() ? " box-shadow:0 0 0px 3px #00aaff;" : "")
      );
      var a = J.m("img");
      J.F(a, "width:100%; margin-bottom:-18px;");
      if (W.Iw() && this.Nq == null) this.GV.q(W.getName());
      a.ar3 = y;
      a.setAttribute("src", b);
      var f = new kv("x", !1, "Delete", !0);
      J.F(f._, "height:15px; line-height:1em; padding: 0px 4px;");
      f._.ar3 = y;
      c.appendChild(a);
      c.appendChild(f._);
      J.sP(a, this.ajB);
      J.sP(f._, this.aii);
      this.UJ.appendChild(c);
    }
    console.log(Date.now() - m);
  };
  fL.prototype.T = function () {
    this.aV.T();
  };
  fL.prototype.a1t = function (j) {
    var q = new fd(_.E.w, !0);
    q.l = L.W1;
    q.data = { R: R.hA, K: j.currentTarget.ar3, _G: "switch" };
    this.k(q);
  };
  fL.prototype.ay_ = function (j) {
    var q = new fd(_.E.w, !0);
    q.l = L.W1;
    q.data = { R: R.hA, K: j.currentTarget.ar3, _G: "del" };
    this.k(q);
  };
  fL.prototype.IS = function (j) {
    var q = this.aV.a4R(this.GV.V());
    if (q) this.Nq = this.aiJ + 1;
  };
  function lk() {
    this.bq = new kv("\u2026", !1, null, !0);
    this.bq.Q("click", this.ig, this);
    this._ = this.bq._;
    this.cx = new kV();
    this.cx.parent = this;
    var j = (this.cx._ = J.m("div", "floatcont form label6"));
    j.style.width = "270px";
    var q = (this.rz =
      "dpmpp_2m_karras euler euler_a ddim dpm k_lms pndm".split(" "));
    this.atY = [
      "stablediffusion_inpaint_2",
      "realistic_vision_5_1_inpaint",
      "absolute_reality_1_8_1_inpaint",
      "dreamshaper_8_inpaint",
    ];
    var m = (this.Fi = [
      new av("Use default settings"),
      new f1("Model", [
        "Stable Diffusion 2.0",
        "Realistic Vision 5.1",
        "Absolute Reality 1.8.1",
        "Dreamshaper 8",
      ]),
      new bJ("Neg. prompt", null, 13.25),
      new dV("Guidance", -20, 20),
      new dV("Steps", 10, 50),
      new f1("Sampler", q),
    ]);
    m[0].Q(_.E.n, this.T, this);
    m[0].q(!0);
    m[1].q(1);
    m[3].q(6);
    m[4].q(20);
    for (var y = 0; y < m.length; y++) {
      j.appendChild(m[y]._);
      J.Ft(j);
    }
  }
  lk.prototype = new kV();
  lk.prototype.V = function () {
    var j = this.Fi,
      q = {},
      m = ["model", "negative_prompt", "guidance", "steps", "sampler"],
      n = !j[0].V();
    if (n) {
      for (var y = 1; y < j.length; y++) q[m[y - 1]] = j[y].V();
      q.model = this.atY[q.model];
      q.sampler = this.rz[q.sampler];
      q.steps = Math.min(q.steps, 50);
    }
    return n ? null : q;
  };
  lk.prototype.T = function () {
    var j = this.Fi;
    for (var y = 0; y < j.length; y++) {
      j[y].T();
      if (y > 0) j[y].yl(!j[0].V());
    }
  };
  lk.prototype.ig = function (j) {
    if (J.JO(this.cx._)) return;
    var q = this.bq._.getBoundingClientRect(),
      m = new fd(_.E.c, !0);
    m.data = {
      R: _.Y.wQ,
      Tf: this.cx,
      x: q.left,
      y: q.top + q.height + 4,
      LR: !0,
    };
    this.k(m);
  };
  lk.prototype.a4R = function (j) {
    if (j.length > 1e3) {
      alert("Your prompt is too long");
      return !1;
    }
    var q = new fd(_.E.NI, !0);
    q.data = L.tt.QQ("aiHeal");
    q.data.SC.prmt = { t: "TEXT", v: j };
    q.data.SC.rw = this.V();
    this.k(q);
    return !0;
  };
  function ij(j) {
    kV.call(this);
    this.gG = j;
    this.agd = 0;
    this.a0i = !1;
    this.aEs = j ? new ij.m_() : null;
    this._ = J.m("div", "flexrow storageset");
    this._.style.background = "var(--bg-panel)";
    this.Tk = J.m("div");
    this._.appendChild(this.Tk);
    this.U2 = J.m("div");
    this._.appendChild(this.U2);
    this.JA = [];
    var q = Storage.list.length;
    if (j) q = q + 1 + ij.ea.length;
    var m = this.$l.bind(this);
    for (var y = 0; y < q; y++) {
      var n = J.m("div");
      this.JA.push(n);
      this.Tk.appendChild(n);
      n.addEventListener("click", m, !1);
    }
    this.$l(null, 0);
  }
  ij.prototype = new kV();
  ij.ST = [];
  ij.G2 = function (j) {
    ij.ST.push(j);
    j.ip();
  };
  ij.SJ = function () {
    var j = ij.ST;
    j.pop();
    j[j.length - 1].ip();
  };
  ij.prototype.ip = function () {
    this.$l(null, this.agd);
  };
  ij.prototype.yp = function (j, q) {
    if (!j.Nf && !this.a0i) {
      var m = this.gG ? 2 : 1;
      for (var y = m; y < this.JA.length; y++) this.Tk.removeChild(this.JA[y]);
      this.a0i = !0;
      if (this.gG) this.aEs.yp(j, q);
    }
    if (this.n$) this.n$.yp(j, q);
  };
  ij.prototype.T = function () {
    if (this.gG) this.aEs.T();
    if (this.n$) this.n$.T();
  };
  ij.prototype.$l = function (j, q) {
    var m = this.JA,
      n;
    if (q == null) q = m.indexOf(j.currentTarget);
    this.agd = q;
    for (var y = 0; y < m.length; y++) J.XZ(m[y], "active");
    J._g(m[q], "active");
    if (this.gG) q--;
    var G = Storage.list.length;
    if (q == -1) n = this.aEs;
    else if (q < G) n = Storage.mH(q);
    else {
      var W = ij.ea[q - G];
      n = new ij.nf(W[1]);
      lw.event("strg_" + W[0]);
      if (q - G == 1) {
        window.open(W[1]);
        return;
      }
    }
    this.n$ = n;
    n.parent = this;
    J.dI(this.U2);
    this.U2.appendChild(n._);
    this.X3(this.GM, this.uu);
    this.T();
  };
  ij.prototype.X3 = function (j, q) {
    this.GM = j;
    this.uu = q;
    var m = j < 850,
      n = m ? 50 : 210,
      G = Storage.list;
    if (this.gG) G = [[[1, 19, 3], null, "strg/home"]].concat(G.concat(ij.ea));
    for (var y = 0; y < G.length; y++) {
      var W = this.JA[y],
        k = "padding: 8px " + (m ? 13 : 36) + "px; cursor:pointer;";
      J.F(W, k);
      var T = G[y][2],
        b = G[y].length == 6;
      T = b ? T : PIMG[T];
      W.innerHTML =
        '<img style="margin:0 10px -6px 0; width:22px;" class="gsicon" src="' +
        T +
        '" /> ' +
        (m ? "" : g$.get(G[y][0]));
    }
    this._.style.width = j + "px";
    this._.style.height = q + "px";
    this.Tk.style.width = n + "px";
    this.Tk.style.paddingTop = "32px";
    if (this.n$) this.n$.X3(j - n, q);
  };
  ij.ea = [
    [
      "PeaGames",
      "games",
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEAAgMAAAAhHED1AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAxQTFRFAAAAAAAAAAAAAAAANek3lgAAAAR0Uk5TAP+TQ7iym4QAAAQ/SURBVHic7Vo7khMxEDVsERCwG+0ROIIDsjmCA2s8tTtVTA7BHEGXmCNQRZmAPQBVzCV8BAIyYorCWLblkfojd2syVi/a1aifpe7XrU9psSgoKCgoKCgoKCgoKHg+uNsOhkW9/XXN/idvfcKXmfbGfEjZv7tub8xH3v5WYm/ME2d/M8gI6pEhWMrs2UncSO2NoYcgHoAx7cwB0EMQhdCD8sKgIaix/RuNvTE9InirI2hmudABuvG1lgDOQTkDNAf1DIyZFQOHeA5LPUEs552eYBPav9Tbx4FUB9EhdII6iA6hE3Y5BIETMlTgMDkhQwUO1RwVOKwuBPd5BFM6DHkEl7KUJSMH78VMH05efJVL4L2YpUMH78VdLoHXYq69r0rZQTDGzguCD0N2EIzp5mSCQzsnExyajEyot5+mfzYZUXwK92K1vhw9xk5z6fQCdRpQy4Q+/klLyaBP7RfHWPs9IYM6tUw0IPAdIYM2Je4WaHdFJHOfimwPsqchdGRT2rIgf9dENUiWmBFUkA0ebp3KL1+H78MG0GeTIvAlaBoh9vixDxfH9ZlgeWkZkRCTBL6KTiO0cwkqpGQRwfS9Qn2TBC0i6JHDlSPo5hKsUC4pndgi1Sp1oCTASmxQ4iUJUC5oCVA2Hia1A13SBLAeqAmqo/1N2H0IPtff9/s/rsfdfr//QRGcNjWB/GOCbhGAXHAaIIODW0OCMSQg61oNgnBoCL5GZxDGERUYW0QADvV4zTvPIWSOCFYxAb3q2vimJCKAh1GS4CHcHxwQ9qoAwWAESBHsniEBjMKgJejSYfx298lghD8DhARWTXrnEiUTuJQAa5ZdUPkVEYDLoWXUc0NwQgJfsMggHB2E0yMmiOYAfq2iI1vHTdvt9rPrd3v4Y4h7jkcC5ISNtKieiw36sJGuC2tyXq5dSNCS2nAEwrXxLDIUhkZK4GWOCZYyAp9oA2hvpTuUiiFYaQl2iEC4S+MIOuk+kSPopTtVjqDSEgyg3Up361wYLdKWUkgjamJOLJyU8aCOBEtEwCRTTfh1pOqGL1Yw6Guic0WQsgWlIQg6wlXGX9gsQWtLOKyhr2Uskwp4VPVI7s86MgiuFe2l3v8l7Bl9VERkOFgqOpYSFwNycSXlzYFY3tHGVYvTapF9nUjsvbVAu38tTlWC3FTLYOkcl2Oky5QY+BSoBD7IKoFvA5TwlTY7DHbB1GopvH3u1fZ0ysvMhumUl+nF7kKQeTl+8WGmFsO9+X0OQbizzioJ4fkkS0pVQJAjpfh4kqGE+ICUoYQuIshQgo0I9EoA1x36ogIOmfo5gBmo5wBnoJ4DfoWhnMOICHRaQu8XFsolknxNM8jtsQuVQ2Ce8+yk9o+0vfQ1UeI9kTAQ/Ism2YOkB9b+MAkBA/ucSeiGmnXACeRdUTj+qw/TFvvfWxZf91fNCwoKCgoKCgoKCgoK/iP8A4Y8W8cr97IuAAAAAElFTkSuQmCC",
      !0,
      "Join the contenst!",
      9986144664,
    ],
    [
      "AI Tools",
      "//www.img-tools.app/?utm_source=af-photopea&utm_medium=social&utm_campaign=af-photopea",
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgBAMAAAB54XoeAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAABtQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlFHiIAAAAAl0Uk5TACBAgJ+/3/9gnq2YfAAABcRJREFUeJytmzuMHEUQhqt8PO5IWO0CJlwfAQmBAwRkWEayQwhOODQYAyFgbJOuRIDNOzUImxCQLBHCCSScgWTxCAlsTo7AXt+tZBKM8bA7szNd012Pnhp3cJqdx7/f9vSr6u9DIGW4Z7hebP/91AT8Bcnh4/urg+LKF3dCcGVj3BwXm7/2Flw5OiCn/Yq14K6XB63zxVdbvQTx+XF0ofhk1kfw0eeSK1fP9RBcfS294qzGSvDJfcylWx+4Be8+xl776QevIAvYAXG0vj7e2X5sUgvuOiHc+G1WLdY9rLjyzawSZF5xVa6dzdF7Yl99OP2sFMST0r1ZbZHW11wRxVeyKL9/beo9eIR+unoOlV8M8O+Hll5U/8XmXPDQWLy9eNcSfCeqlCmyvaQpaxNdL3kYEe55Q3ngr891wRgQ1jA91/rCU6peCngKW1VYfHcZR8+QkfH2ex0BJwhvEb1ygBltEMUzGj8DCEhPLpvd6Cj9ym6AgHe92Xz87/3l94TOpDZtDhDw3tfThx94qTmnvWYOEJCcPd180ytNLSp9hQWkgqSJhJPKmMgCAh7cW3/+5+PmUujxsiAPSAXJiL9yvD6SGyIPCBjaNWkhYQwRBQVAwFeb+idtOIy54ngjAAKGjnI6XLQFJUBBEPizGYDenywC0pfy5RZzv/BSREAqSJpN6OB1/84FpO2QdNswivOCMiBgmFbZrscO2QogYJhESf2HN3Xzo26AgLtfaI6bSiRTP+ngWYCA5OFmIAj1yi7pNEB2CqBrE2YKUAHnEzNZKlWTVBhqgF3RqYAQTaMXf8bhBr15sULrAgjGRM8s3XXAuWB7PZaUGNEAnAuKC2Ie0QAEfTmXIlqAoC84U0QL0FgSJ4gmYLloD9O6iWgClmEF6c4Gog1YCqqL4haiDaiGZgliBmAlSBeEGmIGYCVIF4QKYg6gEoCniDmAdYrgoRdtxCzAJolxYC9zsY2YBdikWVafHRuIeYAhEbR6uJUI+i0iLjYPZQGSVNXDTwfG6fkbx6Mbr4+yAFvJtLdvLI8u/Gg3dimCQfpheOzCenH9j+0tiKYq7kEhCkT+NJiIUoglC+qIYpgqC+qIYgyoCGqIchytCGqIcpCqCcqISqCvCcqIShStCkqIWiaiiVPqeKT1WUBcAErP6YI8YgnoE+QRyxp0CnKIVQ06BTnE6hV7BVPE5Sv2CqaLvWVc4BVMZpI6mvQKJlNdndxxCoqAXkER0CkoAzoFZUCfoALoE1QAXYIaoCwIctEAxaIIqoAeQRegIugDVAQNwIEQZouCBiAeSUJ9Q9AA3H1YcOkkwQSwnYzFk0w2IhUc7nlkAMXlS1tmTDKPNwUjkfOXYfr9n0bqY5Gb4REFfzkOAlJAyesM/nKHBesyecQiSv6yDSggiv6yDcgjyv6yCcgjVoJGUCIAsoiV4EE9FhUAWcRSkLg+nQA5ROwDyCEuBL01yCKq/rIJyCCq/jIDSG1AFtFOpkUxSbykjRGRGak0wLTCI0SkafUMQBMRO8fFBqLhL3NRnY5opJ0590NHNPxl1kFSEZFmnRl/mfhKeYhIrzL+Mru7Q0NE8k44f5m1gzVEy1/mDBoV0ecvK4hOf1lGtPxl3oZTEImV2clfFhGJIOsvS+6tiOj2lyVEr78sIlr+srzjRkB0/2QJ0fKXlT1BPKLPX1YQff6ygmj5y9p2NxbR8pfVPUYcosdfVhE9/rKKaPnL+gY/BtHyl9VNUByi4S9rrYZH7LeRLEW8ZfjL6ktelBhxzfCXrc14sT127Wzf7YJtT3De8PpuaGwp3v501n/LJYmzp+dnoPvLGb+4LKP9w0Gxc/GXUh4UfznnFy8pBzv1ESjOaN7G2kh68UfwEKxuIgsK/rJ/czLvL7sANX/ZU4NNioDxl7N2JouCqb+cl9wTBRN/ubhv0k8w9pd7/6NB21++E/8KAcRfLnt5f8HKX75/dmmR7nOX/wHUTMNAfPQixAAAAABJRU5ErkJggg==",
      !0,
      "Join the contenst!",
      1730950917,
    ],
  ];
  for (var y = 0; y < ij.ea.length; y++)
    if (ij.ea[y][5] * 1e3 < Date.now()) {
      ij.ea.splice(y, 1);
      y--;
    }
  ij.m_ = function () {
    this.aq = null;
    var j = (this._ = J.m("div"));
    j.style.background = "var(--bg-canvas)";
    var q = (this.v$ = J.m("div"));
    j.appendChild(q);
    var m = J.m("style");
    j.appendChild(m);
    m.textContent =
      " .bhover       { transition: background 0.2s ease-in-out;  background:rgba(255,255,255,0   );} " +
      " .bhover:hover { transition: background 0.2s ease-in-out;  background:rgba(255,255,255,0.05);}";
    for (var y = 0; y < 2; y++) {
      var n = J.m("div"),
        m = "filter: drop-shadow(4px 6px 4px rgba(0,0,0,0.25)); ";
      q.appendChild(n);
      if (y == 0) m += "padding: 12px 0px";
      if (y == 1) m += "position:absolute;  bottom:0;";
      J.F(n, m);
      var G = J.m("img");
      n.appendChild(G);
      G.setAttribute(
        "src",
        PIMG[y == 0 ? "l" + "o" + "g" + "o" : "b" + "o" + "t" + "t" + "o" + "m"]
      );
      if (y == 0) this.aEA = G;
      else this.a0A = G;
      if (y == 0) this.a78 = n;
      else this.ads = n;
    }
    this.JA = [];
    m =
      "display:inline-block;  font-size:1.25em; border:1px solid #aaa;  border-radius:6px;  margin:20px 0 0 20px;";
    var W = this.cU.bind(this),
      k = J.m("div");
    q.appendChild(k);
    J.F(k, "width:min(80%,556px);  margin:0px 0 0 10px;  text-align:center");
    for (var y = 0; y < 4; y++) {
      var T = J.m("span", "bhover");
      this.JA.push(T);
      J.F(T, m + "cursor:pointer; padding:12px;");
      T.addEventListener("click", W, !1);
      k.appendChild(T);
    }
    J.Ft(q);
    var n = (this.a3R = J.m("div"));
    J.F(
      n,
      m +
        "width:min(80%,556px);  padding:60px 0;  text-align:center; opacity:0.3;"
    );
    q.appendChild(n);
    var b = new Date().getDate(),
      c = new Date().getMonth();
    if ((c == 11 && b > 20) || (c == 0 && b < 10)) {
      this.Bl = J.m("canvas");
      J.F(
        this.Bl,
        "position:absolute;top:0;pointer-events:none; mix-blend-mode: screen;"
      );
      this.lB = this.Bl.getContext("2d");
      this.aF5 = B.j(4);
      j.appendChild(this.Bl);
      var a = Math.random() < 0.5,
        f = { o: 255, i: 255, X: 255 };
      if (!a) {
        f = B.ld(Math.random(), Math.random() * 0.7, 1);
        f.o *= 255;
        f.i *= 255;
        f.X *= 255;
      }
      this.zT = [
        Math.round(1048575 * Math.random()),
        a ? 0.05 : 0.02,
        Math.round(4 + Math.random() * 8),
        1,
        a ? 3 : 15,
        f,
        0,
        !0,
        a,
        a ? 1 : 0.2,
        3,
      ];
      this.aFy = a ? 0.1 : 0.2;
      this.$E = this.MX.bind(this);
      window.requestAnimationFrame(this.$E);
    }
  };
  ij.m_.prototype = new kV();
  ij.m_.prototype.MX = function () {
    window.requestAnimationFrame(this.$E);
    if (!J.JO(this._)) return;
    var j = this.aF5,
      q = this.Bl,
      m = this.lB,
      n = q.width,
      G = q.height;
    this.zT[6] = Date.now() * 0.001 * this.aFy;
    B.Fy.nQ(j, n, G, this.zT, !0);
    m.putImageData(new ImageData(new Uint8ClampedArray(j.buffer), n, G), 0, 0);
  };
  ij.m_.prototype.cU = function (j) {
    var y = this.JA.indexOf(j.currentTarget),
      q = new fd(_.E.c, !0);
    if (y == 0) q.data = { R: _.Y.s0, kO: "newproject" };
    if (y == 1) q.data = { R: _.Y.z1 };
    if (y == 2) q.data = { R: _.Y.s0, kO: "res0" };
    if (y == 3) q.data = { R: _.Y.XJ };
    this.k(q);
  };
  ij.m_.prototype.T = function () {
    var j = this.JA,
      q = [
        [11, 7],
        [1, 6],
        [25, 0],
        [0, 17, 6],
      ],
      m = ["\u2605", "\uD83E\uDC7F", "\u25A3"],
      m = ["lrs/newlayer", "strg/tdevice", "pix_layer", "lrs/clipping"];
    for (var y = 0; y < j.length; y++)
      j[y].innerHTML =
        '<span style="vertical-align:middle">' +
        J.CP(m[y], null, "autoscale") +
        "</span>\u2000" +
        (ei == 1 && y == 3 ? "Install Vectorpea" : g$.get(q[y]));
    var n = "l" + "o" + "g" + "o",
      G = n + "_" + ["pp", "vp", "pp"][ei],
      W = new Date();
    if (W.getMonth() == 3 && W.getDate() == 1) G = "lo" + "go_cuc" + "umber";
    if (PIMG[n]) G = n;
    this.a3R.textContent = g$.get([0, 17, 7]);
    this.aEA.setAttribute("src", PIMG[G]);
    this.a0A.setAttribute("src", PIMG["b" + "o" + "t" + "t" + "o" + "m"]);
  };
  ij.m_.prototype.X3 = function (j, q) {
    var m = Math.min(q * 1.5, Math.min(j, 600)),
      n = this.Bl;
    if (n) {
      J.Q0(n, j, m * 0.26);
      this.aF5 = B.j(n.width * n.height * 4);
    }
    this._.style.width = j + "px";
    this._.style.height = q + "px";
    this.ads.style.width = j + "px";
    this.v$.style.marginLeft =
      Math.max(0, Math.round((j + 200 - 600) / 2) - 200) + "px";
    this.aEA.style.width = m + "px";
    this.a0A.style.width = m + "px";
  };
  ij.m_.prototype.yp = function (j, q) {
    var m = j;
    if (j == null) j = this.a;
    this.a = j;
    if (!j.Nf && this.JA[2].parent) {
      this.v$.removeChild(this.JA[2]);
      this.v$.removeChild(this.JA[3]);
    }
    this.JA[3].style.display = j.qR ? "inline-block" : "none";
    if (m) this.aq = setTimeout(this.yp.bind(this), 100);
  };
  ij.nf = function (j) {
    var q = (this._ = J.m("iframe"));
    q.style.background = "var(--bg-canvas)";
    q.setAttribute("src", j);
  };
  ij.nf.prototype = new kV();
  ij.nf.prototype.X3 = function (j, q) {
    var m = this._;
    m.style.width = j + "px";
    m.style.height = q + "px";
  };
  ij.nf.prototype.yp = function () {};
  function Storage(j) {
    kV.call(this);
    var q = (this._ = J.m("div", "storage"));
    J.l3(q);
    q.addEventListener("drop", this.ajo.bind(this), !1);
    var m = (this.aqM = J.m("style"));
    q.appendChild(m);
    q.setAttribute("tabindex", "0");
    q.style.outline = "none";
    q.addEventListener("keydown", this.a4E.bind(this), !1);
    this.eS = this.aHW.bind(this);
    this._2 = 0;
    this.Nq = 0;
    var n = J.m("div");
    q.appendChild(n);
    var G = this.aDv.bind(this);
    this.JI = J.m("div", "bar");
    n.appendChild(this.JI);
    this.$c = J.m("div", "fls scrollable");
    n.appendChild(this.$c);
    this.jC = J.m("div");
    n.appendChild(this.jC);
    J.F(
      this.jC,
      "position:absolute; bottom:0;  background-color:white; padding: 2px 8px 0px 8px;"
    );
    this.Ga = J.m("div", "bar");
    this.Ga.textContent = "Name: ";
    var W = (this.hi = J.m("input"));
    W.setAttribute("type", "text");
    this.Ga.appendChild(W);
    var k = (this.K1 = J.m("div", "btn"));
    k.textContent = "Save";
    this.Ga.appendChild(k);
    J.sP(k, G);
    J.PD(this.$c, this.eS);
    this.ag6 = 0;
    this.R$ = j;
    var T = this.a08.bind(this),
      b = (this.aGL = J.m("div"));
    J.F(b, "text-align:center; font-size:1.6em");
    var c = J.m("img");
    b.appendChild(c);
    J.Ft(b);
    c.setAttribute("src", PIMG[Storage.list[this.R$][2]]);
    J.F(c, "opacity:0.5;  width:25%; cursor:pointer;");
    J.sP(c, T);
    this.aqn = J.m("div", "btn");
    b.appendChild(this.aqn);
    J.sP(this.aqn, T);
    this.zH = new cG([
      { name: [6, 20] },
      {
        name: [5, 2],
        RP: [gn.A8, gn.qj],
        f: function () {
          return { f: Storage.ie != null };
        },
      },
    ]);
    this.zH.parent = this;
    this.zH.Q("select", this.CB, this);
    this.$c.addEventListener("contextmenu", this.eS);
    this.ao_ = J.m("span");
    this.Pz = J.m("span");
    J.F(this.Pz, "position:absolute; right:0; top:5px; z-index:1; ");
    this.z8 = [];
    this.kq = [];
    for (var y = 0; y < 3; y++) {
      var a = J.m("div", "btn");
      this.z8.push(a);
      this.ao_.appendChild(a);
      J.sP(a, G);
      a.innerHTML = Storage.anP[[3, 1, 0][y]];
    }
    for (var y = 0; y < 5; y++) {
      if (y == 0) {
        var f = J.m("span");
        f.textContent = "Sort by:";
        this.Pz.appendChild(f);
      }
      var a = J.m("div", "btn");
      this.kq.push(a);
      this.Pz.appendChild(a);
      J.sP(a, G);
    }
    window.addEventListener("message", this.adJ.bind(this), !1);
    this.agG = !1;
    this.cm = 0;
    setInterval(this.aHN.bind(this), 300);
    this.No();
    var U = (this.aro = document.createElement("input"));
    U.setAttribute("type", "file");
    U.addEventListener("change", this.ajo.bind(this), !1);
    document.body.appendChild(U);
    J.F(U, "display:none");
    U.setAttribute("multiple", "");
  }
  Storage.prototype = new kV();
  Storage.Qk = !1;
  (function () {
    Storage.anP = [];
    var j =
        '<svg viewBox="0 0 14 14" width="10" height="10" fill="black"><path transform="translate(7 7) rotate(',
      q =
        ') translate(-7 -7)" d="m4 4m-4 2h11l-5-5 2-1 7 7-7 7-2-1 5-5h-11" /></svg>';
    for (var y = 0; y < 4; y++) Storage.anP.push(j + [-90, 0, 90, 180][y] + q);
  })();
  Storage.prototype.ajo = function (j) {
    j.stopPropagation();
    j.preventDefault();
    var q = j.dataTransfer ? j.dataTransfer.files : j.target.files;
    this.aw5 = q.length;
    Storage.ie = {};
    for (var y = 0; y < q.length; y++) {
      var m = q[y],
        n = new FileReader();
      n.L6 = m;
      n.onload = this.awC.bind(this);
      n.readAsArrayBuffer(m);
    }
  };
  Storage.prototype.awC = function (j) {
    var q = Storage.ie;
    q[j.target.L6.name] = j.target.result;
    this.aw5--;
    if (this.aw5 == 0) this.mz();
  };
  Storage.prototype.yp = function (j, q) {
    var m = Storage.list[this.R$][3],
      n = lw.xq();
    if (m) {
      if (this.cm == 1 && J.JO(this._) && n != null) {
        this.No();
      }
      if (this.cm == 2 && n == null) {
        this.tQ("forget", "");
      }
    }
  };
  Storage.prototype.aHN = function () {
    var j = J.JO(this._),
      q = this.agG;
    if (j && !q) {
      history.pushState(null, null, location.href);
      window.onpopstate = function () {
        history.go(1);
      };
    }
    if (!j && q) {
      window.onpopstate = function () {};
      history.go(-1);
    }
    this.agG = j;
  };
  Storage.prototype.No = function () {
    if (this.t_) document.body.removeChild(this.t_);
    this.D6 = [[]];
    this.fW = 0;
    this.ac3 = { "/": [] };
    this.a1g = "";
    this.hK = null;
    this.QD = [];
    this.abo = [];
    this.a42 = [];
    this.anr = null;
    var j = Storage.list[this.R$][1],
      q = lw.sX("code/storages/" + Storage.list[this.R$][1]);
    if (ei == 1 && this.R$ == 0) q = j;
    var m = (this.t_ = J.m("iframe"));
    m.setAttribute("src", q);
    J.F(m, "display:none");
    document.body.appendChild(m);
  };
  Storage.prototype.wJ = function () {
    return this.ac3[this.y$()];
  };
  Storage.prototype.w_ = function (j) {
    this.ac3[this.y$()] = j;
  };
  Storage.mH = function (y) {
    var j = Storage.XS[y];
    if (j == null) j = Storage.XS[y] = new Storage(y);
    return j;
  };
  Storage.XS = [];
  Storage.Dm = 0;
  Storage.V0 = "";
  Storage.Vg = null;
  Storage.MI = function (j, q, m) {
    Storage.Dm = j;
    Storage.V0 = q;
    Storage.Vg = m;
    var n = Storage.XS;
    for (var y = 0; y < n.length; y++)
      if (n[y]) {
        if (j == 1) n[y].w_([]);
        n[y].ip();
      }
  };
  Storage.aCO = [500 * (1 << 20), 5e3 * (1 << 20)];
  Storage.EH = 0;
  Storage.gU = 2;
  Storage.EQ = 0;
  Storage.list = [
    [[1, 19, 4], "deviceStorage.html", "strg/tdevice", !1, null],
    [
      "PeaDrive",
      "peadriveStorage.html",
      "strg/peadrive",
      !0,
      "A cloud storage system from Photopea.",
    ],
    ["Dropbox", "dropboxStorage.html", "strg/dropbox", !1, null],
    ["OneDrive", "onedriveStorage.html", "strg/onedrive", !1, null],
    ["Google Drive", "googledriveStorage.html?mode=0", "strg/gdrive", !1, null],
    [
      "Shared Drives",
      "googledriveStorage.html?mode=1",
      "strg/gdrive",
      !1,
      "Give Photopea a direct access to Shared Drives in your Google Drive.",
    ],
    [
      "Shared with me",
      "googledriveStorage.html?mode=4",
      "strg/gdrive",
      !1,
      'Give Photopea a direct access to "Shared with me" in your Google Drive.',
    ],
    [
      "Private Folder",
      "googledriveStorage.html?mode=3",
      "strg/gdrive",
      !1,
      'Let\'s make a folder "Photopea" in your Google Drive (we will have access only to that folder).',
    ],
  ];
  Storage.aqf = function (j) {
    for (var y = 0; y < Storage.XS.length; y++) {
      if (Storage.XS[y] && Storage.XS[y].t_.contentWindow == j) return !0;
    }
    return !1;
  };
  Storage.prototype.a4E = function (j) {
    if (j.target.tagName == "INPUT") return;
    var q = gn;
    if (q.Uw(j.code, q.gv) && this.y$().length != 0) this.a2b();
    else if (j.ctrlKey) {
      if (q.Uw(j.code, q.Y)) {
        var m = [];
        this.w_(m);
        for (var y = 0; y < this.hK.length; y++) m.push(y);
        this.Rg();
      }
      if (q.Uw(j.code, q.dV)) this.fR(2);
      if (q.Uw(j.code, q.qj)) this.mz();
    } else if (q.Uw(j.code, q.FP)) {
      var n = this.wJ();
      if (n.length != 0) this.aiF(n);
    } else if (q.Uw(j.code, q.N7)) {
      this.fW = Math.max(this.fW - 1, 0);
      this.Sl();
    } else {
      var G = 0;
      for (var y = 65; y <= 90; y++)
        if (j.code == "Key" + String.fromCharCode(y)) G = y;
      if (G != 0) {
        var W = String.fromCharCode(G).toLowerCase(),
          k = [],
          T = this.hK,
          b;
        for (var y = 0; y < T.length; y++)
          if (T[y][0][0].toLowerCase() == W) k.push(y);
        if (k.length == 0) return;
        var n = this.wJ();
        if (n.length == 0) b = k[0];
        else {
          var c = k.indexOf(n[0]);
          if (c == -1) {
            b = k[0];
            for (var y = 0; y < k.length; y++)
              if (k[y] > n[0]) {
                b = k[y];
                break;
              }
          } else b = k[(c + 1) % k.length];
        }
        this.w_([b]);
        this.Rg(!0);
      }
    }
  };
  Storage.prototype.X3 = function (j, q) {
    this.GM = j;
    this.uu = q;
    this._.style.width = j + "px";
    this._.style.height = q + "px";
    var m = j - 30,
      n = Math.floor(m / 230),
      m = Math.floor(m / n) - 72;
    this.aqM.textContent = ".storage .tile .name {  width:" + m + "px;  }";
    this.hi.style.width = j - 140 + "px";
    this.$c.style.width = this.JI.style.width = j - 20 + "px";
    this.$c.style.height = q - 70 - (Storage.Dm == 0 ? 0 : 45) + "px";
  };
  Storage.prototype.a08 = function () {
    this.Sl();
  };
  Storage.prototype.Sl = function () {
    var j = this.R$,
      q = "____strg" + j;
    if (window[q] == null) {
      lw.event("strg_" + (j == 0 ? "This Device" : Storage.list[j][0]));
      window[q] = !0;
    }
    this.Nq = 1;
    this.tQ("show", this.y$());
  };
  Storage.prototype.y$ = function (j) {
    var q = this.D6[this.fW],
      m = "/" + q.join("/");
    if (j && q.length != 0) m += "/";
    return m;
  };
  Storage.prototype.aDv = function (j) {
    var q = j.currentTarget,
      m = this.fW,
      n = this.z8.indexOf(q),
      G = this.kq.indexOf(q);
    if (n >= 0 && !this.aKE(n)) return;
    if (n == 0) {
      this.fW = Math.max(m - 1, 0);
      this.Sl();
    }
    if (n == 1) {
      this.fW = Math.min(m + 1, this.D6.length - 1);
      this.Sl();
    }
    if (n == 2) {
      var W = (this.D6[m + 1] = this.D6[m].slice(0));
      W.pop();
      this.fW++;
      this.D6 = this.D6.slice(0, this.fW + 1);
      this.Sl();
    }
    if (G == 0) {
      Storage.gU = (Storage.gU + 1) % 3;
      this.ip();
    }
    if (G == 1) {
      Storage.EQ = (Storage.EQ + 1) % 2;
      this.ip();
    }
    if (G == 2) {
      Storage.EH = (Storage.EH + 1) % 3;
      this.ip();
    }
    if (G == 3) {
      var k = document.createEvent("MouseEvents");
      k.initMouseEvent(
        "click",
        !0,
        !0,
        document.defaultView,
        1,
        0,
        0,
        0,
        0,
        !1,
        !1,
        !1,
        !1,
        0,
        null
      );
      this.aro.dispatchEvent(k);
    }
    if (G == 4) {
      this.tQ("forget", "");
    }
    if (q == this.K1) {
      var T = this.aes(),
        b = this.hK,
        c = -1;
      if (T == null) return;
      for (var y = 0; y < b.length; y++) if (b[y][0] == T) c = y;
      if (c != -1) {
        this.wa(
          'Do you really want to replace "' + T + '"?',
          this.aKh.bind(this)
        );
      } else this.aKh();
    }
  };
  Storage.prototype.aKh = function () {
    var j = this.aes();
    if (j == null) return;
    var q = [this.R$, this.y$(!0) + j];
    if (Storage.Vg) {
      this.akk(this.y$(!0) + j, Storage.Vg);
      Storage.Vg = null;
      Storage.V0 = null;
    } else this.iX({ R: _.Y.a1T, qu: q });
    this.k(new fd("canclose", !0));
  };
  Storage.prototype.aes = function () {
    var aF = this.hi.value.trim(),
      j = '\\/:*?"<>|';
    for (var y = 0; y < j.length; y++)
      if (aF.indexOf(j[y]) != -1) {
        alert("A file name can't contain " + j[y]);
        return null;
      }
    return aF;
  };
  Storage.prototype.mz = function () {
    if (Storage.ie == null) return;
    this.iX({ R: _.Y.gu, r8: g$.get("Uploading ...") });
    this._2 = 4;
    gO.mH(
      2,
      this.t_,
      [this.y$(), Storage.ie, this.hK],
      null,
      this.a8K.bind(this)
    );
  };
  Storage.prototype.a8K = function (j) {
    this._2 = 0;
    this.iX({ R: _.Y.dO, r8: g$.get("Uploading ...") });
    this.Sl();
  };
  Storage.prototype.CB = function (j) {
    var q = j.target.r9();
    if (j.target == this.zH) {
      if (q[0] == 0) {
        var m = [g$.get([6, 20]), -1, 0];
        this.hK.push(m);
        this.ip();
        var y = this.hK.indexOf(m),
          n = this.QD[y].querySelector(".name");
        console.log(n);
        var G = new bI.va(
          n,
          function (f) {
            this.iX({ R: _.Y.gu, r8: g$.get([1, 2]) + " ..." });
            var U = this.y$(!0) + f + "/";
            console.log(U);
            this.tQ("save", U);
          }.bind(this),
          !0
        );
      } else this.mz();
    } else {
      if (q[0] == 0) {
        this.fR(2);
      } else if (q[0] == 1) {
        var y = this.wJ()[0],
          W = this.hK[y],
          n = this.QD[y].querySelector(".name");
        console.log(n);
        n.innerHTML = W[0];
        var G = new bI.va(
          n,
          function (f) {
            f = f.trim();
            if (f.indexOf("/") != -1) {
              alert("You can not use slashes in a file name.");
              this.ip();
              return;
            }
            var U = this.hK;
            for (var y = 0; y < U.length; y++)
              if (U[y][0] == f) {
                alert("Item with such name already exists.");
                this.ip();
                return;
              }
            var Z = this.y$(!0) + W[0] + ":" + f;
            console.log(Z);
            this.tQ("rename", Z);
          }.bind(this)
        );
      } else if (q[0] == 2) {
        this.fR(3);
      } else if (q[0] == 3) this.a2b();
      else if (q[0] == 4) {
        this.fR(1);
      } else {
        var k = this.hK[this.wJ()[0]],
          T = Storage.qp(k),
          b = T[q[1]],
          c = b[0],
          a = this.VE().pop()[1];
        if (Storage.a4v(k, c) != -1) {
          this.tQ("share", a + ":" + c + ":-1");
          alert("Unshared.");
        } else {
          this.tQ("share", a + ":" + c + ":" + q[2]);
          alert("Shared.");
        }
      }
    }
  };
  Storage.a4v = function (j, q) {
    var m = j[4];
    if (m == null) return -1;
    if (m.indexOf(q + ":0") != -1) return 0;
    if (m.indexOf(q + ":1") != -1) return 1;
    return -1;
  };
  Storage.prototype.a2b = function () {
    var j = this.wJ();
    this.wa(
      "Do you really want to delete " +
        (j.length == 1 ? '"' + this.hK[j[0]][0] + '"' : "these files") +
        "?",
      this.DZ.bind(this)
    );
  };
  Storage.prototype.wa = function (j, q) {
    var m = { R: _.Y.s0, kO: "confirm", K: j, ml: q };
    this.iX(m);
  };
  Storage.prototype.fR = function (j) {
    this._2 = j;
    if (1 < j) this.iX({ R: _.Y.gu, r8: g$.get("Downloading ...") });
    else this.iX({ R: _.Y.gu, r8: g$.get("Getting info ...") });
    gO.mH(0, this.t_, this.y$(), this.VE(!0), this.a6m.bind(this));
  };
  Storage.prototype.a6m = function (j) {
    if (this._2 == 1) {
      var q = 0,
        m = 0;
      for (var n in j) {
        var G = j[n];
        q += G[1];
        m++;
      }
      this.wa(m + " files, " + bE.za(q) + " in total.", function () {});
      this.iX({ R: _.Y.dO, r8: g$.get("Getting info ...") });
      this._2 = 0;
    }
    if (1 < this._2) gO.mH(1, this.t_, j, null, this.aEq.bind(this));
  };
  Storage.prototype.aEq = function (j) {
    if (1 < this._2) {
      if (1 < this._2) this.iX({ R: _.Y.dO, r8: g$.get("Downloading ...") });
      var q = {},
        m = this.y$(!0);
      for (var n in j) q[n.slice(m.length)] = j[n];
      if (this._2 == 2) {
        Storage.ie = q;
        alert("Copied to a clipboard");
      }
      if (this._2 == 3) {
        var G = Object.keys(j);
        if (G.length == 1) jc.save(j[G[0]].buffer, G[0].split("/").pop());
        else
          jc.save(
            UZIP.encode(q),
            m == "/" ? "files.zip" : this.y$().split("/").pop() + ".zip"
          );
      }
    }
    this._2 = 0;
  };
  Storage.ie = null;
  Storage.prototype.DZ = function () {
    this.iX({ R: _.Y.gu, r8: g$.get([5, 4]) + " ..." });
    this.abo = this.VE();
    this.eV();
  };
  Storage.prototype.eV = function () {
    if (this.abo.length == 0) {
      this.iX({ R: _.Y.dO, r8: g$.get([5, 4]) + " ..." });
      this.w_([]);
      this.Sl();
    } else this.tQ("delete", this.abo.pop()[1]);
  };
  Storage.prototype.VE = function (j) {
    var q = [],
      m = this.y$(!0),
      n = this.wJ();
    for (var y = 0; y < n.length; y++) {
      var G = this.hK[n[y]];
      if (j) q.push(G[0]);
      else q.push([this.R$, m + G[0]]);
    }
    return q;
  };
  Storage.prototype.tQ = function (j, q) {
    J._g(this._, "disabled");
    this.a1g = j;
    if (Storage.Qk)
      console.log(
        Math.floor(Date.now() / 1e3),
        '{"code": "' + j + '", "prm": ' + JSON.stringify(q) + "  }"
      );
    this.t_.contentWindow.postMessage(
      '{"code": "' + j + '", "prm": ' + JSON.stringify(q) + "  }",
      "*"
    );
  };
  Storage.prototype.adJ = function (j) {
    if (j.source != this.t_.contentWindow || this._2 != 0) return;
    J.XZ(this._, "disabled");
    if (typeof j.data == "string") {
      if (Storage.Qk) console.log("==", Math.floor(Date.now() / 1e3), j.data);
      var q = JSON.parse(j.data),
        m = q.code,
        n = q.prm,
        G = this.a1g,
        W = Storage.list[this.R$][3];
      if (m == "ready") {
        if (W && !n) {
          var k = lw.xq();
          console.log(k);
          var T = lw.PZ(),
            b = T.acc;
          if (k == null) {
            this.cm = 1;
            alert("Log in to use this storage (press Account at the top).");
            this.Qq();
            return;
          }
          var c = [],
            a = k.wantToJoin;
          for (var f in a) c.push(parseInt(f.slice(1)));
          var U = [],
            Z = k.inTeams;
          for (var y = 0; y < Z.length; y++) U.push(Z[y][2]);
          var h = {
            uid: k.id,
            limit: Storage.aCO[lw.eo() ? 1 : 0],
            inTeams: U,
            myTeams: c,
          };
          h.secret = b && b.pds ? b.pds : "";
          this.tQ("login", h);
          return;
        }
        if (W) this.cm = 2;
        if (W && q.secret) {
          var T = lw.PZ(),
            b = T.acc;
          if (b == null) b = T.acc = {};
          b.pds = q.secret;
          lw.$R(T);
        }
        if (n) this.Sl();
        else this.Qq();
      } else if (m != "0") {
        if (G == "save") this.iX({ R: _.Y.dO, r8: g$.get([1, 2]) + " ..." });
        if (G == "delete") this.eV();
        alert(n);
        this.ip();
      } else if (G == "show") {
        this.Nq = 0;
        this.hK = n;
        this.ip();
      } else if (G == "save") {
        this.Nq = 0;
        this.iX({ R: _.Y.dO, r8: g$.get([1, 2]) + " ..." });
        this.Sl();
      } else if (G == "delete") {
        this.eV();
      } else if (G == "forget") {
        if (W) this.Qq();
        else this.No();
      } else if (G == "rename" || G == "share") {
        this.Sl();
      } else throw m;
    } else {
      if (Storage.Qk)
        console.log(Math.floor(Date.now() / 1e3, "==", "ArrayBuffer[]"));
      this.iX({ R: _.Y.aDA, qu: this.VE()[this.AE], py: j.data });
      this.aGA();
    }
  };
  Storage.prototype.Qq = function () {
    J.dI(this.JI);
    J.dI(this.$c);
    J.dI(this.jC);
    this.$c.appendChild(this.aGL);
  };
  Storage.prototype.aKE = function (y) {
    if (y == 0) return this.fW > 0;
    if (y == 1) return this.fW < this.D6.length - 1;
    if (y == 2) return this.y$() != "/";
  };
  Storage.aEC = function (j) {
    j = j + "";
    return j.length == 1 ? "0" + j : j;
  };
  Storage.aej = function (j) {
    var q = new Date(j),
      m = Storage.aEC,
      n = m(q.getDate()) + "." + m(q.getMonth() + 1) + "." + q.getFullYear();
    if (q.toLocaleDateString().indexOf("/") != -1)
      n = m(q.getMonth() + 1) + "/" + m(q.getDate()) + "/" + q.getFullYear();
    var G = m(q.getHours()) + ":" + m(q.getMinutes());
    return n + " " + G;
  };
  Storage.colSpan = function (j) {
    var q = J.m("span");
    q.style.opacity = "0.8";
    q.style.display = "inline-block";
    q.style.width = "120px";
    q.textContent = j;
    return q;
  };
  Storage.prototype.ip = function () {
    var j = Storage.list[this.R$][3],
      q = this.hK,
      m = Storage.gU,
      n = Storage.EQ,
      G = Storage.EH;
    if (q == null) return;
    q.sort(function (E, A) {
      var Q = E[1] == -1 ? 1 : 5,
        e = A[1] == -1 ? 1 : 5,
        Y = 0;
      if (Math.min(Q, e) == 1 && Q != e) return Q - e;
      else if (Q == 1 || m == 0)
        Y = E[0].toLowerCase() < A[0].toLowerCase() ? -1 : 1;
      else if (m == 1) Y = E[1] - A[1];
      else if (m == 2) Y = E[2] - A[2];
      if (n == 1) Y = -Y;
      if (E[0] == "Shared") Y = -1;
      if (A[0] == "Shared") Y = 1;
      return Y;
    });
    var W = this.$c,
      k = this.JI,
      T = this.D6[this.fW];
    J.dI(W);
    J.dI(k);
    this.QD = [];
    for (var y = 0; y < 3; y++)
      if (this.aKE(y)) J.XZ(this.z8[y], "disabled");
      else J._g(this.z8[y], "disabled");
    k.appendChild(this.ao_);
    k.appendChild(this.Pz);
    var b = J.m("span");
    b.textContent = "/";
    k.appendChild(b);
    for (var y = 0; y < T.length; y++) {
      var b = J.m("span");
      b.textContent = T[y];
      k.appendChild(b);
      var b = J.m("span");
      b.textContent = "/";
      k.appendChild(b);
    }
    var c = ["tile", "icon", "litm"][G];
    for (var y = 0; y < q.length; y++) {
      var a = q[y],
        f = a[1] == -1,
        U = f ? "" : bE.za(a[1]),
        Z = J.m("div", "cont " + c),
        K = !1;
      W.appendChild(Z);
      this.QD.push(Z);
      var h = f ? "" : Storage.aej(a[2] * 1e3);
      Z.setAttribute(
        "title",
        a[0] + (f ? "" : "\nSize: " + U + "\nDate Modified: " + h)
      );
      var u = J.m("img");
      u.setAttribute("src", f ? Storage.apF : a[3] ? a[3] : Storage.L6);
      if (!f && a[3]) J.F(u, "box-shadow: 1px 1px 2.5px rgba(0,0,0, .4);");
      var i = J.m("span", "name"),
        x = a[0];
      if (c == "icon" && x.length > 30)
        x = x.slice(0, 24) + ".." + x.slice(x.length - 5);
      if (j && T.length == 1 && T[0] == "Shared") {
        var X = Storage.qp(),
          $ = parseInt(x.slice(5));
        for (var H = 0; H < X.length; H++) if (X[H][0] == $) x = X[H][1];
      }
      i.textContent = x;
      Z.appendChild(u);
      Z.appendChild(i);
      if (c != "icon" && !f) {
        if (c == "litm") Z.appendChild(Storage.colSpan(h));
        if (c == "tile") J.Ft(i);
        var C = Storage.colSpan(U);
        if (c == "litm") C.style["text-align"] = "right";
        (c == "tile" ? i : Z).appendChild(C);
      }
      var l = a[0].split("."),
        v = (l.length == 1 ? "" : l.pop()).toUpperCase();
      if (j && a[0] == "Shared" && T.length == 0) {
        K = !0;
        v = "\u21E7";
      }
      if (c != "litm" && ((!f && a[3] == null) || K)) {
        var S = J.m("span", "ext");
        S.textContent = v;
        var o = Storage.Aj[v];
        S.style.backgroundColor = o ? o : Storage.a8q(v);
        Z.appendChild(S);
      }
      J.PD(Z, this.eS);
      Z.addEventListener("contextmenu", this.eS);
    }
    this.Rg();
    var V = this.Ga.parentNode != null,
      P = Storage.Dm,
      z = this._;
    if (V && P == 0) z.removeChild(this.Ga);
    if (!V && P == 1) z.appendChild(this.Ga);
    this.X3(this.GM, this.uu);
    this.T();
  };
  Storage.prototype.Rg = function (j) {
    var q = this.QD,
      m = this.hK,
      n = this.wJ(),
      G = !1,
      W = 0,
      k = Storage.V0 ? Storage.V0.split(".").pop() : "";
    for (var y = 0; y < q.length; y++) {
      var T = m[y],
        b = T[1] == -1,
        c = q[y];
      if (Storage.Dm == 1 && !b && !T[0].toLowerCase().endsWith(k))
        c.style.display = "none";
      else c.style.display = "auto";
      if (n.indexOf(y) == -1) J.XZ(c, "active");
      else {
        if (b) G = !0;
        else W += T[1];
        J._g(c, "active");
        if (j) c.scrollIntoView({ block: "center", behavior: "smooth" });
      }
    }
    var a = G ? "" : bE.za(W);
    this.jC.textContent =
      n.length == 0
        ? ""
        : n.length +
          " item" +
          (n.length == 1 ? "" : "s") +
          " selected\u2001" +
          a;
    this.hi.value = n.length == 1 && !G ? m[n[0]][0] : Storage.V0;
  };
  Storage.prototype.aiF = function (j) {
    var q = j[0],
      m = this.hK[q];
    if (m[1] == -1) {
      var n = this.D6[this.fW].slice(0);
      n.push(m[0]);
      this.fW++;
      this.D6[this.fW] = n;
      this.D6 = this.D6.slice(0, this.fW + 1);
      this.w_([]);
      this.Sl();
    } else if (Storage.Dm == 0) {
      this.aGA(j);
    }
  };
  Storage.prototype.aGA = function (j) {
    if (j) {
      this.iX({ R: _.Y.gu, r8: "Opening ..." });
      this.k(new fd("canclose", !0));
      this.aHn = j.slice(0);
      this.AE = 0;
    } else this.AE++;
    if (this.aHn.length == this.AE) {
      this.iX({ R: _.Y.dO, r8: "Opening ..." });
    } else {
      var q = this.aHn[this.AE],
        m = this.hK[q],
        n = this.y$(!0) + m[0];
      this.tQ("load", n);
    }
  };
  Storage.prototype.T = function () {
    var j = Storage.gU,
      q = Storage.EQ,
      m = Storage.EH;
    this.kq[0].textContent = g$.get([[12, 48], [12, 14, 0], "Date"][j]);
    this.kq[1].innerHTML = Storage.anP[[2, 0][q]];
    this.kq[2].textContent = g$.get(["Tiles", "Icons", [25, 3, 1]][m]);
    this.kq[3].textContent = "Upload";
    this.kq[4].textContent = "\u2716";
    var n = Storage.list[this.R$],
      G = n[4];
    if (G == null)
      G = g$.get([[1, 19, 5], ei == 0 ? "Photopea" : "Vectorpea", n[0]]);
    this.aqn.innerHTML =
      g$.get([[23, 6], n[0]]) + "<br/><small><small>" + G + "</small></small>";
    this.yp();
  };
  Storage.prototype.aHW = function (j) {
    this.iX({ R: _.Y.zr });
    if (J.JO(this.aGL)) return;
    if (j.button == 3 || j.button == 4) {
      if (Date.now() - this.ah$ > 50) {
        var q = this.fW;
        if (j.button == 3) this.fW = Math.max(q - 1, 0);
        else this.fW = Math.min(q + 1, this.D6.length - 1);
        this.Sl();
      }
      this.ah$ = Date.now();
      return;
    }
    j.stopPropagation();
    var y = this.QD.indexOf(j.currentTarget);
    if (j.type == "contextmenu") {
      if (this.hK == null) return;
      j.preventDefault();
      var m = this.zH;
      if (y != -1) {
        var n = [
          { name: [5, 1], RP: [gn.A8, gn.dV] },
          { name: [6, 37] },
          { name: "Download", q7: !0 },
          { name: [5, 4], RP: [gn.gv] },
          { name: [9, 2] },
        ];
        if (Storage.list[this.R$][3]) {
          var G = this.hK[y],
            W = Storage.qp(G);
          if (W.length != 0) {
            var k = [];
            for (var T = 0; T < W.length; T++) {
              var b = [],
                c = W[T],
                a = Storage.a4v(G, c[0]);
              if (a != -1) b.push({ name: "Unshare" });
              else
                b.push({ name: "Allow Read" }, { name: "Allow Read & Write" });
              k.push({ name: c[1] + ["", " (R)", " (R,W)"][a + 1], sub: b });
            }
            n.push({ name: "Share With", sub: k });
          }
        }
        m = new cG(n);
        m.parent = this;
        m.Q("select", this.CB, this);
      }
      m.parent = this;
      m.T();
      m.update();
      this.iX({ R: _.Y.wQ, Tf: m, x: j.clientX + 4, y: j.clientY });
      return;
    }
    var f = this.wJ(),
      U = f.indexOf(y);
    if (j.button != 0 && U != -1) return;
    if (j.target == this.$c) this.w_([]);
    else {
      if (j.ctrlKey) {
        if (U == -1) f.push(y);
        else f.splice(U, 1);
      } else if (j.shiftKey && f.length != 0) {
        var T = f[0];
        if (T < y) {
          var Z = y;
          y = T;
          T = Z;
        }
        f = [];
        this.w_(f);
        for (var h = y; h <= T; h++) f.push(h);
      } else {
        this.w_([y]);
        if (Date.now() - this.ag6 < 300 && f.length != 0 && f[0] == y) {
          this.aiF([y]);
          this.ag6 = 0;
        }
      }
    }
    this.ag6 = Date.now();
    this.Rg();
  };
  Storage.prototype.iX = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = j;
    this.k(q);
  };
  Storage.qp = function (j) {
    var q = [],
      m = [],
      n = lw.PZ(),
      G = n.acc.tstart;
    if (G)
      for (var y = 0; y < G.length; y++) {
        q.push([G[y][2], G[y][0]]);
        m.push(G[y][2]);
      }
    var W = lw.xq();
    G = W.inTeams;
    if (G)
      for (var y = 0; y < G.length; y++) {
        q.push([G[y][2], G[y][0]]);
        m.push(G[y][2]);
      }
    if (j && j[4]) {
      for (var y = 0; y < j[4].length; y++) {
        var k = parseInt(j[4][y].split(":")[0]);
        if (m.indexOf(k) == -1) q.push([k, "Team " + k]);
      }
    }
    return q;
  };
  Storage.prototype.akk = function (j, q) {
    if (this.Nq != 0) return 1;
    this.Nq = 2;
    this.iX({ R: _.Y.gu, r8: g$.get([1, 2]) + " ..." });
    this.tQ("save", j);
    if (Storage.Qk) console.log(Math.floor(Date.now() / 1e3), "ArrayBuffer[]");
    this.t_.contentWindow.postMessage(q, "*");
  };
  Storage.Aj = { PDF: "#ff2222", PSD: "#005599", PSB: "#005599" };
  Storage.a8q = function (j) {
    j = j.toLowerCase();
    var q = 0;
    for (var y = 0; y < j.length; y++) q += (j.charCodeAt(y) * 613) << (8 * y);
    return "#" + B.bw(q & 16777215);
  };
  Storage.apF =
    "data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjIiIGJhc2VQcm9maWxlPSJ0aW55LXBzIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0ODggNDEwIiB3aWR0aD0iNDg4IiBoZWlnaHQ9IjQxMCI+PHRpdGxlPmZvbGRlci1zdmc8L3RpdGxlPjxzdHlsZT50c3BhbiB7IHdoaXRlLXNwYWNlOnByZSB9LnNocDAgeyBmaWxsOiAjZGJiMDY1IH0gLnNocDEgeyBmaWxsOiAjOTY3YTQ0IH0gLnNocDIgeyBmaWxsOiAjZjVjZTg1IH0gPC9zdHlsZT48cGF0aCBjbGFzcz0ic2hwMCIgZD0iTTcuMiA0MDMuNEw3LjIgNi42TDEzOC45NSA2LjZMMTc3LjM1IDQ1TDQ4MC44IDQ1TDQ4MC44IDQwMy40TDcuMiA0MDMuNFoiIC8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGFzcz0ic2hwMSIgZD0iTTE0MS42IDAuMkwxODAgMzguNkw0ODcuMiAzOC42TDQ4Ny4yIDQwOS44TDAuOCA0MDkuOEwwLjggMC4yTDE0MS42IDAuMlpNMTMuNiAxM0wxMy42IDM5N0w0NzQuNCAzOTdMNDc0LjQgNTEuNEwxNzQuNyA1MS40TDEzNi4zIDEzTDEzLjYgMTNaIiAvPjxnID48cGF0aCBjbGFzcz0ic2hwMiIgZD0iTTcuMiA0MDMuNEw3LjIgNzAuNkwxNDMuNTMgNzAuNkwxODEuOTMgNDVMNDgwLjggNDVMNDgwLjggNDAzLjRMNy4yIDQwMy40WiIgLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsYXNzPSJzaHAxIiBkPSJNNDg3LjIgMzguNkw0ODcuMiA0MDkuOEwwLjggNDA5LjhMMC44IDY0LjJMMTQxLjYgNjQuMkwxODAgMzguNkw0ODcuMiAzOC42Wk0xODMuODggNTEuNEwxNDUuNDggNzdMMTMuNiA3N0wxMy42IDM5N0w0NzQuNCAzOTdMNDc0LjQgNTEuNEwxODMuODggNTEuNFoiIC8+PC9nPjwvc3ZnPg==";
  Storage.L6 =
    "data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjIiIGJhc2VQcm9maWxlPSJ0aW55LXBzIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNDggNDI0IiB3aWR0aD0iMzQ4IiBoZWlnaHQ9IjQyNCI+PHRpdGxlPmZpbGUtc3ZnPC90aXRsZT48c3R5bGU+dHNwYW4geyB3aGl0ZS1zcGFjZTpwcmUgfS5zaHAwIHsgZmlsbDogI2ZmZmZmZiB9IC5zaHAxIHsgZmlsbDogI2M3ZDdlMiB9IC5zaHAyIHsgZmlsbDogIzQ1NGI1NCB9IDwvc3R5bGU+PHBhdGggY2xhc3M9InNocDAiIGQ9Ik0yOTYgNDEyTDUyIDQxMkMzMCA0MTIgMTIgMzk0IDEyIDM3MkwxMiA1MkMxMiAzMCAzMCAxMiA1MiAxMkwyOTYgMTJDMzE4IDEyIDMzNiAzMCAzMzYgNTJMMzM2IDM3MkMzMzYgMzk0IDMxOCA0MTIgMjk2IDQxMloiIC8+PHBhdGggY2xhc3M9InNocDEiIGQ9Ik01MiA1MkwyOTYgNTJMMjk2IDExMkw1MiAxMTJMNTIgNTJaTTI3MiAxOTJMNjggMTkyQzYxLjIgMTkyIDU2IDE4Ni44IDU2IDE4MEM1NiAxNzMuMiA2MS4yIDE2OCA2OCAxNjhMMjcyIDE2OEMyNzguOCAxNjggMjg0IDE3My4yIDI4NCAxODBDMjg0IDE4Ni44IDI3OC44IDE5MiAyNzIgMTkyWk0yNzIgMjUyTDY4IDI1MkM2MS4yIDI1MiA1NiAyNDYuOCA1NiAyNDBDNTYgMjMzLjIgNjEuMiAyMjggNjggMjI4TDI3MiAyMjhDMjc4LjggMjI4IDI4NCAyMzMuMiAyODQgMjQwQzI4NCAyNDYuOCAyNzguOCAyNTIgMjcyIDI1MlpNMTc0IDMxMkw2OCAzMTJDNjEuMiAzMTIgNTYgMzA2LjggNTYgMzAwQzU2IDI5My4yIDYxLjIgMjg4IDY4IDI4OEwxNzQgMjg4QzE4MC44IDI4OCAxODYgMjkzLjIgMTg2IDMwMEMxODYgMzA2LjggMTgwLjggMzEyIDE3NCAzMTJaIiAvPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xhc3M9InNocDIiIGQ9Ik0yOTYgNDI0TDUyIDQyNEMyMy4yIDQyNCAwIDQwMC44IDAgMzcyTDAgNTJDMCAyMy4yIDIzLjIgMCA1MiAwTDI5NiAwQzMyNC44IDAgMzQ4IDIzLjIgMzQ4IDUyTDM0OCAzNzJDMzQ4IDQwMC44IDMyNC44IDQyNCAyOTYgNDI0Wk01MiAyNEMzNi40IDI0IDI0IDM2LjQgMjQgNTJMMjQgMzcyQzI0IDM4Ny42IDM2LjQgNDAwIDUyIDQwMEwyOTYgNDAwQzMxMS42IDQwMCAzMjQgMzg3LjYgMzI0IDM3MkwzMjQgNTJDMzI0IDM2LjQgMzExLjYgMjQgMjk2IDI0TDUyIDI0WiIgLz48L3N2Zz4=";
  var gO = (function () {
    var j, q, m, n, G, W, k, T;
    function b(Z, h, u, i, x) {
      q = h;
      n = i;
      k = x;
      j = Z;
      W = {};
      if (j == 0) {
        m = [u];
      }
      if (j == 1) {
        m = [];
        for (var X in u) m.push(X);
      }
      if (j == 2) {
        var $ = u[0],
          H = u[1],
          C = u[2],
          l = {};
        for (var y = 0; y < C.length; y++) l[C[y][0]] = !0;
        var v = {};
        for (var X in H) {
          var K = X.split("/"),
            S = K[0],
            o = S.split("."),
            V = "";
          if (o.length != 1) {
            V = "." + o.pop();
            S = o.join(".");
          }
          while (l[S + V]) S += " - Copy";
          K[0] = S + V;
          v[K.join("/")] = H[X];
        }
        var P = {};
        m = [];
        for (var X in v) {
          var K = X.split("/");
          for (var y = 0; y < K.length - 1; y++) {
            var z = $ + K.slice(0, y + 1).join("/") + "/";
            if (P[z] == null) {
              P[z] = !0;
              m.push([z]);
            }
          }
          var E = $.endsWith("/") || X.startsWith("/") ? "" : "/";
          m.push([$ + E + X, v[X]]);
        }
      }
      window.addEventListener("message", a, !1);
      T = Date.now();
      c();
    }
    function c() {
      if (m.length == 0) {
        U();
        return;
      }
      G = m.shift();
      if (j == 0) f("show", G);
      if (j == 1) f("load", G);
      if (j == 2) {
        f("save", G[0]);
        if (G.length == 2) q.contentWindow.postMessage(G[1], "*");
      }
    }
    function a(Z) {
      if (Z.source != q.contentWindow) return;
      if (j == 0) {
        var h = JSON.parse(Z.data),
          u = h.code,
          i = h.prm;
        for (var y = 0; y < i.length; y++) {
          var x = i[y];
          if (n && n.indexOf(x[0]) == -1) continue;
          var X = G + (G == "/" ? "" : "/"),
            $ = X + x[0];
          if (x[1] == -1) m.push($);
          else W[$] = x;
        }
        n = null;
      } else if (j == 1) {
        W[G] = new Uint8Array(Z.data);
      }
      c();
    }
    function f(Z, h) {
      var u = Z == "show" ? ', "nothumbs": true' : "",
        i = '{"code": "' + Z + '", "prm": ' + JSON.stringify(h) + u + "  }";
      q.contentWindow.postMessage(i, "*");
    }
    function U() {
      console.log(Date.now() - T);
      window.removeEventListener("message", a, !1);
      k(W);
    }
    return { mH: b };
  })();
  function ef(j) {
    kV.call(this);
    var q = (this._ = J.m("div", "form scrollable padded label12"));
    this.O3 = j;
    this.i1 = null;
    var m = [],
      n = ef.YW[j];
    this.az9 = [];
    for (var G in n) {
      var W = parseInt(G.slice(1)),
        k = W % 10 == 0 ? "" : "\u2800\u2800- ";
      m.push(k + n[G]);
      this.az9.push(W);
    }
    this.wt = [
      new bJ("Name", null, 30),
      new bJ("Description", null, 30, 4),
      j == 0
        ? new bJ("File", " www.Photopea.com#i...", 17)
        : new b6("File", !1, !1),
      new bJ("Thumbnail URL", "* Use Imgur.com etc.", 17),
      new f1("Category", m),
      new av("Make Public"),
      new kv("<< Back", null, null, !0),
      new kv("Save", null, null, !0),
    ];
    if (j == 0)
      this.wt.push(
        new aD(
          'Publish your PSD: File - Publish Online - PSD. Use that URL as "File".'
        ),
        new aD("Get a Thumbnail URL: File - Publish Online - JPG."),
        new aD(
          "Write a proper description, so that your work can be found using text search."
        )
      );
    if (j == 1)
      this.wt.push(
        new aD(
          '"File" - select a .JSON file of a plugin from your computer. The content must be: {"name": ..., "url":..., "icon":... }'
        )
      );
    if (j != 0)
      this.wt.push(new aD("Do not load any file to preserve the old version."));
    for (var y = 0; y < this.wt.length; y++) {
      var T = this.wt[y];
      q.appendChild(T._);
      T.parent = this;
      if (y != 4 && y != 6) J.Ft(q);
      if (T instanceof kv) T.Q("click", this.aBh, this);
      if (j != 0 && y == 2) T.Q(_.E.n, this.anX, this);
    }
  }
  ef.prototype = new kV();
  ef.prototype.anX = function (j) {
    var q = this.wt[2],
      m = q.V(),
      n = Object.keys(m),
      G = m[n[0]].buffer,
      W = gh.Qa(G),
      k = " json atn abr grd asl pat csh icc".split(" ")[this.O3];
    if (W != k) {
      alert(
        "This is a wrong file" +
          (W ? " (" + W.toUpperCase() + ")" : "") +
          ". You need to upload the " +
          k.toUpperCase() +
          " file."
      );
      q.q({});
    }
  };
  ef.prototype.aBh = function (j) {
    if (j.target == this.wt[6]) {
      this.k(new fd("back"));
      return;
    }
    function q(k, T) {
      return k.indexOf(T) != -1;
    }
    var m = this.wt[3].V().trim(),
      n =
        m.startsWith("http") &&
        (q(m, ".jpeg") || q(m, ".jpg") || q(m, ".png") || q(m, ".gif"));
    if (!n) {
      alert("Thumbnail URL is incorrect.");
      return;
    }
    var G = new XMLHttpRequest(),
      W = m;
    G.open("GET", W);
    G.responseType = "arraybuffer";
    G.onload = this.aok.bind(this);
    G.send();
  };
  ef.prototype.aok = function (j) {
    var q = j.target.response,
      m = q.byteLength;
    if (m > 2e5 && gh.Qa(q) != "gif") {
      alert("Thumbnail is too large (" + bE.za(m) + "). Make it under 200 kB.");
      return;
    }
    var n = this.wt[2].V(),
      G = Object.keys(n);
    if (
      this.O3 != 0 &&
      G.length == 0 &&
      (this.i1 == null || this.i1.file == null || this.i1.file == "")
    ) {
      alert("You need to select a file.");
      return;
    }
    if (this.O3 != 0 && G.length != 0) {
      console.log(n);
      jc.tT.aCL(n[G[0]].buffer, G[0], this.a7y.bind(this), "pp-resources");
      return;
    }
    this.a7y();
  };
  ef.prototype.a7y = function (j) {
    var q = this.O3,
      m = "name desc file thmb catg publ".split(" "),
      n = this.i1;
    for (var y = 0; y < 6; y++) {
      if (q != 0 && y == 2) continue;
      var G = this.wt[y].V();
      if (y <= 3) {
        G = G.trim();
        if (G.length == 0) {
          alert("One of values is empty.");
          return;
        }
      }
      if (y == 2) {
        if (G.endsWith(".psd")) G = G.slice(0, G.length - 4);
        var W = G.split("#i");
        if (W.length != 2 || W[1].length != 8) {
          alert("File ID is incorrect.");
          return;
        }
        G = W.pop();
      }
      if (y == 4) G = this.az9[G];
      n[m[y]] = G;
    }
    if (q != 0) {
      if (j) n.file = j;
      else if (n.file == null) {
        alert("Select a file from your computer.");
        return;
      }
    }
    if (n.utme.length == 0) n.utme = "" + Math.round(Date.now() / 1e3);
    n.type = q;
    this.k(new fd("save"));
  };
  ef.prototype.T = function () {};
  ef.prototype.q = function (j) {
    var q = (this.i1 = B.S(j)),
      m = this.O3,
      n = "name desc file thmb catg publ".split(" ");
    for (var y = 0; y < 6; y++) {
      if (m != 0 && y == 2) continue;
      var G = q[n[y]];
      if (G != "" && y == 2) G = "https://photopea.com#i" + G;
      if (y == 4) G = this.az9.indexOf(G);
      if (y == 5 && G == null) G = !0;
      this.wt[y].q(G);
    }
  };
  ef.prototype.V = function () {
    return B.S(this.i1);
  };
  ef.YW = [
    {
      c0: "Mockups",
      c1: "Mobile & Web",
      c2: "Prints",
      c3: "Product",
      c10: "Social Media",
      c11: "Youtube",
      c12: "Instagram",
      c13: "Facebook",
      c14: "Memes",
      c15: "Signs",
      c16: "Animations",
      c20: "Print",
      c21: "Cards",
      c22: "Invitations",
      c23: "Brochures",
      c24: "Resumes",
      c25: "Diploma / Certificate",
      c30: "Mobile",
      c40: "Websites",
      c50: "Presentations",
      c60: "Other",
    },
    {
      c0: "Resources",
      c1: "Image Elements",
      c2: "Fonts",
      c10: "Effects",
      c11: "Filters",
      c12: "Combine Elements",
      c13: "Text Effects",
      c20: "Generate Content",
      c30: "Other Plugins",
    },
    { c0: "Default" },
    { c0: "Default" },
    { c0: "Default" },
    { c0: "Default" },
    { c0: "Default" },
    { c0: "Default" },
    { c0: "Default" },
  ];
  function dR() {
    kV.call(this);
    var j = (this._ = J.m("div", "form"));
    this.i1 = null;
    this.od = null;
    this.Gn = null;
    this.Eu = null;
    var q = J.m("canvas");
    this.lB = q.getContext("2d");
    J.r$(q);
    J.PD(q, this.hd.bind(this));
    this.Fi = [
      new gA(
        [12, 44],
        [
          [19, 0, 0],
          [19, 0, 1],
        ]
      ),
      { _: q },
      new k7([12, 0], 0, 100, "%", null, null, null, 4),
      new g1(),
      new k7([12, 40], 0, 100, "%", 2, null, null, 4),
      new kv([5, 4], null, null, !0),
    ];
    for (var y = 0; y < this.Fi.length; y++) {
      var m = this.Fi[y];
      m.parent = this;
      j.appendChild(m._);
      if (y != 2 && y != 4) J.Ft(j);
      if (y != 1) m.Q(y == 5 ? "click" : _.E.n, this.tS, this);
    }
    this.Me = this.dn.bind(this);
    this.JV = this.$g.bind(this);
  }
  dR.prototype = new kV();
  dR.prototype.V = function () {
    return B.S(this.i1);
  };
  dR.prototype.q = function (j) {
    this.i1 = B.S(j);
    this.ll();
  };
  dR.prototype.T = function () {
    var j = this.Fi;
    for (var y = 0; y < j.length; y++) if (j[y].T) j[y].T();
  };
  dR.prototype.hd = function (j) {
    var q = J.IC(),
      m = J.QR(j, this.lB.canvas);
    m.x *= q;
    m.y *= q;
    var n = this.Gn,
      G = this.Eu,
      W = this.i1,
      k = W[1],
      T = 7 * J.IC(),
      b = -1;
    for (var y = 0; y < n.length; y++) {
      if (ea.gw(m, n[y][0]) < T) b = y;
    }
    if (b == -1) {
      if (Math.abs(m.y - (G.y + G.$)) > 10 * q) return;
      var c = [0.5, [0, 0, 0], 1, 0.5];
      k.push(c);
      k.sort(function (a, f) {
        return a[0] - f[0];
      });
      this.J1 = [new ea(), k.indexOf(c), 0];
    } else this.J1 = n[b];
    this.od = JSON.stringify(this.i1);
    J.dJ(window, this.Me);
    J.sP(window, this.JV);
    if (b == -1) this.dn(j);
    this.ll();
  };
  dR.prototype.dn = function (j) {
    this.i1 = JSON.parse(this.od);
    var q = J.IC(),
      m = J.QR(j, this.lB.canvas);
    m.x *= q;
    m.y *= q;
    var n = this.J1,
      G = n[1],
      W = this.Eu,
      k = this.i1[1],
      T = k[G],
      b = (m.x - W.x) / W.r;
    if (n[2] == 0) {
      T[0] = Math.max(0, Math.min(1, b));
      if (Math.abs(m.y - (W.y + W.$)) > 30 * q) k.splice(G, 1);
    } else {
      var c = T[0],
        a = k[G + 1][0],
        f = T[3];
      T[3] = Math.max(0.13, Math.min(0.87, (b - c) / (a - c)));
    }
    k.sort(function (U, Z) {
      return U[0] - Z[0];
    });
    this.ll();
  };
  dR.prototype.$g = function (j) {
    J.BJ(window, this.Me);
    J.mW(window, this.JV);
  };
  dR.prototype.tS = function (j) {
    var q = this.Fi,
      y = q.indexOf(j.target),
      m = this.i1,
      n = j.target.V(),
      G = this.J1;
    if (y == 0) m[0] = n;
    if (G) {
      var W = m[1][G[1]];
      if (y == 2) W[2] = n / 100;
      if (y == 3) {
        n = B.b4(j.target.we());
        W[1] = [n.o / 255, n.i / 255, n.X / 255];
      }
      if (y == 4)
        if (G[2] == 0) W[0] = n / 100;
        else W[3] = Math.max(0.13, Math.min(0.87, n / 100));
      if (y == 5) {
        m[1].splice(G[1], 1);
        this.J1 = null;
      }
    }
    this.ll();
  };
  dR.prototype.ll = function () {
    var j = this.Fi,
      q = this.i1,
      m = q[1],
      n = this.lB,
      G = n.canvas;
    j[0].q(q[0]);
    var W = (G.width = Math.floor(300 * J.IC())),
      k = (G.height = Math.floor(60 * J.IC())),
      T = Math.floor(20 * J.IC()),
      b = W - T - T;
    this.Eu = new hk(T, T, b, k - T - T);
    J.Ku(G);
    var c = (n.fillStyle = n.createLinearGradient(T, T, W - T, T));
    B.MV.Uz(c, m);
    n.fillRect(T, T, b, k - T - T);
    n.lineWidth = 1;
    n.strokeRect(T - 0.5, T - 0.5, b + 1, k - T - T + 1);
    var a = (this.Gn = []),
      f = this.J1;
    n.fillStyle = "white";
    for (var y = 0; y < m.length; y++) {
      var U = m[y],
        Z = U[0],
        h = k - T * 0.6;
      if (f && f[1] == y && f[2] == 0) {
        n.fillStyle = "#00aaff";
        n.beginPath();
        n.arc(T + Z * b, h, k * 0.125, 0, 2 * Math.PI);
        n.fill();
      }
      n.fillStyle = "white";
      n.beginPath();
      n.arc(T + Z * b, h, k * 0.1, 0, 2 * Math.PI);
      n.fill();
      n.beginPath();
      n.arc(T + Z * b, h, k * 0.07, 0, 2 * Math.PI);
      n.stroke();
      a.push([new ea(T + Z * b, h), y, 0]);
      if (y != m.length - 1) {
        var u = U[3],
          i = m[y + 1][0];
        Z = Z + u * (i - Z);
        h = T * 0.7;
        if (f && f[1] == y && f[2] == 1) {
          n.fillStyle = "#00aaff";
          n.beginPath();
          n.arc(T + Z * b, h, k * 0.075, 0, 2 * Math.PI);
          n.fill();
        }
        n.fillStyle = "white";
        n.beginPath();
        n.arc(T + Z * b, h, k * 0.05, 0, 2 * Math.PI);
        n.fill();
        a.push([new ea(T + Z * b, h), y, 1]);
      }
    }
    j[2].yl(f && f[2] == 0);
    j[3].yl(f && f[2] == 0);
    j[4].yl(f != null);
    j[5].yl(f && f[2] == 0 && m.length > 2);
    if (f) {
      var U = m[f[1]],
        x = U[1];
      if (f[2] == 0) j[2].q(U[2] * 100);
      j[3].kK(B.yH({ o: x[0] * 255, i: x[1] * 255, X: x[2] * 255 }));
      j[4].q(U[f[2] == 0 ? 0 : 3] * 100);
    }
  };
  function gj(j) {
    kV.call(this);
    this.U$ = j;
    this._ = J.m("div", "");
    this.N3 = [];
    this.akx = null;
    this.aDp = [];
  }
  gj.prototype = new kV();
  gj.prototype.ol = function (j) {};
  gj.prototype.JY = function () {
    return !1;
  };
  gj.prototype.pL = function () {
    return 0;
  };
  gj.prototype.X3 = function (j, q) {};
  gj.prototype.yp = function (j, q) {};
  gj.prototype.OU = function (j) {};
  gj.prototype.q = function (j, q, m, n, G, W) {
    var k = [],
      T = this.N3,
      b = 0,
      c = k0.Bf["s" + this.U$];
    if (this.U$ == "Dspl") this.iU(j, k, W);
    else c ? c(j, k, W) : this.iU(j, k, W);
    for (var y = 0; y < T.length; y++)
      if (!(T[y] instanceof aD)) T[y].q(k[b++]);
    if (j.RndS) this.akx = j.RndS.v;
  };
  gj.prototype.V = function () {
    var j = k0.i4(this.U$),
      q = [],
      m = this.N3,
      n = 0;
    for (var y = 0; y < m.length; y++)
      if (!(m[y] instanceof aD)) q[n++] = m[y].V();
    var G = k0.Bf["g" + this.U$];
    if (this.U$ == "Dspl") this.MO(j, q);
    else G ? G(j, q) : this.MO(j, q);
    if (j.RndS) j.RndS.v = this.akx;
    return j;
  };
  gj.prototype.uY = function (j) {};
  gj.prototype.L0 = function (j) {
    if (j && j.target instanceof kv) {
      this.akx = Math.floor(Math.random() * 4294967295);
    }
    var q = this.aDp;
    for (var y = 0; y < q.length; y += 2) {
      var m = this.N3[q[y]],
        n = this.N3[q[y + 1]],
        G = m.V(),
        W = n.V();
      if (j.target == m) n.q(Math.max(G, W));
      else m.q(Math.min(G, W));
    }
    this.k(new fd(_.E.n));
  };
  gj.prototype.T = function () {
    for (var y = 0; y < this.N3.length; y++) this.N3[y].T();
    var j = this.adO;
    if (j) j.T();
  };
  gj.prototype.zw = function (j) {
    J._g(this._, "form");
    var q = this.N3;
    for (var y = 0; y < q.length; y++) {
      var m = q[y];
      m.parent = this;
      m.Q(_.E.n, this.L0, this);
      this._.appendChild(m._);
      if (m instanceof av && q[y + 1] instanceof g1) continue;
      if (j && j.indexOf(y) != -1) J.c$(this._);
      else J.Ft(this._);
    }
    var n = k0.i4(this.U$);
    if (n.RndS) {
      var G = (this.adO = new kv([25, 1, 2], null, null, !0));
      this._.appendChild(G._);
      G.Q("click", this.L0, this);
    }
  };
  gj.prototype.oa = function (j) {
    return !1;
  };
  gj.prototype.LG = function () {
    return !1;
  };
  gj.prototype.oo = function (j, q, m, n, G) {};
  gj.prototype.C3 = function (j, q, m, n, G) {};
  gj.prototype.H_ = function (j, q, m, n, G) {};
  gj.prototype.MO = function (j, q) {};
  gj.prototype.iU = function (j, q) {};
  gj.prototype.FV = function (j) {
    var q = j.target.V().indexOf(!0),
      m = q != -1;
    if (q != -1) {
      this.ia = q;
    }
    if (this.$f == null) this.$f = 0;
    var n = Date.now(),
      G = new fd(_.E.c, !0);
    G.XE = !0;
    if (n - this.$f < 300 && this.ia < 3 && this.cC && this.uU == null) {
      if (this.fn == null) this.fn = [0, 8421504, 16777215];
      G.data = {
        R: _.Y.s0,
        kO: "colorpicker",
        Fx: this.fn[this.ia],
        cy: this.arW.bind(this),
      };
      this.k(G);
    } else {
      this.azx(q != -1);
    }
    this.$f = n;
  };
  gj.prototype.azx = function (j) {
    var q = new fd(_.E.c, !0);
    q.XE = !0;
    q.data = { R: j ? _.Y.UK : _.Y.xQ, l: L.ii };
    this.k(q);
    q = new fd(_.E.w, !0);
    q.l = L.ii;
    q.XE = !0;
    q.data = { R: "supertool", l: j ? this : null };
    this.k(q);
  };
  gj.prototype.arW = function (j) {
    this.fn[this.ia] = j;
    var q = [];
    for (var y = 0; y < 3; y++) q[y] = "#" + B.bw(this.fn[y]);
    this.cC.ti(gA.zs(q));
    var m = [!1, !1, !1];
    m[this.ia] = !0;
    this.cC.q(m);
    this.azx(!0);
  };
  gj.a8E = function (j) {
    j.LG = function () {
      return !0;
    };
    j.oo = function (q, m, n, G, W) {
      this.nT = !0;
      this.aDx(q, W);
    };
    j.C3 = function (q, m, n, G, W) {
      if (!this.nT) return;
      this.aDx(q, W);
    };
    j.H_ = function (q, m, n, G, W) {
      this.nT = !1;
    };
    j.aDx = function (q, m) {
      var n = new hk(0, 0, q.r, q.$);
      if (q.h) n = q.h.H;
      var G = q.I.sb(m.x, m.y);
      G.x -= n.x;
      G.y -= n.y;
      function W(k, T) {
        return Math.round(Math.max(0, Math.min(100, (100 * k) / T)));
      }
      this.N3[2].q(W(G.x, n.r));
      this.N3[3].q(W(G.y, n.$));
      this.L0();
    };
  };
  gj.a1D = function (j, q, m, n) {
    var G = j.cC.V().indexOf(!0);
    if (G == -1 || G > 2) return;
    var W = n == "levl" ? im : fY,
      k = j.value;
    j.value = k0.i4(n);
    j.L0();
    var T = L.KH.th(q, m, 1, null, !0),
      b = [(T >>> 16) & 255, (T >>> 8) & 255, T & 255],
      c = j.fn;
    if (c == null) c = [0, 8421504, 16777215];
    T = c[G];
    var a = [(T >>> 16) & 255, (T >>> 8) & 255, T & 255];
    for (var y = 0; y < 3; y++) {
      var f = W.Lq(k, 1 + y);
      if (G == 0) {
        var U = b[y] - a[y];
        if (n == "levl") f[0] = U;
        else f[0].v.Hrzn.v = U;
      }
      if (G == 1) {
        var Z =
            Math.log(b[y] / 255) /
            Math.log(((b[0] + b[1] + b[2]) * 0.333) / 255),
          h =
            Math.log(a[y] / 255) /
            Math.log(((a[0] + a[1] + a[2]) * 0.333) / 255),
          u = Z / h;
        if (n == "levl")
          f[4] = Math.min(999, Math.max(10, Math.round(100 * u)));
        else {
          if (f.length == 2) f.splice(1, 0, B.S(f[0]));
          f[1].v.Hrzn.v = 127 - Math.log(u) * 80;
          f[1].v.Vrtc.v = 127;
        }
      }
      if (G == 2) {
        var U = (255 * b[y]) / a[y];
        if (n == "levl") f[1] = U;
        else f[f.length - 1].v.Hrzn.v = U;
      }
      W.Cy(k, 1 + y, f);
    }
    j.q(k);
    j.L0();
  };
  gj.Bokh = function () {
    gj.call(this, "Bokh");
    this.N3 = [
      new f1("Depth Map", ["A", "b"]),
      new ho("Focal Distance", 0, 255),
      new av([4, 11]),
      new f1(
        [12, 76, 1],
        [
          "Triangle (3)",
          ["VAR0 (4)", [12, 93, 3]],
          "Pentagon (5)",
          "Hexagon (6)",
          "Heptagon (7)",
          "Octagon (8)",
        ]
      ),
      new ho([12, 56], 0, 100),
      new ho([12, 15], 0, 360),
      new ho([12, 2], 0, 100),
      new ho([4, 13], 0, 255),
      new ho([24, 6], 0, 100),
      new gA(
        [12, 58],
        [
          [12, 59, 0],
          [12, 59, 1],
        ]
      ),
      new av([12, 60]),
    ];
    this.zw([5, 7]);
  };
  gj.Bokh.prototype = new gj();
  gj.Bokh.prototype.iU = function (j, q, m) {
    var n = [
        [22, 5, 0],
        [6, 5, 3],
        [6, 2],
      ],
      G = j.BkDi.v.BtDi,
      W = j.BkDc,
      k = 0;
    if (G == "BeIn") k = 0;
    else if (G == "BeIt" && W.v.BtDc == "BeCt") k = 1;
    else if (G == "BeIt" && W.v.BtDc == "BeCm") k = 2;
    else k = 3 + W.v;
    for (var y = 0; y < m[1].length; y++) n.push(m[1][y].name);
    this.N3[0].ti(n, [3]);
    q[0] = k;
    q[1] = j.BkDp.v;
    q[2] = j.BkDs.v;
    q[3] = parseInt(j.BkIs.v.BtIs.slice(3)) - 3;
    q[4] = j.BkIb.v;
    q[5] = j.BkIr.v;
    q[6] = j.BkSb.v;
    q[7] = j.BkSt.v;
    q[8] = j.BkNa.v;
    q[9] = j.BkNt.v.BtNt == "BeNu" ? 0 : 1;
    q[10] = j.BkNm.v;
  };
  gj.Bokh.prototype.MO = function (j, q) {
    var m;
    if (q[0] == 0) {
      m = "BeIn";
      delete j.BkDc;
    } else if (q[0] < 3) {
      m = "BeIt";
      j.BkDc = { t: "enum", v: { BtDc: ["BeCt", "BeCm"][q[0] - 1] } };
    } else {
      m = "BeIa";
      j.BkDc = { t: "long", v: q[0] - 3 };
    }
    j.BkDi.v.BtDi = m;
    j.BkDp.v = q[1];
    j.BkDs.v = q[2];
    j.BkIs.v.BtIs = "BeS" + (3 + q[3]);
    j.BkIb.v = q[4];
    j.BkIr.v = q[5];
    j.BkSb.v = q[6];
    j.BkSt.v = q[7];
    j.BkNa.v = q[8];
    j.BkNt.v.BtNt = ["BeNu", "BeNg"][q[9]];
    j.BkNm.v = q[10];
  };
  gj.oilPaint = function () {
    gj.call(this, "oilPaint");
    this.N3 = [
      new ho([12, 56], 0.1, 10, "px", !0),
      new ho("Cleanliness", 0, 10, "px", !0),
      new ho([12, 38], 0.1, 10, null, !0),
      new ho("Bristle Detail", 0, 10, null, !0),
      new av("Lighting"),
      new ho("Shine", 0, 10, null, !0),
      new iI([12, 15]),
    ];
    this.zw();
  };
  gj.oilPaint.prototype = new gj();
  gj.oilPaint.prototype.iU = function (j, q) {
    var m =
      "stylization cleanliness brushScale microBrush lightingOn specularity".split(
        " "
      );
    for (var y = 0; y < m.length; y++) q[y] = j[m[y]].v;
    q[6] = [j.LghD.v];
  };
  gj.oilPaint.prototype.MO = function (j, q) {
    var m =
      "stylization cleanliness brushScale microBrush lightingOn specularity".split(
        " "
      );
    for (var y = 0; y < m.length; y++) j[m[y]].v = q[y];
    j.LghD.v = q[6][0];
  };
  gj.TrcC = function () {
    gj.call(this, "TrcC");
    this.N3 = [
      new ho("Level", 0, 255),
      new gA(
        [12, 69],
        [
          [19, 4, 1],
          [19, 4, 0],
        ]
      ),
    ];
    this.zw();
  };
  gj.TrcC.prototype = new gj();
  gj.TrcC.prototype.iU = function (j, q) {
    q[0] = j.Lvl.v;
    q[1] = ["Lwr", "Upr"].indexOf(j.Edg.v.CntE);
  };
  gj.TrcC.prototype.MO = function (j, q) {
    j.Lvl.v = q[0];
    j.Edg.v.CntE = ["Lwr", "Upr"][q[1]];
  };
  gj["Dfs "] = function () {
    gj.call(this, "Dfs ");
    this.N3 = [
      new gA([12, 36], [[15, 10, 0], [15, 10, 6], [15, 10, 11], "Anisotropic"]),
    ];
    this.zw();
  };
  gj["Dfs "].prototype = new gj();
  gj["Dfs "].prototype.iU = function (j, q) {
    q[0] = ["Nrml", "DrkO", "LghO", "anisotropic"].indexOf(j.Md.v.DfsM);
  };
  gj["Dfs "].prototype.MO = function (j, q) {
    j.Md.v.DfsM = ["Nrml", "DrkO", "LghO", "anisotropic"][q[0]];
  };
  gj.Embs = function () {
    gj.call(this, "Embs");
    this.N3 = [
      new iI([12, 15]),
      new ho([12, 42], 1, 100, "px"),
      new ho([12, 57], 1, 500, "%"),
    ];
    this.zw();
  };
  gj.Embs.prototype = new gj();
  gj.Embs.prototype.iU = function (j, q) {
    q[0] = [j.Angl.v];
    q[1] = j.Hght.v;
    q[2] = j.Amnt.v;
  };
  gj.Embs.prototype.MO = function (j, q) {
    j.Angl.v = q[0][0];
    j.Hght.v = q[1];
    j.Amnt.v = q[2];
  };
  gj["Wnd "] = function () {
    gj.call(this, "Wnd ");
    this.N3 = [
      new gA([12, 32], ["Wind", "Blast", "Stagger"]),
      new gA([12, 33], ["From the Right", "From the Left"]),
    ];
    this.zw();
  };
  gj["Wnd "].prototype = new gj();
  gj["Wnd "].prototype.iU = function (j, q) {
    q[0] = ["Wnd", "Blst", "Stgr"].indexOf(j.WndM.v.WndM);
    q[1] = ["Left", "Rght"].indexOf(j.Drct.v.Drct);
  };
  gj["Wnd "].prototype.MO = function (j, q) {
    j.WndM.v.WndM = ["Wnd", "Blst", "Stgr"][q[0]];
    j.Drct.v.Drct = ["Left", "Rght"][q[1]];
  };
  gj.denoise = function () {
    gj.call(this, "denoise");
    this.N3 = [new ho([12, 64], 0, 10), new ho([12, 65], 0, 100, "%")];
    this.zw();
  };
  gj.denoise.prototype = new gj();
  gj.denoise.prototype.iU = function (j, q) {
    var m = j.channelDenoise.v[0].v;
    q[0] = m.Amnt.v;
    q[1] = m.EdgF.v;
  };
  gj.denoise.prototype.MO = function (j, q) {
    var m = j.channelDenoise.v[0].v;
    m.Amnt.v = q[0];
    m.EdgF.v = q[1];
  };
  gj.lightFilterGradient = function () {
    gj.call(this, "lightFilterGradient");
    this.N3 = [
      new ho([24, 3, 1], 0, 100, "px", 1, !0),
      new ho([12, 38], 0, 200, "%"),
      new av([4, 11]),
      new ho("High", 0, 100, "%"),
      new ho("Medium", 0, 100, "%"),
      new ho("Low", 0, 100, "%"),
    ];
    this.zw();
  };
  gj.lightFilterGradient.prototype = new gj();
  gj.lightFilterGradient.prototype.iU = function (j, q) {
    q[0] = j.blur.v;
    q[1] = j.textureScale.v * 100;
    q[2] = j.Scl.v == -1;
    var m = j.Dtl.v;
    q[3] = m[0].v * 100;
    q[4] = m[1].v * 100;
    q[5] = m[2].v * 100;
  };
  gj.lightFilterGradient.prototype.MO = function (j, q) {
    j.blur.v = q[0];
    j.textureScale.v = q[1] / 100;
    j.Scl.v = q[2] ? -1 : 1;
    var m = j.Dtl.v;
    m[0].v = q[3] / 100;
    m[1].v = q[4] / 100;
    m[2].v = q[5] / 100;
  };
  gj.Fbrs = function () {
    gj.call(this, "Fbrs");
    this.N3 = [new ho("Variance", 1, 64), new ho([12, 64], 1, 64)];
    this.zw();
  };
  gj.Fbrs.prototype = new gj();
  gj.Fbrs.prototype.iU = function (j, q) {
    q[0] = j.Vrnc.v;
    q[1] = j.Strg.v;
  };
  gj.Fbrs.prototype.MO = function (j, q) {
    j.Vrnc.v = q[0];
    j.Strg.v = q[1];
  };
  gj.LnsF = function () {
    gj.call(this, "LnsF");
    this.N3 = [
      new ho([12, 2], 10, 300, "%"),
      new gA([12, 44], ["Lens 1", "Lens 2", "Lens 3", "Lens 4"]),
      new ho("Position X", 0, 100, "%"),
      new ho("Position Y", 0, 100, "%"),
    ];
    this.zw();
  };
  gj.LnsF.prototype = new gj();
  gj.LnsF.prototype.iU = function (j, q) {
    q[0] = j.Brgh.v;
    q[1] = ["Zm", "Nkn", "Nkn1", "PnVs"].indexOf(j.Lns.v.Lns);
    var m = j.FlrC.v;
    q[2] = Math.round(m.Hrzn.v * 100);
    q[3] = Math.round(m.Vrtc.v * 100);
  };
  gj.LnsF.prototype.MO = function (j, q) {
    j.Brgh.v = q[0];
    j.Lns.v.Lns = ["Zm", "Nkn", "Nkn1", "PnVs"][q[1]];
    var m = j.FlrC.v;
    m.Hrzn.v = q[2] / 100;
    m.Vrtc.v = q[3] / 100;
  };
  gj.a8E(gj.LnsF.prototype);
  gj.blendOptions = function () {
    gj.call(this, "blendOptions");
    this.N3.push(new f1([12, 19, 0], kJ.nb, kJ.hb));
    this.N3.push(new ho([12, 0], 0, 100, "%"));
    this.zw();
  };
  gj.blendOptions.prototype = new gj();
  gj.blendOptions.prototype.iU = function (j, q) {
    q[0] = kJ.Tg.indexOf(j.Md.v.BlnM);
    q[1] = j.Opct.v.val;
  };
  gj.blendOptions.prototype.MO = function (j, q) {
    j.Md.v.BlnM = kJ.Tg[q[0]];
    j.Opct.v.val = q[1];
  };
  gj.LnCr = function () {
    gj.call(this, "LnCr");
    this.N3 = [new ho([12, 57], -100, 100), new ho([12, 38], 10, 150, "%")];
    this.zw();
  };
  gj.LnCr.prototype = new gj();
  gj.LnCr.prototype.iU = function (j, q) {
    q[0] = j.LnIa.v;
    q[1] = j.LnSi.v;
  };
  gj.LnCr.prototype.MO = function (j, q) {
    j.LnIa.v = q[0];
    j.LnSi.v = q[1];
  };
  gj.adaptCorrect = function () {
    gj.call(this, "adaptCorrect");
    var j = dV;
    this.N3 = [
      new aD([19, 6, 0]),
      new j([12, 57], 0, 100, "%"),
      new j("Tone", 0, 100, "%"),
      new j([12, 56], 0, 200, "px"),
      new aD([19, 6, 2]),
      new j([12, 57], 0, 100, "%"),
      new j("Tone", 0, 100, "%"),
      new j([12, 56], 0, 200, "px"),
      new aD([3]),
      new j([13, 0], -100, 100),
    ];
    this.zw([3, 7]);
  };
  gj.adaptCorrect.prototype = new gj();
  gj.adaptCorrect.prototype.iU = function (j, q) {
    var m = j.sdwM.v;
    q[0] = m.Amnt.v.val;
    q[1] = m.Wdth.v.val;
    q[2] = m.Rds.v;
    var m = j.hglM.v;
    q[3] = m.Amnt.v.val;
    q[4] = m.Wdth.v.val;
    q[5] = m.Rds.v;
    q[6] = j.ClrC.v;
  };
  gj.adaptCorrect.prototype.MO = function (j, q) {
    var m = j.sdwM.v;
    m.Amnt.v.val = q[0];
    m.Wdth.v.val = q[1];
    m.Rds.v = q[2];
    var m = j.hglM.v;
    m.Amnt.v.val = q[3];
    m.Wdth.v.val = q[4];
    m.Rds.v = q[5];
    j.ClrC.v = q[6];
  };
  gj.Flam = function () {
    gj.call(this, "Flam");
    var j = (this.N3 = [
      new f1(
        [12, 44],
        "One Flame Along Path,Multiple Flames Along Path,Multiple Flames One Direction,Multiple Flames Path Directed,Multiple Flames Various Angle,Candle Light".split(
          ","
        )
      ),
      new ho([12, 80, 0], 20, 1e3, "px"),
      new av("Randomize Length"),
      new ho([12, 41], 5, 600, "px"),
      new ho([12, 15], 0, 360, "\xB0"),
      new ho("Interval", 10, 200, "px"),
      new av("Adapt Interval for Loops"),
      new g1(!1),
      new f1(
        [12, 52, 0],
        ["1: Draft", "2: Low", "3: Medium", "4: High", "5: Fine"]
      ),
      new ho("Turbulent", 0, 100),
      new ho("Jag", 0, 100),
      new ho([12, 0], 0, 100),
      new ho("Lines", 2, 30),
      new ho("Bottom", 0, 100),
      new f1([12, 22], ["Normal", "Violent", "Flat"]),
      new f1(
        [12, 76, 1],
        ["Parallel", "To the center", "Spread", "Oval", "Pointing"]
      ),
      new av("Randomize Shape"),
      new ho("Random Seed", 0, 100),
    ]);
    this.zw();
    var q = this._;
    J.dI(q);
    var m = new gA(null, ["Basic", "Advanced"]);
    m.Q(_.E.n, this.auz, this);
    q.appendChild(m._);
    J.c$(q);
    var n = J.m("div"),
      G = J.m("div");
    this.a53 = [n, G];
    q.appendChild(n);
    for (var y = 0; y < j.length; y++) {
      (y < 9 ? n : G).appendChild(j[y]._);
      if (y == 6) J.Ft(n);
    }
    j[0].Q(_.E.n, this.apr, this);
    this.apr();
  };
  gj.Flam.prototype = new gj();
  gj.Flam.prototype.apr = function (j) {
    var q = this.N3,
      y = q[0].V();
    q[1].yl(y != 0 && y != 5);
    q[2].yl(y != 0 && y != 5);
    q[4].yl(y != 0 && y != 5 && y != 1);
    q[5].yl(y != 0 && y != 5);
    q[6].yl(y != 0 && y != 5);
  };
  gj.Flam.prototype.auz = function (j) {
    var y = j.target.V(),
      q = this.a53,
      m = this._;
    m.removeChild(q[1 - y]);
    m.appendChild(q[y]);
  };
  gj.boxblur = function () {
    gj.call(this, "boxblur");
    this.N3 = [new ho([12, 56], 1, 200, " px")];
    this.zw();
  };
  gj.boxblur.prototype = new gj();
  gj.boxblur.prototype.iU = function (j, q) {
    q[0] = j.Rds.v.val;
  };
  gj.boxblur.prototype.MO = function (j, q) {
    j.Rds.v.val = q[0];
  };
  gj.GsnB = function () {
    gj.call(this, "GsnB");
    this.N3 = [new ho([12, 56], 0.1, 400, "px", 1, !0)];
    this.zw();
  };
  gj.GsnB.prototype = new gj();
  gj.Dila = function () {
    gj.call(this, "Dila");
    this.N3 = [
      new ho([11, 12, 1], 0, 20, "px", 0),
      new ho([12, 56], 0, 400, "px", 0, !0),
    ];
    this.zw();
  };
  gj.Dila.prototype = new gj();
  gj.MtnB = function () {
    gj.call(this, "MtnB");
    this.N3 = [new iI([12, 15]), new ho([12, 28], 1, 100, " px")];
    this.zw();
  };
  gj.MtnB.prototype = new gj();
  gj.RdlB = function () {
    gj.call(this, "RdlB");
    this.N3 = [
      new ho([12, 57], 1, 100),
      new gA([12, 36], ["Spin", "Zoom"]),
      new ho("Position X", 0, 100, "%"),
      new ho("Position Y", 0, 100, "%"),
    ];
    this.zw();
  };
  gj.RdlB.prototype = new gj();
  gj.RdlB.prototype.iU = function (j, q) {
    q[0] = j.Amnt.v;
    q[1] = ["Spn", "Zm"].indexOf(j.BlrM.v.BlrM);
    q[2] = j.Cntr.v.Hrzn.v * 100;
    q[3] = j.Cntr.v.Vrtc.v * 100;
  };
  gj.RdlB.prototype.MO = function (j, q) {
    j.Amnt.v = q[0];
    j.BlrM.v.BlrM = ["Spn", "Zm"][q[1]];
    j.Cntr.v.Hrzn.v = q[2] / 100;
    j.Cntr.v.Vrtc.v = q[3] / 100;
  };
  gj.a8E(gj.RdlB.prototype);
  gj.Dspl = function () {
    gj.call(this, "Dspl");
    this.N3 = [
      new f1([6, 36, 3], ["a", "b"]),
      new ho([22, 4, 0], -100, 100, "px"),
      new ho([22, 4, 1], -100, 100, "px"),
      new f1(
        [24, 18, 0],
        [
          [24, 18, 3],
          [24, 18, 2],
        ]
      ),
    ];
    this.zw();
  };
  gj.Dspl.prototype = new gj();
  gj.Dspl.prototype.iU = function (j, q, m) {
    this.a2P = [];
    this.Ew = [];
    var n = -1,
      G = m ? m[0] : null;
    if (G == null) G = this.akf;
    else this.akf = G;
    if (G)
      for (var y = 0; y < G.length; y++) {
        var W = G[y];
        this.a2P.push(W.Sh.trim());
        this.Ew.push(W.ys);
        if (W.ys == j.DspF.v.pth) n = y;
      }
    this.N3[0].ti(this.a2P);
    q[0] = n == -1 ? 0 : n;
    q[1] = j.HrzS.v;
    q[2] = j.VrtS.v;
    q[3] = ["WrpA", "RptE"].indexOf(j.UndA.v.UndA);
  };
  gj.Dspl.prototype.MO = function (j, q) {
    var m = this.akf;
    if (this.Ew.length == 0) return;
    j.DspF.v.pth = this.Ew[q[0]];
    j.HrzS.v = q[1];
    j.VrtS.v = q[2];
    j.UndA.v.UndA = ["WrpA", "RptE"][q[3]];
    var n = m[q[0]];
    n.ht();
    var G = n.Zj[1],
      W = G.r,
      k = G.$,
      T = B.j(G.C());
    B.P2(n.Zj[0], T);
    var b = [k & 255, k >>> 8, 0, 0, W & 255, W >>> 8, 0, 0, 3, 0];
    for (var c = 0; c < 2; c++) for (var y = 0; y < T.length; y++) b.push(T[y]);
    for (var y = 0; y < 1e3; y++) b.push(0);
    j.DspD = { t: "tdta", v: b };
    j.EmbF = { t: "bool", v: !0 };
  };
  gj.Pnch = function () {
    gj.call(this, "Pnch");
    this.N3 = [new ho([12, 57], -100, 100, "%")];
    this.zw();
  };
  gj.Pnch.prototype = new gj();
  gj["Plr "] = function () {
    gj.call(this, "Plr ");
    this.N3 = [new gA(null, ["Rect to Polar", "Polar to Rect"])];
    this.zw();
  };
  gj["Plr "].prototype = new gj();
  gj.Rple = function () {
    gj.call(this, "Rple");
    this.N3 = [
      new ho([12, 57], -999, 999),
      new f1(
        [12, 14, 0],
        [
          [19, 8, 0],
          [19, 8, 1],
          [19, 8, 2],
        ]
      ),
    ];
    this.zw();
  };
  gj.Rple.prototype = new gj();
  gj["Shr "] = function () {
    gj.call(this, "Shr ");
    this.N3 = [
      new i3(!0, !0),
      new f1(
        [24, 18, 0],
        [
          [24, 18, 3],
          [24, 18, 2],
        ]
      ),
    ];
    this.zw();
  };
  gj["Shr "].prototype = new gj();
  gj["Shr "].prototype.iU = function (j, q) {
    var m = new k$(0, 255 / 127, 255 / 127, 0, -2, 128),
      n = B.S(j.ShrP.v);
    B.SD.u(n, m);
    q[0] = n;
    q[1] = ["WrpA", "RptE"].indexOf(j.UndA.v.UndA);
  };
  gj["Shr "].prototype.MO = function (j, q) {
    var m = new k$(0, 255 / 127, 255 / 127, 0, -2, 128);
    m.BR();
    B.SD.u(q[0], m);
    j.ShrP.v = q[0];
    j.ShrE.v = q[0].length - 1;
    j.UndA.v.UndA = ["WrpA", "RptE"][q[1]];
  };
  gj.Sphr = function () {
    gj.call(this, "Sphr");
    this.N3 = [
      new ho([12, 57], -100, 100),
      new f1(
        [12, 36],
        [
          [15, 10, 0],
          [22, 4, 0],
          [22, 4, 1],
        ]
      ),
    ];
    this.zw();
  };
  gj.Sphr.prototype = new gj();
  gj.Sphr.prototype.iU = function (j, q) {
    q[0] = j.Amnt.v;
    q[1] = ["Nrml", "HrzO", "VrtO"].indexOf(j.SphM.v.SphM);
  };
  gj.Sphr.prototype.MO = function (j, q) {
    j.Amnt.v = q[0];
    j.SphM.v.SphM = ["Nrml", "HrzO", "VrtO"][q[1]];
  };
  gj.Dthr = function () {
    gj.call(this, "Dthr");
    this.N3 = [
      new f1("Palette", i9.a5m),
      new gA("Method", ["None", "Floyd-Steinberg", "Bayer 4x4"]),
    ];
    this.zw();
  };
  gj.Dthr.prototype = new gj();
  gj.Dthr.prototype.iU = function (j, q) {
    q[0] = j.Plte.v;
    q[1] = j.Mthd ? j.Mthd.v : 1;
  };
  gj.Dthr.prototype.MO = function (j, q) {
    j.Plte.v = q[0];
    j.Mthd.v = q[1];
  };
  gj.Part = function () {
    gj.call(this, "Part");
    this.N3 = [
      new ho([15, 5, 1], 0, 100, "%"),
      new ho([12, 14, 0], 1, 50, "px"),
      new ho([12, 34], 0, 100, "%"),
      new ho([12, 2], 10, 1e3, "%"),
      new g1(!0),
      new ho("Time", 0, 1, null, 3),
      new ho("Turbulence", 0, 100, "%"),
      new av("Blink"),
      new av("Fall"),
    ];
    this.zw([4]);
  };
  gj.Part.prototype = new gj();
  gj.Part.prototype.iU = function (j, q) {
    q[0] = j.Cont.v;
    q[1] = j.Size.v;
    q[2] = j.Dpth.v;
    q[3] = j.Brgh.v;
    q[4] = j.Clr.v;
    q[5] = j.Time.v;
    q[6] = j.Turb.v;
    q[7] = j.Blnk.v;
    q[8] = j.Fall.v;
  };
  gj.Part.prototype.MO = function (j, q) {
    j.Cont.v = q[0];
    j.Size.v = q[1];
    j.Dpth.v = q[2];
    j.Brgh.v = q[3];
    j.Clr.v = q[4];
    j.Time.v = q[5];
    j.Turb.v = q[6];
    j.Blnk.v = q[7];
    j.Fall.v = q[8];
  };
  gj.Twrl = function () {
    gj.call(this, "Twrl");
    this.N3 = [new ho([12, 15], -999, 999)];
    this.zw();
  };
  gj.Twrl.prototype = new gj();
  gj.Wave = function () {
    gj.call(this, "Wave");
    this.aDp = [1, 2, 3, 4];
    this.N3 = [
      new ho("Number of Generators", 1, 100),
      new dV("Min Length", 1, 999),
      new dV("Max Length", 1, 999),
      new dV("Min Ampl.", 1, 999),
      new dV("Max Ampl.", 1, 999),
      new dV("Scale X", 1, 100, "%"),
      new dV("Scale Y", 1, 100, "%"),
      new gA([12, 44], ["Sine", "Triangle", [12, 93, 3]]),
      new f1(
        [24, 18, 0],
        [
          [24, 18, 3],
          [24, 18, 2],
        ]
      ),
    ];
    this.zw();
  };
  gj.Wave.prototype = new gj();
  gj.ZgZg = function () {
    gj.call(this, "ZgZg");
    this.N3 = [
      new ho([12, 57], -100, 100),
      new ho("Ridges", 0, 20),
      new f1([12, 22], ["Around Center", "Out From Center", "Pond Ripples"]),
    ];
    this.zw();
  };
  gj.ZgZg.prototype = new gj();
  gj.surfaceBlur = function () {
    gj.call(this, "surfaceBlur");
    this.N3 = [new ho([12, 56], 1, 200, " px"), new ho([4, 13], 1, 255, " px")];
    this.zw();
  };
  gj.surfaceBlur.prototype = new gj();
  gj.surfaceBlur.prototype.iU = function (j, q) {
    q[0] = j.Rds.v.val;
    q[1] = j.Thsh.v;
  };
  gj.surfaceBlur.prototype.MO = function (j, q) {
    j.Rds.v.val = q[0];
    j.Thsh.v = q[1];
  };
  gj.AdNs = function () {
    gj.call(this, "AdNs");
    this.N3 = [
      new ho([12, 57], 0, 200, " %"),
      new f1(
        [12, 58],
        [
          [12, 59, 1],
          [12, 59, 0],
        ]
      ),
      new av([12, 60]),
    ];
    this.zw();
  };
  gj.AdNs.prototype = new gj();
  gj.DstS = function () {
    gj.call(this, "DstS");
    this.N3 = [new ho([12, 56], 1, 200, " px"), new ho([4, 13], 1, 255, " px")];
    this.zw();
  };
  gj.DstS.prototype = new gj();
  gj["Mdn "] = function () {
    gj.call(this, "Mdn ");
    this.N3 = [new ho([12, 56], 1, 200, " px")];
    this.zw();
  };
  gj["Mdn "].prototype = new gj();
  gj["Mdn "].prototype.iU = function (j, q) {
    q[0] = j.Rds.v.val;
  };
  gj["Mdn "].prototype.MO = function (j, q) {
    j.Rds.v.val = q[0];
  };
  gj.ClrH = function () {
    gj.call(this, "ClrH");
    this.N3 = [new ho([12, 56], 4, 100, " px")];
    for (var y = 1; y < 4; y++)
      this.N3.push(new ho("Angle " + y, 0, 90, " \xB0"));
    this.zw();
  };
  gj.ClrH.prototype = new gj();
  gj.ClrH.prototype.iU = function (j, q) {
    q[0] = j.Rds.v;
    for (var y = 1; y < 4; y++) q[y] = j["Ang" + y].v;
  };
  gj.ClrH.prototype.MO = function (j, q) {
    j.Rds.v = q[0];
    for (var y = 1; y < 4; y++) j["Ang" + y].v = q[y];
  };
  gj.ClrH.prototype.T = function () {
    var j = this.N3;
    j[0].T();
    for (var y = 1; y < 4; y++) j[y].hk(g$.get([12, 15]) + " " + y);
  };
  gj.Crst = function () {
    gj.call(this, "Crst");
    this.N3 = [new ho([12, 61], 3, 100, " px")];
    this.zw();
  };
  gj.Crst.prototype = new gj();
  gj.Crst.prototype.iU = function (j, q) {
    q[0] = j.ClSz.v;
  };
  gj.Crst.prototype.MO = function (j, q) {
    j.ClSz.v = q[0];
  };
  gj.Mztn = function () {
    gj.call(this, "Mztn");
    this.N3.push(
      new f1(
        [12, 44],
        "Fine Dots,Medium Dots,Grainy Dots,Coarse Dots,Short Lines,Medium Lines,Long Lines,Short Strokes,Medium Strokes,Long Strokes".split(
          ","
        ),
        [4, 3, 3]
      )
    );
    this.Ew = "FnDt MdmD GrnD CrsD ShrL MdmL LngL ShSt MdmS LngS".split(" ");
    this.zw();
  };
  gj.Mztn.prototype = new gj();
  gj.Mztn.prototype.iU = function (j, q) {
    q[0] = this.Ew.indexOf(j.MztT.v.MztT);
  };
  gj.Mztn.prototype.MO = function (j, q) {
    j.MztT.v.MztT = this.Ew[q[0]];
  };
  gj["Msc "] = function () {
    gj.call(this, "Msc ");
    this.N3 = [new ho([12, 61], 2, 200, " px")];
    this.zw();
  };
  gj["Msc "].prototype = new gj();
  gj["Msc "].prototype.iU = function (j, q) {
    q[0] = j.ClSz.v.val;
  };
  gj["Msc "].prototype.MO = function (j, q) {
    j.ClSz.v.val = q[0];
  };
  gj.ShMs = function () {
    gj.call(this, "ShMs");
    this.N3 = [
      new ho([12, 61], 2, 200, " px"),
      new gA(
        [12, 76, 1],
        [
          [12, 93, 3],
          [12, 93, 5],
          [12, 93, 1],
        ]
      ),
      new gA([12, 29], ["XY", "X", "Y"]),
      new av([12, 60]),
      new av([4, 11]),
    ];
    this.zw();
  };
  gj.ShMs.prototype = new gj();
  gj.ShMs.prototype.iU = function (j, q) {
    q[0] = j.ClSz.v.val;
    q[1] = j.Shap.v;
    q[2] = j.Sprd.v;
    q[3] = j.Mono.v;
    q[4] = j.Invr.v;
  };
  gj.ShMs.prototype.MO = function (j, q) {
    j.ClSz.v.val = q[0];
    j.Shap.v = q[1];
    j.Sprd.v = q[2];
    j.Mono.v = q[3];
    j.Invr.v = q[4];
  };
  gj.Pntl = function () {
    gj.call(this, "Pntl");
    this.N3 = [new ho([12, 61], 3, 100, " px")];
    this.zw();
  };
  gj.Pntl.prototype = new gj();
  gj.Pntl.prototype.iU = function (j, q) {
    q[0] = j.ClSz.v;
  };
  gj.Pntl.prototype.MO = function (j, q) {
    j.ClSz.v = q[0];
  };
  gj.smartSharpen = function () {
    gj.call(this, "smartSharpen");
    this.N3 = [
      new ho([12, 57], 1, 200, "%"),
      new ho([12, 56], 0, 200, "px", 1, !0),
    ];
    this.zw();
  };
  gj.smartSharpen.prototype = new gj();
  gj.smartSharpen.prototype.iU = function (j, q) {
    q[0] = j.Amnt ? j.Amnt.v.val : 200;
    q[1] = j.Rds ? j.Rds.v.val : 1;
  };
  gj.smartSharpen.prototype.MO = function (j, q) {
    j.Amnt.v.val = q[0];
    j.Rds.v.val = q[1];
  };
  gj.UnsM = function () {
    gj.call(this, "UnsM");
    this.N3 = [
      new ho([12, 57], 1, 200, " %"),
      new ho([12, 56], 0.1, 400, "px", 1, !0),
      new ho([4, 13], 0, 255, " "),
    ];
    this.zw();
  };
  gj.UnsM.prototype = new gj();
  gj.HghP = function () {
    gj.call(this, "HghP");
    this.N3 = [new ho([12, 56], 0.1, 400, "px", 1, !0)];
    this.zw();
  };
  gj.HghP.prototype = new gj();
  gj.HsbP = function () {
    gj.call(this, "HsbP");
    this.N3 = [
      new gA("Input", ["RGB", "HSB", "HSL"]),
      new gA("Output", ["RGB", "HSB", "HSL"]),
    ];
    this.zw();
  };
  gj.HsbP.prototype = new gj();
  gj["Mxm "] = function () {
    gj.call(this, "Mxm ");
    this.N3 = [
      new ho([12, 56], 0.1, 200, " px", 1, !0),
      new f1([12, 76, 1], [[12, 93, 3], "Circle"]),
    ];
    this.zw();
  };
  gj["Mxm "].prototype = new gj();
  gj["Mnm "] = function () {
    gj.call(this, "Mnm ");
    this.N3 = [
      new ho([12, 56], 0.1, 200, " px", 1, !0),
      new f1([12, 76, 1], [[12, 93, 3], "Circle"]),
    ];
    this.zw();
  };
  gj["Mnm "].prototype = new gj();
  gj.Ofst = function () {
    gj.call(this, "Ofst");
    this.N3 = [
      new ho([22, 4, 0], -1024, 1024, " px"),
      new ho([22, 4, 1], -1024, 1024, " px"),
      new f1(
        [24, 18, 0],
        [
          [24, 18, 2],
          [24, 18, 1],
          [24, 18, 3],
        ]
      ),
    ];
    this.zw();
  };
  gj.Ofst.prototype = new gj();
  gj.Kale = function () {
    gj.call(this, "Kale");
    this.N3 = [new dV("Mirrors", 2, 20), new dV([12, 15], 0, 360, "\xB0")];
    this.zw();
  };
  gj.Kale.prototype = new gj();
  gj.Kale.prototype.iU = function (j, q) {
    q[0] = j.Mirr.v;
    q[1] = j.MRot.v;
  };
  gj.Kale.prototype.MO = function (j, q) {
    j.Mirr.v = q[0];
    j.MRot.v = q[1];
  };
  gj.Rept = function () {
    gj.call(this, "Rept");
    this.N3 = [
      new dV([12, 38], 1, 300, " %"),
      new dV("Row Shift", -50, 50, " %"),
      new dV("Space X", -99, 200, " %"),
      new dV("Space Y", -99, 200, " %"),
      new av([4, 16, 2]),
      new iI([12, 15]),
    ];
    this.zw();
  };
  gj.Rept.prototype = new gj();
  gj.Rept.prototype.iU = function (j, q) {
    q[0] = j.Scl.v.val;
    q[1] = j.Rsft.v.val;
    q[2] = j.SpcX.v.val;
    q[3] = j.SpcY.v.val;
    q[4] = j.SpcC.v;
    q[5] = [j.Angl.v];
  };
  gj.Rept.prototype.MO = function (j, q) {
    j.Scl.v.val = q[0];
    j.Rsft.v.val = q[1];
    j.SpcX.v.val = q[2];
    j.SpcY.v.val = q[3];
    j.SpcC.v = q[4];
    j.Angl.v = q[5][0];
    return j;
  };
  gj.Ctoa = function () {
    gj.call(this, "Ctoa");
    this.N3 = [
      new aD([13, 0]),
      new g1(!0),
      new ho(["VAR0 VAR1", "Transparency", [4, 13]], 0, 100, " %"),
      new ho(["VAR0 VAR1", [12, 0], [4, 13]], 0, 100, " %"),
    ];
    this.zw();
  };
  gj.Ctoa.prototype = new gj();
  gj.Ctoa.prototype.iU = function (j, q) {
    q[0] = j.Clr.v;
    q[1] = j.Trsp.v.val;
    q[2] = j.Opct.v.val;
  };
  gj.Ctoa.prototype.MO = function (j, q) {
    j.Clr.v = q[0];
    j.Trsp.v.val = q[1];
    j.Opct.v.val = q[2];
  };
  gj.LqFy = function () {
    gj.call(this, "LqFy");
    this.B8 = !1;
    this.Sj = !1;
    this.JD = null;
    this.a7Z = null;
    this.l = 0;
    this.uP = -1;
    this.Z = {
      hR: [
        [{ l: { id: 0, name: [24, 1, 0, 1, 0], af: "liq/smudge" } }],
        [{ l: { id: 1, name: [24, 1, 0, 1, 1], af: "liq/reconstruct" } }],
        [{ l: { id: 2, name: [24, 1, 0, 1, 2], af: "liq/smooth" } }],
        [{ l: { id: 3, name: [24, 1, 0, 1, 3], af: "liq/twirl" } }],
        [{ l: { id: 4, name: [24, 1, 0, 1, 4], af: "liq/shrink" } }],
        [{ l: { id: 5, name: [24, 1, 0, 1, 5], af: "liq/blow" } }],
        [{ l: { id: 6, name: [24, 1, 0, 1, 6], af: "liq/pleft" } }],
        [{ l: { id: 7, name: "Hand", af: "tools/hand" } }],
        [{ l: { id: 8, name: "Zoom In", af: "zoomIn" } }],
        [{ l: { id: 9, name: "Zoom Out", af: "zoomOut" } }],
      ],
      keys: [],
    };
    this.SX = new bt(this.Z, !1);
    this.SX.yx(0);
    this.SX.Q(_.E.c, this.Pc, this);
    this.tJ = fc.vM();
    this.UL = null;
    this.Ua = [];
    this.vA = -1;
    this.Eu = null;
    this.aMc = null;
    this.MC = null;
    this.eJ = null;
    this.nP = null;
    var j = J.m("div", "flexrow");
    this.gj = j;
    this._.appendChild(j);
    j.appendChild(this.SX._);
    this.view = new j7(!0);
    this.view.X3(100, 100);
    this.view.Q("mousedown", this.Q7, this);
    this.view.Q("mousemove", this.dU, this);
    this.view.Q("mouseup", this.IB, this);
    this.view.Q("zoom", this.Vn, this);
    j.appendChild(this.view._);
    var q = J.m("div", "form");
    j.appendChild(q);
    this.aq1 = q;
    q.style.width = "230px";
    this.$B = [
      new ho([12, 14, 0], 0, 1e3, null, !1, !0),
      new ho([12, 74], 0, 100, null, !1, !1),
      new ho([12, 84], 0, 100, null, !1, !1),
      new av([12, 46]),
      new ho([12, 0], 0, 100, null, !1, !1),
      new av([24, 18, 5]),
    ];
    var m = this.tJ.Brsh.v;
    m.Dmtr.v.val = 100;
    var n = [100, 50, 100, !1, 100, !0];
    for (var y = 0; y < this.$B.length; y++) {
      var G = this.$B[y];
      G.q(n[y]);
      if (y == 4) G.Ub();
      G.Q(_.E.n, this.a9m, this);
      q.appendChild(G._);
    }
    var W = (this.aIm = new kv([1, 12, 2], !0, null, !0));
    W.Q("click", this.MQ, this);
    q.appendChild(W._);
    this.aHD = this.qx.bind(this);
    this.XA = new kV();
    this.XA._ = J.m("div", "floatcont");
    this.b3 = new kv("Menu", !1, null, !0);
    var k = this.b3._;
    J.F(k, "position:absolute; right:13px; top:47px");
    J.PD(k, this.aei.bind(this));
  };
  gj.LqFy.prototype = new gj();
  gj.LqFy.prototype.JY = function () {
    return !0;
  };
  gj.LqFy.prototype.ol = function (j) {
    this.aq1.appendChild(j);
  };
  gj.LqFy.prototype.aei = function (j) {
    if (J.JO(this.XA._)) return;
    j.stopPropagation();
    var q = this.b3._.getBoundingClientRect();
    this.XA._.appendChild(this.aq1);
    var m = new fd(_.E.c, !0);
    m.data = {
      R: _.Y.wQ,
      Tf: this.XA,
      x: q.right + q.width - 290,
      y: q.top + q.height,
    };
    this.k(m);
  };
  gj.LqFy.prototype.uY = function (j) {
    this.B8 = j.M(gn.O4);
    var q = L.tt.s6(this.tJ, j);
    if (q != null) {
      this.tJ = q;
      this.Vn();
      this.$B[0].q(q.Brsh.v.Dmtr.v.val);
    } else if (j.M(gn.A8) && j.M(gn.AQ)) {
      var m = this.Ua;
      if (j.M(gn.X6)) {
        if (this.vA + 1 < m.length) this.vA++;
      } else if (this.vA > 0) this.vA--;
      this.UL.map = m[this.vA].slice(0);
      this.ip(null);
    } else if (this.l <= 6) this.view.uY(j);
    var n = this.l,
      G = -1,
      W = j.M(gn.O4);
    if (W && this.uP == -1) {
      if (n == 0) G = 1;
      if (n == 4) G = 5;
      if (n == 5) G = 4;
      if (G != -1) this.uP = n;
    }
    if (!W && this.uP != -1) {
      G = this.uP;
      this.uP = -1;
    }
    if (G != -1) {
      this.l = G;
      this.SX.yx(this.l);
    }
  };
  gj.LqFy.prototype.Pc = function (j) {
    if (j.data.R == _.Y.UK) {
      var q = (this.l = j.data.l);
      this.SX.yx(this.l);
      this.view.uY(q > 6 ? j7.Ld(q - 7) : new gn());
    }
  };
  gj.LqFy.prototype.a9m = function (j) {
    var q = j.currentTarget,
      y = this.$B.indexOf(q),
      m = this.tJ.Brsh.v;
    if (y == 0) {
      m.Dmtr.v.val = q.V();
      this.Vn();
    }
    this.$B[4].yl(this.$B[3].V());
    if (y > 2) this.ip(null);
  };
  gj.LqFy.prototype.Gc = function () {
    var j = this.Ua;
    this.vA++;
    j[this.vA] = this.UL.map.slice(0);
    while (j.length > this.vA + 1) j.pop();
    while (j.length > 50) {
      j = j.slice(1);
      this.vA--;
    }
  };
  gj.LqFy.prototype.Q7 = function (j) {
    this.JD = this.view.VS();
    this.a7Z = new ea(0, 0);
    this.Sj = !0;
    window.requestAnimationFrame(this.aHD);
  };
  gj.LqFy.prototype.dU = function (j) {
    var q = this.view.VS(),
      m = new ea(q.x - this.JD.x, q.y - this.JD.y);
    if (this.l == 0 || this.l == 6) this.alx(m);
    this.JD = q;
  };
  gj.LqFy.prototype.IB = function (j) {
    this.Gc();
    this.Sj = !1;
  };
  gj.LqFy.prototype.qx = function (j) {
    if (this.l != 0 && this.l != 6) this.alx(new ea(0, 0));
    if (this.Sj) window.requestAnimationFrame(this.aHD);
  };
  gj.LqFy.prototype.alx = function (j) {
    var q = this.UL,
      m = q.GM / this.Eu.r,
      n = this.JD,
      G = this.tJ.Brsh.v,
      W = G.Dmtr.v.val,
      k = Date.now(),
      T = q.GM,
      b = q.uu,
      c = Math.sqrt(j.x * j.x + j.y * j.y),
      a = Math.max(1, Math.ceil(c / 2)),
      f = j.x / a,
      U = j.y / a,
      Z = n.P(),
      h = this.l,
      u = this.$B[1].V() / 100,
      i = this.$B[2].V() / 100,
      x = [
        0.005, 0.015, 0, 0, 0.2, 0.2, 0.01, 0.01, 0.05, 0.35, 0.1, 0.1, 0.005,
        0.015,
      ],
      X = x[h * 2],
      $ = x[h * 2 + 1],
      H = (1 - u) * X + u * $,
      C = (W * m) / 2;
    for (var y = 0; y < a; y++) {
      var l = [];
      Z.x += f;
      Z.y += U;
      B.Vw.aEP(
        q.map,
        T,
        b,
        h,
        Z.x * m,
        Z.y * m,
        C,
        u,
        i,
        f * m,
        U * m,
        l,
        this.B8
      );
      B.Vw.aLa(T, b, q.map, l, 2 * H * i);
    }
    var v = new hk(0, 0, T, b),
      K = new hk(n.x * m, n.y * m, 0, 0);
    K.Lh(W * m * 0.5, W * m * 0.5);
    var S = K.P();
    S.offset(j.x * m, j.y * m);
    K = K.vd(S);
    var o = new hk(K.x / m, K.y / m, K.r / m, K.$ / m);
    o = B.b.mE(o).TM(this.Eu);
    this.$B[5].q(!0);
    this.ip(o);
  };
  gj.LqFy.prototype.Vn = function () {
    var j = e4.EN(this.tJ, null, this.view.lx().k3);
    this.view.eP(j);
  };
  gj.LqFy.prototype.q = function (j, q, m, n, G) {
    m = m.P();
    if (q == null) return;
    q = B.sL(q, 8);
    if (!n.Lg(m)) {
      var W = m.vd(n),
        k = B.j(W.C() * 4);
      B.M4(q, m, k, W);
      q = k;
      m = W;
      var T = B.j(W.C() * 4);
      B.M4(G, n, T, W);
      G = T;
    }
    m.x = m.y = 0;
    this.MC = q;
    this.aMc = G;
    this.nP = q.slice(0);
    this.eJ = q.slice(0);
    this.Eu = m;
    this.UL = iA.VB(new Uint8Array(j.LqMe.v).buffer);
    var b = m.r,
      c = m.$;
    if (this.UL.GM / b < 0.22) {
      this.UL = { GM: Math.floor(b / 4), uu: Math.floor(c / 4) };
      this.UL.map = new Float32Array(this.UL.GM * this.UL.uu * 2);
    }
    this.Ua = [];
    this.vA = -1;
    this.Gc();
    this.ip(null);
    this.view.H5(!0);
    this.Vn();
  };
  gj.LqFy.prototype.V = function () {
    var j = k0.i4("LqFy"),
      q = new Uint8Array(iA.RS(this.UL)),
      m = [];
    for (var y = 0; y < q.length; y++) m.push(q[y]);
    j.LqMe.v = m;
    return j;
  };
  gj.LqFy.prototype.X3 = function (j, q) {
    this.SX.X3(j, q);
    var m = this.b3._,
      n = this.aq1;
    this.gj.appendChild(n);
    this.gj.appendChild(m);
    if (j > 450 && j - q > 200) {
      n.style.marginLeft = "1em";
      this.gj.removeChild(m);
      this.view.X3(j - 238 - 45, q);
    } else {
      n.style.marginLeft = "";
      this.gj.removeChild(n);
      this.view.X3(j - 40, q);
    }
  };
  gj.LqFy.prototype.T = function () {
    this.SX.T();
    this.aIm.T();
    for (var y = 0; y < this.$B.length; y++) this.$B[y].T();
  };
  gj.LqFy.prototype.MQ = function () {
    this.UL.map.fill(0);
    this.Gc();
    this.ip(null);
  };
  gj.LqFy.prototype.ip = function (j) {
    var q = this.Eu,
      m = this.MC,
      n = this.nP,
      G = this.UL;
    if (this.$B[5].V()) B.Vw.c1(m, this.eJ, q.r, q.$, j, G.map, G.GM, G.uu, 0);
    else this.eJ.set(m);
    if (this.$B[3].sM()) {
      B.M4(this.aMc, q, n, q, j ? j : q);
      B.G.Jg("norm", this.eJ, q, n, q, j ? j : q, this.$B[4].V() / 100);
    } else B.wV(this.eJ, n);
    this.view.q([{ Iu: q, data: n.buffer }], null, null, j);
  };
  gj.GEfc = function () {
    gj.call(this, "GEfc");
    this.A2 = 0;
    this.mc = 0;
    this.MC = null;
    this.nP = null;
    this.Eu = null;
    this.a = null;
    this.i1 = null;
    this.jM = 0;
    this.Rs = null;
    this.Hb = null;
    var j = J.m("div", "flexrow");
    this.gj = j;
    this._.appendChild(j);
    this.view = new j7(null);
    this.view.X3(100, 100);
    j.appendChild(this.view._);
    this._M = "";
    this.aBQ = 270;
    var q = (this.Us = J.m("div", "form scrollable"));
    j.appendChild(q);
    J.F(q, "width:" + this.aBQ + "px;");
    var m = (this.Pz = J.m("div", "form"));
    j.appendChild(m);
    J.F(m, "width:230px;  margin:0 10px");
    this.h$ = {};
    for (var n in i9.names) {
      var G = new gj.GEfc.ZP(n);
      G.parent = this;
      this.h$[n] = G;
      G.Q(_.E.n, this.asQ, this);
    }
    this.Bn = !0;
    this.b3 = new kv("Menu", null, null, !0);
    this.b3.Q("click", this.a6S, this);
    j.appendChild(this.b3._);
    this.a1r = new kv(">>", null, null, !0);
    this.a1r.Q("click", this.awJ, this);
    m.appendChild(this.a1r._);
    this.aur = J.m("div");
    J.F(
      this.aur,
      "margin-bottom:1.5em;  display:inline-block;  width:calc(100% - 40px);"
    );
    m.appendChild(this.aur);
    this.Lk = J.m("div");
    this.Lk.style.minHeight = "14em";
    this.Lk.style.marginBottom = "1em";
    m.appendChild(this.Lk);
    this.CC = J.m("div", "lpbody scrollable");
    this.Mv = J.m("div", "lpfoot");
    m.appendChild(this.CC);
    m.appendChild(this.Mv);
    this.Q("click", this.aKz, this);
    this.zi = [];
    lb.MZ(
      [
        [5, 3],
        [5, 4],
      ],
      this.zi,
      this.Mv,
      this.x0.bind(this)
    );
  };
  gj.GEfc.prototype = new gj();
  gj.GEfc.prototype.JY = function () {
    return !0;
  };
  gj.GEfc.prototype.ol = function (j) {
    this.aur.appendChild(j);
  };
  gj.GEfc.prototype.uY = function (j) {
    this.view.uY(j);
  };
  gj.GEfc.prototype.yp = function (j, q) {
    this.a = j;
    if (j.UP == j.vH)
      alert("Your foreground and a background color are identical.", 4e3);
  };
  gj.GEfc.prototype.awJ = function (j) {
    var q = this.Us.style.display != "none";
    this.Us.style.display = q ? "none" : "";
    this.a1r.hk(q ? "<<" : ">>");
    this.X3();
  };
  gj.GEfc.prototype.a6S = function (j) {
    this.Bn = !this.Bn;
    this.X3();
  };
  gj.GEfc.prototype.X3 = function (j, q) {
    var m = this.Us.style.display != "none";
    if (j != null) {
      this.A2 = j;
      this.mc = q;
      if ((j < 1e3 && m) || (j >= 1e3 && !m)) {
        this.awJ();
        m = !m;
      }
      this.Bn = j > 600;
    } else {
      j = this.A2;
      q = this.mc;
    }
    var n = this.Bn ? 250 + (m ? this.aBQ : 0) : 0;
    if (J.JO(this.Pz) && !this.Bn) {
      this.gj.removeChild(this.Us);
      this.gj.removeChild(this.Pz);
    }
    if (!J.JO(this.Pz) && this.Bn) {
      this.gj.appendChild(this.Us);
      this.gj.appendChild(this.Pz);
    }
    this.Us.style.height = q + "px";
    this.view.X3(j - n, q);
    this.CC.style.height =
      q - Math.max(this.Lk.getBoundingClientRect().height, 186) - 96 + "px";
    J.F(this.b3._, "position:absolute; top:46px;  right:" + (n + 16) + "px");
  };
  gj.GEfc.prototype.a4j = function () {
    var j = gh.$P.get("img/beach", !0)[0],
      q = j.Iu,
      m = this.Us,
      n = Math.floor((J.IC() * (this.aBQ - 44)) / 3),
      G = ~~(n * 0.7),
      W = new hk(0, 0, n, G),
      k = B.j(n * G * 4),
      T = k.slice(0),
      b = Math.round(10 * J.IC()),
      c = new ImageData(new Uint8ClampedArray(T.buffer), n, G);
    B.M4(
      new Uint8Array(j.data),
      q,
      k,
      new hk(Math.round((q.r - n) / 2), Math.round((q.$ - G) / 2), n, G)
    );
    var a = J.m("canvas"),
      f = a.getContext("2d");
    a.width = n;
    a.height = G + Math.round(b * 1.5);
    f.font = b + "px sans-serif";
    this.Rs = {};
    J.dI(m);
    var U = this.ajk.bind(this);
    for (var y = 0; y < i9.YW.length; y++) {
      var Z = i9.YW[y],
        h = J.m("div");
      m.appendChild(h);
      J.F(
        h,
        "background-color:rgba(0,0,0,0.2); padding:0px 8px; margin-bottom:8px"
      );
      h.textContent = g$.get(Z);
      for (var u in i9.names) {
        var i = i9.names[u];
        if (i[0] != y) continue;
        i9.Gi(
          u,
          { H: W, buffer: k },
          i9.i4(u),
          { o: 0, i: 0, X: 0 },
          { o: 255, i: 255, X: 255 },
          { H: W, buffer: T },
          {}
        );
        f.fillStyle = "black";
        f.fillRect(0, 0, 500, 500);
        f.putImageData(c, 0, 0);
        var x = g$.get(i[1]);
        f.fillStyle = "white";
        f.fillText(
          x,
          (n - f.measureText(x).width) / 2,
          G + Math.round(b * 1.1)
        );
        var X = J.m("div");
        m.appendChild(X);
        J.F(
          X,
          "display:inline-block; cursor:pointer; padding: 5px 5px 0 5px; margin-bottom:5px"
        );
        X.addEventListener("click", U, !1);
        var h = J.m("img");
        X.appendChild(h);
        h.setAttribute("src", a.toDataURL());
        J.F(h, "width:" + n / J.IC() + "px; margin-bottom:0px;");
        this.Rs[u] = X;
      }
    }
  };
  gj.GEfc.prototype.ajk = function (j) {
    var q;
    for (var m in this.Rs) if (this.Rs[m] == j.currentTarget) this._M = m;
    this.asQ();
  };
  gj.GEfc.prototype.x0 = function (j) {
    var q = lb.xe(this.zi, j),
      m = this.i1.GEfs.v,
      n = m[this.jM].v;
    if (q == 0) {
      m.push(B.S(m[this.jM]));
      this.jM = m.length - 1;
    } else if (m.length > 1) {
      m.splice(this.jM, 1);
      if (this.jM == m.length) this.jM--;
    }
    this.Sr();
    this.ip();
  };
  gj.GEfc.prototype.asQ = function (j) {
    var q = this._M,
      m;
    if (j == null) m = i9.i4(q);
    else m = this.h$[q].V();
    this.i1.GEfs.v[this.jM].v = m;
    this.Sr();
    this.ip();
  };
  gj.GEfc.prototype.q = function (j, q, m, n, G) {
    var W = g$.get([24, 0]);
    if (this.Rs == null || W != this.Hb) this.a4j();
    this.Hb = W;
    j = this.i1 = B.S(j);
    if (j.GEfs == null)
      j = this.i1 = {
        __name: "Filter Gallery",
        classID: "GEfc",
        GEfs: { t: "VlLs", v: [{ t: "Objc", v: j }] },
      };
    var k = j.GEfs.v;
    for (var y = 0; y < k.length; y++)
      if (k[y].v.GELv == null) k[y].v.GELv = { t: "bool", v: !0 };
    this.jM = k.length - 1;
    this.Sr();
    m = m.P();
    if (q == null) return;
    q = B.sL(q, 8);
    if (!n.Lg(m) && i9.$V(j).x != 0) {
      var T = m.vd(n),
        b = B.j(T.C() * 4);
      B.M4(q, m, b, T);
      q = b;
      m = T;
    }
    m.x = m.y = 0;
    this.MC = q;
    this.nP = q.slice(0);
    this.Eu = m;
    this.ip();
    this.view.H5();
  };
  gj.GEfc.prototype.aKz = function (j) {
    var q = j.data,
      y = q.Wy,
      m = this.i1.GEfs.v;
    if (q.E4) {
      m[y].v.GELv.v = !m[y].v.GELv.v;
      this.ip();
    } else this.jM = y;
    this.Sr();
  };
  gj.GEfc.prototype.Sr = function () {
    var j = this.i1.GEfs.v,
      q = j[this.jM].v,
      m = q.GEfk.v.GEft,
      n = this.Lk;
    if (i9.names[m] == null) {
      alert("Unsupported gallery filter");
      J.dI(n);
    } else {
      this._M = m;
      for (var G in this.Rs) J.XZ(this.Rs[G], "selected");
      J._g(this.Rs[m], "selected");
      var W = this.h$[m];
      W.q(q);
      if (n.firstChild != W._) {
        J.dI(n);
        n.appendChild(W._);
      }
    }
    var k = [];
    for (var y = 0; y < j.length; y++) {
      var T = j[y].v,
        b = i9.names[T.GEfk.v.GEft],
        c = new et(
          y,
          !0,
          !0,
          null,
          b ? b[1] : "Filter",
          y == this.jM,
          T.GELv.v
        );
      c.parent = this;
      k.push(c._);
    }
    J.dI(this.CC);
    k.reverse();
    for (var y = 0; y < k.length; y++) this.CC.appendChild(k[y]);
    this.X3();
  };
  gj.GEfc.prototype.V = function () {
    return B.S(this.i1);
  };
  gj.GEfc.prototype.ip = function (j) {
    var q = this.Eu,
      m = this.MC,
      n = this.nP,
      G = this._M,
      W = this.i1,
      k = this.a;
    k0.Gi(
      "GEfc",
      { H: this.Eu, buffer: this.MC },
      W,
      B.b4(k.UP),
      B.b4(k.vH),
      { H: this.Eu, buffer: this.nP },
      null
    );
    this.view.q([{ Iu: q, data: n.buffer }]);
  };
  gj.GEfc.prototype.T = function () {
    for (var j in this.h$) this.h$[j].T();
    lb.uX(this.zi, ["lrs/newlayer", "lrs/bin"]);
  };
  gj.GEfc.ZP = function (j) {
    kV.call(this);
    this.HF = j;
    this._ = J.m("div");
    this.N6 = {};
    var q = i9.i4(j);
    for (var m in q) {
      var n = null;
      if (
        m == "__name" ||
        m == "classID" ||
        m == "GEfk" ||
        m == "GELv" ||
        ["FlRs"].indexOf(m) != -1
      )
        continue;
      else if (m == "EdgW") n = new ho([24, 21, 0], 1, 14);
      else if (m == "EdgB") n = new ho([24, 21, 1], 0, j == "AccE" ? 50 : 20);
      else if (m == "Smth") n = new ho([19, 3, 3], 1, j == "Stmp" ? 50 : 15);
      else if (m == "ClSz") n = new ho([12, 61], 3, 100);
      else if (m == "BrdT") n = new ho([7, 9], 1, 20);
      else if (m == "HghS") n = new ho([12, 64], 0, 20);
      else if (m == "HlSz") n = new ho([12, 14, 0], 1, 15);
      else if (m == "Cntr") n = new ho([12, 3, 0], 0, j == "WtrP" ? 100 : 50);
      else if (m == "Shrp") n = new ho([24, 21, 2], 0, 40);
      else if (m == "SprR") n = new ho([24, 21, 3], 0, 25);
      else if (m == "LgDr") n = new ho([24, 21, 4], 0, j == "Stmp" ? 50 : 100);
      else if (m == "Drkn") n = new ho([24, 21, 5], 1, 50);
      else if (m == "Dstr") n = new ho([24, 21, 6], 0, 20);
      else if (m == "Scln") n = new ho([12, 38], 50, 200);
      else if (m == "Rlf")
        n = new ho([24, 21, 7], 0, j == "Ptch" || j == "NtPr" ? 25 : 50);
      else if (m == "ChAm") n = new ho([24, 21, 8], 1, 7);
      else if (m == "Pncl") n = new ho([19, 2, 5], 1, 30);
      else if (m == "StrP") n = new ho([24, 21, 9], 0, 15);
      else if (m == "PprB") n = new ho([24, 21, 10], 0, 50);
      else if (m == "BrsS") n = new ho([24, 21, 11], 0, 10);
      else if (m == "BrsD") n = new ho([24, 21, 12], 0, 10);
      else if (m == "Txtr") n = new ho([12, 67], 1, 3);
      else if (m == "Grn") n = new ho([24, 20, 42], 0, 20);
      else if (m == "HghA") n = new ho([24, 21, 13], 0, 20);
      else if (m == "Intn") n = new ho([24, 21, 14], 0, 10);
      else if (m == "Brgh") n = new ho([24, 21, 15], 0, j == "WtrP" ? 100 : 50);
      else if (m == "StrS") n = new ho([24, 21, 16], 1, 50);
      else if (m == "StDt") n = new ho([24, 21, 17], 1, 3);
      else if (m == "Sftn") n = new ho([24, 21, 18], 0, 10);
      else if (m == "EdgT") n = new ho([24, 21, 19], 0, 10);
      else if (m == "EdgI") n = new ho([24, 21, 20], 0, 10);
      else if (m == "Pstr") n = new ho([24, 21, 23], 0, 6);
      else if (m == "Dfnt") n = new ho([24, 21, 24], 0, 25);
      else if (m == "TxtC") n = new ho([24, 21, 25], 0, 50);
      else if (m == "ShdI") n = new ho([24, 21, 26], 0, 10);
      else if (m == "DrcB") n = new ho([24, 21, 28], 0, 100);
      else if (m == "Strg") n = new ho([12, 64], 1, 3);
      else if (m == "Blnc") n = new ho([24, 21, 27], 0, 10);
      else if (m == "BlcI") n = new ho([24, 21, 30], 0, 10);
      else if (m == "WhtI") n = new ho([24, 21, 31], 0, 10);
      else if (m == "DrkI") n = new ho([24, 21, 32], 0, 50);
      else if (m == "LghI") n = new ho([24, 21, 33], 0, 50);
      else if (m == "StrW") n = new ho([24, 21, 34], 3, 15);
      else if (m == "Grns") n = new ho([24, 21, 36], 0, j == "NtPr" ? 20 : 10);
      else if (m == "GlwA") n = new ho([24, 21, 37], 0, 20);
      else if (m == "ClrA") n = new ho([24, 21, 38], 0, 20);
      else if (m == "ChrA") n = new ho([24, 21, 39], 0, 20);
      else if (m == "ChlA") n = new ho([24, 21, 40], 0, 20);
      else if (m == "FrgL") n = new ho([24, 21, 41], 1, 15);
      else if (m == "BckL") n = new ho([24, 21, 42], 1, 15);
      else if (m == "WhtL") n = new ho([24, 21, 42], 0, 50);
      else if (m == "BlcL") n = new ho([24, 21, 41], 0, 50);
      else if (m == "ImgB") n = new ho([24, 21, 29], 0, 50);
      else if (m == "Dnst") n = new ho([12, 74], 0, 50);
      else if (m == "FbrL") n = new ho([24, 21, 43], 3, 50);
      else if (m == "CrcS") n = new ho([24, 21, 44], 2, 100);
      else if (m == "CrcD") n = new ho([24, 21, 45], 0, 10);
      else if (m == "CrcB") n = new ho([24, 21, 46], 0, 10);
      else if (m == "TlSz") n = new ho([24, 21, 47], 2, 100);
      else if (m == "GrtW") n = new ho([24, 21, 48], 1, 15);
      else if (m == "LghG") n = new ho([24, 21, 49], 0, 10);
      else if (m == "SqrS") n = new ho([24, 21, 50], 0, 10);
      else if (m == "RplS") n = new ho([24, 21, 51], 1, 15);
      else if (m == "RplM") n = new ho([24, 21, 52], 0, 20);
      else if (m == "NmbL") n = new ho([24, 21, 53], 2, 8);
      else if (m == "EdgS") n = new ho([24, 21, 21], 0, 10);
      else if (m == "EdgF") n = new ho([24, 21, 22], 1, 3);
      else if (m == "Sz")
        n =
          j == "NGlw"
            ? new ho([24, 21, 54], -24, 24)
            : new ho([24, 21, 11], 1, 50);
      else if (m == "Dtl")
        n =
          j == "Chrc"
            ? new ho([24, 21, 56], 0, 5)
            : new ho([24, 21, 56], 1, 15);
      else if (m == "StrL")
        n =
          j == "InkO"
            ? new ho([24, 21, 35], 1, 50)
            : new ho([24, 21, 35], 0, 20);
      else if (m == "TxtT")
        n = new f1(
          [12, 67],
          [
            [24, 22, 0],
            [24, 22, 1],
            [24, 22, 2],
            [24, 22, 3],
            [24, 22, 4],
            [24, 22, 5],
            [24, 22, 6],
          ]
        );
      else if (m == "BrsT")
        n = new f1(
          [24, 21, 57],
          [
            [24, 23, 0],
            [24, 23, 1],
            [24, 23, 2],
            [24, 23, 3],
            [24, 23, 4],
            [24, 23, 5],
          ]
        );
      else if (m == "Grnt")
        n = new f1(
          [24, 21, 58],
          [
            [24, 24, 0],
            [24, 24, 1],
            [24, 24, 2],
            [24, 24, 3],
            [24, 24, 4],
            [24, 24, 5],
            [24, 24, 6],
            [22, 4, 0],
            [22, 4, 1],
            [24, 24, 7],
          ]
        );
      else if (m == "SDir")
        n = new f1(
          [12, 33],
          [
            [24, 25, 0],
            [22, 4, 0],
            [24, 25, 1],
            [22, 4, 1],
          ]
        );
      else if (m == "ScrT")
        n = new f1(
          [12, 62],
          [
            [12, 93, 5],
            [12, 93, 6],
            [10, 35],
          ]
        );
      else if (m == "LghD" || m == "LghP")
        n = new f1(
          [24, 21, 59],
          [
            [24, 26, 0],
            [24, 26, 1],
            [24, 26, 2],
            [24, 26, 3],
            [24, 26, 4],
            [24, 26, 5],
            [24, 26, 6],
            [24, 26, 7],
          ]
        );
      else if (m == "Clr") n = new g1([24, 21, 55]);
      else if (m == "InvT") n = new av([4, 11]);
      else console.log(m);
      n.Q(_.E.n, this.tS, this);
      n.parent = this;
      this.N6[m] = n;
      this._.appendChild(n._);
    }
  };
  gj.GEfc.ZP.prototype = new kV();
  gj.GEfc.ZP.prototype.tS = function (j) {
    this.k(new fd(_.E.n, !1));
  };
  gj.GEfc.aqI =
    "Sz Dtl Shrp EdgW EdgB Smth ClSz BrdT HghS HlSz Cntr SprR StrL LgDr Drkn Dstr Scln Rlf ChAm InvT RplS RplM Pncl StrP PprB BrsS BrsD Txtr Grn HghA Intn Brgh Clr StrS StDt Sftn EdgT EdgI Pstr Dfnt TxtC ShdI DrcB Strg Blnc BlcI WhtI DrkI LghI StrW Grns GlwA ClrA ChrA ChlA FrgL BckL WhtL BlcL ImgB Dnst FbrL CrcS CrcD CrcB TlSz GrtW LghG SqrS NmbL EdgS EdgF".split(
      " "
    );
  gj.GEfc.ZP.prototype.q = function (j) {
    for (var q in this.N6) {
      var m;
      if (gj.GEfc.aqI.indexOf(q) != -1) m = j[q].v;
      else if (q == "TxtT") m = i9.sj.indexOf(j[q].v[q]);
      else if (q == "BrsT") m = i9.aoi.indexOf(j[q].v[q]);
      else if (q == "LghD") m = i9.ka.indexOf(j[q].v[q]);
      else if (q == "LghP") m = i9.Ff.indexOf(j[q].v[q]);
      else if (q == "Grnt") m = i9.j4.indexOf(j[q].v[q]);
      else if (q == "ScrT") m = i9.OT.indexOf(j[q].v[q]);
      else if (q == "SDir") m = i9.KS.indexOf(j[q].v.StrD);
      this.N6[q].q(m);
    }
  };
  gj.GEfc.ZP.prototype.V = function () {
    var j = i9.i4(this.HF);
    for (var q in this.N6) {
      var m = this.N6[q].V();
      if (gj.GEfc.aqI.indexOf(q) != -1) j[q].v = m;
      else if (q == "TxtT") j[q].v[q] = i9.sj[m];
      else if (q == "BrsT") j[q].v[q] = i9.aoi[m];
      else if (q == "LghD") j[q].v[q] = i9.ka[m];
      else if (q == "LghP") j[q].v[q] = i9.Ff[m];
      else if (q == "Grnt") j[q].v[q] = i9.j4[m];
      else if (q == "ScrT") j[q].v[q] = i9.OT[m];
      else if (q == "SDir") j[q].v.StrD = i9.KS[m];
    }
    return j;
  };
  gj.GEfc.ZP.prototype.T = function () {
    for (var j in this.N6) this.N6[j].T();
  };
  gj["Adobe Camera Raw Filter"] = (function () {
    var j = function (q) {
      gj.call(this, "Adobe Camera Raw Filter");
      var m = this._;
      this.Zn = q;
      this.oP = null;
      this.S_ = null;
      this.axp = "";
      this._3 = null;
      this.rz = 1e3;
      this.vZ = null;
      this.In = null;
      J._g(m, "flexrow");
      this.view = new j7(!1, q, !0);
      this.view.Q("zoom", this.ip, this);
      m.appendChild(this.view._);
      var n = J.m("div");
      J.F(n, "width:18.8em; border-left:2px solid var(--brdr);");
      m.appendChild(n);
      this.UJ = new j3(245, null, 4);
      n.appendChild(this.UJ._);
      this.UJ._.style.opacity = 0.8;
      this.Dm = new gA([12, 36], ["Original", "Nicer"]);
      this.Dm._.style.margin = "4px";
      if (q) n.appendChild(this.Dm._);
      this.Dm.Q(_.E.n, this.hX, this);
      this.Fw = new gA(null, [
        [7, 0],
        [13, 1, 1],
        [13, 1, 4],
        [13, 1, 5],
      ]);
      this.Fw.Q(_.E.n, this.ip, this);
      this.a86 = J.m("div", "scrollable");
      n.appendChild(this.a86);
      this.agh = J.m("div", "padded");
      n.appendChild(this.agh);
      this.N6 = {
        Ex12: new ho([4, 3], -4, 4, null, !0),
        Cr12: new ho([12, 3, 0], -100, 100),
        Hi12: new ho("Highlights", -100, 100),
        Sh12: new ho("Shadows", -100, 100),
        Wh12: new ho("Whites", -100, 100),
        Bk12: new ho("Blacks", -100, 100),
        Temp: new ho("Temperature", -100, 100),
        Tint: new ho("Tint", -100, 100),
        Vibr: new ho([4, 4], -100, 100),
        Strt: new ho([12, 9], -100, 100),
        CrTx: new ho("Texture", -100, 100),
        Cl12: new ho("Clarity", -100, 100),
        Dhze: new ho("Dehaze", -100, 100),
        Crv: new i3(!1, !1, !1),
      };
      this.N6.Crv.X3(222, 222);
      this.nM = {
        Temp: new ho("Temperature", 2e3, 3e4),
        Tint: new ho("Tint", -100, 100),
        Ex12: new ho([4, 3], -4, 4, null, !0),
      };
      this.a5Q = [];
      var G = (this.aaO = [
        [[24, 21, 59], "Ex12 Cr12 Hi12 Sh12 Wh12 Bk12".split(" ")],
        [
          [13, 0],
          ["Temp", "Tint", "Vibr", "Strt"],
        ],
        [
          [12, 1],
          ["CrTx", "Cl12", "Dhze"],
        ],
        [[4, 2], ["Crv"]],
      ]);
      for (var y = 0; y < G.length; y++) {
        var W = G[y][1],
          k = J.m("div", "padded");
        this.a86.appendChild(k);
        J.F(k, "border-top:2px solid var(--brdr);");
        var T = J.m("div");
        this.a5Q.push(T);
        J.F(T, "font-weight:bold; margin:2px 0 4px 0;");
        k.appendChild(T);
        for (var b = 0; b < W.length; b++) {
          var c = W[b];
          if (c == "Crv") k.appendChild(this.Fw._);
          var a = q && this.nM[c] ? this.nM[c] : this.N6[c];
          if (c != "Crv") a.q(0);
          a.Q(_.E.n, this.ip, this);
          k.appendChild(a._);
        }
      }
    };
    j.prototype = new gj();
    j.prototype.JY = function () {
      return !0;
    };
    j.prototype.ol = function (q) {
      q.style.marginTop = "4px";
      this.agh.appendChild(q);
    };
    j.prototype.uY = function (q) {
      this.view.uY(q);
    };
    j.prototype.yp = function (q, m) {
      this.UJ.kK(cW.LC[q.U6]["--text-color"]);
    };
    j.prototype.acu = function (q) {
      var m = B.raw.aB5(q),
        n = m.aM6,
        G = m.amx,
        W = n * G,
        k = new hk(0, 0, n, G),
        T = m.sE,
        b = new Float32Array(n * G * 4);
      for (var y = 0; y < W; y++) {
        var c = y * 4,
          a = y * 3;
        b[c] = T[a];
        b[c + 1] = T[a + 1];
        b[c + 2] = T[a + 2];
        b[c + 3] = 1;
      }
      this.oP = [b, k];
      B.HZ(this.oP);
      this.S_ = q;
      var f = B.raw.an1(q),
        U = g3.a5f(f);
      this.nM.Temp.q(U.sv);
      this.nM.Tint.q(U.Ao);
      this.nM.Ex12.q(0);
      var Z = new Float32Array(W * 4);
      Z.fill(1);
      var h = k0.i4("Adobe Camera Raw Filter");
      this.att(h, Z, k);
      this.Dm.q(1);
      this.hX({});
    };
    j.prototype.aqG = function (q, m) {
      var n = this.nM,
        G = n.Temp.V(),
        W = n.Tint.V(),
        k = n.Ex12.V(),
        T = [G, W, k, m, q].join(":");
      if (this.axp == T) return;
      this.axp = T;
      var b = Date.now();
      B.raw.HY(this.oP[m * 2], this._3[m * 2], this.S_, [G, W, k], q);
      console.log(Date.now() - b, "remapping XYZ");
    };
    j.prototype.q = function (q, m, n, G, W) {
      var k = new Float32Array(n.C() * 4);
      B.sL(m, 32, k);
      this.att(q, k, n);
    };
    j.prototype.att = function (q, m, n) {
      this.Eu = n;
      var G = n.r,
        W = n.$,
        k = G * W;
      this.rz = 1e3;
      this.axp = "";
      this._3 = [m, n];
      this.vZ = [new Float32Array(G * W * 4), n];
      this.vZ[0].fill(1);
      this.In = [new Uint8Array(G * W * 4), n];
      this.In[0].fill(255);
      B.HZ(this._3);
      B.HZ(this.vZ);
      B.HZ(this.In);
      this.apO(q);
      this.view.q([{ Iu: n, data: this.In[0].buffer }]);
      this.view.H5();
      this.ip(null);
    };
    j.prototype.apO = function (q) {
      this.i1 = q;
      for (var m in this.N6) {
        if (m == "Crv") {
          var n = ["Crv", "CrvR", "CrvG", "CrvB"][this.Fw.V()],
            G = q[n] ? q[n].v : [{ v: 0 }, { v: 0 }, { v: 255 }, { v: 255 }],
            W = [];
          for (var y = 0; y < G.length; y += 2) {
            W.push(B.SD.Fn(G[y].v, G[y + 1].v, !0));
          }
          this.N6[m].q(W);
        } else this.N6[m].q(q[m] ? q[m].v : 0);
      }
    };
    j.prototype.a6p = function (q, m) {
      var n = this.Eu,
        G = this.vZ[0];
      if (this.Zn) this.aqG(q, 0);
      ch(this._3[0], n.r, n.$, G, this.i1);
      return [B.sL(G, m), n];
    };
    j.prototype.V = function () {
      return B.S(this.i1);
    };
    j.prototype.a0Q = function () {
      this.oP = null;
      this.vZ = null;
      this._3 = null;
      this.In = null;
    };
    j.prototype.hX = function (q) {
      var m = this.Dm.V(),
        n = this.Zn,
        G = [
          { t: "long", v: 0 },
          { t: "long", v: 0 },
        ];
      if (m == 1)
        G.push(
          { t: "long", v: 64 },
          { t: "long", v: 75 },
          { t: "long", v: 190 },
          { t: "long", v: 220 }
        );
      G.push({ t: "long", v: 255 }, { t: "long", v: 255 });
      var W = {
        Cr12: { t: "long", v: 45 * m },
        Strt: { t: "long", v: 10 * m },
        Crv: { t: "VlLs", v: G },
      };
      this.nM.Ex12.q(0.3 * m);
      console.log(this.i1, W);
      for (var k in W) this.i1[k] = W[k];
      this.apO(this.i1);
      this.ip(q);
    };
    j.prototype.ip = function (q) {
      if (q && q.target == this.Fw) {
        this.apO(this.i1);
        return;
      }
      if (q && q.target != this.view) {
        this.rz = 1e3;
        for (var m in this.N6) {
          var n = this.N6[m].V();
          if (m == "Crv") {
            var G = [],
              W = [];
            for (var y = 0; y < n.length; y++) {
              var k = n[y].v,
                T = k.Hrzn.v,
                b = k.Vrtc.v;
              W.push(T, b);
              G.push({ t: "long", v: T }, { t: "long", v: b });
            }
            var c = ["Crv", "CrvR", "CrvG", "CrvB"][this.Fw.V()];
            this.i1[c] = { t: "VlLs", v: G };
          } else this.i1[m] = { t: m == "Ex12" ? "doub" : "long", v: n };
        }
      }
      var a = this.view.lx().k3,
        f = 0;
      while (a * 2 <= 1) {
        a *= 2;
        f++;
      }
      if (this.rz <= f) return;
      this.rz = f;
      var U = this.a6o(f);
      this.UJ.q(U);
      this.view.q([{ Iu: this.Eu, data: this.In[0].buffer }]);
    };
    j.prototype.a6o = function (q) {
      console.log("---");
      var m = this._3[q * 2],
        n = this.vZ[q * 2],
        G = this.In[q * 2],
        W = this._3[q * 2 + 1],
        k = W.r,
        T = W.$;
      if (this.Zn) this.aqG(0, q);
      ch(m, k, T, n, this.i1);
      var b = Date.now();
      B.sL(n, 8, G);
      console.log(Date.now() - b, "integer conversion");
      b = Date.now();
      var f = B.OA(G, Math.max(1, Math.floor((k * T) / 2e5)));
      console.log(Date.now() - b, "histogram done");
      b = Date.now();
      if (q != 0) {
        var U = new Uint32Array(G.buffer),
          Z = new Uint32Array(this.In[0].buffer),
          h = this.Eu.r,
          u = this.Eu.$;
        for (var i = 0; i < u; i += 2)
          for (var x = 0; x < h; x += 2) {
            var X = i * h + x,
              $ = U[(i >>> q) * k + (x >>> q)];
            Z[X] = $;
            Z[X + 1] = $;
            Z[X + h] = $;
            Z[X + h + 1] = $;
          }
        console.log(Date.now() - b, "upscale");
        b = Date.now();
      }
      for (var W = 0; W < 2; W++)
        for (var $ = 0; $ < 4; $++) {
          var T = f[$],
            u = T.slice(0);
          for (var y = 1; y < T.length - 1; y++)
            T[y] = (u[y - 1] + u[y] + u[y + 1]) * 0.33333;
        }
      return f;
    };
    j.prototype.X3 = function (q, m) {
      this.aeX = q - 248;
      this.aKe = m;
      this.view.X3(this.aeX, this.aKe);
      this.a86.style.height = m - 200 - (this.Zn ? 30 : 0) + "px";
    };
    j.prototype.T = function () {
      this.Dm.T();
      for (var q in this.N6) this.N6[q].T();
      for (var q in this.nM) this.nM[q].T();
      var m = this.aaO;
      for (var y = 0; y < m.length; y++)
        this.a5Q[y].innerHTML =
          '\u2B9F <span style="font-size:1.1em; margin-left:6px;">' +
          g$.get(m[y][0]) +
          "</span>";
    };
    return j;
  })();
  gj.VaPo = function () {
    gj.call(this, "VaPo");
    this.l = -1;
    this.J1 = null;
    this.nT = !1;
    this.VL = null;
    this.JX = null;
    this.gl = null;
    this.Ki = null;
    this.HM = null;
    this.AO = null;
    this.aBo = null;
    this.Qm = null;
    this.aJT = null;
    this.w9 = null;
    this.oT = null;
    this.iy = null;
    this.Ua = [];
    this.vA = -1;
    this.J = null;
    this.Z = {
      hR: [
        [{ l: { id: 0, name: "Move", af: "tools/move" } }],
        [{ l: { id: 1, name: "Create Plane", af: "tools/pcrop" } }],
        [{ l: { id: 2, name: "Marquee", af: "tools/rselect" } }],
        [{ l: { id: 3, name: "Stamp", af: "tools/clone" } }],
        [{ l: { id: 4, name: "Brush", af: "tools/brush" } }],
        [{ l: { id: 5, name: "Transform", af: "tools/transform" } }],
        [{ l: { id: 6, name: "Hand", af: "tools/hand" } }],
        [{ l: { id: 7, name: "Zoom In", af: "zoomIn" } }],
        [{ l: { id: 8, name: "Zoom Out", af: "zoomOut" } }],
      ],
      keys: [gn.qj, gn.dV, gn.Sx, gn.ng, gn.xa, gn.a_, gn.jF, gn.AQ],
    };
    this.SX = new bt(this.Z, !1);
    this.SX.Q(_.E.c, this.Pc, this);
    this.fK = null;
    this.Eu = null;
    this.MC = null;
    this.a1i = null;
    this.nP = null;
    this.BD = null;
    var j = J.m("div", "flexrow"),
      n = 0;
    this.gj = j;
    this._.appendChild(j);
    j.appendChild(this.SX._);
    var q = J.m("div");
    j.appendChild(q);
    var top = J.m("div", "form");
    q.appendChild(top);
    J.F(top, "padding-left:8px; height:30px;");
    this.Uq = J.m("span");
    top.appendChild(this.Uq);
    this.cN = [
      [new k7([12, 80, 5], 1, 1e3), new kv([5, 2], null, null, !0)],
      [new k7([7, 6], 0, 30)],
      [
        new k7([12, 14], 1, 200),
        new k7([12, 17], 0, 100),
        new k7([12, 0], 0, 100),
        new av([12, 75]),
      ],
      [
        new k7([12, 14], 1, 200),
        new k7([12, 17], 0, 100),
        new k7([12, 0], 0, 100),
        new g1(),
      ],
      [new av("Flip"), new av("Flop")],
      [],
    ];
    var m = [
      100,
      !0,
      0,
      100,
      100,
      100,
      !1,
      100,
      100,
      100,
      JSON.parse(eu.PV.ek.slice(6)).v,
    ];
    this.gx = [];
    for (var y = 0; y < 6; y++) {
      var G = J.m("span"),
        W = this.cN[y];
      this.gx.push(G);
      for (var k = 0; k < W.length; k++) {
        var T = W[k];
        T.parent = this;
        T.q(m[n++]);
        if (T instanceof kv) T.Q("click", this.alF, this);
        else T.Q(_.E.n, this.ays, this);
        G.appendChild(T._);
      }
    }
    this.aiz = J.m("div");
    J.F(this.aiz, "display:inline-block;float:right; width:100px;");
    top.appendChild(this.aiz);
    this.view = new j7(!0);
    this.view.X3(100, 100);
    this.view.eP("auto");
    this.view.Q("mousedown", this.Q7, this);
    this.view.Q("mousemove", this.dU, this);
    this.view.Q("mouseup", this.IB, this);
    J.dJ(this.view.Bl, this.KK.bind(this));
    q.appendChild(this.view._);
  };
  gj.VaPo.prototype = new gj();
  gj.VaPo.prototype.JY = function () {
    return !0;
  };
  gj.VaPo.prototype.ol = function (j) {
    this.aiz.appendChild(j);
  };
  gj.VaPo.prototype.yp = function (j, q) {
    this.VL = j;
  };
  gj.VaPo.prototype.alF = function (j) {
    var q = this.VL;
    if (J.mC()) jc.afD(this.WW.bind(this));
    else if (q) {
      var m = q.kJ;
      if (m) {
        var n = m.H.P();
        n.x = n.y = 0;
        this.Rc(B.sL(m.buffer, 8), n);
      }
    }
  };
  gj.VaPo.prototype.ays = function (j) {
    if (j.target == this.cN[0][0]) {
      var q = this.qH(),
        m = j.target.V();
      for (var y = 0; y < this.J.length; y++)
        if (this.J[y].length != 0 && q[y]) q[y][0] = m;
      this.hQ(q);
    }
    if (this.l == 5) {
      this.fK = this.OJ();
      this.ip(!0);
    }
    this.ip();
  };
  gj.VaPo.prototype.uY = function (j) {
    var q = this.l,
      m = this.gl;
    if (q == 3 || q == 4) {
      var n = this.cN[q - 1],
        G = fc.vM(),
        W = G.Brsh.v;
      W.Dmtr.v.val = n[0].V();
      W.Hrdn.v.val = n[1].V();
      G = L.tt.s6(G, j);
      if (G) {
        W = G.Brsh.v;
        n[0].q(W.Dmtr.v.val);
        n[1].q(W.Hrdn.v.val);
      }
      this.Vn();
    }
    if (q == 1 && m && (j.M(gn.gv) || j.M(gn.N7))) {
      m.pop();
      m.pop();
      if (m.length == 0) m = this.gl = null;
      this.ip();
    }
    function k(a, y, h) {
      B.M4(a[y], a[0], h.MC, h.Eu);
      h.L3(a[0]);
    }
    this.JX = j;
    if (q < 6) this.view.uY(j);
    var T = j.M(gn.A8);
    if (T) {
      var b = this.vA,
        c = 0;
      if (j.M(gn.AQ)) {
        if (j.M(gn.X6)) c = 1;
        else c = -1;
      } else if (j.M(gn.by)) c = 1;
      if (c != 0 && q != 5) {
        console.log(this.vA, c, this.Ua);
        var a = this.Ua[this.vA],
          f = !1;
        if (a.length == 3 && c == -1) {
          k(a, 1, this);
          f = !0;
        }
        b += c;
        this.vA = Math.max(0, Math.min(this.Ua.length - 1, b));
        a = this.Ua[this.vA];
        if (a.length == 3 && c == 1) {
          k(a, 2, this);
          f = !0;
        }
        this.ip(f);
      }
      if (j.M(gn.qj)) this.alF();
      if (j.M(gn.l_)) {
        this.AO = null;
        this.ip();
      }
    } else {
      var U = this.Z.keys;
      for (var y = 0; y < U.length; y++) if (j.M(U[y])) this.yx(y);
    }
    if (j.M(gn.N7) || j.M(gn.gv)) {
      var Z = this.qH();
      Z = B.H8.a5G(Z, this.J);
      this.J = [];
      for (var y = 0; y < Z.length; y++) this.J[y] = [];
      this.hQ(Z);
      this.ip();
    }
  };
  gj.VaPo.prototype.WW = function (j) {
    if (j == "granted") jc.hH(this, this.Rc.bind(this));
  };
  gj.VaPo.prototype.Rc = function (j, q) {
    console.log(j, q);
    var m = this.qH();
    if (m.length == 0) {
      alert("Make a plane before pasting an image");
      return;
    }
    if (this.HM == null) this.HM = [0, 0];
    if (this.l == 5) this.yx(0);
    this.yx(5, { py: j, HA: q });
  };
  gj.VaPo.prototype.Pc = function (j) {
    if (j.data.R == _.Y.UK) {
      this.yx(j.data.l);
    }
  };
  gj.VaPo.prototype.api = function (j) {
    var q = this.view.VS(j),
      m = B.H8.Iy(this.qH(), this.J),
      n = 1e9,
      G = 0;
    for (var y = 0; y < m.length; y++) {
      var W = m[y][0],
        k = q.x - W[0],
        T = q.y - W[1],
        b = Math.sqrt(k * k + T * T);
      if (b < n) {
        n = b;
        G = y;
      }
    }
    if (n > (4 * J.IC()) / this.view.lx().k3) return null;
    return m[G];
  };
  gj.VaPo.prototype.KK = function (j) {
    var q = this.l,
      m = this.gl;
    if (q < 2 && !this.nT) {
      var n = (this.J1 = this.api(j)),
        G = this.qH(),
        W = "auto";
      if (q == 0 && B.H8.I1(G, n)) {
        var k = G[n[1]][1][n[2]],
          T = k[5 + { 1: 0, 5: 1, 7: 2, 3: 3 }[n[3]]],
          b = T[0],
          c = T[1];
        W = bn.aBE(b[1] - c[1], -b[0] + c[0]);
      }
      if (B.H8.a3x(G, n)) W = "crosshair";
      this.view.eP(W);
    }
    if (m) {
      var a = this.view.VS(j),
        f = m.slice(0);
      m[m.length - 2] = a.x;
      m[m.length - 1] = a.y;
      this.ip();
    }
    this.Vn(j);
    if (q == 5 && !this.nT && this.db) {
      var a = this.view.VS(j),
        G = this.qH(),
        U = B.H8.M7(G, a.x, a.y, this.R5());
      if (U) {
        var Z = new ea(U[2][0], U[2][1]),
          h = B.H8.gV(G, G[U[0]][1][U[1]], this.R5()),
          u = h[1],
          i = B.B.Ht(h[0], u),
          x = [u.x + u.r / 2, u.y + u.$ / 2];
        B.B.u(i, x);
        var X = a.x - x[0],
          $ = a.y - x[1],
          H = this.db.Xy(Z, this.view.lx().k3, null, null, Math.atan2(-$, -X));
        this.view.eP(H ? H : "default");
      }
    }
  };
  gj.VaPo.prototype.Vn = function (j) {
    var q = this.l,
      m = this.JX;
    if ((q == 3 || q == 4) && !this.nT) {
      var n = j ? this.view.VS(j) : this.Ec,
        G = this.qH();
      this.Ec = n;
      if (n == null) return;
      var W = B.H8.M7(G, n.x, n.y, this.R5());
      if (W) {
        if (q == 3 && this.iy && this.cN[2][3].V()) {
          var k = new ea(W[2][0], W[2][1]);
          this.oT = k.mN(this.iy);
          this.ip();
        }
        if (q == 3 && (this.oT == null || (m && (m.M(gn.O4) || m.M(gn.aj))))) {
          if (this.fK) {
            this.BD = null;
            this.L3(this.fK);
            this.ip(!0, this.fK);
          }
          return;
        }
        this.a00(W, this.fK);
      }
    }
  };
  gj.VaPo.prototype.R5 = function () {
    return [this.Eu.r / 2, this.Eu.$ / 2];
  };
  gj.VaPo.prototype.Q7 = function (j) {
    this.nT = !0;
    var q = this.l,
      m = this.gl,
      n = this.qH(),
      G = this.JX,
      W = (this.J1 = this.api(null)),
      k = this.view.VS(),
      T = B.H8.M7(n, k.x, k.y, this.R5()),
      b = T ? new ea(T[2][0], T[2][1]) : null;
    if (B.H8.a3x(n, W)) {
      var c = n[W[1]][1][W[2]];
      n.splice(W[1], 1);
      this.J.splice(W[1], 1);
      m = B.H8.aGx(c);
      var a = -1,
        k = W[0];
      for (var y = 0; y < 8; y += 2) {
        var f = m[y] - k[0],
          U = m[y + 1] - k[1];
        if (f * f + U * U < 1e-5) a = y;
      }
      a = (a + 2) & 7;
      m = this.gl = m.slice(a).concat(m.slice(0, a));
      this.hQ(n);
    } else if (B.H8.I1(n, W)) {
      if (q == 1 || (G && G.M(gn.A8))) {
        n = B.H8.aBN(n, W, this.R5());
        this.hQ(n);
        W[2] = n[W[1]][1].length - 1;
        W[3] = 8 + ((W[3] + 4) & 7);
        this.J[W[1]].push(W[2]);
        this.hQ(n, !0);
        this.yx(0);
      } else this.hQ(this.qH(n));
    } else if (q == 0) {
      var Z = [];
      for (var y = 0; y < n.length; y++) Z.push([]);
      if (T) {
        if (G && G.M(gn.X6)) Z = this.J;
        var h = Z[T[0]].indexOf(T[1]);
        if (h == -1) Z[T[0]].push(T[1]);
        else Z[T[0]].splice(h, 1);
      }
      this.J = Z;
      this.hQ(n, !0);
      this.ip();
    } else if (q == 2) {
      if (T) {
        var u = this.AO;
        if (u && u.QL(b)) {
          if (G)
            if (G.M(gn.O4) || G.M(gn.A8)) {
              this.yx(5);
              this.Q7(j);
              return;
            }
          this.aBo = new ea(b.x - u.x, b.y - u.y);
        } else {
          this.Ki = T[2].concat(T[2]);
          this.HM = T;
        }
      }
    } else if (q == 3 || q == 4) {
      if (q == 3) {
        if (G && (G.M(gn.O4) || G.M(gn.aj))) {
          if (T) {
            this.oT = b;
            this.aJT = b.P();
            this.iy = null;
            this.w9 = T;
            this.ip();
          } else alert("You must click into a plane");
          this.nT = !1;
          return;
        } else if (this.oT == null) {
          alert(g$.get([15, 7, 0]));
          this.nT = !1;
          return;
        } else if (T) {
          var i = (this.iy = b.mN(this.oT));
        }
      }
      if (T) {
        this.a00(T);
      }
    } else if (q == 5) {
      if (T) {
        var x = new ea(T[2][0], T[2][1]),
          X = this.db.oo({ I: this.view.lx() }, {}, G, x);
      }
    }
  };
  gj.VaPo.prototype.a00 = function (j, q) {
    var m = this.BD;
    if (m == null) this.BD = m = B.j(this.Eu.C() * 4);
    else m.fill(0);
    var n = this.l;
    this.HM = j;
    var G = this.cN[n - 1],
      W = B.azX.a2W(G[0].V(), G[1].V() / 100, 1),
      k = B.j(W[1].C() * 4);
    B.ln(W[0], k, 3);
    if (n == 4) {
      var T = B.MV.xH(G[3].V());
      B.nn(k, T.o / 255, T.i / 255, T.X / 255);
    }
    this.Qm = { asY: W[0], py: k, HA: W[1] };
    var b = (this.fK = this.jK(j[2], j[2])),
      c = q ? q.vd(b) : b;
    this.L3(c);
    this.ip(!0, c);
  };
  gj.VaPo.prototype.dU = function (j) {
    var q = this.J1,
      m = this.l,
      n = this.qH();
    if (m == 0 && B.H8.I1(n, q)) {
      n = B.H8.aI1(n, q, this.view.VS());
      this.hQ(n, !0);
      this.ip();
    }
    var G = this.aBo;
    if (m == 2 && this.nT && (this.Ki || G)) {
      var W = this.view.VS(),
        k = B.H8.M7(n, W.x, W.y, this.R5());
      if (k) {
        this.HM = k;
        if (G) {
          this.AO.x = k[2][0] - G.x;
          this.AO.y = k[2][1] - G.y;
        } else {
          this.Ki = this.Ki.slice(0, 2).concat(k[2]);
          this.AO = B.b.YU(this.Ki);
        }
        this.ip();
      }
    }
    if ((m == 3 || m == 4) && this.nT) {
      var W = this.view.VS(),
        k = B.H8.M7(n, W.x, W.y, this.R5());
      if (k) {
        if (m == 3) {
          var T = this.iy;
          this.oT = new ea(k[2][0] - T.x, k[2][1] - T.y);
        }
        var b = this.jK(this.HM[2], k[2]);
        this.fK = this.fK.vd(b);
        this.HM = k;
        this.L3(b);
        this.ip(!0, b);
      }
    }
    if (m == 5 && this.nT) {
      var W = this.view.VS(),
        k = B.H8.M7(n, W.x, W.y, this.R5(), this.HM);
      if (k) {
        var c = new ea(k[2][0], k[2][1]);
        this.db.C3({ I: this.view.lx() }, {}, this.JX, c);
        this.HM = k;
        var b = this.fK;
        if (b) this.L3(b);
        else b = new hk();
        this.fK = this.OJ(null, null, !0);
        this.ip(!0, b.vd(this.fK));
      }
    }
  };
  gj.VaPo.prototype.jK = function (j, q) {
    j = new ea(j[0], j[1]);
    q = new ea(q[0], q[1]);
    var m = Math.max(1e-5, ea.gw(j, q)),
      n = this.Qm.HA.r * 0.2,
      G = new hk();
    for (var W = 0; W < m; W += n) {
      var k = 1 - W / m,
        T = k * j.x + (1 - k) * q.x,
        b = k * j.y + (1 - k) * q.y,
        c = this.Qm.HA.P();
      c.x = Math.round(T - c.r / 2);
      c.y = Math.round(b - c.$ / 2);
      if (this.l == 3) {
        var a = this.iy;
        if (a == null) a = new ea(T, b).mN(this.oT);
        var f = (this.AO = c.P());
        f.x = Math.round(f.x - a.x);
        f.y = Math.round(f.y - a.y);
        var U = this.Qm.asY;
        this.Qm = this.ayU(this.w9);
        this.AO = null;
        B.w6(U, this.Qm.py);
        this.Qm.asY = U;
      }
      var Z = this.OJ(this.BD, c);
      G = G.vd(Z);
    }
    return G;
  };
  gj.VaPo.prototype.IB = function (j) {
    var q = this.J1;
    if (q && q[3] >= 8) {
      var m = B.H8.aBd(this.qH(), q, this.R5());
      this.hQ(m, !0);
      this.ip();
      alert("new plane added");
    }
    var n = this.l,
      G = this.gl;
    if (G || n == 1) {
      var W = this.view.VS();
      if (G == null) G = this.gl = [W.x, W.y];
      if (G.length == 8 && bn.Zx(G)) {
        var m = this.qH();
        m.push([100, [B.H8.ay0(G, this.R5())]]);
        this.J.push([0]);
        this.hQ(m, !0);
        G = this.gl = null;
        this.yx(0);
        this.ip();
      } else if (G.length < 8) {
        G.push(W.x, W.y);
        if (G.length == 8 && !bn.Zx(G)) {
          var k = G[0],
            T = G[1];
          G[0] = G[4];
          G[1] = G[5];
          G[4] = k;
          G[5] = T;
        }
      }
    }
    var b = this.Ki;
    if (n == 2 && b && b[0] == b[2] && b[1] == b[3]) {
      this.AO = null;
      this.ip();
    }
    if ((n == 3 || n == 4) && this.nT) {
      if (n == 3 && !this.cN[2][3].V() && this.aJT) {
        this.oT = this.aJT.P();
        this.ip();
      }
      this.hQ();
      this.BD = null;
    }
    if (!this.cN[2][3].V()) this.iy = null;
    this.nT = !1;
    this.aBo = null;
    this.Ki = null;
  };
  gj.VaPo.prototype.yx = function (j, q) {
    if (j == this.l) return;
    var m = this.fK,
      G = 6;
    if (this.l == 5) {
      this.hQ();
      this.L3(m);
      this.db = null;
      this.ip();
    }
    if (this.l == 3 || this.l == 4) {
      this.BD = null;
      if (m) this.L3(m);
      this.ip(!0, m);
    }
    if (j == 5) {
      if (q == null && this.AO == null) {
        alert("Select the area to be transformed");
        return;
      }
      this.a2G(q);
    }
    if (j > 1) {
      var n = this.qH();
      this.CB();
      this.hQ(n, !0);
      this.ip();
    }
    this.view.uY(j >= G ? j7.Ld(j - G) : new gn(!0));
    if (j < G) this.view.eP("auto");
    this.l = j;
    this.SX.yx(j);
    J.dI(this.Uq);
    var W = { 0: 0, 1: 0, 2: 1, 3: 2, 4: 3, 5: 4, 6: 5, 7: 5, 8: 5 }[j];
    this.Uq.appendChild(this.gx[W]);
  };
  gj.VaPo.prototype.qH = function () {
    var y = this.vA,
      j = this.Ua;
    while (j[y].length == 3) y--;
    var q = j[y];
    this.J = JSON.parse(q[1]);
    return JSON.parse(q[0]);
  };
  gj.VaPo.prototype.hQ = function (j, q) {
    if (j == null && this.fK == null) return;
    var m = this.Ua,
      n = this.vA,
      y = n;
    while (y >= 0 && m[y].length == 3) y--;
    if (q == null) this.vA = n = n + 1;
    if (j != null) m[q ? y : n] = [JSON.stringify(j), JSON.stringify(this.J)];
    else {
      var G = this.Eu,
        W = this.fK,
        k = B.j(W.C() * 4),
        T = B.j(W.C() * 4);
      m[n] = [W, k, T];
      B.M4(this.MC, G, k, W);
      if (this.BD) B.G.Jg("norm", this.BD, G, this.MC, G, G, this.ym());
      else this.OJ(this.MC);
      B.M4(this.MC, G, T, W);
      this.fK = null;
    }
    while (m.length != n + 1) m.pop();
  };
  gj.VaPo.prototype.ym = function () {
    return this.cN[this.l - 1][2].V() / 100;
  };
  gj.VaPo.prototype.CB = function (j, q) {
    if (j == null) j = this.qH();
    this.J = [];
    for (var y = 0; y < j.length; y++) {
      var m = [];
      this.J.push(m);
      if (q) for (var n = 0; n < j[y][1].length; n++) m.push(n);
    }
  };
  gj.VaPo.prototype.q = function (j, q, m, n, G, W) {
    var k = B.S(W[2].H8);
    this.vA = -1;
    this.CB(k);
    this.hQ(k);
    q = B.sL(q, 8);
    G = B.sL(G, 8);
    var T = B.j(n.C() * 4);
    B.M4(q, m, T, n);
    this.aC4 = new hk();
    this.Eu = n;
    this.a1i = G;
    this.MC = T;
    this.nP = G.slice(0);
    this.L3(n);
    this.ip(!0);
    this.view.H5();
    this.yx(0);
  };
  gj.VaPo.prototype.a2G = function (j) {
    this.Qm = j ? j : this.ayU();
    var q = B.b._c(this.Qm.HA).L;
    if (j) {
      var m = this.qH(),
        n = B.H8.gV(m, m[0][1][0], this.R5()),
        G = n[1],
        W = Math.min(G.r / j.HA.r, G.$ / j.HA.$) * 0.9;
      if (W < 1) B.b.u(q, new k$(W, 0, 0, W, 0, 0), q);
    }
    this.db = new bn(q, !0, !0);
    this.AO = null;
    this.fK = this.OJ();
    this.ip(!0);
  };
  gj.VaPo.prototype.ayU = function (j) {
    var q = this.Eu,
      m = B.b.mE(this.AO),
      n = this.qH(),
      G = B.j(m.C() * 4);
    if (j == null) j = this.HM;
    var W = n[j[0]][1],
      k = B.H8.pr(n[j[0]][1], j[1], m, this.R5());
    for (var T = 0; T < k.length; T++) {
      var b = W[k[T]],
        c = B.H8.gV(n, b, this.R5()),
        a = c[0],
        f = c[1],
        U = f.TM(m);
      if (U.jG()) continue;
      U = B.b.mE(U);
      var Z = B.j(U.C() * 4),
        h = B.B.Ht(a, f);
      h = B.B.J5([1 / q.r, 0, 0, 0, 1 / q.$, 0, 0, 0], h);
      h = B.B.BR(h);
      B.B.drawImage(h, this.nP, q.r, q.$, Z, U);
      B.M4(Z, U, G, m);
    }
    var u = this.cN[1][0].V(),
      i = Math.round(u * 1.4),
      x = m.P();
    x.Lh(-i, -i);
    var X = B.j(x.C());
    X.fill(255);
    var $ = B.j(m.C());
    B.sN(X, x, $, m);
    var H = $.slice(0);
    B.Zl.oY(H, m, u);
    B.Ih(G, $, 3);
    B.hV.TM($, H, H);
    B.ln(H, G, 3);
    return { py: G, HA: m };
  };
  gj.VaPo.prototype.L3 = function (j, q) {
    var m = this.Eu;
    B.M4(this.a1i, m, this.nP, m, j);
    B.G.Jg("norm", this.MC, m, this.nP, m, j, 1);
    if (this.BD) B.G.Jg("norm", this.BD, m, this.nP, m, j, this.ym());
  };
  gj.VaPo.prototype.OJ = function (j, q, m) {
    var n = this.Qm,
      G = n.HA,
      W = this.Eu,
      k,
      T = q ? B.b._c(q).L : this.db.Iy(),
      b = B.b.RD(T),
      k = B.B.Ht(T, G),
      c = this.cN[4],
      a = new k$();
    if (c[0].V()) {
      a.Sd = -1;
      a.Tt = 2 * G.x + G.r;
    }
    if (c[1].V()) {
      a.Jy = -1;
      a.BL = 2 * G.y + G.$;
    }
    k = B.B.J5(k, B.B.gb(a));
    function f(A, N) {
      A.beginPath();
      A.moveTo(N[0], N[1]);
      for (var y = 1; y < 4; y++) A.lineTo(N[y * 2], N[y * 2 + 1]);
      A.closePath();
    }
    var U = this.qH(),
      Z = B.H8.pr(U[this.HM[0]][1], this.HM[1], b, this.R5()),
      h = U[this.HM[0]][1],
      u = new hk();
    for (var i = 0; i < Z.length; i++) {
      var x = h[Z[i]],
        X = B.H8.gV(U, x, this.R5()),
        $ = X[0],
        H = X[1],
        C = H.TM(b);
      if (this.AO) C = C.TM(this.AO);
      if (C.jG()) continue;
      var l = B.B.Ht($, H),
        v = B.b._c(C).L;
      B.B.u(l, v);
      var K = T.slice(0);
      B.B.u(l, K);
      var S = B.b.YU(K).TM(B.b.YU(v)),
        o = S.r,
        V = S.$;
      if (S.jG()) continue;
      l = B.B.J5(B.B.J5(l, k), [G.r, 0, G.x, 0, G.$, G.y, 0, 0]);
      var P = B.j(S.C() * 4);
      B.B.drawImage(l, n.py, G.r, G.$, P, S, m);
      if (C.C() != b.C()) {
        var z = B.l4(o, V);
        z.save();
        z.clearRect(0, 0, o, V);
        z.translate(-S.x, -S.y);
        f(z, v);
        z.clip();
        f(z, K);
        z.fill();
        z.restore();
        var E = new Uint8Array(z.getImageData(0, 0, o, V).data.buffer);
        for (var y = 3; y < P.length; y += 4) if (E[y] < P[y]) P[y] = E[y];
      }
      B.G.Jg("norm", P, S, j ? j : this.nP, W, S, 1);
      u = u.vd(S);
    }
    return u;
  };
  gj.VaPo.prototype.V = function () {
    return B.S(this.qH());
  };
  gj.VaPo.prototype.aeA = function () {
    if (this.l == 5) this.yx(0);
    var j = new hk(),
      q = this.Ua;
    for (var y = 0; y <= this.vA; y++) if (q[y].length == 3) j = j.vd(q[y][0]);
    var m = B.j(j.C() * 4);
    B.M4(this.MC, this.Eu, m, j);
    return [m, j];
  };
  gj.VaPo.prototype.X3 = function (j, q) {
    this.SX.X3(j, q);
    this.view.X3(j - 40, q - 30);
  };
  gj.VaPo.prototype.T = function () {
    this.SX.T();
    for (var y = 0; y < this.cN.length; y++)
      for (var j = 0; j < this.cN[y].length; j++) this.cN[y][j].T();
  };
  gj.VaPo.prototype.ip = function (j, q) {
    var m = this.Eu,
      n = [],
      G = [],
      W = [],
      k = this.qH(),
      T = B.H8.Iy(k, this.J),
      b = 0,
      c = null,
      i = null,
      x = null,
      X = null;
    for (var y = 0; y < T.length; y++) W.push(T[y][0][0], T[y][0][1]);
    for (var y = 0; y < k.length; y++) {
      var a = this.J[y].length;
      b += a;
      if (a != 0) c = [y, this.J[y][0]];
    }
    var f = this.cN[0][0];
    f.yl(b != 0);
    if (b != 0) f.q(Math.round(k[c[0]][0]));
    this.cN[0][1].yl(b != 0);
    if (b == 1) {
      var U = k[c[0]][1];
    }
    var Z = [];
    if (this.AO && k[this.HM[0]])
      Z = B.H8.pr(k[this.HM[0]][1], this.HM[1], this.AO, this.R5());
    var h = [];
    if (this.db) {
      h = this.db.au6();
      h[4] = this.db.d$();
    }
    var u = [];
    if (this.db && k[this.HM[0]])
      u = B.H8.pr(
        k[this.HM[0]][1],
        this.HM[1],
        B.b.YU(this.db.Iy()),
        this.R5()
      );
    for (var $ = 0; $ < k.length; $++) {
      var H = k[$][0],
        U = k[$][1],
        C = this.J[$];
      for (var l = 0; l < U.length; l++) {
        var c = U[l],
          v = B.H8.gV(k, c, this.R5()),
          K = v[0],
          m = v[1],
          S = B.B.Ht(K, m);
        if (m.jG()) {
          if (x == null) x = { RC: [], L: [] };
          B.b.concat(x, { RC: ["M", "L", "L", "L", "Z"], L: K });
          continue;
        }
        var o = B.b._c(m),
          V = o.L,
          P = o.RC,
          z = this.oT;
        if (z && m.QL(z) && this.w9 && this.w9[0] == $) {
          i = [z.x, z.y];
          B.B.u(S, i);
        }
        if (Z.indexOf(l) != -1) {
          var E = this.AO.TM(m);
          if ($ == this.HM[0] && !E.jG()) {
            if (X == null) X = { L: [], RC: [] };
            var A = B.b._c(E);
            B.B.u(S, A.L);
            B.b.concat(X, A);
          }
        }
        if (u.indexOf(l) != -1 && $ == this.HM[0]) {
          var N = [];
          for (var y = 0; y < h.length; y++)
            if (m.QL(h[y])) N.push(h[y].x, h[y].y);
          if (N.length != 0) {
            B.B.u(S, N);
            W = W.concat(N);
          }
        }
        if (C && C.indexOf(l) != -1) {
          var Q = Math.ceil(m.x / H) * H,
            e = m.x + m.r,
            Y = Math.ceil(m.y / H) * H,
            d = m.y + m.$;
          for (var I = Q; I < e; I += H) {
            V.push(I, m.y, I, d);
            P.push("M", "L");
          }
          for (var O = Y; O < d; O += H) {
            V.push(m.x, O, e, O);
            P.push("M", "L");
          }
        }
        B.B.u(S, V);
        n = n.concat(P);
        G = G.concat(V);
      }
      if (i && this.l == 3) {
        var I = i[0],
          O = i[1],
          s = 10 / this.view.lx().k3;
        G.push(I - s, O, I + s, O);
        G.push(I, O - s, I, O + s);
        n.push("M", "L", "M", "L");
      }
    }
    var K = this.gl,
      m = this.Eu;
    if (K) {
      var p = ["M"];
      for (var y = 0; y < K.length - 2; y += 2) p.push("L");
      p.push("Z");
      var F = L.xC.kQ(K, m.r / 2, m.$ / 2);
      if (isNaN(F) || F == Infinity || F == -Infinity || !bn.Zx(K)) {
        if (x == null) x = { RC: [], L: [] };
        B.b.concat(x, { RC: p, L: K });
      } else {
        G = G.concat(K);
        n = n.concat(p);
      }
    }
    var g = { cT: { RC: n, L: G }, akT: x, a3p: X, a0: W, Gm: null };
    if (j) {
      if (q) {
        q = q.P();
        q.Lh(4, 4);
      }
      this.view.q([{ Iu: m, data: this.nP.buffer }], null, g, q);
    } else this.view.atV(g);
  };
  gj.blnc = function () {
    gj.call(this);
    var j = this._;
    this.Av = null;
    this.Tb = new f1(
      [12, 12],
      [
        [19, 6, 0],
        [19, 6, 1],
        [19, 6, 2],
      ]
    );
    this.Tb.Q(_.E.n, this.ip, this);
    j.appendChild(this.Tb._);
    this.ZE = [];
    for (var y = 0; y < 3; y++) {
      var q = new ho(["VAR0 - VAR1", eV.aCy[y], eV.wc[y]], -100, 100);
      q.Q(_.E.n, this.L0, this);
      this.ZE.push(q);
      j.appendChild(q._);
    }
    this.Qt = new av([13, 4]);
    this.Qt.Q(_.E.n, this.L0, this);
    j.appendChild(this.Qt._);
  };
  gj.blnc.prototype = new gj();
  gj.blnc.prototype.T = function () {
    this.Tb.T();
    for (var y = 0; y < 3; y++) this.ZE[y].T();
    this.Qt.T();
  };
  gj.blnc.prototype.q = function (j) {
    this.Av = B.S(j);
    this.ip();
  };
  gj.blnc.prototype.V = function (j) {
    var q = ["ShdL", "MdtL", "HghL"],
      m = this.Av[q[this.Tb.V()]].v;
    for (var y = 0; y < 3; y++) m[y].v = this.ZE[y].V();
    this.Av.PrsL.v = this.Qt.V();
    return B.S(this.Av);
  };
  gj.blnc.prototype.ip = function (j) {
    var q = ["ShdL", "MdtL", "HghL"],
      m = this.Av[q[this.Tb.V()]].v;
    for (var y = 0; y < 3; y++) this.ZE[y].q(m[y].v);
    this.Qt.q(this.Av.PrsL.v);
  };
  gj.brit = function () {
    gj.call(this, "brit");
    this.N3.push(new ho([12, 2], -150, 150, ""));
    this.N3.push(new ho([12, 3, 0], -100, 100, ""));
    this.N3.push(new av([12, 3, 1]));
    this.zw();
  };
  gj.brit.prototype = new gj();
  gj.curv = function () {
    gj.call(this);
    this.value = null;
    this.h3 = null;
    this.a = null;
    var j = this._;
    this.aE = new f1("Preset", ["basic", "advanced"]);
    this.aE.Q(_.E.n, this.aDS, this);
    j.appendChild(this.aE._);
    J.Ft(j);
    this.pz = new f1([12, 4], ["RGB", [13, 1, 1], [13, 1, 4], [13, 1, 5]]);
    this.pz.Q(_.E.n, this.FE, this);
    j.appendChild(this.pz._);
    this.vn = new f1(null, ["Spline", "Sketch"]);
    this.vn.Q(_.E.n, this.aDS, this);
    j.appendChild(this.vn._);
    this.ky = new kZ();
    this.ky.parent = this;
    this.ky.Q(_.E.n, this.k4, this);
    j.appendChild(this.ky._);
    J.Ft(j);
    this.SY = new i3();
    this.SY.Q(_.E.n, this.am, this);
    j.appendChild(this.SY._);
    this.qV = null;
    this.aFh = 0;
    this.aG5 = 0;
    J.Ft(j);
    this.cC = new bl(
      "Sample from image",
      gA.zs(["#000000", "#888888", "#ffffff", "-\u2195"]),
      !0,
      null,
      !0
    );
    this.cC.Q(_.E.n, this.FV, this);
    this.cC._.style.marginRight = "0";
    j.appendChild(this.cC._);
  };
  gj.curv.prototype = new gj();
  gj.curv.prototype.pL = function () {
    return this.SY.awF() < 128 ? 1 : 2;
  };
  gj.curv.prototype.yp = function (j, q) {
    if (q == fG.HN || q == fG.gP) {
      var m = j.bO,
        n = ["Default"];
      for (var y = 0; y < m.length; y++) n.push(m[y].presetFileName.v);
      n.push("Custom");
      this.aE.ti(n, [1, m.length, 1]);
      this.a = j;
    }
  };
  gj.curv.prototype.X3 = function (j, q) {
    this.SY.X3(j, q);
  };
  gj.curv.prototype.T = function () {
    this.pz.T();
    this.SY.T();
  };
  gj.curv.prototype.gC = function () {
    this.aE.q(this.a.bO.length + 1);
  };
  gj.curv.prototype.aDS = function (j) {
    if (j.target == this.aE) {
      var q = this.aE.V(),
        m = this.a.bO,
        n;
      if (q == 0) n = k0.i4("curv");
      else if (q - 1 < m.length) n = B.S(m[q - 1]);
      else return;
      this.q(n);
      this.L0();
      return;
    }
    this.gC();
    var G = fY.Lq(this.value, 0),
      W = G.length == 256 ? 1 : 0,
      k = this.vn.V();
    if (W == k) return;
    var n = k0.i4("curv");
    if (k == 1) {
      var T = [];
      for (var y = 0; y < 256; y++) T.push(y);
      fY.Cy(n, 0, T);
    }
    this.q(n);
    this.L0();
  };
  gj.curv.prototype.am = function () {
    this.gC();
    fY.Cy(this.value, this.pz.V(), this.SY.V());
    this.L0();
  };
  gj.curv.prototype.FE = function () {
    var j = this.pz.V(),
      q = fY.Lq,
      m = q(this.value, j),
      n;
    if (j == 0) n = [q(this.value, 1), q(this.value, 2), q(this.value, 3)];
    var G = m.length == 256 ? 1 : 0;
    this.vn.q(G);
    if (this.h3)
      this.SY.OU(
        this.h3[j],
        this.h3[4] * [1, 0.33, 0.33, 0.33][j],
        [
          "rgba(255,255,255,0.3)",
          "rgba(255,100,100,0.3)",
          "rgba(100,255,100,0.3)",
          "rgba(100,100,255,0.3)",
        ][j]
      );
    this.SY.q(m, null, n);
  };
  gj.curv.prototype.LG = function () {
    return !0;
  };
  gj.curv.prototype.oo = function (j, q, m, n, G) {
    var W = this.value;
    this.value = k0.i4("curv");
    this.L0();
    var k = L.KH.th(j, G, 1, null, !0),
      T = (this.qV = [(k >>> 16) & 255, (k >>> 8) & 255, k & 255]);
    this.aFh = G.y;
    this.q(W);
    this.L0();
  };
  gj.curv.prototype.C3 = function (j, q, m, n, G) {
    if (this.qV == null) return;
    if (this.cC.V().indexOf(!0) == 3) {
      var W = this.qV,
        k = this.value,
        T = this.pz.V(),
        b = fY.Lq(k, T),
        c,
        a = T == 0 ? Math.round((W[0] + W[1] + W[2]) / 3) : W[T - 1],
        f = -1;
      for (var y = 0; y < b.length; y++) if (b[y].v.Hrzn.v == a) f = y;
      if (f == -1) {
        c = B.S(b[0]);
        c.v.Hrzn.v = a;
        c.v.Vrtc.v = a;
        b.push(c);
        b.sort(function (U, Z) {
          return U.v.Hrzn.v - Z.v.Hrzn.v;
        });
        fY.Cy(k, T, b);
        f = b.indexOf(c);
      }
      c = b[f];
      c.v.Vrtc.v = Math.max(
        0,
        Math.min(255, Math.round(c.v.Hrzn.v + (this.aFh - G.y)))
      );
      fY.Cy(k, T, b);
      this.q(k);
      this.L0();
    }
  };
  gj.curv.prototype.H_ = function (j, q, m, n, G) {
    gj.a1D(this, j, G, "curv");
    this.gC();
    this.qV = null;
  };
  gj.curv.prototype.q = function (j) {
    this.value = j;
    this.FE();
  };
  gj.curv.prototype.OU = function (j) {
    this.h3 = j;
    this.FE();
  };
  gj.curv.prototype.V = function (j) {
    return B.S(this.value);
  };
  gj.curv.prototype.k4 = function () {
    var j = this.ky.V(),
      q = this.h3,
      m = this.value,
      n = B.ai8(j, q);
    for (var y = 0; y < 4; y++) {
      var G = n[y][0],
        W = n[y][1],
        k = n[y][2],
        T = [B.SD.Fn(G, 0, !0), B.SD.Fn(W, 255, !0)];
      if (k != null) T.splice(1, 0, B.SD.Fn(128, k, !0));
      fY.Cy(m, y, T);
    }
    this.FE();
    this.L0();
  };
  gj.expA = function () {
    gj.call(this, "expA");
    this.N3.push(new ho([12, 5], -20, 20, null, 2, !0));
    this.N3.push(new ho([12, 6], -0.5, 0.5, null, 2));
    this.N3.push(new ho([12, 7], 0.01, 9.99, null, 2, !0));
    this.zw();
  };
  gj.expA.prototype = new gj();
  gj.expA.prototype.iU = function (j, q) {
    q[0] = j.Exps.v;
    q[1] = j.Ofst ? j.Ofst.v : 0;
    q[2] = j.gammaCorrection ? j.gammaCorrection.v : 1;
  };
  gj.expA.prototype.MO = function (j, q) {
    j.Exps = { t: "doub", v: q[0] };
    j.Ofst = { t: "doub", v: q[1] };
    j.gammaCorrection = { t: "doub", v: q[2] };
  };
  gj.grdm = function () {
    gj.call(this, "grdm");
    this.N3.push(new iB(!0, null, !0));
    this.N3.push(new av([12, 23, 3]));
    this.N3.push(new av([12, 23, 0]));
    this.N3.push(
      new f1("Method", ["Perceptual", "Linear", "Classic", "Smooth", "Stripes"])
    );
    this.zw();
  };
  gj.grdm.prototype = new gj();
  gj.grdm.prototype.iU = function (j, q) {
    q[0] = j.Grad.v;
    q[1] = j.Dthr ? j.Dthr.v : !1;
    q[2] = j.Rvrs ? j.Rvrs.v : !1;
    q[3] = eu.MV.SS.indexOf(
      j.gs99 ? j.gs99.v.gradientInterpolationMethodType : "Gcls"
    );
  };
  gj.grdm.prototype.MO = function (j, q) {
    j.Grad.v = q[0];
    j.Dthr = { t: "bool", v: q[1] };
    j.Rvrs = { t: "bool", v: q[2] };
    j.gs99 = {
      t: "enum",
      v: { gradientInterpolationMethodType: eu.MV.SS[q[3]] },
    };
  };
  gj.grdm.prototype.yp = function (j, q) {
    this.N3[0].oz(j.UP, j.vH);
    if (q == fG.HN || q == fG.Ru || q == fG.WX) this.N3[0].j3(j.bu);
  };
  gj.selc = function () {
    gj.call(this);
    var j = this._;
    this.Yh = [];
    this.f_ = null;
    this.Tb = new f1(
      [12, 82],
      eV.Tr.concat([
        [13, 1, 8],
        [13, 1, 13],
        [13, 1, 10],
      ])
    );
    this.Tb.Q(_.E.n, this.tS, this);
    j.appendChild(this.Tb._);
    J.Ft(j);
    for (var y = 0; y < 4; y++) {
      var q = new ho(eV.aCy[y], -100, 100, "%");
      q.Q(_.E.n, this.tS, this);
      this.Yh.push(q);
      j.appendChild(q._);
    }
    this.uz = new av([13, 3]);
    j.appendChild(this.uz._);
    this.uz.Q(_.E.n, this.tS, this);
  };
  gj.selc.prototype = new gj();
  gj.selc.prototype.T = function () {
    this.Tb.T();
    this.uz.T();
    for (var y = 0; y < 4; y++) this.Yh[y].T();
  };
  gj.selc.prototype.q = function (j) {
    this.f_ = B.S(j);
    this.ip();
  };
  gj.selc.prototype.V = function (j) {
    return B.S(this.f_);
  };
  gj.selc.prototype.tS = function (j) {
    if (j.target != this.Tb) {
      var q = this.f_,
        m = [];
      for (var y = 0; y < 4; y++) m[y] = this.Yh[y].V();
      bh.Cy(q, this.Tb.V(), m);
      q.Mthd = { t: "enum", v: { CrcM: this.uz.V() ? "Absl" : "Rltv" } };
    }
    this.ip();
    this.L0();
  };
  gj.selc.prototype.ip = function () {
    var j = this.f_,
      q = bh.Lq(j, this.Tb.V());
    for (var y = 0; y < 4; y++) this.Yh[y].q(q[y]);
    this.uz.q(j.Mthd ? j.Mthd.v.CrcM == "Absl" : !1);
  };
  gj.blwh = function () {
    gj.call(this, "blwh");
    this.N3.push(new av([12, 11]));
    this.N3.push(new g1(!0));
    for (var y = 0; y < 6; y++) this.N3.push(new ho(eV.Tr[y], -200, 300));
    this.zw();
  };
  gj.blwh.prototype = new gj();
  gj.blwh.prototype.iU = function (j, q) {
    q[0] = j.useTint.v;
    q[1] = j.tintColor.v;
    var m = "Rd Yllw Grn Cyn Bl Mgnt".split(" ");
    for (var y = 0; y < 6; y++) q[2 + y] = j[m[y]].v;
  };
  gj.blwh.prototype.MO = function (j, q) {
    j.useTint.v = q[0];
    j.tintColor.v = q[1];
    var m = "Rd Yllw Grn Cyn Bl Mgnt".split(" ");
    for (var y = 0; y < 6; y++) j[m[y]].v = q[2 + y];
  };
  gj.hue2 = function () {
    gj.call(this);
    this.value = null;
    this.tw = null;
    this.pU = null;
    this.al$ = [
      [0, 0, 0],
      [0, 50, 0],
    ];
    var j = this._;
    this.cC = new bl(
      null,
      ["\u2194"],
      !0,
      ["Click and drag in image to change saturation"],
      !0
    );
    this.cC.Q(_.E.n, this.aFm, this);
    this.cC.Q(_.E.n, this.FV, this);
    j.appendChild(this.cC._);
    var q = (this.N3 = [
      new f1([12, 12], ["Master"].concat(eV.Tr)),
      new ho([12, 8], -180, 180),
      new ho([12, 9], -100, 100),
      new ho([12, 10], -100, 100),
      new av([12, 11]),
    ]);
    for (var y = 0; y < q.length; y++) {
      var m = q[y];
      m.Q(_.E.n, y == 0 ? this.FE : this.aHV, this);
      j.appendChild(m._);
    }
    this.Tb = q[0];
    this.aFr = q[1];
    this.Pj = q[2];
    this.a5L = q[3];
    this.ZO = q[4];
    this.uU = new bl(
      "Sample Hue",
      [
        '<img src="' +
          PIMG["tools/eyedropper"] +
          '" class="autoscale gsicon" />',
        "+",
        "-",
      ],
      !0,
      null,
      !0
    );
    this.uU.Q(_.E.n, this.aFm, this);
    this.uU.Q(_.E.n, this.FV, this);
    this.uU._.style.marginLeft = "20px";
    j.appendChild(this.uU._);
    this.a6c = J.m("div");
    j.appendChild(this.a6c);
    this.x4 = this.pf.bind(this);
    this.wZ = this.iu.bind(this);
    this.Bl = J.m("canvas");
    this.lB = this.Bl.getContext("2d");
    this.W3 = null;
    J.r$(this.Bl);
    J.Q0(this.Bl, 282, 18);
    j.appendChild(this.Bl);
    J.PD(this.Bl, this.TG.bind(this));
  };
  gj.hue2.prototype = new gj();
  gj.hue2.prototype.X3 = function (j, q) {
    J.Q0(this.Bl, Math.round(j), 18);
    if (this.value) this.FE();
  };
  gj.hue2.prototype.aFm = function (j) {
    var q = j.target.V().indexOf(!0);
    if (q == -1) return;
    if (j.target == this.cC) this.uU.q([!1, !1, !1]);
    else this.cC.q([!1, !1, !1]);
  };
  gj.hue2.prototype.TG = function (j) {
    if (this.Tb.V() == 0 || this.ZO.V()) return;
    var q = J.QR(j, this.Bl).x / (this.Bl.width / J.IC()),
      W = 1e6;
    function m(f, U, Z) {
      return (f < U && U < Z) || (Z < f && (f < U || U < Z));
    }
    var n = this.IA(),
      G = -1;
    for (var y = 0; y < 4; y++) {
      var k = Math.abs(q - (n[y] + y * 1e-5));
      if (k < W) {
        W = k;
        G = y;
      }
    }
    if (W > 0.025) {
      G = -1;
      var T = n[0],
        b = n[1],
        c = n[2],
        a = n[3];
      if (m(T, q, b)) G = 4;
      if (m(b, q, c)) G = 5;
      if (m(c, q, a)) G = 6;
    }
    if (G == -1) return;
    this.W3 = G;
    J.dJ(document.body, this.x4);
    J.sP(document.body, this.wZ);
  };
  gj.hue2.prototype.pf = function (j) {
    var q = J.QR(j, this.Bl).x / (this.Bl.width / J.IC()),
      m = this.IA(),
      n = this.W3;
    for (var y = 1; y < 4; y++)
      if (m[y] < m[y - 1]) {
        m[y] += 1;
      }
    if (n < 4) {
      var G = 1e6,
        W = 0;
      for (var y = -20; y < 20; y++) {
        var k = Math.abs(m[n] - (q + y));
        if (k < G) {
          G = k;
          W = y;
        }
      }
      q += W;
      m[n] = q;
      for (var y = n + 1; y < 4; y++)
        if (m[y] < m[y - 1]) {
          m[y] = m[y - 1];
        }
      for (var y = n - 1; y >= 0; y--)
        if (m[y] > m[y + 1]) {
          m[y] = m[y + 1];
        }
    } else {
      var T = q - (m[n - 4] + m[n - 3]) / 2;
      if (T < -0.5) T += 1;
      if (n == 4) {
        m[0] += T;
        m[1] += T;
        m[2] = Math.max(m[1], m[2]);
        m[3] = Math.max(m[1], m[3]);
      }
      if (n == 5) for (var y = 0; y < 4; y++) m[y] += T;
      if (n == 6) {
        m[2] += T;
        m[3] += T;
        m[0] = Math.min(m[0], m[2]);
        m[1] = Math.min(m[1], m[2]);
      }
    }
    for (var y = 1; y < 4; y++) if (m[y] < m[y - 1]) throw "e";
    this.a4m(m);
    this.FE();
    this.L0();
  };
  gj.hue2.prototype.iu = function (j) {
    J.BJ(document.body, this.x4);
    J.mW(document.body, this.wZ);
  };
  gj.hue2.prototype.T = function () {
    for (var y = 0; y < this.N3.length; y++) this.N3[y].T();
  };
  gj.hue2.prototype.aHV = function (j) {
    var q = (this.value.Clrz.v = this.ZO.V());
    if (q) this.Tb.q(0);
    if (j && j.target == this.ZO) {
      var m = q ? 1 : 0;
      this.al$[1 - m] = b$.Lq(this.value, 0);
      var n = this.al$[m];
      b$.Cy(this.value, 0, n);
      if (this.Tb.V() == 0) {
        this.aFr.q(n[0]);
        this.Pj.q(n[1]);
        this.a5L.q(n[2]);
      }
    }
    var G = this.Tb.V(),
      W = b$.Lq(this.value, G),
      n = G == 0 ? W : W.ZE;
    n[0] = this.aFr.V();
    var k = this.Pj.V();
    n[1] = q ? Math.max(0, k) : k;
    n[2] = this.a5L.V();
    b$.Cy(this.value, G, W);
    this.FE();
    this.L0();
  };
  gj.hue2.prototype.FE = function () {
    var j = this.Tb.V(),
      q = this.value.Clrz ? this.value.Clrz.v : !1;
    this.ZO.q(q);
    this.Tb.yl(!q);
    this.uU.yl(!q && j != 0);
    var m = b$.Lq(this.value, j),
      n = j == 0 ? m : m.ZE;
    this.aFr.q(n[0]);
    this.Pj.q(n[1]);
    this.a5L.q(n[2]);
    var G = this.Bl.width,
      W = this.Bl.height,
      k = this.lB;
    k.clearRect(0, 0, G, W);
    if (q || j == 0) {
      this.a6c.innerHTML = "";
      return;
    }
    var T = m.AK;
    this.a6c.innerHTML =
      T[0] +
      "\xB0 / " +
      T[1] +
      '\xB0<span style="float:right">' +
      T[2] +
      "\xB0 \\ " +
      T[3] +
      "\xB0</span>";
    var b = B.j(G * 4);
    gk.acj(b, 1, G, -1, 0.5);
    var c = new ImageData(new Uint8ClampedArray(b.buffer), G, 1),
      a = Math.round(W / 4);
    for (var y = 0; y < a; y++) k.putImageData(c, 0, y);
    function f(x, X, $) {
      k.fillStyle = $;
      var H = a * 2;
      if (x <= X) k.fillRect(x * G, H, (X - x) * G, a);
      else {
        k.fillRect(0, H, X * G, a);
        k.fillRect(x * G, H, (1 - x) * G, a);
      }
    }
    var U = this.IA();
    f(U[0], U[1], "#888888");
    f(U[1], U[2], "#cccccc");
    f(U[2], U[3], "#888888");
    k.fillStyle = "#ffffff";
    k.lineWidth = 1;
    k.beginPath();
    var Z = a + 0.5,
      h = 4 * a + 0.5;
    for (var y = 0; y < 4; y++) {
      var u = Math.floor(G * U[y]) + 0.5,
        i = (y < 2 ? -1 : 1) * a * (y == 1 || y == 2 ? 1 : 2);
      k.moveTo(u, Z);
      k.lineTo(u, h);
      k.lineTo(u + i, h);
      k.lineTo(u + i, a + a + 0.5);
      k.closePath();
    }
    k.fill();
    k.stroke();
  };
  gj.hue2.prototype.IA = function () {
    var j = this.Tb.V(),
      q = b$.Lq(this.value, j).AK;
    for (var y = 0; y < 4; y++) q[y] = (1000.5 + q[y] / 360) % 1;
    return q;
  };
  gj.hue2.prototype.a4m = function (j) {
    var q = this.Tb.V(),
      m = b$.Lq(this.value, q);
    for (var y = 0; y < 4; y++)
      m.AK[y] = Math.round(36e3 + (j[y] - 0.5) * 360) % 360;
    b$.Cy(this.value, q, m);
  };
  gj.hue2.prototype.LG = function () {
    return !0;
  };
  gj.hue2.prototype.alZ = function () {
    var j = this.cC.V().indexOf(!0),
      q = this.uU.V().indexOf(!0);
    return j != -1 ? j : q != -1 ? q + 1 : -1;
  };
  gj.hue2.prototype.oo = function (j, q, m, n, G) {
    var W = this.alZ();
    if (W == -1) return;
    var k = this.value;
    this.value = k0.i4("hue2");
    this.L0();
    var T = L.KH.th(j, G, 1, null, !0);
    this.q(k);
    var b = [(T >>> 16) & 255, (T >>> 8) & 255, T & 255],
      c = B.vE(b[0] / 255, b[1] / 255, b[2] / 255);
    if (W == 0) {
      this.Tb.q(1 + (Math.round(c.uu * 6) % 6));
    } else {
      var a = this.IA(),
        f = 0.5 + c.uu,
        U = 1 / 12,
        Z = a[1],
        h = a[2];
      if (h < Z) {
        h++;
        if (f < Z && f + 1 - h < Z - f) f++;
      }
      var u = Z <= f && f <= h;
      if (W == 1) {
        Z = f - U / 2;
        h = f + U / 2;
      } else if (W == 2 && !u) {
        Z = Math.min(f, Z);
        h = Math.max(f, h);
      } else if (W == 3 && u) {
        if (f - Z < h - f) Z = f;
        else h = f;
      }
      a = [Z - U, Z, h, h + U];
      this.a4m(a);
    }
    this.L0();
    this.tw = G.x;
    this.pU = this.Pj.V();
  };
  gj.hue2.prototype.C3 = function (j, q, m, n, G) {
    var W = this.alZ();
    if (W == -1) return;
    if (W == 0) {
      if (this.tw != null) {
        var k = G.x - this.tw;
        k = Math.max(-100, Math.min(100, this.pU + 0.5 * k));
        this.Pj.q(k);
        this.aHV();
      }
    }
  };
  gj.hue2.prototype.H_ = function (j, q, m, n, G) {
    this.tw = null;
  };
  gj.hue2.prototype.q = function (j) {
    this.value = B.S(j);
    var q = this.value.Clrz ? this.value.Clrz.v : !1;
    this.al$[q ? 1 : 0] = b$.Lq(this.value, 0);
    this.FE();
  };
  gj.hue2.prototype.V = function (j) {
    return B.S(this.value);
  };
  gj.levl = (function () {
    function j() {
      gj.call(this);
      this.value = null;
      this.h3 = null;
      this.Hm = [
        new ea(0, 0),
        new ea(0, 0),
        new ea(0, 0),
        new ea(0, 0),
        new ea(0, 0),
      ];
      this.xK = -1;
      this.aq_ = 0;
      this.x4 = this.pf.bind(this);
      this.wZ = this.iu.bind(this);
      var q = this._;
      this.pz = new f1([12, 4], ["RGB", [13, 1, 1], [13, 1, 4], [13, 1, 5]]);
      this.pz.Q(_.E.n, this.FE, this);
      q.appendChild(this.pz._);
      this.ky = new kZ();
      this.ky.parent = this;
      this.ky.Q(_.E.n, this.k4, this);
      q.appendChild(this.ky._);
      var m = J.m("div", "");
      q.appendChild(m);
      var n = J.m("div", "");
      q.appendChild(n);
      this.Bl = J.m("canvas");
      m.appendChild(this.Bl);
      this.lB = this.Bl.getContext("2d");
      this._v = new ea(256, 120);
      J.F(this.Bl, "display:block");
      J.r$(this.Bl);
      J.PD(this.Bl, this.TG.bind(this));
      this.bb = J.m("canvas", "");
      n.appendChild(this.bb);
      this.P3 = this.bb.getContext("2d");
      this.r1 = new ea(this._v.x, 40);
      J.F(this.bb, "display:block");
      J.r$(this.bb);
      J.PD(this.bb, this.aKW.bind(this));
      var G = (this.a6t = []);
      for (var y = 0; y < 5; y++) {
        var W = new bJ(null, null, 3);
        G.push(W);
        W.Q(_.E.n, this.a4B, this);
        (y < 2 || y == 4 ? m : n).appendChild(W._);
      }
      m.appendChild(G[1]._);
      this.cC = new bl(
        "Sample from image",
        gA.zs(["#000000", "#888888", "#ffffff"]),
        !0,
        null,
        !0
      );
      this.cC.Q(_.E.n, this.FV, this);
      q.appendChild(this.cC._);
      this.X3(250, 100);
    }
    j.prototype = new gj();
    j.prototype.pL = function () {
      return this.aq_ == 0 ? 1 : 2;
    };
    j.prototype.k4 = function () {
      var q = this.ky.V(),
        m = this.h3,
        n = this.value,
        G = B.ai8(q, m);
      for (var y = 0; y < 4; y++) {
        var W = G[y][0],
          k = G[y][1],
          T = G[y][2],
          b = [B.SD.Fn(W, 0, !0), B.SD.Fn(k, 255, !0)];
        if (T != null) b.splice(1, 0, B.SD.Fn(128, T, !0));
        var c = [
          ~~W,
          ~~k,
          0,
          255,
          T == null ? 100 : ~~(100 + (0.75 * 100 * (T - 128)) / 128),
        ];
        im.Cy(n, y, c);
      }
      this.FE();
      this.L0();
    };
    j.prototype.X3 = function (q, m) {
      q += 6;
      this._v.x = this.r1.x = q;
      J.Q0(this.Bl, q, this._v.y, this.lB);
      J.Q0(this.bb, q, this.r1.y, this.P3);
      var n = this.a6t;
      J.F(n[3]._, "margin-left: " + (q - 104) + "px");
      J.F(n[4]._, "margin: 0 " + (q / 2 - 74) + "px");
      if (this.value) this.FE();
    };
    j.prototype.T = function () {
      this.pz.T();
    };
    j.prototype.a4B = function (q) {
      var m = [];
      for (var y = 0; y < 5; y++) {
        var n = 255,
          G = 1;
        if (y == 4) {
          n = 999;
          G = 100;
        }
        var W = parseFloat(this.a6t[y].V());
        m[y] = Math.max(0, Math.min(n, W * G));
      }
      im.Cy(this.value, this.pz.V(), m);
      this.FE();
      this.L0();
    };
    j.prototype.FE = function (q) {
      var m = this._v.x,
        n = this._v.y,
        G = this.pz.V(),
        W = this.lB;
      W.clearRect(0, 0, m, n);
      W.fillStyle = "#cccccc";
      W.fillRect(8, 8, m - 16, n - 16 - 8);
      if (this.h3) {
        var k = this.h3[0].slice(0),
          h = 0;
        if (G == 0) {
          k.fill(0);
          var T = B.S(this.value);
          im.Cy(T, 0, [0, 255, 0, 255, 100]);
          var b = eV.R7("levl", T),
            c = [b.NH, b.lW, b.aM];
          for (var a = 0; a < 3; a++) {
            var f = this.h3[1 + a],
              U = c[a];
            for (var y = 0; y < 256; y++) k[~~(U[y] * 255)] += f[y];
          }
        }
        var Z = G == 0 ? k : this.h3[G];
        for (var y = 0; y < Z.length; y++) h += Z[y];
        W.fillStyle = "#333333";
        W.beginPath();
        W.moveTo(8, n - 16);
        for (var y = 0; y < 256; y++) {
          var u = (55 * Z[y]) / h;
          W.lineTo(8 + (y / 256) * (m - 16), Math.max(8, n - 16 - n * u));
        }
        W.lineTo(m - 8, n - 16);
        W.closePath();
        W.fill();
      }
      var i = im.Lq(this.value, G);
      for (var y = 0; y < 5; y++) this.a6t[y].q(i[y] / (y == 4 ? 100 : 1));
      this.Hm[0].Tu(8 + (i[0] / 255) * (m - 16), n - 14);
      this.Hm[1].Tu(8 + (i[1] / 255) * (m - 16), n - 14);
      var x = Math.log(i[4] / 100) / Math.log(9.99);
      x = 0.5 - x / 2;
      this.Hm[4].Tu(this.Hm[0].x + x * (this.Hm[1].x - this.Hm[0].x), n - 14);
      this.Bu(W, this.Hm[0], "#000000");
      this.Bu(W, this.Hm[1], "#ffffff");
      this.Bu(W, this.Hm[4], "#777777");
      var m = this.r1.x,
        n = this.r1.y;
      W = this.P3;
      W.clearRect(0, 0, m, n);
      var X = W.createLinearGradient(0, 0, m - 16, 0);
      X.addColorStop(0, "black");
      X.addColorStop(1, "white");
      W.fillStyle = X;
      W.fillRect(8, 8, m - 16, 16);
      this.Hm[2].Tu(8 + (i[2] / 255) * (m - 16), n - 14);
      this.Hm[3].Tu(8 + (i[3] / 255) * (m - 16), n - 14);
      this.Bu(W, this.Hm[2], "#000000");
      this.Bu(W, this.Hm[3], "#ffffff");
    };
    j.prototype.Bu = function (q, m, n) {
      q.fillStyle = n;
      q.fillRect(m.x - 5, m.y, 10, 10);
    };
    j.prototype.TG = function (q) {
      var m = J.QR(q, this.Bl),
        n = this.a3d([0, 1, 4], m);
      if (n != -1) this.xK = this.aq_ = n;
      this.aJn();
    };
    j.prototype.aKW = function (q) {
      var m = J.QR(q, this.bb),
        n = this.a3d([2, 3], m);
      if (n != -1) this.xK = n;
      this.aJn();
    };
    j.prototype.a3d = function (q, m) {
      var n = -1,
        G = 1e9;
      for (var y = 0; y < q.length; y++) {
        var W = Math.abs(this.Hm[q[y]].x - m.x);
        if (W < G) {
          G = W;
          n = q[y];
        }
      }
      return G < 16 ? n : -1;
    };
    j.prototype.aJn = function (q) {
      if (this.xK == -1) return;
      J.dJ(document.body, this.x4);
      J.sP(document.body, this.wZ);
    };
    j.prototype.pf = function (q) {
      var m = im.Lq(this.value, this.pz.V()),
        n = J.QR(q, this.xK == 2 && this.xK == 3 ? this.bb : this.Bl),
        G = (255 * (n.x - 8)) / (this._v.x - 16);
      G = Math.max(0, Math.min(255, G));
      if (this.xK == 0) G = Math.min(G, m[1] - 2);
      if (this.xK == 1) G = Math.max(G, m[0] + 2);
      if (this.xK != 4) m[this.xK] = Math.round(G);
      else {
        var W = (G - m[0]) / (m[1] - m[0]);
        W = 1 - 2 * W;
        W = Math.pow(9.99, W);
        m[4] = Math.min(999, Math.max(10, Math.round(W * 100)));
      }
      im.Cy(this.value, this.pz.V(), m);
      this.FE();
      this.L0();
    };
    j.prototype.iu = function (q) {
      J.BJ(document.body, this.x4);
      J.mW(document.body, this.wZ);
      this.xK = -1;
    };
    j.prototype.LG = function () {
      return !0;
    };
    j.prototype.H_ = function (q, m, n, G, W) {
      gj.a1D(this, q, W, "levl");
    };
    j.prototype.q = function (q) {
      this.value = q;
      this.FE();
    };
    j.prototype.OU = function (q) {
      this.h3 = q;
      this.FE();
    };
    j.prototype.V = function (q) {
      return B.S(this.value);
    };
    return j;
  })();
  gj.phfl = function () {
    gj.call(this, "phfl");
    this.N3.push(new g1());
    this.N3.push(new ho([12, 74], 0, 100, "%"));
    this.N3.push(new av([13, 4]));
    this.zw();
  };
  gj.phfl.prototype = new gj();
  gj.phfl.prototype.iU = function (j, q) {
    q[0] = j.Clr.v;
    q[1] = j.Dnst.v;
    q[2] = j.PrsL.v;
  };
  gj.phfl.prototype.MO = function (j, q) {
    var m = B.MV.xH(q[0]),
      n = j.Clr.v,
      G = B.fa(m.o, m.i, m.X);
    n.Lmnc.v = G.ji;
    n.A.v = G.Sd;
    n.B.v = G.X;
    j.Dnst.v = q[1];
    j.PrsL.v = q[2];
  };
  gj.vibA = function () {
    gj.call(this, "vibA");
    this.N3.push(new ho([12, 13], -100, 100, null));
    this.N3.push(new ho([12, 9], -100, 100, null));
    this.zw();
  };
  gj.vibA.prototype = new gj();
  gj.vibA.prototype.iU = function (j, q) {
    q[0] = j.vibrance ? j.vibrance.v : 0;
    q[1] = j.Strt ? j.Strt.v : 0;
  };
  gj.vibA.prototype.MO = function (j, q) {
    j.vibrance.v = q[0];
    j.Strt.v = q[1];
  };
  gj.thrs = function () {
    gj.call(this, "thrs");
    this.N3.push(new ho([4, 13], 1, 255, null));
    this.zw();
  };
  gj.thrs.prototype = new gj();
  gj.thrs.prototype.iU = function (j, q) {
    q[0] = j.Lvl.v;
  };
  gj.thrs.prototype.MO = function (j, q) {
    j.Lvl.v = q[0];
  };
  gj.mixr = function () {
    gj.call(this);
    var j = this._;
    this.Yh = [];
    this.f_ = null;
    this.Tb = new f1(
      [12, 4],
      [
        [13, 1, 1],
        [13, 1, 4],
        [13, 1, 5],
      ]
    );
    this.a0e = !1;
    this.Tb.Q(_.E.n, this.tS, this);
    j.appendChild(this.Tb._);
    J.Ft(j);
    this.f0 = new av([12, 60]);
    j.appendChild(this.f0._);
    this.f0.Q(_.E.n, this.tS, this);
    for (var y = 0; y < 4; y++) {
      var q = new ho(
        [
          [13, 1, 1],
          [13, 1, 4],
          [13, 1, 5],
          [13, 2],
        ][y],
        -200,
        200,
        "%"
      );
      q.Q(_.E.n, this.tS, this);
      this.Yh.push(q);
      j.appendChild(q._);
    }
  };
  gj.mixr.prototype = new gj();
  gj.mixr.prototype.T = function () {
    this.Tb.T();
    this.f0.T();
    for (var y = 0; y < 4; y++) this.Yh[y].T();
  };
  gj.mixr.prototype.q = function (j) {
    this.f_ = B.S(j);
    this.ip();
  };
  gj.mixr.prototype.V = function (j) {
    return B.S(this.f_);
  };
  gj.mixr.prototype.tS = function (j) {
    if (j.target != this.Tb) {
      var q = eV.Vm(this.f_);
      if (j.target == this.f0) {
        q.f0 = this.f0.V();
        if (q.f0)
          q.K = [40, 40, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
        else
          q.K = [
            100, 0, 0, 0, 0, 0, 100, 0, 0, 0, 0, 0, 100, 0, 0, 0, 0, 0, 0, 0,
          ];
      } else {
        var m = (q.f0 ? 0 : this.Tb.V()) * 5,
          y = this.Yh.indexOf(j.target);
        q.K[m + (y < 3 ? y : 4)] = j.target.V();
      }
      this.f_ = eV.CI(q);
    }
    this.ip();
    this.L0();
  };
  gj.mixr.prototype.ip = function () {
    var j = eV.Vm(this.f_),
      q = this.Tb.V();
    if (j.f0 != this.a0e) {
      this.Tb.ti(j.f0 ? [[13, 1, 7]] : eV.wc);
      this.Tb.q(q);
    }
    this.a0e = j.f0;
    this.f0.q(j.f0);
    var m = (j.f0 ? 0 : q) * 5;
    for (var y = 0; y < 4; y++) this.Yh[y].q(j.K[m + (y < 3 ? y : 4)]);
  };
  gj.post = function () {
    gj.call(this, "post");
    this.N3.push(new ho([4, 1], 2, 255, null));
    this.zw();
  };
  gj.post.prototype = new gj();
  gj.post.prototype.iU = function (j, q) {
    q[0] = j.Lvls.v;
  };
  gj.post.prototype.MO = function (j, q) {
    j.Lvls.v = q[0];
  };
  gj.clrL = function () {
    gj.call(this, "clrL");
    this.N3.push(new iZ("LUTs"));
    this.zw();
  };
  gj.clrL.prototype = new gj();
  gj.clrL.prototype.iU = function (j, q) {
    q[0] = j;
  };
  gj.clrL.prototype.MO = function (j, q) {
    var m = q[0];
    for (var n in m) j[n] = m[n];
  };
  gj.clrL.prototype.yp = function (j, q) {
    if (q == fG.HN || q == fG.Hd) this.N3[0].j3(j.aic);
  };
  gj.rplc = function () {
    gj.call(this, "rplc");
    this.N3.push(new ho([12, 92], 0, 200));
    this.N3.push(new g1());
    this.N3.push(new ho([12, 8], -180, 180));
    this.N3.push(new ho([12, 9], -100, 100));
    this.N3.push(new ho([12, 10], -100, 100));
    this.zw();
  };
  gj.rplc.prototype = new gj();
  gj.rplc.prototype.iU = function (j, q) {
    q[0] = j.Fzns.v;
    q[1] = j.Mxm.v;
    q[2] = j.H.v;
    q[3] = j.Strt.v;
    q[4] = j.Lght.v;
  };
  gj.rplc.prototype.MO = function (j, q) {
    function m(G, W) {
      W.Lmnc.v = G.ji;
      W.A.v = G.Sd;
      W.B.v = G.X;
    }
    j.Fzns.v = q[0];
    j.H.v = q[2];
    j.Strt.v = q[3];
    j.Lght.v = q[4];
    var n = B.MV.xH(q[1]),
      G = B.fa(n.o, n.i, n.X);
    m(G, j.Mnm.v);
    m(G, j.Mxm.v);
  };
  gj.fade = function () {
    gj.call(this, "fade");
    this.N3.push(new ho([12, 0], 0, 100, "%"));
    this.N3.push(new f1([12, 19, 0], kJ.nb, kJ.hb));
    this.zw();
  };
  gj.fade.prototype = new gj();
  gj.fade.prototype.iU = function (j, q) {
    q[0] = j.Opct.v.val;
    q[1] = kJ.Tg.indexOf(j.Md.v.BlnM);
  };
  gj.fade.prototype.MO = function (j, q) {
    j.Opct.v.val = q[0];
    j.Md.v.BlnM = kJ.Tg[q[1]];
  };
  gj.aply = (function () {
    var j = kJ.Tg.concat(["Add", "Sbtr"]);
    j.splice(21, 1);
    var q = kJ.nb.concat([
      [15, 10, 28],
      [15, 10, 21],
    ]);
    q.splice(21, 1);
    var m = kJ.hb.slice(0);
    m[4]--;
    function n() {
      gj.call(this, "aply");
      this.N3.push(new f1([0, 3], []));
      this.N3.push(
        new f1([12, 4], ["RGB"].concat(eV.wc).concat(["Transparency"]))
      );
      this.N3.push(new av([4, 11]));
      this.N3.push(new f1([12, 19, 0], q, m));
      this.N3.push(new ho([12, 0], 0, 100, "%"));
      this.N3.push(new k7([12, 38], 1, 2, null, 2));
      this.N3.push(new k7([12, 6], -255, 255));
      this.N3.push(new av([13, 5]));
      this.zw([2]);
      this.aeQ = null;
    }
    n.prototype = new gj();
    n.prototype.iU = function (G, W, k) {
      if (k) {
        var T = k[2].U,
          b = (this.aeQ = []);
        for (var y = 0; y < T.length; y++) {
          var c = T[y].getName();
          b.push(c.length < 30 ? c : c.slice(0, 27) + "...");
        }
        b.reverse();
        this.N3[0].ti([[5, 7]].concat(b), [1, b.length]);
      } else var b = this.aeQ;
      G = G.With.v;
      var a = G.T.v;
      W[0] = a[1].t == "name" ? 1 + b.indexOf(a[1].v.val) : 0;
      W[1] = ["RGB", "Rd", "Grn", "Bl", "Trsp"].indexOf(a[0].v.enum);
      W[2] = G.Invr.v;
      var f = G.Clcl.v.Clcn;
      W[3] = j.indexOf(f);
      W[4] = G.Opct.v.val;
      W[5] = G.Scl.v;
      W[6] = G.Ofst.v;
      W[7] = G.PrsT.v;
    };
    n.prototype.MO = function (G, W) {
      G = G.With.v;
      var k = G.T.v;
      if (W[0] == 0)
        k[1] = {
          t: "Enmr",
          v: { classID: "Lyr", typeID: "Ordn", enum: "Mrgd" },
        };
      else k[1] = { t: "name", v: { classID: "Lyr", val: this.aeQ[W[0] - 1] } };
      k[0].v.enum = ["RGB", "Rd", "Grn", "Bl", "Trsp"][W[1]];
      G.Invr.v = W[2];
      var T = (G.Clcl.v.Clcn = j[W[3]]);
      G.Opct.v.val = W[4];
      G.Scl.v = W[5];
      G.Ofst.v = W[6];
      G.PrsT.v = W[7];
      var b = T == "Add" || T == "Sbtr";
      this.N3[5].yl(b);
      this.N3[6].yl(b);
    };
    return n;
  })();
  gj.matc = (function () {
    var j,
      q,
      m = 0;
    function n() {
      gj.call(this, "matc");
      this.N3.push(new av("Apply only to a selection"));
      this.N3.push(new ho("Luminance", 1, 200));
      this.N3.push(new ho("Color Intensity", 1, 200));
      this.N3.push(new ho([2, 11], 0, 100, "%"));
      this.N3.push(new av("Neutralize"));
      this.N3.push(new av("Use a selection of the source"));
      this.N3.push(new av("Use a selection of the target"));
      this.N3.push(new f1([12, 70], []));
      this.N3.push(new f1([0, 3], []));
      this.zw([4]);
    }
    function G(W, k) {
      W.N3[8].ti([[5, 7]].concat(k), [1, k.length]);
    }
    n.prototype = new gj();
    n.prototype.iU = function (W, k, T) {
      m = 0;
      k[0] = W.fsel ? W.fsel.v : !1;
      k[1] = W.Lght.v;
      k[2] = W.ClrR.v;
      k[3] = W.Fade.v;
      k[4] = W.neutralizeColor ? W.neutralizeColor.v : !1;
      k[5] = W.selectedSourceAreas ? W.selectedSourceAreas.v : !1;
      k[6] = W.SlcA ? W.SlcA.v : !1;
      k[7] = k[8] = 0;
      var b = W.Srce;
      if (b) b = b.v;
      if (T) {
        j = [];
        q = [];
        var c = T[2],
          a = T[3];
        for (var y = 0; y < a.length; y++) {
          var f = a[y];
          j.push(f.name);
          var U = f.U,
            Z = [];
          q.push(Z);
          for (var h = 0; h < U.length; h++) Z.push(U[h].getName());
          Z.reverse();
        }
        this.N3[7].ti([[13, 1, 0]].concat(j), [1, j.length]);
        var u = a.indexOf(c);
        if (b) u = j.indexOf(b[1].v.val);
        G(this, q[u]);
      }
      if (b) {
        var i = j.indexOf(b[1].v.val);
        k[7] = m = 1 + i;
        if (b[0].t == "name") k[8] = 1 + q[i].indexOf(b[0].v.val);
      }
    };
    n.prototype.MO = function (W, k) {
      W.fsel = { t: "bool", v: k[0] };
      W.Lght.v = k[1];
      W.ClrR.v = k[2];
      W.Fade.v = k[3];
      W.neutralizeColor = { t: "bool", v: k[4] };
      W.selectedSourceAreas = { t: "bool", v: k[5] };
      W.SlcA = { t: "bool", v: k[6] };
      if (k[7] == 0) {
        W.noReference = { t: "bool", v: !0 };
        delete W.Srce;
      } else {
        if (k[7] != m) {
          m = k[7];
          G(this, q[k[7] - 1]);
        }
        delete W.noReference;
        var T = {
            t: "Enmr",
            v: { classID: "Lyr", typeID: "Ordn", enum: "Mrgd" },
          },
          b = q[k[7] - 1];
        if (k[8] != 0)
          T = { t: "name", v: { classID: "Lyr", val: b[k[8] - 1] } };
        W.Srce = {
          t: "obj ",
          v: [T, { t: "name", v: { classID: "Dcmn", val: j[k[7] - 1] } }],
        };
      }
    };
    return n;
  })();
  function g7(j, q) {
    kV.call(this);
    if (j == null) return;
    this.id = q;
    this.KM = j;
    this.adW = null;
    this._ = J.m("div", "window " + q);
    this.aHf = null;
    this.lM = J.m("div", "whead");
    this.avI = J.m("span", "wname");
    this.lM.appendChild(this.avI);
    this.a2T = !1;
    this._.appendChild(this.lM);
    this.hd = this.aKP.bind(this);
    this.dn = this.aCB.bind(this);
    this.$g = this.aam.bind(this);
    J.r$(this.lM);
    J.PD(this.lM, this.hd);
    this.aLn = J.m("span", "cross gsicon");
    this.lM.appendChild(this.aLn);
    g7.prototype.T.call(this);
    J.sP(this.aLn, this.aM0.bind(this));
    this.body = J.m("div", "body");
    this._.appendChild(this.body);
  }
  g7.prototype = new kV();
  g7.prototype.bx = function () {
    return !1;
  };
  g7.prototype.LG = function () {
    return !1;
  };
  g7.prototype.T = function () {
    if (this.KM == null) return;
    this.avI.textContent = g$.get(this.KM);
  };
  g7.prototype.oo = function (j, q, m, n, G) {};
  g7.prototype.DC = function (j, q, m, n, G) {};
  g7.prototype.C3 = function (j, q, m, n, G) {};
  g7.prototype.H_ = function (j, q, m, n, G) {};
  g7.prototype.FO = function (j, q, m, n, G) {};
  g7.prototype.uY = function (j, q, m, n) {
    if (n.M(gn.FP) && this.GP) this.GP();
    if (n.M(gn.A8) && !this.oa(-1)) {
      var G = new fd(_.E.w);
      G.XE = !0;
      L.Lr.aDD(n, G);
      if (G.data) q.k(G);
    }
  };
  g7.prototype.oa = function (j) {
    return !1;
  };
  g7.prototype._j = function (j, q) {
    return !0;
  };
  g7.prototype.Wz = function (j, q, m, n) {};
  g7.prototype.yp = function (j, q) {};
  g7.prototype.lu = function (j, q) {
    return null;
  };
  g7.prototype.arI = function (j) {
    return this.aHf;
  };
  g7.prototype.X3 = function () {};
  g7.prototype.close = function () {
    this.yb();
    this.k(new fd(_.E.bg));
  };
  g7.prototype.aKP = function (j) {
    if (j.target == this.aLn) return;
    this.adW = J.QR(j, this._);
    J.dJ(window, this.dn);
    J.sP(window, this.$g);
  };
  g7.prototype.aCB = function (j) {
    var q = this._.parentNode,
      m = J.QR(j, q);
    m.x = Math.min(m.x, window.innerWidth);
    m.y = Math.min(m.y, window.innerHeight);
    var n = Math.round(m.x - this.adW.x),
      G =
        q.offsetTop +
        Math.max(
          0,
          Math.min(window.innerHeight - 36, Math.round(m.y - this.adW.y))
        );
    this.aHf = new ea(n, G);
    this._.style.left = n + "px";
    this._.style.top = G + "px";
  };
  g7.prototype.aam = function (j) {
    J.BJ(window, this.dn);
    J.mW(window, this.$g);
  };
  g7.prototype.aM0 = function (j) {
    if (this.a2T) {
      this.GP();
      return;
    }
    this.close();
    this.k(new fd("closebtn"));
  };
  g7.prototype.yb = function () {};
  function kl() {
    g7.call(this, "About Photopea", "aboutpp");
    var j = this.body,
      q = (this.a7c = J.m("img"));
    j.appendChild(q);
    J.F(this.body, "margin:0; padding:0");
    var m = (this.gx = J.m("div"));
    m.innerHTML = kl.v$;
    j.appendChild(m);
    var n = (this.pa = J.m("span"));
    n.innerHTML =
      '<big style="text-shadow: 2px 2px 3px #000000;">Ivan holding Photopea in Prague</big>';
    this.body.appendChild(n);
  }
  kl.prototype = new g7();
  kl.prototype.lu = function (j, q) {
    return new ea(0, 0);
  };
  kl.prototype.X3 = function (j, q) {
    var m = (j + q - 42 - 42) / 110,
      n,
      G,
      W;
    m = Math.sqrt((j - 42) * (q - 42)) / 50;
    if (j > q) {
      J._g(this.body, "flexrow");
      n =
        "width:" +
        j / 2 +
        "px; height:" +
        q +
        "px; display:block; object-fit:cover;";
      G =
        "width:" +
        (j / 2 - 42) +
        "px; height:" +
        (q - 42) +
        "px; padding:20px; font-size:" +
        m +
        "px;";
      W = "position:absolute;  bottom:10px; right:" + (j / 2 + 10) + "px";
    } else {
      if (j * 1.5 > q) m *= 0.9;
      J.XZ(this.body, "flexrow");
      n =
        "width:" +
        j +
        "px; height:" +
        q / 2 +
        "px; display:block; object-fit:cover;";
      G =
        "width:" +
        (j - 42) +
        "px; height:" +
        (q / 2 - 42) +
        "px; padding:20px; font-size:" +
        m +
        "px;";
      W = "position:absolute;  bottom:" + (q / 2 + 10) + "px; right:10px";
    }
    J.F(this.a7c, n);
    J.F(this.gx, G);
    J.F(this.pa, W);
  };
  kl.prototype.T = function () {};
  kl.prototype.Wz = function (j, q, m, n) {
    this.a7c.setAttribute("src", "promo/ivan_pp.webp");
  };
  kl.v$ =
    '\t<h1>Hi There!</h1>\t<p>My name is <b>Ivan Kutskir</b> and I\'m the creator of Photopea.</p>\t<p>I\'m a 33-year-old computer programmer. I was born in Ukraine, but I live in the Czech Republic most of my life (in <b>Prague</b> since 2009).</p>\t<p>I started developing Photopea back in 2012. I intended to call it <b>Photo Hammer</b>, \tbut I didn\'t register the .com domain right away, and when I tried to do so six months later, it was already taken.</p>\t\t<p>My friends and my family did not know about Photopea during the first four years of development.\tI was spending a lot of time building it, without making any money or learning new skills. So nothing to be proud of, \tbut the project was fun and I enjoyed working on it.\t</p>\t<p>\tNow, it\'s heartwarming to know that millions around the world use Photopea as their creative medium. \tTo this day I work on Photopea, driven by the positive impact of my creation.\t</p>\t\t<!--<p>You can not be completely sure if something is a good or a bad idea, until you actually try to do it.</p>-->\t\t<p style="text-align:right;"><i><big>Ivan Kutskir</big><br/>support@photopea.com</i><br/>\t<a style="color:inherit;" target="_blank" href="https://twitter.com/ivankutskir">Twitter</a> | \t<a style="color:inherit;" target="_blank" href="https://instagram.com/ivankutskir">Instagram</a></p>\t';
  function e9() {
    g7.call(this, "Are you blocking ads?", "bnotify");
    var j = this.body,
      q = 'style="color:inherit" target="_blank"',
      m =
        "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADkAAAA6CAMAAAA9UgEZAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAI1QTFRF4eHhR0dHk5OTUlJSoqKio6OjpKSkqqqq2dnZVFRUVlZWdHR029vbxcXFWFhYYmJizs7OaGhogoKCsbGxTExMpaWlXl5ecXFxSUlJfn5+uLi4iYmJmJiYd3d3v7+/Tk5OjY2N0tLSZWVleXl5oaGhaWlpWlpaT09Pf39/nZ2dra2tXFxcnJycYGBga2trbtjItQAAAQtJREFUeJzt1scWgkAMBVAj0pEm2HvF+v+fJwF0lUyElZzD2z7vGRjCYK/XpUV5+ADOsgGcQZFVbWhClX5dqX3kxqoH1/DN6IefW5kDivixx0AvUDlMwNCtBAG2tNzLMqIlbqfbZ+Pmtc1Lnd+/QV5rnTwPm0rFmOqSvISMNLDckZV5KOiJkWnRjlOyHI6xXPNrYiZkGyZ5FaslHMl6kTdPQdK3g8dPQsvBR9I9yqkg6R6v9i5cLfmShti4tNRVO1Q+FWaKFE+lmgSHhtUkwIw4xarDec5IXDO5keNXSvZrYKgn3udW/MszoT3Sbvx1iEDMi5ZLWV6ZOxG/vHtuD6zYVzknq/lno0sXIW9imwujYrBo1QAAAABJRU5ErkJggg==";
    j.style.width = "540px";
    var n =
      "<h2>It seems like you are blocking our ads</h2>" +
      "<p>Please, let us show you ads. Photopea would not exist if everyone blocked ads :(</p>" +
      "<p>Or get <a " +
      q +
      ' href="//www.photopea.com/promo/no_ads.png">90 days ad-free</a> for <b>$15</b> (one-time payment) - press <b>Account</b> at the top!</p>' +
      "<p>Are you not aware of blocking ads? Read <a " +
      q +
      ' href="//www.photopea.com/tuts/photopea-says-i-am-blocking-ads-but-i-am-not/">this article</a>! :)' +
      ' This button: <img style="width:20px; vertical-align:middle;" src="' +
      m +
      '" /> will show you your extensions, which can modify Photopea (potential ad-blockers).</p>' +
      "<a " +
      q +
      ' href="img/exts.png"><img style="width:100%" src="img/exts.png" /></a>';
    j.innerHTML = n;
  }
  e9.prototype = new g7();
  e9.prototype.X3 = function (j, q) {
    this.body.style.width = Math.min(540, j - 24) + "px";
  };
  function eE() {
    g7.call(this, [0, 13, 0], "account");
    this.IN = J.m("div", "form scrollable");
    this.body.appendChild(this.IN);
    this.body.style.padding = "0";
    this.e9 = [
      new eE.jT(),
      new eE.Xv("::" + lw.sX("privacy.html")),
      new eE.Xv(eE.ayj),
    ];
    for (var y = 0; y < this.e9.length; y++) this.e9[y].parent = this;
    this.Q("showpage", this.aCA, this);
  }
  eE.prototype = new g7();
  eE.prototype._j = function (j, q) {
    var m = navigator.onLine;
    if (!m) alert("Go online first");
    return m;
  };
  eE.prototype.X3 = function (j, q) {
    J.F(
      this.IN,
      "width:" +
        Math.min(j - 40, 740) +
        "px;  height:" +
        (q - 38) +
        "px;  padding:1.5em;"
    );
    this.e9[0].X3(j, q);
  };
  eE.prototype.lu = function (j, q) {
    return new ea(
      Math.max(0, Math.min(150, (j - 740) / 2)),
      Math.max(0, Math.min(100, (q - 700) / 2))
    );
  };
  eE.prototype.aCA = function (j) {
    J.dI(this.IN);
    this.IN.scrollTop = 0;
    this.IN.appendChild(this.e9[j.data.Wy]._);
  };
  eE.prototype.T = function () {
    g7.prototype.T.call(this);
    for (var y = 0; y < this.e9.length; y++) this.e9[y].T();
  };
  eE.prototype.Wz = function (j, q, m) {
    if (!navigator.onLine) return;
    J.dI(this.IN);
    var n = this.e9[0];
    this.IN.appendChild(n._);
    n.Wz();
    this.T();
  };
  eE.prototype.yp = function (j, q) {
    this.Wz(null, null, null);
  };
  eE.jT = function () {
    kV.call(this);
    this._ = J.m("div");
    var j = this._,
      T,
      b,
      a = "font-size:1.25em;",
      f = "text-align:center;",
      Z =
        'style="list-style-type: none; padding:0;  margin:0; font-size:1.15em;"',
      h = 'style="font-weight:bold; color:#00aa00; padding-right:4px;"',
      u = 'style="width:50%; vertical-align:top; padding:10px 20px;"',
      X = 12;
    this.sW = J.m("div");
    j.appendChild(this.sW);
    this.Ba = new kv([0, 11], !1, null, !0);
    J.F(
      this.Ba._,
      "background-color: rgba(200,0,0,1); color:#ffffff; margin:4px 6px 4px 0;"
    );
    this.Ba.Q("click", this.ki, this);
    j.appendChild(this.Ba._);
    this.aIB = new kv([0, 13, 1], !1, null, !0);
    this.aIB.Q("click", this.a1K, this);
    j.appendChild(this.aIB._);
    this.aI4 = new kv("Business Terms", !1, null, !0);
    this.aI4.Q("click", this.aMd, this);
    j.appendChild(this.aI4._);
    var q = J.m("div");
    q.style.margin = "20px 0";
    j.appendChild(q);
    var m = [
        "Account Types",
        "Go Premium",
        "Team Settings",
        "Distributors",
        "AI credits",
      ],
      n = (this.VW = []),
      G = (this.am5 = []),
      W = (this.yJ = J.m("div"));
    j.appendChild(W);
    for (var y = 0; y < m.length; y++) {
      var k = J.m("span");
      k.textContent = m[y];
      q.appendChild(k);
      n.push(k);
      J.F(
        k,
        "font-weight:bold; display:inline-block;  margin-right:2em; font-size:1.1em; cursor:pointer;"
      );
      k.addEventListener("click", this.WK.bind(this));
      G.push(J.m("div"));
    }
    this.WK(0);
    var c = (this.at4 =
      "background-color: #00aa00;  text-shadow:none; padding:3px 7px; font-size:1.2em; color:#ffffff; cursor:pointer; margin:4px 0; width:100%;");
    j = G[0];
    var b = J.m("table"),
      U = 'style=" ' + f + a + ' padding-bottom:20px;"';
    b.innerHTML =
      "\t\t\t<tr>\t\t\t\t<th>FREE</th><th>PREMIUM</th>\t\t\t</tr>\t\t\t<tr>\t\t\t\t<td " +
      u +
      ">\t\t\t\t\t<div " +
      U +
      ">\t\t\t\t\t\t<sup>$</sup><big><big><b>0</b></big></big>/mo\t\t\t\t\t</div>\t\t\t\t\t<div>\t\t\t\t\t\t<ul>\t\t\t\t\t\t\t<li><span " +
      h +
      ">\u2713</span> All Features</li>\t\t\t\t\t\t\t<li><span " +
      h +
      ">\u2713</span> PeaDrive 0.5 GB</li>\t\t\t\t\t\t</ul>\t\t\t\t\t</div>\t\t\t\t</td>\t\t\t\t<td " +
      u +
      ">\t\t\t\t\t<div " +
      U +
      ' title="Order 90 days for $15, to get a cost of $5 per month.">\t\t\t\t\t\tFrom <sup>$</sup><big><big><b>5</b></big></big>/mo\t\t\t\t\t</div>\t\t\t\t\t<div>\t\t\t\t\t\t<ul>\t\t\t\t\t\t\t<li><span ' +
      h +
      ">\u2713</span> All Features</li>\t\t\t\t\t\t\t<li><span " +
      h +
      ">\u2713</span> PeaDrive 5 GB</li>\t\t\t\t\t\t\t<li><span " +
      h +
      '>\u2713</span> No Ads <a href="//www.photopea.com/promo/no_ads.png" target="_blank">\uD83D\uDC41</a></li>\t\t\t\t\t\t\t<li title="Remove BG costs 1 credit. Magic Replace costs 3 credits."><span ' +
      h +
      ">\u2713</span> 3,000 AI credits / month</li> \t\t\t\t\t\t\t<li><span " +
      h +
      '>\u2713</span> 2\xD7 more steps in history</a></li> \t\t\t\t\t\t</ul>\t\t\t\t\t\t<span style="margin:10px 0 12px 0; font-size:0.75em;">* No subscription, just one-time payments</span> \t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t</td>\t\t\t</tr>\t\t';
    j.appendChild(b);
    var k = new kv("Go Premium");
    J.F(k._, c + "padding:10px 0;");
    k.Q(
      "click",
      function (C) {
        this.WK(1);
      },
      this
    );
    b.children[0].children[1].children[1].appendChild(k._);
    this.R_ = J.m("div");
    j.appendChild(this.R_);
    j = G[1];
    var i = (this.a9R = [
      [8, 30, 1],
      [15, 90, 1],
      [50, 365, 1],
      [20, 30, 5],
      [45, 90, 5],
      [150, 365, 5],
      [70, 30, 20],
      [150, 90, 20],
      [500, 365, 20],
      [150, 30, 50],
      [300, 90, 50],
      [999, 365, 50],
      [60, 30, 1e3],
      [120, 90, 1e3],
      [450, 365, 1e3],
      [150, 30, 5e3],
      [300, 90, 5e3],
      [1e3, 365, 5e3],
      [300, 30, 2e4],
      [600, 90, 2e4],
      [2e3, 365, 2e4],
    ]);
    this.Jp = [];
    for (var y = 0; y < i.length; y++)
      this.Jp.push(new kv("Buy: $" + i[y][0], !1, null, !0));
    for (var y = 0; y < this.Jp.length; y++) {
      this.Jp[y].Q("click", this.a43, this);
    }
    this.RX = new kv("...", !0);
    J.F(this.RX._, c);
    j.appendChild(this.RX._);
    b = this.av1(4, [
      "Single user",
      this.Jp[0],
      this.Jp[1],
      this.Jp[2],
      "Team of 5",
      this.Jp[3],
      this.Jp[4],
      this.Jp[5],
      "Team of 20",
      this.Jp[6],
      this.Jp[7],
      this.Jp[8],
      "Team of 50",
      this.Jp[9],
      this.Jp[10],
      this.Jp[11],
    ]);
    j.appendChild(b);
    var x = J.m("div");
    j.appendChild(x);
    x.textContent =
      "Premium lasts for X days: after X days, you are switched back to a free version (with ads).";
    this.a3Y = new av("I accept", !0, "");
    j.appendChild(this.a3Y._);
    this.aaF = new kv([0, 13, 1], !1, null, !0);
    this.aaF.Q("click", this.a1K, this);
    j.appendChild(this.aaF._);
    this.ayh = new kv("Promo Code", !1, null, !0);
    J.F(this.ayh._, c + " float:right; width:inherit;");
    this.ayh.Q("click", this.a43, this);
    j.appendChild(this.ayh._);
    j = G[2];
    this.aq = new ii();
    this.aq.parent = this;
    this.aq.Q(_.E.n, this.AD, this);
    j.appendChild(this.aq._);
    this.aq._.textContent = "Log in to create or join teams.";
    j = G[3];
    this.tr = new kv("...", !0);
    J.F(this.tr._, c);
    j.appendChild(this.tr._);
    b = this.av1(3, [
      "1000 views/mo",
      this.Jp[X++],
      this.Jp[X++],
      this.Jp[X++],
      "5000 views/mo",
      this.Jp[X++],
      this.Jp[X++],
      this.Jp[X++],
      "20000 views/mo",
      this.Jp[X++],
      this.Jp[X++],
      this.Jp[X++],
    ]);
    j.appendChild(b);
    var $ = J.m("p");
    $.innerHTML =
      'Insert Photopea into your webpage, with no ads, under your own brand \t\t... <a href="https://www.photopea.com/api/accounts#distributors" target="_blank" style="color:inherit;">More</a>';
    j.appendChild($);
    this._x = new bJ("Domain name (e.g. domain.com)", null, 14);
    j.appendChild(this._x._);
    var H = new kv("Save Domain Settings", !1, null, !0);
    H.mb();
    j.appendChild(H._);
    H.Q("click", this.adn, this);
  };
  eE.jT.prototype = new kV();
  eE.jT.prototype.WK = function (j) {
    var q = typeof j == "number" ? j : this.VW.indexOf(j.target);
    for (var y = 0; y < this.VW.length; y++) this.VW[y].style.opacity = 0.6;
    this.VW[q].style.opacity = 1;
    J.dI(this.yJ);
    this.yJ.appendChild(this.am5[q]);
  };
  eE.jT.prototype.X3 = function (j, q) {
    var m = j < 600 ? "d" : " days",
      n = ["30 days", "90 days", "365 days"];
    if (j < 600) n = ["30d", "90d", "365d"];
    var G = this.a9R;
    for (var y = 0; y < G.length; y++) {
      this.Jp[y].hk(
        "<span>" +
          n[y % 3] +
          ": <sup>$</sup><big><b>" +
          G[y][0] +
          "</b></big>" +
          "</span>"
      );
      J.F(this.Jp[y]._, this.at4);
    }
  };
  eE.jT.prototype.a1K = function (j) {
    var q = new fd("showpage", !0);
    q.data = { Wy: 1 };
    this.k(q);
  };
  eE.jT.prototype.aMd = function (j) {
    var q = new fd("showpage", !0);
    q.data = { Wy: 2 };
    this.k(q);
  };
  eE.jT.prototype.T = function () {
    this.Ba.hk(lw.N$() ? g$.get([0, 11]) : g$.get([0, 10]));
    this.aaF.T();
    this.aIB.T();
    this.aI4.T();
  };
  eE.jT.prototype.adP = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = {
      R: _.Y.p8,
      link:
        "https://www.photopea.com/api/accounts#" +
        (j.target == this.a7U ? "teams" : "distributors"),
    };
    this.k(q);
  };
  eE.jT.prototype.aKH = function (j) {
    var q = j.currentTarget == this.apD;
    this.apD.q(q);
    this.aFB.q(!q);
  };
  eE.jT.prototype.a4T = function (j) {
    var q = this.apD.V(),
      m = this.adK.V().trim().toLowerCase(),
      n = this.a9U.value.trim().toLowerCase();
    if (m.length > 60) {
      alert("Too long email address");
      return;
    }
    if (n.length > 600) {
      alert("Too many team members");
      return;
    }
    n = n.split(",").join(" ").trim();
    n = n.replace(/\s+/g, " ");
    if (n == "") n = [];
    else n = n.split(" ");
    var G = lw.PZ();
    if (G == null) G = {};
    if (G.acc == null) G.acc = {};
    G.acc.team = { jin: q, ldr: m, mmb: n };
    lw.$R(G, this.AD.bind(this));
    alert("Saved!");
    this.Wz();
  };
  eE.jT.prototype.adn = function (j) {
    var q = this._x.V().trim();
    if (!lw.N$()) {
      alert("You have to log in first.");
      return;
    }
    if (lw.Mk() == 0) {
      alert("Order a distributor account first.");
      return;
    }
    var m = lw.PZ();
    if (m == null) m = {};
    if (m.acc == null) m.acc = {};
    if (q == "") delete m.acc.dname;
    else m.acc.dname = q;
    lw.$R(m, this.AD.bind(this));
    alert("Saved!");
    this.Wz();
  };
  eE.jT.prototype.aHd = function (j) {
    var q = lw.xq(),
      y = this.sQ,
      m = lw.PZ();
    if (m == null) m = {};
    if (m.acc == null) m.acc = {};
    m.acc.bto = j;
    lw.$R(m, function () {});
    var n = eE.abW(j.split("\n"), q.pmnts[y]);
    jc.save(n, "photopea_invoice.pdf");
  };
  eE.jT.prototype.a9v = function (j) {
    var q = lw.xq(),
      m = lw.PZ(),
      n = m && m.acc ? m.acc.bto : null;
    if (n == null) n = q.name + "\n" + q.email;
    var y = -1,
      G = j.target._.parentNode;
    while ((G = G.previousSibling) != null) y++;
    this.sQ = y;
    var W = new fd(_.E.c, !0);
    W.data = { R: _.Y.s0, kO: "billto", pv: n, ml: this.aHd.bind(this) };
    this.k(W);
  };
  eE.jT.prototype.Wz = function () {
    this.sW.innerHTML = "";
    J.dI(this.R_);
    this.am5[4].innerHTML = "AI credits are available only to Premium users.";
    if (lw.N$()) {
      var j = lw.xq(),
        q = j.pmnts;
      if (j == null) return;
      this.sW.innerHTML =
        '<span style="font-size:1.5em; margin-right:0.7em;">' +
        j.name +
        "</span> " +
        j.email +
        " <br/>";
      if (q) {
        var m = "<h2>Payments</h2>";
        for (var y = 0; y < q.length; y++) {
          var n = q[y],
            G = new Date(n[0] * 1e3);
          m +=
            '<div style="font-size:1.2em">' +
            G.getDate() +
            "th of " +
            G.toDateString().split(" ")[1] +
            " " +
            G.getFullYear() +
            " - " +
            eE.aMf(n) +
            "</div>";
        }
        this.R_.innerHTML = m;
        for (var y = 0; y < q.length; y++) {
          var W = new kv("Get Invoice", !1, null, !0);
          J.F(W._, "float:right");
          W.Q("click", this.a9v, this);
          this.R_.children[y + 1].appendChild(W._);
        }
      }
    } else {
    }
    var k = lw.N$() && lw.eo();
    this.RX._.style.display = k ? "block" : "none";
    if (k) {
      var T,
        b,
        c = k,
        m = "<table><tr><th>Month</th><th>AI credits spent</th></tr>";
      if (c[0] == 0) {
        T = lw.cr(c[1]) - Date.now() * (1 / 1e3);
        b = c[1][2] == 1 ? "Single User" : "Team Of " + c[1][2];
      } else {
        T = c[1][1] - Date.now() * (1 / 1e3);
        b = 'Member of "' + c[1][0] + '"';
      }
      this.RX.hk(
        "Premium active for " +
          Math.round(T / (60 * 60 * 24)) +
          " more days! (" +
          b +
          ")"
      );
      var a = this.am5[4];
      J.dI(a);
      for (var f = c9.L5(); f >= 648; f--) {
        var U = 1970 + Math.floor(f / 12),
          Z = f % 12,
          G = new Date(U, Z, 2);
        m +=
          "<tr><td>" +
          U +
          " " +
          G.toDateString().split(" ")[1] +
          "</td><td>" +
          c9.ac5(f) +
          "</td></tr>";
      }
      var h = c9.ahF(c9.L5() + 1) - Date.now(),
        u = Math.floor(h / (24 * 60 * 6e4));
      h -= u * 24 * 60 * 6e4;
      var i = Math.floor(h / (60 * 6e4));
      h -= i * 60 * 6e4;
      var Z = Math.floor(h / 6e4);
      h -= Z * 6e4;
      m =
        "New period starts in " +
        u +
        " days, " +
        i +
        " hours, " +
        Z +
        " mins" +
        m;
      a.innerHTML = m + "</table>";
    }
    var x = lw.N$() && lw.Mk() * 1e3 > Date.now();
    this.tr._.style.display = x ? "block" : "none";
    if (x) {
      var T = lw.Mk() - Date.now() / 1e3;
      this.tr.hk(
        "Distributor active for " +
          Math.round(T / (60 * 60 * 24)) +
          " more days!"
      );
    }
    var X = lw.PZ();
    this.aq.Wz();
    if (X && X.acc && X.acc.dname) this._x.q(X.acc.dname);
    else this._x.q("");
  };
  eE.jT.prototype.av1 = function (j, q) {
    var m = J.m("table");
    if (!0) {
      var n = "<table><tr>";
      for (var y = 0; y < j; y++) n += "<th>" + q[y * 4] + "</th>";
      n += "</tr></table>";
      m.innerHTML = n;
      for (var y = 0; y < 3; y++) {
        var G = J.m("tr"),
          W;
        m.appendChild(G);
        for (var k = 0; k < j; k++) {
          W = J.m("td");
          W.style.width = Math.round(100 / j) + "%";
          G.appendChild(W);
          W.appendChild(q[k * 4 + 1 + y]._);
        }
      }
    }
    return m;
  };
  eE.jT.prototype.a43 = function (j) {
    var q = this.Jp.indexOf(j.currentTarget),
      n = 30,
      G = 1;
    if (!lw.N$()) {
      this.ki();
      return;
    }
    if (this.a3Y.V() == !1 && q < 12) {
      alert("You must accept Terms of Service");
      return;
    }
    var m = lw.N$() && lw.eo();
    if (q != -1) {
      var W = this.a9R[q];
      n = W[1];
      G = W[2];
    }
    if (m && G < 1e3) {
      alert("You already have premium.");
      return;
    }
    console.log(W, n, G);
    if (q == -1) {
      var k = prompt("Please enter your key");
      if (k != null) {
        lw.aDO(k, this.AD.bind(this));
        this.dK();
      }
      return;
    }
    if (n == 30 && G == 1) {
      var T = confirm(
        "You can have 90 days for $15. Do you still want a 30 days version for $8?"
      );
      if (!T) return;
    }
    lw.order(n, G, this.AD.bind(this));
    this.dK();
  };
  eE.jT.prototype.AD = function (j) {
    this.Wz();
    this.dK();
  };
  eE.jT.prototype.ki = function (j) {
    if (lw.N$()) {
      lw.aDb();
      this.dK();
      this.Wz(null, null, null);
    } else lw.ki(this.arz.bind(this));
  };
  eE.jT.prototype.arz = function () {
    var j = new fd(_.E.c, !0);
    j.data = { R: _.Y.amg };
    this.k(j);
  };
  eE.jT.prototype.dK = function () {
    var j = new fd(_.E.c, !0);
    j.data = { R: _.Y.aF6 };
    this.k(j);
  };
  eE.Xv = function (j) {
    kV.call(this);
    this._ = J.m("div");
    var q = this._,
      m = (this.a57 = new kv([0, 13, 2], !1, null, !0)),
      n;
    m.Q("click", this.a1q, this);
    q.appendChild(m._);
    if (j.startsWith("::")) {
      n = J.m("iframe");
      J.F(n, "width:100%;height:1700px; background-color:white;");
      n.setAttribute("src", j.slice(2));
    } else {
      n = J.m("div");
      n.innerHTML = j;
    }
    q.appendChild(n);
  };
  eE.Xv.prototype = new kV();
  eE.Xv.prototype.a1q = function (j) {
    var q = new fd("showpage", !0);
    q.data = { Wy: 0 };
    this.k(q);
  };
  eE.Xv.prototype.T = function () {
    this.a57.T();
  };
  eE.ayj =
    '\t\t<h1>Contact</h1>\t\t<p>Photopea.com is operated by Ivan Kuckir (IČ 04498411, Tax ID CZ9011014309).</p>\t\t<ul>\t\t\t<li><b>Address</b>: Hálkova 483, 517 41 Kostelec nad Orlicí, Czech Republic</li>\t\t\t<li><b>E-mail</b>: support@photopea.com, <b>Phone number</b>: +420 604 592 737</li>\t\t</ul>\t\t<h1>Refund Policy</h1>\t\t<p>You can ask for a refund by writing us an email to support@photopea.com and. \t\tWe offer only one kind of service, and if you have been refunded in the past, you can not get another refund.\t\t</p>\t\t<h1>Terms of Delivery</h1>\t\t<p>You can pay with a debit or a credit card. Payments are processed instantly, your Premium account will be activated instantly.</p>\t\t<h1>Payment Provider</h1>\t\t<p>Payments are provided by <a style="color:white" href="https://www.comgate.cz/cz/platebni-brana">ComGate pamyments, a.s</a>.</p>\t\t<ul>\t\t\t<li>ComGate Payments, a.s.</li>\t\t\t<li>Gočárova třída 1754 / 48b, Hradec Králové</li>\t\t\t<li>E-mail: platby-podpora@comgate.cz, Tel:  +420 228 224 267</li>\t\t</ul>\t\t<img src="https://www.comgate.cz/files/platebni-brana-comgate-paticka-e-shopu.png" loading="lazy" />\t';
  eE.aMf = function (j) {
    var q = j[1] + " days, ";
    if (j[2] < 1e3)
      return (
        "Photopea Premium (" + q + j[2] + " user" + (j[2] == 1 ? "" : "s") + ")"
      );
    else return "Photopea Distributor (" + q + j[2] + " views/month)";
  };
  eE.abW = function (j, q) {
    j = ["Bill To:"].concat(j);
    var m = new ToPDF(),
      n = 595,
      G = 842,
      W = 40,
      k = 18,
      T = 12,
      b = 500,
      c = 100,
      a = 400,
      u = 0;
    function f(o, V, P, z, E) {
      Z.font.Tf = E ? "Helvetica-Bold" : "Helvetica";
      Z.ctm = [1, 0, 0, 1, V, P];
      Z.font.Tfs = z ? z : T;
      m.PutText(Z, o, 0);
    }
    function U(o, V, P, z) {
      for (var y = 0; y < o.length; y++) {
        f(o[y], V, P - y * z, null, y == 0);
      }
    }
    var Z = UDOC.getState();
    m.StartPage(0, 0, n, G);
    f("INVOICE", n - W - 140, G - W - 30, 30, !0);
    U(
      [
        "Bill From:",
        "Ivan Kuckir",
        "Hálkova 483, 517 41 Kostelec nad Orlicí",
        "Tax ID: CZ9011014309",
      ],
      W,
      G - W - 40,
      k
    );
    var h = new Date(q[0] * 1e3);
    U(
      [
        "Date: " +
          h.getDate() +
          "th of " +
          h.toDateString().split(" ")[1] +
          " " +
          h.getFullYear(),
        "Transaction ID: " + q[4],
      ],
      n - W - 140,
      G - W - 40 - k * 2,
      k
    );
    var i = j.join("");
    for (var y = 0; y < i.length; y++) u = Math.max(u, i.charCodeAt(y));
    if (u > 256) {
      var x = 4,
        X = J.m("canvas"),
        $ = X.getContext("2d"),
        H = 0;
      $.font = T * x + "px sans-serif";
      for (var y = 0; y < j.length; y++)
        H = Math.max(H, $.measureText(j[y]).width);
      var C = Math.round(H) + 20,
        l = j.length * x * k + 20;
      X.width = C;
      X.height = l;
      $.font = T * x + "px sans-serif";
      for (var y = 0; y < j.length; y++) {
        $.font = (y == 0 ? "bold " : "") + T * x + "px sans-serif";
        $.fillText(j[y], 10, (y + 1) * x * k);
      }
      document.body.appendChild(X);
      var v = new Uint8Array($.getImageData(0, 0, C, l).data.buffer);
      Z.ctm = [C / x, 0, 0, l / x, W - 10 / x, G - W - 40 - 100 - l / x];
      m.PutImage(Z, v, C, l);
      Z.ctm = [1, 0, 0, 1, 0, 0];
    } else U(j, W, G - W - 40 - 100, k);
    Z.colr = [0.8, 0.8, 0.8];
    Z.pth = {
      cmds: ["M", "L", "L", "L", "Z"],
      crds: [W, b, n - W, b, n - W, b - k, W, b - k],
    };
    m.Fill(Z);
    Z.colr = [0, 0, 0];
    var K = [
        W,
        b,
        n - W,
        b,
        W,
        b - k,
        n - W,
        b - k,
        W,
        b - c,
        n - W,
        b - c,
        W,
        b,
        W,
        b - c,
        n - W,
        b,
        n - W,
        b - c,
        a,
        b,
        a,
        b - c,
      ],
      S = [];
    for (var y = 0; y < K.length; y += 4) S.push("M", "L");
    Z.pth = { cmds: S, crds: K };
    m.Stroke(Z);
    f("Order details", W + 4, b - 14);
    f(eE.aMf(q), W + 4, b - k - 14);
    f("TOTAL:", W + 4, b - c - 14, null, !0);
    f("Price", n - W - 50, b - 14);
    f(q[3] + " USD", n - W - 60, b - k - 14);
    f(q[3] + " USD", n - W - 60, b - c - 14, null, !0);
    f("www.Photopea.com", W, W);
    f("support@photopea.com", n - W - 130, W);
    m.ShowPage();
    m.Done();
    return m.buffer;
  };
  function cq() {
    g7.call(this, [11, 14], "addguides");
    this.I7;
    this.a = { q1: { WH: 0 } };
    this.awu = null;
    var j = J.m("div", "form");
    this.body.appendChild(j);
    this.BQ = [];
    this.HI = new gA(null, ["Hi"]);
    j.appendChild(this.HI._);
    J.Ft(j);
    this.HI.Q(_.E.n, this.ll, this);
    this.Fq = new bJ([22, 4, 0], null, 16);
    this.Fq.Q(_.E.n, this.To, this);
    this.i7 = new bJ([22, 4, 1], null, 16);
    this.i7.Q(_.E.n, this.To, this);
    this._m = new f1(null, B.uO.t0);
    this._m.Q(_.E.n, this.To, this);
    j.appendChild(this.Fq._);
    j.appendChild(this._m._);
    J.Ft(j);
    j.appendChild(this.i7._);
    this.v0 = J.y_(this, j);
    this.Q("closebtn", this.wF, this);
  }
  cq.prototype = new g7();
  cq.prototype._j = function (j, q) {
    return j != null;
  };
  cq.prototype.bx = function () {
    return !0;
  };
  cq.prototype.T = function () {
    g7.prototype.T.call(this);
    this.Fq.T();
    this.i7.T();
    this._m.T();
    this.v0.T();
  };
  cq.prototype.yp = function (j, q) {
    var m = j.q1.WH;
    this.a.q1.WH = m;
    this._m.q(m);
  };
  cq.prototype.Wz = function (j, q) {
    this.I7 = j;
    this.awu = JSON.stringify(j.f8());
    this.BQ = [-1];
    var m = ["Global"],
      n = j.root.children,
      G = j.Tl();
    for (var y = 0; y < n.length; y++) {
      var W = n[y].v;
      if (W.add.artb) {
        m.push(W.getName());
        this.BQ.push(n[y].index);
      }
    }
    this.HI.ti(m);
    this.HI.q(this.BQ.indexOf(G));
    this.ll();
  };
  cq.prototype.ll = function () {
    var j = this.I7,
      q = j.f8(),
      m = this.BQ[this.HI.V()],
      n = [0, 0];
    if (m != -1) {
      var G = j.U[m].Li();
      n = [G.x, G.y];
    }
    var W = function (k, T, j, b, c) {
      var a = k[0],
        f = [];
      for (var y = 0; y < a.length; y++)
        if (k[1][y] == m && a[y][0] == T)
          f.push(B.uO.G7(a[y][1] - n[T], j.zv, b, c));
      f.sort(function (U, Z) {
        return U - Z;
      });
      return f.join(", ");
    };
    this.Fq.q(W(q, 1, j, this.a, j.$));
    this.i7.q(W(q, 0, j, this.a, j.r));
  };
  cq.prototype.To = function (j) {
    if (j && j.currentTarget == this._m) this.a.q1.WH = this._m.V();
    else {
      var q = this.aLq(),
        m = this.I7;
      m.gE(q);
      m._F = !0;
    }
    this.ll();
  };
  cq.prototype.aLq = function () {
    var j = this.I7,
      q = j.f8(),
      m = this.BQ[this.HI.V()],
      n = [0, 0];
    if (m != -1) {
      var G = j.U[m].Li();
      n = [G.x, G.y];
    }
    var W = [];
    for (var k = 0; k < 2; k++) {
      var T = k == 0 ? this.i7 : this.Fq,
        b = k == 0 ? j.r : j.$,
        c = T.V().replace(/,/g, " ").replace(/  +/g, " ").trim(),
        a = c == "" ? [] : c.split(" ");
      for (var y = 0; y < a.length; y++)
        W.push([k, B.uO.avk(a[y], j.zv, this.a, b) + n[k]]);
    }
    for (var y = 0; y < q[0].length; y++)
      if (q[1][y] == m) {
        q[0].splice(y, 1);
        q[1].splice(y, 1);
        y--;
      }
    for (var y = 0; y < W.length; y++) {
      q[0].push(W[y]);
      q[1].push(m);
    }
    return q;
  };
  cq.prototype.wF = function (j) {
    var q = this.I7;
    q.gE(JSON.parse(this.awu));
    q._F = !0;
    this.I7 = null;
  };
  cq.prototype.GP = function (j) {
    this.To(j);
    var q = new fd(_.E.w, !0);
    q.l = L.Lx;
    q.data = { R: "gids", M6: JSON.parse(this.awu), MK: this.I7.f8() };
    this.I7 = null;
    this.close();
    this.k(q);
  };
  function eL(j) {
    g7.call(
      this,
      {
        pdfpres: "PDF Presentation",
        cformat: "Convert Formats",
        batch: "Batch",
        mockups: "Generate Mockups",
        resize: "Resize",
      }[j],
      j
    );
    this.a = null;
    this.I7 = null;
    this.caller = null;
    var q = J.m("div", "form");
    this.body.appendChild(q);
    J.F(q, "width:300px");
    this.ZU = new b6("Source Images", !0, !0);
    q.appendChild(this.ZU._);
    this.avy = new f1(
      [12, 14, 0],
      ["A4 Portrait", "A4 Landscape", [12, 93, 3], "Adapt to images"]
    );
    this.cH = new av("Order images by name");
    this.cH.q(!0);
    var m = (this.aj_ = gh.ab());
    for (var y = 0; y < m.length; y++)
      if (gh.lj(m[y]).k5) {
        m.splice(y, 1);
        y--;
      }
    m.push("SVG", "PDF");
    this.ue = new f1([12, 50], m);
    this.ue.q(1);
    this.qv = new gf();
    this.ue.Q(_.E.n, this.LA, this);
    this.$y = new f1("Action Set", []);
    this.$y.Q(_.E.n, this.yp, this);
    this.a1y = new f1("Action", []);
    this.avq = new av("Apply to all opened documents");
    this.aa4 = new av("Stretch inserted images");
    this.aa4.q(!0);
    this.GK = new av("Resize");
    this.GK.Q(_.E.n, this.aIK, this);
    var n = (this.az8 = J.m("div", "label6"));
    this.OG = new k7([12, 41], 1, 5e3, "px", 0, null, null, 5);
    this.OG.parent = this;
    this.OG.q(1e3);
    this.tv = new k7([12, 42], 1, 5e3, "px", 0, null, null, 5);
    this.tv.parent = this;
    this.tv.q(1e3);
    n.appendChild(this.OG._);
    J.Ft(n);
    n.appendChild(this.tv._);
    if (j == "pdfpres") {
      q.appendChild(this.avy._);
      q.appendChild(this.cH._);
    } else {
      if (j == "batch") {
        q.appendChild(this.$y._);
        J.Ft(q);
        q.appendChild(this.a1y._);
        J.c$(q);
      }
      if (j == "mockups") {
        q.appendChild(this.avq._);
        q.appendChild(this.aa4._);
        J.Ft(q);
      }
      if (j == "resize") {
        this.GK.q(!0);
      } else {
        q.appendChild(this.GK._);
        J.Ft(q);
      }
      q.appendChild(n);
      this.aIK();
      J.c$(q);
      q.appendChild(this.ue._);
      q.appendChild(this.qv._);
    }
    var G = ["VAR0 PDF", [1, 8]];
    if (j == "cformat") G = "Convert Images";
    if (j == "batch") G = "Process Images";
    if (j == "mockups") G = "Generate";
    if (j == "resize") G = "Resize Images";
    var W = (this.LO = new kv(G, !0, null, !0));
    W.Q("click", this._Y, this);
    q.appendChild(W._);
    this.LA();
    this.vs = -1;
    this.KQ = null;
  }
  eL.prototype = new g7();
  eL.prototype.aIK = function (j) {
    this.az8.style.display = this.GK.V() ? "" : "none";
  };
  eL.prototype.LA = function (j) {
    var q = this.aj_[this.ue.V()];
    this.qv.HK(q);
  };
  eL.prototype._Y = function (j) {
    this.KQ = null;
    if (this.id == "mockups" && this.caller.mS.length > 1 && this.avq.V()) {
      this.KQ = {};
      this.vs = 0;
    }
    this.It();
  };
  eL.prototype.It = async function () {
    this.LO.Ub();
    var j = Date.now(),
      q = this.ZU.V(),
      m = [],
      W = 595,
      k = 842,
      h,
      u,
      i,
      x;
    for (var n in q) m.push(n);
    if (m.length == 0) {
      alert("No images selected");
      return;
    }
    if (this.cH.V()) m.sort();
    var G = this.avy.V(),
      T = new ToPDF(),
      b = UDOC.getState(),
      c = this.aj_[this.ue.V()],
      a = gh.lj(c),
      f = this.qv.V(),
      U = {},
      Z = this.I7;
    if (this.KQ) Z = this.caller.mS[this.vs];
    if (this.id == "mockups") {
      if (Z == null) {
        alert("Open a document with smart objects");
        return;
      }
      var X = Z.U[Z.J[0]];
      if (X.add.SoLd == null) {
        X = null;
        for (var y = 0; y < Z.U.length; y++) if (Z.U[y].add.SoLd) X = Z.U[y];
        if (X == null) {
          alert("There are no smart objects in a current document.");
          return;
        }
      }
      Z.J = [Z.U.indexOf(X)];
      var $ = X.add.SoLd;
      u = Z.dp($.Idnt.v);
      i = u.Zj;
      x = u.fU;
      h = $.Sz.v;
    }
    for (var H = 0; H < m.length; H++) {
      var n = m[H],
        C = q[n],
        l = C[0] == 255,
        v = gh.Qa(C.buffer),
        K = gh.lj(v),
        S = [{ Iu: new hk(), data: new ArrayBuffer(0) }],
        o = null;
      if (v == "psd" && !a.k5) S = hx.a31(C.buffer);
      else if (K.k5) {
        o = new fb("file.psd");
        K.LN(C.buffer, o);
        o.DB();
        if (!a.k5) {
          if (o.c4) bq.lV(o, this.a.HS, this);
          o.gF();
          o.iY();
          S = [{ Iu: new hk(0, 0, o.r, o.$), data: o.ht().buffer }];
        }
      } else if (K.Qg) {
        S = await gh.a5_(K, C.buffer);
        console.log(S);
      } else S = K.LN(C.buffer);
      if (this.id == "batch") {
        var V = new fd(_.E.c, !0),
          P = this.a,
          z = P.rq,
          E = z[this.$y.V()];
        for (var y = 0; y < S.length; y++) {
          if (K.k5 && a.k5) {
          } else o = gh.wk(n, [S[y]]);
          V.data = { R: _.Y.ED, fg: o };
          this.k(V);
          if (o.U.length == 3) o.J = [1];
          jw.aDk(o, z, E.yJ[this.a1y.V()].ER, E.ER, this);
          o.gF();
          o.iY();
          S[y].Iu = new hk(0, 0, o.r, o.$);
          S[y].data = o.ht().buffer;
          S[y].zv = o.zv;
          S[y].Pt = o.Pt;
          V.data = { R: _.Y.BV, an: o };
          this.k(V);
        }
      }
      if (this.id == "mockups") {
        var A = new Uint8Array(S[0].data),
          Q = S[0].Iu,
          e = h.Wdth.v,
          Y = h.Hght.v;
        if (!this.aa4.V()) {
          var d = Q.r,
            I = Q.$,
            O = d / I,
            s = e / Y;
          if (s > O) d = Math.ceil(I * s);
          else I = Math.ceil(d / s);
          Q.x = (d - Q.r) >>> 1;
          Q.y = (I - Q.$) >>> 1;
          var p = new hk(0, 0, d, I),
            F = B.j(d * I * 4);
          B.M4(A, Q, F, p);
          A = F;
          Q = p;
        }
        var g = L.Dq.Ve([A, Q], new k$(e / Q.r, 0, 0, Y / Q.$, 0, 0));
        u.Zj = [g.buffer, g.H];
        B.HZ(u.Zj);
        u.fU = g.H;
        u.a4i = !1;
        Z.aa1(u.ys);
        S = [
          {
            data: B.sL(Z.ht(), 8).buffer,
            Iu: new hk(0, 0, Z.r, Z.$),
            zv: Z.zv,
            Pt: Z.Pt,
            Un: Z.Un,
          },
        ];
      }
      if (this.GK.V()) {
        var w = S[0].Iu,
          r = Math.min(this.OG.V() / w.r, this.tv.V() / w.$);
        if (r < 1)
          for (var y = 0; y < S.length; y++) {
            var A = new Uint8Array(S[y].data),
              Q = S[y].Iu,
              g = L.Dq.Ve(
                [A, Q],
                new k$(r * 0.999999, 0, 0, r * 0.999999, 0, 0)
              );
            S[y].data = g.buffer.buffer;
            S[y].Iu = g.H;
          }
      }
      var w = S[0].Iu,
        eQ = new Uint8Array(S[0].data),
        t = w.r,
        dq = w.$;
      if (this.id == "pdfpres") {
        var D = [
          [595, 842],
          [842, 595],
          [595, 595],
          [595, 0],
        ][G];
        if (G == 3) D[1] = Math.round((D[0] * dq) / t);
        var W = D[0],
          k = D[1],
          ha = Math.min(W / t, k / dq);
        T.StartPage(0, 0, W, k);
        b.ctm = [t * ha, 0, 0, dq * ha, (W - t * ha) / 2, (k - dq * ha) / 2];
        T.PutImage(b, l ? C : eQ, t, dq);
        T.ShowPage();
      } else {
        var am = n.split("."),
          k4;
        am.pop();
        am.push(c.toLowerCase());
        if (a.k5) {
          if (o == null) {
            o = gh.wk(n, S);
            o.DB();
          }
          k4 = a.Ev(o, o.r, o.$, f, this.a);
        } else {
          var aA = [];
          for (var y = 0; y < S.length; y++) {
            var ex = S[y],
              ac = ex.Le,
              eJ = 0;
            if (ac) {
              ac = ac.split(",");
              if (ac[1]) eJ = parseInt(ac[1]);
            }
            aA.push([ex.data, eJ, ex.zv, ex.Un, null, ex.Pt]);
          }
          if (a.Qg) k4 = await a.Ev(aA, t, dq, f);
          else k4 = a.Ev(aA, t, dq, f);
        }
        U[am.join(".")] = new Uint8Array(k4);
      }
    }
    if (this.id == "mockups") {
      u.Zj = i;
      u.fU = x;
      Z.aa1(u.ys);
    }
    console.log(Date.now() - j);
    if (this.id == "pdfpres") {
      T.Done();
      this.AM(T.buffer, "file.pdf");
    } else {
      var h$ = "images";
      if (this.id == "mockups") h$ = Z.name.slice(0, Z.name.length - 4);
      if (this.KQ) {
        for (var n in U) this.KQ[h$ + "/" + n] = U[n];
        this.vs++;
        if (this.vs == this.caller.mS.length) {
          this.AM(UZIP.encode(this.KQ), "images.zip");
          this.KQ = null;
        } else this.It();
      } else this.AM(UZIP.encode(U), h$ + ".zip");
    }
  };
  eL.prototype.AM = function (j, q) {
    this.LO.hC();
    lw.event("auto_" + this.id);
    jc.save(j, q);
  };
  eL.prototype.Wz = function (j, q, m, n) {
    this.I7 = j;
    this.caller = m;
  };
  eL.prototype.yp = function (j, q) {
    if (q != null) {
      this.a = j;
      var m = j.rq,
        n = [];
      for (var y = 0; y < m.length; y++) n.push(m[y].ER);
      this.$y.ti(n);
    } else j = this.a;
    var m = j.rq.length == 0 ? [] : j.rq[this.$y.V()].yJ,
      n = [];
    for (var y = 0; y < m.length; y++) n.push(m[y].ER);
    this.a1y.ti(n);
  };
  eL.prototype.T = function () {
    g7.prototype.T.call(this);
    this.qv.T();
    this.OG.hk("Max. " + g$.get([12, 41]) + ":");
    this.tv.hk("Max. " + g$.get([12, 42]) + ":");
    this.ZU.T();
    this.avy.T();
    this.cH.T();
  };
  function i1(j) {
    var q = k0.names[j];
    if (q == null) q = eV.names[j];
    if (j == "aply") q = [2, 12];
    if (j == "fade") q = [2, 11];
    if (j == "matc") q = [4, 18];
    if (j == "blendOptions") q = [14, 10];
    g7.call(this, q, "afw_" + j);
    this.aA = j;
    this.sK = null;
    this.agz = null;
    this.ayQ = !1;
    this.SY = new gj[j]();
    this.SY.Q(_.E.n, this.L0, this);
    this.SY.parent = this;
    this.body.appendChild(this.SY._);
    this.tE = new av([24, 18, 5]);
    this.tE.q(!0);
    this.tE.Q(_.E.n, this.L0, this);
    this.a1L = new kv([1, 12, 2], !0, null, !0);
    this.a1L.Q("click", this.MQ, this);
    this.v0 = J.y_(this);
    if (this.eZ()) this.SY.ol(this.v0._);
    else {
      J._g(this.SY._, "form");
      var m = (this.U2 = J.m("div", "form"));
      this.body.appendChild(m);
      m.appendChild(this.v0._);
      m.appendChild(this.a1L._);
      m.appendChild(this.tE._);
    }
    this.Q("closebtn", this.JT, this);
  }
  i1.prototype = new g7();
  i1.prototype.bx = function () {
    return !0;
  };
  i1.prototype.eZ = function () {
    return this.SY != null && this.SY.JY();
  };
  i1.prototype.lu = function () {
    return this.eZ() ? new ea(0, 0) : g7.prototype.lu();
  };
  i1.prototype.oa = function (j) {
    return this.SY.oa(j);
  };
  i1.prototype.LG = function () {
    return this.SY.LG();
  };
  i1.prototype.oo = function (j, q, m, n, G) {
    this.SY.oo(j, q, m, n, G);
  };
  i1.prototype.C3 = function (j, q, m, n, G) {
    this.SY.C3(j, q, m, n, G);
  };
  i1.prototype.H_ = function (j, q, m, n, G) {
    this.SY.H_(j, q, m, n, G);
  };
  i1.prototype._j = function (j, q) {
    if (this.aA == "fade") return i1.a3I(j);
    return !0;
  };
  i1.prototype.MQ = function (j) {
    this.SY.q(k0.i4(this.aA));
    this.L0();
  };
  i1.prototype.L0 = function (j) {
    var q = this.SY,
      m = q.V(),
      n = this.ayQ ? q.pL() : 0;
    if (n != 0) m.showClipping = { t: "long", v: n };
    this.lD({ R: "edit", YF: m, KV: !this.tE.V() });
  };
  i1.prototype.JT = function (j) {
    this.lD({ R: "cancel" });
  };
  i1.prototype.GP = function (j) {
    if (!this.tE.V()) {
      this.tE.q(!0);
      this.L0();
    }
    this.agz = this.SY.V();
    if (this.eZ()) this.L0();
    this.lD({ R: "confirm" });
    this.close();
  };
  i1.prototype.T = function () {
    g7.prototype.T.call(this);
    this.tE.T();
    if (this.SY) this.SY.T();
    this.v0.T();
  };
  i1.prototype.yp = function (j, q) {
    if (this.SY) this.SY.yp(j, q);
  };
  i1.prototype.uY = function (j, q, m, n) {
    this.ayQ = n.M(gn.O4);
    if (this.aA == "levl" || this.aA == "curv") this.L0();
    if (this.eZ()) this.SY.uY(n);
    else g7.prototype.uY.call(this, j, q, m, n);
  };
  i1.prototype.Wz = function (j, q, m, n) {
    this.sK = q.sK;
    var G = j.add.lnk2 ? j.add.lnk2 : [],
      W,
      k,
      T = new hk(0, 0, j.r, j.$),
      b = j.U[j.J[0]],
      a = null;
    W = b.buffer;
    k = b.H;
    var c = j.h && this.aA == "LqFy" && q.sK == null;
    if (c) {
      k = j.h.H.P();
      W = B.j(k.C() * 4);
      B.M4(b.buffer, b.H, W, k);
    }
    if (this.eZ()) {
      a = j.ht(j.J[0] - 1);
      if (c) {
        var f = B.j(k.C() * 4);
        B.M4(a, T, f, k);
        T = k.P();
        a = f;
      }
    }
    var U = k0.i4(this.aA);
    if (q.HX) U = q.HX;
    var Z = [G, j._E, j, m.mS];
    if (q.sK == null) {
      this.SY.q(U, W, k, T, a, Z);
      if (eV.names[this.aA]) {
        if (n.M(gn.O4) && this.agz) this.SY.q(this.agz);
        var h = L.DO.getData(j),
          u = B.OA(h[0].py);
        this.SY.OU(u);
      }
    } else {
      var i = !1,
        b = j.U[this.sK.v];
      if (b.r3()) {
        var x = b.xE(j);
        W = x.buffer;
        k = x.H;
        var X = b.add.SoLd.filterFX.v.filterFXList.v;
        if (X[this.sK.index]) {
          var $ = X[this.sK.index].v;
          this.SY.q(
            this.aA == "blendOptions" ? $.blendOptions.v : $.Fltr.v,
            W,
            k,
            T,
            a,
            Z
          );
          this.SY.OU(B.OA(W));
          i = !0;
        }
      }
      if (!i) {
        this.SY.q(U, W, k, T, a, Z);
        this.SY.OU(B.OA(W));
      }
    }
    if (!this.eZ()) {
      this.L0();
      var H = this.SY;
      if (
        H &&
        H.N3 &&
        H.N3[0] &&
        H.N3[0].j$ &&
        Math.min(window.innerWidth, window.innerHeight) > 500
      )
        H.N3[0].j$();
    }
  };
  i1.prototype.lD = function (j) {
    var q = new fd(_.E.w, !0);
    j.aA = this.aA;
    j.sK = this.sK;
    if (this.aA == "VaPo") {
      j.K = this.SY.V();
      j.NP = this.SY.aeA();
    }
    q.data = j;
    q.l = k0.names[this.aA] || this.sK ? L.b_ : L.vP;
    q.XE = !0;
    this.k(q);
  };
  i1.prototype.X3 = function (j, q) {
    if (!this.SY.JY()) {
      var m = "",
        n = "width:312px",
        G = "100%";
      if (500 < j) {
        m += "width:8em; margin-left:1em;";
        J._g(this.body, "flexrow");
      } else {
        m += "margin-top:1em";
        J.XZ(this.body, "flexrow");
        G = "100px";
      }
      this.v0._.style.width = G;
      this.a1L._.style.width = G;
      J.F(this.U2, m);
      J.F(this.SY._, n);
    } else {
      this.body.style.padding = "0";
      this.SY.X3(j, q);
    }
  };
  i1.a3I = function (j) {
    if (j == null) return !1;
    var q = j.iw();
    if (q == null || !(q.data instanceof Array) || q.data.length != j.J.length)
      return !1;
    for (var y = 0; y < q.data.length; y++) {
      var m = q.data[y];
      if (m.v < 0 && j._E[-1 - m.v]) return !0;
      if (m.v == null || j.U[m.v] == null || j.U[m.v].ma != m.mY) return !1;
      if (j.J.indexOf(m.v) == -1) return !1;
    }
    return !0;
  };
  function lr() {
    g7.call(this, [11, 0], "camera");
    this.data = null;
    this.ain = new ea(1, 1);
    this.a6E = [];
    var j = J.m("div", "form hbar");
    this.body.appendChild(j);
    this.aeN = new f1(null, []);
    this.aav = new f1(
      [21, 0],
      [
        [21, 2],
        [21, 1],
      ]
    );
    j.appendChild(this.aav._);
    this.gf = new f1(null, []);
    this.gf.Q(_.E.n, this.asC, this);
    j.appendChild(this.gf._);
    this.aBR = new kv([11, 0], !1, null, !0);
    this.aBR.Q("click", this.aeZ, this);
    j.appendChild(this.aBR._);
    this.a7R = new aD("");
    j.appendChild(this.a7R._);
    this.stream = null;
    this.Pg = J.m("video");
    this.Pg.setAttribute("autoplay", "true");
    this.body.appendChild(this.Pg);
    this.ayp = this.a3N.bind(this);
    this.aoN = this.aFW.bind(this);
    this.aeF = this.aqa.bind(this);
    this.Q("closebtn", this.ahg, this);
  }
  lr.prototype = new g7();
  lr.prototype.T = function () {
    g7.prototype.T.call(this);
    this.aav.T();
    this.aBR.T();
    this.X3(this.GM, this.uu);
  };
  lr.prototype.ht = function () {
    var j = this.Pg.videoWidth,
      q = this.Pg.videoHeight,
      m = J.m("canvas", "");
    m.width = j;
    m.height = q;
    var n = m.getContext("2d");
    n.drawImage(this.Pg, 0, 0, j, q);
    var G = n.getImageData(0, 0, j, q);
    return { Iu: new hk(0, 0, j, q), data: G.data.buffer };
  };
  lr.prototype.aeZ = function (j) {
    if (this.aav.V() == 0) this.awz();
    else this.a6r();
  };
  lr.prototype.a6r = function () {
    var j = this.ht(),
      q = { buffer: new Uint8Array(j.data), H: j.Iu },
      m = new fd(_.E.w, !0);
    m.XE = !0;
    m.l = L.W1;
    m.data = { R: R.bG, kJ: q };
    this.k(m);
    alert(g$.get([21, 4]));
  };
  lr.prototype.awz = function () {
    var j = this.ht(),
      q = gh.wk("camera", [j]),
      m = new fd(_.E.c, !0);
    m.data = { R: _.Y.ED, fg: q };
    this.k(m);
    alert(g$.get([21, 5]));
  };
  lr.prototype.Wz = function (j, q, m) {
    navigator.mediaDevices.enumerateDevices().then(this.a5S.bind(this));
  };
  lr.prototype.a5S = function (j) {
    var q = (this.a6E = []),
      m = [];
    for (var y = 0; y < j.length; y++)
      if (j[y].kind == "videoinput") {
        q.push(j[y]);
        m.push("Camera " + q.length);
      }
    this.gf.ti(m);
    this.gf.q(0);
    this.asC();
  };
  lr.prototype.asC = function (j) {
    this.ahg();
    var q = {
      video: {
        deviceId: this.a6E[this.gf.V()].deviceId,
        width: { ideal: 8e3 },
        height: { ideal: 8e3 },
      },
    };
    if (navigator.mediaDevices.getUserMedia)
      navigator.mediaDevices.getUserMedia(q).then(this.ayp).catch(this.aoN);
    else navigator.webkitGetUserMedia(q, this.ayp, this.aoN);
  };
  lr.prototype.a3N = function (j) {
    this.stream = j;
    this.Pg.srcObject = j;
    this.Pg.addEventListener("loadedmetadata", this.aeF, !1);
  };
  lr.prototype.aqa = function (j) {
    this.Pg.play();
    this.X3(this.GM, this.uu);
  };
  lr.prototype.lu = function (j, q) {
    return new ea(0, 0);
  };
  lr.prototype.X3 = function (j, q) {
    var m = this.Pg.videoWidth,
      n = this.Pg.videoHeight;
    this.a7R.q(m + " x " + n + " px");
    J.F(this.a7R._, "position:absolute;  left:14px; bottom:10px; z-index:1;");
    this.ain.Tu(m, n);
    this.GM = j;
    this.uu = q;
    var G = j - 28,
      W = q - 28 - 30,
      k = this.ain.x / this.ain.y;
    if (G / W > k) G = W * k;
    else W = G / k;
    J.F(
      this.Pg,
      "display: block; width: " +
        Math.round(G) +
        "px; height:" +
        Math.round(W) +
        "px;"
    );
  };
  lr.prototype.aFW = function (j) {
    console.log("error", j);
    alert(g$.get([21, 6]));
    this.close();
  };
  lr.prototype.ahg = function (j) {
    if (this.stream != null) {
      var q = this.stream.getTracks();
      for (var y = 0; y < q.length; y++) q[y].stop();
      this.stream = null;
    }
  };
  function ht() {
    g7.call(this, [7, 8], "crange");
    this.I7 = null;
    this.uI = { ji: 73, Sd: 4.45, X: 4 };
    this.kh = { ji: 73, Sd: 4.45, X: 4 };
    this.body.style.width = "20em";
    this.Dm = new f1(
      [0, 5],
      ["Sampled Colors", [19, 6, 0], [19, 6, 1], [19, 6, 2]]
    );
    this.Dm.Q(_.E.n, this.hX, this);
    this.body.appendChild(this.Dm._);
    this.v$ = J.m("div", "form");
    this.body.appendChild(this.v$);
    var j = (this.aCc = 2),
      q = (this.QD = [
        new ho([12, 92], 0, 200),
        new gA([12, 36], [[18, 0], "\uFF0B", "-"]),
        new ho([12, 92], 0, 100, "%"),
        new k7("Min", 0, 255),
        new k7("Max", 0, 255),
      ]);
    q[0].q(40);
    q[j].q(40);
    for (var y = 0; y < q.length; y++) {
      q[y].Q(_.E.n, this.ip, this);
      q[y].parent = this;
    }
    this.Bl = J.m("canvas");
    this.body.appendChild(this.Bl);
    this.v0 = J.y_(this, this.body);
  }
  ht.prototype = new g7();
  ht.prototype._j = function (j, q) {
    return j != null;
  };
  ht.prototype.LG = function () {
    return !0;
  };
  ht.prototype.bx = function () {
    return !0;
  };
  ht.prototype.hX = function (j) {
    var q = this.Dm.V(),
      m = this.QD,
      n = this.v$,
      G = 0,
      W = m.length,
      k = this.aCc;
    if (q == 0) W = k;
    else {
      G = k;
      m[G + 1].q([0, 100, 190][q - 1]);
      m[G + 1].yl(q != 1);
      m[G + 2].q([60, 150, 255][q - 1]);
      m[G + 2].yl(q != 3);
    }
    J.dI(n);
    for (var y = G; y < W; y++) {
      n.appendChild(m[y]._);
    }
    this.ip();
  };
  ht.prototype.T = function () {
    g7.prototype.T.call(this);
    this.v0.T();
    this.Dm.T();
    for (var y = 0; y < this.QD.length; y++) this.QD[y].T();
  };
  ht.prototype.oo = function (j, q, m, n, G) {
    var W = j.I.sb(G.x, G.y);
    this.a9V(W.x, W.y);
  };
  ht.prototype.a9V = function (j, q) {
    var m = Math.min,
      n = Math.max,
      G = this.I7,
      W = n(0, m(G.r - 1, Math.floor(j))),
      k = n(0, m(G.$ - 1, Math.floor(q))),
      T = G.ht(),
      b = (k * G.r + W) * 4,
      c = 255 / B.TN(G.depth),
      a = T[b],
      f = T[b + 1],
      U = T[b + 2],
      Z = B.fa(a * c, f * c, U * c),
      h = this.QD[1].V(),
      u = this.uI,
      i = this.kh;
    if (h == 0) {
      this.uI = B.S(Z);
      this.kh = Z;
    } else if (h == 1) {
      u.ji = m(u.ji, Z.ji);
      u.Sd = m(u.Sd, Z.Sd);
      u.X = m(u.X, Z.X);
      i.ji = n(i.ji, Z.ji);
      i.Sd = n(i.Sd, Z.Sd);
      i.X = n(i.X, Z.X);
    } else if (h == 2) {
      var x = (u.ji + i.ji) / 2,
        X = (u.Sd + i.Sd) / 2,
        $ = (u.X + i.X) / 2;
      if (Z.ji < x) u.ji = n(u.ji, Z.ji + 10);
      else i.ji = m(i.ji, Z.ji - 10);
      if (Z.Sd < X) u.Sd = n(u.Sd, Z.Sd + 1);
      else i.Sd = m(i.Sd, Z.Sd - 1);
      if (Z.X < $) u.X = n(u.X, Z.X + 1);
      else i.X = m(i.X, Z.X - 1);
    }
    this.ip();
  };
  ht.prototype.GP = function (j) {
    var q = this.Dm.V(),
      m = this.QD,
      n = {
        __name: "Color Range",
        classID: "ClrR",
        colorModel: { t: "long", v: 0 },
      };
    if (q == 0) {
      var G = this.uI,
        W = this.kh;
      n.Mnm = {
        t: "Objc",
        v: {
          classID: "LbCl",
          Lmnc: { t: "doub", v: G.ji },
          A: { t: "doub", v: G.Sd },
          B: { t: "doub", v: G.X },
        },
      };
      n.Mxm = {
        t: "Objc",
        v: {
          classID: "LbCl",
          Lmnc: { t: "doub", v: W.ji },
          A: { t: "doub", v: W.Sd },
          B: { t: "doub", v: W.X },
        },
      };
      n.Fzns = { t: "long", v: m[0].V() };
    } else {
      q--;
      var k = ["shadows", "midtones", "highlights"][q];
      n.Clrs = { t: "enum", v: { Clrs: ["Shdw", "Mdtn", "Hghl"][q] } };
      if (0 < q) n[k + "LowerLimit"] = { t: "long", v: m[3].V() };
      if (q < 2) n[k + "UpperLimit"] = { t: "long", v: m[4].V() };
      n[k + "Fuzziness"] = { t: "long", v: m[2].V() };
    }
    this.close();
    var T = new fd(_.E.NI, !0);
    T.data = { _D: "colorRange", SC: n };
    this.k(T);
  };
  ht.prototype.Wz = function (j, q) {
    this.I7 = j;
    this.a9V(0, 0);
    this.hX();
  };
  ht.prototype.ip = function () {
    var j = this.I7,
      q = this.Dm.V(),
      m = this.uI,
      n = this.kh,
      G = this.QD,
      W = G[0].V() / 200,
      k = !1;
    if (q > 0) {
      m = G[3].V();
      n = G[4].V();
      if (m >= n) m = n - 1;
      k = !0;
      W = G[2].V() / 100;
    }
    var T = L.pI.VQ(j, m, n, W, k),
      b = T.H,
      c = T.N,
      a = this.Bl,
      f = a.getContext("2d"),
      U = Math.floor(230 * J.IC()),
      Z = Math.floor(U * (b.$ / b.r));
    a.width = U;
    a.height = Z;
    J.Mg(a, U, Z);
    var h = B.j(c.length * 4);
    h.fill(255);
    B.QZ(B.sL(c, 8), h, y);
    var u = L.Dq.Ve([h, b], new k$(U / b.r, 0, 0, Z / b.$, 0, 0)),
      i = u.H,
      x = new ImageData(new Uint8ClampedArray(u.buffer.buffer), i.r, i.$);
    f.putImageData(x, 0, 0);
  };
  function dx() {
    g7.call(this, [12, 76, 1], "createshape");
    this.mM = null;
    var j = J.m("div", "form");
    J.F(j, "width:20em");
    this.body.appendChild(j);
    this.X0 = new aY(!0, !0, null, !0, !0);
    this.X0.q(new ea(100, 100));
    j.appendChild(this.X0._);
    this.anx = new av([19, 5, 3]);
    j.appendChild(this.anx._);
    this.v0 = J.y_(this, j);
  }
  dx.prototype = new g7();
  dx.prototype.GP = function (j) {
    var q = this.X0.V();
    this.mM.atz(this.mM.a90, q.x, q.y, this.anx.V());
    this.close();
  };
  dx.prototype.T = function () {
    if (this.mM) this.KM = g$.get([5, 3]) + ": " + g$.get(this.mM.a0N);
    g7.prototype.T.call(this);
    this.v0.T();
    this.X0.T();
    this.anx.T();
  };
  dx.prototype.Wz = function (j, q) {
    this.mM = q;
    this.T();
    this.X0.q(this.X0.V(), j.zv);
  };
  function at() {
    g7.call(this, [11, 1], "colorpicker");
    this.fP = null;
    this.vL = null;
    this.hw = null;
    this.OS = !1;
    this.EU = !1;
    this.aJd = [0.9642, 1, 0.8249];
    var j = J.m("div", "flexrow"),
      k,
      T;
    this.body.appendChild(j);
    this.VJ = new gk(256, !0);
    this.VJ.Q(_.E.n, this.GQ, this);
    j.appendChild(this.VJ._);
    var q = J.m("div", "form");
    J.F(q, "width:14.5em; margin-left:1em;");
    j.appendChild(q);
    var m = J.m("div", "flexrow");
    q.appendChild(m);
    var n = J.m("div");
    m.appendChild(n);
    n.style = "width:95px; margin-right:14px";
    this.auj = J.m("div", "full");
    n.appendChild(this.auj);
    this.akr = J.m("div", "full");
    n.appendChild(this.akr);
    var n = J.m("col");
    m.appendChild(n);
    n.style.width = "80px";
    this.v0 = J.y_(this, n);
    this.ad9 = new kv("Add Swatch", !0, null, !0);
    n.appendChild(this.ad9._);
    this.ad9.Q("click", this.acn, this);
    var m = J.m("div", "flexrow");
    q.appendChild(m);
    var G = J.m("div"),
      W = J.m("div");
    m.appendChild(G);
    m.appendChild(W);
    G.style = W.style = "margin-left:14px; max-width:80px;";
    k = ["H", "S", "B"];
    T = G;
    this.cv = [];
    for (var y = 0; y < 3; y++) {
      var b = 0,
        c = 360,
        a = "\xB0";
      if (y != 0) {
        c = 100;
        a = "%";
      }
      var f = new k7(k[y], b, c, a, 0, !1, !0);
      this.cv.push(f);
      f.Q(_.E.n, this.adv, this);
      T.appendChild(f._);
      if (y == 2) f._.style.marginBottom = "8px";
    }
    k = ["R", "G", "B"];
    T = G;
    this.wv = [];
    for (var y = 0; y < 3; y++) {
      var f = new k7(k[y], 0, 255, null, 0, !1, !0);
      this.wv.push(f);
      f.Q(_.E.n, this.alp, this);
      T.appendChild(f._);
    }
    k = ["L", "a", "b"];
    T = W;
    this.e4 = [];
    for (var y = 0; y < 3; y++) {
      var b = [0, -128, -128][y],
        c = [100, 127, 127][y],
        f = new k7(k[y], b, c, null, 0, !1, !0);
      f.q(0);
      this.e4.push(f);
      f.Q(_.E.n, this.atW, this);
      T.appendChild(f._);
      if (y == 2) f._.style.marginBottom = "8px";
    }
    k = ["C", "M", "Y", "K"];
    T = W;
    this.f5 = [];
    for (var y = 0; y < 4; y++) {
      var f = new k7(k[y], 0, 100, "%", 0, !1, !0);
      f.q(0);
      this.f5.push(f);
      f.Q(_.E.n, this.aL0, this);
      T.appendChild(f._);
      if (y == 3) f._.style.marginBottom = "8px";
    }
    this.Fq = new bJ("#", null, 4.5);
    this.Fq.Q(_.E.n, this.Cq, this);
    G.appendChild(this.Fq._);
    this.Fq._.style.marginRight = "0";
    this.nU = J.m("input", "fitem");
    this.nU.setAttribute("type", "color");
    J.F(this.nU, "width:59px;  margin-left:19px;");
    this.nU.addEventListener("change", this.Cq.bind(this), !1);
    this.lq = new j9(9);
    this.lq.Q(_.E.n, this.Cq, this);
    q.appendChild(this.lq._);
    this.Q("closebtn", this.JT, this);
    this.rQ = !1;
  }
  at.prototype = new g7();
  at.prototype.LG = function () {
    return !0;
  };
  at.prototype.acn = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = { R: _.Y.UN, kO: bI.Fb.aiE };
    this.k(q);
    var m = this.vL;
    dQ.tT.aLT({ o: m.o * 255, i: m.i * 255, X: m.X * 255 });
  };
  at.prototype.lu = function (j, q) {
    if (Math.min(j, q) > 500) return null;
    return new ea(
      Math.max(0, Math.min(150, (j - 484) / 2)),
      Math.max(0, Math.min(150, (q - 316) / 2))
    );
  };
  at.prototype.X3 = function (j, q) {
    this.VJ.X3(Math.min(256, j - 226), q);
  };
  at.prototype.T = function (j, q) {
    g7.prototype.T.call(this);
    for (var y = 0; y < 3; y++) {
      this.wv[y].T();
      this.cv[y].T();
      this.e4[y].T();
    }
    for (var y = 0; y < 4; y++) this.f5[y].T();
    this.v0.T();
  };
  at.prototype.GQ = function (j) {
    this.vL = this.VJ.V();
    this.update();
  };
  at.prototype.oo = function (j, q, m, n, G) {
    this.rQ = !0;
    this.aBr(j, G);
  };
  at.prototype.C3 = function (j, q, m, n, G) {
    if (!this.rQ) return;
    this.aBr(j, G);
  };
  at.prototype.H_ = function (j, q, m, n, G) {
    this.rQ = !1;
  };
  at.prototype.aBr = function (j, q) {
    this.vL = B.b4(L.KH.th(j, q, 1), 1);
    this.update();
  };
  at.prototype.alp = function (j) {
    var q = this.wv,
      m = this.nD(parseInt(q[0].V())),
      n = this.nD(parseInt(q[1].V())),
      G = this.nD(parseInt(q[2].V()));
    this.vL = { o: m / 255, i: n / 255, X: G / 255 };
    this.update();
  };
  at.prototype.adv = function (j) {
    var q = this.cv,
      m = this.Pq(parseInt(q[0].V()) / 360),
      n = this.Pq(parseInt(q[1].V()) / 100),
      G = this.Pq(parseInt(q[2].V()) / 100);
    this.vL = B.ld(m, n, G);
    this.update();
  };
  at.prototype.aL0 = function (j) {
    var q = this.f5,
      m = [];
    for (var y = 0; y < 4; y++) {
      var n = this.aIH(parseInt(q[y].V()));
      q[y].q(n);
      m.push(n / 100);
    }
    var G = B.Lf(m);
    this.vL = { o: G[0], i: G[1], X: G[2] };
    this.update(!0);
  };
  at.prototype.atW = function (j) {
    var q = this.e4,
      m = parseInt(q[0].V()),
      n = parseInt(q[1].V()),
      G = parseInt(q[2].V()),
      W = B.DD(m, n, G);
    this.vL = { o: W.o / 255, i: W.i / 255, X: W.X / 255 };
    this.update();
  };
  at.prototype.Cq = function (j) {
    var q;
    if (j.currentTarget == this.lq) q = this.lq.V();
    else {
      q = j.currentTarget == this.Fq ? this.Fq.V() : this.nU.value;
      if (q.charAt(0) == "#") q = q.slice(1);
      if (q.length == 3) q = q[0] + q[0] + q[1] + q[1] + q[2] + q[2];
      q = B.aw0(q);
    }
    this.vL = B.b4(q, 1);
    this.update();
  };
  at.prototype.GP = function (j) {
    this.close();
    this.aFf();
    var q = B.yH(this.vL, 1);
    this.lq.q(q);
    this.hw(q);
    this.EU = !1;
    this.vL = null;
  };
  at.prototype.JT = function (j) {
    this.aFf();
    if (this.OS) this.hw(B.yH(this.fP, 1));
    this.EU = !1;
    this.vL = null;
  };
  at.prototype.aFf = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = { R: _.Y.aFL };
    this.k(q);
  };
  at.prototype.yp = function (j, q) {
    var m = dQ.n_(j, q);
    if (m != null) this.lq.q(m);
    if (q != fG.Ru) return;
    this.lq.q(m);
    if (this.vL != null) {
      this.vL = B.b4(m, 1);
      this.update();
    }
  };
  at.prototype.Wz = function (j, q) {
    var m = B.b4(q.Fx, 1);
    if (this.vL == null) {
      var n = new fd(_.E.c, !0);
      n.data = { R: _.Y.t5, $U: "crosshair", push: !0 };
      this.k(n);
      this.rQ = !1;
      this.hw = q.cy;
      this.OS = !1;
      this.EU = q.kX;
      this.fP = B.S(m);
      J.F(this.akr, "height:2.3em;background-color:#" + B.bw(q.Fx) + ";");
    }
    this.vL = m;
    this.update();
  };
  at.prototype.update = function (j) {
    var q = this.vL,
      m = B.yH(q, 1);
    this.Fq.q(B.bw(m));
    this.nU.value = "#" + B.bw(m);
    J.F(this.auj, "height:2.3em;background-color:#" + B.bw(m) + ";");
    var n = this.wv;
    n[0].q(Math.round(q.o * 255));
    n[1].q(Math.round(q.i * 255));
    n[2].q(Math.round(q.X * 255));
    var G = B.vE(q.o, q.i, q.X);
    n = this.cv;
    n[0].q(Math.round(G.uu * 360));
    n[1].q(Math.round(G.fO * 100));
    n[2].q(Math.round(G.YF * 100));
    var W = B.fa(q.o * 255, q.i * 255, q.X * 255, this.aJd);
    n = this.e4;
    n[0].q(Math.round(W.ji));
    n[1].q(Math.round(W.Sd));
    n[2].q(Math.round(W.X));
    if (j == null) {
      var k = B.fE([q.o, q.i, q.X]);
      n = this.f5;
      n[0].q(Math.round(k[0] * 100));
      n[1].q(Math.round(k[1] * 100));
      n[2].q(Math.round(k[2] * 100));
      n[3].q(Math.round(k[3] * 100));
    }
    this.VJ.q(q);
    if (this.EU) {
      this.hw(B.yH(this.vL, 1));
      this.OS = !0;
    }
  };
  at.prototype.aIH = function (j) {
    return Math.max(0, Math.min(100, j));
  };
  at.prototype.nD = function (j) {
    return Math.max(0, Math.min(255, j));
  };
  at.prototype.Pq = function (j) {
    return Math.max(0, Math.min(1, j));
  };
  function aR() {
    g7.call(this, [11, 2], "contoureditor");
    this.a0x = null;
    this.T3 = null;
    this.response = null;
    this.AT = J.m("div", "cell");
    this.body.appendChild(this.AT);
    this.hU = J.m("div", "cell padded");
    this.body.appendChild(this.hU);
    var j = J.m("div", "bordered padded vmargin");
    this.AT.appendChild(j);
    this.SY = new i3(null, null, !0);
    this.SY.Q(_.E.n, this.am, this);
    j.appendChild(this.SY._);
    this.v0 = J.y_(this, this.hU);
    this.Q("closebtn", this.iO, this);
  }
  aR.prototype = new g7();
  aR.prototype.GP = function () {
    this.close();
  };
  aR.prototype.T = function () {
    g7.prototype.T.call(this);
    this.v0.T();
    this.SY.T();
  };
  aR.prototype.am = function (j) {
    this.T3.Crv.v = this.SY.V();
    this.response(this.T3);
  };
  aR.prototype.iO = function (j) {
    this.response(this.a0x);
  };
  aR.prototype.Wz = function (j, q) {
    this.a0x = B.S(q.yJ);
    this.T3 = q.yJ;
    this.response = q.response;
    this.SY.q(this.T3.Crv.v);
  };
  function d9() {
    g7.call(this, [11, 4], "duplinto");
    this.fg = null;
    this.caller = null;
    this.rx = null;
    var j = J.m("div", "form");
    J.F(j, "max-width:26em");
    this.body.appendChild(j);
    this.iV = new f1([12, 43], ["abc", "def"]);
    this.iV.Q(_.E.n, this.tS, this);
    j.appendChild(this.iV._);
    J.Ft(j);
    this.ZL = new f1([1, 16, 0], ["abc", "def"]);
    this.ZL.Q(_.E.n, this.tS, this);
    j.appendChild(this.ZL._);
    J.Ft(j);
    this.x8 = new bJ([12, 48], null, 14);
    j.appendChild(this.x8._);
    this.v0 = J.y_(this, j);
  }
  d9.prototype = new g7();
  d9.prototype.bx = function () {
    return !0;
  };
  d9.prototype.T = function () {
    g7.prototype.T.call(this);
    this.v0.T();
    this.iV.T();
    this.x8.T();
  };
  d9.prototype.tS = function (j) {
    if (j && j.target == this.ZL) return;
    var q = this.caller.mS,
      m = this.iV.V(),
      n = q[m],
      G = this.fg,
      W = n != null && n.add.artd != null;
    for (var y = 0; y < G.J.length; y++) if (G.U[G.J[y]].add.artb) W = !1;
    this.x8.yl(m == q.length);
    this.ZL.yl(W);
    if (W) {
      var k = n.root.children,
        T = [],
        b = (this.rx = []);
      for (var y = 0; y < k.length; y++) {
        var c = k[y].v;
        if (c.add.artb) T.push(c.getName());
        b.push(k[y].index);
      }
      this.ZL.ti(T);
      this.ZL.q(0);
    } else this.rx = null;
  };
  d9.prototype.Wz = function (j, q, m) {
    this.fg = j;
    this.caller = m;
    var n = m.mS;
    this.x8.q(j.J.length == 0 ? "Layer" : j.U[j.J[0]].getName());
    var G = [];
    for (var y = 0; y < n.length; y++) {
      var W = n[y].name;
      G.push(W.length < 30 ? W : W.slice(0, 27) + "...");
    }
    G.push([11, 7]);
    this.iV.ti(G);
    this.iV.q(n.indexOf(j));
    this.tS(null);
  };
  d9.prototype.GP = function (j) {
    var q = this.caller.mS,
      m = this.iV.V();
    if (m == q.length) {
      var n = new fb(this.x8.V() + ".psd"),
        G = this.fg.r,
        W = this.fg.$,
        k = this.fg.Tl();
      if (k != -1) {
        var T = this.fg.U[k].Li();
        G = T.r;
        W = T.$;
      }
      n.r = G;
      n.$ = W;
      n.buffer = B.j(n.r * n.$ * 4);
      var b = n.dj();
      b.tV("Background");
      n.e0([b]);
      var c = new fd(_.E.c, !0);
      c.XE = !0;
      c.data = { R: _.Y.ED, fg: n };
      this.k(c);
    }
    var a = this.fg.iG(null, this.fg != q[m]),
      c = new fd(_.E.w, !0);
    c.data = { R: R.Cd, U: a, xw: this.fg, bC: q[m] };
    if (this.rx) c.data.TL = this.rx[this.ZL.V()];
    c.l = L.W1;
    c.XE = !0;
    this.k(c);
    this.close();
  };
  function hJ() {
    g7.call(this, [1, 9], "eassets");
    this.a = null;
    this.fg = null;
    var j = this.body;
    J._g(j, "form");
    j.style.width = "32em";
    this.Dm = new gA(null, ["Layers", "Combinations"]);
    this.Dm.Q(_.E.n, this.ll, this);
    j.appendChild(this.Dm._);
    J.c$(j);
    this.r8 = J.m("span");
    j.appendChild(this.r8);
    this.pG = J.m("div");
    j.appendChild(this.pG);
    var q = J.m("div"),
      m = J.m("div", "flexrow");
    this.a7i = [q, m];
    this.i0 = [
      new av('Only layers / folders, whose name starts with "-e-"'),
      new av("Remove parts outside the canvas"),
      new av("Trim transparent parts"),
    ];
    for (var y = 0; y < 3; y++) {
      var n = this.i0[y];
      n.q(!0);
      n.Q(_.E.n, this.ll, this);
      q.appendChild(n._);
      J.Ft(q);
    }
    this.$z = new bl([12, 14, 0], ["1x", "2x", "3x", "4x"]);
    this.$z.q([!0, !1, !1, !1]);
    q.appendChild(this.$z._);
    var G = J.m("div");
    m.appendChild(G);
    var W = J.m("img");
    W.setAttribute("src", lw.sX("img/nft.png"));
    W.style.width = "150px";
    m.appendChild(W);
    var k = J.m("span");
    k.textContent = "File Names:";
    G.appendChild(k);
    this.xn = new bl(
      null,
      ["1-0-1.XYZ", "head1-eyes0-mouth1.XYZ", "red-green-brown.XYZ"],
      !1,
      null,
      !0
    );
    G.appendChild(this.xn._);
    this.xn.q([!0, !1, !1]);
    J.c$(j);
    this.aHT = ["PNG", "JPG", "SVG", "TIFF", "TGA"];
    this.Q8 = new f1([12, 50], this.aHT);
    this.Q8.Q(_.E.n, this.LA, this);
    j.appendChild(this.Q8._);
    this.qv = new gf();
    j.appendChild(this.qv._);
    this.v0 = new kv([1, 9], !0, null, !0);
    this.v0.Q("click", this.GP, this);
    j.appendChild(this.v0._);
    this.Q("closebtn", this.dt, this);
  }
  hJ.prototype = new g7();
  hJ.prototype.LA = function (j) {
    this.qv.HK(this.aHT[this.Q8.V()], !1, !1, !1, this.fg.$T() != null);
  };
  hJ.prototype.dt = function (j) {
    this.fg = null;
  };
  hJ.prototype.T = function () {
    g7.prototype.T.call(this);
    this.Q8.T();
    this.$z.T();
    this.v0.T();
    this.qv.T();
  };
  hJ.prototype.Wz = function (j, q, m) {
    this.fg = j;
    this.ll();
  };
  hJ.prototype.ll = function (j) {
    var q = this.Dm.V(),
      m;
    J.dI(this.pG);
    this.pG.appendChild(this.a7i[q]);
    if (q == 0) {
      var n = this.a5b();
      m = n.length + " exportable layers";
    } else {
      var n = this.aBn();
      m = n[1] + " combinations (" + n[0].join(" \xD7 ") + ")";
    }
    this.r8.textContent = "- - - " + m;
    this.LA(null);
  };
  hJ.prototype.a5b = function () {
    var j = this.i0[0].V(),
      q = [],
      m = this.fg;
    for (var y = 0; y < m.U.length; y++) {
      var n = m.U[y],
        G = n.getName();
      if ((!j && !n.D1() && !n.H.jG()) || G.startsWith("-e")) q.push(y);
    }
    return q;
  };
  hJ.prototype.aBn = function () {
    var j = this.fg,
      q = j.root.children,
      m = [],
      n = 1,
      G = [];
    for (var y = 0; y < q.length; y++) {
      var W = q[y],
        k = W.v;
      if (k.D1()) {
        var T = W.children.length;
        m.push(T);
        n *= T;
        G.push(W.index);
      }
      k;
    }
    return [m, n, G];
  };
  hJ.prototype.yp = function (j, q) {
    this.a = j;
  };
  hJ.prototype.GP = function (j) {
    var q = this.fg,
      m = this.Dm.V(),
      n = [this.aHT[this.Q8.V()]],
      G = [this.qv.V()],
      W = {};
    if (m == 0) {
      var k = this.$z.V(),
        T = {},
        b = this.a5b();
      if (b.length == 0) {
        alert("No layers to export.");
        return;
      }
      var c = [this.i0[1].V(), this.i0[2].V()];
      for (var y = 0; y < b.length; y++) {
        var a = b[y],
          f = q.U[a],
          U = f.getName();
        U = U.replace(/\//g, "-");
        if (T[U] != null) {
          T[U]++;
          U += " " + T[U];
        } else T[U] = 1;
        var Z = f.Iw();
        f.xg(!0);
        for (var h = 0; h < k.length; h++) {
          if (!k[h]) continue;
          var u = h + 1,
            i = L.YE.a3S(q, n, u, this.a, a, G, c);
          for (var x = 0; x < n.length; x++) {
            var X = n[x],
              $ =
                U.slice(U.startsWith("-e-") ? 3 : 0) +
                (u == 1 ? "" : "@" + u + "x") +
                "." +
                X.toLowerCase();
            if (i[x]) W[$] = new Uint8Array(i[x]);
          }
        }
        f.xg(Z);
      }
    } else {
      var Z = [];
      for (var y = 0; y < q.U.length; y++) Z.push(q.U[y].Iw());
      var H = this.aBn(),
        C = H[0],
        b = H[2],
        l = [];
      function v(S, a, o, V) {
        if (a == S.length) {
          V.push(o.slice(0));
          return;
        }
        var P = S[a];
        for (var y = 0; y < P; y++) {
          o.push(y);
          v(S, a + 1, o, V);
          o.pop(y);
        }
      }
      v(C, 0, [], l);
      var K = this.xn.V().indexOf(!0);
      this.l2 = [l, W, b, n, G, Z, K, this.aJx.bind(this), 0, 0];
      this.aJx();
      return;
    }
    this.AM(W, q.name);
  };
  hJ.prototype.aJx = function () {
    var j = this.l2,
      q = j[0],
      m = j[1],
      n = this.fg,
      G = j[2],
      W = j[3],
      k = j[4],
      T = j[5],
      b = j[6],
      c = j[7],
      a = 0;
    while (q.length != 0 && a < 1e3) {
      var f = Date.now(),
        U = q.shift(),
        Z = [];
      for (var y = 0; y < U.length; y++) {
        var h = n.root.Zg(G[y]);
        for (var u = 0; u < h.children.length; u++) h.children[u].v.xg(!1);
        var i = h.children[U[y]].v;
        Z.push(b == 2 ? i.getName() : h.v.getName() + U[y]);
        i.xg(!0);
      }
      n.gF();
      n.iY();
      var x = (b == 0 ? U : Z).join("-") + "." + W[0].toLowerCase();
      m[x] = new Uint8Array(gh.Wo(n, W[0], n.r, n.$, k[0], this.a));
      j[8]++;
      j[9] += m[x].length;
      a += Date.now() - f;
    }
    if (q.length != 0) {
      alert(j[8] + " done, " + bE.za(j[9]) + ".", 800);
      setTimeout(c, 35);
      return;
    }
    for (var y = 0; y < n.U.length; y++) n.U[y].xg(T[y]);
    n.gF();
    this.AM(m, n.name);
  };
  hJ.prototype.AM = function (j, q) {
    var m = UZIP.encode(j),
      n = new fd(_.E.c, !0);
    n.data = { R: _.Y.xk, data: m, name: q.split(".")[0] + ".zip" };
    this.k(n);
  };
  function fq() {
    g7.call(this, "Export Color Lookup Tables", "exlut");
    this.a = null;
    this.fg = null;
    var j = J.m("div", "form");
    J.F(j, "width:20em");
    this.body.appendChild(j);
    this.i0 = [new k7("Grid Points", 1, 256), new gA([12, 50], [".CUBE"])];
    var q = [16, 0];
    for (var y = 0; y < this.i0.length; y++) {
      var m = this.i0[y];
      m.q(q[y]);
      m.parent = this;
      m.Q(_.E.n, this.ll, this);
      j.appendChild(m._);
      J.Ft(j);
    }
    this.v0 = J.y_(this, j);
    this.Q("closebtn", this.dt, this);
  }
  fq.prototype = new g7();
  fq.prototype._j = function (j, q) {
    if (Math.min(j.r, j.$) < 16) {
      alert("The document must be at least 16 x 16 pixels.", 3200);
      return !1;
    }
    if (j.U.length < 2) {
      alert(
        "There must be a background layer and some adjustment layers.",
        3200
      );
      return !1;
    }
    return !0;
  };
  fq.prototype.dt = function (j) {
    this.fg = null;
  };
  fq.prototype.yp = function (j, q) {
    this.a = j;
  };
  fq.prototype.Wz = function (j, q, m) {
    this.fg = j;
  };
  fq.prototype.GP = function () {
    var j = this.fg,
      q = this.i0[0].V(),
      m = [],
      n = new hk(0, 0, j.r, j.$),
      G = B.j(q * q * 4),
      W = G.slice(0),
      k = new hk((j.r - q) >>> 1, (j.$ - q) >>> 1, q, q),
      T = j.U[0],
      b = T.buffer,
      c = T.H;
    T.H = k;
    T.buffer = G;
    for (var a = 0; a < q; a++) {
      this.awX(q, a, G);
      T.gF(k);
      j.gF(k);
      var f = j.ht();
      B.M4(f, n, W, k);
      for (var U = 0; U < q; U++)
        for (var Z = 0; Z < q; Z++) {
          var h = (U * q + Z) << 2;
          m.push(W[h] / 255, W[h + 1] / 255, W[h + 2] / 255);
        }
    }
    var u = i_.aw9(m, q, j.name);
    jc.save(u, j.name.split(".")[0] + ".CUBE");
    T.buffer = b;
    T.H = c;
    T.gF();
    j.gF();
  };
  fq.prototype.awX = function (j, q, m) {
    var n = 255 / (j - 1),
      G = Math.round(q * n);
    for (var W = 0; W < j; W++)
      for (var k = 0; k < j; k++) {
        var T = (W * j + k) << 2;
        m[T] = Math.round(k * n);
        m[T + 1] = Math.round(W * n);
        m[T + 2] = G;
        m[T + 3] = 255;
      }
  };
  fq.prototype.T = function () {
    g7.prototype.T.call(this);
    for (var y = 0; y < this.i0.length; y++) this.i0[y].T();
    this.v0.T();
  };
  function fF() {
    g7.call(this, [1, 14], "finfo");
    this.aEX = null;
    this.UL = null;
    this.aK6 = null;
    this.IN = J.m("div", "form scrollable label12");
    J.F(this.IN, "width:35em;  height:38em;  margin-bottom:8px");
    this.body.appendChild(this.IN);
    var j = J.m("div", "form");
    this.body.appendChild(j);
    this.U1 = new f1(null, ["Hello"]);
    j.appendChild(this.U1._);
    this.ak_ = new kv("Add Parameter", !1, null, !0);
    j.appendChild(this.ak_._);
    this.ak_.Q("click", this.o5, this);
    this.K1 = new kv("=== S A V E ===", !1, null, !0);
    j.appendChild(this.K1._);
    this.K1.Q("click", this.AM, this);
    this.a6v = "";
  }
  fF.prototype = new g7();
  fF.prototype.lu = function (j, q) {
    return j < 450 || q < 450 ? new ea(0, 0) : new ea(150, 100);
  };
  fF.prototype.o5 = function (j) {
    if (this.aK6.length == 0) return;
    var q = this.aK6[this.U1.V()],
      m = this.Ln();
    m[q] = kI.zm[q][0];
    this.fw(m);
    this.UL[q]._.scrollIntoView();
    this.UL[q].j$();
  };
  fF.prototype.V9 = function (j) {
    var q = this.Ln();
    delete q[j.currentTarget.a8d];
    this.fw(q);
  };
  fF.prototype.AM = function (j) {
    var q = this.Ln(),
      m = this.aEX,
      n = !0;
    for (var G in m) if (JSON.stringify(m[G]) != JSON.stringify(q[G])) n = !1;
    for (var G in q) if (JSON.stringify(m[G]) != JSON.stringify(q[G])) n = !1;
    if (n) return;
    var W = new fd(_.E.w, !0);
    W.l = L.W1;
    W.data = { R: R.uM, Ap: q };
    this.k(W);
    this.aEX = q;
    this.fw(q);
    alert("Metadata saved!");
  };
  fF.aEQ = function (j) {
    function q(G) {
      var W = G.toLowerCase();
      return G == W;
    }
    var m = j.split(":").pop();
    for (var n = 1; n < m.length - 1; n++) {
      if (m[n] == m[n].toUpperCase() && (q(m[n + 1]) || q(m[n - 1]))) {
        m = m.slice(0, n) + " " + m.slice(n);
        n++;
      }
    }
    return m;
  };
  fF.prototype.Wz = function (j, q) {
    this.aEX = j.Un;
    this.fw(j.Un);
  };
  fF.prototype.fw = function (j) {
    var q = this.IN,
      G = 0;
    J.dI(q);
    var m = (this.UL = {}),
      n = ["tiff", "exif", "exif:GPS"],
      W = (this.aK6 = []),
      k = [];
    for (var T in kI.zm) {
      var b = fF.aEQ(T),
        c = 0,
        a = 15,
        f = null;
      if (j[T] == null) {
        if (
          kI.zm[T].length != 1 ||
          T == "photoshop:Credit" ||
          T == "photoshop:Source"
        ) {
          W.push(T);
          k.push(b);
        }
        continue;
      }
      for (var y = 0; y < n.length; y++) if (T.startsWith(n[y])) c = y;
      if (c != G) {
        J.c$(q);
        G = c;
      }
      if (T == "tiff:ImageDescription" || T == "dc:Keywords") {
        a = 18.5;
        f = 3;
      }
      var U = new bJ(b, null, a, f);
      m[T] = U;
      var Z = j[T];
      if (Z instanceof Array) Z = Z[1] == 0 ? "---" : Z[0] + "/" + Z[1];
      var h = new kv("\u2716", null, g$.get([5, 4]));
      q.appendChild(h._);
      h.Q("click", this.V9, this);
      h.a8d = T;
      U.q(Z);
      q.appendChild(U._);
      J.Ft(q);
      if (T == "exif:GPSLongitude" && j["exif:GPSLatitude"]) {
        this.a6v =
          fF.aHr(j["exif:GPSLatitude"]) + "," + fF.aHr(j["exif:GPSLongitude"]);
        var u = new kv("Show on map", !1, null, !0);
        q.appendChild(u._);
        J.Ft(q);
        u.Q("click", this.ane, this);
      }
    }
    this.U1.ti(k);
    this.U1.q(0);
  };
  fF.prototype.Ln = function () {
    var j = this.UL,
      q = kI.zm,
      m = {};
    for (var n in q) {
      var G = q[n][0],
        W = typeof G;
      if (G == null || j[n] == null) continue;
      var k = j[n].V(),
        T = 'The value of "' + fF.aEQ(n) + '" must ';
      if (W == "number") {
        k = parseFloat(k);
        if (isNaN(k)) {
          alert(T + "be a number.");
          k = G;
        }
      } else if (G instanceof Array && G.length == 2) {
        if (k.indexOf("/") == -1) {
          alert(T + "be a fraction.");
          k = G.slice(0);
        } else {
          k = k.split("/").map(parseFloat);
          if (isNaN(k[0]) || isNaN(k[1])) {
            k = G.slice(0);
          }
        }
      }
      m[n] = k;
    }
    return m;
  };
  fF.aHr = function (j) {
    var q = j.length,
      m = j
        .slice(0, q - 1)
        .split(",")
        .map(parseFloat),
      n = j.slice(q - 1),
      G = m[0] + m[1] / 60 + m[2] / 3600;
    if (n != "N" && n != "E") G = -G;
    return G;
  };
  fF.prototype.ane = function (j) {
    window.open("https://maps.google.com?q=" + this.a6v, "Map");
  };
  function bY() {
    g7.call(this, [11, 5], "gradienteditor");
    this.fP = null;
    this.vL = null;
    this.a = null;
    this.hw = null;
    this.OS = !1;
    this.EU = !1;
    this.sY = null;
    this.Cv = null;
    this.Lp = -1;
    this.Om = -1;
    this.GJ = 0;
    this.x4 = this.pf.bind(this);
    this.wZ = this.iu.bind(this);
    this.Bl = J.m("canvas");
    this.lB = this.Bl.getContext("2d");
    J.F(this.Bl, "display:block");
    this.z0 = null;
    J.r$(this.Bl);
    J.PD(this.Bl, this.TG.bind(this));
    this.bD = J.m("div", "form");
    this.jz = J.m("div");
    this.Y0 = J.m("div", "form");
    this.jI = J.m("div");
    this.O3 = new f1(
      [12, 44],
      [
        [15, 10, 0],
        [24, 6],
      ]
    );
    this.O3.Q(_.E.n, this.kI, this);
    this.body.appendChild(this.O3._);
    J.c$(this.body);
    var j = this.bD;
    this.iJ = new k7([19, 3, 3], 0, 100, "%");
    this.iJ.Q(_.E.n, this.kI, this);
    this.iJ.parent = this;
    j.appendChild(this.iJ._);
    J.Ft(j);
    this.a6u = new aD([12, 0]);
    j.appendChild(this.a6u._);
    this.lK = J.m("div", "bordered padded noalign");
    j.appendChild(this.lK);
    this.rv = new k7([12, 0], 0, 100, "%");
    this.rv.parent = this;
    this.rv.Q(_.E.n, this.kI, this);
    this.lK.appendChild(this.rv._);
    this.xb = new k7([12, 40], 0, 100, "%");
    this.xb.parent = this;
    this.xb.Q(_.E.n, this.kI, this);
    this.lK.appendChild(this.xb._);
    this.RZ = new kv([5, 4], !1, null, !0);
    this.RZ.Q("click", this.a0R, this);
    this.lK.appendChild(this.RZ._);
    j.appendChild(this.jz);
    this.avA = new aD([13, 0]);
    j.appendChild(this.avA._);
    this.fJ = J.m("div", "bordered padded noalign");
    j.appendChild(this.fJ);
    this.Ef = new f1(
      [12, 44],
      [
        [12, 45],
        [12, 46],
        [12, 47],
      ]
    );
    this.Ef.Q(_.E.n, this.kI, this);
    this.fJ.appendChild(this.Ef._);
    this.CN = new g1(!0);
    this.CN.parent = this;
    this.CN.Q(_.E.n, this.kI, this);
    this.fJ.appendChild(this.CN._);
    this.xd = new k7([12, 40], 0, 100, "%");
    this.xd.parent = this;
    this.xd.Q(_.E.n, this.kI, this);
    this.fJ.appendChild(this.xd._);
    this.ko = new kv([5, 4], !1, null, !0);
    this.ko.Q("click", this.a37, this);
    this.fJ.appendChild(this.ko._);
    var j = this.Y0;
    this.eY = new k7("Roughness", 0, 100, "%");
    this.eY.Q(_.E.n, this.kI, this);
    this.eY.parent = this;
    j.appendChild(this.eY._);
    j.appendChild(this.jI);
    this.ET = new kv([25, 1, 2], !1, null, !0);
    this.ET.Q("click", this.kI, this);
    j.appendChild(this.ET._);
    this.v0 = J.y_(this);
    this.Q("closebtn", this.JT, this);
  }
  bY.prototype = new g7();
  bY.prototype.JT = function (j) {
    if (this.OS) this.hw(this.fP);
    this.hw = null;
    this.EU = !1;
  };
  bY.prototype.T = function () {
    g7.prototype.T.call(this);
    this.v0.T();
    this.iJ.T();
    this.a6u.T();
    this.avA.T();
    this.RZ.T();
    this.ko.T();
    this.rv.T();
    this.xb.T();
    this.Ef.T();
    this.xd.T();
    this.ET.T();
  };
  bY.prototype.yp = function (j, q) {
    this.a = j;
    if (q == fG.Ru) this.FE();
  };
  bY.prototype.Wz = function (j, q) {
    this.vL = B.S(q.MV);
    this.fP = B.S(q.MV);
    this.sY = this.Cv = null;
    this.hw = q.cy;
    this.OS = !1;
    this.EU = q.kX;
    this.FE();
    this.wi();
  };
  bY.prototype.GP = function (j) {
    var q = this.vL;
    this.hw(q);
    this.close();
    this.hw = null;
    this.EU = !1;
  };
  bY.prototype.oa = function (j) {
    return j == gn.gv || j == gn.N7;
  };
  bY.prototype.uY = function (j, q, m, n) {
    if (n.M(gn.gv) || n.M(gn.N7)) {
      if (this.Cv) this.a0R();
      if (this.sY) this.a37();
    }
  };
  bY.prototype.a0R = function (j) {
    var q = this.vL.Trns.v;
    if (this.Cv == null || q.length == 1) return;
    q.splice(q.indexOf(this.Cv), 1);
    this.Cv = null;
    this.FE();
    this.wi();
  };
  bY.prototype.a37 = function (j) {
    var q = this.vL.Clrs.v;
    if (this.sY == null || q.length == 1) return;
    q.splice(q.indexOf(this.sY), 1);
    this.sY = null;
    this.FE();
    this.wi();
  };
  bY.prototype.FE = function () {
    var j = this.Bl,
      q = this.lB;
    if (this.vL == null) return;
    var m = J.IC();
    j.width = Math.floor(410 * m);
    j.height = Math.floor(70 * m);
    J.Mg(j, j.width, j.height);
    j.style.marginTop = "8px";
    this.z0 = new hk(0, 0, Math.floor(380 * m), Math.floor(32 * m));
    this.z0.x = Math.floor((j.width - this.z0.r) / 2);
    this.z0.y = Math.floor((j.height - this.z0.$) / 2);
    var n = this.z0,
      G = n.r,
      W = n.$,
      k = n.x,
      T = n.y,
      b = new hk(0, 0, G, W),
      c = q.getImageData(0, 0, G, W),
      a = new Uint8Array(c.data.buffer);
    B.L_(a, G, W, 8);
    var f = B.j(G * W * 4);
    B.MV.S$(
      this.vL,
      f,
      b,
      [1 / G, 0, 0, 1 / W],
      G / 2,
      W / 2,
      !1,
      0,
      this.a.UP,
      this.a.vH
    );
    B.G.Jg("norm", f, n, a, n, n, 1);
    q.clearRect(0, 0, j.width, j.height);
    q.putImageData(c, k, T);
    var U = this.vL;
    if (U.Clrs) {
      var Z = U.Trns.v,
        h = U.Clrs.v,
        u = B.MV.aD6(U, this.a.UP, this.a.vH),
        i = Math.round(6 * J.IC()),
        x = Math.round(14 * J.IC()),
        X = this.Cv ? this.Cv.v : null,
        $ = this.sY ? this.sY.v : null;
      for (var y = 0; y < Z.length; y++) {
        var H = Z[y].v,
          C = Math.round(255 - (255 * H.Opct.v.val) / 100);
        if (
          (H == X || (Z[y - 1] && Z[y - 1].v == X) || y == this.Om) &&
          y != 0
        ) {
          q.fillStyle = "#000000";
          q.fillRect(
            k -
              3 +
              (G *
                (Z[y - 1].v.Lctn.v +
                  ((H.Lctn.v - Z[y - 1].v.Lctn.v) * H.Mdpn.v) / 100)) /
                4096,
            T - 6 - 2,
            6,
            6
          );
        }
        if (H == X) {
          q.fillStyle = "#ffffff";
          q.fillRect(
            k - i + G * (H.Lctn.v / 4096) - 2,
            T - 2 - x - 2,
            2 * i + 4,
            x + 4
          );
        }
        q.fillStyle = "rgb(" + C + "," + C + "," + C + ")";
        q.fillRect(k - i + G * (H.Lctn.v / 4096), T - 2 - x, 2 * i, x);
      }
      for (var y = 0; y < h.length; y++) {
        var l = h[y].v,
          v = u[0][y][0];
        if (
          (l == $ || (h[y - 1] && h[y - 1].v == $) || y == this.Lp) &&
          y != 0
        ) {
          q.fillStyle = "#000000";
          q.fillRect(
            k -
              3 +
              (G *
                (h[y - 1].v.Lctn.v +
                  ((l.Lctn.v - h[y - 1].v.Lctn.v) * l.Mdpn.v) / 100)) /
                4096,
            T + W + 2,
            6,
            6
          );
        }
        if (l == $) {
          q.fillStyle = "#ffffff";
          q.fillRect(
            k - i + G * (l.Lctn.v / 4096) - 2,
            T + W + 2 - 2,
            2 * i + 4,
            x + 4
          );
        }
        q.fillStyle =
          "rgb(" +
          Math.round(v.o) +
          ", " +
          Math.round(v.i) +
          "," +
          Math.round(v.X) +
          ")";
        q.fillRect(k - i + G * (l.Lctn.v / 4096), T + W + 2, 2 * i, x);
      }
    }
    if (this.EU) {
      this.hw(this.vL);
      this.OS = !0;
    }
  };
  bY.prototype.wi = function () {
    var j = this.vL,
      q = j.Clrs ? 0 : 1;
    this.O3.q(q);
    if (J.JO(this.bD)) this.body.removeChild(this.bD);
    if (J.JO(this.Y0)) this.body.removeChild(this.Y0);
    (q == 0 ? this.jz : this.jI).appendChild(this.Bl);
    if (q == 0) {
      this.body.appendChild(this.bD);
      this.iJ.q(Math.round((100 * j.Intr.v) / 4096));
      var m = j.Trns.v,
        n = j.Clrs.v,
        G = this.Cv != null,
        W = this.Om != -1;
      this.rv.yl(G);
      this.xb.yl(G || W);
      this.RZ.yl(G);
      if (G) {
        J.F(this.lK, "");
        var k = this.Cv.v;
        this.xb.q(Math.round((100 * k.Lctn.v) / 4096));
        this.rv.q(k.Opct.v.val);
      }
      if (W) this.xb.q(m[this.Om].v.Mdpn.v);
      var G = this.sY != null,
        W = this.Lp != -1;
      this.Ef.yl(G);
      this.CN.yl(G);
      this.xd.yl(G || W);
      this.ko.yl(G);
      if (G) {
        J.F(this.fJ, "");
        var T = this.sY.v;
        this.xd.q(Math.round((100 * T.Lctn.v) / 4096));
        var b = T.Type.v.Clry;
        this.Ef.q(["FrgC", "BckC", "UsrS"].indexOf(b));
        if (b == "FrgC") this.CN.kK(this.a.UP);
        if (b == "BckC") this.CN.kK(this.a.vH);
        if (b == "UsrS") this.CN.q(T.Clr.v);
      }
      if (W) this.xd.q(n[this.Lp].v.Mdpn.v);
    } else {
      this.body.appendChild(this.Y0);
      this.eY.q(Math.round((100 * j.Smth.v) / 4096));
    }
    this.body.appendChild(this.v0._);
  };
  bY.prototype.kI = function (j) {
    var q = this.vL,
      m = q.Clrs ? 0 : 1;
    if (j.target == this.O3) {
      var n = m == 0 ? JSON.parse(eu.PV.aFu).v : k0.i4("grdm").Grad.v;
      this.vL = n;
      this.wi();
      this.FE();
      return;
    }
    if (m == 0) {
      q.Intr.v = Math.round((4096 * this.iJ.V()) / 100);
      var G = q.Trns.v,
        W = q.Clrs.v;
      if (this.Cv != null) {
        var k = this.Cv.v;
        k.Lctn.v = Math.round(4096 * (this.xb.V() / 100));
        k.Opct.v.val = this.rv.V();
      }
      if (this.sY != null) {
        var T = this.sY.v;
        T.Lctn.v = Math.round(4096 * (this.xd.V() / 100));
        if (j.target == this.CN) this.Ef.q(2);
        var b = this.Ef.V();
        T.Type.v.Clry = ["FrgC", "BckC", "UsrS"][b];
        if (b == 2) T.Clr = { t: "Objc", v: this.CN.V() };
        else if (T.Clr) delete T.Clr;
      }
      if (this.Om != -1) G[this.Om].v.Mdpn.v = this.xb.V();
      if (this.Lp != -1) W[this.Lp].v.Mdpn.v = this.xd.V();
    } else {
      q.Smth.v = Math.round((4096 * this.eY.V()) / 100);
      if (j.target == this.ET)
        q.RndS.v = Math.floor(Math.random() * 4294967295);
    }
    this.FE();
  };
  bY.prototype.TG = function (j) {
    var q = J.QR(j, this.Bl),
      m = this.z0,
      n = (q.x * J.IC() - m.x) / m.r,
      G = (q.y * J.IC() - m.y) / m.$,
      W = this.vL.Trns.v,
      k = this.vL.Clrs.v,
      T = null,
      b = null,
      c = -1,
      a = -1;
    if (G < 1)
      for (var y = 0; y < W.length; y++) {
        var f = W[y].v;
        if (Math.abs(f.Lctn.v / 4096 - n) < 0.02) T = W[y];
        if (y > 0)
          if (
            Math.abs(
              (W[y - 1].v.Lctn.v +
                ((f.Lctn.v - W[y - 1].v.Lctn.v) * f.Mdpn.v) / 100) /
                4096 -
                n
            ) < 0.01
          )
            c = y;
      }
    if (G > 0)
      for (var y = 0; y < k.length; y++) {
        var U = k[y].v;
        if (Math.abs(U.Lctn.v / 4096 - n) < 0.02) b = k[y];
        if (y > 0)
          if (
            Math.abs(
              (k[y - 1].v.Lctn.v +
                ((U.Lctn.v - k[y - 1].v.Lctn.v) * U.Mdpn.v) / 100) /
                4096 -
                n
            ) < 0.01
          )
            a = y;
      }
    if (b == null && T == null && c == -1 && a == -1) {
      if (G < 0) {
        var f = {
          t: "Objc",
          v: {
            classID: "TrnS",
            Opct: { t: "UntF", v: { type: "#Prc", val: 100 } },
            Lctn: { t: "long", v: 0 },
            Mdpn: { t: "long", v: 50 },
          },
        };
        f.v.Lctn.v = Math.round(n * 4096);
        W.push(f);
        W.sort(this.pX);
        T = f;
      }
      if (G > 1) {
        var k = this.vL.Clrs.v,
          Z = B.MV.aD6(this.vL, this.a.UP, this.a.vH),
          h = B.MV.UM(this.vL, Z, n),
          U = {
            t: "Objc",
            v: {
              classID: "Clrt",
              Clr: {
                t: "Objc",
                v: B.MV.Ia({
                  o: h & 255,
                  i: (h >> 8) & 255,
                  X: (h >> 16) & 255,
                }),
              },
              Type: { t: "enum", v: { Clry: "UsrS" } },
              Lctn: { t: "long", v: 0 },
              Mdpn: { t: "long", v: 50 },
            },
          };
        U.v.Lctn.v = Math.round(n * 4096);
        k.push(U);
        k.sort(this.pX);
        b = U;
      }
    }
    if (b != null) a = -1;
    if (T != null) c = -1;
    if (b != null || T != null || c > -1 || a > -1) {
      this.Cv = T;
      this.sY = b;
      this.Om = c;
      this.Lp = a;
      this.wi();
      this.FE();
      J.dJ(window, this.x4);
      J.sP(window, this.wZ);
    }
  };
  bY.prototype.pf = function (j) {
    var q = J.QR(j, this.Bl),
      m = this.z0,
      n = (q.x * J.IC() - m.x) / m.r,
      G = (q.y * J.IC() - m.y) / m.$;
    n = Math.max(0, Math.min(1, n));
    var W = this.vL.Trns.v,
      k = this.vL.Clrs.v;
    if (this.Cv != null) {
      var T = this.Cv.v;
      T.Lctn.v = Math.round(4096 * n);
      var b = W.indexOf(this.Cv);
      if (b != -1 && G < -1 && W.length > 1) W.splice(b, 1);
      if (b == -1 && G > -1) W.push(this.Cv);
      W.sort(this.pX);
    }
    if (this.sY != null) {
      var c = this.sY.v;
      c.Lctn.v = Math.round(4096 * n);
      var a = k.indexOf(this.sY);
      if (a != -1 && G > 2 && k.length > 1) k.splice(a, 1);
      if (a == -1 && G < 2) k.push(this.sY);
      k.sort(this.pX);
    }
    if (this.Om > -1) {
      var T = W[this.Om].v;
      T.Mdpn.v = Math.max(
        5,
        Math.min(
          95,
          Math.round(
            (100 * (n * 4096 - W[this.Om - 1].v.Lctn.v)) /
              (T.Lctn.v - W[this.Om - 1].v.Lctn.v)
          )
        )
      );
    }
    if (this.Lp > -1) {
      var c = k[this.Lp].v;
      c.Mdpn.v = Math.max(
        5,
        Math.min(
          95,
          Math.round(
            (100 * (n * 4096 - k[this.Lp - 1].v.Lctn.v)) /
              (c.Lctn.v - k[this.Lp - 1].v.Lctn.v)
          )
        )
      );
    }
    if (this.Cv != null || this.sY != null || this.Om > -1 || this.Lp > -1) {
      this.wi();
      this.FE();
    }
  };
  bY.prototype.iu = function (j) {
    J.BJ(window, this.x4);
    J.mW(window, this.wZ);
    if (Date.now() - this.GJ < 300) {
      if (this.Lp != -1 || this.Om != -1) {
        var q = (
          this.Lp != -1 ? this.vL.Clrs.v[this.Lp] : this.vL.Trns.v[this.Om]
        ).v;
        q.Mdpn.v = 50;
        this.wi();
        this.FE();
      } else if (this.sY != null) this.CN.ej();
    }
    this.GJ = Date.now();
  };
  bY.prototype.pX = function (j, q) {
    return j.v.Lctn.v - q.v.Lctn.v;
  };
  function ey() {
    g7.call(this, [11, 5], "vgradienteditor");
    this.hw = null;
    this.iv = new dR();
    this.iv.parent = this;
    this.body.appendChild(this.iv._);
    this.v0 = J.y_(this, this.body);
  }
  ey.prototype = new g7();
  ey.prototype.Wz = function (j, q) {
    this.hw = q.cy;
    this.iv.q(q.K);
  };
  ey.prototype.T = function () {
    g7.prototype.T.call(this);
    this.iv.T();
  };
  ey.prototype.GP = function (j) {
    this.hw(this.iv.V());
    this.close();
  };
  function fT(j) {
    g7.call(this, j == "isize" ? [11, 10] : [11, 3], j);
    this.aos = j;
    this.pU = null;
    var q = J.m("div", "form");
    J.F(q, "width:20em; margin-bottom:1em; margin-top:-1em;");
    this.body.appendChild(q);
    var m = j == "csize";
    this.apw = new aD("Hi");
    q.appendChild(this.apw._);
    J.Ft(q);
    this.X0 = new aY(!0, !0, m, m, !0);
    if (m) this.X0.aHw(!1);
    q.appendChild(this.X0._);
    this.gs = new av([12, 25, 3]);
    this.gs.q(!0);
    this.gs.Q(_.E.n, this.aFz, this);
    this.vn = new f1(null, [
      [12, 14, 2],
      [12, 14, 3],
      [12, 14, 4],
    ]);
    this.vn.q(1);
    this.gK = new cg([12, 23, 2], 41);
    this.gK.q(4);
    if (j == "isize") {
      q.appendChild(this.gs._);
      q.appendChild(this.vn._);
    } else q.appendChild(this.gK._);
    this.v0 = J.y_(this, this.body);
  }
  fT.prototype = new g7();
  fT.prototype._j = function (j, q) {
    return j != null;
  };
  fT.prototype.bx = function () {
    return !0;
  };
  fT.prototype.oa = function (j) {
    return this.aos == "isize"
      ? !1
      : [gn.MN, gn.Al, gn.w0, gn.K3].indexOf(j) != -1;
  };
  fT.prototype.uY = function (j, q, m, n) {
    if (n.M(gn.FP)) this.GP();
    this.gK.a75(n.m2());
  };
  fT.prototype.T = function () {
    g7.prototype.T.call(this);
    this.X0.T();
    this.gs.T();
    this.vn.T();
    this.gK.T();
    this.v0.T();
  };
  fT.prototype.GP = function (j) {
    var q = this.X0.V(),
      m = q.x,
      n = q.y,
      G = new fd(_.E.NI, !0),
      W = this.X0.Jw.V();
    if (this.aos == "csize") {
      if (W) {
        var k = this.X0.Kk,
          T = this.X0.i1;
        m = T.x - k.x;
        n = T.y - k.y;
      }
      G.data = L.xC.aDh(m, n, this.gK.V(), W);
    } else {
      var b = this.vn.V();
      if (!this.gs.V()) b = null;
      var c = this.X0.alc(),
        a = this.pU;
      console.log(c);
      if (c == 1) G.data = L.xC.ly(m / a.x, n / a.y, this.X0.HB(), b, !0);
      else G.data = L.xC.ly(m, n, this.X0.HB(), b);
    }
    this.close();
    this.k(G);
  };
  fT.prototype.Wz = function (j, q) {
    this.pU = new ea(j.r, j.$);
    this.X0.q(this.pU, j.zv);
    this.X0.j$();
    this.apw.q(
      g$.get(this.KM) + ": " + ((j.r * j.$) / 1e6).toFixed(2) + " MPx"
    );
  };
  fT.prototype.aFz = function (j) {
    var q = this.gs.V(),
      m = this.X0,
      n = this.vn;
    if (q) n.hC();
    else n.Ub();
    m.a0_(q);
  };
  function c8() {
    g7.call(this, "Import RAW", "importraw");
    var j = J.m("div", "flexrow"),
      q = J.m("div");
    J.F(q, "margin-bottom: 1em");
    this.body.appendChild(j);
    this.body.appendChild(q);
    var m = J.m("div", "form");
    J.F(m, "width:18em");
    j.appendChild(m);
    var n = J.m("div", "form");
    J.F(n, "width:15em");
    j.appendChild(n);
    this.mM = null;
    this.hi = null;
    this.S_ = null;
    this.Wl = null;
    this.A3 = [];
    var G = [];
    for (var y = 0; y < c8.pY.length; y++) G.push(c8.pY[y] + " Bits");
    var W = (this.l2 = [
      new aY(!0, null, null, !0),
      new k7([12, 72], 1, 8),
      new av("Last one is Transparency"),
      new gA([12, 34], G),
      new gA("Byte Order", ["12-34", "34-12"]),
      new f1("Guesses", []),
    ]);
    for (var y = 0; y < W.length; y++) {
      var k = W[y];
      k.parent = this;
      k.Q(_.E.n, y == 5 ? this.aze : this.tS, this);
      var T = y == 0 ? m : y == 5 ? q : n;
      T.appendChild(k._);
    }
    this.Bl = J.m("canvas");
    this.lB = this.Bl.getContext("2d");
    this.body.appendChild(this.Bl);
    this.v0 = J.y_(this, this.body);
  }
  c8.prototype = new g7();
  c8.prototype.T = function () {
    g7.prototype.T.call(this);
    var j = this.l2;
    this.v0.T();
    for (var y = 0; y < j.length; y++) j[y].T();
  };
  c8.prototype.GP = function (j) {
    this.close();
    var q = this.l2[0].V(),
      m = gh.wk(this.hi, [{ data: this.S_, Iu: new hk(0, 0, q.x, q.y) }]);
    if (this.Wl) m._E = this.Wl;
    var n = new fd(_.E.c, !0);
    n.data = { R: !0 ? _.Y.ED : _.Y.S3, fg: m };
    this.k(n);
  };
  c8.pY = [8, 16];
  c8.prototype.Wz = function (j, q) {
    this.mM = new Uint8Array(q.Ul);
    this.hi = q.Sh;
    var m = this.mM.length,
      n = [1, 3, 4],
      G = 0,
      W = 0,
      k = 1,
      T = 1,
      b = (this.A3 = []),
      c = Math.round(Math.sqrt(m) * 2);
    c = Math.max(c, 4e3);
    for (var a = 0; a < 3; a++) {
      for (var f = 0; f < 2; f++) {
        var U = c8.pY[f],
          Z = n[a],
          h = Z * U,
          u = Math.round((m * 8) / h);
        if (u != (m * 8) / h) continue;
        for (var i = 0; i <= c; i++)
          for (var x = 0; x <= c; x++)
            if (i * x == u) {
              var X = 0;
              if (i == x) X += 64;
              if (
                Math.round(i / 100) == i / 100 &&
                Math.round(x / 100) == x / 100
              )
                X += 32;
              if (Math.round(i / 10) == i / 10 && Math.round(x / 10) == x / 10)
                X += 16;
              if (Math.round(i / 2) == i / 2 && Math.round(x / 2) == x / 2)
                X += 8;
              b.push([i, x, Z, U, X]);
            }
      }
    }
    var $ = function (v, K) {
      if (K[4] != v[4]) return K[4] - v[4];
      var S = Math.max(v[0], v[1]) / Math.min(v[0], v[1]),
        o = Math.max(K[0], K[1]) / Math.min(K[0], K[1]);
      if (S != o) return S - o;
      return K[0] - v[0];
    };
    b.sort($);
    var H = this.l2,
      C = [];
    for (var y = 0; y < b.length; y++) {
      var l = b[y];
      C.push(l[0] + " x " + l[1] + ", " + l[2] + "ch, " + l[3] + "-bit");
    }
    H[5].ti(C);
    H[5].q(0);
    this.aze(null);
  };
  c8.prototype.aze = function (j) {
    var q = this.l2,
      m = this.A3[this.l2[5].V()];
    q[0].q(new ea(m[0], m[1]), 72);
    q[1].q(m[2]);
    q[3].q(c8.pY.indexOf(m[3]));
    this.tS();
  };
  c8.prototype.tS = function (j) {
    var q = this.l2,
      m = q[0].V(),
      n = m.x,
      G = m.y,
      W = c8.pY[q[3].V()],
      k = this.mM;
    if (W == 16 && q[4].V() == 1) {
      k = k.slice(0);
      for (var y = 0; y < k.length; y += 2) {
        var T = k[y];
        k[y] = k[y + 1];
        k[y + 1] = T;
      }
    }
    var b = (this.S_ = this.LN(k, n, G, q[1].V(), W, q[2].V())),
      c = this.Bl,
      a = this.lB,
      f = [b, new hk(0, 0, n, G)];
    B.HZ(f);
    for (var y = 0; y < f.length; y += 2)
      if (f[y + 1].$ < 300) {
        b = f[y];
        n = f[y + 1].r;
        G = f[y + 1].$;
        break;
      }
    c.width = n;
    c.height = G;
    J.Mg(c, n, G);
    var U = new ImageData(new Uint8ClampedArray(b.buffer), n, G);
    a.putImageData(U, 0, 0);
  };
  c8.prototype.LN = function (j, q, m, n, G, W) {
    this.Wl = null;
    var k = [],
      T = q * m;
    for (var b = 0; b < n; b++) {
      var c = B.j(T);
      k.push(c);
      if (G == 8) for (var y = 0; y < T; y++) c[y] = j[y * n + b];
      else if (G == 16)
        for (var y = 0; y < T; y++)
          c[y] = Math.round(
            ((j[(y * n + b) * 2] << 8) | j[(y * n + b) * 2 + 1]) * (255 / 65535)
          );
    }
    var a = B.j(T * 4);
    B.bs(a, 4278190080);
    if (W) {
      B.ln(k.pop(), a, 3);
      n--;
    }
    if (n == 0) {
    } else if (n == 1) B.QZ(k[0], a);
    else {
      B.ln(k[0], a, 0);
      B.ln(k[1], a, 1);
      if (n > 2) {
        B.ln(k[2], a, 2);
        if (n > 3) {
          this.Wl = [];
          for (var y = 3; y < n; y++) {
            var f = new R.T0();
            f.name = "Alpha " + (y - 2);
            f.H = new hk(0, 0, q, m);
            f.N = k[y];
            this.Wl.push(f);
          }
        }
      }
    }
    return a;
  };
  function a4(j, q, m) {
    kV.call(this);
    this._ = J.m("div", "");
    this.Tg = j;
    this.Vc = null;
    this.iv = q == null ? !1 : q;
    this.qe = null;
    this.lX = m;
    this.aGC = [];
    this.h2 = [];
    this._Z = [];
    this.Ha = [];
    this.pi = 0;
    this.Vc = this.a1V(a4.Ha[j]);
    this.zw();
    this.zW = null;
    this.a1U;
    this.a0Z;
  }
  a4.prototype = new kV();
  a4.prototype.oo = function (j, q, m, n, G) {
    this.zW = G;
    this.a1U = B.S(this.qe);
    if (this.Vc.lagl) this.a0Z = this.Vc.lagl.V()[0];
  };
  a4.prototype.C3 = function (j, q, m, n, G) {
    var W = this.zW,
      k = this.Tg,
      T = this.a1U;
    if (W == null) return;
    var b = (G.x - W.x) / j.I.k3,
      c = (G.y - W.y) / j.I.k3;
    if (k == "GrFl") {
      var a = B.S(T.Ofst.v);
      a.Hrzn.v.val += b * 0.5;
      a.Vrtc.v.val += c * 0.5;
      this.Vc.Ofst.q(a, !0);
    }
    if (k == "patternFill") {
      var a = B.S(T.phase.v);
      a.Hrzn.v += b;
      a.Vrtc.v += c;
      this.Vc.phase.q(a, !0);
    }
    if (k == "DrSh" || k == "IrSh" || k == "ChFX") {
      var f = T.Dstn.v.val,
        U = (this.a0Z * Math.PI) / 180,
        Z = -Math.cos(U) * f + b,
        h = Math.sin(U) * f + c;
      this.Vc.Dstn.q(Math.sqrt(Z * Z + h * h), !0);
      this.Vc.lagl.q([(Math.atan2(h, -Z) * 180) / Math.PI], !0);
    }
  };
  a4.prototype.H_ = function (j, q, m, n, G) {
    this.zW = null;
  };
  a4.prototype.a7n = function () {
    for (var y = 0; y < this.Ha.length; y++) {
      J.XZ(this.Ha[y], "selected");
      if (this._Z[y] instanceof av) this._Z[y].q(!1);
    }
  };
  a4.prototype.aG2 = function (j) {
    var q = this.a5E.bind(this);
    for (var y = 0; y < this._Z.length; y++) {
      var m = J.m("div", "listitem");
      this.Ha.push(m);
      if (y > 0) m.textContent = "\u2003";
      m.appendChild(this._Z[y]._);
      if (eu.acY.indexOf(this.Tg) != -1) {
        var n = new kv("+");
        n.mb();
        n._.style.float = "right";
        m.appendChild(n._);
        var G = new kv("\u2B0D");
        G.mb();
        G._.style.float = "right";
        G._.style["margin-right"] = "2px";
        m.appendChild(G._);
      }
      m.addEventListener("click", q, !1);
      j.appendChild(m);
    }
  };
  a4.B5 = function (j, q) {
    var m = q.getBoundingClientRect();
    return (j.clientY - m.top) / m.height;
  };
  a4.prototype.a5E = function (j) {
    var q = j.target.tagName.toLowerCase();
    if (q == "input") {
      return;
    }
    if (q == "button") {
      var m = new fd(_.E.w, !0),
        n = j.target.textContent == "+",
        G = n ? 0 : a4.B5(j, j.target) < 0.5 ? -1 : 1;
      if (n) m.data = { R: "st_dupsingle", v: this.parent.data.v, Os: this.lX };
      else
        m.data = {
          R: "st_movsingle",
          v: this.parent.data.v,
          Os: this.lX,
          ad5: G,
        };
      m.l = L.EJ;
      m.XE = !0;
      this.k(m);
      m = new fd("redrawall", !0);
      m.data = { ad5: G };
      this.k(m);
      return;
    }
    J.iO(j);
    this.LD();
    this.pi = this.Ha.indexOf(j.currentTarget);
    this.k(new fd("showme"));
  };
  a4.prototype.LD = function () {
    if (this.Vc.enab && this.Vc.enab.V() == !1) this.lD({ Fr: "enab", K: !0 });
  };
  a4.prototype.aaa = function () {
    var j = this.Ha[this.pi];
    if (j) J._g(j, "selected");
    return this.h2[this.pi];
  };
  a4.prototype.a1V = function (j) {
    var q = {};
    for (var y = 0; y < j.length; y++) {
      var m = j[y],
        n = null;
      if (m == "----") n = { _: J.m("hr") };
      if (m == "\n") n = { _: J.m("br") };
      if (m == "blOptions") n = new aD([14, 10]);
      if (m == "brst") n = new bl([12, 72], ["R", "G", "B"]);
      if (m == "knko") n = new f1("Knockout", [[13, 1, 0], "Shallow", "Deep"]);
      if (m == "enab") n = new av(eu.names[eu.order.indexOf(this.Tg)]);
      if (m == "lrMd" || m == "Md") n = new f1([12, 19, 0], kJ.nb, kJ.hb);
      if (m == "Opct")
        n = this.iv
          ? new k7([12, 0], 0, 100, "%")
          : new dV([12, 0], 0, 100, "%");
      if (m == "iOpa") n = new dV([12, 26], 0, 100, "%");
      if (m == "blIf") n = new bu();
      if (m == "ShdN") n = new dV([12, 68], 0, 100, "%");
      var G = this.Tg == "St3D" && m == "lagl";
      if (m == "lagl" || m == "Angl")
        n = new iI(G ? "Light" : [12, 15], this.Tg == "ebbl" || G);
      if (m == "uglg") n = new av([12, 27]);
      if (m == "Dstn") n = new dV([12, 28], 0, 200, "px");
      if (m == "Ckmt") n = new dV([12, 29], 0, 100, "%");
      if (m == "Srnk") n = new dV("Shrink", 0, 100, "%");
      if (m == "Drkn") n = new dV("Darken", 0, 100, "%");
      if (m == "blur") n = new dV([12, 14, 0], 0, 200, "px");
      if (m == "TrnS" || m == "MpgS") n = new gR([12, 21]);
      if (m == "Nose") n = new dV([12, 30], 0, 100, "%");
      if (m == "layerConceals") n = new av([12, 31]);
      if (m == "Cntn") n = new av([12, 25, 4]);
      if (m == "AntA" || m == "antialiasGloss") n = new av([12, 25, 1]);
      if (m == "GlwT") n = new f1([12, 32], eu.sD.names);
      if (m == "glwS") n = new f1([12, 70], eu.sD.anq);
      if (m == "Inpr") n = new dV([12, 12], 1, 100, "%");
      if (m == "bvlS") n = new f1([12, 22], eu.pO.style);
      if (m == "bvlT") n = new f1([12, 32], eu.pO.auv);
      if (m == "bvlD") n = new f1(null, eu.pO.dir);
      if (m == "srgR") n = new dV([12, 34], 0, 1e3, "%");
      if (m == "Sftn") n = new dV([12, 35], 0, 20, "px");
      if (m == "Lald") n = q.lagl;
      if (m == "hglM" || m == "sdwM") n = new f1([12, 36], kJ.nb, kJ.hb);
      if (m == "hglC" || m == "sdwC") n = new g1();
      if (m == "hglO" || m == "sdwO") n = new dV([12, 0], 0, 100, "%");
      if (m == "Invr" || m == "InvT") n = new av([4, 11]);
      if (m == "overprint") n = new av("Overprint");
      if (m == "Sz") n = new dV([12, 14, 0], 1, 200, "px");
      if (m == "Styl") n = new f1([12, 40], eu.stroke.names);
      if (m == "PntT") n = new f1([12, 66], eu.stroke.azy);
      if (m == "Clr") n = new g1(!0);
      if (m == "Grad") {
        n = new iB(!0, this.iv ? null : [12, 37], !0);
        n.q(JSON.parse(eu.PV.aKJ).v);
      }
      if (m == "Rvrs") n = new av([12, 23, 0]);
      if (m == "Dthr") n = new av([12, 23, 3]);
      if (m == "Type")
        n = new f1(
          this.iv ? null : [12, 22],
          eu.MV.names.slice(0, this.Tg == "FrFX" ? 6 : 5)
        );
      if (m == "gs99")
        n = new f1("Method", [
          "Perceptual",
          "Linear",
          "Classic",
          "Smooth",
          "Stripes",
        ]);
      if (m == "Ptrn") n = new bW([12, 62]);
      if (m == "Scl") n = new dV([12, 38], 5, 500, "%", 0, !0);
      if (m == "Algn") n = new av([12, 39]);
      if (m == "Ofst") n = new f6(!0);
      if (m == "phase") n = new f6(!1);
      if (m == "useShape") n = new av([12, 21]);
      if (m == "useTexture") n = new av([12, 67]);
      if (m == "textureDepth") n = new dV([12, 34], -300, 300, "%");
      var W = m == "----" || m == "\n" ? m + y : m;
      if (m == "gs99" && this.iv) W = "gradientsInterpolationMethod";
      if (n != null) q[W] = n;
    }
    return q;
  };
  a4.prototype.a4o = function (j) {
    var q = this.h2[this.pi];
    for (var y = 0; y < j.length; y++) {
      var m = this.Vc[j[y]];
      if (m && q.contains(m._)) q.removeChild(m._);
    }
  };
  a4.prototype.aup = function (j) {
    var q = this.h2[this.pi];
    for (var y = 0; y < j.length; y++) {
      var m = this.Vc[j[y]];
      if (m && !q.contains(m._)) q.appendChild(m._);
    }
  };
  a4.prototype.yp = function (j, q) {
    if (this.Vc == null) return;
    var m = q == fG.HN;
    if (this.Vc.Grad) {
      this.Vc.Grad.oz(j.UP, j.vH);
      if (m || q == fG.Ru || q == fG.WX) this.Vc.Grad.j3(j.bu);
    }
    if (this.Vc.Ptrn) {
      if (m || q == fG.OF) this.Vc.Ptrn.j3(j.wP);
    }
    if (this.Vc.TrnS) {
      if (m || q == fG.im) this.Vc.TrnS.j3(j.QN);
    }
    if (this.Vc.MpgS) {
      if (m || q == fG.im) this.Vc.MpgS.j3(j.QN);
    }
  };
  a4.prototype.T = function () {
    for (var y = 0; y < this.aGC.length; y++) this.aGC[y].T();
    for (var j in this.Vc) if (this.Vc[j] instanceof kV) this.Vc[j].T();
  };
  a4.prototype.zw = function () {
    for (var j in this.Vc) {
      var q = this.Vc[j];
      q.parent = this;
      if (q instanceof kV) q.Q(_.E.n, this.aGS, this);
      if (this.h2.length == 0 || j == "useShape" || j == "useTexture") {
        var m = new aD(q.a9d()),
          n = J.m("div", "bordered padded");
        if (this.iv == !1) {
          n.appendChild(m._);
          n.appendChild(J.m("hr", ""));
        }
        this.aGC.push(m);
        this.h2.push(n);
        this._Z.push(q);
      } else this.h2[this.h2.length - 1].appendChild(q._);
    }
  };
  a4.prototype.update = function (j, q) {
    if (this.Vc == null) return;
    this.qe = B.S(q);
    var m = this.iv ? "gradientsInterpolationMethod" : "gs99";
    if (this.Tg == "GrFl" && q[m] == null)
      q[m] = { t: "enum", v: { gradientInterpolationMethodType: "Gcls" } };
    for (var n in q) {
      var G = this.Vc[n];
      if (
        "Opct iOpa hglO sdwO Dstn Ckmt Srnk Drkn blur Nose Scl Sz Inpr srgR Sftn textureDepth ShdN"
          .split(" ")
          .indexOf(n) != -1
      )
        G.q(q[n].v.val);
      if (
        "enab brst knko Clr hglC sdwC uglg Grad TrnS MpgS Rvrs Dthr Algn Invr InvT overprint Ptrn layerConceals Cntn useShape useTexture Ofst phase blIf"
          .split(" ")
          .indexOf(n) != -1
      ) {
        G.q(q[n].v, j);
      }
      if (["Md", "hglM", "sdwM"].indexOf(n) != -1)
        G.q(kJ.Tg.indexOf(q[n].v.BlnM));
      if (n == "lrMd") {
        var W = (q.isFolder ? [[15, 10, 27]] : []).concat(kJ.nb),
          k = (q.isFolder ? [1] : []).concat(kJ.hb);
        G.ti(W, k);
        G.q(q[n].v);
      }
      if (n == "Angl") G.q([q[n].v.val]);
      if (n == "lagl") {
        var T = q.uglg && q.uglg.v ? j.KB() : q.lagl.v.val;
        G.q([T]);
      }
      if (n == "Lald") {
        var T = q.uglg && q.uglg.v ? j.AL() : q.Lald.v.val;
        G.q([null, T]);
      }
      if (n == m) {
        var b = eu.MV.SS.indexOf(q[n].v.gradientInterpolationMethodType);
        G.q(b);
      }
      if (n == "Type") G.q(eu.MV.types.indexOf(q.Type.v.GrdT));
      if (n == "Styl") G.q(eu.stroke.types.indexOf(q.Styl.v.FStl));
      if (n == "PntT") {
        var c = eu.stroke.CE.indexOf(q.PntT.v.FrFl);
        G.q(c);
        if (!this.iv) {
          this.a4o(eu.dS.concat(eu.GB.concat(eu.Pa)));
          this.aup([eu.dS, eu.GB, eu.Pa][c]);
        }
      }
      if (n == "GlwT") G.q(eu.sD.types.indexOf(q.GlwT.v.BETE));
      if (n == "glwS") G.q(eu.sD.a3J.indexOf(q.glwS.v.IGSr));
      if (n == "bvlS") G.q(eu.pO.types.indexOf(q.bvlS.v.BESl));
      if (n == "bvlT") G.q(eu.pO.aLK.indexOf(q.bvlT.v.bvlT));
      if (n == "bvlD") G.q(["In", "Out"].indexOf(q.bvlD.v.BESs));
    }
  };
  a4.prototype.aGS = function (j) {
    var q = this.iv ? "gradientsInterpolationMethod" : "gs99";
    for (var m in this.Vc) {
      if (this.Vc[m] != j.target) continue;
      var n = null,
        G = !1;
      if (
        "Opct iOpa Srnk Drkn hglO Nose Scl sdwO Inpr srgR textureDepth ShdN"
          .split(" ")
          .indexOf(m) != -1
      )
        n = { type: "#Prc", val: j.target.V() };
      if (["Dstn", "Ckmt", "blur", "Sz", "Sftn"].indexOf(m) != -1)
        n = { type: "#Pxl", val: j.target.V() };
      if (["Angl", "lagl"].indexOf(m) != -1)
        n = { type: "#Ang", val: j.target.V()[0] };
      if (
        "enab brst knko Clr hglC sdwC Grad TrnS MpgS Rvrs Dthr Algn Invr InvT overprint Ptrn layerConceals Cntn lrMd useShape useTexture AntA antialiasGloss Ofst phase blIf"
          .split(" ")
          .indexOf(m) != -1
      )
        n = j.target.V();
      if (["Md", "hglM", "sdwM"].indexOf(m) != -1)
        n = { BlnM: kJ.Tg[j.target.V()] };
      if (m == "uglg") {
        n = j.target.V();
        G = !0;
      }
      if (m == "PntT") {
        n = { FrFl: eu.stroke.CE[j.target.V()] };
        G = !0;
      }
      if (m == "Lald") n = { type: "#Ang", val: j.target.V()[1] };
      if (m == q)
        n = { gradientInterpolationMethodType: eu.MV.SS[j.target.V()] };
      if (m == "Type") n = { GrdT: eu.MV.types[j.target.V()] };
      if (m == "Styl") n = { FStl: eu.stroke.types[j.target.V()] };
      if (m == "GlwT") n = { BETE: eu.sD.types[j.target.V()] };
      if (m == "glwS") n = { IGSr: eu.sD.a3J[j.target.V()] };
      if (m == "bvlS") n = { BESl: eu.pO.types[j.target.V()] };
      if (m == "bvlT") n = { bvlT: eu.pO.aLK[j.target.V()] };
      if (m == "bvlD") n = { BESs: ["In", "Out"][j.target.V()] };
      this.lD({ Fr: m, K: n });
      if (G) {
        if (this.iv) this.update(null, this.qe);
        else {
          var W = this.parent,
            k = W.fg,
            T = this.lX,
            b = k.U[W.data.v].add.lmfx[eu.C$[T[0]]].v[T[1]].v;
          this.update(k, b);
        }
      }
    }
  };
  a4.prototype.lD = function (j) {
    if (this.qe && this.qe[j.Fr]) this.qe[j.Fr].v = j.K;
    if (this.iv) {
      this.k(new fd(_.E.n));
    } else {
      j.R = "changeprop";
      j.v = this.parent.data.v;
      j.Wy = this.lX;
      var q = new fd(_.E.w, !0);
      q.data = j;
      q.l = L.EJ;
      q.XE = !0;
      this.k(q);
      this.k(new fd("afterchange", !0));
    }
  };
  a4.prototype.V = function () {
    return B.S(this.qe);
  };
  a4.Ha = {
    bops: "blOptions lrMd Opct ---- iOpa brst ---- blIf".split(" "),
    DrSh: "enab Md Clr Opct lagl uglg Dstn Ckmt blur TrnS Nose layerConceals Cntn".split(
      " "
    ),
    St3D: "enab Md Clr Opct Angl Dstn Srnk ---- lagl Lald uglg Drkn".split(" "),
    IrSh: "enab Md Clr Opct lagl uglg Dstn Ckmt blur TrnS Nose".split(" "),
    OrGl: [
      "enab",
      "Md",
      "Opct",
      "Nose",
      "\n",
      "Clr",
      "Grad",
      "----",
      "GlwT",
      "Ckmt",
      "blur",
      "TrnS",
      "Inpr",
      "ShdN",
    ],
    IrGl: [
      "enab",
      "Md",
      "Opct",
      "Nose",
      "\n",
      "Clr",
      "Grad",
      "----",
      "GlwT",
      "glwS",
      "Ckmt",
      "blur",
      "TrnS",
      "Inpr",
      "ShdN",
    ],
    ebbl: [
      "enab",
      "bvlS",
      "bvlT",
      "bvlD",
      "srgR",
      "blur",
      "Sftn",
      "----",
      "lagl",
      "Lald",
      "uglg",
      "TrnS",
      "\n",
      "hglM",
      "hglC",
      "hglO",
      "sdwM",
      "sdwC",
      "sdwO",
      "useShape",
      "MpgS",
      "Inpr",
      "useTexture",
      "Ptrn",
      "Scl",
      "textureDepth",
      "InvT",
      "Algn",
      "phase",
    ],
    SoFi: ["enab", "Md", "Opct"].concat(eu.dS),
    GrFl: ["enab", "Md", "Opct"].concat(eu.GB),
    patternFill: ["enab", "Md", "Opct"].concat(eu.Pa),
    ChFX: "enab Md Clr Opct lagl Dstn blur MpgS Invr".split(" "),
    FrFX: [
      "enab",
      "Sz",
      "Styl",
      "\n",
      "Md",
      "Opct",
      "overprint",
      "\n",
      "PntT",
      "\n",
    ].concat(eu.dS.concat(eu.GB.concat(eu.Pa))),
  };
  function fr() {
    g7.call(this, [11, 6], "layerstyle");
    this.aza = -1;
    this.data = {};
    this.fg = null;
    this.a = null;
    this.z6 = [];
    this.sZ = [];
    J._g(this.body, "flexrow");
    this.AT = J.m("div", "bordered");
    J.F(this.AT, "min-width:13em;");
    this.body.appendChild(this.AT);
    this.oQ = J.m("div", "");
    J.F(this.oQ, "width:25em; padding-left: 1em;");
    this.body.appendChild(this.oQ);
    this.hU = J.m("div", "form");
    J.F(this.hU, "padding-left: 1em; width:7em;");
    this.body.appendChild(this.hU);
    this.v0 = J.y_(this, this.hU);
    this.ahb = new kv([12, 87], !0, null, !0);
    this.ahb.Q("click", this.alG, this);
    this.hU.appendChild(this.ahb._);
    this.ov = new dm();
    this.ov.parent = this;
    this.ov.Q(_.E.n, this.afk, this);
    this.hU.appendChild(this.ov._);
    this.Q("closebtn", this.JT, this);
    this.Q("redrawall", this.a2o, this);
  }
  fr.prototype = new g7();
  fr.prototype.bx = function () {
    return !0;
  };
  fr.prototype.LG = function () {
    return !0;
  };
  fr.prototype.oo = function (j, q, m, n, G) {
    var W = this.DM();
    if (W) W.oo(j, q, m, n, G);
  };
  fr.prototype.C3 = function (j, q, m, n, G) {
    var W = this.DM();
    if (W) W.C3(j, q, m, n, G);
  };
  fr.prototype.H_ = function (j, q, m, n, G) {
    var W = this.DM();
    if (W) W.H_(j, q, m, n, G);
  };
  fr.prototype.DM = function (j) {
    if (j == null) j = this.data.index;
    return j == null ? null : j == 0 ? this.z6[0] : this.sZ[j[0]][j[1]];
  };
  fr.prototype.afk = function (j) {
    var q = this.ov.V();
    this.lD({ R: "setstl", K: q.yL });
    this.a2o(null);
  };
  fr.prototype.alG = function (j) {
    var q = this.fg,
      m = this.data.v;
    if (m == null) m = q.J[0];
    var n = this.fg.U[m],
      G = dS.aCi(n),
      W = new fd(_.E.c, !0);
    W.data = { R: _.Y.fh, vt: "add", rw: fG.S0, Jb: [B.S(G)] };
    this.k(W);
  };
  fr.prototype.amC = function (j) {
    this.data.index = j.currentTarget.lX;
    this.Bc(j.currentTarget.lX);
  };
  fr.prototype.a2o = function (j) {
    this.Wz(this.fg, this.data);
  };
  fr.prototype.Bc = function (j, q) {
    J.dI(this.oQ);
    for (var y = 0; y < this.z6.length; y++) this.z6[y].a7n();
    var m = this.DM(j);
    this.oQ.appendChild(m.aaa());
    if (q) m.LD();
    var n = this.fg;
    if (n) {
      var G = n.U[this.data.v];
      this.z6[0].update(n, L.co.Hc(n, G));
      var W = G.add.lmfx;
      if (W == null) return;
      for (var y = 0; y < eu.order.length; y++) {
        var k = W[eu.C$[y]].v;
        for (var T = 0; T < k.length; T++) this.sZ[y][T].update(n, k[T].v);
      }
    }
    if (q) m.LD();
  };
  fr.prototype.T = function () {
    g7.prototype.T.call(this);
    this.ahb.T();
    this.ov.T();
    this.v0.T();
    for (var y = 0; y < this.z6.length; y++) this.z6[y].T();
  };
  fr.prototype.Wz = function (j, q) {
    var m = q.v == null;
    this.data.v = q.v;
    this.data.index = q.index;
    q = this.data;
    this.fg = j;
    if (m) q.v = j.J.length == 0 ? j.U.length - 1 : j.J[0];
    J.dI(this.AT);
    var n = j.U[q.v].add.lmfx;
    this.Lm();
    this.z6 = [new a4("bops", !1, 0)];
    this.sZ = [];
    for (var y = 0; y < eu.order.length; y++) {
      this.sZ.push([]);
      var G = n == null ? [] : n[eu.C$[y]].v;
      for (var W = 0; W < G.length; W++) {
        var k = new a4(eu.order[y], !1, [y, W]);
        this.z6.push(k);
        this.sZ[y].push(k);
      }
      if (G.length == 0) {
        var k = new a4(eu.order[y], !1, [y, 0]);
        this.z6.push(k);
        this.sZ[y].push(k);
      }
    }
    this.T();
    this.asZ(this.a, fG.HN);
    for (var y = 0; y < this.z6.length; y++) {
      this.z6[y].parent = this;
      this.z6[y].aG2(this.AT);
      this.z6[y].Q("showme", this.amC, this);
    }
    if (
      q.index == null ||
      q.index == 0 ||
      (!m && n[eu.C$[q.index[0]]].v.length == 0)
    ) {
      this.Bc(0);
    } else this.Bc(q.index, m);
    this.Q("afterchange", this.Lm, this);
  };
  fr.prototype.Lm = function (j) {
    var q = this.fg,
      m = this.data.v;
    if (m == null) m = q.J[0];
    var n = this.fg.U[m],
      G = dS.aCi(n);
    this.ov.q(G, q.add.Patt ? q.add.Patt : [], q.KB(), q.AL());
  };
  fr.prototype.yp = function (j, q) {
    this.a = j;
    this.asZ(j, q);
    if (q == fG.S0 || q == fG.HN) {
      this.ov.j3([j.RU, j.wP]);
    }
    if (q == fG.lG) {
    }
  };
  fr.prototype.asZ = function (j, q) {
    for (var y = 0; y < this.z6.length; y++) this.z6[y].yp(j, q);
  };
  fr.prototype.JT = function (j) {
    this.lD({ R: "cancel" });
  };
  fr.prototype.GP = function (j) {
    this.lD({ R: "confirm" });
    this.close();
  };
  fr.prototype.lD = function (j) {
    j.v = this.data.v;
    var q = new fd(_.E.w, !0);
    q.data = j;
    q.l = L.EJ;
    q.XE = !0;
    this.k(q);
    this.Lm();
  };
  fr.aDI = function () {
    var j = function (q) {
      if (q == null || q.J.length == 0) return { f: !1 };
      var m = q.U[q.J[0]];
      return { f: m.add.lmfx != null };
    };
    return {
      name: [11, 6],
      q7: !0,
      sub: [{ name: [5, 1], f: j }, { name: [5, 2] }, { name: [2, 2], f: j }],
    };
  };
  fr.akz = function () {
    return {
      sub: [
        { p: _.E.w, l: L.EJ, d: { R: "st_copy" } },
        { p: _.E.w, l: L.EJ, d: { R: "st_paste" } },
        { p: _.E.w, l: L.EJ, d: { R: "st_clear" } },
      ],
    };
  };
  fr.Rk = function (j) {
    var q = [{ name: [14, 10], q7: !0 }];
    for (var y = 0; y < eu.names.length; y++) q.push({ name: eu.names[y] });
    if (j) {
      q[q.length - 1].q7 = !0;
      q.push(fr.aDI());
      q.push({
        name: [6, 30, 1],
        f: function (m) {
          return { f: m != null && m.J.length != 0 && m.U[m.J[0]].xN() };
        },
      });
      q.push({
        name: ["VAR0 VAR1", [12, 49], [9, 1]],
        f: function (m) {
          return {
            f: m != null && m.J.length != 0 && m.U[m.J[0]].add.lmfx != null,
          };
        },
      });
    }
    return q;
  };
  fr.PM = function (j) {
    var q = [{ p: _.E.c, d: { R: _.Y.s0, kO: "layerstyle" } }];
    for (var y = 0; y < eu.names.length; y++)
      q.push({ p: _.E.c, d: { R: _.Y.s0, kO: "layerstyle", index: [y, 0] } });
    if (j) {
      q.push(fr.akz());
      q.push({
        p: _.E.c,
        d: {
          R: _.Y.s0,
          kO: "scaleeffects",
          pv: 100,
          N0: { p: _.E.w, l: L.EJ, d: { R: "scaleeffects" } },
        },
      });
      var m = {
        classID: "Mk",
        null: jw.$W("Lyr"),
        Usng: {
          t: "obj ",
          v: [
            { t: "prop", v: { classID: "Prpr", keyID: "Lefx" } },
            { t: "Enmr", v: { classID: "Lyr", typeID: "Ordn", enum: "Trgt" } },
          ],
        },
      };
      q.push({ p: _.E.NI, d: { _D: "make", SC: m } });
    }
    return q;
  };
  fr.a9i = function (j) {
    var q = [];
    if (j)
      q.push(
        { name: [6, 48, 0, 0], QU: !0 },
        { name: [6, 48, 0, 1], QU: !0 },
        { name: [6, 48, 0, 2], QU: !0, q7: !0 }
      );
    for (var m in eV.names)
      q.push({
        name: eV.names[m],
        q7: eV.aa_.indexOf(m) != -1,
        QU: gj[m] != null,
      });
    return q;
  };
  fr.Mp = function (j) {
    var q = [];
    if (j) {
      q.push({ p: _.E.w, l: L.HO, d: { R: "newfill", Sg: 0 } });
      for (var y = 1; y < 3; y++) q.push({ p: _.E.NI, d: L.jy.QQ(y) });
    }
    for (var m in eV.names) {
      var n = k0.i4(m);
      if (n == null) n = {};
      for (var G in eV.cl) if (eV.cl[G] == m) n.classID = G;
      var W = {
        _D: "make",
        SC: {
          classID: "Mk",
          null: jw.$W("AdjL"),
          Usng: {
            t: "Objc",
            v: { classID: "AdjL", Type: { t: "Objc", v: n } },
          },
        },
      };
      q.push({ p: _.E.NI, d: W });
    }
    return q;
  };
  function a0() {
    g7.call(this, "Merge Channels", "mergechannels");
    this.caller = null;
    var j = J.m("div", "form");
    this.body.appendChild(j);
    this.l2 = [];
    for (var y = 0; y < 3; y++) {
      var q = new f1(eV.wc[y], []);
      this.l2.push(q);
      j.appendChild(q._);
      J.Ft(j);
    }
    this.v0 = J.y_(this, j);
  }
  a0.prototype = new g7();
  a0.prototype.T = function () {
    g7.prototype.T.call(this);
    this.v0.T();
    for (var y = 0; y < 3; y++) this.l2[y].T();
  };
  a0.prototype.Wz = function (j, q, m, n) {
    this.caller = m;
    var G = [],
      W = m.mS;
    for (var y = 0; y < W.length; y++) G.push(W[y].name);
    for (var y = 0; y < 3; y++) {
      var k = this.l2[y];
      k.ti(G);
      k.q(Math.min(y, W.length - 1));
    }
  };
  a0.prototype.GP = function (j) {
    var q = this.caller.mS,
      m = q[0],
      n = new fd(_.E.NI, !0);
    n.data = fb.CM(m.r, m.$, m.zv, "Merged Document", "Wht", !1);
    this.k(n);
    var G = [];
    for (var y = 0; y < 3; y++) G.push(q[this.l2[y].V()].ht());
    var m = q[q.length - 1],
      W = m.U[0],
      k = W.buffer;
    for (var y = 0; y < k.length; y += 4) {
      k[y] = G[0][y];
      k[y + 1] = G[1][y];
      k[y + 2] = G[2][y];
    }
    W.gF();
    m.gF();
    this.close();
  };
  function bG() {
    g7.call(this, [1, 10], "script");
    var j = J.m("div", "form");
    J.F(j, "width:44em");
    this.body.appendChild(j);
    this.a = null;
    this.JA = [];
    this.l8 = [];
    this.adU;
    var q = (this.K1 = new kv([1, 2], !1, null, !0));
    q.Q("click", this.AM, this);
    j.appendChild(q._);
    var m = new kv("JS Reference", !1, null, !0);
    m.Q("click", this.axw, this);
    j.appendChild(m._);
    j.appendChild(new aD("Demos:")._);
    this.agQ = [];
    var n = bG.lo;
    for (var y = 0; y < n.length; y++) {
      var G = new kv(n[y].Lj, !1, null, !0);
      this.agQ.push(G);
      j.appendChild(G._);
      G.Q("click", this.aiQ, this);
    }
    this.X_ = J.m("textarea");
    J.l3(this.X_);
    this.X_.setAttribute("rows", 16);
    J.F(this.X_, "display:block;tab-size:4; font-family:monospace;width:100%;");
    j.appendChild(this.X_);
    var W = new kv("Run", !0, null, !0);
    W.Q("click", this.GP, this);
    j.appendChild(W._);
    this.qa = J.m("div");
    j.appendChild(this.qa);
  }
  bG.prototype = new g7();
  bG.prototype.T = function () {
    this.K1.T();
  };
  bG.prototype.AM = function () {
    var j = this.adU;
    if (j == null) j = "script.jsx";
    var q = new fd(_.E.c, !0);
    q.data = {
      R: _.Y.s0,
      kO: "namewindow",
      pv: j.slice(0, j.length - 4),
      ml: this.avQ.bind(this),
    };
    this.k(q);
  };
  bG.prototype.avQ = function (j) {
    var q = this.X_.value,
      m = M.Nh(q),
      n = new fd(_.E.c, !0);
    n.data = { R: _.Y.g3, Ul: m.buffer, eA: j + ".jsx", ah1: !0 };
    this.k(n);
  };
  bG.prototype.acp = function (j) {
    var y = this.JA.indexOf(j.target),
      q = (this.adU = this.l8[y]),
      m = this.a.Fd.CK[q],
      n = new Uint8Array(m),
      G = M.K6(n, 0, n.length);
    this.X_.value = G;
  };
  bG.prototype.Wz = function (j, q) {
    this.X_.value = bG.lo[0].Gu;
    this.ab0();
  };
  bG.prototype.ab0 = function () {
    var j = this.a.Fd,
      q = this.qa;
    J.dI(q);
    this.JA = [];
    this.l8 = [];
    q.textContent = "Saved scripts: ";
    for (var m in j.CK) {
      if (m.endsWith(".jsx")) {
        var n = new kv(m, !1, null, !0);
        this.JA.push(n);
        this.l8.push(m);
        n.Q("click", this.acp, this);
        q.appendChild(n._);
      }
    }
  };
  bG.prototype.yp = function (j, q) {
    this.a = j;
    if (q == fG.SW) this.ab0();
  };
  bG.prototype.axw = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = {
      R: _.Y.p8,
      link: "https://github.com/Adobe-CEP/CEP-Resources/blob/master/Documentation/Product%20specific%20Documentation/Photoshop%20Scripting/photoshop-javascript-ref-2020.pdf",
    };
    this.k(q);
  };
  bG.prototype.GP = function (j) {
    var q = this.X_.value,
      m = this.a.Fd.CK;
    q = bG.afz(q, m);
    var n = new fd(_.E.c, !0);
    n.data = { R: _.Y.D4, dR: q };
    this.k(n);
  };
  bG.afz = function (j, q) {
    var m = j.split("\n");
    for (var y = 0; y < m.length; y++) {
      var n = m[y].trim();
      if (n.startsWith("#include")) {
        var G = n.slice(n.indexOf('"') + 1, n.lastIndexOf('"')),
          W = q[G];
        if (W == null) alert('"' + G + '" not found in the Local Storage');
        m[y] = bG.afz(M.K6(new Uint8Array(W)), q);
      }
    }
    return m.join("\n");
  };
  bG.prototype.aiQ = function (j) {
    var q = this.agQ.indexOf(j.currentTarget);
    this.X_.value = bG.lo[q].Gu;
  };
  bG.lo = [
    { Lj: "Hello", Gu: '\nalert("Hello Photopea!");\n' },
    {
      Lj: "Process Layers",
      Gu:
        "\nvar lays = app.activeDocument.layers;\n\nfor(var i=0; i<lays.length; i++)\n{\n" +
        "\t//lays[i].visible = false;\n" +
        "\t//lays[i].opacity = 50;\n" +
        '\tlays[i].name = "My Layer "+i;\n}',
    },
    {
      Lj: "Clone Layers",
      Gu:
        "\nvar orig = app.activeDocument.activeLayer;\n" +
        "var cnt = 12;\n" +
        "var angle = Math.floor(360 / cnt);\n" +
        "\n" +
        "for(var i=1; i<cnt; i++)\n" +
        "{\n" +
        "\tvar nlay = orig.duplicate();\n" +
        "\t//nlay.translate(30*i, 20*i);\n" +
        "\tnlay.rotate(angle * i, AnchorPosition.BOTTOMCENTER);\n" +
        "}",
    },
  ];
  function hm() {
    g7.call(this, [11, 7], "newproject");
    this.data = null;
    this.caller = null;
    this.d5 = 0;
    var j = (this.v$ = J.m("div", "flexrow"));
    this.body.appendChild(j);
    var q = (this.IN = J.m("div", "form"));
    j.appendChild(q);
    this.x8 = new bJ([12, 48], null, 10);
    q.appendChild(this.x8._);
    J.Ft(q);
    this.X0 = new aY(!0, null, null, ei == 1, !0);
    this.X0.q(new ea(1280, 720), 72);
    if (ei == 1) {
      this.X0.q(new ea(8.3 * 72, 11.7 * 72), 72);
      this.X0.Nw(4);
    }
    this.X0.a0_(!0, !0);
    this.X0.Q(_.E.n, this.Wq, this);
    if (ei < 2) q.appendChild(this.X0._);
    this.g6 = new lf();
    this.g6.parent = this;
    if (ei == 0) {
      J.Ft(q);
      q.appendChild(this.g6._);
    }
    this.Hg = new dV("BPM", 1, 400);
    this.Hg.q(60);
    this.mp = new gA("Time Signature", "2/4 3/4 4/4 4/8 6/8 8/8".split(" "));
    this.mp.q(2);
    if (ei == 2) {
      q.appendChild(this.Hg._);
      J.Ft(q);
      q.appendChild(this.mp._);
    }
    this.FX = new f1([13, 6], fb.HR);
    this.Ex = new f1(null, ["8 bit", "16 bit", "32 bit"]);
    this.auq = new av([1, 16, 1]);
    if (ei == 0) {
      q.appendChild(this.auq._);
      J.Ft(q);
      q.appendChild(this.FX._);
      q.appendChild(this.Ex._);
    }
    this.x8.pM();
    this.Hg.pM();
    this.mp.pM();
    this.X0.pM();
    this.g6.pM();
    this.FX.pM();
    this.Ex.pM();
    this.v0 = new kv([12, 49], !0, null, !0);
    this.v0.Q("click", this.GP, this);
    if (ei < 2) this.v0._.style.marginBottom = "20px";
    q.appendChild(this.v0._);
    var m = (this.A3 = J.m("div", "form"));
    if (ei < 2) q.appendChild(this.A3);
    var n = hm.mM,
      G = [];
    for (var y = 0; y < n.length; y++) G.push(n[y].name);
    this.Xs = new gA(null, G);
    if (ei == 1) this.Xs.q(1);
    this.Xs.Q(_.E.n, this.rZ, this);
    m.appendChild(this.Xs._);
    this.Ju = new ap(!0);
    this.Ju.Q(_.E.n, this.auu, this);
    m.appendChild(this.Ju._);
    this.rZ();
    this.xt = new co();
    this.xt.parent = this;
    J.F(this.xt._, "margin-right:20px");
    this.xt.Q("tempready", this.aKq, this);
    this.tT = this.A3;
    this.ao5 = new kv([25, 0], null, null, !0);
    this.ao5.Q(
      "click",
      function () {
        var W;
        if (this.tT == this.A3) {
          this.tT = this.xt._;
          W = [11, 10];
        } else {
          this.tT = this.A3;
          W = [25, 0];
        }
        this.a4w = -1;
        this.ao5.hk(W);
        this.X3(this.GM, this.uu - 0.001);
      },
      this
    );
  }
  hm.prototype = new g7();
  hm.prototype.aCk = function (j) {
    var q = this.bq,
      m = q.style.display != "none";
    q.style.display = m ? "none" : "";
    this.tl.hk(m ? "\u02C5" : "\u02C4");
    this.X3(this.GM, this.uu - 0.001);
  };
  hm.prototype.yp = function (j, q) {
    this.xt.yp(j);
  };
  hm.prototype.lu = function (j, q) {
    return new ea(
      Math.max(0, Math.min(70, (j - 690) / 2)),
      j > q ? Math.max(0, Math.min(50, (q - 400) / 2)) : 0
    );
  };
  hm.prototype.X3 = function (j, q) {
    if (this.GM == j && this.uu == q) return;
    this.GM = j;
    this.uu = q;
    if (2 <= ei) return;
    var m = this.v$,
      n = this.A3,
      G = this.xt._,
      W = this.IN,
      k = 330,
      T = 500;
    this.Ju._.style.height = q - 54 - (j < 730 ? 30 : 0) + "px";
    n.style.marginRight = "20px";
    var b = 1100 < j ? 0 : 520 < j ? 1 : 2,
      c = b != this.a4w;
    this.a4w = b;
    if (c) {
      J.dI(m);
      if (n.parentNode) n.parentNode.removeChild(n);
      if (G.parentNode) G.parentNode.removeChild(G);
    }
    var a = this.ao5._;
    if (b == 0) {
      T = (j - k) / 2 - 32;
      this.xt.X3(T, q - 28);
      if (c) {
        m.appendChild(G);
        m.appendChild(n);
        m.appendChild(W);
      }
    } else if (b == 1) {
      if (j < 750) k = 280;
      T = j - k - 44;
      if (c) {
        m.appendChild(this.tT);
        m.appendChild(a);
        m.appendChild(W);
      }
      if (this.tT == G) this.xt.X3(T, q - 27);
      J.F(a, "position:fixed; right:" + (k + 40) + "px; bottom:20px;");
    } else {
      k = j - 26;
      T = k;
      n.style.marginRight = "";
      if (c) {
        W.appendChild(this.tT);
        W.appendChild(a);
        m.appendChild(W);
      }
      J.F(a, "position:fixed; right:16px; bottom:20px;");
      var f = q - 412 + (ei == 0 ? 0 : 120);
      this.Ju._.style.height = f + "px";
      if (this.tT == G) this.xt.X3(T, f + 27);
    }
    J.F(W, "width:" + k + "px; line-height:3em;");
    n.style.width = T + "px";
    this.rZ(null, T);
  };
  hm.prototype.Wq = function () {
    this.xt.q(this.X0.V());
  };
  hm.prototype.auu = function (j) {
    var q = this.Ju.V()[0],
      m = hm.mM[this.Xs.V()].ZE[q],
      n = m[4];
    if (n == 0 || ei == 1) n = 72;
    var G = m[1],
      W = m[2],
      k = ["px", "%", "mm", "in"].indexOf(m[3]),
      T = [1, 1, 25.4 / n, 1 / n][k];
    G /= T;
    W /= T;
    this.X0.q(new ea(Math.round(G), Math.round(W)), n);
    this.X0.Nw(k);
    this.Wq();
    if (Date.now() - this.d5 < 300) this.GP();
    else lw.event("ndoc_Size click", 0.1);
    this.d5 = Date.now();
  };
  hm.prototype.rZ = function (j, q) {
    if (q == null) q = this.azV;
    else this.azV = q;
    if (q == null) return;
    var m = q < 360 ? 2 : q < 600 ? 3 : 4,
      n = (q - 5) / m - 5,
      G = hm.mM[this.Xs.V()].ZE,
      W = [],
      k = [],
      T = Math.floor(n * J.IC()),
      b = Math.floor(n * J.IC()),
      c = 0;
    for (var y = 0; y < G.length; y++) c = Math.max(c, G[y][1], G[y][2]);
    for (var y = 0; y < G.length; y++) {
      var a = G[y],
        f = a[1] + " x " + a[2] + " " + a[3];
      if (a[3] == "in")
        f = (a[1] * 25.4).toFixed(0) + " x " + (a[2] * 25.4).toFixed(0) + " mm";
      if (a[3] == "mm")
        f = (a[1] / 25.4).toFixed(1) + " x " + (a[2] / 25.4).toFixed(1) + " in";
      if (a[4]) f = f + " @ " + a[4] + " ppi";
      k.push(f);
      W.push(hm.hj(a, T, b, c));
    }
    this.Ju.GW(W, k, T, b);
  };
  hm.hj = function (j, q, m, n) {
    var G = B.l4(q, m),
      W = Math.round(q / 8),
      k = Math.floor(13 * J.IC()),
      T = j[1],
      b = j[2];
    G.fillStyle = "#000000";
    G.font = Math.round(k * 0.9) + 'px "Open Sans", Sans-Serif';
    var c = T + " x " + b + " " + j[3],
      a = G.measureText(c);
    G.fillText(c, Math.round((q - a.width) / 2), m - Math.round(W / 2));
    if (j[0] != null) {
      G.font = "bold " + k + 'px "Open Sans", Sans-Serif';
      var c = j[0],
        a = G.measureText(c);
      G.fillText(
        c,
        Math.round((q - a.width) / 2),
        m - Math.round(W / 2) - Math.round(k * 1.3)
      );
    }
    var f = m - Math.round(2.5 * k),
      U = Math.min((q - W) / T, (f - W) / b);
    U *= 0.5 + 0.5 * (Math.max(T, b) / n);
    var Z = (q - T * U) / 2,
      h = (f - b * U) / 2;
    G.strokeRect(
      Math.round(Z) + 0.5,
      Math.round(h) + 0.5,
      Math.round(T * U),
      Math.round(b * U)
    );
    var u = G.getImageData(0, 0, q, m).data;
    return gh.Rq(u.buffer, q, m, null, null, !0);
  };
  hm.prototype.T = function () {
    g7.prototype.T.call(this);
    this.X0.T();
    this.x8.T();
    this.Hg.T();
    this.mp.T();
    this.g6.T();
    this.v0.T();
    this.x8.q(g$.get([11, 7]));
    this.Xs.T();
    this.FX.T();
    this.Ex.T();
    this.auq.T();
    this.xt.T();
  };
  hm.prototype.GP = function (j) {
    lw.event("ndoc_Create click", 0.1);
    var q = this.X0.V(),
      m = q.x,
      n = q.y;
    this.close();
    var G = this.g6.V(),
      W = fb.H2[this.FX.V()],
      k = new fd(_.E.NI, !0);
    k.data = fb.CM(
      m,
      n,
      this.X0.HB(),
      this.x8.V(),
      ["Wht", "Blck", "Trns", "Clr"][G[0]],
      this.auq.V(),
      G[1],
      W,
      8 << this.Ex.V()
    );
    this.k(k);
    var T = this.caller.mS,
      b = T[T.length - 1];
    b.Y.W0 = this.Hg.V();
    b.Y.Ss = [
      [2, 4],
      [3, 4],
      [4, 4],
      [4, 8],
      [6, 8],
      [8, 8],
    ][this.mp.V()];
    this.ae0();
  };
  hm.prototype.aKq = function (j) {
    lw.event("ndoc_Template click", 0.1);
    var q = j.data.fg;
    q.zv = this.X0.HB();
    var m = new fd(_.E.c, !0);
    m.data = { R: _.Y.ED, fg: q };
    this.k(m);
    this.close();
    this.ae0();
  };
  hm.prototype.ae0 = function () {
    var j = this.caller.mS,
      q = j[j.length - 1],
      m = this.data.a28;
    if (m)
      l8.Ui(function () {
        var n = new XMLHttpRequest(),
          G = "https://www.googleapis.com/drive/v3/files?" + l8.axK();
        n.open("POST", G, !0);
        n.setRequestHeader("Content-Type", "application/json");
        n.addEventListener("load", function (W) {
          var k = JSON.parse(W.target.response);
          q.Co = { file: k, yU: "psd" };
          alert(q.name + " created in Google Drive");
        });
        n.send(JSON.stringify({ name: q.name, a03: [m] }));
      });
  };
  hm.prototype.Wz = function (j, q, m, n) {
    this.caller = m;
    if (j != null && j.h != null) {
      var G = new hk(0, 0, j.r, j.$).TM(j.h.H);
      this.X0.q(new ea(G.r, G.$));
    }
    this.data = q;
    this.Wq();
    if (J.mC()) jc.afD(this.WW.bind(this));
  };
  hm.prototype.WW = function (j) {
    if (j == "granted") jc.hH(this, this.Rc.bind(this));
  };
  hm.prototype.Rc = function (j, q) {
    this.X0.q(new ea(q.r, q.$));
  };
  hm.mM = [
    {
      name: "Social",
      ZE: [
        ["FB Page Cover", 1640, 664, "px", 0],
        ["FB Event Image", 1920, 1080, "px", 0],
        ["FB Group Header", 1640, 856, "px", 0],
        ["Instagram", 1080, 1080, "px", 0],
        ["Insta Story", 1080, 1920, "px", 0],
        ["Insta Portrait", 1080, 1350, "px", 0],
        ["Youtube Thumbnail", 1280, 720, "px", 0],
        ["Youtube Profile", 800, 800, "px", 0],
        ["Youtube Cover", 2560, 1440, "px", 0],
        ["Twitter Profile", 400, 400, "px", 0],
        ["Twitter Header", 1500, 500, "px", 0],
      ],
    },
    {
      name: [12, 88, 4],
      ZE: [
        ["A3", 297, 420, "mm", 300],
        ["A4", 210, 297, "mm", 300],
        ["A5", 148, 210, "mm", 300],
        ["B3", 353, 500, "mm", 300],
        ["B4", 250, 353, "mm", 300],
        ["B5", 176, 250, "mm", 300],
        ["Letter", 8.5, 11, "in", 300],
        ["Ledger", 11, 17, "in", 300],
        ["Business Card", 3.5, 2, "in", 300],
      ],
    },
    {
      name: [12, 88, 0],
      ZE: [
        ["Wallet", 2, 3, "in", 300],
        ["Enprint", 3.5, 5, "in", 300],
        [null, 5, 7, "in", 300],
        [null, 8, 12, "in", 300],
        [null, 12, 18, "in", 300],
        [null, 16, 24, "in", 300],
        [null, 20, 30, "in", 300],
        [null, 24, 36, "in", 300],
      ],
    },
    {
      name: [12, 88, 1],
      ZE: [
        ["VGA", 640, 480, "px", 0],
        ["XGA", 1024, 768, "px", 0],
        ["HD", 1280, 720, "px", 0],
        [null, 1366, 768, "px", 0],
        [null, 1600, 900, "px", 0],
        ["Full HD", 1920, 1080, "px", 0],
        ["2K", 2048, 1080, "px", 0],
        ["UHD", 3840, 2160, "px", 0],
        ["4K", 4096, 2160, "px", 0],
      ],
    },
    {
      name: [12, 88, 2],
      ZE: [
        ["iPhone 4", 640, 900, "px", 326],
        ["iPhone 5", 640, 1136, "px", 326],
        ["iPhone 6 7 8", 750, 1334, "px", 326],
        ["iPhone 6+ 7+ 8+", 1080, 1920, "px", 401],
        ["iPhone X", 1125, 2436, "px", 458],
        ["Samsung A5", 720, 1280, "px", 0],
        ["Samsung S5", 1080, 1920, "px", 0],
        ["Samsung S6", 1440, 2560, "px", 0],
        ["Samsung S8+", 1440, 2560, "px", 0],
        ["Google Pixel", 1080, 1920, "px", 0],
        ["iPad Mini 4", 1536, 2048, "px", 0],
        ["iPad Air 2", 1536, 2048, "px", 0],
        ['iPad Pro 9.7"', 1536, 2048, "px", 0],
        ['iPad Pro 10.5"', 1668, 2224, "px", 0],
        ['iPad Pro 12.9"', 2048, 2732, "px", 0],
      ],
    },
    {
      name: [12, 88, 3],
      ZE: [
        ["Small Square", 200, 200, "px", 0],
        ["Square", 250, 250, "px", 0],
        ["Medium Rect", 300, 250, "px", 0],
        ["Large Rect", 336, 280, "px", 0],
        ["Mobile Leaderboard", 320, 50, "px", 0],
        ["Large Mobile", 320, 100, "px", 0],
        ["Banner", 468, 60, "px", 0],
        ["Leaderboard", 728, 90, "px", 0],
        ["Large Leaderboard", 970, 90, "px", 0],
        ["Billboard", 970, 250, "px", 0],
        ["Vertical Rect", 240, 400, "px", 0],
        ["Skyscraper", 120, 600, "px", 0],
        ["Wide Skyscraper", 160, 600, "px", 0],
        ["Half Page", 300, 600, "px", 0],
        ["Portrait", 300, 1050, "px", 0],
      ],
    },
    {
      name: "2ᴺ",
      ZE: [
        [null, 16, 16, "px", 0],
        [null, 32, 32, "px", 0],
        [null, 64, 64, "px", 0],
        [null, 128, 128, "px", 0],
        [null, 256, 256, "px", 0],
        [null, 512, 512, "px", 0],
        [null, 1024, 1024, "px", 0],
        [null, 2048, 2048, "px", 0],
        [null, 4096, 4096, "px", 0],
      ],
    },
  ];
  function ju(j, q, m) {
    g7.call(this, q, "sel_" + j);
    this.R = j;
    var n = J.m("div", "form");
    this.body.appendChild(n);
    this.x8 = new k7(q, 0, 255, null, 0, !1, !0);
    n.appendChild(this.x8._);
    this.x8.q(1);
    this.x8.Q(_.E.n, this.OI, this);
    var G = J.m("span");
    G.textContent = m;
    n.appendChild(G);
    J.Ft(n);
    this.a6j = new av("Apply at canvas bounds");
    if (j != "border") n.appendChild(this.a6j._);
    this.v0 = J.y_(this, n);
    this.Q("closebtn", this.eR, this);
  }
  ju.prototype = new g7();
  ju.prototype._j = function (j, q) {
    if (j == null) return;
    if (j.h == null) alert("No selection!");
    return j.h != null;
  };
  ju.prototype.eR = function () {
    var j = new fd(_.E.w, !0);
    j.l = L.cJ;
    j.data = { R: "h_undoredo" };
    this.k(j);
  };
  ju.prototype.OI = function (j, q, m) {
    if (q == null) this.eR();
    var n = new fd(_.E.NI, !0);
    n.data = L.pI.Lz(this.R, this.x8.V(), this.a6j.V());
    n.XE = !0;
    if (m != !0) n.data.aar = !0;
    this.k(n);
  };
  ju.prototype.GP = function (j) {
    this.OI(null, null, !0);
    this.close();
  };
  ju.prototype.T = function () {
    g7.prototype.T.call(this);
    this.v0.T();
    if (this.x8) this.x8.T();
  };
  ju.prototype.Wz = function (j, q) {
    this.x8.j$();
    this.OI(null, !0);
  };
  function bp(j, q, m, n, G, W) {
    g7.call(this, m, q);
    this.a5c = W;
    this.EU = G;
    this.mM = null;
    this.IN = J.m("div", "form");
    this.body.appendChild(this.IN);
    this.acq = J.m("div");
    this.IN.appendChild(this.acq);
    var k = 500;
    if (n) {
      var T = n.split(",");
      n = T[0];
      if (T[1]) k = parseFloat(T[1]);
    }
    this.x8 =
      j == 0
        ? new bJ(m, null, 10)
        : j == 1
        ? new dV(m, 0, k, n, 1)
        : new bJ(m, null, 24, 5);
    this.x8.Q(_.E.n, this.OI, this);
    this.IN.appendChild(this.x8._);
    this.v0 = J.y_(this, this.IN);
    this.Q("closebtn", this.JT, this);
  }
  bp.prototype = new g7();
  bp.prototype.lu = function (j, q) {
    return new ea(
      Math.max(0, Math.min(150, (j - 250) / 2)),
      Math.max(0, Math.min(150, (q - 120) / 2))
    );
  };
  bp.prototype.bx = function () {
    return this.a5c;
  };
  bp.prototype.OI = function (j) {
    var q = this.x8.V();
    if (this.EU) this.BA(q);
  };
  bp.prototype.JT = function (j) {
    if (this.EU) this.BA("cancel");
  };
  bp.prototype.GP = function (j) {
    if (this.EU) this.BA("confirm");
    else this.BA(this.x8.V());
    this.close();
  };
  bp.prototype.BA = function (j) {
    if (this.mM.ml) this.mM.ml(j);
    else if (this.mM.N0) {
      var q = this.mM.N0,
        m = new fd(q.p, !0);
      m.l = q.l;
      m.data = q.d;
      m.data.K = j;
      m.XE = !0;
      this.k(m);
    }
  };
  bp.prototype.T = function () {
    g7.prototype.T.call(this);
    this.v0.T();
    if (this.x8) this.x8.T();
  };
  bp.prototype.Wz = function (j, q) {
    this.mM = q;
    this.x8.q(q.pv);
    this.x8.j$();
    this.acq.innerHTML = q.aLP ? q.aLP : "";
    this.OI(null);
  };
  function kC() {
    g7.call(this, [1, 5], "open_from_url");
    this.sQ = null;
    var j = J.m("div", "form");
    this.body.appendChild(j);
    this.avz = new bJ("URL", null, 22);
    j.appendChild(this.avz._);
    J.Ft(j);
    this.atN = new gA(
      [21, 0],
      [
        [21, 2],
        [21, 1],
      ]
    );
    j.appendChild(this.atN._);
    this.v0 = J.y_(this, j);
  }
  kC.prototype = new g7();
  kC.prototype.T = function () {
    g7.prototype.T.call(this);
    this.v0.T();
    this.atN.T();
  };
  kC.prototype.Wz = function (j, q, m) {
    this.avz.j$();
    this.sQ = null;
    var n = m.mS;
    if (j && n.indexOf(j) != -1) this.sQ = n.indexOf(j);
  };
  kC.prototype.GP = function (j) {
    var q = new fd(_.E.c, !0),
      m = this.avz.V();
    q.data = {
      R: _.Y.mw,
      rw: { url: m, Wk: !0, sQ: this.atN.V() == 1 ? this.sQ : null },
    };
    this.k(q);
    this.close();
  };
  function c5() {
    g7.call(this, [12, 79], "preferences");
    this.a = null;
    var j = J.m("div", "form");
    j.style.width = "290px";
    this.body.appendChild(j);
    this.Ha = [
      new av([8, 2]),
      new g1(),
      new g1(),
      new av([8, 4]),
      new g1(),
      new f1(
        [12, 80, 3],
        [
          [12, 93, 3],
          [12, 80, 4],
        ]
      ),
      new k7(["VAR0 X", [12, 80, 5]], 0.02, 200, null, 2),
      new f1(null, B.uO.t0),
      new k7(["VAR0 Y", [12, 80, 5]], 0.02, 200, null, 2),
      new k7("Subdivision", 1, 10),
      new f1([12, 80, 6], B.uO.t0),
      new g1(),
      new f1([12, 14, 1], [[12, 14, 2], [12, 14, 3], "Bicubic Sharper"]),
      new av("Zoom with Scroll Wheel"),
      new av("Glass Menus"),
      new k7("Cursor Offset", 0, 200),
      new bJ("Dezgo API Key"),
    ];
    for (var y = 0; y < this.Ha.length; y++) {
      var q = this.Ha[y];
      q.parent = this;
      q.Q(_.E.n, this.To, this);
      if (y == 2) {
        var m = new aD("Local guides:");
        j.appendChild(m._);
      }
      if (y == 11) {
        var m = new aD("Quick Mask Color:");
        j.appendChild(m._);
      }
      j.appendChild(q._);
      if (y != 0 && y != 1 && y != 3 && y != 4 && y != 6 && y != 8) J.Ft(j);
      if (y == 2 || y == 9 || y == 11) J.c$(j);
    }
  }
  c5.prototype = new g7();
  c5.prototype.T = function () {
    g7.prototype.T.call(this);
    for (var y = 0; y < this.Ha.length; y++) this.Ha[y].T();
  };
  c5.prototype.Wz = function (j, q, m) {};
  c5.prototype.yp = function (j, q) {
    this.a = j;
    var m = j.q1;
    this.Ha[0].q(m.M3);
    this.Ha[1].kK(m.MY);
    this.Ha[2].kK(m.If);
    this.Ha[3].q(m.GX);
    this.Ha[4].kK(m.qF);
    this.Ha[5].q(m.Mt);
    this.Ha[6].q(m.y1);
    this.Ha[7].q(m.lA);
    this.Ha[8].q(m.XR == 0 ? m.y1 : m.XR);
    this.Ha[9].q(m.nL);
    this.Ha[10].q(m.WH);
    var n = window.locStor.getItem("__qmc");
    this.Ha[11].kK(n == null ? 16711680 : n);
    var G = window.locStor.getItem("__itp");
    this.Ha[12].q(G == null ? 1 : G);
    var W = window.locStor.getItem("__zwh");
    this.Ha[13].q(W == 1);
    var k = window.locStor.getItem("__glm");
    this.Ha[14].q(k == "1");
    this.Ha[15].q(j.Pv);
    var T = window.locStor.getItem("__dak");
    this.Ha[16].q(T ? T : "");
  };
  c5.prototype.To = function (j) {
    var q = this.Ha,
      m = B.S(this.a.q1);
    m.M3 = q[0].V();
    m.MY = q[1].we();
    m.If = q[2].we();
    m.GX = q[3].V();
    m.qF = q[4].we();
    m.Mt = q[5].V();
    m.y1 = q[6].V();
    m.lA = q[7].V();
    if (j.target == q[6]) {
      q[8].q(q[6].V());
      m.XR = 0;
    } else m.XR = q[8].V();
    m.nL = q[9].V();
    m.WH = q[10].V();
    var n = window.locStor;
    n.setItem("__qmc", q[11].we());
    n.setItem("__itp", q[12].V());
    n.setItem("__zwh", q[13].V() ? "1" : "0");
    n.setItem("__glm", q[14].V() ? "1" : "0");
    this.a.Pv = q[15].V();
    var G = q[16].V();
    if (G == "") n.removeItem("__dak");
    else n.setItem("__dak", G);
    var W = new fd(_.E.c, !0);
    W.data = { R: _.Y.fh, rw: fG.Tz, jt: m };
    this.k(W);
  };
  function bE() {
    g7.call(this, [11, 8], "saveforweb");
    this.am1 = "";
    this.caller = null;
    this.cI = null;
    this.a = null;
    J._g(this.body, "flexrow");
    this.body.style.padding = "0";
    var j = J.m("div");
    J.F(j, "position:relative;");
    var q = J.m("div");
    this.body.appendChild(j);
    this.body.appendChild(q);
    this.fJ = J.m("div", "imgcont");
    j.appendChild(this.fJ);
    this.h8 = new j7();
    this.h8.X3(512, 512);
    var m = (this.K5 = J.m("video"));
    m.setAttribute("controls", "");
    m.setAttribute("preload", "auto");
    m.setAttribute("loop", "");
    this.k6 = J.m("div");
    J.F(
      this.k6,
      "position:absolute;  right:0px; bottom:0px; padding: 3px 6px;  background-color:black;"
    );
    j.appendChild(this.k6);
    var n = (this.IN = J.m("div", "form cell"));
    J.F(n, "width:195px; padding:9px 13px;");
    q.appendChild(n);
    this.xn = new bJ([12, 48], null, 7.6);
    this.xn.pM();
    n.appendChild(this.xn._);
    var G = gh.ab();
    G[G.indexOf("WEBP")] = "webP";
    this.Wf = new f1([12, 50], G);
    this.Wf._.style.marginRight = "0";
    this.Wf.pM();
    n.appendChild(this.Wf._);
    this.Wf.Q(_.E.n, this.ll, this);
    J.Ft(n);
    this.X0 = new aY(!0, !0, !1, !0);
    this.X0.pM();
    this.X0.Q(_.E.n, this.ll, this);
    this.X0.pB._.style.paddingBottom = "8px";
    n.appendChild(this.X0._);
    this.qv = new gf();
    this.qv.Q(_.E.n, this.ll, this);
    n.appendChild(this.qv._);
    this.bW = new kv([1, 2], !1, null, !0);
    this.bW.Q("click", this.GP, this);
    n.appendChild(this.bW._);
    this.tl = new kv("...", !1, null, !0);
    this.tl.Q("click", this.GP, this);
    n.appendChild(this.tl._);
  }
  bE.prototype = new g7();
  bE.prototype._j = function (j, q) {
    return j != null;
  };
  bE.prototype.T = function () {
    g7.prototype.T.call(this);
    this.X0.T();
    this.xn.T();
    this.Wf.T();
    this.qv.T();
    this.bW.T();
  };
  bE.prototype.GP = function (j) {
    var q = this.xn.V().trim(),
      m = gh.ab()[this.Wf.V()],
      n = m == "JPG" || m == "PNG" || m == "GIF" || m == "SVG" || m == "WEBP",
      G = gh.lj(m),
      W = "." + m.toLowerCase(),
      k = this.cI,
      T = q + W,
      b = this.caller.WM(),
      c = b.gQ,
      a = this.qv.V(),
      f = c.length != 0 && n ? a.slcs : 0;
    if (f != 0) {
      var U = [],
        Z = {},
        h = new hk(0, 0, b.r, b.$),
        u = B.sL(b.ht(), 8);
      for (var y = 0; y < c.length; y++) U.push(L.ct.II(c, y));
      U.reverse();
      var i = B.H.asH([0, 0, b.r, b.$], U),
        x = [];
      for (var y = 0; y < i.length; y++) {
        var X = i[y],
          $ = new hk(X[0], X[1], X[2] - X[0], X[3] - X[1]),
          aF = "" + (y + 1);
        if (aF.length < 2) aF = "0" + aF;
        aF = q + "_" + aF;
        if (X[4] != null && c[X[4]].v.Nm) aF = c[X[4]].v.Nm.v;
        var H = "images/" + aF + W;
        x.push(H);
        if (f == 2 && X[4] == null) continue;
        var C = B.j($.C() * 4);
        B.M4(u, h, C, $);
        if (Z[H]) {
          alert('There are multiple slices with a name "' + aF + '"');
          return;
        }
        Z[H] = new Uint8Array(G.Ev([[C.buffer, 0, b.zv, b.Un]], $.r, $.$, a));
      }
      x.push("images/spacer.gif");
      var l =
        "<html>\n<head>\n<title>" +
        q +
        '</title>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8">\n</head>\n';
      l +=
        '<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">\n';
      l += "<!-- Save for Web Slices (" + b.name + ") -->\n";
      l += B.H.axk(i, x, c, f) + "\n";
      l += "<!-- End Save for Web Slices -->\n";
      l += "</body>\n</html>\n";
      var v = B.j(Math.round(l.length * 1.5)),
        K = M.YG(l, v, 0);
      Z["index.html"] = v.slice(0, K);
      k = UZIP.encode(Z);
      T = q + ".zip";
    } else if (b.a5K() && n && a.artb) {
      var S = [],
        h,
        u;
      if (ei == 0) {
        h = new hk(0, 0, b.r, b.$);
        u = B.sL(b.ht(), 8);
        var o = b.root.children;
        for (var y = 0; y < o.length; y++) {
          var V = o[y].v;
          if (V.add.artb == null || !V.Iw()) continue;
          S.push([V.getName(), V.Li()]);
        }
      } else {
        h = b.u$();
        u = new Uint8Array(b.fQ(this.a));
        var P = b.add.arts;
        for (var y = 0; y < P.length; y++) {
          var z = P[y];
          S.push([z.eA, B.b.YU(z.gX)]);
        }
      }
      var Z = {};
      for (var y = 0; y < S.length; y++) {
        var E,
          z = S[y][1];
        if (m == "SVG") E = new Uint8Array(G.Ev(b, z.r, z.$, a, this.a, y));
        else {
          var A = B.j(z.C() * 4);
          console.log(h, z);
          B.M4(u, h, A, z);
          E = new Uint8Array(G.Ev([[A.buffer, 0, b.zv, b.Un]], z.r, z.$, a));
        }
        Z[S[y][0] + W] = E;
      }
      k = UZIP.encode(Z);
      T = q + ".zip";
    }
    var N = j && j.target == this.tl,
      Q = function () {
        if (b.uF) jc.ha("act=1&id=" + b.uF);
        this.close();
        var W = gh.ab()[this.Wf.V()];
        lw.event("efmt_" + W.toLowerCase(), 0.1);
        var Y = new fd(_.E.c, !0);
        Y.data = { R: _.Y.xk, data: k, name: T };
        if (N) {
          Y.data = { R: _.Y.s0, kO: "storwindow", io: 1, V0: T, Vg: k };
        }
        this.k(Y);
      }.bind(this);
    b.IZ();
    if (!this.a.Nf || lw.eo()) {
      Q();
      return;
    }
    var e = gd.mF() != 0;
    Q();
    var Y = new fd(_.E.c, !0),
      d = bA.Cs(
        '3UMe\\ORYBB@EVG9* 08{"",-;#a|gfbeVvg^QT[<7AO?/437#:xx%.zv%vgaxh\\WU^fWJB@W6@3K<;30,,+3`uy{sqc\\7'
      ),
      I = bA.Cs(";QJXQ_*II9"),
      O = function () {
        Y.data = { R: _.Y.s0, kO: "account" };
        this.k(Y);
      }.bind(this);
    if (e) {
      d = bA.Cs(
        '0^Ne\\ORYLG:<2G&0>||5t{{lqhr<yG\\`bZXJC^SHK?4L868@#3!(&.tn%guakob^RiKME]O@>ENePEr,"z*x<-"hxdfzgjdnMMYn_LLVGF>;776>1,5*x!q&d lh\\!eWXMdR@UF;ADL9-CDNOC4r|o(lgs{m^eURiTSORCKTA5K75B!!-738}|lwt}<[XadZ]eDT\\N?9PB:8MO'
      );
      O = function () {};
      I = null;
    }
    Y.data = { R: _.Y.s0, kO: bA.H3, K: d, ml: O, aio: I };
    if (ei == 0) if (Math.random() < 0.1 || e) this.k(Y);
  };
  bE.prototype.yb = function () {
    this.h8.wE();
    this.h8.q(null);
    this.cI = null;
  };
  bE.prototype.Wz = function (j, q, m) {
    if (q.hr != null) this.Wf.q(q.hr);
    (this.caller = m), (j = m.WM());
    var n = j.name,
      G = n.lastIndexOf("."),
      n = G == -1 ? n : n.slice(0, G);
    this.xn.q(n);
    var W = j.r,
      k = j.$;
    if (ei == 1) {
      var T = j.u$();
      W = T.r;
      k = T.$;
    }
    var b = W + "," + k;
    if (b != this.am1) {
      this.am1 = b;
      this.X0.q(new ea(W, k), j.zv);
    }
    this.qv.apJ();
    this.ll(null, !0);
    if (q.aoZ) {
      this.X0.Nw(3);
      var c = this.qv.V();
      c.rall = !0;
      this.qv.q(c);
    }
    this.bW._.focus();
  };
  bE.prototype.aDe = function (j, q) {
    return j < q && j < 660;
  };
  bE.prototype.lu = function (j, q) {
    return this.aDe(j, q)
      ? new ea(0, 0)
      : new ea(
          Math.max(0, Math.min(150, (j - 770) / 2)),
          Math.max(0, Math.min(150, (q - 590) / 2))
        );
  };
  bE.prototype.X3 = function (j, q, m) {
    this.GM = j;
    this.uu = q;
    if (this.caller == null || this.caller.WM() == null) return;
    var n = this.bW._,
      G = this.aDe(j, q),
      W,
      k,
      U = '<span style="width:',
      Z = 'display:inline-block; text-align:right;">';
    if (G) {
      var T = this.IN.getBoundingClientRect().height;
      W = j;
      k = q - Math.max(T, 252);
      J.XZ(this.body, "flexrow");
    } else {
      W = Math.min(512, j - 195 - 2 * 13);
      k = Math.min(512, q - 24);
      J._g(this.body, "flexrow");
    }
    var b = G ? j - 2 * 13 : 195;
    this.IN.style.width = b + "px";
    this.xn.BW.style.width = b - 78 + "px";
    this.X0.X3(b - 1);
    this.bW._.style.width = b - 28 + "px";
    this.tl._.style.marginRight = "0";
    var c = gh.ab()[this.Wf.V()],
      a = gh.lj(c);
    if (a.k5 || a.KV)
      J.F(
        this.fJ.firstChild,
        "display:block; width:" + W + "px; height:" + k + "px;"
      );
    else {
      this.h8.X3(W, k);
      this.K5.width = W;
      this.K5.height = k;
    }
    if (this.cI == null) return;
    var f = this.cI.byteLength,
      h = U + 64 + "px;" + Z + bE.za(f) + "</span>";
    if (W > 400)
      h +=
        U +
        90 +
        "px; opacity:" +
        0.5 +
        ";" +
        Z +
        f.toLocaleString() +
        " B</span>";
    this.k6.innerHTML = h;
    if (m)
      setTimeout(
        function () {
          this.X3(this.GM, this.uu);
        }.bind(this),
        20
      );
  };
  bE.za = function (j) {
    var q = j.toString(2),
      m = 0;
    while (m + 10 < q.length) m += 10;
    var n = (j / Math.pow(2, m)).toFixed(1);
    if (n.endsWith(".0")) n = n.slice(0, -2);
    var G = "B KB MB GB TB PB".split(" ")[Math.floor(m / 10)];
    return n + " " + G;
  };
  bE.prototype.yp = function (j, q) {
    this.a = j;
  };
  bE.prototype.ll = async function (j, q) {
    var m = this.caller.WM(),
      n = this.X0.V(),
      G = n.x,
      W = n.y,
      k = this.Wf.V(),
      T = gh.ab()[k],
      b = gh.ayM(m)[0].length,
      c = ["GIF", "PNG", "WEBP", "MP4"].indexOf(T) != -1 && b > 1,
      u = "";
    if (
      c &&
      T != "MP4" &&
      q &&
      ((b > 4 && G * W > 1024 * 1024) || G * W * b > 800 * 800 * 50)
    ) {
      var a = 1;
      while (Math.max(G >>> a, W >>> a) > 800) a++;
      var f = window.confirm(
        "Your animation is large (" +
          G +
          " x " +
          W +
          ' px). Press "OK" to scale it to ' +
          (100 >>> a) +
          '%. Press "Cancel" to keep the size.'
      );
      if (f) {
        this.X0.q(new ea(G >>> a, W >>> a), null, !0);
        G = G >>> a;
        W = W >>> a;
      }
    }
    var U = m.$T();
    this.qv.HK(
      T,
      c,
      m.gQ.length != 0,
      m.a5K(),
      U != null && m.depth != 32,
      m._E.length != 0,
      m.depth
    );
    var Z = window.locStor.getItem("sfwPrms");
    if (Z == null) Z = {};
    else {
      Z = JSON.parse(Z);
      if (Z.MP4 && Z.MP4.qual == 100) Z.MP4.qual = 50;
    }
    var h = this.qv.V();
    if (j && j.target == this.qv) {
      Z[T] = h;
      window.locStor.setItem("sfwPrms", JSON.stringify(Z));
    } else if (Z[T]) {
      this.qv.q(Z[T]);
      h = this.qv.V();
    }
    this.cI = await gh.Wo(m, T, G, W, h, this.a);
    if (this.cI == null) {
      return;
    }
    J.dI(this.fJ);
    this.h8.wE();
    var i = gh.lj(T);
    if (i.KV) {
      this.fJ.innerHTML = "<div></div>";
    } else if (i.k5) {
      var x = G,
        X = W,
        $;
      if (T == "PDF" || T == "AI") {
        $ = URL.createObjectURL(
          new Blob([this.cI], { type: "application/pdf" })
        );
      } else {
        $ = URL.createObjectURL(new Blob([this.cI], { type: "image/svg+xml" }));
      }
      this.fJ.innerHTML = '<iframe src="' + $ + '"></iframe>';
    } else if (T == "MP4") {
      var $ = URL.createObjectURL(new Blob([this.cI]));
      this.K5.setAttribute("src", $);
      this.fJ.appendChild(this.K5);
    } else {
      var H = i.Qg ? await gh.a5_(i, this.cI) : i.LN(this.cI),
        l = H[0],
        v = l.Iu,
        x = v.r,
        X = v.$;
      if (l.depth != null && l.depth != 8)
        for (var y = 0; y < H.length; y++) {
          var K = H[y].depth == 16 ? Uint16Array : Float32Array;
          H[y].data = B.sL(new K(H[y].data), 8).buffer;
          H[y].depth = 8;
        }
      if (l.Pt) {
        var S = ICC.R(l.Pt.buffer),
          o = 17,
          V = ICC.U.sampleLUT(S, o);
        for (var y = 0; y < H.length; y++) {
          var P = new Uint8Array(H[y].data);
          ICC.U.applyLUT(V, o, P, P);
        }
      }
      this.h8.q(H, H.length > 1 ? h[h.length - 3] : 0);
      this.fJ.appendChild(this.h8._);
      u = "background: rgba(0,0,0,0);";
    }
    J.F(
      this.fJ,
      "display:block; " +
        (i.KV
          ? "background:rgba(0,0,0,0);"
          : "background-size:" + 16 / J.IC() + "px;") +
        u
    );
    this.X3(this.GM, this.uu, q);
  };
  function jo() {
    g7.call(this, [11, 13], "shortcuts");
    this.a = null;
    var j = (this.v$ = J.m("div", "scrollable"));
    J.F(j, "min-width:700px; max-height:500px; padding:1.5em");
    this.body.appendChild(j);
    this.Xk();
  }
  jo.prototype = new g7();
  jo.prototype.T = function () {
    g7.prototype.T.call(this);
    this.Xk();
  };
  jo.prototype.yp = function (j, q) {
    this.a = j;
  };
  jo.prototype.Wz = function (j, q, m, n) {
    if (J.JO(this._)) this.Xk();
  };
  jo.prototype.Xk = function () {
    var j =
        '<div style="line-height:1.4em; column-count:3; column-gap:3em; column-rule-width:1px;" class="">',
      q = "",
      m = gn,
      n = m.A8,
      G = m.X6,
      W = m.O4;
    q += '<h2 style="margin-top:0;">Main Menu</h2>';
    q += j;
    q += this.K8([
      [0, 0],
      "---",
      [1, 0],
      [n, m.pd],
      [1, 2],
      [n, m.ng],
      [1, 3],
      [G, n, m.ng],
      [1, 8],
      [W, G, n, m.ng],
      [0, 1],
      "---",
      [2, 0],
      [G, n, m.AQ],
      [2, 1],
      [n, m.AQ],
      [5, 0],
      [n, m.Bi],
      [5, 1],
      [n, m.dV],
      [5, 2],
      [n, m.qj],
      [2, 2],
      "Delete",
      [2, 3],
      [W, m.N7],
      [10, 16],
      [W, n, m.a_],
      [12, 79],
      [n, m.aj],
      [3],
      "---",
      [4, 1],
      [n, m.ji],
      [4, 2],
      [n, m.Sx],
      [4, 5],
      [n, m.Si],
      [4, 11],
      [n, m.JC],
      [0, 3],
      "---",
      [6, 13],
      [G, n, m.Jd],
      [6, 49, 0],
      [n, m.Uv],
      [6, 6, 0],
      [W, n, m.Vj],
      [6, 9],
      [n, m.Vj],
      [6, 10],
      [n, m.E],
      [0, 5],
      "---",
      [7, 0],
      [n, m.Y],
      [7, 1],
      [n, m.l_],
      [7, 2],
      [G, n, m.JC],
      [0, 7],
      "---",
      [8, 0],
      [n, m.h5],
      [8, 1],
      [n, m.Nc],
      [8, 3],
      [n, m.Fb],
      [8, 2],
      [n, m.WU],
      [8, 4],
      [n, m.d0],
      [11, 13],
      "?",
    ]);
    q += "</div>";
    q += '<h2 style="margin-top:1.5em;">Navigation</h2>';
    q += j;
    q += this.K8([
      "Vertical scroll",
      "Wheel",
      "Horizontal scroll",
      [n, "Wheel"],
      "Zooming",
      [W, "Wheel"],
    ]);
    q += "</div>";
    q +=
      '<h2 style="margin-top:1.5em;">Quick tools (press to enable, release to disable)</h2>';
    q += j;
    q += this.K8([[10, 11], [n], [10, 7], "Space", [10, 17], [n, m.Xe]]);
    q += "</div>";
    q += '<h2 style="margin-top:1.5em;">Tools</h2>';
    q += j;
    var k = [],
      T = this.a;
    if (T == null) return;
    var b = T.Z;
    for (var y = 0; y < b.hR.length; y++) {
      var c = b.hR[y],
        a = b.keys[y];
      for (var f = 0; f < c.length; f++) k.push(c[f].l.name, a ? a.Lj : null);
    }
    k = k.concat([
      [24, 16],
      "---",
      [22, 7, 1],
      "D",
      [22, 7, 0],
      "X",
      [6, 6, 1],
      "Q",
      "Decrease Brush Size",
      "[",
      "Increase Brush Size",
      "]",
      "Decrease Hardness",
      "{",
      "Increase Hardness",
      "}",
      [12, 86],
      [n, m.gM],
    ]);
    q += this.K8(k);
    q += "</div>";
    this.v$.innerHTML = q;
  };
  jo.prototype.K8 = function (j) {
    var q = "",
      m = !0;
    for (var y = 0; y < j.length; y += 2) {
      var n = j[y],
        G = gn.uj(j[y + 1]);
      if (G == null) {
        m = !1;
        continue;
      }
      var W = J.TU(g$.get(n));
      if (G == "---") {
        if (!m) q += "<br/>";
        q +=
          '<div style="font-weight:bold; border-bottom: 1px solid;">' +
          W +
          "</div>";
      } else
        q +=
          "<div>" +
          W +
          ' <span style="float:right; font-weight:bold;">' +
          G +
          "</span> </div>";
      m = !1;
    }
    return q;
  };
  function lt(j) {
    g7.call(
      this,
      j ? "Artboard Options" : [8, 11, 1],
      (j ? "a" : "s") + "options"
    );
    this.i1 = null;
    this.agw = j;
    var q = J.m("div", "form");
    q.style.width = "20em";
    this.body.appendChild(q);
    this.yq = { Nm: [12, 48], url: "URL", null: [12, 71] };
    this.Ha = {};
    for (var m in this.yq) {
      if (j && m != "Nm") continue;
      var n = new bJ(this.yq[m], null, 15);
      this.Ha[m] = n;
      q.appendChild(n._);
    }
    this.aaK = new aD([12, 14, 0]);
    q.appendChild(this.aaK._);
    this.NF = new eh(0, !j);
    q.appendChild(this.NF._);
    this.v0 = J.y_(this, q);
  }
  lt.prototype = new g7();
  lt.prototype.Wz = function (j, q, m) {
    var n = q.K;
    this.i1 = JSON.stringify(n);
    console.log(n);
    if (n.gX) {
      this.Ha.Nm.q(n.eA);
      var G = n.gX,
        W = G[0],
        k = G[1];
      this.NF.q([W, k, G[2] - W, G[3] - k]);
    } else {
      for (var T in this.yq) {
        this.Ha[T].q(n[T] ? n[T].v : "");
      }
      var b = n.bounds.v,
        W = b.Left.v,
        k = b.Top.v;
      this.NF.q([W, k, b.Rght.v - W, b.Btom.v - k]);
    }
  };
  lt.prototype.GP = function (j) {
    var q = JSON.parse(this.i1),
      m = new fd(_.E.w, !0),
      n = this.NF.V(),
      G = n[0],
      W = n[1];
    console.log(n);
    if (this.agw) {
      q.eA = this.Ha.Nm.V();
      q.gX = [G, W, G + n[2], W + n[3]];
      m.l = L.eO;
      m.data = { R: "rpl", K: q };
    } else {
      for (var k in this.yq) {
        var T = this.Ha[k].V();
        q[k] = { t: "TEXT", v: T };
      }
      var b = q.bounds.v;
      b.Left.v = G;
      b.Top.v = W;
      b.Rght.v = G + n[2];
      b.Btom.v = W + n[3];
      m.l = L.Y8;
      m.data = q;
    }
    m.XE = !0;
    this.k(m);
    this.close();
  };
  lt.prototype.T = function () {
    g7.prototype.T.call(this);
    this.v0.T();
    this.aaK.T();
    this.NF.T();
  };
  function jJ() {
    g7.call(this, [2, 3], "fill");
    this.I7 = null;
    var j = J.m("div", "form padded");
    j.style.width = "22em";
    this.body.appendChild(j);
    this.QT = "FrgC BckC Clr Blck Gry Wht contentAware Ptrn".split(" ");
    this.SR = new f1(
      [2, 3],
      [
        [12, 45],
        [12, 46],
        [12, 47],
        [13, 1, 10],
        [13, 1, 7],
        [13, 1, 8],
        [6, 48, 0, 3],
        [12, 62],
      ],
      [3, 3, 2]
    );
    this.SR.Q(_.E.n, this.aqS, this);
    j.appendChild(this.SR._);
    this.fJ = J.m("span");
    j.appendChild(this.fJ);
    this.ek = new g1();
    this.ek.parent = this;
    this.ek.kK(0);
    this.cs = new bW();
    this.cs.parent = this;
    this.agY = new f1([12, 19, 0], kJ.nb, kJ.hb);
    j.appendChild(this.agY._);
    this.Y6 = new dV([12, 0], 0, 100, "%", 0, !1);
    this.Y6.q(100);
    j.appendChild(this.Y6._);
    this.Y_ = new av([13, 5]);
    this.Y_.q(!1);
    j.appendChild(this.Y_._);
    this.v0 = J.y_(this, this.body);
  }
  jJ.prototype = new g7();
  jJ.prototype._j = function (j, q) {
    return j != null;
  };
  jJ.prototype.bx = function () {
    return !0;
  };
  jJ.prototype.aqS = function () {
    var j = this.SR.V(),
      q = this.ek._,
      m = this.cs._,
      n = this.fJ;
    if (j == 2) n.appendChild(q);
    else if (n.contains(q)) n.removeChild(q);
    if (j == 7) n.appendChild(m);
    else if (n.contains(m)) n.removeChild(m);
  };
  jJ.prototype.T = function () {
    g7.prototype.T.call(this);
    this.SR.T();
    this.agY.T();
    this.Y6.T();
    this.Y_.T();
    this.v0.T();
  };
  jJ.prototype.GP = function (j) {
    if (!this.I7.Ph()) return;
    var q = new fd(_.E.NI, !0),
      m = this.SR.V();
    q.data = L.tt.QQ(
      this.QT[m],
      kJ.YH[this.agY.V()],
      this.Y6.V() / 100,
      this.ek.V(),
      this.Y_.V(),
      this.cs.V()
    );
    this.close();
    this.k(q);
  };
  jJ.prototype.Wz = function (j, q) {
    this.I7 = j;
  };
  jJ.prototype.yp = function (j, q) {
    if (q == fG.HN || q == fG.OF) {
      this.cs.j3(j.wP);
      this.cs.q({
        classID: "Ptrn",
        Nm: { v: "orangeslices", t: "TEXT" },
        Idnt: { v: "b4d43394-d71c-11e5-b1ae-a548a96e5f9f", t: "TEXT" },
      });
    }
  };
  function c1() {
    g7.call(this, [14, 9], "stroke");
    this.a = null;
    this.IN = J.m("div", "form");
    J.F(this.IN, "width:24em");
    this.body.appendChild(this.IN);
    this.Hi = new a4("FrFX", !0);
    this.Hi.parent = this;
    var j = ["Sz", "Styl", "Md", "Opct"].concat(eu.dS);
    for (var y = 0; y < j.length; y++) {
      var q = this.Hi.Vc[j[y]]._;
      this.IN.appendChild(q);
    }
    this.QS = !1;
    this.v0 = J.y_(this, this.body);
  }
  c1.prototype = new g7();
  c1.prototype._j = function (j, q) {
    return j != null;
  };
  c1.prototype.bx = function () {
    return !0;
  };
  c1.prototype.T = function () {
    g7.prototype.T.call(this);
    this.v0.T();
    this.Hi.T();
  };
  c1.prototype.GP = function (j) {
    var q = this.Hi.V(),
      m = { classID: "Strk" };
    m.Md = q.Md;
    m.Opct = q.Opct;
    m.Clr = q.Clr;
    m.Wdth = { t: "long", v: q.Sz.v.val };
    var n = eu.stroke.types.indexOf(q.Styl.v.FStl);
    m.Lctn = { t: "enum", v: { StrL: ["Insd", "Cntr", "Otsd"][n] } };
    var G = new fd(_.E.NI, !0);
    G.data = { _D: "stroke", SC: m };
    this.close();
    this.k(G);
  };
  c1.prototype.Wz = function (j, q) {
    if (!this.QS) {
      var m = eu.oy[eu.order.indexOf("FrFX")];
      m = JSON.parse(m);
      this.Hi.update(j, m);
      this.QS = !0;
    }
    var m = this.Hi.V(),
      n = this.a.UP;
    m.Clr.v = B.MV.Ia({ o: (n >> 16) & 255, i: (n >> 8) & 255, X: n & 255 });
    this.Hi.update(j, m);
  };
  c1.prototype.yp = function (j, q) {
    this.a = j;
  };
  function jT() {
    g7.call(this, [11, 9], "textwarp");
    this.Ha = new lh();
    this.Ha.Q(_.E.n, this.L0, this);
    this.Ha.parent = this;
    this.IN = J.m("div", "form");
    J.F(this.IN, "width:20em");
    this.body.appendChild(this.IN);
    this.IN.appendChild(this.Ha.jb._);
    this.IN.appendChild(this.Ha.it._);
    this.IN.appendChild(this.Ha.DF._);
    this.IN.appendChild(this.Ha.H9._);
    this.IN.appendChild(this.Ha.U8._);
    this.v0 = J.y_(this, this.IN);
    this.Q("closebtn", this.JT, this);
  }
  jT.prototype = new g7();
  jT.prototype.bx = function () {
    return !0;
  };
  jT.prototype.T = function () {
    g7.prototype.T.call(this);
    this.v0.T();
    this.Ha.T();
  };
  jT.prototype.L0 = function (j) {
    var q = this.Ha.V();
    this.BA({ R: "warp", rc: q });
  };
  jT.prototype.BA = function (j) {
    var q = new fd(_.E.w, !0);
    q.l = L.G_;
    q.data = j;
    q.XE = !0;
    this.k(q);
  };
  jT.prototype.JT = function (j) {
    this.BA({ R: "warpCancel" });
  };
  jT.prototype.GP = function (j) {
    this.BA({ R: "warpConfirm" });
    this.close();
  };
  jT.prototype.Wz = function (j, q) {
    var m = j.U[j.J[0]];
    this.Ha.q(m.add.TySh.Uu);
  };
  function fo() {
    g7.call(this, [11, 12, 0], "trim");
    var j = (this.IN = J.m("div", "form"));
    J.F(this.IN, "width:22em");
    this.body.appendChild(this.IN);
    var q = new aD("Color To Trim:");
    j.appendChild(q._);
    this.Dm = new bl(
      null,
      ["Top Left Pixel Color", "Bottom Right Pixel Color", [13, 1, 9]],
      null,
      null,
      !0
    );
    this.Dm.q([!0]);
    this.IN.appendChild(this.Dm._);
    var q = new aD("Sides:");
    j.appendChild(q._);
    this.en = new bl(null, ["Top", "Left", "Bottom", "Right"]);
    this.en.q([!0, !0, !0, !0]);
    this.IN.appendChild(this.en._);
    this.v0 = J.y_(this, this.body);
  }
  fo.prototype = new g7();
  fo.prototype._j = function (j, q) {
    return j != null;
  };
  fo.prototype.bx = function () {
    return !0;
  };
  fo.prototype.T = function () {
    g7.prototype.T.call(this);
    this.Dm.T();
    this.en.T();
    this.v0.T();
  };
  fo.prototype.GP = function (j) {
    var q = this.Dm.V().indexOf(!0),
      m = this.en.V(),
      n = new fd(_.E.NI, !0);
    n.data = L.xC.$0(q, m);
    this.close();
    this.k(n);
  };
  function ba() {
    g7.call(this, "Raw Photopea", "rawpea");
    this.S_ = null;
    this.body.style.padding = "0";
    var j = (this.GY = new gj["Adobe Camera Raw Filter"](!0)),
      q =
        '<svg  class="autoscale gsicon" viewBox="0 0 14 18" width="14" height="18" fill="black"><path d="M14,6 L10,6 L10,0 L4,0 L4,6 L0,6 L7,13 L14,6 L14,6 Z M0,14 L0,16 L14,16 L14,14 Z" /></svg>';
    this.body.appendChild(j._);
    this.FX = new f1("Space", fb.HR);
    this.Ex = new f1(null, ["8 bit", "16 bit", "32 bit"]);
    this.aAM = new kv([1, 0], !0, null, !0);
    this.aAM.Q("click", this.GP, this);
    this.Yp = new kv(q + " JPG", !0, null, !0);
    this.Yp.Q("click", this.ary, this);
    j.ol(this.FX._);
    j.ol(this.Ex._);
    j.ol(this.aAM._);
    j.ol(this.Yp._);
  }
  ba.prototype = new g7();
  ba.prototype.lu = function () {
    return new ea(0, 0);
  };
  ba.prototype.X3 = function (j, q) {
    this.GY.X3(j, q);
  };
  ba.prototype.yp = function (j, q) {
    this.GY.yp(j, q);
  };
  ba.prototype.T = function () {
    g7.prototype.T.call(this);
    this.GY.T();
  };
  ba.prototype.ary = function (j) {
    var q = this.GY.a6p(0, 8),
      m = q[1],
      n = gh.lj("JPG").Ev([[q[0].buffer]], m.r, m.$, [85]),
      G = new fd(_.E.c, !0);
    G.data = { R: _.Y.xk, data: n, name: "photo.jpg" };
    this.k(G);
  };
  ba.prototype.GP = function (j) {
    var q = this.S_,
      m = 8 << this.Ex.V(),
      n = this.FX.V(),
      G = kI.E5(q),
      W = this.GY.a6p(n, m),
      k = W[1],
      q = { Iu: k, data: W[0].buffer, Un: G, depth: m },
      T = gh.wk("Raw Photo", [q]);
    if (n != 0) T.uJ(gh.$P.get(fb.FF[n]));
    var b = new fd(_.E.c, !0);
    b.data = { R: _.Y.ED, fg: T };
    this.k(b);
    this.zE();
    this.close();
  };
  ba.prototype.zE = function () {
    this.S_ = null;
    this.GY.a0Q();
  };
  ba.prototype.Wz = function (j, q, m, n) {
    this.S_ = q.NP;
    this.GY.acu(q.NP);
  };
  ba.prototype.oa = function (j) {
    return !0;
  };
  ba.prototype.uY = function (j, q, m, n) {
    g7.prototype.uY.call(this, j, q, m, n);
    this.GY.uY(n);
  };
  function bf(j) {
    g7.call(this, j ? [11, 11, 0] : [11, 11, 1], j ? "vbitmap" : "rcolors");
    this.mM = null;
    this.wf = null;
    this.agx = null;
    this.eF = null;
    this._b = null;
    this.aHg = null;
    this.fg = null;
    this.a = null;
    this.l2 = "";
    this.Rd = j;
    this.mi = this.FE.bind(this);
    this.aJZ = !1;
    this.body.style.padding = "0";
    this.IN = J.m("div", "form hbar padded");
    this.body.appendChild(this.IN);
    this.rg = new bl(null, ["Fill", "Stroke", "Labels"]);
    this.rg.Q(_.E.n, this.FE, this);
    var q = J.m("span", "rangecontFloat form padded"),
      b = 16;
    q.appendChild(this.rg._);
    J.F(q, "position:absolute; width:120px; z-index:2;  padding-right:0px; ");
    var m = new kV();
    m._ = q;
    var n = (this.aD = {
        cnum: new k7([12, 82], 2, 50, null),
        ctab: new lo(),
        nois: new av([12, 81]),
        mode: new f1(null, ["Cartoon", "Photo"]),
        segm: new av("Segmentize"),
        cbok: new av("Coloring book"),
        poly: new av("Polygon"),
        merg: new av("Merge colors"),
        polE: new k7("Roughness", 2, 30, null),
        dthr: new av([12, 23, 3]),
        vprm: new kv("\u2026", !1, null, !0),
        ok: J.y_(this, null, !1),
      }),
      G = this;
    for (var W in n) {
      var k = n[W];
      k.parent = this;
      if (W == "ok") {
      } else if (W == "vprm") {
        k.Q("click", function (a) {
          var f = n.vprm._.getBoundingClientRect(),
            U = new fd(_.E.c, !0);
          U.data = { R: _.Y.wQ, Tf: m, x: f.left, y: f.top + 20 };
          G.k(U);
        });
      } else k.Q(_.E.n, this.FE, this);
    }
    var T = (this.Td = J.m("div", "flexrow"));
    this.body.appendChild(T);
    J.F(T, "background-color:var(--bg-canvas)");
    this.ho = new j7();
    this.ho.Q("viewchange", this.Ep, this);
    this.vC = new j7();
    this.Bl = J.m("canvas");
    J.F(this.Bl, "margin:0 0 0 1px; padding:0; cursor:grab;");
    this.lB = this.Bl.getContext("2d");
    var c = B.j(16 * 16 * 4);
    B.L_(c, b, b, 8);
    this.pV = B.scale.oO(c, b, b);
    this.ho.a2I(this.Bl);
    this.ho.Ig(this.vC);
    this.vC.Ig(this.ho);
    T.appendChild(this.ho._);
    if (j) T.appendChild(this.Bl);
    else T.appendChild(this.vC._);
  }
  bf.prototype = new g7();
  bf.prototype.lu = function () {
    return new ea(0, 0);
  };
  bf.prototype.bx = function () {
    return !0;
  };
  bf.prototype.X3 = function (j, q) {
    this.GM = j;
    this.uu = q;
    q = q - 44;
    if (j < 600) q -= 29;
    if (this.mM == null) return;
    var m = this.mM.Iu,
      n = aG.k7(j, q, m.r, m.$);
    if (n == 1) q -= 3;
    if (n == 0) {
      j = Math.floor(j / 2);
      J._g(this.Td, "flexrow");
    } else {
      q = Math.floor(q / 2);
      J.XZ(this.Td, "flexrow");
    }
    J.Q0(this.Bl, j, q);
    this.ho.X3(j, q);
    if (this.Rd) this.Ep();
    else this.vC.X3(j, q);
  };
  bf.prototype.uY = function (j, q, m, n) {
    this.ho.uY(n);
  };
  bf.prototype.T = function () {
    g7.prototype.T.call(this);
    for (var j in this.aD) this.aD[j].T();
  };
  bf.prototype.Wz = function (j, q) {
    this.fg = j;
    this._b = null;
    var m = j.U[j.J[0]];
    if (ei == 1) {
      var n = m.add.SoLd,
        G = n.Idnt.v,
        W = j.Kv(G, n.Crop ? n.Crop.v : null);
      m = { buffer: W.Zj[0], H: W.Zj[1] };
    }
    var k = B.DV.av0(m.buffer.buffer, m.H.r, m.H.$).aeg,
      T = k / ((m.H.r - 2) * (m.H.$ - 2)),
      b = this.aD;
    b.cnum.q(20);
    b.nois.q(T < 0.75);
    b.mode.q(T < 0.75 ? 1 : 0);
    b.segm.q(!1);
    b.cbok.q(!1);
    b.poly.q(!1);
    b.merg.q(!0);
    b.polE.q(1);
    b.dthr.q(!1);
    var c = m.H.P();
    c.x = c.y = 0;
    this.mM = { Iu: c, data: m.buffer.buffer.slice(0) };
    this.wf = null;
    this.X3(this.GM, this.uu);
    this.ho.q([this.mM]);
    this.ho.H5();
    this.aJZ = !0;
    this.rg.q([!0, !1, !1]);
    setTimeout(this.mi, 20);
  };
  bf.prototype.FE = function (j) {
    var q = !0,
      m = Date.now(),
      n = this.mM,
      G = this.aD,
      W = G.cnum.V(),
      k = G.nois.V(),
      T = G.mode.V(),
      b = G.segm.V(),
      c = G.cbok.V(),
      a = G.poly.V(),
      f = G.merg.V(),
      U = G.polE.V(),
      V = null;
    if (T == 0) b = a = c = !1;
    var Z = G.dthr.V(),
      h = ["cnum", "mode", "ctab", "nois"];
    if (T == 1) {
      h.push("cbok");
      if (this.Rd) {
        h.push("poly");
        if (a) h.push("polE");
        h.push("vprm");
      }
    }
    if (this.Rd) h.push("merg");
    else h.push("dthr");
    h.push("ok");
    J.dI(this.IN);
    for (var y = 0; y < h.length; y++) this.IN.appendChild(G[h[y]]._);
    if (q) console.log("---------------------------------------");
    var u = k || b,
      i = k + "," + b;
    if (u && (this.wf == null || this.l2 != i)) {
      this.l2 = i;
      var x = new Uint8Array(n.data),
        X = n.Iu.r,
        $ = n.Iu.$;
      if (k) {
        if (this._b == null) {
          this._b = x.slice(0);
          B.Zv.u4 = 35;
          B.Zv.Zf(this._b, this._b, X, $, 15, 1);
          if (q) {
            console.log("denoise", Date.now() - m);
            m = Date.now();
          }
        }
        x = this._b.slice(0);
      } else x = x.slice(0);
      if (b) {
        var H = B.DV.UY(x, X, $, 40, 10),
          C = H.aj,
          l = new Uint8Array(C * 4);
        for (var y = 0; y < C; y++) {
          var v = y * 4,
            K = y * 6,
            S = 1 / H.l5[K + 5];
          l[v] = H.l5[K] * S;
          l[v + 1] = H.l5[K + 1] * S;
          l[v + 2] = H.l5[K + 2] * S;
        }
        for (var y = 0; y < x.length; y += 4) {
          var o = H.Lv[y >>> 2] * 4;
          x[y] = l[o];
          x[y + 1] = l[o + 1];
          x[y + 2] = l[o + 2];
        }
        if (q) {
          console.log("segm", Date.now() - m);
          m = Date.now();
        }
      }
      this.wf = { Iu: n.Iu.P(), data: x.buffer };
    }
    if (u) n = this.wf;
    var x = new Uint8Array(n.data),
      X = n.Iu.r,
      $ = n.Iu.$;
    for (var y = 0; y < x.length; y += 4) {
      if (x[y + 3] < 10) x[y] = x[y + 1] = x[y + 2] = x[y + 3] = 0;
    }
    if (j == null || j.target == this.aD.cnum || j.target == this.aD.mode) {
      if (T == 0) {
        V = B.DV.apM(x, X, $, W, u ? 0.1 : 2e-4);
        V.JR = i9.ag2(V.JR);
        if (q) {
          console.log("quantize", Date.now() - m);
          m = Date.now();
        }
      }
      if (T != 0 || (V && V.JR.length < 2)) {
        V = i9.aBU(x.buffer, W, X, $);
      }
      this.aD.ctab.q(V.JR);
    } else {
      var l = this.aD.ctab.V(),
        o = B.j(X * $);
      UPNG.encode.dither(x, X, $, i9.st(l), x.slice(0), o, 0);
      V = { Lv: o, JR: l };
      this.aD.cnum.q(l.length);
    }
    if (c) {
      var l = new Uint32Array(i9.st(V.JR));
      V.Lv = B.ajS(x, X, $, new Uint8Array(l.buffer));
    }
    if (this.Rd) {
      var P = V.Lv.slice(0);
      for (var y = 0; y < P.length; y++) P[y]++;
      this.RM = B.DV.adu(V.Lv, X, $);
      var z = new Uint8Array((X + 2) * ($ + 2));
      B.sN(P, new hk(1, 1, X, $), z, new hk(0, 0, X + 2, $ + 2));
      var E = Math.max(X, $) <= 32;
      if (!a && !E) {
        var A = Math.round(((X + 2) * ($ + 2)) / 1e4),
          N = lv.$H(z.slice(0), X + 2, $ + 2, Math.min(12, A)),
          Q = lv.ac(N);
        if (q) {
          console.log("trace smooth", Date.now() - m);
          m = Date.now();
        }
      } else {
        var Q = B.b.$r(z, X + 2, $ + 2, E ? 1 : U, q);
      }
      var e = Q.length,
        Y = new k$(1, 0, 0, 1, -1, -1);
      for (var y = 0; y < e; y++) B.b.u(Q[y].path.L, Y, Q[y].path.L);
      this.eF = Q;
      for (var y = 0; y < e; y++) {
        var d = Q[y];
        if (V.JR[d.color - 1][1].Sd > 10) continue;
        var I = d.parent;
        while (I != -1) {
          var O = Q[I];
          I = O.parent;
          if (V.JR[O.color - 1][1].Sd < 10) break;
          B.b.concat(O.path, B.b.reverse(d.path));
        }
      }
      if (q) {
        console.log("finding holes", Date.now() - m);
        m = Date.now();
      }
      for (var y = 0; y < Q.length; y++) {
        var s = Q[y];
        if (s.parent != -1) {
          var p = Q[s.parent];
          s.parent = p;
          if (p.lS == null) p.lS = [];
          p.lS.push(s);
        }
        s.depth = s.parent == -1 ? 0 : s.parent.depth + 1;
      }
      if (f) {
        function F(kS, r) {
          var cY = {},
            cS = 0,
            k3 = 0;
          for (var y = 0; y < kS.length; y++) {
            var t = kS[y].color,
              di = "c" + t;
            if (t == r) throw t;
            if (cY[di] == null) cY[di] = 0;
            cY[di]++;
            if (cY[di] > cS) {
              cS = cY[di];
              k3 = t;
            }
          }
          return k3;
        }
        var g = [],
          w = [],
          r = -1,
          eQ = !0;
        for (var y = 0; y < Q.length; y++) if (Q[y].parent == -1) w.push(Q[y]);
        while (w.length != 0) {
          var t = F(w, r);
          r = t;
          for (var y = 0; y < w.length; y++)
            if (w[y].color == t) {
              var dq = w[y];
              g.push(dq);
              w.splice(y, 1);
              y--;
              if (dq.lS)
                for (var D = 0; D < dq.lS.length; D++) {
                  w.push(dq.lS[D]);
                  if (dq.lS[D].color != t) eQ = !1;
                }
            }
        }
        if (eQ) Q = g;
        else {
          var ha = [];
          for (var am = 0; am < 500; am++) {
            var k4 = [],
              N = ha[am - 1];
            ha.push(k4);
            for (var y = 0; y < Q.length; y++) {
              var s = Q[y],
                p = s.parent;
              if ((am == 0 && p == -1) || (am != 0 && N.indexOf(p) != -1)) {
                k4.push(s);
                Q.splice(y, 1);
                y--;
              }
            }
            k4.sort(function (kS, cY) {
              return kS.color - cY.color;
            });
            if (Q.length == 0) break;
          }
          for (var y = 0; y < ha.length; y++) Q = Q.concat(ha[y]);
        }
      } else {
        var g = [],
          aA = [];
        while (Q.length != 0) {
          aA.push(Q.shift());
          while (aA.length != 0) {
            var ex = aA.pop();
            g.push(ex);
            if (ex.lS)
              for (var y = 0; y < ex.lS.length; y++) {
                var s = ex.lS[y];
                Q.splice(Q.indexOf(s), 1);
                aA.push(s);
              }
          }
        }
        Q = g;
      }
      this.eF = Q;
      for (var y = 0; y < Q.length; y++) {
        var d = Q[y],
          ac = V.JR[d.color - 1][1];
        if (ac.Sd <= 10) {
          Q.splice(y, 1);
          y--;
          continue;
        }
      }
      for (var y = 1; y < Q.length; y++) {
        var eJ = Q[y - 1],
          d = Q[y];
        if (
          eJ.color == d.color &&
          (f || (eJ.parent == d.parent && eJ.depth >= 2))
        ) {
          B.b.concat(eJ.path, d.path);
          Q.splice(y, 1);
          y--;
          continue;
        }
      }
      if (q) {
        console.log("reordering layers", Date.now() - m, e, Q.length);
        m = Date.now();
      }
      this.agx = V;
      this.Ep();
    } else {
      var h$ = new Uint32Array(X * $),
        da = X * $,
        bb = (this.aHg = new Uint8Array(h$.buffer)),
        gb = new Uint32Array(i9.st(V.JR));
      if (Z) {
        var fM = new Uint8Array(n.data).slice(0);
        B.PC(fM);
        B.PC(new Uint8Array(gb.buffer));
        UPNG.encode.dither(fM, X, $, gb, bb, B.j(X * $));
        B.aAo(bb);
      } else {
        for (var y = 0; y < da; y++) h$[y] = gb[V.Lv[y]];
      }
      this.vC.q([{ Iu: n.Iu, data: h$.buffer }]);
      if (this.aJZ) {
        this.vC.H5();
        this.aJZ = !1;
      }
    }
  };
  bf.prototype.Ep = function (j) {
    if (this.eF == null) return;
    var q = this.rg.V(),
      m = this.mM.Iu.r,
      n = this.mM.Iu.$,
      G = this.eF,
      W = this.Bl,
      k = this.lB,
      T = this.ho.lx(),
      c = "rgba(0,0,0,0.3)";
    k.setTransform(1, 0, 0, 1, 0, 0);
    k.clearRect(0, 0, W.width, W.height);
    k.translate(W.width / 2, W.height / 2);
    k.scale(T.k3, T.k3);
    k.translate(T.g.x / T.k3 - m / 2, T.g.y / T.k3 - n / 2);
    k.scale(1 / T.k3, 1 / T.k3);
    k.fillStyle = this.pV;
    k.fillRect(0, 0, m * T.k3, n * T.k3);
    k.scale(T.k3, T.k3);
    k.lineWidth = (m + n) * 5e-4;
    var b = this.UH();
    k.strokeStyle = c;
    for (var a = 0; a < 2; a++) {
      if (!q[a]) continue;
      for (var y = 0; y < G.length; y++) {
        var f = G[y],
          U = b[f.color - 1];
        if (U.Sd == 0) continue;
        k.fillStyle = U.y9;
        k.beginPath();
        Typr.U.pathToContext({ crds: f.path.L, cmds: f.path.RC }, k);
        if (a == 0) k.fill();
        else k.stroke();
      }
    }
    if (q[2]) this.aJD(k, m, n);
  };
  bf.prototype.UH = function () {
    var j = this.agx.JR,
      q = [];
    for (var y = 0; y < j.length; y++) {
      var m = j[y][1];
      m.y9 = "rgba(" + m.o + "," + m.i + "," + m.X + "," + m.Sd / 255 + ")";
      q.push(m);
    }
    return q;
  };
  bf.prototype.aJD = function (j, q, m) {
    var n = this.UH(),
      G = this.aLB(q, m, n);
    function W(c, a, f, U) {
      j.font = U + "px sans-serif";
      c++;
      var Z = j.measureText(c);
      j.fillText(c, a - Z.width / 2, f + U * 0.25);
    }
    j.fillStyle = "rgba(0,0,0,0.5)";
    var k = this.RM;
    for (var y = 0; y < k.length; y++) {
      var T = k[y];
      if (T[3] < q * m * 5e-4) continue;
      W(T[2], T[0], T[1], (q + m) * 0.008);
    }
    j.fillStyle = "rgba(255,255,255,1)";
    j.fillRect(0, 0, G, G * n.length);
    for (var y = 0; y < n.length; y++) {
      var b = n[y];
      j.fillStyle = b.y9;
      j.fillRect(G, G * y, G, G);
      j.fillStyle = "black";
      W(y, G * 0.5, G * (y + 0.5), G * 0.65);
    }
  };
  bf.prototype.aLB = function (j, q, m) {
    var n = (m.length * (j + q)) / 70;
    return Math.min(q, n) / m.length;
  };
  bf.prototype.GP = function (j) {
    var q = this.fg,
      m = q.J[0],
      n = q.U[m],
      G = new fd(_.E.w, !0);
    G.XE = !0;
    G.l = L.W1;
    var W = this.a.HS,
      k = this;
    if (this.Rd) {
      var T = this.UH(),
        a = 0,
        U = !1;
      function b(X, C) {
        var l = q.dj();
        l.yA = C.Sd;
        l.uZ |= 16;
        l.add.vmsk = new R.tm();
        l.add.vmsk.D = X;
        l.Pp();
        l.add.vstk = eu.rS.i4(!0);
        if (ei == 0) {
          l.add.SoCo = { classID: "null", Clr: { t: "Objc", v: B.MV.Ia(C) } };
          l.D5(q);
        } else {
          l.add.vstl = eu.TB.i4();
          l.add.vstl.dZ = [C.o / 255, C.i / 255, C.X / 255];
          l.add.vstl.Nu = [];
        }
        return l;
      }
      var c = this.rg.V();
      for (var y = 0; y < 3; y++) if (c[y]) a++;
      if (a == 0) {
        alert("Enable Fill, Stroke or Labels");
        return;
      }
      var f = this.eF;
      if (a == 1 && c[0] && f.length == 1) U = !0;
      var Z = q.U.slice(0, m);
      if (!U) Z.push(q.to());
      var h = new k$(1, 0, 0, 1, n.H.x, n.H.y);
      if (ei == 1) {
        var u = n.add.SoLd,
          i = u.Idnt.v,
          x = q.Kv(i, u.Crop ? u.Crop.v : null),
          X = L.Dq.Kt(u.nonAffineTransform),
          $ = B.B.Ht(X, x.Zj[1]);
        h = B.B.Kn($);
      }
      for (var y = 0; y < f.length; y++) B.b.u(f[y].path.L, h, f[y].path.L);
      if (c[0])
        for (var y = 0; y < f.length; y++) {
          var H = f[y],
            C = T[H.color - 1],
            l = b(B.b.LZ(H.path, !1), C);
          l.tV("Path " + y);
          Z.push(l);
        }
      if (c[1]) {
        var l = q.dj();
        l.tV("Stroke");
        Z.push(l);
        l.yA = 128;
        l.uZ |= 16;
        l.add.vmsk = new R.tm();
        l.add.vstk = eu.rS.i4(!1, !0);
        var X = [];
        for (var y = 0; y < f.length; y++) {
          var H = f[y],
            v = B.b.LZ(H.path, !1);
          if (y == 0) X = v;
          else X = X.concat(v.slice(2));
        }
        l.add.vmsk.D = X;
        l.Pp();
        if (ei == 0) {
          l.add.SoCo = {
            classID: "null",
            Clr: { t: "Objc", v: B.MV.Ia({ o: 0, i: 0, X: 0 }) },
          };
          l.D5(q);
        } else {
          l.add.vstl = eu.TB.i4();
          l.add.vstl.dZ = [];
        }
      }
      if (c[2]) {
        var K = this.mM.Iu,
          S = K.r,
          o = K.$,
          V = this.aLB(S, o, T);
        Z.push(q.to());
        function P(e, Y, d, I, O) {
          if (O) {
            var s = h.uL(new ea(Y, d));
            Y = s.x;
            d = s.y;
          }
          e = 1 + e + "";
          var l = q.dj();
          Z.push(l);
          l.yA = I;
          l.add.lnsr = "rend";
          var p = (l.add.TySh = al.wD(Y - V * 0.2, d + V * 0.25)),
            F = l.add.TySh.s3,
            w = al.vJ(F, 0, 0);
          w.K2.FontSize = Math.round(V * 0.6);
          al.jD(F, 0, 0, w);
          al.Fk(F, 0, e);
          l.Yc();
          if (bq.wM(p, W, k)) {
            bq.qS(l, W, q);
            q.gF();
          }
        }
        var z = this.RM;
        for (var y = 0; y < z.length; y++) {
          var E = z[y];
          if (E[3] < S * o * 5e-4) continue;
          P(E[2], E[0], E[1], 128, h);
        }
        var l = b(B.z.cn.Rect(0, 0, V, V * T.length), {
          o: 255,
          i: 255,
          X: 255,
          Sd: 255,
        });
        l.tV("white");
        Z.push(l);
        for (var y = 0; y < T.length; y++) {
          var C = T[y],
            l = b(B.z.cn.Rect(V, V * y, V, V), C);
          l.tV("color");
          Z.push(l);
          P(y, V / 2, V * (y + 0.5), 255);
        }
        var l = q.dj();
        l.tV("Labels");
        l.add.lsct = hQ.z$;
        l.hz = "pass";
        l.uZ = 24;
        Z.push(l);
      }
      var A = Z[Z.length - 1];
      if (!U) {
        var l = q.dj();
        l.tV(n.getName());
        l.add.lsct = hQ.WR;
        l.hz = "pass";
        l.uZ = 24;
        Z.push(l);
        A = l;
      }
      var N = n.add.lmfx;
      if (N) A.add.lmfx = B.S(N);
      var Q = Z.length;
      for (var y = m + 1; y < q.U.length; y++) Z.push(q.U[y]);
      G.data = { R: R.DH, nR: Z, c_: [Q - 1], ER: [11, 11, 0] };
    } else {
      var Z = q.U.slice(0),
        l = q.dj();
      l.tV(n.getName());
      Z.splice(q.J[0] + 1, 0, l);
      l.H = n.H.P();
      l.buffer = this.aHg;
      l.gF();
      G.data = { R: R.DH, nR: Z, c_: [q.J[0] + 1], ER: [11, 11, 1] };
    }
    this.k(G);
    this.close();
    q.c4 = !0;
  };
  bf.prototype.yp = function (j, q) {
    this.a = j;
    this.aD.ctab.yp(j, q);
  };
  function aG(j) {
    g7.call(
      this,
      [
        [7, 11],
        [7, 13],
      ][j],
      ["redge", "magiccut"][j]
    );
    this.Dm = j;
    this.mM = {};
    this.ok = null;
    this.a = null;
    this.fg = null;
    this.JX = null;
    this.JD = null;
    this.body.style.padding = "0";
    this.Ua = [];
    this.vA = -1;
    this.IN = J.m("div", "form hbar padded");
    this.body.appendChild(this.IN);
    this.HI = new bo();
    this.HI.parent = this;
    this.HI.Q(_.E.n, this.Vn, this);
    this.IN.appendChild(this.HI._);
    var q =
      j == 0
        ? ["#ffffff", "#888888", "#000000"]
        : ["#00dd00", "#888888", "#ff0000"];
    q = q.concat("tools/hand", "zoomIn", "zoomOut");
    var m =
      j == 0 ? [[12, 45], "Unknown", [12, 46]] : [[12, 45], "Erase", [12, 46]];
    this.e6 = new af(null, q, m, 28);
    this.e6.Q(_.E.n, this.uY, this);
    this.IN.appendChild(this.e6._);
    this.hh = new k7([7, 9], 0, 50, null);
    this.hh.parent = this;
    this.hh.Q(_.E.n, [this.aex, this.FE][j], this);
    this.IN.appendChild(this.hh._);
    var n = (this.a60 = new kv([2, 2], !1, null, !0));
    n.Q("click", this.zE, this);
    this.IN.appendChild(n._);
    var G = (this.U2 = J.m("span", "form"));
    this.IN.appendChild(G);
    var W = (this.a5N = new kv([12, 90], !1, null, !0));
    W.Q(
      "click",
      function (b) {
        alert(
          j == 0
            ? g$.get([15, 7, 1])
            : "Mark the object with Green, background with Red. The majority of the area should stay unpainted. Two colors should never touch.",
          5e3
        );
      },
      this
    );
    G.appendChild(W._);
    var k = new kv("Tutorial", !1, null, !0);
    k.Q("click", this.a0v, this);
    G.appendChild(k._);
    this.ix = new af([12, 46], ["checker", "#ffffff", "#000000"]);
    this.ix.Q(_.E.n, this.aFt, this);
    G.appendChild(this.ix._);
    this.agO = new f1(null, [
      [6, 13],
      [6, 2],
      [17, 2],
    ]);
    G.appendChild(this.agO._);
    this.v0 = J.y_(this, G, !1);
    var T = (this.Td = J.m("div", "flexrow"));
    this.body.appendChild(T);
    this.au = new j7(!0);
    this.jp = new j7();
    this.au.Ig(this.jp);
    this.jp.Ig(this.au);
    this.au.Q("mousedown", this.Q7, this);
    this.au.Q("mousemove", this.dU, this);
    this.au.Q("mouseup", this.IB, this);
    this.au.Q("zoom", this.Vn, this);
    this.jp.Q("zoom", this.Vn, this);
    T.appendChild(this.au._);
    T.appendChild(this.jp._);
  }
  aG.prototype = new g7();
  aG.prototype._j = function (j, q) {
    var m = j != null && !j.U[j.J[0]].H.jG();
    if (!m) alert("The layer is empty.");
    return m;
  };
  aG.prototype.lu = function () {
    return new ea(0, 0);
  };
  aG.prototype.bx = function () {
    return !0;
  };
  aG.prototype.X3 = function (j, q) {
    this.GM = j;
    this.uu = q;
    q = q - 12 - 33;
    if (j < 900) {
      J.F(this.U2, "display:block;  text-align:right;");
      q -= 29;
    } else {
      J.F(this.U2, "position:absolute;  right:0px");
    }
    this.ix.hk(j < 440 ? null : [12, 46]);
    this.hh.hk(j < 470 ? null : [7, 9]);
    var m = this.mM.H;
    if (m) {
      var n = aG.k7(j, q, m.r, m.$);
      if (n == 0) {
        j = Math.floor(j / 2);
        J._g(this.Td, "flexrow");
      } else {
        q = Math.floor(q / 2);
        J.XZ(this.Td, "flexrow");
      }
      this.au.X3(j, q);
      this.jp.X3(j, q);
    }
  };
  aG.k7 = function (j, q, m, n) {
    var G = j / 2,
      W = q / 2,
      k = Math.min(G / m, q / n),
      T = Math.min(j / m, W / n);
    return k > T ? 0 : 1;
  };
  aG.prototype.T = function () {
    g7.prototype.T.call(this);
    this.HI.T();
    this.hh.T();
    this.v0.T();
    this.ix.T();
    this.agO.T();
    this.a60.T();
    this.a5N.T();
  };
  aG.prototype.a0v = function (j) {
    window.open(
      "//www.photopea.com/" +
        ["learn/refine-edge", "tuts/magic-cut-remove-image-background-online"][
          this.Dm
        ],
      "_blank"
    );
  };
  aG.prototype.yp = function (j, q) {
    this.a = j;
    if (q == fG.cS || q == fG.HN) {
      this.HI.j3(j.AU);
      this.HI.q(fc.vM(), j.AU.cd, j.AU.cs);
    }
  };
  aG.prototype.uY = function (j, q, m, n) {
    var G = this.e6.V();
    if (n == null) {
      this.au.uY(j7.Ld(G - 3));
      return;
    }
    this.JX = n;
    var W = L.tt.s6(this.HI.V(), n);
    if (W != null) {
      this.HI.q(W);
      this.Vn();
    } else if (n.M(gn.A8) && n.M(gn.AQ)) {
      var k = this.Ua,
        T = 0;
      if (n.M(gn.X6)) {
        if (this.vA + 1 < k.length) T = 1;
      } else if (this.vA > 0) T = -1;
      if (T != 0) {
        this.vA += T;
        var b = this.vA,
          c = this.mM;
        if (T == 1) B.M4(k[b][2], k[b][0], c.AA, c.H);
        else B.M4(k[b + 1][1], k[b + 1][0], c.AA, c.H);
        c.aR = c.H;
        this.FE();
      }
    } else if (G < 3) this.au.uY(n);
  };
  aG.prototype.Gc = function (j) {
    var q = this.mM,
      m = this.Ua,
      n = B.j(j.C() * 4);
    B.M4(q.gN, q.H, n, j);
    q.gN = null;
    var G = B.j(j.C() * 4);
    B.M4(q.AA, q.H, G, j);
    this.vA++;
    m[this.vA] = [j.P(), n, G];
    while (m.length > this.vA + 1) m.pop();
    while (m.length > 50) {
      m = m.slice(1);
      this.vA--;
    }
  };
  aG.prototype.Vn = function () {
    var j = this.a,
      q = e4.EN(this.HI.V(), j.AU.cd, this.au.lx().k3);
    this.au.eP(q);
  };
  aG.prototype.Q7 = function (j) {
    var q = this.a,
      m = this.mM,
      n = this.JX,
      G = this.HI.V(),
      W = this.au.VS(),
      k = [16777215, 8421504, 0][this.e6.V()];
    this.ok = new e4(G, q.AU.cd, q.AU.cs, { rv: 1, mv: !0 }, k, q.vH, m.H);
    m.gN = m.AA.slice(0);
    if (n != null && n.M(gn.X6) && this.JD) {
      this.ok.moveTo(this.JD.x, this.JD.y);
      this.ok.lineTo(W.x, W.y);
    } else this.ok.moveTo(W.x, W.y);
    this.ao3();
  };
  aG.prototype.dU = function (j) {
    var q = this.mM,
      m = this.au.VS();
    this.ok.lineTo(m.x, m.y);
    this.ao3();
  };
  aG.prototype.IB = function (j) {
    this.JD = this.au.VS();
    this.Gc(this.ok.XQ());
    this.FE();
  };
  aG.prototype.ao3 = function () {
    var j = this.mM,
      q = this.ok,
      m = q.WF();
    if (m.jG()) return;
    j.aR = m;
    B.G.Jg("norm", q.qX(), q.Fj(), j.AA, j.H, m, 1);
    this.aww();
  };
  aG.prototype.zE = function (j) {
    var q = this.mM;
    q.gN = q.AA.slice(0);
    q.aR = q.H;
    B.bs(q.AA, [4278190080, 4292730333][this.Dm]);
    this.Gc(q.H);
    this.FE();
  };
  aG.prototype.Wz = function (j, q) {
    this.fg = j;
    var m = j.U[j.J[0]],
      n = m.H.P(),
      G = n.r,
      W = n.$,
      b;
    this.hh.q(this.Dm == 0 ? 3 : G * W < 3e6 ? 3 : 0);
    this.e6.q(j.h == null ? 0 : 1);
    this.hh.Ub();
    if ((this.Dm == 0 && j.h != null) || this.Dm == 1) this.hh.hC();
    var k = this.Dm,
      T = B.j(n.C());
    if (k == 0 && j.h) {
      B.sN(j.h.N, j.h.H, T, n);
      var c = B.j(n.C());
      for (var a = 0; a < W; a++)
        for (var f = 0; f < G; f++) {
          var y = a * G + f,
            U = T[y];
          if (
            (f > 0 && T[y - 1] != U) ||
            (f < G - 1 && T[y + 1] != U) ||
            (a > 0 && T[y - G] != U) ||
            (a < W - 1 && T[y + G] != U)
          )
            c[y] = 255;
        }
      b = B.style.Af(c, G, W);
    } else {
      b = new Float32Array(n.C());
      b.fill(1e9);
    }
    n.x = n.y = 0;
    this.mM = {
      H: n,
      sE: B.sL(m.buffer, 8),
      hF: T,
      QV: b,
      arn: B.j(n.C() * 4),
      asu: B.j(n.C() * 4),
      AA: B.j(n.C() * 4),
      gN: null,
      A5: null,
      aR: n,
      ax0: {},
    };
    if (k == 0) this.aex();
    else {
      this.mM.ax0 = L.C8.aC0(j);
      var Z = this.mM.AA;
      B.bs(Z, 4287137928);
      var h = B.Is.getSelection(B.sL(m.buffer, 8), G, W),
        u = Math.round(G / 60),
        i = Math.round(0.7 * W);
      for (var a = 0; a < W; a++)
        for (var f = 0; f < G; f++) {
          var x = (a * G + f) * 4,
            X = h[x >>> 2];
          X = X > 128 ? 255 : 128;
          if (a < u || (a < i && (f < u || f > G - 1 - u))) X = 0;
          Z[x] = Z[x + 1] = Z[x + 2] = X;
        }
      this.FE();
    }
    this.Ua = [1];
    this.vA = 0;
    var $ = this.HI.V();
    $.Brsh.v.Dmtr.v.val = Math.round(n.r / (k == 0 ? 10 : 20));
    this.HI.q($);
    this.Vn();
    this.X3(this.GM, this.uu);
    this.au.H5();
  };
  aG.prototype.aex = function () {
    var j = this.mM,
      q = j.H.C(),
      m = this.hh.V(),
      n = j.hF.slice(0);
    for (var y = 0; y < q; y++) if (j.QV[y] < m) n[y] = 128;
    j.AA.fill(255);
    B.ln(n, j.AA, 0);
    B.ln(n, j.AA, 1);
    B.ln(n, j.AA, 2);
    j.aR = j.H;
    this.FE();
  };
  aG.prototype.FE = function () {
    var j = this.mM,
      G,
      T,
      b = 0,
      c = 0,
      a = 0;
    this.aww();
    var q = j.H,
      m = q.r,
      n = q.$,
      W = B.j(q.C()),
      k = j.sE;
    B.Ih(j.AA, W, 0);
    for (var y = 0; y < W.length; y++) {
      if (k[(y << 2) + 3] != 255) continue;
      var f = W[y];
      if (f == 0) b++;
      else if (f == 255) c++;
      else a++;
    }
    if (b * c * a != 0) {
      if (this.Dm == 0) T = B.bM.bM(q, k, W);
      else {
        var U = this.e6.V();
        for (var Z = 1; Z < n; Z++)
          for (var h = 1; h < m; h++) {
            var y = Z * m + h,
              u = W[y],
              i = W[y - 1];
            if ((u == 0 && i == 255) || (u == 255 && i == 0)) {
              G = "The Red and Green should never touch! Erase it with Grey.";
              break;
            }
          }
        var x = Date.now(),
          X = this.mM.ax0;
        B.wV(W, X.QY);
        L.C8.Gs(X, !0, this.fg);
        var $ = Math.ceil(this.hh.V() / 2);
        if ($ == 0) {
          T = k.slice(0);
          B.ln(X.h, T, 3);
        } else {
          var H = X.h.slice(0),
            C = X.h.slice(0);
          for (var l = 0; l < $; l++) {
            for (var Z = 1; Z < n - 1; Z++)
              for (var h = 1; h < m - 1; h++) {
                var y = Z * q.r + h,
                  v = H[y];
                if (
                  H[y - m] != v ||
                  H[y - 1] != v ||
                  H[y + 1] != v ||
                  H[y + m] != v
                )
                  C[y] = 128;
                else C[y] = v;
              }
            var K = H;
            H = C;
            C = K;
          }
          for (var Z = 0; Z < n; Z++)
            for (var h = 0; h < m; h++) {
              var y = Z * m + h;
              if (W[y] == 0 || W[y] == 255) H[y] = W[y];
            }
          T = B.bM.bM(q, k, H, 20, !1);
        }
      }
    } else {
      T = k.slice(0);
      B.ln(W, T, 3);
    }
    for (var y = 3; y < T.length; y += 4) if (T[y] > k[y]) T[y] = k[y];
    if (q.Lg(j.H)) j.A5 = T;
    else B.M4(T, q, j.A5, j.H);
    this.aFt();
    if (G) alert(G, 4e3);
  };
  aG.prototype.aww = function (j) {
    var q = this.mM,
      m = q.aR;
    B.M4(q.sE, q.H, q.arn, q.H, m, !0);
    var n = q.AA,
      G = q.H,
      W = Date.now();
    if (this.Dm == 1) {
      var k = new Uint32Array(256);
      k[0] = 4278190335;
      k[255] = 4278255360;
      var T = B.j(m.C() * 4),
        b = m.C();
      B.M4(n, G, T, m);
      n = T;
      G = m;
      var c = new Uint32Array(n.buffer);
      for (var y = 0; y < b; y++) c[y] = k[c[y] & 255];
    }
    console.log(Date.now() - W);
    B.G.Jg("norm", n, G, q.arn, q.H, m, 0.3);
    this.au.q([{ Iu: q.H, data: q.arn.buffer }], null, null, m);
  };
  aG.prototype.aFt = function (j) {
    var q = this.mM;
    B.bs(q.asu, [0, 4294967295, 4278190080][this.ix.V()]);
    B.G.Jg("norm", q.A5, q.H, q.asu, q.H, q.H, 1);
    this.jp.q([{ Iu: q.H, data: q.asu.buffer }]);
  };
  aG.prototype.GP = function (j) {
    var q = this.fg,
      m = this.mM,
      n = this.agO.V(),
      G = q.U[q.J[0]],
      W = new fd(_.E.w, !0);
    W.XE = !0;
    var k = G.H.P();
    if ((n == 0 && G.Iw()) || (n != 0 && !G.Iw())) {
      W.l = L.W1;
      W.data = { R: R.Ov, v: q.J[0] };
      this.k(W);
    }
    if (q.h != null) {
      W.l = L.ag;
      W.data = { R: "fromAction", tp: L.pI.TP() };
      this.k(W);
    }
    if (n == 0) {
      var T = q.U.slice(0),
        b = q.dj();
      b.tV(G.getName());
      T.splice(q.J[0] + 1, 0, b);
      b.H = k;
      b.buffer = B.sL(m.A5, q.depth);
      b.gF();
      W.l = L.W1;
      W.data = { R: R.DH, nR: T, c_: [q.J[0] + 1], ER: [7, 11] };
      this.k(W);
    }
    if (n == 1) {
      var c = G.ex();
      W.l = L.W1;
      W.data = { R: R.c5, aAn: !0 };
      this.k(W);
      var a = G.ex();
      a.N = B.j(k.C());
      a.H = k;
      a.color = 0;
      a.xo = !0;
      B.Ih(m.A5, a.N, 3);
      a.N = B.sL(a.N, q.depth);
      if (c) {
        var f = a.J5(c);
        a.H = f.H;
        a.N = f.N;
        a.color = f.color;
      }
      a.yy();
      G.D5(q);
    }
    if (n == 2) {
      var U = { H: k, N: B.j(k.C()) };
      B.Ih(m.A5, U.N, 3);
      U.N = B.sL(U.N, q.depth);
      W.l = L.ag;
      W.data = { R: "setsel", h: U, ER: this.KM };
      this.k(W);
    }
    this.close();
  };
  function cB() {
    g7.call(this, [1, 13], "locstor");
    this.a = null;
    this.jj = [];
    var j = this.body,
      q = J.m("p");
    q.textContent = "These files are loaded every time you start Photopea.";
    j.appendChild(q);
    this.a4I = 0;
    this.a8N = J.m("span");
    j.appendChild(this.a8N);
    J.F(this.a8N, "display:inline-block;  width:12em;  font-weight:bold;");
    var m = J.m("span", "form");
    j.appendChild(m);
    this.V9 = new kv([5, 4], !1, null, !0);
    this.V9.Q("click", this.DZ, this);
    m.appendChild(this.V9._);
    this.uw = new kv("Get all as ZIP", !1, null, !0);
    this.uw.Q("click", this.AM, this);
    m.appendChild(this.uw._);
    this.Zw = new ap(!0);
    this.Zw.parent = this;
    this.Zw.MI(1);
    j.appendChild(this.Zw._);
    J.F(this.Zw._, "width: 40em; height: 25em");
  }
  cB.prototype = new g7();
  cB.prototype.T = function () {
    g7.prototype.T.call(this);
    this.a8N.textContent = g$.get([13, 2]) + ": " + bE.za(this.a4I);
    this.V9.T();
  };
  cB.prototype.yp = function (j, q) {
    this.a = j;
    if (q == fG.SW) this.Wz();
  };
  cB.prototype.Wz = function (j, q) {
    var m = this.a.Fd.CK,
      b = 0;
    this.jj = [];
    for (var n in m) this.jj.push(n);
    this.jj.sort(function (a, f) {
      a = a.split(".");
      f = f.split(".");
      return a[1] == f[1] ? (a[0] < f[0] ? -1 : 1) : a[1] < f[1] ? -1 : 1;
    });
    var G = Math.floor(100 * J.IC()),
      W = Math.floor(16 * J.IC()),
      k = [],
      T = [];
    for (var y = 0; y < this.jj.length; y++) {
      var n = this.jj[y],
        c = cB.hj(n, m[n], G, W);
      k.push(c);
      T.push(n);
      b += m[n].byteLength;
    }
    this.Zw.GW(k, T, G, W);
    this.a4I = b;
    this.T();
  };
  cB.prototype.DZ = function (j) {
    var q = this.Zw.V();
    if (q.length == 0) {
      alert("Select a file first.");
      return;
    }
    this.Zw.q([]);
    var m = this.a.Fd.CK;
    for (var y = 0; y < q.length; y++) delete m[this.jj[q[y]]];
    var n = new fd(_.E.c, !0);
    n.data = { R: _.Y.fh, rw: fG.SW };
    this.k(n);
  };
  cB.prototype.AM = function (j) {
    var q = this.a.Fd.CK,
      m = {};
    for (var n in q) m[n] = new Uint8Array(q[n]);
    var G = UZIP.encode(m);
    jc.save(G, "resources.zip");
  };
  cB.hj = function (j, q, m, n) {
    var G = J.m("canvas"),
      T = 0;
    G.width = m;
    G.height = n;
    var W = G.getContext("2d"),
      k = j.split(".").pop().toLowerCase();
    for (var y = 0; y < k.length; y++) T += (k.charCodeAt(y) * 613) << (8 * y);
    W.fillStyle = "#" + B.bw(T & 16777215);
    W.fillRect(0, 0, 20, n);
    var b = Math.floor(14 * J.IC());
    W.fillStyle = "#000000";
    W.font = "bold " + b + "px sans-serif";
    var c = (n - b) / 2,
      a = bE.za(q.byteLength),
      f = W.measureText(a);
    W.fillText(a, m - 12 - f.width, n - c);
    return G.toDataURL();
  };
  function l1() {
    g7.call(this, [1, 15], "pmanager");
    this.a = null;
    this.QK = new f1(
      [12, 44],
      [
        [9, 3],
        [12, 37],
        [12, 62],
        [11, 6],
        [12, 77],
        [12, 21],
      ]
    );
    this.QK.Q(_.E.n, this.Wz, this);
    this.body.appendChild(this.QK._);
    var j = J.m("div", "flexrow");
    this.body.appendChild(j);
    var q = (this.aCa = J.m("div"));
    j.appendChild(q);
    var m = J.m("div", "form");
    j.appendChild(m);
    J.F(m, "width:140px; margin-left:12px");
    this.azF = [fG.cS, fG.WX, fG.OF, fG.S0, fG.lG, fG.im];
    this.JA = [new bo(), new iB(), new bW(), new dm(), new bU(), new gR()];
    for (var y = 0; y < this.JA.length; y++) this.JA[y].parent = this;
    this.Tk = [];
    for (var y = 0; y < 4; y++) {
      var n = new kv("Hello", !0, null, !0);
      n.Q("click", this.lU, this);
      this.Tk.push(n);
      m.appendChild(n._);
    }
    this.Wz();
  }
  l1.prototype = new g7();
  l1.prototype.oa = function (j) {
    return j == gn.gv || j == gn.N7;
  };
  l1.prototype.lU = function (j) {
    var y = this.Tk.indexOf(j.target);
    this.JA[this.QK.V()].BT(y);
  };
  l1.prototype.T = function () {
    g7.prototype.T.call(this);
    this.QK.T();
    for (var y = 0; y < this.JA.length; y++) this.JA[y].T();
    var j = this.Tk,
      q = this.QK.V(),
      m = fG.Zu[this.azF[q]],
      n = m[0].toUpperCase();
    j[0].hk([[23, 6], "." + n]);
    j[1].hk(["VAR0 ." + n, [1, 8]]);
    j[2].hk([6, 37]);
    j[3].hk([5, 4]);
  };
  l1.prototype.yp = function (j, q) {
    this.a = j;
    this.Wz();
  };
  l1.prototype.Wz = function (j, q) {
    if (!J.JO(this._)) return;
    this.T();
    J.dI(this.aCa);
    this.aCa.appendChild(this.JA[this.QK.V()].jY);
    var m = this.JA,
      n = this.a;
    if (n == null) return;
    m[0].j3(n.AU);
    m[1].oz(n.UP, n.vH);
    m[1].j3(n.bu);
    m[2].j3(n.wP);
    m[3].j3([n.RU, n.wP]);
    m[4].j3(n.Jh);
    m[5].j3(n.QN);
  };
  function hz(j, q, m) {
    g7.call(this, q, "cwindow");
    this.aGt = new ea(m[0], m[1] - 33);
    this.IN = J.m("div", "form");
    J.F(
      this.IN,
      "width:" + (m[2] - m[0]) + "px; height:" + (m[3] - m[1]) + "px"
    );
    this.body.appendChild(this.IN);
  }
  hz.prototype = new g7();
  hz.prototype.lu = function (j, q) {
    return this.aGt.P();
  };
  function ec(j) {
    var q = ec.a0g(j);
    g7.call(this, q, "res" + j);
    var m = this.asy.bind(this);
    window.addEventListener(
      "message",
      function (G) {
        if (typeof G.data == "string" && G.data.startsWith("--et ")) {
          if (lw.xq() == null) return;
          console.log(G.data);
          var W = (this.aIW = G.data.slice(5).split(","));
          W[0] = parseFloat(W[0]);
          lw.axh(W[0], W[1], m);
        }
      }.bind(this)
    );
    this.xn = q;
    this.O3 = j;
    this.as3 = null;
    this.nV = null;
    this.AH = 0;
    this.gr = null;
    this.GT = null;
    this.aIW = null;
    this.a = null;
    J.F(this.body, "padding:0");
    this.hx = new kv("", null, null, !0);
    this.body.appendChild(this.hx._);
    this.hx.Q("click", this.WZ, this);
    J.F(this.hx._, "position:absolute; margin-top: -28px;  margin-left:150px");
    this.nT = new kv("\u25BC", null, null, !0);
    J.F(this.nT._, "position:absolute; margin-top: -28px;  margin-left:270px");
    this.nT.Q("click", this.aw8, this);
    this.body.appendChild(this.nT._);
    this.nX = J.m("span", "form");
    this.body.appendChild(this.nX);
    this.Tk = [];
    for (var y = 0; y < 9; y++) {
      var n = new kv(ec.a0g(y));
      this.Tk.push(n);
      if (y == j) n.q(!0);
      this.nX.appendChild(n._);
      n.Q("click", this.aAc, this);
    }
    this.ai5 = new kv([5, 3], null, null, !0);
    this.ai5.Q("click", this.al3, this);
    this.agH = new kv("Upload Current Document as a Template", null, null, !0);
    this.agH.Q("click", this.a76, this);
    this.a3l = new bJ("Creator / Brand name");
    this.bW = new kv([1, 2], null, null, !0);
    this.bW.Q("click", this.AM, this);
    this.pm = J.m("iframe", "scrollable");
    J.F(this.pm, "border:none; margin:0; padding:0;");
    this.EI = J.m("div", "form scrollable padded");
    this.SY = new ef(j);
    this.SY.Q("back", this.zE, this);
    this.SY.Q("save", this.anC, this);
    this.body.appendChild(this.pm);
  }
  ec.prototype = new g7();
  ec.a0g = function (j) {
    var q;
    if (j == 0) q = [25, 0];
    else if (j == 1) q = "Plugins";
    else for (var m in fG.Zu) if (fG.Zu[m][4] == j) q = fG.Zu[m][3];
    return q;
  };
  ec.prototype.aw8 = function (j) {
    this.nX.style.display = this.nX.style.display == "none" ? "" : "none";
  };
  ec.prototype.aAc = function (j) {
    var y = this.Tk.indexOf(j.target);
    if (y == this.O3) return;
    this.close();
    var q = new fd(_.E.c, !0);
    q.data = { R: _.Y.s0, kO: "res" + y };
    this.k(q);
  };
  ec.prototype.asy = function (j) {
    this.WZ();
    this.GT = JSON.parse(j.target.response);
    this._N();
  };
  ec.prototype.lu = function (j, q) {
    return new ea(0, 0);
  };
  ec.prototype.X3 = function (j, q) {
    this.GM = j;
    this.uu = q;
    this.I7 = null;
    q = q - 4;
    j = j;
    var m = j > 820,
      n =
        "position:absolute; margin-top: -30px;  margin-left:270px;  margin-right:20px;",
      G =
        "position:absolute; margin-top:   0px;  padding:10px;  display:none;  background-color: var(--base);  width:100%;  text-align:center;";
    J.F(this.nX, m ? n : G);
    this.nX.style.marginTop = (m ? -31 : 0) + "px";
    this.nT._.style.display = m ? "none" : "";
    var W = this.EI;
    W.style.width = j - 12 + "px";
    W.style.height = q - 12 + "px";
    var W = this.SY._;
    W.style.width = j - 12 + "px";
    W.style.height = q - 12 + "px";
    var W = this.pm;
    W.style.width = j + "px";
    W.style.height = q + "px";
    this.PO();
  };
  ec.prototype.yp = function (j, q) {
    this.a = j;
  };
  ec.prototype.T = function () {
    g7.prototype.T.call(this);
    for (var y = 0; y < this.Tk.length; y++) this.Tk[y].T();
    this.ai5.T();
  };
  ec.prototype.Wz = function (j, q, m, n) {
    this.I7 = j;
    this.WZ(null, !1);
  };
  ec.prototype.WZ = function (j, q) {
    var m = q != null ? q : J.JO(this.pm);
    if (m) {
      if (!lw.N$()) {
        alert("You need to log in first!");
        return;
      }
      var n = lw.PZ();
      if (n == null) n = {};
      this.nV = n.tpl ? n.tpl.list : [];
      this.a3l.q(n.tpl && n.tpl.brnd ? n.tpl.brnd : "");
      this.PO();
    } else {
      this.pm.setAttribute("src", "");
      this.pm.setAttribute(
        "src",
        lw.sX("templates/index.html?type=" + this.O3 + "" + this.a.Jb.join(","))
      );
    }
    this.body.removeChild(this.body.children[this.body.children.length - 1]);
    this.body.appendChild(m ? this.EI : this.pm);
    var G = g$.get(this.xn);
    this.hx.hk(m ? "All " + G : "Add " + G);
  };
  ec.prototype.PO = function () {
    var j = g$.get(this.xn),
      q = this.nV,
      m = this.O3,
      T = 450;
    if (q == null) return;
    var n = this.EI;
    J.dI(n);
    var G = J.m("h1");
    n.appendChild(G);
    G.textContent = "Share your " + j + " with the world!";
    var W = J.m("ul");
    n.appendChild(W);
    var k = J.m("li");
    W.appendChild(k);
    k.textContent =
      "By publishing your " +
      j +
      ", you agree to let others use them for all kinds of purposes, even commercially.";
    n.appendChild(this.ai5._);
    if (m == 0) n.appendChild(this.agH._);
    J.Ft(n);
    n.appendChild(this.a3l._);
    n.appendChild(this.bW._);
    J.Ft(n);
    T = (this.GM - 20) / Math.max(1, Math.floor(this.GM / T)) - 42;
    var b =
      "display:inline-block; width:" +
      T +
      "px; height:140px;  overflow:hidden; background-color:rgba(255,255,255,0.2);  margin:10px 20px 0px 0; line-height:1.5em; padding:10px;";
    for (var y = q.length - 1; y >= 0; y--) {
      var c = q[y];
      if (c.type == null) c.type = 0;
      if (c.type != m) continue;
      var a = J.m("div");
      n.appendChild(a);
      J.F(a, b);
      var f = J.m("img");
      a.appendChild(f);
      f.setAttribute("src", c.thmb);
      J.F(
        f,
        "float:left; height:10em; width:10em;  object-fit: contain; margin-right: 1em; margin-bottom:1em;"
      );
      var U = J.m("h3");
      a.appendChild(U);
      U.textContent = c.name;
      J.F(U, "margin:0 0 10px 0");
      var Z = J.m("p");
      a.appendChild(Z);
      Z.textContent = c.desc;
      J.F(Z, "height:76px;  overflow:hidden; margin-bottom: 6px;");
      for (var h = 0; h < 2; h++) {
        var u = new kv(h == 0 ? "Edit" : "Delete", null, null, !0);
        u.acS = y;
        u._N = h == 0;
        u.Q("click", this.ahs, this);
        a.appendChild(u._);
      }
    }
  };
  ec.prototype.a76 = function (j) {
    if (this.I7 == null) {
      alert("No document opened.");
      return;
    }
    var q = confirm(
      "Your document will be uploaded to Photopea.com and a preview to Imgur.com. Proceed?"
    );
    if (!q) return;
    var m = new fd(_.E.c, !0);
    m.data = { R: _.Y.KC, hr: "psd", w4: this.aM1.bind(this) };
    this.k(m);
  };
  ec.prototype.aM1 = function (j) {
    this.a81 = j;
    var q = new fd(_.E.c, !0);
    q.data = { R: _.Y.KC, hr: "jpg", w4: this.aKB.bind(this), a98: 1400 };
    this.k(q);
  };
  ec.prototype.aKB = function (j) {
    this.gr = {
      type: 0,
      catg: 0,
      desc: "",
      file: this.a81,
      name: this.I7.name.split(".")[0],
      thmb: j,
      publ: !0,
      utme: "",
    };
    this._N();
  };
  ec.prototype.al3 = function (j) {
    this.gr = {
      type: 0,
      catg: 0,
      desc: "",
      file: "",
      name: "",
      thmb: "",
      publ: !0,
      utme: "",
    };
    this._N();
  };
  ec.prototype.ahs = function (j) {
    this.AH = j.target.acS;
    if (!j.target._N) {
      if (!window.confirm("Are you sure you want to delete your template?"))
        return;
      this.nV.splice(this.AH, 1);
      this.AM();
      this.PO();
      return;
    }
    this._N();
  };
  ec.prototype._N = function () {
    if (J.JO(this.EI)) this.body.removeChild(this.EI);
    this.body.appendChild(this.SY._);
    var j = this.gr ? this.gr : this.GT ? this.GT : this.nV[this.AH];
    if (j.type == null) j.type = 0;
    this.SY.q(j);
  };
  ec.prototype.anC = function (j) {
    var q = this.SY.V();
    if (this.gr) this.nV.push(q);
    else if (this.GT) {
      var m = this.aIW;
      lw.axh(m[0], m[1], this.zE.bind(this), JSON.stringify(q));
      return;
    } else this.nV[this.AH] = q;
    this.AM();
    this.zE();
  };
  ec.prototype.zE = function () {
    var j = this.GT;
    this.gr = null;
    this.GT = null;
    this.body.removeChild(this.SY._);
    this.body.appendChild(this.EI);
    this.PO();
    if (j) this.WZ();
  };
  ec.prototype.AM = function () {
    var j = lw.PZ();
    if (j == null) j = {};
    if (this.nV.length == 0) delete j.tpl;
    else {
      j.tpl = { list: B.S(this.nV) };
      var q = this.a3l.V().trim();
      if (q != "") j.tpl.brnd = q;
    }
    lw.$R(j, function () {
      alert("Saved.");
    });
  };
  function bT() {
    g7.call(this, "Make Selection", "makesel");
    var j = J.m("div", "form");
    this.body.appendChild(j);
    this.YI = new av([12, 25, 1]);
    this.YI.q(!0);
    j.appendChild(this.YI._);
    J.Ft(j);
    this.aov = new i4(!0);
    j.appendChild(this.aov._);
    this.v0 = J.y_(this, this.body);
  }
  bT.prototype = new g7();
  bT.prototype.T = function () {
    g7.prototype.T.call(this);
    this.aov.T();
    this.YI.T();
    this.v0.T();
  };
  bT.prototype.GP = function (j) {
    var q = new fd(_.E.w, !0);
    q.l = L.ag;
    q.data = { R: "frompath", eQ: [null, 0, this.aov.V(), this.YI.V()] };
    this.close();
    this.k(q);
  };
  function er() {
    g7.call(this, ["VAR0 PSD/PSB", [1, 2]], "savepsb");
    this.I7 = null;
    this.PV = null;
    this.ap1 = null;
    var j = (this.aLv = J.m("div", "form"));
    J.F(j, "width:20em");
    this.body.appendChild(j);
    this.ue = new gA([12, 50], ["PSD", "PSB"]);
    this.ue.Q(_.E.n, this.ll, this);
    j.appendChild(this.ue._);
    J.c$(j);
    var q = new aD("Minify the file");
    j.appendChild(q._);
    J.Ft(j);
    var m = [
      "Blank preview image",
      "ZIP for pixel data",
      "Remove Smart Object pixels",
      "Put the file into ZIP",
    ];
    this.JN = [];
    for (var y = 0; y < m.length; y++) {
      var n = new av(m[y]);
      this.JN.push(n);
      j.appendChild(n._);
      n.Q(_.E.n, this.ll, this);
    }
    J.c$(j);
    this.ZF = new aD("aa.psd");
    this.oU = new aD("10 kB");
    j.appendChild(this.oU._);
    this.axa = new aD("1000 B");
    j.appendChild(this.axa._);
    this.v0 = new kv([1, 2], !0, null, !0);
    this.v0.Q("click", this.GP, this);
    j.appendChild(this.v0._);
    this.m6 = new kv(["VAR0 (Google Drive)", [1, 2]], !0, null, !0);
    this.m6.Q("click", this.GP, this);
    j.appendChild(this.m6._);
    this.Q("closebtn", this.JT, this);
  }
  er.prototype = new g7();
  er.prototype.Wz = function (j, q, m, n) {
    var G = J.JO(this.m6._),
      W = j.Co != null && j.Co.yU == "psd";
    if (W && !G) this.aLv.appendChild(this.m6._);
    if (!W && G) this.aLv.removeChild(this.m6._);
    for (var y = 0; y < this.JN.length; y++) this.JN[y].q(!1);
    this.I7 = j;
    this.ll();
  };
  er.prototype.GP = function (j) {
    if (j.target == this.v0) jc.save(this.PV, this.ap1);
    else {
      if (this.JN[3].V()) {
        alert("You should not save a ZIP as a PSD to Google Drive.");
        return;
      }
      a8.aHk(this.I7, this.PV);
    }
  };
  er.prototype.JT = function () {
    this.I7 = null;
    this.PV = null;
  };
  er.prototype.ll = function () {
    var j = this.I7,
      q = [!1, !1, !1, !1];
    for (var y = 0; y < 3; y++) q[y] = this.JN[y].V();
    var m = this.JN[3].V(),
      n = (q[3] = this.ue.V() == 1),
      G = j.name.slice(0, j.name.length - 3),
      W = (this.PV = gh.lj("PSD").Ev(j, 0, 0, q)),
      aF = (this.ap1 = G + "ps" + (n ? "b" : "d"));
    if (m) {
      var k = {};
      k[aF] = new Uint8Array(W);
      W = this.PV = UZIP.encode(k);
      aF = this.ap1 = G + "zip";
    }
    this.ZF.q(aF);
    this.oU.q(bE.za(W.byteLength));
    this.oU._.style["font-size"] = "2em";
    this.axa.q(" \u2001 " + W.byteLength + " B");
    this.v0.hk(g$.get([1, 2]) + ' "' + aF + '"');
  };
  er.prototype.T = function () {
    g7.prototype.T.call(this);
    this.ue.T();
    this.v0.T();
    this.m6.T();
  };
  function kf() {
    g7.call(this, "Confirm", "confirm");
    this.ml = null;
    var j = J.m("div");
    J.F(j, "margin-bottom:1em");
    this.body.appendChild(j);
    this.x8 = J.m("div");
    this.x8.textContent = "Hello";
    j.appendChild(this.x8);
    this.v0 = J.y_(this, this.body);
  }
  kf.prototype = new g7();
  kf.prototype.GP = function (j) {
    if (this.ml == null) return;
    console.log("okconfirm");
    this.close();
    this.ml();
    this.ml = null;
  };
  kf.prototype.T = function () {
    g7.prototype.T.call(this);
    this.v0.T();
  };
  kf.prototype.Wz = function (j, q) {
    if (q.aC6 || q.ahp) this.x8.innerHTML = q.K;
    else this.x8.textContent = q.K;
    if (q.aio) this.v0.hk(q.aio);
    this.ml = q.ml;
    this.v0._.focus();
    if (q.aC6 != null)
      this._.style.top = Math.random() * (window.innerHeight - 150) + "px";
    this.a2T = q.aC6 != null;
  };
  kf.prototype.lu = function (j, q) {
    return new ea(
      Math.max(0, (j - 500) / 2),
      Math.max(0, Math.min(60, (q - 100) / 2))
    );
  };
  kf.prototype.X3 = function (j, q) {
    this.x8.style.width = j - 30 + "px";
  };
  function ls() {
    g7.call(this, [1, 16, 2], "newartb");
    this.Dm = 0;
    this.vN = null;
    var j = J.m("div", "form");
    j.style.width = "260px";
    this.body.appendChild(j);
    this.Zw = new aY();
    j.appendChild(this.Zw._);
    this.v0 = J.y_(this, j);
  }
  ls.prototype = new g7();
  ls.prototype._j = function (j, q) {
    return j != null;
  };
  ls.prototype.GP = function (j) {
    var q = this.Zw.V();
    this.vN.r = q.x;
    this.vN.$ = q.y;
    var m = new fd(_.E.w, !0);
    m.l = L.Be;
    m.data = { azL: this.vN, io: this.Dm };
    this.k(m);
    this.close();
  };
  ls.prototype.T = function () {
    g7.prototype.T.call(this);
    this.Zw.T();
    this.v0.T();
  };
  ls.prototype.Wz = function (j, q) {
    this.Dm = q.io;
    var m = new hk(0, 0, j.r, j.$);
    if (j.J.length != 0) {
      var n = j.U[j.J[0]];
      if (n.add.artb) {
        m = n.Li();
        m.x += m.r + 100;
      }
      if (q.io == 1) m = L.Dq.Fj(j);
    }
    this.vN = m;
    this.Zw.q(new ea(m.r, m.$));
  };
  function kT() {
    g7.call(this, [1, 19, 0], "storwindow");
    J.F(this.body, "padding:0");
    this.rz = null;
    this.Q("closebtn", this.wF, this);
    this.Q("canclose", this.wF, this);
  }
  kT.prototype = new g7();
  kT.prototype.yp = function (j, q) {
    if (this.rz) this.rz.yp(j, q);
  };
  kT.prototype.lu = function (j, q) {
    return new ea(
      Math.max(0, Math.min(150, (j - 980) / 2)),
      Math.max(0, Math.min(150, (q - 590) / 2))
    );
  };
  kT.prototype.X3 = function (j, q) {
    this.GM = j;
    this.uu = q;
    j = Math.min(j, 980);
    q = Math.min(q, 590);
    if (this.rz) this.rz.X3(j, q);
  };
  kT.prototype.T = function () {
    g7.prototype.T.call(this);
    if (this.rz) this.rz.T();
  };
  kT.prototype.Wz = function (j, q, m, n) {
    this.KM =
      q.io == 0
        ? ["VAR0 VAR1", [1, 0], [1, 19, 1]]
        : ["VAR0 VAR1", [1, 2], [1, 19, 2]];
    this.T();
    if (this.rz == null) {
      this.rz = new ij();
      this.rz.parent = this;
      this.body.appendChild(this.rz._);
      this.T();
      this.X3(this.GM, this.uu);
    }
    Storage.MI(q.io, q.V0 ? q.V0 : j ? j.name : "", q.Vg);
    ij.G2(this.rz);
  };
  kT.prototype.wF = function (j) {
    Storage.MI(0);
    ij.SJ();
    if (j.e == "canclose") this.close();
  };
  function dW() {
    g7.call(this, [2, 14], "varsdats");
    var j = (this.IN = J.m("div", "form"));
    J.F(j, "width:300px");
    this.body.appendChild(j);
    this.I7 = null;
    this.gL = 0;
    this.a = null;
    this.n8 = new gA(null, [[2, 14], "Data Sets", [1, 8]]);
    this.n8.Q(_.E.n, this.aiT, this);
    this.on = new dW.AY();
    this.DE = new dW.T8();
    this.HW = new dW.Ck();
    this.DE.Q("activate", this.SN, this);
    this.HW.Q("export", this.It, this);
    this.v0 = J.y_(this);
  }
  dW.prototype = new g7();
  dW.prototype.aiT = function (j) {
    var q = this.n8.V(),
      m = this.IN;
    J.dI(m);
    m.appendChild(this.n8._);
    J.c$(m);
    m.appendChild([this.on, this.DE, this.HW][q]._);
    m.appendChild(this.v0._);
  };
  dW.prototype.GP = function (j) {
    var q = new fd(_.E.w, !0);
    q.l = L.W1;
    q.data = { R: R.oS, K: JSON.stringify([this.on.V(), this.DE.V()]) };
    this.k(q);
    this.close();
  };
  dW.prototype.T = function () {
    g7.prototype.T.call(this);
    this.v0.T();
    this.HW.T();
  };
  dW.prototype.Wz = function (j, q) {
    this.I7 = j;
    this.HW.I7 = j;
    if (j == null) return;
    this.on.Wz(j, q);
    this.DE.Wz(j, q);
    this.n8.q(0);
    this.aiT();
    this.gL = 0;
    this.HW.aFH();
  };
  dW.prototype.yp = function (j, q) {
    this.a = j;
  };
  dW.prototype.It = function (j) {
    var q = this.on.V(),
      m = this.DE.V(),
      n = this.HW.V();
    if (q.length == 0) {
      alert("There are no variables.");
      return;
    }
    if (m.length == 0) {
      alert("There are no data sets.");
      return;
    }
    var G = gh.ayO(
      this.I7,
      q,
      m,
      this.DE.agv(),
      n[0],
      n[1],
      n[2],
      this.a,
      this
    );
    if (G != null) jc.save(G, this.I7.name.split(".")[0] + ".zip");
  };
  dW.prototype.SN = function (j) {
    var q = this.DE.J,
      m = this.on.V(),
      n = this.DE.V();
    if (m.length == 0) {
      alert("There are no variables.");
      return;
    }
    if (n.length == 0) {
      alert("There are no data sets.");
      return;
    }
    this.eR();
    this.gL += gh.abV(this.I7, this, m, n, this.DE.agv(), q);
  };
  dW.prototype.eR = function () {
    var j = new fd(_.E.w, !0);
    j.l = L.cJ;
    j.data = { R: "h_stepbck" };
    while (this.gL > 0) {
      this.k(j);
      this.gL--;
    }
  };
  dW.Ck = function () {
    kV.call(this);
    var j = (this._ = J.m("div"));
    this.aj2 = new bJ("Variable for file names");
    j.appendChild(this.aj2._);
    J.c$(j);
    this.I7 = null;
    this.Q8 = ["JPG", "PNG", "PDF"];
    this.ue = new gA([12, 50], this.Q8);
    this.ue.Q(_.E.n, this.aFH, this);
    j.appendChild(this.ue._);
    this.qv = new gf();
    j.appendChild(this.qv._);
    this.uw = new kv("Export all items", !0, null, !0);
    this.uw.Q("click", this.It, this);
    j.appendChild(this.uw._);
  };
  dW.Ck.prototype = new kV();
  dW.Ck.prototype.T = function (j) {
    this.aj2.T();
    this.ue.T();
    this.uw.T();
    this.qv.T();
  };
  dW.Ck.prototype.aFH = function (j) {
    if (this.I7 == null) return;
    var q = this.Q8[this.ue.V()],
      m = this.I7,
      n = m.add.artd;
    this.qv.HK(q, null, null, n != null && n.Cnt.v > 1);
  };
  dW.Ck.prototype.It = function (j) {
    this.k(new fd("export"));
  };
  dW.Ck.prototype.V = function () {
    var j = this.Q8[this.ue.V()];
    return [j, this.qv.V(), this.aj2.V().trim()];
  };
  dW.T8 = function () {
    kV.call(this);
    this.Eo = null;
    this.alT = [];
    this.J = 0;
    var j = (this._ = J.m("div", "form"));
    this.afW = new b6("Import a CSV file");
    j.appendChild(this.afW._);
    this.afW.Q(_.E.n, this.ajE, this);
    this.qa = J.m("div", "scrollable");
    J.F(this.qa, "overflow:scroll;  height:234px;");
    j.appendChild(this.qa);
    this.arL = new b6("Source Images", !0);
    j.appendChild(this.arL._);
  };
  dW.T8.prototype = new kV();
  dW.T8.prototype.ajE = function (j) {
    var q = this.afW.V();
    for (var m in q) {
      q = q[m];
      break;
    }
    this.Eo = l9.VB(M.K6(q));
    this.ip();
  };
  dW.T8.prototype.agv = function () {
    return this.arL.V();
  };
  dW.T8.prototype.Wz = function (j, q) {
    var m = (this.Eo = B.S(j.$n));
    this.ip();
  };
  dW.T8.prototype.V = function () {
    return this.Eo;
  };
  dW.T8.prototype.ip = function () {
    var j = this.go.bind(this),
      q = this.Eo,
      n =
        "max-width: 100px; overflow:hidden; white-space: nowrap; border: 1px solid; padding:0px 5px;";
    this.alT = [];
    var m = J.m("table");
    J.F(m, "border-collapse: collapse;");
    for (var y = 0; y < q.length; y++) {
      var G = J.m("tr"),
        W = q[y],
        k = y == 0 ? "th" : "td";
      m.appendChild(G);
      var T = J.m(k);
      G.appendChild(T);
      J.F(T, n + "cursor:pointer;");
      if (y != 0) T.textContent = "\u2713";
      this.alT.push(T);
      T.addEventListener("click", j, !1);
      for (var b = 0; b < W.length; b++) {
        var T = J.m(k);
        T.textContent = W[b];
        G.appendChild(T);
        J.F(T, n);
        T.setAttribute("title", W[b]);
      }
    }
    J.dI(this.qa);
    this.qa.appendChild(m);
  };
  dW.T8.prototype.go = function (j) {
    this.J = this.alT.indexOf(j.currentTarget);
    this.k(new fd("activate"));
  };
  dW.AY = function () {
    kV.call(this);
    var j = (this._ = J.m("div", "form marged"));
    this.WN = null;
    this.uK = [];
    this.l8 = [];
    this.d2 = null;
    this.XL = new f1([0, 3], []);
    this.XL.Q(_.E.n, this.alw, this);
    j.appendChild(this.XL._);
    this.ahO = [];
    var q = ["Visibility", "Text Content", "Pixel Content"];
    for (var y = 0; y < q.length; y++) {
      J.c$(j);
      var m = new av(q[y]);
      m.Q(_.E.n, this.tS, this);
      j.appendChild(m._);
      J.Ft(j);
      var n = new bJ("Variable Name");
      n.Q(_.E.n, this.tS, this);
      j.appendChild(n._);
      this.ahO.push(m, n);
    }
  };
  dW.AY.prototype = new kV();
  dW.AY.prototype.tS = function (j) {
    var q = this.XL.V(),
      m = this.d2[q],
      n = this.uK[q],
      G = this.WN["l" + m],
      W = this.ahO;
    if (G == null) this.WN["l" + m] = G = [];
    while (G.length != 0) G.pop();
    for (var y = 0; y < 3; y++) {
      var k = W[2 * y + 1].V().trim();
      if (!W[2 * y].V()) continue;
      if (k.indexOf(" ") != -1) {
        alert(
          'Variable names can not contain spaces. But you can use ".", ":", "-" or "_".',
          4e3
        );
      }
      k = k.replaceAll(" ", "");
      var T = {
        varName: k,
        trait: ["visibility", "textcontent", "fileref"][y],
      };
      G.push(T);
      if (y == 2) {
        T.align = "center";
        T.clip = "false";
        T.placementMethod = "fit";
        T.valign = "middle";
      }
    }
    if (G.length == 0) delete this.WN["l" + m];
    this.Wz();
  };
  dW.AY.prototype.alw = function (j) {
    var q = this.XL.V(),
      m = this.d2[q],
      n = this.uK[q],
      G = this.WN["l" + m],
      W = this.ahO;
    if (G == null) G = [];
    for (var y = 0; y < 3; y++) {
      var k = y == 0 || (y == 1 && n == 0) || (y == 2 && n == 1);
      W[2 * y].yl(k);
      W[2 * y].q(!1);
      W[2 * y + 1].yl(k);
      if (!k) W[2 * y + 1].q("");
    }
    for (var y = 0; y < G.length; y++) {
      var T = G[y],
        b = T.trait,
        c = ["visibility", "textcontent", "fileref"].indexOf(b);
      W[c * 2].q(!0);
      W[c * 2 + 1].q(T.varName);
    }
  };
  dW.AY.prototype.Wz = function (j, q) {
    if (j) {
      var m = B.S(j.Mr),
        n = (this.WN = {});
      for (var y = 0; y < m.length; y++) {
        var G = m[y],
          W = G.docRef;
        W = "l" + W.slice(4, W.length - 2);
        if (n[W] == null) n[W] = [];
        n[W].push(G);
      }
      this.d2 = [];
      this.uK = [];
      this.l8 = [];
      for (var y = j.U.length - 1; y >= 0; y--) {
        var k = j.U[y],
          W = k.add.lyid;
        if (k.add.lsct == hQ.$a) continue;
        this.d2.push(W);
        this.uK.push(k.add.TySh ? 0 : 1);
        this.l8.push(k.getName());
      }
    }
    var T = [],
      b = this.l8;
    for (var y = 0; y < b.length; y++) {
      T.push(b[y] + (this.WN["l" + this.d2[y]] ? " *" : ""));
    }
    var c = this.XL.V();
    this.XL.ti(T);
    this.XL.q(c);
    this.alw();
  };
  dW.AY.prototype.V = function () {
    var j = this.WN,
      q = [];
    for (var m in j) {
      var n = j[m];
      for (var G = 0; G < n.length; G++) {
        n[G].docRef = "id('" + m.slice(1) + "')";
        q.push(n[G]);
      }
    }
    return q;
  };
  function cD() {
    g7.call(this, ["VAR0 VAR1", [15, 10, 22], [8, 11, 0]], "divslice");
    this.ad6 = !1;
    var j = (this.Mh = []),
      q = J.m("div", "form");
    J.F(q, "width:20em");
    this.body.appendChild(q);
    for (var y = 0; y < 2; y++) {
      var m = new av([22, 4, 2 + y]);
      q.appendChild(m._);
      J.Ft(q);
      var n = new gA(null, [["N equal parts"], ["N pixels per part"]]);
      q.appendChild(n._);
      J.Ft(q);
      var G = new k7("N", 0, 1e3);
      G.q(4);
      G.parent = this;
      q.appendChild(G._);
      J.Ft(q);
      if (y == 0) J.c$(q);
      j.push(m, n, G);
    }
    for (var y = 0; y < j.length; y++) j[y].Q(_.E.n, this.v2, this);
    j.push(J.y_(this, q));
    this.Q("closebtn", this.eR, this);
  }
  cD.prototype = new g7();
  cD.prototype.eR = function () {
    if (this.ad6) {
      var j = new fd(_.E.w, !0);
      j.l = L.cJ;
      j.data = { R: "h_stepbck" };
      this.k(j);
    }
  };
  cD.prototype.v2 = function (j) {
    this.eR();
    this.ad6 = !0;
    var q = [];
    for (var y = 0; y < 6; y++) q.push(this.Mh[y].V());
    var m = {
      __name: "Divide",
      classID: "divide",
      null: {
        t: "obj ",
        v: [
          { t: "Enmr", v: { classID: "slice", typeID: "Ordn", enum: "Trgt" } },
        ],
      },
    };
    for (var n = 0; n < 2; n++) {
      if (!q[n * 3]) continue;
      var G = q[n * 3 + 1],
        W = q[n * 3 + 2];
      m[["slices", "pixels"][G] + ["Across", "Down"][n]] = { t: "long", v: W };
    }
    var k = new fd(_.E.NI, !0);
    k.data = { _D: "divide", SC: m };
    this.k(k);
  };
  cD.prototype.GP = function (j) {
    this.close();
  };
  cD.prototype.T = function () {
    g7.prototype.T.call(this);
    var j = this.Mh;
    for (var y = 0; y < j.length; y++) j[y].T();
  };
  cD.prototype.Wz = function (j, q) {
    this.ad6 = !1;
  };
  function eA() {
    g7.call(this, "Stroke Path", "strokepath");
    this.a = null;
    this.CU = null;
    this.asI = null;
    this.v0 = null;
    this.acg = [
      L.$o,
      L.cS,
      L.Ij,
      L.T1,
      L.J6,
      L.Su,
      L.A7,
      L.Ro,
      L.Mx,
      L.Bd,
      L.pA,
      L.kS,
      L.mU,
      L.yK,
      L.eu,
    ];
  }
  eA.prototype = new g7();
  eA.prototype.T = function () {
    g7.prototype.T.call(this);
    if (this.v0) {
      this.CU.T();
      this.v0.T();
    }
  };
  eA.prototype.GP = function (j) {
    var q = this.acg[this.CU.V()],
      m = null;
    for (var n in L.Rt) if (L.Rt[n] == q) m = n;
    var G = new fd(_.E.NI, !0);
    G.data = L.Qc.Rr(m, this.asI.V());
    this.close();
    this.k(G);
  };
  eA.prototype.yp = function (j, q) {
    if (this.a == null) {
      var m = [];
      for (var y = 0; y < this.acg.length; ++y) {
        m.push(j.Z.map[this.acg[y]].l.name);
      }
      var n = J.m("div", "form");
      this.body.appendChild(n);
      this.CU = new f1("Tool", m);
      this.CU.q(1);
      n.appendChild(this.CU._);
      this.asI = new av("Simulate Pressure");
      J.Ft(n);
      n.appendChild(this.asI._);
      this.v0 = J.y_(this, this.body);
    }
    this.a = j;
  };
  function fh() {
    g7.call(this, [1, 18], "linkview");
    J._g(this.body, "form");
    var j = (this.aD = [
      new bJ(null, null, 17),
      new kv([5, 1], !1, null, !0),
      new kv([1, 0], !1, null, !0),
    ]);
    for (var y = 0; y < 3; y++) {
      var q = j[y];
      this.body.appendChild(q._);
      if (y != 0) q.Q("click", this.hP, this);
      if (y == 0) J.Ft(this.body);
    }
  }
  fh.prototype = new g7();
  fh.prototype.Wz = function (j, q) {
    var m = q.a13;
    if (m.startsWith("https://")) m = m.slice(8);
    this.aD[0].q(m);
  };
  fh.prototype.hP = function (j) {
    var q = this.aD,
      m = q[0].V(),
      n = j.target == this.aD[1];
    if (n) {
      navigator.clipboard.writeText(m);
      alert("Copied to a clipboard!");
    } else window.open("https://" + m, "Shared");
  };
  function fU(j) {
    g7.call(
      this,
      j == 0
        ? [
            [23, 6],
            [17, 2],
          ]
        : ["VAR0 VAR1", [1, 2], [17, 2]],
      ["loadsel", "savesel"][j]
    );
    this.caller = null;
    this.ry = j;
    var q = J.m("div", "form label8");
    J.F(q, "max-width:26em");
    this.body.appendChild(q);
    this.iV = new f1("Document", ["abc", "def"]);
    this.iV.Q(_.E.n, this.tS, this);
    q.appendChild(this.iV._);
    J.Ft(q);
    this.pz = new f1([12, 4], ["abc", "def"]);
    this.pz.Q(_.E.n, this.tS, this);
    q.appendChild(this.pz._);
    this.a9L = new av([4, 11]);
    this.x8 = new bJ([12, 48]);
    this.x8.q("Alpha");
    if (j == 0) {
    } else {
      q.appendChild(this.x8._);
    }
    this.hD = new i4(!0);
    q.appendChild(this.hD._);
    this.v0 = J.y_(this, q);
  }
  fU.prototype = new g7();
  fU.prototype.bx = function () {
    return !0;
  };
  fU.prototype.T = function () {
    g7.prototype.T.call(this);
    this.v0.T();
    this.iV.T();
    this.pz.T();
    this.x8.T();
    this.a9L.T();
    this.hD.T();
  };
  fU.prototype.tS = function (j) {
    var q = this.ry;
    if (j == null || j == this.iV) {
      var m = this.iV.V(),
        n = this.caller.mS[m],
        G = [];
      if (q == 0)
        G.push(
          n.U[n.J[0]].getName() + " Transparency",
          n.U[n.J[0]].getName() + " Gray"
        );
      else G.push([5, 3]);
      for (var y = 0; y < n._E.length; y++) G.push(n._E[y].name);
      this.pz.ti(G);
    }
    if (q == 0) return;
    var W = this.pz.V();
    this.x8.yl(W == 0);
    this.hD.yl(W != 0);
  };
  fU.prototype.Wz = function (j, q, m) {
    this.caller = m;
    var n = m.mS,
      G = [];
    for (var y = 0; y < n.length; y++) {
      var W = n[y].name;
      G.push(W.length < 30 ? W : W.slice(0, 27) + "...");
    }
    this.iV.ti(G);
    this.iV.q(n.indexOf(j));
    this.tS(null);
  };
  fU.prototype.GP = function (j) {
    var q = this.ry,
      m = this.pz.V(),
      n = this.iV.V(),
      G = this.caller.mS[n],
      W = this.hD.V(),
      k,
      T = !1;
    if (q == 0) {
      if (m == 1) T = !0;
      m = Math.max(m - 1, 0);
    }
    if (m == 0) {
      k = new fd(_.E.NI, !0);
      if (q == 0)
        k.data = L.pI.j7(W, T ? "Gray" : "Trsp", G.U[G.J[0]].getName());
      else
        k.data = {
          _D: "duplicate",
          SC: {
            classID: "null",
            Nm: { t: "TEXT", v: this.x8.V() },
            null: {
              t: "obj ",
              v: [{ t: "prop", v: { classID: "Chnl", keyID: "fsel" } }],
            },
          },
        };
    } else {
      k = new fd(_.E.w, !0);
      if (q == 0) {
        k.l = L.ag;
        k.data = { R: "fromchannel", eQ: [-4 - m, 0, W] };
      } else {
        k.l = L.W1;
        k.data = { R: R.z3, _G: "seltochannel", eQ: [m - 1, W] };
      }
    }
    this.close();
    this.k(k);
  };
  function iw() {
    g7.call(this, "PeaMark", "peamark");
    var j = J.m("div");
    j.innerHTML =
      "Test your desktop, laptop, phone, tablet, any device! Bigger score is better :)<br /><small>*** connect your laptop to a charger for better results</small>";
    this.body.appendChild(j);
    j.style.marginBottom = "40px";
    var q = J.m("div", "form");
    J.F(this.body, "width:320px;");
    this.body.appendChild(q);
    this.afL = !1;
    this.us = [];
    this.Wn = [];
    this.anp = [];
    for (var y = 0; y < 3; y++) {
      var j = J.m("span");
      j.textContent = "0";
      q.appendChild(j);
      J.F(
        j,
        "text-align:center; font-size:2em;  width:50%; display:inline-block; vertical-align:middle;"
      );
      var m = new kv("Test " + ["CPU", "GPU", "free RAM"][y], !1, null, !0);
      q.appendChild(m._);
      J.F(m._, "width:50%; margin-right:0px;");
      m.Q("click", this.ams, this);
      this.us.push(j);
      this.anp.push(m);
      var n = J.m("hr");
      this.Wn.push(n);
      if (y != 2) q.appendChild(n);
      J.F(n, "height:2px; background-color:#00ff00");
    }
    J.Ft(this.body);
    this.agU = new kv("Browse scores", !1, null, !0);
    var G = this.agU._;
    this.body.appendChild(G);
    this.agU.Q("click", this.arP, this);
    J.F(G, "position:absolute;top:100px;left:13px;");
    this.anZ = new kv("Tweet your score!", !1, null, !0);
    var G = this.anZ._;
    this.body.appendChild(G);
    this.anZ.Q("click", this.arP, this);
    J.F(G, "position:absolute;top:100px;right:13px;");
    this.lw = J.m("div", "scrollable");
    this.body.appendChild(this.lw);
    this.lw.style.height = "226px";
    this.l2 = [];
    this.auX = 0;
    this.aGX = this.arh.bind(this);
    this.aLf();
  }
  iw.prototype = new g7();
  iw.prototype.arP = function (j) {
    var q = PMRK,
      m;
    if (j.target == this.agU) {
      m = "https://twitter.com/hashtag/peamark?f=live";
    } else {
      var n = q[q.length - 1];
      if (Math.min(n[2], n[3]) == 0) {
        alert("Run both tests first.");
        return;
      }
      m =
        "https://twitter.com/intent/tweet?text=" +
        encodeURIComponent(
          "My #peamark score is " +
            n[2] +
            "/" +
            n[3] +
            "! Test your device at Photopea.com (More - PeaMark)"
        );
    }
    window.open(m, "_blank");
  };
  iw.prototype.ams = function (j) {
    var q = this.anp.indexOf(j.target),
      m = 1024,
      n = 1024,
      G = new hk(0, 0, m, n),
      W = this.aGX;
    if (q == 0) {
      var k = B.j(G.C());
      for (var T = 0; T < n; T++)
        for (var b = 0; b < m; b++)
          k[T * m + b] = (((T >>> 7) + (b >>> 7)) & 1) * 255;
      this.l2 = [q, k, m, n];
      for (var y = 0; y < 4; y++) W(!0);
    } else if (q == 1) {
      var c = B.j(G.C() * 4),
        a = fS.vK(1, m, n);
      a.set(c);
      B.bs(c, 4278190335);
      var f = fS.vK(0, m, n);
      f.set(c);
      var U = [
          1, 1, -1, 0, -1, 1, -1, 0, -0.3333333432674408, -0.3333333432674408,
          -0.3333333432674408, 0, 1, -1, -1, 0,
        ],
        Z = {
          e: fS.filter.aG4,
          Di: new Float32Array([1 / m, 1 / n]),
          aKR: 0,
          XT: 20,
          aLz: new Float32Array([0, 1]),
          afe: new Float32Array([0, 0, 0]),
          aDm: new Float32Array(U),
          ajT: new Float32Array(U),
        };
      this.l2 = [q, Z, c, f, a];
      W(!0);
    } else {
      if (this.afL) {
        alert("Close all documents before running this test.");
        return;
      }
      this.l2 = [q, []];
      W(!0);
    }
    this.aD7 = [
      [0, 0],
      [0, 0],
      [0, 0],
    ];
    this.auX = Date.now();
    setTimeout(this.aGX, 20);
  };
  iw.prototype.arh = function (j) {
    var q = this.l2,
      m = q[0],
      n = Date.now(),
      k = !1,
      T;
    if (m == 0) {
      B.style.Af(q[1], q[2], q[3]);
    } else if (m == 1) {
      fS.VF(q[4]);
      fS.filter.dH(q[1], q[3].vD);
      q[4].get(q[2]);
    }
    if (j) return;
    var G = Date.now() - n,
      W = this.aD7[m];
    W[0] += G;
    W[1]++;
    if (m < 2) {
      var b = [26, 73];
      T = Math.round((1e3 * b[m]) / (W[0] / W[1]));
      var c = (Date.now() - this.auX) / 5e3,
        k = c > 1;
      this.Wn[m].style.width = Math.min(100, c * 100) + "%";
    } else {
      var a = 128 * (1 << 20);
      try {
        var f = new Uint8Array(a);
        f.fill(117);
        q[1].push(f);
      } catch (gn) {
        k = !0;
        this.l2 = null;
        alert("finished");
      }
      T = ((q[1].length * a) / (1 << 30)).toFixed(2) + " GB";
    }
    this.us[m].textContent = T;
    if (!k) setTimeout(this.aGX, 20);
    else {
      var U = PMRK;
      U[U.length - 1][2 + m] = T;
      this.aLf();
    }
  };
  iw.prototype.aLf = function () {
    var j = this.lw,
      m = "",
      n = ' style="text-align:right; width:4em;">';
    J.dI(j);
    var q = PMRK.slice(0);
    q.sort(function (b, c) {
      return 1e3 * (c[2] - b[2]) + (c[3] - b[3]);
    });
    var G = "<td" + n,
      W = "<th" + n;
    for (var y = 0; y < q.length; y++) {
      var k = q[y],
        T = null;
      if ((y & 1) == 0) T = "rgba(255,255,255,0.05)";
      if (k[1] == "Your Device") T = "rgba(255,255,0,0.2)";
      m +=
        '<tr style="' +
        (T ? " background-color:" + T : "") +
        '"><td style="text-align:center">' +
        ["\uD83D\uDDA5", "\uD83D\uDCBB", "\uD83D\uDCF1", "\uD83D\uDCF1"][k[0]] +
        "</td><td>" +
        k[1] +
        "</td>" +
        G +
        k[2] +
        "</td>" +
        G +
        k[3] +
        "</td></tr>";
    }
    j.innerHTML =
      '<table style="line-height:1.5em; border-collapse: collapse;"><tr><th></th><th style="width:13.7em;">Device</th>' +
      W +
      "CPU</th>" +
      W +
      "GPU</th></tr>" +
      m +
      "</table>";
  };
  iw.prototype.Wz = function (j, q, m, n) {
    this.afL = j != null;
  };
  function bv() {
    g7.call(this, "Measurement Scale", "measscale");
    var j = J.m("div", "form label8");
    j.style.width = "300px";
    this.body.appendChild(j);
    var q = (this.RM = [
      new bJ("Pixel Length"),
      new bJ("Logical Length"),
      new bJ("Unit Name"),
      new aD("Hi"),
    ]);
    for (var y = 0; y < 4; y++) {
      var m = q[y];
      m.Q(_.E.n, this.tS, this);
      j.appendChild(m._);
    }
    this.v0 = J.y_(this, j);
  }
  bv.prototype = new g7();
  bv.prototype.lu = function (j, q) {
    return new ea(
      Math.max(0, Math.min(150, (j - 250) / 2)),
      Math.max(0, Math.min(150, (q - 120) / 2))
    );
  };
  bv.prototype.tS = function (j) {
    var q = this.RM;
    q[3].q(q[0].V() + " pixels = " + q[1].V() + " " + q[2].V());
  };
  bv.prototype.GP = function (j) {
    var q = this.RM,
      m = [];
    for (var y = 0; y < 3; y++) m.push(q[y].V());
    m[0] = parseFloat(m[0]);
    m[1] = parseFloat(m[1]);
    var n = new fd(_.E.w, !0);
    n.l = L.VO;
    n.data = { R: "unit", K: m };
    this.k(n);
    this.close();
  };
  bv.prototype.T = function () {
    g7.prototype.T.call(this);
    var j = this.RM;
    for (var y = 0; y < j.length; y++) j[y].T();
  };
  bv.prototype.Wz = function (j, q) {
    var m = this.RM;
    m[0].q(Math.round(q.Dh));
    if (j.pj) {
      var n = j.pj.T.v;
      console.log(n);
      m[1].q(n.logicalLength.v);
      m[2].q(n.logicalUnits.v);
    } else {
      m[1].q(1);
      m[2].q("unitName");
    }
    this.tS();
  };
  function fy() {
    g7.call(this, "Transform", "transform");
    var j = (this.IN = J.m("div", "form label6"));
    this.body.appendChild(j);
    this.azW = 0;
    this.QD = [
      [
        new k7([22, 4, 0], -1e3, 1e3),
        new k7([22, 4, 1], -1e3, 1e3),
        "-",
        new k7([12, 28], -1e3, 1e3),
        new iI([12, 15], !1, !1),
      ],
      [new iI([12, 15], !1, !1)],
      [
        new gA("Reflect", [
          [22, 4, 0],
          [22, 4, 1],
        ]),
      ],
      [new k7([22, 4, 0], -500, 500, "%"), new k7([22, 4, 1], -500, 500, "%")],
      [],
    ];
    this.QD[3][0].q(100);
    this.QD[3][1].q(100);
    this.v0 = J.y_(this, this.body);
  }
  fy.prototype = new g7();
  fy.prototype.T = function () {
    g7.prototype.T.call(this);
    var j = this.QD;
    for (var y = 0; y < j.length; y++) {
      var q = j[y];
      for (var m = 0; m < q.length; m++) if (q[m] != "-") q[m].T();
    }
    this.v0.T();
  };
  fy.prototype.Wz = function (j, q, m, n) {
    var G = (this.azW = q._G),
      W = this.IN,
      k = this.QD[G];
    this.KM = [[12, 54], [2, 5], "Reflect", [12, 38], [24, 5, 4]][G];
    J.dI(W);
    for (var y = 0; y < k.length; y++) {
      var T = k[y];
      if (T == "-") {
        J.c$(W);
        continue;
      }
      T.q(T.V());
      T.parent = this;
      W.appendChild(T._);
      J.Ft(W);
    }
    this.T();
  };
  fy.prototype.GP = function (j) {
    var q = this.azW,
      m = this.QD[q],
      n = "",
      G = [];
    for (var y = 0; y < m.length; y++) if (m[y] != "-") G.push(m[y].V());
    console.log(G);
    if (q == 0) {
      var W = G[0],
        k = G[1];
      if (G[2] != 0) {
        var T = (G[3][0] * Math.PI) / 180;
        W = G[2] * Math.cos(T);
        k = -G[2] * Math.sin(T);
      }
      n = "translate(" + W + "," + k + ");";
    }
    if (q == 1) n = "rotate(" + -G[0][0] + ");";
    if (q == 2) {
      var b = 1,
        c = 1;
      if (G[0] == 0) c = -1;
      else b = -1;
      n = "resize(" + b * 100 + "," + c * 100 + ");";
    }
    if (q == 3) {
      n = "resize(" + G[0] + "," + G[1] + ");";
    }
    console.log(n);
    var a = new fd(_.E.c, !0);
    a.data = { R: _.Y.D4, dR: "app.activeDocument.activeLayer." + n };
    this.close();
    this.k(a);
  };
  function bI(j, q, m, n) {
    kV.call(this);
    this.name = j;
    this.aJM = m;
    this.My = n;
    this.JH = J.m("div", "");
    this.JH.setAttribute("draggable", "true");
    this.nA = J.m("div", "pbody");
    this.Id = new kv("", !1, "");
    this.Id.parent = this;
    this.aka = J.m("span", "cross gsicon");
    this.k8 = J.m("span", "label");
    var G = this.aaA.bind(this);
    this.JH.addEventListener("mousedown", this.Jc.bind(this), !1);
    this.JH.addEventListener("contextmenu", G, !1);
    this.Id._.addEventListener("contextmenu", G, !1);
    this.aka.addEventListener("mousedown", this.dt.bind(this), !1);
    this.JH.appendChild(this.k8);
    if (q) this.JH.appendChild(this.aka);
    this.z_ = !1;
    this.k8.textContent = j;
  }
  bI.prototype = new kV();
  bI.prototype.UE = function () {
    return null;
  };
  bI.prototype.yb = function () {};
  bI.prototype.T = function () {
    var j = g$.get(this.name),
      q = !1,
      m = this.GM == 0 ? 22 : Math.round(2 + this.GM / 50);
    if (j.endsWith(" *")) {
      q = !0;
      j = j.slice(0, j.length - 2);
      m -= 2;
    }
    var n = j.length > m;
    this.k8.textContent = n ? j.slice(0, m - 2) : j;
    this.JH.setAttribute("title", j);
    if (n)
      for (var G = 0; G < 2; G++) {
        var W = J.m("span");
        W.textContent = j.charAt(m - 2 + G);
        J.F(W, "opacity:" + (0.6 - G * 0.4));
        this.k8.appendChild(W);
      }
    if (q) {
      var W = J.m("span");
      W.textContent = " *";
      this.k8.appendChild(W);
    }
    var k = j.split(" "),
      T = k.length == 2 ? k[0].substring(0, 2) + k[1][0] : j.substring(0, 3);
    if (T.charCodeAt(0) >= 11776) T = T.substring(0, 1);
    var b = this.aJM;
    if (b == null) this.Id.hk(T, j);
    else {
      var c;
      if (b.startsWith("---"))
        c =
          '<img src="' +
          PIMG[b.slice(3)] +
          '" class="autoscale gsicon" style="margin:2px 4px;"/>';
      else if (b.startsWith("==="))
        c =
          '<img src="' +
          b.slice(3) +
          '" class="autoscale gsicon" style="margin:2px 4px;"/>';
      else if (b.indexOf('"') == -1)
        c =
          '<img src="' +
          b +
          '" alt="' +
          J.TU(j).replace(/"/g, "&quot;") +
          '" height="18" width="18" loading="lazy" style="margin:1px 3px;" />';
      this.Id.hk(c, j);
    }
  };
  bI.prototype.enable = function () {
    this.nA.className = "pbody";
  };
  bI.prototype.disable = function () {
    this.nA.className = "pbody disabled";
  };
  bI.prototype.yp = function (j, q) {};
  bI.prototype.Wz = function (j, q, m) {};
  bI.prototype.XB = function (j) {};
  bI.prototype.X3 = function (j, q) {};
  bI.prototype.KX = function (j) {
    this.name = j;
    this.T();
  };
  bI.prototype.BN = function () {};
  bI.prototype.Jc = function (j) {
    if (j.button == 0) this.k(new fd("select", !1));
    if (j.button == 1) this.YO();
  };
  bI.prototype.aaA = function (j) {
    J.iO(j);
    var q = this.My != null && isNaN(this.My),
      m = J.QR(j, document.body),
      n = this.abU;
    if (n == null) {
      n = this.abU = new cG(
        q
          ? [{ name: "Uninstall Plugin" }]
          : [
              { name: [1, 12, 0] },
              { name: "Close All" },
              { name: "Close Others" },
            ]
      );
      this.abU.Q("select", this.apC, this);
    }
    n.update(null);
    n.T();
    n.parent = this;
    var G = new fd(_.E.c, !0);
    G.data = { R: _.Y.wQ, Tf: n, x: m.x + 1, y: m.y + 1 };
    this.k(G);
  };
  bI.prototype.YO = function () {
    if (this.My != null) {
      var j = new fd(_.E.c, !0);
      j.data = { R: _.Y.q4, Tf: this.abU };
      this.k(j);
      if (isNaN(this.My)) {
        j.data = { R: _.Y.fh, rw: fG.BG, ahw: this.VH.resID };
      } else {
        j.data = { R: _.Y.fh, rw: fG.lr, K: parseFloat(this.My), vt: "del" };
      }
      this.k(j);
    } else if (this.a5g()) this.k(new fd(_.E.bg, !1));
  };
  bI.prototype.a5g = function (j) {
    return !0;
  };
  bI.prototype.dt = function (j) {
    if (j.stopPropagation) j.stopPropagation();
    this.YO();
  };
  bI.prototype.apC = function (j) {
    var y = j.target.r9()[0];
    if (y == 0) this.YO();
    else {
      var q = new fd(_.E.bg, !1);
      q.data = y - 1;
      this.k(q);
    }
  };
  bI.prototype.oo = function (j, q, m, n, G) {};
  bI.prototype.C3 = function (j, q, m, n, G) {};
  bI.prototype.H_ = function (j, q, m, n, G) {};
  bI.va = function (j, q, m) {
    if (j.childElementCount != 0) return;
    var n = j.textContent;
    this.Cc = this.alN.bind(this);
    this.a18 = this.aAE.bind(this);
    this.m3 = q;
    this.aeV = m;
    this.KR = j;
    this.U0 = n;
    var G = J.m("input", "");
    G.setAttribute("type", "text");
    G.setAttribute("size", "10");
    G.setAttribute("value", n);
    J.dI(j);
    j.appendChild(G);
    G.select();
    G.focus();
    J.l3(j);
    j.addEventListener("keyup", this.Cc, !1);
    document.body.addEventListener("mousedown", this.a18, !1);
  };
  bI.va.prototype.alN = function (j) {
    var q = gn.Uw,
      m = q(j.code, gn.FP);
    if (q(j.code, gn.k9) || m) this.atX(m);
  };
  bI.va.prototype.aAE = function (j) {
    var q = j.target;
    if (q.tagName && q.tagName.toLowerCase() == "input") return;
    this.atX(!0);
  };
  bI.va.prototype.atX = function (j) {
    var q = this.KR,
      m = q.firstChild.value;
    q.removeEventListener("keyup", this.Cc);
    document.body.removeEventListener("mousedown", this.a18);
    if (this.aeV || (j && m != "" && m != this.U0)) {
      this.m3(m);
    } else {
      J.dI(q);
      q.textContent = this.U0;
    }
  };
  bI.o2 = function () {
    var j = [0, 1, 2, 3, 5, 6, 7, 9, 10, 16, 17, 100];
    if (ei == 1) j.push(28);
    return j;
  };
  bI.aaV = function (j) {
    var q = bI.o2(),
      m = [];
    for (var y = 0; y < j.length; y++) if (q.indexOf(j[y]) == -1) m.push(j[y]);
    for (var y = 0; y < q.length; y++) if (j.indexOf(q[y]) == -1) m.push(-q[y]);
    return m;
  };
  bI.aoY = function (j) {
    var q = bI.o2();
    for (var y = 0; y < j.length; y++) {
      var m = j[y],
        n = q.indexOf(m);
      if (n == -1) n = q.indexOf(-m);
      if (0 <= m && n == -1) q.push(m);
      if (m < 0 && n != -1) q.splice(n, 1);
      if (m == 0 && n != -1) q.splice(n, 1);
    }
    return q;
  };
  bI.Fb = {
    cJ: "0",
    aiE: "1",
    W1: "2",
    acb: "3",
    ame: "4",
    Hy: "5",
    CSS: "6",
    cS: "7",
    a2V: "8",
    aGy: "9",
    aI7: "10",
    aDl: "11",
    a0d: "12",
    Ru: "13",
    D$: "14",
    adT: "15",
    a4L: "16",
    yt: "17",
    ahX: "18",
    alB: "19",
    aq2: "20",
    S0: "21",
    alX: "22",
    a23: "23",
    ayq: "24",
    asD: "25",
    a3Z: "26",
    amP: "27",
    T4: "28",
  };
  function ft() {
    bI.call(this, [9, 9], !1, "---panels/actions", bI.Fb.aDl);
    this.a = null;
    this.kV = [0, 0];
  }
  ft.prototype = new bI("");
  ft.prototype.No = function () {
    if (!J.JO(this.nA)) return;
    if (this.tT) {
      this.ip();
      return;
    }
    this.tT = J.m("div", "padded scrollable");
    J.F(this.tT, "width:260px;  height:260px");
    this.nA.appendChild(this.tT);
    this.Q(_.E.n, this.OI, this);
    this.Mv = J.m("div", "lpfoot");
    this.nA.appendChild(this.Mv);
    this.JA = [];
    var j =
        '<svg  class="miniscale gsicon" viewBox="0 0 15 15" width="15" height="15" fill="black">',
      q = "</svg>",
      m =
        j +
        '<path d="M14,6 L10,6 L10,0 L4,0 L4,6 L0,6 L7,13 L14,6 L14,6 Z M0,14 L0,16 L14,16 L14,14 Z" />' +
        q,
      n = j + '<path d="M0,0 L15,7.5 L0,15 Z" />' + q;
    this.aF3 = j + '<circle cx="7.5" cy="7.5" r="7.5" />' + q;
    this.au7 = j + '<path d="M1,1 L14,1 L14,14 L1,14 Z" />' + q;
    var G = [this.aF3, n, "lrs/folder", "lrs/newlayer", "lrs/bin", m],
      W = [
        [15, 8, 0],
        [5, 8],
        [15, 8, 1],
        [15, 8, 2],
        [5, 4],
        [1, 2],
      ];
    for (var y = 0; y < G.length; y++) {
      var k = G[y];
      if (1 < y && y != G.length - 1)
        k = '<img src="' + PIMG[G[y]] + '" class="miniscale gsicon" />';
      var T = new kv(k, !1, W[y]);
      T.Q("click", this.Gr, this);
      this.Mv.appendChild(T._);
      this.JA.push(T);
    }
    this.ip();
  };
  ft.prototype.T = function () {
    bI.prototype.T.call(this);
    if (this.tT == null) return;
    for (var y = 0; y < this.JA.length; y++) this.JA[y].T();
  };
  ft.prototype.Gr = function (j) {
    var y = this.JA.indexOf(j.currentTarget),
      q = this.kV,
      m = this.a,
      n = m.rq;
    if (y == 0) {
      var G,
        W = m.qZ;
      if (n.length == 0) {
        alert("Create an Action Set first.");
        return;
      }
      if (q.length < 2) {
        alert("Select a target action first.");
        return;
      }
      if (W == null) {
        G = this.au7;
        W = this.kV;
      } else {
        G = this.aF3;
        W = null;
      }
      this.JA[0].hk(G);
      m.qZ = W;
    } else if (y == 1) this.agC();
    else if (y == 2 || y == 3) {
      var k = { ER: "Action Set " + n.length, yJ: [], exp: !0 };
      if (y == 2 || n.length == 0) {
        q = [n.length];
        n.push(k);
      }
      if (y == 3) {
        var T = n[q[0]].yJ;
        q = [q[0], T.length];
        T.push({
          ER: "Action " + T.length,
          color: 0,
          yJ: [],
          asd: !1,
          shift: !1,
          exp: !0,
          Wy: T.length,
        });
      }
      this.kV = q;
      this.ip();
    } else if (y == 4) {
      var b;
      if (q.length == 1) b = n;
      else if (q.length == 2) b = n[q[0]].yJ;
      else b = n[q[0]].yJ[q[1]].yJ;
      var c = q.length - 1;
      b.splice(q[c], 1);
      if (b.length == 0) q.pop();
      else while (q[c] >= b.length) q[c]--;
      if (q.length == 0) q.push(0);
      this.ip();
    } else if (y == 5) {
      if (n.length == 0) {
        alert("No Actions Present.");
        return;
      }
      var a = new fd(_.E.c, !0);
      a.data = { R: _.Y.$e, ap2: fG.w, Lv: [q[0]] };
      this.k(a);
    }
  };
  ft.prototype.OI = function (j) {
    var q = this.a.rq,
      m = j.data.R,
      n = j.data.a7;
    if (m == "sel") this.kV = n;
    if (m == "fold") {
      if (n.length == 1) q[n[0]].exp = !q[n[0]].exp;
      else q[n[0]].yJ[n[1]].exp = !q[n[0]].yJ[n[1]].exp;
    }
    if (m == "enab") {
      var G = q[n[0]].yJ[n[1]].yJ[n[2]];
      G.f = !G.f;
    }
    if (m == "nchange") {
      if (n.length == 1) q[n[0]].ER = j.data.p6;
      else q[n[0]].yJ[n[1]].ER = j.data.p6;
    }
    this.ip();
  };
  ft.prototype.Wz = ft.prototype.BN = function () {
    this.No();
  };
  ft.prototype.yp = function (j, q) {
    this.a = j;
    if (this.tT == null) return;
    if (q == fG.w || q == fG.HN) this.ip();
  };
  ft.prototype.ip = function () {
    if (this.a == null) return;
    J.dI(this.tT);
    var j = this.a.rq;
    if (j.length == 0) return;
    var q = JSON.stringify(this.kV);
    for (var y = 0; y < j.length; y++) {
      var m = j[y],
        n = new ft.QA([y], q, m.exp, m.ER.split("=").pop());
      n.parent = this;
      this.tT.appendChild(n._);
      if (!m.exp) continue;
      for (var G = 0; G < m.yJ.length; G++) {
        var W = m.yJ[G],
          n = new ft.QA([y, G], q, W.exp, W.ER.split("=").pop());
        n.parent = this;
        this.tT.appendChild(n._);
        if (!W.exp) continue;
        for (var k = 0; k < W.yJ.length; k++) {
          var T = W.yJ[k],
            n = new ft.QA([y, G, k], q, null, g$.get(jw.agT(T)), T.f);
          n.parent = this;
          this.tT.appendChild(n._);
        }
      }
    }
  };
  ft.prototype.agC = function () {
    var j = this.a.rq,
      q = this.kV;
    if (j.length == 0) {
      alert("No Actions Present");
      return;
    }
    if (q.length == 1) {
      alert("Select an Action first");
      return;
    }
    if (this.a.qZ != null) {
      alert("You can not apply actions while recording actions");
      return;
    }
    if (q.length == 1) q.push(0);
    var m = j[q[0]],
      n = m.yJ[q[1]],
      G = new fd(_.E.c, !0);
    G.data = { R: _.Y.k0, eQ: [n.ER, m.ER] };
    this.k(G);
  };
  ft.QA = function (j, q, m, n, G) {
    kV.call(this);
    this.a7 = j;
    var W = this.a7.length - 1;
    this._ = J.m(
      "div",
      "layeritem" + (JSON.stringify(j) == q ? " selected" : "")
    );
    this.lM = J.m("div", "head");
    this._.appendChild(this.lM);
    J.F(this.lM, "height:24px");
    this.Cm = J.m("div", "headL");
    this.lM.appendChild(this.Cm);
    if (W != 0) {
      var k = J.m("div");
      k.style.width = W * 20 + "px";
      this.Cm.appendChild(k);
    }
    if (m != null) {
      var T = (this.aIG = J.m("div", m ? "open" : "closed"));
      this.Cm.appendChild(T);
    } else {
      var b = (this.avd = J.m("div", "cmark"));
      J.F(b, "background-size:12px 12px; opacity:" + (G ? 1 : 0.3));
      this.Cm.appendChild(b);
    }
    if (W == 0) {
      var c = J.m("div", "folder");
      this.Cm.appendChild(c);
    }
    var a = (this.k8 = J.m("div", "label"));
    a.textContent = n;
    this.Cm.appendChild(a);
    this._.addEventListener("mouseup", this.SN.bind(this), !1);
  };
  ft.QA.prototype = new kV();
  ft.QA.prototype.SN = function (j) {
    if (j.detail == 1 && j.target.tagName.toLowerCase() != "input") {
      var q = "sel";
      if (j.target == this.aIG) q = "fold";
      if (j.target == this.avd) q = "enab";
      var m = new fd(_.E.n, !0);
      m.data = { R: q, a7: this.a7 };
      this.k(m);
    } else if (this.a7.length < 3)
      var n = new bI.va(this.k8, this.m3.bind(this));
  };
  ft.QA.prototype.m3 = function (j) {
    var q = new fd(_.E.n, !0);
    q.data = { R: "nchange", p6: j, a7: this.a7 };
    this.k(q);
  };
  function cb() {
    bI.call(this, [3], !1, "---lrs/adj", bI.Fb.ahX);
  }
  cb.prototype = new bI("");
  cb.prototype.No = function () {
    if (!J.JO(this.nA) || this.JA) return;
    J.F(this.nA, "text-align:center;  padding:6px; min-width:220px");
    this.JA = [];
    var y = 0;
    for (var j in eV.names) {
      var q = new kv(
        '<img src="' +
          PIMG["adj/" + j] +
          '" class="autoscale gsicon" style="margin:4px 4px;"/>',
        !1,
        eV.names[j]
      );
      q.Q("click", this.IS, this);
      this.JA.push(q);
      this.nA.appendChild(q._);
      if (y == 4 || y == 10) J.Ft(this.nA);
      y++;
    }
    this.T();
  };
  cb.prototype.Wz = function () {
    this.No();
  };
  cb.prototype.BN = function () {
    this.No();
  };
  cb.prototype.T = function () {
    bI.prototype.T.call(this);
    if (this.JA == null) return;
    for (var y = 0; y < this.JA.length; y++) this.JA[y].T();
  };
  cb.prototype.IS = function (j) {
    var q = this.JA.indexOf(j.target),
      m = fr.Mp()[q],
      n = new fd(m.p, !0);
    n.data = m.d;
    this.k(n);
  };
  function gU() {
    bI.call(this, [12, 22], !1, null, bI.Fb.S0);
    this.tT = J.m("div", "padded");
    this.a = null;
    this.nA.appendChild(this.tT);
    this.ov = new dm(null, 17.7, 10);
    this.ov.parent = this;
    this.ov.Q(_.E.n, this.v2, this);
    this.tT.appendChild(this.ov.jY);
  }
  gU.prototype = new bI("");
  gU.prototype.v2 = function (j) {
    var q = this.ov.V(),
      m = new fd(_.E.w, !0);
    m.data = { R: "setstl", K: q.yL };
    m.l = L.EJ;
    this.k(m);
    m.data = { R: "confirm" };
    this.k(m);
  };
  gU.prototype.yp = function (j, q) {
    this.a = j;
    if (j == null) return;
    if (q == fG.HN || q == fG.S0) {
      this.ov.j3([j.RU, j.wP]);
      this.ov.X3();
    }
  };
  gU.prototype.ip = function () {
    this.ov.c2();
  };
  gU.prototype.Wz = function () {
    this.ip();
  };
  gU.prototype.BN = function () {
    this.ip();
  };
  var a2 = (function () {
    function j() {
      bI.call(this, [9, 3], !1, "---panels/brush", bI.Fb.cS);
      this.YP = null;
      this.a = null;
    }
    j.prototype = new bI("");
    j.prototype.No = function () {
      var G = J.m("div", "");
      this.nA.appendChild(G);
      this.AT = J.m("div", "bordered cell");
      J.F(this.AT, "width:10em; height:28.5em;");
      G.appendChild(this.AT);
      this.Ha = [];
      this.aF4 = null;
      this.jZ = [];
      var W = this.a7u.bind(this);
      this.z6 = [
        new m("basic"),
        new m("useTipDynamics"),
        new m("useScatter"),
        new m("useColorDynamics"),
        new m("usePaintDynamics"),
      ];
      for (var y = 0; y < this.z6.length; y++) {
        var k = J.m("div", "listitem"),
          T = this.z6[y],
          c = null;
        T.parent = this;
        T.Q("brushchange", this.a7A, this);
        var b = T.Ps;
        if (y == 0) {
          this.aF4 = new aD(b);
          k.appendChild(this.aF4._);
        } else {
          c = new av(b, !1);
          c.Q(_.E.n, this.agf, this);
          k.appendChild(c._);
        }
        this.jZ.push(c);
        this.AT.appendChild(k);
        this.Ha.push(k);
        k.addEventListener("click", W, !1);
      }
      this.oQ = J.m("div", "cell padded");
      G.appendChild(this.oQ);
      this.setItem(0);
      this.Bl = J.m("canvas");
      this.Bl.height = 10;
      G.appendChild(this.Bl);
      this.lB = this.Bl.getContext("2d");
      this.FE();
    };
    j.prototype.X3 = function (G, W) {
      if (this.GM == G) return;
      this.GM = G;
      this.uu = W;
      this.FE();
    };
    j.prototype.BN = function () {
      if (!J.JO(this.nA)) return;
      if (this.AT) {
        this.FE();
        return;
      }
      this.No();
      this.T();
      this.yp(this.a, fG.HN);
    };
    j.prototype.T = function () {
      bI.prototype.T.call(this);
      if (this.AT == null) return;
      this.aF4.T();
      for (var y = 1; y < this.jZ.length; y++) this.jZ[y].T();
      for (var y = 0; y < this.z6.length; y++) this.z6[y].T();
    };
    j.prototype.a7A = function (G) {
      var W = this.z6.indexOf(G.currentTarget),
        k = B.S(this.z6[W].YP),
        T = new fd(_.E.c, !0);
      T.data = { R: _.Y.fh, rw: fG.ww, YP: k };
      this.k(T);
    };
    j.prototype.agf = function (G) {
      this.aEu(this.jZ.indexOf(G.currentTarget), G.currentTarget.sM());
    };
    j.prototype.a7u = function (G) {
      var y = this.Ha.indexOf(G.currentTarget);
      if (G.target.tagName.toLowerCase() == "input") return;
      if (this.jZ[y] && !this.jZ[y].sM()) {
        this.jZ[y].mb();
        this.aEu(y, !0);
      }
      this.setItem(y);
    };
    j.prototype.aEu = function (G, W) {
      this.z6[G].ayC(W);
    };
    j.prototype.setItem = function (G) {
      for (var y = 0; y < this.z6.length; y++)
        this.Ha[y].className = "listitem";
      if (this.oQ.firstChild) this.oQ.removeChild(this.oQ.firstChild);
      this.Ha[G].className = "listitem selected";
      this.oQ.appendChild(this.z6[G]._);
    };
    j.prototype.yp = function (G, W) {
      this.a = G;
      if (this.AT == null) return;
      for (var y = 0; y < this.z6.length; y++) this.z6[y].yp(G, W);
      if (W == fG.ww || W == fG.HN) {
        this.YP = G.AU.Kw;
        this.FE();
      }
      if (W == fG.Ru) this.FE();
    };
    j.prototype.FE = function () {
      if (this.YP) this.enable();
      else {
        this.disable();
        return;
      }
      if (!J.JO(this.nA)) return;
      var G = this.a;
      for (var y = 0; y < this.z6.length; y++) {
        this.z6[y].q(this.YP);
        if (this.jZ[y]) this.jZ[y].q(this.z6[y].sM());
      }
      var W = B.S(this.YP);
      W.Brsh.v.Dmtr.v.val = Math.min(W.Brsh.v.Dmtr.v.val, 50);
      J.Q0(this.Bl, this.GM, 80);
      var k = new hk(0, 0, this.Bl.width, this.Bl.height),
        T = this.a.AU,
        b = new e4(
          W,
          T ? T.cd : null,
          T ? T.cs : null,
          { rv: 1 },
          G.UP,
          G.vH,
          k,
          null,
          0
        ),
        c = k.$ / 2,
        a = k.r - c * 2;
      b.moveTo(c, c);
      for (var y = 0; y <= a; y += 10)
        b.lineTo(c + y, c + 20 * Math.sin((2 * Math.PI * y) / a));
      b.finish();
      var f = new ImageData(k.r, k.$);
      B.M4(b.qX(), b.Fj(), f.data, k);
      this.lB.putImageData(f, 0, 0);
    };
    function q(G) {
      kV.call(this);
      G = G.split(".")[0];
      this.NA = G;
      var W = (this._ = J.m("span")),
        k = ["Off", "Fade"];
      k.push(G == "angleDynamics" ? "Direction" : "Pen Pressure");
      var T = (this.QK = new f1("Control", k));
      T.Q(_.E.n, this.tS, this);
      W.appendChild(T._);
      var b = (this.atG = new k7(null, 0, 100, null, null, null, !0));
      b.q(50);
      b.Q(_.E.n, this.tS, this);
    }
    q.prototype = new kV();
    q.prototype.q = function (G) {
      G = G < 2 ? G : 2;
      this.QK.q(G);
      this.ip();
    };
    q.prototype.V = function () {
      var G = this.QK.V(),
        W = this.NA;
      G = G <= 1 ? G : W == "angleDynamics" ? 6 : 2;
      return G;
    };
    q.prototype.tS = function (G) {
      this.ip();
      G.target = G.currentTarget = this;
      this.k(G);
    };
    q.prototype.ip = function (G) {
      this.atG.yl(this.QK.V() == 1);
    };
    function m(G) {
      kV.call(this);
      this._ = J.m("div");
      this.YP = null;
      var W = [
        "basic",
        "useTipDynamics",
        "useScatter",
        "useColorDynamics",
        "usePaintDynamics",
      ].indexOf(G);
      this.Ps = [[15, 0], [15, 1], [15, 2], [15, 3], "Transfer"][W];
      this.Dm = G;
      this.Vc = {};
      this.atQ = null;
      var k = [
        "--br Brsh.Dmtr Brsh.Angl Brsh.Rndn Brsh.Hrdn Brsh.Spcn".split(" "),
        "szVr.jitter szVr.bVTy szVr.fStp minimumDiameter angleDynamics.jitter angleDynamics.bVTy angleDynamics.fStp roundnessDynamics.jitter minimumRoundness".split(
          " "
        ),
        ["scatterDynamics.jitter", "Cnt", "countDynamics.jitter"],
        ["colorDynamicsPerTip", "clVr.jitter", "H", "Strt", "Brgh"],
        "opVr.jitter opVr.bVTy opVr.fStp prVr.jitter prVr.bVTy prVr.fStp".split(
          " "
        ),
      ][W];
      for (var y = 0; y < k.length; y++) {
        var T = k[y],
          b;
        if (T == "--br") {
          b = new bo();
          this._.appendChild(b.jY.firstChild);
        } else if (T == "Brsh.Dmtr")
          b = new ho([12, 14, 0], 1, 1e3, " px", 0, !0);
        else if (T == "Brsh.Angl") b = new ho([12, 15], 0, 359, " \xB0");
        else if (T == "Brsh.Rndn") b = new ho([12, 16], 0, 100, " %");
        else if (T == "Brsh.Hrdn") b = new ho([12, 17], 0, 100, " %");
        else if (T == "Brsh.Spcn") b = new ho([12, 18], 1, 300, " %");
        else if (T == "szVr.jitter") b = new ho([15, 4, 0], 0, 100, "%");
        else if (T == "minimumDiameter") b = new ho([15, 4, 1], 0, 100, "%");
        else if (T == "angleDynamics.jitter")
          b = new ho([15, 4, 2], 0, 100, "%");
        else if (T.endsWith("bVTy")) b = new q(T);
        else if (T.endsWith("fStp"))
          b = new k7(null, 0, 100, null, null, null, !0);
        else if (T == "roundnessDynamics.jitter")
          b = new ho([15, 4, 3], 0, 100, "%");
        else if (T == "minimumRoundness") b = new ho([15, 4, 4], 1, 100, "%");
        else if (T == "scatterDynamics.jitter")
          b = new ho([15, 5, 0], 0, 1e3, " %");
        else if (T == "Cnt") b = new ho([15, 5, 1], 1, 20);
        else if (T == "countDynamics.jitter")
          b = new ho([15, 5, 2], 0, 100, " %");
        else if (T == "clVr.jitter") b = new ho([15, 6, 0], 0, 100, " %");
        else if (T == "H") b = new ho([15, 6, 1], 0, 100, " %");
        else if (T == "Strt") b = new ho([15, 6, 2], 0, 100, " %");
        else if (T == "Brgh") b = new ho([15, 6, 3], 0, 100, " %");
        else if (T == "opVr.jitter") b = new ho("Opacity Jitter", 0, 100, " %");
        else if (T == "prVr.jitter") b = new ho("Flow Jitter", 0, 100, " %");
        else if (T == "colorDynamicsPerTip") b = new av("Apply Per Tip");
        else throw T;
        this.Vc[T] = b;
        b.parent = this;
        b.Q(_.E.n, this.tS, this);
      }
    }
    m.prototype = new kV();
    m.prototype.azJ = function () {
      this.k(new fd("brushchange"));
    };
    m.prototype.q = function (G) {
      this.YP = B.S(G);
      this._.className = this.sM() ? "" : "disabled";
      this.FE();
    };
    m.prototype.T = function () {
      for (var G in this.Vc) this.Vc[G].T();
    };
    m.prototype.sM = function () {
      return !0;
    };
    m.prototype.yp = function (G, W) {
      if (W == fG.cS || W == fG.HN) {
        var k = this.Vc["--br"];
        if (k) k.j3(G.AU);
      }
    };
    m.prototype.tS = function (G) {
      var W = G.target,
        k = this.Vc,
        T;
      for (var b in k) if (k[b] == W) T = b;
      if (T == "--br") {
        var c = new fd(_.E.c, !0);
        c.data = { R: _.Y.fh, rw: fG.ww, YP: W.V() };
        this.k(c);
      } else {
        var a = n(this.YP, T),
          f = W.V();
        if (a) {
          if (T.endsWith("bVTy") || T.endsWith("fStp") || T == "Cnt") a.v = f;
          else if (T == "colorDynamicsPerTip") a.v = f;
          else a.v.val = f;
          this.azJ();
        }
      }
    };
    m.prototype.FE = function () {
      var G = this.YP,
        W = G.Brsh.v.classID,
        k = this.Vc,
        T = W != this.atQ;
      this.atQ = W;
      if (T) {
        J.dI(this._);
        for (var b in k) {
          if (W != "computedBrush" && W != "sampledBrush" && b == "Brsh.Rndn")
            continue;
          if (W != "computedBrush" && b == "Brsh.Hrdn") continue;
          var c = k[b],
            a = c._;
          if (b == "--br") {
            a = c.Op._;
            a.style.width = "auto";
          }
          this._.appendChild(a);
        }
      }
      for (var b in k) {
        if (b == "--br") continue;
        var f = n(G, b),
          U;
        if (f) {
          if (b.endsWith("bVTy") || b.endsWith("fStp") || b == "Cnt") U = f.v;
          else if (b == "colorDynamicsPerTip") U = f.v;
          else U = f.v.val;
          k[b].q(U);
          if (b.endsWith("fStp"))
            k[b].yl(n(G, b.split(".")[0] + ".bVTy").v == 1);
        }
      }
    };
    m.prototype.sM = function () {
      var G = this.Dm;
      return G == "basic" ? !0 : this.YP[G].v;
    };
    m.prototype.ayC = function (G) {
      var W = this.Dm;
      if (W == "basic") return;
      this.YP[W].v = G;
      fc.nD.a2k(this.YP);
      this.azJ();
    };
    function n(G, W) {
      var k = W.split(".");
      G = G[k[0]];
      for (var y = 1; y < k.length; y++) {
        if (G == null) return G;
        G = G.v[k[y]];
      }
      return G;
    }
    return j;
  })();
  function eG() {
    bI.call(this, [9, 0], !1, "---panels/history", bI.Fb.cJ);
    J.F(this.nA, "min-width:200px;");
    this.gj = J.m("div", "hpbody scrollable");
    this.gj.style.height = "160px";
    this.nA.appendChild(this.gj);
    this.abT = -1;
    this.akH = [];
    this.Ez = "";
    this.aK = new cG(
      [{ name: "Clear History" }],
      [{ p: _.E.w, l: L.cJ, d: { R: "h_clear" } }]
    );
  }
  eG.prototype = new bI("");
  eG.prototype.UE = function () {
    return this.aK;
  };
  eG.prototype.X3 = function (j, q) {
    this.BN();
  };
  eG.prototype.Wz = function (j) {
    if (j == null) {
      J.dI(this.gj);
      this.Ez = "";
      return;
    }
    J.dI(this.gj);
    var q = 0;
    for (var y = 0; y < j.history.length; y++)
      if (y <= j.d6 && !j.history[y].aoz) q = y;
    for (var y = 0; y < j.history.length; y++) {
      var m = j.history[y];
      if (m.aoz) continue;
      var n = new ka(m, y, q);
      n.parent = this;
      this.gj.appendChild(n._);
      this.akH.push(n);
    }
    if (j.d6 == j.history.length - 1) this.BN();
  };
  eG.prototype.BN = function () {
    this.gj.scrollTop = this.gj.scrollHeight;
  };
  eG.prototype.T = function () {
    bI.prototype.T.call(this);
    for (var y = 0; y < this.akH.length; y++) this.akH[y].T();
  };
  function ka(j, y, q) {
    kV.call(this);
    this.index = y;
    this._ = J.m("div", y == q ? "listitem selected" : "listitem");
    this.xn = j.name;
    this.T();
    if (y > q) this._.style.opacity = 0.4;
    this._.addEventListener("click", this.oo.bind(this), !1);
  }
  ka.prototype = new kV();
  ka.prototype.T = function () {
    this._.textContent = g$.get(this.xn);
  };
  ka.prototype.oo = function (j) {
    if (this.index == this.parent.abT) return;
    this.lD({ R: "h_itemchange", index: this.index });
  };
  ka.prototype.lD = function (j) {
    var q = new fd(_.E.w, !0);
    q.data = j;
    q.l = L.cJ;
    this.k(q);
  };
  function ej() {
    bI.call(this, [9, 10], !1, "---panels/histogram", bI.Fb.ame);
    var j = J.m("div", "padded");
    this.nA.appendChild(j);
    this.UJ = new j3(256, !0);
    j.appendChild(this.UJ._);
    this.I7 = null;
  }
  ej.prototype = new bI("");
  ej.prototype.Wz = function (j) {
    this.I7 = j;
    this.ip();
  };
  ej.prototype.ip = function () {
    var j = this.I7;
    if (!J.JO(this.nA)) return;
    if (j == null || j.J.length == 0) {
      this.UJ.q(B.OA(B.j(4)));
      return;
    }
    var q = j.ht(),
      m = new hk(0, 0, j.r, j.$),
      n = m.C();
    if (j.h) {
      var G = j.h.H,
        W = B.j(G.C() * 4);
      B.M4(q, m, W, G);
      B.w6(j.h.N, W);
      q = W;
      m = G;
      var k = j.h.N;
      n = 0;
      for (var y = 0; y < k.length; y++) n += k[y];
      n = Math.round(n / 255);
    }
    var T = B.OA(q);
    T[0][255] += 3 * (n - T[5]);
    for (var y = 1; y < 4; y++) T[y][255] += n - T[5];
    this.UJ.q(T, n);
  };
  ej.prototype.yp = function (j, q) {
    this.UJ.kK(cW.LC[j.U6]["--text-color"]);
  };
  ej.prototype.T = function () {
    bI.prototype.T.call(this);
    this.UJ.T();
  };
  ej.prototype.BN = function () {
    this.ip();
  };
  function dQ() {
    bI.call(this, [9, 8], !1, "---adj/clrL", bI.Fb.aiE);
    this.tT = J.m("div", "padded");
    this.nA.appendChild(this.tT);
    this._f = new j9(10);
    this.tT.appendChild(this._f._);
    this.JJ = new iN();
    this.JJ.parent = this;
    this.tT.appendChild(this.JJ.jY);
    this.JJ.jY.style.marginTop = "6px";
    this._f.Q(_.E.n, this.aHJ, this);
    this.JJ.Q(_.E.n, this.aHJ, this);
    dQ.tT = this;
  }
  dQ.prototype = new bI("");
  dQ.prototype.aLT = function (j) {
    this.JJ.Op.q(j);
  };
  dQ.prototype.aHJ = function (j) {
    var q;
    if (j.target == this._f) q = this._f.V();
    else {
      var m = this.JJ.V();
      q = B.yH(m);
    }
    var n = new fd(_.E.c, !0);
    n.data = { R: _.Y.fh, rw: fG.Ru, _G: 0, K: q };
    this.k(n);
  };
  dQ.n_ = function (j, q) {
    var m = q == fG.HN,
      n = j.MJ,
      G = j.pk,
      W = G.strokeStyleContent.v,
      k = null;
    if ((q == fG.Vx || m) && n.pb == 1) {
      k = B.MV.xH(n.pH.Clr.v);
      k = (k.o << 16) | (k.i << 8) | k.X;
    }
    if (
      (q == fG.lF || m) &&
      G.strokeEnabled.v &&
      W.classID == "solidColorLayer"
    ) {
      k = B.MV.xH(W.Clr.v);
      k = (k.o << 16) | (k.i << 8) | k.X;
    }
    if (q == fG.Ru || m) k = j.UP;
    return k;
  };
  dQ.prototype.yp = function (j, q) {
    var m = j.UP,
      n = q == fG.HN,
      G = dQ.n_(j, q);
    if (G != null) {
      this._f.q(G);
      this.JJ.q({
        o: (G >>> 16) & 255,
        i: (G >>> 8) & 255,
        X: (G >>> 0) & 255,
        NC: "Default/Color #" + B.bw(G),
      });
    }
    if (q == fG.Ns || n) {
      var W = j.ab6;
      this.JJ.j3(W);
    }
  };
  dQ.prototype.X3 = function (j, q) {
    this.JJ.jY.children[0].style.width = j - 32 + "px";
  };
  function lb() {
    bI.call(this, [12, 72], !1, "---adj/mixr", bI.Fb.a4L);
    this.K9 = null;
    this.fg = null;
    this.gj = J.m("div", "lpbody scrollable");
    this.gj.style.marginTop = "4px";
    this.Mv = J.m("div", "lpfoot");
    this.nA.appendChild(this.gj);
    this.nA.appendChild(this.Mv);
    this.aa$ = [];
    this.Q("click", this.VT, this);
    this.zi = [];
    lb.MZ(
      [[17, 2], "Save Selection as Channel", [5, 3], [5, 4]],
      this.zi,
      this.Mv,
      this.x0.bind(this),
      this.s5.bind(this)
    );
    this.aK = new cG(
      [{ name: "Merge Channels", QU: !0 }],
      [{ p: _.E.c, d: { R: _.Y.s0, kO: "mergechannels" } }]
    );
  }
  lb.prototype = new bI("");
  lb.prototype.UE = function () {
    return this.aK;
  };
  lb.MZ = function (j, q, m, n, G) {
    for (var y = 0; y < j.length; y++) {
      var W = new kv("W", !1, j[y]);
      q.push(W);
      J.PD(W._, n);
      m.appendChild(W._);
      var k = W._;
      k.addEventListener("drop", G, !1);
      k.addEventListener(
        "dragover",
        function (T) {
          T.preventDefault();
        },
        !1
      );
      k.addEventListener("dragenter", J.iO, !1);
    }
  };
  lb.xe = function (j, q) {
    for (var y = 0; y < j.length; y++) if (j[y]._ == q.currentTarget) return y;
  };
  lb.prototype.x0 = function (j) {
    var q = lb.xe(this.zi, j);
    if (q == 0) this.k(et.LB(!0, null, j));
    else {
      q--;
      var m = new fd(_.E.NI, !0),
        n = { classID: "null" };
      if (q == 0)
        n.null = {
          t: "obj ",
          v: [{ t: "prop", v: { classID: "Chnl", keyID: "fsel" } }],
        };
      else if (q == 1)
        n.Nw = {
          t: "Objc",
          v: {
            classID: "Chnl",
            ClrI: { t: "enum", v: { MskI: "SlcA" } },
            Opct: { t: "long", v: 50 },
          },
        };
      else n.null = jw.$W("Chnl", !0);
      m.data = { _D: ["duplicate", "make", "delete"][q], SC: n };
      this.k(m);
    }
  };
  lb.prototype.s5 = function (j) {
    var q = lb.xe(this.zi, j);
    if (q == 2) {
      var m = new fd(_.E.NI, !0),
        n = { classID: "null" };
      n.null = jw.$W("Chnl", !0);
      m.data = { _D: "duplicate", SC: n };
      this.k(m);
    } else this.x0(j);
  };
  lb.prototype.kr = function (y) {
    var j = this.aa$,
      q = j[y];
    if (q == null) {
      var m = J.m("canvas");
      q = m.getContext("2d");
      j.push(q);
    }
    return q;
  };
  lb.prototype.VT = function (j) {
    var q = this.K9.slice(0),
      m = j.data.Wy,
      n = q[0] + q[1] + q[2],
      G = this.fg;
    if (-5 < m && m < 0) {
      var W = -m - 1;
      if (j.data.E4) {
        if (W == 0) q = n == 3 ? [0, 0, 0] : [1, 1, 1];
        else {
          if (q[W - 1] == 0) q[W - 1] = 1;
          else if (!0) q[W - 1] = 0;
        }
      } else {
        if (W == 0) q = [1, 1, 1];
        else {
          q = [0, 0, 0];
          q[W - 1] = 1;
        }
        for (var y = 0; y < G._E.length; y++) G._E[y].Ea = !1;
        G.y2 = [];
      }
      var k = new fd(_.E.w, !0);
      k.l = L.C9;
      k.data = { R: "setcls", rO: q };
      this.k(k);
      return;
    }
    if (-1 < m) {
      var T = Math.floor(m),
        b = G.U[T],
        c = T == m ? b.ex() : b.xE(G).x7;
      if (j.data.E4) c.Ea = !c.Ea;
      else {
        b.ma = 1 + (T == m ? 0 : 2);
        for (var y = 0; y < G._E.length; y++) G._E[y].Ea = !1;
        G.y2 = [];
      }
    } else {
      var a = -m - 5,
        c = G._E[a];
      if (j.data.E4) c.Ea = !c.Ea;
      else {
        for (var y = 0; y < G._E.length; y++) G._E[y].Ea = !1;
        c.Ea = !0;
        G.y2 = [a];
        if (n != 0) {
          var k = new fd(_.E.w, !0);
          k.l = L.C9;
          k.data = { R: "setcls", rO: [0, 0, 0] };
          this.k(k);
        }
      }
    }
    G._F = G.Ls = !0;
  };
  lb.prototype.BN = function () {
    this.ll();
  };
  lb.prototype.Wz = function (j) {
    this.fg = j;
    this.ll();
  };
  lb.prototype.ll = function () {
    var j = this.fg,
      q = this.gj,
      Z = 4;
    J.dI(q);
    if (j == null || !J.JO(q)) return;
    var m = j.r,
      n = j.$,
      G = new hk(0, 0, m, n),
      W = (this.K9 = j.I.rO.slice(0)),
      k = W[0] + W[1] + W[2],
      T = Math.round(34 * J.IC()),
      b = T;
    if (m > n) b = Math.round((b * n) / m);
    else T = Math.round((T * m) / n);
    var c = ["RGB"].concat(eV.wc);
    for (var y = 0; y < 4; y++) {
      var a = this.kr(y);
      B._9.QW(a, T, b, G, j.ht(), G, !1, y == 0 ? null : y - 1);
      var f = y == 0 ? k == 3 : W[y - 1] == 1,
        U = new et(-1 - y, !0, !0, a, c[y], f, f);
      U.parent = this;
      q.appendChild(U._);
      J.Ku(a.canvas);
    }
    for (var y = 0; y < j.J.length; y++) {
      var h = j.U[j.J[y]],
        u = h.ma;
      for (var i = 0; i < 2; i++) {
        var x = i == 0 ? h.ex() : h.xE(j);
        if (x == null) continue;
        if (i == 1) x = x.x7;
        var a = this.kr(Z);
        Z++;
        B._9.Wa(a, T, b, G, x);
        var U = new et(
          j.J[y] + i * 0.5,
          !0,
          !0,
          a,
          h.getName() + (i == 0 ? "" : " Filter") + " Mask",
          (i == 0 && u == 1) || (i == 1 && u == 3),
          x.Ea
        );
        U.parent = this;
        q.appendChild(U._);
        J.Ku(a.canvas);
      }
    }
    for (var y = 0; y < j._E.length; y++) {
      var x = j._E[y],
        a = this.kr(Z + y);
      B._9.Wa(a, T, b, G, x);
      var U = new et(
        -5 - y,
        !0,
        x.name == "Quick Mask",
        a,
        x.name,
        j.y2.indexOf(y) != -1,
        x.Ea,
        L.W1,
        { R: R.z3, _G: "rnm", Wy: y }
      );
      U.parent = this;
      q.appendChild(U._);
      J.Ku(a.canvas);
    }
  };
  lb.prototype.X3 = function (j, q) {
    this.gj.style.height = q - 30 - 4 + "px";
    this.gj.style.width = j + "px";
  };
  lb.prototype.T = function () {
    bI.prototype.T.call(this);
    this.ll();
    lb.uX(this.zi, ["lrs/makesel", "lrs/mask", "lrs/newlayer", "lrs/bin"]);
  };
  lb.uX = function (j, q, m) {
    var q = gA.zs(q, null, "miniscale");
    for (var y = 0; y < j.length; y++) j[y].hk(q[y], m ? m[y] : null);
  };
  function et(j, q, m, n, G, W, k, T, b) {
    kV.call(this);
    this._ = J.m("div");
    this.ap9 = j;
    this.au5 = q;
    this.lB = n;
    this.ace = T;
    this.ajY = b;
    this.lM = J.m("div", W ? "head selected" : "head");
    J.F(this.lM, "height: " + 40 + "px");
    var c = J.m("div", "headL"),
      a = J.m("div", "headR"),
      f = 15;
    this._.appendChild(this.lM);
    this.lM.appendChild(c);
    this.lM.appendChild(a);
    this.Bz = J.m("div", "eye");
    if (1 < J.IC() && J.IC() < 1.5) f = f / J.IC();
    J.F(this.Bz, "background-size: " + f + "px " + f + "px;");
    this.Bz.style.opacity = k ? 1 : 0.2;
    if (q) c.appendChild(this.Bz);
    this.ey = J.m("div", "thumb");
    if (n) this.ey.appendChild(n.canvas);
    c.appendChild(this.ey);
    this.QX = J.m("div", "label");
    if (m) this.QX.style.fontStyle = "italic";
    this.QX.textContent = g$.get(G);
    c.appendChild(this.QX);
    var U = this.lM;
    U.setAttribute("draggable", "true");
    U.addEventListener(
      "dragstart",
      function (Z) {
        Z.stopPropagation();
        Z.dataTransfer.setData("Text", "hello");
      },
      !1
    );
    U.addEventListener("drop", J.iO, !1);
    J.PD(this.lM, this.aG6.bind(this));
    if (!m) this.lM.addEventListener("mouseup", this.ayY.bind(this), !1);
  }
  et.prototype = new kV();
  et.prototype.m3 = function (j) {
    var q = new fd(_.E.w, !0);
    q.l = this.ace;
    q.data = this.ajY;
    q.data.name = j;
    this.k(q);
  };
  et.prototype.aG6 = function (j) {
    var q = j.ctrlKey || j.metaKey,
      m = this.ap9;
    if (q && j.target == this.lB.canvas) {
      this.k(et.LB(this.au5, m, j));
    } else {
      var n = new fd("click", !0);
      n.data = { Wy: m, E4: j.target == this.Bz, mI: q };
      this.k(n);
    }
  };
  et.Ds = 0;
  et.prototype.ayY = function (j) {
    if (Date.now() - et.Ds < 300 && j.target == this.QX) {
      var q = new bI.va(this.QX, this.m3.bind(this));
    }
    et.Ds = Date.now();
  };
  et.LB = function (j, q, m) {
    var n = 0;
    if (m.shiftKey) n++;
    if (m.altKey) n += 2;
    var G = new fd(_.E.w, !0);
    G.l = L.ag;
    if (j) {
      var W = Math.floor(q);
      if (-5 < q && q < 0) {
        G = new fd(_.E.NI, !0);
        G.data = L.pI.j7(n, ["RGB", "Rd", "Grn", "Bl"][-1 - q]);
      } else if (q <= -5 || q == null)
        G.data = { R: "fromchannel", eQ: [q, 0, n] };
      else G.data = { R: "fromlayer", eQ: [W, 1 + (q == W ? 0 : 2), n] };
    } else G.data = { R: "frompath", eQ: [q, 0, n] };
    return G;
  };
  function cl() {
    bI.call(this, [8, 9], !1, "---panels/paths", bI.Fb.yt);
    this.K9 = null;
    this.fg = null;
    this.gj = J.m("div", "lpbody scrollable");
    this.gj.style.marginTop = "4px";
    this.Mv = J.m("div", "lpfoot");
    this.nA.appendChild(this.gj);
    this.nA.appendChild(this.Mv);
    this.nA.addEventListener("click", this.asO.bind(this), !1);
    this.aa$ = [];
    this.Q("click", this.VT, this);
    this.zi = [];
    lb.MZ(
      [
        "Fill Path",
        "Stroke Path with Brush",
        [17, 2],
        "Selection to Path",
        [5, 3],
        [5, 4],
      ],
      this.zi,
      this.Mv,
      this.x0.bind(this),
      this.s5.bind(this)
    );
  }
  cl.prototype = new bI("");
  cl.prototype.x0 = function (j, q) {
    var m = lb.xe(this.zi, j),
      n;
    if (m < 2) {
      if (m == 1 && j.altKey) {
        n = new fd(_.E.c, !0);
        n.data = { R: _.Y.s0, kO: "strokepath" };
      } else {
        n = new fd(_.E.NI, !0);
        n.data = L.Qc.Rr(m == 0 ? null : "PbTl");
      }
    } else if (m == 2) n = et.LB(!1, null, j);
    else if (m == 3) {
      n = new fd(_.E.NI, !0);
      n.data = L.pI.aiC();
    } else if (m > 3) {
      var n = new fd(_.E.w, !0);
      n.l = L.Nj;
      n.data = { R: "pathedit", _G: ["new", "del"][m - 4], adN: q };
    }
    this.k(n);
  };
  cl.prototype.s5 = function (j) {
    this.x0(j, !0);
  };
  cl.prototype.kr = function (y) {
    var j = this.aa$,
      q = j[y];
    if (q == null) {
      var m = J.m("canvas");
      q = m.getContext("2d");
      j.push(q);
    }
    return q;
  };
  cl.prototype.asO = function (j) {
    if (j.target == this.gj) {
      var q = this.fg;
      q.bR = [];
      q.H7 = [];
      q.Ls = !0;
      q._F = !0;
    }
  };
  cl.prototype.VT = function (j) {
    var q = j.data.Wy,
      m = this.fg,
      n = j.data.mI,
      G = q,
      W = m.H7,
      k = m.bR;
    if (q < 0) {
      G = -1 - q;
      W = m.bR;
      k = m.H7;
    }
    if (n) {
      var T = W.indexOf(G);
      if (T == -1) W.push(G);
      else W.splice(T, 1);
    } else {
      while (W.length != 0) W.pop();
      while (k.length != 0) k.pop();
      W.push(G);
    }
    m.Ls = !0;
    m._F = !0;
  };
  cl.prototype.BN = function () {
    this.ll();
  };
  cl.prototype.Wz = function (j) {
    this.fg = j;
    this.ll();
  };
  cl.prototype.ll = function () {
    var j = this.fg,
      q = this.gj;
    J.dI(q);
    if (j == null || !J.JO(q)) return;
    var m = j.r,
      n = j.$,
      G = new hk(0, 0, m, n),
      W = (this.K9 = j.I.rO.slice(0)),
      k = W[0] + W[1] + W[2],
      T = Math.round(34 * J.IC()),
      b = T;
    if (m > n) b = Math.round((b * n) / m);
    else T = Math.round((T * m) / n);
    var c = j.ac(),
      a = c[0];
    for (var y = 0; y < a.length; y++) {
      var f = a[y],
        U = j.PU != -1 && j.PU == -1 - f.Wy,
        Z = this.kr(y);
      B._9.aoy(Z, T, b, G, f.add.vmsk, U);
      var h = new et(
        f.Wy,
        !1,
        f.Wy >= 0 || U,
        Z,
        f.name,
        c[1].indexOf(y) != -1,
        !1,
        L.Nj,
        { R: "pathedit", _G: "rnm", Wy: f.Wy }
      );
      h.parent = this;
      q.appendChild(h._);
      J.Ku(Z.canvas);
    }
  };
  cl.prototype.X3 = function (j, q) {
    this.gj.style.height = q - 30 - 4 + "px";
    this.gj.style.width = j + "px";
  };
  cl.prototype.T = function () {
    bI.prototype.T.call(this);
    this.ll();
    lb.uX(
      this.zi,
      "-\u2B24 -\u25EF lrs/makesel lrs/makepath lrs/newlayer lrs/bin".split(" ")
    );
  };
  function dG(j) {
    bI.call(
      this,
      [9, j ? 4 : 5],
      !1,
      "---panels/" + (j ? "character" : "paragraph"),
      j ? bI.Fb.aGy : bI.Fb.aI7
    );
    J.F(this.nA, "min-width:255px;");
    this.a25 = j;
    this.a = null;
    this.QS = !1;
  }
  dG.prototype = new bI("");
  dG.P8 = null;
  dG.prototype.No = function () {
    var j = dG.P8,
      q = this.nA;
    if (j == null) j = dG.P8 = new ci();
    j.parent = this;
    this.QS = !0;
    if (this.a25) {
      var m = J.m("div", "marged");
      q.appendChild(m);
      m.appendChild(j.Oz._);
      m.appendChild(j.e3);
      J.c$(q);
      var n = J.m("div", "marged");
      q.appendChild(n);
      n.appendChild(j.jc._);
      n.appendChild(j.B$._);
      var G = J.m("div", "marged");
      q.appendChild(G);
      G.appendChild(j.Fm._);
      G.appendChild(j._B._);
      J.c$(q);
      var W = J.m("div", "marged");
      q.appendChild(W);
      W.appendChild(j.X1._);
      W.appendChild(j.n4._);
      var k = J.m("div", "marged");
      q.appendChild(k);
      k.appendChild(j.wz._);
      k.appendChild(j.Bw._);
      k.appendChild(j.M0._);
      J.c$(q);
      var T = J.m("div", "marged");
      q.appendChild(T);
      T.appendChild(j.Ay._);
      T.appendChild(j.si._);
      T.appendChild(j.CT._);
      T.appendChild(j.gc._);
      T.appendChild(j.lk._);
      T.appendChild(j.c0._);
      T.appendChild(j.qr._);
      T.appendChild(j.MR._);
      var b = J.m("div", "marged");
      q.appendChild(b);
      for (var y = 0; y < 8; y++) b.appendChild(j.ls[y]._);
      J.c$(q);
      var c = J.m("div", "marged");
      q.appendChild(c);
      c.appendChild(j.zL._);
    } else {
      var m = J.m("div", "marged");
      q.appendChild(m);
      m.appendChild(j.asv._);
      m.appendChild(j.aHX._);
      m.appendChild(j.ai4._);
      m.appendChild(j.aJW._);
      m.appendChild(j.awa._);
      m.appendChild(j.aoh._);
      m.appendChild(j.ab8._);
      J.c$(q);
      var n = J.m("div", "marged");
      q.appendChild(n);
      n.appendChild(j.LE._);
      n.appendChild(j.Ou._);
      n.appendChild(j.Aq._);
      J.c$(q);
      var G = J.m("div", "marged");
      q.appendChild(G);
      G.appendChild(j.RA._);
      G.appendChild(j.a3._);
      G.appendChild(j.Q4._);
      G.appendChild(j.bz._);
    }
  };
  dG.prototype.BN = function () {
    if (!J.JO(this.nA)) return;
    if (!this.QS) {
      this.No();
      var j = this.a;
      if (j) dG.P8.q(j.Cw, j.HS, j.YL);
      dG.P8.T();
    }
  };
  dG.prototype.T = function () {
    bI.prototype.T.call(this);
    if (dG.P8) dG.P8.T();
  };
  dG.prototype.yp = function (j, q) {
    this.a = j;
    if (q != fG.HN && q != fG.R3 && q != fG.uk && q != fG.Hp) return;
    if (dG.P8) dG.P8.q(j.Cw, j.HS, j.YL);
  };
  function hd(j) {
    bI.call(
      this,
      j ? "Character Styles" : "Paragraph Styles",
      !1,
      null,
      j ? bI.Fb.ayq : bI.Fb.asD
    );
    J.F(this.nA, "min-width:240px;");
    var q = (this.ST = J.m("div", "scrollable"));
    this.nA.appendChild(q);
    J.F(q, "max-height:400px;");
    this.nC = null;
    this.a3h = null;
    this.Mh = null;
    this.a25 = j ? 0 : 1;
    this.I7 = null;
    this.a = null;
    this.aMa = hd.prototype.cU.bind(this);
  }
  hd.prototype = new bI("");
  hd.prototype.Wz = function (j, q, m) {
    this.I7 = j;
    this.a = m;
    this.ll();
  };
  hd.prototype.ll = function () {
    var j = this.ST;
    J.dI(j);
    if (!J.JO(this.nA)) return;
    var q = this.I7,
      m = this.a;
    if (q == null || m == null) return;
    var n = m.Cw,
      G = (this.nC = []),
      W = {},
      k = (this.a3h = []),
      T = (this.Mh = []),
      b = {},
      c = this.a25,
      a = c == 0 ? "Style" : "Paragraph";
    for (var y = 0; y < q.U.length; y++) {
      var f = q.U[y].add.TySh;
      if (f == null) continue;
      var U = f.s3,
        Z = f.u.Dc(),
        h = U.ResourceDict.FontSet,
        u = U.EngineDict[a + "Run"],
        i = u.RunArray;
      for (var x = 0; x < i.length; x++) {
        var X = hd.ago(
          i[x][a + "Sheet"][c == 0 ? "StyleSheetData" : "Properties"],
          c,
          h,
          k,
          b,
          Z
        );
        if (X.FillColor == null)
          X.FillColor = { Type: 1, Values: [1, 0, 0, 0] };
        var $ = JSON.stringify(X);
        if (W[$] == null) {
          W[$] = !0;
          G.push(X);
        }
      }
    }
    var H =
      c == 0
        ? function (r, eQ) {
            return eQ.FontSize - r.FontSize;
          }
        : function (r, eQ) {
            return r.Justify - eQ.Justify;
          };
    G.sort(H);
    var C = [];
    if (c == 0) {
      var l = [
          [1, 0.28, 0.28, 0.28],
          [1, 1, 1, 1],
          [1, 0.85, 0.95, 1],
          [1, 0.95, 0.85],
          [1, 0, 0, 0.3],
          [1, 0.3, 0, 0],
        ],
        v = l.length,
        K = new Array(v),
        S = 1e9,
        o = 0;
      K.fill(1e9);
      for (var y = 0; y < G.length; y++) {
        var V = G[y],
          h = V.FontSize;
        S = Math.min(S, h);
        o = Math.max(o, h);
        var P = V.FillColor.Values,
          z = (P[1] + P[2] + P[3]) / 3;
        C[y] = z > 0.5 ? [1, 0.15, 0.15, 0.15] : [1, 0.85, 0.85, 0.85];
      }
    }
    var E = hd.ago(c == 0 ? n.K2 : n.Th, c, n.NJ, k, b, 1),
      A = JSON.stringify(E);
    for (var y = 0; y < G.length; y++) {
      var N = J.m("div");
      j.appendChild(N);
      T.push(N);
      N.addEventListener("click", this.aMa, !1);
      var V = G[y],
        Q = JSON.stringify(V) == A;
      if (c == 0) {
        var e = k[V.Font].Name,
          Y = e.toLowerCase(),
          d = Y.indexOf("bold") != -1 || Y.indexOf("-black") != -1,
          O =
            Y.indexOf("italic") != -1 ||
            Y.indexOf("oblique") != -1 ||
            Y.endsWith("-it"),
          s = Y.indexOf("light") != -1,
          h = V.FontSize,
          P = V.FillColor.Values,
          p = C[y];
        if (Q) {
          p = p.slice(0);
          p[1] = Math.min(1, p[1] + 0.2);
        }
        var F = o == S ? 0.5 : (h - S) / (o - S),
          n = 10 + 16 * F,
          g =
            "overflow:hidden; white-space:nowrap; height:38px;  font-size:" +
            n +
            "px; color:" +
            CSS.WG({ o: P[1] * 255, i: P[2] * 255, X: P[3] * 255 }) +
            "; line-height:" +
            38 +
            "px; background-color:" +
            CSS.WG({ o: p[1] * 255, i: p[2] * 255, X: p[3] * 255 }) +
            ";";
        if (d) g += " font-weight:bold;";
        if (O) g += " font-style:italic;";
        if (s) g += " font-weight:lighter;";
        J.F(N, g);
        var w = J.m("span");
        N.appendChild(w);
        J.F(
          w,
          "display:inline-block;  width:" +
            (o > 99 ? 50 : 40) +
            "px;  text-align:right;  margin-right:5px;"
        );
        w.textContent = Math.round(h);
        w = J.m("span");
        N.appendChild(w);
        J.F(w, "display:inline-block;  width:130px; ");
        w.textContent = e;
      }
    }
  };
  hd.prototype.cU = function (j) {
    var q = B.S(this.a.Cw),
      y = this.Mh.indexOf(j.currentTarget),
      m = this.nC[y];
    for (var n in m) if (n != "Font") q.K2[n] = m[n];
    al.gk(q, this.a3h[m.Font].Name);
    console.log(q);
    var G = new fd(_.E.c, !0);
    G.data = { R: _.Y.fh, rw: fG.R3, Cw: q };
    this.k(G);
    var G = new fd(_.E.w, !0);
    G.l = L.G_;
    G.data = { R: "updateStyles" };
    this.k(G);
  };
  hd.ago = function (j, q, m, n, G, W) {
    var k = q == 0 ? ["Font", "FontSize", "FillColor"] : [],
      T = {};
    for (var b = 0; b < k.length; b++) T[k[b]] = j[k[b]];
    if (q == 0) {
      if (T.Font != null) {
        var c = m[T.Font].Name;
        if (G[c] == null) {
          G[c] = n.length;
          n.push(m[T.Font]);
        }
        T.Font = G[c];
      }
      T.FontSize = T.FontSize * W;
    }
    return T;
  };
  hd.prototype.BN = function () {
    if (!J.JO(this.nA)) return;
  };
  hd.prototype.T = function () {
    bI.prototype.T.call(this);
  };
  hd.prototype.yp = function (j, q) {
    this.a = j;
    this.ll();
  };
  function bS() {
    bI.call(this, [9, 13], !1, "---panels/glyphs", bI.Fb.alB);
    this.a = null;
  }
  bS.prototype = new bI("");
  bS.prototype.No = function () {
    this.P8 = new ci();
    this.P8.parent = this;
    this.atm = null;
    this.aLl = null;
    this.$Z = null;
    this.aEd = null;
    this.JW = Math.round(290 * J.IC());
    this.Ar = 45;
    this.Wn = 4;
    this.aJX = this.ip.bind(this);
    this.aGW = 0;
    this.bl = new f1(null, ["Hi", "Hello"]);
    this.bl.Q(_.E.n, this.ip, this);
    var j = (this.C7 = new kv("-", null, null, !0));
    j.Q("click", this.aqz, this);
    var q = (this.a0D = new kv("+", null, null, !0));
    q.Q("click", this.aqz, this);
    this.Op = new ap(!1);
    this.Op.Q(_.E.n, this.aJ8, this);
    this.Op._.style.height = 250 + "px";
    var m = (this.bB = J.m("div", "form padded"));
    this.nA.appendChild(m);
    m.appendChild(this.P8.Oz._);
    J.Ft(m);
    m.appendChild(this.bl._);
    m.appendChild(j._);
    m.appendChild(q._);
    this.nA.appendChild(this.Op._);
  };
  bS.prototype.X3 = function (j, q) {
    if (this.GM == j || this.P8 == null) return;
    this.GM = j;
    this.JW = Math.floor((j - 13) * J.IC());
    J.F(this.bB, "width:" + this.JW / J.IC() + "px;");
    this.Op._.style.height = q - 73 + "px";
    this.ip();
  };
  bS.prototype.aJ8 = function (j) {
    var q = this.aIh(),
      m = Math.round(this.JW / q);
    q /= J.IC();
    var n = this.Op.V()[0] * m * this.Wn,
      G = this.Op.aDF();
    n += Math.floor(G.y / q) * m;
    n += Math.floor(G.x / q);
    var W = this.$Z[this.bl.V()];
    if (n >= W.length) return;
    var k = W[n],
      T = this.aEd[k],
      b = new fd(_.E.w, !0);
    b.l = L.G_;
    if (T.xh.length == 0) b.data = { R: "insertGlyph", K: n + 1 };
    else b.data = { R: "insertText", K: String.fromCodePoint(T.xh[0]) };
    this.k(b);
  };
  bS.prototype.aqz = function (j) {
    var q = 1.2;
    if (j.target == this.C7) {
      if (this.Ar > 20) this.Ar /= q;
    } else {
      if (this.Ar < 100) this.Ar *= q;
    }
    this.ip();
  };
  bS.prototype.BN = function () {
    this.yp(this.a);
  };
  bS.prototype.yp = function (j, q) {
    this.a = j;
    if (!J.JO(this.nA)) return;
    if (this.P8 == null) this.No();
    this.P8.q(j.Cw, j.HS, j.YL);
    var m = j.Cw,
      n = m.K2.Font,
      b = 0;
    if (n == null) return;
    var G = al.Sh(m.NJ[n]);
    if (this.atm == G) return;
    var n = j.HS.yM(G);
    if (n == null) return;
    var W = n.maxp.numGlyphs,
      k = (this.aEd = new Array(W));
    for (var y = 0; y < W; y++) k[y] = { xh: [] };
    var T = Date.now(),
      c = new Uint8Array(1048575);
    for (var y = 0; y < 1048575; y++) {
      var a = Typr.U.codeToGlyph(n, y);
      if (a != 0 && a < W) {
        c[y] = 1;
        if (k[a].xh.length == 0) b++;
        k[a].xh.push(y);
      }
    }
    var f = bS.YW,
      U = [];
    for (var y = 0; y < f.length; y++) U.push([]);
    for (var a = 1; a < W; a++) {
      U[0].push(a);
      var Z = k[a].xh[0];
      if (Z == null) {
        continue;
      }
      for (var h = 1; h < f.length; h++) {
        var u = f[h].uR;
        for (var y = 0; y < u.length; y += 2)
          if (u[y] <= Z && Z <= u[y + 1]) {
            U[h].push(a);
            break;
          }
      }
    }
    this.$Z = U;
    var i = [];
    for (var y = 0; y < f.length; y++)
      i.push(f[y].Lj + " (" + U[y].length + ")");
    var x = this.bl.V();
    this.bl.ti(i);
    this.bl.q(x);
    this.atm = G;
    this.aLl = n;
    this.ip();
  };
  bS.prototype.aIh = function (j) {
    var q = Math.floor(this.JW / this.Ar);
    return Math.floor(this.JW / q);
  };
  bS.prototype.ip = function (j) {
    if (!J.JO(this.nA) || this.$Z == null) return;
    var q = this.$Z[this.bl.V()],
      m = q.length,
      n = this.aLl,
      G = Typr.U,
      W = this.aIh(),
      k = W,
      T = k * 0.8,
      b = (k * 0.8) / n.head.unitsPerEm,
      c = [],
      a = Math.floor(this.JW / W),
      f = Math.ceil(m / a),
      U = this.Wn,
      Z = Date.now(),
      h = null;
    for (var u = 0; u < f; u += U) {
      var i = J.m("canvas"),
        x = i.getContext("2d");
      if (h == null) h = i.toDataURL("png");
      i.width = W * a;
      i.height = k * U;
      var X = J.m("map"),
        $ = "map" + Math.random();
      X.setAttribute("name", $);
      x.fillStyle = "white";
      x.fillRect(0, 0, a * W, k * U);
      for (var H = 0; H < U; H++) {
        for (var C = 0; C < a; C++) {
          var y = q[(u + H) * a + C];
          if (y == null) break;
          var l = G.glyphToPath(n, y),
            v = B.b.RD(l.crds);
          x.fillStyle = "#252525";
          if (v.jG()) {
            var K = n.hmtx,
              S = [],
              E = 170;
            for (var o in K) S.push(o);
            var V = K[S[0]][y],
              P = K[S[1]][y],
              z = Math.max(V, P);
            l = {
              cmds: "M L M L M L".split(" "),
              crds: [0, 0, z, 0, 0, -E, 0, E, z, -E, z, E],
            };
            v.r = z;
            v.x = 0;
            x.strokeStyle = "rgba(0,255,0,1)";
          }
          var A = W / J.IC(),
            N = k / J.IC(),
            Q = [C * A, H * N, (C + 1) * A, (H + 1) * N].join(","),
            e = J.m("area");
          X.appendChild(e);
          e.setAttribute("shape", "rect");
          e.setAttribute("coords", Q);
          var Y = this.aEd[y];
          e.setAttribute(
            "title",
            "Glyph: " +
              y +
              "\nCharacter: " +
              (Y.xh.length == 0 ? "----" : String.fromCodePoint(Y.xh[0])) +
              "\nUnicode: #" +
              (Y.xh.length == 0
                ? "----"
                : Y.xh[0].toString(16).padStart(4, "0"))
          );
          x.beginPath();
          var d = C * W + (W - v.r * b) * 0.5 - v.x * b,
            I = H * k + T;
          x.translate(d, I);
          x.scale(b, -b);
          G.pathToContext(l, x);
          x.scale(1 / b, -1 / b);
          x.translate(-d, -I);
          v.jG() ? x.stroke() : x.fill();
        }
      }
      x.beginPath();
      for (var C = 0; C < a; C++) {
        var O = C * W + W + 0.5;
        x.moveTo(O, 0);
        x.lineTo(O, k * U);
      }
      for (var H = -1; H < U; H++) {
        var s = H * k + k + 0.5;
        x.moveTo(0, s);
        x.lineTo(a * W, s);
      }
      x.strokeStyle = "rgba(0,0,0,0.3)";
      x.stroke();
      var p = J.m("div");
      p.appendChild(i);
      J.F(p, "position:relative;");
      J.Mg(i, W * a, k * U);
      var F = J.m("img");
      p.appendChild(F);
      p.appendChild(X);
      F.setAttribute("src", h);
      F.setAttribute("usemap", "#" + $);
      J.F(F, "position:absolute; top:0; left:0;");
      J.Mg(F, W * a, k * U);
      c.push(p);
    }
    this.Op.GW(c, null, W * a, k * U);
  };
  bS.YW = [
    { Lj: "All Glyphs" },
    { Lj: "Basic Latin, Latin 1", uR: [0, 127, 128, 143] },
    { Lj: "Latin Extended-A", uR: [256, 383] },
    { Lj: "Latin Extended-B", uR: [384, 591] },
    {
      Lj: "Punctuations",
      uR: [
        33, 35, 37, 39, 42, 42, 44, 44, 46, 47, 58, 59, 63, 63, 64, 64, 92, 92,
        161, 161, 167, 167, 182, 183, 191, 191, 894, 894, 903, 903, 1370, 1375,
        1417, 1417, 8192, 8303, 11776, 11903,
      ],
    },
    { Lj: "Greek", uR: [880, 1023] },
    { Lj: "Cyrillic", uR: [1024, 1279] },
    { Lj: "Hebrew", uR: [1424, 1535] },
    { Lj: "Arabic", uR: [1536, 1791] },
    { Lj: "Emoji", uR: [9728, 10095, 127744, 129535] },
  ];
  function cu() {
    bI.call(this, [13, 0], !1, null, bI.Fb.Ru);
    this.N_ = 0;
    this.aeI = 0;
    this.a = null;
  }
  cu.prototype = new bI("");
  cu.prototype.No = function () {
    if (!J.JO(this.nA) || this.$x) return;
    var j = J.m("div", "flexrow padded");
    this.nA.appendChild(j);
    var q = J.m("div");
    j.appendChild(q);
    this.$x = [];
    for (var y = 0; y < 2; y++) {
      var m = new g1();
      this.$x.push(m);
      m.Q("click", this.a0y, this);
      q.appendChild(m._);
    }
    this.VJ = new gk(192);
    console.log("hsb picker");
    this.VJ.Q(_.E.n, this.GQ, this);
    this.lg = new g8();
    this.lg.parent = this;
    j.appendChild(this.VJ._);
    this.yp(this.a, fG.HN);
  };
  cu.prototype.a0y = function (j) {
    var q = j.currentTarget,
      m = this.$x.indexOf(q);
    if (m == this.N_) {
      this.lg.ej(m);
    } else {
      this.N_ = m;
      this.ip();
    }
  };
  cu.prototype.GQ = function (j) {
    var q = this.VJ.V();
    this.VJ.q(q);
    var m =
        (Math.round(q.o * 255) << 16) |
        (Math.round(q.i * 255) << 8) |
        Math.round(q.X * 255),
      n = new fd(_.E.c, !0);
    n.data = { R: _.Y.fh, rw: fG.Ru, _G: this.N_, K: m };
    this.k(n);
    this.aeI = Date.now();
  };
  cu.prototype.ip = function () {
    if (this.lg == null) return;
    var j = this.a,
      q = this.N_,
      m = [j.UP, j.vH];
    for (var y = 0; y < 2; y++) {
      var n = this.$x[y],
        G = n._.style;
      n.kK(m[y]);
      if (y == q) G.filter = "drop-shadow(0 0 1px #000000)";
    }
    var W = m[q];
    if (Date.now() - this.aeI > 100)
      this.VJ.q({
        o: (W >>> 16) / 255,
        i: ((W >>> 8) & 255) / 255,
        X: (W & 255) / 255,
      });
  };
  cu.prototype.yp = function (j, q) {
    this.a = j;
    if (this.lg == null) return;
    if (q == fG.HN || q == fG.Ru) {
      this.lg.aa8(j.UP, j.vH);
      this.ip();
    }
  };
  cu.prototype.Wz = function () {
    this.No();
  };
  cu.prototype.BN = function () {
    this.No();
    this.ip();
  };
  function cm() {
    bI.call(this, "CSS", !1, "---panels/css", bI.Fb.CSS);
    this.I7 = null;
    var j = J.m("div", "padded");
    this.nA.appendChild(j);
    this.X_ = J.m("textarea");
    J.l3(this.X_);
    j.appendChild(this.X_);
  }
  cm.prototype = new bI("");
  cm.prototype.X3 = function (j, q) {
    if (this.GM == j) return;
    this.GM = j;
    J.F(
      this.X_,
      "display:block;tab-size:4;  margin:0; font-family:monospace; width:" +
        (j - 10) +
        "px; height:" +
        (q - 10) +
        "px"
    );
  };
  cm.prototype.Wz = function (j) {
    this.I7 = j;
    this.ip();
  };
  cm.prototype.yp = function (j, q) {
    if (q == fG.uk) this.ip();
  };
  cm.prototype.ip = function () {
    var j = this.I7;
    if (j == null || j.J.length == 0) return;
    if (!J.JO(this.nA)) return;
    var q = j.U[j.J[0]],
      m = CSS.aaU(q, j);
    if (m.length != 0) this.X_.value = m.join(";\n") + ";";
    else this.X_.value = "";
  };
  cm.prototype.BN = function () {
    this.ip();
  };
  function hK() {
    bI.call(this, "Text to Image", !1, null, bI.Fb.a23);
    this.I7 = null;
    this.sQ = 0;
    this.$G = {};
    this.gR = null;
    var j = (this.Mh = [
      new bJ("Prompt", null, null, 4),
      new kv([12, 49], !0, null, !0),
    ]);
    j[0].q("goat riding a bike");
    var q = J.m("div", "form padded labfxd");
    this.nA.appendChild(q);
    for (var m = 0; m < j.length; m++) {
      j[m].parent = this;
      q.appendChild(j[m]._);
      if (m == 1) j[m].Q("click", this._Y, this);
    }
    this.UJ = J.m("div", "scrollable");
    q.appendChild(this.UJ);
    this.aCG = hK.prototype.a2D.bind(this);
  }
  hK.prototype = new bI("");
  hK.prototype._Y = function () {
    var j = this.Mh,
      q = j[0].V().trim(),
      m = function () {
        var n = c9.abc(q, null, null, this.aCG);
        if (n == 1) J._g(this.nA, "disabled");
      }.bind(this);
    if (c9.N1(3)) m();
    else c9.$Q(m);
  };
  hK.prototype.a2D = function (j) {
    var q = this.Mh;
    J.XZ(this.nA, "disabled");
    var m = {
        created: Math.round(Date.now() / 1e3),
        data: [{ b64_json: gh.Sk(j.target.response) }],
      },
      n = this.$G,
      G = q[0].V().trim();
    if (n[G] == null) n[G] = [];
    n[G].push(m);
    c9.ai("Generate", 3);
    this.ip();
  };
  hK.prototype.X3 = function (j, q) {
    if (this.GM == j) return;
    this.GM = j;
    this.nA.style.width = j - 16 + "px";
    this.UJ.style.height = q - 190 + "px";
  };
  hK.prototype.Wz = function (j, q) {
    this.I7 = j;
    if (j) this.sQ = q.mS.indexOf(j);
    this.ip();
  };
  hK.prototype.T = function (j, q) {
    bI.prototype.T.call(this);
    var m = this.Mh,
      G = ' target="_blank" style="color:inherit;">';
    for (var n = 0; n < m.length; n++) this.Mh[n].T();
  };
  hK.prototype.ip = function () {
    var j = this.UJ,
      q = this.$G;
    J.dI(j);
    var m = [];
    for (var n in q) {
      q[n].sort(function (Z, h) {
        return h.created - Z.created;
      });
      m.push([n, q[n]]);
    }
    m.sort(function (Z, h) {
      return h[1][0].created - Z[1][0].created;
    });
    var G = this.asX.bind(this),
      W = (this.gR = [[], []]);
    for (var y = 0; y < m.length; y++) {
      var n = m[y][0],
        k = m[y][1],
        T = J.m("div");
      T.textContent = n;
      j.appendChild(T);
      for (var b = 0; b < k.length; b++) {
        var c = k[b].data;
        for (var a = 0; a < c.length; a++) {
          var f = c[a].b64_json,
            U = J.m("img");
          U.setAttribute("src", "data:image/png;base64," + f);
          U.onclick = G;
          U.style.width = 128 / J.IC() + "px";
          U.style.marginRight = "4px";
          U.style.cursor = "pointer";
          j.appendChild(U);
          W[0].push(U);
          W[1].push(c[a]);
        }
      }
    }
  };
  hK.prototype.asX = function (j) {
    var y = this.gR[0].indexOf(j.target),
      q = this.gR[1][y].b64_json,
      m = gh.vG(q);
    jc.bZ({ url: "file", sQ: this.sQ }, m, this);
  };
  hK.prototype.BN = function () {
    this.ip();
  };
  function jn() {
    bI.call(this, [9, 6], !1, "---panels/info", bI.Fb.acb);
    J.F(this.nA, "min-width:240px;");
    this.I7 = null;
    this.a = null;
    this.DQ = null;
    var j = (this.$B = []);
    for (var q = 0; q < 3; q++) {
      var m = J.m("div", "marged row");
      this.nA.appendChild(m);
      var n = J.m("div", "cell");
      J.F(n, "width:10em");
      m.appendChild(n);
      var G = J.m("div", "cell");
      J.F(G, "width:10em");
      m.appendChild(G);
      var W = [8, 4, 3][q];
      for (var y = 0; y < W; y++) {
        var k = new aD("");
        j.push(k);
        k.q(0);
        k._.style.padding = "0";
        var T = y < (q == 1 ? 2 : 4) ? n : G;
        T.appendChild(k._);
        J.Ft(T);
      }
      if (q < 2) J.c$(this.nA);
    }
    this.lC = j[8];
    this.Hk = j[9];
    this.pB = j[10];
    this.Fq = j[11];
    J.c$(this.nA);
    this.DQ = J.m("div");
    J.F(
      this.DQ,
      "min-width:240px;display:flex;flex-direction:row;flex-wrap:wrap;"
    );
    this.nA.appendChild(this.DQ);
  }
  jn.prototype = new bI("");
  jn.prototype.C3 = function (j, q, m, n, G) {
    if (!J.JO(this.nA) || j == null) return;
    var W = j.I.sb(G.x, G.y),
      k = new ea(Math.floor(W.x), Math.floor(W.y));
    if (!G.qT) {
      var T = 0,
        b = 0,
        c = 0,
        a = 0,
        f = this.$B;
      if (!G.qT && !j.axI() && new hk(0, 0, j.r - 1, j.$ - 1).QL(k)) {
        var U = j.ht(),
          y = (j.r * k.y + k.x) << 2;
        T = U[y + 0];
        b = U[y + 1];
        c = U[y + 2];
        a = U[y + 3];
      }
      var Z = B.fE([T / 255, b / 255, c / 255]);
      f[0].q("R: " + T);
      f[1].q("G: " + b);
      f[2].q("B: " + c);
      f[3].q("A: " + a);
      f[4].q("C: " + Math.round(Z[0] * 100) + "%");
      f[5].q("M: " + Math.round(Z[1] * 100) + "%");
      f[6].q("Y: " + Math.round(Z[2] * 100) + "%");
      f[7].q("K: " + Math.round(Z[3] * 100) + "%");
      var h = B.a3q(T, b, c);
      f[12].q("H: " + Math.round(h.uu * 360) + "\xB0");
      f[13].q("S: " + Math.round(h.fO * 100) + "%");
      f[14].q("B: " + Math.round((h.X * 100) / 255) + "%");
    }
    var u = j.I.k3 > 1 ? new ea(W.x, W.y) : k;
    this.lC.q("X: " + B.uO.G7(u.x, j.zv, m, j.r));
    this.Hk.q("Y: " + B.uO.G7(u.y, j.zv, m, j.$));
    this.aI();
  };
  jn.prototype.aI = function () {
    var j = this.I7,
      q = this.a,
      m = 0,
      n = 0;
    if (j && q) {
      if (j.I.qN) {
        m = j.I.qN.r;
        n = j.I.qN.$;
      } else if (j.h) {
        m = j.h.H.r;
        n = j.h.H.$;
      }
      m = B.uO.G7(Math.abs(m), j.zv, q, j.r);
      n = B.uO.G7(Math.abs(n), j.zv, q, j.$);
    }
    this.pB.q(g$.get([12, 41]).charAt(0) + ": " + m);
    this.Fq.q(g$.get([12, 42]).charAt(0) + ": " + n);
  };
  jn.prototype.T = function () {
    bI.prototype.T.call(this);
    this.aI();
  };
  jn.prototype.BN = function () {
    this.Wz(this.I7, null, this.a);
  };
  jn.prototype.Wz = function (j, q, m) {
    this.I7 = j;
    this.a = m;
    if (!J.JO(this.nA)) return;
    console.log("update");
    this.aI();
    if (j && j.J.length != 0) {
      var n = j.J[0],
        G = j.U[n],
        W = eV.get(G.add) != null,
        k = W && j.J[0] > 0;
      this.DQ.innerHTML = "";
      for (var y = 0; y < j.jE.length; y++) {
        var T = j.jE[y],
          G = j.I.gS(T.x, T.y),
          b = L.KH.th(j, G, 1, k ? 1 : 2),
          c = { o: (b >>> 16) & 255, i: (b >>> 8) & 255, X: b & 255 },
          u =
            '<span style="display:inline-block; width:25px; text-align:right">',
          i = "</span>";
        if (k) {
          var a = j.J[0];
          j.J[0] = n - 1;
          var f = L.KH.th(j, G, 1, 1),
            U = { o: (f >>> 16) & 255, i: (f >>> 8) & 255, X: f & 255 };
          j.J[0] = a;
        }
        var Z = J.m("div");
        J.F(Z, "padding: 0.5em 0.5em; width: 40%");
        var h = "<b>#" + (y + 1) + "</b>",
          x = [c.o, c.i, c.X],
          X = k ? [U.o, U.i, U.X] : null,
          $ = ["R", "G", "B"];
        for (var H = 0; H < 3; H++)
          h +=
            "<br/>" +
            u +
            $[H] +
            i +
            ": " +
            (k ? u + X[H] + i + " /" : "") +
            u +
            x[H] +
            i;
        Z.innerHTML = h;
        this.DQ.appendChild(Z);
      }
    }
  };
  function a_() {
    bI.call(this, [9, 1], !1, "---panels/layers", bI.Fb.W1);
    this.aeo = null;
    this.JK = [];
    this.fg = null;
    this.caller = null;
    this.lM = J.m("div", "lphead");
    this.gj = J.m("div", "lpbody scrollable");
    this.gj.addEventListener("scroll", this.adS.bind(this), !1);
    this.Mv = J.m("div", "lpfoot");
    var j = (this.awI = J.m("span"));
    J.F(j, "display:inline-block; height:26px");
    this.xX = new f1(null, kJ.nb, kJ.hb);
    this.xX.Q(_.E.n, this.aaN, this);
    this.ah = new k7([12, 0], 0, 100, "%", 0);
    this.ah.Q(_.E.n, this.auM, this);
    this.ah.parent = this;
    this.uT = new k6();
    this.uT.parent = this;
    this.uT._.style.marginLeft = "4px";
    this.Ge = new k7("Volume", 0, 100, "%", 0);
    this.Ge.parent = this;
    this.Ge.Q(_.E.n, this.asc, this);
    this.uT.Q(_.E.n, this.asc, this);
    this.ug = new bl(
      [6, 57, 2],
      [
        '<img src="' + PIMG.trsp3 + '" class="miniscale gsicon" />',
        '<img src="' + PIMG["tools/brush"] + '" class="miniscale gsicon" />',
        '<img src="' + PIMG.pos + '" class="miniscale gsicon" />',
        '<img src="' + PIMG["lrs/lock"] + '" class="miniscale gsicon" />',
      ],
      !0,
      ["Transparency", [12, 76, 2], [12, 40], [7, 0]]
    );
    this.ug.Q(_.E.n, this.akb, this);
    this.XI = new k7([12, 26], 0, 100, "%", 0);
    this.XI.Q(_.E.n, this.aeT, this);
    this.XI.parent = this;
    if (ei == 0) {
      this.lM.appendChild(j);
      this.lM.appendChild(this.xX._);
      this.lM.appendChild(this.ah._);
      this.lM.appendChild(this.ug._);
      this.lM.appendChild(this.XI._);
    }
    if (ei == 2) {
      this.lM.appendChild(this.uT._);
      this.lM.appendChild(this.Ge._);
    }
    this.zi = [];
    this.MZ();
    if (ei == 0 || ei == 2) this.nA.appendChild(this.lM);
    this.nA.appendChild(this.gj);
    this.gj.addEventListener(
      "dragover",
      function (G) {
        G.preventDefault();
      },
      !1
    );
    this.gj.addEventListener("dragenter", J.iO, !1);
    this.gj.addEventListener("drop", this.acB.bind(this), !1);
    this.nA.appendChild(this.Mv);
    this.nA.addEventListener("contextmenu", J.iO, !1);
    if (ei == 0) this.Q("rclick", this.aKv, this);
    var q = function (G, W, y) {
      return { Wr: this.YA[y] == 1 };
    }.bind(this);
    if (ei == 0) {
      this.aHl = new cG([
        { name: [0, 6], f: q },
        { name: [14, 10], f: q },
        { name: [6, 57, 2], f: q, q7: !0 },
        { name: "Long-tap as a right click", f: q, q7: !0 },
        { name: "\u2796 Thumbnail Size" },
        { name: "\u2795 Thumbnail Size" },
        {
          name: "Thumbnails by Layer",
          f: function () {
            return { Wr: b8.iT == 0, f: !0 };
          },
        },
        {
          name: "Thumbnails by Document",
          f: function () {
            return { Wr: b8.iT == 1, f: !0 };
          },
        },
      ]);
      this.aHl.Q("select", this.apR, this);
    }
    this.YA = [0, 1, 1, 0];
    var m = window.locStor;
    if (m) {
      var n = m.getItem("lpOpt");
      if (n) {
        n = JSON.parse(n);
        this.YA = n[0];
        b8.QC = n[1];
        b8.iT = n[2];
      }
    }
    this.apR();
  }
  a_.prototype = new bI("");
  a_.Ka = function (j) {
    var q = j == null ? 0 : j.J.length;
    return {
      f:
        q != 0 &&
        (q != 1 || j.J[0] != 0) &&
        (q != 1 || !j.U[j.J[0]].D1() || j.U[j.J[0]].Iw()),
      sO: g$.get(q > 1 || (q == 1 && j.U[j.J[0]].D1()) ? [6, 12, 0] : [6, 10]),
    };
  };
  a_.prototype.n6 = function () {
    if (this.amv) return;
    var j = fr.Rk(!0),
      q = fr.PM(!0);
    this.amv = new cG(j, q);
    var j = [
        { name: [14, 10] },
        { name: [14, 11], q7: !0 },
        { name: [6, 0] },
        { name: [11, 4] },
        { name: [5, 4], q7: !0 },
        { name: [6, 7, 0] },
        jv.dp(!0, !0),
        { name: [6, 8], f: a_.au1 },
        {
          name: [6, 34],
          f: function (n) {
            var G = n.U[n.J[0]];
            return { f: G.add.lmfx != null && !G.D1() };
          },
        },
        {
          name: [6, 40],
          q7: !0,
          f: function (n) {
            var G = n.U[n.J[0]];
            return { f: G.add.TySh != null };
          },
        },
        {
          name: "",
          q7: !0,
          f: function (n) {
            var G = n.U[n.J[0]],
              W = G.add.TySh,
              k = W ? W.s3 : null;
            return {
              f: W != null && k.Curve == null,
              sO: g$.get(W && al.Po(k) == 0 ? [16, 3, 1] : [16, 3, 0]),
            };
          },
        },
        a_.aJI(!1),
        fr.aDI(),
        { name: [6, 12, 0], f: a_.Ka },
        { name: [6, 12, 1], q7: !0 },
        {
          name: [13, 0],
          sub: (function () {
            var n = [];
            for (var y = 0; y < b2.fn.length; y++)
              n.push({ name: [13, 1, y], _9: "#" + B.bw(b2.fn[y]) });
            return n;
          })(),
        },
      ],
      q = [
        { p: _.E.c, d: { R: _.Y.s0, kO: "layerstyle" } },
        { p: _.E.w, l: L.ag, d: { R: "fromlayer", eQ: [null, 0, 0] } },
        { p: _.E.w, l: L.W1, d: { R: R.iq } },
        { p: _.E.c, d: { R: _.Y.s0, kO: "duplinto" } },
        { p: _.E.w, l: L.W1, d: { R: R.dh } },
        { p: _.E.NI, d: { _D: "newPlacedLayer" } },
        jv.dp(!1, !0),
        {
          p: _.E.NI,
          d: {
            _D: "rasterizeLayer",
            SC: { classID: "rasterizeLayer", null: jw.$W("Lyr", !0) },
          },
        },
        {
          p: _.E.NI,
          d: {
            _D: "rasterizeLayer",
            SC: {
              classID: "rasterizeLayer",
              null: jw.$W("Lyr", !0),
              What: { t: "enum", v: { rasterizeItem: "layerStyle" } },
            },
          },
        },
        { p: _.E.w, l: L.W1, d: { R: R.ei } },
        { p: _.E.w, l: L.G_, d: { R: "switchPntPrgr" } },
        { p: _.E.w, l: L.W1, d: { R: R.vu } },
        fr.akz(),
        {
          p: _.E.NI,
          d: {
            _D: "mergeLayersNew",
            SC: { __name: "Merge Layers", classID: "Mrg2" },
          },
        },
        { p: _.E.NI, d: { _D: "flattenImage" } },
        {
          sub: (function () {
            var n = [];
            for (var y = 0; y < 8; y++)
              n.push({ p: _.E.w, l: L.W1, d: { R: R.LV, aGE: y } });
            return n;
          })(),
        },
      ];
    this.oQ = new cG(j, q);
    var j = [
        {
          name: [6, 45],
          f: function (n) {
            var G = n.U[n.J[0]];
            return { f: G.xE(n).x7 == null };
          },
        },
        { name: [6, 47] },
      ],
      q = [
        { p: _.E.w, l: L.W1, d: { R: R.kc } },
        { p: _.E.w, l: L.W1, d: { R: R.rJ } },
      ];
    this.aeu = new cG(j, q);
    var j = [
        {
          name: "enab/disab",
          f: function (n) {
            return {
              sO: g$.get(n.U[n.J[0]].ex().isEnabled ? [6, 15] : [6, 14]),
            };
          },
        },
        { name: [6, 22] },
        {
          name: [5, 8],
          f: function (n) {
            return { f: n.Ph(!1, !0) };
          },
        },
      ],
      q = [
        { p: _.E.w, l: L.W1, d: { R: R.bQ } },
        { p: _.E.w, l: L.W1, d: { R: R.zQ } },
        { p: _.E.w, l: L.W1, d: { R: R.yT } },
      ];
    this.aEj = new cG(j, q);
    var j = [
        {
          name: "enab/disab",
          f: function (n) {
            return {
              sO: g$.get(n.U[n.J[0]].xE(n).x7.isEnabled ? [6, 42] : [6, 41]),
            };
          },
        },
        { name: [6, 46] },
      ],
      q = [
        { p: _.E.w, l: L.W1, d: { R: R.u8 } },
        { p: _.E.w, l: L.W1, d: { R: R.Ko } },
      ];
    this.aeq = new cG(j, q);
    var j = [{ name: "Enable / Disable" }, { name: [6, 53] }];
    this.anK = new cG(j);
    this.anK.Q(
      "select",
      function (n) {
        var y = n.target.r9()[0],
          G = this.aht;
        if (y == 0) {
          this.lD({ R: R.AR, v: G.v, index: G.index });
        } else this.lD({ R: R.Zq, src: G.v, UX: G.index });
      }.bind(this),
      this
    );
    var j = [
        {
          name: "enab/disab",
          f: function (n) {
            return {
              sO: g$.get(n.U[n.J[0]].add.vmsk.isEnabled ? [6, 17] : [6, 16]),
            };
          },
        },
        { name: [6, 24] },
        { name: [6, 8] },
      ],
      m = {
        classID: "rasterizeLayer",
        null: jw.$W("Lyr", !0),
        What: { t: "enum", v: { rasterizeItem: "vectorMask" } },
      },
      q = [
        { p: _.E.w, l: L.W1, d: { R: R.d3 } },
        { p: _.E.NI, d: L.Qc.Br(3) },
        { p: _.E.NI, d: { _D: "rasterizeLayer", SC: m } },
      ];
    this.aAi = new cG(j, q);
    this.ayd = new cG(fr.a9i(!0), fr.Mp(!0));
    this.aFY = new cG(fr.Rk(), fr.PM());
  };
  a_.prototype.adS = function (j) {
    var q = this.gj.scrollTop - 600;
    for (var y = 0; y < this.JK.length; y++) {
      var m = this.JK[y],
        n = m.og;
      if (q < m.og) m.aDT();
      if (m.og > q + this.uu + 600) break;
    }
  };
  a_.prototype.UE = function () {
    return this.aHl;
  };
  a_.prototype.apR = function (j) {
    var q = this.YA;
    if (j) {
      var m = j.target.r9(),
        y = m[0];
      if (y < 4) q[y] = 1 - q[y];
      else if (y < 6) {
        if (y == 4 && b8.QC - 10 >= 10) b8.QC -= 10;
        if (y == 5 && b8.QC + 10 <= 200) b8.QC += 10;
        if (this.fg) this.fg.qB = !0;
      } else {
        if (y == 6) b8.iT = 0;
        if (y == 7) b8.iT = 1;
        if (this.fg) this.fg.qB = !0;
      }
      var n = window.locStor;
      if (n) n.setItem("lpOpt", JSON.stringify([q, b8.QC, b8.iT]));
    }
    if (q[0] == 1) this.ayw();
    var G = [[{ _: this.awI }], [this.xX, this.ah], [this.ug, this.XI]];
    for (var y = 0; y < 3; y++)
      for (var W = 0; W < G[y].length; W++)
        G[y][W]._.style.display = q[y] == 1 ? "inline-block" : "none";
    this.X3(this.GM, this.uu);
  };
  a_.prototype.aHi = function () {
    var j = this.aS;
    if (j == null) return !1;
    if (j.V()) {
      var q = this.U7.V(),
        m = this.Pe[q].V();
      if (q == 0) return m.indexOf(!0) != -1;
      if (q == 1) return m != "";
    }
    return !1;
  };
  a_.aJI = function (j) {
    var q = function (n) {
        var G = n != null && n.J.length != 0 && n.U[n.J[0]].Yx;
        return {
          Wr: G,
          f: n != null && n.Lu(n.J[0]),
          d: {
            p: _.E.NI,
            d: {
              _D: G ? "ungroup" : "groupEvent",
              SC: { classID: G ? "Ungr" : "GrpL", null: jw.$W("Lyr", !0) },
            },
          },
        };
      },
      m = { name: [6, 6, 0], q7: !0, f: q };
    if (j) m.RP = [gn.O4, gn.A8, gn.Vj];
    return m;
  };
  a_.au1 = function (j, q) {
    if (j)
      for (var y = 0; y < j.J.length; y++) {
        var m = j.U[j.J[y]];
        if (m.add.TySh || m.add.SoLd || m.add.SoCo || m.add.GdFl || m.add.PtFl)
          return { f: !0 };
      }
    return { f: !1 };
  };
  a_.prototype.acB = function (j) {
    J.iO(j);
    var q = j.dataTransfer.getData("Text"),
      m = 1,
      n = 0;
    if (q == "") {
      J.UB(j, this, this.caller.mS.indexOf(this.fg), n + (m > 0.5 ? 0 : 1));
    } else if (q != "--panel") {
      var q = JSON.parse(q),
        G = q.Sg;
      if (G == "l") this.lD({ R: R.Vy, source: q.Os, target: n, FK: m });
    }
  };
  a_.prototype.aKv = function (j) {
    var q = this.fg,
      m = (this.aht = j.data),
      G;
    if (q.J.indexOf(m.v) == -1) {
      var n = { R: R.nu, v: j.target.KR.index, NM: m.ma };
      this.lD(n);
    }
    if (q.J.indexOf(m.v) == -1) return;
    this.n6();
    if (m.ma == 1) {
      G = this.aEj;
    } else if (m.ma == 2) {
      G = this.aAi;
    } else if (m.ma == 3) {
      G = this.aeq;
    } else if (m.ma == 4) {
      G = this.aeu;
    } else if (m.ma == 5) {
      G = this.amv;
    } else if (m.ma == 6) {
      G = this.anK;
    } else {
      G = this.oQ;
    }
    G.T();
    G.update(q);
    G.parent = this;
    var W = new fd(_.E.c, !0);
    W.data = { R: _.Y.wQ, Tf: G, x: m.yw.x + 1, y: m.yw.y + 1 };
    this.k(W);
  };
  a_.prototype.T = function () {
    bI.prototype.T.call(this);
    this.xX.T();
    this.ah.T();
    this.ug.T();
    this.XI.T();
    this.uT.T();
    this.Ge.T();
    if (this.aS) {
      this.aS.T();
      this.Pe[0].T();
    }
    if (this.fg) this.Wz(this.fg);
    var j =
      "lrs/link lrs/fx lrs/mask lrs/adj lrs/folder lrs/newlayer lrs/bin".split(
        " "
      );
    for (var y = 0; y < this.zi.length; y++) {
      var q = this.zi[y];
      q.hk(J.CP(j[y], null, "miniscale"));
      if (y == 1 || y == 3) {
        q._.style.position = "relative";
        var m = J.m("img", "gsicon");
        m.setAttribute("src", PIMG["tools/corner"]);
        J.F(
          m,
          "position:absolute; right:0;  bottom:0; width:100%;  height:100%;"
        );
        q._.appendChild(m);
      }
    }
  };
  a_.prototype.Wz = function (j, q) {
    if (j && !j.qB) return;
    if (j == null) J._g(this.nA, "disabled");
    else J.XZ(this.nA, "disabled");
    var m = this.gj.scrollTop,
      n = this.fg ? this.fg.U.length : -1,
      G = !1;
    this.fg = j;
    this.caller = q;
    if (this.aeo != null) {
      J.dI(this.gj);
      this.aeo = null;
      this.JK = [];
    }
    if (j == null) return;
    for (var y = 0; y < j._E.length; y++) if (j._E[y].Ea) G = !0;
    this.aeo = new b2(
      j.root,
      this,
      j,
      { Fx: 0, aDV: !1 },
      { a4Q: G, a4J: this.aHi() },
      this.JK,
      0,
      new hk(0, 0, j.r, j.$)
    );
    if (j.U.length == n) this.gj.scrollTop = m;
    if (j.J.length == 0 || j.U[j.J[0]] == null) J._g(this.lM, "disabled");
    else {
      J.XZ(this.lM, "disabled");
      if (j.J.length == 1 && j.u9) {
        var W = j.J[0];
        for (var y = 0; y < this.JK.length; y++) {
          var k = this.JK[y];
          if (k.KR.index == W && k.lM.scrollIntoView)
            k.lM.scrollIntoView({ block: "nearest" });
        }
      }
      var T = j.U[j.J[0]];
      if (ei == 2 && T.Y) {
        this.uT.q(T.Y.yY);
        this.Ge.q(T.Y.volume * 100);
      }
      if (T.D1()) {
        this.xX.ti([[15, 10, 27]].concat(kJ.nb), [1].concat(kJ.hb));
        var b = kJ.YH.indexOf(T.hz);
        this.xX.q(b + 1);
      } else {
        this.xX.ti(kJ.nb, kJ.hb);
        var b = kJ.YH.indexOf(T.hz);
        this.xX.q(b);
      }
      this.ah.q(Math.round((100 * T.yA) / 255));
      this.ug.q([T.op(0), T.op(1), T.op(2), T.op(31)]);
      var c = j.$X();
      this.xX.yl(!c);
      this.XI.yl(!c);
      this.ah.yl(!c);
      this.ug.yl(!(c && !T.op(31)));
      this.XI.q(Math.round(100 * (T.add.iOpa != null ? T.add.iOpa / 255 : 1)));
      this.zi[2].aBB(g$.get(T.ex() ? [6, 23] : [6, 21]));
    }
    this.adS(null);
  };
  a_.prototype.X3 = function (j, q) {
    this.GM = j;
    this.uu = q;
    var m = this.lM.getBoundingClientRect().height;
    if (55 < m && m < 56) m = 60.2;
    var n = this.Mv.getBoundingClientRect().height,
      G = q - (m + n + 3);
    this.gj.style.height = G + "px";
    this.gj.style.width = j + "px";
  };
  a_.prototype.aaN = function (j) {
    this.lD({ R: R.Jf, jt: this.xX.V() });
  };
  a_.prototype.auM = function (j) {
    this.lD({ R: R.G4, jt: Math.round((255 * this.ah.V()) / 100) });
  };
  a_.prototype.asc = function (j) {
    this.lD({ R: R.Rp, jt: { yY: this.uT.V(), volume: this.Ge.V() / 100 } });
  };
  a_.prototype.akb = function (j) {
    this.lD({ R: R.p4, jt: [this.ug.V(), [0, 1, 2, 31]] });
  };
  a_.prototype.aeT = function (j) {
    this.lD({ R: R.yX, jt: Math.round((255 * this.XI.V()) / 100) });
  };
  a_.prototype.zx = function (j) {
    if (j.target == this.U7) this.ayw();
    var q = this.aS.V();
    if (q) J.XZ(this.apz, "disabled");
    else J._g(this.apz, "disabled");
    this.T();
    this.fg.qB = !0;
    this.Wz(this.fg);
    this.fg.qB = !1;
  };
  a_.prototype.ayw = function () {
    var j = this.apz;
    if (j == null) {
      var q = this.awI,
        m = (this.aS = new av([0, 6]));
      m.Q(_.E.n, this.zx, this);
      q.appendChild(m._);
      j = this.apz = J.m("span", "disabled");
      q.appendChild(j);
      this.U7 = new f1(null, ["Kind", [12, 48]], []);
      this.U7.Q(_.E.n, this.zx, this);
      var n = (this.Pe = [
        new bl(
          null,
          [
            '<img src="' + PIMG.pix_layer + '" class="miniscale gsicon" />',
            '<img src="' + PIMG["lrs/adj"] + '" class="miniscale gsicon" />',
            '<img src="' +
              PIMG["tools/htype"] +
              '" class="miniscale gsicon" />',
            '<img src="' + PIMG.shape_layer + '" class="miniscale gsicon" />',
            '<img src="' + PIMG.so_layer + '" class="miniscale gsicon" />',
          ],
          !0,
          [
            [12, 76, 2],
            [3, 0],
            [12, 44],
            [12, 77],
            [6, 7, 1],
          ]
        ),
        new bJ(null, null, 8),
      ]);
      n[0].Q(_.E.n, this.zx, this);
      n[1].Q("input", this.zx, this);
    }
    J.dI(j);
    j.appendChild(this.U7._);
    j.appendChild(this.Pe[this.U7.V()]._);
  };
  a_.prototype.aAd = function (j) {
    this.n6();
    this.aho(j, this.ayd);
  };
  a_.prototype.aE4 = function (j) {
    this.n6();
    this.aho(j, this.aFY);
  };
  a_.prototype.aho = function (j, q) {
    var m = j.currentTarget;
    if (J.JO(q._)) return;
    j.stopPropagation();
    var n = m.getBoundingClientRect();
    q.T();
    q.update(this.fg);
    q.parent = this;
    var G = new fd(_.E.c, !0);
    G.data = { R: _.Y.wQ, Tf: q, x: n.left, y: n.top, aJY: !0 };
    this.k(G);
  };
  a_.prototype.aj5 = function (j) {
    this.lD({ R: R.aDg });
  };
  a_.prototype.akD = function (j) {
    this.lD({ R: this.fg.J.length > 1 ? R._k : R._u });
  };
  a_.prototype.aI0 = function (j) {
    this.lD({ R: R.YJ });
  };
  a_.prototype.ayP = function (j) {
    var q = this.fg;
    if (q.J.length == 0) return;
    var m = q.U[q.J[0]],
      n = m.ma;
    this.lD({ R: n <= 0 ? (m.q_ ? R.aX : R.dh) : n == 3 ? R.Ko : R.zQ });
  };
  a_.prototype.a0G = function (j) {
    this.lD({ R: R.Y1 });
  };
  a_.prototype.lD = function (j) {
    var q = new fd(_.E.w, !0);
    q.data = j;
    q.l = L.W1;
    this.k(q);
  };
  a_.prototype.MZ = function () {
    var j = [
        [6, 54, 0],
        [11, 6],
        [6, 21],
        [6, 1],
        [6, 20],
        [6, 13],
        [5, 4],
      ],
      q = [
        this.a0G,
        this.aE4,
        this.aj5,
        this.aAd,
        this.akD,
        this.aI0,
        this.ayP,
      ],
      m = this.aAR.bind(this);
    for (var y = 0; y < j.length; y++) {
      var n = new kv("W", !1, j[y]);
      this.zi.push(n);
      J.PD(n._, q[y].bind(this));
      if (ei == 0 || (ei == 1 && y > 3 && y != 5) || (ei == 2 && y > 3))
        this.Mv.appendChild(n._);
      if (y >= j.length - 3) {
        var G = n._;
        G.addEventListener("drop", m, !1);
        G.addEventListener(
          "dragover",
          function (W) {
            W.preventDefault();
          },
          !1
        );
        G.addEventListener("dragenter", J.iO, !1);
      }
    }
  };
  a_.prototype.aAR = function (j) {
    J.iO(j);
    var q = 0,
      m = this.zi;
    while (m[q]._ != j.currentTarget) q++;
    m[q].uy();
    var n = j.dataTransfer.getData("Text");
    if (n == "") return;
    var n = JSON.parse(n);
    if (n.Sg == "l") {
      var G = { R: [R._k, R.iq, R.dh][q - 4] };
      if (this.fg.J.indexOf(n.Os) == -1) G.v = n.Os;
      this.lD(G);
    }
    if (q != 6) return;
    if (n.Sg == "sm" || n.Sg == "s") {
      var W = new fd(_.E.w, !0);
      W.l = L.EJ;
      W.data = {
        R: n.Sg == "sm" ? "st_clear" : "st_delsingle",
        v: n.Os,
        Os: n.UX,
      };
      this.k(W);
    }
    if (n.Sg == "fm" || n.Sg == "f") {
      this.lD({ R: n.Sg == "fm" ? R.rJ : R.Zq, src: n.Os, UX: n.UX });
    }
    if (n.Sg == "m" || n.Sg == "vm") {
      this.lD({ R: n.Sg == "m" ? R.zQ : R.aX, v: n.Os });
    }
  };
  function b2(j, q, m, n, G, W, k, T) {
    kV.call(this);
    this.parent = q;
    this.og = k;
    this.KR = j;
    W.push(this);
    this.fg = m;
    this.iW = n;
    var b = q.gj,
      c = j.v,
      a = m.J.indexOf(j.index) != -1,
      h = null;
    this.lM = J.m("div", a ? "head selected" : "head");
    if (c.add.artb != null) {
      J._g(this.lM, "artb");
      T = c.Li();
    }
    var f = (this.aDr = Math.floor(10 + c.agb / J.IC())),
      U = "height: " + f + "px;";
    if (a && G.a4Q) U += "background-color:rgba(255,50,50,0.4);";
    J.F(this.lM, U);
    this.view = T;
    var Z = (this.ar1 = this.alK.bind(this)),
      u = G.a4J && !this.aKu();
    if (!u) {
      if (j.depth != 0) {
        b.appendChild(this.lM);
        k += f - 0.3;
      }
      if (c.xN() || c.r3())
        if (c.mG()) {
          h = this.a8u = J.m("div", "lpineck");
          b.appendChild(h);
          if (c.xN()) {
            h.addEventListener("contextmenu", Z, !1);
            var i = new a_.PN(
              g$.get([12, 1]),
              "sm",
              "layerstyle",
              j.depth,
              0,
              null
            );
            k += 21;
            i.parent = this;
            h.appendChild(i._);
            var x = c.add.lmfx,
              X = x.masterFXSwitch.v;
            i.xg(X);
            for (var y = 0; y < eu.order.length; y++) {
              var $ = x[eu.C$[y]].v;
              if ($.length == 0) continue;
              for (var H = 0; H < $.length; H++) {
                var i = new a_.PN(
                  g$.get(eu.names[y]),
                  "s",
                  "layerstyle",
                  j.depth,
                  1,
                  [y, H]
                );
                k += 21;
                i.xg(X && $[H].v.enab.v);
                i.parent = this;
                h.appendChild(i._);
              }
            }
          }
          if (c.r3()) {
            var C = c.xE(m).x7;
            if (C) this.wA = J.m("div", "thumb");
            var i = new a_.PN(
              g$.get([12, 55]),
              "fm",
              null,
              j.depth,
              0,
              -1,
              C ? this.wA : null,
              f
            );
            k += C ? f : 21;
            i.parent = this;
            h.appendChild(i._);
            this.aIE = i._;
            this.aIE.addEventListener("contextmenu", Z, !1);
            var x = c.add.SoLd.filterFX.v,
              l = x.filterFXList.v,
              X = x.enab.v;
            i.xg(X);
            for (var y = l.length - 1; y >= 0; y--) {
              var v = l[y].v,
                K = k0.mK(v);
              if (eV.GF[K]) K = eV.GF[K];
              var S = v.Nm.v;
              if (k0.names[K]) S = g$.get(k0.names[K]);
              if (eV.names[K]) S = g$.get(eV.names[K]);
              var o = "afw_" + K,
                i = new a_.PN(S, "f", o, j.depth, 1, y);
              k += 21;
              i.xg(X && v.enab.v);
              i.parent = this;
              h.appendChild(i._);
            }
          }
        }
    }
    var V = c.add.lclr;
    if (V == null) V = 0;
    V = V == 0 ? n.Fx : b2.fn[V];
    this.ah2 = V;
    if (c.D1() && (c.add.lsct == hQ.WR || G.a4J)) {
      var P = { Fx: V, aDV: n.aDV || c.op(31) };
      for (var y = j.children.length - 1; y >= 0; y--) {
        var z = new b2(j.children[y], q, m, P, G, W, k, T);
        k = z.aul;
      }
    }
    this.aul = k;
  }
  b2.prototype = new kV();
  b2.fn = [
    16777215, 16711680, 16748544, 16763904, 4513024, 22015, 11141375, 7829367,
  ];
  b2.prototype.aDT = function () {
    if (this.gq) return;
    var j = this.KR,
      q = j.v,
      m = this.fg,
      n = this.iW,
      f = !0,
      P = !1;
    j.hj(m, this.view, !0);
    var G = J.m("div", "headL"),
      W = J.m("div", "headR");
    this.lM.appendChild(G);
    this.lM.appendChild(W);
    var k = this.lM;
    k.setAttribute("draggable", "true");
    k.addEventListener("dragstart", this.MU.bind(this), !1);
    k.addEventListener("drop", this.Tp.bind(this), !1);
    k.addEventListener("dragover", this.Im.bind(this), !1);
    k.addEventListener("dragenter", J.iO, !1);
    k.addEventListener("dragleave", this.f3.bind(this), !1);
    var T = [],
      b = [null, null, null, null],
      c = q.Iw(),
      a = j;
    while (a.parent) {
      a = a.parent;
      c = c && a.v.Iw();
    }
    if (q.Yx) {
      for (var y = j.index - 1; y >= 0; y--) {
        var U = m.U[y];
        if (!U.Yx) {
          f = U.Iw();
          break;
        }
      }
    }
    var Z = q.Iw() ? (c && f ? 2 : 1) : 0;
    this.gq = J.m("div");
    var h = J.m("div", Z == 0 ? "sqr" : "eye");
    this.gq.appendChild(h);
    h.style.opacity = [0.12, 0.33, 1][Z];
    var u = J.m("div", "space");
    this.QX = J.m("div", "label");
    J.F(
      this.QX,
      "max-width:calc(100% - " +
        (96 + j.depth * 20) +
        "px); margin-top:" +
        (this.aDr - 19) / 2 +
        "px;" +
        (q.wp ? "text-decoration:underline;" : "")
    );
    this.QX.textContent = q.getName();
    this.a0l = J.m("div", "lock");
    this.a7I = J.m("div", "lrfx");
    this.E_ = J.m("div", "arfx");
    var i = this.ar1,
      x = this.aA1.bind(this);
    this.lM.addEventListener("click", x, !1);
    this.lM.addEventListener("contextmenu", i, !1);
    var X = this.ah2;
    if (X != 0) {
      var $ = [X >> 16, (X >> 8) & 255, X & 255];
      for (var y = 0; y < 3; y++) {
        $[y] = "calc(" + $[y] + "*0.7 + (var(--absc)) * 255 * 0.3)";
      }
      J.F(this.gq, "background-color:rgba(" + $.join(",") + ",1);");
    }
    var H = this.aoT.bind(this);
    this.gq.addEventListener("mousedown", H, !1);
    this.gq.addEventListener("mouseover", H, !1);
    this.E_.addEventListener("click", this.a6K.bind(this), !1);
    T[0] = this.gq;
    T[1] = u;
    T[10] = this.QX;
    if (q.D1()) {
      var C = J.m("div", "arrow"),
        l = J.m("div", "folder");
      this.NG(l);
      C.addEventListener("click", this.awx.bind(this), !1);
      T[2] = C;
      T[3] = l;
      C.className = q.add.lsct == hQ.WR ? "open" : "closed";
    } else {
      this.ey = J.m("div", "thumb");
      T[5] = this.ey;
      b2.mJ(this.ey, q.fX);
      this.NG(this.ey);
      if (eV.get(q.add)) J._g(q.fX.canvas, "gsicon");
    }
    var v = q.ex();
    if (v) {
      this.fT = J.m("div", "chain");
      this.i5 = J.m("div", "thumb");
      b2.mJ(this.i5, q.a1n, !0);
      this.fT.style.opacity = v.jS ? 1 : 0;
      this.fT.addEventListener("click", this.a0u.bind(this), !1);
    }
    var K = q.ql() && q.add.vmsk;
    if (q.add.vmsk && !K) {
      this.me = J.m("div", "chain");
      this.sG = J.m("div", "thumb");
      b2.mJ(this.sG, q.azo, !0);
      this.me.style.opacity = q.add.vmsk.jS ? 1 : 0;
      this.me.addEventListener("click", this.apT.bind(this), !1);
    }
    if (q.r3() && q.mG() && q.xE(m).x7) {
      b2.mJ(this.wA, q.aoH, !1);
      this.NG(this.wA);
      this.wA.addEventListener("click", x, !1);
      this.wA.addEventListener("contextmenu", i, !1);
    }
    if (j.index == m.J[0]) {
      var S = q.ma,
        o;
      if (S <= 0) o = this.ey;
      else if (S == 1) o = this.i5;
      else if (S == 3) o = this.wA;
      if (o) o.className = "thumb active";
      if (q.q_ && this.sG) this.sG.className = "thumb active";
    }
    J.F(u, "width:" + Math.max(0, j.depth - 1) * 18 + "px");
    var V = (q.add.lspf != null && q.add.lspf != 0) || n.aDV;
    this.a0l.style.opacity = q.op(31) ? 1 : 0.5;
    T[4] = q.Yx ? J.m("div", "clipp") : null;
    T[6] = v ? this.fT : null;
    T[7] = v ? this.i5 : null;
    T[8] = q.add.vmsk && !K ? this.me : null;
    T[9] = q.add.vmsk && !K ? this.sG : null;
    var z = q.bH,
      E = m.J;
    if (z != 0)
      for (var y = 0; y < E.length; y++)
        if (m.U[E[y]].bH == z) {
          P = !0;
          break;
        }
    if (P) {
      b[0] = J.m("div", q.wN ? "link" : "linkX");
      b[0].addEventListener("click", this.akV.bind(this), !1);
    }
    b[1] = V ? this.a0l : null;
    b[2] = q.xN() ? this.a7I : null;
    b[3] = q.xN() || q.r3() ? this.E_ : null;
    this.E_.className = q.mG() ? "arfx open  gsicon" : "arfx closed  gsicon";
    var A = T;
    for (var y = 0; y < A.length; y++) if (A[y]) G.appendChild(A[y]);
    A = b;
    for (var y = 0; y < A.length; y++) if (A[y]) W.appendChild(A[y]);
  };
  b2.mJ = function (j, q, m) {
    var n = q.canvas;
    J.Ku(n);
    if (m) j.setAttribute("draggable", "true");
    j.appendChild(n);
    J.F(n, n.getAttribute("style") + "; pointer-events:none");
  };
  b2.prototype.NG = function (j) {
    J.PD(
      j,
      function (q) {
        if (this.parent.YA[3] == 0) return;
        J.k$(q);
        J.sP(
          document.body,
          function () {
            clearTimeout(this.auV);
          }.bind(this)
        );
        this.auV = setTimeout(
          function () {
            var m = new fd("rclick", !0);
            m.data = {
              v: this.KR.index,
              ma: this.ma(q),
              yw: J.QR(q, document.body),
            };
            this.k(m);
          }.bind(this),
          600
        );
      }.bind(this)
    );
  };
  b2.B5 = function (j, q) {
    var m = q.getBoundingClientRect();
    return (j.clientY - m.top) / m.height;
  };
  b2.prototype.MU = function (j) {
    j.stopPropagation();
    var q = j.target == this.i5 ? "m" : j.target == this.sG ? "vm" : "l";
    j.dataTransfer.setData(
      "Text",
      JSON.stringify({ Sg: q, Os: this.KR.index })
    );
  };
  b2.prototype.f3 = function (j) {
    J.iO(j);
    this.sz();
  };
  b2.prototype.Tp = function (j) {
    J.iO(j);
    this.sz();
    var q = j.dataTransfer.getData("Text"),
      m = this.parent.fg,
      n = b2.B5(j, this.lM),
      G = this.KR.index;
    if (n > 0.8) {
      var W = !0,
        k = m.root.Zg(G);
      while (k.parent != null) {
        var T = k.parent,
          b = T.children;
        if (b.indexOf(k) != 0) W = !1;
        k = k.parent;
      }
      if (W) {
        G = 0;
        n = 1;
      }
    }
    if (q == "") {
      J.UB(j, this, this.parent.caller.mS.indexOf(m), G + (n > 0.5 ? 0 : 1));
    } else if (q != "--panel") {
      var q = JSON.parse(q),
        c = q.Sg;
      if (c == "l") this.lD({ R: R.Vy, source: q.Os, target: G, FK: n });
      else if (c == "m" || c == "vm")
        this.lD({ R: c == "m" ? R.abe : R.f4, src: q.Os, Xf: G });
      else b2.aCg(j, q, this);
    }
  };
  b2.aCg = function (j, q, m, n) {
    var G = q.Sg,
      W = m.KR.index,
      k = q.Os;
    if (G == "s" || G == "sm") m.lD({ R: R.hY, src: k, Xf: W, UX: q.UX });
    if (G == "f" || G == "fm")
      m.lD({ R: R.ao7, src: k, Xf: W, UX: q.UX, wO: n == null ? 0 : n });
  };
  b2.prototype.Im = function (j) {
    J.iO(j);
    var q = b2.B5(j, this.lM),
      m = this.KR.v.D1() && 0.5 < q && q < 0.8;
    this.sz();
    var n =
      "inset 0 " +
      (m ? 0 : q > 0.5 ? -3 : 3) +
      "px " +
      (m ? "6px" : 0) +
      " var(--text-color)";
    this.lM.style.boxShadow = n;
  };
  b2.prototype.sz = function (j) {
    this.lM.style.boxShadow = "";
  };
  b2.aDQ = -1;
  b2.Ud = !1;
  b2.ayz = function (j) {
    b2.Ud = !1;
    document.body.removeEventListener("mouseup", b2.ayz);
  };
  b2.prototype.aoT = function (j) {
    if (j.button != 0) return;
    if (j.type == "mousedown") {
      b2.Ud = !0;
      document.body.addEventListener("mouseup", b2.ayz, !1);
    }
    if (j.type == "mouseover" && (!b2.Ud || b2.aDQ == this.KR.index)) return;
    J.iO(j);
    this.lD({ R: R.Ov, v: this.KR.index });
    b2.aDQ = this.KR.index;
  };
  b2.prototype.awx = function (j) {
    J.iO(j);
    this.lD({ R: R.aum, v: this.KR.index });
  };
  b2.prototype.a0u = function (j) {
    this.lD({ R: R.c8, v: this.KR.index });
  };
  b2.prototype.apT = function (j) {
    this.lD({ R: R.jx, v: this.KR.index });
  };
  b2.Ds = 0;
  b2.zU = null;
  b2.prototype.m3 = function (j) {
    this.lD({ R: R.dy, v: this.KR.index, name: j });
  };
  b2.prototype.a6K = function (j) {
    this.lD({ R: R.au3, v: this.KR.index });
  };
  b2.prototype.akV = function (j) {
    this.lD({ R: R.xp, v: this.KR.index });
  };
  b2.prototype.alK = function (j) {
    if (j.button != 2 && !J.aJk(j) && !(j.ctrlKey && gn.u0())) return;
    var q = this.ma(j);
    if (q != 3 && j.currentTarget == this.aIE) q = 4;
    if (j.target == this.a7I || j.currentTarget == this.a8u) q = 5;
    var m = new fd("rclick", !0);
    m.data = { v: this.KR.index, ma: q, yw: J.QR(j, document.body) };
    this.k(m);
  };
  b2.prototype.ma = function (j) {
    var q = j.target,
      m = q;
    return m == this.sG
      ? 2
      : m == this.i5
      ? 1
      : m == this.ey
      ? 0
      : m == this.wA
      ? 3
      : -1;
  };
  b2.prototype.aA1 = function (j) {
    var q = j.target,
      u;
    if (
      q == this.gq.firstChild ||
      q == this.E_ ||
      q == this.fT ||
      q == this.me ||
      (q.tagName && q.tagName.toLowerCase() == "input")
    )
      return;
    var m = this.ma(j),
      n = this.parent.fg,
      G = this.KR.index,
      W = n.U[G];
    if (q == this.a0l) {
      this.lD({
        R: R.p4,
        v: G,
        jt: [
          [!1, !1, !1, !1, !1],
          [0, 1, 2, 3, 31],
        ],
      });
      return;
    }
    var k = b2.Ds,
      T = Date.now() - k < 300 && G == b2.zU;
    b2.Ds = Date.now();
    b2.zU = G;
    if (q == this.QX) {
      if (T) {
        this.lM.setAttribute("draggable", "false");
        var b = new bI.va(this.QX, this.m3.bind(this));
      } else this.lD({ R: R.nu, v: G, NM: m, adE: !0 });
      return;
    }
    if (ei == 0 && j.button == 0 && T) {
      if (q == this.QX) return;
      var c = new fd(_.E.w, !0),
        a = new fd(_.E.c, !0),
        f = new fd(_.E.NI, !0);
      if (m == 0 && W.add.SoCo) {
        var U = B.MV.xH(W.add.SoCo.Clr.v);
        a.data = {
          R: _.Y.s0,
          kO: "colorpicker",
          Fx: (U.o << 16) | (U.i << 8) | U.X,
          cy: function (X) {
            var $ = B.MV.Ia({
              X: X & 255,
              i: (X >>> 8) & 255,
              o: (X >> 16) & 255,
            });
            $ = { classID: "null", Clr: { t: "Objc", v: $ } };
            var H = new fd(_.E.w, !0);
            H.l = L.W1;
            H.data = { R: R.o_, Gj: [G], nt: !0, K: { pb: 1, pH: $ } };
            this.k(H);
          }.bind(this),
          kX: !0,
        };
      } else if (
        m == 0 &&
        (eV.get(W.add) || W.add.SoCo || W.add.GdFl || W.add.PtFl)
      )
        a.data = { R: _.Y.UN, kO: bI.Fb.Hy };
      else if (m != 0 && m != -1) a.data = { R: _.Y.UN, kO: bI.Fb.Hy };
      else if (m == 0 && W.add.SoLd) {
        var Z = W.add.SoLd,
          h = Z.generativeDocInfo;
        if (h) a.data = { R: _.Y.UN, kO: bI.Fb.Hy };
        else
          f.data = {
            _D: "placedLayerEditContents",
            SC: { classID: "placedLayerEditContents" },
          };
      } else if (m == 0 && W.add.TySh) {
        c.l = L.G_;
        c.data = { R: "editCurr", lR: G };
      } else a.data = { R: _.Y.s0, kO: "layerstyle", v: G };
      this.k(f.data ? f : a.data ? a : c);
      return;
    }
    if (j.button != 0) return;
    if (m == 1 || m == 3) {
      var i = m == 3 ? W.xE(n).x7 : W.ex();
      u = i.Ea ? (n.I.rO.join("") == "111" ? 1 : 2) : 0;
    }
    var x = { R: R.nu, v: G, NM: m, apN: u, adE: !0 };
    this.lD(x);
  };
  b2.prototype.lD = function (j) {
    var q = new fd(_.E.w, !0);
    q.data = j;
    q.l = L.W1;
    this.k(q);
  };
  b2.prototype.aKu = function () {
    var j = this.KR.v,
      q = j.add,
      m = this.parent.U7.V(),
      n = this.parent.Pe[m].V();
    if (m == 0) {
      if (n[0] && q.SoLd == null && q.TySh == null && j.bm()) return !0;
      if (n[1] && eV.get(q) != null) return !0;
      if (n[2] && q.TySh != null) return !0;
      if (n[3] && q.vstk != null) return !0;
      if (n[4] && q.SoLd != null) return !0;
      return !1;
    }
    if (m == 1) return j.getName().toLowerCase().indexOf(n.toLowerCase()) != -1;
  };
  a_.PN = function (j, q, m, n, G, W, k, T) {
    kV.call(this);
    this.aBm = q;
    this.Hb = m;
    this.index = W;
    this._ = J.m("div", "styleitem");
    this.lM = J.m("div", "head");
    this.aq$ = null;
    if (q == "f") {
      var b = (this.aq$ = J.m("div", "headR"));
      b.textContent = "\u2699";
      this.lM.appendChild(b);
    }
    this.gq = J.m("div", "eye gsicon");
    this.QX = J.m("div", "label");
    this._.appendChild(this.lM);
    this.lM.appendChild(this.gq);
    if (k) {
      this.i5 = k;
      this.lM.appendChild(k);
      J.F(this.lM, "height: " + T + "px");
    }
    this.QX.innerHTML = j;
    J.F(this._, "margin-left: " + (24 + n * 16 + G * 22) + "px");
    this.lM.appendChild(this.QX);
    this.gq.addEventListener("click", this.aoa.bind(this), !1);
    var c = this._;
    c.setAttribute("draggable", "true");
    c.addEventListener("dragstart", this.MU.bind(this), !1);
    if (!0) {
      c.addEventListener("drop", this.Tp.bind(this), !1);
      c.addEventListener("dragover", this.Im.bind(this), !1);
      c.addEventListener("dragenter", J.iO, !1);
      c.addEventListener("dragleave", this.f3.bind(this), !1);
    }
    var a = this.H_.bind(this);
    this._.addEventListener("contextmenu", a, !1);
    this._.addEventListener("click", a, !1);
  };
  a_.PN.prototype = new kV();
  a_.PN.prototype.MU = function (j) {
    j.stopPropagation();
    j.dataTransfer.setData(
      "Text",
      JSON.stringify({ Sg: this.aBm, Os: this.parent.KR.index, UX: this.index })
    );
  };
  a_.PN.prototype.f3 = function (j) {
    J.iO(j);
    this.sz();
  };
  a_.PN.prototype.Tp = function (j) {
    J.iO(j);
    this.sz();
    var q = j.dataTransfer.getData("Text");
    if (q == "") return;
    var q = JSON.parse(q);
    b2.aCg(j, q, this.parent, this.index + (b2.B5(j, this.lM) > 0.5 ? 0 : 1));
  };
  a_.PN.prototype.Im = function (j) {
    J.iO(j);
    var q = b2.B5(j, this.lM) > 0.5;
    this.sz();
    var m = "border-" + (q ? "bottom" : "top");
    this.lM.style[m] = "0.2em solid rgba(0,0,0,0.5)";
  };
  a_.PN.prototype.sz = function (j) {
    this.lM.style.border = "none";
  };
  a_.PN.prototype.xg = function (j) {
    this.gq.style.opacity = j ? 1 : 0.2;
  };
  a_.PN.prototype.H_ = function (j) {
    var q = this.parent.KR.index,
      m = b2.Ds,
      n = Date.now() - m < 300 && q == b2.zU;
    b2.Ds = Date.now();
    b2.zU = q;
    if (j.target == this.gq) return;
    if (j.type == "contextmenu") {
      var G = new fd("rclick", !0);
      G.data = { v: q, ma: 6, yw: J.QR(j, document.body), index: this.index };
      this.k(G);
      return;
    }
    if (n && this.Hb != null) {
      var q = this.parent.KR.index,
        W = new fd(_.E.c, !0);
      if (this.Hb.indexOf("afw_") == 0) {
        var k = this.Hb.slice(4),
          T = gj[k] || k0.Z[k],
          b = j.target == this.aq$;
        if (!b && !T) return;
        W.data = L.wC.Ym(b ? "blendOptions" : k, { v: q, index: this.index });
      } else W.data = { R: _.Y.s0, kO: this.Hb, v: q, index: this.index };
      this.k(W);
    } else {
      if (j.target.className != "thumb")
        this.parent.lD({ R: R.nu, v: q, NM: 0 });
    }
  };
  a_.PN.prototype.aoa = function (j) {
    var q = { fm: R.Re, f: R.AR, sm: R.yz, s: R.Ug }[this.aBm];
    this.parent.lD({ R: q, v: this.parent.KR.index, index: this.index });
  };
  function jq() {
    bI.call(this, "Guide Guy", !1, "---panels/guideguy", bI.Fb.adT);
    this.I7 = null;
    this.QK = new f1(null, B.uO.t0);
  }
  jq.prototype = new bI("");
  jq.prototype.No = function () {
    this.$B = [];
    var j = J.m("div", "form padded");
    this.nA.appendChild(j);
    J.F(j, "width:200px");
    this.nA.appendChild(j);
    var q = J.m("canvas"),
      m = q.getContext("2d");
    q.width = q.height = 160;
    var n = [32, 0, 16, 160, 0, 32, 160, 16, 0, 112, 160, 16],
      G =
        "Margin Left,Margin Top,Margin Right,Margin Bottom,Column Count,Row Count,Column Width,Row Height,Column Gap,Row Gap".split(
          ","
        ),
      W = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
    j.appendChild(this.QK._);
    J.Ft(j);
    for (var y = 0; y < 10; y++) {
      m.clearRect(0, 0, 160, 160);
      m.setTransform(1, 0, 0, 1, 80, 80);
      m.rotate(((y & 3) * Math.PI) / 2);
      m.translate(-80, -80);
      m.fillStyle = "rgba(0,0,0,0.3)";
      if (y < 4) {
        for (var k = 0; k < 12; k += 4) {
          m.fillStyle = k == 0 ? "#000000" : "rgba(0,0,0,0.3)";
          m.fillRect(n[k], n[k + 1], n[k + 2], n[k + 3]);
        }
      } else if (y < 6) {
        var T = 8 * 6;
        m.fillRect(0, 0, T, 160);
        m.fillRect(8 * 7, 0, T, 160);
        m.fillStyle = "#000000";
        m.fillRect(8 * 14, 0, T, 160);
      } else if (y < 8) {
        m.fillRect(0, 0, 16, 160);
        m.fillRect(160 - 16, 0, 16, 160);
        m.fillRect(32, 0, 160 - 64, 160);
        m.fillStyle = "#000000";
        m.fillRect(32, 80 - 8, 160 - 64, 8 * 1);
      } else {
        m.fillRect(0, 0, 8 * 7, 160);
        m.fillRect(8 * 13, 0, 160, 160);
        m.fillStyle = "#000000";
        m.fillRect(8 * 7, 80 - 8, 8 * 6, 8 * 1);
      }
      var b = '<img src="' + q.toDataURL() + '" class="autoscale gsicon" /> ',
        c = new k7(
          b,
          0,
          200,
          null,
          y == 4 || y == 5 ? 0 : 2,
          null,
          null,
          4,
          G[y]
        );
      c.parent = this;
      c.Q(_.E.n, this.arC, this);
      c.q(W[y]);
      c.T();
      this.$B.push(c);
      j.appendChild(c._);
    }
    var a = [
      [11, 14],
      [11, 15, 0],
    ];
    this.JA = [];
    for (var y = 0; y < a.length; y++) {
      var f = new kv(a[y], !0, null, !0);
      this.JA.push(f);
      f.Q("click", this.lU, this);
      j.appendChild(f._);
    }
    for (var y = 0; y < 6; y++) {
      m.setTransform(1, 0, 0, 1, 80, 80);
      m.rotate((Math.floor(y / 3) * Math.PI) / 2);
      m.translate(-80, -80);
      m.clearRect(0, 0, 160, 160);
      m.fillStyle = "rgba(0,0,0,0.3)";
      m.fillRect(0, 0, 160, 160);
      m.clearRect(16, 16, 128, 128);
      m.fillStyle = "#000000";
      var U = y % 3;
      m.fillRect([0, 9, 18][U] * 8, 0, 16, 160);
      var b = '<img src="' + q.toDataURL() + '" class="autoscale gsicon" /> ',
        f = new kv(b, !1, null, !1);
      this.JA.push(f);
      f.Q("click", this.lU, this);
      j.appendChild(f._);
    }
  };
  jq.prototype.T = function () {
    bI.prototype.T.call(this);
    this.QK.T();
    if (this.$B == null) return;
    for (var y = 0; y < this.JA.length; y++) this.JA[y].T();
  };
  jq.prototype.arC = function (j) {
    var q = this.$B,
      m = q.indexOf(j.target),
      n = Math.floor(m / 2),
      G = m & 1,
      W = [];
    for (var y = 0; y < 4; y++) W.push(q[2 * y + G].V());
    var k = -1;
    if (n == 2 && W[2] != 0 && W[3] != 0 && W[4] != 0) k = 4;
    if (n == 3 && W[3] != 0 && W[2] != 0 && W[4] != 0) k = 4;
    if (n == 4 && W[4] != 0 && W[2] != 0 && W[3] != 0) k = 3;
    if (k != -1) q[2 * k + G].q(0);
  };
  jq.prototype.lU = function (j) {
    var q = this.I7,
      m = this.JA.indexOf(j.target),
      n = [[], []];
    if (q == null) return;
    var G = q.h ? q.h.H : new hk(0, 0, q.r, q.$),
      W = G.r,
      k = G.$;
    if (m == 0) {
      var T = [[], []],
        b = this.QK.V();
      for (var y = 0; y < this.$B.length; y++) {
        var c = this.$B[y].V();
        if (y != 4 && y != 5) c = B.uO.Fs(c, q.zv, (y & 1) == 0 ? G.r : G.$, b);
        T[y & 1].push(c);
      }
      var a = [jq.aeG(T[0], G.x, G.x + W), jq.aeG(T[1], G.y, G.y + k)];
      n = jq.Jv(a);
      L.YE.cW(n, q.f8());
    } else if (m == 1) {
    } else {
      m -= 2;
      var f = Math.floor(m / 3),
        a = [[], []];
      a[f].push([G.x, G.x + W / 2, G.x + W, G.y, G.y + k / 2, G.y + k][m]);
      n = jq.Jv(a);
      L.YE.cW(n, q.f8());
    }
    this.aGb(n);
  };
  jq.Jv = function (j) {
    var q = [],
      m = [];
    for (var n = 0; n < 2; n++)
      for (var y = 0; y < j[n].length; y++) {
        q.push([n, j[n][y]]);
        m.push(-1);
      }
    return [q, m];
  };
  jq.prototype.aKZ = function (j) {
    var q = this.a2t.indexOf(j.target);
  };
  jq.prototype.aGb = function (j) {
    var q = new fd(_.E.w, !0);
    q.l = L.Lx;
    q.data = { R: "gids", MK: j };
    this.k(q);
  };
  jq.aeG = function (j, q, m) {
    var n = [],
      G = j[2],
      W = j[3],
      k = j[4],
      T = 0;
    if (G == 0) T++;
    if (W == 0) T++;
    if (k == 0) T++;
    if (T > 1 && G == 0 && W == 0) {
      if (j[0] != 0) n.push(q + j[0]);
      if (j[1] != 0) n.push(m - j[1]);
      return n;
    }
    var b = m - q - j[0] - j[1];
    if (G == 0) {
      if (k == 0) {
        G = Math.floor(b / W);
        k = (b - G * W) / (G - 1);
      } else {
        G = 1;
        while (W * G + k * (G - 1) + W + k <= b) G++;
      }
    } else if (G != 0 && W != 0) {
      if (G * W > b) G = Math.floor(b / W);
      k = (b - G * W) / (G - 1);
    }
    n.push(q + j[0], m - j[1]);
    var W = (b - k * (G - 1)) / G;
    for (var y = 1; y < G; y++) {
      if (k == 0) n.push(q + j[0] + y * W);
      else n.push(q + j[0] + y * W + (y - 1) * k, q + j[0] + y * W + y * k);
    }
    return n;
  };
  jq.prototype.Wz = function (j, q, m) {
    this.I7 = j;
  };
  jq.prototype.BN = function () {
    if (J.JO(this.nA) && this.$B == null) this.No();
    this.T();
  };
  jq.prototype.yp = function (j) {
    this.QK.q(j.q1.WH);
  };
  function aL() {
    bI.call(this, [9, 2], !1, "---panels/properties", bI.Fb.Hy);
    this.aju = null;
    this.fg = null;
    this.a = null;
    this.aiS = -1;
    this.tT = null;
  }
  aL.prototype = new bI("");
  aL.prototype.X3 = function (j, q) {
    this.GM = j;
    this.uu = q;
    j = j - 16;
    q = q - 30;
    var m = this.tT;
    if (m) {
      m.style.width = j + "px";
      m.style.height = q + "px";
      for (var y = 0; y < 3; y++) this.aK9[y].X3(j - 12, q);
    }
  };
  aL.prototype.No = function () {
    this.tT = J.m("div", "padded scrollable");
    this.nA.appendChild(this.tT);
    var j = J.m("span");
    this.tT.appendChild(j);
    this.AJ = [new kv([0, 3]), new kv([12, 73]), new kv([12, 91, 0])];
    for (var y = 0; y < this.AJ.length; y++) {
      var q = this.AJ[y];
      q.Q("click", this.aFa, this);
      j.appendChild(q._);
      if (y == 2) q._.style.marginRight = "0";
    }
    this.tT.appendChild(J.m("hr"));
    this.qU = new aL.aa();
    this.qU.parent = this;
    this.W8 = new aL.MA();
    this.W8.parent = this;
    this.o1 = new aL.RV();
    this.o1.parent = this;
    this.aK9 = [this.qU, this.W8, this.o1];
    this.tT.appendChild(this.qU._);
    this.Mv = J.m("div", "lpfoot");
    this.nA.appendChild(this.Mv);
    this.zi = [];
    for (var y = 0; y < 4; y++) {
      var q = new kv("W");
      q.Q("click", this.x0, this);
      this.zi.push(q);
      this.Mv.appendChild(q._);
    }
    this.X3(this.GM, this.uu);
  };
  aL.prototype.x0 = function (j) {
    var y = this.zi.indexOf(j.target);
    if (y == 1) {
      var q = this.fg,
        m = q.U[q.J[0]],
        n = eV.get(m.add);
      this.qU.aM2.q(k0.i4(n));
      this.qU.a2n();
      return;
    }
    var G = new fd(_.E.w, !0);
    G.l = L.W1;
    if (y == 0) G.data = { R: R.vu };
    if (y == 2) G.data = { R: R.Ov };
    if (y == 3) G.data = { R: R.dh };
    this.k(G);
  };
  aL.prototype.aFa = function (j) {
    var y = this.AJ.indexOf(j.currentTarget);
    this.b$(y);
    this.aFZ(y == 1 ? this.W8.du : -1);
  };
  aL.prototype.b$ = function (j) {
    for (var y = 0; y < 3; y++) {
      this.AJ[y].uy();
      var q = this.aK9[y]._;
      if (q.parentNode == this.tT && y != j) this.tT.removeChild(q);
      if (q.parentNode != this.tT && y == j) this.tT.appendChild(q);
    }
    this.AJ[j].mb();
  };
  aL.prototype.aFZ = function (j) {
    var q = this.fg.J[0],
      m = this.fg.U[q],
      n = j + 1;
    if (j == 1 && m.q_) return;
    var G = new fd(_.E.w, !0);
    G.l = L.W1;
    if (j != 1 && m.q_) {
      G.data = { R: R.nu, v: q, NM: 2 };
      this.k(G);
    }
    G.data = { R: R.nu, v: q, NM: n };
    this.k(G);
  };
  aL.prototype.T = function () {
    bI.prototype.T.call(this);
    if (this.tT == null) return;
    this.Wz(this.fg);
    for (var y = 0; y < 3; y++) {
      this.AJ[y].T();
      this.aK9[y].T();
    }
    lb.uX(
      this.zi,
      ["lrs/clipping", "reload", "lrs/eye", "lrs/bin"],
      [
        [6, 6, 0],
        [1, 12, 2],
        [5, 5],
        [6, 31],
      ]
    );
  };
  aL.prototype.BN = function () {
    if (!J.JO(this.nA)) return;
    if (this.tT == null) {
      this.No();
      this.yp(this.a, fG.HN);
      this.Wz(this.aju);
      this.T();
    }
  };
  aL.prototype.Wz = function (j) {
    this.aju = j;
    if (this.tT == null) return;
    this.qU.Wz(j);
    this.W8.Wz(j);
    this.o1.Wz(j);
    if (j == null || j.J.length == 0 || j.U[j.J[0]] == null) {
      J._g(this.nA, "disabled");
      this.fg = null;
      return;
    } else J.XZ(this.nA, "disabled");
    var q = j.J[0],
      m = j.U[q];
    this.zi[0].q(m.Yx);
    this.zi[1].yl(eV.get(m.add) != null);
    this.zi[2].q(m.Iw());
    var n = j.ac(),
      G = n[0],
      W = n[1];
    if (W.length != 0) {
      var k = G[W[0]],
        T = k.add.vogk,
        b = !1;
      if (T)
        for (var y = 0; y < T.length; y++) {
          var c = T[y].v;
          if (!B.ih.Eg(c)) continue;
          b = !0;
          q = k.Wy;
        }
    }
    q += "," + b;
    if (j != this.fg || this.aiS != q) {
      this.fg = j;
      this.aiS = q;
      if (b) this.b$(2);
      else if ((m.ma < 1 && !m.q_) || eV.get(m.add)) this.b$(0);
      else this.b$(1);
    }
    this.AJ[1].yl(this.W8.du != -1);
    this.AJ[2].yl(b);
  };
  aL.prototype.yp = function (j, q) {
    this.a = j;
    if (this.qU) this.qU.yp(j, q);
    if (this.o1) this.o1.yp(j, q);
  };
  aL.aa = function () {
    kV.call(this);
    this._ = J.m("div", "form");
    this.auT = new aD("Hello");
    this._.appendChild(this.auT._);
    this.Lb = null;
    this.aM2 = null;
    this.fg = null;
    this.a = null;
    this.a6C = -1;
    this.ae7 = null;
    this.awr = null;
    this.HI = new eh(0, !0, !0);
    this.HI.parent = this;
    this.HI.Q(_.E.n, this.avv, this);
    this._.appendChild(this.HI._);
    this.d8 = new g1(!0);
    this.d8.parent = this;
    this.d8.Q(_.E.n, this.aHU, this);
    this.ri = J.m("div", "marged hiline");
    this.ri.appendChild(this.d8._);
    this.qG = new a4("GrFl", !0);
    this.qG.parent = this;
    this.qG.Q(_.E.n, this.aEV, this);
    this.cc = J.m("div", "marged hiline");
    var j =
      "Grad Rvrs Type Algn Angl Dthr Scl gradientsInterpolationMethod Ofst".split(
        " "
      );
    for (var y = 0; y < j.length; y++) {
      var q = this.qG.Vc[j[y]]._;
      this.cc.appendChild(q);
    }
    this.pP = new a4("patternFill", !0);
    this.pP.parent = this;
    this.pP.Q(_.E.n, this.asP, this);
    this.Eq = J.m("div", "marged hiline");
    var j = ["Ptrn", "Angl", "Scl", "Algn", "phase"];
    for (var y = 0; y < j.length; y++) {
      var q = this.pP.Vc[j[y]]._;
      this.Eq.appendChild(q);
    }
    this.OW = {};
    for (var m in eV.names) {
      if (gj[m] == null) continue;
      this.OW[m] = new gj[m]();
      this.OW[m].Q(_.E.n, this.a2n, this);
      this.OW[m].parent = this;
    }
    var n = (this.avp = J.m("div", "marged hiline"));
    this.o0 = new eh(0, !0);
    n.appendChild(this.o0._);
    this.o0.Q(_.E.n, this.bk, this);
    this.aBG = null;
    this.Hr = new lf();
    this.Hr.parent = this;
    this.Hr.Q(_.E.n, this.bk, this);
    n.appendChild(this.Hr._);
    this.gT = new fL();
    this.gT.parent = this;
  };
  aL.aa.prototype = new kV();
  aL.aa.prototype.avv = function (j) {
    var q = this.HI.V(),
      m = this.awr,
      n = new hk(q[0], q[1], q[2], q[3]);
    if (n.Lg(m)) return;
    this.awr = n;
    var G = new fd(_.E.w, !0);
    if (m.r == n.r && m.$ == n.$) {
      G.l = L.Lx;
      G.data = { R: "trsl", p2: n.x - m.x, DK: n.y - m.y };
    } else {
      G.l = L.Fg;
      G.data = { R: "scl", ER: [2, 4], K: new ea(n.r / m.r, n.$ / m.$), Kj: 0 };
    }
    this.k(G);
  };
  aL.aa.prototype.X3 = function (j, q) {
    var m = this.OW;
    for (var n in m) m[n].X3(j, q);
  };
  aL.aa.prototype.T = function () {
    for (var j in this.OW) this.OW[j].T();
    this.qG.T();
    this.pP.T();
    this.Hr.T();
    this.o0.T();
    this.HI.T();
    this.gT.T();
  };
  aL.aa.prototype.bk = function (j) {
    var q = new fd(_.E.w, !0),
      m = this.o0.V(),
      n = this.aBG;
    if (j.target == this.o0 && m[2] == n[2] && m[3] == n[3]) {
      q.l = L.Lx;
      q.data = { R: "trsl", p2: m[0] - n[0], DK: m[1] - n[1] };
    } else {
      var G = R.jo(new hk(m[0], m[1], m[2], m[3])),
        W = this.Hr.ahQ();
      W.artboardRect = { t: "Objc", v: G };
      var k = this.fg,
        T = k.U[k.J[0]],
        b = T.add.artb.guideIndeces;
      if (b) W.guideIndeces = B.S(b);
      q.l = L.W1;
      q.data = { R: R.lN, iB: W };
    }
    this.k(q);
  };
  aL.aa.prototype.aHU = function (j) {
    var q = this.fg,
      m = q.J[0];
    if (q.U[m].add.SoCo == null) return;
    var n = B.S(q.U[m].add.SoCo);
    n.Clr.v = this.d8.V();
    this.W5({ pb: 1, pH: n });
  };
  aL.aa.prototype.aEV = function (j) {
    var q = this.fg,
      m = q.J[0];
    if (q.U[m].add.GdFl == null) return;
    this.W5({ pb: 2, pH: this.qG.V() });
  };
  aL.aa.prototype.asP = function (j) {
    this.W5({ pb: 3, pH: this.pP.V() });
  };
  aL.aa.prototype.W5 = function (j) {
    this.asg(L.W1, { R: R.o_, Gj: [this.fg.J[0]], nt: !0, K: j });
  };
  aL.aa.prototype.a2n = function (j) {
    this.asg(L.vP, { R: "edit_layer", K: this.aM2.V() });
  };
  aL.aa.prototype.asg = function (j, q) {
    var m = new fd(_.E.w, !0);
    m.l = j;
    m.data = q;
    this.k(m);
  };
  aL.aa.prototype.Wz = function (j, q) {
    var m = g$.get([0, 3]),
      n = !1,
      G = null;
    this.fg = j;
    if (j && j.U.length > 0 && j.J.length != 0 && j.U[j.J[0]]) {
      var W = j.U[j.J[0]],
        k = eV.get(W.add);
      if (k != null && this.OW[k] != null) {
        G = this.OW[k]._;
        this.aM2 = this.OW[k];
        this.OW[k].q(B.S(W.add[k]));
        if (j.J[0] != this.a6C) {
          var T = j.ht(j.J[0] - 1);
          this.ae7 = B.OA(T);
        }
        this.OW[k].OU(this.ae7);
        m = g$.get(eV.names[k]);
      }
      if (k == null && W.add.artb == null) {
        var b = (this.awr = B.b.mE(L.Dq.Fj(j)));
        n = !b.jG();
        var c = j.Hx();
        b.x -= c.x;
        b.y -= c.y;
        this.HI.q([b.x, b.y, b.r, b.$], [j.zv, j.r, this.a.q1.WH]);
      }
      if (W.add.SoCo) {
        G = this.ri;
        this.d8.q(W.add.SoCo.Clr.v);
        m = g$.get([6, 48, 0, 0]);
      }
      if (W.add.GdFl) {
        G = this.cc;
        this.qG.update(j, W.add.GdFl);
        m = g$.get([6, 48, 0, 1]);
      }
      if (W.add.PtFl) {
        G = this.Eq;
        this.pP.update(j, W.add.PtFl);
        m = g$.get([6, 48, 0, 2]);
      }
      if (W.add.artb) {
        var a = W.add.artb,
          f = W.Li();
        G = this.avp;
        this.Hr.avx(a);
        var U = (this.aBG = [f.x, f.y, f.r, f.$]);
        this.o0.q(U, [j.zv, j.r, this.a.q1.WH]);
        m = g$.get([1, 16, 0]);
      }
      var Z = W.add.SoLd;
      if (Z && Z.generativeDocInfo) {
        var h = Z.Idnt.v,
          u = j.dp(h);
        this.gT.q(u.raw.buffer);
        G = this.gT._;
      }
      this.a6C = j.J[0];
    }
    if (G != this.Lb) {
      if (this.Lb) this._.removeChild(this.Lb);
      if (G != null) this._.appendChild(G);
      this.Lb = G;
    }
    this.auT.q(m);
    this.HI._.style.display = n ? "" : "none";
  };
  aL.aa.prototype.yp = function (j, q) {
    this.a = j;
    this.qG.yp(j, q);
    this.pP.yp(j, q);
    if (q == fG.Tz) this.Wz(this.fg, j);
    for (var m in this.OW) this.OW[m].yp(j, q);
  };
  aL.MA = function () {
    kV.call(this);
    this._ = J.m("div", "form");
    this.fg = null;
    this.du = 0;
    var j = J.m("span", "fitem");
    this._.appendChild(j);
    this.AJ = [new kv([6, 2]), new kv([6, 3]), new kv([6, 50])];
    for (var y = 0; y < this.AJ.length; y++) {
      var q = this.AJ[y];
      q.Q("click", this.ahj, this);
      j.appendChild(q._);
    }
    this.fe = new ho([12, 74], 0, 255);
    this.fe.Q(_.E.n, this.tS, this);
    this._.appendChild(this.fe._);
    this.qk = new ho([7, 6], 0, 500, "px", 2, !0);
    this.qk.Q(_.E.n, this.tS, this);
    this._.appendChild(this.qk._);
    this.ae4 = new kv([4, 11], null, null, !0);
    this.ae4.Q("click", this.a9w, this);
  };
  aL.MA.prototype = new kV();
  aL.MA.prototype.a9w = function () {
    var j = new fd(_.E.w, !0);
    j.l = L.vP;
    j.data = { R: "start", QF: "nvrt" };
    this.k(j);
  };
  aL.MA.prototype.tS = function (j) {
    var q = this.fe.V(),
      m = this.qk.V(),
      n = new fd(_.E.w, !0);
    n.l = L.W1;
    n.data = { R: R.Z0, oq: this.fg.J[0], i1: { jA: this.du, fe: q, qk: m } };
    this.k(n);
  };
  aL.MA.prototype.T = function () {
    for (var y = 0; y < this.AJ.length; y++) this.AJ[y].T();
    this.fe.T();
    this.qk.T();
    this.ae4.T();
  };
  aL.MA.prototype.Wz = function (j) {
    this.fg = j;
    this.ll();
  };
  aL.MA.prototype.ahj = function (j) {
    this.ll(this.AJ.indexOf(j.currentTarget));
    this.parent.aFZ(this.du);
  };
  aL.MA.prototype.ll = function (j) {
    var q = this.fg,
      m = this.AJ;
    for (var y = 0; y < 3; y++) {
      var n = m[y];
      n.uy();
      n.Ub();
    }
    if (q == null || q.U.length == 0 || q.J.length == 0 || q.U[q.J[0]] == null)
      return;
    var G = -1,
      W = q.U[q.J[0]];
    if (W.r3() && W.xE(q).x7 != null) {
      m[2].hC();
      G = 2;
    }
    if (W.add.vmsk) {
      m[1].hC();
      G = 1;
    }
    if (W.ex()) {
      m[0].hC();
      G = 0;
    }
    if (j != null) G = j;
    else if (W.q_) G = 1;
    else if (W.ma == 3) G = 2;
    else if (W.ma == 1) G = 0;
    this.du = G;
    if (G == -1) {
      this.fe.Ub();
      this.qk.Ub();
      return;
    }
    var k = W.K$(G);
    this.fe.hC();
    this.qk.hC();
    this.fe.q(k.fe);
    this.qk.q(k.qk);
    m[G].mb();
    var T = this.ae4._;
    if (G == 0) this._.appendChild(T);
    else if (T.parentNode == this._) this._.removeChild(T);
  };
  aL.RV = function () {
    kV.call(this);
    this._ = J.m("div", "form");
    this.I7 = null;
    this.a = null;
    this._f = -1;
    this.HI = new eh(0, !1);
    this.Q6 = new ho([12, 15], -180, 180, "\xB0", 2);
    this.tk = new eh(1, !0);
    this.GO = new ho([12, 94, 0], 0, 100, null, 2);
    this.pF = new ho([12, 78], 3, 30);
    this.pT = new kv(["\u279C  ", [12, 76, 0]], null, null, !0);
    this.HI.Q(_.E.n, this.ez, this);
    this.Q6.Q(_.E.n, this.ez, this);
    this.tk.Q(_.E.n, this.ez, this);
    this.GO.Q(_.E.n, this.ez, this);
    this.pF.Q(_.E.n, this.ez, this);
    this.pT.Q("click", this.ez, this);
  };
  aL.RV.prototype = new kV();
  aL.RV.prototype.T = function () {
    this.HI.T();
    this.Q6.T();
    this.tk.T();
    this.GO.T();
    this.pF.T();
  };
  aL.RV.prototype.ez = function (j) {
    var q = this.I7,
      m = B.ih.Ht(q),
      n = j.target.V(),
      G = [this.HI, this.Q6, this.tk, this.GO, this.pF, this.pT].indexOf(
        j.target
      );
    if (G == 0) {
      var W = q.Hx(),
        k = [],
        T = (k[0] = n[0] + W.x),
        b = (k[1] = n[1] + W.y);
      k[2] = T + n[2];
      k[3] = b + n[3];
      n = k;
    }
    if (G == 1) n = (n * Math.PI) / 180;
    var c = { 0: 1, 1: 2, 2: 3, 3: 3, 4: 4 }[G];
    m[c] = n;
    var a = new fd(_.E.w, !0);
    a.l = L.W1;
    a.data = { R: R.$I, K: m, akU: G == 5 };
    this.k(a);
  };
  aL.RV.prototype.Wz = function (j) {
    var q = this._;
    this.I7 = j;
    if (j == null) return;
    var m = this.a,
      n = [j.zv, j.r, m.q1.WH],
      G = B.ih.Ht(j),
      W = G[0],
      k = G[1];
    if (k == null) return;
    var T = W != this._f;
    this._f = W;
    if (T) J.dI(q);
    if (T) q.appendChild(this.HI._);
    if (T) q.appendChild(this.Q6._);
    var b = j.Hx();
    this.HI.q([k[0] - b.x, k[1] - b.y, k[2] - k[0], k[3] - k[1]], n);
    this.Q6.q((G[2] * 180) / Math.PI);
    if (W == 2) {
      if (T) q.appendChild(this.tk._);
      var c = G[3];
      this.tk.q(c, n);
    }
    if (W == 7 || W == 8) {
      if (T) q.appendChild(this.GO._);
      this.GO.q(G[3]);
    }
    if (W == 8) {
      if (T) q.appendChild(this.pF._);
      this.pF.q(G[4]);
    }
    q.appendChild(this.pT._);
  };
  aL.RV.prototype.yp = function (j, q) {
    this.a = j;
    this.Wz(this.I7);
  };
  function hF(j) {
    bI.call(this, j.name, !0);
    this.fg = j;
    this.a = null;
    this.DN = new ln(this.nA);
    this.DN.parent = this;
  }
  hF.prototype = new bI();
  hF.prototype.yb = function () {
    this.fg = null;
  };
  hF.I4 = (function () {
    var j = document.createElement("canvas"),
      q = document.createElement("canvas"),
      m = document.createElement("canvas"),
      n = 16,
      G = B.j(16 * 16 * 4);
    B.L_(G, n, n, 8);
    var W = B.scale.oO(G, n, n);
    return {
      f6: j,
      aL6: q,
      axv: m,
      yJ: j.getContext("2d"),
      akP: q.getContext("2d"),
      afl: m.getContext("2d"),
      pV: W,
    };
  })();
  hF.prototype.a5g = function () {
    if (this.fg.Dw())
      return window.confirm(
        g$.get([22, 6, 3]) + " " + this.fg.name + ". " + g$.get([22, 6, 4])
      );
    return !0;
  };
  hF.prototype.yp = function (j, q) {
    this.a = j;
  };
  hF.prototype.Wz = function (j) {
    this.BN();
    this.ip();
  };
  hF.prototype.X3 = function (j, q) {
    if (j <= 0 || q <= 0) return;
    this.GM = j;
    this.uu = q;
    var m = this.fg,
      n = hF.I4,
      G = J.IC();
    m.I.yJ.r = Math.floor(j * G);
    m.I.yJ.$ = Math.floor(q * G);
    J.Q0(n.f6, j, q);
    J.Q0(n.aL6, j, q);
    J.Q0(n.axv, j, q);
    J.Q0(fS.l4(), j, q);
    if (m.I.k3 == 0) m.I.k3 = L.Lr.gp(m.r, m.$, j * G, q * G);
    this.ip();
  };
  hF.prototype.BN = function () {
    var j = this.nA.firstChild,
      q = hF.I4,
      m = fS.tx && ei == 0;
    if ((!m && j == fS.l4()) || (m && j == q.f6)) this.nA.removeChild(j);
    var n = m ? fS.l4() : q.f6;
    if (!J.JO(n)) this.nA.appendChild(n);
  };
  hF.prototype.ip = function () {
    if (this.a == null) return;
    var j = this.fg,
      q = fS.tx && ei == 0;
    if (q) this.amj();
    else this.mi();
  };
  hF.prototype.amj = function () {
    if (fS.tx && hF.aLS == null) {
      var j = (hF.aLS = []),
        q = [0, 2, 8, 32, 128];
      for (var y = 0; y < 5; y++)
        j[y] = [new hF.a$(!1, q[y], !1), new hF.a$(!0, q[y], !1)];
      j.push([new hF.a$(!1, 0, !0), new hF.a$(!0, 0, !0)]);
    }
    var m = this.fg,
      n = hF.I4,
      u,
      X = 0,
      S,
      o;
    if (m.br == null) return;
    var G = m.I,
      W = G.yJ.r,
      k = G.yJ.$,
      T = fS.lB;
    n.yJ.clearRect(0, 0, W, k);
    var b = this.anY(m);
    if (G.JM == null || G.JM.r != W || G.JM.$ != k) G.JM = new fS.Rx(W, k);
    if (b) {
      var c = Date.now(),
        a = navigator.userAgent.toLowerCase();
      if (a.indexOf("safari") != -1 && a.indexOf("chrome") == -1) {
        var f = k,
          U = new Uint8Array(n.yJ.getImageData(0, 0, W, f).data.buffer);
        G.JM.set(U, new hk(0, 0, W, f));
      } else G.JM.set(n.yJ.canvas);
      this.Wp = !0;
    } else if (this.a.sB) {
      if (this.Wp) {
        fS.VF(G.JM);
        fS.Db(1);
        this.Wp = !1;
      }
      var Z = B.uO.XF,
        U = new Uint8Array(m.I.na.data.buffer);
      G.JM.set(U, new hk(0, 0, Z, k));
      var U = new Uint8Array(m.I.CD.data.buffer);
      G.JM.set(U, new hk(0, 0, W, Z));
      var U = new Uint8Array(n.yJ.getImageData(0, k - Z, W, Z).data.buffer);
      G.JM.set(U, new hk(0, k - Z, W, Z));
      this.Wp = !0;
    } else if (this.Wp) {
      fS.VF(G.JM);
      fS.Db(1);
      this.Wp = !1;
    }
    var h = G.gS(0, 0);
    if (hF.aCU == null) hF.aCU = new Float32Array(4 * 1024);
    var i = [0, 0, 0, 0],
      x = hF.aCU;
    if (m.add.artd) {
      x.fill(0);
      i = hF.Gq(m);
      var $ = m.r,
        H = m.$,
        K = 0;
      for (var y = 0; y < m.U.length; y++) {
        var C = m.U[y],
          l = C.add.artb;
        if (l == null || !C.Iw()) continue;
        var v = C.Li();
        x[X] = v.x / $;
        x[X + 1] = v.y / H;
        x[X + 2] = v.r / $;
        x[X + 3] = v.$ / H;
        X += 4;
        if (X == x.length) break;
      }
      if (X > 2 * 4) K++;
      if (X > 8 * 4) K++;
      if (X > 32 * 4) K++;
      u = hF.aLS[K + 1];
      x = new Float32Array(x.buffer, 0, [2, 8, 32, 128][K] * 4);
    } else u = hF.aLS[m.EK ? 5 : 0];
    var V = m.Oq();
    if (V == null) u = u[0];
    else {
      u = u[1];
      o = V[m.add.fcmy == 1 ? 6 : 4];
      S = V[2];
    }
    fS.axB(W, k);
    fS.Db(0);
    fS.axB(W, k);
    u.yP();
    var P = new k$();
    P.scale(W, k);
    P.concat(G.WQ(!0));
    P.scale(1 / m.r, 1 / m.$);
    var z = [P.Sd, P.X, 0, P.ra, P.Jy, 0, P.Tt, P.BL, 1];
    u.cu(
      G.JM.vD,
      m.br.vD,
      new Float32Array(z),
      new Float32Array([W / 8, k / 8, h.x / W, h.y / k]),
      m.r,
      m.$,
      1 / m.I.k3,
      W,
      k,
      new Float32Array(i),
      x,
      new Float32Array(B.kz.up(B.kz.a1M(G.rO))),
      o,
      S
    );
    T.drawArrays(T.TRIANGLES, 0, 6);
  };
  hF.Gq = function (j) {
    return [0, 0, 0, 0];
  };
  hF.aKs = function (j) {
    var q = B.MV.xH(j.v),
      m = [q.o / 255, q.i / 255, q.X / 255, 1];
    for (var y = 0; y < 4; y++) m[y] = Math.min(1, m[y]);
    return m;
  };
  hF.y9 = function (j, q) {
    var m = j[2] * 255;
    if (fS.tx) m = q ? 0 : Math.max(2, m);
    return "rgba(" + j[0] * 255 + "," + j[1] * 255 + "," + m + "," + j[3] + ")";
  };
  hF.Ch = function (j) {
    var q = j.length;
    if (fS.tx)
      for (var y = 0; y < q; y += 4) {
        if (j[y + 2] == 0) j[y + 2] = 3;
      }
  };
  hF.prototype.mi = function () {
    var j = this.fg,
      q = hF.I4;
    if (ei == 0 && j.buffer == null) return;
    var m = j.I,
      n = m.yJ,
      G = n.r,
      W = n.$,
      k = new hk(0, 0, j.r, j.$);
    q.yJ.clearRect(0, 0, G, W);
    var T = j.add.prvw == 0;
    if (ei == 1 && T) {
      q.yJ.fillStyle = "white";
      q.yJ.fillRect(-5e3, -5e3, 2e4, 2e4);
    }
    var b = m.WQ(!0),
      c = b.P();
    c.BR();
    if (ei != 0) {
    } else if (j.add.artd == null) {
      q.yJ.save();
      var a = c.uL(new ea(0, 0));
      c.translate(-a.x, -a.y);
      q.yJ.translate(Math.round(a.x), Math.round(a.y));
      q.yJ.fillStyle = ei == 0 ? q.pV : "#ffffff";
      if (j.EK) q.yJ.fillRect(-5e3, -5e3, 2e4, 2e4);
      else {
        this.s1(B.b._c(k), c, q.yJ);
        q.yJ.fill();
      }
      q.yJ.restore();
    } else {
      q.yJ.fillStyle = hF.y9(hF.Gq(j));
      q.yJ.fillRect(0, 0, G, W);
      q.yJ.save();
      q.yJ.setTransform(c.Sd, c.X, c.ra, c.Jy, c.Tt, c.BL);
      var f = j.root.children;
      for (var y = 0; y < f.length; y++) {
        var U = f[y].v;
        if (U.add.artb == null || !U.Iw()) continue;
        var Z = U.Li(),
          h = U.U3();
        if (h != 0) continue;
        q.yJ.fillStyle = q.pV;
        q.yJ.save();
        q.yJ.scale(1 / m.k3, 1 / m.k3);
        q.yJ.fillRect(m.k3 * Z.x, m.k3 * Z.y, Z.r * m.k3, Z.$ * m.k3);
        q.yJ.restore();
      }
      q.yJ.restore();
    }
    var c = m.WQ(!0);
    c.BR();
    if (ei == 1) {
      q.yJ.save();
      var u = B.b._c(m.yJ);
      B.b.u(u.L, m.WQ(!0), u.L);
      var i = B.b.YU(u.L);
      q.yJ.setTransform(c.Sd, c.X, c.ra, c.Jy, c.Tt, c.BL);
      j.root.xv(j, q.yJ, this.a, i);
      q.yJ.restore();
      q.yJ.save();
      q.yJ.fillStyle = "#ffffff";
      q.yJ.globalCompositeOperation = "destination-over";
      var x = j.add.arts;
      for (var y = 0; y < x.length; y++) {
        var i = B.b.RD(x[y].gX);
        this.s1(B.b._c(i), c, q.yJ);
        if (T) q.yJ.stroke();
        else q.yJ.fill();
      }
      q.yJ.restore();
    } else if (ei == 0) {
      jz.Ip(m.yJ);
      var X = n,
        $ = j.XU;
      if ($ && $.Jn(k)) $ = null;
      if (!j.EK) {
        var H = $;
        if (H == null) H = k;
        var C = B.b._c(H).L;
        B.b.u(C, c, C);
        var i = B.b.YU(C);
        X = n.TM(i);
      }
      if (!X.jG()) {
        var l = new Uint8Array(jz.UT.buffer, 0, X.C() * 4);
        l.fill(0);
        var v = j.buffer,
          K = j.Oq(),
          S = B.oM(v),
          o = B.TN(S);
        if (K && S != 8) {
          v = v.slice(0);
          for (var y = 0; y < v.length; y++) if (v[y] > o) v[y] = o;
          ICC.U.applyLUT(K[j.add.fcmy == 1 ? 5 : 3], K[2], v, v);
        }
        B.scale.Vz(v, k, b, l, X, j.EK);
        if (K && S == 8) {
          ICC.U.applyLUT(K[j.add.fcmy == 1 ? 5 : 3], K[2], l, l);
        }
        if (m.rO[0] + m.rO[1] + m.rO[2] != 3) B.kz.apb(l, l, B.kz.a1M(m.rO));
        if ($) q.afl.clearRect(X.x, X.y, X.r, X.$);
        else q.afl.clearRect(0, 0, G, W);
        q.afl.putImageData(
          new ImageData(new Uint8ClampedArray(l.buffer, 0, l.length), X.r, X.$),
          X.x,
          X.y
        );
      }
      q.yJ.drawImage(q.axv, 0, 0);
      q.yJ.getImageData(0, 0, 1, 1);
    } else if (ei == 2) {
      if (j.add.prvw != 1) {
        q.yJ.resetTransform();
        hF.Y.apy(j, q.yJ, this.a);
      } else {
        var V = JSON.stringify(j.U[j.J[0]].Y.list),
          P,
          E = 1e3,
          A = 1e3;
        if (V == this.a4K) P = this.aIy;
        else {
          this.a4K = V;
          this.aIy = P = NoteMaker.shape(j);
        }
        var z = new ToContext2D(q.yJ);
        q.yJ.resetTransform();
        q.yJ.clearRect(0, 0, m.yJ.r, m.yJ.$);
        q.yJ.translate(m.yJ.r / 2 + m.l0.x, m.yJ.$ / 2 + m.l0.y);
        q.yJ.scale(m.QI, m.QI);
        q.yJ.translate(-E / 2, -A / 2);
        NoteMaker.pe(P, z, E, AU.a5l(j.Y.ZY, j));
      }
    }
    if (ei != 2) this.anY(j);
  };
  hF.prototype.anY = function (j) {
    var q = j.I,
      m = q.rO[0] + q.rO[1] + q.rO[2],
      n = hF.I4,
      G = !1,
      W = [];
    for (var y = 0; y < j.J.length; y++) {
      var k = j.U[j.J[y]];
      if (k == null) continue;
      var T = k.ma;
      if (T != 1 && T != 3) continue;
      var b = T == 1 ? k.ex() : k.xE(j).x7;
      if (b.Ea) W.push(b);
    }
    for (var y = 0; y < j._E.length; y++) if (j._E[y].Ea) W.push(j._E[y]);
    for (var y = 0; y < W.length; y++) {
      var b = W[y];
      this.auZ(b, q, W.length == 1 && m == 0 ? 2 : 1, b.color, b.Fx);
      G = !0;
    }
    var c = this.a;
    G = this.aGZ(j, n.yJ, q, W.length != 0) || G;
    if (j.h && c.x_ && c.q1.hl) {
      this.auZ(j.h, q, 0, 0, null);
      G = !0;
    }
    return G;
  };
  hF.prototype.auZ = function (j, q, m, n, G) {
    var W = 0;
    if (G)
      W = (Math.round(G.X) << 16) | (Math.round(G.i) << 8) | Math.round(G.o);
    var k = q.WQ(!0),
      T = q.yJ,
      b = new hk(0, 0, q.fg.r, q.fg.$),
      c = hF.I4;
    jz.Ip(q.yJ);
    jz.LL.fill(n);
    jz.UT.fill(0);
    var a = j.N,
      f = j.H;
    B.scale.u(a, f, k, jz.LL, T);
    if (m == 0) {
      var U = new Uint32Array([4278190080, 4294967295]);
      hF.Ch(new Uint8Array(U.buffer));
      B.h.aGG(jz.LL, jz.UT, T, U, J.IC() > 1.9);
    } else {
      var Z = Date.now(),
        h = window.locStor.getItem("__qmc");
      B.h.aaB(jz.LL, jz.UT, T, m, h == null ? 16711680 : h);
      hF.Ch(jz.UT);
    }
    var u = new ImageData(new Uint8ClampedArray(jz.UT.buffer), T.r, T.$);
    c.akP.putImageData(u, 0, 0);
    c.yJ.save();
    if (m != 0) {
      var i = new hk(0, 0, b.r, b.$),
        x = k.P();
      x.BR();
      this.s1(B.b._c(i), x, c.yJ);
      c.yJ.clip();
    }
    c.yJ.drawImage(c.aL6, 0, 0);
    c.yJ.restore();
  };
  hF.prototype.aGZ = function (j, q, m, n) {
    var G =
        j.W.qb != null ||
        j.W.cT != null ||
        j.W.w2 != null ||
        j.W.$p != null ||
        j.W.v6 != null ||
        j.W.x$ != null ||
        j.W.eT.length != 0 ||
        j.W.Z9.length != 0,
      W = this.a,
      k = W.q1,
      T = cW.LC[W.U6],
      b = Math.round(12 * J.IC()),
      c = b / j.I.k3,
      a = m.WQ(!0);
    a.BR();
    q.save();
    q.setTransform(a.Sd, a.X, a.ra, a.Jy, a.Tt, a.BL);
    var f = hF.Gq(j)[0];
    f = f < 0.5 ? f + 0.5 : f - 0.5;
    f = "" + Math.round(f * 255).toString(16);
    while (f.length < 2) f = "0" + f;
    q.font = c + "px sans-serif";
    if (j.add.artd) {
      q.fillStyle = "#" + f + f + f;
      for (var y = 0; y < j.U.length; y++) {
        var U = j.U[y];
        if (U.add.artb == null || !U.Iw()) continue;
        var Z = U.Li();
        q.save();
        q.beginPath();
        q.rect(Z.x, Z.y - 2 * c, Z.r, 2 * c);
        q.clip();
        q.fillText(U.getName(), Z.x + 2, Z.y - c * 0.7);
        q.beginPath();
        q.restore();
        G = !0;
      }
    }
    if (j.add.arts && W.RW == L.eO) {
      var h = j.add.arts;
      for (var y = 0; y < h.length; y++) {
        var Z = h[y],
          u = B.b.RD(Z.gX),
          i = (y + 1 + "").padStart(2, "0");
        i += " - " + Z.eA;
        q.save();
        q.beginPath();
        q.fillStyle = Z.J ? "#cce6ff" : "#dddddd";
        q.rect(u.x, u.y, q.measureText(i).width + c, c * 1.5);
        q.fill();
        q.fillStyle = "black";
        q.fillText(i, u.x + c / 2, u.y + c * 1.1);
        q.restore();
      }
      G = !0;
    }
    function x(g2) {
      return g2 == 1 || g2 == 2 || g2 == 4 || g2 == 5;
    }
    var X = hF.y9([0.3, 0.5, 1, 1]),
      $ = hF.y9([1, 1, 1, 1]),
      H = hF.y9([0.7, 0.7, 0.7, 1]);
    if (W.x_ && k.GA) {
      q.fillStyle = q.strokeStyle = X;
      q.lineWidth = 1.5 / m.k3;
      var C = j.ac(),
        l = C[0],
        v = C[1];
      for (var K = 0; K < v.length; K++) {
        var U = l[v[K]],
          S = U.add.vmsk,
          o = S.D,
          V = B.b.bh(o);
        this.s1(V, null, q);
        q.stroke();
        G = !0;
        var P = (3 * J.IC()) / m.k3,
          z = P * 1.5;
        for (var y = 0; y < S.PG.length; y++) {
          var E = B.z.aFE(o, S.PG[y]);
          if (E == null) continue;
          var A = E.x,
            N = E.y;
          q.beginPath();
          var Q = y == 0;
          if (S.Rl) Q = !Q;
          if (Q) {
            q.moveTo(A - z, N - z);
            q.lineTo(A + z, N + z);
            q.moveTo(A - z, N + z);
            q.lineTo(A + z, N - z);
            q.stroke();
          } else {
            q.arc(A, N, z, 0, 2 * Math.PI);
            q.save();
            q.globalCompositeOperation = "destination-out";
            q.fill();
            q.restore();
            q.stroke();
          }
          G = !0;
        }
        if (j.J.length != 1) continue;
        var e = -1,
          Y = -1,
          d = -1;
        for (var y = 0; y < o.length; y++) {
          if (o[y].e > 5) continue;
          if (o[y].e == 0 || o[y].e == 3) {
            Y = y + 1;
            d = o[y].length;
            if (o[y].Np != -1) e++;
            continue;
          }
          if (S.J.indexOf(e) != -1) {
            var A = o[y].Ii.x,
              N = o[y].Ii.y;
            q.fillRect(A - P * 0.8, N - P * 0.8, 2 * P * 0.8, 2 * P * 0.8);
          }
          if (S.U9.indexOf(y) != -1) {
            var I = o[y],
              O = [I.Ii];
            q.beginPath();
            q.moveTo(I.kt.x, I.kt.y);
            q.lineTo(I.Ii.x, I.Ii.y);
            q.lineTo(I._$.x, I._$.y);
            var s = Y + ((y + d - Y - 1) % d),
              p = Y + ((y + d - Y + 1) % d),
              F = o[s],
              g = o[p];
            if (F && x(F.e) && S.U9.indexOf(s) == -1) {
              q.moveTo(F.Ii.x, F.Ii.y);
              q.lineTo(F._$.x, F._$.y);
              O.push(F._$);
            }
            if (g && x(g.e) && S.U9.indexOf(p) == -1) {
              q.moveTo(g.Ii.x, g.Ii.y);
              q.lineTo(g.kt.x, g.kt.y);
              O.push(g.kt);
            }
            q.stroke();
            if (!I.Ii.Lg(I.kt)) O.push(I.kt);
            if (!I.Ii.Lg(I._$)) O.push(I._$);
            for (var w = 0; w < O.length; w++) {
              var E = O[w],
                A = E.x,
                N = E.y;
              if (w == 0 && (I.e == 2 || I.e == 5))
                q.fillRect(A - 1.2 * P, N - 1.2 * P, 2.4 * P, 2.4 * P);
              else {
                q.beginPath();
                q.arc(A, N, P * 1.2, 0, 2 * Math.PI);
                q.fill();
                if (w != 0) q.fillStyle = $;
                q.beginPath();
                q.arc(A, N, P * 0.8, 0, 2 * Math.PI);
                q.fill();
                q.fillStyle = X;
              }
            }
          }
          G = !0;
        }
      }
      if (j.PU != -1 && [L.cS, L.$o, L.Ij].indexOf(W.RW) != -1) {
        var U = j.GA[j.PU],
          S = U.add.vmsk,
          o = S.D,
          V = B.b.bh(o);
        this.s1(V, null, q);
        q.stroke();
        G = !0;
      }
    }
    q.lineWidth = 1 / m.k3;
    if (j.W.EF) {
      q.fillStyle = q.strokeStyle = X;
      var g = { L: [], RC: [] },
        r = hF.aby;
      if (r == null) {
        r = hF.aby = { L: [1, 0], RC: ["M"] };
        for (var y = 1; y < 30; y++) {
          var eQ = (Math.PI * 2 * y) / 30;
          r.L.push(Math.cos(eQ), Math.sin(eQ));
          r.RC.push("L");
        }
        r.RC.push("Z", "M", "L", "M", "L");
        r.L.push(-0.5, 0, 0.5, 0, 0, -0.5, 0, 0.5);
      }
      for (var y = 0; y < j.W.EF.length; y++) {
        var F = L.gd.a8i(j.W.EF[y], m),
          t = new k$(F[0], 0, 0, F[0], F[1], F[2]);
        B.b.concat(g, r, t);
      }
      this.s1(g, null, q);
      q.stroke();
      G = !0;
    }
    var dq = new k$(1, 0, 0, 1, 0.5 / m.k3, 0.5 / m.k3);
    if (j.EK) {
      q.fillStyle = q.strokeStyle = X;
      var g = {
        L: [0, 0, j.r, 0, j.r, j.$, 0, j.$],
        RC: ["M", "L", "L", "L", "Z"],
      };
      this.s1(g, dq, q);
      q.stroke();
      G = !0;
    }
    if (j.W.Sb) {
      q.fillStyle = q.strokeStyle = hF.y9([0, 0, 0, 0.5]);
      this.s1(j.W.Sb, null, q, !0);
      q.fill("evenodd");
    }
    q.strokeStyle = X;
    q.fillStyle = $;
    if (j.W.w2) {
      this.s1(j.W.w2, dq, q);
      q.stroke();
    }
    if (j.W.v6) {
      this.s1(j.W.v6, dq, q);
      q.lineWidth = (J.IC() * 3.5) / m.k3;
      q.stroke();
    }
    var D = hF.r2(j.W.ee, q, m);
    q.fill();
    q.stroke();
    G = G || D;
    q.fillStyle = q.strokeStyle = hF.y9(
      [0, 0, 0, fS.tx && ei == 0 ? 1 : 0.5],
      !0
    );
    if (j.W.qb) {
      this.s1(j.W.qb, null, q);
      q.fill();
    }
    if (j.W.cT) {
      this.s1(j.W.cT, dq, q);
      q.stroke();
    }
    for (var ha in j.W.rI)
      if (j.W.rI[ha].cT) {
        this.s1(j.W.rI[ha].cT, null, q);
        q.stroke();
        G = !0;
      }
    var D = hF.r2(j.W.a0, q, m);
    q.stroke();
    G = G || D;
    if (j.W.$p) {
      this.s1(j.W.$p, dq, q);
      q.strokeStyle = "rgba(0,0,0,0.5)";
      q.lineWidth = (J.IC() * 2.5) / m.k3;
      q.stroke();
      q.strokeStyle = "white";
      q.lineWidth = (J.IC() * 2) / m.k3;
      q.stroke();
    }
    if (j.W.Ye.length + j.W.q5.length + j.W.dY.length != 0) {
      G = !0;
      q.fillStyle = $;
      hF.Od(j.W.Ye, q, m, 6);
      q.fill();
      hF.Od(j.W.q5, q, m, 6);
      q.fill();
      q.fillStyle = X;
      hF.Od(j.W.Ye, q, m, 4);
      q.fill();
      hF.Od(j.W.dY, q, m, 4);
      q.fill();
      q.fillStyle = H;
      hF.Od(j.W.q5, q, m, 4);
      q.fill();
    }
    if (j.W.eT.length != 0) {
      for (var y = 0; y < j.W.eT.length; y++) {
        var am = j.W.eT[y],
          k4 = am[1],
          aA;
        if (n) {
          aA = q.getImageData(k4.x, k4.y, k4.r, k4.$);
          B.G.Jg("norm", am[0], k4, new Uint8Array(aA.data.buffer), k4, k4, 1);
        } else
          aA = new ImageData(new Uint8ClampedArray(am[0].buffer), k4.r, k4.$);
        q.putImageData(aA, k4.x, k4.y);
      }
    }
    var ex = 0.5 / m.k3;
    q.lineWidth = 1 / m.k3;
    if (j.W.QV) {
      G = !0;
      var ac = j.W.QV,
        eJ = ac.FU,
        V = { RC: [], L: [] };
      for (var y = 0; y < ac._a.length; y++) B.b.concat(V, B.b._c(ac._a[y]));
      V.L = V.L.concat(eJ);
      for (var y = 0; y < eJ.length; y += 4) {
        V.RC.push("M", "L");
      }
      for (var y = 0; y < V.L.length; y++) {
        V.L[y] += ex;
      }
      q.strokeStyle = hF.y9([0.9, 0.2, 0.2, 1]);
      this.s1(V, null, q);
      q.stroke();
      var h$ = J.IC(),
        da = 2 / m.k3;
      q.font = c * 0.9 + "px sans-serif";
      for (var y = 0; y < eJ.length; y += 4) {
        var A = eJ[y],
          N = eJ[y + 1],
          bb = eJ[y + 2],
          gb = eJ[y + 3],
          fM = Math.sqrt((gb - N) * (gb - N) + (bb - A) * (bb - A));
        fM = B.uO.G7(fM, j.zv, W, N == gb ? j.r : j.$);
        var kS = new ea((A + bb) / 2, (N + gb) / 2);
        q.fillStyle = hF.y9([0.9, 0.2, 0.2, 1]);
        var cY = q.measureText(fM).width;
        q.fillRect(
          kS.x - cY / 2 - da * h$,
          kS.y - 3.5 * da * h$,
          cY + 2 * da * h$,
          7 * da * h$
        );
        q.fillStyle = hF.y9([1, 1, 1, 1]);
        q.save();
        q.translate(kS.x - cY / 2, kS.y + 2 * da * h$);
        q.scale(0.1, 0.1);
        q.font = c * 9 + "px sans-serif";
        q.fillText(fM, 0, 0);
        q.restore();
      }
    }
    if (W.x_) {
      if (k.HT && j.I.k3 > 10 && ei == 0) {
        this.L_(j, q, 1, 1, 0.25, k.Mt, 16777215);
        G = !0;
      }
      if (k.GX) {
        var cS = B.uO.Fs(k.y1, j.zv, j.r, k.lA),
          k3 = k.XR == 0 ? cS : B.uO.Fs(k.XR, j.zv, j.r, k.lA);
        if (k.lA == 4) k3 *= j.$ / j.r;
        this.L_(j, q, cS, k3, 1, k.Mt, k.qF);
        G = !0;
        if (k.nL != 1) {
          q.save();
          q.setLineDash([1 / j.I.k3, 1 / j.I.k3]);
          this.L_(j, q, cS / k.nL, k3 / k.nL, 1, k.Mt, k.qF);
          q.restore();
        }
      }
      if (k.M3) {
        var di = j.f8(),
          a7 = j.Tl(),
          b0 = Math.max(j.I.yJ.r, j.I.yJ.$) / j.I.k3;
        b0 = Math.max(Math.max(j.r, j.$) * 2, b0);
        for (var y = 0; y < di[0].length; y++) {
          var e1 = di[0][y],
            l2 = di[1][y];
          if (l2 != -1 && l2 != a7) continue;
          var kL = m.gS(e1[1], e1[1]),
            es = m.sb(Math.floor(kL.x) + 0.5, Math.floor(kL.y) + 0.5),
            kR = B.b4(l2 == -1 ? k.MY : k.If);
          kR = [kR.o / 255, kR.i / 255, kR.X / 255, 1];
          q.beginPath();
          q.strokeStyle = hF.y9(kR);
          if (e1[0] == 0) {
            var eH = es.x;
            q.moveTo(eH, -b0);
            q.lineTo(eH, b0);
          } else {
            var cZ = es.x;
            q.moveTo(-b0, cZ);
            q.lineTo(b0, cZ);
          }
          q.stroke();
          G = !0;
        }
      }
      var ga = j.jE;
      if (ga.length > 0 && W.RW == L.a0a) {
        var k4 = 7 / j.I.k3,
          fi = k4 / 3,
          go = k4 * 4;
        q.strokeStyle = q.fillStyle = "black";
        for (var y = 0; y < ga.length; y++) {
          var iz = ga[y];
          q.fillRect(iz.x - 0.5 * fi, iz.y - 0.5 * go, fi, go);
          q.fillRect(iz.x - 0.5 * go, iz.y - 0.5 * fi, go, fi);
          q.lineWidth = 2.5 / j.I.k3;
          q.beginPath();
          q.arc(iz.x, iz.y, k4, 0, 2 * Math.PI);
          q.stroke();
          q.font = 1.9 * k4 + "px serif";
          q.lineWidth = 1.25 / j.I.k3;
          q.strokeText("" + (y + 1), iz.x + 0.75 * k4, iz.y + 2.5 * k4);
        }
        G = !0;
      }
      var i5 = j.gQ;
      if (k.gQ && i5.length != 0) {
        q.font = c * 0.8 + "px sans-serif";
        var aI = [],
          bs = [];
        for (var y = 0; y < i5.length; y++) {
          var k2 = L.ct.II(i5, y);
          aI.push(k2);
          if (j.Zy.indexOf(y) != -1) bs.push(k2);
        }
        aI.reverse();
        var jG = Date.now();
        aI = B.H.asH([0, 0, j.r, j.$], aI);
        for (var w = 0; w < 2; w++)
          for (var y = 0; y < aI.length; y++) {
            var eW = aI[y],
              e = eW[4],
              d = e != null ? i5[e] : null;
            if ((d && w == 0) || (d == null && w == 1)) continue;
            var A = Math.round(eW[0]),
              N = Math.round(eW[1]),
              bb = Math.round(eW[2]),
              gb = Math.round(eW[3]);
            q.strokeStyle = q.fillStyle = hF.y9(
              d ? [0, 0.7, 0.7, 1] : [0.8, 0.8, 0.8, 1]
            );
            q.strokeRect(A + ex, N + ex, bb - A, gb - N);
            var gc = y + 1,
              ke = q.measureText(gc),
              cY = ke.width;
            q.fillRect(A, N, cY + c / 2, c);
            q.fillStyle = hF.y9([1, 1, 1, 1]);
            q.fillText(gc, A + c / 4, N + c * 0.8);
          }
        var da = 2 / j.I.k3,
          jh = 2 * da;
        for (var y = 0; y < bs.length; y++) {
          var eW = bs[y],
            A = Math.round(eW[0]),
            N = Math.round(eW[1]),
            bb = Math.round(eW[2]),
            gb = Math.round(eW[3]);
          q.strokeStyle = q.fillStyle = hF.y9([1, 0.6, 0, 1]);
          q.strokeRect(A + ex, N + ex, bb - A, gb - N);
          var cE = [A, N, bb, N, bb, gb, A, gb];
          for (var cy = 0; cy < cE.length; cy += 2) {
            var eH = cE[cy],
              cZ = cE[cy + 1],
              hl = cE[(cy + 2) & 7],
              c2 = cE[(cy + 3) & 7];
            q.fillRect(eH - da, cZ - da, jh, jh);
            q.fillRect(
              Math.round((eH + hl) / 2) - da,
              Math.round((cZ + c2) / 2) - da,
              jh,
              jh
            );
          }
        }
        G = !0;
      }
      var f9 = j.add.Anno;
      if (f9 && f9.length != 0)
        for (var y = 0; y < f9.length; y++) {
          var hu = f9[y],
            kR = hu[2],
            eH = hu[0] - ex,
            cZ = hu[1] - ex,
            jh = 30 / m.QI,
            iJ = 0.4 * jh,
            dZ = 0.6 * jh;
          q.beginPath();
          q.moveTo(eH, cZ + dZ);
          q.lineTo(eH, cZ);
          q.lineTo(eH + jh, cZ);
          q.lineTo(eH + jh, cZ + jh);
          q.lineTo(eH + iJ, cZ + jh);
          q.closePath();
          q.lineTo(eH + iJ, cZ + dZ);
          q.lineTo(eH + iJ, cZ + jh);
          if (y == j.I.er) {
            q.lineWidth *= 5;
            q.strokeStyle = hF.y9([0, 0, 0, 0.5]);
            q.stroke();
            q.lineWidth /= 5;
          }
          q.fillStyle = hF.y9([kR.o / 255, kR.i / 255, kR.X / 255, 1]);
          q.fill();
          q.strokeStyle = hF.y9([0, 0, 0, 1]);
          q.stroke();
        }
    }
    q.strokeStyle = hF.y9([1, 0, 0, 1]);
    if (j.W.x$) {
      this.s1(j.W.x$, dq, q);
      q.stroke();
    }
    q.restore();
    if (W.sB) {
      if (
        j.I.CD == null ||
        j.I.CD.width != j.I.yJ.r ||
        j.I.na.height != j.I.yJ.$
      ) {
        j.I.CD = new ImageData(j.I.yJ.r, B.uO.XF);
        j.I.na = new ImageData(B.uO.XF, j.I.yJ.$);
      }
      var T = cW.LC[W.U6],
        bC = 0,
        ev = 0,
        ak = j.r,
        gD = j.$;
      if (j.Tl() != -1) {
        var Z = j.U[j.Tl()].Li();
        bC = Z.x;
        ev = Z.y;
        ak = Z.r;
        gD = Z.$;
      }
      bC *= m.k3;
      ev *= m.k3;
      var m = j.I,
        a9 = [1, j.zv, j.zv / 2.54, j.zv / 25.4, ak / 100][k.WH],
        kk = (m.k3 * j.r) / 2,
        kX = (m.k3 * j.$) / 2,
        kc = [
          m.k3 * a9,
          new ea(m.g.x + (bC + kk * a9 - kk), m.g.y + (ev + kX * a9 - kX)),
        ];
      if (k.WH == 4) a9 *= gD / ak;
      var ew = [
          m.k3 * a9,
          new ea(m.g.x + (bC + kk * a9 - kk), m.g.y + (ev + kX * a9 - kX)),
        ],
        gS = this.DN.JD;
      B.uO.a9l(
        m,
        T["--text-color"],
        T["--bg-input"],
        Math.floor(gS.x),
        Math.floor(gS.y),
        kc,
        ew,
        k.WH == 1 ? 8 : 10
      );
      var hp = j7.ako(m.k3, hF.y9([1, 1, 1, 1]), j.r + " \xD7 " + j.$);
      hF.Ch(j.I.na.data);
      hF.Ch(j.I.CD.data);
      q.putImageData(j.I.na, 0, 0);
      q.putImageData(j.I.CD, 0, 0);
      q.putImageData(hp, 0, j.I.yJ.$ - hp.height);
    }
    if (j.W.Z9.length != 0) {
      for (var y = 0; y < j.W.Z9.length; y++) {
        var am = j.W.Z9[y],
          k4 = am[1];
        q.putImageData(
          new ImageData(new Uint8ClampedArray(am[0].buffer), k4.r, k4.$),
          k4.x,
          k4.y
        );
      }
    }
    return G;
  };
  hF.prototype.L_ = function (j, q, m, n, G, W, k) {
    while (m * j.I.k3 < 4) {
      m *= 2;
      n *= 2;
    }
    var T = j.r,
      b = j.$,
      c = 0.5 / j.I.k3;
    k = B.b4(k);
    q.strokeStyle = hF.y9([k.o / 255, k.i / 255, k.X / 255, G], !1);
    q.save();
    q.rect(0, 0, T, b);
    q.clip();
    q.beginPath();
    for (var a = 0; a <= T; a += m) {
      q.moveTo(a + c, 0);
      q.lineTo(a + c, b);
    }
    if (W == 0) {
      for (var f = 0; f <= b; f += n) {
        q.moveTo(0, f + c);
        q.lineTo(T, f + c);
      }
    } else {
      n *= Math.sqrt(4 / 3);
      var U = n * Math.floor(T / n),
        Z = T * (n / (2 * m));
      for (var f = -U; f <= b + U; f += n) {
        q.moveTo(0, f);
        q.lineTo(T, f - Z);
        q.moveTo(0, f);
        q.lineTo(T, f + Z);
      }
    }
    q.stroke();
    q.restore();
  };
  hF.Od = function (j, q, m, n) {
    q.beginPath();
    var G = (n * J.IC()) / m.k3,
      W = !1;
    for (var y = 0; y < j.length; y += 2) {
      W = !0;
      var k = j[y],
        T = j[y + 1];
      q.moveTo(k + G, T);
      q.arc(k, T, G, 0, 2 * Math.PI);
    }
    return W;
  };
  hF.r2 = function (j, q, m, n) {
    q.beginPath();
    var G = ((n ? n : 1) * (4 * J.IC() + 0.5)) / m.k3,
      W = !1;
    for (var y = 0; y < j.length; y += 2) {
      W = !0;
      var k = j[y],
        T = j[y + 1];
      q.rect(k - G, T - G, 2 * G, 2 * G);
    }
    return W;
  };
  hF.Z8 = function (j, q, m, n) {
    m.beginPath();
    if (n) m.rect(-1e5, -1e5, 1e6, 1e6);
    var G = j;
    if (q) {
      G = B.b.P(j);
      B.b.u(G.L, q, G.L);
    }
    Typr.U.pathToContext({ cmds: G.RC, crds: G.L }, m);
  };
  hF.prototype.s1 = hF.Z8;
  hF.a$ = function (j, q, m) {
    fS.jm.call(this);
    var n = (this.ado = q != 0),
      G = m ? "true" : "in01(sCoord)",
      W =
        "\t\t\tprecision mediump float;\t\t\t\t\t\tuniform sampler2D over;\t\t\tuniform sampler2D image;\t\t\t" +
        (j ? "uniform sampler2D lut;  uniform float N;  " + fS.SI.aeS : "") +
        "\t\t\tuniform vec3 contSizeZoom;\t\t\tuniform vec2 cnvSize;\t\t\tuniform mat4 ctrn; \t\t\t" +
        (n ? "uniform vec4 bgClr;  uniform vec4 ars[" + q + "]; " : "") +
        "\t\t\t\t\t\tvarying vec2 tCoord;\t\t\tvarying vec2 sCoord;\t\t\tvarying vec2 gCoord;\t\t\t\t\t\t/* This approximates the error function, needed for the gaussian integral */ \t\t\tvec4 erf(vec4 x) { \t\t\t  vec4 s = sign(x), a = abs(x);\t\t\t  x = 1.0 + (0.278393 + (0.230389 + 0.078108 * (a * a)) * a) * a;\t\t\t  x *= x;  \t\t\t  return s - s / (x * x); \t\t\t} \t\t\t/* Return the mask for the shadow of a box from lower to upper */  \t\t\tfloat boxShadow(vec2 lower, vec2 upper, vec2 point, float sigma) { \t\t\t  vec4 query = vec4(point - lower, point-upper); \t\t\t  vec4 integral = 0.5 + 0.5 * erf(query * (sqrt(0.5) / sigma)); \t\t\t  return (integral.z - integral.x) * (integral.w - integral.y); \t\t\t} \t\t\t\t\t\tvec4 simpleBlend(vec4 src, vec4 tgt) {\t\t\t\tfloat na = src.w + tgt.w*(1.0-src.w);\t\t\t\t/* avoid division by zero */ \t\t\t\treturn na==0.0 ? vec4(0,0,0,0) : vec4( (src.xyz*src.w + tgt.w*tgt.xyz*(1.0-src.w))*(1.0/na), na);\t\t\t} \t\t\t\t\t\t" +
        fS.SI.agk +
        "\t\t\t\t\t\tvoid main(void) {\t\t\t\tvec4 src = texture2D(over , tCoord); \t\t\t\tvec4 tgt = min(vec4(1,1,1,1),texture2D(image, sCoord" +
        (m ? "-floor(sCoord)" : "") +
        ")); \t\t\t\t" +
        (j ? "tgt.rgb = mapLut(tgt, lut, N).rgb; " : "") +
        "\t\t\t\ttgt = ctrn * tgt; " +
        (n
          ? "\t\t\t\t\tbool inr = false; vec4 BG = bgClr; \t\t\t\t\tfor(int i=0; i<" +
            q +
            "; i++) { \t\t\t\t\t\tvec4 ar = ars[i]; \t\t\t\t\t\tvec2 nsc = sCoord - ar.xy; \t\t\t\t\t\tif( ar.z!=0.0 && in01(nsc/ar.zw) ){\t\t\t\t\t\tinr=true; BG=mod(floor(gCoord.x) + floor(gCoord.y), 2.0)==1.0 ? vec4(0.784,0.784,0.784,1) : vec4(1,1,1,1); }\t\t\t\t\t}\t\t\t\t"
          : "\t\t\t\t\tfloat shdw = 0.3*boxShadow(vec2(0,0),contSizeZoom.xy, sCoord*contSizeZoom.xy+vec2(0.0,-6.0*contSizeZoom.z) , 10.0*contSizeZoom.z);\t\t\t\t\tvec4 grid = mod(floor(gCoord.x) + floor(gCoord.y), 2.0)==1.0 ? vec4(0.784,0.784,0.784,1) : vec4(1,1,1,1);\t\t\t\t\tvec4 BG = " +
            G +
            " ? grid : vec4(0.0,0.0,0.0,shdw); \t\t\t\t") +
        "\t\t\t\tvec4 outc = " +
        G +
        " ?  simpleBlend(tgt,BG) :  BG ;  \t\t\t\tif(src.b == 0.0 && src.a >0.5) gl_FragColor = mix(outc, vec4(vec3(1,1,1)-outc.rgb,1.0), src.w); \t\t\t\telse             gl_FragColor = simpleBlend(src,outc); \t\t\t\t\t\t\t}",
      k =
        "\t\t\tattribute vec2 verPos;\t\t\tvarying vec2 tCoord;\t\t\tvarying vec2 sCoord;\t\t\tvarying vec2 gCoord;\t\t\t\t\t\tuniform mat3 tmat;\t\t\tuniform vec4 gsize;\t\t\tvoid main(void) {\t\t\t\ttCoord = verPos;\t\t\t\tsCoord = (tmat*vec3(verPos,1.0)).xy;\t\t\t\tgCoord = (verPos-gsize.zw) * gsize.xy ; \t\t\t\tgl_Position = vec4(vec2(-1.0, 1.0) + 2.0*vec2(verPos.x,-verPos.y), 0.0, 1.0);\t\t\t}";
    this.zw(W, k);
  };
  hF.a$.prototype = new fS.jm();
  hF.a$.prototype.cu = function (j, q, m, n, G, W, k, T, b, c, a, f, U, Z) {
    this.lc(
      "tmat gsize over image lut N contSizeZoom cnvSize bgClr ars ctrn".split(
        " "
      )
    );
    var h = fS.lB,
      u = this.Si;
    h.uniformMatrix3fv(u.tmat, !1, m);
    h.uniform4fv(u.gsize, n);
    h.uniform3f(u.contSizeZoom, G, W, k);
    h.uniform2f(u.cnvSize, T, b);
    h.uniformMatrix4fv(u.ctrn, !1, f);
    if (this.ado) {
      h.uniform4fv(u.ars, a);
      h.uniform4fv(u.bgClr, c);
    }
    h.uniform1i(u.over, 0);
    h.uniform1i(u.image, 1);
    h.activeTexture(h.TEXTURE0);
    h.bindTexture(h.TEXTURE_2D, j);
    h.activeTexture(h.TEXTURE1);
    h.bindTexture(h.TEXTURE_2D, q);
    if (U) {
      h.uniform1f(u.N, Z);
      h.uniform1i(u.lut, 2);
      h.activeTexture(h.TEXTURE2);
      h.bindTexture(h.TEXTURE_2D, U.vD);
      var i = h.LINEAR;
      h.texParameteri(h.TEXTURE_2D, h.TEXTURE_MIN_FILTER, i);
      h.texParameteri(h.TEXTURE_2D, h.TEXTURE_MAG_FILTER, i);
    }
    h.activeTexture(h.TEXTURE0);
  };
  function eR() {
    bI.call(this, [9, 7], !1, "---panels/layercomps", bI.Fb.a2V);
    J.F(this.nA, "min-width:240px;");
    this.fg = null;
    this.sF = -1;
    this.JK = [];
    this.gj = J.m("div", "scrollable");
    this.gj.style.height = "160px";
    this.nA.appendChild(this.gj);
    this.Mv = J.m("div", "lpfoot");
    this.nA.appendChild(this.Mv);
    this.JA = [];
    var j = [
        '<svg  class="miniscale gsicon" viewBox="0 0 15 15" width="15" height="15" fill="black"><path d="M14,6 L10,6 L10,0 L4,0 L4,6 L0,6 L7,13 L14,6 L14,6 Z M0,14 L0,16 L14,16 L14,14 Z" /></svg>',
        "reload",
        "lrs/newlayer",
        "lrs/bin",
      ],
      q = ["Layer Comps to Files", [5, 10], [5, 3], [5, 4]];
    for (var y = 0; y < j.length; y++) {
      var m = j[y];
      if (y > 0)
        m = '<img src="' + PIMG[j[y]] + '" class="miniscale gsicon" />';
      var n = new kv(m, !1, q[y]);
      n.Q("click", this.aAN, this);
      this.Mv.appendChild(n._);
      this.JA.push(n);
    }
  }
  eR.prototype = new bI("");
  eR.prototype.X3 = function (j, q) {
    J.F(this.nA, "width:" + (j - 2) + "px;");
    this.gj.style.height = q - 28 + "px";
  };
  eR.prototype.lD = function (j) {
    var q = new fd(_.E.w, !0);
    q.data = j;
    q.l = L.lt;
    this.k(q);
  };
  eR.a8p =
    'var opts = new ExportOptionsSaveForWeb(); opts.format = SaveDocumentType.PNG; opts.PNG8 = false; opts.quality = 100; var doc = app.activeDocument;var lc = doc.layerComps;  if(lc.length==0) alert("No layer comps."); else { \tvar stat = doc.historyStates.length - 1;\t\tfor(var i=0; i<lc.length; i++) {\t\tlc[i].apply();\t\tpngFile = new File(lc[i].name+".png");\t\tapp.activeDocument.exportDocument(pngFile, ExportType.SAVEFORWEB, opts);\t}\t\tdoc.activeHistoryState = doc.historyStates[stat];}';
  eR.prototype.aAN = function (j) {
    var y = this.JA.indexOf(j.currentTarget) - 1;
    if (y == -1) {
      var q = new fd(_.E.c, !0);
      q.data = { R: _.Y.D4, dR: eR.a8p };
      this.k(q);
      return;
    }
    if (y != 1) if (this.sF == -1) return;
    this.lD({ R: ["updLC", "addLC", "delLC"][y], Wy: this.sF });
    if (y == 2) this.sF = -1;
  };
  eR.prototype.T = function () {
    bI.prototype.T.call(this);
    for (var y = 0; y < this.JA.length; y++) this.JA[y].T();
  };
  eR.prototype.Wz = function (j) {
    if (j == null) J._g(this.nA, "disabled");
    else J.XZ(this.nA, "disabled");
    this.fg = j;
    J.dI(this.gj);
    if (j == null) return;
    var q = j.Qp.lastAppliedComp ? j.Qp.lastAppliedComp.v : 0,
      m = j.Qp.list.v.slice(0);
    m.unshift({
      v: {
        Nm: { v: "Last Document State" },
        compID: { v: 0 },
        capturedInfo: { v: 0 },
      },
    });
    for (var y = 0; y < m.length; y++) {
      var n = m[y].v,
        G = new bg(n.Nm.v, n.compID.v, n.capturedInfo.v, q, this.sF);
      G.Q("activate", this.SN, this);
      G.parent = this;
      this.gj.appendChild(G._);
      this.JK.push(G);
    }
  };
  eR.prototype.SN = function (j) {
    this.sF = j.currentTarget.Wy;
    this.Wz(this.fg);
  };
  function bg(j, y, q, m, n) {
    kV.call(this);
    this.Wy = y;
    this._ = J.m("div", "head listitem" + (y == n ? " selected" : ""));
    var G = y == m,
      W = new kv(G ? "\u2713" : "\u2014");
    if (G) W.mb();
    this._.appendChild(W._);
    W.Q("click", this.Zp, this);
    var k = (this.k8 = J.m("span"));
    k.textContent = j;
    this._.appendChild(k);
    this.JA = [];
    if (y != 0) {
      this._.addEventListener("mouseup", this.SN.bind(this), !1);
      this.ru = J.m("span", "headR");
      this._.appendChild(this.ru);
      var T = ["lrs/eye", "pos", "lrs/fx"],
        b = ["Visibility", "Position", "Appearance"];
      for (var c = 0; c < T.length; c++) {
        var a = new kv(
          '<img src="' + PIMG[T[c]] + '" class="autoscale gsicon" />',
          !1,
          b[c]
        );
        if (((q >> c) & 1) == 0) J.F(a._, "opacity:0.3");
        a.Q("click", this.aIu, this);
        this.ru.appendChild(a._);
        this.JA.push(a);
      }
    }
  }
  bg.prototype = new kV();
  bg.prototype.SN = function (j) {
    if (j.target != this.k8 && j.target != this._) return;
    if (j.detail == 1) this.k(new fd("activate", !1));
    else {
      var q = new bI.va(this.k8, this.m3.bind(this));
    }
  };
  bg.prototype.aIu = function (j) {
    var y = this.JA.indexOf(j.currentTarget);
    this.lD({ R: "editLC", a7z: y, Wy: this.Wy });
  };
  bg.prototype.m3 = function (j) {
    this.lD({ R: "editLC", p6: j, Wy: this.Wy });
  };
  bg.prototype.Zp = function (j) {
    this.lD({ R: "setLC", Wy: this.Wy });
  };
  bg.prototype.lD = function (j) {
    var q = new fd(_.E.w, !0);
    q.data = j;
    q.l = L.lt;
    this.k(q);
  };
  function a1() {
    bI.call(this, [9, 11], !1, "---panels/navigator", bI.Fb.a0d);
    var j = this.nA;
    J._g(j, "padded");
    J.F(j, "cursor:grab;");
    this.Bl = J.m("canvas");
    j.appendChild(this.Bl);
    J.Ft(j);
    J.r$(this.Bl);
    J.PD(this.Bl, this.hd.bind(this));
    var q = J.m("div", "form label6");
    j.appendChild(q);
    this.vo = new dV([8, 0], 2, 6400, "%", null, !0);
    this.vo.Q(_.E.n, this.a7X, this);
    q.appendChild(this.vo._);
    this.JL = new dV([12, 15], -180, 180, "\xB0");
    this.JL.Q(_.E.n, this.a7X, this);
    q.appendChild(this.JL._);
    this.ayG = this.dn.bind(this);
    this.aHx = this.$g.bind(this);
    this.I7 = null;
    this.a8L = null;
    this.nT = !1;
  }
  a1.prototype = new bI("");
  a1.prototype.X3 = function (j, q) {
    this.GM = j * 1.2;
    this.uu = q * 1.2;
    this.ip();
  };
  a1.prototype.a7X = function (j) {
    var q = this.vo.V(),
      m = this.I7,
      n = q / 100;
    if (0.8 < n && n < 1.2) n = 1;
    else if (1.8 < n) n = Math.round(n);
    m.I.ny = (this.JL.V() * Math.PI) / 180;
    var G = new fd(_.E.w, !0);
    G.l = L.R2;
    G.data = { R: "zoom", k3: n };
    this.k(G);
  };
  a1.prototype.hd = function (j) {
    var q = this.I7;
    if (q == null) return;
    this.nT = !0;
    J.dJ(window, this.ayG);
    J.sP(window, this.aHx);
  };
  a1.prototype.dn = function (j) {
    var q = J.QR(j, this.Bl),
      m = this.I7,
      n = m.I,
      G = this.Bl.width,
      W = this.Bl.height,
      k = (m.r * (q.x * J.IC() - G / 2)) / G,
      T = (m.$ * (q.y * J.IC() - W / 2)) / W,
      b = Math.sin(n.ny),
      c = Math.cos(n.ny),
      a = Math.round(-n.k3 * (c * k - b * T)),
      f = Math.round(-n.k3 * (b * k + c * T));
    L.gA.hL(m, a, f);
  };
  a1.prototype.$g = function (j) {
    J.BJ(window, this.ayG);
    J.mW(window, this.aHx);
    this.nT = !1;
  };
  a1.prototype.Wz = function (j) {
    if (j == null && this.I7 != null) this.Bl.width = 100;
    this.I7 = j;
    this.ip();
  };
  a1.prototype.a4n = function () {
    var j = this.I7,
      q = J.IC(),
      m = L.Lr.gp(j.r, j.$, q * (this.GM - 10), q * (this.uu - 36)),
      n = B.aLX(j.ht(), new hk(0, 0, j.r, j.$), m);
    this.a8L = [n.sE, n.H];
  };
  a1.prototype.ip = function () {
    var j = this.I7;
    if (j == null || j.I.k3 == 0) return;
    var q = j.I;
    if (!J.JO(this.nA) || this.GM == 0) return;
    this.vo.q(q.k3 * 100);
    var m = (q.ny * 180) / Math.PI;
    m = ((36e5 + 180 + m) % 360) - 180;
    this.JL.q(m);
    if (!this.nT) this.a4n();
    var n = this.a8L[0],
      G = this.a8L[1],
      W = G.r,
      k = G.$,
      T = this.Bl;
    T.width = W;
    T.height = k;
    J.Mg(T, W, k);
    var b = this.nA;
    b.style.width = this.Bl.style.width + 12 + "px";
    var c = T.getContext("2d"),
      a = new ImageData(W, k);
    B.wV(n, a.data);
    c.putImageData(a, 0, 0);
    c.getImageData(0, 0, 1, 1);
    var f = W / j.r;
    c.scale(f, f);
    c.lineWidth = 4 / f;
    c.strokeStyle = "#ff0000";
    var U = q.yJ,
      Z = B.b._c(U).L;
    B.b.u(Z, q.WQ(), Z);
    c.moveTo(Z[0], Z[1]);
    for (var y = 0; y < 4; y++) c.lineTo(Z[y * 2], Z[y * 2 + 1]);
    c.closePath();
    c.stroke();
  };
  a1.prototype.yp = function (j, q) {};
  a1.prototype.T = function () {
    bI.prototype.T.call(this);
    this.vo.T();
    this.JL.T();
  };
  a1.prototype.BN = function () {
    this.ip();
  };
  function eo(j, q) {
    bI.call(this, j.name, !1, j.icon, q);
    this.VH = j;
  }
  eo.prototype = new bI("");
  eo.prototype.No = function () {
    var j = this.nA,
      q = this.VH;
    if (!J.JO(j) || this.wT) return;
    var m = (this.wT = J.m("iframe"));
    m.setAttribute("src", q.url);
    this.nA.appendChild(m);
  };
  eo.prototype.BN = eo.prototype.Wz = function () {
    this.No();
  };
  eo.prototype.XB = function (j) {
    if (J.JO(this.wT)) this.wT.contentWindow.postMessage(j, "*");
  };
  eo.prototype.X3 = function (j, q, m) {
    if (this.wT == null) return;
    var n = this.VH;
    if (n.url.indexOf("peasmaker") != -1 && window.innerWidth > 500)
      j = Math.max(j, Math.min(700, window.innerWidth - 320));
    if (m) {
      n.w = j;
      n.h = q;
    }
    if (n.w) j = Math.min(n.w, window.innerWidth - 40);
    if (n.h) q = Math.min(n.h, window.innerHeight - 50);
    J.F(this.wT, "width:" + j + "px; height:" + q + "px");
  };
  function iu() {
    bI.call(this, [9, 12], !1, "---panels/tpreset", bI.Fb.D$);
    this.a = null;
    this.Zk = new cK(L.cS);
    this.Zk.parent = this;
    var j = J.m("div", "padded");
    J.F(j, "width:20em");
    this.nA.appendChild(j);
    j.appendChild(this.Zk.jY);
  }
  iu.prototype = new bI("");
  iu.prototype.BN = function () {
    this.Zk.j3(this.a.Yr);
  };
  iu.prototype.yp = function (j, q) {
    this.a = j;
    if (q == fG.HN || q == fG.D$) this.Zk.j3(j.Yr);
  };
  iu.prototype.X3 = function (j, q) {
    this.Zk.a0$(this.a.RW);
  };
  iu.prototype.T = function () {
    bI.prototype.T.call(this);
    this.Zk.T();
  };
  var cU = (function () {
    var j = [],
      q = null,
      m = null,
      n = null,
      G = [
        [100, 180, 255],
        [100, 255, 100],
        [255, 200, 100],
        [200, 100, 255],
        [255, 100, 200],
        [255, 100, 100],
      ];
    function W() {
      bI.call(this, "Memory", !1, null, bI.Fb.aq2);
      var h = J.m("div", "padded");
      this.nA.appendChild(h);
      m = new kv(["<< VAR0", [0, 13, 2]], !1, null, !0);
      m.addEventListener("click", function (u) {
        j.pop();
        T();
      });
      h.appendChild(m._);
      q = J.m("div", "scrollable");
      J.F(q, "width:20em;  height:26em; margin-top:8px;");
      h.appendChild(q);
    }
    W.prototype = new bI("");
    W.prototype.Wz = function (h, u, i) {
      n = u;
      this.BN();
    };
    W.prototype.BN = function () {
      m.yl(!1);
      if (!J.JO(q)) return;
      var h = { eA: "Total:", xR: [] },
        u = n.mS;
      for (var y = 0; y < u.length; y++) h.xR.push(c(u[y]));
      if (lm != null) {
        var i = lm.UL,
          x = [],
          X = { eA: "Blending Buffers", xR: x };
        h.xR.push(X);
        for (var $ in i) {
          var H = $.split("x"),
            C = parseInt(H[0]),
            l = parseInt(H[1]),
            v = i[$],
            K = 0;
          for (var y = 0; y < v.length; y++) K += C * l * 4 * (v[y][3] >>> 3);
          x.push({
            eA: v.length + "\xD7 " + C + " \xD7 " + l + " px",
            tA: fS.tx ? [0, K] : [K, 0],
          });
        }
        f(X);
      }
      var S = jz;
      if (S.UT)
        h.xR.push({ eA: "View Buffers", tA: [S.UT.length + S.LL.length, 0] });
      f(h);
      j = [h];
      T();
    };
    W.prototype.T = function () {
      bI.prototype.T.call(this);
      m.T();
    };
    function k(h) {
      var u = h.currentTarget,
        y = 0;
      while ((u = u.previousSibling) != null) y++;
      j.push(j[j.length - 1].xR[y - 1]);
      T();
    }
    function T() {
      m.yl(j.length > 1);
      var h = j[j.length - 1];
      J.dI(q);
      b(h, q, 0);
      h.xR.sort(function (u, i) {
        return i.tA[0] - u.tA[0];
      });
      for (var y = 0; y < h.xR.length; y++) b(h.xR[y], q, 1);
    }
    function b(h, u, i) {
      var x = bE.za,
        X = i != 0 && h.xR,
        $ = "margin-left:" + i * 10 + "px; margin-bottom:8px; padding:3px 5px;";
      if (X) $ += "cursor:pointer;";
      if (h.Sg != null)
        $ += "background-color:rgba(" + G[h.Sg].join(",") + ",0.2);";
      var H = J.m("div");
      u.appendChild(H);
      J.F(H, $);
      H.innerHTML =
        J.TU(h.eA) +
        "<br />" +
        "RAM: <b>" +
        x(h.tA[0]) +
        "</b>\u2001GPU: <b>" +
        x(h.tA[1]) +
        "</b>";
      if (X) H.addEventListener("click", k, !1);
    }
    function c(h) {
      var u = { eA: h.name, xR: [], Sg: 0 },
        i = fS.tx ? 1 : 0,
        x = 1 - i,
        X = h.depth >>> 3,
        $ = { eA: "History", xR: [], Sg: 5 };
      u.xR.push($);
      for (var y = 1; y < h.history.length; y++) {
        var H = h.history[y];
        $.xR.push({ eA: g$.get(H.name), Sg: 5, tA: [H._W(), 0] });
      }
      f($);
      var $ = {
        eA: "Final Image" + U(h, 4, X),
        tA: [h.r * h.$ * 4 * X, i * h.r * h.$ * 4 * X],
        Sg: 2,
      };
      u.xR.push($);
      for (var y = 0; y < h.U.length; y++) {
        var C = a(h.U[y], X);
        if (C.xR.length != 0) u.xR.push(C);
      }
      var l = h.add.lnk2;
      if (l)
        for (var y = 0; y < l.length; y++) {
          var C = l[y],
            v = { eA: C.Sh, xR: [], Sg: 4 },
            K = 0;
          v.xR.push({ eA: "Raw file", tA: [C.raw.length, 0] });
          if (C.Zj)
            for (var S = 0; S < C.Zj.length; S += 2) K += C.Zj[S].length;
          if (K != 0) v.xR.push({ eA: "Decoded pixels", tA: [K * X, 0] });
          f(v);
          u.xR.push(v);
        }
      f(u);
      return u;
    }
    function a(h, u) {
      var i = { eA: h.getName(), xR: [], Sg: 1 },
        x = fS.tx ? 1 : 0,
        X = 1 - x,
        $ = h.H.C();
      if ($ != 0)
        i.xR.push({
          eA: "Layer pixels" + U(h.H, 4, u),
          tA: [$ * 4 * u, x * $ * 4 * u],
        });
      if (h.add.lmfx && h.a_.RU.e) {
        var H = h.a_.RU.e;
        for (var C in H) {
          var l = 0;
          for (var v = 0; v < H[C].length; v++) {
            var K = H[C][v];
            if (C == "ebbl") {
              l += Z(K.D9);
              l += Z(K.NK);
              l += Z(K.oL);
              l += Z(K.y6);
            } else {
              l += Z(K);
              if (K.Wb || K.G5) l += K.PK.C();
              if (K.fd || K.fC) l += K.PK.C();
            }
          }
          if (l != 0)
            i.xR.push({
              eA: g$.get(eu.names[eu.order.indexOf(C)]),
              tA: [X * l * u, x * l * u],
              Sg: 3,
            });
        }
        var S = h.a_.yB ? h.a_.yB.length : 0;
        if (S != 0) i.xR.push({ eA: "Transparency backup", tA: [S * u, 0] });
      }
      var o = h.ex(),
        V = o ? o.H.C() : 0;
      if (V != 0) {
        i.xR.push({ eA: "Raster Mask", tA: [V * u, 0] });
      }
      var o = h.add.vmsk,
        V = o && o.Zr ? o.Zr.H.C() : 0;
      if (V != 0) {
        i.xR.push({ eA: "Vector Mask", tA: [V * u, 0] });
      }
      f(i);
      return i;
    }
    function f(h) {
      h.tA = [0, 0];
      for (var y = 0; y < h.xR.length; y++) {
        h.tA[0] += h.xR[y].tA[0];
        h.tA[1] += h.xR[y].tA[1];
      }
    }
    function U(h, u, i) {
      return "\u2001" + h.r + "\xD7" + h.$;
    }
    function Z(h) {
      if (h == null) return 0;
      var u = h.sE;
      if (u == null) u = h.vF;
      return h.PK.C() * (u instanceof Array ? 1 : 4);
    }
    return W;
  })();
  function aE() {
    bI.call(this, [9, 14], !1, "---panels/notes", bI.Fb.alX);
    J.F(this.nA, "min-width:240px;");
    var j = J.m("div", "padded");
    this.nA.appendChild(j);
    this.uB = new bJ("Author");
    j.appendChild(this.uB._);
    this.X_ = J.m("textarea");
    J.l3(this.X_);
    j.appendChild(this.X_);
    var q = new kv("<<", null, null, !0);
    j.appendChild(q._);
    this.abz = q;
    var m = new kv(">>", null, null, !0);
    j.appendChild(m._);
    q.Q("click", this.BY, this);
    m.Q("click", this.BY, this);
    var n = (this.av9 = new aD(""));
    j.appendChild(n._);
  }
  aE.prototype = new bI("");
  aE.prototype.BY = function (j) {
    var q = j.target == this.abz ? -1 : 1,
      m = this.I7,
      n = m.add.Anno;
    if (n == null) return;
    var G = n.length,
      W = m.I.er;
    m.I.er = (W + q + G) % G;
    m.Ls = !0;
    this.ip();
  };
  aE.prototype.ip = function () {
    var j = this.I7;
    if (j == null) return;
    var q = j.add.Anno;
    if (q == null || q.length == 0) return;
    var m = j.I.er,
      n = q[m];
    this.X_.value = n[4];
    this.av9.q(m + 1 + " / " + q.length);
    this.uB.q(n[3]);
  };
  aE.prototype.X3 = function (j, q) {
    if (this.GM == j) return;
    this.GM = j;
    q = Math.min(q, 200);
    J.F(
      this.X_,
      "display:block;tab-size:4;  margin:0; font-family:monospace; width:" +
        (j - 10) +
        "px; height:" +
        (q - 66) +
        "px"
    );
  };
  aE.prototype.Wz = function (j, q, m) {
    this.I7 = j;
    this.ip();
  };
  function dk() {
    bI.call(this, [1, 16, 1], !1, "---tools/artb", bI.Fb.a3Z);
    this.jJ = [];
    this.ST = [];
    this.JA = [];
    this.tT = null;
    this.Mv = null;
  }
  dk.prototype = new bI("");
  dk.prototype.No = function () {
    this.tT = J.m("div", "padded scrollable");
    J.F(this.tT, "width:260px;  height:260px");
    this.nA.appendChild(this.tT);
    this.Mv = J.m("div", "lpfoot");
    this.nA.appendChild(this.Mv);
    var j = ["lrs/newlayer", "lrs/bin"],
      q = [
        [15, 8, 2],
        [5, 4],
      ];
    for (var y = 0; y < j.length; y++) {
      var m = '<img src="' + PIMG[j[y]] + '" class="miniscale gsicon" />',
        n = new kv(m, !1, q[y]);
      n.Q("click", this.Gr, this);
      this.Mv.appendChild(n._);
      this.JA.push(n);
    }
  };
  dk.prototype.T = function () {
    bI.prototype.T.call(this);
    if (this.tT == null) return;
    for (var y = 0; y < this.JA.length; y++) this.JA[y].T();
  };
  dk.prototype.Gr = function (j) {
    var y = this.JA.indexOf(j.currentTarget),
      q = new fd(_.E.w, !0);
    q.l = L.eO;
    q.data = { R: y == 0 ? "new" : "del" };
    this.k(q);
    if (y == 0) this.axY(this.jJ.length - 1);
  };
  dk.prototype.Wz = dk.prototype.BN = function (j) {
    if (j) this.jJ = j.add.arts;
    if (!J.JO(this.nA)) return;
    if (this.tT == null) this.No();
    this.ip(j);
  };
  dk.prototype.hP = function (j) {
    var y = this.ST.indexOf(j.currentTarget);
    if (j.target.tagName == "BUTTON") {
      this.axY(y);
    }
    var q = this.jJ;
    for (var m = 0; m < q.length; m++) q[m].J = !1;
    q[y].J = !0;
    this.ip();
  };
  dk.prototype.axY = function (y) {
    var j = new fd(_.E.c, !0);
    j.data = { R: _.Y.s0, kO: "aoptions", K: this.jJ[y] };
    this.k(j);
  };
  dk.prototype.ip = function () {
    J.dI(this.tT);
    var j = this.jJ,
      q = this.hP.bind(this);
    this.ST = [];
    for (var y = 0; y < j.length; y++) {
      var m = j[y],
        n = J.m("div", "layeritem" + (m.J ? " selected" : ""));
      this.tT.appendChild(n);
      this.ST.push(n);
      n.addEventListener("click", q);
      var G = J.m("div", "head");
      n.appendChild(G);
      J.F(G, "height:24px");
      var W = J.m("div", "headL");
      G.appendChild(W);
      var k = J.m("div", "headR");
      G.appendChild(k);
      var T = J.m("div", "label");
      T.textContent = y + 1 + ". " + m.eA;
      W.appendChild(T);
      var b = new kv("Options", null, null, !0);
      k.appendChild(b._);
    }
  };
  function fI() {
    bI.call(
      this,
      ["Vector", "Document"][ei] + " Info",
      !1,
      "---panels/info",
      bI.Fb.amP
    );
    this.wU = J.m("div", "scrollable padded form");
    this.nA.appendChild(this.wU);
    J.F(this.wU, "width:260px;  height:200px");
  }
  fI.prototype = new bI("");
  fI.prototype.No = function () {
    if (!J.JO(this.nA)) return;
    var j = this.I7,
      q = this.VL,
      m = this.wU,
      G = 0,
      W = 0,
      k = 0,
      T = 0;
    if (j == null) return;
    var n = j.LP();
    for (var y = 0; y < n.length; y++) {
      var b = j.U[n[y]],
        c = b.add.vmsk;
      if (c == null) continue;
      var a = c.D;
      for (var f = 0; f < a.length; f++) {
        var U = a[f],
          Z = U.e;
        if (6 <= Z) continue;
        if (Z == 0) W++;
        else if (Z == 3) G++;
        else k++;
        if (Z == 0 || Z == 3) {
          var h = a.slice(0, 2).concat(a.slice(f, f + 1 + U.length)),
            u = B.b.bh(h),
            x = 0;
          u = B.b.ni(u);
          var i = B.b.V1(u),
            X = i.length - (Z == 0 ? 0 : 2);
          for (var $ = 0; $ < X; $ += 2) {
            var H = ($ + 2) % i.length,
              C = i[H] - i[$],
              l = i[H + 1] - i[$ + 1];
            x += Math.sqrt(C * C + l * l);
          }
          T += x;
        }
      }
    }
    var v = q.q1.WH;
    m.innerHTML =
      "Objects:<br/>Paths: " +
      (G + W) +
      " (" +
      G +
      " open, " +
      W +
      " closed, " +
      k +
      " points, length = " +
      B.uO.J2(T, j.zv, j.r, v).toFixed(3) +
      " " +
      B.uO._t[v] +
      ")";
  };
  fI.prototype.Wz = function (j, q, m) {
    this.I7 = j;
    this.VL = m;
    this.No();
  };
  fI.prototype.BN = function () {
    this.No();
  };
  fI.prototype.T = function () {
    bI.prototype.T.call(this);
  };
  function cw() {
    bI.call(this, "Pathfinder", !1, "---set/intersection", bI.Fb.T4);
    var j = (this.tT = J.m("div", "padded"));
    J.F(this.tT, "width:260px;  height:130px");
    this.nA.appendChild(this.tT);
    var q = (this.JA = []),
      m = new aD("Shape Modes:");
    j.appendChild(m._);
    J.Ft(j);
    var n = [
        [18, 1],
        [18, 2],
        [18, 3],
        [18, 4],
      ],
      G = gA.zs(["set/union", "set/difference", "set/intersection", "set/xor"]);
    n = n.concat([
      [15, 10, 22],
      [11, 12],
      [18, 5],
      [11, 12, 1],
      "Outline",
      "Minus Back",
    ]);
    for (var y = 0; y < n.length; y++) {
      var W = new kv(y < 4 ? G[y] : n[y], null, n[y]);
      q.push(W);
      W.Q("click", this.IS, this);
      j.appendChild(W._);
      if (y == 3) {
        J.Ft(j);
        j.appendChild(new aD("Pathfinders:")._);
        J.Ft(j);
      }
    }
  }
  cw.prototype = new bI("");
  cw.prototype.IS = function (j) {
    var y = this.JA.indexOf(j.target),
      q = new fd(_.E.w, !0);
    q.l = L.W1;
    q.data = { R: R.T4, hV: y };
    this.k(q);
  };
  cw.prototype.T = function () {
    bI.prototype.T.call(this);
    var j = this.JA;
    for (var y = 0; y < j.length; y++) j[y].T();
  };
  function cp() {
    kV.call(this);
    this.l = 0;
    this.af = null;
    this._ = J.m("div", "toolconf");
    this.Zk = null;
    this.a4r = null;
    this.body = new J.m("div", "body");
  }
  cp.prototype = new kV();
  cp.prototype.aGH = function (j, q) {
    this.l = j;
    this.af = q;
    if (L.FW[j]) {
      var m = (this.Zk = new cK(j));
      this._.appendChild(m._);
      m.parent = this;
    } else {
      this.a4r = J.m("div");
      this._.appendChild(this.a4r);
    }
    this._.appendChild(this.body);
    this.T();
  };
  cp.prototype.XH = function (j, q) {};
  cp.prototype.iN = function (j) {};
  cp.prototype.yp = function (j, q) {
    if (q == fG.HN || q == fG.D$) if (this.Zk) this.Zk.j3(j.Yr);
  };
  cp.prototype.V5 = function (j) {};
  cp.prototype.T = function () {
    if (this.Zk) this.Zk.T();
    else this.a4r.innerHTML = J.CP(this.af, null, "toolicon");
    this.jU();
  };
  cp.prototype.jU = function () {};
  function hG() {
    cp.call(this);
    this.Hr = new lf();
    this.Hr.Q(_.E.n, this.bk, this);
    this.Hr.parent = this;
    this.body.appendChild(this.Hr._);
  }
  hG.prototype = new cp();
  hG.prototype.jU = function () {
    this.Hr.T();
  };
  hG.prototype.bk = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = { R: _.Y.Vt, l: this.l, rw: this.Hr.ahQ() };
    this.k(q);
  };
  hG.prototype.V5 = function (j) {
    this.Hr.avx(j.xB);
  };
  function g0(j) {
    cp.call(this);
    if (j == null) return;
    this.a = null;
    this.$B = {};
    if (j.indexOf("brush") != -1 && j.indexOf("prsr") == -1) j.push("prsr");
    for (var y = 0; y < j.length; y++) {
      var q = j[y],
        m = null;
      if (q == "brush") {
        m = new bo();
      }
      if (q == "bmode") {
        m = new f1([12, 19, 0], kJ.nb, kJ.hb);
      }
      if (q == "bmode0") {
        m = new f1([12, 19, 0], kJ.nb.slice(23));
      }
      if (q == "emode") {
        m = new f1(
          [12, 36],
          [
            [9, 3],
            [10, 38],
          ]
        );
      }
      if (q == "opacity") {
        m = new k7([12, 0], 0, 100, "%");
        m.q(100);
      }
      if (q == "flow") {
        m = new k7([12, 63], 0, 100, "%");
        m.q(100);
      }
      if (q == "smth") {
        m = new k7([19, 3, 0], 0, 100, "%");
        m.q(0);
      }
      if (q == "samp") {
        m = new f1(
          [12, 36],
          [
            [12, 25, 4],
            [12, 25, 5],
            [12, 46],
          ]
        );
      }
      if (q == "wconf") {
        m = new jd();
        m.q([40, !0, !0]);
      }
      if (q == "sall") {
        m = new av([12, 25, 2]);
      }
      if (q == "smode") {
        m = new f1(
          [12, 36],
          [
            [19, 7, 0],
            [19, 7, 1],
          ]
        );
        m.q(1);
      }
      if (q == "pdetail") {
        m = new av([12, 65]);
        m.mb();
      }
      if (q == "rng") {
        m = new f1(
          [12, 12],
          [
            [19, 6, 0],
            [19, 6, 1],
            [19, 6, 2],
          ]
        );
        m.q(1);
      }
      if (q == "expo") {
        m = new k7([12, 5], 0, 100, "%");
        m.q(50);
      }
      if (q == "algnd") {
        m = new av([12, 75]);
        m.q(!1);
      }
      if (q == "sfrom") {
        m = new f1(
          [12, 70],
          [
            [17, 1],
            [17, 3],
            [17, 0],
          ]
        );
      }
      if (q == "alt") {
        m = new bl(null, ["Alt"], !0, ["Select Source"]);
      }
      if (q == "qsmode") {
        m = new gA(
          [12, 36],
          [
            '<img src="' + PIMG["set/front"] + '" class="autoscale gsicon" />',
            '<img src="' + PIMG.zoomIn + '" class="autoscale gsicon" />',
            '<img src="' + PIMG.zoomOut + '" class="autoscale gsicon" />',
          ],
          [
            [5, 3],
            [18, 1],
            [18, 2],
          ]
        );
      }
      if (q == "redge") {
        m = new kv([7, 11], !1, null, !0);
      }
      if (q == "sesu") {
        m = new kv("Select Subject", !1, null, !0);
      }
      if (q == "setop") {
        m = new i4();
      }
      if (q == "patch") {
        m = new gA(null, [
          [12, 70],
          [12, 71],
        ]);
      }
      if (q == "strn") {
        m = new k7([12, 64], 1, 100, "%");
        m.q(50);
      }
      if (q == "prsr") {
        m = this.$B.brush.mk;
      }
      if (q == "symm") {
        m = new hh();
      }
      this.body.appendChild(m._);
      if (q == "prsr") continue;
      m.parent = this;
      this.$B[q] = m;
      if (q == "brush") m.Q(_.E.n, this.asS, this);
      else if (q == "redge" || q == "sesu") m.Q("click", j2.aqe, this);
      else m.Q(_.E.n, this._V, this);
    }
  }
  g0.prototype = new cp();
  g0.prototype.XH = function (j, q) {
    j = j[1];
    var m = this.$B;
    if (j.Md) m.bmode.q(kJ.Tg.indexOf(j.Md.v.BlnM));
    if (j.Opct) m.opacity.q(j.Opct.v);
    if (j.flow) m.flow.q(j.flow.v);
    if (j.Brsh) m.brush.q(j, q.AU.cd, q.AU.cs);
    if (j.FrgC) {
      var n = B.MV.xH(j.FrgC.v),
        G = new fd(_.E.c, !0);
      G.data = {
        R: _.Y.fh,
        rw: fG.Ru,
        _G: 0,
        K: (n.o << 16) | (n.i << 8) | n.X,
      };
      this.k(G);
    }
    this.asS();
    this._V();
  };
  g0.prototype.iN = function () {
    if (L.FW[this.l] == null) return null;
    var j = this.$B,
      q;
    for (var m in L.Rt) if (L.Rt[m] == this.l) q = m;
    var n = B.S(j.brush.V());
    n.classID = q;
    if (j.bmode) n.Md = { t: "enum", v: { BlnM: kJ.Tg[j.bmode.V()] } };
    if (j.opacity) n.Opct = { t: "long", v: j.opacity.V() };
    if (j.flow) n.flow = { t: "long", v: j.flow.V() };
    var G = this.a.UP;
    G = { o: G >>> 16, i: (G >>> 8) & 255, X: G & 255 };
    n.FrgC = { t: "Objc", v: B.MV.Ia(G) };
    return ["Brush Preset " + n.Brsh.v.Dmtr.v.val, n];
  };
  g0.prototype.jU = function () {
    for (var j in this.$B) this.$B[j].T();
  };
  g0.prototype.V5 = function (j) {
    if (j.aET == "showBrushOpts") {
      this.$B.brush.aK$(j.yw.x, j.yw.y);
    }
    for (var q in j.XX) {
      var m = j.XX[q];
      if (q != "qsmode") m *= 100;
      if (this.$B[q]) this.$B[q].q(m);
    }
  };
  g0.prototype.yp = function (j, q) {
    cp.prototype.yp.call(this, j, q);
    this.a = j;
    var m = this.$B.brush;
    if (m == null) return;
    if (q == fG.HN || q == fG.cS) m.j3(j.AU);
    if (q == fG.ww) {
      m.q(j.AU.Kw, j.AU.cd, j.AU.cs);
    }
  };
  g0.prototype.asS = function () {
    var j = new fd(_.E.c, !0);
    j.data = { R: _.Y.fh, rw: fG.ww, YP: this.$B.brush.V() };
    this.k(j);
  };
  g0.prototype._V = function () {
    var j = new fd(_.E.c, !0);
    j.data = { R: _.Y.Vt, l: this.l };
    for (var q in this.$B) {
      if (q == "brush" || q == "redge" || q == "symm") continue;
      var m = this.$B[q].V();
      if (["opacity", "flow", "smth", "expo", "strn"].indexOf(q) != -1)
        j.data[q] = m / 100;
      else if (q == "bmode") j.data.bmode = kJ.YH[m];
      else if (q == "bmode0") j.data.bmode = kJ.YH[23 + m];
      else j.data[q] = m;
    }
    this.k(j);
  };
  function j2(j, q) {
    cp.call(this);
    if (j) return;
    this.$B = {};
    for (var y = 0; y < q.length; y++) {
      var m = q[y],
        n = null;
      if (m == "sesu" && !J.Q_(1)) continue;
      if (m == "binop") n = new i4();
      if (m == "feat") {
        n = new k7([7, 6], 0, 100, "px");
        n.q(0);
      }
      if (m == "redge") n = new kv([7, 11], !1, null, !0);
      if (m == "sesu") n = new kv("Select Subject", !1, null, !0);
      if (m == "wconf") n = new jd();
      if (m == "cstr") n = new du();
      if (m == "anta") {
        n = new av([12, 25, 1]);
        n.q(!0);
      }
      if (m == "sall") n = new av([12, 25, 2]);
      if (m == "redge" || m == "sesu") n.Q("click", j2.aqe, this);
      else n.Q(_.E.n, this._V, this);
      n.parent = this;
      this.body.appendChild(n._);
      this.$B[m] = n;
    }
  }
  j2.prototype = new cp();
  j2.prototype.V5 = function (j) {
    var q = this.$B.cstr;
    if (j.uH != null) this.$B.binop.q(j.uH);
    else if (j.TX) {
      for (var m in j.TX) if (this.$B[m]) this.$B[m].q(j.TX[m]);
    } else if (j.Bm) {
      if (q) q.FQ(j.Bm);
    } else {
      var n = j2.Qd;
      if (n == null) {
        var G = jv.amq(!0);
        n = j2.Qd = new cG(G.items, G.L1);
      }
      n.T();
      n.parent = this;
      n.update(j.sk, j.a);
      var W = new fd(_.E.c, !0);
      W.data = { R: _.Y.wQ, Tf: n, x: j.sy.uA + 2, y: j.sy.Ql + 1 };
      this.k(W);
    }
  };
  j2.prototype.jU = function () {
    for (var j in this.$B) this.$B[j].T();
  };
  j2.aqe = function (j) {
    var q = j.target == this.$B.sesu,
      m = new fd(q ? _.E.w : _.E.c, !0);
    if (q) {
      m.l = L.ag;
      m.data = { R: "bgrm", K: 2 };
    } else m.data = { R: _.Y.s0, kO: "redge" };
    this.k(m);
  };
  j2.prototype._V = function () {
    var j = new fd(_.E.c, !0);
    j.data = { R: _.Y.Vt, l: this.l, TX: {} };
    for (var q in this.$B) j.data.TX[q] = this.$B[q].V();
    this.k(j);
  };
  function iq() {
    g0.call(this, ["brush", "strn"]);
  }
  iq.prototype = new g0();
  function jE() {
    g0.call(this, "brush bmode opacity flow smth prsr symm".split(" "));
  }
  jE.prototype = new g0();
  function kD() {
    g0.call(this, ["brush", "bmode0", "samp", "wconf"]);
  }
  kD.prototype = new g0();
  function hy() {
    g0.call(this, ["brush"]);
  }
  hy.prototype = new g0();
  function j6() {
    g0.call(this, "brush bmode opacity smth prsr symm".split(" "));
  }
  j6.prototype = new g0();
  function kW() {
    g0.call(this, ["brush", "rng", "expo"]);
  }
  kW.prototype = new g0();
  function kz() {
    g0.call(this, "brush bmode opacity algnd sfrom alt".split(" "));
  }
  kz.prototype = new g0();
  function hO(j) {
    cp.call(this);
    if (j == null) return;
    this.AJ = [];
    this.aac = new kv("\u2026", !1, null, !0);
    if (!j) this.body.appendChild(this.aac._);
    this.aac.Q("click", this.ig, this);
    this.cx = new kV();
    this.cx.parent = this;
    var q = (this.cx._ = J.m("div", "floatcont form")),
      m = [
        [17, 0],
        [17, 1],
        [11, 12, 0],
        [17, 2],
      ];
    for (var y = 0; y < m.length; y++) {
      var n = new kv(m[y], !1, null, !0);
      this.AJ.push(n);
      n.Q("click", this.ab_, this);
      if (!j || y == 1) q.appendChild(n._);
    }
    this.Z5 = new du(!0);
    this.Z5.Q(_.E.n, this.zY, this);
    if (!j) this.body.appendChild(this.Z5._);
    this.v8 = new kv([15, 7, 6], !1, null, !0);
    this.v8.Q("click", this.ab_, this);
    if (!j) this.body.appendChild(this.v8._);
    this.gi = new av([15, 7, 10]);
    this.gi.Q(_.E.n, this.zY, this);
    if (!j) this.body.appendChild(this.gi._);
    this.ik = new av([6, 48, 0, 3]);
    this.ik.Q(_.E.n, this.zY, this);
    if (!j) this.body.appendChild(this.ik._);
    this.vY = new bj();
    this.vY.Q("click", this.av, this);
  }
  hO.prototype = new cp();
  hO.prototype.ig = function (j) {
    if (J.JO(this.cx._)) return;
    var q = this.aac._.getBoundingClientRect(),
      m = new fd(_.E.c, !0);
    m.data = { R: _.Y.wQ, Tf: this.cx, x: q.left, y: q.top + q.height + 4 };
    this.k(m);
  };
  hO.prototype.jU = function () {
    this.vY.T();
    for (var y = 0; y < this.AJ.length; y++) this.AJ[y].T();
    this.Z5.T();
    this.gi.T();
    this.v8.T();
    this.ik.T();
  };
  hO.prototype.V5 = function (j) {
    if (j.Bm) {
      this.Z5.FQ(j.Bm);
      return;
    }
    var q = this.vY._;
    if (j.f1) this.body.appendChild(q);
    else if (this.body.contains(q)) this.body.removeChild(q);
    if (j.Z5) this.Z5.q(j.Z5);
  };
  hO.prototype.av = function (j) {
    var q = { R: _.Y.Vt, l: this.l, mu: this.vY.V() ? "commit" : "cancel" },
      m = new fd(_.E.c, !0);
    m.data = q;
    this.k(m);
  };
  hO.prototype.ab_ = function (j) {
    j.target._.blur();
    var q = {
      R: _.Y.Vt,
      l: this.l,
      mu: "cropby",
      aeU: this.AJ.indexOf(j.target),
    };
    if (j.target == this.v8) q.mu = "straighten";
    var m = new fd(_.E.c, !0);
    m.data = { R: _.Y.q4, Tf: this.cx };
    this.k(m);
    m.data = q;
    this.k(m);
  };
  hO.prototype.zY = function (j) {
    var q = {
        R: _.Y.Vt,
        l: this.l,
        mu: "config",
        TX: { On: this.Z5.V(), J0: this.gi.V(), Xt: this.ik.V() },
        aaI: j.target == this.Z5,
      },
      m = new fd(_.E.c, !0);
    m.data = q;
    this.k(m);
  };
  function fK() {
    hO.call(this, !1);
  }
  fK.prototype = new hO();
  function eM() {
    hO.call(this, !0);
  }
  eM.prototype = new hO();
  function kb() {
    g0.call(this, ["brush", "rng", "expo"]);
  }
  kb.prototype = new g0();
  function bz() {
    g0.call(this, "brush emode opacity flow smth prsr symm".split(" "));
  }
  bz.prototype = new g0();
  function aP() {
    g0.call(this, ["brush", "samp", "wconf"]);
  }
  aP.prototype = new g0();
  function dl() {
    j2.call(this, !1, ["binop", "feat", "anta", "redge", "cstr"]);
  }
  dl.prototype = new j2(!0);
  function gl() {
    cp.call(this);
    var j = (this.$B = [
      new f1([12, 20, 0], ["1x1", "3x3", "5x5", "11x11", "31x31"]),
      new f1(
        [12, 70],
        [
          [17, 1],
          [17, 3],
          [17, 0],
        ]
      ),
      new av([12, 20, 1]),
      new av([8, 0]),
    ]);
    j[1].q(2);
    j[2].q(!0);
    for (var y = 0; y < j.length; y++) {
      var q = j[y];
      q.Q(_.E.n, this._V, this);
      this.body.appendChild(q._);
    }
  }
  gl.prototype = new cp();
  gl.prototype._V = function (j) {
    var q = this.$B,
      m = [];
    for (var y = 0; y < q.length; y++) m[y] = q[y].V();
    var n = new fd(_.E.c, !0);
    n.data = { R: _.Y.Vt, l: this.l, TX: m };
    this.k(n);
  };
  gl.prototype.jU = function () {
    for (var y = 0; y < this.$B.length; y++) this.$B[y].T();
  };
  function bD() {
    cp.call(this);
    this.BK = !1;
    this.qG = new a4("GrFl", !0);
    this.qG.parent = this;
    this.qG.update(null, JSON.parse(eu.oy[6]));
    this.qG.Q(_.E.n, this.tS, this);
    var j = "Grad Type Md Opct Rvrs Dthr".split(" ");
    for (var y = 0; y < j.length; y++)
      this.body.appendChild(this.qG.Vc[j[y]]._);
    this.qG.Vc.Grad.afX = !1;
    this.LO = new kv([6, 48, 1], !1, null, !0);
    this.LO.Q("click", this.tS, this);
    this.body.appendChild(this.LO._);
  }
  bD.prototype = new cp();
  bD.prototype.jU = function (j) {
    var j = this.BK;
    this.body.children[2].style.display = j ? "none" : "";
    this.body.children[3].style.display = j ? "none" : "";
    this.qG.T();
    this.LO.T();
  };
  bD.prototype.yp = function (j, q) {
    cp.prototype.yp.call(this, j, q);
    var m = q == fG.Ru,
      n = this.qG.Vc.Grad;
    n.oz(j.UP, j.vH);
    if (m || q == fG.WX || q == fG.HN) n.j3(j.bu);
  };
  bD.prototype.tS = function (j) {
    if (j.target == this.LO) {
      var q = new fd(_.E.NI, !0);
      q.data = L.jy.QQ(1);
      this.k(q);
      return;
    }
    this.T();
    var q = new fd(_.E.c, !0);
    q.data = { R: _.Y.Vt, l: this.l, rw: this.qG.V() };
    this.k(q);
  };
  bD.prototype.V5 = function (j) {
    this.BK = j.z;
    this.T();
    this.qG.update(null, j.rw);
    this.T();
  };
  function aO() {
    cp.call(this);
    this.IY = new av([8, 7, 1]);
    this.body.appendChild(this.IY._);
    this.IY.Q(_.E.n, this._V, this);
  }
  aO.prototype = new cp();
  aO.prototype._V = function () {
    var j = { R: _.Y.Vt, l: this.l, RR: this.IY.V() },
      q = new fd(_.E.c, !0);
    q.data = j;
    this.k(q);
  };
  function iR() {
    cp.call(this);
    var j = J.m("span", "fitem");
    this.body.appendChild(j);
    this.BF = [
      new k7([12, 15], -180, 180, "\xB0"),
      new kv([1, 12, 2], null, null, !0),
    ];
    for (var y = 0; y < this.BF.length; y++) {
      var q = this.BF[y];
      q.parent = this;
      j.appendChild(q._);
      q.Q(y == 1 ? "click" : _.E.n, this.OI, this);
    }
  }
  iR.prototype = new cp();
  iR.prototype.jU = function () {
    for (var y = 0; y < this.BF.length; y++) this.BF[y].T();
  };
  iR.prototype.V5 = function (j) {
    var q = (j.Ci * 180) / Math.PI;
    q = ((36e5 + 180 + q) % 360) - 180;
    this.BF[0].q(q);
  };
  iR.prototype.OI = function (j) {
    var q = this.BF.indexOf(j.target),
      m = new fd(_.E.c, !0);
    m.data = {
      R: _.Y.Vt,
      l: this.l,
      Ci: q == 1 ? 0 : (j.target.V() * Math.PI) / 180,
    };
    this.k(m);
  };
  function bc() {
    g0.call(this, ["brush", "algnd", "sfrom", "alt"]);
  }
  bc.prototype = new g0();
  function j5() {
    cp.call(this);
    this.a = null;
    this.FI = new ci();
    this.FI.parent = this;
    this.body.appendChild(this.FI.Oz._);
    this.body.appendChild(this.FI.jc._);
    this.body.appendChild(this.FI.Bw._);
    this.body.appendChild(this.FI.M0._);
    var j = J.m("span", "fitem");
    this.body.appendChild(j);
    j.appendChild(this.FI.asv._);
    j.appendChild(this.FI.aHX._);
    j.appendChild(this.FI.ai4._);
    this.yG = new f1("Aa", [
      [22, 5, 0],
      [12, 95, 0],
      [12, 95, 1],
      [12, 95, 2],
      [12, 95, 3],
    ]);
    this.yG.Q(_.E.n, this.av, this);
    this.body.appendChild(this.yG._);
    this.KJ = new f1(null, ["\u2191", "-", "\u2193"], null, [
      "VAR0: VAR1",
      [12, 75],
      [22, 4, 1],
    ]);
    this.KJ.Q(_.E.n, this.av, this);
    this.body.appendChild(this.KJ._);
    this.vz = new kv([11, 9], !1, null, !0);
    this.vz.Q("click", this.aao, this);
    this.body.appendChild(this.vz._);
    this.vY = new bj();
    this.vY.Q("click", this.av, this);
  }
  j5.prototype = new cp();
  j5.prototype.XH = function (j, q) {
    j = j[1];
    var m = j.textToolCharacterOptions.v.TxtS.v,
      n = j.textToolParagraphOptions.v.paragraphStyle.v,
      G = B.S(q.Cw);
    al.gh(m, G.K2, G, 72);
    al.gh(n, G.Th, G, 72);
    var W = new fd(_.E.c, !0);
    W.data = { R: _.Y.fh, rw: fG.R3, Cw: G };
    this.k(W);
  };
  j5.prototype.iN = function () {
    var j = { classID: "TxtS" },
      q = { classID: "paragraphStyle" },
      m = this.a.Cw;
    al.GE(m.K2, j, m, 72);
    al.GE(m.Th, q, m, 72);
    return [
      "Horizontal Type Tool",
      {
        classID: "typeCreateOrEditTool",
        textToolCharacterOptions: {
          t: "Objc",
          v: { classID: "null", TxtS: { t: "Objc", v: j } },
        },
        textToolParagraphOptions: {
          t: "Objc",
          v: { classID: "null", paragraphStyle: { t: "Objc", v: q } },
        },
      },
    ];
  };
  j5.prototype.jU = function () {
    this.vY.T();
    this.FI.T();
    this.vz.T();
  };
  j5.prototype.aao = function (j) {
    var q = { R: _.Y.Vt, l: this.l, mu: "showwarp" },
      m = new fd(_.E.c, !0);
    m.data = q;
    this.k(m);
  };
  j5.prototype.V5 = function (j) {
    if (j.mu == "showactive") this.body.appendChild(this.vY._);
    if (j.mu == "hideactive") this.body.removeChild(this.vY._);
    if (j.mu == "changeOther") {
      this.yG.q(j.YI);
      this.KJ.q([0, 2, 1][j.aub]);
    }
    if (j.mu == "showpan") {
      var q = [{ name: [0, 1], q7: !0 }],
        m = [{ p: _.E.w, l: L.G_, d: { R: "editCurr", lR: j.lR } }],
        n = j.sy;
      if (j.aaS) {
        q = [{ name: ["VAR0: VAR1", [0, 5], [7, 0]], q7: !0 }];
        m = [{ p: _.E.NI, d: L.pI.TP(!0) }];
        var G = jv.ajq();
        q = q.concat(G[0]);
        m = m.concat(G[1]);
      }
      q.push({ name: [11, 9] });
      m.push({ p: _.E.c, d: { R: _.Y.Vt, l: this.l, mu: "showwarp" } });
      var W = new cG(q, m);
      W.parent = this;
      W.T();
      W.update(j.sk, j.a);
      var k = new fd(_.E.c, !0);
      k.data = { R: _.Y.wQ, Tf: W, x: n.uA + 2, y: n.Ql + 1 };
      this.k(k);
    }
  };
  j5.prototype.yp = function (j, q) {
    this.a = j;
    cp.prototype.yp.call(this, j, q);
    if (q != fG.HN && q != fG.R3 && q != fG.uk && q != fG.Hp) return;
    this.FI.q(j.Cw, j.HS, j.YL);
  };
  j5.prototype.av = function (j) {
    var q = { R: _.Y.Vt, l: this.l, mu: this.vY.V() ? "commit" : "cancel" };
    if (j.target == this.yG || j.target == this.KJ) {
      q.mu = "changeOther";
      q.YI = this.yG.V();
      q.aub = [0, 2, 1][this.KJ.V()];
    }
    var m = new fd(_.E.c, !0);
    m.data = q;
    this.k(m);
  };
  function fg() {
    j2.call(this, !1, ["binop", "feat", "anta", "redge"]);
  }
  fg.prototype = new j2(!0);
  function hW() {
    cp.call(this);
    var j = [],
      m =
        '<svg  class="autoscale gsicon" viewBox="0 0 14 18" width="14" height="18" fill="black"><path d="M14,6 L10,6 L10,0 L4,0 L4,6 L0,6 L7,13 L14,6 L14,6 Z M0,14 L0,16 L14,16 L14,14 Z" /></svg>';
    this.Wt = new av([12, 85]);
    this.Wt.q(!0);
    this.Wt.Q(_.E.n, this._V, this);
    j.push(this.Wt._);
    this.NB = new f1(null, [
      [0, 4],
      [0, 3],
    ]);
    this.NB.Q(_.E.n, this._V, this);
    this.NB.q(1);
    j.push(this.NB._);
    this.RO = new av([20, 1]);
    this.RO.Q(_.E.n, this._V, this);
    j.push(this.RO._);
    this.XV = new av([12, 83]);
    this.XV.Q(_.E.n, this._V, this);
    j.push(this.XV._);
    this.cx = new kV();
    var q = (this.cx._ = J.m("div", "floatcont form"));
    J.F(this.cx._, "max-width: 200px;");
    this.cx.parent = this;
    this.aM4 = new f1("Scale for exported files", ["1x", "2x", "3x", "4x"]);
    q.appendChild(this.aM4._);
    this.sm = new kv(m + " PNG", !1, "Save selected layers as PNG", !0);
    q.appendChild(this.sm._);
    this.sm.Q("click", this.Gb, this);
    this.azO = new kv(m + " SVG", !1, "Save selected layers as SVG", !0);
    q.appendChild(this.azO._);
    this.azO.Q("click", this.Gb, this);
    var n = new kv(m, !1, "Save selected layers", !0);
    j.push(n._);
    n.Q(
      "click",
      function (U) {
        if (J.JO(this.cx._)) return;
        var Z = n._.getBoundingClientRect(),
          h = new fd(_.E.c, !0);
        h.data = {
          R: _.Y.wQ,
          Tf: this.cx,
          x: Z.left,
          y: Z.top + Z.height,
          LR: !0,
        };
        this.k(h);
      },
      this
    );
    this.VK = new kV();
    var G = (this.VK._ = J.m("div", "floatcont label6"));
    J.F(G, "max-width: 180px;");
    this.VK.parent = this;
    this.CX = new ho("Columns", 1, 20);
    this.CX.q(4);
    G.appendChild(this.CX._);
    this.kC = new ho("Gap", 0, 200, null, 2, !0);
    this.kC.q(8);
    G.appendChild(this.kC._);
    this.kC.Q(
      _.E.n,
      function (U) {
        this.Ra.q(this.kC.V());
      }.bind(this),
      this
    );
    this.Ra = new ho("Vertical Gap", 0, 200, null, 2, !0);
    this.Ra.q(8);
    G.appendChild(this.Ra._);
    this.Ji = new kv([2, 10, 1], !1, null, !0);
    G.appendChild(this.Ji._);
    this.Ji.Q("click", this.Gb, this);
    this.a9E = new kV();
    var W = (this.a9E._ = J.m("div", "floatcont label6"));
    J.F(W, "max-width:180px");
    this.a9E.parent = this;
    this.aak = new f1("Align to", ["Selection", "Canvas"]);
    this.aak.q(0);
    W.appendChild(this.aak._);
    var k = J.m("span", "fitem");
    j.push(k);
    var T = J.m("span", "fitem");
    j.push(T);
    this.JA = [];
    for (var y = 0; y < 8; y++) {
      var b = y == 3 || y == 7 ? [20, 4, 6] : [20, 4, y < 3 ? y : y - 1],
        c = new kv("Hi", !1, b);
      (y < 4 ? k : T).appendChild(c._);
      c.Q("click", this.Gb, this);
      this.JA.push(c);
    }
    var a = (this.bq = new kv("..."));
    T.appendChild(a._);
    a.Q(
      "click",
      function (U) {
        if (J.JO(this.VK._)) return;
        var Z = a._.getBoundingClientRect(),
          h = new fd(_.E.c, !0);
        h.data = {
          R: _.Y.wQ,
          Tf: this.a9E,
          x: Z.left,
          y: Z.top + Z.height,
          LR: !0,
        };
        this.k(h);
      },
      this
    );
    var f = (this.az5 = new kv("Hi", !1, "Align to a Grid"));
    j.push(f._);
    f.Q(
      "click",
      function (U) {
        if (J.JO(this.VK._)) return;
        var Z = f._.getBoundingClientRect(),
          h = new fd(_.E.c, !0);
        h.data = {
          R: _.Y.wQ,
          Tf: this.VK,
          x: Z.left,
          y: Z.top + Z.height,
          LR: !0,
        };
        this.k(h);
      },
      this
    );
    for (var y = 0; y < j.length; y++) this.body.appendChild(j[y]);
    this.a3e = j;
  }
  hW.prototype = new cp();
  hW.prototype.V5 = function (j) {
    var q = j.xB,
      m = j.al_;
    this.Wt.q(q.uC);
    this.RO.q(q.XN);
    this.XV.q(q.QV);
    if (m) {
      J.dI(this.body);
      for (var y = 0; y < m.length; y++)
        if (m[y] == 1 && this.a3e[y]) this.body.appendChild(this.a3e[y]);
    }
  };
  hW.prototype.Gb = function (j) {
    var q = this.JA.indexOf(j.target),
      m;
    if (q != -1 || j.target == this.Ji) {
      m = new fd(_.E.w, !0);
      m.l = L.Lx;
      m.data = {
        R: "algn",
        K: q == -1 ? 8 : q,
        arf: this.aak.V(),
        cols: this.CX.V(),
        apd: this.kC.V(),
        auA: this.Ra.V(),
      };
    } else {
      m = new fd(_.E.c, !0);
      m.data = {
        R: _.Y.Vt,
        l: this.l,
        _G: j.target == this.sm ? "getPNG" : "getSVG",
        ua: this.aM4.V() + 1,
      };
    }
    this.k(m);
  };
  hW.prototype._V = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = {
      R: _.Y.Vt,
      l: this.l,
      _G: "prms",
      uC: this.Wt.sM(),
      aFI: this.NB.V(),
      XN: this.RO.sM(),
      QV: this.XV.sM(),
    };
    this.k(q);
  };
  hW.prototype.jU = function () {
    this.Wt.T();
    this.NB.T();
    this.RO.T();
    this.XV.T();
    var j = "h0 h1 h2 hG v0 v1 v2 vG".split(" ");
    for (var y = 0; y < 8; y++) {
      this.JA[y].hk(J.CP("align/" + j[y], null, "autoscale"));
    }
    this.az5.hk(J.CP("split/vh", null, "autoscale"));
    this.CX.T();
    this.kC.T();
    this.Ra.T();
    this.Ji.T();
  };
  function h9() {
    j2.call(this, !1, "binop feat redge sesu wconf sall".split(" "));
  }
  h9.prototype = new j2(!0);
  function ax() {
    g0.call(this, ["setop", "patch"]);
  }
  ax.prototype = new g0();
  function kY() {
    g0.call(this, ["setop"]);
  }
  kY.prototype = new g0();
  function gy(j) {
    var q = j == L.arj ? [] : ["bmode"];
    g0.call(this, q.concat(["opacity", "wconf", "sall"]));
  }
  gy.prototype = new g0();
  function iD() {
    j2.call(this, !1, ["binop", "feat", "anta", "redge"]);
  }
  iD.prototype = new j2(!0);
  function i8() {
    j2.call(this, !1, ["binop", "feat", "anta", "redge"]);
  }
  i8.prototype = new j2(!0);
  function eX() {
    j2.call(this, !1, ["binop", "feat", "redge", "cstr"]);
  }
  eX.prototype = new j2(!0);
  function ja() {
    cp.call(this);
    this.a = null;
    this.iW = null;
    this.zE = !0;
    this.RM = [
      new bJ("X", null, 3.2, null, !0),
      new bJ("Y", null, 3.2, null, !0),
      new bJ("W", null, 3.2, null, !0),
      new bJ("H", null, 3.2, null, !0),
      new bJ("a", "\xB0", 3.7, null, !0),
      new bJ("l", null, 3.5, null, !0),
      new bJ("l", null, 3.5, null, !0),
      new av("Use custom units:"),
      new kv("Define Unit", !1, null, !0),
      new kv([15, 7, 6], !1, null, !0),
      new kv([2, 2], !1, null, !0),
    ];
    this.RM[7]._.style.marginRight = "0px";
    for (var y = 0; y < this.RM.length; y++) {
      var j = this.RM[y];
      this.body.appendChild(j._);
      if (y > 6) j.Q(y == 7 ? _.E.n : "click", this.oR, this);
    }
    this.JL = 0;
  }
  ja.prototype = new cp();
  ja.prototype.oR = function (j) {
    var q = this.RM.indexOf(j.target),
      m = new fd(_.E.w, !0),
      n = this.iW;
    if (q == 7) {
      this.V5(n);
      return;
    }
    if (q == 8) {
      if (this.zE) {
        alert("Draw a line for the new unit");
        return;
      }
      this.RM[7].q(!0);
      var G = new fd(_.E.c, !0);
      G.data = { R: _.Y.s0, kO: "measscale", Dh: ea.gw(n.aLp, n.IM) };
      this.k(G);
      return;
    }
    if (q == 9) {
      if (this.JL == 0) return;
      m.l = L.Fg;
      m.data = { R: "rot", ER: [2, 5], K: -this.JL };
    }
    if (q == 10) {
      m.l = L.VO;
      m.data = { R: "reset" };
      this.zE = !0;
      for (var y = 0; y < 6; y++) this.RM[y].q(null);
    }
    this.k(m);
  };
  ja.prototype.V5 = function (j) {
    function q(c, a, f) {
      var U = ea.gw(c, a),
        Z = ea.gw(a, f),
        h = ea.gw(c, f);
      return Math.acos((Z * Z + U * U - h * h) / (2 * Z * U));
    }
    if (j == null) return;
    this.iW = j;
    var m = j.aLp,
      n = j.IM,
      G = n.x - m.x,
      W = n.y - m.y;
    this.JL = -Math.atan2(W, G);
    if (j.g9) this.JL = q(n, m, j.g9);
    var k = this.RM;
    k[0].q(this.cE(j, m.x));
    k[1].q(this.cE(j, m.y));
    k[2].q(this.cE(j, G));
    k[3].q(this.cE(j, W));
    k[4].q(((this.JL * 180) / Math.PI).toFixed(2));
    k[5].q(this.cE(j, ea.gw(m, n)));
    this.zE = m.Lg(n);
    if (j.g9) {
      k[6].q(this.cE(j, ea.gw(m, j.g9)));
    } else k[6].q("");
    k[8].hk("Define");
    var T = j.pj;
    if (T) {
      var b = T.T.v;
      k[8].hk(b.logicalUnits.v);
    }
  };
  ja.prototype.cE = function (j, q) {
    var m = this.iW.pj,
      n;
    if (m && this.RM[7].V()) {
      var G = m.T.v;
      n = (q * G.logicalLength.v) / G.pixelLength.v;
    } else n = B.uO.G7(q, j.zv, this.a, j.a55, !1);
    return parseFloat(n).toFixed(2);
  };
  ja.prototype.yp = function (j, q) {
    this.a = j;
    this.V5(this.iW);
  };
  ja.prototype.jU = function () {
    var j = this.RM;
    for (var y = 0; y < j.length; y++) j[y].T();
    j[4].hk(g$.get([12, 15]).slice(0, 1) + ":");
    var q = g$.get([12, 80, 0]).slice(0, 1);
    j[5].hk(q + "1:");
    j[6].hk(q + "2:");
    J.eU(j[2], j[3]);
  };
  function iH() {
    g0.call(this, ["brush", "strn", "pdetail"]);
  }
  iH.prototype = new g0();
  function fn() {
    g0.call(this, ["brush", "sfrom"]);
    this.aHq = [];
    var j = [[7, 12]];
    for (var y = 0; y < j.length; y++) {
      var q = new kv(j[y], !1, null, !0);
      this.aHq.push(q);
      q.parent = this;
      this.body.appendChild(q._);
      q.Q("click", this.ayN, this);
    }
  }
  fn.prototype = new g0();
  fn.prototype.ayN = function (j) {
    var q = new fd(_.E.NI, !0);
    q.data = L.tt.QQ("contentAware");
    this.k(q);
  };
  function dX() {
    g0.call(this, ["brush", "strn"]);
  }
  dX.prototype = new g0();
  function dj() {
    g0.call(this, ["brush", "flow", "smode"]);
  }
  dj.prototype = new g0();
  function jI() {
    cp.call(this);
    this.BR = !1;
    var j = J.m("span", "fitem");
    this.body.appendChild(j);
    this.DA = new gA(null, [
      '<img src="' + PIMG.zoomIn + '" class="autoscale gsicon" />',
      '<img src="' + PIMG.zoomOut + '" class="autoscale gsicon" />',
    ]);
    j.appendChild(this.DA._);
    this.DA.Q(_.E.n, this._V, this);
    this.Yv = new kv([20, 2]);
    this.body.appendChild(this.Yv._);
    this.Yv.Q("click", this.a49, this);
    this.anj = new kv([20, 3]);
    this.body.appendChild(this.anj._);
    this.anj.Q("click", this.a49, this);
    this.IY = new av([8, 7, 1]);
    this.body.appendChild(this.IY._);
    this.IY.Q(_.E.n, this._V, this);
  }
  jI.prototype = new cp();
  jI.prototype.jU = function () {
    this.Yv.T();
    this.anj.T();
  };
  jI.prototype._V = function () {
    var j = { R: _.Y.Vt, l: this.l, Ow: this.DA.V() == 0, RR: this.IY.V() },
      q = new fd(_.E.c, !0);
    q.data = j;
    this.k(q);
  };
  jI.prototype.V5 = function (j) {
    if (this.BR != j.BR) this.DA.q(1 - this.DA.V());
    this.BR = j.BR;
  };
  jI.prototype.a49 = function (j) {
    var q = new fd(_.E.w, !0);
    q.l = L.R2;
    q.data = { R: "adapt", K: j.target == this.Yv ? "pixel" : "fitscr" };
    this.k(q);
  };
  function jV(j, q) {
    cp.call(this);
    if (j == null) return;
    this.l2 = j;
    this.aD = {};
    this.a1H = q;
    for (var y = 0; y < j.length; y++) {
      var m = j[y],
        n = null;
      if (m == "vmode" || m == "pmode") {
        n = new f1(null, [
          [12, 76, 1],
          [12, 76, 0],
          [12, 76, 2],
        ]);
        n.q(m == "vmode" ? 0 : 1);
        if (q) n.aGg(2);
      }
      if (m == "make") {
        n = new gA(
          "Make",
          [
            [17, 2],
            [12, 76, 1],
          ],
          null,
          !0
        );
      }
      if (m == "anta") {
        n = new av([12, 25, 1]);
        n.q(!0);
      }
      if (m == "binop") {
        n = new f1(null, [
          [6, 13],
          [18, 1],
          [18, 2],
          [18, 3],
          [18, 4],
        ]);
      }
      if (m == "pshape")
        n = new f1(null, [
          [12, 93, 0],
          [12, 93, 1],
          [12, 93, 4],
          [8, 4],
          [12, 93, 2],
        ]);
      if (m == "shape") n = new bU([12, 76, 1]);
      if (m == "crad") {
        n = new k7([12, 94, 0], 0, 50, "px");
        n.q(0);
      }
      if (m == "cstr") {
        n = new du();
      }
      if (m == "irad") {
        n = new k7([12, 94, 1], 0, 100, "%");
        n.q(40);
      }
      if (m == "length") {
        n = new k7([12, 80, 0], 4, 40);
        n.q(4);
      }
      if (m == "sides") {
        n = new k7([12, 78], 3, 30);
        n.q(5);
      }
      if (m == "width") {
        n = new k7([12, 41], 0, 100, "px");
        n.q(5);
      }
      if (m == "tolr") {
        n = new k7([12, 24], 0, 100);
        n.q(5);
      }
      if (m == "fstyle") {
        n = new i0([12, 26]);
      }
      if (m == "sstyle") {
        n = new e$();
      }
      if (m == "psnap") {
        n = new av([8, 10]);
      }
      if (m == "crnr") {
        n = new kv("\u2312", !1, [12, 94, 0], !0);
      }
      if (m == "aopts") {
        n = new hn();
        n.q([!1, !1, 50, 60, 0]);
      }
      if (m == "smplp") {
        n = new kv([12, 94, 2], !1, ["VAR0 (VAR1)", [12, 94, 2], [8, 9]], !0);
      }
      if (m == "rows") {
        n = new k7("Rows", 1, 20);
        n.q(3);
      }
      if (m == "cols") {
        n = new k7("Columns", 1, 20);
        n.q(4);
      }
      if (m == "brdr") {
        n = new k7([7, 9], 1, 20);
        n.q(8);
      }
      n.parent = this;
      this.body.appendChild(n._);
      this.aD[m] = n;
      n.Q(m == "crnr" || m == "smplp" ? "click" : _.E.n, this._V, this);
    }
  }
  jV.prototype = new cp();
  jV.prototype.V5 = function (j) {
    var q = this.aD.cstr;
    if (j.uH != null) this.aD.binop.q(j.uH);
    else if (j._G == "vals") for (var m in j.at3) this.aD[m].q(j.at3[m]);
    else if (j.Bm) {
      if (q) q.FQ(j.Bm);
    } else {
      var n = jV.Qd,
        G = function (k) {
          return { f: k != null && k.Ph(!1) };
        };
      if (n == null)
        n = jV.Qd = new cG(
          [
            {
              name: "Remove Anchor Point",
              f: function (k) {
                var T = k ? k.ac() : null;
                return {
                  f:
                    k &&
                    T[1].length != 0 &&
                    T[0][T[1][0]].add.vmsk.U9.length != 0,
                };
              },
            },
            {
              name: "Remove Path",
              f: function (k) {
                var T = k ? k.ac() : null;
                return {
                  f:
                    k &&
                    T[1].length != 0 &&
                    T[0][T[1][0]].add.vmsk.J.length != 0,
                };
              },
              q7: !0,
            },
            { name: "Make Selection" },
            { name: [2, 3], f: G },
            { name: [14, 9], f: G },
          ],
          [
            { p: _.E.w, l: L.Cl, d: { R: "remove", L9: !0 } },
            { p: _.E.w, l: L.Nj, d: { R: "remove" } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "makesel" } },
            { p: _.E.NI, d: L.Qc.Rr(null) },
            { p: _.E.c, d: { R: _.Y.s0, kO: "strokepath" } },
          ]
        );
      n.parent = this;
      n.update(j.sk, j.a);
      var W = new fd(_.E.c, !0);
      W.data = { R: _.Y.wQ, Tf: n, x: j.sy.uA + 2, y: j.sy.Ql + 1 };
      this.k(W);
    }
  };
  jV.prototype.a10 = function (y) {
    return null;
  };
  jV.prototype.jU = function () {
    for (var j in this.aD) {
      this.aD[j].T();
    }
  };
  jV.prototype._V = function (j) {
    var q = new fd(_.E.c, !0),
      m = this.aD;
    if (j.target == m.crnr) {
      q = new fd(_.E.w, !0);
      q.l = L.Cl;
      q.data = { R: "crnr" };
    } else if (j.target == m.smplp) {
      q = new fd(_.E.w, !0);
      q.l = L.Nj;
      q.data = { R: "smplp" };
    } else if (j.target == m.make) {
      var y = j.target.V();
      console.log(y);
      if (y == 0) q.data = { R: _.Y.s0, kO: "makesel" };
      else {
        q = new fd(_.E.w, !0);
        q.l = L.HO;
        q.data = { R: "newfill", Sg: 0 };
      }
    } else if (j.target == m.fstyle) {
      q.data = { R: _.Y.fh, rw: fG.Vx, K: m.fstyle.V() };
    } else if (j.target == m.sstyle) {
      q.data = { R: _.Y.fh, rw: fG.lF, K: m.sstyle.V() };
    } else if (j.target == m.vmode || j.target == m.pmode) {
      q.data = {
        R: _.Y.fh,
        rw: j.target == m.vmode ? fG.UQ : fG.SZ,
        K: j.target.V(),
      };
    } else {
      if (m.pshape) this.Pm();
      q.data = { R: _.Y.Vt, l: this.l };
      for (var n in m) q.data[n] = m[n].V();
    }
    this.k(q);
  };
  jV.prototype.Pm = function () {
    var j = this.aD,
      q = (j.vmode ? j.vmode : j.pmode).V(),
      m = j.pshape ? this.a10(j.pshape.V()) : this.l2,
      n;
    if (q == 0) n = ["anta", "make"];
    if (q == 1) n = ["anta", "fstyle", "sstyle"];
    if (q == 2) n = ["make", "binop", "fstyle", "sstyle"];
    var G = j.binop;
    if (G) {
      var W = G.V();
      if (q == 0) {
        G.aqR(0);
      } else {
        G.aGg(0);
        if (W == 0) {
          G.q(1);
          this._V({ target: G });
        }
      }
    }
    J.dI(this.body);
    for (var y = 0; y < m.length; y++) {
      var k = m[y];
      if (n.indexOf(k) != -1) continue;
      this.body.appendChild(j[k]._);
    }
  };
  jV.prototype.yp = function (j, q) {
    cp.prototype.yp.call(this, j, q);
    var m = this.aD.fstyle,
      n = this.aD.sstyle,
      G = this.aD.vmode,
      W = this.aD.pmode;
    if (m) m.yp(j, q);
    if (n) n.yp(j, q);
    if (q == fG.HN || q == fG.lG)
      if (j.Jh.length != 0 && this.aD.shape) {
        this.aD.shape.j3(j.Jh);
      }
    if (q == fG.HN || q == fG.Vx) if (m) m.q(null, j.MJ, j.aBP);
    if (q == fG.HN || q == fG.lF) if (n) n.q(null, j.pk, j.auW);
    if (q == fG.HN || q == fG.UQ || q == fG.SZ) {
      var k = j.sV,
        T = j.aw;
      if (this.a1H && T == 2) T = 0;
      if (G) {
        G.q(k);
        this.Pm();
      }
      if (W) {
        W.q(T);
        this.Pm();
      }
    }
  };
  function bV() {
    jV.call(this, ["pmode", "make", "fstyle", "sstyle", "binop"], !0);
  }
  bV.prototype = new jV();
  function eq() {
    jV.call(this, "pmode make anta fstyle sstyle binop".split(" "));
  }
  eq.prototype = new jV();
  function jM() {
    jV.call(this, ["fstyle", "sstyle", "smplp"]);
    this.a4l = null;
    this.a06 = null;
    this.a3V = null;
    this.OY = new f1(
      [12, 76, 0],
      [
        [18, 1],
        [18, 2],
        [18, 3],
        [18, 4],
        [18, 5],
      ],
      [4]
    );
    this.nT = new kv("\u25BC");
    this.nT.mb();
    this.ax1 = new kv("\u25B2");
    this.ax1.mb();
    this.anA = [this.OY, this.nT, this.ax1];
    for (var y = 0; y < this.anA.length; y++) {
      var j = this.anA[y];
      this.body.appendChild(j._);
      j.parent = this;
      j.Q(y == 0 ? _.E.n : "click", this.v2, this);
    }
  }
  jM.prototype = new jV();
  jM.prototype.V5 = function (j) {
    if (j.mu == "main") {
      var q = this.anA,
        m = j.pQ;
      if (m) {
        this.a06 = m.P();
        this.a3V = JSON.stringify(j.ih);
        var n = m.J.slice(0),
          G = n.length;
        for (var y = 0; y < n.length; y++) n[y]++;
        n.sort(function (b, c) {
          return b - c;
        });
        q[0].hC();
        q[1].yl(G != 0);
        q[2].yl(G != 0);
        q[0].hk(
          G == 0
            ? "No Paths"
            : G == 1
            ? "Path " + n[0]
            : "Paths " + n.slice(0, 3).join(",") + (G > 3 ? ".." : "")
        );
        if (G != 0) {
          var W = m.J[0],
            k = B.z.kH(m.D, W),
            T = m.D[k];
          this.OY.q([3, 0, 1, 2][T.Np]);
        }
      } else for (var y = 0; y < q.length; y++) q[y].Ub();
    } else jV.prototype.V5.call(this, j);
  };
  jM.prototype.jU = function () {
    jV.prototype.jU.call(this);
    this.OY.T();
  };
  jM.prototype.v2 = function (j) {
    if (j.target == this.OY || j.target == this.nT || j.target == this.ax1) {
      var q = {},
        m = this.a06,
        n = m.D,
        G = m.J,
        W = B.z.in(n),
        k = JSON.parse(this.a3V);
      G.sort(function (X, $) {
        return X - $;
      });
      if (j.target == this.OY) {
        var T = this.OY.V();
        if (T < 4)
          for (var y = 0; y < G.length; y++)
            n[B.z.kH(n, G[y])].Np = [1, 2, 3, 0][T];
        else {
          if (W <= 1) return;
          m.D = B.z.TV(n);
          m.J = m.D.length == 2 ? [] : [0];
          m.U9 = [];
          k = [B.ih.B0()];
        }
      } else {
        var b = j.target == this.nT ? -1 : 1,
          c = [];
        for (var y = 0; y < W; y++) {
          var a = B.z.kH(n, y),
            f = a + 1 + n[a].length;
          c.push(n.slice(a, f));
        }
        var U = G.slice(0);
        for (var y = 0; y < G.length; y++)
          U[y] = Math.max(y, Math.min(W - 1 - (G.length - 1 - y), U[y] + b));
        if (G.join(",") == U.join(",")) return;
        var Z = B.S(k);
        for (var y = 0; y < G.length; y++) {
          var h = b == -1 ? y : G.length - 1 - y,
            a = G[h],
            f = U[h];
          if (a != f) {
            var u = c[a];
            c[a] = c[f];
            c[f] = u;
            u = Z[a];
            Z[a] = Z[f];
            Z[f] = u;
          }
        }
        var i = n.slice(0, 2);
        for (var y = 0; y < c.length; y++) i = i.concat(c[y]);
        m.D = i;
        m.J = U;
        k = Z;
      }
      q.pQ = m;
      q.ih = k;
      var x = new fd(_.E.c, !0);
      x.data = { R: _.Y.Vt, l: this.l, eQ: q };
      this.k(x);
    }
  };
  function e_() {
    jV.call(this, ["fstyle", "sstyle", "crnr", "psnap"]);
  }
  e_.prototype = new jV();
  function dD() {
    jV.call(this, "vmode make anta fstyle sstyle binop cstr crad".split(" "));
  }
  dD.prototype = new jV();
  function dO() {
    jV.call(this, "vmode make anta fstyle sstyle binop cstr".split(" "));
  }
  dO.prototype = new jV();
  function kQ() {
    jV.call(
      this,
      "vmode make anta fstyle sstyle binop pshape sides irad crad width aopts length rows cols brdr".split(
        " "
      )
    );
    this.aD.aopts.q([!1, !0, 50, 60, 0]);
  }
  kQ.prototype = new jV();
  kQ.prototype.a10 = function (y) {
    var j = [
      ["sides", "crad"],
      ["sides", "irad", "crad"],
      ["width", "aopts"],
      ["rows", "cols", "brdr"],
      ["length"],
    ];
    return "vmode make fstyle sstyle binop pshape".split(" ").concat(j[y]);
  };
  function i$() {
    jV.call(this, "vmode make anta fstyle sstyle binop width aopts".split(" "));
  }
  i$.prototype = new jV();
  function jF() {
    jV.call(this, "vmode make anta fstyle sstyle binop cstr shape".split(" "));
  }
  jF.prototype = new jV();
  function ir() {
    j2.call(this, !1, ["binop", "feat", "redge", "sesu"]);
  }
  ir.prototype = new j2(!0);
  function dw() {
    g0.call(this, ["brush", "qsmode", "redge", "sesu"]);
  }
  dw.prototype = new g0();
  function hb() {
    cp.call(this);
    this.QD = [
      new du(),
      new kv([8, 11, 3], null, null, !0),
      new kv(["VAR0...", [15, 10, 22]], null, null, !0),
    ];
    for (var y = 0; y < 3; y++) {
      var j = this.QD[y];
      j.Q(y == 0 ? _.E.n : "click", this.v2, this);
      this.body.appendChild(j._);
    }
  }
  hb.prototype = new cp();
  hb.prototype.v2 = function (j) {
    var q = new fd(_.E.c, !0),
      m = this.QD.indexOf(j.target);
    if (m == 0) {
      q.data = { R: _.Y.Vt, l: this.l, Z5: j.target.V() };
    } else if (m == 1) {
      q = new fd(_.E.NI, !0);
      q.data = {
        _D: "make",
        SC: {
          __name: "Make",
          classID: "Mk",
          null: { t: "obj ", v: [{ t: "Clss", v: { classID: "slice" } }] },
          Usng: { t: "type", v: { classID: "Gd" } },
        },
      };
    } else {
      q.data = { R: _.Y.s0, kO: "divslice" };
    }
    this.k(q);
  };
  hb.prototype.jU = function (j) {
    for (var y = 0; y < this.QD.length; y++) this.QD[y].T();
  };
  function hC() {
    cp.call(this);
    var j = (this.Mh = [
      new kv("\u25BC", null, null, !0),
      new kv("\u25B2", null, null, !0),
      new kv([5, 4], null, null, !0),
      new kv(["VAR0...", [15, 10, 22]], null, null, !0),
    ]);
    for (var y = 0; y < 4; y++) {
      var q = j[y];
      this.body.appendChild(q._);
      q.Q("click", this.v2, this);
    }
  }
  hC.prototype = new cp();
  hC.prototype.v2 = function (j) {
    var q = this.Mh.indexOf(j.target),
      m;
    if (q == 3) {
      m = new fd(_.E.c, !0);
      m.data = { R: _.Y.s0, kO: "divslice" };
    } else {
      m = new fd(_.E.w, !0);
      m.l = L.Y8;
      m.data = { R: q == 2 ? "delete" : "reorder", dir: q == 0 ? -1 : 1 };
    }
    this.k(m);
  };
  hC.prototype.T = function () {
    cp.prototype.T.call(this);
    for (var y = 0; y < 4; y++) this.Mh[y].T();
  };
  function ic(j, q) {
    cp.call(this);
    if (window.Typr == null || j) return;
    this.aMb = q;
    this.Yk = null;
    this.aCf = J.m("span", "");
    this.aHP = J.m("span", "");
    var m = 1,
      n = (this.vq = {
        Kj: new cg(null, 24),
        lC: new k7("X", 0, 0, "px", 0, !1, !0, 4),
        Hk: new k7("Y", 0, 0, "px", 0, !1, !0, 4),
        pB: new k7("W", 0, 0, ["%", "px"], 2, !1, !0, 5),
        tb: new kv(
          '<img src="' + PIMG["lrs/link"] + '" class="autoscale gsicon" />',
          null,
          [12, 51],
          null
        ),
        Fq: new k7("H", 0, 0, ["%", "px"], 2, !1, !0, 5),
        aAk: new k7("\u2221", 0, 0, "\xB0", m, !1, !0),
        alL: new k7("\u25B1 H", -85, 85, "\xB0", m, !1, !0),
        aj0: new k7("\u25B1 V", -85, 85, "\xB0", m, !1, !0),
        vn: new f1(null, [[12, 14, 2], [12, 14, 3], "Bicubic Sharper"]),
        a71: new f1("Protect", []),
      });
    n.vn.q(1);
    n.tb.q(!0);
    for (var G in n) {
      var W = n[G],
        k = !0;
      if (q && (W == n.aAk || W == n.alL || W == n.aj0 || W == n.vn)) k = !1;
      if (!q && W == n.a71) k = !1;
      if (k) this.aCf.appendChild(W._);
      var T = W == n.tb ? "click" : _.E.n;
      W.Q(T, this.a0t, this);
    }
    this.NO = new gA(
      "Split",
      gA.zs(["split/vh", "split/v", "split/h"]),
      ["Crosswise", [22, 4, 3], [22, 4, 2]],
      null,
      !0
    );
    this.NO.q(-1);
    this.NO.Q(_.E.n, this.a6N, this);
    this.U_ = new lh(!0, !0, !0);
    this.U_.Q(_.E.n, this.a6N, this);
    this.U_.parent = this;
    var b = this.aHP,
      c = this.U_;
    b.appendChild(this.NO._);
    b.appendChild(c.jb._);
    b.appendChild(c.it._);
    b.appendChild(c.DF._);
    b.appendChild(c.H9._);
    b.appendChild(c.U8._);
    this.vz = new kv([11, 9]);
    this.vz.Q("click", this.a34, this);
    this.vY = new bj();
    this.vY.Q("click", this.av, this);
  }
  ic.prototype = new cp();
  ic.prototype.V5 = function (j) {
    if (j.sy) {
      var q = ic,
        m = this.Qd;
      if (m == null) m = this.Qd = new cG(q.oc(), q.Bg(this.l));
      m.T();
      m.parent = this;
      m.update(j.sk, j.a);
      var n = new fd(_.E.c, !0);
      n.data = { R: _.Y.wQ, Tf: m, x: j.sy.uA + 2, y: j.sy.Ql + 1 };
      this.k(n);
      return;
    }
    J.dI(this.body);
    this.Yk = j;
    var G = this.vq;
    if (j.vq) {
      var W = j.vq.HA,
        k = j.vq.OC.P(),
        T = -Math.atan2(-k.X, k.Sd),
        b = new k$();
      b.rotate(T);
      k.concat(b);
      G.Kj.q(j.vq.ate);
      G.lC.q(j.vq.Ly.x);
      G.Hk.q(j.vq.Ly.y);
      G.pB.q(k.Sd * (G.pB.NS() == "%" ? 100 : W.r));
      G.Fq.q(k.Jy * (G.Fq.NS() == "%" ? 100 : W.$));
      G.aAk.q((T * 180) / Math.PI);
      G.alL.q((Math.atan(k.ra / k.Jy) * 180) / Math.PI);
      G.aj0.q((0 * 180) / Math.PI);
      this.body.appendChild(this.aCf);
      this.vz.uy();
      if (j.vq.P4 != null) G.tb.q(j.vq.P4);
    }
    if (j.p_) {
      if (j.amU) this.NO.q(-1);
      this.U_.q(j.p_);
      this.body.appendChild(this.aHP);
      this.vz.mb();
    }
    if (j._E) G.a71.ti(j._E);
    if (j.aKO && !this.aMb) this.body.appendChild(this.vz._);
    this.body.appendChild(this.vY._);
    G.vn._.style.display = j.aEi ? "" : "none";
  };
  ic.prototype.a0t = function (j) {
    var q = this.vq,
      m = this.Yk.vq.HA,
      n = q.Kj.V();
    if (j.target == q.tb) q.tb.q(!q.tb.V());
    else if (q.tb.sM()) {
      var G = q.Fq,
        W = q.pB,
        k = m.$,
        T = m.r;
      if (j.target == q.pB) {
        G = q.pB;
        W = q.Fq;
        k = m.r;
        T = m.$;
      }
      var b = G.V() / (G.NS() == "%" ? 100 : k);
      b *= W.NS() == "%" ? 100 : T;
      W.q(b);
    }
    var c = [];
    for (var a in q)
      if (q[a] != q.tb && q[a] != q.Kj) {
        var b = q[a].V();
        if ((q[a] == q.pB || q[a] == q.Fq) && b == 0) {
          b = 0.1;
          q[a].q(b);
        }
        if (q[a] == q.pB && q[a].NS() == "px") b /= m.r / 100;
        if (q[a] == q.Fq && q[a].NS() == "px") b /= m.$ / 100;
        c.push(b);
      }
    var f = new ea(c[0], c[1]);
    if (j.target == q.Kj) {
      this.O9({ mu: "ctyp", ate: n });
    } else if (j.target == q.lC || j.target == q.Hk) {
      this.O9({ mu: "cen", Ly: f });
    } else {
      var U = this.Yk.vq.OC.P(),
        Z = Math.atan2(-U.X, U.Sd);
      U.translate(-f.x, -f.y);
      U.rotate(-Z);
      var h = new k$(U.Sd, U.X, U.ra, U.Jy, 0, 0);
      h.BR();
      U.concat(h);
      var u = c[2] / 100,
        i = c[3] / 100;
      U.concat(
        new k$(
          u,
          u * Math.tan((c[6] * Math.PI) / 180),
          i * Math.tan((c[5] * Math.PI) / 180),
          i,
          0,
          0
        )
      );
      U.rotate((-c[4] * Math.PI) / 180);
      U.translate(f.x, f.y);
      this.Yk.vq.OC = U;
      this.O9({ mu: "trn", vq: U, X4: q.vn.V(), CV: q.a71.V(), P4: q.tb.V() });
    }
  };
  ic.prototype.a6N = function (j) {
    var q = this.NO;
    this.O9(
      j.target == q ? { mu: "splt", K: q.V() } : { mu: "wrp", p_: this.U_.V() }
    );
  };
  ic.prototype.a34 = function (j) {
    this.O9({ mu: "switchWarp" });
  };
  ic.prototype.av = function (j) {
    this.O9({ mu: this.vY.V() ? "commit" : "cancel" });
  };
  ic.prototype.O9 = function (j) {
    j.R = _.Y.Vt;
    j.l = this.l;
    var q = new fd(_.E.c, !0);
    q.data = j;
    this.k(q);
  };
  ic.prototype.jU = function () {
    var j = this.vq;
    for (var q in j) j[q].T();
    J.eU(j.pB, j.Fq);
    this.vY.T();
    this.NO.T();
    this.U_.T();
    this.vz.T();
  };
  ic.oc = function () {
    var j = function (q) {
      var m = !0;
      if (q == null || q.J.length == 0) m = !1;
      else {
        var n = q.J;
        for (var y = 0; y < n.length; y++) {
          if (q.U[n[y]].add.TySh) m = !1;
        }
      }
      return { f: m };
    };
    return [
      { name: [5, 9], RP: "Shift+Alt+Ctrl + T", q7: !0 },
      { name: [12, 38] },
      { name: [2, 5] },
      { name: "Skew" },
      { name: [24, 4], f: j },
      { name: [2, 9], f: j, q7: !0 },
      {
        name: [11, 9],
        f: function (q) {
          if (q == null || q.J.length != 1) return { f: !1 };
          var m = q.U[q.J[0]];
          return { f: m.add.TySh == null && !m.D1() };
        },
        q7: !0,
      },
      { name: ["VAR0 90\xB0 \u21BB", [2, 5]] },
      { name: ["VAR0 90\xB0 \u21BA", [2, 5]] },
      { name: ["VAR0 180\xB0", [2, 5]] },
      {
        name: [
          [2, 6],
          [22, 4, 2],
        ],
      },
      {
        name: [
          [2, 6],
          [22, 4, 3],
        ],
      },
    ];
  };
  ic.Bg = function (j) {
    if (j == null) j = L.Fg;
    return [
      { p: _.E.w, l: j, d: { R: "again" } },
      { p: _.E.c, d: { R: _.Y.UK, l: j, xB: { io: 3 } } },
      { p: _.E.c, d: { R: _.Y.UK, l: j, xB: { io: 4 } } },
      { p: _.E.c, d: { R: _.Y.UK, l: j, xB: { io: 5 } } },
      { p: _.E.c, d: { R: _.Y.UK, l: j, xB: { io: 2 } } },
      { p: _.E.c, d: { R: _.Y.UK, l: j, xB: { io: 1 } } },
      { p: _.E.c, d: { R: _.Y.UK, l: j, xB: { io: -1 } } },
      { p: _.E.NI, d: L.Dq.R0(!0, 90, !0) },
      { p: _.E.NI, d: L.Dq.R0(!0, -90, !0) },
      { p: _.E.NI, d: L.Dq.R0(!0, -180, !0) },
      { p: _.E.NI, d: L.Dq.R0(!1, "Hrzn", !0) },
      { p: _.E.NI, d: L.Dq.R0(!1, "Vrtc", !0) },
    ];
  };
  function f2() {
    ic.call(this);
  }
  f2.prototype = new ic(!0);
  function h8() {
    ic.call(this);
  }
  h8.prototype = new ic(!0);
  function b_() {
    ic.call(this, !1, !0);
  }
  b_.prototype = new ic(!0);
  function h5() {
    cp.call(this);
    var j = (this.l2 = [
      new f1([12, 36], ["Rigid", [15, 10, 0], [24, 4]]),
      new f1(
        [12, 74],
        [
          [19, 8, 0],
          [19, 8, 1],
          [19, 8, 2],
        ]
      ),
      new k7([7, 4], 0, 100, "px"),
      new av("Show Mesh"),
      new kv("\u25BC", null, null, !0),
      new kv("\u25B2", null, null, !0),
    ]);
    for (var y = 0; y < j.length; y++) {
      var q = j[y];
      q.parent = this;
      this.body.appendChild(q._);
      q.Q(y < 4 ? _.E.n : "click", this.j5, this);
    }
    this.vY = new bj();
    this.vY.Q("click", this.av, this);
    this.body.appendChild(this.vY._);
  }
  h5.prototype = new cp();
  h5.prototype.jU = function () {
    var j = this.l2;
    for (var y = 0; y < 4; y++) j[y].T();
    this.vY.T();
  };
  h5.prototype.V5 = function (j) {
    var j = j.rw;
    for (var y = 0; y < 4; y++) this.l2[y].q(j[y]);
  };
  h5.prototype.j5 = function (j) {
    var q = [];
    for (var y = 0; y < 4; y++) q[y] = this.l2[y].V();
    var m = this.l2.indexOf(j.target);
    if (m < 4) this.O9({ mu: "prm", rw: q });
    else this.O9({ mu: "moveDepth", aIo: m == 5 });
  };
  h5.prototype.av = function (j) {
    this.O9({ mu: this.vY.V() ? "commit" : "cancel" });
  };
  h5.prototype.O9 = function (j) {
    j.R = _.Y.Vt;
    j.l = this.l;
    var q = new fd(_.E.c, !0);
    q.data = j;
    this.k(q);
  };
  function bm() {
    cp.call(this);
    this.ry = new gA(null, ["Layout", "Warp"]);
    this.ry.Q(_.E.n, this.j5, this);
    this.body.appendChild(this.ry._);
    this.V9 = new kv([5, 4]);
    this.V9.Q("click", this.j5, this);
    this.body.appendChild(this.V9._);
    this.vY = new bj();
    this.vY.Q("click", this.av, this);
    this.body.appendChild(this.vY._);
  }
  bm.prototype = new cp();
  bm.prototype.jU = function () {
    var j = this.l2;
    this.V9.T();
    this.vY.T();
  };
  bm.prototype.V5 = function (j) {
    this.ry.q(j.rw);
  };
  bm.prototype.j5 = function (j) {
    this.O9(j.target == this.V9 ? { mu: "delete" } : { rw: this.ry.V() });
  };
  bm.prototype.av = function (j) {
    this.O9({ mu: this.vY.V() ? "commit" : "cancel" });
  };
  bm.prototype.O9 = function (j) {
    j.R = _.Y.Vt;
    j.l = this.l;
    var q = new fd(_.E.c, !0);
    q.data = j;
    this.k(q);
  };
  function aM() {
    cp.call(this);
    this.l2 = null;
    this.O3 = new f1([12, 44], ["", "", "", "", ""]);
    this.O3.Q(_.E.n, this._V, this);
    this.body.appendChild(this.O3._);
    this.zp = new av("ON");
    this.zp.Q(_.E.n, this._V, this);
    this.body.appendChild(this.zp._);
    var j = k7;
    this.i0 = [
      [new j([24, 2], 0, 500)],
      [new j([24, 2], 0, 500)],
      [],
      [new j([24, 2], 0, 500)],
      [new j("Speed", 0, 500, "%"), new j("Point Speed", 0, 500, "px")],
      [new j([12, 15], 0, 360, "\xB0", null, !0)],
    ];
    for (var y = 0; y < 6; y++)
      for (var q = 0; q < this.i0[y].length; q++) {
        var m = this.i0[y][q];
        m.parent = this;
        m.Q(_.E.n, this._V, this);
      }
    this.vY = new bj();
    this.vY.Q("click", this._V, this);
  }
  aM.prototype = new cp();
  aM.prototype.V5 = function (j) {
    var q = (this.l2 = j.rw),
      m = q[0];
    this.abu();
    this.T();
  };
  aM.prototype._V = function (j) {
    var q = this.l2,
      m = q[0],
      n = j.target,
      G = n.V();
    if (n == this.vY) {
    } else if (n == this.O3) {
      m = q[0] = G < 2 ? G : G + 1;
      this.abu(m);
      q[2] = null;
    } else if (n == this.zp) {
      q[1][m] = G;
      q[2] = null;
      this.T();
    } else {
      var W = this.i0[m];
      for (var k = 0; k < W.length; k++) q[2][k] = W[k].V();
    }
    var T = new fd(_.E.c, !0);
    T.data = { R: _.Y.Vt, l: this.l, rw: q };
    if (n == this.vY) T.data.mu = G ? "commit" : "cancel";
    this.k(T);
  };
  aM.prototype.abu = function () {
    var j = this.body,
      q = this.l2,
      m = q[0];
    this.O3.q(m < 2 ? m : m - 1);
    this.zp.q(q[1][m]);
    while (j.children.length > 2) j.removeChild(j.lastChild);
    var n = this.i0[m];
    for (var y = 0; y < n.length; y++) {
      n[y].yl(q[2] != null);
      if (q[2] != null) n[y].q(q[2][y]);
      j.appendChild(n[y]._);
    }
    j.appendChild(this.vY._);
  };
  aM.prototype.T = function () {
    var j = [],
      q = this.l2,
      m = this.O3;
    for (var y = 0; y < 5; y++) {
      var n = [24, 3, 12, y];
      if (q)
        n = (q[1][y < 2 ? y : y + 1] ? "\u2713 " : "\u2002\u2002") + g$.get(n);
      j.push(n);
    }
    var G = m.V();
    m.ti(j);
    m.q(G);
    var W = this.i0;
    for (var y = 0; y < 6; y++) {
      var k = W[y];
      for (var T = 0; T < k.length; T++) k[T].T();
    }
  };
  function fD() {
    cp.call(this);
    var j = (this.$B = [
      new f1([12, 20, 0], ["1x1", "3x3", "5x5", "11x11", "31x31"]),
    ]);
    for (var y = 0; y < j.length; y++) {
      var q = j[y];
      q.Q(_.E.n, this._V, this);
      this.body.appendChild(q._);
    }
  }
  fD.prototype = new cp();
  fD.prototype._V = function (j) {
    var q = this.$B,
      m = [];
    for (var y = 0; y < q.length; y++) m[y] = q[y].V();
    var n = new fd(_.E.c, !0);
    n.data = { R: _.Y.Vt, l: this.l, TX: m };
    this.k(n);
  };
  fD.prototype.jU = function () {
    for (var y = 0; y < this.$B.length; y++) this.$B[y].T();
  };
  function dJ() {
    j2.call(this, !1, ["binop"]);
    this.fm = new kv("Remove", !1, null, !0);
    this.fm.Q("click", this.IS, this);
    this.fm._.style.marginRight = "2em";
    this.GV = new bJ("New content");
    this.aV = new lk();
    this.aV.parent = this;
    this._0 = new kv([18, 0], !1, null, !0);
    this._0.Q("click", this.IS, this);
    this.au8 = new kv("Undo", !1, null, !0);
    this.au8.Q("click", this.IS, this);
    this.air = new kv("?", !1, null, !0);
    this.air.Q("click", this.IS, this);
    this.body.appendChild(this.GV._);
    this.body.appendChild(this.aV._);
    this.body.appendChild(this._0._);
    this.body.appendChild(this.fm._);
    this.body.appendChild(this.au8._);
    this.body.appendChild(this.air._);
  }
  dJ.prototype = new j2(!0);
  dJ.prototype.T = function () {
    cp.prototype.T.call(this);
    this._0.T();
    this.aV.T();
  };
  dJ.prototype.IS = function (j) {
    if (j.target == this.au8) {
      var q = new fd(_.E.w, !0);
      q.l = L.cJ;
      q.data = { R: "h_stepbck" };
      this.k(q);
      return;
    }
    if (j.target == this.air) {
      window.open(
        "https://x.com/photopeacom/status/1661425407944425494/video/1",
        "_blank"
      );
      return;
    }
    var m = j.target == this.fm,
      n = m ? "empty background" : this.GV.V();
    this.aV.a4R(n);
  };
  function cI() {
    kV.call(this);
    this._ = J.m("div", "cmanager");
    window.alert = function (n, G) {
      this.aFT(n, G);
      console.log("Alert: " + n);
    }.bind(this);
    window.onblur = function (n) {
      var G = this;
      G.oD();
    }.bind(this);
    this.GM = 0;
    this.uu = 0;
    this.Mn = [];
    this.auK = {};
    this._Q = J.m("div", "alertcont");
    J.F(this._Q, "pointer-events:none");
    this._.appendChild(this._Q);
    this.acU = J.m("div", "alertcont");
    this._.appendChild(this.acU);
    this.Yq = J.m("div", "alertcont");
    this.a9b = 0;
    this.K7 = -1;
    this.aFM = null;
    this.QD = null;
    var j = (this.a9K = J.m("div", "alertpanel"));
    J.F(j, "padding:0.7em 1em 0.1em 1em;");
    this.Yq.appendChild(j);
    var q = (this.BW = J.m("input"));
    q.setAttribute("type", "text");
    J.l3(q);
    J.F(
      q,
      "background-color:white; color:black; font-size:1.2em; width:100%;  margin:0;"
    );
    q.addEventListener("input", this.aH8.bind(this), !1);
    q.addEventListener("keydown", this.axx.bind(this), !1);
    j.appendChild(q);
    var m = (this.lw = J.m("div", "contextpanel scrollable"));
    J.F(
      m,
      "text-align:left; box-shadow:none; margin:0.5em 0 1em 0;color:#888;"
    );
    m.addEventListener("click", this.ajc.bind(this), !1);
    j.appendChild(m);
    J.PD(document.body, this.aoj.bind(this));
  }
  cI.prototype = new kV();
  cI.prototype.H1 = function () {
    if (J.JO(this.Yq)) this._.removeChild(this.Yq);
  };
  cI.prototype.a8z = function (j, q) {
    var m = (this.aFM = []),
      n = q.a2z;
    for (var y = 0; y < jv.data.length; y++) {
      var G = jv.data[y],
        W = [g$.get(G.name)],
        k = [y];
      cI.ba(G.items, W, k, m, j, q, n == null ? null : n[y] == null ? 0 : n[y]);
    }
    var T = q.Z;
    for (var y = 0; y < T.hR.length; y++) {
      var b = T.hR[y],
        c = T.keys[y];
      for (var a = 0; a < b.length; a++)
        m.push([
          ["Tools", g$.get(b[a].l.name)],
          [-1, b[a].l.id],
          c ? c.Lj : null,
        ]);
    }
    this._.appendChild(this.Yq);
    var f = this.BW;
    f.focus();
    f.select();
    this.ip();
  };
  cI.prototype.aH8 = function (j) {
    this.K7 = -1;
    this.ip();
  };
  cI.prototype.ip = function () {
    var j = this.BW.value.toLowerCase().trim().replace(/  +/g, " "),
      q = this.aFM,
      m = [],
      n = [],
      G = j.split(" ");
    if (j != "")
      for (var y = 0; y < q.length; y++) {
        var W = q[y][0],
          k = [],
          T = 0;
        for (var b = 0; b < W.length; b++) k[b] = -1;
        for (var c = 0; c < G.length; c++)
          for (var b = 0; b < W.length; b++) {
            var a = W[b].toLowerCase().indexOf(G[c]);
            if (a != -1) {
              k[b] = [a, a + G[c].length];
              T++;
              break;
            }
          }
        if (T == G.length) {
          m.push(q[y]);
          n.push(k);
        }
      }
    var f = [],
      U = this.lw;
    J.dI(U);
    for (var y = 0; y < m.length; y++) {
      var Z = m[y],
        h = Z[0],
        a = n[y],
        u = "enab",
        x = "";
      if (y == this.K7) u += " active";
      var i = J.m("div", u);
      f.push(i);
      U.appendChild(i);
      for (var b = 0; b < h.length; b++) {
        var X = a[b],
          $ = G[b],
          H = h[b];
        if (X != -1)
          H =
            H.slice(0, X[0]) +
            '<span style="color:black">' +
            H.slice(X[0], X[1]) +
            "</span>" +
            H.slice(X[1]);
        x += H;
        if (b < h.length - 1) x += " \uFE65 ";
      }
      if (Z[2] && (typeof Z[2] != "string" || Z[2].length == 1))
        x +=
          ' <span style="border:1px solid; margin-left:16px; padding:1px 5px; border-radius:5px; background-color:#f4f4f4;">' +
          gn.uj(Z[2]) +
          "</span>";
      i.innerHTML = x;
    }
    this.QD = [m, f];
  };
  cI.prototype.axx = function (j) {
    var q = gn.Uw,
      m = j.code;
    if (q(m, gn.k9)) this.H1();
    var n = q(m, gn.w0),
      G = q(m, gn.K3),
      W = q(m, gn.FP);
    if (n || G) {
      this.K7 = Math.max(
        0,
        Math.min(this.QD[0].length - 1, this.K7 + (n ? -1 : 1))
      );
      this.ip();
    }
    if (W && this.K7 != -1) this.apG(this.K7);
  };
  cI.ba = function (j, q, m, n, G, W, k) {
    if (typeof k == "number") {
      if (k == 0) return;
      if (k == 1) k = null;
    }
    for (var y = 0; y < j.length; y++) {
      if (k != null && (k[y] == 0 || k[y] == null)) continue;
      var T = j[y],
        b = q.slice(0),
        c = m.slice(0),
        a = g$.get(T.name);
      if (T.f) {
        var f = T.f(G, W, y);
        if (f.sO) a = f.sO;
        if (f.f == !1) continue;
      }
      b.push(a);
      c.push(y);
      if (T.sub) cI.ba(T.sub, b, c, n, G, W, k ? k[y] : null);
      else n.push([b, c, T.RP]);
    }
  };
  cI.prototype.ajc = function (j) {
    var q = j.target;
    if (q.tagName.toLowerCase() == "span") q = q.parentNode;
    var m = this.QD[1].indexOf(q);
    if (m != -1) this.apG(m);
  };
  cI.prototype.apG = function (j) {
    var q = this.QD[0][j][1];
    if (q[0] == -1) {
      var m = new fd(_.E.c, !0);
      m.data = { R: _.Y.UK, l: q[1] };
      this.k(m);
    } else {
      var n = jv.data[q[0]].L1[q[1]];
      for (var y = 2; y < q.length; y++) n = n.sub[q[y]];
      var G = new fd(n.p, !0);
      G.l = n.l;
      G.data = n.d;
      this.k(G);
    }
    this.H1();
  };
  cI.prototype.X3 = function (j, q) {
    this.GM = j;
    this.uu = q;
    this.lw.style["max-height"] = q - 120 + "px";
  };
  cI.prototype.amY = function (j) {
    var q = J.m("div", "alertpanel");
    q.textContent = g$.get(j);
    this._Q.appendChild(q);
    this.auK[JSON.stringify(j)] = q;
  };
  cI.prototype.aJv = function (j) {
    var q = this.auK[JSON.stringify(j)];
    this._Q.removeChild(q);
    delete this.auK[JSON.stringify(j)];
  };
  cI.prototype.aFT = function (j, q) {
    var m = this.acU;
    for (var y = 0; y < m.children.length; y++)
      if (m.children[y].textContent == j) return;
    var n = J.m("div", "alertpanel tpanel");
    n.textContent = j;
    J.F(n, "opacity:0.5; transform:scale(0.9)\t");
    m.appendChild(n);
    if (q == null) q = 1500;
    var G = q,
      W = Math.max(Date.now() + G, this.a9b + G);
    setTimeout(function () {
      J.F(n, "transform:scale(1); opacity:1;");
    }, 10);
    setTimeout(function () {
      J.F(
        m,
        "pointer-events:none; margin-top: -3.6em; transform: translateY(3.6em);"
      );
    }, W - Date.now() - 30);
    setTimeout(function () {
      m.removeChild(m.firstChild);
      J.F(
        m,
        "pointer-events:none; transition: transform 0.7s;  margin-top: 5.5em;  transform: translateY(0em);"
      );
    }, W - Date.now());
    this.a9b = W;
  };
  cI.prototype.aoj = function (j) {
    var q = this.Mn;
    for (var y = q.length - 1; y >= 0; y--) {
      var m = q[y],
        n = j.target;
      while (n != null) {
        if (n == m._) {
          this.oD(m);
          return;
        }
        n = n.parentNode;
      }
    }
    this.oD();
    var G = j.target;
    while (G != this.Yq && G != document.body) G = G.parentNode;
    if (G != this.Yq) this.H1();
  };
  cI.prototype.oD = function (j) {
    var q = this.Mn;
    for (var y = 0; y < q.length; y++) {
      if (j && j.ajP(q[y])) continue;
      var m = q[y]._;
      if (!(q[y] instanceof cG)) J.P5(q[y], this._);
      else this._.removeChild(m);
      m.style.height = "auto";
      J.XZ(m, "scrollable");
      q.splice(y, 1);
      y--;
    }
  };
  cI.prototype.aJL = function (j) {
    this.oD(j.Tf);
    var q = j.Tf,
      m = q._;
    if (this.Mn.indexOf(q) != -1) return;
    this.Mn.push(q);
    this._.appendChild(m);
    var n = this.GM,
      G = this.uu,
      W = j.x,
      k = j.y,
      T = this._.getBoundingClientRect(),
      b = q instanceof cG,
      c = -1,
      a = G - 2;
    if (b || j.LR) {
      var f = q.yv(),
        U = q.aDa();
      if (b) f = Math.min(f, 200);
      var Z = n - f - 2,
        h = G - U - 2;
      if (k < h) c = 2;
      else if (W < Z) c = 1;
      else if (0 < k - U - 2) c = 0;
      else c = 3;
      if (j.aJY) c = 0;
      if (j.acG) c = 2;
      if (c == 2) {
        W = Math.min(W, Z);
      } else if (c == 1) {
        k = Math.min(k, h);
      } else if (c == 0) {
        k = k - U - 2;
        W = Math.min(W, Z);
        a = j.y;
      } else if (c == 3) {
        W = W - f - 2;
        k = Math.min(k, h);
      }
    }
    k = Math.max(2, k);
    var top = Math.round(k - T.y + this._.offsetTop);
    m.style.position = "absolute";
    m.style["z-index"] = 10;
    if (k + q.aDa() > a) {
      m.style.height = a - k + "px";
      J._g(m, "scrollable");
      if (c == 3) W -= 10;
    }
    m.style.left = Math.round(W) + "px";
    m.style.top = top + "px";
    if (!(q instanceof cG)) J.ic(q);
  };
  cI.prototype.al5 = function (j) {
    var q = j.Tf,
      m = this.Mn.indexOf(q);
    if (m == -1) return;
    this.Mn.splice(m, 1);
    var n = q._;
    if (!(q instanceof cG)) J.P5(q, this._);
    else this._.removeChild(q._);
  };
  cI.prototype.BS = function () {
    var j = this.Mn;
    return j.length == 0 ? null : j[j.length - 1];
  };
  cI.prototype.aqk = function () {
    this.al5({ Tf: this.BS() });
  };
  function cj() {
    kV.call(this);
    this._ = J.m("div", "confbar");
  }
  cj.prototype = new kV();
  cj.prototype.amW = function (j) {
    j.parent = this;
    J.dI(this._);
    this._.appendChild(j._);
  };
  function jB() {
    kV.call(this);
    var j = (this._ = J.m("div", "toolconf"));
    j.style.marginLeft = "40px";
    this.CZ = null;
    this.I7 = null;
    var q = (this.a53 = [J.m("span"), J.m("span"), J.m("span")]);
    for (var y = 0; y < 3; y++) j.appendChild(q[y]);
    this.tM = [new hc(0), new hc(1), new k7([14, 9], 0, 100, "px"), new cr(!0)];
    for (var y = 0; y < this.tM.length; y++) {
      var m = this.tM[y];
      m.parent = this;
      m.Q(_.E.n, this.aks, this);
      q[0].appendChild(m._);
    }
    var n = (this.P8 = new ci());
    this.P8.parent = this;
    this.alA = new aD("Tt:");
    q[1].appendChild(this.alA._);
    q[1].appendChild(n.Oz._);
    q[1].appendChild(n.jc._);
    q[1].appendChild(n.Bw._);
    this.EZ = new kv([11, 11, 0], null, null, !0);
    this.EZ._.style.marginBottom = "-8px";
    this.EZ._.style.verticalAlign = "middle";
    this.EZ.Q(
      "click",
      function (G) {
        var W = new fd(_.E.c, !0);
        W.data = { R: _.Y.s0, kO: "vbitmap" };
        this.k(W);
      },
      this
    );
    q[2].appendChild(this.EZ._);
    this.ym = new k7([12, 0], 0, 100, "%", 0);
    this.ym._.style.marginLeft = "10px";
    this.ym.Q(_.E.n, this.aks, this);
    j.appendChild(this.ym._);
  }
  jB.prototype = new kV();
  jB.prototype.aks = function (j) {
    var q = this.tM.indexOf(j.target),
      m = j.target.V();
    if (j.target == this.ym) {
      var n = new fd(_.E.w, !0);
      n.l = L.W1;
      n.data = { R: R.G4, jt: Math.round((255 * m) / 100) };
      this.k(n);
      return;
    }
    var G = B.S(this.CZ.TB);
    if (q < 2) {
      var W,
        k = m;
      if (q == 0) {
        W = G.dZ;
        G.dZ = k;
      } else {
        W = G.Nu;
        G.Nu = k;
      }
      if (W && W.length != k.length) {
        var T = [1, 0, 0, 1, 0, 0];
        if (W.length == 4) {
          T = W[3].slice(0);
          T[1] *= -1;
          T[2] *= -1;
        }
        if (W.length == 2) {
          T = W[1][1].slice(0);
        }
        if (k.length == 4) {
          k[2] = [0, 0, 0, 1, 1, 0, 0];
          k[3] = T;
          T[1] *= -1;
          T[2] *= -1;
        }
        if (k.length == 2) {
          k[1] = [[0, 0, 1, 1, 0, 0, 0, 0, 0], T];
        }
      }
    }
    if (q == 2) G.mm = m;
    if (q == 3) G = m;
    var n = new fd(_.E.c, !0);
    n.data = { R: _.Y.fh, rw: fG.f7, K: G };
    this.k(n);
  };
  jB.prototype.T = function () {
    for (var y = 0; y < this.tM.length; y++) this.tM[y].T();
    this.P8.T();
    this.ym.T();
    this.EZ.T();
  };
  jB.prototype.LW = function (j, q) {
    this.I7 = j;
    this.tM[0].j3(j);
    this.tM[1].j3(j);
  };
  jB.prototype.Wz = function (j) {
    if (j.J.length == 0) return;
    var q = j.U[j.J[0]],
      m = this.a53;
    this.ym.q(Math.round((q.yA * 100) / 255));
    var n = [q.add.vmsk, q.add.TySh, q.add.SoLd];
    for (var y = 0; y < 3; y++)
      J.F(m[y], "line-height:1.5em; display:" + (n[y] ? "" : "none"));
  };
  jB.prototype.yp = function (j, q) {
    this.CZ = j;
    var m = j.TB,
      n = this.I7;
    this.tM[0].q(m.dZ, n);
    this.tM[1].q(m.Nu, n);
    if (m.mm != null) this.tM[2].q(m.mm);
    this.tM[3].q(m);
    this.P8.q(j.Cw, j.HS, j.YL);
  };
  function by() {
    kV.call(this);
    this._ = J.m("div", "toolconf");
    var j = J.m("div", "body");
    this._.appendChild(j);
    j.style.marginLeft = "8px";
    this.CZ = null;
    this.I7 = null;
    this.G8 = new kv("\u25B6", !1, null, !0);
    this.G8._.style.width = "26px";
    this.cx = new kV();
    this.cx.parent = this;
    var q = (this.cx._ = J.m("div", "floatcont form label6"));
    q.style.width = "270px";
    this.X5 = new dV("BPM", 1, 300, null);
    this.X5.parent = this;
    this.cx._.appendChild(this.X5._);
    this.y5 = new bJ("Time Sign", null, 3);
    this.cx._.appendChild(this.y5._);
    this.X5.Q(_.E.n, this._V, this);
    this.y5.Q(_.E.n, this._V, this);
    this.i0 = new kv("...", !1, null, !0);
    this.i0.Q(
      "click",
      function (n) {
        if (J.JO(this.cx._)) return;
        var G = this.i0._.getBoundingClientRect(),
          W = new fd(_.E.c, !0);
        W.data = {
          R: _.Y.wQ,
          Tf: this.cx,
          x: G.left,
          y: G.top + G.height + 4,
          LR: !0,
        };
        this.k(W);
      },
      this
    );
    this.aa6 = new gA(null, ["Piano", "Sheet"]);
    this.aa6.Q(
      _.E.n,
      function (n) {
        var G = new fd(_.E.w, !0);
        G.l = L.R2;
        G.data = { R: "prvw" };
        this.k(G);
      },
      this
    );
    j.appendChild(this.G8._);
    j.appendChild(this.i0._);
    j.appendChild(this.aa6._);
    this.G8.Q(
      "click",
      function (n) {
        var G = new fd(_.E.c, !0);
        G.data = { R: _.Y.ND };
        this.k(G);
        this.G8.hk(this.I7.Y.rN ? "\u23F8" : "\u25B6");
      },
      this
    );
    this.Td = J.m("span");
    j.appendChild(this.Td);
    this.A1 = [
      new k7("Velocity", 0, 127),
      new bJ("Text", null, 10),
      new k7("BPM", 1, 1e3),
      new bJ("Time Signature", null, 3),
    ];
    for (var y = 0; y < this.A1.length; y++) {
      var m = this.A1[y];
      m.parent = this;
      m.Q(_.E.n, this.aHu, this);
    }
  }
  by.prototype = new kV();
  by.prototype.yp = function (j, q) {
    this.CZ = j;
  };
  by.prototype.LW = function (j, q) {
    this.I7 = j;
  };
  by.prototype.T = function () {
    this.G8.T();
    this.X5.T();
    for (var y = 0; y < this.A1.length; y++) this.A1[y].T();
  };
  by.prototype._V = function (j) {
    var q = this.X5.V(),
      m = this.y5.V().split("/").map(parseFloat),
      n = new fd(_.E.w, !0);
    n.l = L.W1;
    n.data = { R: R.VY, jt: { W0: q, Ss: m } };
    this.k(n);
  };
  by.prototype.aHu = function (j) {
    var q = this.A1.indexOf(j.target),
      m = j.target.V();
    if (q == 3) m = m.split("/").map(parseFloat);
    console.log(m);
    var n = new fd(_.E.w, !0);
    n.l = L.Lx;
    n.data = { R: "nprop", jt: m };
    this.k(n);
  };
  by.prototype.Wz = function (j) {
    this.aa6.q(j.add.prvw == 1 ? 1 : 0);
    this.X5.q(j.Y.W0);
    this.y5.q(j.Y.Ss[0] + "/" + j.Y.Ss[1]);
    var q = this.Td,
      G = 0;
    J.dI(q);
    if (j.J.length != 1) return;
    var m = j.U[j.J[0]];
    if (m.Y.J.length == 0) return;
    var n = m.Y.list[m.Y.J[0]],
      W = n[3];
    if (m.Y.yY <= 200) {
      G = 0;
    }
    if (m.Y.yY == 300) {
      G = 1;
    }
    if (m.Y.yY == 500) {
      G = 2;
    }
    if (m.Y.yY == 501) {
      G = 3;
      W = n[3][0] + "/" + n[3][1];
    }
    var k = this.A1[G];
    k.q(W);
    q.appendChild(k._);
  };
  function jc(j) {
    kV.call(this);
    jc.tT = this;
    jc.bZ = j;
    this.a = null;
    this.qD = J.m("input", "");
    this.qD.setAttribute("type", "file");
    this.qD.setAttribute("multiple", "");
    this.qD.addEventListener(
      "change",
      function (q) {
        this.MP(q.target.files, null, this.fI, null);
        this.fI = null;
      }.bind(this),
      !1
    );
    document.body.appendChild(this.qD);
    J.F(this.qD, "display:none");
    this.aH$ = [];
    this.am9 = !1;
    this.ap3 = [];
    this.afp = !1;
    this.aaH = {};
    this.fI = null;
  }
  jc.prototype = new kV();
  jc.bZ = null;
  jc.Ni = function (j) {
    try {
      var q = {};
      q[j.type] = j;
      navigator.clipboard.write([new ClipboardItem(q)]);
    } catch (gn) {
      console.error(gn, gn.message);
    }
  };
  jc.hH = function (j, q) {
    navigator.clipboard
      .read()
      .then(function (m) {
        for (var y = 0; y < m.length; y++) {
          try {
            var n = m[y],
              G = {},
              W = 0,
              k = 0;
            for (var T = 0; T < n.types.length; T++) {
              var b = n.types[T];
              W++;
              n.getType(b).then(
                function (c) {
                  var a = b;
                  new Response(c).arrayBuffer().then(
                    function (f) {
                      G[this.Sg] = f;
                      k++;
                      if (k == W) jc.aH9(G, j, q);
                    }.bind({ Sg: this.Sg })
                  );
                }.bind({ Sg: b })
              );
            }
          } catch (gn) {
            console.error(gn, gn.message);
          }
        }
      })
      .catch(function (m) {
        alert("Please, give us permissions to access your clipboard.");
      });
  };
  jc.afD = function (j) {
    navigator.permissions.query({ name: "clipboard-read" }).then(function (q) {
      j(q.state);
    });
  };
  jc.aH9 = function (j, q, m) {
    var n = ["text/plain", "image/png", "text/html", "text/plain"];
    for (var G in j)
      console.log(
        G,
        G.startsWith("text")
          ? M.K6(new Uint8Array(j[G])).slice(0, 100) + "..."
          : j[G]
      );
    for (var W = 0; W < n.length; W++) {
      var k = n[W],
        T = j[k];
      if (T == null) continue;
      if (k == "image/png") {
        jc.bZ({ name: "image.png" }, T, q, m);
        return;
      }
      if (k == "text/plain") {
        var b = M.K6(new Uint8Array(T));
        if (W == 0)
          if (!b.startsWith("<!--") && !b.startsWith("<svg")) continue;
        if (m && b.startsWith("<svg")) continue;
        var c = new fd(_.E.c, !0);
        c.data = { R: _.Y.axH, K: b };
        q.k(c);
        return;
      }
      if (k == "text/html") {
        var b = M.K6(new Uint8Array(T)),
          a = b.indexOf('src="');
        if (a != -1) {
          var f = a + 10;
          while (b[f] != '"') f++;
          var U = b.slice(a + 5, f);
          if (U.startsWith("http")) {
            var c = new fd(_.E.c, !0);
            c.data = { R: _.Y.mw, rw: { url: U, Wk: !0 } };
            q.k(c);
            return;
          } else {
            jc.bZ({ name: "chart.png" }, gh.TD(U).buffer, q, m);
            return;
          }
        }
      }
    }
  };
  jc.prototype.Pn = function (j) {
    if (j == null) j = [23, 5];
    var q = JSON.stringify(j),
      m = this.aaH;
    if (m[q] == null) m[q] = 0;
    if (m[q] == 0) {
      var n = new fd(_.E.c, !0);
      n.data = { R: _.Y.gu, r8: j };
      this.k(n);
    }
    m[q]++;
  };
  jc.prototype.ze = function (j) {
    if (j == null) j = [23, 5];
    var q = JSON.stringify(j),
      m = this.aaH;
    if (m[q] == null) m[q] = 0;
    m[q]--;
    if (m[q] == 0) {
      var n = new fd(_.E.c, !0);
      n.data = { R: _.Y.dO, r8: j };
      this.k(n);
    }
  };
  jc.prototype.ats = function (j, q, m) {
    this.fI = j;
    var n = window.showOpenFilePicker;
    if (m) n = null;
    if (n && window.self == window.top) {
      var G = this;
      n({ multiple: !0 }).then(function (T) {
        var b = [];
        function c(a) {
          b.push(a);
          if (b.length == T.length) {
            G.MP(b, null, G.fI, null, T);
            G.fI = null;
          } else T[b.length].getFile().then(c);
        }
        T[b.length].getFile().then(c);
      });
      return;
    }
    var W = this.qD;
    if (q) W.setAttribute("accept", q);
    else W.removeAttribute("accept");
    var k = document.createEvent("MouseEvents");
    k.initMouseEvent(
      "click",
      !0,
      !0,
      document.defaultView,
      1,
      0,
      0,
      0,
      0,
      !1,
      !1,
      !1,
      !1,
      0,
      null
    );
    W.dispatchEvent(k);
  };
  jc.prototype.Tv = function (j) {
    if (
      j.url.indexOf("photopea.com#i") != -1 ||
      j.url.indexOf("photopea.com/#i") != -1
    ) {
      this.mA(j.url.split("#i").pop());
      return;
    }
    this.aH$.push(j);
    this.awo();
  };
  jc.prototype.awo = function () {
    var j = this.aH$;
    if (j.length == 0 || this.am9) return;
    this.am9 = !0;
    var q = j.shift();
    this.Pn();
    if (q.vt == null) q.vt = {};
    var m = new XMLHttpRequest();
    m.L6 = q;
    var n = q.url;
    if (q.Wk && !n.startsWith("data:image")) n = n;
    m.open("GET", n);
    if (q.aAI) for (var G in q.aAI) m.setRequestHeader(G, q.aAI[G]);
    m.responseType = "arraybuffer";
    m.onload = this.adX.bind(this);
    m.send();
  };
  jc.prototype.MP = function (j, q, m, n, G) {
    for (var y = 0; y < j.length; y++) {
      this.Pn();
      var W = j[y],
        k = new FileReader();
      k.L6 = W;
      k.L6.sQ = m;
      k.L6.rX = n == null ? null : n + y;
      k.aAy = q;
      if (G) k.L6.ff = G[y];
      k.onload = this.adX.bind(this);
      k.onerror = function (T) {
        this.ze();
      }.bind(this);
      this.ap3.push([k, W]);
    }
    this.qD.value = null;
    this.arE();
  };
  jc.prototype.arE = function () {
    var j = this.ap3;
    if (j.length == 0 || this.afp) return;
    this.afp = !0;
    var q = j.shift();
    q[0].readAsArrayBuffer(q[1]);
  };
  jc.prototype.a1B = function (j, q, m) {
    this.Pn("Saving ...");
    this.a = q;
    setTimeout(m.bind({ an: j, caller: this }), 50);
  };
  jc.Uf = function (j) {
    var q = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
      m = new Uint8Array(j),
      n = m.length,
      G = n % 3,
      W = n - G,
      k = [],
      T = 0,
      b = 0,
      c = 0;
    for (var y = 0; y < W; y += 3) {
      T = m[y];
      b = m[y + 1];
      c = m[y + 2];
      k.push(
        q[T >> 2] +
          q[((T & 3) << 4) | (b >> 4)] +
          q[((b & 15) << 2) | (c >> 6)] +
          q[c & 63]
      );
    }
    if (G == 1) {
      T = m[W];
      k.push(q[T >> 2] + q[(T & 3) << 4] + "==");
    }
    if (G == 2) {
      T = m[W];
      b = m[W + 1];
      k.push(q[T >> 2] + q[((T & 3) << 4) | (b >> 4)] + q[(b & 15) << 2] + "=");
    }
    var a = k.join("");
    return a;
  };
  jc.a2N = function (j, q) {
    var m = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
      n = new Uint8Array(64),
      T = 0,
      b = 0,
      c = 0,
      f = 0;
    for (var y = 0; y < 64; y++) n[y] = m.charCodeAt(y);
    var G = new Uint8Array(j),
      W = q % 3,
      k = q - W,
      a = new Uint8Array(Math.floor(q / 3) * 4 + (W == 0 ? 0 : 4));
    for (var y = 0; y < k; y += 3) {
      T = G[y];
      b = G[y + 1];
      c = G[y + 2];
      a[f] = n[T >>> 2];
      a[f + 1] = n[((T & 3) << 4) | (b >>> 4)];
      a[f + 2] = n[((b & 15) << 2) | (c >>> 6)];
      a[f + 3] = n[c & 63];
      f += 4;
    }
    if (W == 1) {
      T = G[k];
      a[f] = n[T >> 2];
      a[f + 1] = n[(T & 3) << 4];
      a[f + 2] = 61;
      a[f + 3] = 61;
    }
    if (W == 2) {
      T = G[k];
      b = G[k + 1];
      a[f] = n[T >> 2];
      a[f + 1] = n[((T & 3) << 4) | (b >> 4)];
      a[f + 2] = n[(b & 15) << 2];
      a[f + 3] = 61;
    }
    return a;
  };
  jc.prototype.adX = function (j) {
    var q,
      m = j.target.L6;
    if (j.target instanceof XMLHttpRequest) q = j.target.response;
    else q = j.target.result;
    jc.bZ(m, q, this, j.target.aAy);
    this.ze();
    if (j.target instanceof XMLHttpRequest) {
      this.am9 = !1;
      this.awo();
    } else {
      this.afp = !1;
      this.arE();
    }
  };
  jc.aAB = function (j, q) {
    var m = new XMLHttpRequest();
    m.open("POST", "https://api.imgur.com/3/image", !0);
    m.w4 = q;
    var n = [
        "2098b854941b90a",
        "fd042496c2cc649",
        "59e11a2fac9b1ed",
        "09fbce0ad11eea8",
      ],
      G = (24 * 60 * 6e4) / n.length,
      W = Math.floor(Date.now() / G) & (n.length - 1);
    console.log(W);
    lw.event("imgur_req-" + W);
    m.setRequestHeader("Authorization", "Client-ID " + n[W]);
    m.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    m.setRequestHeader("Accept", "application/json");
    m.addEventListener("load", jc.aAV);
    m.addEventListener("progress", function (k) {
      var T = k.target.status;
      if (T == 429) alert("Too many uploads, try it a bit later.");
      else if (400 <= T) alert("Error. Status code: " + T);
    });
    m.send("type=base64&image=" + encodeURIComponent(jc.Uf(j)));
    alert("Saving to Imgur ...", 4e3);
  };
  jc.aAV = function (j) {
    var q = JSON.parse(j.target.response);
    if (q.success) {
      if (j.target.w4) j.target.w4(q.data.link);
      else window.open(q.data.link, "Imgur");
    }
  };
  jc.prototype.mA = function (j, q) {
    this.Pn();
    var m = new XMLHttpRequest();
    m.responseType = "arraybuffer";
    m.open(
      "GET",
      "templates/file/" + (q ? "pp-resources" : "psdshared") + "/" + j
    );
    m.onload = this.a5d.bind(this);
    m.send();
    m.iW = [Date.now(), j, q];
  };
  jc.prototype.a5d = function (j) {
    var q = j.target.iW,
      m = new Uint8Array(j.target.response);
    console.log(m.length + " B,", Date.now() - q[0] + " ms");
    for (var y = 0; y < m.length; y++) m[y] = 255 - m[y];
    m = pako.inflateRaw(m);
    var n = JSON.parse(M.K6(m, 0, 2e3));
    jc.bZ({ name: n.name, uF: q[1] }, m.slice(2e3).buffer, this);
    this.ze();
    if (!q[2]) jc.ha("act=0&id=" + q[1]);
  };
  jc.prototype.aCL = function (j, q, m, n) {
    if (!(j instanceof ArrayBuffer)) throw "e";
    j = new Uint8Array(j);
    var G = new Uint8Array(j.length + 2e3),
      U = "";
    for (var y = 0; y < 2e3; y++) G[y] = 32;
    M.YG(JSON.stringify({ name: q }), G, 0);
    G.set(j, 2e3);
    j = G;
    j = pako.deflateRaw(j);
    for (var y = 0; y < j.length; y++) j[y] = 255 - j[y];
    j = j.buffer;
    var W = j.byteLength,
      k = bE.za(W),
      T = ~~(609e5 / 2),
      b = ~~(209e5 / 2);
    if (W > T) {
      confirm(
        "Your file is " +
          k +
          ". Our limit is " +
          bE.za(T) +
          ". Delete some layers and try again."
      );
      return;
    }
    if (W > b) {
      var c = confirm(
        "Your file is quite large (" +
          k +
          "). Opening it will take a lot of time. Do you still want to proceed?"
      );
      if (!c) return;
    }
    var a = sha1(j),
      f = [];
    for (var y = 0; y < 20; y++) {
      var Z = parseInt(a.slice(y * 2, y * 2 + 2), 16);
      f.push(Z);
      U += String.fromCharCode(Z);
    }
    var h = btoa(U).replace(/\+/g, "-").replace(/\//g, "_").slice(0, 8);
    if (jc.af_(h, n)) {
      console.log("file already exists");
      if (m) m(h);
      else window.open("https://www.photopea.com#i" + h + ".psd");
      return;
    }
    this.Pn("Publishing ...");
    var u = new XMLHttpRequest();
    u.iW = [j, a, h, m, n];
    u.open(
      "GET",
      lw.sX(
        "papi/img/publish.php?rnd=" +
          Math.random() +
          "&id=" +
          h +
          "&size=" +
          W +
          "&bname=" +
          n
      )
    );
    u.onload = this.a8$.bind(this);
    u.send();
  };
  jc.af_ = function (j, q) {
    try {
      var m = new XMLHttpRequest();
      m.open("HEAD", "templates/file/" + q + "/" + j, !1);
      m.send();
      if (m.status == 200) return !0;
    } catch (gn) {
      return !1;
    }
    return !1;
  };
  jc.prototype.a8$ = function (j) {
    console.log(j.target.response);
    var q = JSON.parse(j.target.response),
      m = j.target.iW,
      n = new XMLHttpRequest();
    n.open("POST", q.uploadUrl);
    n.setRequestHeader("Authorization", q.authorizationToken);
    n.setRequestHeader("X-Bz-File-Name", m[2]);
    n.setRequestHeader("Content-Type", "b2/x-auto");
    n.setRequestHeader("X-Bz-Content-Sha1", m[1]);
    n.send(new Blob([m[0]]));
    n.onload = this.a1$.bind({ AS: this, iW: m });
  };
  jc.prototype.a1$ = function (j) {
    this.AS.ze("Publishing ...");
    if (this.iW[3]) this.iW[3](this.iW[2]);
    else window.open("https://www.photopea.com#i" + this.iW[2] + ".psd");
    if (this.iW[4] == "psdshared")
      jc.ha(
        "act=2&id=" +
          this.iW[2] +
          "&fileId=" +
          JSON.parse(j.target.response).fileId
      );
  };
  jc.ha = function (j) {
    var q = new XMLHttpRequest();
    q.open("GET", "/papi/img/update.php?" + j + "&rnd=" + Math.random());
    q.send();
  };
  jc.save = function (j, q) {
    var m = new Uint8Array(j),
      n = document.createElement("a");
    if (typeof n.download == "string") {
      var G = new Blob([m]),
        W = window.URL.createObjectURL(G);
      n.href = W;
      n.download = q;
      document.body.appendChild(n);
      n.click();
      document.body.removeChild(n);
    } else {
      var k = "data:application/octet-stream;base64," + jc.Uf(j);
      window.open(k);
    }
  };
  function aj() {
    this.size = 16;
    this.data = B.j(16);
  }
  aj.prototype.xY = function (j, q) {
    if (j + q <= this.size) return;
    var m = this.size;
    while (j + q > this.size) this.size *= 2;
    var n = B.j(this.size);
    for (var y = 0; y < m; y++) n[y] = this.data[y];
    this.data = n;
  };
  var a8 = {};
  a8.bP = function (j, q, m, n) {
    var G = q.split(":"),
      W = G[0];
    if (G.length == 2) {
      if (W == "jpg")
        n = { qual: Math.round(100 * parseFloat(G[1])), mtdt: !0 };
      if (W == "webp")
        n = { qual: Math.round(100 * parseFloat(G[1])), mtdt: !0 };
      if (W == "psd") n = [!0, !0, !1, !1, !1];
      if (W == "svg") {
        var k = ["arst", "ahid", "vtxt", "rtxt", "mini"],
          T = G[1].split(",");
        n = {};
        for (var y = 0; y < T.length; y++) n[k[y]] = T[y] == "true";
      }
      if (W == "jpg" || W == "webp") if (j.$T()) n.srgb = !1;
    }
    var b = gh.Wo(j, W.toUpperCase(), null, null, n, m);
    return b;
  };
  a8.aj$ = function (j, q, m) {
    var n = j.ht(),
      G = q[0];
    return a8.bP(j, G, m);
  };
  a8.a88 = function () {
    var j = this.an,
      q = this.caller,
      m = j.vt.wS,
      n = m.formats,
      G,
      W;
    j.ht();
    var k = Date.now();
    if (m.version == 1) {
      var T = [],
        b = 0,
        a = 0;
      for (var y = 0; y < n.length; y++) {
        var c = a8.bP(j, n[y], q.a);
        T.push(c);
        b += c.byteLength;
      }
      G = new Uint8Array(2e3 + b);
      var f = '{ "source": ' + JSON.stringify(j.FG) + ', "versions": [\n';
      for (var y = 0; y < n.length; y++) {
        var U = new Uint8Array(T[y]);
        f +=
          '\t{"format": "' +
          n[y].split(":")[0] +
          '", "start": ' +
          a +
          ', "size": ' +
          U.length +
          " }" +
          (y + 1 < n.length ? ", " : "") +
          "\n";
        G.set(U, 2e3 + a);
        a += T[y].byteLength;
      }
      f += "] }";
      var Z = M.YG(f, G, 0);
      for (var y = Z; y < 2e3; y++) G[y] = 32;
      W = "application/octet-stream";
    } else {
      var h = new aj(),
        u = 0,
        i = "",
        x = encodeURIComponent;
      i = "p=" + x('{ "source": ' + JSON.stringify(j.FG) + ', "versions": [');
      M.v3(h, u, i);
      u += i.length;
      for (var y = 0; y < n.length; y++) {
        i = x(' {"format": "' + n[y].split(":")[0] + '", "data": "');
        M.v3(h, u, i);
        u += i.length;
        var c = a8.bP(j, n[y], q.a),
          X = jc.a2N(c, c.byteLength),
          Z = X.length;
        h.xY(u, Z);
        for (var $ = 0; $ < Z; $++) {
          h.xY(u, 3);
          var H = X[$];
          if (H == 43) {
            h.data[u] = 37;
            h.data[u + 1] = 50;
            h.data[u + 2] = 66;
            u += 3;
          } else if (H == 47) {
            h.data[u] = 37;
            h.data[u + 1] = 50;
            h.data[u + 2] = 70;
            u += 3;
          } else if (H == 61) {
            h.data[u] = 37;
            h.data[u + 1] = 51;
            h.data[u + 2] = 68;
            u += 3;
          } else {
            h.data[u] = H;
            u++;
          }
        }
        i = x('" }' + (y + 1 < n.length ? ", " : ""));
        M.v3(h, u, i);
        u += i.length;
      }
      i = x("] }");
      M.v3(h, u, i);
      u += i.length;
      G = h.data.slice(0, u);
      W = "application/x-www-form-urlencoded";
    }
    var C = new XMLHttpRequest();
    C.open("POST", m.url, !0);
    if (W) C.setRequestHeader("Content-Type", W);
    C.addEventListener("load", a8.aGY.bind(this));
    C.send(new Blob([G.buffer]));
  };
  a8.aGY = function (j) {
    this.caller.ze("Saving ...");
    var q = j.target.response;
    if (q.charAt(0) == "{") {
      q = JSON.parse(q);
      if (q.newSource) this.an.FG = q.newSource;
      if (q.message) alert(q.message, 2e3);
      if (q.script) {
        var m = new fd(_.E.c, !0);
        m.data = { R: _.Y.D4, dR: q.script };
        this.caller.k(m);
      }
    } else alert("Saved. Response: " + q, 1500);
  };
  a8.am3 = function (j) {
    var q = j.qu,
      m = q[1].split(".").pop(),
      n = a8.bP(j, m, null, m == "psd" && q[0] == 1 ? [!0, !1, !0, !1] : null),
      G = Storage.mH(q[0]);
    return G.akk(q[1], n);
  };
  a8.aHk = function (j, q) {
    var m = j.Co.yU;
    if (q == null) q = a8.bP(j, m);
    l8.Ui(function () {
      var n = new XMLHttpRequest(),
        G =
          "https://www.googleapis.com/upload/drive/v3/files/" +
          j.Co.file.id +
          "?uploadType=media" +
          "&" +
          l8.axK();
      n.open("PATCH", G, !0);
      n.addEventListener("load", function (W) {
        var k = JSON.parse(W.target.response);
        alert(k.name + " updated");
      });
      n.send(q);
      alert('Saving "' + j.Co.file.name + '" to Google Drive ...');
    });
  };
  a8.bZ = function (j, q, m, n, G) {
    if (
      window.location.href.indexOf("photopea.com") == -1 ||
      window.top != window.self
    )
      a8.eW(j, q, m, n);
    else {
      try {
        a8.eW(j, q, m, n, G);
      } catch (gn) {
        if (gn == "low_ram") {
        } else {
          var W = gh.Qa(q),
            k =
              "Error. Please, send your file to support@photopea.com and we will solve it.";
          if (W == "psd")
            k =
              "Your file is probably damaged :( If your file works well in other programs, send it to support@photopea.com";
          if (gh.Qa(q) == "eps")
            k =
              "We support only basic EPS files. Convert your file into PDF (with an online converter) and open the PDF in Photopea.";
          alert(k, 1e4);
        }
      }
    }
  };
  a8.eW = function (j, q, m, n, G) {
    var W;
    if (j.name) {
      var k = j.name.lastIndexOf(".");
      W = k == -1 ? j.name : j.name.slice(0, k);
      if (j.name.slice(k + 1) == "psdt") W = "Untitled-1";
    } else {
      if (j.url.substring(0, 5) == "data:") W = "image";
      else {
        var T = j.url.substring(j.url.lastIndexOf("/") + 1).split(".");
        W = T[0];
        if (T[1] == "psdt") W = "Untitled-1";
      }
      W = W.slice(0, 50);
    }
    var b = j.name ? j.name : j.url,
      c = new Uint8Array(q);
    if (c[0] == 31 && c[1] == 139 && c[2] == 8) {
      var a = pako.inflate(c);
      a8.eW(j, a.buffer, m, n, G);
      return;
    }
    var f = gh.Qa(q);
    if (f == null) f = M.IH(c, 0, 4);
    if (b && b.toLowerCase().endsWith(".aco")) f = "aco";
    if (b && b.toLowerCase().endsWith(".act")) f = "act";
    if (b && b.toLowerCase().endsWith(".asv")) f = "asv";
    if (b && b.toLowerCase().endsWith(".sai")) f = "sai2";
    if (b && b.toLowerCase().endsWith(".gvdesign")) f = "gvdesign";
    if (b && b.toLowerCase().endsWith(".sequence")) f = "seq";
    if (f != null && gh.lj(f)) lw.event("fmt_" + f, 0.1);
    if (b && b.toLowerCase().endsWith(".raw") && f != "tiff") {
      var U = new fd(_.E.c, !0);
      U.data = { R: _.Y.s0, kO: "importraw", Ul: q, Sh: b.split("/").pop() };
      m.k(U);
      return;
    } else if (f == "json") {
      var Z = "";
      for (var y = 0; y < c.length; y++) Z += String.fromCharCode(c[y]);
      Z = decodeURIComponent(escape(Z));
      var h = JSON.parse(Z);
      if (h.name && h.url) {
        h.resID = j.uF;
        var U = new fd(_.E.c, !0);
        U.data = { R: _.Y.aEw, K: h };
        m.k(U);
      } else {
        alert("Unknown JSON file opened. See the content in the console.", 5e3);
        console.log(h);
      }
      return;
    }
    if (f == "html") {
      var Z = M.K6(c, 0, c.length),
        u = new DOMParser(),
        i = u.parseFromString(Z, "text/html"),
        x = i.getElementsByTagName("meta");
      for (var y = 0; y < x.length; y++) {
        var X = x[y],
          $ = X.getAttribute("property"),
          H = X.getAttribute("content"),
          C = null;
        if ($ == "og:image") C = H;
        if ($ == null && H && H.startsWith("0;url=/imgres?")) {
          var T = H.slice(14).split("&");
          for (var l = 0; l < T.length; l++)
            if (T[l].startsWith("imgurl"))
              C = decodeURIComponent(T[l].slice(7));
        }
        if (C == null) continue;
        var U = new fd(_.E.c, !0);
        U.data = { R: _.Y.mw, rw: { url: C, Wk: !0, sQ: j.sQ } };
        m.k(U);
      }
      return;
    }
    if (gh.lj(f)) {
      if (f == "pxz") {
        var v = UZIP.parse(q);
        for (var K in v) {
          if (K.endsWith(".woff") || K.endsWith(".ttf") || K.endsWith(".otf"))
            a8.bZ({ name: K }, v[K].buffer, m);
        }
      }
      var S,
        o,
        V = gh.lj(f);
      if (
        j.sQ != null &&
        "jpg png gif pdf svg ai psd".split(" ").indexOf(f) != -1
      ) {
        var U = new fd(_.E.c, !0);
        if (0 <= j.sQ)
          U.data = { R: _.Y.S3, target: j.sQ, lR: j.rX, fg: q, Ps: W };
        else {
          U = new fd(_.E.w, !0);
          U.data = { R: R.wm, data: new Uint8Array(q), Sh: W + "." + f };
          U.l = L.W1;
        }
        m.k(U);
        return;
      }
      var P = [W, V, f, j, m, n, q];
      if (V.k5) {
        S = new fb("");
        V.LN(q, S, a8.sJ, P);
      } else {
        o = V.LN(q, null, a8.sJ, P, m);
        if (o == null) return;
      }
      if (V.Qg != !0) a8.sJ(S, o, P);
      else m.Pn();
      return;
    }
    var z = new fd(_.E.c, !0);
    z.data = { R: _.Y.g3, Ul: q, eA: j.name };
    var E = j instanceof File && j.axb != !0,
      U = new fd(_.E.c, !0);
    U.data = { R: _.Y.fh, vt: "add", rw: null, Jb: null, avC: j.axb };
    if (f == "zip") {
      var A = Date.now(),
        v = UZIP.parse(q),
        N = "xml rels plist iwa db ds_store txt rtf".split(" ");
      for (var K in v) {
        var Q = !1;
        for (var y = 0; y < N.length; y++)
          if (K.toLowerCase().endsWith("." + N[y])) Q = !0;
        if (K.startsWith("__MACOSX/") || v[K].length == 0) Q = !0;
        if (Q) continue;
        var e = K.split("/").pop();
        a8.bZ({ name: e }, v[K].buffer, m, n, !0);
      }
    } else if (f == "jsx" || (b && b.toLowerCase().endsWith(".jsx"))) {
      if (E) m.k(z);
      var Z = M.K6(new Uint8Array(q));
      U.data = { R: _.Y.D4, dR: Z };
      m.k(U);
    } else if (f == "sf2") {
      var Y = SF2Parser.VB(new Uint8Array(q));
      U.data.rw = fG.aK8;
      U.data.Jb = Y;
      m.k(U);
    } else if (f == "otf") {
      if (E) m.k(z);
      var Y = Typr.parse(q);
      U.data.rw = fG.uk;
      for (var y = 0; y < Y.length; y++) {
        U.data.Jb = Y[y];
        m.k(U);
      }
    } else if (f == "asl") {
      if (E) m.k(z);
      var Y = hS.VB(q, b);
      U.data.rw = fG.OF;
      U.data.Jb = Y.fA;
      m.k(U);
      U.data.rw = fG.S0;
      U.data.Jb = Y.P_;
      m.k(U);
    } else if (f == "tpl") {
      if (E) m.k(z);
      var Y = eT.VB(q);
      U.data.rw = fG.cS;
      U.data.Jb = { cd: Y.cd, cs: Y.cs, list: [] };
      m.k(U);
      if (Y.aF2.length != 0) {
        U.data.rw = fG.lG;
        U.data.Jb = Y.aF2;
        m.k(U);
      }
      if (Y.P_.length != 0) {
        U.data.rw = fG.S0;
        U.data.Jb = Y.P_;
        m.k(U);
      }
      U.data.rw = fG.D$;
      U.data.Jb = Y.list;
      m.k(U);
    } else {
      var d = "";
      for (var I in fG.Zu) if (fG.Zu[I][0] == f) d = I;
      if (d != "") {
        if (E && !fG.Ml[d]) m.k(z);
        U.data.Jb = fG.Zu[d][2].VB(q, b);
        U.data.rw = d;
        m.k(U);
      } else if (q.byteLength == 0) alert("Empty file (0 Bytes)");
      else {
        var O = gh.Qa(q),
          s;
        if (O == null) O = b.split(".").pop().split("?")[0];
        var p = "eot fntdata csv py txt js json html htm css scss mp3".split(
          " "
        );
        if (p.indexOf(O) != -1) s = O + " | ...";
        else s = O + " | " + new Uint8Array(q).slice(0, 4).join(",");
        if (O.length <= 10 && G != !0) lw.event("ufmt_" + s);
        alert("Unknown file format: " + JSON.stringify(f));
      }
    }
  };
  a8.sJ = function (j, q, m) {
    var n = m[0],
      G = m[1],
      W = m[2],
      k = m[3],
      T = m[4],
      b = m[5],
      c = m[6];
    if (G.Qg) T.ze();
    if (!G.k5) {
      if (q.length == 0) return;
      if (q[0].t33421 || q[0].t50706) {
        B.raw.normalize(q[0], c);
        console.log(q[0]);
        var a = new fd(_.E.c, !0);
        a.data = { R: _.Y.s0, kO: "rawpea", NP: q[0] };
        T.k(a);
        return;
      }
      if (b) {
        b(new Uint8Array(q[0].data), q[0].Iu);
        return;
      }
      j = gh.wk(n, q);
    }
    var f = ["psd", "ai", "mid"][ei];
    if (ei == 0 && gh.Kd.indexOf(W) != -1) f = W;
    j.name = n + "." + f;
    j.uF = k.uF;
    j.tg = W;
    j.vt = k.vt;
    j.FG = k.url;
    j.ps = k.ps;
    j.Co = k.Co;
    j.ff = k.ff;
    j.qu = k.qu;
    if (k.ff && k.ff.name.endsWith(".psdt")) j.ff = null;
    if (j.Co) j.Co.yU = W;
    if (j.U.length != 0) {
      var a = new fd(_.E.c, !0);
      a.data = {
        R: k.sQ == null ? _.Y.ED : _.Y.S3,
        target: k.sQ,
        lR: k.rX,
        fg: j,
      };
      T.k(a);
    }
  };
  function d7(j, q) {
    kV.call(this);
    this._U = d7._U++;
    this.Oh = j;
    this.a9u = this.aJO.bind(this);
    this.atJ = this.auJ.bind(this);
    this.aAJ = this.XA.bind(this);
    this.auo = q;
    this.aCX = this.aGe.bind(this);
    this.aKl = this.akX.bind(this);
    this.aa5 = this.ayo.bind(this);
    this.Cp = 0;
    this.aD0 = 0;
    this.ahi = 0;
    this._ = J.m("div", "panelblock");
    this.G9 = J.m("div", "block");
    this.S9 = J.m("div", "collapsed");
    this._.appendChild(this.G9);
    this.z_ = -1;
    this.Ze = !0;
    this.G$ = J.m("div", "panelhead");
    this.G9.appendChild(this.G$);
    this.sq(this.G$);
    this.adC = new kv("\u2261");
    J.F(this.adC._, "position:absolute; right:4px;");
    this.adC.Q("click", this.a6G, this);
    this.gj = J.m("div", "body");
    this.G9.appendChild(this.gj);
    this.Ha = [];
    this.iI = null;
    this.Xa = null;
  }
  d7._U = 0;
  d7.prototype = new kV();
  d7.ub = 26.1;
  d7.prototype.a6G = function (j) {
    var q = this.Ha[this.z_].UE(),
      m = j.currentTarget._.getBoundingClientRect();
    q.T();
    q.update();
    q.parent = this;
    var n = new fd(_.E.c, !0);
    n.data = { R: _.Y.wQ, Tf: q, x: m.left, y: m.top + m.height + 2 };
    this.k(n);
  };
  d7.prototype.cZ = function (j) {
    var q = this.G9,
      m = this.G$,
      n = this.gj;
    if (J.JO(m)) q.removeChild(m);
    if (J.JO(n)) q.removeChild(n);
    if (j == 0) q.appendChild(m);
    q.appendChild(n);
    this.ahi = j;
  };
  d7.iO = function (j) {
    j.stopPropagation();
    j.preventDefault();
  };
  d7.prototype.aJO = function (j) {
    var q = j.dataTransfer.types;
    if (q[1] != null && q[1] != this._U + "") return;
    d7.iO(j);
    var aF = j.currentTarget;
    if (j.target == aF) J._g(aF, "highlight");
  };
  d7.prototype.auJ = function (j) {
    d7.iO(j);
    var aF = j.currentTarget;
    if (j.target == aF) J.XZ(aF, "highlight");
  };
  d7.prototype.sq = function (j) {
    j.addEventListener("dragenter", this.a9u, !1);
    j.addEventListener("dragleave", this.atJ, !1);
    j.addEventListener("dragover", d7.iO, !1);
    j.addEventListener("drop", this.aAJ, !1);
    j.addEventListener(
      "dragstart",
      function (q) {
        q.dataTransfer.setData("Text", "--panel");
        q.dataTransfer.setData(this._U + "", "");
      }.bind(this),
      !1
    );
  };
  d7.prototype.XA = function (j) {
    this.atJ(j);
    var q = null,
      aF = j.currentTarget,
      m = this.awQ(aF);
    if (aF == this.gj && this.z_ != -1) q = this.z_;
    else if (aF == this.G$) q = null;
    else if (m != -1) q = m;
    var n = j.dataTransfer.getData("Text");
    if (n == "" || n.startsWith("http") || n.startsWith("data:image/"))
      J.UB(j, this, q);
    else if (n == "--panel") {
      var G = J.QR(j, aF),
        W = this.Ha,
        k = W.slice(0),
        y = this.z_,
        T =
          m == -1
            ? W.length
            : G.x < aF.getBoundingClientRect().width / 2
            ? m
            : m + 1;
      if (y == T || y + 1 == T || aF == this.gj) return;
      var b = y < T ? T - 1 : T,
        c = W[y];
      W.splice(y, 1);
      W.splice(b, 0, c);
      J.dI(this.G$);
      for (var a = 0; a < W.length; a++) this.G$.appendChild(W[a].JH);
      this.fc(b);
      var f = [];
      for (var y = 0; y < W.length; y++) f[y] = k.indexOf(W[y]);
      var U = new fd("shuffleItems", !1);
      U.data = { aFX: f };
      this.k(U);
    } else if (q != null && this instanceof az) {
      var U = new fd(_.E.c, !0);
      U.data = { R: _.Y.aoP, apU: q };
      this.k(U);
    }
  };
  d7.prototype.hs = function () {
    return null;
  };
  d7.prototype.a3t = function () {
    if (this.hs()) {
      this.G$.style.padding = "0px";
      this.Xa = this.hs();
      this.gj.appendChild(this.Xa);
      this.Js.yl(!1);
      var j = new fd(_.E.c, !0);
      j.data = { R: _.Y.VU, K: 1 };
      this.k(j);
    }
  };
  d7.prototype.an0 = function () {
    if (this.Xa) {
      this.G$.style.padding = "";
      this.gj.removeChild(this.Xa);
      this.Xa = null;
      this.Js.yl(!0);
      var j = new fd(_.E.c, !0);
      j.data = { R: _.Y.VU, K: 0 };
      this.k(j);
    }
  };
  d7.prototype.awQ = function (j) {
    var q = this.Ha;
    for (var y = 0; y < q.length; y++) if (q[y].JH == j) return y;
    return -1;
  };
  d7.prototype.jL = function () {
    for (var y = 0; y < this.Ha.length; y++) this.Ha[y].Id.uy();
  };
  d7.prototype.qw = function () {
    return this.z_;
  };
  d7.prototype.$q = function () {
    if (this.Ze) return;
    this.Ze = !0;
    this._.removeChild(this.S9);
    this._.appendChild(this.G9);
  };
  d7.prototype.collapse = function () {
    if (!this.Ze) return;
    this.Ze = !1;
    this._.appendChild(this.S9);
    this._.removeChild(this.G9);
  };
  d7.prototype.ub = function () {
    var j = 0;
    if (this.ahi == 0) {
      j = this.G$.getBoundingClientRect().height + 1;
      j = Math.max(j, d7.ub);
    }
    return j;
  };
  d7.prototype.aHs = function () {
    return this.ub() + this.gj.getBoundingClientRect().height;
  };
  d7.prototype.X3 = function (j, q, m) {
    this.G$.style.maxWidth = j + "px";
    var n = this.ub();
    if (this.z_ != -1) this.Ha[this.z_].X3(j, q - n, m);
    return q - n;
  };
  d7.prototype.yp = function (j, q) {
    if (this.z_ != -1) this.Ha[this.z_].yp(j, q);
  };
  d7.prototype.Wz = function (j, q, m) {
    this.Ha[this.z_].Wz(j, q, m);
  };
  d7.prototype.su = function (j) {
    this.an0();
    if (this.Ha.indexOf(j) != -1) {
      this.fc(this.Ha.indexOf(j));
      return;
    }
    j.parent = this;
    this.Ha.push(j);
    this.G$.appendChild(j.JH);
    j.JH.addEventListener("mouseover", this.aCX, !1);
    this.sq(j.JH);
    this.S9.appendChild(j.Id._);
    j.Id.Q("click", this.az1, this);
    j.Q("select", this.aJo, this);
    j.Q(_.E.bg, this.aqT, this);
    this.fc(this.Ha.length - 1);
  };
  d7.prototype.aGe = function (j) {
    if (j.buttons == 0) return;
    var q = j.currentTarget,
      m = q,
      y = 0;
    while ((m = m.previousSibling) != null) y++;
    this.aD0 = y;
    q.addEventListener("mouseout", this.aKl, !1);
    this.Cp = setTimeout(this.aa5, 700);
  };
  d7.prototype.akX = function (j) {
    var q = j.currentTarget,
      m = q,
      y = 0;
    while ((m = m.previousSibling) != null) y++;
    q.removeEventListener("mouseout", this.aKl);
    clearTimeout(this.Cp);
  };
  d7.prototype.ayo = function (j) {
    this.k(new fd(_.E.age, !1));
  };
  d7.prototype.alC = function (j) {
    return this.aD0;
  };
  d7.prototype.dB = function (y) {
    var j = new fd(_.E.bg, !1);
    j.data = { N4: y };
    this.k(j);
    var q = this.Ha[y];
    q.yb();
    this.Ha.splice(y, 1);
    this.G$.removeChild(q.JH);
    this.S9.removeChild(q.Id._);
    q.JH.className = "";
    q.Id.removeEventListener("click", this.az1, this);
    q.Id.uy();
    q.removeEventListener("activate", this.aJo);
    q.removeEventListener(_.E.bg, this.aqT);
    var m = this.z_;
    if (y < m) m--;
    else if (y == m && y == this.Ha.length) m--;
    if (this.Ze) this.fc(m);
    if (this.Ha.length == 0) this.a3t();
  };
  d7.prototype.aJ9 = function () {
    return this.Ha.length;
  };
  d7.prototype.YO = function () {
    if (this.Ha.length != 0) this.Ha[this.z_].YO();
  };
  d7.prototype.fc = function (j, q) {
    if (q == null) q = !0;
    for (var y = 0; y < this.Ha.length; y++) this.Ha[y].JH.className = "";
    if (this.iI) this.gj.removeChild(this.iI);
    this.iI = null;
    this.z_ = j;
    if (j == -1) return;
    var m = this.Ha[this.z_];
    this.iI = m.nA;
    this.gj.appendChild(m.nA);
    m.JH.className = "active";
    if (!this.Ze) {
      this.k(new fd("showFloat"));
      this.Ha[j].Id.mb();
    }
    if (q) this.k(new fd(_.E.n, !1));
    m.BN();
    var n = this.adC._;
    if (n.parentNode) this.G$.removeChild(n);
    if (m.UE()) this.G$.appendChild(n);
    var G = new fd(_.E.c, !0);
    G.data = { R: _.Y.ja };
    this.k(G);
  };
  d7.prototype.aJo = function (j) {
    if (this.Oh && !this.Oh.aiv()) return;
    var y = this.Ha.indexOf(j.currentTarget);
    this.fc(y);
  };
  d7.prototype.aqT = function (j) {
    var q = this.Ha.indexOf(j.currentTarget);
    if (j.data != null) {
      for (var y = this.Ha.length - 1; y >= 0; y--) {
        var m = this.Ha[y];
        if (j.data == 1 && y == q) continue;
        m.YO();
      }
      return;
    }
    if (this.Oh && !this.Oh.aiv()) return;
    this.dB(q);
  };
  d7.prototype.az1 = function (j) {
    var q = this.Ha.indexOf(j.currentTarget.parent);
    if (this.Ha[q].Id.sM()) this.k(new fd("hideFloat"));
    else this.fc(q);
  };
  d7.prototype.aiU = function (j) {
    this.k(j);
  };
  function az(j) {
    d7.call(this, j);
    this.GM = 0;
    this.uu = 0;
    J.sP(this.G$, this.a9Q.bind(this));
    this.rG = 0;
    this.Z3 = -2;
    this.anf = this.auw.bind(this);
    this.sq(this.gj);
    this.BI = ["default;"];
    this.Js = new J.sI(this.gj);
    this.T_ = new ij(!0);
    this.T_.parent = this;
    this.HD = this.T_._;
    ij.G2(this.T_);
  }
  az.prototype = new d7();
  az.prototype.a9Q = function (j) {
    if (j.target != this.G$) return;
    var q = Date.now() - this.rG < 300 && this.Z3 == -1;
    this.rG = Date.now();
    this.Z3 = -1;
    if (!q) return;
    var m = new fd(_.E.c, !0);
    m.data = { R: _.Y.s0, kO: "newproject" };
    this.k(m);
  };
  az.prototype.eP = function (j, q) {
    if (q) this.BI.push(j);
    else {
      var m = this.BI.length - 1;
      if (this.BI[m] == j) return;
      this.BI[m] = j;
    }
    this.A4();
  };
  az.prototype.aIT = function () {
    this.BI.pop();
    this.A4();
  };
  az.prototype.A4 = function () {
    var j = this.BI[this.BI.length - 1];
    this.Js.Wz(j, this.Ws);
  };
  az.prototype.yp = function (j, q) {
    d7.prototype.yp.call(this, j, q);
    this.T_.yp(j, q);
    if (!j.Nf) {
    }
  };
  az.prototype.T = function () {
    d7.prototype.T.call(this);
    this.T_.T();
  };
  az.prototype.Wz = function (j, q) {
    for (var y = 0; y < q.length; y++) {
      var m = q[y];
      this.Ha[y].KX(
        m.name +
          (m.depth == 8 ? "" : " (RGB/" + m.depth + ")") +
          (m.Dw() ? " *" : "")
      );
    }
    d7.prototype.Wz.call(this, j, q);
  };
  az.prototype.hs = function () {
    return this.HD;
  };
  az.prototype.X3 = function (j, q) {
    if (this.Ha.length == 0) q += d7.ub - 1;
    this.GM = j;
    this.uu = q;
    q = d7.prototype.X3.call(this, j, q);
    this.Ws =
      "height:" +
      q +
      "px; width:" +
      j +
      "px; overflow:hidden; position:relative;";
    this.A4();
    this.T_.X3(j, q);
  };
  az.prototype.su = function (j) {
    d7.prototype.su.call(this, j);
    j.JH.addEventListener("click", this.anf, !1);
  };
  az.prototype.dB = function (y) {
    var j = this.Ha[y];
    J.mW(j.JH, this.anf);
    d7.prototype.dB.call(this, y);
  };
  az.prototype.auw = function (j) {
    var q = this.awQ(j.currentTarget),
      m = Date.now() - this.rG < 300 && this.Z3 == q;
    this.rG = Date.now();
    this.Z3 = q;
    if (!m) return;
    var n = this.Ha[q].fg.name,
      G = new fd(_.E.c, !0),
      W = { p: _.E.w, l: L.W1, d: { R: R.CG } };
    G.data = {
      R: _.Y.s0,
      kO: "namewindow",
      pv: n.slice(0, n.length - 4),
      N0: W,
    };
    this.k(G);
  };
  function iS(j) {
    kV.call(this);
    if (j) return;
    cW.a30(1);
    this._ = J.m("div", "flexrow app");
    this.ga = J.m("div");
    this._.appendChild(this.ga);
    setTimeout(function () {
      var m = window.hideCap;
      if (m) m();
    }, 25e3);
    this.NW = new gn();
    window.addEventListener(
      "blur",
      function (m) {
        this.NW.reset();
      }.bind(this),
      !1
    );
    window.addEventListener("resize", this.QG.bind(this), !1);
    var q = this.ga;
    this.AV = new gL();
    this.AV.parent = this;
    q.appendChild(this.AV._);
    this.Bv = new cI();
    this.Bv.parent = this;
    q.appendChild(this.Bv._);
    this.n3 = new aX(!0);
    this.n3.parent = this;
    q.appendChild(this.n3._);
    this.Q(_.E.c, this.$F, this);
    this.$E = this.MX.bind(this);
    window.requestAnimationFrame(this.$E);
  }
  iS.prototype = new kV();
  iS.prototype.MX = function (j) {
    this.qx();
    window.requestAnimationFrame(this.$E);
  };
  iS.prototype.T = function () {};
  iS.prototype.QG = function (j) {
    var q = window.innerWidth,
      m = window.innerHeight;
    this.X3(q, m);
  };
  iS.prototype.X3 = function (j, q) {
    this.Bv.X3(j, q);
    this.AV.X3(j, q);
  };
  iS.prototype.$F = function (j) {
    var q = j.data.R;
    if (q == _.Y.wQ) this.Bv.aJL(j.data);
    if (q == _.Y.q4) this.Bv.al5(j.data);
    if (q == _.Y.gu) this.Bv.amY(j.data.r8);
    if (q == _.Y.dO) this.Bv.aJv(j.data.r8);
    if (q == _.Y.zr) this.Bv.oD();
  };
  function ll() {
    iS.call(this);
    this.JD = { x: 0, y: 0, qT: !1 };
    this.Bt = !1;
    this.ds = !1;
    this.aMg = null;
    this.aHp = 0;
    this.aFq = !1;
    this.d5 = 0;
    document.body.style.overscrollBehavior = "contain";
    window.onmessage = function (U) {
      if (Storage.aqf(U.source)) return;
      if (U.data instanceof ArrayBuffer) {
        var Z = gh.Qa(U.data),
          h = gh.lj(Z);
        jc.bZ({ url: "file" }, U.data, this);
        if (h == null) this.vs();
      } else if (
        U.data instanceof Object ||
        U.data.startsWith("{") ||
        U.data.startsWith("amp-") ||
        U.data.startsWith("0=goog") ||
        U.data.startsWith("3PCoo") ||
        U.data.startsWith("ima://")
      ) {
      } else if (U.data.startsWith("--ur ")) {
        var u = U.data.split(" ").pop();
        u = u.length == 0 ? [] : u.split(",");
        var i = new fd(_.E.c, !0);
        i.data = { R: _.Y.fh, rw: fG.BG, jt: u };
        this.k(i);
      } else if (U.data.startsWith("--ot ")) {
        if (this.AV.BS()) this.AV.BS().close();
        this.bj.mA(U.data.split(" ").pop());
      } else if (U.data.startsWith("--et ")) {
      } else {
        var i = new fd(_.E.c, !0);
        i.data = { R: _.Y.D4, dR: U.data };
        this.k(i);
        this.vs();
      }
    }.bind(this);
    window.onbeforeunload = function (U) {
      this.aj3();
      for (var y = 0; y < this.mS.length; y++)
        if (this.mS[y].Dw()) {
          return this.mS[y].name;
        }
    }.bind(this);
    if (ei == 0 && !gd.gY())
      window.setInterval(this.aGp.bind(this), 5 * 60 * 1e3);
    var j = this;
    if (window.indexedDB) {
      var q = { xY: window.indexedDB.open("pp", 1) };
      q.xY.onupgradeneeded = function (U) {
        var Z = U.target.result,
          h = Z.createObjectStore("rsrc", { keyPath: "k" });
      };
      q.xY.onsuccess = function (U) {
        var Z = (j.a.Fd.jv = U.target.result),
          h = Z.transaction(["rsrc"], "readwrite").objectStore("rsrc"),
          u = h.get("fs0");
        u.onsuccess = function (U) {
          if (U.target.result) {
            var X = (j.a.Fd.CK = U.target.result.fset);
            for (var $ in X) {
              if (!$.endsWith(".jsx") && !$.endsWith(".p" + "sd"))
                jc.bZ({ url: $, axb: !0 }, X[$], j);
              var H = $.split(".").pop(),
                C = "";
              for (var l in fG.Zu) if (fG.Zu[l][0] == H) C = l;
              if (fG.Ml[C] && !$.startsWith("_all_")) delete X[$];
            }
          }
        };
        var i = new BroadcastChannel("pp-tabs"),
          x = [];
        i.onmessage = function (U) {
          if (U.data == "id") i.postMessage(j.a.Fd.id);
          else x.push(U.data);
        };
        i.postMessage("id");
        setTimeout(function () {
          var h = Z.transaction(["rsrc"], "readwrite").objectStore("rsrc"),
            X = h.getAllKeys();
          X.onsuccess = function () {
            var $ = X.result,
              H = [],
              C = 0;
            for (var y = 0; y < $.length; y++) {
              if ($[y] == "fs0") continue;
              if (x.indexOf($[y]) != -1) continue;
              H.push($[y]);
            }
            for (var y = 0; y < H.length; y++) {
              var u = h.get(H[y]);
              u.onsuccess = function (U) {
                if (U.target.result) {
                  var l = U.target.result.fset;
                  for (var v in l) {
                    try {
                      jc.bZ({ url: v, axb: !0 }, l[v], j);
                      var K = j.WM();
                      K.jn = K.aCt = -1;
                      alert("We have recovered an unsaved document.", 5e3);
                    } catch (U) {
                      console.log(U);
                    }
                  }
                  C++;
                  if (C == H.length)
                    for (var y = 0; y < H.length; y++) {
                      var u = h.delete(H[y]);
                    }
                }
              };
            }
          };
        }, 200);
      };
    }
    var m =
        "rwx~#.-(;.]6EF rx'|#1,6><@87f?NO \"|'/-&(0><BBDEEMGrVPb w$,*1)379;<<D>iQW \"|'/-4,6:<>??GAlTZ \"|'/-1)(W?E !#$$,&P72<DBIAKOoTZR %%!-~-&,>AI`HN vx!/-3QV66;`HN \"|'/-M)+3A]BDEEMG *#DGUP%(+48>Kk>FHHVXXW(Z(un03y=p{ *#DGUP%:/5457:=IuF_$Q~le'*p4gr x$')61Q9? x$')61Q6899A;".split(
          " "
        ),
      n = J.rU[bA.$D][bA.aFb];
    if (n == null) n = [J.rU[bA.Nv][bA.qf]];
    for (var G = 0; G < n.length; G++) {
      var W = n[G];
      for (var y = 0; y < m.length; y++) {
        var k = J.v9(m[y]);
        if (W.indexOf(k) != -1) {
          var T = J.rU[bA.Nv][bA.gj],
            b = bA.Cs(
              "+TyeVTVF<pR1:444X3!~'tGkgfkdlfi_R%JQCBGs<B>AV:-;#TIBEsx*CVqux}xreyztGc]Pdea1NH;OPL|93&:;81$}p%&\"Qnh[oplgYSFZ[XTD>1EFBE/){01.)ysfz{wvgw;Hamh+F,3#!T6@=# |0odhjb`RKtGPK\\WI3A3.:_A{{#t~x,E{xu)H]ac[YKDm@IDo_/hcS*OYl}w/{!thr|i]seVT[dUHP>UF8<?3(@% ,4r.Gi%jqa_3t~{a^[nNCGIA?1*S&/*Hw$y<kjgpsilhtSU\\ZUI?OKCCALeh+20+~t%!xx#a`]fi_b'vF l"
            );
          J.dI(T);
          T[bA.a3u] = b;
          return;
        }
      }
    }
    this.Z = ll.amN();
    this.a = {
      Z: this.Z,
      a0P: !1,
      RW: null,
      ws: 0,
      AU: { cs: [], cd: [], list: [], Kw: null },
      ayy: [],
      Yr: [],
      aic: [],
      bu: [],
      QN: [],
      bO: [],
      wP: [],
      ab6: [],
      asB: [],
      aIa: [],
      bO: [],
      Jh: [hR.i4()],
      RU: [],
      rq: [],
      qZ: null,
      sV: 0,
      aw: 1 - ei,
      TB: eu.TB.i4(),
      aGU: eu.TB.i4(),
      MJ: { pb: 1, pH: B.S(eu.zf[0]) },
      pk: eu.rS.i4(),
      aBP: [null].concat(eu.zf),
      auW: [null].concat(eu.zf),
      HS: new jK(
        function (U) {
          var Z = new fd(_.E.c, !0);
          Z.data = { R: _.Y.mw, rw: { url: lw.P0("rsrc/fonts/" + U) } };
          this.k(Z);
        }.bind(this)
      ),
      Cw: { NJ: [], K2: null, Th: null },
      font: null,
      YL: [],
      Jb: [],
      an7: {},
      UP: 0,
      vH: 16777215,
      sB: !1,
      x_: !0,
      q1: {
        M3: !0,
        GX: !1,
        hl: !0,
        GA: !0,
        HT: !0,
        gQ: !0,
        y1: 20,
        XR: 0,
        nL: 1,
        lA: 0,
        Mt: 0,
        WH: 0,
        qF: 8421504,
        MY: 65535,
        If: 33023,
      },
      m0: !0,
      b0: [!0, !0, !1, !0, !0],
      z6: bI.o2(),
      U6: 1,
      Xi: !0,
      ZT: {},
      Nf: !0,
      acm: !1,
      compact: !1,
      aJf: 1,
      Pv: 0,
      HD: !0,
      Te: {},
      qR: null,
      Fd: {
        id: "ts" + Math.round(Math.random() * 16777215),
        a07: !1,
        aq5: !1,
        CK: {},
        qq: {},
        jv: null,
      },
      a2g: 0,
      ap$: null,
      kJ: null,
      ask: null,
      jX: null,
    };
    jK.J9.zw(this);
    this.a1J = { HA: new hk(), Zz: new ea() };
    this.a.Cw = al.aua();
    this.BC = new jv();
    this.$O = new cj();
    this.Nl = new jB();
    this.T7 = new by();
    this.SX = new bt(this.Z, !0);
    this.Ik = new g9();
    this.nF = new az(this);
    this.eC = J.m("div");
    this.kj = !1;
    this.aAx = this.a2H.bind(this);
    J._g(this.nF._, "mainblock");
    this.n3.parent =
      this.BC.parent =
      this.$O.parent =
      this.SX.parent =
      this.Ik.parent =
      this.nF.parent =
        this;
    this.nF.Q(_.E.n, this.de, this);
    this.nF.Q(_.E.bg, this.a0F, this);
    this.nF.Q("shuffleItems", this.ao8, this);
    this.nF.Q(_.E.age, this.asK, this);
    this.Q("mouse", this.akL, this);
    this.Q(_.E.w, this.BT, this);
    this.Q(_.E.NI, this.aHo, this);
    document.body.addEventListener("keydown", this.Iz.bind(this), !1);
    window.addEventListener("keyup", this.Cc.bind(this), !1);
    window.addEventListener("paste", this.a4X.bind(this), !1);
    window.addEventListener("copy", this.a5R.bind(this), !1);
    window.addEventListener(
      "wheel",
      function (U) {
        if (U.ctrlKey) U.preventDefault();
      },
      { passive: !1 }
    );
    window.addEventListener(
      "beforeinstallprompt",
      function (U) {
        if (window.innerWidth > 400) U.preventDefault();
        this.a.qR = U;
      }.bind(this)
    );
    this.aF$ = 0;
    this.mS = [];
    this.bj = new jc(a8.bZ);
    this.bj.parent = this;
    var c = this.ga,
      a = (this.sW = J.m("div"));
    a.appendChild(this.BC._);
    a.appendChild(this.$O._);
    this.n3.auE(a);
    var f = (this.axS = J.m("div", "flexrow"));
    c.appendChild(f);
    f.appendChild(this.SX._);
    f.appendChild(this.nF._);
    f.appendChild(this.Ik._);
    if (ei == 0 || ei == 1) this.bj.Tv({ url: lw.sX("rsrc/basic/basic.zip") });
    if (ei == 2) this.bj.Tv({ url: "images/sf2/MagicSFver2.sf2" });
    this.yx(ei == 0 ? L.Lx : L.Lx);
    lw.zw(this.a7q.bind(this));
    if (this.Xz()) return;
    if (ei == 0) {
      lw.event("web_PPea", 0.01);
      var W = J.rU[bA.Nv][bA.qf];
      if (W == "") W = "di" + "rect";
      W = W.split("//").pop();
      if (W.startsWith("w" + "ww.")) W = W.slice(4);
      if (W.endsWith("/")) W = W.slice(0, -1);
      if (W.startsWith("go" + "ogle.")) W = "go" + "ogle.com";
      if (W.startsWith("baidu.com")) W = "baidu.com";
      if (W.startsWith("photopea.com/templates")) W = "photopea.com/templates";
      if (W.startsWith("photopea.com/tuts")) W = "photopea.com/tuts";
      if (W.endsWith("search.yahoo.com")) W = "search.yahoo.com";
      if (W.endsWith("gradio.live")) W = "gradio.live";
      if (W.endsWith("proxy.ru")) W = "proxy.ru";
      if (W.length > 28 && W.indexOf("/") != -1) W = W.split("/")[0];
      if (W.length > 28) W = W.split(".").slice(1).join(".");
      if (W.length > 28) W = W.split(".").slice(1).join(".");
      if (W.length > 28) W = W.slice(W.length - 28);
      if (gd.gY()) {
        lw.event("i" + "fr_" + W, 0.01, 1);
      } else lw.event("r" + "ef_" + W, 0.01, 1);
    }
    if (ei == 1) fetch("//www.photopea.com/papi/event.php?id=web_VPea");
  }
  ll.prototype = new iS(!0);
  ll.prototype.vs = function (j) {
    var q = new fd(_.E.c);
    q.data = { R: _.Y.a8, rw: j ? j : "done" };
    this.k(q);
  };
  ll.prototype.aGp = function () {
    var j = this.a.Fd,
      m = !1;
    if (j.jv == null) return;
    var q = this.mS;
    for (var y = 0; y < q.length; y++) {
      var n = q[y];
      if (n.aCt != n.d6 && n.depth == 8) {
        var G = Date.now(),
          W = gh.Wo(n, "psd", 0, 0, [!0, !1, !0, !1, !0]);
        n.aCt = n.d6;
        j.qq[n.name] = W;
        m = !0;
        console.log(Date.now() - G, "saving " + n.name, W.byteLength);
      }
    }
    if (m) {
      var k = new fd(_.E.c);
      k.data = { R: _.Y.fh, rw: fG.SW, ans: !0 };
      this.k(k);
    }
  };
  ll.prototype.a7q = function () {
    J.rU[bA.pc](
      this.aJB.bind(this),
      Math.pow(Math.PI, 8) + J.rU[bA.ahe][bA.a5i]() * 1e4
    );
    var j = lw.PZ();
    if (j != null && j.globals != null && ei < 2) this.Rm(j.globals);
    else {
      this.aFq = !0;
      var q = g$.a83();
      if (q && q.length != 0) {
        var m = q[0];
        g$.aFQ(m, this.aAx);
      }
    }
    if (!this.Xz()) {
      var n = J.agJ();
      if (n == 0) this.acm = !0;
      if (n == 2) this.a.Nf = !1;
      if (n != 1 && Math.random() < 0.002) J.a8A();
    }
    if (!gd.gY() || !this.a.Nf) {
      this.afN();
      this.Ue();
    } else {
      var G = J.qn(J.rU[bA.rW]);
      G[bA.yV](bA.HP, this.arO.bind(this));
      var W = J.Cs("_MYOqDLGJa;A:6");
      if (ei != 0) W = bA.v9("@C/25N4/9A?C;:iBQRv") + W;
      G[bA.i3](J.Cs("61="), W);
      G[bA.tQ]();
    }
    this.Bt = !0;
    this.vs();
    var k = new fd(_.E.c);
    k.data = { R: _.Y.s0, kO: "peamark", hr: 4, index: [10, 0] };
  };
  ll.prototype.arO = function (j) {
    var q = JSON.parse(j.target[bA.hw]),
      m = J.rU[bA.aab][bA.aAS]() / 1e3,
      n = J.rU[bA.Nv][bA.qf],
      G = !1;
    for (var W in q)
      if (W.indexOf(".") != -1 && n.indexOf(W) != -1 && parseInt(q[W]) > m)
        G = !0;
    if (G) this.a.Nf = !1;
    this.afN();
    this.Ue();
    if (n == "") {
      if (this.a.Nf) {
        alert(bA.Cs("S[L[PEKNdF640:7'1;\")2tyyz|"));
      }
    }
  };
  ll.prototype.Ue = function (j) {
    this.ds = !0;
    if (!this.a.HD) this.nF.HD = null;
    else if (this.mS.length == 0) this.nF.a3t();
    this.o7(fG.HN);
    this.T();
    this.QG();
    this.Ik.Wz(this.WM(), this.mS, this.a);
  };
  ll.prototype.Rm = function (j) {
    var q = this.a;
    if (j.fc != null) {
      q.UP = j.fc;
      var m = q.Cw.K2.FillColor;
      if (m) {
        var n = B.b4(q.UP);
        m.Values = [1, n.o / 255, n.i / 255, n.X / 255];
      }
    }
    if (j.bc != null) q.vH = j.bc;
    if (j.ru != null) q.sB = j.ru == 1;
    if (j.ex != null) q.x_ = j.ex == 1;
    if (j.favFam != null) q.YL = j.favFam;
    if (j.ff != null) q.YL = j.ff.split(",");
    if (j.rsrc != null) q.Jb = j.rsrc;
    if (j.rs != null) q.Jb = j.rs.split(",");
    if (j.fo != null) q.Cw.NJ[0].Name = j.fo;
    if (j.panels != null) q.z6 = j.panels;
    if (j.pd != null) q.z6 = bI.aoY(j.pd);
    if (j.as != null) q.aJf = j.as;
    if (j.co != null) {
      q.Pv = j.co;
      if (q.Pv != 0)
        alert("Edit > Preferences > Cursor Offset is not Zero.", 2500);
    }
    var G = j.ep ? j.ep : j.eparams;
    if (G) {
      var W = q.q1;
      if (G.guides != null) W.M3 = G.guides;
      if (G.grid != null) W.GX = G.grid;
      if (G.gsize != null) W.y1 = G.gsize;
      if (G.gunits != null) W.lA = G.gunits;
      if (G.gtype != null) W.Mt = G.gtype;
      if (G.runits != null) W.WH = G.runits;
      if (G.gcol != null) W.qF = G.gcol;
      if (G.gucol != null) W.MY = G.gucol;
      if (G.glcol != null) W.If = G.glcol;
      if (G.sels != null) W.hl = G.sels;
      if (G.paths != null) W.GA = G.paths;
      if (G.pgrid != null) W.HT = G.pgrid;
      if (G.slices != null) W.gQ = G.slices;
      if (G.gc != null) W.qF = G.gc;
      if (G.uc != null) W.MY = G.uc;
      if (G.lc != null) W.If = G.lc;
      if (G.gs != null) W.y1 = G.gs;
      if (G.gv != null) W.XR = G.gv;
      if (G.gn != null) W.nL = G.gn;
      if (G.gu != null) W.lA = G.gu;
      if (G.gt != null) W.Mt = G.gt;
      if (G.ru != null) W.WH = G.ru;
      if (G.gr != null) W.GX = G.gr == 1;
      if (G.gd != null) W.M3 = G.gd == 1;
      if (G.se != null) W.hl = G.se == 1;
      if (G.pa != null) W.GA = G.pa == 1;
      if (G.pg != null) W.HT = G.pg == 1;
      if (G.sl != null) W.gQ = G.sl == 1;
    }
    if (j.lang != null) g$.aFQ(j.lang, this.aAx);
    if (j.theme != null) q.U6 = j.theme;
    if (j.to) {
      var k = j.to;
      for (var y = 0; y < k.length; y += 2) {
        var T = this.Z.map[k[y]];
        if (T) T.l.ui(k[y + 1], null, this);
      }
    }
    if (j.topt || q.aBu) {
      var b = j.topt ? j.topt : {},
        c = q.aBu ? q.aBu : {};
      for (var a in this.Z.map) {
        if (a >= 103) continue;
        var f = "t" + a;
        if (b[f] || c[f]) this.Z.map[a].l.ui(b[f], c[f], this);
      }
    }
  };
  ll.prototype.afN = function () {
    if (this.a.a0P) return;
    this.a.a0P = !0;
    var j = null,
      q = window.location.href,
      m = q.indexOf("="),
      n = q.indexOf("#");
    if (m != -1) j = q.substring(q.indexOf("?") + 1, m);
    if (n != -1 && n != q.length - 1) {
      j = "p";
      m = n;
    }
    if (n != -1 && q[n + 1] == "i") {
      this.bj.mA(q.slice(n + 2, n + 10));
    } else if (q.slice(n + 1).startsWith("audit")) {
    } else if (q.slice(n + 1).startsWith("nocdn")) {
    } else if (q.slice(n + 1).startsWith("goog_rewarded")) {
    } else if (n != -1 && q[n + 1] == "t") {
      this.bj.mA(
        q
          .slice(n + 2, n + 10)
          .split("")
          .reverse()
          .join("")
      );
    } else if (j == "p" || j == "state") {
      var G = q.substring(m + 1, q.length);
      G = JSON.parse(decodeURIComponent(G));
      if (j == "p") {
        var W = G.apis,
          k = this.a;
        if (W) {
          if (W.rmbg) k.Te.aEh = W.rmbg;
          if (W.dezgo) k.Te.af4 = W.dezgo;
        }
        if (G.script == "alert(73)") this.a.Nf = !1;
        if (G.script) gu.agm(this);
        if (G.server) this.aMg = G.server;
        if (G.resources)
          for (var y = 0; y < G.resources.length; y++)
            this.bj.Tv({ url: G.resources[y] });
        if (G.files)
          for (var y = 0; y < G.files.length; y++)
            this.bj.Tv({
              url: G.files[y],
              vt: { wS: G.server, apQ: G.script },
            });
        var T = G.environment;
        if (T == null) T = {};
        if (T.plugins != null) this.Ik.aa2(T.plugins);
        if (T.localsave != null) this.a.Xi = T.localsave;
        if (T.customIO != null) this.a.ZT = T.customIO;
        if (T.vmode != null) {
          var b = T.vmode;
          if (b == 1) this.a.compact = !0;
          if (b == 2) this.axP = !0;
        }
        if (T.intro != null && !this.a.Nf) this.a.HD = T.intro;
        if (T.menus != null) this.a.a2z = T.menus;
        if (T.tmnu != null) this.a.aBu = T.tmnu;
        if (T.panels != null) this.a.z6 = T.panels;
        if (T.showtools != null) {
          var c = T.showtools,
            a = c.indexOf(this.a.RW);
          this.a.Xr = c;
          if (a == -1) this.yx(c[0]);
        }
        if (T.phrases != null) g$.aL5(T.phrases);
        if (T.autosave != null) {
          this.a.aJf = 0;
          window.setInterval(
            function () {
              var Z = new fd(_.E.c);
              Z.data = { R: _.Y.ON };
              this.k(Z);
            }.bind(this),
            T.autosave * 1e3
          );
        }
        if (T.icons != null) {
          for (var f in T.icons)
            if (T.icons[f].indexOf('"') == -1) {
              if ((f == bA.a3f || f == bA.akW) && this.a.Nf) continue;
              PIMG[f] = T.icons[f];
              PIMG["__" + f] = !0;
            }
        }
        this.Rm(T);
        if (G.files == null && G.script) {
          iv.i2(G.script, this);
          this.vs();
        }
      } else if (j == "state") {
        var U = this.bj;
        if (G.action == "create") {
          var Z = new fd(_.E.c);
          Z.data = { R: _.Y.s0, kO: "newproject", a28: G.folderId };
          this.k(Z);
        }
        if (G.action == "open") {
          for (var y = 0; y < G.ids.length; y++)
            l8.Ui(
              function () {
                var u = "https://www.googleapis.com/drive/v3/files/" + this.a5M,
                  i = new XMLHttpRequest();
                i.open("GET", u);
                i.setRequestHeader("Authorization", l8.aAF());
                i.send();
                i.onload = function (x) {
                  var X = JSON.parse(x.target.response);
                  U.Tv({
                    url: u + "?alt=media",
                    name: X.name,
                    Co: { file: X, yU: "" },
                    aAI: { Authorization: l8.aAF() },
                  });
                };
              }.bind({ a5M: G.ids[y] })
            );
          alert("Loading files from Google Drive ...");
        }
      }
    } else {
      var h = window.launchQueue;
      if (h) {
        var U = this.bj;
        h.setConsumer(function (u) {
          var i = u.files,
            x = [];
          for (var y = 0; y < i.length; y++) {
            var X = i[y];
            X.getFile().then(function ($) {
              x.push($);
              if (x.length == i.length) U.MP(x, null, null, null, i);
            });
          }
        });
      }
    }
  };
  ll.prototype.T = function () {
    var j = null;
    if (j) {
      var q = !1,
        m = j.getElementsByTagName("h1")[0],
        W = 0,
        T = 0,
        b = 0;
      m.textContent = "Free Online Photo Editor";
      var n = j.getElementsByTagName("p"),
        G = "Photopea: " + J.TU(g$.get([0, 17, 1])),
        k = ["PSD", "AI", "PDF", "SVG", "CDR"];
      for (var y = 0; y < k.length; y++)
        G = G.replace(k[y], "<b>" + k[y] + "</b>");
      if (!q)
        G +=
          " (<b>Adobe Photoshop</b>, <b>Adobe Illustrator</b>, <b>PDF</b>,  <b>SVG</b>, <b>CorelDRAW</b>).";
      n[0].innerHTML = G;
      G = g$.get([0, 17, 2]) + " " + g$.get([0, 17, 3]);
      for (var y = 0; y < G.length; y++) {
        var c = G[y];
        if (c == "<") T++;
        if (c == ">") b++;
      }
      if (!q && T * b == 9) {
        var a = [
          "//github.com/photopea/" + ["photo", "vector"][ei] + "pea/issues",
          "//www.facebook.com/photopea/",
          "//blog.photopea.com/introduction.html",
        ];
        for (var y = 0; y < 3; y++) {
          var f = G.indexOf("<", W),
            U = G.indexOf(">", W),
            Z =
              G.slice(0, f) +
              '<a href="' +
              a[y] +
              '" target="_blank">' +
              G.slice(f + 1, U) +
              "</a>";
          W = Z.length;
          G = Z + G.slice(U + 1);
        }
        n[1].innerHTML = G;
      } else n[1].innerHTML = g$.get([0, 17, 2]);
    }
    this.n3.T();
    this.BC.T();
    this.Nl.T();
    this.T7.T();
    this.Ik.T();
    this.SX.T();
    this.AV.T();
    this.nF.T();
    for (var h in this.Z.map) if (this.Z.map[h].Qy) this.Z.map[h].Qy.T();
  };
  ll.prototype.Xz = function () {
    if (gd.wn()) return !0;
    return 4 < J.rU[bA.$D][bA.mg][bA.aBp](bA.Cs("'$!|"));
  };
  ll.prototype.X3 = function (j, q) {
    j = Math.floor(j);
    q = Math.floor(q);
    var m = J.Cs("WUMK&AM"),
      n = bA.Tg,
      G = J.rU[bA.Nv],
      W = Math.max(j, window.screen.width),
      k = Math.max(q, window.screen.height),
      Z = 0;
    if (gd.bd == null) {
      gd.bd = Math.min(W, k) < 500 || W < 750 ? 0 : W < 1500 ? 1 : 2;
    }
    var T = gd.bd,
      b =
        !this.ds ||
        this.Xz() ||
        !this.a.Nf ||
        lw.eo() ||
        J.s7() == bA.Cs("eQLZRRM?8a4=8");
    if (!b && gd.gY()) {
      if (this.amZ == null) this.amZ = Math.random() < 0.5;
      b = this.amZ;
    }
    if (gd.gY()) {
      var c = window.location.ancestorOrigins;
      if (c == null) c = [document.referrer];
      console.log(c);
    }
    if (b) {
      if (T != 0 && J.rU[m] && this.ds) J.rU[m]();
    } else {
      if (T == 0) q -= 84;
      else j -= T == 1 ? 180 : 320;
    }
    iS.prototype.X3.call(this, j, q);
    if (b && this.kj) {
      var a = T == 0 ? G[bA.gj] : this._;
      a[bA.a5Y](this.eC);
      J.dI(this.eC);
      this.kj = !1;
    }
    if (!b && !this.kj) {
      var f = function (i) {
        J.rU[bA.pc](
          function () {
            var x = new fd(_.E.c);
            x.data = { R: _.Y.s0, kO: bA.Cs("QZXZLFV") };
            if (ei == 0 && gd.mF() && !lw.eo()) this.k(x);
          }.bind(this),
          14720 + Math.random() * 46351
        );
        if (Math.random() < 0.002) {
          if (ei == 0 && gd.mF()) lw.event("gota_0");
        }
        if (ei == 0 && i) J.rU.___a = !0;
        this.aeD(j, q);
        var a = T == 0 ? G[bA.gj] : this._;
        a.appendChild(this.eC);
        this.eC[bA.OB](
          n,
          J.Cs("_MMJLNDfKCAg") +
            (T == 0 ? 10 : 10) +
            J.Cs("_d$ebOS?I:==Ba-+# }$M")
        );
        this.eC[n][J.Cs("_MMJLND&<:E")] = (T == 0 ? 0 : 19) + J.Cs("_d");
        this.eC[n][J.Cs("i5WJHX")] = T == 0 ? 0 : 1;
      }.bind(this);
      function U() {
        gd.ax2(f);
      }
      setTimeout(U, 2800);
      this.kj = !0;
    }
    if (J.JO(this.BC._)) Z += 31;
    if (J.JO(this.$O._)) Z += 32;
    this.n3.aB_ = this.a.Nf && this.ds;
    this.n3.X3(j, Z);
    var h = q - Z,
      u = J.Cs("_d");
    this.eC[n][bA.ay1] = (T == 0 ? 100 >>> 1 : q - 11) + u;
    this.eC[n][bA.agi] = (T == 0 ? j : 6 * Math.pow(10, 2)) + u;
    if (J.JO(this.SX._)) this.SX.X3(j, h);
    this.Ik.X3(j, h);
    this.nF.X3(j - this.SX.yv() - this.Ik.yv(), h);
  };
  ll.prototype.aeD = function (j, q) {
    var m = function () {
      var n = new fd(_.E.c);
      n.data = { R: _.Y.s0, kO: "account" };
      this.k(n);
    }.bind(this);
    gd.atr(j, q, this.eC, m);
  };
  ll.prototype.a5R = function (j) {
    console.log("systemCopy");
  };
  ll.prototype.a4X = function (j) {
    if (J.mC()) return;
    console.log("systemPaste");
    if (!j.clipboardData) return;
    var q = j.target.tagName.toLowerCase(),
      m = j.clipboardData.items;
    if (m == null) return;
    var n = this.a14.bind(this);
    for (var y = 0; y < m.length; y++) {
      var G = m[y],
        W = G.getAsFile();
      if (G.type.indexOf("image") != -1) {
        if (W.size == this.a.a2g) return;
        this.a.a2g = W.size;
        if (W) {
          W.name = "image.png";
          this.bj.MP([W], n);
        }
      }
    }
  };
  ll.prototype.a14 = function (j, q) {
    var m = { buffer: j, H: q },
      n = this.a;
    if (J.mC()) {
      var G = this.a1J,
        W = G.HA;
      if (W.r == q.r && W.$ == q.$) {
        m.H = W;
        m.Zz = G.Zz;
      }
    } else {
      if (n.kJ) {
        var k = new fd(_.E.w, !0);
        k.l = L.cJ;
        k.data = { R: "h_stepbck" };
        this.k(k);
      }
    }
    n.kJ = m;
    var k = new fd(_.E.c, !0);
    k.data = { R: _.Y.YV, a4$: !0 };
    this.k(k);
  };
  ll.prototype.ar2 = function () {
    if (this.AV.BS() != null) alert(g$.get([15, 7, 8]));
    else alert("Escape or Confirm the current action (in the top menu).");
  };
  ll.prototype.BT = function (j) {
    var q = this.WM();
    if (q == null) {
      alert(g$.get([15, 7, 7]));
      return;
    }
    var m = j.l == L.C9 || j.l == L.R2;
    if (this.AV.bx() && j.XE != !0 && !m) {
      this.ar2();
      return;
    }
    var n = this.Z,
      G = this.a.RW,
      W = j.l;
    if (W == L.G_ && G == L.MD) W = L.MD;
    if (
      G != W &&
      n.map[G].l.bx() &&
      !m &&
      !((G == L.Bb || G == L.v7 || G == L.Oi) && W == L.b_)
    ) {
      console.log("disabling", G);
      n.map[G].l.disable(q, this, this.a, this.NW);
    }
    if (W != L.C9 && W != L.R2) q.A$(!0);
    var k = this.Z.map[W].l;
    k.BT(j.data, this, q, this.NW, this.a);
  };
  ll.prototype.aHo = function (j) {
    var q = this.a;
    if (j.data.cV != !0)
      jw.a7E({ _D: j.data._D, SC: j.data.SC }, this, q, this.WM());
    var m = q.qZ,
      n = q.rq;
    if (m == null || j.data.aar) return;
    var G = { azc: !1, v5: "Step", aj4: 0, f: !0, exp: !1, _D: j.data._D };
    if (m[2] == null) m[2] = n[m[0]].yJ[m[1]].yJ.length - 1;
    if (j.data.SC) G.SC = j.data.SC;
    n[m[0]].yJ[m[1]].yJ.splice(m[2] + 1, 0, G);
    m[2]++;
    this.o7(fG.w);
  };
  ll.prototype.$F = function (j) {
    if (this.acm) {
      j.data = 0;
      return j.e;
    }
    var q = j.data && j.data.R == _.Y.s0 && j.data.kO == bA.aw4,
      m = j.data && (j.data.R == _.Y.wQ || j.data.R == _.Y.Ks);
    if (J.rU.__csrf && !lw.eo() && !q && !m) {
      var n = bA.Cs(
        '?XNGVEhYC9EM@;D5\'+05,~")ggs|"x7YOYOJa"KGI8>AKF3/=/ y1!tomv((xeeoTO[cB]+J:?8A6E$# ),"%-2)EdajmcfpkJZbTE?VH@>SG&0#;+z~~mm&ShlnfdVOx'
      );
      alert(n, 5e3);
      return;
    }
    iS.prototype.$F.call(this, j);
    var G = j.data.R;
    if (G == _.Y.ND) {
      var W = this.WM();
      Speaker.ui(W, this.a.ayy[0]);
      if (W.Y.rN) Speaker.pause();
      else {
        var k = W.I.RI();
        Speaker.play(W.add.prvw == 1 ? W.Y.ZY : AU.a5k(-W.I.g.x * k.Sd, W));
      }
      W.Y.rN = !W.Y.rN;
      W._F = !0;
    }
    if (G == _.Y.as5) {
      var W = this.WM();
      Speaker.ui(W, this.a.ayy[0]);
      Speaker.afg(j.data.K, W.U[W.J[0]].Y.yY);
    }
    if (G == _.Y.k0)
      jw.aDk(this.WM(), this.a.rq, j.data.eQ[0], j.data.eQ[1], this);
    if (G == _.Y.aoP) {
      this.adj(j.data.apU);
    }
    if (G == _.Y.aF6) {
      this.T();
      this.QG();
    }
    if (G == _.Y.ja) this.QG();
    if (G == _.Y.XJ)
      if (this.a.qR) {
        this.a.qR.prompt();
        this.a.qR = null;
      }
    if (G == _.Y.t5) this.nF.eP(j.data.$U, j.data.push);
    if (G == _.Y.aFL) this.nF.aIT();
    if (G == _.Y.aCh) this.de(null, j.data.dir);
    if (G == _.Y.BV)
      this.nF.dB(this.mS.indexOf(j.data.an ? j.data.an : this.WM()));
    if (G == _.Y.VU) {
      var T = navigator.keyboard;
      if (j.data.CQ && T) T.lock(["Escape"]);
      if (j.data.CQ && document.fullscreenEnabled) {
        if (document.fullscreenElement) document.exitFullscreen();
        else document.body.requestFullscreen();
      } else if (j.data.CQ) document.body.webkitRequestFullScreen();
      if (j.data.K != null) this.cZ(j.data.K);
    }
    if (G == _.Y.aIe) {
      if (j.data.qT) this.NW.B2(j.data.aya);
      else this.NW.U5(j.data.aya);
      this.uY(j.data.qT ? "down" : "up");
    }
    if (G == _.Y.aEw) {
      var b = j.data.K;
      this.Ik.aa2([b]);
      this.T();
    }
    if (G == _.Y.Gg) {
      var W = this.WM(),
        c = W.U[W.J[0]],
        a = new hk(0, 0, W.r, W.$),
        f = W.h ? W.h.H.P() : a,
        U = B.j(f.C() * 4);
      B.M4(W.ht(), a, U, f);
      var Z = fb.Rh() + "-d71c-11e5-b1ae-a548a96e5f9f",
        h = new fd(_.E.c, !0);
      if (j.data.rw == 0) {
        var u = { name: "Default/" + W.name.split(".")[0], id: Z, Og: [U, f] };
        h.data = { R: _.Y.fh, vt: "add", rw: fG.OF, Jb: [u] };
        this.k(h);
      }
      if (j.data.rw == 1) {
        var i = B.j(f.C() * 4);
        i.fill(255);
        B.G.Jg("norm", U, f, i, f, f, 1);
        var x = B.j(f.C());
        B.P2(i, x);
        B.BR(x);
        var X = B.El(x, f);
        if (X.jG()) X = f;
        var $ = B.j(X.C());
        B.sN(x, f, $, X);
        X.x = X.y = 0;
        var H = { HA: X, id: Z, Og: [$, X] },
          C = fc.vM(Z),
          l = C.Brsh.v;
        l.Dmtr.v.val = Math.max(X.r, X.$);
        l.Spcn.v.val = 10;
        h.data = {
          R: _.Y.fh,
          vt: "add",
          rw: fG.cS,
          Jb: { list: [{ t: "Objc", v: C }], cd: [H], cs: [] },
        };
        this.k(h);
        h.data = { R: _.Y.fh, rw: fG.ww, YP: C };
        this.k(h);
      }
      if (j.data.rw == 2) {
        var v = W.ac(),
          K = v[0][v[1][0]],
          S = { q6: "Default/" + c.getName(), So: Z, D: K.add.vmsk.P().D },
          o = B.z.zZ(S.D),
          V = new k$(o.r, 0, 0, o.$, o.x, o.y);
        V.BR();
        B.z.La(S.D, V);
        o.x = o.y = 0;
        S.gX = o.P();
        h.data = { R: _.Y.fh, vt: "add", rw: fG.lG, Jb: [S] };
        this.k(h);
      }
    }
    if (G == _.Y.mw) this.bj.Tv(j.data.rw);
    if (G == _.Y.z1) {
      var P = j.data.aLy,
        z = j.data.OD;
      if (P != !0 && z != !0 && this._w("open")) return;
      var E = this.nF.qw();
      if (z) E = -1 - E;
      this.bj.ats(P || z ? E : null, j.data.ard, j.data.od);
    }
    if (G == _.Y.$e) {
      var A = fG.Zu[j.data.ap2],
        U = this.aJ0(j.data.ap2, j.data.Lv);
      jc.save(U, A[1] + "." + A[0]);
    }
    if (G == _.Y.g3) {
      var N = this.a.Fd,
        Q = j.data.ah1;
      if (N.jv && !N.a07 && !Q) {
        N.aq5 = window.confirm(
          'Load "' +
            j.data.eA +
            '" also next time you use the editor?\nManage it in Edit - Local Storage.'
        );
        N.a07 = !0;
      }
      if ((N.aq5 || Q) && N.jv) {
        N.CK[j.data.eA] = j.data.Ul;
        var h = new fd(_.E.c);
        h.data = { R: _.Y.fh, rw: fG.SW };
        this.k(h);
      }
    }
    if (G == _.Y.ayA) {
      var W = this.WM(),
        d = "<!DOCTYPE HTML>";
      if (W == null) return;
      var e = gh.Rq(W.ht().buffer, W.r, W.$),
        Y = window.open();
      d +=
        "<head><script>setTimeout(function() {window.print();}, 10);</script></head>";
      d += '<body><img src="' + e + '" /></body>';
      d += "</html>";
      Y.document.write(d);
    }
    if (G == _.Y.KC) {
      if (this._w("publishOnline")) return;
      var I = j.data.hr,
        O = I == "jpg" || I == "png",
        W = this.WM();
      if (W == null) return;
      if (!O && W.uF) return;
      var n =
        "Your " +
        (O ? "picture" : "document") +
        " will be published at " +
        (O ? "Imgur" : ["Photo", "Vector"][ei] + "pea") +
        ".com under a public URL (known only to you). Proceed?";
      if (!O) n += " We guarantee 6+ months of storage.";
      var s = j.data.w4 ? !0 : confirm(n);
      if (s) {
        if (I == "psd") {
          var h = new fd(_.E.w, !0);
          h.l = L.W1;
          h.data = { R: R.Ll };
          this.k(h);
          var p = new hk(0, 0, W.r, W.$);
          for (var y = 0; y < W.U.length; y++) {
            var c = W.U[y];
            if (
              c.H.jG() ||
              c.D1() ||
              c.ex() ||
              c.EC() ||
              c.ql() ||
              c.add.TySh ||
              c.add.vmsk ||
              c.add.SoLd
            )
              continue;
            var F = p.TM(c.H);
            if (!F.Lg(c.H) && !F.jG()) {
              var g = B.j(F.C() * 4);
              B.M4(c.buffer, c.H, g, F);
              c.buffer = g;
              c.H = F;
            }
            if (!B.QM(c.buffer, c.H.r, c.H.$)) continue;
            var w = c.Iw(),
              r = c.yA,
              eQ = c.hz,
              t = c.Yx;
            c.xg(!0);
            c.yA = 255;
            c.hz = "norm";
            W.J = [y];
            h.data = { R: R.k1, hr: "jpg" };
            this.k(h);
            var dq = W.U[y];
            c.xg(w);
            dq.xg(w);
            c.yA = dq.yA = r;
            (c.hz = dq.hz = eQ), (c.Yx = dq.Yx = t);
          }
        }
        if (W.XU) {
          W.iY();
        }
        var D = W.r,
          ha = W.$,
          am = j.data.a98,
          k4;
        if (am)
          while (Math.max(D, ha) > am) {
            D = D >>> 1;
            ha = ha >>> 1;
          }
        console.log(D, ha);
        if (I == "psd") k4 = gh.Wo(W, "psd", 0, 0, [!0, !0, !0, !1, !0]);
        else if (I == "ai") k4 = gh.Wo(W, "ai");
        else if (I == "png") k4 = gh.Wo(W, "png", D, ha);
        else {
          var aA = gh.Wo(W, "png", D, ha),
            ex = gh.Wo(W, "jpg", D, ha);
          k4 = aA.byteLength < ex.byteLength ? aA : ex;
        }
        var ac = j.data.w4;
        if (ac == null)
          ac = function (i7) {
            var gT = O
                ? i7
                : "https://www." + ["photo", "vector"][ei] + "pea.com/#i" + i7,
              h = new fd(_.E.c);
            h.data = { R: _.Y.s0, kO: "linkview", a13: gT };
            this.k(h);
            lw.event("share_" + I);
          }.bind(this);
        if (O) jc.aAB(k4, ac);
        else this.bj.aCL(k4, W.name, ac, "psdshared");
      }
    }
    if (G == _.Y.ON) {
      var W = this.WM(),
        eJ = !1;
      if (W == null) return;
      if (W.XU) {
        W.iY();
      }
      var h$ = this.kG();
      if (h$.bx()) h$.disable(W, this, this.a, this.NW);
      if (j.data.aKX) {
        if (!this.PB(W, j.data.aKX)) return;
        var U = a8.aj$(W, j.data.aKX, this.a);
        this.vs(U);
        eJ = !0;
      } else if (W.ps) {
        if (this.mS.indexOf(W.ps.xw) != -1) {
          var U = new Uint8Array(gh.lj("PSD").Ev(W, null, null, [!0, !1])),
            h = new fd(_.E.w, !0);
          h.data = { R: R.wm, fg: W.ps.xw, data: U, id: W.ps.a91, Sh: W.name };
          h.l = L.W1;
          this.k(h);
          alert("Smart Object updated");
        }
        eJ = !0;
      } else if (this._w("save")) {
        eJ = !0;
        if (gd.wn()) alert("File Saved.");
        if (gd.wn() && !lw.eo()) {
          var h = new fd(_.E.c, !0),
            n = bA.Cs(
              '+\\hYWYI?sU=79-Q*$% }\'I>ns> j[i[Z\\w\\TRxkZsn261ds-#{+y=.nwsuh`^hrcbZWSSRDF<QD?IaQ"&!TOr 9E[jrcwEdTYR[Pk\\SFIP1,6D] ;,*,{qF(foiii.Z\\SMWKS]XJ4B4/;`B||$u y-(mtdb6w"~ewJSNlK@DF><.\'&/*H*(q" z325.-,$"!~v{tlnilhb\\Ibs$)(,w/NjingoilbUmbQYJ^+\'zRrxrin\\L{U4!!+}xg~pa[rQZKaMOEZs6QB@B2(\\>|&   Dpricmaisn`JXJEQvX33:,60C>$+zxL.85{.`id#aVZ\\TRD=<E@^@>(861IHJG??::6/32*\'$~~z|t_x%698/Hw(0)zyx0ayvp=-\\6t,w(wV!_\\u;=GM><>.$X:*w(!6goidh1WV\\_MWc|wO?75<I:8:* T6)wo|m<7,}1rXRSNLUw<MIAiMH384"}6  |z\'evrjhaSh*%YRUO=<SD@.dF+,#G|"p!|4pp1{vhj^P%fXH@>Ea==]Ha\\L1!xv}ID4fhr7'
            ),
            da = bA.Cs(";QJXQ_*II9"),
            bb = function () {
              h.data = { R: _.Y.s0, kO: "account" };
              this.k(h);
            }.bind(this);
          h.data = { R: _.Y.s0, kO: bA.H3, K: n, ml: bb, aio: da, ahp: !0 };
          this.k(h);
        }
      } else if (W.Co) {
        a8.aHk(W);
        eJ = !0;
      } else if (W.qu) {
        if (W.qu[0] != 0 && !navigator.onLine) {
          alert("Go online to save this file.");
          return;
        }
        var gb = a8.am3(W);
        if (gb == 1) {
          alert("Already saving another file. Try again later.");
          return;
        }
        eJ = !0;
      } else if (W.vt && W.vt.wS) {
        if (!this.PB(W, W.vt.wS.formats)) return;
        this.bj.a1B(W, this.a, a8.a88);
        eJ = !0;
      } else if (
        W.ff &&
        ((ei == 0 && gh.Kd.indexOf(W.tg) != -1) ||
          (ei == 1 && gh.apB.indexOf(W.tg) != -1) ||
          (ei == 2 && W.tg == "mid"))
      ) {
        this.a0T();
        return;
      }
      if (eJ) {
        W.IZ();
      } else {
        var h = new fd(_.E.c, !0);
        h.data = { R: _.Y.Ks };
        this.k(h);
      }
    }
    if (G == _.Y.Ks) {
      if (!this.a.Xi) {
        alert("function is disabled");
        return;
      }
      if (this._w("saveAsPSD")) return;
      var W = this.WM();
      if (W == null) return;
      if (!this.PB(W)) return;
      var h = new fd(_.E.w, !0);
      h.data = { R: R.Ll };
      h.l = L.W1;
      this.k(h);
      var fM = W.U.length,
        kS = "Your document has " + W.U.length + " layers.";
      if (fM > 1 << 15) {
        alert(kS + " PSD files can have up to " + (1 << 15) + " layers.", 5e3);
        return;
      }
      if (
        fM > 8e3 &&
        !confirm(
          kS +
            " Adobe Photoshop has a bug and crashes, when a PSD has more than 8000 layers. Do you want to proceed?"
        )
      )
        return;
      var cY = { YF: [] };
      W.root.ail([], cY);
      var cS = cY.YF;
      if (
        cS.length > 11 &&
        !confirm(
          "One layer is nested " +
            (cS.length - 1) +
            " times." +
            " Adobe Photoshop crashes, when a layer in a PSD is nested more than 10 times. Do you want to proceed?\n\nLongest nesting: " +
            cS.join(" \uD83E\uDC1A ") +
            "."
        )
      )
        return;
      var k3 = W.name.split(".");
      k3.pop();
      k3 = k3.join(".") + [".psd", ".ai", ".mid"][ei];
      var di = window.showSaveFilePicker;
      if (window.parent != window) di = null;
      if (di && !j.data.aEt) {
        var a7 = {
          suggestedName: k3,
          types: [
            {
              description: ["PSD", "AI", "MID"][ei] + " Files",
              accept: [
                { "image/psd": [".p" + "sd"] },
                { "application/pdf": [".ai"] },
                { "audio/midi": [".mid"] },
              ].APP,
            },
          ],
        };
        di(a7).then(
          function (j) {
            W.ff = j;
            W.name = j.name;
            W.Ls = !0;
            W.tg = "psd";
            this.a0T();
          }.bind(this)
        );
        return;
      }
      var b0 = window.gtag;
      if (W.J_() && b0)
        b0("event", W.tg + ":" + J.v9(lw.eo() ? "\"'|('61" : "w'| "), {
          event_category: "Formats",
        });
      if (W.XU) {
        W.iY();
      }
      var e1 = ["PSD", "AI", "MID"][ei],
        l2 = gh.lj(e1);
      lw.event("efmt_" + e1.toLowerCase(), 0.1);
      if (j.data.aEt) {
        var U = W.tg == "psd" ? l2.Ev(W) : a8.bP(W, W.tg, this.a);
        this.aIw(U, W, this);
      } else {
        var U = l2.Ev(W);
        jc.save(U, k3);
        W.IZ(!0);
      }
    }
    if (G == _.Y.p8) window.open(j.data.link, "_blank");
    if (G == _.Y.Ys) {
      if (this.AV.bx()) {
        this.ar2();
        return;
      }
      var W = this.WM(),
        c = W.U[W.J[0]],
        b = W.dp(c.add.SoLd.Idnt.v);
      for (var y = 0; y < this.mS.length; y++) {
        var kL = this.mS[y].ps;
        if (kL != null && kL.a91 == b.ys && kL.xw == W) {
          this.nF.fc(y);
          return;
        }
      }
      jc.bZ(
        { name: b.Sh, ps: { a91: c.add.SoLd.Idnt.v, xw: W } },
        b.raw.buffer,
        this
      );
    }
    if (G == _.Y.axr) {
      var W = this.WM(),
        c = W.U[W.J[0]],
        b = W.dp(c.add.SoLd.Idnt.v);
      jc.save(b.raw.buffer, b.Sh);
    }
    if (G == _.Y.aDA) {
      console.log(j.data);
      jc.bZ(
        { name: j.data.qu[1].split("/").pop(), qu: j.data.qu },
        j.data.py,
        this
      );
    }
    if (G == _.Y.a1T) {
      var W = this.WM();
      W.qu = j.data.qu;
      W.name = W.qu[1].split("/").pop();
      var h = new fd(_.E.c);
      h.data = { R: _.Y.ON };
      this.k(h);
    }
    if (G == _.Y.rE) {
      this.aHO();
    }
    if (G == _.Y.sp) {
      this.aIs(j.data.eN, j.data.le, j.data.Xc);
    }
    if (G == _.Y.YV) {
      this.ahC(j.data.a4$, j.data.azG, j.data.Xc);
    }
    if (G == _.Y.axH) {
      var es = j.data.K;
      if (this.a.RW == L.G_ && this.kG().bx()) {
        var h = new fd(_.E.w, !0);
        h.l = L.G_;
        h.data = { R: "insertText", K: es };
        this.k(h);
        return;
      }
      if (es.startsWith("ncb;")) {
        var h = new fd(_.E.w, !0);
        h.l = L.Lx;
        h.data = {
          R: "append",
          ER: "Paste Notes",
          av8: JSON.parse(es.slice(4)),
        };
        this.k(h);
      } else if (es.startsWith("vcb;")) {
        var kR = JSON.parse(es.slice(4));
        kR[0] = hR.azR(kR[0]);
        var h = new fd(_.E.w, !0);
        h.l = L.Nj;
        h.data = { R: "append", ER: "Paste Paths", av8: kR };
        this.k(h);
      } else if (es.startsWith("lrs;")) {
        var eH = es.split(";"),
          cZ = this.mS[parseInt(eH[1])];
        if (cZ == null) return;
        var ga = this.WM(),
          fi = cZ.J;
        cZ.J = JSON.parse(eH[2]);
        var go = cZ.iG(null, cZ != ga);
        cZ.J = fi;
        var h = new fd(_.E.w, !0);
        h.data = { R: R.Cd, U: go, xw: cZ, bC: ga };
        h.l = L.W1;
        this.k(h);
      } else if (es.startsWith("<!--") || es.startsWith("<svg")) {
        var iz = M.Nh(es),
          i5 = gh.lj("svg"),
          a = new fb("image.p" + "sd");
        i5.LN(iz.buffer, a);
        if (this.mS.length != 0) {
          var aI = a.U;
          if (
            aI.length == 3 &&
            aI[0].getName() == "</Layer group>" &&
            aI[2].D1()
          )
            aI = [aI[1]];
          var h = new fd(_.E.w, !0);
          h.l = L.W1;
          h.data = { R: R.Cd, U: aI, xw: a, bC: this.WM() };
          this.k(h);
        } else this.a6P(a);
      }
    }
    if (G == _.Y.D4) {
      iv.i2(j.data.dR, this);
    }
    if (G == _.Y.a8) {
      if (window.parent != window) window.parent.postMessage(j.data.rw, "*");
      this.Ik.XB(j.data.rw);
    }
    if (G == _.Y.UN) {
      var bs = parseFloat(j.data.kO);
      if (this.a.z6.indexOf(bs) == -1) {
        var h = new fd(_.E.c, !0);
        h.data = { R: _.Y.fh, rw: fG.lr, K: bs, vt: "add" };
        this.k(h);
      }
      this.Ik.ada(j.data.kO);
    }
    if (G == _.Y.b9) {
      this.Bv.a8z(this.WM(), this.a);
    }
    if (G == _.Y.s0) {
      var k2 =
        "open_from_url openFromURL camera takePic templates showTemplates newproject new eassets exportLayers".split(
          " "
        );
      for (var y = 0; y < k2.length; y += 2)
        if (j.data.kO == k2[y] && this._w(k2[y + 1])) return;
      if (!this.a.Xi && j.data.window == "saveforweb") {
        alert("function is disabled");
        return;
      }
      this.AV.alk(j.data.kO, this.WM(), j.data, this, this.NW);
    }
    if (G == _.Y.xk) {
      var jG = this.a.ZT.exportAs;
      if (jG) this.vs(j.data.data);
      else jc.save(j.data.data, j.data.name);
    }
    if (G == _.Y.ED) {
      if (!this.AV.bx() || j.XE) this.a6P(j.data.fg);
    }
    if (G == _.Y.S3) {
      if (ei != 0) {
        var e1 = gh.Qa(j.data.fg);
        if ("jpg png tiff bmp psd tga".split(" ").indexOf(e1) == -1) {
          alert("Only raster images can be inserted into Vectorpea documents.");
          return;
        }
      }
      this.nF.fc(j.data.target);
      var h = new fd(_.E.w, !0);
      h.data = { R: R.YK, fg: j.data.fg, Ps: j.data.Ps, lR: j.data.lR };
      h.l = L.W1;
      this.k(h);
      this.yx(L.Fg);
    }
    if (G == _.Y.aJV) {
      fS.tx = !fS.tx;
      if (this.mS.length > 0) this.WM().gF();
    }
    if (G == _.Y.amg) {
      var eW = lw.PZ();
      if (ei < 2 && eW != null && eW.globals != null) this.Rm(eW.globals);
      this.Ue();
    }
    if (G == _.Y.px) {
      this.bj.MP(j.data.data, null, j.data.sQ, j.data.rX, j.data.akF);
    }
    if (G == _.Y.UK) {
      var gc = this.kG();
      if (!this.AV.BS() != null) this.yx(j.data.l, j.data.xB);
      var k1 = this.kG();
      if (k1 != gc && j.data.ay8)
        k1.oo(this.WM(), this, this.a, this.NW, this.JD);
    }
    if (G == _.Y.xQ) {
      if (this.Z.aaP) this.yx(this.Z.aaP);
    }
    if (G == _.Y.Vt) {
      var ke = this.Z.map[j.data.l].l,
        W = this.WM();
      ke.uS(j.data, this, W, this.NW, this.a);
      if (W) W.qB = !0;
      this.ae1();
    }
    if (G == _.Y.vv) {
      var jh = this.Z.map[j.data.l];
      this.a8D(jh);
      jh.Qy.V5(j.data);
    }
    if (G == _.Y.fh) {
      var W = this.WM(),
        cE,
        cy = !(W && W.J.length != 0 && W.U[W.J[0]].add.TySh),
        hl = j.data.rw,
        c2 = j.data.Jb,
        f9 = this.a;
      if (j.data.vt == "set") {
        var k1 = L.Rt[c2[1].classID];
        if (f9.RW != k1) this.yx(k1);
        this.Z.map[k1].Qy.XH(c2, f9);
      }
      if (j.data.vt == "add") {
        var A = fG.Zu[hl];
        if (hl == fG.lr) {
          f9.z6.push(j.data.K);
          f9.z6.sort(function (i7, gT) {
            return i7 - gT;
          });
        } else if (hl == fG.aK8) {
          f9.ayy.push(j.data.Jb);
        } else if (A == null) {
          if (c2) f9.HS.agI(c2, j.data.avC);
          if (W) W._F = !0;
        } else {
          var hu = this.GL(hl);
          if (hl == fG.cS) {
            hu.cd = hu.cd.concat(c2.cd);
            hu.cs = hu.cs.concat(c2.cs);
            hu = hu.list;
            c2 = c2.list;
          }
          if (hl == fG.S0 && W) {
            for (var y = 0; y < c2.length; y++) {
              var le = c2[y].yL.Lefx;
              if (le) dS.axW(le, W, f9.wP);
            }
          }
          if (hl == fG.D$ && c2 == null) {
            var a = this.Z.map[f9.RW].Qy.iN();
            if (a == null) return;
            c2 = [a];
          }
          if (fG.Ml[hl] && c2[0][0] == "_all_") c2 = c2[0][2];
          for (var y = 0; y < c2.length; y++) hu.push(c2[y]);
          if (hl == fG.lG) {
            var iJ = {};
            for (var y = 0; y < hu.length; y++) {
              var dZ = hu[y].q6;
              while (iJ[dZ] != null) dZ = hu[y].q6 = dZ + "X";
              iJ[dZ] = !0;
            }
          }
          if (j.data.avC != !0)
            if (
              hu.length != c2.length ||
              hl == fG.Ns ||
              hl == fG.S0 ||
              hl == fG.gP ||
              hl == fG.w
            )
              alert(g$.get(A[3]) + " " + g$.get([23, 1]) + ".");
        }
      }
      if (j.data.vt == "del") {
        if (hl == fG.lr) {
          f9.z6.splice(f9.z6.indexOf(j.data.K), 1);
        } else {
          var A = fG.Zu[hl],
            kd = j.data.Lv,
            hu = this.GL(hl);
          if (hl == fG.cS) hu = hu.list;
          for (var y = 0; y < kd.length; y++) hu[kd[y]] = null;
          for (var y = 0; y < hu.length; y++)
            if (hu[y] == null) {
              hu.splice(y, 1);
              y--;
            }
          alert(g$.get(A[3]) + " deleted.");
        }
      }
      if (j.data.vt == "rnm") {
        var A = fG.Zu[hl],
          hu = this.GL(hl);
        if (hl == fG.cS) hu = hu.list;
        if (hu[j.data.Lv[0]] == null) return;
        A[2].KX(hu[j.data.Lv[0]], (j.data.ars ? j.data.ars : "") + j.data.K);
      }
      if ((j.data.vt != null || j.data.vt == "mdf") && fG.Ml[hl]) {
        var N = this.a.Fd,
          A = fG.Zu[hl];
        if (N.jv && !gd.gY()) {
          var bC = this.GL(hl),
            ev = be.WD(bC, A[2]);
          N.CK["_all_." + A[0]] = ev.buffer;
          var h = new fd(_.E.c);
          h.data = { R: _.Y.fh, rw: fG.SW };
          this.k(h);
        }
      }
      if (hl == fG.Vx) {
        var ak = j.data.K;
        f9.MJ = ak;
        f9.aBP[ak.pb] = ak.pH;
      }
      if (hl == fG.lF) {
        var ak = j.data.K;
        f9.pk = B.S(ak);
        var gD = eu.sf(ak);
        f9.auW[gD.pb] = gD.pH;
      }
      if (hl == fG.f7) {
        f9.TB = j.data.K;
        var a9 = eu.TB.i4(),
          kk = !0;
        for (var a in a9) if (f9.TB[a] == null) kk = !1;
        if (kk) f9.aGU = B.S(f9.TB);
      }
      if (hl == fG.UQ) {
        f9.sV = j.data.K;
      }
      if (hl == fG.SZ) {
        f9.aw = j.data.K;
      }
      if (hl == fG.R3) {
        f9.Cw = j.data.Cw;
        var kX = f9.Cw.K2.FillColor;
        if (cy && kX) {
          var kc = kX.Values,
            ew = { o: kc[1] * 255, i: kc[2] * 255, X: kc[3] * 255 },
            gS = B.yH(ew);
          if (f9.UP != gS) {
            f9.UP = gS;
            cE = fG.Ru;
          }
        }
      }
      if (hl == fG.ww) {
        var g = B.S(j.data.YP),
          hp = g.useBrushSize;
        if (hp && hp.v) {
          g.Brsh.v.Dmtr.v.val = f9.AU.Kw.Brsh.v.Dmtr.v.val;
          hp.v = !1;
        }
        f9.AU.Kw = g;
        if (g.Nm == null) return;
        var g2 = {
            _D: "select",
            SC: {
              __name: "Select",
              classID: "slct",
              null: {
                t: "obj ",
                v: [
                  {
                    t: "name",
                    v: { classID: "Brsh", val: g.Nm.v.split("/").pop() },
                  },
                ],
              },
            },
          },
          jh = this.kG();
        jh.AS = this;
        jh.track(g2);
      }
      if (hl == fG.Hp) {
        f9.YL = j.data.jt;
      }
      if (hl == fG.BG) {
        var jY = j.data.jt,
          gq = !0,
          c3 = null;
        if (j.data.ahw) {
          jY = f9.Jb.slice(0);
          jY.splice(jY.indexOf(j.data.ahw), 1);
        }
        var he = jY,
          a5 = f9.Jb;
        if (a5.length > he.length) {
          var fA = a5;
          a5 = he;
          he = fA;
          gq = !1;
        }
        for (var y = 0; y < he.length; y++)
          if (a5.indexOf(he[y]) == -1) c3 = he[y];
        jc.ha("act=3&id=" + c3 + "&dif=" + (gq ? 1 : -1));
        alert((gq ? "Resource added." : "Resource removed.") + " " + c3);
        if (!gq) if (f9.an7[c3]) delete f9.an7[c3];
        f9.Jb = jY;
      }
      if (hl == fG.Ru) {
        var g2,
          fa = "Clrs";
        if (j.data._G < 2) {
          var jA = j.data.K,
            kF = j.data._G == 0,
            dn = B.MV.Ia(B.b4(jA));
          if (kF) f9.UP = jA;
          else f9.vH = jA;
          fa = kF ? "FrgC" : "BckC";
          g2 = {
            _D: "set",
            SC: { __name: "Set", classID: "setd", T: { t: "Objc", v: dn } },
          };
        }
        if (j.data._G == 2) {
          var fA = f9.UP;
          f9.UP = f9.vH;
          f9.vH = fA;
          g2 = { _D: "exchange", SC: { __name: "Exchange", classID: "Exch" } };
        }
        if (j.data._G == 3) {
          f9.UP = 0;
          f9.vH = 16777215;
          if (W != null && W.J.length != 0 && W.U[W.J[0]].ma == 1) {
            var fA = f9.UP;
            f9.UP = f9.vH;
            f9.vH = fA;
          }
          g2 = { _D: "reset", SC: { __name: "Reset", classID: "Rset" } };
        }
        if (g2) {
          g2.SC.null = {
            t: "obj ",
            v: [{ t: "prop", v: { classID: "Clr", keyID: fa } }],
          };
          var jh = this.kG();
          jh.AS = this;
          jh.track(g2);
        }
      }
      if (hl == fG.NE) {
        f9.sB = !f9.sB;
        this.QG();
      }
      if (hl == fG.rf) {
        f9.x_ = !f9.x_;
        this.QG();
      }
      var de = f9.q1;
      if (hl == fG.uW) {
        de.hl = !de.hl;
        this.QG();
      }
      if (hl == fG.yt) {
        de.GA = !de.GA;
        this.QG();
      }
      if (hl == fG.EE) {
        de.M3 = !de.M3;
        this.QG();
      }
      if (hl == fG.ZB) {
        de.GX = !de.GX;
        this.QG();
      }
      if (hl == fG.t2) {
        de.HT = !de.HT;
        this.QG();
      }
      if (hl == fG.V2) {
        de.gQ = !de.gQ;
        this.QG();
      }
      if (hl == fG.Tz) {
        f9.q1 = j.data.jt;
        this.QG();
      }
      if (hl == fG.aCJ) {
        f9.m0 = !f9.m0;
        this.QG();
      }
      if (hl == fG.kn) {
        f9.b0[j.data.bn] = !f9.b0[j.data.bn];
        this.QG();
      }
      if (hl == fG.p0) {
        g$.aCW(j.data.lang, this.aAx);
      }
      if (hl == fG.LS) {
        f9.U6 = j.data.U6;
        this.T();
      }
      if (hl == fG.SW && f9.Fd.jv) {
        var ks = f9.Fd.jv
            .transaction(["rsrc"], "readwrite")
            .objectStore("rsrc"),
          fx = { k: "fs0", fset: f9.Fd.CK };
        if (j.data.ans) fx = { k: f9.Fd.id, fset: f9.Fd.qq };
        var hT =
          Object.keys(fx.fset).length == 0 ? ks.delete(fx.k) : ks.put(fx);
        hT.onerror = function (j) {
          console.log(j);
          alert("Storing failed. Browser says: " + j.target.error.message, 7e3);
        };
      }
      this.o7(hl);
      if (cE) this.o7(cE);
    }
  };
  ll.prototype.a0T = function () {
    var j = this.WM();
    console.log(j.YR);
    if (j.YR) return;
    j.YR = !0;
    var q = new fd(_.E.c, !0);
    q.data = { R: _.Y.gu, r8: "Saving ..." };
    this.k(q);
    setTimeout(
      function () {
        var q = new fd(_.E.c, !0);
        q.data = { R: _.Y.Ks, aEt: !0 };
        this.k(q);
      }.bind(this),
      20
    );
  };
  ll.prototype.aIw = function (j, q) {
    q.ff
      .createWritable()
      .then(function (m) {
        m.write(j);
        return m;
      })
      .then(function (m) {
        return m.close();
      })
      .then(
        function (m) {
          q.IZ(q.tg == "psd");
          q.YR = !1;
          var n = new fd(_.E.c, !0);
          n.data = { R: _.Y.dO, r8: "Saving ..." };
          this.k(n);
        }.bind(this)
      )
      .catch(
        function (m) {
          q.YR = !1;
          var n = new fd(_.E.c, !0);
          n.data = { R: _.Y.dO, r8: "Saving ..." };
          this.k(n);
        }.bind(this)
      );
  };
  ll.prototype.afo = function () {
    var j = this.a,
      q = j.Jb,
      m = j.an7;
    for (var y = 0; y < q.length; y++) {
      var n = q[y];
      if (m[n]) continue;
      m[n] = !0;
      this.bj.mA(n, !0);
    }
  };
  ll.prototype.a2H = function () {
    this.T();
    this.QG();
  };
  ll.prototype._w = function (j) {
    var q = this.a.ZT[j];
    if (q) {
      var m = new fd(_.E.c, !0);
      m.data = { R: _.Y.D4, dR: q };
      this.k(m);
    }
    return q != null;
  };
  ll.prototype.PB = function (j, q) {
    var m = !0,
      k = 15;
    if (q) {
      m = !1;
      for (var y = 0; y < q.length; y++)
        if (q[y].startsWith(J.Cs("__M"))) m = !0;
    }
    var n = j.J_() || (j.ps && j.ps.xw.J_());
    if (this.Xz()) n = !1;
    var G = new J.rU[bA.aab](),
      W = (G[J.v9("xy,b-66:")]() & 1) * 60 + G[J.Cs("VQ]3LNRN<G")]();
    if (n && !lw.eo() && W > k && m) {
      var T = J.rU[J.v9("}$z{2*35")][J.v9("y'|!")],
        b = J.Cs(
          'C[hMHT\\GFB6GJ.44>+.(2sq koomg\\beyj;PGS?Ad+sL>6Cpp^7w!|"mwuhkguVQ[iII`SN=9Q>:5?B$2, "w-~oi!ddjhfn|}ePIKOK9DM0>*48;--"/tx{us+'
        );
      b +=
        "\n\n" +
        J.Cs("6Q]eD_-L<A:C8G&%\"+.$'/4ouu qb\\sf\\WQRKSA=U430/:7II:''1&lqy\"") +
        (-W + 120) +
        J.Cs("nYRTXTBMd");
      if (T.indexOf(J.v9("\"|'/-1)(W0?@")) == -1)
        b = g$.get([0, 11 + 6, 3 + 2]);
      J.rU._cwY(b);
      return !1;
    }
    return !0;
  };
  ll.prototype.GL = function (j) {
    var q = this.a,
      m = [
        fG.cS,
        fG.WX,
        fG.im,
        fG.gP,
        fG.OF,
        fG.lG,
        fG.S0,
        fG.Ns,
        fG.w,
        fG.D$,
        fG.Hd,
        fG.yr,
      ],
      n = [
        q.AU,
        q.bu,
        q.QN,
        q.bO,
        q.wP,
        q.Jh,
        q.RU,
        q.ab6,
        q.rq,
        q.Yr,
        q.aic,
        q.asB,
      ];
    return n[m.indexOf(j)];
  };
  ll.prototype.aJ0 = function (j, q) {
    var m = this.GL(j);
    console.log(m);
    if (q) {
      var n = j == fG.cS,
        G = [];
      for (var y = 0; y < q.length; y++) G.push((n ? m.list : m)[q[y]]);
      m = n ? { cs: m.cs, cd: m.cd, list: G } : G;
    }
    if (j == fG.S0) {
      var W = new fb();
      for (var y = 0; y < m.length; y++) {
        var k = m[y].yL.Lefx;
        if (k) dS.aui(k, W, this.a.wP);
      }
      m = { fA: W.add.Patt ? W.add.Patt : [], P_: m };
    }
    if (j == fG.D$) {
      var T = this.a.AU;
      m = { cd: [], cs: [], list: m };
      console.log(m);
    }
    console.log(m);
    var b = fG.Zu[j];
    return b[2].He(m);
  };
  ll.prototype.aHO = function () {
    var j = this.aIs(),
      q = this.WM();
    if (q == null || q.J.length == 0) return;
    var m = q.U[q.J[0]],
      n = new fd(_.E.w);
    if (ei == 2) {
      n.l = L.Lx;
      n.data = { R: "remove", ER: "Cut Notes" };
    } else if (j == 1) {
      n.l = L.Nj;
      n.data = { R: "remove", ER: "Cut Paths" };
    } else {
      n = new fd(_.E.NI);
      n.data = { _D: "delete" };
    }
    this.k(n);
  };
  ll.prototype.aIs = function (j, q, m) {
    if (j == null) j = !1;
    var n = this.a;
    console.log("doCopy", j, q);
    var G = this.WM();
    if (n.RW == L.G_ && this.kG().bx()) {
      var W = new fd(_.E.w, !0);
      W.l = L.G_;
      W.data = { R: "copyText" };
      this.k(W);
      return;
    }
    if (G.J.length == 1 && ei == 2) {
      var k = G.U[G.J[0]].Y;
      if (k.J.length == 0) return;
      var T = [];
      for (var y = 0; y < k.J.length; y++) T.push(k.list[k.J[y]]);
      jc.Ni(new Blob(["ncb;" + JSON.stringify(T)], { type: "text/plain" }));
      return;
    }
    if (G == null || (G.J.length == 0 && !j)) return;
    var b = G.U[q == null ? G.J[0] : q],
      c = G.ac(),
      a = c[0],
      f = c[1],
      U = a[f[0]];
    if (!j && U != null && U.add.vmsk.J.length != 0 && ei == 0) {
      var Z = L.Qc.FT(U.add.vmsk, U.add.vogk);
      if (J.mC()) {
        Z[0] = hR.apA(Z[0]);
        var h = "vcb;" + JSON.stringify(Z);
        jc.Ni(new Blob([h], { type: "text/plain" }));
      } else n.jX = Z;
      return 1;
    } else if (G.h == null) {
      if (J.mC()) {
        var h = "lrs;" + this.mS.indexOf(G) + ";" + JSON.stringify(G.J);
        jc.Ni(new Blob([h], { type: "text/plain" }));
      }
    } else {
      var u, i;
      if (j) {
        var x = new hk(0, 0, G.r, G.$);
        i = x.TM(G.h.H);
        u = B.j(i.C() * 4, G.depth);
        B.M4(G.ht(), x, u, i);
        B.zn(G.h.N, G.h.H, u, i);
      } else if (G.y2.length != 0) {
        i = G.h.H.P();
        u = B.j(i.C() * 4, G.depth);
        var X = G._E[G.y2[0]],
          $ = X.fy(i);
        B.QZ($, u);
        B.ln(G.h.N, u, 3);
      } else {
        var H = b.mr(G, G.h);
        if (H == null) {
          alert("Copied area is empty");
          return;
        }
        u = H.py;
        i = H.H;
      }
      var C = G.I.rO,
        l = C[0] + C[1] + C[2];
      if (l == 1) {
        var v = C.indexOf(1);
        for (var y = 0; y < u.length; y += 4)
          u[y] = u[y + 1] = u[y + 2] = u[y + v];
      }
      var K = new ea(G.r, G.$);
      if (J.mC() && m != !0) {
        var S = gh.lj("PNG").S4(u.buffer, i.r, i.$, G.depth);
        jc.Ni(new Blob([new Uint8Array(S)], { type: "image/png" }));
        this.a1J = { HA: i, Zz: K };
      } else n.kJ = { buffer: u, H: i, Zz: K };
      n.ap$ = i.P();
      n.jX = null;
      var W = new fd(_.E.NI);
      W.data = { _D: "copyEvent", cV: !0 };
      this.k(W);
    }
  };
  ll.prototype.ahC = function (j, q, m) {
    if (q) this.a7s = !0;
    console.log("doPaste");
    var n = this.a,
      G = n.kJ,
      W = this.NW,
      c;
    if (this.mS.length == 0) {
      if (!j && J.mC()) {
        jc.hH(this, null);
        return;
      }
      if (G) {
        var k = gh.wk("image.p" + "sd", [{ data: G.buffer.buffer, Iu: G.H }]),
          T = new fd(_.E.c);
        T.data = { R: _.Y.ED, fg: k };
        this.k(T);
      }
      return;
    }
    var k = this.WM();
    if (n.RW == L.G_ && this.kG().bx()) {
      jc.hH(this, null);
      return;
    }
    var b = k.U[k.J.length == 0 ? k.U.length - 1 : k.J[0]];
    if (n.jX) {
      var a = k.ac(!0),
        f = a[0],
        U = a[1];
      c = f[U[0]];
    }
    var T = new fd(_.E.w, !0);
    if (n.jX != null && c != null) {
      T.l = L.Nj;
      T.data = { R: "append", ER: "Paste Paths", av8: n.jX };
    } else if (!j && J.mC() && m != !0) {
      var Z = navigator.userAgent.toLowerCase();
      jc.hH(this, this.a14.bind(this));
      return;
    } else {
      if (G == null) return;
      if (
        k.Ph(!1) &&
        (k.I.rO.join("") != "111" || k.y2.length != 0 || b.ma > 0 || b.H.jG())
      ) {
        T.l = L.cS;
        T.data = { R: "draw", a0W: !0, ER: [5, 2] };
      } else {
        T.l = L.W1;
        T.data = { R: R.bG, aAC: this.a7s };
        this.a7s = !1;
      }
      T.data.kJ = G;
      if (G.H.x == 0 && G.H.y == 0) {
        var h = k.I.yJ,
          u = k.I.gS(k.r / 2, k.$ / 2),
          i = k.r - G.H.r,
          x = k.$ - G.H.$;
        if (h.QL(u)) {
          var X = k.Tl();
          if (X == -1) {
            G.H.x = i >> 1;
            G.H.y = x >> 1;
          } else {
            var $ = k.U[X].Li();
            G.H.x = Math.floor(($.r - G.H.r) / 2);
            G.H.y = Math.floor(($.$ - G.H.$) / 2);
          }
        } else {
          u = k.I.sb(h.r / 2, h.$ / 2);
          console.log(u);
          G.H.x = Math.max(0, Math.min(i, Math.round(u.x - G.H.r / 2)));
          G.H.y = Math.max(0, Math.min(x, Math.round(u.y - G.H.$ / 2)));
        }
      }
    }
    this.k(T);
    var T = new fd(_.E.NI);
    T.data = { _D: "paste", cV: !0 };
    this.k(T);
  };
  ll.prototype.aFS = function () {
    var j = this.a.HS;
    if (j.adF()) return;
    for (var y = 0; y < this.mS.length; y++) {
      var q = this.mS[y];
      if (!bq.xL(q, j, this)) continue;
      if (q.c4) bq.lV(q, j, this);
      var m = q.add.lnk2;
      if (m)
        for (var n = 0; n < m.length; n++) {
          var G = m[n];
          if (G.c4) L.zl.ZV(q, G.ys, G, G, j);
        }
      if (q.a5H) continue;
      q.a5H = !0;
      if (q.vt && q.vt.apQ) iv.i2(q.vt.apQ, this);
      this.vs();
      var W = new fd(_.E.w);
      W.l = L.b_;
      W.data = { R: "start", aA: "blurbTransform" };
      W.data = { R: "start", aA: "rigidTransform" };
      W.data = { R: "start", aA: "perspectiveWarpTransform" };
      var k = new fd(_.E.c);
      k.data = { R: _.Y.UN, kO: bI.Fb.aDl };
      k.data = {
        R: _.Y.s0,
        kO: "newproject",
        _G: 2,
        Fx: 16711935,
        hr: 2,
        index: [10, 0],
      };
    }
  };
  ll.prototype.o7 = function (j) {
    this.afo();
    var q = this.a,
      m = q.RW,
      T = !1;
    if (j == fG.ww) {
      if (this.Z.map[m].Qy) this.Z.map[m].Qy.yp(q, j);
    } else
      for (var n in this.Z.map) if (this.Z.map[n].Qy) this.Z.map[n].Qy.yp(q, j);
    if (j == fG.uk && ei < 2) {
      if (m != L.G_) this.Z.map[L.G_].l.yp(q, j);
      this.aFS();
    }
    this.nF.yp(q, j);
    this.SX.yp(q, j);
    this.AV.yp(q, j);
    if (ei == 1 && j == fG.f7) {
      var G = new fd(_.E.w, !0);
      G.l = L.W1;
      G.data = { R: R.pl };
      this.k(G);
    } else this.kG().yp(q, j);
    this.Ik.yp(q, j);
    this.BC.yp(q, j);
    if (ei == 1) this.Nl.yp(q, j);
    if (ei == 2) this.T7.yp(q, j);
    if (j == fG.LS || j == fG.HN) {
      cW.a30(q.U6);
      this.update(!0);
    }
    var W = q.Cw,
      k = W.K2.Font;
    if (j == fG.R3 && k != null && W.NJ[k].Name != q.font) {
      q.font = W.NJ[k].Name;
      T = !0;
    }
    if (
      [
        fG.lr,
        fG.Hp,
        fG.BG,
        fG.Ru,
        fG.NE,
        fG.rf,
        fG.Tz,
        fG.EE,
        fG.ZB,
        fG.uW,
        fG.yt,
        fG.t2,
        fG.V2,
        fG.p0,
        fG.LS,
      ].indexOf(j) != -1 ||
      T
    )
      this.ae1();
  };
  ll.prototype.ae1 = function () {
    if (!this.Bt) return;
    var j = [],
      q = this.Z.map;
    for (var m in q) {
      var n = q[m].l;
      if (n.rm && n.rm() != null) j.push(parseInt(m), n.rm());
    }
    var G = this.a,
      W = G.q1,
      k = {};
    if (W.qF != 8421504) k.gc = W.qF;
    if (W.MY != 65535) k.uc = W.MY;
    if (W.If != 33023) k.lc = W.If;
    if (W.y1 != 20) k.gs = parseFloat(W.y1.toFixed(2));
    if (W.XR != 0) k.gv = parseFloat(W.XR.toFixed(2));
    if (W.nL != 1) k.gn = W.nL;
    if (W.lA != 0) k.gu = W.lA;
    if (W.Mt != 0) k.gt = W.Mt;
    if (W.WH != 0) k.ru = W.WH;
    if (W.GX != !1) k.gr = W.GX ? 1 : 0;
    if (W.M3 != !0) k.gd = W.M3 ? 1 : 0;
    if (W.hl != !0) k.se = W.hl ? 1 : 0;
    if (W.GA != !0) k.pa = W.GA ? 1 : 0;
    if (W.HT != !0) k.pg = W.HT ? 1 : 0;
    if (W.gQ != !0) k.sl = W.gQ ? 1 : 0;
    var T = {};
    if (G.UP != 0) T.fc = G.UP;
    if (G.vH != 16777215) T.bc = G.vH;
    if (G.sB != !1) T.ru = G.sB ? 1 : 0;
    if (G.x_ != !0) T.ex = G.x_ ? 1 : 0;
    if (G.YL.length != 0) T.ff = G.YL.join(",");
    if (G.Jb.length != 0) T.rs = G.Jb.join(",");
    if (G.U6 != 1) T.theme = G.U6;
    if (G.Pv != 0) T.co = G.Pv;
    if (G.font != null && G.font != "DejaVuSans") T.fo = G.font;
    var b = bI.aaV(G.z6);
    if (b.length != 0) T.pd = b;
    if (j.length != 0) T.to = j;
    if (g$.Qr() != "en") T.lang = g$.Qr();
    if (Object.keys(k).length != 0) T.ep = k;
    var c = lw.PZ();
    if (c == null) c = {};
    c.globals = T;
    lw.$R(c);
  };
  ll.prototype.cf = function (j) {
    var q = this.NW,
      m = this.JD,
      n = this.a.RW,
      G = this.Z.map[n].l,
      W = null,
      k = !1;
    for (var y = 0; y < this.Z.aax.length; y++) {
      var T = this.Z.aax[y],
        b = !0;
      for (var c = 0; c < T.RP.length; c++) {
        var a = T.RP[c];
        if (!q.M(a)) b = !1;
      }
      if (b && (!T.Vf || !G.bx()) && (T.J7 == null || T.J7.indexOf(n) != -1)) {
        W = T.l;
        k = T.Vf;
        break;
      }
    }
    if ((!m.qT || n == L.Eb || j) && this.Z.xy != W && (W != n || !k)) {
      var f = this.WM();
      if (this.Z.xy != null && W == null)
        this.kG().disable(f, this, this.a, q, !0);
      this.Z.xy = W;
      this.kG().enable(f, this, this.a, q, W != null && W != n);
    }
  };
  ll.prototype.PW = function (j) {
    var q = this.a.RW,
      m = this.WM();
    if (q != null) {
      this.Z.map[q].l.disable(m, this, this.a, this.NW);
    }
  };
  ll.prototype.a8D = function (j) {
    if (j.Qy == null) {
      j.Qy = new j.xu(j.l.id);
      j.Qy.aGH(j.l.id, j.l.af);
      j.Qy.yp(this.a, fG.HN);
      j.Qy.T();
    }
  };
  ll.prototype.yx = function (j, q) {
    for (var y = 0; y < this.mS.length; y++) this.mS[y].A$(!0);
    if (j == L.Fg && this.AV.BS()) return;
    var m = this.WM(),
      n = this.a;
    if (this.Z.map[j].l.xM(m, n, q)) {
      this.PW();
      if (j != n.RW) this.Z.aaP = n.RW ? n.RW : L.Lx;
      n.RW = j;
      this.SX.yx(n.RW);
      var G = this.Z.map[j];
      this.Z.Cj[G.fi] = G.aau;
      this.a8D(G);
      this.$O.amW(ei == 0 ? G.Qy : ei == 1 ? this.Nl : this.T7);
      var W = G.l;
      W.enable(m, this, this.a, this.NW, !1, q);
      if (m) m.qB = !0;
      this.QG();
      this.n3.ajV();
    }
  };
  ll.prototype.kG = function (j) {
    var q = this.Z,
      m = q.MB,
      n = q.xy,
      G = this.a.RW;
    if (m) G = m;
    else if (n && j == null) G = n;
    return q.map[G].l;
  };
  ll.prototype.a6P = function (j) {
    var q = this.a,
      m = this.mS.indexOf(j);
    if (m != -1) {
      this.nF.fc(m);
      return;
    }
    if (this.aMg && (j.vt == null || j.vt.wS == null)) {
      j.vt = { wS: this.aMg };
    }
    if (j.FG == null) {
      j.FG = "local," + this.aHp + "," + j.name;
      this.aHp++;
    }
    j.aAe = Date.now();
    if (ei == 1 && j.add.arts == null) j.aKa();
    if (
      gd.mF() != 0 &&
      !this.aFq &&
      J.rU[J.v9("t$&!'31")].toString().indexOf(J.v9(" u,$4&")) == -1
    ) {
      alert(J.v9("j$--=#66A@5EU`KQaFVjSih\\hpirt2,x&5&+#++A4<8SFOO_FUMQ|"));
      return;
    }
    for (var y = 0; y < j.U.length; y++) {
      var n = j.U[y];
      if (n.add.SoLd != null) {
      }
    }
    var G = j.U.length,
      W = bA.YY(),
      k = Math.PI * (8e3 << 14) + (J.UD(31) ? 20 : 10) * 7e7;
    if (W > k) {
      var G = j.U.length;
      j.U = [];
      return G;
    }
    if (fS.tx) {
      fS.tN(Math.max(j.r, j.$), j.depth);
      for (var y = 0; y < j.U.length; y++) {
        var n = j.U[y];
        if (n.bm()) fS.tN(Math.max(n.H.r, n.H.$));
      }
    }
    j.DB();
    j.l6();
    if (j.ayZ) j.aeK();
    else j.gF();
    j.ayZ = !1;
    this.mS.push(j);
    this.nF.su(new hF(j));
    j.qB = !0;
    j._F = !0;
    this.aFS();
    if (this.axP) this.cZ(1);
    var T = new fd(_.E.w);
    T.l = L.vP;
    T.data = { R: "auto", auF: 2 };
  };
  ll.prototype.WM = function () {
    return this.mS[this.aF$];
  };
  ll.prototype.aiv = function () {
    return this.AV.BS() == null;
  };
  ll.prototype.de = function (j, q) {
    this.PW();
    var m = this.mS.length;
    if (q != null) this.nF.fc((this.nF.qw() + q + m) % m);
    this.aF$ = this.nF.qw();
    var n = this.WM();
    this.BC.LW(n, this.a);
    if (ei == 1) this.Nl.LW(n, this.a);
    if (ei == 2) this.T7.LW(n, this.a);
    this.Ik.Wz(n, this, this.a);
    this.QG();
    if (n) n.qB = !0;
  };
  ll.prototype.a0F = function (j) {
    this.PW();
    var q = this.mS,
      m = q[j.data.N4];
    q.splice(j.data.N4, 1);
    if (q.length == 0) {
      this.de(j);
      var n = fS.l4(),
        G = hF.I4.f6;
      if (n.parentNode) n.parentNode.removeChild(n);
      if (G.parentNode) G.parentNode.removeChild(G);
    }
    this.aj3(m.name);
  };
  ll.prototype.aj3 = function (j) {
    var q = this.a.Fd,
      m = !1;
    if (q.jv == null) return;
    for (var n in q.qq) {
      if (j == null || n == j) {
        delete q.qq[n];
        m = !0;
      }
    }
    if (m) {
      var G = new fd(_.E.c);
      G.data = { R: _.Y.fh, rw: fG.SW, ans: !0 };
      this.k(G);
    }
  };
  ll.prototype.ao8 = function (j) {
    var q = [],
      m = j.data.aFX;
    for (var y = 0; y < m.length; y++) q[y] = this.mS[m[y]];
    this.mS = q;
    this.aF$ = this.nF.qw();
  };
  ll.prototype.asK = function (j) {
    var q = this.nF,
      m = q.alC(),
      n = this.kG(),
      G = this.WM();
    if (m == q.qw() || !n.a3D()) return;
    this.adj(m, n);
  };
  ll.prototype.adj = function (j, q) {
    console.log("dup2doc");
    var m = this.a,
      n = this.nF,
      G = this.WM(),
      W = this.mS[j],
      k,
      T = new fd(_.E.w, !0);
    T.l = L.W1;
    if (G.h == null) {
      T.data = { R: R.Cd, U: G.iG(null, !0), xw: G, bC: W, ayS: q == null };
      this.k(T);
    } else k = G.U[G.J[0]].mr(G, G.h);
    var b = this.JD,
      c = m.sB;
    m.sB = !1;
    b = G.I.sb(b.x, b.y);
    if (q) q.Yg(G, this, m, this.NW);
    n.fc(j);
    if (G.h) {
      T.data = { R: R.bG, kJ: { buffer: k.py, H: k.H } };
      this.k(T);
    }
    b = W.I.gS(b.x, b.y);
    if (q) q.oo(W, this, m, this.NW, b);
    m.sB = c;
  };
  ll.prototype.akL = function (j) {
    var q = this.WM(),
      m = this.NW,
      n = this.a,
      G = j.tZ;
    if (G) this.JD = G;
    if (G) G.y -= n.Pv;
    if (this.a7p == null) this.a7p = 0;
    if (j.action == "multidown") {
      this.pG = j.rC.length;
      this.a7p = Date.now();
    }
    if (j.action == "up" && Date.now() - this.a7p < 100) {
      var W = new fd(_.E.w);
      W.l = L.cJ;
      W.data = { R: this.pG == 2 ? "h_stepbck" : "h_stepfwd" };
      this.k(W);
    }
    if (j.action.startsWith("multi")) {
      var k = new fd(_.E.w, !0);
      k.data = { R: j.action, rC: j.rC };
      k.l = L.R2;
      this.k(k);
      return;
    }
    var T = this.Z.map[L.Lx].l;
    if (
      (j.action == "down" || j.action == "rdown") &&
      n.RW != L.Lx &&
      this.Z.xy != L.Lx &&
      T.abM(q, this, n, m, G)
    ) {
      this.Z.MB = L.Lx;
      T.enable(q, this, n, m, !0);
    }
    if (j.action == "idown") {
      m.B2("Space");
      this.cf(!0);
      j.action = "down";
    }
    var b = this.AV.BS(),
      c = b != null && b.LG() && this.Z.xy == null ? b : this.kG();
    if (j.action == "scroll") {
      var a = !m.M(gn.A8) && j.mI,
        f = m.M(gn.O4);
      if (window.locStor.getItem("__zwh") == "1") f = !f;
      var k = new fd(_.E.w, !0);
      k.data = { R: "scroll", rH: j.rH.P(), tZ: G, ahL: a };
      k.l = f || a ? L.R2 : L.C9;
      this.k(k);
    }
    if (b != null && c != b && this.AV.bx() && c.id != L.C9 && c.id != L.R2)
      return;
    if (j.action == "down") c.oo(q, this, n, m, G);
    if (j.action == "rdown") c.DC(q, this, n, m, G);
    if (j.action == "move") c.C3(q, this, n, m, G);
    if (j.action == "up" || j.action == "iup" || j.action == "cancellast")
      c.H_(q, this, n, m, G, j.action == "cancellast");
    if (j.action == "rup") c.FO(q, this, n, m, G);
    if (j.action == "iup") {
      m.U5("Space");
      this.cf(!0);
    }
    if (j.action == "cancellast") {
      if (
        q &&
        q.history.length != 0 &&
        Date.now() - q.history[q.history.length - 1].aIl < 200
      ) {
        var W = new fd(_.E.w);
        W.l = L.cJ;
        W.data = { R: "h_stepbck" };
        this.k(W);
      }
    }
    var U = this.Ik;
    if (j.action == "down") U.oo(q, this, n, m, G);
    if (j.action == "move") U.C3(q, this, n, m, G);
    if (j.action == "up") U.H_(q, this, n, m, G);
    if (j.action == "down" || j.action == "up") {
      this.cf();
    }
    if (j.action == "down" || j.action == "up" || j.action == "ctx") {
      q.qB = !0;
    }
    if ((j.action == "up" || j.action == "rup") && this.Z.MB) {
      this.Z.MB = null;
      T.disable(q, this, n, m);
    }
    if (q && n.sB) q._F = !0;
  };
  ll.prototype.qx = function (j) {
    var q = this.WM(),
      m = this.JD;
    if (q && this.kG().wr(m, this.NW)) {
      var n = q.I,
        G = n.yJ.r,
        W = n.yJ.$,
        k = 0,
        T = 0,
        b = 16;
      if (m.x < b) k = b - m.x;
      if (m.x > G - b) k = m.x - (G - b);
      if (m.y < b) T = b - m.y;
      if (m.y > W - b) T = m.y - (W - b);
      var c = this.NW.M(gn.X6) ? 8 : 1;
      if ((k != 0 || T != 0) && (q.r * n.k3 > G || q.$ * n.k3 > W)) {
        k = Math.min(5, k * 0.5) * c;
        T = Math.min(5, T * 0.5) * c;
        if (m.x > b) k = -k;
        if (m.y > b) T = -T;
        n.g.x += k;
        n.g.y += T;
        this.akL({ tZ: this.JD, action: "move" });
        q.Ls = !0;
      }
    }
    this.update();
  };
  ll.prototype.update = function (j) {
    var q = this.WM();
    if (q == null) return;
    if (ei != 0) {
      if (q.buffer) throw "e";
    }
    if (q.qB) {
      var m = this.Z.map;
      for (var n in m) {
        if (m[n].l.yc) m[n].l.yc(q, this, this.a, this.NW);
      }
      if (ei == 1) {
        m[L.iR].l.yc(q, this, this.a, this.NW, !0);
      }
    }
    if (q.XU && ei == 0) if (fS.tx) fS.tN(Math.max(q.r, q.$));
    if (q.XU && ei == 0) {
      q.iY();
    }
    if (ei == 2 && q.Y.rN) {
      var G = q.I.RI();
      G.BR();
      q.Y.ZY = Speaker.getTime();
      if (q.add.prvw != 1) q.I.g.x = -AU.a5l(q.Y.ZY, q) * G.Sd;
      q._F = !0;
    }
    var W = q.I,
      k = this.d5,
      T = (this.d5 = Date.now());
    if (q.XU || q.hM || q._F || q.Ls || j || W.QI != W.k3 || !W.l0.Lg(W.g)) {
      var b = W.QI;
      if (W.QI != W.k3) {
        var c = L.Lr.a9M(W.k3, W.QI > W.k3),
          a = 0.12;
        if (W.QI < W.k3 && W.QI < c) W.QI = c;
        if (W.QI > W.k3 && W.QI > c) W.QI = c;
        var f = (Math.abs(W.k3 - c) * (T - k) * 0.001) / a;
        if (W.QI < W.k3) W.QI = Math.min(W.k3, W.QI + f);
        else W.QI = Math.max(W.k3, W.QI - f);
      }
      var U = b == W.k3 ? 0 : (W.QI - W.k3) / (b - W.k3);
      W.l0.x = W.g.x + U * (W.l0.x - W.g.x);
      W.l0.y = W.g.y + U * (W.l0.y - W.g.y);
      this.nF.yp(this.a, null);
      this.nF.Wz(q, this.mS);
    }
    if ((q.XU || q.Ls || q.qB) && (!this.JD.qT || q.hS)) {
      if (q.qB) q.l6();
      this.Ik.Wz(q, this, this.a);
      this.SX.abS(q, this.NW);
      if (ei == 1) this.Nl.Wz(q);
      if (ei == 2) this.T7.Wz(q);
      q.u9 = !1;
    }
    q.hS = !1;
    q.qB = !1;
    q.XU = null;
    q.hM = q._F = q.Ls = !1;
  };
  ll.prototype.Iz = function (j) {
    var q = j.target.tagName.toLowerCase(),
      m = j.target.getAttribute("type"),
      n = gn,
      G = n.Uw(j.code, n.FP);
    if (
      !((q == "input" || q == "select" || q == "button") && n.Uw(j.code, n.da))
    ) {
      if (n.aIZ(j) && q != "select") {
        j.preventDefault();
      }
      this.NW.B2(n.yf(j));
      this.uY("down");
    }
  };
  ll.prototype.Cc = function (j) {
    var q = this.NW;
    if (j.key == " ") q.tG();
    if (gn.Uw(j.code, gn.amy)) q.reset();
    q.U5(gn.yf(j));
    q.ak$(j.getModifierState("CapsLock"));
    var m = j.target.tagName.toLowerCase();
    if (gn.aIZ(j) && m != "select") {
      j.preventDefault();
    }
    this.uY("up");
  };
  ll.prototype.uY = function (j) {
    var q = this.NW,
      m = this.WM(),
      n = m != null && m.J.length != 0;
    if (this.Bv.BS() != null) {
      if (q.M(gn.k9) || q.M(gn.FP)) {
        this.Bv.aqk();
      }
      return;
    }
    this.cf();
    var G = this.PS(gn.A8),
      W = q.M(gn.O4),
      k = q.M(gn.X6);
    if (G && q.M(gn.AQ) && j == "down") {
      var T = new fd(_.E.w),
        b = new fd(_.E.c);
      T.l = L.cJ;
      if (k) {
        T.data = { R: "h_stepfwd" };
      } else {
        T.data = { R: "h_stepbck" };
      }
      if (this.AV.BS() != null && this.AV.BS().bx()) {
      } else this.k(T);
    }
    if (G) {
      var T = new fd(_.E.w),
        c = new fd(_.E.NI),
        b = new fd(_.E.c);
      if (q.M(gn.JC) && q.M(gn.Si)) {
        b.data = { R: _.Y.s0, kO: "storwindow" };
        this.k(b);
      }
      if (!W && j == "down")
        for (var a in eV.keys) {
          var f = eV.keys[a],
            U = !0;
          for (var y = 0; y < f.length; y++) if (!q.M(f[y])) U = !1;
          if (U) {
            T.l = L.vP;
            if (a == "hue2" && k && m.U[m.J[0]].add.SoLd == null)
              T.data = { R: "auto", auF: 3 };
            else T.data = { R: "start", QF: a };
          }
        }
      if (q.M(gn.Y)) {
        if (W) {
          c.data = {
            _D: "selectAllLayers",
            SC: { classID: "null", null: jw.$W("Lyr", !0) },
          };
        } else c.data = L.pI.TP(!0);
      }
      if (q.M(gn.dV)) {
        if (W) b.data = { R: _.Y.s0, kO: "csize" };
        else if (m) b.data = { R: _.Y.sp, eN: k };
      }
      if (q.M(gn.l_) && (m.h || ei == 2)) {
        c.data = L.pI.TP();
      }
      if (q.M(gn.E) && j == "down") {
        if (k) c.data = { _D: "mergeVisible" };
        else if (a_.Ka(m).f)
          c.data = {
            _D: "mergeLayersNew",
            SC: { __name: "Merge Layers", classID: "Mrg2" },
          };
      }
      if (q.M(gn.gM)) {
        if (k && this.a.RW != L.Fg) b.data = { R: _.Y.s0, kO: "afw_fade" };
        else if (W) {
          T.l = L.b_;
          T.data = { R: "applylast" };
        } else b.data = { R: _.Y.b9 };
      }
      if (q.M(gn.Vj)) {
        if (W && m && m.Lu(m.J[0])) {
          T.l = L.W1;
          T.data = { R: R.vu };
        } else {
          T.l = L.W1;
          T.data = { R: R._k, V_: k };
        }
      }
      if (ei == 1 && q.M(gn.bY)) {
        T.l = L.W1;
        T.data = { R: R._k, wp: !0, V_: W };
      }
      if (q.M(gn.jF)) {
        b.data = { R: _.Y.fh, rw: fG.rf };
      }
      if (q.M(gn.JC)) {
        if (k) {
          T.data = null;
          if (W) b.data = { R: _.Y.s0, kO: "finfo" };
          else c.data = { _D: "inverse" };
        } else if (W) b.data = { R: _.Y.s0, kO: "isize" };
      }
      if (q.M(gn.Uv)) {
        c.data = { _D: (k ? "cut" : "copy") + "ToLayer" };
      }
      if (q.M(gn.aj)) {
        b.data = { R: _.Y.s0, kO: "preferences" };
      }
      if (q.M(gn.Jd)) {
        if (k) {
          T.l = L.W1;
          T.data = { R: R.YJ };
        } else if (j == "down") b.data = { R: _.Y.s0, kO: "newproject" };
      }
      if (q.M(gn.pd)) {
        if (W) b.data = { R: _.Y.s0, kO: "storwindow", io: 0 };
        else {
          b.data = { R: _.Y.z1 };
          q.reset();
        }
      }
      if (q.M(gn.cp)) {
        b.data = { R: _.Y.s0, kO: "saveforweb", hr: 3, aoZ: !0 };
      }
      if (q.M(gn.Fb)) {
        b.data = { R: _.Y.fh, rw: fG.NE };
      }
      if (q.M(gn.ng) && j == "down") {
        if (k) {
          if (W) b.data = { R: _.Y.s0, kO: "saveforweb" };
          else b.data = { R: _.Y.Ks };
        } else b.data = { R: _.Y.ON };
      }
      if (q.M(gn.a_)) {
        if (k) {
          T.l = L.W1;
          T.data = { R: R.iq };
          this.k(T);
          T.l = L.Fg;
          T.data = { R: "again" };
        } else b.data = { R: _.Y.UK, l: L.Fg };
      }
      if (q.M(gn.qj)) {
        b.data = { R: _.Y.YV };
      }
      if (q.M(gn.aIr)) {
        this.nF.YO();
      }
      if (q.M(gn.Bi) && m && (m.aLJ() || ei == 2)) {
        b.data = { R: _.Y.rE };
      }
      if (q.M(gn.by) && m) {
        T.l = L.R2;
        T.data = { R: "prvw" };
      }
      if (q.M(gn.Z7) || q.M(gn.UZ)) {
        T.l = L.W1;
        T.data = { R: R.Wh, _G: 0 };
        if (q.M(gn.Z7)) T.data._G = k ? 3 : 2;
        else T.data._G = k ? 0 : 1;
      }
      if (q.M(gn.cb) && m && m.J.length != 0) {
        var Z = m.U[m.J[0]].Iw();
        c.data = {
          _D: Z ? "hide" : "show",
          SC: { classID: "null", null: { t: "VlLs", v: [jw.$W("Lyr", !0)] } },
        };
      }
      if (q.M(gn.FP) && m) {
        var h = 0;
        if (k) h++;
        if (W) h += 2;
        T.l = L.ag;
        T.data = { R: "frompath", eQ: [null, 0, h] };
      }
      if (q.M(gn.$b)) {
        c.data = L.xC.$0(0);
      }
      if (q.M(gn.da)) {
        var u = this.mS.length,
          i = q.M(gn.X6) ? -1 : 1;
        if (u > 1) this.nF.fc((this.nF.qw() + u + i) % u);
      }
      if (q.M(gn.WU)) {
        b.data = { R: _.Y.fh, rw: fG.EE };
      }
      if (q.M(gn.d0)) {
        b.data = { R: _.Y.fh, rw: fG.ZB };
      }
      L.Lr.aDD(q, T);
      if (this.AV.BS() != null && this.AV.BS().bx()) {
      } else {
        if (T.data) this.k(T);
        if (c.data) this.k(c);
        if (b.data) this.k(b);
      }
    }
    if (!G && W) {
      var x;
      if (q.M(gn.Z7)) x = "Bckw";
      if (q.M(gn.UZ)) x = "Frwr";
      if (q.M(gn.cb)) x = "Back";
      if (q.M(gn.$b)) x = "Frnt";
      if (x) {
        var c = new fd(_.E.NI);
        c.data = {
          _D: "select",
          SC: {
            __name: "Select",
            classID: "slct",
            null: {
              t: "obj ",
              v: [
                { t: "Enmr", v: { classID: "Lyr", typeID: "Ordn", enum: x } },
              ],
            },
            MkVs: { t: "bool", v: !1 },
          },
        };
        this.k(c);
      }
    }
    if (m && m.J.length != 0) {
      var X = m.U[m.J[0]],
        $ = X.ma;
      if ($ == 1 || $ == 3 || G) {
        var T = new fd(_.E.w),
          H = $ == 3 ? X.xE(m).x7 : X.ex();
        if (H) {
          var C = H.Ea ? (m.I.rO.join("") == "111" ? 1 : 2) : 0;
          T.l = L.R2;
          if (H && q.M(gn.k9) && C != 0) {
            T.data = { R: "mskView", K: 0 };
          }
          if (H && q.M(gn.afA)) {
            T.data = { R: "mskView", K: C == 1 ? 0 : 1 };
          }
          if (H && q.M(gn.a4p)) {
            T.data = { R: "mskView", K: C == 2 ? 0 : 2 };
          }
          if (T.data) this.k(T);
        }
      }
    }
    var l = q.TC();
    if (m && G && 2 <= l && l <= 5) {
      var v = [1, 1, 1];
      if (l > 2) {
        v = [0, 0, 0];
        v[l - 3] = 1;
      }
      var K = new fd(_.E.w, !0);
      K.l = L.C9;
      K.data = { R: "setcls", rO: v };
      this.k(K);
    }
    if (!q.M(gn.A8) && !W && j == "down") {
      var T = new fd(_.E.w),
        b = new fd(_.E.c),
        S = this.Z.map[this.a.RW],
        o = -1;
      for (var y = 0; y < this.Z.keys.length; y++)
        if (this.Z.keys[y] && this.PS(this.Z.keys[y])) o = y;
      if (o != -1) {
        var V = null;
        if (S.fi != o) V = this.Z.Cj[o];
        if (S.fi == o && k) V = (S.aau + 1) % this.Z.hR[o].length;
        if (V != null) {
          var P = this.Z.hR[o][V].l.id,
            z = this.a.Xr;
          if ((z == null || z.indexOf(parseInt(P)) != -1) && !this.JD.qT)
            b.data = { R: _.Y.UK, l: P };
        }
      }
      if (q.M(gn.jF)) b.data = { R: _.Y.UK, l: L.C9 };
      if (q.M(gn.Fb)) b.data = { R: _.Y.UK, l: L.H0 };
      if (q.M(gn.Bi)) b.data = { R: _.Y.fh, rw: fG.Ru, _G: 2 };
      if (q.M(gn.l_)) b.data = { R: _.Y.fh, rw: fG.Ru, _G: 3 };
      if (b.data) this.k(b);
      if (q.M(gn.apE) && m && m.J.length == 1) {
        var X = m.U[m.J[0]];
        T.l = L.W1;
        var E = X.op(0) || X.op(1) || X.op(2) || X.op(31);
        T.data = {
          R: R.p4,
          jt: E
            ? [
                [!1, !1, !1, !1],
                [0, 1, 2, 31],
              ]
            : [[!0], [0]],
        };
        this.k(T);
      }
      var l = q.TC();
      if (n && l != -1 && this.PS(gn.xx[l])) {
        var A = m.J[0],
          X = m.U[A],
          N = gn.aaZ(Math.round((100 * X.yA) / 255), l);
        T.l = L.W1;
        T.data = { R: R.G4, jt: Math.round((255 * N) / 100) };
        this.k(T);
      }
      var Q = this.a.ws;
      if (q.M(gn.da)) {
        b.data = { R: _.Y.VU, K: Q == 0 ? 1 : 0 };
        this.k(b);
      }
      if (q.M(gn.gM) || (q.M(gn.k9) && Q == 2)) {
        var e = (document.fullscreenElement != null) == (Q == 2);
        b.data = { R: _.Y.VU, K: Q == 0 ? 2 : 0, CQ: e };
        this.k(b);
      }
      if (q.M(gn.apK) && !this.JD.qT) {
        T.l = L.ag;
        T.data = { R: "qmask" };
        this.k(T);
      }
    }
    if (!q.M(gn.A8) && !W && k) {
      var T = new fd(_.E.w),
        b = new fd(_.E.c);
      if (q.M(gn.cb)) b.data = { R: _.Y.s0, kO: "shortcuts" };
      if (q.M(gn.a1O)) b.data = { R: _.Y.s0, kO: "fill" };
      if (q.M(gn.a2a)) b.data = { R: _.Y.s0, kO: "sel_feather" };
      if (n && (q.M(gn.h5) || q.M(gn.Nc))) {
        var A = m.J[0],
          X = m.U[A],
          Y = kJ.YH,
          d = Y.length,
          I = Y.indexOf(X.hz);
        T.l = L.W1;
        T.data = { R: R.Jf, jt: (I + d + (q.M(gn.h5) ? 1 : -1)) % d };
        this.k(T);
      }
      if (b.data) this.k(b);
    }
    var T = new fd(_.E.w),
      O = j == "down" && (this.PS(gn.gv) || this.PS(gn.N7));
    if ((G || W) && O) {
      T = new fd(_.E.NI);
      T.data = L.tt.QQ(G ? "BckC" : "FrgC");
      this.k(T);
    } else if (this.AV.BS() == null && m && O && !this.JD.qT) {
      if (m.h != null) {
        T = new fd(_.E.NI);
        T.data = { _D: "delete" };
      } else if (m.J.length != 0) {
        var X = m.U[m.J[0]];
        if (X.ma == 1) T.data = { R: R.zQ };
        else if (X.ma == 3) T.data = { R: R.Ko };
        else T.data = { R: R.dh };
        T.l = L.W1;
      }
      this.k(T);
    }
    if (this.AV.BS() != null) {
      if (q.M(gn.k9)) {
        this.AV.BS().aM0();
      } else {
        this.AV.BS().uY(m, this, this.a, q);
      }
    }
    if (this.a.RW == null) return;
    var S = this.kG();
    if (this.AV.BS() == null || this.Z.xy) S.uY(m, this, this.a, q);
  };
  ll.prototype.PS = function (j) {
    var q = this.NW,
      m = this.Z.map[this.a.RW].l,
      top = this.AV.BS(),
      n = this.WM();
    return q.M(j) && !m.oa(j, n) && (top == null || !top.oa(j, n));
  };
  ll.prototype.cZ = function (j) {
    var q = this.axS,
      m = this.ga;
    this.a.ws = j;
    var n = J.JO,
      G = this.BC._;
    if (n(G)) this.sW.removeChild(G);
    var W = this.$O._;
    if (n(W)) this.sW.removeChild(W);
    var k = this.SX._;
    if (n(k)) q.removeChild(k);
    var T = this.nF._;
    if (n(T)) q.removeChild(T);
    var b = this.Ik._;
    if (n(b)) q.removeChild(b);
    if (j == 0) {
      this.sW.appendChild(G);
      this.sW.appendChild(W);
      m.appendChild(q);
      q.appendChild(k);
      q.appendChild(T);
      q.appendChild(b);
    }
    if (j == 1) {
      this.sW.appendChild(G);
      q.appendChild(T);
    }
    if (j == 2) {
      q.appendChild(T);
    }
    this.nF.cZ(j == 2 ? 1 : 0);
    this.QG();
  };
  ll.prototype.aJB = function (j) {
    if (this.Xz()) return 1;
    if (J.agJ() == 0) {
      this.a = {};
      this.X3 = function (q, m) {
        return Math.sqrt(q * m);
      };
    }
    return -1;
  };
  ll.amN = function () {
    var j =
        ei == 0
          ? [
              [
                { l: new L.YE(), xu: hW },
                { l: new L.gd(), xu: hG },
              ],
              [
                { l: new L.so(), xu: eX, cQ: 0 },
                { l: new L.ty(), xu: dl, cQ: 0 },
              ],
              [
                { l: new L.oj(), xu: fg, cQ: 0 },
                { l: new L.vr(), xu: iD, cQ: 0 },
                { l: new L.FB(), xu: i8, cQ: 0 },
              ],
              [
                { l: new L.y4(), xu: h9, cQ: 0 },
                { l: new L.C8(), xu: dw, cQ: 0 },
                { l: new L.hZ(), xu: ir, cQ: 0 },
              ],
              [
                { l: new L.abh(), xu: fK },
                { l: new L.amD(), xu: eM },
                { l: new L.ct(), xu: hb, cQ: 0 },
                { l: new L.ev(), xu: hC, cQ: 0 },
              ],
              [
                { l: new L.KH(), xu: gl },
                { l: new L.nj(), xu: fD, cQ: 0 },
                { l: new L.c9(), xu: ja },
              ],
              [
                { l: new L.Jx(), xu: fn, cQ: 0 },
                { l: new L.I_(), xu: bc, cQ: 0 },
                { l: new L.oj(!0), xu: dJ, cQ: 0 },
                { l: new L.VR(), xu: ax, cQ: 0 },
                { l: new L.alo(), xu: kY, cQ: 0 },
                { l: new L.sh(), xu: hy, cQ: 0 },
              ],
              [
                { l: new L.IE(), xu: jE, cQ: 0 },
                { l: new L.XG(), xu: j6, cQ: 0 },
                { l: new L.QE(), xu: kD, cQ: 0 },
              ],
              [{ l: new L.mn(), xu: kz, cQ: 0 }],
              [
                { l: new L.Il(), xu: bz, cQ: 0 },
                { l: new L.Pb(), xu: aP, cQ: 0 },
                { l: new L.aZ(!0), xu: gy, cQ: 0 },
              ],
              [
                { l: new L.Pr(), xu: bD, cQ: 0 },
                { l: new L.aZ(), xu: gy, cQ: 0 },
              ],
              [
                { l: new L.i$(), xu: iq, cQ: 0 },
                { l: new L.wj(), xu: iH, cQ: 0 },
                { l: new L.bI(), xu: dX, cQ: 0 },
              ],
              [
                { l: new L.GR(), xu: kb, cQ: 0 },
                { l: new L.M1(), xu: kW, cQ: 0 },
                { l: new L.Kz(), xu: dj, cQ: 0 },
              ],
              [
                { l: new L.Kf(), xu: j5 },
                { l: new L.yh(), xu: j5 },
              ],
              [
                { l: new L.dQ(0), xu: bV },
                { l: new L._K(), xu: eq },
                { l: new L.dQ(1), xu: bV },
                { l: new L.dQ(2), xu: bV },
                { l: new L.dQ(3), xu: bV },
                { l: new L.dQ(4), xu: bV },
              ],
              [
                { l: new L.tz(), xu: jM },
                { l: new L.sr(), xu: e_ },
              ],
              [
                { l: new L.Rect(), xu: dD },
                { l: new L.SQ(), xu: dO },
                { l: new L.Gy(), xu: i$ },
                { l: new L.Tq(), xu: kQ },
                { l: new L.fj(), xu: jF },
              ],
              [
                { l: new L.gA(), xu: aO },
                { l: new L.RT(), xu: iR },
              ],
              [{ l: new L.Lr(), xu: jI }],
            ]
          : ei == 1
          ? [
              [{ l: new L.YE(), xu: hW }],
              [{ l: new L.sr(), xu: e_ }],
              [{ l: new L.dQ(0), xu: bV }],
              [{ l: new L._K(), xu: eq }],
              [
                { l: new L.Kf(), xu: j5 },
                { l: new L.yh(), xu: j5 },
              ],
              [{ l: new L.Gy(), xu: i$ }],
              [
                { l: new L.Rect(), xu: dD },
                { l: new L.SQ(), xu: dO },
              ],
              [{ l: new L.bA(), xu: aO }],
              [{ l: new L.mQ(), xu: bD }],
              [{ l: new L.KH(), xu: gl }],
              [
                { l: new L.gA(), xu: aO },
                { l: new L.RT(), xu: iR },
              ],
              [{ l: new L.Lr(), xu: jI }],
            ]
          : [
              [{ l: new L.avw(0), xu: hW }],
              [{ l: new L.avw(1), xu: jE }],
              [{ l: new L.gA(), xu: aO }],
              [{ l: new L.Lr(), xu: jI }],
            ],
      T = "",
      b = "";
    if (ei == 0 && !J.Q_(1)) j[6].splice(2, 1);
    var q = [
        [
          gn.qj,
          gn.Sx,
          gn.ji,
          gn.aIr,
          gn.dV,
          gn.JC,
          gn.Uv,
          gn.xa,
          gn.ng,
          gn.E,
          gn.Vj,
          null,
          gn.pd,
          gn.a_,
          gn.cp,
          gn.Y,
          gn.Si,
          gn.jF,
          gn.AQ,
        ],
        [
          gn.qj,
          gn.Y,
          gn.cp,
          null,
          gn.a_,
          gn.afA,
          gn.Sx,
          null,
          gn.Vj,
          gn.JC,
          gn.jF,
          gn.AQ,
        ],
        [gn.qj, gn.xa, gn.jF, gn.AQ],
      ][ei],
      m = [
        { l: L.R2, Vf: !1, RP: [gn.awW, gn.Xe] },
        { l: L.R2, Vf: !1, RP: [gn.awW], J7: [L.C9] },
        { l: L.C9, Vf: !1, RP: [gn.Xe] },
        { l: L.Y8, Vf: !0, RP: [gn.A8], J7: [L.IL] },
        { l: L.IL, Vf: !0, RP: [gn.A8], J7: [L.Y8] },
        { l: L.Cl, Vf: !0, RP: [gn.A8], J7: [L.Nj, L.iR, L.Gd] },
      ];
    if (ei == 0)
      m.push({
        l: L.Nj,
        Vf: !0,
        RP: [gn.A8],
        J7: [L.Cl, L.HO, L.ZR, L.lp, L.Zo, L.Yz],
      });
    m.push({ l: L.Lx, Vf: !0, RP: [gn.A8] });
    var n = {
        aax: m,
        hR: j,
        Cj: [],
        keys: q,
        aJ: [
          { l: new L.aaW(), xu: f2 },
          { l: new L.a0S(), xu: h8 },
          { l: new L.aqt(), xu: b_ },
          { l: new L.KH(!0), xu: gl },
          { l: new L.aU(), xu: h5 },
          { l: new L.B3(), xu: bm },
          { l: new L.j6(), xu: aM },
        ],
        azs: [
          { l: new L.zl() },
          { l: new L.History() },
          { l: new L.YM() },
          { l: new L.co() },
          { l: new L.DO() },
          { l: new L.wC() },
        ],
        map: {},
        aaP: null,
        xy: null,
        MB: null,
      },
      G = n.hR;
    for (var y = 0; y < G.length; y++) {
      var W = G[y];
      if (g$ == "---") continue;
      for (var k = 0; k < W.length; k++)
        if (W[k].cQ != null && W[k].cQ != ei) {
          W.splice(k, 1);
          k--;
        }
      if (W.length == 0) {
        G.splice(y, 1);
        n.keys.splice(y, 1);
        y--;
      }
    }
    for (var y = 0; y < n.hR.length; y++) {
      var c = n.hR[y];
      if (c == "---") continue;
      var a = n.keys[y];
      for (var k = 0; k < c.length; k++) {
        n.map[c[k].l.id] = c[k];
        c[k].fi = y;
        c[k].aau = k;
        var f = g$.get(c[k].l.name);
        b += "<li>" + c[k].l.id + ": " + f + "</li>";
        T +=
          "\t" +
          JSON.stringify(c[k].l.name) +
          ", " +
          (a ? '"' + a.Lj + '"' : "null") +
          ", " +
          c[k].l.id +
          ", // " +
          f +
          "\n";
      }
      n.Cj[y] = 0;
    }
    for (var y = 0; y < n.aJ.length; y++) n.map[n.aJ[y].l.id] = n.aJ[y];
    for (var y = 0; y < n.azs.length; y++) n.map[n.azs[y].l.id] = n.azs[y];
    try {
      var U = window.locStor.getItem("_ltools");
      if (U) {
        U = U.split(",");
        for (var y = 0; y < U.length; y++) {
          var Z = n.map[U[y]];
          if (Z && Z.fi != null) n.Cj[Z.fi] = Z.aau;
        }
      }
    } catch (gn) {
      alert("could not load the tool preferences");
      console.log("Last tools: ", window.locStor.getItem("_ltools"));
    }
    return n;
  };
  function c6(j) {
    kV.call(this);
    if (j == null) return;
    this.GM = null;
    this.uu = null;
    this._ = J.m("div", "sbar" + " " + j);
    this.Uq = new J.m("div", "top");
    this.Uq.innerHTML = "> <";
    this._.appendChild(this.Uq);
    this.R8 = 1;
    this.Uq.addEventListener("click", this.aLt.bind(this), !1);
  }
  c6.prototype = new kV();
  c6.prototype.aLt = function (j) {
    if (this.GM != null && this.GM < 500 && this.R8 == 0) return;
    if (this.R8 == 0) this.$q(!0);
    else this.collapse(!0);
  };
  c6.prototype.aFK = function (j) {
    this.R8 = j;
    this.Uq.innerHTML = this.R8 == 0 ? "< >" : "> <";
  };
  c6.prototype.a9h = function () {
    var j = new fd(_.E.c, !0);
    j.data = { R: _.Y.ja };
    this.k(j);
  };
  c6.prototype.$q = function (j) {
    this.aFK(1);
    if (j) this.a9h();
  };
  c6.prototype.collapse = function (j) {
    this.aFK(0);
    if (j) this.a9h();
  };
  c6.prototype.S5 = function () {
    return this.R8 == 1;
  };
  function kU(j) {
    c6.call(this, "vcolumn");
    this.R9 = j;
    this.vI();
    this.v$ = J.m("div", "cont");
    J.F(this.v$, "cursor:default;");
    this.aiH = this.azU.bind(this);
    this.aIJ = this.a7B.bind(this);
    this.ao4 = this.aLi.bind(this);
    J.PD(this._, this.aiH);
    this._.appendChild(this.v$);
    this.aJJ = J.m("div");
    this.v$.appendChild(this.aJJ);
    this._l = -1;
    this.awj = J.m("div", "float");
    var q = (this.je = J.m("canvas", "gsicon")),
      m = Math.round(12 * J.IC());
    q.width = q.height = m;
    var n = q.getContext("2d");
    n.moveTo(2, 2);
    n.lineTo(m - 2, m - 2);
    n.moveTo(2, 7);
    n.lineTo(m - 7, m - 2);
    n.stroke();
    J.F(this.je, "position:absolute; bottom:0;  left:0;  cursor:nesw-resize;");
    J.r$(this.je);
    J.PD(this.je, this.aiH);
    J.Ku(q);
    this.qQ = [];
    this.afx = [];
    this.aEn = null;
    this.Vk = null;
    this.aiN = 0;
  }
  kU.prototype = new c6();
  kU.prototype.azU = function (j) {
    var q = j.target == this.je;
    if (!q) {
      if (j.target != this._) return;
      if (!this.S5()) return;
    } else {
      var m = this.qQ[this._l].G9;
      m.style.pointerEvents = "none";
      var n = m.getBoundingClientRect();
      this.aEn = [n.width, n.height];
      this.afx[this._l] = [n.width, n.height];
    }
    j.stopPropagation();
    this.Vk = J.QR(j, document.body);
    this.aiN = this.R9;
    J.dJ(document, this.aIJ);
    J.sP(document, this.ao4);
  };
  kU.prototype.a7B = function (j) {
    var q = J.QR(j, document.body);
    if (this.S5()) {
      this.R9 = this.aiN + this.Vk.x - q.x;
      this.vI();
    } else {
      var m = this.afx[this._l],
        n = this.aEn;
      m[0] = n[0] + this.Vk.x - q.x;
      m[1] = n[1] + q.y - this.Vk.y;
    }
    var G = new fd(_.E.c, !0);
    G.data = { R: _.Y.ja };
    this.k(G);
  };
  kU.prototype.aLi = function (j) {
    if (!this.S5()) {
      var q = this.qQ[this._l].G9;
      q.style.pointerEvents = "auto";
    }
    J.BJ(document, this.aIJ);
    J.mW(document, this.ao4);
  };
  kU.prototype.ae3 = function (j) {
    j.Q("showFloat", this.ae_, this);
    j.Q("hideFloat", this.NL, this);
    this.qQ.push(j);
    j.parent = this;
    this.v$.appendChild(j._);
  };
  kU.prototype.a73 = function (y) {
    var j = this.qQ[y];
    j.removeEventListener("showFloat", this.ae_, this);
    j.removeEventListener("hideFloat", this.NL, this);
    this.qQ.splice(y, 1);
    j.parent = null;
    this.v$.removeChild(j._);
  };
  kU.prototype.aqE = function () {
    return this.qQ.length;
  };
  kU.prototype.jL = function () {
    for (var y = 0; y < this.qQ.length; y++) this.qQ[y].jL();
  };
  kU.prototype.ae_ = function (j) {
    this.jL();
    var q = this.awj;
    this.aJJ.appendChild(q);
    this._l = this.qQ.indexOf(j.currentTarget);
    var m = this.qQ[this._l].G9;
    J.dI(q);
    q.appendChild(m);
    q.appendChild(this.je);
    this.X3(this.GM, this.uu);
  };
  kU.prototype.NL = function (j) {
    this.jL();
    if (this._l != -1) {
      this.aJJ.removeChild(this.awj);
      this._l = -1;
    }
  };
  kU.prototype.vI = function () {
    function j(q) {
      return Math.round(q * J.IC()) / J.IC();
    }
    J.F(
      this._,
      "width: " +
        this.R9 +
        "px; border-left-width:" +
        j(4) +
        "px; cursor:ew-resize;"
    );
  };
  kU.prototype.$q = function (j) {
    this.vI();
    this.NL();
    for (var y = 0; y < this.qQ.length; y++) this.qQ[y].$q();
    c6.prototype.$q.call(this, j);
  };
  kU.prototype.collapse = function (j) {
    this._.removeAttribute("style");
    for (var y = 0; y < this.qQ.length; y++) this.qQ[y].collapse();
    c6.prototype.collapse.call(this, j);
  };
  kU.a8R = 11;
  kU.prototype.X3 = function (j, q, m) {
    this.GM = j;
    this.uu = q;
    q -= kU.a8R;
    var n = this.qQ.length;
    if (n == 0) return;
    this.v$.style.height = q - 1 + "px";
    if (!this.S5()) {
      var G = q < 400 ? q : 400 + (q - 400) * 0.5,
        W = Math.max(this.R9, (window.innerWidth - 350) / 3);
      for (var y = 0; y < n; y++) {
        var k = this.qQ[y],
          T = this.afx[y];
        k.X3(T ? T[0] : k.auo ? W : this.R9, T ? T[1] : G, m);
      }
    } else {
      var b = q;
      for (var y = 0; y < n; y++) {
        var k = this.qQ[y],
          c = k.aHs();
        if (y == n - 1) {
          c = b;
          k._.style.borderBottom = "none";
        }
        k.X3(this.R9, c);
        b -= c + 4;
      }
    }
  };
  function aX(j) {
    kV.call(this);
    this._ = J.m("div");
    this.v$ = null;
    this.A2 = 0;
    this.mc = 0;
    this.aCu = j;
    this.aEb = this.Q7.bind(this);
    this.apS = this.dU.bind(this);
    this.a6V = this.IB.bind(this);
    this.zV = null;
    this._z = null;
    this.ac9 = null;
    var q = this._,
      n =
        '<svg class="gsicon" width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">';
    J.PD(q, this.aEb);
    q.addEventListener("touchmove", J.k$, !1);
    this.aB_ = !0;
    this.JA = [];
    var m = (this.alj = J.m("div"));
    J.F(
      m,
      "float:right; padding:4px;display:none; position:relative;z-index:1; app-region:no-drag;"
    );
    q.appendChild(m);
    var G = [
      [0, 13, 3],
      [0, 13, 4],
      [0, 13, 5],
      "Blog",
      "API",
      n +
        '<path d="m21.325 9.308c-.758 0-1.425.319-1.916.816-1.805-1.268-4.239-2.084-6.936-2.171l1.401-6.406 4.461 1.016c0 1.108.89 2.013 1.982 2.013 1.113 0 2.008-.929 2.008-2.038s-.889-2.038-2.007-2.038c-.779 0-1.451.477-1.786 1.129l-4.927-1.108c-.248-.067-.491.113-.557.365l-1.538 7.062c-2.676.113-5.084.928-6.895 2.197-.491-.518-1.184-.837-1.942-.837-2.812 0-3.733 3.829-1.158 5.138-.091.405-.132.837-.132 1.268 0 4.301 4.775 7.786 10.638 7.786 5.888 0 10.663-3.485 10.663-7.786 0-.431-.045-.883-.156-1.289 2.523-1.314 1.594-5.115-1.203-5.117zm-15.724 5.41c0-1.129.89-2.038 2.008-2.038 1.092 0 1.983.903 1.983 2.038 0 1.109-.89 2.013-1.983 2.013-1.113.005-2.008-.904-2.008-2.013zm10.839 4.798c-1.841 1.868-7.036 1.868-8.878 0-.203-.18-.203-.498 0-.703.177-.18.491-.18.668 0 1.406 1.463 6.07 1.488 7.537 0 .177-.18.491-.18.668 0 .207.206.207.524.005.703zm-.041-2.781c-1.092 0-1.982-.903-1.982-2.011 0-1.129.89-2.038 1.982-2.038 1.113 0 2.008.903 2.008 2.038-.005 1.103-.895 2.011-2.008 2.011z"/>',
      n +
        '<path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"/></svg>',
      n +
        '<path d="M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z"/></svg>',
    ];
    for (var y = 0; y < G.length; y++) {
      var W = new kv(G[y]);
      this.JA.push(W);
      J.F(W._, "margin-left:" + (y < 7 ? 4 : 0) + "px;cursor:pointer;");
      W.Q("click", this.lU, this);
    }
  }
  aX.prototype = new kV();
  aX.prototype.T = function () {
    var j = this.alj;
    J.dI(j);
    for (var y = 0; y < this.JA.length; y++) {
      var q = this.JA[y];
      if (y < 5) q.T();
      j.appendChild(q._);
    }
  };
  aX.prototype.lU = function (j) {
    var y = this.JA.indexOf(j.currentTarget);
    if (y == 0) {
      if (window.showCap) window.showCap();
      return;
    }
    var q = " issues learn blog api twitter facebook".split(" "),
      m = [
        "",
        "//github.com/photopea/" + ["photo", "vector"][ei] + "pea/issues",
        "//www.photopea.com/learn",
        "//blog.photopea.com",
        "//www.photopea.com/api",
        "//www.reddit.com/r/photopea",
        "//www.twitter.com/photopeacom",
        "//www.facebook.com/photopea",
      ],
      n = window.ga;
    if (n) n("send", "event", "Links", q[y]);
    var G = new fd(_.E.c, !0);
    G.data = { R: _.Y.p8, link: m[y] };
    this.k(G);
  };
  aX.prototype.Q7 = function (j) {
    if (j.a7O) {
      j.preventDefault();
      j.stopPropagation();
    }
    var q = window;
    J.dJ(q, this.apS);
    J.sP(q, this.a6V);
    q = this.v$;
    this.zV = new ea(parseInt(q.style.left), parseInt(q.style.top));
    this._z = J.QR(j, this._);
    this.ac9 = q.getBoundingClientRect();
  };
  aX.prototype.dU = function (j) {
    var q = J.QR(j, this._),
      m = this.zV.x + q.x - this._z.x,
      n = this.zV.y + q.y - this._z.y,
      G = this.A2 - this.ac9.width,
      W = this.mc - this.ac9.height;
    if (this.aCu) this.v$.style.left = Math.min(0, Math.max(G, m)) + "px";
    else this.v$.style.top = Math.min(0, Math.max(W, n)) + "px";
    if (m - 10 > 0) {
      this._z.x = q.x - 10;
      this.zV.x = 0;
    }
    if (m + 10 < G) {
      this._z.x = q.x + 10;
      this.zV.x = G;
    }
  };
  aX.prototype.IB = function (j) {
    var q = window;
    J.BJ(q, this.apS);
    J.mW(q, this.a6V);
  };
  aX.prototype.auE = function (j) {
    if (this.v$) {
      this._.removeChild(this.v$);
    }
    this.v$ = j;
    this._.appendChild(j);
    j.style.position = "absolute";
    j.style.appRegion = "no-drag";
    if (this.aCu) j.style.left = 0;
    else j.style.top = 0;
  };
  aX.prototype.X3 = function (j, q) {
    this.A2 = j;
    this.mc = q;
    J.F(
      this._,
      "position:relative; width: " +
        j +
        "px; height: " +
        q +
        "px; overflow:hidden; white-space: nowrap; app-region:drag;"
    );
    var m = this.v$.firstChild,
      n = this.alj,
      G = m ? m.firstChild.getBoundingClientRect().width : 1e9,
      W = 170,
      k = navigator.windowControlsOverlay,
      T = 0,
      b = 0;
    if (k && k.visible) {
      var c = k.getTitlebarAreaRect();
      b = c.x;
      T = j - c.width - c.x;
      if (T < 0) T = 0;
      G += c.x;
      W += T;
    }
    var a = this.aB_ && j > G + W;
    n[bA.Tg][bA.aHH] = a ? "" : bA.aK3;
    n[bA.Tg][bA.ru] = T + "px";
    if (m) {
      m[bA.Tg][bA.a6U] = b + "px";
      m[bA.Tg][bA.anI] = bA.awc;
    }
    var f = this.JA;
    for (var y = 0; y < f.length; y++) {
      var U = y > 4 || j - G - W > 330 ? "" : bA.aK3,
        Z = f[y];
      Z._.style.display = U;
    }
  };
  aX.prototype.ajV = function () {
    this.v$.style.left = "0";
    this.v$.style.top = "0";
  };
  function g9() {
    kV.call(this);
    this.a = null;
    this._s = g9.cp;
    this.aj6 = "";
    this._ = J.m("div", "rightbar");
    this.CX = [new kU(300), new kU(268)];
    this.qQ = [
      new d7(),
      new d7(),
      new d7(),
      new d7(),
      new d7(),
      new d7(),
      new d7(null, !0),
    ];
    this.ad2 = [];
  }
  g9.prototype = new kV();
  g9.prototype.T = function () {
    var j = this._s;
    for (var y = 0; y < j.length; y++) j[y].Tf.T();
  };
  g9.cp = [
    [
      { Tf: new ft(), zd: 3 },
      { Tf: new cb(), zd: 1 },
      { Tf: new a2(), zd: 4 },
      { Tf: new lb(), zd: 2 },
      { Tf: new dG(!0), zd: 5 },
      { Tf: new hd(!0), zd: 5 },
      { Tf: new cu(), zd: 0 },
      { Tf: new bS(), zd: 5 },
      { Tf: new ej(), zd: 3 },
      { Tf: new eG(), zd: 0 },
      { Tf: new jn(), zd: 3 },
      { Tf: new a_(), zd: 2 },
      { Tf: new eR(), zd: 4 },
      { Tf: new a1(), zd: 3 },
      { Tf: new aE(), zd: 5 },
      { Tf: new dG(!1), zd: 5 },
      { Tf: new cl(), zd: 2 },
      { Tf: new aL(), zd: 3 },
      { Tf: new gU(), zd: 1 },
      { Tf: new dQ(), zd: 0 },
      { Tf: new iu(), zd: 5 },
      { Tf: new fI(), zd: 4 },
      { Tf: new cm(), zd: 6, Ey: !0 },
    ],
    [
      { Tf: new dk(), zd: 5 },
      { Tf: new dG(!0), zd: 5 },
      { Tf: new dG(!1), zd: 5 },
      { Tf: new fI(), zd: 4 },
      { Tf: new bS(), zd: 5 },
      { Tf: new eG(), zd: 0 },
      { Tf: new a_(), zd: 2 },
      { Tf: new cw(), zd: 6 },
      { Tf: new cm(), zd: 6, Ey: !0 },
    ],
    [
      { Tf: new eG(), zd: 0 },
      { Tf: new a_(), zd: 2 },
    ],
  ][ei];
  if (ei < 2) {
    if (J.Q_(1)) g9.cp.push({ Tf: new hK(), zd: 6, Ey: !0 });
    g9.cp.push(
      { Tf: new jq(), zd: 6, Ey: !0 },
      { Tf: new cU(), zd: 6, Ey: !0 }
    );
  }
  (function () {
    var j = [
      {
        name: "Gallery",
        url: "//www.photopea.com/plugins/gallery.html",
        icon: "===data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgBAMAAAB54XoeAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAB5QTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAtyhvagAAAAp0Uk5TAP+mc4pfC+rILiKk3cQAAALjSURBVHic7dq/bxMxFAdwKy1HM16up4QtDCDYkv8gTIgtZWGNWMpIJKhgLAtriyrx71Lnh8/2e76c3/tOxW9olUb56Fvf3bPPOWNKlSpVqtSxPv6uIfXj1d77hOFs/bTeGc6r68UjuESCjTHPkF5dr801FrwxV1iwNS+x4MRs7a+3iNP5j5Vmxv5sEN7+fJnuwDkGHFlrB95hwLEDNxiwciDGM+Zpgw9v6vrXBxg4fr+/Lr6F54cYrNz1OtlAQK/Hf0eAI78bzPVgdRu0l40avAgblhdRCEYddKIFySS0VoJkErpRgmTO6P5nETiOPa+disBzCq5U4HMKflWB9xR8oQLfUfBSBTILA3eYReAtBWcqkHrd5ws4rOAHBX7aMCe2Ww2KwHsK6i49eHOAty94g4VPAfhJSjGNngUj7ko+0e/OYXoPMwrB+WDwcIIs4r9XQcSMxdJy/4kTEb2AJ0B3p08iChecy+NnLslboiWxtxWxIm9KFu1em6IRBbcVwcDTiHz1gUEfHXo/3QNGTYoe6FwwavQDI6bB6OryG4AMJD2v1YFMmx8UMQkyU+WgiCmQjGAU8Tx14FMgu9nkRUz0ySTIBvQipvpkEkzshrmIhxFmIvJgIqCL2NMneTC5XXeItIxenwKTAQ8RvT5JIrJgz35iGwRkInJgT0BacUQOzNrwjCMyYFZAEpEBM3dk21NgZsC4CVEwe8u47QeZPpgVkYCCPe2mD8weQVuLHlC06d6kQcEIRhEjUPitQJsCP8s8P2IIMvetuREDUHSIo4gBqPhepeVARcAuogdW4hG01VDwi8ZzETtQF9CtwjtQGfAYsQPVX501ISi+SLpaB6ByBG21AYioNRps0aA90FiwQYOPEcFggwbrBRps0GBdwAIW8AmBW6w3la8z+Zrhn7e5woIt/pkl4d1JqlbqpWFYs40xf5GgfdZtvMV50zvVLRSt1/ul8QPqccF4X7tUqVKl/uf6BxTPzN+MDvNvAAAAAElFTkSuQmCC",
      },
      { name: "Peas Maker", url: "//www.photopea.com/plugins/peasmaker" },
    ];
    if (ei < 2)
      for (var y = 0; y < j.length; y++)
        g9.cp.push({ Tf: new eo(j[y], "" + (100 + y)), zd: 6, Ey: !0 });
  })();
  g9.prototype.aa2 = function (j) {
    for (var y = 0; y < j.length; y++) {
      var q = j[y],
        m = new eo(q, "plg_" + q.name);
      this._s.push({ Tf: m, zd: 6 });
      this.ad2.push(m.My);
    }
    this.ip();
  };
  g9.prototype.yp = function (j, q) {
    this.a = j;
    var m = this._s;
    for (var y = 0; y < m.length; y++) m[y].Tf.yp(j, q);
    if (q == fG.BG || q == fG.lr || q == fG.HN) this.ip();
  };
  g9.prototype.XB = function (j) {
    var q = this._s;
    for (var y = 0; y < q.length; y++) q[y].Tf.XB(j);
  };
  g9.prototype.X3 = function (j, q) {
    this.GM = j;
    this.uu = q;
    this.ip();
    this.CX[0].X3(j, q);
    this.CX[1].X3(j, q);
  };
  g9.prototype.ip = function () {
    var j = this.a,
      q = this.GM,
      m = this.uu;
    if (j == null || q == 0) return;
    var n = this.ad2;
    for (var y = 0; y < n.length; y++) {
      var G = this.qJ(n[y]),
        W = G.Tf.VH.resID;
      if (W != null && j.Jb.indexOf(W) == -1) {
        n.splice(y, 1);
        y--;
      }
    }
    var k = j.z6.concat(n),
      T = q < 500 || (q < 700 && q < m),
      b = JSON.stringify(k) + "," + T;
    if (b != this.aj6) {
      this.aj6 = b;
      J.dI(this._);
      var c = [];
      for (var y = 0; y < this.CX.length; y++) {
        var a = this.CX[y];
        c[y] = a.S5();
        while (a.aqE() != 0) a.a73(0);
        a.$q();
      }
      var f = [];
      for (var y = 0; y < this.qQ.length; y++) {
        var U = this.qQ[y];
        U.$q();
        while (U.aJ9() != 0) U.dB(0);
        f.push(0);
      }
      for (var y = 0; y < k.length; y++) {
        var G = this.qJ(k[y].toString());
        if (G == null) continue;
        this.qQ[G.zd].su(G.Tf);
        this.qQ[G.zd].fc(0);
        f[G.zd]++;
      }
      var Z = [];
      for (var y = 0; y < f.length; y++) {
        if (f[y] == 0) continue;
        var h = y < 3 || T ? 1 : 0,
          a = this.CX[h];
        a.parent = this;
        a.ae3(this.qQ[y]);
        Z[h] = !0;
      }
      for (var y = 0; y < this.CX.length; y++)
        if (Z[y]) this._.appendChild(this.CX[y]._);
      this.CX[0].collapse();
      if (q < 700 || this.a.compact || !c[1]) {
        this.CX[1].collapse();
      }
      var u = new fd(_.E.c, !0);
      u.data = { R: _.Y.ja };
      this.k(u);
    }
  };
  g9.prototype.qJ = function (j) {
    for (var y = 0; y < this._s.length; y++)
      if (this._s[y].Tf.My == j) return this._s[y];
  };
  g9.prototype.ada = function (j) {
    var q = this.qJ(j);
    if (q == null) return;
    this.qQ[q.zd].su(q.Tf);
  };
  g9.prototype.Wz = function (j, q, m) {
    var n = this._s;
    for (var y = 0; y < n.length; y++) n[y].Tf.Wz(j, q, m);
  };
  g9.prototype.oo = function (j, q, m, n, G) {
    var W = this._s;
    for (var y = 0; y < W.length; y++) W[y].Tf.oo(j, q, m, n, G);
  };
  g9.prototype.C3 = function (j, q, m, n, G) {
    var W = this._s;
    for (var y = 0; y < W.length; y++) W[y].Tf.C3(j, q, m, n, G);
  };
  g9.prototype.H_ = function (j, q, m, n, G) {
    var W = this._s;
    for (var y = 0; y < W.length; y++) W[y].Tf.H_(j, q, m, n, G);
  };
  function bt(j, q) {
    c6.call(this, "toolbar");
    this._.removeChild(this.Uq);
    this.a9 = J.m("div", "tools");
    this._.appendChild(this.a9);
    this.Xr = null;
    this.RW = null;
    this.aou = q;
    this.JX = null;
    this.MH = null;
    this.a9N = -1;
    var m = window.locStor.getItem("_ltools");
    this.j1 = m ? m.split(",") : [];
    this.aIv = j;
    this.Z = null;
    this.Ha = null;
    this.bT = null;
    this.aaw = null;
    this.aK = new g8();
    this.aK._.style.marginTop = "5px";
    this.aK._.style.marginBottom = "3px";
    this.aK.parent = this;
    this._C = new kv(J.CP("lrs/mask"), !1, [6, 6, 1]);
    this._C.Q(
      "click",
      function (k) {
        if (Date.now() - this.d5 < 300) {
          var T = new fd(_.E.c, !0);
          T.data = { R: _.Y.s0, kO: "preferences" };
          this.k(T);
        } else {
          var T = new fd(_.E.w, !0);
          T.l = L.ag;
          T.data = { R: "qmask" };
          this.k(T);
          this.d5 = Date.now();
        }
      },
      this
    );
    var n = new bl(
      null,
      ["Ctrl", "Alt", "Shift", "No Touch"],
      !0,
      null,
      null,
      !0
    );
    n.Q(_.E.n, this.ajm, this);
    var G = J.m("span", "rangecontFloat form padded");
    G.appendChild(n._);
    J.F(G, "position:absolute; width:119px; z-index:2;  padding-right:0px; ");
    var W = this._;
    this.aIV = [!1, !1, !1, !1];
    this.HQ = new kv(J.CP("kb"), !1, "Virtual Keys");
    this.HQ.Q(
      "click",
      function (k) {
        var T = this.HQ._.getBoundingClientRect();
        G.style.top = T.top - 110 + "px";
        G.style.left = T.left + T.width + 8 + "px";
        if (J.JO(G)) {
          J.P5({ _: G }, W);
        } else {
          W.appendChild(G);
          J.ic({ _: G });
        }
      },
      this
    );
  }
  bt.prototype = new c6();
  bt.prototype.ajm = function (j) {
    var q = j.target.V();
    this.HQ.q(q[0] || q[1] || q[2] || q[3]);
    var m = new fd(_.E.c, !0);
    for (var y = 0; y < 4; y++) {
      if (q[y] != this.aIV[y]) {
        m.data = {
          R: _.Y.aIe,
          qT: q[y],
          aya: [
            gn.u0() ? "MetaLeft" : "ControlLeft",
            "AltLeft",
            "ShiftLeft",
            "NoTouch",
          ][y],
        };
        this.k(m);
      }
    }
    this.aIV = q.slice(0);
  };
  bt.prototype.abS = function (j, q) {
    this.JX = q;
    this.MH = j ? j.iE : null;
    if (j == null || j.J.length == 0 || j.U[j.J[0]] == null) return;
    var m = j._C() != null,
      n = j.I.rO,
      G = j.U[j.J[0]].ma,
      W = G == 1 || G == 3 || m || n[0] + n[1] + n[2] == 1;
    this.aK.anv(W);
    this._C.q(m);
  };
  bt.prototype.aD9 = function (j, q) {
    var m = j.length,
      n = [];
    for (var y = 0; y < m; y++) n[y] = j[y].slice(0);
    j = n;
    var G = [
        1, 2, 4, 5, 7, 8, 7, 9, 11, 12, 14, 15, 14, 16, 10, 11, 1, 3, 17, 18, 7,
        6, 13, 14,
      ],
      W = Math.min(G.length / 2, m - q);
    for (var y = 0; y < W; y++) {
      var k = G[2 * y],
        T = G[2 * y + 1];
      j[k] = j[k].concat(j[T]);
      j[T] = null;
    }
    for (var y = 0; y < j.length; y++)
      if (j[y] == null) {
        j.splice(y, 1);
        y--;
      }
    return j;
  };
  bt.prototype.a1s = function (j, q) {
    for (var y = 0; y < q.length; y++)
      for (var m = 0; m < q[y].length; m++) if (q[y][m].l.id == j) return y;
  };
  bt.prototype.a7e = function (j) {
    var q = this.aIv;
    this.Ha = [];
    this.bT = [];
    this.aaw = [];
    this.Z = [];
    var m = q.hR;
    if (j != null && this.aou) m = this.aD9(m, j);
    var n = this.Xr;
    if (n) {
      var G = [];
      for (var y = 0; y < m.length; y++) {
        var W = [];
        for (var k = 0; k < m[y].length; k++) {
          var T = m[y][k];
          if (n == null || n.indexOf(parseInt(T.l.id)) != -1) W.push(T);
        }
        if (W.length > 0) G.push(W);
      }
      m = G;
    }
    for (var y = 0; y < m.length; y++) {
      var b = [],
        c = this.Ha.length,
        a = null,
        f = -1;
      for (var k = 0; k < m[y].length; k++) {
        var T = m[y][k].l,
          U = this.a1s(T.id, q.hR),
          Z = q.keys[U];
        if (Z == gn.jF && k == 1) Z = gn.Fb;
        this.Z.push(T);
        var h = new aB(T.name, Z, T.af, this.Ha.length, y, m[y].length > 1);
        this.Ha.push(h);
        var u = this.j1.indexOf(T.id);
        if (u == -1) u = 0;
        if (u > f) {
          f = u;
          a = h;
        }
        h.Q(_.E.n, this.FY, this);
        h.Q("mover", this.kw, this);
        b.push({ name: T.name, _9: T.af, RP: Z ? Z.Lj : "" });
      }
      this.bT.push(a);
      this.aaw.push(b.length == 1 ? null : [b, c]);
    }
  };
  bt.prototype.X3 = function (j, q) {
    var m = (this.uu = q),
      n = 20;
    if (1 < J.IC() && J.IC() < 1.5) n = 20 / J.IC();
    n += 12.7;
    var G = this.uu > 640 && ei == 0 ? 2 : 1,
      W = 34 + 5 + 3 + G * (n + 4),
      k = Math.floor((m - W) / n);
    if (k != this.a9N) {
      this.a9N = k;
      this.a7e(k);
      this.yx();
    }
    var T = this.bT.length * n + W,
      b = Math.min(1, m / T);
    if (0.75 <= b) {
      J.F(
        this.a9,
        "width:34px; transform-origin: top left; transform: scale(" +
          b +
          "," +
          b +
          ");"
      );
      J.F(this._, "height:" + (q - 2) + "px;");
    } else {
      m -= 4;
      J.F(
        this.a9,
        "height: " + m + "px;  width:" + Math.ceil(T / m) * 34 + "px"
      );
      J.F(this._, "");
    }
  };
  bt.prototype.T = function () {
    if (this.Z == null) return;
    for (var y = 0; y < this.Ha.length; y++) this.Ha[y].T();
  };
  bt.prototype.FY = function (j) {
    var q = new fd(_.E.c, !0);
    q.data = { R: _.Y.UK, l: this.Z[j.id].id };
    this.k(q);
  };
  bt.prototype.acJ = function (j) {
    var q = j.target.arv + j.target.r9()[0];
    this.Ha[q].IB(null, !0);
  };
  bt.prototype.kw = function (j) {
    var q = this.JX,
      m = new fd(_.E.c, !0);
    m.data = { R: _.Y.zr };
    this.k(m);
    var n = j.target,
      G = this.aaw[n.fi];
    if (G == null) return;
    var W = new cG(G[0], null, !0);
    W.arv = G[1];
    W.fi = n.fi;
    W.Q("select", this.acJ, this);
    W.parent = this;
    W.T();
    var k = n._.getBoundingClientRect(),
      m = new fd(_.E.c, !0);
    m.data = { R: _.Y.wQ, Tf: W, x: k.left + k.width + 8, y: k.top };
    if (q == null || !(q.M(gn.Xe) || q.M(gn.A8))) this.k(m);
  };
  bt.prototype.yx = function (j) {
    if (j == null) j = this.RW;
    this.RW = j;
    if (this.Z == null) return;
    var q = this.j1.indexOf(j);
    if (q != -1) this.j1.splice(q, 1);
    this.j1.push(j);
    window.locStor.setItem("_ltools", this.j1.join(","));
    var m = -1;
    for (var y = 0; y < this.Z.length; y++) if (this.Z[y].id == j) m = y;
    for (var y = 0; y < this.Ha.length; y++) {
      var n = this.Ha[y];
      n.aAt(m == y);
    }
    if (m == -1) return;
    this.bT[this.Ha[m].fi] = this.Ha[m];
    J.dI(this.a9);
    var G = this.bT;
    for (var y = 0; y < G.length; y++) {
      this.a9.appendChild(G[y]._);
    }
    if (!this.aou) return;
    if (ei < 2) this.a9.appendChild(this.aK._);
    if (this.uu > 640 && ei == 0) this.a9.appendChild(this._C._);
    if (ei < 2) this.a9.appendChild(this.HQ._);
  };
  bt.prototype.yp = function (j, q) {
    if (q == fG.HN && j.Xr) {
      this.Xr = j.Xr;
      this.a7e();
      this.yx();
    }
    this.aK.aa8(j.UP, j.vH);
    if (ei == 1 && (q == fG.f7 || q == fG.HN)) {
      this.aK.afK(j, this.MH);
    }
  };
  function aB(j, q, m, n, G, W) {
    kV.call(this);
    this.Cp = 0;
    this.DN = this.atu.bind(this);
    this.fi = G;
    this.a7 = n;
    this.xn = j;
    this.NA = q;
    this.ahc = W;
    this.af = m;
    this._ = J.m("button", "");
    this._.innerHTML = J.CP(this.af);
    if (this.ahc) {
      var k = J.m("img", "gsicon");
      k.setAttribute("src", PIMG["tools/corner"]);
      J.F(k, "position:absolute; right:0;  bottom:0; width:100%; height:100%;");
      this._.appendChild(k);
    }
    this._.addEventListener("touchstart", J.k$, !1);
    this.T();
    J.PD(this._, this.Q7.bind(this));
    J.sP(this._, this.IB.bind(this));
    this._.addEventListener("contextmenu", this.DN, !1);
    this._.addEventListener("contextmenu", aB.iO, !1);
  }
  aB.prototype = new kV();
  aB.iO = function (j) {
    j.stopPropagation();
    j.preventDefault();
    return !1;
  };
  aB.prototype.T = function () {
    var j = this.NA ? " (" + this.NA.Lj + ")" : "";
    this._.setAttribute("title", g$.get(this.xn) + j);
  };
  aB.prototype.Q7 = function (j) {
    aB._f = this.a7;
    this.Cp = setTimeout(this.DN, 160);
  };
  aB.prototype.IB = function (j, q) {
    if (q == null && aB._f != this.a7) return;
    clearTimeout(this.Cp);
    var m = new fd(_.E.n, !1);
    m.target = this;
    m.id = this.a7;
    this.k(m);
  };
  aB.prototype.atu = function (j) {
    var q = new fd("mover", !1);
    q.target = this;
    q.id = this.a7;
    this.k(q);
  };
  aB.prototype.aAt = function (j) {
    this._.className = j ? "toolbtn active" : "toolbtn";
  };
  function jv() {
    kV.call(this);
    this._ = J.m("div", "topbar");
    this.a6J = J.m("span");
    this.aHy = J.m("span");
    this.asq = 0;
    this._.appendChild(this.a6J);
    this._.appendChild(this.aHy);
    this.fg = null;
    this.a = null;
    this.VW = [];
    this.z6 = [];
    var j = this.Q7.bind(this);
    for (var y = 0; y < jv.data.length; y++) {
      var q = J.m("button");
      this.VW.push(q);
      var m = jv.data[y];
      q.addEventListener("mouseover", j, !1);
      J.PD(q, j);
    }
    this.lz = new kv([0, 13, 0], !1, null, !0);
    this.lz.Q("click", this.tY, this);
    this.RE = new kv(J.CP("tools/zoom", null, "autoscale"), !1, [12, 86]);
    this.RE.Q("click", this.tY, this);
    this.aJ5 = new kv(
      '<svg class="gsicon" version="1.1"  width="20" height="20" viewBox="8 8 20 20"><path d="m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z"></path><path d="m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z"></path><path d="m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z"></path><path d="M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z"></path></svg>',
      !1,
      "Fullscreen"
    );
    this.aJ5.Q("click", this.tY, this);
  }
  jv.prototype = new kV();
  jv.prototype.apg = function () {
    if (this.z6.length != 0) return;
    for (var y = 0; y < jv.data.length; y++) {
      var j = jv.data[y],
        q = new cG(j.items, j.L1);
      q.parent = this;
      this.z6.push(q);
    }
    this.T();
  };
  jv.prototype.T = function () {
    this.lz.T();
    this.RE.T();
    this.aJ5.T();
    for (var y = 0; y < this.VW.length; y++)
      this.VW[y].textContent = g$.get(jv.data[y].name);
    this.axT();
    for (var y = 0; y < this.z6.length; y++) this.z6[y].T();
  };
  jv.prototype.tY = function (j) {
    var q = new fd(_.E.c, !0);
    if (j.target == this.lz) q.data = { R: _.Y.s0, kO: "account" };
    else if (j.target == this.RE) q.data = { R: _.Y.b9 };
    else q.data = { R: _.Y.VU, CQ: !0 };
    this.k(q);
  };
  jv.prototype.LW = function (j, q) {
    this.fg = j;
    this.a = q;
  };
  jv.prototype.yp = function (j, q) {
    this.a = j;
    if (q == fG.HN) {
      var m = j.a2z;
      J.dI(this.a6J);
      for (var y = 0; y < this.VW.length; y++) {
        var n = jv.data[y];
        if (m == null || m[y] == 1 || m[y] instanceof Array)
          this.a6J.appendChild(this.VW[y]);
        if (m != null && m[y] instanceof Array) {
          this.apg();
          this.z6[y].avV(m[y]);
        }
      }
      var G = this.aHy;
      J.dI(G);
      if (j.Nf) {
        G.appendChild(this.lz._);
      }
      G.appendChild(this.RE._);
      G.appendChild(this.aJ5._);
    }
    this.axT();
  };
  jv.prototype.axT = function (j, q) {
    var m = this.lz,
      n = 12255232;
    if (lw.xq()) n = lw.eo() ? 43520 : 16755200;
    J.F(m._, "color:#ffffff; background-color:#" + B.bw(n));
  };
  jv.prototype.Q7 = function (j) {
    this.apg();
    var y = this.VW.indexOf(j.currentTarget),
      q = this.z6[y];
    if (j.type == "mouseover" && !J.JO(this.z6[this.asq]._)) return;
    if (J.JO(q._)) return;
    j.a7O = !0;
    this.asq = y;
    for (var y = 0; y < jv.data.length; y++) this.z6[y].update(this.fg, this.a);
    var m = j.target.getBoundingClientRect(),
      n = new fd(_.E.c, !0);
    n.data = { R: _.Y.wQ, Tf: q, x: m.left, y: m.top + m.height + 2, acG: !0 };
    this.k(n);
  };
  jv.amq = function (j) {
    var q = gn,
      m = q.A8,
      n = q.X6,
      G = q.O4,
      W = function (x) {
        return { f: x != null };
      },
      k = function (x) {
        return { f: x != null && x.h != null };
      },
      T = function (x) {
        return { f: x != null && x.Ph(!1) };
      },
      b = function (x) {
        return { f: x != null && x.Ph(!1) && x.h != null };
      },
      c = [
        { name: [7, 0], f: W, RP: [m, q.Y] },
        { name: [7, 1], RP: [m, q.l_], f: ei == 2 ? null : k },
        { name: [7, 2], RP: [n, m, q.JC], f: k, q7: !0 },
        { name: "Remove BG", f: jv.MG },
        { name: [7, 8], f: W, QU: !0 },
        {
          name: [7, 13],
          QU: !0,
          f: function (x) {
            return { f: x != null && x.J.length != 0 && !x.U[x.J[0]].H.jG() };
          },
        },
        { name: [7, 14], f: jv.MG, q7: !0 },
        {
          name: [7, 11],
          QU: !0,
          f: function (x) {
            return { f: x != null && x.J.length != 0 && !x.U[x.J[0]].H.jG() };
          },
        },
        {
          name: [7, 3],
          f: W,
          q7: !0,
          sub: [
            { name: [7, 9], QU: !0, f: k },
            { name: [19, 3, 0], QU: !0, f: k },
            { name: [7, 4], QU: !0, f: k },
            { name: [7, 5], QU: !0, f: k },
            { name: [7, 6], QU: !0, f: k, RP: "Shift+F6" },
          ],
        },
        { name: [7, 15], f: k },
        { name: [7, 16], f: k, q7: !0 },
        { name: [7, 10], f: k, q7: !0 },
        {
          name: [6, 6, 1],
          f: function (x) {
            return { f: x != null, Wr: x != null && x._C() != null };
          },
          RP: [q.apK],
          q7: !0,
        },
        {
          name: [
            [23, 6],
            [17, 2],
          ],
        },
        { name: ["VAR0 VAR1", [1, 2], [17, 2]], f: k },
      ],
      a = [
        { p: _.E.NI, d: L.pI.TP(!0) },
        { p: _.E.NI, d: L.pI.TP() },
        { p: _.E.NI, d: { _D: "inverse" } },
        { p: _.E.w, l: L.ag, d: { R: "bgrm", K: 1 } },
        { p: _.E.c, d: { R: _.Y.s0, kO: "crange" } },
        { p: _.E.c, d: { R: _.Y.s0, kO: "magiccut" } },
        { p: _.E.w, l: L.ag, d: { R: "bgrm", K: 2 } },
        { p: _.E.c, d: { R: _.Y.s0, kO: "redge" } },
        {
          sub: [
            { p: _.E.c, d: { R: _.Y.s0, kO: "sel_border" } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "sel_smoothness" } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "sel_expand" } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "sel_contract" } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "sel_feather" } },
          ],
        },
        {
          p: _.E.NI,
          d: {
            _D: "grow",
            SC: {
              classID: "null",
              null: {
                t: "obj ",
                v: [{ t: "prop", v: { classID: "Chnl", keyID: "fsel" } }],
              },
            },
          },
        },
        {
          p: _.E.NI,
          d: {
            _D: "similar",
            SC: {
              classID: "null",
              null: {
                t: "obj ",
                v: [{ t: "prop", v: { classID: "Chnl", keyID: "fsel" } }],
              },
            },
          },
        },
        { p: _.E.c, d: { R: _.Y.UK, l: L.IX } },
        { p: _.E.w, l: L.ag, d: { R: "qmask" } },
        { p: _.E.c, d: { R: _.Y.s0, kO: "loadsel" } },
        { p: _.E.c, d: { R: _.Y.s0, kO: "savesel" } },
      ];
    if (j) {
      var f = [
          1,
          2,
          8,
          7,
          "",
          14,
          "a",
          "",
          "b",
          "c",
          "d",
          "",
          "e",
          11,
          "",
          "f",
          "g",
        ],
        U = {
          a: [
            { name: "Make Work Path", f: k },
            { p: _.E.NI, d: L.pI.aiC() },
          ],
          b: [
            { name: [6, 49, 0], f: k },
            { p: _.E.NI, d: { _D: "copyToLayer" } },
          ],
          c: [
            { name: [6, 49, 1], f: b },
            { p: _.E.NI, d: { _D: "cutToLayer" } },
          ],
          d: [{ name: [6, 13] }, { p: _.E.w, l: L.W1, d: { R: R.YJ } }],
          e: [
            { name: [10, 16], f: W },
            { p: _.E.c, d: { R: _.Y.UK, l: L.Fg } },
          ],
          f: [
            { name: [2, 3], f: b, QU: !0 },
            { p: _.E.c, d: { R: _.Y.s0, kO: "fill" } },
          ],
          g: [
            { name: [14, 9], f: b, QU: !0 },
            { p: _.E.c, d: { R: _.Y.s0, kO: "stroke" } },
          ],
        },
        Z = [],
        h = [];
      for (var y = 0; y < f.length; y++) {
        var u = f[y];
        if (c[u]) {
          var i = c[u];
          i.q7 = !1;
          delete i.RP;
          Z.push(i);
          h.push(a[u]);
        } else if (u == "") {
          Z[Z.length - 1].q7 = !0;
        } else if (U[u]) {
          var i = U[u];
          Z.push(i[0]);
          h.push(i[1]);
        }
      }
      a = h;
      c = Z;
    }
    return { name: [0, 5], items: c, L1: a };
  };
  jv.MG = function (j) {
    return {
      f: J.Q_(1) && j != null && j.J.length != 0 && !j.U[j.J[0]].H.jG(),
    };
  };
  jv.xF = function (j, q) {
    if (j == null || j.J.length == 0) return !1;
    var m = j.U[j.J[0]];
    return m.add.TySh != null && q.RW == L.G_;
  };
  jv.ajq = function () {
    var j = gn,
      q = j.A8,
      m = j.X6,
      n = j.O4,
      G = function (W) {
        return { f: W != null };
      };
    return [
      [
        {
          name: [5, 0],
          RP: [q, j.Bi],
          f: function (W, k) {
            return { f: W != null && (W.aLJ() || jv.xF(W, k)) };
          },
        },
        { name: [5, 1], RP: [q, j.dV], f: G },
        {
          name: [5, 2],
          RP: [q, j.qj],
          f: function (W, k) {
            return {
              f:
                jv.xF() ||
                J.mC() ||
                k.kJ != null ||
                k.jX != null ||
                k.aqK != null,
            };
          },
        },
        {
          name: [2, 2],
          f: function (W, k) {
            return {
              f:
                W != null &&
                (W.h != null ||
                  jv.xF(W, k) ||
                  (ei == 2 && W.J.length == 1 && W.U[W.J[0]].Y.J.length != 0)),
            };
          },
          RP: "Delete",
          q7: !0,
        },
      ],
      [
        { p: _.E.c, d: { R: _.Y.rE } },
        { p: _.E.c, d: { R: _.Y.sp } },
        { p: _.E.c, d: { R: _.Y.YV } },
        ei != 2
          ? { p: _.E.NI, d: { _D: "delete" } }
          : { p: _.E.w, l: L.Lx, d: { R: "remove", ER: "Clear Notes" } },
      ],
    ];
  };
  jv.dp = function (j, q) {
    var m = function (c) {
        return {
          f: c != null && c.J.length != 0 && c.U[c.J[0]].add.SoLd != null,
        };
      },
      n = function (c) {
        return { f: c != null };
      },
      G = [],
      W = [],
      k = "none maxx avrg medn minn rang stdv summ vari".split(" "),
      T = [
        [22, 5, 0],
        [24, 17, 2],
        [24, 3, 0],
        [24, 7, 3],
        [24, 17, 3],
        [12, 12],
        "Standard Deviation",
        "Summation",
        "Variance",
      ];
    for (var y = 0; y < k.length; y++) {
      G.push({
        name: T[y],
        f: function (c, a) {
          if (c == null || c.J.length != 1) return { f: !1 };
          var f = c.U[c.J[0]].add.SoLd;
          if (f == null) return { f: !1 };
          return { f: !0, Wr: f.Impr.v.classID == this.a4c };
        }.bind({ a4c: k[y] }),
      });
      W.push({ p: _.E.w, l: L.W1, d: { R: R.b1, jt: k[y] } });
    }
    var b = {
      name: [6, 7, 1],
      f: n,
      q7: !0,
      sub: [
        { name: [6, 7, 0] },
        { name: "New Smart Obj. via Copy", f: m, q7: !0 },
        { name: "Open (Edit Contents)", f: m, QU: !0 },
        { name: "Reset Transform", f: m },
        { name: "Replace Contents", f: m, QU: !0 },
        { name: "Export Contents", f: m, QU: !0, q7: !0 },
        { name: "Convert to Layers", f: m, QU: !0, q7: !0 },
        { name: [6, 36, 4], f: m, sub: G },
        { name: "Turn into JPG", f: m },
      ],
    };
    if (!j)
      b = {
        sub: [
          { p: _.E.NI, d: { _D: "newPlacedLayer" } },
          { p: _.E.NI, d: { _D: "placedLayerMakeCopy" } },
          {
            p: _.E.NI,
            d: {
              _D: "placedLayerEditContents",
              SC: { classID: "placedLayerEditContents" },
            },
          },
          {
            p: _.E.NI,
            d: {
              _D: "placedLayerResetTransforms",
              SC: { classID: "placedLayerResetTransforms" },
            },
          },
          {
            p: _.E.NI,
            d: {
              _D: "placedLayerReplaceContents",
              SC: { classID: "placedLayerReplaceContents" },
            },
          },
          {
            p: _.E.NI,
            d: {
              _D: "placedLayerExportContents",
              SC: { classID: "placedLayerExportContents" },
            },
          },
          {
            p: _.E.NI,
            d: {
              _D: "placedLayerConvertToLayers",
              SC: { classID: "placedLayerConvertToLayers" },
            },
          },
          { sub: W },
          { p: _.E.w, l: L.W1, d: { R: R.aGz } },
        ],
      };
    if (q) b.sub.splice(0, 1);
    return b;
  };
  jv.data = (function () {
    var j = gn,
      q = j.A8,
      m = j.X6,
      n = j.O4,
      G = function (v) {
        return { f: v != null && v.J.length != 0 };
      },
      W = function (v) {
        return { f: v != null };
      },
      k = function (v) {
        return { f: v != null && v.Ph(!1) };
      },
      T = function (v) {
        return { f: v != null && v.Ph(!1) && !v.U[v.J[0]].H.jG() };
      },
      b = function (v) {
        return {
          f: v != null && v.J.length != 0 && v.U[v.J[0]].add.vmsk != null,
        };
      },
      c = jv.ajq(!0),
      a = [],
      f = [],
      U = [],
      Z = "assignProfile",
      h = "convertToProfile",
      u = function (v, K, y) {
        return { Wr: v != null && v.amk() == y, f: !0 };
      };
    for (var y = 0; y < fb.HR.length; y++) {
      var i = fb.HR[y];
      a.push({ name: i, f: u });
      var x = { classID: Z, null: jw.$W("Dcmn", !0) };
      if (i != "sRGB") x.profile = { t: "TEXT", v: fb.H2[y] };
      var X = { classID: h, null: jw.$W("Dcmn", !0) };
      X.T = { t: "TEXT", v: fb.H2[y] };
      f.push({ p: _.E.NI, d: { _D: Z, SC: x } });
      U.push({ p: _.E.NI, d: { _D: h, SC: X } });
    }
    var $ = [
        {
          name: [0, 0],
          items: [
            { name: [5, 3], RP: [n, q, j.Jd], title: [11, 7], QU: !0 },
            { name: [1, 0], RP: [q, j.pd], QU: !0 },
            { name: [1, 11], QU: !0, f: W },
            {
              name: ["VAR0 VAR1", [1, 0], [0, 14]],
              q7: !0,
              sub: [
                { name: "From Any Folder" },
                { name: [1, 19, 1], QU: !0, RP: [n, q, j.pd] },
                { name: [1, 5], QU: !0 },
                { name: [11, 0], QU: !0 },
                { name: ["PSD VAR0", [25, 0]], QU: !0 },
              ],
            },
            {
              name: [1, 18],
              q7: !0,
              f: W,
              sub: [
                {
                  name: "PNG",
                  RP: "Imgur.com",
                  f: function (v, K) {
                    return { f: v != null && K.Xi };
                  },
                },
                {
                  name: "JPG",
                  RP: "Imgur.com",
                  f: function (v, K) {
                    return { f: v != null && K.Xi };
                  },
                },
                {
                  name: ei == 0 ? "PSD" : "AI",
                  RP: ["Photo", "Vector"][ei] + "pea.com",
                  f: function (v, K) {
                    return { f: v != null && K.Xi && !v.uF };
                  },
                },
              ],
            },
            {
              name: "Save ...",
              RP: [q, j.ng],
              f: function (v, K) {
                var S = g$.get([1, 2]),
                  o = !0;
                if (v) {
                  if (v.ps) S += " (" + g$.get([6, 7, 1]) + ")";
                  if (v.Co) S += " (Google Drive)";
                  if (v.qu) S += " (" + Storage.list[v.qu[0]][0] + ")";
                  o = gh.Kd.indexOf(v.tg) != -1;
                  if (ei == 1) o = v.tg == "ai";
                }
                return {
                  f:
                    v != null &&
                    (v.qu != null ||
                      (v.ff != null && o) ||
                      v.ps != null ||
                      (v.vt != null && v.vt.wS != null) ||
                      v.Co != null ||
                      K.ZT.save != null),
                  sO: S,
                };
              },
            },
            {
              name: [[1, 3], "Save as AI", "Save as MID"][ei],
              f: function (v, K) {
                return { f: v != null && K.Xi };
              },
            },
            {
              name: ["VAR0 VAR1", [1, 2], [0, 14]],
              f: W,
              sub: [
                {
                  name: ["VAR0 VAR1", ei == 0 ? "PSD" : "AI", [1, 19, 2]],
                  f: function (v, K) {
                    return { f: v != null && K.Xi };
                  },
                },
                {
                  name: ["VAR0 PSD/PSB", [1, 2]],
                  QU: !0,
                  f: function (v, K) {
                    return { f: ei == 0 && v != null && K.Xi };
                  },
                },
              ],
            },
            {
              name: [1, 8],
              f: W,
              sub: (function () {
                var v = gh.ab(0),
                  K = [];
                for (var y = 0; y < v.length; y++)
                  K.push({ name: v[y], RP: "." + v[y].toLowerCase() });
                K.push({
                  name: [0, 14],
                  sub: (function () {
                    var v = gh.ab(1),
                      K = [];
                    for (var y = 0; y < v.length; y++)
                      K.push({ name: v[y], RP: "." + v[y].toLowerCase() });
                    return K;
                  })(),
                });
                return K;
              })(),
            },
            { name: [1, 4], QU: !0, f: W, q7: !0, RP: [q, j.cp] },
            { name: [1, 9], QU: !0, f: W },
            { name: "Export Color Lookup", QU: !0, f: W, q7: !0 },
            { name: [1, 14], QU: !0, f: W, q7: !0 },
            {
              name: [1, 17],
              sub: [
                { name: "Batch", QU: !0 },
                { name: "PDF Presentation", QU: !0 },
                { name: "Convert Formats", QU: !0 },
                { name: "Generate Mockups", QU: !0, f: W },
                { name: "Resize Images", QU: !0, q7: !0 },
                { name: "Crop and Straighten Photos", f: W },
              ],
            },
            { name: [1, 10], QU: !0 },
          ],
          L1: [
            { p: _.E.c, d: { R: _.Y.s0, kO: "newproject" } },
            { p: _.E.c, d: { R: _.Y.z1 } },
            { p: _.E.c, d: { R: _.Y.z1, aLy: !0 } },
            {
              sub: [
                { p: _.E.c, d: { R: _.Y.z1, od: !0 } },
                { p: _.E.c, d: { R: _.Y.s0, kO: "storwindow", io: 0 } },
                { p: _.E.c, d: { R: _.Y.s0, kO: "open_from_url" } },
                { p: _.E.c, d: { R: _.Y.s0, kO: "camera" } },
                { p: _.E.c, d: { R: _.Y.s0, kO: "res0" } },
              ],
            },
            {
              sub: [
                { p: _.E.c, d: { R: _.Y.KC, hr: "png" } },
                { p: _.E.c, d: { R: _.Y.KC, hr: "jpg" } },
                { p: _.E.c, d: { R: _.Y.KC, hr: ei == 0 ? "psd" : "ai" } },
              ],
            },
            { p: _.E.c, d: { R: _.Y.ON } },
            { p: _.E.c, d: { R: _.Y.Ks } },
            {
              sub: [
                { p: _.E.c, d: { R: _.Y.s0, kO: "storwindow", io: 1 } },
                { p: _.E.c, d: { R: _.Y.s0, kO: "savepsb" } },
              ],
            },
            {
              sub: (function () {
                var v = gh.ab(0),
                  K = [];
                for (var y = 0; y < v.length; y++)
                  K.push({
                    p: _.E.c,
                    d: { R: _.Y.s0, kO: "saveforweb", hr: y },
                  });
                K.push({
                  sub: (function () {
                    var S = gh.ab(0).length,
                      v = gh.ab(1),
                      K = [];
                    for (var y = 0; y < v.length; y++)
                      K.push({
                        p: _.E.c,
                        d: { R: _.Y.s0, kO: "saveforweb", hr: S + y },
                      });
                    return K;
                  })(),
                });
                return K;
              })(),
            },
            { p: _.E.c, d: { R: _.Y.s0, kO: "saveforweb", hr: 3, aoZ: !0 } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "eassets" } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "exlut" } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "finfo" } },
            {
              sub: [
                { p: _.E.c, d: { R: _.Y.s0, kO: "batch" } },
                { p: _.E.c, d: { R: _.Y.s0, kO: "pdfpres" } },
                { p: _.E.c, d: { R: _.Y.s0, kO: "cformat" } },
                { p: _.E.c, d: { R: _.Y.s0, kO: "mockups" } },
                { p: _.E.c, d: { R: _.Y.s0, kO: "resize" } },
                { p: _.E.w, l: L.aC, d: { R: "cropAndStr" } },
              ],
            },
            { p: _.E.c, d: { R: _.Y.s0, kO: "script" } },
          ],
        },
        {
          name: [0, 1],
          items: [
            { name: [2, 8], f: W },
            { name: [2, 0], f: W, RP: [m, q, j.AQ] },
            { name: [2, 1], f: W, RP: [q, j.AQ], q7: !0 },
            {
              name: [2, 11],
              RP: [m, q, j.gM],
              q7: !0,
              QU: !0,
              f: function (v, K) {
                return { f: i1.a3I(v) && K.RW != L.Fg };
              },
            },
            c[0][0],
            c[0][1],
            {
              name: [5, 7],
              RP: [m, q, j.dV],
              f: function (v) {
                return { f: v != null && v.h != null };
              },
            },
            c[0][2],
            c[0][3],
            { name: [2, 3], f: k, QU: !0, RP: [m, j.a1O] },
            { name: [14, 9], f: k, QU: !0, q7: !0 },
            { name: [10, 48], f: k },
            {
              name: [10, 46],
              f: function (v) {
                return { f: L.Zm.$m(v) };
              },
            },
            {
              name: "Perspective Warp",
              f: function (v) {
                return { f: L.Zm.$m(v) };
              },
            },
            { name: [10, 16], f: W, RP: [n, q, j.a_] },
            { name: [2, 4], f: W, sub: ic.oc() },
            { name: [2, 10, 1], f: W },
            { name: [2, 10, 0], f: W, q7: !0 },
            { name: "Assign Profile", sub: a },
            { name: "Convert to Profile", sub: a, q7: !0 },
            {
              name: [12, 87],
              f: W,
              sub: [
                { name: [12, 62], f: W },
                { name: [9, 3], f: W },
                {
                  name: [10, 31],
                  f: function (v) {
                    return { f: v != null && v.ac()[1].length != 0 };
                  },
                },
              ],
            },
            { name: [1, 15], QU: !0 },
            { name: [12, 79], QU: !0, RP: [q, j.aj] },
            { name: [1, 13], QU: !0 },
          ],
          L1: [
            { p: _.E.w, l: L.cJ, d: { R: "h_undoredo" } },
            { p: _.E.w, l: L.cJ, d: { R: "h_stepfwd" } },
            { p: _.E.w, l: L.cJ, d: { R: "h_stepbck" } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "afw_fade" } },
            c[1][0],
            c[1][1],
            { p: _.E.c, d: { R: _.Y.sp, eN: !0 } },
            c[1][2],
            c[1][3],
            { p: _.E.c, d: { R: _.Y.s0, kO: "fill" } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "stroke" } },
            { p: _.E.c, d: { R: _.Y.UK, l: L.I6 } },
            { p: _.E.w, l: L.b_, d: { R: "start", aA: "rigidTransform" } },
            {
              p: _.E.w,
              l: L.b_,
              d: { R: "start", aA: "perspectiveWarpTransform" },
            },
            { p: _.E.c, d: { R: _.Y.UK, l: L.Fg } },
            { sub: ic.Bg() },
            {
              p: _.E.NI,
              d: {
                _D: "align",
                SC: {
                  classID: "null",
                  null: {
                    t: "obj ",
                    v: [
                      {
                        t: "Enmr",
                        v: { classID: "Lyr", typeID: "Ordn", enum: "Trgt" },
                      },
                    ],
                  },
                  Usng: { t: "enum", v: { ADSt: "ADSContent" } },
                  alignToCanvas: { t: "bool", v: !1 },
                  Aply: { t: "enum", v: { projection: "Auto" } },
                  vignette: { t: "bool", v: !1 },
                  radialDistort: { t: "bool", v: !1 },
                },
              },
            },
            { p: _.E.w, l: L.W1, d: { R: R.ax4 } },
            { sub: f },
            { sub: U },
            {
              sub: [
                { p: _.E.c, d: { R: _.Y.Gg, rw: 0 } },
                { p: _.E.c, d: { R: _.Y.Gg, rw: 1 } },
                { p: _.E.c, d: { R: _.Y.Gg, rw: 2 } },
              ],
            },
            { p: _.E.c, d: { R: _.Y.s0, kO: "pmanager" } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "preferences" } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "locstor" } },
          ],
        },
        {
          name: [0, 2],
          items: [
            {
              name: [12, 36],
              f: W,
              q7: !0,
              sub: [
                {
                  name: "RGB",
                  f: function (v) {
                    if (v == null) return { f: !1 };
                    return { Wr: v.add.fcmy == null, f: !0 };
                  },
                },
                {
                  name: "CMYK",
                  q7: !0,
                  f: function (v) {
                    if (v == null) return { f: !1 };
                    return { Wr: v.add.fcmy != null, f: v.depth != 32 };
                  },
                },
              ].concat(
                cP
                  ? [
                      {
                        name: "8 Bits/Channel",
                        f: function (v) {
                          if (v == null) return { f: !1 };
                          return { Wr: v.depth == 8, f: !0 };
                        },
                      },
                      {
                        name: "16 Bits/Channel",
                        f: function (v) {
                          if (v == null) return { f: !1 };
                          return { Wr: v.depth == 16, f: !0 };
                        },
                      },
                      {
                        name: "32 Bits/Channel",
                        f: function (v) {
                          if (v == null) return { f: !1 };
                          return { Wr: v.depth == 32, f: v.add.fcmy != 1 };
                        },
                      },
                    ]
                  : []
              ),
            },
            {
              name: [3],
              f: W,
              q7: !0,
              sub: (function () {
                var v = [];
                for (var K in eV.names) {
                  v.push({
                    name: eV.names[K],
                    QU: gj[K] != null,
                    RP: eV.keys[K],
                    q7: eV.aa_.indexOf(K) != -1,
                  });
                  if (K == "selc") {
                    v.push({
                      name: ["VAR0/VAR1", [19, 6, 0], [19, 6, 2]],
                      QU: !0,
                      q7: !0,
                    });
                    v.push({ name: [19, 7, 0], RP: [q, m, j.Si], f: k });
                    v.push({ name: [4, 18], QU: !0, f: k });
                  }
                }
                return v;
              })(),
            },
            { name: [4, 16, 0], f: k },
            { name: [4, 16, 1], f: k },
            { name: [4, 16, 2], f: k, q7: !0 },
            { name: [11, 11, 1], f: T, QU: !0 },
            { name: [11, 11, 0], f: T, QU: !0 },
            { name: "Wavelet Decompose", f: T, q7: !0 },
            { name: [11, 3], f: W, QU: !0, RP: [n, q, j.dV] },
            { name: [11, 10], f: W, QU: !0, RP: [n, q, j.JC] },
            {
              name: [2, 4],
              f: W,
              sub: [
                { name: ["VAR0 90\xB0 \u21BB", [2, 5]] },
                { name: ["VAR0 90\xB0 \u21BA", [2, 5]] },
                { name: ["VAR0 180\xB0", [2, 5]] },
                {
                  name: [
                    [2, 6],
                    [22, 4, 2],
                  ],
                },
                {
                  name: [
                    [2, 6],
                    [22, 4, 3],
                  ],
                },
              ],
            },
            {
              name: [11, 12, 1],
              f: function (v) {
                return { f: v != null && v.h != null };
              },
            },
            { name: [11, 12, 0], f: W, RP: [q, j.$b], QU: !0 },
            { name: [11, 12, 2], f: W, q7: !0 },
            { name: [12, 53], f: W },
            { name: [2, 12], f: k, QU: !0, q7: !0 },
            { name: [2, 14], f: W, QU: !0 },
          ],
          L1: [
            {
              sub: [
                { p: _.E.w, l: L.Lx, d: { R: "fcmy", K: 0 } },
                { p: _.E.w, l: L.Lx, d: { R: "fcmy", K: 1 } },
                {
                  p: _.E.NI,
                  d: {
                    _D: "convertMode",
                    SC: {
                      classID: "CnvM",
                      Dpth: { t: "long", v: 8 },
                      Mrge: { t: "bool", v: !1 },
                    },
                  },
                },
                {
                  p: _.E.NI,
                  d: {
                    _D: "convertMode",
                    SC: {
                      classID: "CnvM",
                      Dpth: { t: "long", v: 16 },
                      Mrge: { t: "bool", v: !1 },
                    },
                  },
                },
                {
                  p: _.E.NI,
                  d: {
                    _D: "convertMode",
                    SC: {
                      classID: "CnvM",
                      Dpth: { t: "long", v: 32 },
                      Mrge: { t: "bool", v: !1 },
                    },
                  },
                },
              ],
            },
            {
              sub: (function () {
                var v = [];
                for (var K in eV.names) {
                  v.push({ p: _.E.w, l: L.vP, d: { R: "start", QF: K } });
                  if (K == "selc") {
                    v.push({
                      p: _.E.w,
                      l: L.b_,
                      d: { R: "start", aA: "adaptCorrect" },
                    });
                    v.push({ p: _.E.NI, d: { _D: "desaturate" } });
                    v.push({
                      p: _.E.w,
                      l: L.vP,
                      d: { R: "start", QF: "matc" },
                    });
                  }
                }
                return v;
              })(),
            },
            {
              p: _.E.NI,
              d: {
                _D: "levels",
                SC: { classID: "Lvls", Auto: { t: "bool", v: !0 } },
              },
            },
            {
              p: _.E.NI,
              d: {
                _D: "levels",
                SC: { classID: "Lvls", AuCo: { t: "bool", v: !0 } },
              },
            },
            {
              p: _.E.NI,
              d: {
                _D: "levels",
                SC: {
                  classID: "Lvls",
                  autoBlackWhite: { t: "bool", v: !0 },
                  autoNeutrals: { t: "bool", v: !0 },
                },
              },
            },
            { p: _.E.c, d: { R: _.Y.s0, kO: "rcolors" } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "vbitmap" } },
            { p: _.E.w, l: L.W1, d: { R: R.ahk } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "csize" } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "isize" } },
            {
              sub: [
                { p: _.E.NI, d: L.Dq.R0(!0, 90) },
                { p: _.E.NI, d: L.Dq.R0(!0, -90) },
                { p: _.E.NI, d: L.Dq.R0(!0, -180) },
                { p: _.E.NI, d: L.Dq.R0(!1, "Hrzn") },
                { p: _.E.NI, d: L.Dq.R0(!1, "Vrtc") },
              ],
            },
            {
              p: _.E.NI,
              d: { _D: "crop", SC: { __name: "Crop", classID: "Crop" } },
            },
            { p: _.E.c, d: { R: _.Y.s0, kO: "trim" } },
            { p: _.E.NI, d: { _D: "revealAll", SC: { classID: "RvlA" } } },
            {
              p: _.E.NI,
              d: {
                _D: "duplicate",
                SC: { classID: "Dplc", null: jw.$W("Dcmn", !0) },
              },
            },
            { p: _.E.w, l: L.vP, d: { R: "start", QF: "aply" } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "varsdats" } },
          ],
        },
        {
          name: [0, 3],
          items: [
            {
              name: [5, 3],
              f: W,
              sub: [
                { name: [0, 3], RP: [m, q, j.Jd] },
                { name: [0, 4] },
                { name: [1, 16, 0], QU: !0 },
                { name: [1, 16, 3], QU: !0, q7: !0 },
                { name: [6, 49, 0], RP: [q, j.Uv] },
                {
                  name: [6, 49, 1],
                  RP: [m, q, j.Uv],
                  f: function (v) {
                    return { f: v != null && v.h != null && v.Ph(!1) };
                  },
                },
              ],
            },
            { name: [6, 0], f: G },
            { name: [11, 4], f: G },
            { name: [5, 4], f: G, q7: !0 },
            {
              name: "Text",
              f: function (v) {
                return {
                  f:
                    v != null &&
                    v.J.length != 0 &&
                    v.U[v.J[0]].add.TySh != null,
                };
              },
              sub: [{ name: [6, 40] }],
            },
            { name: [11, 6], f: G, q7: !0, sub: fr.Rk(!0) },
            {
              name: [6, 48, 1],
              f: W,
              sub: [
                { name: [6, 48, 0, 0] },
                { name: [6, 48, 0, 1] },
                { name: [6, 48, 0, 2] },
              ],
            },
            { name: [6, 1], f: W, q7: !0, sub: fr.a9i() },
            {
              name: [6, 2],
              f: W,
              sub: [
                {
                  name: [6, 4],
                  f: function (v) {
                    return {
                      f:
                        v != null &&
                        v.J.length != 0 &&
                        v.U[v.J[0]].ex() == null,
                    };
                  },
                },
                {
                  name: [6, 5, 0],
                  f: function (v) {
                    return {
                      f:
                        v != null &&
                        v.J.length != 0 &&
                        v.U[v.J[0]].ex() == null,
                    };
                  },
                },
                {
                  name: [6, 5, 1],
                  f: function (v) {
                    return {
                      f:
                        v != null &&
                        v.J.length != 0 &&
                        v.U[v.J[0]].ex() == null &&
                        v.h != null,
                    };
                  },
                },
                {
                  name: [6, 5, 2],
                  f: function (v) {
                    return {
                      f:
                        v != null &&
                        v.J.length != 0 &&
                        v.U[v.J[0]].ex() == null &&
                        v.h != null,
                    };
                  },
                },
                {
                  name: [6, 5, 3],
                  f: function (v) {
                    return {
                      f:
                        v != null &&
                        v.J.length != 0 &&
                        v.U[v.J[0]].ex() == null,
                    };
                  },
                  q7: !0,
                },
                {
                  name: [5, 4],
                  f: function (v) {
                    return {
                      f:
                        v != null &&
                        v.J.length != 0 &&
                        v.U[v.J[0]].ex() != null,
                    };
                  },
                },
                {
                  name: [5, 8],
                  f: function (v) {
                    return {
                      f:
                        v != null &&
                        v.J.length != 0 &&
                        v.U[v.J[0]].ex() != null &&
                        v.Ph(!1, !0),
                    };
                  },
                },
                {
                  name: ["VAR0/VAR1", [5, 5], [5, 6]],
                  f: function (v) {
                    return {
                      f:
                        v != null &&
                        v.J.length != 0 &&
                        v.U[v.J[0]].ex() != null,
                    };
                  },
                },
              ],
            },
            {
              name: [6, 3],
              f: W,
              sub: [
                {
                  name: [6, 4],
                  f: function (v) {
                    return {
                      f:
                        v != null &&
                        v.J.length != 0 &&
                        v.U[v.J[0]].add.vmsk == null,
                    };
                  },
                },
                {
                  name: [6, 5, 0],
                  f: function (v) {
                    return {
                      f:
                        v != null &&
                        v.J.length != 0 &&
                        v.U[v.J[0]].add.vmsk == null,
                    };
                  },
                },
                {
                  name: [12, 76, 7],
                  f: function (v) {
                    return {
                      f:
                        v != null &&
                        v.J.length != 0 &&
                        v.U[v.J[0]].add.vmsk == null,
                    };
                  },
                  q7: !0,
                },
                { name: [5, 4], f: b },
                { name: ["VAR0/VAR1", [5, 5], [5, 6]], f: b },
              ],
            },
            a_.aJI(!0),
            jv.dp(!0),
            { name: [6, 8], f: a_.au1 },
            {
              name: [6, 34],
              q7: !0,
              f: function (v) {
                if (v == null || v.J.length == 0) return { f: !1 };
                var K = v.U[v.J[0]];
                return { f: K.add.lmfx != null && !K.D1() };
              },
            },
            { name: [6, 9], f: W, q7: !0, RP: [q, j.Vj] },
            {
              name: [6, 55],
              f: W,
              sub: [
                { name: [6, 56, 0], RP: [m, q, j.UZ] },
                { name: [6, 56, 1], RP: [q, j.UZ] },
                { name: [6, 56, 2], RP: [q, j.Z7] },
                { name: [6, 56, 3], RP: [m, q, j.Z7] },
              ],
            },
            {
              name: "Combine Shapes",
              f: W,
              q7: !0,
              sub: [
                { name: [18, 1], _9: "set/union" },
                { name: [18, 2], _9: "set/difference" },
                { name: [18, 3], _9: "set/intersection" },
                { name: [18, 4], _9: "set/xor" },
              ],
            },
            {
              name: [6, 58],
              f: W,
              q7: !0,
              sub: [
                { name: ["Make Frames"] },
                { name: ["Unmake Frames"] },
                { name: [18, 5] },
              ],
            },
            { name: [6, 12, 0], RP: [q, j.E], f: a_.Ka },
            { name: [6, 12, 1], f: W },
            { name: [2, 13], f: W },
          ],
          L1: [
            {
              sub: [
                { p: _.E.w, l: L.W1, d: { R: R.YJ } },
                { p: _.E.w, l: L.W1, d: { R: R._u } },
                { p: _.E.c, d: { R: _.Y.s0, kO: "newartb", io: 0 } },
                { p: _.E.c, d: { R: _.Y.s0, kO: "newartb", io: 1 } },
                { p: _.E.NI, d: { _D: "copyToLayer" } },
                { p: _.E.NI, d: { _D: "cutToLayer" } },
              ],
            },
            { p: _.E.w, l: L.W1, d: { R: R.iq } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "duplinto" } },
            { p: _.E.w, l: L.W1, d: { R: R.dh } },
            { sub: [{ p: _.E.w, l: L.W1, d: { R: R.ei } }] },
            { sub: fr.PM(!0) },
            {
              sub: [
                { p: _.E.w, l: L.HO, d: { R: "newfill", Sg: 0 } },
                { p: _.E.NI, d: L.jy.QQ(1) },
                { p: _.E.NI, d: L.jy.QQ(2) },
              ],
            },
            { sub: fr.Mp() },
            {
              sub: [
                { p: _.E.w, l: L.W1, d: { R: R.c5, io: "RvlA" } },
                { p: _.E.w, l: L.W1, d: { R: R.c5, io: "HdAl" } },
                { p: _.E.w, l: L.W1, d: { R: R.c5, io: "RvlS" } },
                { p: _.E.w, l: L.W1, d: { R: R.c5, io: "HdSl" } },
                { p: _.E.w, l: L.W1, d: { R: R.c5, io: "Trns" } },
                { p: _.E.w, l: L.W1, d: { R: R.zQ } },
                { p: _.E.w, l: L.W1, d: { R: R.yT } },
                { p: _.E.w, l: L.W1, d: { R: R.bQ } },
              ],
            },
            {
              sub: [
                { p: _.E.NI, d: L.Qc.Br(0) },
                { p: _.E.NI, d: L.Qc.Br(1) },
                { p: _.E.NI, d: L.Qc.Br(2) },
                { p: _.E.NI, d: L.Qc.Br(3) },
                { p: _.E.w, l: L.W1, d: { R: R.d3 } },
              ],
            },
            { p: _.E.w, l: L.W1, d: { R: R.vu } },
            jv.dp(!1),
            {
              p: _.E.NI,
              d: {
                _D: "rasterizeLayer",
                SC: { classID: "rasterizeLayer", null: jw.$W("Lyr", !0) },
              },
            },
            {
              p: _.E.NI,
              d: {
                _D: "rasterizeLayer",
                SC: {
                  classID: "rasterizeLayer",
                  null: jw.$W("Lyr", !0),
                  What: { t: "enum", v: { rasterizeItem: "layerStyle" } },
                },
              },
            },
            { p: _.E.w, l: L.W1, d: { R: R._k } },
            {
              sub: [
                { p: _.E.w, l: L.W1, d: { R: R.Wh, _G: 0 } },
                { p: _.E.w, l: L.W1, d: { R: R.Wh, _G: 1 } },
                { p: _.E.w, l: L.W1, d: { R: R.Wh, _G: 2 } },
                { p: _.E.w, l: L.W1, d: { R: R.Wh, _G: 3 } },
              ],
            },
            {
              sub: [
                { p: _.E.w, l: L.W1, d: { R: R._6, hV: 0 } },
                { p: _.E.w, l: L.W1, d: { R: R._6, hV: 1 } },
                { p: _.E.w, l: L.W1, d: { R: R._6, hV: 2 } },
                { p: _.E.w, l: L.W1, d: { R: R._6, hV: 3 } },
              ],
            },
            {
              sub: [
                { p: _.E.w, l: L.W1, d: { R: R.Pk, _G: "makeframes" } },
                { p: _.E.w, l: L.W1, d: { R: R.Pk, _G: "unmakeframes" } },
                { p: _.E.w, l: L.W1, d: { R: R.Pk, _G: "merge" } },
              ],
            },
            {
              p: _.E.NI,
              d: {
                _D: "mergeLayersNew",
                SC: { __name: "Merge Layers", classID: "Mrg2" },
              },
            },
            { p: _.E.NI, d: { _D: "flattenImage" } },
            { p: _.E.w, l: L.b_, d: { R: "start", aA: "defr" } },
          ],
        },
        jv.amq(!1),
        (function () {
          var v = {
            name: [0, 6],
            items: [{ name: [24, 18, 4], RP: [n, q, j.gM], f: W, q7: !0 }],
            L1: [{ p: _.E.w, l: L.b_, d: { R: "applylast" } }],
          };
          for (var y = 0; y < k0.YW.length; y++) {
            var K = k0.YW[y],
              S = K.nw;
            if (K.pH != null) {
              var o = { name: k0.names[K.pH], QU: !0, q7: K.q7, f: W };
              if (K.pH == "VaPo") o.f = k;
              v.items.push(o);
              v.L1.push({ p: _.E.w, l: L.b_, d: { R: "start", aA: K.pH } });
              continue;
            }
            var V = { name: K.NC, sub: [], f: W };
            v.items.push(V);
            var P = { sub: [] };
            v.L1.push(P);
            for (var z = 0; z < S.length; z++) {
              var E = S[z],
                A = k0.names[E];
              if (E == "blurbTransform") A = [24, 3, 12, z];
              var N = { name: A, QU: k0.i4(E) != null };
              V.sub.push(N);
              var Q = {
                p: _.E.w,
                l: L.b_,
                d: { R: "start", aA: E, a5A: z < 2 ? z : z + 1 },
              };
              P.sub.push(Q);
            }
          }
          return v;
        })(),
        {
          name: [0, 7],
          items: [
            { name: [8, 0], f: W, RP: [q, j.h5] },
            { name: [8, 1], f: W, RP: [q, j.Nc] },
            { name: [20, 3], f: W, RP: [q, j.Uj] },
            { name: [20, 2], f: W, RP: [q, j.kF] },
            {
              name: [8, 14],
              f: function (v, K) {
                return { f: v != null, Wr: v != null && v.EK };
              },
              q7: !0,
            },
            {
              name: [12, 36],
              q7: !0,
              sub: [
                {
                  name: "Fullscreen",
                  f: function (v, K) {
                    return { Wr: document.fullscreenElement != null };
                  },
                  q7: !0,
                },
                {
                  name: "Standard",
                  f: function (v, K) {
                    return { Wr: K.ws == 0 };
                  },
                },
                {
                  name: "Menu Bar and Canvas",
                  f: function (v, K) {
                    return { Wr: K.ws == 1 };
                  },
                },
              ],
            },
            {
              name: [8, 13],
              RP: [q, j.jF],
              f: function (v, K) {
                return { Wr: K.x_ };
              },
            },
            {
              name: [8, 12],
              q7: !0,
              sub: [
                {
                  name: [17, 2],
                  f: function (v, K) {
                    return { f: K.x_, Wr: K.q1.hl };
                  },
                },
                {
                  name: [8, 9],
                  f: function (v, K) {
                    return { f: K.x_, Wr: K.q1.GA };
                  },
                },
                {
                  name: [8, 2],
                  f: function (v, K) {
                    return { f: K.x_, Wr: K.q1.M3 };
                  },
                  RP: [q, j.WU],
                },
                {
                  name: [8, 4],
                  f: function (v, K) {
                    return { f: K.x_, Wr: K.q1.GX };
                  },
                  RP: [q, j.d0],
                },
                {
                  name: [8, 8],
                  f: function (v, K) {
                    return { f: K.x_, Wr: K.q1.HT };
                  },
                },
                {
                  name: [8, 11, 0],
                  f: function (v, K) {
                    return { f: K.x_, Wr: K.q1.gQ };
                  },
                },
              ],
            },
            {
              name: [8, 3],
              f: function (v, K) {
                return { Wr: K.sB };
              },
              RP: [q, j.Fb],
              q7: !0,
            },
            {
              name: [8, 5],
              f: function (v, K) {
                return { Wr: K.m0 };
              },
            },
            {
              name: [8, 6],
              q7: !0,
              sub: [
                {
                  name: [8, 2],
                  f: function (v, K) {
                    return { Wr: K.b0[0] };
                  },
                },
                {
                  name: [8, 4],
                  f: function (v, K) {
                    return { Wr: K.b0[1] };
                  },
                },
                {
                  name: [9, 1],
                  f: function (v, K) {
                    return { Wr: K.b0[2] };
                  },
                },
                {
                  name: [8, 11, 0],
                  f: function (v, K) {
                    return { Wr: K.b0[3] };
                  },
                },
                {
                  name: [8, 7, 0],
                  f: function (v, K) {
                    return { Wr: K.b0[4] };
                  },
                },
              ],
            },
            {
              name: [11, 15, 2],
              f: function (v, K) {
                return { f: v != null, Wr: v != null && v.zg };
              },
            },
            { name: [11, 15, 0], f: W },
            { name: [11, 14], f: W, QU: !0 },
            {
              name: [11, 15, 1],
              f: function (v, K) {
                return { f: v != null && v.J.length != 0 };
              },
              q7: !0,
            },
            {
              name: [8, 11, 2],
              f: function (v, K) {
                return { f: v != null && v.gQ.length != 0 };
              },
            },
          ],
          L1: [
            { p: _.E.w, l: L.R2, d: { R: "zoom", Ow: !0 } },
            { p: _.E.w, l: L.R2, d: { R: "zoom", Ow: !1 } },
            { p: _.E.w, l: L.R2, d: { R: "adapt", K: "fitscr" } },
            { p: _.E.w, l: L.R2, d: { R: "adapt", K: "pixel" } },
            { p: _.E.w, l: L.Lx, d: { R: "pview" } },
            {
              sub: [
                { p: _.E.c, d: { R: _.Y.VU, CQ: !0 } },
                { p: _.E.c, d: { R: _.Y.VU, K: 0 } },
                { p: _.E.c, d: { R: _.Y.VU, K: 1 } },
                { p: _.E.c, d: { R: _.Y.VU, K: 2 } },
              ],
            },
            { p: _.E.c, d: { R: _.Y.fh, rw: fG.rf } },
            {
              sub: [
                { p: _.E.c, d: { R: _.Y.fh, rw: fG.uW } },
                { p: _.E.c, d: { R: _.Y.fh, rw: fG.yt } },
                { p: _.E.c, d: { R: _.Y.fh, rw: fG.EE } },
                { p: _.E.c, d: { R: _.Y.fh, rw: fG.ZB } },
                { p: _.E.c, d: { R: _.Y.fh, rw: fG.t2 } },
                { p: _.E.c, d: { R: _.Y.fh, rw: fG.V2 } },
              ],
            },
            { p: _.E.c, d: { R: _.Y.fh, rw: fG.NE } },
            { p: _.E.c, d: { R: _.Y.fh, rw: fG.aCJ } },
            {
              sub: [
                { p: _.E.c, d: { R: _.Y.fh, rw: fG.kn, bn: 0 } },
                { p: _.E.c, d: { R: _.Y.fh, rw: fG.kn, bn: 1 } },
                { p: _.E.c, d: { R: _.Y.fh, rw: fG.kn, bn: 2 } },
                { p: _.E.c, d: { R: _.Y.fh, rw: fG.kn, bn: 3 } },
                { p: _.E.c, d: { R: _.Y.fh, rw: fG.kn, bn: 4 } },
              ],
            },
            { p: _.E.w, l: L.Lx, d: { R: "lockguides" } },
            { p: _.E.w, l: L.Lx, d: { R: "gids", MK: [[], []] } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "addguides" } },
            { p: _.E.w, l: L.Lx, d: { R: "gidsFromLayer" } },
            { p: _.E.w, l: L.Y8, d: { R: "deleteAll" } },
          ],
        },
        (function () {
          var v = {
            name: [0, 8],
            items: [
              { name: [0, 14], q7: !0, sub: [] },
              { name: "Plugins", q7: !0 },
            ],
            L1: [{ sub: [] }, { p: _.E.c, d: { R: _.Y.s0, kO: "res1" } }],
          };
          for (var y = 0; y < g9.cp.length; y++) {
            var K = g9.cp[y],
              S = (function () {
                var o = K.Tf.My;
                return function (V, P) {
                  return { Wr: P.z6.indexOf(parseInt(o)) != -1 };
                };
              })();
            (K.Ey ? v.items[0].sub : v.items).push({ name: K.Tf.name, f: S });
            (K.Ey ? v.L1[0].sub : v.L1).push({
              p: _.E.c,
              d: { R: _.Y.UN, kO: K.Tf.My },
            });
          }
          return v;
        })(),
        (function () {
          var v = { name: [0, 14], items: [], L1: [] },
            K = { name: [0, 9], sub: [] };
          v.items.push(K);
          var S = { sub: [] };
          v.L1.push(S);
          var o = g$.aHS();
          for (var y = 0; y < o.length; y++) {
            var V = o[y],
              P = V.code,
              z = g$.ayF(P);
            K.sub.push({
              name: V.name,
              RP: P,
              f: function (E, A) {
                return { Wr: this.RP == g$.Qr() };
              },
            });
            S.sub.push({ p: _.E.c, d: { R: _.Y.fh, rw: fG.p0, lang: z } });
          }
          K.sub.push({ name: [0, 12] });
          S.sub.push({
            p: _.E.c,
            d: { R: _.Y.p8, link: "https://www.photopea.com/translate/" },
          });
          var K = { name: [0, 15], sub: [] };
          v.items.push(K);
          var S = { sub: [] };
          v.L1.push(S);
          for (var y = 0; y < cW.LC.length; y++) {
            K.sub.push({
              name: cW.LC[y].name,
              f: function (E, A) {
                return { Wr: this.name == cW.LC[A.U6].name };
              },
            });
            S.sub.push({ p: _.E.c, d: { R: _.Y.fh, rw: fG.LS, U6: y } });
          }
          v.items.push({
            name: ei == 0 ? [0, 17, 6] : "Install Vectorpea",
            f: function (E, A) {
              return { f: A.qR != null };
            },
          });
          v.L1.push({ p: _.E.c, d: { R: _.Y.XJ } });
          if (ei == 0) {
            v.items.push({ name: [11, 13] });
            v.L1.push({ p: _.E.c, d: { R: _.Y.s0, kO: "shortcuts" } });
            v.items.push({
              name: [0, 16],
              f: function (E) {
                return { Wr: fS.tx, f: fS.aDJ };
              },
              q7: !0,
            });
            v.L1.push({ p: _.E.c, d: { R: _.Y.aJV } });
          }
          v.items.push({ name: "PeaMark" });
          v.L1.push({ p: _.E.c, d: { R: _.Y.s0, kO: "peamark" } });
          v.items.push({
            name: "",
            f: function (E, A) {
              return A.Nf
                ? { sO: "About " + ["Photopea", "Vectorpea"][ei], f: !0 }
                : { sO: "", f: !1 };
            },
          });
          v.L1.push({ p: _.E.c, d: { R: _.Y.s0, kO: "aboutpp" } });
          return v;
        })(),
      ],
      H = [
        $[0],
        {
          name: [0, 1],
          items: [
            { name: [2, 8], f: W },
            { name: [2, 0], f: W, RP: [m, q, j.AQ] },
            { name: [2, 1], f: W, RP: [q, j.AQ], q7: !0 },
            c[0][0],
            c[0][1],
            {
              name: [5, 7],
              RP: [m, q, j.dV],
              f: function (v) {
                return { f: v != null && v.h != null };
              },
            },
            c[0][2],
            c[0][3],
            { name: [10, 16], f: W, RP: [n, q, j.a_] },
            { name: [2, 4], f: W, sub: ic.oc() },
            { name: "Assign Profile", sub: a },
            { name: "Convert to Profile", sub: a, q7: !0 },
            {
              name: [12, 87],
              f: W,
              sub: [
                { name: [9, 3], f: W },
                {
                  name: [10, 31],
                  f: function (v) {
                    return { f: v != null && v.ac()[1].length != 0 };
                  },
                },
              ],
            },
            { name: [1, 15], QU: !0 },
            { name: [12, 79], QU: !0, RP: [q, j.aj] },
            { name: [1, 13], QU: !0 },
          ],
          L1: [
            { p: _.E.w, l: L.cJ, d: { R: "h_undoredo" } },
            { p: _.E.w, l: L.cJ, d: { R: "h_stepfwd" } },
            { p: _.E.w, l: L.cJ, d: { R: "h_stepbck" } },
            c[1][0],
            c[1][1],
            { p: _.E.c, d: { R: _.Y.sp, eN: !0 } },
            c[1][2],
            c[1][3],
            { p: _.E.c, d: { R: _.Y.UK, l: L.Fg } },
            { sub: ic.Bg() },
            { sub: f },
            { sub: U },
            {
              sub: [
                { p: _.E.c, d: { R: _.Y.Gg, rw: 1 } },
                { p: _.E.c, d: { R: _.Y.Gg, rw: 2 } },
              ],
            },
            { p: _.E.c, d: { R: _.Y.s0, kO: "pmanager" } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "preferences" } },
            { p: _.E.c, d: { R: _.Y.s0, kO: "locstor" } },
          ],
        },
        {
          name: "Object",
          items: [
            {
              name: [2, 4],
              f: W,
              q7: !0,
              sub: [
                { name: [12, 54] },
                { name: [2, 5] },
                { name: "Reflect" },
                { name: [12, 38] },
              ],
            },
            { name: [6, 9], f: W, q7: !0, RP: [q, j.Vj] },
            {
              name: [6, 6, 0],
              sub: [
                { name: [5, 5], RP: [q, j.bY] },
                { name: [5, 6], RP: [n, q, j.bY] },
              ],
            },
            {
              name: "Compound Path",
              sub: [
                { name: "Make", f: b },
                { name: "Release", f: b },
              ],
            },
            { name: [1, 16, 1], sub: [{ name: "Fit to Artwork Bounds" }] },
          ],
          L1: [
            {
              sub: [
                { p: _.E.c, d: { R: _.Y.s0, kO: "transform", _G: 0 } },
                { p: _.E.c, d: { R: _.Y.s0, kO: "transform", _G: 1 } },
                { p: _.E.c, d: { R: _.Y.s0, kO: "transform", _G: 2 } },
                { p: _.E.c, d: { R: _.Y.s0, kO: "transform", _G: 3 } },
                { p: _.E.c, d: { R: _.Y.s0, kO: "transform", _G: 4 } },
              ],
            },
            { p: _.E.w, l: L.W1, d: { R: R._k } },
            {
              sub: [
                { p: _.E.w, l: L.W1, d: { R: R._k, wp: !0 } },
                { p: _.E.w, l: L.W1, d: { R: R._k, wp: !0, V_: !0 } },
              ],
            },
            {
              sub: [
                { p: _.E.w, l: L.W1, d: { R: R._6, hV: 0 } },
                { p: _.E.w, l: L.W1, d: { R: R.agg } },
              ],
            },
            { sub: [{ p: _.E.w, l: L.eO, d: { R: "adapt" } }] },
          ],
        },
        {
          name: [0, 7],
          items: [
            {
              name: "Outline View",
              f: function (v, K) {
                return { Wr: v && v.add.prvw == 0, f: v != null };
              },
              q7: !0,
              RP: [q, j.by],
            },
            { name: [8, 0], f: W, RP: [q, j.h5] },
            { name: [8, 1], f: W, RP: [q, j.Nc] },
            {
              name: [12, 36],
              q7: !0,
              sub: [
                {
                  name: "Fullscreen",
                  f: function (v, K) {
                    return { Wr: document.fullscreenElement != null };
                  },
                  q7: !0,
                },
                {
                  name: "Standard",
                  f: function (v, K) {
                    return { Wr: K.ws == 0 };
                  },
                },
                {
                  name: "Menu Bar and Canvas",
                  f: function (v, K) {
                    return { Wr: K.ws == 1 };
                  },
                },
              ],
            },
            {
              name: [8, 3],
              f: function (v, K) {
                return { Wr: K.sB };
              },
              RP: [q, j.Fb],
            },
          ],
          L1: [
            { p: _.E.w, l: L.R2, d: { R: "prvw" } },
            { p: _.E.w, l: L.R2, d: { R: "zoom", Ow: !0 } },
            { p: _.E.w, l: L.R2, d: { R: "zoom", Ow: !1 } },
            {
              sub: [
                { p: _.E.c, d: { R: _.Y.VU, CQ: !0 } },
                { p: _.E.c, d: { R: _.Y.VU, K: 0 } },
                { p: _.E.c, d: { R: _.Y.VU, K: 1 } },
              ],
            },
            { p: _.E.c, d: { R: _.Y.fh, rw: fG.NE } },
          ],
        },
        $[7],
        $[8],
      ];
    function C(v, K) {
      var S = { name: v.name, items: [], L1: [] };
      for (var y = 0; y < K.length; y++) {
        var o = K[y];
        S.items.push(v.items[o]);
        S.L1.push(v.L1[o]);
      }
      return S;
    }
    var l = [
      C($[0], [0, 1, 6]),
      C($[1], [0, 1, 2, 4, 5, 7, 8]),
      C($[3], [0, 1, 2, 3]),
      C($[4], [0, 1]),
      C($[6], [0, 1]),
      $[8],
    ];
    return ei == 0 ? $ : ei == 1 ? H : l;
  })();
  function gL() {
    kV.call(this);
    this._ = J.m("div", "");
    this.A2 = 0;
    this.mc = 0;
    this.a = null;
    this.zd = J.m("div", "");
    J.F(this.zd, "width:200em; height:100em; position:absolute;");
    this.Wc = [];
    this.m1 = [];
    this.QS = {};
  }
  gL.prototype = new kV();
  gL.prototype.No = function (j) {
    var q = Date.now(),
      m = [];
    if (j == "-") {
      m = [
        new eE(),
        new iw(),
        new cq(),
        new eL("pdfpres"),
        new eL("cformat"),
        new eL("batch"),
        new eL("mockups"),
        new eL("resize"),
        new fF(),
        new a0(),
        new bE(),
        new lt(),
        new lt(!0),
        new hm(),
        new kC(),
        new bG(),
        new lr(),
        new c5(),
        new jo(),
        new at(),
        new bY(),
        new ey(),
        new aR(),
        new fr(),
        new fT("isize"),
        new fT("csize"),
        new fo(),
        new c8(),
        new d9(),
        new jT(),
        new ht(),
        new ba(),
        new jJ(),
        new c1(),
        new bf(!1),
        new bf(!0),
        new aG(0),
        new aG(1),
        new hJ(),
        new fq(),
        new dx(),
        new cD(),
        new cB(),
        new l1(),
        new ec(0),
        new ec(1),
        new ec(2),
        new ec(3),
        new ec(4),
        new ec(5),
        new ec(6),
        new ec(7),
        new ec(8),
        new bT(),
        new er(),
        new kl(),
        new e9(),
        new kf(),
        new ls(),
        new kT(),
        new dW(),
        new fh(),
        new bv(),
        new fU(0),
        new fU(1),
        new ju("border", [7, 9], "px"),
        new ju("smoothness", [19, 3, 0], "px"),
        new ju("expand", [7, 4], "px"),
        new ju("contract", [7, 5], "px"),
        new ju("feather", [7, 6], "px"),
        new bp(0, "namewindow", [12, 48]),
        new bp(2, "billto", "Bill To"),
        new bp(1, "cornerradius", [12, 94, 0], "px", !0, !0),
        new bp(1, "scaleeffects", [6, 30, 1], "%", !0),
        new bp(1, "doczoom", "Zoom", "%", !0),
        new bp(1, "setFPS", "Set FPS", "fps,120", !1),
        new bp(1, "simplifypath", [12, 94, 2], "%,100", !0, !0),
        new fy(),
      ];
      if (ei == 0) {
        m.push(new eA());
      }
    } else m = [new i1(j.slice(4))];
    this.ad$(m);
    this.QS[j] = !0;
  };
  gL.prototype.ad$ = function (j) {
    var q = this.a;
    for (var y = 0; y < j.length; y++) {
      var m = j[y];
      m.parent = this;
      this.m1.push(m);
      this.y3(m);
      m.T();
      if (q) m.yp(q, fG.HN);
      m.Q(_.E.bg, this.j9, this);
      J.P5(m);
    }
  };
  gL.prototype.X3 = function (j, q) {
    this.A2 = j;
    this.mc = q;
    for (var y = 0; y < this.m1.length; y++) this.y3(this.m1[y]);
  };
  gL.prototype.T = function () {
    for (var y = 0; y < this.m1.length; y++) this.m1[y].T();
  };
  gL.prototype.BS = function () {
    return this.Wc.length == 0 ? null : this.Wc[this.Wc.length - 1];
  };
  gL.prototype.bx = function () {
    for (var y = 0; y < this.Wc.length; y++) if (this.Wc[y].bx()) return !0;
    return !1;
  };
  gL.prototype.alk = function (j, q, m, n, G) {
    console.log("Show", j);
    var W = j.startsWith("afw_"),
      k = null;
    if (!W && !this.QS["-"]) this.No("-");
    if (W && !this.QS[j]) this.No(j);
    if (typeof j == "object") {
      k = j;
      if (!k.aCY(_.E.bg, this.j9)) k.Q(_.E.bg, this.j9, this);
      k.parent = this;
    } else
      for (var y = 0; y < this.m1.length; y++)
        if (this.m1[y].id == j) k = this.m1[y];
    if (this.bx() && k.bx()) {
      alert("Finish the current action first");
      return;
    }
    if (!k._j(q)) return;
    if (this.Wc.indexOf(k) != -1) {
      if (j == "colorpicker") this.j9(null, k);
      else return;
    }
    var T = this.Wc.length - 1;
    if (T >= 0) J._g(this.Wc[T]._, "wdisabled");
    this._.appendChild(k._);
    this.Wc.push(k);
    this.y3(k);
    J.ic(k);
    k.Wz(q, m, n, G);
  };
  gL.prototype.y3 = function (j) {
    var q = this.A2,
      m = this.mc,
      n = j.lu(q, m),
      G;
    if (n != null) {
      G = n;
    } else {
      n = new ea(0, 0);
      G = j.arI();
      if (G == null) {
        var W = this.Wc.indexOf(j) + 1;
        if (q < 450 || m < 450) G = new ea(0, 0);
        else G = new ea(W * 150, W * 150);
      }
    }
    j._.style.left = G.x + "px";
    j._.style.top = this._.offsetTop + G.y + "px";
    j.X3(this.A2 - n.x * 2, this.mc - n.y * 2 - 34);
  };
  gL.prototype.yp = function (j, q) {
    this.a = j;
    for (var y = 0; y < this.m1.length; y++) this.m1[y].yp(j, q);
  };
  gL.prototype.j9 = function (j, q) {
    if (q == null) {
      q = this.Wc.pop();
      J.P5(q, this._);
    } else {
      this.Wc.splice(this.Wc.indexOf(q), 1);
      this._.removeChild(q._);
      J.XZ(q._, "wdisabled");
    }
    var m = this.Wc.length - 1;
    if (m >= 0) J.XZ(this.Wc[m]._, "wdisabled");
    if (this.zd.parentNode == this._) this._.removeChild(this.zd);
  };
  document.body.appendChild(new ll()._);
})();
